"use strict";(self.webpackChunk_grafana_ui=self.webpackChunk_grafana_ui||[]).push([[5444],{"../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/dataframe/processDataFrame.ts":function(He,Se,L){L.d(Se,{sV:function(){return Ze},fu:function(){return ae},LI:function(){return ue},aY:function(){return Le},z4:function(){return rt},aK:function(){return nt},og:function(){return it}});var $=L("../../../yarn/cache/lodash-npm-4.17.21-6382451519-c08619c038.zip/node_modules/lodash/lodash.js"),K=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/moment_wrapper.ts"),I=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts");const ne=(l,d=!1)=>{const S=l.values;switch(l.type){case I.fS.number:return xe(S,d);case I.fS.string:return pe(S,d);case I.fS.boolean:return Ae(S,d);case I.fS.time:return typeof l.values[0]=="number"?de(S,d):Te(S,d);default:return he(d)}},j=(l,d)=>{if(!l||!d)return v(l,d);if((0,$.isNumber)(l)&&(0,$.isNumber)(d))return Oe(l,d);if((0,K.D2)(l)&&(0,K.D2)(d)){if((0,K.CQ)(l).isBefore(d))return-1;if((0,K.CQ)(d).isBefore(l))return 1}return 0},Oe=(l,d)=>l-d,V=(l,d)=>!l||!d?v(l,d):l.localeCompare(d),Me=(l,d)=>v(l,d),v=(l,d)=>!l&&d?1:l&&!d?-1:0,de=(l,d)=>{let S=d?-1:1;return(T,k)=>S*(l[T]-l[k])},Te=(l,d)=>(S,T)=>{const k=l[S],z=l[T];return d?j(z,k):j(k,z)},Ae=(l,d)=>(S,T)=>{const k=l[S],z=l[T];return d?Me(z,k):Me(k,z)},xe=(l,d)=>(S,T)=>{const k=l[S],z=l[T];return d?Oe(z,k):Oe(k,z)},pe=(l,d)=>(S,T)=>{const k=l[S],z=l[T];return d?V(z,k):V(k,z)},he=l=>(d,S)=>l?Oe(S,d):Oe(d,S);var Ie=Object.defineProperty,we=Object.defineProperties,le=Object.getOwnPropertyDescriptors,se=Object.getOwnPropertySymbols,ve=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,M=(l,d,S)=>d in l?Ie(l,d,{enumerable:!0,configurable:!0,writable:!0,value:S}):l[d]=S,_=(l,d)=>{for(var S in d||(d={}))ve.call(d,S)&&M(l,S,d[S]);if(se)for(var S of se(d))x.call(d,S)&&M(l,S,d[S]);return l},D=(l,d)=>we(l,le(d)),J=(l,d)=>{var S={};for(var T in l)ve.call(l,T)&&d.indexOf(T)<0&&(S[T]=l[T]);if(l!=null&&se)for(var T of se(l))d.indexOf(T)<0&&x.call(l,T)&&(S[T]=l[T]);return S};function A(l){const d=l.columns.map(S=>{const T=S,{text:k,type:z}=T,Y=J(T,["text","type"]),ce=[];return{name:k?.length?k:S,config:Y||{},values:ce,type:z&&Object.values(FieldType).includes(z)?z:FieldType.other}});if(!isArray(l.rows))throw new Error(`Expected table rows to be array, got ${typeof l.rows}.`);for(const S of l.rows)for(let T=0;T<d.length;T++)d[T].values.push(S[T]);for(const S of d)if(S.type===FieldType.other){const T=ae(S);T&&(S.type=T)}return{fields:d,refId:l.refId,meta:l.meta,name:l.name,length:l.rows.length}}function U(l){const d=[],S=[],T=l.datapoints||l.points;for(const z of T)S.push(z[0]),d.push(z[1]);const k=[{name:TIME_SERIES_TIME_FIELD_NAME,type:FieldType.time,config:{},values:d},{name:TIME_SERIES_VALUE_FIELD_NAME,type:FieldType.number,config:{unit:l.unit},values:S,labels:l.tags}];return l.title&&(k[1].config.displayNameFromDS=l.title),{name:l.target||l.name,refId:l.refId,meta:l.meta,fields:k,length:S.length}}function G(l){const d=[],S=[];for(let T=0;T<l.data.length;T++){const k=l.data[T];d.push(k[1]),S.push(k[0])}return{name:l.label,fields:[{name:l.label||TIME_SERIES_VALUE_FIELD_NAME,type:FieldType.number,config:{},values:d},{name:TIME_SERIES_TIME_FIELD_NAME,type:FieldType.time,config:{unit:"dateTimeAsIso"},values:S}],length:d.length}}function H(l){const d=[{name:l.target,type:FieldType.other,labels:l.tags,config:{unit:l.unit,filterable:l.filterable},values:[]}];for(const S of l.datapoints)d[0].values.push(S);return{name:l.target,refId:l.target,meta:{json:!0},fields:d,length:l.datapoints.length}}const te=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function Q(l,d){return l&&(l=l.toLowerCase(),l==="date"||l==="time")?FieldType.time:ue(d)}function re(l){return l instanceof Date||isDateTime(l)?FieldType.time:isNumber(l)?FieldType.number:isString(l)?FieldType.string:isBoolean(l)?FieldType.boolean:FieldType.other}function ue(l){return l instanceof Date||(0,K.v9)(l)?I.fS.time:(0,$.isNumber)(l)?I.fS.number:(0,$.isString)(l)?te.test(l)?I.fS.number:l==="true"||l==="TRUE"||l==="True"||l==="false"||l==="FALSE"||l==="False"?I.fS.boolean:I.fS.string:(0,$.isBoolean)(l)?I.fS.boolean:I.fS.other}function ae(l){if(l.name){const d=l.name.toLowerCase();if(d==="date"||d==="time")return I.fS.time}for(let d=0;d<l.values.length;d++){const S=l.values[d];if(S!=null)return ue(S)}}const _e=(l,d=!1)=>{for(const S of l.fields)if(!S.type||S.type===FieldType.other||d)return D(_({},l),{fields:l.fields.map(T=>T.type&&T.type!==FieldType.other&&!d?T:D(_({},T),{type:ae(T)||FieldType.other}))});return l},Ce=l=>!!(l&&l.hasOwnProperty("columns")),Le=l=>!!(l&&l.hasOwnProperty("fields")),rt=l=>!!(Le(l)&&l.hasOwnProperty("value"));function $e(l){var d,S;if("fields"in l)return"length"in l&&((S=(d=l.fields[0])==null?void 0:d.values)!=null&&S.get)?l:ot(l);if(l.hasOwnProperty("type")&&l.type==="docs")return H(l);if(l.hasOwnProperty("datapoints")||l.hasOwnProperty("points"))return U(l);if(l.hasOwnProperty("data"))return l.hasOwnProperty("schema")?dataFrameFromJSON(l):G(l);if(l.hasOwnProperty("columns"))return A(l);if(Array.isArray(l))return arrayToDataFrame(l);throw console.warn("Can not convert",l),new Error("Unsupported data format")}const mt=l=>{const{fields:d}=l,S=l.length,T=[];if(d.length===2){const{timeField:k,timeIndex:z}=Ze(l);if(k){const ce=d[z===0?1:0],X=d[z];for(let Re=0;Re<S;Re++)T.push([ce.values[Re],X.values[Re]]);return{alias:l.name,target:getFieldDisplayName(ce,l),datapoints:T,unit:d[0].config?d[0].config.unit:void 0,refId:l.refId,meta:l.meta}}}for(let k=0;k<S;k++){const z=[];for(let Y=0;Y<d.length;Y++)z.push(d[Y].values[k]);T.push(z)}return l.meta&&l.meta.json?{alias:d[0].name||l.name,target:d[0].name||l.name,datapoints:d[0].values,filterable:d[0].config?d[0].config.filterable:void 0,type:"docs"}:{columns:d.map(k=>{const{name:z,config:Y}=k;if(Y){const ce=J(Y,[]);return ce.text=z,ce}return{text:z}}),type:"table",refId:l.refId,meta:l.meta,rows:T}};function nt(l,d,S=!1){const T=l.fields[d];if(!T)return l;const k=[];for(let Y=0;Y<l.length;Y++)k.push(Y);const z=ne(T,S);return k.sort(z),D(_({},l),{fields:l.fields.map(Y=>{const ce=D(_({},Y),{values:Y.values.map((Re,Ve)=>Y.values[k[Ve]])}),{nanos:X}=Y;return X!==void 0&&(ce.nanos=X.map((Re,Ve)=>X[k[Ve]])),ce})})}function at(l){return D(_({},l),{fields:l.fields.map(d=>{const S=[...d.values];S.reverse();const T=D(_({},d),{values:S}),{nanos:k}=d;if(k!==void 0){const z=[...k];z.reverse(),T.nanos=z}return T})})}function gt(l,d){const S=[];for(const T of l.fields)S.push(T.values[d]);return S}function it(l){return lt(l)}function lt(l,d){return{fields:(d?l.fields.filter(d):l.fields).map(k=>{let z=k.values;return{name:k.name,type:k.type,config:k.config,values:z,labels:k.labels}}),refId:l.refId,meta:l.meta,name:l.name}}const Ze=l=>{for(let d=0;d<l.fields.length;d++)if(l.fields[d].type===I.fS.time)return{timeField:l.fields[d],timeIndex:d};return{}};function We(l){const d=_e($e(l));if(d.fields&&d.fields.length)for(const S of d.fields)S.state=null;return d}function st(l){return!l||!isArray(l)?[]:l.map(d=>We(d))}function Je(l,d){const{series:S,annotations:T}=l;if(l.state===LoadingState.Loading&&S.length===0)return d||(d=l),D(_({},d),{state:LoadingState.Loading,request:l.request});const k=performance.now(),z=S.map(X=>We(X)),Y=st(T),ce=performance.now();return D(_({},l),{series:z,annotations:Y,timings:{dataProcessingTime:ce-k}})}function ot(l){let d=0;const S=l.fields.map((T,k)=>{var z;const Y=T,{state:ce}=Y,X=J(Y,["state"]);return X.name||(X.name=`Field ${k+1}`),X.config||(X.config={}),X.values?X.values.length>d&&(d=X.values.length):X.values=new Array(d),X.type||(X.type=(z=ae(X))!=null?z:FieldType.other),X});return D(_({},l),{fields:S,length:d})}},"../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/timezones.ts":function(He,Se,L){L.d(Se,{$8:function(){return ve},Pr:function(){return le},RQ:function(){return he},Vs:function(){return Ie},nA:function(){return we}});var $=L("../../../yarn/cache/lodash-npm-4.17.21-6382451519-c08619c038.zip/node_modules/lodash/lodash.js"),K=L.n($),I=L("../../../yarn/cache/moment-timezone-npm-0.5.43-1304d8602a-f8b66f8562.zip/node_modules/moment-timezone/index.js"),ne=L.n(I),j=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/common.ts"),Oe=Object.defineProperty,V=Object.defineProperties,Me=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable,Ae=(A,U,G)=>U in A?Oe(A,U,{enumerable:!0,configurable:!0,writable:!0,value:G}):A[U]=G,xe=(A,U)=>{for(var G in U||(U={}))de.call(U,G)&&Ae(A,G,U[G]);if(v)for(var G of v(U))Te.call(U,G)&&Ae(A,G,U[G]);return A},pe=(A,U)=>V(A,Me(U)),he=(A=>(A.default="",A.localBrowserTime="browser",A.utc="utc",A))(he||{});const Ie=A=>{switch((0,j.Z)({timeZone:A})){case"browser":return"Local browser time";case"utc":return"UTC";default:return A}},we=A=>ne().tz.zone(A),le=(A,U)=>{const G=x(A,U);return G||_(A,U)},se=(0,$.memoize)((A=!1)=>{const U=[];return A===!0?U.push("","browser","utc"):A&&U.push(...A),ne().tz.names().reduce((G,H)=>{const te=J[H];return!Array.isArray(te)||te.length===0||G.push(H),G},U)}),ve=(0,$.memoize)((A=!1)=>{const G=se(A).reduce((H,te)=>{var Q,re;const ue=te.indexOf("/");if(ue===-1){const _e="";return H[_e]=(Q=H[_e])!=null?Q:[],H[_e].push(te),H}const ae=te.slice(0,ue);return H[ae]=(re=H[ae])!=null?re:[],H[ae].push(te),H},{});return Object.keys(G).map(H=>({name:H,zones:G[H]}))}),x=(A,U)=>{var G,H,te,Q;switch(A){case"utc":return{name:"Coordinated Universal Time",ianaName:"UTC",zone:A,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case"":{const re=(0,j.Z)(),ae=re==="browser"||re==="utc"?x(re,U):_(re,U);return pe(xe({countries:(G=J[re])!=null?G:[],abbreviation:"",offsetInMins:0},ae),{ianaName:(H=ae?.ianaName)!=null?H:"",name:"Default",zone:A})}case"browser":{const re=ne().tz.guess(!0),ue=_(re,U);return pe(xe({countries:(te=J[re])!=null?te:[],abbreviation:"Your local time",offsetInMins:new Date().getTimezoneOffset()},ue),{name:"Browser Time",ianaName:(Q=ue?.ianaName)!=null?Q:"",zone:A})}default:return}},M=A=>/^(\+|\-).+/.test(A)?"":A,_=(A,U)=>{var G;const H=ne().tz.zone(A);if(H)return{name:A,ianaName:H.name,zone:A,countries:(G=J[A])!=null?G:[],abbreviation:M(H.abbr(U)),offsetInMins:H.utcOffset(U)}},D={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},J=(()=>ne().tz.countries().reduce((A,U)=>ne().tz.zonesForCountry(U).reduce((H,te)=>{H[te]||(H[te]=[]);const Q=D[U];return Q&&H[te].push({code:U,name:Q}),H},A),{}))()},"../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/field/fieldState.ts":function(He,Se,L){L.d(Se,{CZ:function(){return we}});var $=L("../../../yarn/cache/lodash-npm-4.17.21-6382451519-c08619c038.zip/node_modules/lodash/lodash.js"),K=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts"),I=Object.defineProperty,ne=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable,V=(x,M,_)=>M in x?I(x,M,{enumerable:!0,configurable:!0,writable:!0,value:_}):x[M]=_,Me=(x,M)=>{for(var _ in M||(M={}))j.call(M,_)&&V(x,_,M[_]);if(ne)for(var _ of ne(M))Oe.call(M,_)&&V(x,_,M[_]);return x};const v=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function de(x){const M={};return x.replace(v,(_,D,J,A)=>(M[D]=A,"")),M}function Te(x){return x.reduce((M,_)=>{if(!_)throw new Error("Need parsed labels to find common labels.");return Object.keys(_).forEach(D=>{(M[D]===void 0||M[D]!==_[D])&&delete M[D]}),Object.keys(M).forEach(D=>{_[D]===void 0&&delete M[D]}),M},Me({},x[0]))}function Ae(x,M){const _=Me({},x);return Object.keys(M).forEach(D=>{delete _[D]}),_}function xe(x,M){if(!x)return!0;for(const[_,D]of Object.entries(x))if(!M||M[_]!==D)return!1;return!0}function pe(x,M="",_){if(!x||Object.keys(x).length===0)return M;const J=Object.keys(x).sort().map(A=>`${A}="${x[A]}"`).join(", ");return _?J:["{",J,"}"].join("")}function he(x,M){if(x.name)return x.name;const _=[];for(const D of x.fields)if(D.type!==FieldType.time){if(_.length>1)break;_.push(we(D,x))}return _.length===1?_[0]:M===void 0&&x.fields.length>0?x.fields.filter(D=>D.type!==FieldType.time).map(D=>we(D,x)).join(", "):x.refId?`Series (${x.refId})`:`Series (${M})`}function Ie(x){x.forEach(M=>{M.fields.forEach(_=>{we(_,M,x)})})}function we(x,M,_){var D,J;const A=(D=x.state)==null?void 0:D.displayName,U=!!(_&&_.length>1);if(A&&U===((J=x.state)==null?void 0:J.multipleFrames))return A;const G=le(x,M,_);return x.state=x.state||{},x.state.displayName=G,x.state.multipleFrames=U,G}function le(x,M,_){var D,J,A,U,G;const H=((D=x.config)==null?void 0:D.displayName)&&((J=x.config)==null?void 0:J.displayName.length),te=!!((U=(A=M?.meta)==null?void 0:A.timeCompare)!=null&&U.isTimeShiftQuery);let Q=H?x.config.displayName:x.name;if(H)return te?`${Q} (comparison)`:Q;if(M&&((G=x.config)!=null&&G.displayNameFromDS))return te?`${x.config.displayNameFromDS} (comparison)`:x.config.displayNameFromDS;if(x.type===K.fS.time&&!x.labels)return Q??K.Ls;let re=[],ue=!1;if(_&&_.length>1){for(let Ce=1;Ce<_.length;Ce++)if(_[Ce].name!==_[Ce-1].name){ue=!0;break}}let ae=!1,_e=!1;if(ue&&M?.name&&(re.push(M.name),ae=!0),x.name&&x.name!==K.M5&&re.push(x.name),x.labels&&M){let Ce=ve(_??[M]);if(Ce)x.labels[Ce]&&(re.push(x.labels[Ce]),_e=!0);else{let Le=pe(x.labels);Le&&(re.push(Le),_e=!0)}}return M&&!ae&&!_e&&x.name===K.M5&&M.name&&M.name.length>0&&(re.push(M.name),ae=!0),re.length?Q=re.join(" "):x.name?Q=x.name:Q=K.M5,Q===x.name&&(Q=se(x,M)),te&&(Q=`${Q} (comparison)`),Q}function se(x,M){let _=0,D=!1;if(M)for(let J=0;J<M.fields.length;J++){const A=M.fields[J];if((0,$.isEqual)(x,A)){if(D=!0,_>0){_++;break}}else if(x.name===A.name&&(_++,D))break}return _?`${x.name} ${_}`:x.name}function ve(x){let M=null;for(let _=0;_<x.length;_++){const D=x[_];for(const J of D.fields)if(J.labels){for(const A in J.labels)if(M===null)M=A;else if(A!==M)return null}}return M}},"../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/transformations/matchers.ts":function(He,Se,L){L.d(Se,{Ls:function(){return je},Ac:function(){return Ge},sq:function(){return Ye},b9:function(){return qe}});var $=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/utils/Registry.ts"),K=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts"),I=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/transformations/matchers/ids.ts");const ne={id:I.mi.byType,name:"Field Type",description:"match based on the field type",defaultOptions:K.fS.number,get:o=>(h,y,P)=>o===h.type,getOptionsDisplayText:o=>`Field type: ${o}`},j={id:I.mi.byTypes,name:"Field Type",description:"match based on the field types",defaultOptions:new Set,get:o=>(h,y,P)=>o.has(h.type),getOptionsDisplayText:o=>`Field types: ${[...o].join(" | ")}`},Oe={id:I.mi.numeric,name:"Numeric Fields",description:"Fields with type number",get:()=>ne.get(K.fS.number),getOptionsDisplayText:()=>"Numeric Fields"},V={id:I.mi.time,name:"Time Fields",description:"Fields with type time",get:()=>ne.get(K.fS.time),getOptionsDisplayText:()=>"Time Fields"};function Me(){return[ne,j,Oe,V]}var v=L("../grafana-schema/src/common/common.gen.ts"),de=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/transformations/fieldReducer.ts");function Te(o,h,y){switch((o==null||y==null)&&(o==null&&(o="null"),y==null&&(y="null"),(h===v.Bd.GTE||h===v.Bd.LTE)&&(h=v.Bd.EQ)),h){case v.Bd.EQ:return`${o}`==`${y}`;case v.Bd.NEQ:return`${o}`!=`${y}`;case v.Bd.GT:return o>y;case v.Bd.GTE:return o>=y;case v.Bd.LT:return o<y;case v.Bd.LTE:return o<=y;default:return!1}}function Ae(o){return o===de.gz.allIsNull||o===de.gz.allIsZero}const xe={id:I.mi.byValue,name:"By value (reducer)",description:"Reduce a field to a single value and test for inclusion",defaultOptions:{reducer:de.gz.allIsZero,op:v.Bd.GTE,value:0},get:o=>{if(!o||!o.reducer)return()=>!1;let{reducer:h,op:y,value:P}=o;const Z=Ae(h);return y||(y=v.Bd.EQ),(ie,me,Be)=>{const ye=(0,de.Kx)({field:ie,reducers:[h]})[h];return Z?!!ye:Te(ye,y,P)}},getOptionsDisplayText:o=>`By value (${o.reducer})`};var pe=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/field/fieldState.ts"),he=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/text/string.ts"),Ie=(o=>(o.exclude="exclude",o.include="include",o))(Ie||{});const we={id:I.mi.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:o=>{const y=se(new Set([o]));return(P,Z,ie)=>o===P.name||o===(0,pe.CZ)(P,Z,ie)||!!(y&&y(P,Z,ie))},getOptionsDisplayText:o=>`Field name: ${o}`},le={id:I.mi.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:"include",names:[]},get:o=>{const{names:h,mode:y="include"}=o,P=new Set(h??[]),Z=se(P),ie=(me,Be,ye)=>P.has(me.name)||P.has((0,pe.CZ)(me,Be,ye))||!!(Z&&Z(me,Be,ye));return y==="exclude"?(me,Be,ye)=>!ie(me,Be,ye):ie},getOptionsDisplayText:o=>{const{names:h,mode:y}=o,P=(h??[]).join(", ");return y==="exclude"?`All except: ${P}`:`All of: ${P}`}};function se(o){var h,y,P;let Z;return((P=(y=(h=window?.grafanaBootData)==null?void 0:h.settings)==null?void 0:y.featureToggles)==null?void 0:P.dataplaneFrontendFallback)&&(o.has(K.M5)?Z=(me,Be)=>{var ye;return!!me.labels&&((ye=me.labels)==null?void 0:ye.__name__)===me.name}:(o.has("Time")||o.has("time"))&&(Z=(me,Be)=>{var ye;return((ye=Be.meta)==null?void 0:ye.typeVersion)==null&&me.type===K.fS.time})),Z}const ve={id:I.mi.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:o=>{const h=_(o);return(y,P,Z)=>{const ie=(0,pe.CZ)(y,P,Z);return!!h&&h.test(ie)}},getOptionsDisplayText:o=>`Field name by pattern: ${o}`},x={id:I.mi.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:o=>(h,y,P)=>y.refId===o,getOptionsDisplayText:o=>`Math all fields returned by query with reference ID: ${o}`},M={id:I.mi.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:o=>{var h;const y=ve.get(o?.pattern||""),P=le.get({mode:"include",names:(h=o?.names)!=null?h:[]});return(Z,ie,me)=>P(Z,ie,me)||y(Z,ie,me)},getOptionsDisplayText:o=>{var h,y,P;const Z=(h=o?.pattern)!=null?h:"",ie=(P=(y=o?.names)==null?void 0:y.join(","))!=null?P:"";return`Field name by pattern: ${Z} or names: ${ie}`}},_=o=>{if(o)try{return(0,he.jO)(o)}catch(h){console.error(h);return}},D={id:I.E4.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:o=>{const h=(0,he.jO)(o);return y=>h.test(y.name||"")},getOptionsDisplayText:o=>`Frame name: ${o}`};function J(){return[we,ve,le,M,x]}function A(){return[D]}const U={id:I.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:o=>{const h=o.map(y=>Ye(y));return(y,P,Z)=>{for(const ie of h)if(ie(y,P,Z))return!0;return!1}},getOptionsDisplayText:o=>{let h="";for(const y of o){h.length>0&&(h+=" OR ");const P=je.get(y.id);h+=P.getOptionsDisplayText?P.getOptionsDisplayText(y):P.name}return h}},G={id:I.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:o=>{const h=o.map(y=>qe(y));return y=>{for(const P of h)if(P(y))return!0;return!1}},getOptionsDisplayText:o=>{let h="";for(const y of o){h.length>0&&(h+=" OR ");const P=Ge.get(y.id);h+=P.getOptionsDisplayText?P.getOptionsDisplayText(y):P.name}return h}},H={id:I.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:o=>{const h=o.map(y=>Ye(y));return(y,P,Z)=>{for(const ie of h)if(!ie(y,P,Z))return!1;return!0}},getOptionsDisplayText:o=>{let h="";for(const y of o){h.length>0&&(h+=" AND ");const P=je.get(y.id);h+=P.getOptionsDisplayText?P.getOptionsDisplayText(y):P.name}return h}},te={id:I.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:o=>{const h=o.map(y=>qe(y));return y=>{for(const P of h)if(!P(y))return!1;return!0}},getOptionsDisplayText:o=>{let h="";for(const y of o){h.length>0&&(h+=" AND ");const P=Ge.get(y.id);h+=P.getOptionsDisplayText?P.getOptionsDisplayText(y):P.name}return h}},Q={id:I.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:o=>{const h=Ye(o);return(y,P,Z)=>!h(y,P,Z)},getOptionsDisplayText:o=>{const h=je.get(o.id);return"NOT "+(h.getOptionsDisplayText?h.getOptionsDisplayText(o.options):h.name)}},re={id:I.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:o=>{const h=qe(o);return y=>!h(y)},getOptionsDisplayText:o=>{const h=Ge.get(o.id);return"NOT "+(h.getOptionsDisplayText?h.getOptionsDisplayText(o.options):h.name)}},ue=o=>!0,ae=o=>!0,_e=o=>!1,Ce=o=>o.type!==FieldType.time,Le=o=>!1,rt={id:I.Ff.alwaysMatch,name:"All Fields",description:"Always Match",get:o=>ue,getOptionsDisplayText:o=>"Always"},$e={id:I.Ff.alwaysMatch,name:"All Frames",description:"Always Match",get:o=>ae,getOptionsDisplayText:o=>"Always"},mt={id:I.Ff.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:o=>_e,getOptionsDisplayText:o=>"Never"},nt={id:I.Ff.neverMatch,name:"No Frames",description:"Never Match",get:o=>Le,getOptionsDisplayText:o=>"Never"};function at(){return[U,H,Q,rt,mt]}function gt(){return[G,te,re,$e,nt]}const it={id:I.E4.byRefId,name:"Query refId",description:"match the refId",defaultOptions:"A",get:o=>{const h=(0,he.jO)(o);return y=>h.test(y.refId||"")},getOptionsDisplayText:o=>`RefID: ${o}`};function lt(){return[it]}const Ze={id:I.mi.first,name:"First Field",description:"The first field in the frame",get:o=>(h,y,P)=>h===y.fields[0],getOptionsDisplayText:()=>"First field"},We={id:I.mi.firstTimeField,name:"First time field",description:"The first field of type time in a frame",get:o=>(h,y,P)=>h.type===K.fS.time&&h===y.fields.find(Z=>Z.type===K.fS.time),getOptionsDisplayText:()=>"First time field"};function st(){return[Ze,We]}const Je={id:I.mE.equal,name:"Is equal",description:"Match where value for given field is equal to options value.",get:o=>(h,y)=>y.values[h]==o.value,getOptionsDisplayText:()=>"Matches all rows where field is null.",isApplicable:()=>!0,getDefaultOptions:()=>({value:""})},ot={id:I.mE.notEqual,name:"Is not equal",description:"Match where value for given field is not equal to options value.",get:o=>(h,y)=>y.values[h]!=o.value,getOptionsDisplayText:()=>"Matches all rows where field is not null.",isApplicable:()=>!0,getDefaultOptions:()=>({value:""})},l=()=>[Je,ot],d={id:I.mE.isNull,name:"Is null",description:"Match where value for given field is null.",get:()=>(o,h)=>h.values[o]==null,getOptionsDisplayText:()=>"Matches all rows where field is null.",isApplicable:()=>!0,getDefaultOptions:()=>({})},S={id:I.mE.isNotNull,name:"Is not null",description:"Match where value for given field is not null.",get:()=>(o,h)=>h.values[o]!=null,getOptionsDisplayText:()=>"Matches all rows where field is not null.",isApplicable:()=>!0,getDefaultOptions:()=>({})},T=()=>[d,S],k={id:I.mE.greater,name:"Is greater",description:"Match when field value is greater than option.",get:o=>(h,y)=>{const P=y.values[h];return isNaN(P)?!1:P>o.value},getOptionsDisplayText:o=>`Matches all rows where field value is greater than: ${o.value}.`,isApplicable:o=>o.type===K.fS.number,getDefaultOptions:()=>({value:0})},z={id:I.mE.greaterOrEqual,name:"Is greater or equal",description:"Match when field value is greater than or equal to option.",get:o=>(h,y)=>{const P=y.values[h];return isNaN(P)?!1:P>=o.value},getOptionsDisplayText:o=>`Matches all rows where field value is greater than or equal to: ${o.value}.`,isApplicable:o=>o.type===K.fS.number,getDefaultOptions:()=>({value:0})},Y={id:I.mE.lower,name:"Is lower",description:"Match when field value is lower than option.",get:o=>(h,y)=>{const P=y.values[h];return isNaN(P)?!1:P<o.value},getOptionsDisplayText:o=>`Matches all rows where field value is lower than: ${o.value}.`,isApplicable:o=>o.type===K.fS.number,getDefaultOptions:()=>({value:0})},ce={id:I.mE.lowerOrEqual,name:"Is lower or equal",description:"Match when field value is lower or equal than option.",get:o=>(h,y)=>{const P=y.values[h];return isNaN(P)?!1:P<=o.value},getOptionsDisplayText:o=>`Matches all rows where field value is lower or equal than: ${o.value}.`,isApplicable:o=>o.type===K.fS.number,getDefaultOptions:()=>({value:0})},X=()=>[k,z,Y,ce],Re={id:I.mE.between,name:"Is between",description:"Match when field value is between given option values.",get:o=>(h,y)=>{const P=y.values[h];return isNaN(P)?!1:P>o.from&&P<o.to},getOptionsDisplayText:o=>`Matches all rows where field value is between ${o.from} and ${o.to}.`,isApplicable:o=>o.type===K.fS.number,getDefaultOptions:()=>({from:0,to:100})},Ve=()=>[Re],St={id:I.mE.regex,name:"Regex",description:"Match when field value is matching regex.",get:o=>{const h=new RegExp(o.value);return(y,P)=>{const Z=P.values[y];return h.test(Z)}},getOptionsDisplayText:o=>`Matches all rows where field value is matching regex: ${o.value}`,isApplicable:()=>!0,getDefaultOptions:()=>({value:".*"})},ht=()=>[St],je=new $.B(()=>[...at(),...Me(),...J(),...st(),xe]),Ge=new $.B(()=>[...gt(),...A(),...lt()]),vt=new $.B(()=>[...T(),...X(),...l(),...Ve(),...ht()]);function Ye(o){const h=je.get(o.id);if(!h)throw new Error("Unknown field matcher: "+o.id);return h.get(o.options)}function qe(o){const h=Ge.get(o.id);if(!h)throw new Error("Unknown frame matcher: "+o.id);return h.get(o.options)}function wt(o){const h=vt.get(o.id);if(!h)throw new Error("Unknown value matcher: "+o.id);return h.get(o.options)}},"../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/transformations/matchers/ids.ts":function(He,Se,L){L.d(Se,{E4:function(){return I},Ff:function(){return $},mE:function(){return ne},mi:function(){return K}});var $=(j=>(j.anyMatch="anyMatch",j.allMatch="allMatch",j.invertMatch="invertMatch",j.alwaysMatch="alwaysMatch",j.neverMatch="neverMatch",j))($||{}),K=(j=>(j.numeric="numeric",j.time="time",j.first="first",j.firstTimeField="firstTimeField",j.byType="byType",j.byTypes="byTypes",j.byName="byName",j.byNames="byNames",j.byRegexp="byRegexp",j.byRegexpOrNames="byRegexpOrNames",j.byFrameRefID="byFrameRefID",j.byValue="byValue",j))(K||{}),I=(j=>(j.byName="byName",j.byRefId="byRefId",j.byIndex="byIndex",j))(I||{}),ne=(j=>(j.regex="regex",j.isNull="isNull",j.isNotNull="isNotNull",j.greater="greater",j.greaterOrEqual="greaterOrEqual",j.lower="lower",j.lowerOrEqual="lowerOrEqual",j.equal="equal",j.notEqual="notEqual",j.between="between",j))(ne||{})},"./src/components/Sparkline/Sparkline.tsx":function(He,Se,L){L.d(Se,{b:function(){return xt}});var $=L("../../../yarn/cache/lodash-npm-4.17.21-6382451519-c08619c038.zip/node_modules/lodash/lodash.js"),K=L("../../../yarn/cache/react-npm-18.2.0-1eae08fee2-b9214a9bd7.zip/node_modules/react/index.js");function I(t,e,r){var n,a;if(t===e)return!0;if(((n=t?.fields)==null?void 0:n.length)!==((a=e?.fields)==null?void 0:a.length)||t.name!==e.name)return!1;for(let i=0;i<t.fields.length;i++){const s=t.fields[i],u=e.fields[i];if(s.type!==u.type||s.name!==u.name)return!1;if(r)continue;if(s.labels&&u.labels&&!Oe(s.labels,u.labels))return!1;const c=s.config,p=u.config;let b=Object.keys(c),O=Object.keys(p);if(b.length!==O.length)return!1;for(const g of b){if(!(g in p))return!1;if(g!=="interval"&&!(0,$.isEqual)(c[g],p[g]))return!1}}return!0}function ne(t,e,r){if(t===e)return!0;if(t?.length!==e?.length)return!1;for(let n=0;n<t.length;n++)if(!r(t[n],e[n]))return!1;return!0}const j=(t,e)=>t===e;function Oe(t,e,r=j){if(t===e)return!0;const n=Object.keys(t),a=Object.keys(e);if(n.length!==a.length)return!1;for(let i of n)if(!r(t[i],e[i]))return!1;return!0}var V=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts"),Me=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/field/fieldColor.ts"),v=L("../grafana-schema/src/common/common.gen.ts"),de=L("../../../yarn/cache/uplot-npm-1.6.27-cbfd7aeda3-b46de70804.zip/node_modules/uplot/dist/uPlot.esm.js"),Te=L("../../../yarn/cache/rxjs-npm-7.8.1-41c443a75b-b10cac1a52.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js"),Ae=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/parser.ts"),xe=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/transformations/matchers.ts"),pe=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/transformations/matchers/ids.ts"),he=(t=>(t.append="append",t.reduce="reduce",t.order="order",t.organize="organize",t.rename="rename",t.calculateField="calculateField",t.seriesToColumns="seriesToColumns",t.seriesToRows="seriesToRows",t.merge="merge",t.concatenate="concatenate",t.labelsToFields="labelsToFields",t.filterFields="filterFields",t.filterFieldsByName="filterFieldsByName",t.filterFrames="filterFrames",t.filterByRefId="filterByRefId",t.renameByRegex="renameByRegex",t.filterByValue="filterByValue",t.noop="noop",t.ensureColumns="ensureColumns",t.groupBy="groupBy",t.sortBy="sortBy",t.histogram="histogram",t.configFromData="configFromData",t.rowsToFields="rowsToFields",t.prepareTimeSeries="prepareTimeSeries",t.convertFieldType="convertFieldType",t.fieldLookup="fieldLookup",t.heatmap="heatmap",t.spatial="spatial",t.joinByField="joinByField",t.joinByLabels="joinByLabels",t.extractFields="extractFields",t.groupingToMatrix="groupingToMatrix",t.limit="limit",t.partitionByValues="partitionByValues",t.timeSeriesTable="timeSeriesTable",t.formatTime="formatTime",t.formatString="formatString",t.regression="regression",t))(he||{}),Ie=Object.defineProperty,we=Object.defineProperties,le=Object.getOwnPropertyDescriptors,se=Object.getOwnPropertySymbols,ve=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,M=(t,e,r)=>e in t?Ie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_=(t,e)=>{for(var r in e||(e={}))ve.call(e,r)&&M(t,r,e[r]);if(se)for(var r of se(e))x.call(e,r)&&M(t,r,e[r]);return t},D=(t,e)=>we(t,le(e));const J={id:he.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type.",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0,timezone:void 0}]},operator:(t,e)=>r=>r.pipe((0,Te.U)(n=>J.transformer(t,e)(n))),transformer:t=>e=>{var r;return!Array.isArray(e)||e.length===0?e:(r=A(t,e))!=null?r:[]}};function A(t,e){if(!t.conversions.length)return e;const r=e.map(n=>_({},n));for(const n of t.conversions){if(!n.targetField)continue;const a=xe.Ls.get(pe.mi.byName).get(n.targetField);for(const i of r)i.fields=i.fields.map(s=>a(s,i,r)?U(s,n):s)}return r}function U(t,e){switch(e.destinationType){case V.fS.time:return ae(t,e.dateFormat);case V.fS.number:return te(t);case V.fS.string:return re(t,e.dateFormat,{timeZone:e.timezone});case V.fS.boolean:return Q(t);case V.fS.enum:return _e(t,e.enumConfig);case V.fS.other:return ue(t);default:return t}}const G=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3,})?(?:Z|[-+]\d{2}:?\d{2})$/;function H(t,e){let r=e?{format:e}:void 0;const n=t.values.slice();let a=n.find(s=>s!=null),i=typeof a=="string"&&G.test(a);for(let s=0;s<n.length;s++)if(n[s]){let u=i?Date.parse(n[s]):(0,Ae.J)(n[s],r).valueOf();n[s]=Number.isFinite(u)?u:null}else n[s]=null;return D(_({},t),{type:V.fS.time,values:n})}function te(t){const e=t.values.slice(),r=e.some(n=>typeof n=="string");for(let n=0;n<e.length;n++){let a=e[n];r&&a!=null&&typeof a=="string"&&(a=a.replace(/,/g,""));const i=+a;e[n]=Number.isFinite(i)?i:null}return D(_({},t),{type:V.fS.number,values:e})}function Q(t){const e=t.values.slice();for(let r=0;r<e.length;r++)e[r]=!!e[r];return D(_({},t),{type:V.fS.boolean,values:e})}function re(t,e,r){let n=t.values;switch(t.type){case V.fS.time:n=n.map(a=>(0,Ae.J)(a,r).format(e));break;case V.fS.other:n=n.map(a=>JSON.stringify(a));break;default:n=n.map(a=>`${a}`)}return D(_({},t),{type:V.fS.string,values:n})}function ue(t){const e=t.values.slice();for(let r=0;r<e.length;r++)try{e[r]=JSON.parse(e[r])}catch{e[r]=null}return D(_({},t),{type:V.fS.other,values:e})}function ae(t,e){const r=typeof t.values[0]=="number";return t.type===V.fS.time&&r?t:r?D(_({},t),{type:V.fS.time}):H(t,e)}function _e(t,e){const r=_({},e),n=t.values.slice(),a=new Map;if(r.text&&r.text.length>0)for(let i=0;i<r.text.length;i++)a.set(r.text[i],i);else return t;for(let i=0;i<n.length;i++){const s=n[i];n[i]=a.get(s)}return D(_({},t),{config:D(_({},t.config),{type:{enum:r}}),type:V.fS.enum,values:n})}var Ce=Object.defineProperty,Le=Object.defineProperties,rt=Object.getOwnPropertyDescriptors,$e=Object.getOwnPropertySymbols,mt=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable,at=(t,e,r)=>e in t?Ce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gt=(t,e)=>{for(var r in e||(e={}))mt.call(e,r)&&at(t,r,e[r]);if($e)for(var r of $e(e))nt.call(e,r)&&at(t,r,e[r]);return t},it=(t,e)=>Le(t,rt(e));function lt(t,e,r){var n}const Ze=(0,$.throttle)((...t)=>{console.log(...t)},500),We=t=>{let e=!1;return typeof window<"u"&&(e=window.localStorage.getItem("grafana.debug")==="true"),{logger:(r,n=!1,...a)=>{},enable:()=>e=!0,disable:()=>e=!1,isEnabled:()=>e}},st="__fixed";class Je{constructor(e){this.props=e}}function ot(t,e){var r,n,a,i,s,u,c;const p="na",b=`${t.min!==void 0?t.min:p}-${t.max!==void 0?t.max:p}`,O=`${((r=t.custom)==null?void 0:r.axisSoftMin)!==void 0?t.custom.axisSoftMin:p}-${((n=t.custom)==null?void 0:n.axisSoftMax)!==void 0?t.custom.axisSoftMax:p}`,g=`${((a=t.custom)==null?void 0:a.axisPlacement)!==void 0?(i=t.custom)==null?void 0:i.axisPlacement:v.LB.Auto}`,m=(s=t.unit)!=null?s:st,f=(u=t.custom)!=null&&u.scaleDistribution?l(t.custom.scaleDistribution):v.wf.Linear,w=(c=t.custom)!=null&&c.axisLabel?t.custom.axisLabel:p;return`${m}/${b}/${O}/${g}/${f}/${w}/${e}`}function l(t){return t.type===v.wf.Log?`${t.type}${t.log}`:t.type}const d=/\b(YYYY|YY|MMMM|MMM|MM|M|DD|D|WWWW|WWW|HH|H|h|AA|aa|a|mm|m|ss|s|fff)\b/g;function S(t){return t.replace(d,e=>`{${e}}`)}const T=(t,e,r)=>{let n=e%2?r[0]||r[2]:r[1]||r[3];return r[e]||!n?0:8},k={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[T,T,T,T],series:[],hooks:{}};var z=(t=>(t[t.Pos=1]="Pos",t[t.Neg=-1]="Neg",t))(z||{});function Y(t){let e=[],{series:r,dir:n}=t,a=r.length-1,i=r.slice().reverse();return i.forEach((s,u)=>{if(u!==a){let c=i[u+1];e.push({series:[s,c],dir:-1*n})}}),e}function ce(t){let e=new Map;return t.fields.forEach(({config:r,values:n,type:a},i)=>{var s;if(i===0)return;let{custom:u}=r;if(u==null||(s=u.hideFrom)!=null&&s.viz)return;let{stacking:c}=u;if(c==null)return;let{mode:p,group:b}=c;if(p===v.o0.None)return;let O=u.transform,g=Ve(O,n),m=u.drawStyle,f=m===v.l8.Bars?u.barAlignment:m===v.l8.Line?u.lineInterpolation:null,w=`${g}|${p}|${b}|${ot(r,a)}|${m}|${f}`,F=e.get(w);F==null&&(F={series:[],dir:g},e.set(w,F)),F.series.push(i)}),[...e.values()]}function X(t,e,r){let n=Array(t.fields.length),a=e.length,i=t.length,s=a>0?Array(i).fill(0):[],u=a>0?Array(i).fill(!1):[],c=Array.from({length:a},()=>s.slice()),p=Array.from({length:a},()=>u.slice());if(e.forEach((b,O)=>{let g=p[O];b.series.forEach(m=>{var f,w;let F=t.fields[m];if((w=(f=F.config.custom)==null?void 0:f.hideFrom)!=null&&w.viz)return;let N=F.values;for(let E=0;E<i;E++)N[E]!=null&&(g[E]=!0)})}),t.fields.forEach((b,O)=>{var g,m;let f=b.values;if(O===0){b.type===V.fS.time?n[O]=ae(b).values:n[O]=f;return}let{custom:w}=b.config;if(!w||(g=w.hideFrom)!=null&&g.viz){n[O]=f;return}if(w.transform===v.pR.Constant){let N=f.findIndex(C=>C!=null),E=f[N];f=Array(f.length).fill(void 0),f[N]=E}else if(f=f.slice(),w.transform===v.pR.NegativeY)for(let N=0;N<f.length;N++)f[N]!=null&&(f[N]*=-1);let F=(m=w.stacking)==null?void 0:m.mode;if(!F||F===v.o0.None)n[O]=f;else{let N=e.findIndex(R=>R.series.indexOf(O)>-1),E=c[N],C=p[N],B=n[O]=Array(i);for(let R=0;R<i;R++){let q=f[R];q!=null?B[R]=E[R]+=q:B[R]=C[R]?E[R]:q}}}),r){let b=n.map((O,g)=>{let m=e.findIndex(f=>f.series.indexOf(g)>-1);return m!==-1?c[m]:O});r({totals:b})}return t.fields.forEach((b,O)=>{var g,m,f,w;if(O===0||(m=(g=b.config.custom)==null?void 0:g.hideFrom)!=null&&m.viz)return;if(((w=(f=b.config.custom)==null?void 0:f.stacking)==null?void 0:w.mode)===v.o0.Percent){let N=e.findIndex(R=>R.series.indexOf(O)>-1),E=c[N],C=e[N],B=n[O];for(let R=0;R<i;R++){let q=B[R];q!=null&&(B[R]=E[R]===0?0:C.dir*(q/E[R]))}}}),n}function Re(t,e){let r,n=1,a=1,i=t.data[1][e],s=t.data[1][e];for(let u=1;u<t.data.length;u++){const p=t.data[u][e];p!=null&&(i==null?i=p:p>i&&(i=t.data[u][e],n=u),s==null?s=p:p<s&&(s=t.data[u][e],a=u))}return s==null&&i==null?r=void 0:s!=null&&i!=null?r=(t.valToPos(s,t.series[a].scale)+t.valToPos(i,t.series[n].scale))/2:r=t.valToPos(s||i,t.series[n||a].scale),r!==void 0&&r<0&&(r=t.bbox.height/devicePixelRatio),r}function Ve(t,e){const r=St(e);return t===v.pR.NegativeY?r?1:-1:r?-1:1}function St(t,e=100){const r=t.length;if(r===0)return!1;let n=0,a=r-1;for(;n<=a&&t[n]==null;)n++;for(;a>=n&&t[a]==null;)a--;let i=0,s=0;if(a>=n){const u=Math.max(1,Math.floor((a-n+1)/e));for(let c=n;c<=a;c+=u){const p=t[c];p!=null&&typeof p=="number"&&(p<0||Object.is(p,-0)?i++:p>0&&s++)}if(i>s)return!0}return!1}const ht=We("uPlot"),je=ht.logger;lt("graphng",void 0,ht);var Ge=Object.defineProperty,vt=Object.getOwnPropertySymbols,Ye=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable,wt=(t,e,r)=>e in t?Ge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,o=(t,e)=>{for(var r in e||(e={}))Ye.call(e,r)&&wt(t,r,e[r]);if(vt)for(var r of vt(e))qe.call(e,r)&&wt(t,r,e[r]);return t};function h(t,e){return e.width===t.width&&e.height===t.height}function y(t,e){return e.data===t.data}function P(t,e){return e.config===t.config}class Z extends K.Component{constructor(e){super(e),this.plotContainer=(0,K.createRef)(),this.plotCanvasBBox=(0,K.createRef)(),this.state={plot:null}}reinitPlot(){var e;let{width:r,height:n,plotRef:a}=this.props;if((e=this.state.plot)==null||e.destroy(),r===0&&n===0)return;this.props.config.addHook("setSize",u=>{u.over});const i=o({width:Math.floor(this.props.width),height:Math.floor(this.props.height)},this.props.config.getConfig());je("UPlot",!1,"Reinitializing plot",i);const s=new de.Z(i,this.props.data,this.plotContainer.current);a&&a(s),this.setState({plot:s})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){var e;(e=this.state.plot)==null||e.destroy()}componentDidUpdate(e){let{plot:r}=this.state;h(e,this.props)?P(e,this.props)?y(e,this.props)||r?.setData(this.props.data):this.reinitPlot():r?.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)})}render(){return K.createElement("div",{style:{position:"relative"}},K.createElement("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children)}}try{Z.displayName="UPlotChart",Z.__docgenInfo={description:"",displayName:"UPlotChart",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"AlignedData | [_: null, ...series: FacetValues[]]"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"UPlotConfigBuilder"}},plotRef:{defaultValue:null,description:"",name:"plotRef",required:!1,type:{name:"((u: uPlot) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/uPlot/Plot.tsx#UPlotChart"]={docgenInfo:Z.__docgenInfo,name:"UPlotChart",path:"src/components/uPlot/Plot.tsx#UPlotChart"})}catch{}var ie=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/time.ts"),me=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/timezones.ts"),Be=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/valueFormats/valueFormats.ts"),ye=Math.pow;function Or(t,e=0){if(Number.isInteger(t))return t;let r=ye(10,e),n=t*r*(1+Number.EPSILON);return Math.round(n)/r}function xr(t){return((""+t).split(".")[1]||"").length}var Ue=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/formats.ts"),Sr=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/formatter.ts"),ut=L("./src/utils/measureText.ts"),Dt=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/field/displayProcessor.ts"),Rt=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/themes/createTheme.ts"),kt=(t=>(t.TimeSeriesWide="timeseries-wide",t.TimeSeriesLong="timeseries-long",t.TimeSeriesMany="timeseries-many",t.TimeSeriesMulti="timeseries-multi",t.NumericWide="numeric-wide",t.NumericMulti="numeric-multi",t.NumericLong="numeric-long",t.LogLines="log-lines",t.DirectoryListing="directory-listing",t.HeatmapRows="heatmap-rows",t.HeatmapCells="heatmap-cells",t.Histogram="histogram",t))(kt||{}),wr=L("../../../yarn/cache/fast_array_intersect-npm-1.1.0-56bca1a61e-94a6d062cd.zip/node_modules/fast_array_intersect/lib/index.js"),_t=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/dataframe/processDataFrame.ts"),yt=(t=>(t.outer="outer",t.inner="inner",t.outerTabular="outerTabular",t))(yt||{});const _r={id:he.joinByField,aliasIds:[he.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{byField:void 0,mode:"outer"},operator:(t,e)=>r=>r.pipe((0,Te.U)(n=>_r.transformer(t,e)(n))),transformer:(t,e)=>{let r;return n=>{if(n.length>1){t.byField&&!r&&(r=xe.Ls.get(pe.mi.byName).get(e.interpolate(t.byField)));const a=Nr({frames:n,joinBy:r,mode:t.mode});if(a)return[a]}return n}}};var Fr=Object.defineProperty,Pr=Object.defineProperties,Mr=Object.getOwnPropertyDescriptors,jt=Object.getOwnPropertySymbols,Tr=Object.prototype.hasOwnProperty,Ar=Object.prototype.propertyIsEnumerable,Ut=(t,e,r)=>e in t?Fr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qe=(t,e)=>{for(var r in e||(e={}))Tr.call(e,r)&&Ut(t,r,e[r]);if(jt)for(var r of jt(e))Ar.call(e,r)&&Ut(t,r,e[r]);return t},ct=(t,e)=>Pr(t,Mr(e));function Cr(t){const{timeField:e}=(0,_t.sV)(t[0]);if(e)return xe.Ls.get(pe.mi.firstTimeField).get({});let r=[];for(const n of t[0].fields)n.type===V.fS.number&&r.push(n.name);for(let n=1;n<t.length;n++){const a=[];for(const i of t[0].fields)i.type===V.fS.number&&a.push(i.name);r=r.filter(i=>!a.includes(i))}return xe.Ls.get(pe.mi.byName).get(r[0])}function zt(t){var e;return(e=t.joinBy)!=null?e:Cr(t.frames)}function Br(t,e){if(e>=0){let r=t.fields[e];r.type!==V.fS.string&&!Ht(r.values)&&(t=(0,_t.aK)(t,e))}return t}function Nr(t){var e,r,n,a,i;if(!((e=t.frames)!=null&&e.length))return;if(t.frames.length===1){let m=t.frames[0],f=m;const w=zt(t);let F=f.fields.findIndex(N=>w(N,f,t.frames));if(t.keepOriginIndices&&(f=ct(Qe({},m),{fields:m.fields.map((N,E)=>{const C=Qe({},N),B={frameIndex:0,fieldIndex:E};return C.state?C.state.origin=B:C.state={origin:B},C})}),F>0)){const N=f.fields[F],E=f.fields.filter((C,B)=>B!==F);E.unshift(N),f.fields=E,F=0}if(F>=0&&(f=Br(f,F)),t.keep){let N=f.fields.filter((E,C)=>C===F||t.keep(E,f,t.frames));m!==f?f.fields=N:f=ct(Qe({},m),{fields:N})}return f}const s=[],u=[],c=[],p=[];let b=1;const O=zt(t);for(let m=0;m<t.frames.length;m++){const f=t.frames[m];if(!f||!((r=f.fields)!=null&&r.length))continue;const w=[Ft];let F,N=[],E=[];for(let B=0;B<f.fields.length;B++){const R=f.fields[B];if(R.state=R.state||{},!F&&O(R,f,t.frames))F=R;else{if(t.keep&&!t.keep(R,f,t.frames))continue;let q=(n=R.config.custom)==null?void 0:n.spanNulls;w.push(q===!0?Ft:q===-1?Vt:Gt);let fe=(a=R.labels)!=null?a:{},oe=R.name;f.name&&(R.name===V.M5?oe=f.name:fe=ct(Qe({},fe),{name:f.name})),N.push(ct(Qe({},R),{name:oe,labels:fe}))}t.keepOriginIndices&&(R.state.origin={frameIndex:m,fieldIndex:B})}if(!F)continue;c.length===0&&c.push(F),s.push(w);const C=[F.values];for(const B of N)C.push(B.values),c.push(B),(i=B.state)==null||delete i.displayName,E.push(b),b++;p.push(E),u.push(C)}let g=[];return t.mode===yt.outerTabular?g=Er(u,p,c.length,s):g=Kt(u,s,t.mode),{length:g[0]?g[0].length:0,fields:c.map((m,f)=>ct(Qe({},m),{values:g[f]}))}}function Er(t,e,r,n){let a={};for(let s=0;s<t.length;s++){let u=t[s],c=u[0];for(let p=0;p<t.length;p++){if(p===s)continue;let b=t[p],O=b[0];for(let g=0;g<c.length;g++){const m=c[g],f=r-1;let w=[m].concat(new Array(f)),F=0;for(let N=1;N<u.length;N++){const E=e[s][F];w[E]=u[N][g],F++}for(let N=0;N<O.length;N++)if(c[g]===O[N]){let E=0;for(let C=1;C<b.length;C++){const B=e[p][E];w[B]=b[C][N],E++}break}a[JSON.stringify(w)]=w}}}let i=[];for(let s=0;s<r;s++)i.push(new Array(0));for(let s in a){const u=a[s];for(let c=0;c<u.length;c++)i[c].push(u[c])}return i}const Ft=0,Vt=1,Gt=2;function Ir(t,e,r){for(let n=0,a,i=-1;n<e.length;n++){let s=e[n];if(s>i){for(a=s-1;a>=0&&t[a]==null;)t[a--]=null;for(a=s+1;a<r&&t[a]==null;)t[i=a++]=null}}}function Kt(t,e,r=yt.outer){let n;if(r===yt.inner)n=new Set((0,wr.Z)(t.map(u=>u[0])));else{n=new Set;for(let u=0;u<t.length;u++){let p=t[u][0],b=p.length;for(let O=0;O<b;O++)n.add(p[O])}}let a=[Array.from(n).sort((u,c)=>u-c)],i=a[0].length,s=new Map;for(let u=0;u<i;u++)s.set(a[0][u],u);for(let u=0;u<t.length;u++){let c=t[u],p=c[0];for(let b=1;b<c.length;b++){let O=c[b],g=Array(i).fill(void 0),m=e?e[u][b]:Vt,f=[];for(let w=0;w<O.length;w++){let F=O[w],N=s.get(p[w]);F===null?m!==Ft&&(g[N]=F,m===Gt&&f.push(N)):g[N]=F}Ir(g,f,i),a.push(g)}}return a}function Ht(t,e=50){const r=t.length;if(r<=1)return!0;let n=0,a=r-1;for(;n<=a&&t[n]==null;)n++;for(;a>=n&&t[a]==null;)a--;if(a<=n)return!0;const i=Math.max(1,Math.floor((a-n+1)/e));for(let s=t[n],u=n+i;u<=a;u+=i){const c=t[u];if(c!=null){if(c<=s)return!1;s=c}}return!0}const $t=()=>{var t,e,r;return(r=(e=(t=window?.grafanaBootData)==null?void 0:t.settings)==null?void 0:e.featureToggles)==null?void 0:r.transformationsVariableSupport};var Lr=Object.defineProperty,Dr=Object.defineProperties,Rr=Object.getOwnPropertyDescriptors,Zt=Object.getOwnPropertySymbols,kr=Object.prototype.hasOwnProperty,jr=Object.prototype.propertyIsEnumerable,Wt=(t,e,r)=>e in t?Lr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fe=(t,e)=>{for(var r in e||(e={}))kr.call(e,r)&&Wt(t,r,e[r]);if(Zt)for(var r of Zt(e))jr.call(e,r)&&Wt(t,r,e[r]);return t},Pe=(t,e)=>Dr(t,Rr(e));const Jt=[1e-9,2e-9,25e-10,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],Ur=[],zr=(t,e)=>t-e,ta={bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},Vr={id:he.histogram,name:"Histogram",description:"Calculate a histogram from input data.",defaultOptions:{fields:{}},operator:(t,e)=>r=>r.pipe((0,Te.U)(n=>Vr.transformer(t,e)(n))),transformer:(t,e)=>r=>{if(!Array.isArray(r)||r.length===0)return r;let n,a;t.bucketSize&&($t()&&(t.bucketSize=e.interpolate(t.bucketSize.toString())),typeof t.bucketSize=="string"?n=parseFloat(t.bucketSize):n=t.bucketSize,isNaN(n)&&(n=void 0)),t.bucketOffset&&($t()&&(t.bucketOffset=e.interpolate(t.bucketOffset.toString())),typeof t.bucketOffset=="string"?a=parseFloat(t.bucketOffset):a=t.bucketOffset,isNaN(a)&&(a=void 0));const i={bucketSize:n,bucketOffset:a,combine:t.combine},s=$r(r,i);return s==null?[]:[Wr(s)]}},Pt="xMin";function Gr(t){return t===Pt||t==="BucketMin"}const Mt="xMax";function Kr(t){return t===Mt||t==="BucketMax"}function ra(t){var e,r;if(((e=t.meta)==null?void 0:e.type)===DataFrameType.HeatmapCells){let s=t.fields.find(m=>m.name==="yMin"),u=t.fields.find(m=>m.name==="yMax"),c=t.fields.find(m=>m.name==="count"),p=[...new Set(u.values)].sort((m,f)=>m-f),b=[...new Set(s.values)].sort((m,f)=>m-f),O=new Map;p.forEach(m=>O.set(m,0));for(let m=0;m<u.values.length;m++){let f=u.values[m];O.set(f,O.get(f)+c.values[m])}return{xMin:Pe(Fe({},s),{name:"xMin",values:b}),xMax:Pe(Fe({},u),{name:"xMax",values:p}),counts:[Pe(Fe({},c),{values:[...O.values()]})]}}else if(((r=t.meta)==null?void 0:r.type)===DataFrameType.HeatmapRows){let s=[],u=[],c=[],p="0";return t.fields.forEach(O=>{if(O.type===FieldType.number){let g=O.values.reduce((m,f)=>m+f,0);c.push(g),s.push(p),u.push(p=O.name)}}),c.push(0),s.push(p),u.push(p),{xMin:Pe(Fe({},t.fields[1]),{name:"xMin",type:FieldType.string,values:s}),xMax:Pe(Fe({},t.fields[1]),{name:"xMax",type:FieldType.string,values:u}),counts:[Pe(Fe({},t.fields[1]),{name:"count",type:FieldType.number,values:c})]}}let n,a;const i=[];for(const s of t.fields)Gr(s.name)?n=s:Kr(s.name)?a=s:s.type===FieldType.number&&i.push(s);if(!a&&n&&n.values.length>1){let s=n.values,u=roundDecimals(s[1]-s[0],6);a=Pe(Fe({},n),{name:Mt,values:s.map(c=>c+u)})}if(!n&&a&&a?.values.length>1){let s=a.values,u=roundDecimals(s[1]-s[0],6);n=Pe(Fe({},a),{name:Pt,values:s.map(c=>c-u)})}if(n&&a&&i.length)return{xMin:n,xMax:a,counts:i}}const Hr=20;function $r(t,e){var r,n;let a=e?.bucketSize,i=(r=e?.bucketOffset)!=null?r:0;if(!a||a<0){let f=[];for(const B of t)for(const R of B.fields)R.type===V.fS.number&&(f=f.concat(R.values));f=f.filter(B=>B!=null),f.sort((B,R)=>B-R);let w=1/0;if(f.length===1)w=1;else for(let B=1;B<f.length;B++){let R=f[B]-f[B-1];R!==0&&(w=Math.min(w,R))}let F=f[0];const C=(f[f.length-1]-F)/Hr;for(let B=0;B<Jt.length;B++){let R=Jt[B];if(C<R&&R>=w){a=R;break}}}const s=f=>Tt(f-i,a)+i;let u=((n=(""+a).match(/\.\d+$/))!=null?n:["."])[0].length-1,c=[],p=[],b;for(const f of t)for(const w of f.fields)if(w.type===V.fS.number){let F=Zr(w.values,s,Ur,zr);c.push(F),p.push(Pe(Fe({},w),{config:Pe(Fe({},w.config),{unit:w.config.unit==="short"?"short":void 0})})),!b&&w.config.unit&&(b=w.config)}if(!p.length)return null;let O=Kt(c);for(let f=1;f<O.length;f++){let w=O[f];for(let F=0;F<w.length;F++)w[F]==null&&(w[F]=0)}const g={name:Pt,values:O[0],type:V.fS.number,state:void 0,config:u===0?b??{}:Pe(Fe({},b),{decimals:u})},m=Pe(Fe({},g),{name:Mt,values:O[0].map(f=>f+a)});if(e?.combine){const f=new Array(O[0].length).fill(0);for(let w=1;w<O.length;w++)for(let F=0;F<f.length;F++)f[F]+=O[w][F];p=[Pe(Fe({},p[0]),{name:"count",values:f,type:V.fS.number,state:void 0})]}else p.forEach((f,w)=>{f.values=O[w+1]});return{xMin:g,xMax:m,counts:p}}function na(t,e){return Math.round(t/e)*e}function Yt(t,e){return Math.ceil(t/e)*e}function Tt(t,e){return Math.floor(t/e)*e}function Zr(t,e,r,n){let a=new Map;for(let c=0;c<t.length;c++){let p=t[c];p!=null&&(p=e(p));let b=a.get(p);b?b.count++:a.set(p,{value:p,count:1})}r&&r.forEach(c=>a.delete(c));let i=[...a.values()];n&&i.sort((c,p)=>n(c.value,p.value));let s=Array(i.length),u=Array(i.length);for(let c=0;c<i.length;c++)s[c]=i[c].value,u[c]=i[c].count;return[s,u]}function Wr(t,e){if(!t.xMin.display){const r=(0,Dt.U)({field:t.xMin,theme:e??(0,Rt.j)()});t.xMin.display=r,t.xMax.display=r}return t.counts[0].display=(0,Dt.U)({field:t.counts[0],theme:e??(0,Rt.j)()}),{length:t.xMin.values.length,meta:{type:kt.Histogram},fields:[t.xMin,t.xMax,...t.counts]}}var Jr=Object.defineProperty,qt=Object.getOwnPropertySymbols,Yr=Object.prototype.hasOwnProperty,qr=Object.prototype.propertyIsEnumerable,Xe=Math.pow,Qt=(t,e,r)=>e in t?Jr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qr=(t,e)=>{for(var r in e||(e={}))Yr.call(e,r)&&Qt(t,r,e[r]);if(qt)for(var r of qt(e))qr.call(e,r)&&Qt(t,r,e[r]);return t};class Xr extends Je{merge(e){this.props.min=At("min",this.props.min,e.min),this.props.max=At("max",this.props.max,e.max)}getConfig(){var e,r;let{isTime:n,scaleKey:a,min:i,max:s,softMin:u,softMax:c,range:p,direction:b,orientation:O,centeredZero:g,decimals:m}=this.props;const f=this.props.distribution,w=n?{}:{distr:f===v.wf.Symlog?4:f===v.wf.Log?3:f===v.wf.Ordinal?2:1,log:f===v.wf.Log||f===v.wf.Symlog?(e=this.props.log)!=null?e:2:void 0,asinh:f===v.wf.Symlog?(r=this.props.linearThreshold)!=null?r:1:void 0};if(f===v.wf.Log){let oe=this.props.log,ee=oe===2?Math.log2:Math.log10;i!=null&&(i<=0?i=null:i=Xe(oe,Math.floor(ee(i)))),s!=null&&(s<=0?s=null:s=Xe(oe,Math.ceil(ee(s)))),u!=null&&(u<=0?u=null:u=Xe(oe,Math.floor(ee(u)))),c!=null&&(c<=0?c=null:c=Xe(oe,Math.ceil(ee(c))))}let F=u==null?3:1,N=c==null?3:1;const E={min:{pad:.1,hard:i??-1/0,soft:u||0,mode:F},max:{pad:.1,hard:s??1/0,soft:c||0,mode:N}};let C=u==null&&i!=null,B=c==null&&s!=null,R=C&&B;const q=(oe,ee,be,Ee)=>{var De;const ge=oe.scales[Ee];let W=[ee,be];if(Ee==="x"&&!n&&f===v.wf.Linear||!R&&ee==null&&be==null)return W;let ze=(De=ge.log)!=null?De:10;if(ge.distr===1||ge.distr===2||ge.distr===4){if(g){let et=Math.abs(ee),Lt=Math.abs(be),tt=Math.max(et,Lt);tt===0&&(tt=80),ee=-tt,be=tt}ge.distr===4?W=de.Z.rangeAsinh(ee,be,ze,!0):W=de.Z.rangeNum(C?i:ee,B?s:be,E)}else ge.distr===3&&(W=de.Z.rangeLog(i??ee,s??be,ze,!0));if(m===0)if(ge.distr===1||ge.distr===2)W[0]=Tt(W[0],1),W[1]=Yt(W[1],1);else if(ge.distr===3){let et=ge.log===2?Math.log2:Math.log10;if(W[0]<=1)W[0]=1;else{let tt=Math.floor(et(W[0]));W[0]=Xe(ze,tt)}let Lt=Math.ceil(et(W[1]));W[1]=Xe(ze,Lt),W[0]===W[1]&&(W[1]*=ze)}else ge.distr===4&&(W[0]=Tt(W[0],1),W[1]=Yt(W[1],1));return(ge.distr===1||ge.distr===4)&&(C&&(W[0]=i),B&&(W[1]=s)),W[0]>=W[1]&&(W[0]=ge.distr===3?1:0,W[1]=100),W};let fe=!n&&!R;return(0,Be.br)(a)&&(fe=!1,p=[0,1]),{[a]:Qr({time:n,auto:fe,range:p??q,dir:b,ori:O},w)}}}function At(t,e,r){const n=e!=null,a=r!=null;return n?a?t==="min"?e<r?e:r:e>r?e:r:e:r}var en=Object.defineProperty,Xt=Object.getOwnPropertySymbols,tn=Object.prototype.hasOwnProperty,rn=Object.prototype.propertyIsEnumerable,er=(t,e,r)=>e in t?en(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,nn=(t,e)=>{for(var r in e||(e={}))tn.call(e,r)&&er(t,r,e[r]);if(Xt)for(var r of Xt(e))rn.call(e,r)&&er(t,r,e[r]);return t};const ft=12,tr=8;class an extends Je{merge(e){this.props.size=At("max",this.props.size,e.size),this.props.label||(this.props.label=e.label),this.props.placement===v.LB.Auto&&(this.props.placement=e.placement)}calculateSpace(e,r,n,a,i){const s=e.axes[r],u=e.scales[s.scale];if(s.side!==2||!u)return 30;const c=40;if(u.time){const p=i/c,b=(a-n)/p,O=rr(e,[n],r,c,b);return(0,ut.X1)(O[0],ft).width+18}return c}calculateAxisSize(e,r,n){const a=e.axes[n];let i=a.ticks.size;if(a.side===2)i+=a.gap+ft;else if(r?.length){let s=r.reduce((c,p)=>Math.max(c,(0,ut.X1)(p,ft).width),0);const u=Math.min(e.width*.4,s);i+=a.gap+a.labelGap+u}return Math.ceil(i)}getConfig(){let{scaleKey:e,label:r,show:n=!0,placement:a=v.LB.Auto,grid:i={show:!0},ticks:s,space:u,filter:c,gap:p=5,formatValue:b,splits:O,values:g,incrs:m,isTime:f,timeZone:w,theme:F,tickLabelRotation:N,size:E,color:C,border:B,decimals:R,distr:q=v.wf.Linear}=this.props;const fe=`${ft}px ${F.typography.fontFamily}`,oe=F.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,Be.br)(e)&&(O=[0,1]),R===0&&q===v.wf.Linear&&(c=(be,Ee)=>Ee.map(De=>Number.isInteger(De)?De:null));let ee={scale:e,show:n,stroke:C??F.colors.text.primary,side:ln(a),font:fe,size:E??((be,Ee,De)=>this.calculateAxisSize(be,Ee,De)),rotate:N,gap:p,labelGap:0,grid:{show:i.show,stroke:oe,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:B?.show?C??F.colors.text.primary:oe,width:1/devicePixelRatio,size:4},s),splits:O,values:g,space:u??((be,Ee,De,ge,W)=>this.calculateSpace(be,Ee,De,ge,W)),filter:c,incrs:m};return B?.show&&(ee.border=nn({stroke:C??F.colors.text.primary,width:1/devicePixelRatio},B)),r!=null&&r.length>0&&(ee.label=r,ee.labelSize=ft+tr,ee.labelFont=fe,ee.labelGap=tr),g?ee.values=g:f?ee.values=rr:b&&(ee.values=(be,Ee,De,ge,W)=>{let ze=xr(Or(W,6));return Ee.map(et=>b(et,ze>0?ze:void 0))}),ee.timeZone=w,ee}}const Ne={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:28*24*60*60*1e3,year:365*24*60*60*1e3};function rr(t,e,r,n,a){var i,s;const u=t.axes[r].timeZone,c=t.scales.x,p=((i=c?.max)!=null?i:0)-((s=c?.min)!=null?s:0),b=Math.round(Ne.year/Ne.day)*Ne.day,O=Math.round(a/Ne.day)*Ne.day;let g=Ue.U6.interval.year;return a<Ne.second?g=Ue.U6.interval.millisecond:a<=Ne.minute?g=Ue.U6.interval.second:p<=Ne.day?g=Ue.U6.interval.minute:a<=Ne.day?g=Ue.U6.interval.hour:p<Ne.year?g=Ue.U6.interval.day:O===b?g=Ue.U6.interval.year:a<=Ne.year&&(g=Ue.U6.interval.month),e.map(m=>m==null?"":(0,Sr.dq)(m,{format:g,timeZone:u}))}function ln(t){switch(t){case v.LB.Top:return 0;case v.LB.Right:return 1;case v.LB.Bottom:return 2;case v.LB.Left:}return 3}var dt=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/fieldColor.ts"),Ke=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/themes/colorManipulator.ts"),pt=L("../../../yarn/cache/tinycolor2-npm-1.6.0-8df41252c6-066c3acf4f.zip/node_modules/tinycolor2/esm/tinycolor.js"),nr=L("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/thresholds.ts");function ar(t,e,r){let n=0,a=0,i=0,s=0;return t===3?(a=e.top,s=e.top+e.height):t===2?(n=e.left+e.width,i=e.left):t===1?(a=e.top+e.height,s=e.top):t===0&&(n=e.left,i=e.left+e.width),r.createLinearGradient(n,a,i,s)}function sn(t,e){return(r,n)=>{const a=(0,ut.AE)(),i=ar(r.scales.x.ori===v.wN.Horizontal?3:2,r.bbox,a);return i.addColorStop(0,Ke.Fq(t,e)),i.addColorStop(1,Ke.Fq(t,0)),i}}function on(t,e,r){return(n,a)=>{const i=(0,ut.AE)(),s=ar(n.scales.x.ori===v.wN.Horizontal?3:2,n.bbox,i),u=(0,pt.Z)(t).spin(-15),c=(0,pt.Z)(t).spin(15);return r.isDark?(s.addColorStop(0,c.lighten(10).setAlpha(e).toString()),s.addColorStop(1,u.darken(10).setAlpha(e).toString())):(s.addColorStop(0,c.lighten(10).setAlpha(e).toString()),s.addColorStop(1,u.setAlpha(e).toString())),s}}var un=(t=>(t[t.Right=0]="Right",t[t.Up=1]="Up",t[t.Left=2]="Left",t[t.Down=3]="Down",t))(un||{});function bt(t,e,r,n=!1){let a=t.scales[e],i=null,s=null;for(let C=0;C<r.length;C++){let B=r[C][0];if((B<=a.min||i==null)&&(i=C),s=C,B>=a.max)break}if(i===s)return r[i][1];let u=r[i][0],c=r[s][0];u===-1/0&&(u=a.min),c===1/0&&(c=a.max);let p=Math.round(t.valToPos(u,e,!0)),b=Math.round(t.valToPos(c,e,!0)),O=p-b;if(O===0)return r[s][1];let g,m,f,w;t.scales.x.ori===v.wN.Horizontal?(g=f=0,m=p,w=b):(m=w=0,g=p,f=b);let N=(0,ut.AE)().createLinearGradient(g,m,f,w),E;for(let C=i;C<=s;C++){let B=r[C],R=C===i?p:C===s?b:Math.round(t.valToPos(B[0],e,!0)),q=(p-R)/O;n&&C>i&&N.addColorStop(q,E),N.addColorStop(q,E=B[1])}return N}function cn(t,e){let r=t.scales[e],n=1/0,a=-1/0;return t.series.forEach((i,s)=>{if(i.show&&i.scale===e)if(i.min==null){let u=t.data[s];for(let c=0;c<u.length;c++)u[c]!=null&&(n=Math.min(n,u[c]),a=Math.max(a,u[c]))}else n=Math.min(n,i.min),a=Math.max(a,i.max)}),a===n&&(n=r.min,a=r.max),[n,a]}function Ct(t,e,r,n,a,i){var s,u,c,p;let b=(s=r??a)!=null?s:null,O=(u=n??i)!=null?u:null;if(b==null||O==null){let[g,m]=cn(t,e);b=(c=b??g)!=null?c:0,O=(p=O??m)!=null?p:100}return[b,O]}function fn(t){return t==="transparent"||t[0]==="#"&&t.slice(-2)==="00"}function ir(t,e,r,n,a,i,s,u){if(!r)throw Error("Missing colorMode required for color scheme gradients");if(!n)throw Error("Missing thresholds required for color scheme gradients");return(c,p)=>{let b=c.series[p].scale,O="";if(r.id===dt.S.Thresholds)if(n.mode===nr.H.Absolute){const g=n.steps.map(m=>[m.value,fn(m.color)?"#0000":Ke.Fq(e.visualization.getColorByName(m.color),t)]);O=bt(c,b,g,!0)}else{const[g,m]=Ct(c,b,a,i,s,u),f=m-g,w=n.steps.map(F=>[g+f*(F.value/100),Ke.Fq(e.visualization.getColorByName(F.color),t)]);O=bt(c,b,w,!0)}else if(r.getColors){const g=r.getColors(e),[m,f]=Ct(c,b,a,i,s,u),w=f-m,F=g.map((N,E)=>[m+w*(E/(g.length-1)),Ke.Fq(e.visualization.getColorByName(N),t)]);O=bt(c,b,F,!1)}return O}}var dn=Object.defineProperty,lr=Object.getOwnPropertySymbols,pn=Object.prototype.hasOwnProperty,mn=Object.prototype.propertyIsEnumerable,sr=(t,e,r)=>e in t?dn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,or=(t,e)=>{for(var r in e||(e={}))pn.call(e,r)&&sr(t,r,e[r]);if(lr)for(var r of lr(e))mn.call(e,r)&&sr(t,r,e[r]);return t};class gn extends Je{getConfig(){var e;const{facets:r,drawStyle:n,pathBuilder:a,pointsBuilder:i,pointsFilter:s,lineInterpolation:u,lineWidth:c,lineStyle:p,barAlignment:b,barWidthFactor:O,barMaxWidth:g,showPoints:m,pointSize:f,scaleKey:w,pxAlign:F,spanNulls:N,show:E=!0}=this.props;let C={},B=this.getLineColor();C.stroke=B,C.width=c,p&&p.fill!=="solid"&&(p.fill==="dot"&&(C.cap="round"),C.dash=(e=p.dash)!=null?e:[10,10]),a!=null?C.paths=a:n===v.l8.Points?C.paths=()=>null:n!=null&&(C.paths=(fe,oe,ee,be)=>hn(n,u,b,O,g)(fe,oe,ee,be));const R=typeof B=="string"?B:(fe,oe)=>fe.series[oe]._stroke,q={points:{stroke:R,fill:R,size:!f||f<c?void 0:f,filter:s}};return i!=null?q.points.show=i:n===v.l8.Points?q.points.show=!0:m===v.Jp.Auto?n===v.l8.Bars&&(q.points.show=!1):m===v.Jp.Never?q.points.show=!1:m===v.Jp.Always&&(q.points.show=!0),or(or({scale:w,facets:r,spanGaps:typeof N=="number"?!1:N,value:()=>"",pxAlign:F,show:E,fill:this.getFill()},C),q)}getLineColor(){const{lineColor:e,gradientMode:r,colorMode:n,thresholds:a,theme:i,hardMin:s,hardMax:u,softMin:c,softMax:p,dynamicSeriesColor:b}=this.props;return r===v.FI.None&&b?(O,g)=>{var m,f;return(f=(m=b(g))!=null?m:e)!=null?f:dt.R}:r===v.FI.Scheme&&n?.id!==dt.S.Fixed?ir(1,i,n,a,s,u,c,p):e??dt.R}getFill(){const{lineColor:e,fillColor:r,gradientMode:n,fillOpacity:a,colorMode:i,thresholds:s,theme:u,hardMin:c,hardMax:p,softMin:b,softMax:O,dynamicSeriesColor:g}=this.props;if(r)return r;const m=n??v.FI.None,f=(a??0)/100;if(m===v.FI.None&&g&&f>0)return(w,F)=>{let N=w.series[F]._stroke;return Ke.Fq(N??"",f)};switch(m){case v.FI.Opacity:return sn(r??e,f);case v.FI.Hue:return on(r??e,f,u);case v.FI.Scheme:if(i?.id!==dt.S.Fixed)return ir(f,u,i,s,c,p,b,O);default:if(f>0)return Ke.Fq(e??"",f)}}}let ke;function hn(t,e,r=v.pu.Center,n=.6,a=200){const i=de.Z.paths;if(ke||(ke={linear:i.linear(),smooth:i.spline(),stepBefore:i.stepped({align:-1}),stepAfter:i.stepped({align:1})}),t===v.l8.Bars){let s=`bars|${r}|${n}|${a}`;return ke[s]||(ke[s]=i.bars({size:[n,a],align:r})),ke[s]}else if(t===v.l8.Line){if(e===v.KC.StepBefore)return ke.stepBefore;if(e===v.KC.StepAfter)return ke.stepAfter;if(e===v.KC.Smooth)return ke.smooth}return ke.linear}var vn=Object.defineProperty,yn=Object.defineProperties,bn=Object.getOwnPropertyDescriptors,ur=Object.getOwnPropertySymbols,On=Object.prototype.hasOwnProperty,xn=Object.prototype.propertyIsEnumerable,cr=(t,e,r)=>e in t?vn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Sn=(t,e)=>{for(var r in e||(e={}))On.call(e,r)&&cr(t,r,e[r]);if(ur)for(var r of ur(e))xn.call(e,r)&&cr(t,r,e[r]);return t},wn=(t,e)=>yn(t,bn(e));function _n(t){const e=t.config.mode===v.i3.Dashed||t.config.mode===v.i3.DashedAndArea?[10,10]:null;function r(g,m,f,w){let F=g.ctx,N=0;for(let E=0;E<f.length;E++)if(f[E].color==="transparent"){N=E;break}F.lineWidth=2,e&&F.setLineDash(e);for(let E=1;E<f.length;E++){const C=f[E];let B;N>=E&&E>0?B=(0,pt.Z)(w.visualization.getColorByName(f[E-1].color)):B=(0,pt.Z)(w.visualization.getColorByName(C.color)),B.getAlpha()===1&&B.setAlpha(.7);let R=Math.round(g.bbox.left),q=Math.round(g.valToPos(C.value,m,!0)),fe=Math.round(g.bbox.left+g.bbox.width),oe=Math.round(g.valToPos(C.value,m,!0));F.beginPath(),F.moveTo(R,q),F.lineTo(fe,oe),F.strokeStyle=B.toString(),F.stroke()}}function n(g,m,f,w){let F=g.ctx,N=bt(g,m,f.map(E=>{let C=(0,pt.Z)(w.visualization.getColorByName(E.color));return C.getAlpha()===1&&C.setAlpha(.15),[E.value,C.toString()]}),!0);F.fillStyle=N,F.fillRect(g.bbox.left,g.bbox.top,g.bbox.width,g.bbox.height)}const{scaleKey:a,thresholds:i,theme:s,config:u,hardMin:c,hardMax:p,softMin:b,softMax:O}=t;return g=>{const m=g.ctx,{min:f,max:w}=g.scales.x,{min:F,max:N}=g.scales[a];if(f==null||w==null||F==null||N==null)return;let{steps:E,mode:C}=i;if(C===nr.H.Percentage){let[B,R]=Ct(g,a,c,p,b,O),q=R-B;E=E.map(fe=>wn(Sn({},fe),{value:B+q*(fe.value/100)}))}switch(m.save(),u.mode){case v.i3.Line:case v.i3.Dashed:r(g,a,E,s);break;case v.i3.Area:n(g,a,E,s);break;case v.i3.LineAndArea:case v.i3.DashedAndArea:n(g,a,E,s),r(g,a,E,s)}m.restore()}}var Fn=Object.defineProperty,Pn=Object.defineProperties,Mn=Object.getOwnPropertyDescriptors,fr=Object.getOwnPropertySymbols,Tn=Object.prototype.hasOwnProperty,An=Object.prototype.propertyIsEnumerable,dr=(t,e,r)=>e in t?Fn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Bt=(t,e)=>{for(var r in e||(e={}))Tn.call(e,r)&&dr(t,r,e[r]);if(fr)for(var r of fr(e))An.call(e,r)&&dr(t,r,e[r]);return t},Cn=(t,e)=>Pn(t,Mn(e));const Bn={drag:{setScale:!1},points:{size:(t,e)=>t.series[e].points.size*2,width:(t,e,r)=>r/4},focus:{prox:30}};class Nn{constructor(e=ie.Ys){this.series=[],this.axes={},this.scales=[],this.bands=[],this.stackingGroups=[],this.hasLeftAxis=!1,this.hooks={},this.tz=void 0,this.sync=!1,this.mode=1,this.frames=void 0,this.thresholds={},this.tooltipInterpolator=void 0,this.padding=void 0,this.prepData=void 0,this.scaleKeys=["",""],this.tzDate=n=>{let a=new Date(n);return this.tz?de.Z.tzDate(a,this.tz):a};var r;this.tz=(r=(0,me.Pr)(e,Date.now()))==null?void 0:r.ianaName}addHook(e,r){je("UPlotConfigBuilder",!1,"addHook",e),this.hooks[e]||(this.hooks[e]=[]),this.hooks[e].push(r)}addThresholds(e){this.thresholds[e.scaleKey]||(this.thresholds[e.scaleKey]=e,this.addHook("drawClear",_n(e)))}addAxis(e){var r,n,a;e.placement=(r=e.placement)!=null?r:v.LB.Auto,e.grid=(n=e.grid)!=null?n:{};let i=e.scaleKey;if(i==="x"&&(i+=(a=e.timeZone)!=null?a:""),this.axes[i]){this.axes[i].merge(e);return}e.placement===v.LB.Auto&&(e.placement=this.hasLeftAxis?v.LB.Right:v.LB.Left),e.placement===v.LB.Left&&(this.hasLeftAxis=!0),e.placement===v.LB.Hidden&&(e.grid.show=!1,e.size=0),this.axes[i]=new an(e)}getAxisPlacement(e){var r;const n=this.axes[e];return(r=n?.props.placement)!=null?r:v.LB.Left}setCursor(e){this.cursor=(0,$.merge)({},this.cursor,e)}setMode(e){this.mode=e}setSelect(e){this.select=e}addSeries(e){this.series.push(new gn(e))}getSeries(){return this.series}addScale(e){const r=this.scales.find(n=>n.props.scaleKey===e.scaleKey);if(r){r.merge(e);return}this.scales.push(new Xr(e))}addBand(e){this.bands.push(e)}setStackingGroups(e){this.stackingGroups=e}getStackingGroups(){return this.stackingGroups}setTooltipInterpolator(e){this.tooltipInterpolator=e}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(e){this.prepData=r=>(this.frames=r,e(r,this.getStackingGroups()))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(e){this.padding=e}getConfig(){const e=Cn(Bt({},k),{mode:this.mode,series:[this.mode===2?null:{value:()=>""}]});e.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map(n=>n.getConfig()),e.series=[...e.series,...this.series.map(n=>n.getConfig())],e.scales=this.scales.reduce((n,a)=>Bt(Bt({},n),a.getConfig()),{}),e.hooks=this.hooks,e.select=this.select;const r=(n="")=>(a,i)=>{let s=a.series[i].points._stroke;if(typeof s!="string"){let u=this.frames[0].fields[i];s=u.display(u.values[a.cursor.idxs[i]]).color}return s+n};return e.cursor=(0,$.merge)({},Bn,{points:{stroke:r("80"),fill:r()}},this.cursor),e.tzDate=this.tzDate,Array.isArray(this.padding)&&(e.padding=this.padding),this.stackingGroups.length&&this.stackingGroups.forEach(n=>{Y(n).forEach(a=>{this.addBand(a)})}),this.bands.length&&(e.bands=this.bands),e}ensureNonOverlappingAxes(e){const r=e.find(i=>i.props.scaleKey==="x"),n=e.filter(i=>{var s;return((s=i.props.grid)==null?void 0:s.show)===void 0}),a=n.findIndex(i=>i.props.placement===v.LB.Left||i.props.placement===v.LB.Right||i.props.placement===v.LB.Bottom&&i!==r);for(let i=0;i<n.length;i++)n[i]===r||i===a?n[i].props.grid.show=!0:n[i].props.grid.show=!1;return e}}var En=Object.defineProperty,In=Object.defineProperties,Ln=Object.getOwnPropertyDescriptors,pr=Object.getOwnPropertySymbols,Dn=Object.prototype.hasOwnProperty,Rn=Object.prototype.propertyIsEnumerable,mr=(t,e,r)=>e in t?En(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Nt=(t,e)=>{for(var r in e||(e={}))Dn.call(e,r)&&mr(t,r,e[r]);if(pr)for(var r of pr(e))Rn.call(e,r)&&mr(t,r,e[r]);return t},Et=(t,e)=>In(t,Ln(e));const kn={threshold:(t,e,r)=>t+r,midpoint:(t,e,r)=>(t+e)/2,plusone:(t,e,r)=>t+1};function jn(t,e){return t.fields.find(r=>e!=null?r.name===e:r.type===V.fS.time)}function Un(t){if(t.frame.length===0)return t.frame;let e=!0,{frame:r,refFieldName:n,refFieldPseudoMax:a,refFieldPseudoMin:i,insertMode:s}=t;s||(s=kn.threshold);const u=jn(r,n);if(u==null)return r;u.state=Et(Nt({},u.state),{nullThresholdApplied:!0});const c=r.fields.map(b=>{var O;return((O=b.config.custom)==null?void 0:O.insertNulls)||u.config.interval||null}),p=new Set(c);if(p.delete(null),p.size===0)return r;if(p.size===1){const b=p.values().next().value;if(b<=0)return r;const O=u.values,g=r.fields.map(f=>f.values),m=zn(O,g,b,i,a,s,e);return m===g?r:Et(Nt({},r),{length:m[0].length,fields:r.fields.map((f,w)=>Et(Nt({},f),{values:m[w]}))})}return r}function zn(t,e,r,n=null,a=null,i,s){const u=t.length,c=[];if(n!=null&&n<t[0]){let g=Math.ceil((t[0]-n)/r),m=t[0]-g*r;for(;m<t[0];)c.push(i(m-r,m,r)),m+=r}c.push(t[0]);let p=t[0];for(let g=1;g<u;g++){const m=t[g];for(;m-p>r&&(c.push(i(p,m,r)),p+=r,!!s););c.push(m),p=m}if(a!=null&&a>p)for(;p+r<a;)c.push(i(p,a,r)),p+=r;const b=c.length;if(b===u)return e;const O=[];for(let g of e){let m;if(g!==t){m=Array(b);for(let f=0,w=0;f<b;f++)m[f]=t[w]===c[f]?g[w++]:null}else m=c;O.push(m)}return O}var Vn=Object.defineProperty,Gn=Object.defineProperties,Kn=Object.getOwnPropertyDescriptors,gr=Object.getOwnPropertySymbols,Hn=Object.prototype.hasOwnProperty,$n=Object.prototype.propertyIsEnumerable,hr=(t,e,r)=>e in t?Vn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,It=(t,e)=>{for(var r in e||(e={}))Hn.call(e,r)&&hr(t,r,e[r]);if(gr)for(var r of gr(e))$n.call(e,r)&&hr(t,r,e[r]);return t},Zn=(t,e)=>Gn(t,Kn(e));function vr(t,e){var r,n,a;const i=t.y.values.length,s=It(It({},t.y.config),e),u=(r=t.x)!=null?r:{name:"",values:[...Array(i).keys()],type:V.fS.number,config:{}};let c={refId:"sparkline",fields:[u,Zn(It({},t.y),{config:s})],length:i};return Ht(u.values)||(c=(0,_t.aK)(c,0)),Un({frame:c,refFieldPseudoMin:(n=t.timeRange)==null?void 0:n.from.valueOf(),refFieldPseudoMax:(a=t.timeRange)==null?void 0:a.to.valueOf()})}var Wn=Object.defineProperty,Jn=Object.defineProperties,Yn=Object.getOwnPropertyDescriptors,yr=Object.getOwnPropertySymbols,qn=Object.prototype.hasOwnProperty,Qn=Object.prototype.propertyIsEnumerable,br=(t,e,r)=>e in t?Wn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ot=(t,e)=>{for(var r in e||(e={}))qn.call(e,r)&&br(t,r,e[r]);if(yr)for(var r of yr(e))Qn.call(e,r)&&br(t,r,e[r]);return t},Xn=(t,e)=>Jn(t,Yn(e));const ea={drawStyle:v.l8.Line,showPoints:v.Jp.Auto,axisPlacement:v.LB.Hidden,pointSize:2};class xt extends K.PureComponent{constructor(e){super(e);const r=vr(e.sparkline,e.config);this.state={data:X(r,ce(r)),alignedDataFrame:r,configBuilder:this.prepareConfig(r)}}static getDerivedStateFromProps(e,r){const n=vr(e.sparkline,e.config);return n?Xn(Ot({},r),{data:X(n,ce(n)),alignedDataFrame:n}):Ot({},r)}componentDidUpdate(e,r){const{alignedDataFrame:n}=this.state;if(!n)return;let a=!1;e.sparkline!==this.props.sparkline?a=!I(this.state.alignedDataFrame,r.alignedDataFrame):a=!(0,$.isEqual)(e.config,this.props.config),a&&this.setState({configBuilder:this.prepareConfig(n)})}getYRange(e){var r,n,a;let{min:i,max:s}=(r=this.state.alignedDataFrame.fields[1].state)==null?void 0:r.range;return i===s?(i===0?s=100:(i=0,s*=2),[i,s]):[Math.max(i,(n=e.config.min)!=null?n:-1/0),Math.min(s,(a=e.config.max)!=null?a:1/0)]}prepareConfig(e){var r;const{theme:n}=this.props,a=new Nn;a.setCursor({show:!1,x:!1,y:!1});const i=e.fields[0];a.addScale({scaleKey:"x",orientation:v.wN.Horizontal,direction:v.bQ.Right,isTime:!1,range:()=>{const{sparkline:s}=this.props;if(s.x){if(s.timeRange&&s.x.type===V.fS.time)return[s.timeRange.from.valueOf(),s.timeRange.to.valueOf()];const u=s.x.values;return[u[0],u[u.length-1]]}return[0,s.y.values.length-1]}}),a.addAxis({scaleKey:"x",theme:n,placement:v.LB.Hidden});for(let s=0;s<e.fields.length;s++){const u=e.fields[s],c=u.config,p=Ot(Ot({},ea),c.custom);if(u===i||u.type!==V.fS.number)continue;const b=c.unit||"__fixed";a.addScale({scaleKey:b,orientation:v.wN.Vertical,direction:v.bQ.Up,range:()=>this.getYRange(u)}),a.addAxis({scaleKey:b,theme:n,placement:v.LB.Hidden});const O=(0,Me.fD)(u),g=O.getCalculator(u,n)(0,0),m=p.drawStyle===v.l8.Points?v.Jp.Always:p.showPoints;a.addSeries({pxAlign:!1,scaleKey:b,theme:n,colorMode:O,thresholds:c.thresholds,drawStyle:p.drawStyle,lineColor:(r=p.lineColor)!=null?r:g,lineWidth:p.lineWidth,lineInterpolation:p.lineInterpolation,showPoints:m,pointSize:p.pointSize,fillOpacity:p.fillOpacity,fillColor:p.fillColor,lineStyle:p.lineStyle,gradientMode:p.gradientMode})}return a}render(){const{data:e,configBuilder:r}=this.state,{width:n,height:a}=this.props;return K.createElement(Z,{data:e,config:r,width:n,height:a})}}try{xt.displayName="Sparkline",xt.__docgenInfo={description:"",displayName:"Sparkline",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},config:{defaultValue:null,description:"",name:"config",required:!1,type:{name:"FieldConfig<GraphFieldConfig>"}},sparkline:{defaultValue:null,description:"",name:"sparkline",required:!0,type:{name:"FieldSparkline"}},theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"GrafanaTheme2"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Sparkline/Sparkline.tsx#Sparkline"]={docgenInfo:xt.__docgenInfo,name:"Sparkline",path:"src/components/Sparkline/Sparkline.tsx#Sparkline"})}catch{}},"./src/utils/colors.ts":function(He,Se,L){L.d(Se,{bM:function(){return Ie}});var $=L("../../../yarn/cache/lodash-npm-4.17.21-6382451519-c08619c038.zip/node_modules/lodash/lodash.js"),K=L.n($),I=L("../../../yarn/cache/tinycolor2-npm-1.6.0-8df41252c6-066c3acf4f.zip/node_modules/tinycolor2/esm/tinycolor.js");const ne=4,j="rgba(0, 211, 255, 1)",Oe="rgba(11, 237, 50, 1)",V="rgba(237, 46, 24, 1)",Me="rgba(150, 150, 150, 1)",v="rgba(247, 149, 32, 1)",de=.09,Te=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function Ae(le){const se=(0,$.map)(le,xe),ve=(0,$.sortBy)(se,["h"]),x=(0,$.chunk)(ve,ne),M=(0,$.map)(x,D=>(0,$.sortBy)(D,"l")),_=(0,$.flattenDeep)((0,$.zip)(...M));return(0,$.map)(_,pe)}function xe(le){return(0,I.Z)(le).toHsl()}function pe(le){return(0,I.Z)(le).toHexString()}function he(le){return tinycolor(le).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function Ie(le,se){const ve=(0,I.Z)(le),x=ve.getBrightness();return ve.getAlpha()<.3?se?"rgb(247, 248, 250)":"rgb(32, 34, 38)":x>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let we=Ae(Te)}}]);
