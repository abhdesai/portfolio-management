{"version":3,"file":"canvasPanel.e75a5f6d03dfb3878dc8.js","mappings":"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","sources":["webpack://grafana/./public/app/core/components/Layers/AddLayerButton.tsx","webpack://grafana/./public/app/plugins/panel/canvas/panelcfg.gen.ts","webpack://grafana/./public/app/features/canvas/types.ts","webpack://grafana/./public/app/features/canvas/element.ts","webpack://grafana/./public/app/plugins/panel/canvas/editor/element/ParamsEditor.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/element/utils.ts","webpack://grafana/./public/app/plugins/panel/canvas/editor/element/APIEditor.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/element/ButtonStyleEditor.tsx","webpack://grafana/./public/app/features/canvas/elements/button.tsx","webpack://grafana/./public/app/features/canvas/elements/droneFront.tsx","webpack://grafana/./public/app/features/canvas/elements/droneSide.tsx","webpack://grafana/./public/app/features/canvas/elements/droneTop.tsx","webpack://grafana/./public/app/features/canvas/elements/ellipse.tsx","webpack://grafana/./public/app/features/canvas/elements/icon.tsx","webpack://grafana/./public/app/features/canvas/elements/notFound.tsx","webpack://grafana/./public/app/features/canvas/runtime/element.tsx","webpack://grafana/./public/app/plugins/panel/canvas/utils.ts","webpack://grafana/./public/app/features/canvas/elements/metricValue.tsx","webpack://grafana/./public/app/features/canvas/elements/rectangle.tsx","webpack://grafana/./public/app/features/canvas/elements/server/types/database.tsx","webpack://grafana/./public/app/features/canvas/elements/server/types/single.tsx","webpack://grafana/./public/app/features/canvas/elements/server/types/stack.tsx","webpack://grafana/./public/app/features/canvas/elements/server/types/terminal.tsx","webpack://grafana/./public/app/features/canvas/elements/server/server.tsx","webpack://grafana/./public/app/features/canvas/elements/text.tsx","webpack://grafana/./public/app/features/canvas/elements/windTurbine.tsx","webpack://grafana/./public/app/features/canvas/registry.ts","webpack://grafana/./public/app/plugins/panel/canvas/types.ts","webpack://grafana/./public/app/features/canvas/runtime/frame.tsx","webpack://grafana/../yarn/cache/framework-utils-npm-1.1.0-37a54a069c-01b61ead17.zip/node_modules/framework-utils/dist/utils.esm.js","webpack://grafana/../yarn/cache/@egjs-list-differ-npm-1.0.0-f4b91781db-803d8e9818.zip/node_modules/@egjs/list-differ/dist/list-differ.esm.js","webpack://grafana/../yarn/cache/@daybrush-utils-npm-1.13.0-bde6dcfa07-79a09fe785.zip/node_modules/@daybrush/utils/dist/utils.esm.js","webpack://grafana/../yarn/cache/react-simple-compat-npm-1.2.3-afcc191a97-779aaffe2f.zip/node_modules/react-simple-compat/dist/compat.esm.js","webpack://grafana/../yarn/cache/@egjs-agent-npm-2.3.0-e88ca0eec2-072b0a965b.zip/node_modules/@egjs/agent/dist/agent.esm.js","webpack://grafana/../yarn/cache/@scena-matrix-npm-1.1.1-da964f6b3a-713bb4178d.zip/node_modules/@scena/matrix/dist/matrix.esm.js","webpack://grafana/../yarn/cache/css-to-mat-npm-1.1.1-16d4b42801-9a5704e040.zip/node_modules/css-to-mat/dist/css-to-mat.esm.js","webpack://grafana/../yarn/cache/@egjs-children-differ-npm-1.0.1-37f45ddf97-4237761002.zip/node_modules/@egjs/children-differ/dist/children-differ.esm.js","webpack://grafana/../yarn/cache/overlap-area-npm-1.1.0-68e85a19ba-98cafefd51.zip/node_modules/overlap-area/dist/overlap-area.esm.js","webpack://grafana/../yarn/cache/@scena-event-emitter-npm-1.0.5-7ebf361d17-986e68f664.zip/node_modules/@scena/event-emitter/dist/event-emitter.esm.js","webpack://grafana/../yarn/cache/@scena-dragscroll-npm-1.4.0-0e46bff48a-97b4df54b7.zip/node_modules/@scena/dragscroll/dist/dragscroll.esm.js","webpack://grafana/../yarn/cache/gesto-npm-1.19.1-01f5e2e210-5049ba2a10.zip/node_modules/gesto/dist/gesto.esm.js","webpack://grafana/../yarn/cache/css-styled-npm-1.0.8-51b4b076e1-62f3ee73ce.zip/node_modules/css-styled/dist/styled.esm.js","webpack://grafana/../yarn/cache/react-compat-css-styled-npm-1.0.9-40679c954c-789aaf1e35.zip/node_modules/react-compat-css-styled/dist/styled.esm.js","webpack://grafana/../yarn/cache/react-compat-moveable-npm-0.31.1-9c972a222d-84d0de349b.zip/node_modules/react-compat-moveable/dist/moveable.esm.js","webpack://grafana/../yarn/cache/moveable-npm-0.43.1-e02ce28e7a-189ca7d72f.zip/node_modules/moveable/dist/moveable.esm.js","webpack://grafana/../yarn/cache/keycon-npm-1.2.2-ec3a2229d8-d4ce0551f5.zip/node_modules/keycon/dist/keycon.esm.js","webpack://grafana/../yarn/cache/selecto-npm-1.26.0-1a4ba17a6a-3097daed65.zip/node_modules/selecto/dist/selecto.esm.js","webpack://grafana/./public/app/plugins/panel/canvas/components/CanvasContextMenu.tsx","webpack://grafana/./public/app/plugins/panel/canvas/components/CanvasTooltip.tsx","webpack://grafana/./public/app/plugins/panel/canvas/components/connections/ConnectionAnchors.tsx","webpack://grafana/./public/app/plugins/panel/canvas/components/connections/ConnectionSVG.tsx","webpack://grafana/./public/app/plugins/panel/canvas/components/connections/Connections.tsx","webpack://grafana/./public/app/features/canvas/runtime/ables.tsx","webpack://grafana/./public/app/features/canvas/runtime/root.tsx","webpack://grafana/./public/app/features/canvas/runtime/scene.tsx","webpack://grafana/./public/app/plugins/panel/canvas/components/SetBackground.tsx","webpack://grafana/./public/app/features/dimensions/editors/BackgroundSizeEditor.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/options.ts","webpack://grafana/./public/app/plugins/panel/canvas/editor/element/ConstraintSelectionBox.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/element/QuickPositioning.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/element/PlacementEditor.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/element/elementEditor.tsx","webpack://grafana/./.yarn/__virtual__/rc-tree-virtual-27df11d5d3/2/yarn/cache/rc-tree-npm-5.8.0-5cf1bcebc5-130cc89f58.zip/node_modules/rc-tree/es/contextTypes.js","webpack://grafana/./.yarn/__virtual__/rc-tree-virtual-27df11d5d3/2/yarn/cache/rc-tree-npm-5.8.0-5cf1bcebc5-130cc89f58.zip/node_modules/rc-tree/es/DropIndicator.js","webpack://grafana/../yarn/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-abdcbdd590.zip/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js","webpack://grafana/./.yarn/__virtual__/rc-tree-virtual-27df11d5d3/2/yarn/cache/rc-tree-npm-5.8.0-5cf1bcebc5-130cc89f58.zip/node_modules/rc-tree/es/Indent.js","webpack://grafana/./.yarn/__virtual__/rc-tree-virtual-27df11d5d3/2/yarn/cache/rc-tree-npm-5.8.0-5cf1bcebc5-130cc89f58.zip/node_modules/rc-tree/es/utils/keyUtil.js","webpack://grafana/./.yarn/__virtual__/rc-tree-virtual-27df11d5d3/2/yarn/cache/rc-tree-npm-5.8.0-5cf1bcebc5-130cc89f58.zip/node_modules/rc-tree/es/utils/treeUtil.js","webpack://grafana/./.yarn/__virtual__/rc-tree-virtual-27df11d5d3/2/yarn/cache/rc-tree-npm-5.8.0-5cf1bcebc5-130cc89f58.zip/node_modules/rc-tree/es/TreeNode.js","webpack://grafana/./.yarn/__virtual__/rc-tree-virtual-27df11d5d3/2/yarn/cache/rc-tree-npm-5.8.0-5cf1bcebc5-130cc89f58.zip/node_modules/rc-tree/es/useUnmount.js","webpack://grafana/./.yarn/__virtual__/rc-tree-virtual-27df11d5d3/2/yarn/cache/rc-tree-npm-5.8.0-5cf1bcebc5-130cc89f58.zip/node_modules/rc-tree/es/MotionTreeNode.js","webpack://grafana/./.yarn/__virtual__/rc-tree-virtual-27df11d5d3/2/yarn/cache/rc-tree-npm-5.8.0-5cf1bcebc5-130cc89f58.zip/node_modules/rc-tree/es/utils/diffUtil.js","webpack://grafana/./.yarn/__virtual__/rc-tree-virtual-27df11d5d3/2/yarn/cache/rc-tree-npm-5.8.0-5cf1bcebc5-130cc89f58.zip/node_modules/rc-tree/es/NodeList.js","webpack://grafana/./.yarn/__virtual__/rc-tree-virtual-27df11d5d3/2/yarn/cache/rc-tree-npm-5.8.0-5cf1bcebc5-130cc89f58.zip/node_modules/rc-tree/es/util.js","webpack://grafana/./.yarn/__virtual__/rc-tree-virtual-27df11d5d3/2/yarn/cache/rc-tree-npm-5.8.0-5cf1bcebc5-130cc89f58.zip/node_modules/rc-tree/es/utils/conductUtil.js","webpack://grafana/./.yarn/__virtual__/rc-tree-virtual-27df11d5d3/2/yarn/cache/rc-tree-npm-5.8.0-5cf1bcebc5-130cc89f58.zip/node_modules/rc-tree/es/Tree.js","webpack://grafana/./.yarn/__virtual__/rc-tree-virtual-27df11d5d3/2/yarn/cache/rc-tree-npm-5.8.0-5cf1bcebc5-130cc89f58.zip/node_modules/rc-tree/es/index.js","webpack://grafana/./public/app/plugins/panel/canvas/globalStyles.ts","webpack://grafana/./public/app/plugins/panel/canvas/editor/layer/TreeNodeTitle.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/layer/tree.ts","webpack://grafana/./public/app/plugins/panel/canvas/editor/layer/TreeNavigationEditor.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/layer/layerEditor.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/inline/TabsEditor.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/inline/InlineEditBody.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/inline/InlineEdit.tsx","webpack://grafana/./public/app/plugins/panel/canvas/CanvasPanel.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/connectionEditor.tsx","webpack://grafana/./public/app/plugins/panel/canvas/migrations.ts","webpack://grafana/./public/app/plugins/panel/canvas/module.tsx"],"sourcesContent":["import React from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { ValuePicker } from '@grafana/ui';\n\nexport type AddLayerButtonProps = {\n  onChange: (sel: SelectableValue<string>) => void;\n  options: Array<SelectableValue<string>>;\n  label: string;\n};\n\nexport const AddLayerButton = ({ onChange, options, label }: AddLayerButtonProps) => {\n  return (\n    <ValuePicker\n      icon=\"plus\"\n      label={label}\n      variant=\"secondary\"\n      options={options}\n      onChange={onChange}\n      isFullWidth={true}\n    />\n  );\n};\n","// Code generated - EDITING IS FUTILE. DO NOT EDIT.\n//\n// Generated by:\n//     public/app/plugins/gen.go\n// Using jennies:\n//     TSTypesJenny\n//     PluginTSTypesJenny\n//\n// Run 'make gen-cue' from repository root to regenerate.\n\nimport * as ui from '@grafana/schema';\n\nexport enum HorizontalConstraint {\n  Center = 'center',\n  Left = 'left',\n  LeftRight = 'leftright',\n  Right = 'right',\n  Scale = 'scale',\n}\n\nexport enum VerticalConstraint {\n  Bottom = 'bottom',\n  Center = 'center',\n  Scale = 'scale',\n  Top = 'top',\n  TopBottom = 'topbottom',\n}\n\nexport interface Constraint {\n  horizontal?: HorizontalConstraint;\n  vertical?: VerticalConstraint;\n}\n\nexport interface Placement {\n  bottom?: number;\n  height?: number;\n  left?: number;\n  right?: number;\n  top?: number;\n  width?: number;\n}\n\nexport enum BackgroundImageSize {\n  Contain = 'contain',\n  Cover = 'cover',\n  Fill = 'fill',\n  Original = 'original',\n  Tile = 'tile',\n}\n\nexport interface BackgroundConfig {\n  color?: ui.ColorDimensionConfig;\n  image?: ui.ResourceDimensionConfig;\n  size?: BackgroundImageSize;\n}\n\nexport interface LineConfig {\n  color?: ui.ColorDimensionConfig;\n  width?: number;\n}\n\nexport enum HttpRequestMethod {\n  GET = 'GET',\n  POST = 'POST',\n  PUT = 'PUT',\n}\n\nexport interface ConnectionCoordinates {\n  x: number;\n  y: number;\n}\n\nexport enum ConnectionPath {\n  Straight = 'straight',\n}\n\nexport interface CanvasConnection {\n  color?: ui.ColorDimensionConfig;\n  path: ConnectionPath;\n  size?: ui.ScaleDimensionConfig;\n  source: ConnectionCoordinates;\n  target: ConnectionCoordinates;\n  targetName?: string;\n}\n\nexport interface CanvasElementOptions {\n  background?: BackgroundConfig;\n  border?: LineConfig;\n  /**\n   * TODO: figure out how to define this (element config(s))\n   */\n  config?: unknown;\n  connections?: Array<CanvasConnection>;\n  constraint?: Constraint;\n  name: string;\n  placement?: Placement;\n  type: string;\n}\n\nexport const defaultCanvasElementOptions: Partial<CanvasElementOptions> = {\n  connections: [],\n};\n\nexport interface Options {\n  /**\n   * Enable inline editing\n   */\n  inlineEditing: boolean;\n  /**\n   * The root element of canvas (frame), where all canvas elements are nested\n   * TODO: Figure out how to define a default value for this\n   */\n  root: {\n    /**\n     * Name of the root element\n     */\n    name: string;\n    /**\n     * Type of root element (frame)\n     */\n    type: 'frame';\n    /**\n     * The list of canvas elements attached to the root element\n     */\n    elements: Array<CanvasElementOptions>;\n  };\n  /**\n   * Show all available element types\n   */\n  showAdvancedTypes: boolean;\n}\n\nexport const defaultOptions: Partial<Options> = {\n  inlineEditing: true,\n  showAdvancedTypes: true,\n};\n","import { LinkModel } from '@grafana/data/src';\nimport { ColorDimensionConfig, TextDimensionConfig } from '@grafana/schema';\nimport {\n  BackgroundImageSize,\n  Constraint,\n  HorizontalConstraint,\n  Placement,\n  VerticalConstraint,\n  LineConfig,\n  BackgroundConfig,\n} from 'app/plugins/panel/canvas/panelcfg.gen';\n\nexport enum QuickPlacement {\n  Top = 'top',\n  Bottom = 'bottom',\n  Left = 'left',\n  Right = 'right',\n  HorizontalCenter = 'hcenter',\n  VerticalCenter = 'vcenter',\n}\n\nexport enum Align {\n  Left = 'left',\n  Center = 'center',\n  Right = 'right',\n}\n\nexport enum VAlign {\n  Top = 'top',\n  Middle = 'middle',\n  Bottom = 'bottom',\n}\n\nexport interface TextData {\n  text?: string;\n  color?: string;\n  size?: number; // 0 or missing will \"auto size\"\n  align: Align;\n  valign: VAlign;\n  links?: LinkModel[];\n}\n\nexport interface TextConfig {\n  text?: TextDimensionConfig;\n  color?: ColorDimensionConfig;\n  size?: number; // 0 or missing will \"auto size\"\n  align: Align;\n  valign: VAlign;\n}\n\nexport interface EllipseConfig extends TextConfig {\n  backgroundColor?: ColorDimensionConfig;\n  borderColor?: ColorDimensionConfig;\n  width?: number;\n}\n\nexport interface EllipseData extends TextData {\n  backgroundColor?: string;\n  borderColor?: string;\n  width?: number;\n}\n\nexport interface StandardEditorConfig {\n  layout?: boolean;\n  background?: boolean;\n  border?: boolean;\n}\n\nexport {\n  Placement,\n  Constraint,\n  HorizontalConstraint,\n  VerticalConstraint,\n  BackgroundImageSize,\n  LineConfig,\n  BackgroundConfig,\n};\n","import { ComponentType } from 'react';\n\nimport { RegistryItem } from '@grafana/data';\nimport { PanelOptionsSupplier } from '@grafana/data/src/panel/PanelPlugin';\nimport { ColorDimensionConfig, ScaleDimensionConfig } from '@grafana/schema';\nimport { config } from 'app/core/config';\n\nimport { DimensionContext } from '../dimensions';\n\nimport { BackgroundConfig, Constraint, LineConfig, Placement, StandardEditorConfig } from './types';\n\n/**\n * This gets saved in panel json\n *\n * depending on the type, it may have additional config\n *\n * @alpha\n */\nexport interface CanvasElementOptions<TConfig = any> {\n  name: string; // configured unique display name\n  type: string;\n\n  // Custom options depending on the type\n  config?: TConfig;\n\n  // Standard options available for all elements\n  constraint?: Constraint; // defaults vertical - top, horizontal - left\n  placement?: Placement;\n  background?: BackgroundConfig;\n  border?: LineConfig;\n  connections?: CanvasConnection[];\n}\n\n// Unit is percentage from the middle of the element\n// 0, 0 middle; -1, -1 bottom left; 1, 1 top right\nexport interface ConnectionCoordinates {\n  x: number;\n  y: number;\n}\n\nexport enum ConnectionPath {\n  Straight = 'straight',\n}\n\nexport interface CanvasConnection {\n  source: ConnectionCoordinates;\n  target: ConnectionCoordinates;\n  targetName?: string;\n  path: ConnectionPath;\n  color?: ColorDimensionConfig;\n  size?: ScaleDimensionConfig;\n  // See https://github.com/anseki/leader-line#options for more examples of more properties\n}\n\nexport interface CanvasElementProps<TConfig = any, TData = any> {\n  // Saved config\n  config: TConfig;\n\n  // Raw data\n  data?: TData;\n\n  // If the element is currently selected\n  isSelected?: boolean;\n}\n\n/**\n * Canvas item builder\n *\n * @alpha\n */\nexport interface CanvasElementItem<TConfig = any, TData = any> extends RegistryItem {\n  /** The default width/height to use when adding  */\n  defaultSize?: Placement;\n\n  prepareData?: (ctx: DimensionContext, cfg: TConfig) => TData;\n\n  /** Component used to draw */\n  display: ComponentType<CanvasElementProps<TConfig, TData>>;\n\n  getNewOptions: (options?: CanvasElementOptions) => Omit<CanvasElementOptions<TConfig>, 'type' | 'name'>;\n\n  /** Build the configuration UI */\n  registerOptionsUI?: PanelOptionsSupplier<CanvasElementOptions<TConfig>>;\n\n  /** If item has an edit mode */\n  hasEditMode?: boolean;\n\n  /** Optional config to customize what standard element editor options are available for the item */\n  standardEditorConfig?: StandardEditorConfig;\n}\n\nexport const defaultBgColor = '#D9D9D9';\nexport const defaultTextColor = '#000000';\nexport const defaultLightTextColor = '#F0F4FD';\nexport const defaultThemeTextColor = config.theme2.colors.text.primary;\n","import React, { useState } from 'react';\n\nimport { HorizontalGroup, IconButton, Input, VerticalGroup } from '@grafana/ui';\n\ninterface Props {\n  onChange: (v: Array<[string, string]>) => void;\n  value: Array<[string, string]>;\n}\n\nexport const ParamsEditor = ({ value, onChange }: Props) => {\n  const [paramName, setParamName] = useState('');\n  const [paramValue, setParamValue] = useState('');\n\n  const changeParamValue = ({ currentTarget }: React.ChangeEvent<HTMLInputElement>) => {\n    setParamValue(currentTarget.value);\n  };\n\n  const changeParamName = ({ currentTarget }: React.ChangeEvent<HTMLInputElement>) => {\n    setParamName(currentTarget.value);\n  };\n\n  const removeParam = (key: string) => () => {\n    const updatedParams = value.filter((param) => param[0] !== key);\n    onChange(updatedParams);\n  };\n\n  const addParam = () => {\n    const key = paramName;\n    let newParams: Array<[string, string]>;\n    if (value) {\n      newParams = value.filter((e) => e[0] !== key);\n    } else {\n      newParams = [];\n    }\n    newParams.push([key, paramValue]);\n    newParams.sort((a, b) => a[0].localeCompare(b[0]));\n\n    setParamName('');\n    setParamValue('');\n    onChange(newParams);\n  };\n\n  const isAddParamsDisabled = !paramName && !paramValue;\n\n  return (\n    <div>\n      <HorizontalGroup>\n        <Input placeholder=\"Key\" value={paramName} onChange={changeParamName} />\n        <Input placeholder=\"Value\" value={paramValue} onChange={changeParamValue} />\n        <IconButton aria-label=\"add\" name=\"plus-circle\" onClick={addParam} disabled={isAddParamsDisabled} />\n      </HorizontalGroup>\n      <VerticalGroup>\n        {Array.from(value || []).map((entry) => (\n          <HorizontalGroup key={entry[0]}>\n            <Input disabled value={entry[0]} />\n            <Input disabled value={entry[1]} />\n            <IconButton aria-label=\"delete\" onClick={removeParam(entry[0])} name=\"trash-alt\" />\n          </HorizontalGroup>\n        ))}\n      </VerticalGroup>\n    </div>\n  );\n};\n","import { AppEvents } from '@grafana/data';\nimport { BackendSrvRequest, getBackendSrv, getTemplateSrv } from '@grafana/runtime';\nimport { appEvents } from 'app/core/core';\nimport { getDashboardSrv } from 'app/features/dashboard/services/DashboardSrv';\n\nimport { HttpRequestMethod } from '../../panelcfg.gen';\n\nimport { APIEditorConfig } from './APIEditor';\n\ntype IsLoadingCallback = (loading: boolean) => void;\n\nexport const callApi = (api: APIEditorConfig, updateLoadingStateCallback?: IsLoadingCallback) => {\n  if (api && api.endpoint) {\n    // If API endpoint origin matches Grafana origin, don't call it.\n    if (requestMatchesGrafanaOrigin(api.endpoint)) {\n      appEvents.emit(AppEvents.alertError, ['Cannot call API at Grafana origin.']);\n      updateLoadingStateCallback && updateLoadingStateCallback(false);\n      return;\n    }\n    const request = getRequest(api);\n\n    getBackendSrv()\n      .fetch(request)\n      .subscribe({\n        error: (error) => {\n          appEvents.emit(AppEvents.alertError, ['An error has occurred. Check console output for more details.']);\n          console.error('API call error: ', error);\n          updateLoadingStateCallback && updateLoadingStateCallback(false);\n        },\n        complete: () => {\n          appEvents.emit(AppEvents.alertSuccess, ['API call was successful']);\n          updateLoadingStateCallback && updateLoadingStateCallback(false);\n        },\n      });\n  }\n};\n\nexport const interpolateVariables = (text: string) => {\n  const panel = getDashboardSrv().getCurrent()?.panelInEdit;\n  return getTemplateSrv().replace(text, panel?.scopedVars);\n};\n\nexport const getRequest = (api: APIEditorConfig) => {\n  const requestHeaders: HeadersInit = [];\n\n  const url = new URL(interpolateVariables(api.endpoint!));\n\n  let request: BackendSrvRequest = {\n    url: url.toString(),\n    method: api.method,\n    data: getData(api),\n    headers: requestHeaders,\n  };\n\n  if (api.headerParams) {\n    api.headerParams.forEach((param) => {\n      requestHeaders.push([interpolateVariables(param[0]), interpolateVariables(param[1])]);\n    });\n  }\n\n  if (api.queryParams) {\n    api.queryParams?.forEach((param) => {\n      url.searchParams.append(interpolateVariables(param[0]), interpolateVariables(param[1]));\n    });\n\n    request.url = url.toString();\n  }\n\n  if (api.method === HttpRequestMethod.POST) {\n    requestHeaders.push(['Content-Type', api.contentType!]);\n  }\n\n  request.headers = requestHeaders;\n\n  return request;\n};\n\nconst getData = (api: APIEditorConfig) => {\n  let data: string | undefined = api.data ? interpolateVariables(api.data) : '{}';\n  if (api.method === HttpRequestMethod.GET) {\n    data = undefined;\n  }\n\n  return data;\n};\n\nconst requestMatchesGrafanaOrigin = (requestEndpoint: string) => {\n  const requestURL = new URL(requestEndpoint);\n  const grafanaURL = new URL(window.location.origin);\n  return requestURL.origin === grafanaURL.origin;\n};\n","import React, { useCallback } from 'react';\n\nimport {\n  StandardEditorProps,\n  StandardEditorsRegistryItem,\n  StringFieldConfigSettings,\n  SelectableValue,\n} from '@grafana/data';\nimport { Button, Field, InlineField, InlineFieldRow, JSONFormatter, RadioButtonGroup, Select } from '@grafana/ui';\nimport { StringValueEditor } from 'app/core/components/OptionsUI/string';\nimport { defaultApiConfig } from 'app/features/canvas/elements/button';\n\nimport { HttpRequestMethod } from '../../panelcfg.gen';\n\nimport { ParamsEditor } from './ParamsEditor';\nimport { callApi, interpolateVariables } from './utils';\n\nexport interface APIEditorConfig {\n  method: string;\n  endpoint: string;\n  data?: string;\n  contentType?: string;\n  queryParams?: Array<[string, string]>;\n  headerParams?: Array<[string, string]>;\n}\n\nconst dummyStringSettings = {\n  settings: {},\n} as StandardEditorsRegistryItem<string, StringFieldConfigSettings>;\n\ntype Props = StandardEditorProps<APIEditorConfig>;\n\nconst httpMethodOptions = [\n  { label: HttpRequestMethod.GET, value: HttpRequestMethod.GET },\n  { label: HttpRequestMethod.POST, value: HttpRequestMethod.POST },\n  { label: HttpRequestMethod.PUT, value: HttpRequestMethod.PUT },\n];\n\nconst contentTypeOptions: SelectableValue[] = [\n  { label: 'JSON', value: 'application/json' },\n  { label: 'Text', value: 'text/plain' },\n  { label: 'JavaScript', value: 'application/javascript' },\n  { label: 'HTML', value: 'text/html' },\n  { label: 'XML', value: 'application/XML' },\n  { label: 'x-www-form-urlencoded', value: 'application/x-www-form-urlencoded' },\n];\n\nexport function APIEditor({ value, context, onChange }: Props) {\n  const LABEL_WIDTH = 13;\n\n  if (!value) {\n    value = defaultApiConfig;\n  }\n\n  const onEndpointChange = useCallback(\n    (endpoint = '') => {\n      onChange({\n        ...value,\n        endpoint,\n      });\n    },\n    [onChange, value]\n  );\n\n  const onDataChange = useCallback(\n    (data?: string) => {\n      onChange({\n        ...value,\n        data,\n      });\n    },\n    [onChange, value]\n  );\n\n  const onMethodChange = useCallback(\n    (method: string) => {\n      onChange({\n        ...value,\n        method,\n      });\n    },\n    [onChange, value]\n  );\n\n  const onContentTypeChange = useCallback(\n    (contentType: SelectableValue<string>) => {\n      onChange({\n        ...value,\n        contentType: contentType?.value,\n      });\n    },\n    [onChange, value]\n  );\n\n  const formatCreateLabel = (input: string) => {\n    return input;\n  };\n\n  const onQueryParamsChange = useCallback(\n    (queryParams: Array<[string, string]>) => {\n      onChange({\n        ...value,\n        queryParams,\n      });\n    },\n    [onChange, value]\n  );\n\n  const onHeaderParamsChange = useCallback(\n    (headerParams: Array<[string, string]>) => {\n      onChange({\n        ...value,\n        headerParams,\n      });\n    },\n    [onChange, value]\n  );\n\n  const renderJSON = (data: string) => {\n    try {\n      const json = JSON.parse(interpolateVariables(data));\n      return <JSONFormatter json={json} />;\n    } catch (error) {\n      if (error instanceof Error) {\n        return `Invalid JSON provided: ${error.message}`;\n      } else {\n        return 'Invalid JSON provided';\n      }\n    }\n  };\n\n  const renderTestAPIButton = (api: APIEditorConfig) => {\n    if (api && api.endpoint) {\n      return (\n        <Button onClick={() => callApi(api)} title=\"Test API\">\n          Test API\n        </Button>\n      );\n    }\n\n    return;\n  };\n\n  return (\n    <>\n      <InlineFieldRow>\n        <InlineField label=\"Endpoint\" labelWidth={LABEL_WIDTH} grow={true}>\n          <StringValueEditor\n            context={context}\n            value={value?.endpoint}\n            onChange={onEndpointChange}\n            item={dummyStringSettings}\n          />\n        </InlineField>\n      </InlineFieldRow>\n      <InlineFieldRow>\n        <InlineField label=\"Method\" labelWidth={LABEL_WIDTH} grow={true}>\n          <RadioButtonGroup value={value?.method} options={httpMethodOptions} onChange={onMethodChange} fullWidth />\n        </InlineField>\n      </InlineFieldRow>\n      {value?.method !== HttpRequestMethod.GET && (\n        <InlineFieldRow>\n          <InlineField label=\"Content-Type\" labelWidth={LABEL_WIDTH} grow={true}>\n            <Select\n              options={contentTypeOptions}\n              allowCustomValue={true}\n              formatCreateLabel={formatCreateLabel}\n              value={value?.contentType}\n              onChange={onContentTypeChange}\n            />\n          </InlineField>\n        </InlineFieldRow>\n      )}\n\n      <br />\n      <Field label=\"Query parameters\">\n        <ParamsEditor value={value?.queryParams ?? []} onChange={onQueryParamsChange} />\n      </Field>\n      <Field label=\"Header parameters\">\n        <ParamsEditor value={value?.headerParams ?? []} onChange={onHeaderParamsChange} />\n      </Field>\n      {value?.method !== HttpRequestMethod.GET && value?.contentType && (\n        <Field label=\"Payload\">\n          <StringValueEditor\n            context={context}\n            value={value?.data ?? '{}'}\n            onChange={onDataChange}\n            item={{ ...dummyStringSettings, settings: { useTextarea: true } }}\n          />\n        </Field>\n      )}\n      {renderTestAPIButton(value)}\n      <br />\n      {value?.method !== HttpRequestMethod.GET &&\n        value?.contentType === defaultApiConfig.contentType &&\n        renderJSON(value?.data ?? '{}')}\n    </>\n  );\n}\n","import React, { useCallback } from 'react';\n\nimport { SelectableValue, StandardEditorProps } from '@grafana/data';\nimport { ButtonVariant, InlineField, InlineFieldRow, Select } from '@grafana/ui';\nimport { defaultStyleConfig } from 'app/features/canvas/elements/button';\n\nexport interface ButtonStyleConfig {\n  variant: ButtonVariant;\n}\n\ntype Props = StandardEditorProps<ButtonStyleConfig>;\n\nconst variantOptions: SelectableValue[] = [\n  { label: 'primary', value: 'primary' },\n  { label: 'secondary', value: 'secondary' },\n  { label: 'success', value: 'success' },\n  { label: 'destructive', value: 'destructive' },\n];\n\nexport const ButtonStyleEditor = ({ value, onChange }: Props) => {\n  if (!value) {\n    value = defaultStyleConfig;\n  }\n\n  const onVariantChange = useCallback(\n    (variant: SelectableValue<ButtonVariant>) => {\n      onChange({\n        ...value,\n        variant: variant?.value ?? defaultStyleConfig.variant,\n      });\n    },\n    [onChange, value]\n  );\n\n  return (\n    <>\n      <InlineFieldRow>\n        <InlineField label=\"Variant\" grow={true}>\n          <Select options={variantOptions} value={value?.variant} onChange={onVariantChange} />\n        </InlineField>\n      </InlineFieldRow>\n    </>\n  );\n};\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { PluginState } from '@grafana/data/src';\nimport { TextDimensionMode } from '@grafana/schema';\nimport { Button, Spinner, useStyles2 } from '@grafana/ui';\nimport { DimensionContext } from 'app/features/dimensions/context';\nimport { ColorDimensionEditor } from 'app/features/dimensions/editors';\nimport { TextDimensionEditor } from 'app/features/dimensions/editors/TextDimensionEditor';\nimport { APIEditor, APIEditorConfig } from 'app/plugins/panel/canvas/editor/element/APIEditor';\nimport { ButtonStyleConfig, ButtonStyleEditor } from 'app/plugins/panel/canvas/editor/element/ButtonStyleEditor';\nimport { callApi } from 'app/plugins/panel/canvas/editor/element/utils';\nimport { HttpRequestMethod } from 'app/plugins/panel/canvas/panelcfg.gen';\n\nimport { CanvasElementItem, CanvasElementProps, defaultLightTextColor } from '../element';\nimport { Align, TextConfig, TextData } from '../types';\n\ninterface ButtonData extends Omit<TextData, 'valign'> {\n  api?: APIEditorConfig;\n  style?: ButtonStyleConfig;\n}\n\ninterface ButtonConfig extends Omit<TextConfig, 'valign'> {\n  api?: APIEditorConfig;\n  style?: ButtonStyleConfig;\n}\n\nexport const defaultApiConfig: APIEditorConfig = {\n  endpoint: '',\n  method: HttpRequestMethod.POST,\n  data: '{}',\n  contentType: 'application/json',\n  queryParams: [],\n  headerParams: [],\n};\n\nexport const defaultStyleConfig: ButtonStyleConfig = {\n  variant: 'primary',\n};\n\nconst ButtonDisplay = ({ data }: CanvasElementProps<ButtonConfig, ButtonData>) => {\n  const styles = useStyles2(getStyles, data);\n\n  const [isLoading, setIsLoading] = React.useState(false);\n\n  const updateLoadingStateCallback = (loading: boolean) => {\n    setIsLoading(loading);\n  };\n\n  const onClick = () => {\n    if (data?.api && data?.api?.endpoint) {\n      setIsLoading(true);\n      callApi(data.api, updateLoadingStateCallback);\n    }\n  };\n\n  return (\n    <Button type=\"submit\" variant={data?.style?.variant} onClick={onClick} className={styles.button}>\n      <span>\n        {isLoading && <Spinner inline={true} className={styles.buttonSpinner} />}\n        {data?.text}\n      </span>\n    </Button>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2, data: ButtonData | undefined) => ({\n  button: css({\n    height: '100%',\n    width: '100%',\n    display: 'grid',\n\n    '> span': {\n      display: 'inline-grid',\n      gridAutoFlow: 'column',\n      textAlign: data?.align,\n      fontSize: `${data?.size}px`,\n      color: data?.color,\n    },\n  }),\n  buttonSpinner: css({\n    marginRight: theme.spacing(0.5),\n  }),\n});\n\nexport const buttonItem: CanvasElementItem<ButtonConfig, ButtonData> = {\n  id: 'button',\n  name: 'Button',\n  description: 'Button',\n  state: PluginState.beta,\n\n  standardEditorConfig: {\n    background: false,\n  },\n\n  display: ButtonDisplay,\n\n  defaultSize: {\n    width: 150,\n    height: 45,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    config: {\n      text: {\n        mode: TextDimensionMode.Fixed,\n        fixed: 'Button',\n      },\n      align: Align.Center,\n      color: {\n        fixed: defaultLightTextColor,\n      },\n      size: 14,\n      api: defaultApiConfig,\n      style: defaultStyleConfig,\n    },\n    background: {\n      color: {\n        fixed: 'transparent',\n      },\n    },\n    placement: {\n      width: options?.placement?.width ?? 32,\n      height: options?.placement?.height ?? 78,\n      top: options?.placement?.top ?? 100,\n      left: options?.placement?.left ?? 100,\n    },\n  }),\n\n  // Called when data changes\n  prepareData: (ctx: DimensionContext, cfg: ButtonConfig) => {\n    const getCfgApi = () => {\n      if (cfg?.api) {\n        cfg.api = {\n          ...cfg.api,\n          method: cfg.api.method ?? defaultApiConfig.method,\n          contentType: cfg.api.contentType ?? defaultApiConfig.contentType,\n        };\n        return cfg.api;\n      }\n\n      return undefined;\n    };\n\n    const data: ButtonData = {\n      text: cfg?.text ? ctx.getText(cfg.text).value() : '',\n      align: cfg.align ?? Align.Center,\n      size: cfg.size ?? 14,\n      api: getCfgApi(),\n      style: cfg?.style ?? defaultStyleConfig,\n    };\n\n    if (cfg.color) {\n      data.color = ctx.getColor(cfg.color).value();\n    }\n\n    return data;\n  },\n\n  // Heatmap overlay options\n  registerOptionsUI: (builder) => {\n    const category = ['Button'];\n    builder\n      .addCustomEditor({\n        category,\n        id: 'styleSelector',\n        path: 'config.style',\n        name: 'Style',\n        editor: ButtonStyleEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'textSelector',\n        path: 'config.text',\n        name: 'Text',\n        editor: TextDimensionEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'config.color',\n        path: 'config.color',\n        name: 'Text color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {},\n      })\n      .addRadio({\n        category,\n        path: 'config.align',\n        name: 'Align text',\n        settings: {\n          options: [\n            { value: Align.Left, label: 'Left' },\n            { value: Align.Center, label: 'Center' },\n            { value: Align.Right, label: 'Right' },\n          ],\n        },\n        defaultValue: Align.Left,\n      })\n      .addNumberInput({\n        category,\n        path: 'config.size',\n        name: 'Text size',\n        settings: {\n          placeholder: 'Auto',\n        },\n      })\n      .addCustomEditor({\n        category,\n        id: 'apiSelector',\n        path: 'config.api',\n        name: 'API',\n        editor: APIEditor,\n      });\n  },\n};\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { ScalarDimensionConfig } from '@grafana/schema';\nimport { useStyles2 } from '@grafana/ui';\nimport { DimensionContext } from 'app/features/dimensions';\nimport { ScalarDimensionEditor } from 'app/features/dimensions/editors';\n\nimport { CanvasElementItem, CanvasElementProps, defaultBgColor } from '../element';\n\ninterface DroneFrontData {\n  rollAngle?: number;\n}\n\ninterface DroneFrontConfig {\n  rollAngle?: ScalarDimensionConfig;\n}\n\nconst DroneFrontDisplay = ({ data }: CanvasElementProps<DroneFrontConfig, DroneFrontData>) => {\n  const styles = useStyles2(getStyles);\n\n  const droneFrontTransformStyle = `rotate(${data?.rollAngle ? data.rollAngle : 0}deg)`;\n\n  return (\n    <svg\n      className={styles.droneFront}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      viewBox=\"0 0 1300 290\"\n      style={{ transform: droneFrontTransformStyle, stroke: defaultBgColor }}\n    >\n      <g className=\"arms\" stroke={defaultBgColor} strokeWidth=\"28px\">\n        <line x1=\"510\" x2=\"320\" y1=\"100\" y2=\"150\" />\n        <line x1=\"510\" x2=\"320\" y1=\"190\" y2=\"210\" />\n        <line x1=\"790\" x2=\"980\" y1=\"190\" y2=\"210\" />\n        <line x1=\"790\" x2=\"980\" y1=\"100\" y2=\"150\" />\n      </g>\n      <g className=\"body\" stroke={defaultBgColor} strokeWidth=\"28px\">\n        <path\n          fill=\"none\"\n          d=\" M 510 130 C 510 124 510 110 510 100 C 510 90 530 71 540 70 C 640 61 670 60 760 70 C 770 71 790 90 790 100 Q 790 120 790 130 L 790 130 Q 790 177 790 196 C 790 207 770 225 760 226 C 670 236 640 236 540 226 C 530 226 510 206 510 196 Q 510 177 510 130 Q 510 133 510 130 Z \"\n        />\n        <circle cx=\"650\" cy=\"160\" r=\"40\" fill=\"none\" />\n      </g>\n      <g className=\"motors\" stroke={defaultBgColor} strokeWidth=\"28px\">\n        <path\n          className=\"motor\"\n          fill=\"none\"\n          d=\" M 320 60 L 250 60 L 250 230 L 260 290 L 310 290 L 320 230 L 320 60 Z \"\n        />\n        <path\n          className=\"motor\"\n          fill=\"none\"\n          d=\" M 1050 60 L 980 60 L 980 230 L 990 290 L 1040 290 L 1050 230 L 1050 60 Z \"\n        />\n      </g>\n      <g className=\"propellers\" fill={defaultBgColor}>\n        <path\n          className=\"prop\"\n          d=\" M 270 60 L 300 60 L 300 20 Q 311 30 330 30 Q 349 30 570 10 L 300 10 Q 300 0 290 0 C 286 0 284 0 280 0 Q 270 0 270 10 L 0 10 Q 220 30 240 30 Q 260 30 270 20 L 270 60 Z \"\n        />\n        <path\n          className=\"prop\"\n          d=\" M 1000 60 L 1030 60 L 1030 20 Q 1041 30 1060 30 Q 1079 30 1300 10 L 1030 10 Q 1030 0 1020 0 C 1016 0 1014 0 1010 0 Q 1000 0 1000 10 L 730 10 Q 950 30 970 30 Q 990 30 1000 20 L 1000 60 Z \"\n        />\n      </g>\n    </svg>\n  );\n};\n\nexport const droneFrontItem: CanvasElementItem = {\n  id: 'droneFront',\n  name: 'Drone Front',\n  description: 'Drone front',\n\n  display: DroneFrontDisplay,\n\n  defaultSize: {\n    width: 100,\n    height: 26,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    background: {\n      color: {\n        fixed: 'transparent',\n      },\n    },\n    placement: {\n      width: options?.placement?.width ?? 100,\n      height: options?.placement?.height ?? 26,\n      top: options?.placement?.top,\n      left: options?.placement?.left,\n    },\n  }),\n\n  // Called when data changes\n  prepareData: (ctx: DimensionContext, cfg: DroneFrontConfig) => {\n    const data: DroneFrontData = {\n      rollAngle: cfg?.rollAngle ? ctx.getScalar(cfg.rollAngle).value() : 0,\n    };\n\n    return data;\n  },\n\n  registerOptionsUI: (builder) => {\n    const category = ['Drone Front'];\n    builder.addCustomEditor({\n      category,\n      id: 'rollAngle',\n      path: 'config.rollAngle',\n      name: 'Roll Angle',\n      editor: ScalarDimensionEditor,\n    });\n  },\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  droneFront: css({\n    transition: 'transform 0.4s',\n  }),\n});\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { ScalarDimensionConfig } from '@grafana/schema';\nimport { useStyles2 } from '@grafana/ui';\nimport { DimensionContext } from 'app/features/dimensions';\nimport { ScalarDimensionEditor } from 'app/features/dimensions/editors';\n\nimport { CanvasElementItem, CanvasElementProps, defaultBgColor } from '../element';\n\ninterface DroneSideData {\n  pitchAngle?: number;\n}\n\ninterface DroneSideConfig {\n  pitchAngle?: ScalarDimensionConfig;\n}\n\nconst DroneSideDisplay = ({ data }: CanvasElementProps<DroneSideConfig, DroneSideData>) => {\n  const styles = useStyles2(getStyles);\n\n  const droneSidePitchTransformStyle = `rotate(${data?.pitchAngle ? data.pitchAngle : 0}deg)`;\n\n  return (\n    <svg\n      className={styles.droneSide}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      viewBox=\"0 0 1300 290\"\n      style={{ transform: droneSidePitchTransformStyle, stroke: defaultBgColor }}\n    >\n      <g className=\"arms\" stroke={defaultBgColor} strokeWidth=\"28px\">\n        <line x1=\"510\" x2=\"320\" y1=\"100\" y2=\"150\" />\n        <line x1=\"510\" x2=\"320\" y1=\"190\" y2=\"210\" />\n        <line x1=\"790\" x2=\"980\" y1=\"190\" y2=\"210\" />\n        <line x1=\"790\" x2=\"980\" y1=\"100\" y2=\"150\" />\n      </g>\n      <g className=\"body\" stroke={defaultBgColor} strokeWidth=\"28px\">\n        <path\n          fill=\"none\"\n          d=\" M 510 130 C 510 124 510 110 510 100 C 510 90 530 71 540 70 C 640 61 670 60 760 70 C 770 71 790 90 790 100 Q 790 120 790 130 L 790 130 Q 790 177 790 196 C 790 207 770 225 760 226 C 670 236 640 236 540 226 C 530 226 510 206 510 196 Q 510 177 510 130 Q 510 133 510 130 Z \"\n        />\n      </g>\n      <g className=\"motors\" stroke={defaultBgColor} strokeWidth=\"28px\">\n        <path\n          className=\"motor\"\n          fill=\"none\"\n          d=\" M 320 60 L 250 60 L 250 230 L 260 290 L 310 290 L 320 230 L 320 60 Z \"\n        />\n        <path\n          className=\"motor\"\n          fill=\"none\"\n          d=\" M 1050 60 L 980 60 L 980 230 L 990 290 L 1040 290 L 1050 230 L 1050 60 Z \"\n        />\n      </g>\n      <g className=\"propellers\" fill={defaultBgColor}>\n        <path\n          className=\"prop\"\n          d=\" M 270 60 L 300 60 L 300 20 Q 311 30 330 30 Q 349 30 570 10 L 300 10 Q 300 0 290 0 C 286 0 284 0 280 0 Q 270 0 270 10 L 0 10 Q 220 30 240 30 Q 260 30 270 20 L 270 60 Z \"\n        />\n        <path\n          className=\"prop\"\n          d=\" M 1000 60 L 1030 60 L 1030 20 Q 1041 30 1060 30 Q 1079 30 1300 10 L 1030 10 Q 1030 0 1020 0 C 1016 0 1014 0 1010 0 Q 1000 0 1000 10 L 730 10 Q 950 30 970 30 Q 990 30 1000 20 L 1000 60 Z \"\n        />\n      </g>\n    </svg>\n  );\n};\n\nexport const droneSideItem: CanvasElementItem = {\n  id: 'droneSide',\n  name: 'Drone Side',\n  description: 'Drone Side',\n\n  display: DroneSideDisplay,\n\n  defaultSize: {\n    width: 100,\n    height: 26,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    background: {\n      color: {\n        fixed: 'transparent',\n      },\n    },\n    placement: {\n      width: options?.placement?.width ?? 100,\n      height: options?.placement?.height ?? 26,\n      top: options?.placement?.top,\n      left: options?.placement?.left,\n    },\n  }),\n\n  // Called when data changes\n  prepareData: (ctx: DimensionContext, cfg: DroneSideConfig) => {\n    const data: DroneSideData = {\n      pitchAngle: cfg?.pitchAngle ? ctx.getScalar(cfg.pitchAngle).value() : 0,\n    };\n\n    return data;\n  },\n\n  registerOptionsUI: (builder) => {\n    const category = ['Drone Side'];\n    builder.addCustomEditor({\n      category,\n      id: 'pitchAngle',\n      path: 'config.pitchAngle',\n      name: 'Pitch Angle',\n      editor: ScalarDimensionEditor,\n    });\n  },\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  droneSide: css({\n    transition: 'transform 0.4s',\n  }),\n});\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { ScalarDimensionConfig } from '@grafana/schema';\nimport { useStyles2 } from '@grafana/ui';\nimport { DimensionContext } from 'app/features/dimensions';\nimport { ScalarDimensionEditor } from 'app/features/dimensions/editors';\n\nimport { CanvasElementItem, CanvasElementProps, defaultBgColor } from '../element';\n\ninterface DroneTopData {\n  bRightRotorRPM?: number;\n  bLeftRotorRPM?: number;\n  fRightRotorRPM?: number;\n  fLeftRotorRPM?: number;\n  yawAngle?: number;\n}\n\ninterface DroneTopConfig {\n  bRightRotorRPM?: ScalarDimensionConfig;\n  bLeftRotorRPM?: ScalarDimensionConfig;\n  fRightRotorRPM?: ScalarDimensionConfig;\n  fLeftRotorRPM?: ScalarDimensionConfig;\n  yawAngle?: ScalarDimensionConfig;\n}\n\nconst DroneTopDisplay = ({ data }: CanvasElementProps<DroneTopConfig, DroneTopData>) => {\n  const styles = useStyles2(getStyles);\n\n  const fRightRotorAnimation = `spin ${data?.fRightRotorRPM ? 60 / Math.abs(data.fRightRotorRPM) : 0}s linear infinite`;\n\n  const fLeftRotorAnimation = `spin ${data?.fLeftRotorRPM ? 60 / Math.abs(data.fLeftRotorRPM) : 0}s linear infinite`;\n\n  const bRightRotorAnimation = `spin ${data?.bRightRotorRPM ? 60 / Math.abs(data.bRightRotorRPM) : 0}s linear infinite`;\n\n  const bLeftRotorAnimation = `spin ${data?.bLeftRotorRPM ? 60 / Math.abs(data.bLeftRotorRPM) : 0}s linear infinite`;\n\n  const droneTopTransformStyle = `rotate(${data?.yawAngle ? data.yawAngle : 0}deg)`;\n\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      viewBox=\"-43 -43 640 640\"\n      xmlSpace=\"preserve\"\n      style={{ transform: droneTopTransformStyle, fill: defaultBgColor }}\n    >\n      <path\n        fillRule=\"evenodd\"\n        d=\" M 137.95 127.967 C 137.14 127.157 136.189 126.58 135.178 126.218 C 138.173 121.545 139.967 116.036 140.125 110.123 L 217.64 151.862 C 214.049 157.411 211.8 163.922 211.386 170.95 L 209.694 199.712 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 Z  M 134.268 426.981 C 130.211 421.314 124.328 417.045 117.482 415.041 L 201.999 330.523 L 201.385 340.955 C 200.67 353.107 202.829 364.914 207.563 375.673 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 Z  M 324.765 373.673 L 228.527 373.673 Q 215.374 358.611 216.361 341.835 L 226.361 171.832 C 226.825 163.94 231.012 157.096 237.146 152.957 L 316.146 152.957 C 322.28 157.096 326.466 163.94 326.931 171.832 L 336.931 341.835 Q 337.918 358.611 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 Z  M 435.81 415.041 C 428.964 417.045 423.081 421.314 419.024 426.981 L 345.727 375.673 C 350.461 364.914 352.62 353.107 351.905 340.955 L 351.291 330.523 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 Z  M 343.596 199.713 L 341.904 170.951 C 341.49 163.923 339.242 157.411 335.651 151.863 L 413.167 110.124 C 413.325 116.037 415.119 121.546 418.114 126.219 C 417.103 126.581 416.152 127.158 415.342 127.968 L 343.596 199.713 L 343.596 199.713 L 343.596 199.713 L 343.596 199.713 L 343.596 199.713 Z  M 444.646 92.771 C 453.744 92.771 461.146 100.172 461.146 109.271 C 461.146 118.369 453.744 125.771 444.646 125.771 C 435.548 125.771 428.146 118.369 428.146 109.271 C 428.146 100.172 435.548 92.771 444.646 92.771 L 444.646 92.771 L 444.646 92.771 L 444.646 92.771 Z  M 108.647 92.771 C 117.745 92.771 125.147 100.172 125.147 109.271 C 125.147 118.369 117.745 125.771 108.647 125.771 C 99.549 125.771 92.147 118.369 92.147 109.271 C 92.147 100.172 99.549 92.771 108.647 92.771 L 108.647 92.771 L 108.647 92.771 Z  M 108.647 461.771 C 99.549 461.771 92.147 454.369 92.147 445.271 C 92.147 436.172 99.549 428.771 108.647 428.771 C 117.745 428.771 125.147 436.172 125.147 445.271 C 125.147 454.369 117.745 461.771 108.647 461.771 L 108.647 461.771 Z  M 92.322 136.202 C 97.086 139.1 102.675 140.771 108.647 140.771 C 114.883 140.771 120.697 138.941 125.594 135.802 C 125.956 136.813 126.534 137.764 127.343 138.573 L 207.342 218.573 C 207.711 218.942 208.109 219.264 208.528 219.54 L 203.212 309.908 C 201.794 310.182 200.44 310.869 199.342 311.967 L 95.343 415.967 C 94.954 416.356 94.62 416.779 94.335 417.224 C 93.651 417.575 92.976 417.942 92.322 418.34 Q 84.615 424.182 81.716 428.946 C 78.817 433.71 77.147 439.299 77.147 445.271 C 77.147 462.64 91.278 476.771 108.647 476.771 C 114.619 476.771 120.208 475.1 124.972 472.202 C 129.736 469.304 132.678 466.36 135.577 461.596 C 138.476 456.832 140.147 451.243 140.147 445.271 C 140.147 443.943 140.055 442.637 139.895 441.352 L 214.997 388.78 C 217.05 391.677 336.242 391.678 338.295 388.78 L 413.398 441.352 C 413.238 442.637 413.146 443.943 413.146 445.271 C 413.146 451.243 414.817 456.832 417.715 461.596 C 420.613 466.36 423.557 469.304 428.321 472.202 C 433.085 475.1 438.674 476.771 444.646 476.771 C 462.015 476.771 476.146 462.64 476.146 445.271 C 476.146 439.299 474.475 433.71 471.577 428.946 C 468.679 424.182 459.642 417.575 458.958 417.224 C 458.672 416.779 458.339 416.356 457.95 415.967 L 353.95 311.967 C 352.852 310.869 351.498 310.182 350.08 309.908 L 344.764 219.54 C 345.183 219.264 345.581 218.942 345.95 218.573 L 425.95 138.573 C 426.76 137.763 427.337 136.812 427.699 135.802 C 432.596 138.941 438.409 140.771 444.646 140.771 C 450.618 140.771 456.207 139.1 460.971 136.202 C 465.735 133.304 468.679 130.36 471.577 125.596 C 474.475 120.832 476.146 115.243 476.146 109.271 C 476.146 91.903 462.015 77.772 444.646 77.772 C 438.674 77.772 433.085 79.442 428.321 82.34 L 416.215 91.446 L 324.765 140.688 C 318.402 136.324 310.718 133.771 302.473 133.771 L 250.819 133.771 C 242.574 133.771 234.89 136.324 228.527 140.688 L 137.078 91.446 L 124.972 82.34 C 120.208 79.442 114.619 77.772 108.647 77.772 C 91.278 77.772 77.147 91.903 77.147 109.271 C 77.147 115.243 78.818 120.832 81.716 125.595 C 84.614 130.358 87.558 133.304 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 Z  M 444.646 461.771 C 435.548 461.771 428.146 454.369 428.146 445.271 C 428.146 436.172 435.548 428.771 444.646 428.771 C 453.744 428.771 461.146 436.172 461.146 445.271 C 461.146 454.369 453.744 461.771 444.646 461.771 Z \"\n      />\n      <path\n        fillRule=\"evenodd\"\n        d=\" M 259.458 334.235 L 259.458 337.211 L 254.514 337.211 L 254.514 350.795 L 250.842 350.795 L 250.842 337.211 L 245.898 337.211 L 245.898 334.235 L 259.458 334.235 Z  M 266.226 347.939 L 272.586 347.939 L 272.754 350.627 L 272.754 350.627 Q 270.498 350.867 265.074 350.867 L 265.074 350.867 L 265.074 350.867 Q 263.418 350.867 262.434 349.967 L 262.434 349.967 L 262.434 349.967 Q 261.45 349.067 261.426 347.531 L 261.426 347.531 L 261.426 337.499 L 261.426 337.499 Q 261.45 335.963 262.434 335.063 L 262.434 335.063 L 262.434 335.063 Q 263.418 334.163 265.074 334.163 L 265.074 334.163 L 265.074 334.163 Q 270.498 334.163 272.754 334.403 L 272.754 334.403 L 272.586 337.115 L 266.226 337.115 L 266.226 337.115 Q 265.626 337.115 265.362 337.403 L 265.362 337.403 L 265.362 337.403 Q 265.098 337.691 265.098 338.339 L 265.098 338.339 L 265.098 340.859 L 271.698 340.859 L 271.698 343.499 L 265.098 343.499 L 265.098 346.691 L 265.098 346.691 Q 265.098 347.363 265.362 347.651 L 265.362 347.651 L 265.362 347.651 Q 265.626 347.939 266.226 347.939 L 266.226 347.939 Z  M 275.202 333.995 L 278.73 333.995 L 278.73 346.931 L 278.73 346.931 Q 278.73 348.131 280.074 348.131 L 280.074 348.131 L 281.034 348.131 L 281.442 350.603 L 281.442 350.603 Q 280.53 351.083 278.61 351.083 L 278.61 351.083 L 278.61 351.083 Q 277.026 351.083 276.114 350.231 L 276.114 350.231 L 276.114 350.231 Q 275.202 349.379 275.202 347.819 L 275.202 347.819 L 275.202 333.995 Z  M 283.05 333.995 L 286.578 333.995 L 286.578 346.931 L 286.578 346.931 Q 286.578 348.131 287.922 348.131 L 287.922 348.131 L 288.882 348.131 L 289.29 350.603 L 289.29 350.603 Q 288.378 351.083 286.458 351.083 L 286.458 351.083 L 286.458 351.083 Q 284.874 351.083 283.962 350.231 L 283.962 350.231 L 283.962 350.231 Q 283.05 349.379 283.05 347.819 L 283.05 347.819 L 283.05 333.995 Z  M 292.086 335.759 L 292.086 335.759 L 292.086 335.759 Q 293.634 333.923 297.618 333.923 L 297.618 333.923 L 297.618 333.923 Q 301.602 333.923 303.162 335.759 L 303.162 335.759 L 303.162 335.759 Q 304.722 337.595 304.722 342.515 L 304.722 342.515 L 304.722 342.515 Q 304.722 347.435 303.162 349.271 L 303.162 349.271 L 303.162 349.271 Q 301.602 351.107 297.618 351.107 L 297.618 351.107 L 297.618 351.107 Q 293.634 351.107 292.086 349.271 L 292.086 349.271 L 292.086 349.271 Q 290.538 347.435 290.538 342.515 L 290.538 342.515 L 290.538 342.515 Q 290.538 337.595 292.086 335.759 Z  M 300.174 338.051 L 300.174 338.051 L 300.174 338.051 Q 299.49 336.875 297.618 336.875 L 297.618 336.875 L 297.618 336.875 Q 295.746 336.875 295.062 338.051 L 295.062 338.051 L 295.062 338.051 Q 294.378 339.227 294.378 342.515 L 294.378 342.515 L 294.378 342.515 Q 294.378 345.803 295.062 346.979 L 295.062 346.979 L 295.062 346.979 Q 295.746 348.155 297.618 348.155 L 297.618 348.155 L 297.618 348.155 Q 299.49 348.155 300.174 346.979 L 300.174 346.979 L 300.174 346.979 Q 300.858 345.803 300.858 342.515 L 300.858 342.515 L 300.858 342.515 Q 300.858 339.227 300.174 338.051 Z \"\n      />\n      <g className=\"propeller-group\">\n        <path\n          className={`${styles.propeller} ${styles.propellerCW}`}\n          style={{ animation: bRightRotorAnimation }}\n          d=\" M 461.563 418.77 L 463.992 416.34 Q 465.495 407.116 466.461 400.395 C 467.426 393.675 469.363 388.087 474.731 383.284 Q 533.862 341.514 538.196 338.859 C 542.529 336.203 548.345 334.299 551.492 338.29 C 554.639 342.282 553.481 346.02 549.419 350.082 L 471.147 428.354 L 461.563 418.77 Z  M 427.729 471.772 L 425.299 474.202 Q 423.797 483.426 422.831 490.146 C 421.866 496.867 419.929 502.454 414.561 507.257 Q 355.43 549.028 351.096 551.683 C 346.763 554.338 340.947 556.243 337.8 552.251 C 334.653 548.26 335.811 544.522 339.873 540.46 L 418.145 462.187 L 427.729 471.772 Z \"\n        />\n        <path\n          className={`${styles.propeller} ${styles.propellerCCW}`}\n          style={{ animation: fRightRotorAnimation }}\n          d=\" M 461.563 135.773 L 463.992 138.203 Q 465.495 147.426 466.461 154.147 C 467.426 160.868 469.363 166.455 474.731 171.258 Q 533.862 213.028 538.196 215.684 C 542.529 218.339 548.345 220.244 551.492 216.252 C 554.639 212.26 553.481 208.523 549.419 204.46 L 471.147 126.188 L 461.563 135.773 Z  M 427.729 82.77 L 425.299 80.34 Q 423.797 71.117 422.831 64.396 C 421.866 57.675 419.929 52.088 414.561 47.285 Q 355.43 5.515 351.096 2.859 C 346.763 0.204 340.947 -1.701 337.8 2.291 C 334.653 6.282 335.811 10.02 339.873 14.082 L 418.145 92.355 L 427.729 82.77 Z \"\n        />\n        <path\n          className={`${styles.propeller} ${styles.propellerCCW}`}\n          style={{ animation: bLeftRotorAnimation }}\n          d=\" M 125.563 471.772 L 127.993 474.202 Q 129.496 483.426 130.461 490.146 C 131.427 496.867 133.363 502.454 138.731 507.257 Q 197.863 549.028 202.196 551.683 C 206.53 554.338 212.345 556.243 215.492 552.251 C 218.639 548.26 217.482 544.522 213.419 540.46 L 135.148 462.187 L 125.563 471.772 Z  M 91.73 418.77 L 89.3 416.34 Q 87.797 407.116 86.832 400.395 C 85.866 393.675 83.93 388.087 78.562 383.284 Q 19.431 341.514 15.097 338.859 C 10.763 336.203 4.948 334.299 1.801 338.29 C -1.346 342.282 -0.189 346.02 3.874 350.082 L 82.146 428.354 L 91.73 418.77 Z \"\n        />\n        <path\n          className={`${styles.propeller} ${styles.propellerCW}`}\n          style={{ animation: fLeftRotorAnimation }}\n          d=\" M 125.563 82.77 L 127.993 80.34 Q 129.496 71.117 130.461 64.396 C 131.427 57.675 133.363 52.088 138.731 47.285 Q 197.863 5.515 202.196 2.859 C 206.53 0.204 212.345 -1.701 215.492 2.291 C 218.639 6.282 217.482 10.02 213.419 14.083 L 135.147 92.355 L 125.563 82.77 Z  M 91.73 135.773 L 89.3 138.203 Q 87.797 147.426 86.832 154.147 C 85.866 160.868 83.93 166.455 78.562 171.258 Q 19.431 213.028 15.097 215.684 C 10.763 218.339 4.948 220.243 1.801 216.252 C -1.346 212.26 -0.189 208.523 3.874 204.46 L 82.146 126.188 L 91.73 135.773 Z \"\n        />\n      </g>\n    </svg>\n  );\n};\n\nexport const droneTopItem: CanvasElementItem = {\n  id: 'droneTop',\n  name: 'Drone Top',\n  description: 'Drone top',\n\n  display: DroneTopDisplay,\n\n  defaultSize: {\n    width: 100,\n    height: 100,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    background: {\n      color: {\n        fixed: 'transparent',\n      },\n    },\n  }),\n\n  // Called when data changes\n  prepareData: (ctx: DimensionContext, cfg: DroneTopConfig) => {\n    const data: DroneTopData = {\n      bRightRotorRPM: cfg?.bRightRotorRPM ? ctx.getScalar(cfg.bRightRotorRPM).value() : 0,\n      bLeftRotorRPM: cfg?.bLeftRotorRPM ? ctx.getScalar(cfg.bLeftRotorRPM).value() : 0,\n      fRightRotorRPM: cfg?.fRightRotorRPM ? ctx.getScalar(cfg.fRightRotorRPM).value() : 0,\n      fLeftRotorRPM: cfg?.fLeftRotorRPM ? ctx.getScalar(cfg.fLeftRotorRPM).value() : 0,\n      yawAngle: cfg?.yawAngle ? ctx.getScalar(cfg.yawAngle).value() : 0,\n    };\n\n    return data;\n  },\n\n  registerOptionsUI: (builder) => {\n    const category = ['Drone Top'];\n    builder\n      .addCustomEditor({\n        category,\n        id: 'yawAngle',\n        path: 'config.yawAngle',\n        name: 'Yaw Angle',\n        editor: ScalarDimensionEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'fRightRotorRPM',\n        path: 'config.fRightRotorRPM',\n        name: 'Front Right Rotor RPM',\n        editor: ScalarDimensionEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'fLeftRotorRPM',\n        path: 'config.fLeftRotorRPM',\n        name: 'Front Left Rotor RPM',\n        editor: ScalarDimensionEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'bRightRotorRPM',\n        path: 'config.bRightRotorRPM',\n        name: 'Back Right Rotor RPM',\n        editor: ScalarDimensionEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'bLeftRotorRPM',\n        path: 'config.bLeftRotorRPM',\n        name: 'Back Left Rotor RPM',\n        editor: ScalarDimensionEditor,\n      });\n  },\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  propeller: css({\n    transformOrigin: '50% 50%',\n    transformBox: 'fill-box',\n    display: 'block',\n    '@keyframes spin': {\n      from: {\n        transform: 'rotate(0deg)',\n      },\n      to: {\n        transform: 'rotate(360deg)',\n      },\n    },\n  }),\n  propellerCW: css({\n    animationDirection: 'normal',\n  }),\n  propellerCCW: css({\n    animationDirection: 'reverse',\n  }),\n});\n","import { css } from '@emotion/css';\nimport React, { PureComponent } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { config } from 'app/core/config';\nimport { DimensionContext } from 'app/features/dimensions/context';\nimport { ColorDimensionEditor } from 'app/features/dimensions/editors/ColorDimensionEditor';\nimport { TextDimensionEditor } from 'app/features/dimensions/editors/TextDimensionEditor';\n\nimport { CanvasElementItem, CanvasElementProps, defaultBgColor, defaultTextColor } from '../element';\nimport { Align, VAlign, EllipseConfig, EllipseData } from '../types';\n\nclass EllipseDisplay extends PureComponent<CanvasElementProps<EllipseConfig, EllipseData>> {\n  render() {\n    const { data } = this.props;\n    const styles = getStyles(config.theme2, data);\n    return (\n      <div className={styles.container}>\n        <span className={styles.span}>{data?.text}</span>\n      </div>\n    );\n  }\n}\n\nconst getStyles = (theme: GrafanaTheme2, data: any) => ({\n  container: css({\n    display: 'table',\n    position: 'absolute',\n    top: '50%',\n    transform: 'translateY(-50%)',\n    width: '100%',\n    height: '100%',\n    backgroundColor: data?.backgroundColor,\n    border: `${data?.width}px solid ${data?.borderColor}`,\n    // eslint-disable-next-line @grafana/no-border-radius-literal\n    borderRadius: '50%',\n  }),\n  span: css({\n    display: 'table-cell',\n    verticalAlign: data?.valign,\n    textAlign: data?.align,\n    fontSize: `${data?.size}px`,\n    color: data?.color,\n  }),\n});\n\nexport const ellipseItem: CanvasElementItem<EllipseConfig, EllipseData> = {\n  id: 'ellipse',\n  name: 'Ellipse',\n  description: 'Ellipse',\n\n  display: EllipseDisplay,\n\n  defaultSize: {\n    width: 160,\n    height: 160,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    config: {\n      backgroundColor: {\n        fixed: defaultBgColor,\n      },\n      borderColor: {\n        fixed: 'transparent',\n      },\n      width: 1,\n      align: Align.Center,\n      valign: VAlign.Middle,\n      color: {\n        fixed: defaultTextColor,\n      },\n    },\n    background: {\n      color: {\n        fixed: 'transparent',\n      },\n    },\n  }),\n\n  prepareData: (ctx: DimensionContext, cfg: EllipseConfig) => {\n    const data: EllipseData = {\n      width: cfg.width,\n      text: cfg.text ? ctx.getText(cfg.text).value() : '',\n      align: cfg.align ?? Align.Center,\n      valign: cfg.valign ?? VAlign.Middle,\n      size: cfg.size,\n    };\n\n    if (cfg.backgroundColor) {\n      data.backgroundColor = ctx.getColor(cfg.backgroundColor).value();\n    }\n    if (cfg.borderColor) {\n      data.borderColor = ctx.getColor(cfg.borderColor).value();\n    }\n    if (cfg.color) {\n      data.color = ctx.getColor(cfg.color).value();\n    }\n\n    return data;\n  },\n\n  // Heatmap overlay options\n  registerOptionsUI: (builder) => {\n    const category = ['Ellipse'];\n    builder\n      .addCustomEditor({\n        category,\n        id: 'textSelector',\n        path: 'config.text',\n        name: 'Text',\n        editor: TextDimensionEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'config.color',\n        path: 'config.color',\n        name: 'Text color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {},\n      })\n      .addRadio({\n        category,\n        path: 'config.align',\n        name: 'Align text',\n        settings: {\n          options: [\n            { value: Align.Left, label: 'Left' },\n            { value: Align.Center, label: 'Center' },\n            { value: Align.Right, label: 'Right' },\n          ],\n        },\n        defaultValue: Align.Left,\n      })\n      .addCustomEditor({\n        category,\n        id: 'config.borderColor',\n        path: 'config.borderColor',\n        name: 'Ellipse border color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {},\n      })\n      .addNumberInput({\n        category,\n        path: 'config.width',\n        name: 'Ellipse border width',\n        settings: {\n          placeholder: 'Auto',\n        },\n      })\n      .addCustomEditor({\n        category,\n        id: 'config.backgroundColor',\n        path: 'config.backgroundColor',\n        name: 'Ellipse background color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {},\n      })\n      .addRadio({\n        category,\n        path: 'config.valign',\n        name: 'Vertical align',\n        settings: {\n          options: [\n            { value: VAlign.Top, label: 'Top' },\n            { value: VAlign.Middle, label: 'Middle' },\n            { value: VAlign.Bottom, label: 'Bottom' },\n          ],\n        },\n        defaultValue: VAlign.Middle,\n      })\n      .addNumberInput({\n        category,\n        path: 'config.size',\n        name: 'Text size',\n        settings: {\n          placeholder: 'Auto',\n        },\n      });\n  },\n};\n","import { css } from '@emotion/css';\nimport { isString } from 'lodash';\nimport React, { CSSProperties } from 'react';\n\nimport { ColorDimensionConfig, ResourceDimensionConfig, ResourceDimensionMode } from '@grafana/schema';\nimport { SanitizedSVG } from 'app/core/components/SVG/SanitizedSVG';\nimport { getPublicOrAbsoluteUrl } from 'app/features/dimensions';\nimport { DimensionContext } from 'app/features/dimensions/context';\nimport { ColorDimensionEditor, ResourceDimensionEditor } from 'app/features/dimensions/editors';\n\nimport { CanvasElementItem, CanvasElementProps, defaultBgColor } from '../element';\nimport { LineConfig } from '../types';\n\nexport interface IconConfig {\n  path?: ResourceDimensionConfig;\n  fill?: ColorDimensionConfig;\n  stroke?: LineConfig;\n}\n\ninterface IconData {\n  path: string;\n  fill: string;\n  strokeColor?: string;\n  stroke?: number;\n}\n\n// When a stoke is defined, we want the path to be in page units\nconst svgStrokePathClass = css({\n  path: {\n    vectorEffect: 'non-scaling-stroke',\n  },\n});\n\nexport function IconDisplay(props: CanvasElementProps) {\n  const { data } = props;\n  if (!data?.path) {\n    return null;\n  }\n\n  const svgStyle: CSSProperties = {\n    fill: data?.fill,\n    stroke: data?.strokeColor,\n    strokeWidth: data?.stroke,\n    height: '100%',\n    width: '100%',\n  };\n\n  return (\n    <SanitizedSVG src={data.path} style={svgStyle} className={svgStyle.strokeWidth ? svgStrokePathClass : undefined} />\n  );\n}\n\nexport const iconItem: CanvasElementItem<IconConfig, IconData> = {\n  id: 'icon',\n  name: 'Icon',\n  description: 'SVG Icon display',\n\n  display: IconDisplay,\n\n  getNewOptions: (options) => ({\n    ...options,\n    config: {\n      path: {\n        mode: ResourceDimensionMode.Fixed,\n        fixed: 'img/icons/unicons/question-circle.svg',\n      },\n      fill: { fixed: defaultBgColor },\n    },\n    background: {\n      color: {\n        fixed: 'transparent',\n      },\n    },\n    placement: {\n      width: options?.placement?.width ?? 100,\n      height: options?.placement?.height ?? 100,\n      top: options?.placement?.top ?? 100,\n      left: options?.placement?.left ?? 100,\n    },\n  }),\n\n  // Called when data changes\n  prepareData: (ctx: DimensionContext, cfg: IconConfig) => {\n    let path: string | undefined = undefined;\n    if (cfg.path) {\n      path = ctx.getResource(cfg.path).value();\n    }\n    if (!path || !isString(path)) {\n      path = getPublicOrAbsoluteUrl('img/icons/unicons/question-circle.svg');\n    }\n\n    const data: IconData = {\n      path,\n      fill: cfg.fill ? ctx.getColor(cfg.fill).value() : defaultBgColor,\n    };\n\n    if (cfg.stroke?.width && cfg.stroke.color) {\n      if (cfg.stroke.width > 0) {\n        data.stroke = cfg.stroke?.width;\n        data.strokeColor = ctx.getColor(cfg.stroke.color).value();\n      }\n    }\n    return data;\n  },\n\n  // Heatmap overlay options\n  registerOptionsUI: (builder) => {\n    const category = ['Icon'];\n    builder\n      .addCustomEditor({\n        category,\n        id: 'iconSelector',\n        path: 'config.path',\n        name: 'SVG Path',\n        editor: ResourceDimensionEditor,\n        settings: {\n          resourceType: 'icon',\n          maxFiles: 2000,\n        },\n      })\n      .addCustomEditor({\n        category,\n        id: 'config.fill',\n        path: 'config.fill',\n        name: 'Fill color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {\n          // Configured values\n          fixed: 'grey',\n        },\n      });\n    // .addSliderInput({\n    //   category,\n    //   path: 'config.stroke.width',\n    //   name: 'Stroke',\n    //   defaultValue: 0,\n    //   settings: {\n    //     min: 0,\n    //     max: 10,\n    //   },\n    // })\n    // .addCustomEditor({\n    //   category,\n    //   id: 'config.stroke.color',\n    //   path: 'config.stroke.color',\n    //   name: 'Stroke color',\n    //   editor: ColorDimensionEditor,\n    //   settings: {},\n    //   defaultValue: {\n    //     // Configured values\n    //     fixed: 'grey',\n    //   },\n    //   showIf: (cfg) => Boolean(cfg?.config?.stroke?.width),\n    // })\n  },\n};\n","import React, { PureComponent } from 'react';\n\nimport { CanvasElementItem, CanvasElementProps } from '../element';\n\nclass NotFoundDisplay extends PureComponent<CanvasElementProps> {\n  render() {\n    const { config } = this.props;\n    return (\n      <div>\n        <h3>NOT FOUND:</h3>\n        <pre>{JSON.stringify(config, null, 2)}</pre>\n      </div>\n    );\n  }\n}\n\nexport const notFoundItem: CanvasElementItem = {\n  id: 'not-found',\n  name: 'Not found',\n  description: 'Display when element type is not found in the registry',\n\n  display: NotFoundDisplay,\n\n  defaultSize: {\n    width: 100,\n    height: 100,\n  },\n\n  getNewOptions: () => ({\n    config: {},\n  }),\n};\n","import React, { CSSProperties } from 'react';\nimport { OnDrag, OnResize } from 'react-moveable/declaration/types';\n\nimport { LayerElement } from 'app/core/components/Layers/types';\nimport {\n  BackgroundImageSize,\n  CanvasElementItem,\n  CanvasElementOptions,\n  canvasElementRegistry,\n} from 'app/features/canvas';\nimport { notFoundItem } from 'app/features/canvas/elements/notFound';\nimport { DimensionContext } from 'app/features/dimensions';\nimport { getConnectionsByTarget, isConnectionTarget } from 'app/plugins/panel/canvas/utils';\n\nimport { Constraint, HorizontalConstraint, Placement, VerticalConstraint } from '../types';\n\nimport { FrameState } from './frame';\nimport { RootElement } from './root';\nimport { Scene } from './scene';\n\nlet counter = 0;\n\nexport class ElementState implements LayerElement {\n  // UID necessary for moveable to work (for now)\n  readonly UID = counter++;\n  revId = 0;\n  sizeStyle: CSSProperties = {};\n  dataStyle: CSSProperties = {};\n\n  // Temp stored constraint for visualization purposes (switch to top / left constraint to simplify some functionality)\n  tempConstraint: Constraint | undefined;\n\n  // Filled in by ref\n  div?: HTMLDivElement;\n\n  // Calculated\n  data?: any; // depends on the type\n\n  constructor(\n    public item: CanvasElementItem,\n    public options: CanvasElementOptions,\n    public parent?: FrameState\n  ) {\n    const fallbackName = `Element ${Date.now()}`;\n    if (!options) {\n      this.options = { type: item.id, name: fallbackName };\n    }\n\n    options.constraint = options.constraint ?? {\n      vertical: VerticalConstraint.Top,\n      horizontal: HorizontalConstraint.Left,\n    };\n    options.placement = options.placement ?? { width: 100, height: 100, top: 0, left: 0 };\n    options.background = options.background ?? { color: { fixed: 'transparent' } };\n    options.border = options.border ?? { color: { fixed: 'dark-green' } };\n    const scene = this.getScene();\n    if (!options.name) {\n      const newName = scene?.getNextElementName();\n      options.name = newName ?? fallbackName;\n    }\n    scene?.byName.set(options.name, this);\n  }\n\n  private getScene(): Scene | undefined {\n    let trav = this.parent;\n    while (trav) {\n      if (trav.isRoot()) {\n        return trav.scene;\n      }\n      trav = trav.parent;\n    }\n\n    return undefined;\n  }\n\n  getName() {\n    return this.options.name;\n  }\n\n  /** Use the configured options to update CSS style properties directly on the wrapper div **/\n  applyLayoutStylesToDiv(disablePointerEvents?: boolean) {\n    if (this.isRoot()) {\n      // Root supersedes layout engine and is always 100% width + height of panel\n      return;\n    }\n\n    const { constraint } = this.options;\n    const { vertical, horizontal } = constraint ?? {};\n    const placement: Placement = this.options.placement ?? {};\n\n    const editingEnabled = this.getScene()?.isEditingEnabled;\n\n    const style: React.CSSProperties = {\n      cursor: editingEnabled ? 'grab' : 'auto',\n      pointerEvents: disablePointerEvents ? 'none' : 'auto',\n      position: 'absolute',\n      // Minimum element size is 10x10\n      minWidth: '10px',\n      minHeight: '10px',\n    };\n\n    const translate = ['0px', '0px'];\n\n    switch (vertical) {\n      case VerticalConstraint.Top:\n        placement.top = placement.top ?? 0;\n        placement.height = placement.height ?? 100;\n        style.top = `${placement.top}px`;\n        style.height = `${placement.height}px`;\n        delete placement.bottom;\n        break;\n      case VerticalConstraint.Bottom:\n        placement.bottom = placement.bottom ?? 0;\n        placement.height = placement.height ?? 100;\n        style.bottom = `${placement.bottom}px`;\n        style.height = `${placement.height}px`;\n        delete placement.top;\n        break;\n      case VerticalConstraint.TopBottom:\n        placement.top = placement.top ?? 0;\n        placement.bottom = placement.bottom ?? 0;\n        style.top = `${placement.top}px`;\n        style.bottom = `${placement.bottom}px`;\n        delete placement.height;\n        style.height = '';\n        break;\n      case VerticalConstraint.Center:\n        placement.top = placement.top ?? 0;\n        placement.height = placement.height ?? 100;\n        translate[1] = '-50%';\n        style.top = `calc(50% - ${placement.top}px)`;\n        style.height = `${placement.height}px`;\n        delete placement.bottom;\n        break;\n      case VerticalConstraint.Scale:\n        placement.top = placement.top ?? 0;\n        placement.bottom = placement.bottom ?? 0;\n        style.top = `${placement.top}%`;\n        style.bottom = `${placement.bottom}%`;\n        delete placement.height;\n        style.height = '';\n        break;\n    }\n\n    switch (horizontal) {\n      case HorizontalConstraint.Left:\n        placement.left = placement.left ?? 0;\n        placement.width = placement.width ?? 100;\n        style.left = `${placement.left}px`;\n        style.width = `${placement.width}px`;\n        delete placement.right;\n        break;\n      case HorizontalConstraint.Right:\n        placement.right = placement.right ?? 0;\n        placement.width = placement.width ?? 100;\n        style.right = `${placement.right}px`;\n        style.width = `${placement.width}px`;\n        delete placement.left;\n        break;\n      case HorizontalConstraint.LeftRight:\n        placement.left = placement.left ?? 0;\n        placement.right = placement.right ?? 0;\n        style.left = `${placement.left}px`;\n        style.right = `${placement.right}px`;\n        delete placement.width;\n        style.width = '';\n        break;\n      case HorizontalConstraint.Center:\n        placement.left = placement.left ?? 0;\n        placement.width = placement.width ?? 100;\n        translate[0] = '-50%';\n        style.left = `calc(50% - ${placement.left}px)`;\n        style.width = `${placement.width}px`;\n        delete placement.right;\n        break;\n      case HorizontalConstraint.Scale:\n        placement.left = placement.left ?? 0;\n        placement.right = placement.right ?? 0;\n        style.left = `${placement.left}%`;\n        style.right = `${placement.right}%`;\n        delete placement.width;\n        style.width = '';\n        break;\n    }\n\n    style.transform = `translate(${translate[0]}, ${translate[1]})`;\n    this.options.placement = placement;\n    this.sizeStyle = style;\n    if (this.div) {\n      for (const key in this.sizeStyle) {\n        this.div.style[key as any] = (this.sizeStyle as any)[key];\n      }\n\n      for (const key in this.dataStyle) {\n        this.div.style[key as any] = (this.dataStyle as any)[key];\n      }\n    }\n  }\n\n  setPlacementFromConstraint(elementContainer?: DOMRect, parentContainer?: DOMRect) {\n    const { constraint } = this.options;\n    const { vertical, horizontal } = constraint ?? {};\n\n    if (!elementContainer) {\n      elementContainer = this.div && this.div.getBoundingClientRect();\n    }\n    let parentBorderWidth = 0;\n    if (!parentContainer) {\n      parentContainer = this.div && this.div.parentElement?.getBoundingClientRect();\n      parentBorderWidth = this.parent?.isRoot()\n        ? 0\n        : parseFloat(getComputedStyle(this.div?.parentElement!).borderWidth);\n    }\n\n    const relativeTop =\n      elementContainer && parentContainer\n        ? Math.round(elementContainer.top - parentContainer.top - parentBorderWidth)\n        : 0;\n    const relativeBottom =\n      elementContainer && parentContainer\n        ? Math.round(parentContainer.bottom - parentBorderWidth - elementContainer.bottom)\n        : 0;\n    const relativeLeft =\n      elementContainer && parentContainer\n        ? Math.round(elementContainer.left - parentContainer.left - parentBorderWidth)\n        : 0;\n    const relativeRight =\n      elementContainer && parentContainer\n        ? Math.round(parentContainer.right - parentBorderWidth - elementContainer.right)\n        : 0;\n\n    const placement: Placement = {};\n\n    const width = elementContainer?.width ?? 100;\n    const height = elementContainer?.height ?? 100;\n\n    switch (vertical) {\n      case VerticalConstraint.Top:\n        placement.top = relativeTop;\n        placement.height = height;\n        break;\n      case VerticalConstraint.Bottom:\n        placement.bottom = relativeBottom;\n        placement.height = height;\n        break;\n      case VerticalConstraint.TopBottom:\n        placement.top = relativeTop;\n        placement.bottom = relativeBottom;\n        break;\n      case VerticalConstraint.Center:\n        const elementCenter = elementContainer ? relativeTop + height / 2 : 0;\n        const parentCenter = parentContainer ? parentContainer.height / 2 : 0;\n        const distanceFromCenter = parentCenter - elementCenter;\n        placement.top = distanceFromCenter;\n        placement.height = height;\n        break;\n      case VerticalConstraint.Scale:\n        placement.top = (relativeTop / (parentContainer?.height ?? height)) * 100;\n        placement.bottom = (relativeBottom / (parentContainer?.height ?? height)) * 100;\n        break;\n    }\n\n    switch (horizontal) {\n      case HorizontalConstraint.Left:\n        placement.left = relativeLeft;\n        placement.width = width;\n        break;\n      case HorizontalConstraint.Right:\n        placement.right = relativeRight;\n        placement.width = width;\n        break;\n      case HorizontalConstraint.LeftRight:\n        placement.left = relativeLeft;\n        placement.right = relativeRight;\n        break;\n      case HorizontalConstraint.Center:\n        const elementCenter = elementContainer ? relativeLeft + width / 2 : 0;\n        const parentCenter = parentContainer ? parentContainer.width / 2 : 0;\n        const distanceFromCenter = parentCenter - elementCenter;\n        placement.left = distanceFromCenter;\n        placement.width = width;\n        break;\n      case HorizontalConstraint.Scale:\n        placement.left = (relativeLeft / (parentContainer?.width ?? width)) * 100;\n        placement.right = (relativeRight / (parentContainer?.width ?? width)) * 100;\n        break;\n    }\n\n    this.options.placement = placement;\n\n    this.applyLayoutStylesToDiv();\n    this.revId++;\n\n    this.getScene()?.save();\n  }\n\n  updateData(ctx: DimensionContext) {\n    if (this.item.prepareData) {\n      this.data = this.item.prepareData(ctx, this.options.config);\n      this.revId++; // rerender\n    }\n\n    const { background, border } = this.options;\n    const css: CSSProperties = {};\n    if (background) {\n      if (background.color) {\n        const color = ctx.getColor(background.color);\n        css.backgroundColor = color.value();\n      }\n      if (background.image) {\n        const image = ctx.getResource(background.image);\n        if (image) {\n          const v = image.value();\n          if (v) {\n            css.backgroundImage = `url(\"${v}\")`;\n            switch (background.size ?? BackgroundImageSize.Contain) {\n              case BackgroundImageSize.Contain:\n                css.backgroundSize = 'contain';\n                css.backgroundRepeat = 'no-repeat';\n                break;\n              case BackgroundImageSize.Cover:\n                css.backgroundSize = 'cover';\n                css.backgroundRepeat = 'no-repeat';\n                break;\n              case BackgroundImageSize.Original:\n                css.backgroundRepeat = 'no-repeat';\n                break;\n              case BackgroundImageSize.Tile:\n                css.backgroundRepeat = 'repeat';\n                break;\n              case BackgroundImageSize.Fill:\n                css.backgroundSize = '100% 100%';\n                break;\n            }\n          } else {\n            css.backgroundImage = '';\n          }\n        }\n      }\n    }\n\n    if (border && border.color && border.width !== undefined) {\n      const color = ctx.getColor(border.color);\n      css.borderWidth = `${border.width}px`;\n      css.borderStyle = 'solid';\n      css.borderColor = color.value();\n\n      // Move the image to inside the border\n      if (css.backgroundImage) {\n        css.backgroundOrigin = 'padding-box';\n      }\n    }\n\n    this.dataStyle = css;\n    this.applyLayoutStylesToDiv();\n  }\n\n  isRoot(): this is RootElement {\n    return false;\n  }\n\n  /** Recursively visit all nodes */\n  visit(visitor: (v: ElementState) => void) {\n    visitor(this);\n  }\n\n  onChange(options: CanvasElementOptions) {\n    if (this.item.id !== options.type) {\n      this.item = canvasElementRegistry.getIfExists(options.type) ?? notFoundItem;\n    }\n\n    // rename handling\n    const oldName = this.options.name;\n    const newName = options.name;\n\n    this.revId++;\n    this.options = { ...options };\n    let trav = this.parent;\n    while (trav) {\n      if (trav.isRoot()) {\n        trav.scene.save();\n        break;\n      }\n      trav.revId++;\n      trav = trav.parent;\n    }\n\n    const scene = this.getScene();\n    if (oldName !== newName && scene) {\n      if (isConnectionTarget(this, scene.byName)) {\n        getConnectionsByTarget(this, scene).forEach((connection) => {\n          connection.info.targetName = newName;\n        });\n      }\n\n      scene.byName.delete(oldName);\n      scene.byName.set(newName, this);\n    }\n  }\n\n  getSaveModel() {\n    return { ...this.options };\n  }\n\n  initElement = (target: HTMLDivElement) => {\n    this.div = target;\n    this.applyLayoutStylesToDiv();\n  };\n\n  applyDrag = (event: OnDrag) => {\n    const hasHorizontalCenterConstraint = this.options.constraint?.horizontal === HorizontalConstraint.Center;\n    const hasVerticalCenterConstraint = this.options.constraint?.vertical === VerticalConstraint.Center;\n    if (hasHorizontalCenterConstraint || hasVerticalCenterConstraint) {\n      const numberOfTargets = this.getScene()?.selecto?.getSelectedTargets().length ?? 0;\n      const isMultiSelection = numberOfTargets > 1;\n      if (!isMultiSelection) {\n        const elementContainer = this.div?.getBoundingClientRect();\n        const height = elementContainer?.height ?? 100;\n        const yOffset = hasVerticalCenterConstraint ? height / 4 : 0;\n        event.target.style.transform = `translate(${event.translate[0]}px, ${event.translate[1] - yOffset}px)`;\n        return;\n      }\n    }\n\n    event.target.style.transform = event.transform;\n  };\n\n  // kinda like:\n  // https://github.com/grafana/grafana-edge-app/blob/main/src/panels/draw/WrapItem.tsx#L44\n  applyResize = (event: OnResize) => {\n    const placement = this.options.placement!;\n\n    const style = event.target.style;\n    const deltaX = event.delta[0];\n    const deltaY = event.delta[1];\n    const dirLR = event.direction[0];\n    const dirTB = event.direction[1];\n\n    if (dirLR === 1) {\n      placement.width = event.width;\n      style.width = `${placement.width}px`;\n    } else if (dirLR === -1) {\n      placement.left! -= deltaX;\n      placement.width = event.width;\n      style.left = `${placement.left}px`;\n      style.width = `${placement.width}px`;\n    }\n\n    if (dirTB === -1) {\n      placement.top! -= deltaY;\n      placement.height = event.height;\n      style.top = `${placement.top}px`;\n      style.height = `${placement.height}px`;\n    } else if (dirTB === 1) {\n      placement.height = event.height;\n      style.height = `${placement.height}px`;\n    }\n  };\n\n  handleMouseEnter = (event: React.MouseEvent, isSelected: boolean | undefined) => {\n    const scene = this.getScene();\n    if (!scene?.isEditingEnabled) {\n      this.handleTooltip(event);\n    } else if (!isSelected) {\n      scene?.connections.handleMouseEnter(event);\n    }\n  };\n\n  handleTooltip = (event: React.MouseEvent) => {\n    const scene = this.getScene();\n    if (scene?.tooltipCallback) {\n      const rect = this.div?.getBoundingClientRect();\n      scene.tooltipCallback({\n        anchorPoint: { x: rect?.right ?? event.pageX, y: rect?.top ?? event.pageY },\n        element: this,\n        isOpen: false,\n      });\n    }\n  };\n\n  handleMouseLeave = (event: React.MouseEvent) => {\n    const scene = this.getScene();\n    if (scene?.tooltipCallback && !scene?.tooltip?.isOpen) {\n      scene.tooltipCallback(undefined);\n    }\n  };\n\n  onElementClick = (event: React.MouseEvent) => {\n    this.onTooltipCallback();\n  };\n\n  onElementKeyDown = (event: React.KeyboardEvent) => {\n    if (\n      event.key === 'Enter' &&\n      (event.currentTarget instanceof HTMLElement || event.currentTarget instanceof SVGElement)\n    ) {\n      const scene = this.getScene();\n      scene?.select({ targets: [event.currentTarget] });\n    }\n  };\n\n  onTooltipCallback = () => {\n    const scene = this.getScene();\n    if (scene?.tooltipCallback && scene.tooltip?.anchorPoint) {\n      scene.tooltipCallback({\n        anchorPoint: { x: scene.tooltip.anchorPoint.x, y: scene.tooltip.anchorPoint.y },\n        element: this,\n        isOpen: true,\n      });\n    }\n  };\n\n  render() {\n    const { item, div } = this;\n    const scene = this.getScene();\n    // TODO: Rethink selected state handling\n    const isSelected = div && scene && scene.selecto && scene.selecto.getSelectedTargets().includes(div);\n\n    return (\n      <div\n        key={this.UID}\n        ref={this.initElement}\n        onMouseEnter={(e: React.MouseEvent) => this.handleMouseEnter(e, isSelected)}\n        onMouseLeave={!scene?.isEditingEnabled ? this.handleMouseLeave : undefined}\n        onClick={!scene?.isEditingEnabled ? this.onElementClick : undefined}\n        onKeyDown={!scene?.isEditingEnabled ? this.onElementKeyDown : undefined}\n        role=\"button\"\n        tabIndex={0}\n      >\n        <item.display\n          key={`${this.UID}/${this.revId}`}\n          config={this.options.config}\n          data={this.data}\n          isSelected={isSelected}\n        />\n      </div>\n    );\n  }\n}\n","import { isNumber, isString } from 'lodash';\n\nimport { AppEvents, Field, getFieldDisplayName, LinkModel, PluginState, SelectableValue } from '@grafana/data';\nimport appEvents from 'app/core/app_events';\nimport { hasAlphaPanels, config } from 'app/core/config';\nimport {\n  defaultElementItems,\n  advancedElementItems,\n  CanvasElementItem,\n  canvasElementRegistry,\n  CanvasElementOptions,\n  TextConfig,\n  CanvasConnection,\n} from 'app/features/canvas';\nimport { notFoundItem } from 'app/features/canvas/elements/notFound';\nimport { ElementState } from 'app/features/canvas/runtime/element';\nimport { FrameState } from 'app/features/canvas/runtime/frame';\nimport { Scene, SelectionParams } from 'app/features/canvas/runtime/scene';\nimport { DimensionContext } from 'app/features/dimensions';\n\nimport { AnchorPoint, ConnectionState } from './types';\n\nexport function doSelect(scene: Scene, element: ElementState | FrameState) {\n  try {\n    let selection: SelectionParams = { targets: [] };\n    if (element instanceof FrameState) {\n      const targetElements: HTMLDivElement[] = [];\n      targetElements.push(element?.div!);\n      selection.targets = targetElements;\n      selection.frame = element;\n      scene.select(selection);\n    } else {\n      scene.currentLayer = element.parent;\n      selection.targets = [element?.div!];\n      scene.select(selection);\n    }\n  } catch (error) {\n    appEvents.emit(AppEvents.alertError, ['Unable to select element, try selecting element in panel instead']);\n  }\n}\n\nexport function getElementTypes(shouldShowAdvancedTypes: boolean | undefined, current?: string): RegistrySelectInfo {\n  if (shouldShowAdvancedTypes) {\n    return getElementTypesOptions([...defaultElementItems, ...advancedElementItems], current);\n  }\n\n  return getElementTypesOptions([...defaultElementItems], current);\n}\n\ninterface RegistrySelectInfo {\n  options: Array<SelectableValue<string>>;\n  current: Array<SelectableValue<string>>;\n}\n\nexport function getElementTypesOptions(items: CanvasElementItem[], current: string | undefined): RegistrySelectInfo {\n  const selectables: RegistrySelectInfo = { options: [], current: [] };\n  const alpha: Array<SelectableValue<string>> = [];\n\n  for (const item of items) {\n    const option: SelectableValue<string> = { label: item.name, value: item.id, description: item.description };\n    if (item.state === PluginState.alpha) {\n      if (!hasAlphaPanels) {\n        continue;\n      }\n      option.label = `${item.name} (Alpha)`;\n      alpha.push(option);\n    } else {\n      selectables.options.push(option);\n    }\n\n    if (item.id === current) {\n      selectables.current.push(option);\n    }\n  }\n\n  for (const a of alpha) {\n    selectables.options.push(a);\n  }\n\n  return selectables;\n}\n\nexport function onAddItem(sel: SelectableValue<string>, rootLayer: FrameState | undefined, anchorPoint?: AnchorPoint) {\n  const newItem = canvasElementRegistry.getIfExists(sel.value) ?? notFoundItem;\n  const newElementOptions: CanvasElementOptions = {\n    ...newItem.getNewOptions(),\n    type: newItem.id,\n    name: '',\n  };\n\n  if (anchorPoint) {\n    newElementOptions.placement = { ...newElementOptions.placement, top: anchorPoint.y, left: anchorPoint.x };\n  }\n\n  if (newItem.defaultSize) {\n    newElementOptions.placement = { ...newElementOptions.placement, ...newItem.defaultSize };\n  }\n\n  if (rootLayer) {\n    const newElement = new ElementState(newItem, newElementOptions, rootLayer);\n    newElement.updateData(rootLayer.scene.context);\n    rootLayer.elements.push(newElement);\n    rootLayer.scene.save();\n    rootLayer.reinitializeMoveable();\n\n    setTimeout(() => doSelect(rootLayer.scene, newElement));\n  }\n}\n\nexport function getDataLinks(ctx: DimensionContext, cfg: TextConfig, textData: string | undefined): LinkModel[] {\n  const panelData = ctx.getPanelData();\n  const frames = panelData?.series;\n\n  const links: Array<LinkModel<Field>> = [];\n  const linkLookup = new Set<string>();\n\n  frames?.forEach((frame) => {\n    const visibleFields = frame.fields.filter((field) => !Boolean(field.config.custom?.hideFrom?.tooltip));\n\n    if (cfg.text?.field && visibleFields.some((f) => getFieldDisplayName(f, frame) === cfg.text?.field)) {\n      const field = visibleFields.filter((field) => getFieldDisplayName(field, frame) === cfg.text?.field)[0];\n      if (field?.getLinks) {\n        const disp = field.display ? field.display(textData) : { text: `${textData}`, numeric: +textData! };\n        field.getLinks({ calculatedValue: disp }).forEach((link) => {\n          const key = `${link.title}/${link.href}`;\n          if (!linkLookup.has(key)) {\n            links.push(link);\n            linkLookup.add(key);\n          }\n        });\n      }\n    }\n  });\n\n  return links;\n}\n\nexport function isConnectionSource(element: ElementState) {\n  return element.options.connections && element.options.connections.length > 0;\n}\nexport function isConnectionTarget(element: ElementState, sceneByName: Map<string, ElementState>) {\n  const connections = getConnections(sceneByName);\n  return connections.some((connection) => connection.target === element);\n}\n\nexport function getConnections(sceneByName: Map<string, ElementState>) {\n  const connections: ConnectionState[] = [];\n  for (let v of sceneByName.values()) {\n    if (v.options.connections) {\n      v.options.connections.forEach((c, index) => {\n        // @TODO Remove after v10.x\n        if (isString(c.color)) {\n          c.color = { fixed: c.color };\n        }\n\n        if (isNumber(c.size)) {\n          c.size = { fixed: 2, min: 1, max: 10 };\n        }\n\n        const target = c.targetName ? sceneByName.get(c.targetName) : v.parent;\n        if (target) {\n          connections.push({\n            index,\n            source: v,\n            target,\n            info: c,\n          });\n        }\n      });\n    }\n  }\n\n  return connections;\n}\n\nexport function getConnectionsByTarget(element: ElementState, scene: Scene) {\n  return scene.connections.state.filter((connection) => connection.target === element);\n}\n\nexport function updateConnectionsForSource(element: ElementState, scene: Scene) {\n  const targetConnections = getConnectionsByTarget(element, scene);\n  targetConnections.forEach((connection) => {\n    const sourceConnections = connection.source.options.connections?.splice(0) ?? [];\n    const connections = sourceConnections.filter((con) => con.targetName !== element.getName());\n    connection.source.onChange({ ...connection.source.options, connections });\n  });\n}\n\nexport const calculateCoordinates = (\n  sourceRect: DOMRect,\n  parentRect: DOMRect,\n  info: CanvasConnection,\n  target: ElementState\n) => {\n  const sourceHorizontalCenter = sourceRect.left - parentRect.left + sourceRect.width / 2;\n  const sourceVerticalCenter = sourceRect.top - parentRect.top + sourceRect.height / 2;\n\n  // Convert from connection coords to DOM coords\n  const x1 = sourceHorizontalCenter + (info.source.x * sourceRect.width) / 2;\n  const y1 = sourceVerticalCenter - (info.source.y * sourceRect.height) / 2;\n\n  let x2;\n  let y2;\n\n  if (info.targetName) {\n    const targetRect = target.div?.getBoundingClientRect();\n    if (targetRect) {\n      const targetHorizontalCenter = targetRect.left - parentRect.left + targetRect.width / 2;\n      const targetVerticalCenter = targetRect.top - parentRect.top + targetRect.height / 2;\n\n      x2 = targetHorizontalCenter + (info.target.x * targetRect.width) / 2;\n      y2 = targetVerticalCenter - (info.target.y * targetRect.height) / 2;\n    }\n  } else {\n    const parentHorizontalCenter = parentRect.width / 2;\n    const parentVerticalCenter = parentRect.height / 2;\n\n    x2 = parentHorizontalCenter + (info.target.x * parentRect.width) / 2;\n    y2 = parentVerticalCenter - (info.target.y * parentRect.height) / 2;\n  }\n  return { x1, y1, x2, y2 };\n};\n\n// @TODO revisit, currently returning last row index for field\nexport const getRowIndex = (fieldName: string | undefined, scene: Scene) => {\n  if (fieldName) {\n    const series = scene.context.getPanelData()?.series[0];\n    const field = series?.fields.find((f) => (f.name = fieldName));\n    const data = field?.values;\n    return data ? data.length - 1 : 0;\n  }\n  return 0;\n};\n\nexport const getConnectionStyles = (info: CanvasConnection, scene: Scene, defaultArrowSize: number) => {\n  const defaultArrowColor = config.theme2.colors.text.primary;\n  const lastRowIndex = getRowIndex(info.size?.field, scene);\n  const strokeColor = info.color ? scene.context.getColor(info.color).value() : defaultArrowColor;\n  const strokeWidth = info.size ? scene.context.getScale(info.size).get(lastRowIndex) : defaultArrowSize;\n  return { strokeColor, strokeWidth };\n};\n","import { css } from '@emotion/css';\nimport React, { useCallback } from 'react';\nimport { useObservable } from 'react-use';\nimport { of } from 'rxjs';\n\nimport { DataFrame, FieldNamePickerConfigSettings, GrafanaTheme2, StandardEditorsRegistryItem } from '@grafana/data';\nimport { TextDimensionMode } from '@grafana/schema';\nimport { usePanelContext, useStyles2 } from '@grafana/ui';\nimport { FieldNamePicker } from '@grafana/ui/src/components/MatchersUI/FieldNamePicker';\nimport { frameHasName, getFrameFieldsDisplayNames } from '@grafana/ui/src/components/MatchersUI/utils';\nimport { DimensionContext } from 'app/features/dimensions/context';\nimport { ColorDimensionEditor } from 'app/features/dimensions/editors/ColorDimensionEditor';\nimport { TextDimensionEditor } from 'app/features/dimensions/editors/TextDimensionEditor';\nimport { getDataLinks } from 'app/plugins/panel/canvas/utils';\n\nimport { CanvasElementItem, CanvasElementProps, defaultBgColor, defaultTextColor } from '../element';\nimport { ElementState } from '../runtime/element';\nimport { Align, TextConfig, TextData, VAlign } from '../types';\n\n// eslint-disable-next-line\nconst dummyFieldSettings: StandardEditorsRegistryItem<string, FieldNamePickerConfigSettings> = {\n  settings: {},\n} as StandardEditorsRegistryItem<string, FieldNamePickerConfigSettings>;\n\nconst MetricValueDisplay = (props: CanvasElementProps<TextConfig, TextData>) => {\n  const { data, isSelected, config } = props;\n  const styles = useStyles2(getStyles(data));\n\n  const context = usePanelContext();\n  const scene = context.instanceState?.scene;\n  let panelData: DataFrame[];\n  panelData = context.instanceState?.scene?.data.series;\n\n  const isEditMode = useObservable<boolean>(scene?.editModeEnabled ?? of(false));\n\n  const getDisplayValue = () => {\n    if (panelData && config.text?.field && fieldNotFound()) {\n      return 'Field not found';\n    }\n\n    if (panelData && config.text?.field && !data?.text) {\n      return 'No data';\n    }\n\n    return data?.text ? data.text : 'Double click to set field';\n  };\n\n  const fieldNotFound = () => {\n    const fieldNames = getFrameFieldsDisplayNames(panelData);\n    return !frameHasName(config.text?.field, fieldNames);\n  };\n\n  if (isEditMode && isSelected) {\n    return <MetricValueEdit {...props} />;\n  }\n\n  return (\n    <div className={styles.container}>\n      <span className={styles.span}>{getDisplayValue()}</span>\n    </div>\n  );\n};\n\nconst MetricValueEdit = (props: CanvasElementProps<TextConfig, TextData>) => {\n  let { data, config } = props;\n  const context = usePanelContext();\n  let panelData: DataFrame[];\n  panelData = context.instanceState?.scene?.data.series;\n\n  const onFieldChange = useCallback(\n    (field: string | undefined) => {\n      let selectedElement: ElementState;\n      selectedElement = context.instanceState?.selected[0];\n      if (selectedElement) {\n        const options = selectedElement.options;\n        selectedElement.onChange({\n          ...options,\n          config: {\n            ...options.config,\n            text: { fixed: '', field: field, mode: TextDimensionMode.Field },\n          },\n          background: {\n            color: { field: field, fixed: options.background?.color?.fixed ?? '' },\n          },\n        });\n\n        // Force a re-render (update scene data after config update)\n        const scene = context.instanceState?.scene;\n        if (scene) {\n          scene.editModeEnabled.next(false);\n          scene.updateData(scene.data);\n        }\n      }\n    },\n    [context.instanceState?.scene, context.instanceState?.selected]\n  );\n\n  const styles = useStyles2(getStyles(data));\n  return (\n    <div className={styles.inlineEditorContainer}>\n      {panelData && (\n        <FieldNamePicker\n          context={{ data: panelData }}\n          value={config.text?.field ?? ''}\n          onChange={onFieldChange}\n          item={dummyFieldSettings}\n        />\n      )}\n    </div>\n  );\n};\n\nconst getStyles = (data: TextData | undefined) => (theme: GrafanaTheme2) => ({\n  container: css({\n    position: 'absolute',\n    height: '100%',\n    width: '100%',\n    display: 'table',\n  }),\n  inlineEditorContainer: css({\n    height: '100%',\n    width: '100%',\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(1),\n  }),\n  span: css({\n    display: 'table-cell',\n    verticalAlign: data?.valign,\n    textAlign: data?.align,\n    fontSize: `${data?.size}px`,\n    color: data?.color,\n  }),\n});\n\nexport const metricValueItem: CanvasElementItem<TextConfig, TextData> = {\n  id: 'metric-value',\n  name: 'Metric Value',\n  description: 'Display a field value',\n\n  display: MetricValueDisplay,\n\n  hasEditMode: true,\n\n  defaultSize: {\n    width: 260,\n    height: 50,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    config: {\n      align: Align.Center,\n      valign: VAlign.Middle,\n      color: {\n        fixed: defaultTextColor,\n      },\n      text: { mode: TextDimensionMode.Field, fixed: '', field: '' },\n      size: 20,\n    },\n    background: {\n      color: {\n        fixed: defaultBgColor,\n      },\n    },\n    placement: {\n      width: options?.placement?.width,\n      height: options?.placement?.height,\n      top: options?.placement?.top ?? 100,\n      left: options?.placement?.left ?? 100,\n    },\n  }),\n\n  prepareData: (ctx: DimensionContext, cfg: TextConfig) => {\n    const data: TextData = {\n      text: cfg.text ? ctx.getText(cfg.text).value() : '',\n      align: cfg.align ?? Align.Center,\n      valign: cfg.valign ?? VAlign.Middle,\n      size: cfg.size,\n    };\n\n    if (cfg.color) {\n      data.color = ctx.getColor(cfg.color).value();\n    }\n\n    data.links = getDataLinks(ctx, cfg, data.text);\n\n    return data;\n  },\n\n  registerOptionsUI: (builder) => {\n    const category = ['Metric value'];\n    builder\n      .addCustomEditor({\n        category,\n        id: 'textSelector',\n        path: 'config.text',\n        name: 'Text',\n        editor: TextDimensionEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'config.color',\n        path: 'config.color',\n        name: 'Text color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {},\n      })\n      .addRadio({\n        category,\n        path: 'config.align',\n        name: 'Align text',\n        settings: {\n          options: [\n            { value: Align.Left, label: 'Left' },\n            { value: Align.Center, label: 'Center' },\n            { value: Align.Right, label: 'Right' },\n          ],\n        },\n        defaultValue: Align.Left,\n      })\n      .addRadio({\n        category,\n        path: 'config.valign',\n        name: 'Vertical align',\n        settings: {\n          options: [\n            { value: VAlign.Top, label: 'Top' },\n            { value: VAlign.Middle, label: 'Middle' },\n            { value: VAlign.Bottom, label: 'Bottom' },\n          ],\n        },\n        defaultValue: VAlign.Middle,\n      })\n      .addNumberInput({\n        category,\n        path: 'config.size',\n        name: 'Text size',\n        settings: {\n          placeholder: 'Auto',\n        },\n      });\n  },\n};\n","import { css } from '@emotion/css';\nimport React, { PureComponent } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { stylesFactory } from '@grafana/ui';\nimport { config } from 'app/core/config';\nimport { DimensionContext } from 'app/features/dimensions/context';\nimport { ColorDimensionEditor } from 'app/features/dimensions/editors/ColorDimensionEditor';\nimport { TextDimensionEditor } from 'app/features/dimensions/editors/TextDimensionEditor';\n\nimport { CanvasElementItem, CanvasElementProps, defaultBgColor, defaultTextColor } from '../element';\nimport { Align, TextConfig, TextData, VAlign } from '../types';\n\nclass RectangleDisplay extends PureComponent<CanvasElementProps<TextConfig, TextData>> {\n  render() {\n    const { data } = this.props;\n    const styles = getStyles(config.theme2, data);\n\n    return (\n      <div className={styles.container}>\n        <span className={styles.span}>{data?.text}</span>\n      </div>\n    );\n  }\n}\n\nconst getStyles = stylesFactory((theme: GrafanaTheme2, data) => ({\n  container: css({\n    position: 'absolute',\n    height: '100%',\n    width: '100%',\n    display: 'table',\n  }),\n  span: css({\n    display: 'table-cell',\n    verticalAlign: data?.valign,\n    textAlign: data?.align,\n    fontSize: `${data?.size}px`,\n    color: data?.color,\n  }),\n}));\n\nexport const rectangleItem: CanvasElementItem<TextConfig, TextData> = {\n  id: 'rectangle',\n  name: 'Rectangle',\n  description: 'Rectangle',\n\n  display: RectangleDisplay,\n\n  defaultSize: {\n    width: 240,\n    height: 160,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    config: {\n      align: Align.Center,\n      valign: VAlign.Middle,\n      color: {\n        fixed: defaultTextColor,\n      },\n    },\n    background: {\n      color: {\n        fixed: defaultBgColor,\n      },\n    },\n  }),\n\n  // Called when data changes\n  prepareData: (ctx: DimensionContext, cfg: TextConfig) => {\n    const data: TextData = {\n      text: cfg.text ? ctx.getText(cfg.text).value() : '',\n      align: cfg.align ?? Align.Center,\n      valign: cfg.valign ?? VAlign.Middle,\n      size: cfg.size,\n    };\n\n    if (cfg.color) {\n      data.color = ctx.getColor(cfg.color).value();\n    }\n\n    return data;\n  },\n\n  // Heatmap overlay options\n  registerOptionsUI: (builder) => {\n    const category = ['Rectangle'];\n    builder\n      .addCustomEditor({\n        category,\n        id: 'textSelector',\n        path: 'config.text',\n        name: 'Text',\n        editor: TextDimensionEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'config.color',\n        path: 'config.color',\n        name: 'Text color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {},\n      })\n      .addRadio({\n        category,\n        path: 'config.align',\n        name: 'Align text',\n        settings: {\n          options: [\n            { value: Align.Left, label: 'Left' },\n            { value: Align.Center, label: 'Center' },\n            { value: Align.Right, label: 'Right' },\n          ],\n        },\n        defaultValue: Align.Left,\n      })\n      .addRadio({\n        category,\n        path: 'config.valign',\n        name: 'Vertical align',\n        settings: {\n          options: [\n            { value: VAlign.Top, label: 'Top' },\n            { value: VAlign.Middle, label: 'Middle' },\n            { value: VAlign.Bottom, label: 'Bottom' },\n          ],\n        },\n        defaultValue: VAlign.Middle,\n      })\n      .addNumberInput({\n        category,\n        path: 'config.size',\n        name: 'Text size',\n        settings: {\n          placeholder: 'Auto',\n        },\n      });\n  },\n};\n","import React from 'react';\n\nimport { useStyles2 } from '@grafana/ui';\n\nimport { getServerStyles, ServerData } from '../server';\n\nexport const ServerDatabase = (data: ServerData) => {\n  const styles = useStyles2(getServerStyles(data));\n  return (\n    <g className={styles.outline}>\n      <g className={styles.server}>\n        <path d=\"m2.6953 37.5v20.883c0 7.6725 15.592 13.922 34.805 13.922s34.805-6.2493 34.805-13.922v-20.883\" />\n        <path d=\"m2.6953 16.617v20.883c0 7.7035 15.592 13.922 34.805 13.922s34.805-6.2184 34.805-13.922v-20.883\" />\n        <path d=\"m37.5 30.539c19.212 0 34.805-6.2185 34.805-13.922 0-7.7034-15.592-13.922-34.805-13.922s-34.805 6.2184-34.805 13.922c0 7.7035 15.592 13.922 34.805 13.922z\" />\n      </g>\n      <g className={styles.circleBack}>\n        <path\n          transform=\"matrix(2.7868 0 0 2.7868 -132.86 -110.58)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n        <path\n          transform=\"matrix(2.7868 0 0 2.7868 -122.04 -111.7)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n        <path\n          transform=\"matrix(2.7868 0 0 2.7868 -111.21 -114.77)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n      </g>\n      <g className={styles.circle}>\n        <path\n          transform=\"matrix(1.4922 0 0 1.4922 -52.337 -30.65)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n        <path\n          transform=\"matrix(1.4922 0 0 1.4922 -41.518 -31.769)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n        <path\n          transform=\"matrix(1.4922 0 0 1.4922 -30.688 -34.842)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n      </g>\n    </g>\n  );\n};\n","import React from 'react';\n\nimport { useStyles2 } from '@grafana/ui';\n\nimport { getServerStyles, ServerData } from '../server';\n\nexport const ServerSingle = (data: ServerData) => {\n  const styles = useStyles2(getServerStyles(data));\n  return (\n    <g>\n      <g className={styles.outline} transform=\"matrix(1.01 0 0 1.01 -.375 -.375)\">\n        <g className={styles.server}>\n          <path d=\"m3.2812 55.659 9.125-52.377h50.188l9.125 52.377\" />\n          <path d=\"m3.2812 56.328c0-2.5246 2.0379-4.5625 4.5625-4.5625h59.313c2.5245 0 4.5625 2.0379 4.5625 4.5625v10.828c0 2.5245-2.038 4.5625-4.5625 4.5625h-59.313c-2.5246 0-4.5625-2.038-4.5625-4.5625z\" />\n        </g>\n        <path d=\"m12.406 61.742h30.69\" />\n        <path d=\"m52.8 51.765v19.953\" />\n        <path\n          className={styles.circleBack}\n          transform=\"matrix(2.7592 0 0 2.7592 -109.42 -108.61)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n        <path\n          className={styles.circle}\n          transform=\"matrix(1.4775 0 0 1.4775 -29.697 -29.479)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n      </g>\n    </g>\n  );\n};\n","import React from 'react';\n\nimport { useStyles2 } from '@grafana/ui';\n\nimport { getServerStyles, ServerData } from '../server';\n\nexport const ServerStack = (data: ServerData) => {\n  const styles = useStyles2(getServerStyles(data));\n  return (\n    <g className={styles.outline} transform=\"translate(.5 .49865)\">\n      <g className={styles.server}>\n        <path d=\"m3.4834 21.768 8.0783-19.456h50.875l8.0784 19.456\" />\n        <path d=\"m2.3125 24.852c0-2.5592 2.0658-4.625 4.625-4.625h60.125c2.5592 0 4.625 2.0658 4.625 4.625v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z\" />\n        <path d=\"m2.3125 42.031c0-2.5592 2.0658-4.6251 4.625-4.6251h60.125c2.5592 0 4.625 2.0659 4.625 4.6251v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z\" />\n        <path d=\"m2.3125 59.172c0-2.5592 2.0658-4.625 4.625-4.625h60.125c2.5592 0 4.625 2.0658 4.625 4.625v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z\" />\n      </g>\n      <path d=\"m11.562 28.797h31.111\" />\n      <path d=\"m52.508 20.227v17.143\" />\n      <path d=\"m11.562 63.117h31.111\" />\n      <path d=\"m52.508 54.547v17.143\" />\n      <path d=\"m11.562 45.977h31.111\" />\n      <path d=\"m52.508 37.406v17.143\" />\n      <g className={styles.circleBack}>\n        <path\n          transform=\"matrix(2.7868 0 0 2.7868 -111.31 -143.2)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n        <path\n          transform=\"matrix(2.7868 0 0 2.7868 -111.31 -126.14)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n        <path\n          transform=\"matrix(2.7868 0 0 2.7868 -111.31 -108.86)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n      </g>\n      <g className={styles.circle}>\n        <path\n          transform=\"matrix(1.4922 0 0 1.4922 -30.794 -63.277)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n        <path\n          transform=\"matrix(1.4922 0 0 1.4922 -30.794 -46.209)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n        <path\n          transform=\"matrix(1.4922 0 0 1.4922 -30.794 -28.93)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n      </g>\n    </g>\n  );\n};\n","import React from 'react';\n\nimport { useStyles2 } from '@grafana/ui';\n\nimport { getServerStyles, ServerData } from '../server';\n\nexport const ServerTerminal = (data: ServerData) => {\n  const styles = useStyles2(getServerStyles(data));\n  return (\n    <g className={styles.outline}>\n      <g className={styles.server}>\n        <path d=\"m5.3125 9.6562c0-3.5621 2.8754-6.4375 6.4375-6.4375h51.5c3.5621 0 6.4375 2.8754 6.4375 6.4375v28.625c0 3.5621-2.8754 6.4375-6.4375 6.4375h-51.5c-3.5621 0-6.4375-2.8754-6.4375-6.4375z\" />\n        <path d=\"m2.8125 59.859c0-2.5592 2.0658-4.625 4.625-4.625h60.125c2.5592 0 4.625 2.0658 4.625 4.625v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z\" />\n      </g>\n      <path d=\"m37.5 46.719v2.875\" />\n      <path d=\"m24.625 51.343h25.75\" />\n      <path d=\"m12.062 63.804h31.111\" />\n      <path d=\"m53.008 55.234v17.143\" />\n      <path\n        className={styles.circleBack}\n        transform=\"matrix(2.7868 0 0 2.7868 -110.81 -108.2)\"\n        d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n      />\n      <path\n        className={styles.circle}\n        transform=\"matrix(1.4922 0 0 1.4922 -30.294 -28.27)\"\n        d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n      />\n    </g>\n  );\n};\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { ColorDimensionConfig, ScalarDimensionConfig } from '@grafana/schema';\nimport config from 'app/core/config';\nimport { DimensionContext } from 'app/features/dimensions';\nimport { ColorDimensionEditor, ScalarDimensionEditor } from 'app/features/dimensions/editors';\n\nimport { CanvasElementItem, CanvasElementProps } from '../../element';\n\nimport { ServerDatabase } from './types/database';\nimport { ServerSingle } from './types/single';\nimport { ServerStack } from './types/stack';\nimport { ServerTerminal } from './types/terminal';\n\ninterface ServerConfig {\n  blinkRate?: ScalarDimensionConfig;\n  statusColor?: ColorDimensionConfig;\n  bulbColor?: ColorDimensionConfig;\n  type: ServerType;\n}\n\nexport interface ServerData {\n  blinkRate?: number;\n  statusColor?: string;\n  bulbColor?: string;\n  type: ServerType;\n}\n\nenum ServerType {\n  Single = 'Single',\n  Stack = 'Stack',\n  Database = 'Database',\n  Terminal = 'Terminal',\n}\n\ntype Props = CanvasElementProps<ServerConfig, ServerData>;\nconst outlineColor = config.theme2.colors.text.primary;\n\nconst ServerDisplay = ({ data }: Props) => {\n  return data ? (\n    <svg viewBox=\"0 0 75 75\">\n      {data.type === ServerType.Single ? (\n        <ServerSingle {...data} />\n      ) : data.type === ServerType.Stack ? (\n        <ServerStack {...data} />\n      ) : data.type === ServerType.Database ? (\n        <ServerDatabase {...data} />\n      ) : data.type === ServerType.Terminal ? (\n        <ServerTerminal {...data} />\n      ) : null}\n    </svg>\n  ) : null;\n};\n\nexport const serverItem: CanvasElementItem<ServerConfig, ServerData> = {\n  id: 'server',\n  name: 'Server',\n  description: 'Basic server with status',\n\n  display: ServerDisplay,\n\n  defaultSize: {\n    width: 100,\n    height: 100,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    background: {\n      color: {\n        fixed: 'transparent',\n      },\n    },\n    placement: {\n      width: options?.placement?.width ?? 100,\n      height: options?.placement?.height ?? 100,\n      top: options?.placement?.top,\n      left: options?.placement?.left,\n    },\n    config: {\n      type: ServerType.Single,\n    },\n  }),\n\n  // Called when data changes\n  prepareData: (ctx: DimensionContext, cfg: ServerConfig) => {\n    const data: ServerData = {\n      blinkRate: cfg?.blinkRate ? ctx.getScalar(cfg.blinkRate).value() : 0,\n      statusColor: cfg?.statusColor ? ctx.getColor(cfg.statusColor).value() : 'transparent',\n      bulbColor: cfg?.bulbColor ? ctx.getColor(cfg.bulbColor).value() : 'green',\n      type: cfg.type,\n    };\n\n    return data;\n  },\n\n  registerOptionsUI: (builder) => {\n    const category = ['Server'];\n    builder\n      .addSelect({\n        category,\n        path: 'config.type',\n        name: 'Type',\n        settings: {\n          options: [\n            { value: ServerType.Single, label: ServerType.Single },\n            { value: ServerType.Stack, label: ServerType.Stack },\n            { value: ServerType.Database, label: ServerType.Database },\n            { value: ServerType.Terminal, label: ServerType.Terminal },\n          ],\n        },\n        defaultValue: ServerType.Single,\n      })\n      .addCustomEditor({\n        category,\n        id: 'statusColor',\n        path: 'config.statusColor',\n        name: 'Status color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {\n          fixed: 'transparent',\n        },\n      })\n      .addCustomEditor({\n        category,\n        id: 'bulbColor',\n        path: 'config.bulbColor',\n        name: 'Bulb color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {\n          fixed: 'green',\n        },\n      })\n      .addCustomEditor({\n        category,\n        id: 'blinkRate',\n        path: 'config.blinkRate',\n        name: 'Blink rate [hz] (0 = off)',\n        editor: ScalarDimensionEditor,\n        settings: { min: 0, max: 100 },\n      });\n  },\n};\n\nexport const getServerStyles = (data: ServerData | undefined) => (theme: GrafanaTheme2) => ({\n  bulb: css({\n    '@keyframes blink': {\n      '0%': {\n        fillOpacity: 0,\n      },\n      '50%': {\n        fillOpacity: 1,\n      },\n      '100%': {\n        fillOpacity: 0,\n      },\n    },\n  }),\n  server: css({\n    fill: data?.statusColor ?? 'transparent',\n  }),\n  circle: css({\n    animation: `blink ${data?.blinkRate ? 1 / data.blinkRate : 0}s infinite step-end`,\n    fill: data?.bulbColor,\n    stroke: 'none',\n  }),\n  circleBack: css({\n    fill: outlineColor,\n    stroke: 'none',\n    opacity: 1,\n  }),\n  outline: css({\n    stroke: outlineColor,\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n    strokeWidth: '4px',\n  }),\n});\n","import { css } from '@emotion/css';\nimport React, { useCallback, useEffect, useRef } from 'react';\nimport { useObservable } from 'react-use';\nimport { of } from 'rxjs';\n\nimport { DataFrame, GrafanaTheme2 } from '@grafana/data';\nimport { Input, usePanelContext, useStyles2 } from '@grafana/ui';\nimport { DimensionContext } from 'app/features/dimensions/context';\nimport { ColorDimensionEditor } from 'app/features/dimensions/editors/ColorDimensionEditor';\nimport { TextDimensionEditor } from 'app/features/dimensions/editors/TextDimensionEditor';\n\nimport { getDataLinks } from '../../../plugins/panel/canvas/utils';\nimport { CanvasElementItem, CanvasElementProps, defaultThemeTextColor } from '../element';\nimport { ElementState } from '../runtime/element';\nimport { Align, TextConfig, TextData, VAlign } from '../types';\n\nconst TextDisplay = (props: CanvasElementProps<TextConfig, TextData>) => {\n  const { data, isSelected } = props;\n  const styles = useStyles2(getStyles(data));\n\n  const context = usePanelContext();\n  const scene = context.instanceState?.scene;\n\n  const isEditMode = useObservable<boolean>(scene?.editModeEnabled ?? of(false));\n\n  if (isEditMode && isSelected) {\n    return <TextEdit {...props} />;\n  }\n  return (\n    <div className={styles.container}>\n      <span className={styles.span}>{data?.text ? data.text : 'Double click to set text'}</span>\n    </div>\n  );\n};\n\nconst TextEdit = (props: CanvasElementProps<TextConfig, TextData>) => {\n  let { data, config } = props;\n  const context = usePanelContext();\n  let panelData: DataFrame[];\n  panelData = context.instanceState?.scene?.data.series;\n\n  const textRef = useRef<string>(config.text?.fixed ?? '');\n\n  // Save text on TextEdit unmount\n  useEffect(() => {\n    return () => {\n      saveText(textRef.current);\n    };\n  });\n\n  const onKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    if (event.key === 'Enter') {\n      event.preventDefault();\n      const scene = context.instanceState?.scene;\n      if (scene) {\n        scene.editModeEnabled.next(false);\n      }\n    }\n  };\n\n  const onKeyUp = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    textRef.current = event.currentTarget.value;\n  };\n\n  const saveText = useCallback(\n    (textValue: string) => {\n      let selectedElement: ElementState;\n      selectedElement = context.instanceState?.selected[0];\n      if (selectedElement) {\n        const options = selectedElement.options;\n        selectedElement.onChange({\n          ...options,\n          config: {\n            ...options.config,\n            text: { ...selectedElement.options.config.text, fixed: textValue },\n          },\n        });\n\n        // Force a re-render (update scene data after config update)\n        const scene = context.instanceState?.scene;\n        if (scene) {\n          scene.updateData(scene.data);\n        }\n      }\n    },\n    [context.instanceState?.scene, context.instanceState?.selected]\n  );\n\n  const styles = useStyles2(getStyles(data));\n  return (\n    <div className={styles.inlineEditorContainer}>\n      {panelData && <Input defaultValue={config.text?.fixed ?? ''} onKeyDown={onKeyDown} onKeyUp={onKeyUp} autoFocus />}\n    </div>\n  );\n};\n\nconst getStyles = (data: TextData | undefined) => (theme: GrafanaTheme2) => ({\n  container: css({\n    position: 'absolute',\n    height: '100%',\n    width: '100%',\n    display: 'table',\n  }),\n  inlineEditorContainer: css({\n    height: '100%',\n    width: '100%',\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(1),\n  }),\n  span: css({\n    display: 'table-cell',\n    verticalAlign: data?.valign,\n    textAlign: data?.align,\n    fontSize: `${data?.size}px`,\n    color: data?.color,\n  }),\n});\n\nexport const textItem: CanvasElementItem<TextConfig, TextData> = {\n  id: 'text',\n  name: 'Text',\n  description: 'Display text',\n\n  display: TextDisplay,\n\n  hasEditMode: true,\n\n  defaultSize: {\n    width: 100,\n    height: 50,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    config: {\n      align: Align.Center,\n      valign: VAlign.Middle,\n      color: {\n        fixed: defaultThemeTextColor,\n      },\n      size: 16,\n    },\n    placement: {\n      width: options?.placement?.width ?? 100,\n      height: options?.placement?.height ?? 100,\n      top: options?.placement?.top,\n      left: options?.placement?.left,\n    },\n  }),\n\n  prepareData: (ctx: DimensionContext, cfg: TextConfig) => {\n    const data: TextData = {\n      text: cfg.text ? ctx.getText(cfg.text).value() : '',\n      align: cfg.align ?? Align.Center,\n      valign: cfg.valign ?? VAlign.Middle,\n      size: cfg.size,\n    };\n\n    if (cfg.color) {\n      data.color = ctx.getColor(cfg.color).value();\n    }\n\n    data.links = getDataLinks(ctx, cfg, data.text);\n\n    return data;\n  },\n\n  registerOptionsUI: (builder) => {\n    const category = ['Text'];\n    builder\n      .addCustomEditor({\n        category,\n        id: 'textSelector',\n        path: 'config.text',\n        name: 'Text',\n        editor: TextDimensionEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'config.color',\n        path: 'config.color',\n        name: 'Text color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {},\n      })\n      .addRadio({\n        category,\n        path: 'config.align',\n        name: 'Align text',\n        settings: {\n          options: [\n            { value: Align.Left, label: 'Left' },\n            { value: Align.Center, label: 'Center' },\n            { value: Align.Right, label: 'Right' },\n          ],\n        },\n        defaultValue: Align.Left,\n      })\n      .addRadio({\n        category,\n        path: 'config.valign',\n        name: 'Vertical align',\n        settings: {\n          options: [\n            { value: VAlign.Top, label: 'Top' },\n            { value: VAlign.Middle, label: 'Middle' },\n            { value: VAlign.Bottom, label: 'Bottom' },\n          ],\n        },\n        defaultValue: VAlign.Middle,\n      })\n      .addNumberInput({\n        category,\n        path: 'config.size',\n        name: 'Text size',\n        settings: {\n          placeholder: 'Auto',\n        },\n      });\n  },\n};\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { ScalarDimensionConfig } from '@grafana/schema';\nimport { useStyles2 } from '@grafana/ui';\nimport { DimensionContext } from 'app/features/dimensions';\nimport { ScalarDimensionEditor } from 'app/features/dimensions/editors';\n\nimport { CanvasElementItem, CanvasElementProps, defaultBgColor } from '../element';\n\ninterface WindTurbineData {\n  rpm?: number;\n}\n\ninterface WindTurbineConfig {\n  rpm?: ScalarDimensionConfig;\n}\n\nconst WindTurbineDisplay = ({ data }: CanvasElementProps<WindTurbineConfig, WindTurbineData>) => {\n  const styles = useStyles2(getStyles);\n\n  const windTurbineAnimation = `spin ${data?.rpm ? 60 / Math.abs(data.rpm) : 0}s linear infinite`;\n\n  return (\n    <svg viewBox=\"0 0 189.326 283.989\" preserveAspectRatio=\"xMidYMid meet\" style={{ fill: defaultBgColor }}>\n      <symbol id=\"blade\">\n        <path\n          fill=\"#e6e6e6\"\n          id=\"blade-front\"\n          d=\"M14.6491879,1.85011601 C14.2684455,-0.0535962877 10.7150812,-0.815081206 9.06473318,3.37308585 L0.434338747,70.7658933 L8.93805104,91.9607889 L15.4106729,90.437819 L17.5684455,78.3807425 L14.5218097,1.97679814 L14.6491879,1.85011601 Z\"\n        />\n        <path\n          fill=\"#d0d6d7\"\n          id=\"blade-side\"\n          d=\"M11.0951276,0.581206497 C10.3336427,0.961948956 9.57215777,1.85011601 8.93735499,3.24640371 L0.306960557,70.6392111 L8.81067285,91.8341067 L3.35359629,70.0044084 L11.0951276,0.581206497 Z\"\n        />\n      </symbol>\n\n      <g>\n        <g id=\"structure\" transform=\"translate(58.123, 82.664)\" fillRule=\"nonzero\">\n          <polygon id=\"tower\" fill=\"#e6e6e6\" points=\"33.111,10.984 39.965,10.984 44.28,196.176 28.796,196.176\" />\n          <path\n            id=\"yaw\"\n            fill=\"rgba(0,0,0,0.25)\"\n            d=\"M40.3454756,23.2948956 L40.7262181,34.8445476 C38.8225058,35.0986079 35.7765661,35.0986079 32.349884,34.337123 L32.7306265,23.2955916 L40.3454756,23.2955916 L40.3454756,23.2948956 Z\"\n          />\n          <path\n            id=\"base\"\n            fill=\"#d0d6d7\"\n            transform=\"translate(0 42)\"\n            d=\"M26.3846868,150.591647 L46.5640371,150.591647 C48.8484919,150.591647 50.7522042,152.49536 50.7522042,154.779814 L50.7522042,158.967981 L22.0691415,158.967981 L22.0691415,154.779814 C22.0691415,152.49536 23.9728538,150.591647 26.2573086,150.591647 L26.3846868,150.591647 Z\"\n          />\n          <circle id=\"nacelle\" fill=\"#e6e6e6\" cx=\"36.54\" cy=\"12\" r=\"11.93\" />\n          <circle id=\"gearbox\" fill=\"none\" stroke=\"#d0d6d7\" strokeWidth=\"2.75\" cx=\"36.538\" cy=\"11.999\" r=\"5.8\" />\n        </g>\n        <g className={styles.blade} style={{ animation: windTurbineAnimation }}>\n          <use id=\"blade1\" href=\"#blade\" x=\"83.24\" y=\"0\" />\n          <use id=\"blade2\" href=\"#blade\" x=\"83.24\" y=\"0\" transform=\"rotate(120 94.663 94.663)\" />\n          <use id=\"blade3\" href=\"#blade\" x=\"83.24\" y=\"0\" transform=\"rotate(-120 94.663 94.663)\" />\n        </g>\n      </g>\n    </svg>\n  );\n};\n\nexport const windTurbineItem: CanvasElementItem = {\n  id: 'windTurbine',\n  name: 'Wind Turbine',\n  description: 'Spinny spinny',\n\n  display: WindTurbineDisplay,\n\n  defaultSize: {\n    width: 100,\n    height: 155,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    background: {\n      color: {\n        fixed: 'transparent',\n      },\n    },\n    placement: {\n      width: options?.placement?.width ?? 100,\n      height: options?.placement?.height ?? 155,\n      top: options?.placement?.top,\n      left: options?.placement?.left,\n    },\n  }),\n\n  // Called when data changes\n  prepareData: (ctx: DimensionContext, cfg: WindTurbineConfig) => {\n    const data: WindTurbineData = {\n      rpm: cfg?.rpm ? ctx.getScalar(cfg.rpm).value() : 0,\n    };\n\n    return data;\n  },\n\n  registerOptionsUI: (builder) => {\n    const category = ['Wind Turbine'];\n    builder.addCustomEditor({\n      category,\n      id: 'rpm',\n      path: 'config.rpm',\n      name: 'RPM',\n      editor: ScalarDimensionEditor,\n    });\n  },\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  blade: css({\n    transformOrigin: '94.663px 94.663px',\n    transform: 'rotate(15deg)',\n    '@keyframes spin': {\n      from: {\n        transform: 'rotate(0deg)',\n      },\n      to: {\n        transform: 'rotate(360deg)',\n      },\n    },\n  }),\n});\n","import { Registry } from '@grafana/data';\n\nimport { CanvasElementItem, CanvasElementOptions } from './element';\nimport { buttonItem } from './elements/button';\nimport { droneFrontItem } from './elements/droneFront';\nimport { droneSideItem } from './elements/droneSide';\nimport { droneTopItem } from './elements/droneTop';\nimport { ellipseItem } from './elements/ellipse';\nimport { iconItem } from './elements/icon';\nimport { metricValueItem } from './elements/metricValue';\nimport { rectangleItem } from './elements/rectangle';\nimport { serverItem } from './elements/server/server';\nimport { textItem } from './elements/text';\nimport { windTurbineItem } from './elements/windTurbine';\n\nexport const DEFAULT_CANVAS_ELEMENT_CONFIG: CanvasElementOptions = {\n  ...metricValueItem.getNewOptions(),\n  placement: { ...metricValueItem.getNewOptions().placement, ...metricValueItem.defaultSize },\n  type: metricValueItem.id,\n  name: `Element 1`,\n};\n\nexport const defaultElementItems = [\n  metricValueItem, // default for now\n  textItem,\n  ellipseItem,\n  rectangleItem,\n  iconItem,\n  serverItem,\n];\n\nexport const advancedElementItems = [buttonItem, windTurbineItem, droneTopItem, droneFrontItem, droneSideItem];\n\nexport const canvasElementRegistry = new Registry<CanvasElementItem>(() => [\n  ...defaultElementItems,\n  ...advancedElementItems,\n]);\n","import { CanvasConnection } from '../../../features/canvas';\nimport { ElementState } from '../../../features/canvas/runtime/element';\n\nexport enum LayerActionID {\n  Delete = 'delete',\n  Duplicate = 'duplicate',\n  MoveTop = 'move-top',\n  MoveBottom = 'move-bottom',\n}\n\nexport interface DragNode {\n  key: number;\n  dataRef: ElementState;\n}\n\nexport interface DropNode extends DragNode {\n  pos: string;\n}\n\nexport enum InlineEditTabs {\n  ElementManagement = 'element-management',\n  SelectedElement = 'selected-element',\n  SelectedConnection = 'selected-connection',\n}\n\nexport type AnchorPoint = {\n  x: number;\n  y: number;\n};\n\nexport interface CanvasTooltipPayload {\n  anchorPoint: AnchorPoint | undefined;\n  element: ElementState | undefined;\n  isOpen?: boolean;\n}\n\nexport interface ConnectionState {\n  index: number; // array index from the source\n  source: ElementState;\n  target: ElementState;\n  info: CanvasConnection;\n}\n","import { cloneDeep } from 'lodash';\nimport React from 'react';\n\nimport { canvasElementRegistry, CanvasFrameOptions } from 'app/features/canvas';\nimport { notFoundItem } from 'app/features/canvas/elements/notFound';\nimport { DimensionContext } from 'app/features/dimensions';\nimport { LayerActionID } from 'app/plugins/panel/canvas/types';\n\nimport { updateConnectionsForSource } from '../../../plugins/panel/canvas/utils';\nimport { CanvasElementItem } from '../element';\nimport { HorizontalConstraint, Placement, VerticalConstraint } from '../types';\n\nimport { ElementState } from './element';\nimport { RootElement } from './root';\nimport { Scene } from './scene';\n\nconst DEFAULT_OFFSET = 10;\nconst HORIZONTAL_OFFSET = 50;\n\nexport const frameItemDummy: CanvasElementItem = {\n  id: 'frame',\n  name: 'Frame',\n  description: 'Frame',\n\n  getNewOptions: () => ({\n    config: {},\n  }),\n\n  // eslint-disable-next-line react/display-name\n  display: () => {\n    return <div>FRAME!</div>;\n  },\n};\n\nexport class FrameState extends ElementState {\n  elements: ElementState[] = [];\n  scene: Scene;\n\n  constructor(\n    public options: CanvasFrameOptions,\n    scene: Scene,\n    public parent?: FrameState\n  ) {\n    super(frameItemDummy, options, parent);\n\n    this.scene = scene;\n\n    // mutate options object\n    let { elements } = this.options;\n    if (!elements) {\n      this.options.elements = elements = [];\n    }\n\n    for (const c of elements) {\n      if (c.type === 'frame') {\n        this.elements.push(new FrameState(c as CanvasFrameOptions, scene, this));\n      } else {\n        const item = canvasElementRegistry.getIfExists(c.type) ?? notFoundItem;\n        this.elements.push(new ElementState(item, c, this));\n      }\n    }\n  }\n\n  isRoot(): this is RootElement {\n    return false;\n  }\n\n  updateData(ctx: DimensionContext) {\n    super.updateData(ctx);\n    for (const elem of this.elements) {\n      elem.updateData(ctx);\n    }\n  }\n\n  // used in the layer editor\n  reorder(startIndex: number, endIndex: number) {\n    const result = Array.from(this.elements);\n    const [removed] = result.splice(startIndex, 1);\n    result.splice(endIndex, 0, removed);\n    this.elements = result;\n\n    this.reinitializeMoveable();\n  }\n\n  // used for tree view\n  reorderTree(src: ElementState, dest: ElementState, firstPosition = false) {\n    const result = Array.from(this.elements);\n    const srcIndex = this.elements.indexOf(src);\n    const destIndex = firstPosition ? this.elements.length - 1 : this.elements.indexOf(dest);\n\n    const [removed] = result.splice(srcIndex, 1);\n    result.splice(destIndex, 0, removed);\n    this.elements = result;\n\n    this.reinitializeMoveable();\n  }\n\n  doMove(child: ElementState, action: LayerActionID) {\n    const vals = this.elements.filter((v) => v !== child);\n    if (action === LayerActionID.MoveBottom) {\n      vals.unshift(child);\n    } else {\n      vals.push(child);\n    }\n    this.elements = vals;\n    this.scene.save();\n    this.reinitializeMoveable();\n  }\n\n  reinitializeMoveable() {\n    // Need to first clear current selection and then re-init moveable with slight delay\n    this.scene.clearCurrentSelection();\n    setTimeout(() => this.scene.initMoveable(true, this.scene.isEditingEnabled));\n  }\n\n  // ??? or should this be on the element directly?\n  // are actions scoped to layers?\n  doAction = (action: LayerActionID, element: ElementState, updateName = true, shiftItemsOnDuplicate = true) => {\n    switch (action) {\n      case LayerActionID.Delete:\n        this.elements = this.elements.filter((e) => e !== element);\n        updateConnectionsForSource(element, this.scene);\n        this.scene.byName.delete(element.options.name);\n        this.scene.save();\n        this.reinitializeMoveable();\n        break;\n      case LayerActionID.Duplicate:\n        if (element.item.id === 'frame') {\n          console.log('Can not duplicate frames (yet)', action, element);\n          return;\n        }\n        const opts = cloneDeep(element.options);\n\n        if (shiftItemsOnDuplicate) {\n          const { constraint, placement: oldPlacement } = element.options;\n          const { vertical, horizontal } = constraint ?? {};\n          const placement: Placement = { ...oldPlacement } ?? {};\n\n          switch (vertical) {\n            case VerticalConstraint.Top:\n              if (placement.top == null) {\n                placement.top = 25;\n              } else {\n                placement.top += DEFAULT_OFFSET;\n              }\n              break;\n            case VerticalConstraint.Bottom:\n              if (placement.bottom == null) {\n                placement.bottom = 100;\n              } else {\n                placement.bottom -= DEFAULT_OFFSET;\n              }\n              break;\n            case VerticalConstraint.TopBottom:\n              if (placement.top == null) {\n                placement.top = 25;\n              } else {\n                placement.top += DEFAULT_OFFSET;\n              }\n\n              if (placement.bottom == null) {\n                placement.bottom = 100;\n              } else {\n                placement.bottom -= DEFAULT_OFFSET;\n              }\n              break;\n            case VerticalConstraint.Center:\n              if (placement.top != null) {\n                placement.top -= DEFAULT_OFFSET;\n              }\n              break;\n          }\n\n          switch (horizontal) {\n            case HorizontalConstraint.Left:\n              if (placement.left == null) {\n                placement.left = HORIZONTAL_OFFSET;\n              } else {\n                placement.left += DEFAULT_OFFSET;\n              }\n              break;\n            case HorizontalConstraint.Right:\n              if (placement.right == null) {\n                placement.right = HORIZONTAL_OFFSET;\n              } else {\n                placement.right -= DEFAULT_OFFSET;\n              }\n              break;\n            case HorizontalConstraint.LeftRight:\n              if (placement.left == null) {\n                placement.left = HORIZONTAL_OFFSET;\n              } else {\n                placement.left += DEFAULT_OFFSET;\n              }\n\n              if (placement.right == null) {\n                placement.right = HORIZONTAL_OFFSET;\n              } else {\n                placement.right -= DEFAULT_OFFSET;\n              }\n              break;\n            case HorizontalConstraint.Center:\n              if (placement.left != null) {\n                placement.left -= DEFAULT_OFFSET;\n              }\n              break;\n          }\n\n          opts.placement = placement;\n        }\n\n        // Clear connections on duplicate\n        opts.connections = undefined;\n\n        const copy = new ElementState(element.item, opts, this);\n        copy.updateData(this.scene.context);\n        if (updateName) {\n          copy.options.name = this.scene.getNextElementName();\n        }\n        this.elements.push(copy);\n        this.scene.byName.set(copy.options.name, copy);\n\n        // Update scene byName map for original element (to avoid stale references (e.g. for connections))\n        this.scene.byName.set(element.options.name, element);\n\n        this.scene.save();\n        this.reinitializeMoveable();\n\n        setTimeout(() => {\n          this.scene.targetsToSelect.add(copy.div!);\n        });\n        break;\n      case LayerActionID.MoveTop:\n      case LayerActionID.MoveBottom:\n        element.parent?.doMove(element, action);\n        break;\n\n      default:\n        console.log('DO action', action, element);\n        return;\n    }\n  };\n\n  render() {\n    return (\n      <div key={this.UID} ref={this.initElement}>\n        {this.elements.map((v) => v.render())}\n      </div>\n    );\n  }\n\n  /** Recursively visit all nodes */\n  visit(visitor: (v: ElementState) => void) {\n    super.visit(visitor);\n    for (const e of this.elements) {\n      visitor(e);\n    }\n  }\n\n  getSaveModel() {\n    return {\n      ...this.options,\n      elements: this.elements.map((v) => v.getSaveModel()),\n    };\n  }\n}\n","/*\nCopyright (c) 2019 Daybrush\nname: framework-utils\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/framework-utils.git\nversion: 1.1.0\n*/\nfunction prefixNames(prefix) {\n  var classNames = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    classNames[_i - 1] = arguments[_i];\n  }\n\n  return classNames.map(function (className) {\n    return className.split(\" \").map(function (name) {\n      return name ? \"\" + prefix + name : \"\";\n    }).join(\" \");\n  }).join(\" \");\n}\nfunction prefixCSS(prefix, css) {\n  return css.replace(/([^}{]*){/gm, function (_, selector) {\n    return selector.replace(/\\.([^{,\\s\\d.]+)/g, \".\" + prefix + \"$1\") + \"{\";\n  });\n}\n/* react */\n\nfunction ref(target, name) {\n  return function (e) {\n    e && (target[name] = e);\n  };\n}\nfunction refs(target, name, i) {\n  return function (e) {\n    e && (target[name][i] = e);\n  };\n}\n/* Class Decorator */\n\nfunction Properties(properties, action) {\n  return function (component) {\n    var prototype = component.prototype;\n    properties.forEach(function (property) {\n      action(prototype, property);\n    });\n  };\n}\n/* Property Decorator */\n\nfunction withMethods(methods, duplicate) {\n  if (duplicate === void 0) {\n    duplicate = {};\n  }\n\n  return function (prototype, propertyName) {\n    methods.forEach(function (name) {\n      var methodName = duplicate[name] || name;\n\n      if (methodName in prototype) {\n        return;\n      }\n\n      prototype[methodName] = function () {\n        var _a;\n\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        var result = (_a = this[propertyName])[name].apply(_a, args);\n\n        if (result === this[propertyName]) {\n          return this;\n        } else {\n          return result;\n        }\n      };\n    });\n  };\n}\n\nexport { Properties, prefixCSS, prefixNames, ref, refs, withMethods };\n//# sourceMappingURL=utils.esm.js.map\n","/*\nCopyright (c) 2019-present NAVER Corp.\nname: @egjs/list-differ\nlicense: MIT\nauthor: NAVER Corp.\nrepository: https://github.com/naver/egjs-list-differ\nversion: 1.0.0\n*/\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar PolyMap =\n/*#__PURE__*/\nfunction () {\n  function PolyMap() {\n    this.keys = [];\n    this.values = [];\n  }\n\n  var __proto = PolyMap.prototype;\n\n  __proto.get = function (key) {\n    return this.values[this.keys.indexOf(key)];\n  };\n\n  __proto.set = function (key, value) {\n    var keys = this.keys;\n    var values = this.values;\n    var prevIndex = keys.indexOf(key);\n    var index = prevIndex === -1 ? keys.length : prevIndex;\n    keys[index] = key;\n    values[index] = value;\n  };\n\n  return PolyMap;\n}();\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar HashMap =\n/*#__PURE__*/\nfunction () {\n  function HashMap() {\n    this.object = {};\n  }\n\n  var __proto = HashMap.prototype;\n\n  __proto.get = function (key) {\n    return this.object[key];\n  };\n\n  __proto.set = function (key, value) {\n    this.object[key] = value;\n  };\n\n  return HashMap;\n}();\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar SUPPORT_MAP = typeof Map === \"function\";\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar Link =\n/*#__PURE__*/\nfunction () {\n  function Link() {}\n\n  var __proto = Link.prototype;\n\n  __proto.connect = function (prevLink, nextLink) {\n    this.prev = prevLink;\n    this.next = nextLink;\n    prevLink && (prevLink.next = this);\n    nextLink && (nextLink.prev = this);\n  };\n\n  __proto.disconnect = function () {\n    // In double linked list, diconnect the interconnected relationship.\n    var prevLink = this.prev;\n    var nextLink = this.next;\n    prevLink && (prevLink.next = nextLink);\n    nextLink && (nextLink.prev = prevLink);\n  };\n\n  __proto.getIndex = function () {\n    var link = this;\n    var index = -1;\n\n    while (link) {\n      link = link.prev;\n      ++index;\n    }\n\n    return index;\n  };\n\n  return Link;\n}();\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\n\nfunction orderChanged(changed, fixed) {\n  // It is roughly in the order of these examples.\n  // 4, 6, 0, 2, 1, 3, 5, 7\n  var fromLinks = []; // 0, 1, 2, 3, 4, 5, 6, 7\n\n  var toLinks = [];\n  changed.forEach(function (_a) {\n    var from = _a[0],\n        to = _a[1];\n    var link = new Link();\n    fromLinks[from] = link;\n    toLinks[to] = link;\n  }); // `fromLinks` are connected to each other by double linked list.\n\n  fromLinks.forEach(function (link, i) {\n    link.connect(fromLinks[i - 1]);\n  });\n  return changed.filter(function (_, i) {\n    return !fixed[i];\n  }).map(function (_a, i) {\n    var from = _a[0],\n        to = _a[1];\n\n    if (from === to) {\n      return [0, 0];\n    }\n\n    var fromLink = fromLinks[from];\n    var toLink = toLinks[to - 1];\n    var fromIndex = fromLink.getIndex(); // Disconnect the link connected to `fromLink`.\n\n    fromLink.disconnect(); // Connect `fromLink` to the right of `toLink`.\n\n    if (!toLink) {\n      fromLink.connect(undefined, fromLinks[0]);\n    } else {\n      fromLink.connect(toLink, toLink.next);\n    }\n\n    var toIndex = fromLink.getIndex();\n    return [fromIndex, toIndex];\n  });\n}\n\nvar Result =\n/*#__PURE__*/\nfunction () {\n  function Result(prevList, list, added, removed, changed, maintained, changedBeforeAdded, fixed) {\n    this.prevList = prevList;\n    this.list = list;\n    this.added = added;\n    this.removed = removed;\n    this.changed = changed;\n    this.maintained = maintained;\n    this.changedBeforeAdded = changedBeforeAdded;\n    this.fixed = fixed;\n  }\n\n  var __proto = Result.prototype;\n  Object.defineProperty(__proto, \"ordered\", {\n    get: function () {\n      if (!this.cacheOrdered) {\n        this.caculateOrdered();\n      }\n\n      return this.cacheOrdered;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(__proto, \"pureChanged\", {\n    get: function () {\n      if (!this.cachePureChanged) {\n        this.caculateOrdered();\n      }\n\n      return this.cachePureChanged;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  __proto.caculateOrdered = function () {\n    var ordered = orderChanged(this.changedBeforeAdded, this.fixed);\n    var changed = this.changed;\n    var pureChanged = [];\n    this.cacheOrdered = ordered.filter(function (_a, i) {\n      var from = _a[0],\n          to = _a[1];\n      var _b = changed[i],\n          fromBefore = _b[0],\n          toBefore = _b[1];\n\n      if (from !== to) {\n        pureChanged.push([fromBefore, toBefore]);\n        return true;\n      }\n    });\n    this.cachePureChanged = pureChanged;\n  };\n\n  return Result;\n}();\n\n/**\n *\n * @memberof eg.ListDiffer\n * @static\n * @function\n * @param - Previous List <ko> 이전 목록 </ko>\n * @param - List to Update <ko> 업데이트 할 목록 </ko>\n * @param - This callback function returns the key of the item. <ko> 아이템의 키를 반환하는 콜백 함수입니다.</ko>\n * @return - Returns the diff between `prevList` and `list` <ko> `prevList`와 `list`의 다른 점을 반환한다.</ko>\n * @example\n * import { diff } from \"@egjs/list-differ\";\n * // script => eg.ListDiffer.diff\n * const result = diff([0, 1, 2, 3, 4, 5], [7, 8, 0, 4, 3, 6, 2, 1], e => e);\n * // List before update\n * // [1, 2, 3, 4, 5]\n * console.log(result.prevList);\n * // Updated list\n * // [4, 3, 6, 2, 1]\n * console.log(result.list);\n * // Index array of values added to `list`\n * // [0, 1, 5]\n * console.log(result.added);\n * // Index array of values removed in `prevList`\n * // [5]\n * console.log(result.removed);\n * // An array of index pairs of `prevList` and `list` with different indexes from `prevList` and `list`\n * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n * console.log(result.changed);\n * // The subset of `changed` and an array of index pairs that moved data directly. Indicate an array of absolute index pairs of `ordered`.(Formatted by: Array<[index of prevList, index of list]>)\n * // [[4, 3], [3, 4], [2, 6]]\n * console.log(result.pureChanged);\n * // An array of index pairs to be `ordered` that can synchronize `list` before adding data. (Formatted by: Array<[prevIndex, nextIndex]>)\n * // [[4, 1], [4, 2], [4, 3]]\n * console.log(result.ordered);\n * // An array of index pairs of `prevList` and `list` that have not been added/removed so data is preserved\n * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n * console.log(result.maintained);\n */\n\nfunction diff(prevList, list, findKeyCallback) {\n  var mapClass = SUPPORT_MAP ? Map : findKeyCallback ? HashMap : PolyMap;\n\n  var callback = findKeyCallback || function (e) {\n    return e;\n  };\n\n  var added = [];\n  var removed = [];\n  var maintained = [];\n  var prevKeys = prevList.map(callback);\n  var keys = list.map(callback);\n  var prevKeyMap = new mapClass();\n  var keyMap = new mapClass();\n  var changedBeforeAdded = [];\n  var fixed = [];\n  var removedMap = {};\n  var changed = [];\n  var addedCount = 0;\n  var removedCount = 0; // Add prevKeys and keys to the hashmap.\n\n  prevKeys.forEach(function (key, prevListIndex) {\n    prevKeyMap.set(key, prevListIndex);\n  });\n  keys.forEach(function (key, listIndex) {\n    keyMap.set(key, listIndex);\n  }); // Compare `prevKeys` and `keys` and add them to `removed` if they are not in `keys`.\n\n  prevKeys.forEach(function (key, prevListIndex) {\n    var listIndex = keyMap.get(key); // In prevList, but not in list, it is removed.\n\n    if (typeof listIndex === \"undefined\") {\n      ++removedCount;\n      removed.push(prevListIndex);\n    } else {\n      removedMap[listIndex] = removedCount;\n    }\n  }); // Compare `prevKeys` and `keys` and add them to `added` if they are not in `prevKeys`.\n\n  keys.forEach(function (key, listIndex) {\n    var prevListIndex = prevKeyMap.get(key); // In list, but not in prevList, it is added.\n\n    if (typeof prevListIndex === \"undefined\") {\n      added.push(listIndex);\n      ++addedCount;\n    } else {\n      maintained.push([prevListIndex, listIndex]);\n      removedCount = removedMap[listIndex] || 0;\n      changedBeforeAdded.push([prevListIndex - removedCount, listIndex - addedCount]);\n      fixed.push(listIndex === prevListIndex);\n\n      if (prevListIndex !== listIndex) {\n        changed.push([prevListIndex, listIndex]);\n      }\n    }\n  }); // Sort by ascending order of 'to(list's index).\n\n  removed.reverse();\n  return new Result(prevList, list, added, removed, changed, maintained, changedBeforeAdded, fixed);\n}\n\n/**\n * A module that checks diff when values are added, removed, or changed in an array.\n * @ko 배열 또는 오브젝트에서 값이 추가되거나 삭제되거나 순서가 변경사항을 체크하는 모듈입니다.\n * @memberof eg\n */\n\nvar ListDiffer =\n/*#__PURE__*/\nfunction () {\n  /**\n   * @param - Initializing Data Array. <ko> 초기 설정할 데이터 배열.</ko>\n   * @param - This callback function returns the key of the item. <ko> 아이템의 키를 반환하는 콜백 함수입니다.</ko>\n   * @example\n   * import ListDiffer from \"@egjs/list-differ\";\n   * // script => eg.ListDiffer\n   * const differ = new ListDiffer([0, 1, 2, 3, 4, 5], e => e);\n   * const result = differ.update([7, 8, 0, 4, 3, 6, 2, 1]);\n   * // List before update\n   * // [1, 2, 3, 4, 5]\n   * console.log(result.prevList);\n   * // Updated list\n   * // [4, 3, 6, 2, 1]\n   * console.log(result.list);\n   * // Index array of values added to `list`.\n   * // [0, 1, 5]\n   * console.log(result.added);\n   * // Index array of values removed in `prevList`.\n   * // [5]\n   * console.log(result.removed);\n   * // An array of index pairs of `prevList` and `list` with different indexes from `prevList` and `list`.\n   * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n   * console.log(result.changed);\n   * // The subset of `changed` and an array of index pairs that moved data directly. Indicate an array of absolute index pairs of `ordered`.(Formatted by: Array<[index of prevList, index of list]>)\n   * // [[4, 3], [3, 4], [2, 6]]\n   * console.log(result.pureChanged);\n   * // An array of index pairs to be `ordered` that can synchronize `list` before adding data. (Formatted by: Array<[prevIndex, nextIndex]>)\n   * // [[4, 1], [4, 2], [4, 3]]\n   * console.log(result.ordered);\n   * // An array of index pairs of `prevList` and `list` that have not been added/removed so data is preserved.\n   * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n   * console.log(result.maintained);\n   */\n  function ListDiffer(list, findKeyCallback) {\n    if (list === void 0) {\n      list = [];\n    }\n\n    this.findKeyCallback = findKeyCallback;\n    this.list = [].slice.call(list);\n  }\n  /**\n   * Update list.\n   * @ko 리스트를 업데이트를 합니다.\n   * @param - List to update <ko> 업데이트할 리스트 </ko>\n   * @return - Returns the results of an update from `prevList` to `list`.<ko> `prevList`에서 `list`로 업데이트한 결과를 반환한다. </ko>\n   */\n\n\n  var __proto = ListDiffer.prototype;\n\n  __proto.update = function (list) {\n    var newData = [].slice.call(list);\n    var result = diff(this.list, newData, this.findKeyCallback);\n    this.list = newData;\n    return result;\n  };\n\n  return ListDiffer;\n}();\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\n\nexport default ListDiffer;\nexport { diff };\n//# sourceMappingURL=list-differ.esm.js.map\n","/*\nCopyright (c) 2018 Daybrush\n@name: @daybrush/utils\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/utils\n@version 1.13.0\n*/\n/**\n* @namespace\n* @name Consts\n*/\n/**\n* get string \"rgb\"\n* @memberof Color\n* @example\nimport {RGB} from \"@daybrush/utils\";\n\nconsole.log(RGB); // \"rgb\"\n*/\nvar RGB = \"rgb\";\n/**\n* get string \"rgba\"\n* @memberof Color\n* @example\nimport {RGBA} from \"@daybrush/utils\";\n\nconsole.log(RGBA); // \"rgba\"\n*/\nvar RGBA = \"rgba\";\n/**\n* get string \"hsl\"\n* @memberof Color\n* @example\nimport {HSL} from \"@daybrush/utils\";\n\nconsole.log(HSL); // \"hsl\"\n*/\nvar HSL = \"hsl\";\n/**\n* get string \"hsla\"\n* @memberof Color\n* @example\nimport {HSLA} from \"@daybrush/utils\";\n\nconsole.log(HSLA); // \"hsla\"\n*/\nvar HSLA = \"hsla\";\n/**\n* gets an array of color models.\n* @memberof Color\n* @example\nimport {COLOR_MODELS} from \"@daybrush/utils\";\n\nconsole.log(COLOR_MODELS); // [\"rgb\", \"rgba\", \"hsl\", \"hsla\"];\n*/\nvar COLOR_MODELS = [RGB, RGBA, HSL, HSLA];\n/**\n* get string \"function\"\n* @memberof Consts\n* @example\nimport {FUNCTION} from \"@daybrush/utils\";\n\nconsole.log(FUNCTION); // \"function\"\n*/\nvar FUNCTION = \"function\";\n/**\n* get string \"property\"\n* @memberof Consts\n* @example\nimport {PROPERTY} from \"@daybrush/utils\";\n\nconsole.log(PROPERTY); // \"property\"\n*/\nvar PROPERTY = \"property\";\n/**\n* get string \"array\"\n* @memberof Consts\n* @example\nimport {ARRAY} from \"@daybrush/utils\";\n\nconsole.log(ARRAY); // \"array\"\n*/\nvar ARRAY = \"array\";\n/**\n* get string \"object\"\n* @memberof Consts\n* @example\nimport {OBJECT} from \"@daybrush/utils\";\n\nconsole.log(OBJECT); // \"object\"\n*/\nvar OBJECT = \"object\";\n/**\n* get string \"string\"\n* @memberof Consts\n* @example\nimport {STRING} from \"@daybrush/utils\";\n\nconsole.log(STRING); // \"string\"\n*/\nvar STRING = \"string\";\n/**\n* get string \"number\"\n* @memberof Consts\n* @example\nimport {NUMBER} from \"@daybrush/utils\";\n\nconsole.log(NUMBER); // \"number\"\n*/\nvar NUMBER = \"number\";\n/**\n* get string \"undefined\"\n* @memberof Consts\n* @example\nimport {UNDEFINED} from \"@daybrush/utils\";\n\nconsole.log(UNDEFINED); // \"undefined\"\n*/\nvar UNDEFINED = \"undefined\";\n/**\n* Check whether the environment is window or node.js.\n* @memberof Consts\n* @example\nimport {IS_WINDOW} from \"@daybrush/utils\";\n\nconsole.log(IS_WINDOW); // false in node.js\nconsole.log(IS_WINDOW); // true in browser\n*/\nvar IS_WINDOW = typeof window !== UNDEFINED;\n/**\n* Check whether the environment is window or node.js.\n* @memberof Consts\n* @name document\n* @example\nimport {IS_WINDOW} from \"@daybrush/utils\";\n\nconsole.log(IS_WINDOW); // false in node.js\nconsole.log(IS_WINDOW); // true in browser\n*/\nvar doc = typeof document !== UNDEFINED && document; // FIXME: this type maybe false\nvar prefixes = [\"webkit\", \"ms\", \"moz\", \"o\"];\n/**\n * @namespace CrossBrowser\n */\n/**\n* Get a CSS property with a vendor prefix that supports cross browser.\n* @function\n* @param {string} property - A CSS property\n* @return {string} CSS property with cross-browser vendor prefix\n* @memberof CrossBrowser\n* @example\nimport {getCrossBrowserProperty} from \"@daybrush/utils\";\n\nconsole.log(getCrossBrowserProperty(\"transform\")); // \"transform\", \"-ms-transform\", \"-webkit-transform\"\nconsole.log(getCrossBrowserProperty(\"filter\")); // \"filter\", \"-webkit-filter\"\n*/\nvar getCrossBrowserProperty = /*#__PURE__*/function (property) {\n  if (!doc) {\n    return \"\";\n  }\n  var styles = (doc.body || doc.documentElement).style;\n  var length = prefixes.length;\n  if (typeof styles[property] !== UNDEFINED) {\n    return property;\n  }\n  for (var i = 0; i < length; ++i) {\n    var name = \"-\" + prefixes[i] + \"-\" + property;\n    if (typeof styles[name] !== UNDEFINED) {\n      return name;\n    }\n  }\n  return \"\";\n};\n/**\n* get string \"transfrom\" with the vendor prefix.\n* @memberof CrossBrowser\n* @example\nimport {TRANSFORM} from \"@daybrush/utils\";\n\nconsole.log(TRANSFORM); // \"transform\", \"-ms-transform\", \"-webkit-transform\"\n*/\nvar TRANSFORM = /*#__PURE__*/getCrossBrowserProperty(\"transform\");\n/**\n* get string \"filter\" with the vendor prefix.\n* @memberof CrossBrowser\n* @example\nimport {FILTER} from \"@daybrush/utils\";\n\nconsole.log(FILTER); // \"filter\", \"-ms-filter\", \"-webkit-filter\"\n*/\nvar FILTER = /*#__PURE__*/getCrossBrowserProperty(\"filter\");\n/**\n* get string \"animation\" with the vendor prefix.\n* @memberof CrossBrowser\n* @example\nimport {ANIMATION} from \"@daybrush/utils\";\n\nconsole.log(ANIMATION); // \"animation\", \"-ms-animation\", \"-webkit-animation\"\n*/\nvar ANIMATION = /*#__PURE__*/getCrossBrowserProperty(\"animation\");\n/**\n* get string \"keyframes\" with the vendor prefix.\n* @memberof CrossBrowser\n* @example\nimport {KEYFRAMES} from \"@daybrush/utils\";\n\nconsole.log(KEYFRAMES); // \"keyframes\", \"-ms-keyframes\", \"-webkit-keyframes\"\n*/\nvar KEYFRAMES = /*#__PURE__*/ANIMATION.replace(\"animation\", \"keyframes\");\nvar OPEN_CLOSED_CHARACTERS = [{\n  open: \"(\",\n  close: \")\"\n}, {\n  open: \"\\\"\",\n  close: \"\\\"\"\n}, {\n  open: \"'\",\n  close: \"'\"\n}, {\n  open: \"\\\\\\\"\",\n  close: \"\\\\\\\"\"\n}, {\n  open: \"\\\\'\",\n  close: \"\\\\'\"\n}];\nvar TINY_NUM = 0.0000001;\nvar REVERSE_TINY_NUM = 1 / TINY_NUM;\nvar DEFAULT_UNIT_PRESETS = {\n  \"cm\": function (pos) {\n    return pos * 96 / 2.54;\n  },\n  \"mm\": function (pos) {\n    return pos * 96 / 254;\n  },\n  \"in\": function (pos) {\n    return pos * 96;\n  },\n  \"pt\": function (pos) {\n    return pos * 96 / 72;\n  },\n  \"pc\": function (pos) {\n    return pos * 96 / 6;\n  },\n  \"%\": function (pos, size) {\n    return pos * size / 100;\n  },\n  \"vw\": function (pos, size) {\n    if (size === void 0) {\n      size = window.innerWidth;\n    }\n    return pos / 100 * size;\n  },\n  \"vh\": function (pos, size) {\n    if (size === void 0) {\n      size = window.innerHeight;\n    }\n    return pos / 100 * size;\n  },\n  \"vmax\": function (pos, size) {\n    if (size === void 0) {\n      size = Math.max(window.innerWidth, window.innerHeight);\n    }\n    return pos / 100 * size;\n  },\n  \"vmin\": function (pos, size) {\n    if (size === void 0) {\n      size = Math.min(window.innerWidth, window.innerHeight);\n    }\n    return pos / 100 * size;\n  }\n};\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n  return r;\n}\n\n/**\n* @namespace\n* @name Utils\n*/\n/**\n * Returns the inner product of two numbers(`a1`, `a2`) by two criteria(`b1`, `b2`).\n * @memberof Utils\n * @param - The first number\n * @param - The second number\n * @param - The first number to base on the inner product\n * @param - The second number to base on the inner product\n * @return - Returns the inner product\nimport { dot } from \"@daybrush/utils\";\n\nconsole.log(dot(0, 15, 2, 3)); // 6\nconsole.log(dot(5, 15, 2, 3)); // 9\nconsole.log(dot(5, 15, 1, 1)); // 10\n */\nfunction dot(a1, a2, b1, b2) {\n  return (a1 * b2 + a2 * b1) / (b1 + b2);\n}\n/**\n* Check the type that the value is undefined.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {boolean} true if the type is correct, false otherwise\n* @example\nimport {isUndefined} from \"@daybrush/utils\";\n\nconsole.log(isUndefined(undefined)); // true\nconsole.log(isUndefined(\"\")); // false\nconsole.log(isUndefined(1)); // false\nconsole.log(isUndefined(null)); // false\n*/\nfunction isUndefined(value) {\n  return typeof value === UNDEFINED;\n}\n/**\n* Check the type that the value is object.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isObject} from \"@daybrush/utils\";\n\nconsole.log(isObject({})); // true\nconsole.log(isObject(undefined)); // false\nconsole.log(isObject(\"\")); // false\nconsole.log(isObject(null)); // false\n*/\nfunction isObject(value) {\n  return value && typeof value === OBJECT;\n}\n/**\n* Check the type that the value is isArray.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isArray} from \"@daybrush/utils\";\n\nconsole.log(isArray([])); // true\nconsole.log(isArray({})); // false\nconsole.log(isArray(undefined)); // false\nconsole.log(isArray(null)); // false\n*/\nfunction isArray(value) {\n  return Array.isArray(value);\n}\n/**\n* Check the type that the value is string.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isString} from \"@daybrush/utils\";\n\nconsole.log(isString(\"1234\")); // true\nconsole.log(isString(undefined)); // false\nconsole.log(isString(1)); // false\nconsole.log(isString(null)); // false\n*/\nfunction isString(value) {\n  return typeof value === STRING;\n}\nfunction isNumber(value) {\n  return typeof value === NUMBER;\n}\n/**\n* Check the type that the value is function.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isFunction} from \"@daybrush/utils\";\n\nconsole.log(isFunction(function a() {})); // true\nconsole.log(isFunction(() => {})); // true\nconsole.log(isFunction(\"1234\")); // false\nconsole.log(isFunction(1)); // false\nconsole.log(isFunction(null)); // false\n*/\nfunction isFunction(value) {\n  return typeof value === FUNCTION;\n}\nfunction isEqualSeparator(character, separator) {\n  var isCharacterSpace = character === \"\" || character == \" \";\n  var isSeparatorSpace = separator === \"\" || separator == \" \";\n  return isSeparatorSpace && isCharacterSpace || character === separator;\n}\nfunction findOpen(openCharacter, texts, index, length, openCloseCharacters) {\n  var isIgnore = findIgnore(openCharacter, texts, index);\n  if (!isIgnore) {\n    return findClose(openCharacter, texts, index + 1, length, openCloseCharacters);\n  }\n  return index;\n}\nfunction findIgnore(character, texts, index) {\n  if (!character.ignore) {\n    return null;\n  }\n  var otherText = texts.slice(Math.max(index - 3, 0), index + 3).join(\"\");\n  return new RegExp(character.ignore).exec(otherText);\n}\nfunction findClose(closeCharacter, texts, index, length, openCloseCharacters) {\n  var _loop_1 = function (i) {\n    var character = texts[i].trim();\n    if (character === closeCharacter.close && !findIgnore(closeCharacter, texts, i)) {\n      return {\n        value: i\n      };\n    }\n    var nextIndex = i;\n    // re open\n    var openCharacter = find(openCloseCharacters, function (_a) {\n      var open = _a.open;\n      return open === character;\n    });\n    if (openCharacter) {\n      nextIndex = findOpen(openCharacter, texts, i, length, openCloseCharacters);\n    }\n    if (nextIndex === -1) {\n      return out_i_1 = i, \"break\";\n    }\n    i = nextIndex;\n    out_i_1 = i;\n  };\n  var out_i_1;\n  for (var i = index; i < length; ++i) {\n    var state_1 = _loop_1(i);\n    i = out_i_1;\n    if (typeof state_1 === \"object\") return state_1.value;\n    if (state_1 === \"break\") break;\n  }\n  return -1;\n}\nfunction splitText(text, splitOptions) {\n  var _a = isString(splitOptions) ? {\n      separator: splitOptions\n    } : splitOptions,\n    _b = _a.separator,\n    separator = _b === void 0 ? \",\" : _b,\n    isSeparateFirst = _a.isSeparateFirst,\n    isSeparateOnlyOpenClose = _a.isSeparateOnlyOpenClose,\n    _c = _a.isSeparateOpenClose,\n    isSeparateOpenClose = _c === void 0 ? isSeparateOnlyOpenClose : _c,\n    _d = _a.openCloseCharacters,\n    openCloseCharacters = _d === void 0 ? OPEN_CLOSED_CHARACTERS : _d;\n  var openClosedText = openCloseCharacters.map(function (_a) {\n    var open = _a.open,\n      close = _a.close;\n    if (open === close) {\n      return open;\n    }\n    return open + \"|\" + close;\n  }).join(\"|\");\n  var regexText = \"(\\\\s*\" + separator + \"\\\\s*|\" + openClosedText + \"|\\\\s+)\";\n  var regex = new RegExp(regexText, \"g\");\n  var texts = text.split(regex).filter(function (chr) {\n    return chr && chr !== \"undefined\";\n  });\n  var length = texts.length;\n  var values = [];\n  var tempValues = [];\n  function resetTemp() {\n    if (tempValues.length) {\n      values.push(tempValues.join(\"\"));\n      tempValues = [];\n      return true;\n    }\n    return false;\n  }\n  var _loop_2 = function (i) {\n    var character = texts[i].trim();\n    var nextIndex = i;\n    var openCharacter = find(openCloseCharacters, function (_a) {\n      var open = _a.open;\n      return open === character;\n    });\n    var closeCharacter = find(openCloseCharacters, function (_a) {\n      var close = _a.close;\n      return close === character;\n    });\n    if (openCharacter) {\n      nextIndex = findOpen(openCharacter, texts, i, length, openCloseCharacters);\n      if (nextIndex !== -1 && isSeparateOpenClose) {\n        if (resetTemp() && isSeparateFirst) {\n          return out_i_2 = i, \"break\";\n        }\n        values.push(texts.slice(i, nextIndex + 1).join(\"\"));\n        i = nextIndex;\n        if (isSeparateFirst) {\n          return out_i_2 = i, \"break\";\n        }\n        return out_i_2 = i, \"continue\";\n      }\n    } else if (closeCharacter && !findIgnore(closeCharacter, texts, i)) {\n      var nextOpenCloseCharacters = __spreadArrays(openCloseCharacters);\n      nextOpenCloseCharacters.splice(openCloseCharacters.indexOf(closeCharacter), 1);\n      return {\n        value: splitText(text, {\n          separator: separator,\n          isSeparateFirst: isSeparateFirst,\n          isSeparateOnlyOpenClose: isSeparateOnlyOpenClose,\n          isSeparateOpenClose: isSeparateOpenClose,\n          openCloseCharacters: nextOpenCloseCharacters\n        })\n      };\n    } else if (isEqualSeparator(character, separator) && !isSeparateOnlyOpenClose) {\n      resetTemp();\n      if (isSeparateFirst) {\n        return out_i_2 = i, \"break\";\n      }\n      return out_i_2 = i, \"continue\";\n    }\n    if (nextIndex === -1) {\n      nextIndex = length - 1;\n    }\n    tempValues.push(texts.slice(i, nextIndex + 1).join(\"\"));\n    i = nextIndex;\n    out_i_2 = i;\n  };\n  var out_i_2;\n  for (var i = 0; i < length; ++i) {\n    var state_2 = _loop_2(i);\n    i = out_i_2;\n    if (typeof state_2 === \"object\") return state_2.value;\n    if (state_2 === \"break\") break;\n  }\n  if (tempValues.length) {\n    values.push(tempValues.join(\"\"));\n  }\n  return values;\n}\n/**\n* divide text by space.\n* @memberof Utils\n* @param {string} text - text to divide\n* @return {Array} divided texts\n* @example\nimport {spliceSpace} from \"@daybrush/utils\";\n\nconsole.log(splitSpace(\"a b c d e f g\"));\n// [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\"]\nconsole.log(splitSpace(\"'a,b' c 'd,e' f g\"));\n// [\"'a,b'\", \"c\", \"'d,e'\", \"f\", \"g\"]\n*/\nfunction splitSpace(text) {\n  // divide comma(space)\n  return splitText(text, \"\");\n}\n/**\n* divide text by comma.\n* @memberof Utils\n* @param {string} text - text to divide\n* @return {Array} divided texts\n* @example\nimport {splitComma} from \"@daybrush/utils\";\n\nconsole.log(splitComma(\"a,b,c,d,e,f,g\"));\n// [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\"]\nconsole.log(splitComma(\"'a,b',c,'d,e',f,g\"));\n// [\"'a,b'\", \"c\", \"'d,e'\", \"f\", \"g\"]\n*/\nfunction splitComma(text) {\n  // divide comma(,)\n  // \"[^\"]*\"|'[^']*'\n  return splitText(text, \",\");\n}\n/**\n* divide text by bracket \"(\", \")\".\n* @memberof Utils\n* @param {string} text - text to divide\n* @return {object} divided texts\n* @example\nimport {splitBracket} from \"@daybrush/utils\";\n\nconsole.log(splitBracket(\"a(1, 2)\"));\n// {prefix: \"a\", value: \"1, 2\", suffix: \"\"}\nconsole.log(splitBracket(\"a(1, 2)b\"));\n// {prefix: \"a\", value: \"1, 2\", suffix: \"b\"}\n*/\nfunction splitBracket(text) {\n  var matches = /([^(]*)\\(([\\s\\S]*)\\)([\\s\\S]*)/g.exec(text);\n  if (!matches || matches.length < 4) {\n    return {};\n  } else {\n    return {\n      prefix: matches[1],\n      value: matches[2],\n      suffix: matches[3]\n    };\n  }\n}\n/**\n* divide text by number and unit.\n* @memberof Utils\n* @param {string} text - text to divide\n* @return {} divided texts\n* @example\nimport {splitUnit} from \"@daybrush/utils\";\n\nconsole.log(splitUnit(\"10px\"));\n// {prefix: \"\", value: 10, unit: \"px\"}\nconsole.log(splitUnit(\"-10px\"));\n// {prefix: \"\", value: -10, unit: \"px\"}\nconsole.log(splitUnit(\"a10%\"));\n// {prefix: \"a\", value: 10, unit: \"%\"}\n*/\nfunction splitUnit(text) {\n  var matches = /^([^\\d|e|\\-|\\+]*)((?:\\d|\\.|-|e-|e\\+)+)(\\S*)$/g.exec(text);\n  if (!matches) {\n    return {\n      prefix: \"\",\n      unit: \"\",\n      value: NaN\n    };\n  }\n  var prefix = matches[1];\n  var value = matches[2];\n  var unit = matches[3];\n  return {\n    prefix: prefix,\n    unit: unit,\n    value: parseFloat(value)\n  };\n}\n/**\n* transform strings to camel-case\n* @memberof Utils\n* @param {String} text - string\n* @return {String} camel-case string\n* @example\nimport {camelize} from \"@daybrush/utils\";\n\nconsole.log(camelize(\"transform-origin\")); // transformOrigin\nconsole.log(camelize(\"abcd_efg\")); // abcdEfg\nconsole.log(camelize(\"abcd efg\")); // abcdEfg\n*/\nfunction camelize(str) {\n  return str.replace(/[\\s-_]+([^\\s-_])/g, function (all, letter) {\n    return letter.toUpperCase();\n  });\n}\n/**\n* transform a camelized string into a lowercased string.\n* @memberof Utils\n* @param {string} text - a camel-cased string\n* @param {string} [separator=\"-\"] - a separator\n* @return {string}  a lowercased string\n* @example\nimport {decamelize} from \"@daybrush/utils\";\n\nconsole.log(decamelize(\"transformOrigin\")); // transform-origin\nconsole.log(decamelize(\"abcdEfg\", \"_\")); // abcd_efg\n*/\nfunction decamelize(str, separator) {\n  if (separator === void 0) {\n    separator = \"-\";\n  }\n  return str.replace(/([a-z])([A-Z])/g, function (all, letter, letter2) {\n    return \"\" + letter + separator + letter2.toLowerCase();\n  });\n}\n/**\n* transforms something in an array into an array.\n* @memberof Utils\n* @param - Array form\n* @return an array\n* @example\nimport {toArray} from \"@daybrush/utils\";\n\nconst arr1 = toArray(document.querySelectorAll(\".a\")); // Element[]\nconst arr2 = toArray(document.querySelectorAll<HTMLElement>(\".a\")); // HTMLElement[]\n*/\nfunction toArray(value) {\n  return [].slice.call(value);\n}\n/**\n* Date.now() method\n* @memberof CrossBrowser\n* @return {number} milliseconds\n* @example\nimport {now} from \"@daybrush/utils\";\n\nconsole.log(now()); // 12121324241(milliseconds)\n*/\nfunction now() {\n  return Date.now ? Date.now() : new Date().getTime();\n}\n/**\n* Returns the index of the first element in the array that satisfies the provided testing function.\n* @function\n* @memberof CrossBrowser\n* @param - The array `findIndex` was called upon.\n* @param - A function to execute on each value in the array until the function returns true, indicating that the satisfying element was found.\n* @param - Returns defaultIndex if not found by the function.\n* @example\nimport { findIndex } from \"@daybrush/utils\";\n\nfindIndex([{a: 1}, {a: 2}, {a: 3}, {a: 4}], ({ a }) => a === 2); // 1\n*/\nfunction findIndex(arr, callback, defaultIndex) {\n  if (defaultIndex === void 0) {\n    defaultIndex = -1;\n  }\n  var length = arr.length;\n  for (var i = 0; i < length; ++i) {\n    if (callback(arr[i], i, arr)) {\n      return i;\n    }\n  }\n  return defaultIndex;\n}\n/**\n* Returns the reverse direction index of the first element in the array that satisfies the provided testing function.\n* @function\n* @memberof CrossBrowser\n* @param - The array `findLastIndex` was called upon.\n* @param - A function to execute on each value in the array until the function returns true, indicating that the satisfying element was found.\n* @param - Returns defaultIndex if not found by the function.\n* @example\nimport { findLastIndex } from \"@daybrush/utils\";\n\nfindLastIndex([{a: 1}, {a: 2}, {a: 3}, {a: 4}], ({ a }) => a === 2); // 1\n*/\nfunction findLastIndex(arr, callback, defaultIndex) {\n  if (defaultIndex === void 0) {\n    defaultIndex = -1;\n  }\n  var length = arr.length;\n  for (var i = length - 1; i >= 0; --i) {\n    if (callback(arr[i], i, arr)) {\n      return i;\n    }\n  }\n  return defaultIndex;\n}\n/**\n* Returns the value of the reverse direction element in the array that satisfies the provided testing function.\n* @function\n* @memberof CrossBrowser\n* @param - The array `findLast` was called upon.\n* @param - A function to execute on each value in the array,\n* @param - Returns defalutValue if not found by the function.\n* @example\nimport { find } from \"@daybrush/utils\";\n\nfind([{a: 1}, {a: 2}, {a: 3}, {a: 4}], ({ a }) => a === 2); // {a: 2}\n*/\nfunction findLast(arr, callback, defalutValue) {\n  var index = findLastIndex(arr, callback);\n  return index > -1 ? arr[index] : defalutValue;\n}\n/**\n* Returns the value of the first element in the array that satisfies the provided testing function.\n* @function\n* @memberof CrossBrowser\n* @param - The array `find` was called upon.\n* @param - A function to execute on each value in the array,\n* @param - Returns defalutValue if not found by the function.\n* @example\nimport { find } from \"@daybrush/utils\";\n\nfind([{a: 1}, {a: 2}, {a: 3}, {a: 4}], ({ a }) => a === 2); // {a: 2}\n*/\nfunction find(arr, callback, defalutValue) {\n  var index = findIndex(arr, callback);\n  return index > -1 ? arr[index] : defalutValue;\n}\n/**\n* window.requestAnimationFrame() method with cross browser.\n* @function\n* @memberof CrossBrowser\n* @param {FrameRequestCallback} callback - The function to call when it's time to update your animation for the next repaint.\n* @return {number} id\n* @example\nimport {requestAnimationFrame} from \"@daybrush/utils\";\n\nrequestAnimationFrame((timestamp) => {\n  console.log(timestamp);\n});\n*/\nvar requestAnimationFrame = /*#__PURE__*/function () {\n  var firstTime = now();\n  var raf = IS_WINDOW && (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame);\n  return raf ? raf.bind(window) : function (callback) {\n    var currTime = now();\n    var id = setTimeout(function () {\n      callback(currTime - firstTime);\n    }, 1000 / 60);\n    return id;\n  };\n}();\n/**\n* window.cancelAnimationFrame() method with cross browser.\n* @function\n* @memberof CrossBrowser\n* @param {number} handle - the id obtained through requestAnimationFrame method\n* @return {void}\n* @example\nimport { requestAnimationFrame, cancelAnimationFrame } from \"@daybrush/utils\";\n\nconst id = requestAnimationFrame((timestamp) => {\n  console.log(timestamp);\n});\n\ncancelAnimationFrame(id);\n*/\nvar cancelAnimationFrame = /*#__PURE__*/function () {\n  var caf = IS_WINDOW && (window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.msCancelAnimationFrame);\n  return caf ? caf.bind(window) : function (handle) {\n    clearTimeout(handle);\n  };\n}();\n/**\n* @function\n* @memberof Utils\n*/\nfunction getKeys(obj) {\n  return Object.keys(obj);\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction getValues(obj) {\n  var keys = getKeys(obj);\n  return keys.map(function (key) {\n    return obj[key];\n  });\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction getEntries(obj) {\n  var keys = getKeys(obj);\n  return keys.map(function (key) {\n    return [key, obj[key]];\n  });\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction sortOrders(keys, orders) {\n  if (orders === void 0) {\n    orders = [];\n  }\n  keys.sort(function (a, b) {\n    var index1 = orders.indexOf(a);\n    var index2 = orders.indexOf(b);\n    if (index2 === -1 && index1 === -1) {\n      return 0;\n    }\n    if (index1 === -1) {\n      return 1;\n    }\n    if (index2 === -1) {\n      return -1;\n    }\n    return index1 - index2;\n  });\n}\n/**\n* convert unit size to px size\n* @function\n* @memberof Utils\n*/\nfunction convertUnitSize(pos, size) {\n  var _a = splitUnit(pos),\n    value = _a.value,\n    unit = _a.unit;\n  if (isObject(size)) {\n    var sizeFunction = size[unit];\n    if (sizeFunction) {\n      if (isFunction(sizeFunction)) {\n        return sizeFunction(value);\n      } else if (DEFAULT_UNIT_PRESETS[unit]) {\n        return DEFAULT_UNIT_PRESETS[unit](value, sizeFunction);\n      }\n    }\n  } else if (unit === \"%\") {\n    return value * size / 100;\n  }\n  if (DEFAULT_UNIT_PRESETS[unit]) {\n    return DEFAULT_UNIT_PRESETS[unit](value);\n  }\n  return value;\n}\n/**\n* calculate between min, max\n* @function\n* @memberof Utils\n*/\nfunction between(value, min, max) {\n  return Math.max(min, Math.min(value, max));\n}\nfunction checkBoundSize(targetSize, compareSize, isMax, ratio) {\n  if (ratio === void 0) {\n    ratio = targetSize[0] / targetSize[1];\n  }\n  return [[throttle(compareSize[0], TINY_NUM), throttle(compareSize[0] / ratio, TINY_NUM)], [throttle(compareSize[1] * ratio, TINY_NUM), throttle(compareSize[1], TINY_NUM)]].filter(function (size) {\n    return size.every(function (value, i) {\n      var defaultSize = compareSize[i];\n      var throttledSize = throttle(defaultSize, TINY_NUM);\n      return isMax ? value <= defaultSize || value <= throttledSize : value >= defaultSize || value >= throttledSize;\n    });\n  })[0] || targetSize;\n}\n/**\n* calculate bound size\n* @function\n* @memberof Utils\n*/\nfunction calculateBoundSize(size, minSize, maxSize, keepRatio) {\n  if (!keepRatio) {\n    return size.map(function (value, i) {\n      return between(value, minSize[i], maxSize[i]);\n    });\n  }\n  var width = size[0],\n    height = size[1];\n  var ratio = keepRatio === true ? width / height : keepRatio;\n  // width : height = minWidth : minHeight;\n  var _a = checkBoundSize(size, minSize, false, ratio),\n    minWidth = _a[0],\n    minHeight = _a[1];\n  var _b = checkBoundSize(size, maxSize, true, ratio),\n    maxWidth = _b[0],\n    maxHeight = _b[1];\n  if (width < minWidth || height < minHeight) {\n    width = minWidth;\n    height = minHeight;\n  } else if (width > maxWidth || height > maxHeight) {\n    width = maxWidth;\n    height = maxHeight;\n  }\n  return [width, height];\n}\n/**\n* Add all the numbers.\n* @function\n* @memberof Utils\n*/\nfunction sum(nums) {\n  var length = nums.length;\n  var total = 0;\n  for (var i = length - 1; i >= 0; --i) {\n    total += nums[i];\n  }\n  return total;\n}\n/**\n* Average all numbers.\n* @function\n* @memberof Utils\n*/\nfunction average(nums) {\n  var length = nums.length;\n  var total = 0;\n  for (var i = length - 1; i >= 0; --i) {\n    total += nums[i];\n  }\n  return length ? total / length : 0;\n}\n/**\n* Get the angle of two points. (0 <= rad < 359)\n* @function\n* @memberof Utils\n*/\nfunction getRad(pos1, pos2) {\n  var distX = pos2[0] - pos1[0];\n  var distY = pos2[1] - pos1[1];\n  var rad = Math.atan2(distY, distX);\n  return rad >= 0 ? rad : rad + Math.PI * 2;\n}\n/**\n* Get the average point of all points.\n* @function\n* @memberof Utils\n*/\nfunction getCenterPoint(points) {\n  return [0, 1].map(function (i) {\n    return average(points.map(function (pos) {\n      return pos[i];\n    }));\n  });\n}\n/**\n* Gets the direction of the shape.\n* @function\n* @memberof Utils\n*/\nfunction getShapeDirection(points) {\n  var center = getCenterPoint(points);\n  var pos1Rad = getRad(center, points[0]);\n  var pos2Rad = getRad(center, points[1]);\n  return pos1Rad < pos2Rad && pos2Rad - pos1Rad < Math.PI || pos1Rad > pos2Rad && pos2Rad - pos1Rad < -Math.PI ? 1 : -1;\n}\n/**\n* Get the distance between two points.\n* @function\n* @memberof Utils\n*/\nfunction getDist(a, b) {\n  return Math.sqrt(Math.pow((b ? b[0] : 0) - a[0], 2) + Math.pow((b ? b[1] : 0) - a[1], 2));\n}\n/**\n* throttle number depending on the unit.\n* @function\n* @memberof Utils\n*/\nfunction throttle(num, unit) {\n  if (!unit) {\n    return num;\n  }\n  var reverseUnit = 1 / unit;\n  return Math.round(num / unit) / reverseUnit;\n}\n/**\n* throttle number array depending on the unit.\n* @function\n* @memberof Utils\n*/\nfunction throttleArray(nums, unit) {\n  nums.forEach(function (_, i) {\n    nums[i] = throttle(nums[i], unit);\n  });\n  return nums;\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction counter(num) {\n  var nums = [];\n  for (var i = 0; i < num; ++i) {\n    nums.push(i);\n  }\n  return nums;\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction replaceOnce(text, fromText, toText) {\n  var isOnce = false;\n  return text.replace(fromText, function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    if (isOnce) {\n      return args[0];\n    }\n    isOnce = true;\n    return isString(toText) ? toText : toText.apply(void 0, args);\n  });\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction flat(arr) {\n  return arr.reduce(function (prev, cur) {\n    return prev.concat(cur);\n  }, []);\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction deepFlat(arr) {\n  return arr.reduce(function (prev, cur) {\n    if (isArray(cur)) {\n      prev.push.apply(prev, deepFlat(cur));\n    } else {\n      prev.push(cur);\n    }\n    return prev;\n  }, []);\n}\n/**\n * @function\n * @memberof Utils\n */\nfunction pushSet(elements, element) {\n  if (elements.indexOf(element) === -1) {\n    elements.push(element);\n  }\n}\n\n/**\n* @namespace\n* @name Color\n*/\n/**\n* Remove the # from the hex color.\n* @memberof Color\n* @param {} hex - hex color\n* @return {} hex color\n* @example\nimport {cutHex} from \"@daybrush/utils\";\n\nconsole.log(cutHex(\"#000000\")) // \"000000\"\n*/\nfunction cutHex(hex) {\n  return hex.replace(\"#\", \"\");\n}\n/**\n* convert hex color to rgb color.\n* @memberof Color\n* @param {} hex - hex color\n* @return {} rgb color\n* @example\nimport {hexToRGBA} from \"@daybrush/utils\";\n\nconsole.log(hexToRGBA(\"#00000005\"));\n// [0, 0, 0, 1]\nconsole.log(hexToRGBA(\"#201045\"));\n// [32, 16, 69, 1]\n*/\nfunction hexToRGBA(hex) {\n  var h = cutHex(hex);\n  var r = parseInt(h.substring(0, 2), 16);\n  var g = parseInt(h.substring(2, 4), 16);\n  var b = parseInt(h.substring(4, 6), 16);\n  var a = parseInt(h.substring(6, 8), 16) / 255;\n  if (isNaN(a)) {\n    a = 1;\n  }\n  return [r, g, b, a];\n}\n/**\n* convert 3(or 4)-digit hex color to 6(or 8)-digit hex color.\n* @memberof Color\n* @param {} hex - 3(or 4)-digit hex color\n* @return {} 6(or 8)-digit hex color\n* @example\nimport {toFullHex} from \"@daybrush/utils\";\n\nconsole.log(toFullHex(\"#123\")); // \"#112233\"\nconsole.log(toFullHex(\"#123a\")); // \"#112233aa\"\n*/\nfunction toFullHex(h) {\n  var r = h.charAt(1);\n  var g = h.charAt(2);\n  var b = h.charAt(3);\n  var a = h.charAt(4);\n  var arr = [\"#\", r, r, g, g, b, b, a, a];\n  return arr.join(\"\");\n}\n/**\n* convert hsl color to rgba color.\n* @memberof Color\n* @param {} hsl - hsl color(hue: 0 ~ 360, saturation: 0 ~ 1, lightness: 0 ~ 1, alpha: 0 ~ 1)\n* @return {} rgba color\n* @example\nimport {hslToRGBA} from \"@daybrush/utils\";\n\nconsole.log(hslToRGBA([150, 0.5, 0.4]));\n// [51, 153, 102, 1]\n*/\nfunction hslToRGBA(hsl) {\n  var _a;\n  var h = hsl[0];\n  var s = hsl[1];\n  var l = hsl[2];\n  if (h < 0) {\n    h += Math.floor((Math.abs(h) + 360) / 360) * 360;\n  }\n  h %= 360;\n  var c = (1 - Math.abs(2 * l - 1)) * s;\n  var x = c * (1 - Math.abs(h / 60 % 2 - 1));\n  var m = l - c / 2;\n  var rgb;\n  if (h < 60) {\n    rgb = [c, x, 0];\n  } else if (h < 120) {\n    rgb = [x, c, 0];\n  } else if (h < 180) {\n    rgb = [0, c, x];\n  } else if (h < 240) {\n    rgb = [0, x, c];\n  } else if (h < 300) {\n    rgb = [x, 0, c];\n  } else if (h < 360) {\n    rgb = [c, 0, x];\n  } else {\n    rgb = [0, 0, 0];\n  }\n  return [Math.round((rgb[0] + m) * 255), Math.round((rgb[1] + m) * 255), Math.round((rgb[2] + m) * 255), (_a = hsl[3]) !== null && _a !== void 0 ? _a : 1];\n}\n/**\n* convert string to rgba color.\n* @memberof Color\n* @param {} - 3-hex(#000), 4-hex(#0000) 6-hex(#000000), 8-hex(#00000000) or RGB(A), or HSL(A)\n* @return {} rgba color\n* @example\nimport {stringToRGBA} from \"@daybrush/utils\";\n\nconsole.log(stringToRGBA(\"#000000\")); // [0, 0, 0, 1]\nconsole.log(stringToRGBA(\"rgb(100, 100, 100)\")); // [100, 100, 100, 1]\nconsole.log(stringToRGBA(\"hsl(150, 0.5, 0.4)\")); // [51, 153, 102, 1]\n*/\nfunction stringToRGBA(color) {\n  if (color.charAt(0) === \"#\") {\n    if (color.length === 4 || color.length === 5) {\n      return hexToRGBA(toFullHex(color));\n    } else {\n      return hexToRGBA(color);\n    }\n  } else if (color.indexOf(\"(\") !== -1) {\n    // in bracket.\n    var _a = splitBracket(color),\n      prefix = _a.prefix,\n      value = _a.value;\n    if (!prefix || !value) {\n      return undefined;\n    }\n    var arr = splitComma(value);\n    var colorArr = [0, 0, 0, 1];\n    var length = arr.length;\n    switch (prefix) {\n      case RGB:\n      case RGBA:\n        for (var i = 0; i < length; ++i) {\n          colorArr[i] = parseFloat(arr[i]);\n        }\n        return colorArr;\n      case HSL:\n      case HSLA:\n        for (var i = 0; i < length; ++i) {\n          if (arr[i].indexOf(\"%\") !== -1) {\n            colorArr[i] = parseFloat(arr[i]) / 100;\n          } else {\n            colorArr[i] = parseFloat(arr[i]);\n          }\n        }\n        // hsl, hsla to rgba\n        return hslToRGBA(colorArr);\n    }\n  }\n  return undefined;\n}\n\n/**\n * Returns all element descendants of node that\n * match selectors.\n */\n/**\n * Checks if the specified class value exists in the element's class attribute.\n * @memberof DOM\n * @param - A DOMString containing one or more selectors to match\n * @param - If multi is true, a DOMString containing one or more selectors to match against.\n * @example\nimport {$} from \"@daybrush/utils\";\n\nconsole.log($(\"div\")); // div element\nconsole.log($(\"div\", true)); // [div, div] elements\n*/\nfunction $(selectors, multi) {\n  if (!doc) {\n    return multi ? [] : null;\n  }\n  return multi ? doc.querySelectorAll(selectors) : doc.querySelector(selectors);\n}\n/**\n* Checks if the specified class value exists in the element's class attribute.\n* @memberof DOM\n* @param element - target\n* @param className - the class name to search\n* @return {boolean} return false if the class is not found.\n* @example\nimport {hasClass} from \"@daybrush/utils\";\n\nconsole.log(hasClass(element, \"start\")); // true or false\n*/\nfunction hasClass(element, className) {\n  if (element.classList) {\n    return element.classList.contains(className);\n  }\n  return !!element.className.match(new RegExp(\"(\\\\s|^)\" + className + \"(\\\\s|$)\"));\n}\n/**\n* Add the specified class value. If these classe already exist in the element's class attribute they are ignored.\n* @memberof DOM\n* @param element - target\n* @param className - the class name to add\n* @example\nimport {addClass} from \"@daybrush/utils\";\n\naddClass(element, \"start\");\n*/\nfunction addClass(element, className) {\n  if (element.classList) {\n    element.classList.add(className);\n  } else {\n    element.className += \" \" + className;\n  }\n}\n/**\n* Removes the specified class value.\n* @memberof DOM\n* @param element - target\n* @param className - the class name to remove\n* @example\nimport {removeClass} from \"@daybrush/utils\";\n\nremoveClass(element, \"start\");\n*/\nfunction removeClass(element, className) {\n  if (element.classList) {\n    element.classList.remove(className);\n  } else {\n    var reg = new RegExp(\"(\\\\s|^)\" + className + \"(\\\\s|$)\");\n    element.className = element.className.replace(reg, \" \");\n  }\n}\n/**\n* Gets the CSS properties from the element.\n* @memberof DOM\n* @param elements - elements\n* @param properites - the CSS properties\n* @return returns CSS properties and values.\n* @example\nimport {fromCSS} from \"@daybrush/utils\";\n\nconsole.log(fromCSS(element, [\"left\", \"opacity\", \"top\"])); // {\"left\": \"10px\", \"opacity\": 1, \"top\": \"10px\"}\n*/\nfunction fromCSS(elements, properties) {\n  if (!elements || !properties || !properties.length) {\n    return {};\n  }\n  var element;\n  if (elements instanceof Element) {\n    element = elements;\n  } else if (elements.length) {\n    element = elements[0];\n  } else {\n    return {};\n  }\n  var cssObject = {};\n  var styles = getWindow(element).getComputedStyle(element);\n  var length = properties.length;\n  for (var i = 0; i < length; ++i) {\n    cssObject[properties[i]] = styles[properties[i]];\n  }\n  return cssObject;\n}\n/**\n* Sets up a function that will be called whenever the specified event is delivered to the target\n* @memberof DOM\n* @param - event target\n* @param - A case-sensitive string representing the event type to listen for.\n* @param - The object which receives a notification (an object that implements the Event interface) when an event of the specified type occurs\n* @param - An options object that specifies characteristics about the event listener.\n* @example\nimport {addEvent} from \"@daybrush/utils\";\n\naddEvent(el, \"click\", e => {\n  console.log(e);\n});\n*/\nfunction addEvent(el, type, listener, options) {\n  el.addEventListener(type, listener, options);\n}\n/**\n* removes from the EventTarget an event listener previously registered with EventTarget.addEventListener()\n* @memberof DOM\n* @param - event target\n* @param - A case-sensitive string representing the event type to listen for.\n* @param - The EventListener function of the event handler to remove from the event target.\n* @param - An options object that specifies characteristics about the event listener.\n* @example\nimport {addEvent, removeEvent} from \"@daybrush/utils\";\nconst listener = e => {\n  console.log(e);\n};\naddEvent(el, \"click\", listener);\nremoveEvent(el, \"click\", listener);\n*/\nfunction removeEvent(el, type, listener, options) {\n  el.removeEventListener(type, listener, options);\n}\nfunction getDocument(el) {\n  return (el === null || el === void 0 ? void 0 : el.ownerDocument) || doc;\n}\nfunction getDocumentElement(el) {\n  return getDocument(el).documentElement;\n}\nfunction getDocumentBody(el) {\n  return getDocument(el).body;\n}\nfunction getWindow(el) {\n  var _a;\n  return ((_a = el === null || el === void 0 ? void 0 : el.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView) || window;\n}\nfunction isWindow(val) {\n  return val && \"postMessage\" in val && \"blur\" in val && \"self\" in val;\n}\nfunction isNode(el) {\n  return isObject(el) && el.nodeName && el.nodeType && \"ownerDocument\" in el;\n}\n\nexport { RGB, RGBA, HSL, HSLA, COLOR_MODELS, FUNCTION, PROPERTY, ARRAY, OBJECT, STRING, NUMBER, UNDEFINED, IS_WINDOW, doc as document, getCrossBrowserProperty, TRANSFORM, FILTER, ANIMATION, KEYFRAMES, OPEN_CLOSED_CHARACTERS, TINY_NUM, REVERSE_TINY_NUM, DEFAULT_UNIT_PRESETS, cutHex, hexToRGBA, toFullHex, hslToRGBA, stringToRGBA, dot, isUndefined, isObject, isArray, isString, isNumber, isFunction, splitText, splitSpace, splitComma, splitBracket, splitUnit, camelize, decamelize, toArray, now, findIndex, findLastIndex, findLast, find, requestAnimationFrame, cancelAnimationFrame, getKeys, getValues, getEntries, sortOrders, convertUnitSize, between, checkBoundSize, calculateBoundSize, sum, average, getRad, getCenterPoint, getShapeDirection, getDist, throttle, throttleArray, counter, replaceOnce, flat, deepFlat, pushSet, $, hasClass, addClass, removeClass, fromCSS, addEvent, removeEvent, getDocument, getDocumentElement, getDocumentBody, getWindow, isWindow, isNode };\n//# sourceMappingURL=utils.esm.js.map\n","/*\nCopyright (c) Daybrush\nname: react-simple-compat\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/react-simple-compat.git\nversion: 1.2.3\n*/\nimport { diff } from '@egjs/list-differ';\nimport { isArray, isString, isNumber, isUndefined, decamelize } from '@daybrush/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n}\n\nfunction isDiff(a, b) {\n  if (a === b) {\n    return false;\n  }\n\n  for (var i in a) {\n    if (!(i in b)) {\n      return true;\n    }\n  }\n\n  for (var i in b) {\n    if (a[i] !== b[i]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction diffObject(a, b) {\n  var keys1 = Object.keys(a);\n  var keys2 = Object.keys(b);\n  var result = diff(keys1, keys2, function (key) {\n    return key;\n  });\n  var added = {};\n  var removed = {};\n  var changed = {};\n  result.added.forEach(function (index) {\n    var name = keys2[index];\n    added[name] = b[name];\n  });\n  result.removed.forEach(function (index) {\n    var name = keys1[index];\n    removed[name] = a[name];\n  });\n  result.maintained.forEach(function (_a) {\n    var index = _a[0];\n    var name = keys1[index];\n    var values = [a[name], b[name]];\n\n    if (a[name] !== b[name]) {\n      changed[name] = values;\n    }\n  });\n  return {\n    added: added,\n    removed: removed,\n    changed: changed\n  };\n}\n\nfunction executeHooks(hooks) {\n  hooks.forEach(function (hook) {\n    hook();\n  });\n}\n\nfunction fillKeys(keys) {\n  var index = 0;\n  return keys.map(function (key) {\n    return key == null ? \"$compat\" + ++index : \"\" + key;\n  });\n}\n\nfunction createProvider(el, key, index, container) {\n  if (isString(el) || isNumber(el)) {\n    return new TextProvider(\"text_\" + el, key, index, container, null, {});\n  }\n\n  var providerClass = typeof el.type === \"string\" ? ElementProvider : el.type.prototype.render ? ComponentProvider : FunctionProvider;\n  return new providerClass(el.type, key, index, container, el.ref, el.props);\n}\n\nfunction flat(arr) {\n  var arr2 = [];\n  arr.forEach(function (el) {\n    arr2 = arr2.concat(isArray(el) ? flat(el) : el);\n  });\n  return arr2;\n}\n\nfunction getAttributes(props) {\n  var className = props.className,\n      otherProps = __rest(props, [\"className\"]);\n\n  if (className != null) {\n    otherProps.class = className;\n  }\n\n  delete otherProps.style;\n  delete otherProps.children;\n  return otherProps;\n}\n\nfunction fillProps(props, defaultProps) {\n  if (!defaultProps) {\n    return props;\n  }\n\n  for (var name in defaultProps) {\n    if (isUndefined(props[name])) {\n      props[name] = defaultProps[name];\n    }\n  }\n\n  return props;\n}\n\nfunction createElement(type, props) {\n  var children = [];\n\n  for (var _i = 2; _i < arguments.length; _i++) {\n    children[_i - 2] = arguments[_i];\n  }\n\n  var _a = props || {},\n      key = _a.key,\n      ref = _a.ref,\n      otherProps = __rest(_a, [\"key\", \"ref\"]);\n\n  return {\n    type: type,\n    key: key,\n    ref: ref,\n    props: __assign(__assign({}, otherProps), {\n      children: flat(children).filter(function (child) {\n        return child != null && child !== false;\n      })\n    })\n  };\n}\n\nvar Provider =\n/*#__PURE__*/\nfunction () {\n  function Provider(type, key, index, container, ref, props) {\n    if (props === void 0) {\n      props = {};\n    }\n\n    this.type = type;\n    this.key = key;\n    this.index = index;\n    this.container = container;\n    this.ref = ref;\n    this.props = props;\n    this._providers = [];\n  }\n\n  var __proto = Provider.prototype;\n\n  __proto._should = function (nextProps, nextState) {\n    return true;\n  };\n\n  __proto._update = function (hooks, nextElement, nextState, isForceUpdate) {\n    if (this.base && !isString(nextElement) && !isForceUpdate && !this._should(nextElement.props, nextState)) {\n      return false;\n    }\n\n    this.original = nextElement;\n\n    this._setState(nextState); // render\n\n\n    var prevProps = this.props;\n\n    if (!isString(nextElement)) {\n      this.props = nextElement.props;\n      this.ref = nextElement.ref;\n    }\n\n    this._render(hooks, this.base ? prevProps : {}, nextState);\n\n    return true;\n  };\n\n  __proto._mounted = function () {\n    var ref = this.ref;\n    ref && ref(this.base);\n  };\n\n  __proto._setState = function (nextstate) {\n    return;\n  };\n\n  __proto._updated = function () {\n    var ref = this.ref;\n    ref && ref(this.base);\n  };\n\n  __proto._destroy = function () {\n    var ref = this.ref;\n    ref && ref(null);\n  };\n\n  return Provider;\n}();\n\nfunction diffAttributes(attrs1, attrs2, el) {\n  var _a = diffObject(attrs1, attrs2),\n      added = _a.added,\n      removed = _a.removed,\n      changed = _a.changed;\n\n  for (var name in added) {\n    el.setAttribute(name, added[name]);\n  }\n\n  for (var name in changed) {\n    el.setAttribute(name, changed[name][1]);\n  }\n\n  for (var name in removed) {\n    el.removeAttribute(name);\n  }\n}\n\nfunction diffEvents(events1, events2, provier) {\n  var _a = diffObject(events1, events2),\n      added = _a.added,\n      removed = _a.removed,\n      changed = _a.changed;\n\n  for (var name in removed) {\n    provier.removeEventListener(name);\n  }\n\n  for (var name in added) {\n    provier.addEventListener(name, added[name]);\n  }\n\n  for (var name in changed) {\n    provier.removeEventListener(name);\n    provier.addEventListener(name, changed[name][1]);\n  }\n\n  for (var name in removed) {\n    provier.removeEventListener(name);\n  }\n}\n\nfunction diffStyle(style1, style2, el) {\n  var style = el.style;\n\n  var _a = diffObject(style1, style2),\n      added = _a.added,\n      removed = _a.removed,\n      changed = _a.changed;\n\n  for (var beforeName in added) {\n    var name = decamelize(beforeName, \"-\");\n\n    if (style.setProperty) {\n      style.setProperty(name, added[beforeName]);\n    } else {\n      style[name] = added[beforeName];\n    }\n  }\n\n  for (var beforeName in changed) {\n    var name = decamelize(beforeName, \"-\");\n\n    if (style.setProperty) {\n      style.setProperty(name, changed[beforeName][1]);\n    } else {\n      style[name] = changed[beforeName][1];\n    }\n  }\n\n  for (var beforeName in removed) {\n    var name = decamelize(beforeName, \"-\");\n\n    if (style.removeProperty) {\n      style.removeProperty(name);\n    } else {\n      style[name] = \"\";\n    }\n  }\n}\n\nfunction splitProps(props) {\n  var attributes = {};\n  var events = {};\n\n  for (var name in props) {\n    if (name.indexOf(\"on\") === 0) {\n      events[name.replace(\"on\", \"\").toLowerCase()] = props[name];\n    } else {\n      attributes[name] = props[name];\n    }\n  }\n\n  return {\n    attributes: attributes,\n    events: events\n  };\n}\n\nvar TextProvider =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(TextProvider, _super);\n\n  function TextProvider() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  var __proto = TextProvider.prototype;\n\n  __proto._render = function (hooks) {\n    var _this = this;\n\n    var isMount = !this.base;\n\n    if (isMount) {\n      this.base = document.createTextNode(this.type.replace(\"text_\", \"\"));\n    }\n\n    hooks.push(function () {\n      if (isMount) {\n        _this._mounted();\n      } else {\n        _this._updated();\n      }\n    });\n    return true;\n  };\n\n  __proto._unmount = function () {\n    this.base.parentNode.removeChild(this.base);\n  };\n\n  return TextProvider;\n}(Provider);\n\nvar ElementProvider =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(ElementProvider, _super);\n\n  function ElementProvider() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.events = {};\n    _this._isSVG = false;\n    return _this;\n  }\n\n  var __proto = ElementProvider.prototype;\n\n  __proto.addEventListener = function (name, callback) {\n    var events = this.events;\n\n    events[name] = function (e) {\n      e.nativeEvent = e;\n      callback(e);\n    };\n\n    this.base.addEventListener(name, events[name]);\n  };\n\n  __proto.removeEventListener = function (name) {\n    var events = this.events;\n    this.base.removeEventListener(name, events[name]);\n    delete events[name];\n  };\n\n  __proto._should = function (nextProps) {\n    return isDiff(this.props, nextProps);\n  };\n\n  __proto._render = function (hooks, prevProps) {\n    var _this = this;\n\n    var isMount = !this.base;\n\n    if (isMount) {\n      var isSVG = this._hasSVG();\n\n      this._isSVG = isSVG;\n      var element = this.props.portalContainer;\n\n      if (!element) {\n        var type = this.type;\n\n        if (isSVG) {\n          element = document.createElementNS(\"http://www.w3.org/2000/svg\", type);\n        } else {\n          element = document.createElement(type);\n        }\n      }\n\n      this.base = element;\n    }\n\n    renderProviders(this, this._providers, this.props.children, hooks, null);\n    var base = this.base;\n\n    var _a = splitProps(prevProps),\n        prevAttributes = _a.attributes,\n        prevEvents = _a.events;\n\n    var _b = splitProps(this.props),\n        nextAttributes = _b.attributes,\n        nextEvents = _b.events;\n\n    diffAttributes(getAttributes(prevAttributes), getAttributes(nextAttributes), base);\n    diffEvents(prevEvents, nextEvents, this);\n    diffStyle(prevProps.style || {}, this.props.style || {}, base);\n    hooks.push(function () {\n      if (isMount) {\n        _this._mounted();\n      } else {\n        _this._updated();\n      }\n    });\n    return true;\n  };\n\n  __proto._unmount = function () {\n    var events = this.events;\n    var base = this.base;\n\n    for (var name in events) {\n      base.removeEventListener(name, events[name]);\n    }\n\n    this._providers.forEach(function (provider) {\n      provider._unmount();\n    });\n\n    this.events = {};\n\n    if (!this.props.portalContainer) {\n      base.parentNode.removeChild(base);\n    }\n  };\n\n  __proto._hasSVG = function () {\n    if (this._isSVG || this.type === \"svg\") {\n      return true;\n    }\n\n    var containerNode = findContainerNode(this.container);\n    return containerNode && \"ownerSVGElement\" in containerNode;\n  };\n\n  return ElementProvider;\n}(Provider);\n\nfunction findContainerNode(provider) {\n  if (!provider) {\n    return null;\n  }\n\n  var base = provider.base;\n\n  if (base instanceof Node) {\n    return base;\n  }\n\n  return findContainerNode(provider.container);\n}\n\nfunction findDOMNode(comp) {\n  if (!comp) {\n    return null;\n  }\n\n  if (comp instanceof Node) {\n    return comp;\n  }\n\n  var providers = comp.$_provider._providers;\n\n  if (!providers.length) {\n    return null;\n  }\n\n  return findDOMNode(providers[0].base);\n}\n\nvar FunctionProvider =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(FunctionProvider, _super);\n\n  function FunctionProvider() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  var __proto = FunctionProvider.prototype;\n\n  __proto._render = function (hooks) {\n    var template = this.type(this.props);\n    renderProviders(this, this._providers, template ? [template] : [], hooks);\n    return true;\n  };\n\n  __proto._unmount = function () {\n    this._providers.forEach(function (provider) {\n      provider._unmount();\n    });\n  };\n\n  return FunctionProvider;\n}(Provider);\n\nvar ContainerProvider =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(ContainerProvider, _super);\n\n  function ContainerProvider(base) {\n    var _this = _super.call(this, \"container\", \"container\", 0, null) || this;\n\n    _this.base = base;\n    return _this;\n  }\n\n  var __proto = ContainerProvider.prototype;\n\n  __proto._render = function () {\n    return true;\n  };\n\n  __proto._unmount = function () {\n    return;\n  };\n\n  return ContainerProvider;\n}(Provider);\n\nvar ComponentProvider =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(ComponentProvider, _super);\n\n  function ComponentProvider(type, key, index, container, ref, props) {\n    if (props === void 0) {\n      props = {};\n    }\n\n    return _super.call(this, type, key, index, container, ref, fillProps(props, type.defaultProps)) || this;\n  }\n\n  var __proto = ComponentProvider.prototype;\n\n  __proto._should = function (nextProps, nextState) {\n    return this.base.shouldComponentUpdate(fillProps(nextProps, this.type.defaultProps), nextState || this.base.state);\n  };\n\n  __proto._render = function (hooks, prevProps) {\n    var _this = this;\n\n    this.props = fillProps(this.props, this.type.defaultProps);\n    var isMount = !this.base;\n\n    if (isMount) {\n      this.base = new this.type(this.props);\n      this.base.$_provider = this;\n    } else {\n      this.base.props = this.props;\n    }\n\n    var base = this.base;\n    var prevState = base.state;\n    var template = base.render();\n\n    if (template && template.props && !template.props.children.length) {\n      template.props.children = this.props.children;\n    }\n\n    renderProviders(this, this._providers, template ? [template] : [], hooks);\n    hooks.push(function () {\n      if (isMount) {\n        _this._mounted();\n\n        base.componentDidMount();\n      } else {\n        _this._updated();\n\n        base.componentDidUpdate(prevProps, prevState);\n      }\n    });\n  };\n\n  __proto._setState = function (nextState) {\n    var base = this.base;\n\n    if (!base || !nextState) {\n      return;\n    }\n\n    base.state = nextState;\n  };\n\n  __proto._unmount = function () {\n    this._providers.forEach(function (provider) {\n      provider._unmount();\n    });\n\n    clearTimeout(this.base.$_timer);\n    this.base.componentWillUnmount();\n  };\n\n  return ComponentProvider;\n}(Provider);\n\nvar Component =\n/*#__PURE__*/\nfunction () {\n  function Component(props) {\n    if (props === void 0) {\n      props = {};\n    }\n\n    this.props = props;\n    this.state = {};\n    this.$_timer = 0;\n    this.$_state = {};\n  }\n\n  var __proto = Component.prototype;\n\n  __proto.shouldComponentUpdate = function (props, state) {\n    return true;\n  };\n\n  __proto.render = function () {\n    return null;\n  };\n\n  __proto.setState = function (state, callback, isForceUpdate) {\n    var _this = this;\n\n    if (!this.$_timer) {\n      this.$_state = {};\n    }\n\n    clearTimeout(this.$_timer);\n    this.$_timer = 0;\n    this.$_state = __assign(__assign({}, this.$_state), state);\n\n    if (!isForceUpdate) {\n      this.$_timer = setTimeout(function () {\n        _this.$_timer = 0;\n\n        _this.$_setState(callback, isForceUpdate);\n      });\n    } else {\n      this.$_setState(callback, isForceUpdate);\n    }\n\n    return;\n  };\n\n  __proto.forceUpdate = function (callback) {\n    this.setState({}, callback, true);\n  };\n\n  __proto.componentDidMount = function () {};\n\n  __proto.componentDidUpdate = function (prevProps, prevState) {};\n\n  __proto.componentWillUnmount = function () {};\n\n  __proto.$_setState = function (callback, isForceUpdate) {\n    var hooks = [];\n    var provider = this.$_provider;\n    var isUpdate = renderProviders(provider.container, [provider], [provider.original], hooks, __assign(__assign({}, this.state), this.$_state), isForceUpdate);\n\n    if (isUpdate) {\n      if (callback) {\n        hooks.push(callback);\n      }\n\n      executeHooks(hooks);\n    }\n  };\n\n  return Component;\n}();\n\nvar PureComponent =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(PureComponent, _super);\n\n  function PureComponent() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  var __proto = PureComponent.prototype;\n\n  __proto.shouldComponentUpdate = function (props, state) {\n    return isDiff(this.props, props) || isDiff(this.state, state);\n  };\n\n  return PureComponent;\n}(Component);\n\nvar _Portal =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(_Portal, _super);\n\n  function _Portal() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  var __proto = _Portal.prototype;\n\n  __proto.componentDidMount = function () {\n    var _a = this.props,\n        element = _a.element,\n        container = _a.container;\n    this._portalProvider = new ContainerProvider(container);\n    renderProvider(element, container, this._portalProvider);\n  };\n\n  __proto.componentDidUpdate = function () {\n    var _a = this.props,\n        element = _a.element,\n        container = _a.container;\n    renderProvider(element, container, this._portalProvider);\n  };\n\n  __proto.componentWillUnmount = function () {\n    var container = this.props.container;\n    renderProvider(null, container, this._portalProvider);\n    this._portalProvider = null;\n  };\n\n  return _Portal;\n}(PureComponent);\n\nfunction updateProvider(provider, children, nextState) {\n  var hooks = [];\n  renderProviders(provider, provider._providers, children, hooks, nextState);\n  executeHooks(hooks);\n}\n\nfunction getNextSibiling(provider, childProvider) {\n  var childProviders = provider._providers;\n  var length = childProviders.length;\n\n  for (var i = childProvider.index + 1; i < length; ++i) {\n    var el = findDOMNode(childProviders[i].base);\n\n    if (el) {\n      return el;\n    }\n  }\n\n  return null;\n}\n\nfunction diffProviders(containerProvider, providers, children) {\n  var childrenKeys = children.map(function (p) {\n    return isString(p) ? null : p.key;\n  });\n  var keys1 = fillKeys(providers.map(function (p) {\n    return p.key;\n  }));\n  var keys2 = fillKeys(childrenKeys);\n  var result = diff(keys1, keys2, function (key) {\n    return key;\n  });\n  result.removed.forEach(function (index) {\n    providers.splice(index, 1)[0]._unmount();\n  });\n  result.ordered.forEach(function (_a) {\n    var from = _a[0],\n        to = _a[1];\n    var childrenProvider = providers.splice(from, 1)[0];\n    providers.splice(to, 0, childrenProvider);\n    var el = findDOMNode(childrenProvider.base);\n    var next = findDOMNode(providers[to + 1] && providers[to + 1].base);\n\n    if (el) {\n      el.parentNode.insertBefore(el, next);\n    }\n  });\n  result.added.forEach(function (index) {\n    providers.splice(index, 0, createProvider(children[index], childrenKeys[index], index, containerProvider));\n  });\n  var changed = result.maintained.filter(function (_a) {\n    var _ = _a[0],\n        to = _a[1];\n    var el = children[to];\n    var childProvider = providers[to];\n    var type = isString(el) ? \"text_\" + el : el.type;\n\n    if (type !== childProvider.type) {\n      childProvider._unmount();\n\n      providers.splice(to, 1, createProvider(el, childrenKeys[to], to, containerProvider));\n      return true;\n    }\n\n    childProvider.index = to;\n    return false;\n  });\n  return __spreadArrays(result.added, changed.map(function (_a) {\n    var _ = _a[0],\n        to = _a[1];\n    return to;\n  }));\n}\n\nfunction renderProviders(containerProvider, providers, children, updatedHooks, nextState, isForceUpdate) {\n  var result = diffProviders(containerProvider, providers, children);\n  var updated = providers.filter(function (childProvider, i) {\n    return childProvider._update(updatedHooks, children[i], nextState, isForceUpdate);\n  });\n  var containerNode = findContainerNode(containerProvider);\n\n  if (containerNode) {\n    result.reverse().forEach(function (index) {\n      var childProvider = providers[index];\n      var el = findDOMNode(childProvider.base);\n\n      if (!el) {\n        return;\n      }\n\n      if (containerNode !== el && !el.parentNode) {\n        var nextElement = getNextSibiling(containerProvider, childProvider);\n        containerNode.insertBefore(el, nextElement);\n      }\n    });\n  }\n\n  return updated.length > 0;\n}\n\nfunction renderProvider(element, container, provider) {\n  if (provider === void 0) {\n    provider = container.__REACT_COMPAT__;\n  }\n\n  var isProvider = !!provider;\n\n  if (!provider) {\n    provider = new ContainerProvider(container);\n  }\n\n  updateProvider(provider, element ? [element] : []);\n\n  if (!isProvider) {\n    container.__REACT_COMPAT__ = provider;\n  }\n\n  return provider;\n}\n\nfunction render(element, container, callback) {\n  var provider = container.__REACT_COMPAT__;\n\n  if (element && !provider) {\n    container.innerHTML = \"\";\n  }\n\n  renderProvider(element, container, provider);\n  callback && callback();\n}\nfunction createPortal(el, container) {\n  return createElement(_Portal, {\n    element: el,\n    container: container\n  });\n}\nvar version = \"simple-1.1.0\";\n\nexport { Component, PureComponent, createElement, createPortal, findDOMNode, render, version };\n//# sourceMappingURL=compat.esm.js.map\n","/*\nCopyright (c) 2015 NAVER Corp.\nname: @egjs/agent\nlicense: MIT\nauthor: NAVER Corp.\nrepository: git+https://github.com/naver/agent.git\nversion: 2.3.0\n*/\nfunction some(arr, callback) {\n  var length = arr.length;\n\n  for (var i = 0; i < length; ++i) {\n    if (callback(arr[i], i)) {\n      return true;\n    }\n  }\n\n  return false;\n}\nfunction find(arr, callback) {\n  var length = arr.length;\n\n  for (var i = 0; i < length; ++i) {\n    if (callback(arr[i], i)) {\n      return arr[i];\n    }\n  }\n\n  return null;\n}\nfunction getUserAgent(agent) {\n  var userAgent = agent;\n\n  if (typeof userAgent === \"undefined\") {\n    if (typeof navigator === \"undefined\" || !navigator) {\n      return \"\";\n    }\n\n    userAgent = navigator.userAgent || \"\";\n  }\n\n  return userAgent.toLowerCase();\n}\nfunction execRegExp(pattern, text) {\n  try {\n    return new RegExp(pattern, \"g\").exec(text);\n  } catch (e) {\n    return null;\n  }\n}\nfunction hasUserAgentData() {\n  if (typeof navigator === \"undefined\" || !navigator || !navigator.userAgentData) {\n    return false;\n  }\n\n  var userAgentData = navigator.userAgentData;\n  var brands = userAgentData.brands || userAgentData.uaList;\n  return !!(brands && brands.length);\n}\nfunction findVersion(versionTest, userAgent) {\n  var result = execRegExp(\"(\" + versionTest + \")((?:\\\\/|\\\\s|:)([0-9|\\\\.|_]+))\", userAgent);\n  return result ? result[3] : \"\";\n}\nfunction convertVersion(text) {\n  return text.replace(/_/g, \".\");\n}\nfunction findPreset(presets, userAgent) {\n  var userPreset = null;\n  var version = \"-1\";\n  some(presets, function (preset) {\n    var result = execRegExp(\"(\" + preset.test + \")((?:\\\\/|\\\\s|:)([0-9|\\\\.|_]+))?\", userAgent);\n\n    if (!result || preset.brand) {\n      return false;\n    }\n\n    userPreset = preset;\n    version = result[3] || \"-1\";\n\n    if (preset.versionAlias) {\n      version = preset.versionAlias;\n    } else if (preset.versionTest) {\n      version = findVersion(preset.versionTest.toLowerCase(), userAgent) || version;\n    }\n\n    version = convertVersion(version);\n    return true;\n  });\n  return {\n    preset: userPreset,\n    version: version\n  };\n}\nfunction findPresetBrand(presets, brands) {\n  var brandInfo = {\n    brand: \"\",\n    version: \"-1\"\n  };\n  some(presets, function (preset) {\n    var result = findBrand(brands, preset);\n\n    if (!result) {\n      return false;\n    }\n\n    brandInfo.brand = preset.id;\n    brandInfo.version = preset.versionAlias || result.version;\n    return brandInfo.version !== \"-1\";\n  });\n  return brandInfo;\n}\nfunction findBrand(brands, preset) {\n  return find(brands, function (_a) {\n    var brand = _a.brand;\n    return execRegExp(\"\" + preset.test, brand.toLowerCase());\n  });\n}\n\nvar BROWSER_PRESETS = [{\n  test: \"phantomjs\",\n  id: \"phantomjs\"\n}, {\n  test: \"whale\",\n  id: \"whale\"\n}, {\n  test: \"edgios|edge|edg\",\n  id: \"edge\"\n}, {\n  test: \"msie|trident|windows phone\",\n  id: \"ie\",\n  versionTest: \"iemobile|msie|rv\"\n}, {\n  test: \"miuibrowser\",\n  id: \"miui browser\"\n}, {\n  test: \"samsungbrowser\",\n  id: \"samsung internet\"\n}, {\n  test: \"samsung\",\n  id: \"samsung internet\",\n  versionTest: \"version\"\n}, {\n  test: \"chrome|crios\",\n  id: \"chrome\"\n}, {\n  test: \"firefox|fxios\",\n  id: \"firefox\"\n}, {\n  test: \"android\",\n  id: \"android browser\",\n  versionTest: \"version\"\n}, {\n  test: \"safari|iphone|ipad|ipod\",\n  id: \"safari\",\n  versionTest: \"version\"\n}]; // chromium's engine(blink) is based on applewebkit 537.36.\n\nvar CHROMIUM_PRESETS = [{\n  test: \"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\\\schrome)\",\n  id: \"chrome\",\n  versionTest: \"chrome\"\n}, {\n  test: \"chromium\",\n  id: \"chrome\"\n}, {\n  test: \"whale\",\n  id: \"chrome\",\n  versionAlias: \"-1\",\n  brand: true\n}];\nvar WEBKIT_PRESETS = [{\n  test: \"applewebkit\",\n  id: \"webkit\",\n  versionTest: \"applewebkit|safari\"\n}];\nvar WEBVIEW_PRESETS = [{\n  test: \"(?=(iphone|ipad))(?!(.*version))\",\n  id: \"webview\"\n}, {\n  test: \"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))\",\n  id: \"webview\"\n}, {\n  // test webview\n  test: \"webview\",\n  id: \"webview\"\n}];\nvar OS_PRESETS = [{\n  test: \"windows phone\",\n  id: \"windows phone\"\n}, {\n  test: \"windows 2000\",\n  id: \"window\",\n  versionAlias: \"5.0\"\n}, {\n  test: \"windows nt\",\n  id: \"window\"\n}, {\n  test: \"iphone|ipad|ipod\",\n  id: \"ios\",\n  versionTest: \"iphone os|cpu os\"\n}, {\n  test: \"mac os x\",\n  id: \"mac\"\n}, {\n  test: \"android\",\n  id: \"android\"\n}, {\n  test: \"tizen\",\n  id: \"tizen\"\n}, {\n  test: \"webos|web0s\",\n  id: \"webos\"\n}];\n\nfunction parseUserAgentData(osData) {\n  var userAgentData = navigator.userAgentData;\n  var brands = (userAgentData.uaList || userAgentData.brands).slice();\n  var isMobile = userAgentData.mobile || false;\n  var firstBrand = brands[0];\n  var browser = {\n    name: firstBrand.brand,\n    version: firstBrand.version,\n    majorVersion: -1,\n    webkit: false,\n    webkitVersion: \"-1\",\n    chromium: false,\n    chromiumVersion: \"-1\",\n    webview: !!findPresetBrand(WEBVIEW_PRESETS, brands).brand\n  };\n  var os = {\n    name: \"unknown\",\n    version: \"-1\",\n    majorVersion: -1\n  };\n  browser.webkit = !browser.chromium && some(WEBKIT_PRESETS, function (preset) {\n    return findBrand(brands, preset);\n  });\n  var chromiumBrand = findPresetBrand(CHROMIUM_PRESETS, brands);\n  browser.chromium = !!chromiumBrand.brand;\n  browser.chromiumVersion = chromiumBrand.version;\n\n  if (!browser.chromium) {\n    var webkitBrand = findPresetBrand(WEBKIT_PRESETS, brands);\n    browser.webkit = !!webkitBrand.brand;\n    browser.webkitVersion = webkitBrand.version;\n  }\n\n  if (osData) {\n    var platform_1 = osData.platform.toLowerCase();\n    var result = find(OS_PRESETS, function (preset) {\n      return new RegExp(\"\" + preset.test, \"g\").exec(platform_1);\n    });\n    os.name = result ? result.id : platform_1;\n    os.version = osData.platformVersion;\n  }\n\n  var browserBrand = findPresetBrand(BROWSER_PRESETS, brands);\n\n  if (browserBrand.brand) {\n    browser.name = browserBrand.brand;\n    browser.version = osData ? osData.uaFullVersion : browserBrand.version;\n  }\n\n  if (navigator.platform === \"Linux armv8l\") {\n    os.name = \"android\";\n  } else if (browser.webkit) {\n    os.name = isMobile ? \"ios\" : \"mac\";\n  }\n\n  if (os.name === \"ios\" && browser.webview) {\n    browser.version = \"-1\";\n  }\n\n  os.version = convertVersion(os.version);\n  browser.version = convertVersion(browser.version);\n  os.majorVersion = parseInt(os.version, 10);\n  browser.majorVersion = parseInt(browser.version, 10);\n  return {\n    browser: browser,\n    os: os,\n    isMobile: isMobile,\n    isHints: true\n  };\n}\n\nfunction parseUserAgent(userAgent) {\n  var nextAgent = getUserAgent(userAgent);\n  var isMobile = !!/mobi/g.exec(nextAgent);\n  var browser = {\n    name: \"unknown\",\n    version: \"-1\",\n    majorVersion: -1,\n    webview: !!findPreset(WEBVIEW_PRESETS, nextAgent).preset,\n    chromium: false,\n    chromiumVersion: \"-1\",\n    webkit: false,\n    webkitVersion: \"-1\"\n  };\n  var os = {\n    name: \"unknown\",\n    version: \"-1\",\n    majorVersion: -1\n  };\n\n  var _a = findPreset(BROWSER_PRESETS, nextAgent),\n      browserPreset = _a.preset,\n      browserVersion = _a.version;\n\n  var _b = findPreset(OS_PRESETS, nextAgent),\n      osPreset = _b.preset,\n      osVersion = _b.version;\n\n  var chromiumPreset = findPreset(CHROMIUM_PRESETS, nextAgent);\n  browser.chromium = !!chromiumPreset.preset;\n  browser.chromiumVersion = chromiumPreset.version;\n\n  if (!browser.chromium) {\n    var webkitPreset = findPreset(WEBKIT_PRESETS, nextAgent);\n    browser.webkit = !!webkitPreset.preset;\n    browser.webkitVersion = webkitPreset.version;\n  }\n\n  if (osPreset) {\n    os.name = osPreset.id;\n    os.version = osVersion;\n    os.majorVersion = parseInt(osVersion, 10);\n  }\n\n  if (browserPreset) {\n    browser.name = browserPreset.id;\n    browser.version = browserVersion;\n\n    if (browser.webview && os.name === \"ios\" && browser.name !== \"safari\") {\n      browser.webview = false;\n    }\n  }\n\n  browser.majorVersion = parseInt(browser.version, 10);\n  return {\n    browser: browser,\n    os: os,\n    isMobile: isMobile,\n    isHints: false\n  };\n}\n\n/**\n * @namespace eg.agent\n */\n\n/**\n* Extracts accuate browser and operating system information from the user agent string or client hints.\n* @ko 유저 에이전트 문자열 또는 client hints에서 정확한 브라우저와 운영체제 정보를 추출한다.\n* @function eg.agent#getAccurateAgent\n* @param - Callback function to get the accuate agent <ko>정확한 에이전트를 가져오기 위한 callback 함수</ko>\n* @return - get the accuate agent promise. If Promise are not supported, null is returned. <ko> 정확한 에이전트 promise를 가져온다. Promise를 지원 하지 않는 경우, null을 반환한다. </ko>\n* @example\nimport { getAccurateAgent } from \"@egjs/agent\";\n// eg.agent.getAccurateAgent()\ngetAccurateAgent().then(agent => {\n   const { os, browser, isMobile } = agent;\n});\ngetAccurateAgent(agent => {\n    const { os, browser, isMobile } = agent;\n});\n*/\n\nfunction getAccurateAgent(callback) {\n  if (hasUserAgentData()) {\n    return navigator.userAgentData.getHighEntropyValues([\"architecture\", \"model\", \"platform\", \"platformVersion\", \"uaFullVersion\"]).then(function (info) {\n      var agentInfo = parseUserAgentData(info);\n      callback && callback(agentInfo);\n      return agentInfo;\n    });\n  }\n\n  callback && callback(agent());\n\n  if (typeof Promise === \"undefined\" || !Promise) {\n    return null;\n  }\n\n  return Promise.resolve(agent());\n}\n/**\n * Extracts browser and operating system information from the user agent string.\n * @ko 유저 에이전트 문자열에서 브라우저와 운영체제 정보를 추출한다.\n * @function eg.agent#agent\n * @param - user agent string to parse <ko>파싱할 유저에이전트 문자열</ko>\n * @return - agent Info <ko> 에이전트 정보 </ko>\n * @example\nimport agent from \"@egjs/agent\";\n// eg.agent();\nconst { os, browser, isMobile } = agent();\n */\n\nfunction agent(userAgent) {\n  if (typeof userAgent === \"undefined\" && hasUserAgentData()) {\n    return parseUserAgentData();\n  } else {\n    return parseUserAgent(userAgent);\n  }\n}\n\nexport default agent;\nexport { getAccurateAgent };\n//# sourceMappingURL=agent.esm.js.map\n","/*\nCopyright (c) 2020 Daybrush\nname: @scena/matrix\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/matrix\nversion: 1.1.1\n*/\nimport { throttle, TINY_NUM, average } from '@daybrush/utils';\n\nfunction add(matrix, inverseMatrix, startIndex, fromIndex, n, k) {\n  for (var i = 0; i < n; ++i) {\n    var x = startIndex + i * n;\n    var fromX = fromIndex + i * n;\n    matrix[x] += matrix[fromX] * k;\n    inverseMatrix[x] += inverseMatrix[fromX] * k;\n  }\n}\n\nfunction swap(matrix, inverseMatrix, startIndex, fromIndex, n) {\n  for (var i = 0; i < n; ++i) {\n    var x = startIndex + i * n;\n    var fromX = fromIndex + i * n;\n    var v = matrix[x];\n    var iv = inverseMatrix[x];\n    matrix[x] = matrix[fromX];\n    matrix[fromX] = v;\n    inverseMatrix[x] = inverseMatrix[fromX];\n    inverseMatrix[fromX] = iv;\n  }\n}\n\nfunction divide(matrix, inverseMatrix, startIndex, n, k) {\n  for (var i = 0; i < n; ++i) {\n    var x = startIndex + i * n;\n    matrix[x] /= k;\n    inverseMatrix[x] /= k;\n  }\n}\n/**\n *\n * @namespace Matrix\n */\n\n/**\n * @memberof Matrix\n */\n\n\nfunction ignoreDimension(matrix, m, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var newMatrix = matrix.slice();\n\n  for (var i = 0; i < n; ++i) {\n    newMatrix[i * n + m - 1] = 0;\n    newMatrix[(m - 1) * n + i] = 0;\n  }\n\n  newMatrix[(m - 1) * (n + 1)] = 1;\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction invert(matrix, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var newMatrix = matrix.slice();\n  var inverseMatrix = createIdentityMatrix(n);\n\n  for (var i = 0; i < n; ++i) {\n    // diagonal\n    var identityIndex = n * i + i;\n\n    if (!throttle(newMatrix[identityIndex], TINY_NUM)) {\n      // newMatrix[identityIndex] = 0;\n      for (var j = i + 1; j < n; ++j) {\n        if (newMatrix[n * i + j]) {\n          swap(newMatrix, inverseMatrix, i, j, n);\n          break;\n        }\n      }\n    }\n\n    if (!throttle(newMatrix[identityIndex], TINY_NUM)) {\n      // no inverse matrix\n      return [];\n    }\n\n    divide(newMatrix, inverseMatrix, i, n, newMatrix[identityIndex]);\n\n    for (var j = 0; j < n; ++j) {\n      var targetStartIndex = j;\n      var targetIndex = j + i * n;\n      var target = newMatrix[targetIndex];\n\n      if (!throttle(target, TINY_NUM) || i === j) {\n        continue;\n      }\n\n      add(newMatrix, inverseMatrix, targetStartIndex, i, n, -target);\n    }\n  }\n\n  return inverseMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction transpose(matrix, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var newMatrix = [];\n\n  for (var i = 0; i < n; ++i) {\n    for (var j = 0; j < n; ++j) {\n      newMatrix[j * n + i] = matrix[n * i + j];\n    }\n  }\n\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction getOrigin(matrix, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var originMatrix = [];\n  var w = matrix[n * n - 1];\n\n  for (var i = 0; i < n - 1; ++i) {\n    originMatrix[i] = matrix[n * (n - 1) + i] / w;\n  }\n\n  originMatrix[n - 1] = 0;\n  return originMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction fromTranslation(pos, n) {\n  var newMatrix = createIdentityMatrix(n);\n\n  for (var i = 0; i < n - 1; ++i) {\n    newMatrix[n * (n - 1) + i] = pos[i] || 0;\n  }\n\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction convertPositionMatrix(matrix, n) {\n  var newMatrix = matrix.slice();\n\n  for (var i = matrix.length; i < n - 1; ++i) {\n    newMatrix[i] = 0;\n  }\n\n  newMatrix[n - 1] = 1;\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction convertDimension(matrix, n, m) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  } // n < m\n\n\n  if (n === m) {\n    return matrix;\n  }\n\n  var newMatrix = createIdentityMatrix(m);\n  var length = Math.min(n, m);\n\n  for (var i = 0; i < length - 1; ++i) {\n    for (var j = 0; j < length - 1; ++j) {\n      newMatrix[i * m + j] = matrix[i * n + j];\n    }\n\n    newMatrix[(i + 1) * m - 1] = matrix[(i + 1) * n - 1];\n    newMatrix[(m - 1) * m + i] = matrix[(n - 1) * n + i];\n  }\n\n  newMatrix[m * m - 1] = matrix[n * n - 1];\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction multiplies(n) {\n  var matrixes = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    matrixes[_i - 1] = arguments[_i];\n  }\n\n  var m = createIdentityMatrix(n);\n  matrixes.forEach(function (matrix) {\n    m = multiply(m, matrix, n);\n  });\n  return m;\n}\n/**\n * @memberof Matrix\n */\n\nfunction multiply(matrix, matrix2, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var newMatrix = []; // 1 y: n\n  // 1 x: m\n  // 2 x: m\n  // 2 y: k\n  // n * m X m * k\n\n  var m = matrix.length / n;\n  var k = matrix2.length / m;\n\n  if (!m) {\n    return matrix2;\n  } else if (!k) {\n    return matrix;\n  }\n\n  for (var i = 0; i < n; ++i) {\n    for (var j = 0; j < k; ++j) {\n      newMatrix[j * n + i] = 0;\n\n      for (var l = 0; l < m; ++l) {\n        // m1 x: m(l), y: n(i)\n        // m2 x: k(j):  y: m(l)\n        // nw x: n(i), y: k(j)\n        newMatrix[j * n + i] += matrix[l * n + i] * matrix2[j * m + l];\n      }\n    }\n  } // n * k\n\n\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction plus(pos1, pos2) {\n  var length = Math.min(pos1.length, pos2.length);\n  var nextPos = pos1.slice();\n\n  for (var i = 0; i < length; ++i) {\n    nextPos[i] = nextPos[i] + pos2[i];\n  }\n\n  return nextPos;\n}\n/**\n * @memberof Matrix\n */\n\nfunction minus(pos1, pos2) {\n  var length = Math.min(pos1.length, pos2.length);\n  var nextPos = pos1.slice();\n\n  for (var i = 0; i < length; ++i) {\n    nextPos[i] = nextPos[i] - pos2[i];\n  }\n\n  return nextPos;\n}\n/**\n * @memberof Matrix\n */\n\nfunction convertCSStoMatrix(a, is2d) {\n  if (is2d === void 0) {\n    is2d = a.length === 6;\n  }\n\n  if (is2d) {\n    return [a[0], a[1], 0, a[2], a[3], 0, a[4], a[5], 1];\n  }\n\n  return a;\n}\n/**\n * @memberof Matrix\n */\n\nfunction convertMatrixtoCSS(a, is2d) {\n  if (is2d === void 0) {\n    is2d = a.length === 9;\n  }\n\n  if (is2d) {\n    return [a[0], a[1], a[3], a[4], a[6], a[7]];\n  }\n\n  return a;\n}\n/**\n * @memberof Matrix\n */\n\nfunction calculate(matrix, matrix2, n) {\n  if (n === void 0) {\n    n = matrix2.length;\n  }\n\n  var result = multiply(matrix, matrix2, n);\n  var k = result[n - 1];\n  return result.map(function (v) {\n    return v / k;\n  });\n}\n/**\n * @memberof Matrix\n */\n\nfunction rotateX3d(matrix, rad) {\n  return multiply(matrix, [1, 0, 0, 0, 0, Math.cos(rad), Math.sin(rad), 0, 0, -Math.sin(rad), Math.cos(rad), 0, 0, 0, 0, 1], 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction rotateY3d(matrix, rad) {\n  return multiply(matrix, [Math.cos(rad), 0, -Math.sin(rad), 0, 0, 1, 0, 0, Math.sin(rad), 0, Math.cos(rad), 0, 0, 0, 0, 1], 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction rotateZ3d(matrix, rad) {\n  return multiply(matrix, createRotateMatrix(rad, 4));\n}\n/**\n * @memberof Matrix\n */\n\nfunction scale3d(matrix, _a) {\n  var _b = _a[0],\n      sx = _b === void 0 ? 1 : _b,\n      _c = _a[1],\n      sy = _c === void 0 ? 1 : _c,\n      _d = _a[2],\n      sz = _d === void 0 ? 1 : _d;\n  return multiply(matrix, [sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1], 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction rotate(pos, rad) {\n  return calculate(createRotateMatrix(rad, 3), convertPositionMatrix(pos, 3));\n}\n/**\n * @memberof Matrix\n */\n\nfunction translate3d(matrix, _a) {\n  var _b = _a[0],\n      tx = _b === void 0 ? 0 : _b,\n      _c = _a[1],\n      ty = _c === void 0 ? 0 : _c,\n      _d = _a[2],\n      tz = _d === void 0 ? 0 : _d;\n  return multiply(matrix, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, tx, ty, tz, 1], 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction matrix3d(matrix1, matrix2) {\n  return multiply(matrix1, matrix2, 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction createRotateMatrix(rad, n) {\n  var cos = Math.cos(rad);\n  var sin = Math.sin(rad);\n  var m = createIdentityMatrix(n); // cos -sin\n  // sin cos\n\n  m[0] = cos;\n  m[1] = sin;\n  m[n] = -sin;\n  m[n + 1] = cos;\n  return m;\n}\n/**\n * @memberof Matrix\n */\n\nfunction createIdentityMatrix(n) {\n  var length = n * n;\n  var matrix = [];\n\n  for (var i = 0; i < length; ++i) {\n    matrix[i] = i % (n + 1) ? 0 : 1;\n  }\n\n  return matrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction createScaleMatrix(scale, n) {\n  var m = createIdentityMatrix(n);\n  var length = Math.min(scale.length, n - 1);\n\n  for (var i = 0; i < length; ++i) {\n    m[(n + 1) * i] = scale[i];\n  }\n\n  return m;\n}\n/**\n * @memberof Matrix\n */\n\nfunction createOriginMatrix(origin, n) {\n  var m = createIdentityMatrix(n);\n  var length = Math.min(origin.length, n - 1);\n\n  for (var i = 0; i < length; ++i) {\n    m[n * (n - 1) + i] = origin[i];\n  }\n\n  return m;\n}\n/**\n * @memberof Matrix\n */\n\nfunction createWarpMatrix(pos0, pos1, pos2, pos3, nextPos0, nextPos1, nextPos2, nextPos3) {\n  var x0 = pos0[0],\n      y0 = pos0[1];\n  var x1 = pos1[0],\n      y1 = pos1[1];\n  var x2 = pos2[0],\n      y2 = pos2[1];\n  var x3 = pos3[0],\n      y3 = pos3[1];\n  var u0 = nextPos0[0],\n      v0 = nextPos0[1];\n  var u1 = nextPos1[0],\n      v1 = nextPos1[1];\n  var u2 = nextPos2[0],\n      v2 = nextPos2[1];\n  var u3 = nextPos3[0],\n      v3 = nextPos3[1];\n  var matrix = [x0, 0, x1, 0, x2, 0, x3, 0, y0, 0, y1, 0, y2, 0, y3, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, x0, 0, x1, 0, x2, 0, x3, 0, y0, 0, y1, 0, y2, 0, y3, 0, 1, 0, 1, 0, 1, 0, 1, -u0 * x0, -v0 * x0, -u1 * x1, -v1 * x1, -u2 * x2, -v2 * x2, -u3 * x3, -v3 * x3, -u0 * y0, -v0 * y0, -u1 * y1, -v1 * y1, -u2 * y2, -v2 * y2, -u3 * y3, -v3 * y3];\n  var inverseMatrix = invert(matrix, 8);\n\n  if (!inverseMatrix.length) {\n    return [];\n  }\n\n  var h = multiply(inverseMatrix, [u0, v0, u1, v1, u2, v2, u3, v3], 8);\n  h[8] = 1;\n  return convertDimension(transpose(h), 3, 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction getCenter(points) {\n  return [0, 1].map(function (i) {\n    return average(points.map(function (pos) {\n      return pos[i];\n    }));\n  });\n}\n\nexport { calculate, convertCSStoMatrix, convertDimension, convertMatrixtoCSS, convertPositionMatrix, createIdentityMatrix, createOriginMatrix, createRotateMatrix, createScaleMatrix, createWarpMatrix, fromTranslation, getCenter, getOrigin, ignoreDimension, invert, matrix3d, minus, multiplies, multiply, plus, rotate, rotateX3d, rotateY3d, rotateZ3d, scale3d, translate3d, transpose };\n//# sourceMappingURL=matrix.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: css-to-mat\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/css-to-mat.git\nversion: 1.1.0\n*/\nimport { isArray, splitSpace, splitBracket, isObject, splitComma, convertUnitSize, splitUnit } from '@daybrush/utils';\nimport { calculate, matrix3d, invert, translate3d, scale3d, rotateZ3d, rotateX3d, rotateY3d } from '@scena/matrix';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nfunction createMatrix() {\n    return [\n        1, 0, 0, 0,\n        0, 1, 0, 0,\n        0, 0, 1, 0,\n        0, 0, 0, 1,\n    ];\n}\nfunction parseMat(transform, size) {\n    if (size === void 0) { size = 0; }\n    return toMat(parse(transform, size));\n}\nfunction getElementMatrix(el) {\n    return parseMat(getComputedStyle(el).transform);\n}\nfunction calculateMatrixDist(matrix, pos) {\n    var res = calculate(matrix, [pos[0], pos[1] || 0, pos[2] || 0, 1], 4);\n    var w = res[3] || 1;\n    return [\n        res[0] / w,\n        res[1] / w,\n        res[2] / w,\n    ];\n}\nfunction getDistElementMatrix(el, container) {\n    if (container === void 0) { container = document.body; }\n    var target = el;\n    var matrix = createMatrix();\n    while (target) {\n        var transform = getComputedStyle(target).transform;\n        matrix = matrix3d(parseMat(transform), matrix);\n        if (target === container) {\n            break;\n        }\n        target = target.parentElement;\n    }\n    matrix = invert(matrix, 4);\n    matrix[12] = 0;\n    matrix[13] = 0;\n    matrix[14] = 0;\n    return matrix;\n}\nfunction toMat(matrixInfos) {\n    var target = createMatrix();\n    matrixInfos.forEach(function (info) {\n        var matrixFunction = info.matrixFunction, functionValue = info.functionValue;\n        if (!matrixFunction) {\n            return;\n        }\n        target = matrixFunction(target, functionValue);\n    });\n    return target;\n}\nfunction parse(transform, size) {\n    if (size === void 0) { size = 0; }\n    var transforms = isArray(transform) ? transform : splitSpace(transform);\n    return transforms.map(function (t) {\n        var _a = splitBracket(t), name = _a.prefix, value = _a.value;\n        var matrixFunction = null;\n        var functionName = name;\n        var functionValue = \"\";\n        if (name === \"translate\" || name === \"translateX\" || name === \"translate3d\") {\n            var nextSize_1 = isObject(size) ? __assign(__assign({}, size), { \"o%\": size[\"%\"] }) : {\n                \"%\": size,\n                \"o%\": size,\n            };\n            var _b = splitComma(value).map(function (v, i) {\n                if (i === 0 && \"x%\" in nextSize_1) {\n                    nextSize_1[\"%\"] = size[\"x%\"];\n                }\n                else if (i === 1 && \"y%\" in nextSize_1) {\n                    nextSize_1[\"%\"] = size[\"y%\"];\n                }\n                else {\n                    nextSize_1[\"%\"] = size[\"o%\"];\n                }\n                return convertUnitSize(v, nextSize_1);\n            }), posX = _b[0], _c = _b[1], posY = _c === void 0 ? 0 : _c, _d = _b[2], posZ = _d === void 0 ? 0 : _d;\n            matrixFunction = translate3d;\n            functionValue = [posX, posY, posZ];\n        }\n        else if (name === \"translateY\") {\n            var nextSize = isObject(size) ? __assign({ \"%\": size[\"y%\"] }, size) : {\n                \"%\": size,\n            };\n            var posY = convertUnitSize(value, nextSize);\n            matrixFunction = translate3d;\n            functionValue = [0, posY, 0];\n        }\n        else if (name === \"translateZ\") {\n            var posZ = parseFloat(value);\n            matrixFunction = translate3d;\n            functionValue = [0, 0, posZ];\n        }\n        else if (name === \"scale\" || name === \"scale3d\") {\n            var _e = splitComma(value).map(function (v) { return parseFloat(v); }), sx = _e[0], _f = _e[1], sy = _f === void 0 ? sx : _f, _g = _e[2], sz = _g === void 0 ? 1 : _g;\n            matrixFunction = scale3d;\n            functionValue = [sx, sy, sz];\n        }\n        else if (name === \"scaleX\") {\n            var sx = parseFloat(value);\n            matrixFunction = scale3d;\n            functionValue = [sx, 1, 1];\n        }\n        else if (name === \"scaleY\") {\n            var sy = parseFloat(value);\n            matrixFunction = scale3d;\n            functionValue = [1, sy, 1];\n        }\n        else if (name === \"scaleZ\") {\n            var sz = parseFloat(value);\n            matrixFunction = scale3d;\n            functionValue = [1, 1, sz];\n        }\n        else if (name === \"rotate\" || name === \"rotateZ\" || name === \"rotateX\" || name === \"rotateY\") {\n            var _h = splitUnit(value), unit = _h.unit, unitValue = _h.value;\n            var rad = unit === \"rad\" ? unitValue : unitValue * Math.PI / 180;\n            if (name === \"rotate\" || name === \"rotateZ\") {\n                functionName = \"rotateZ\";\n                matrixFunction = rotateZ3d;\n            }\n            else if (name === \"rotateX\") {\n                matrixFunction = rotateX3d;\n            }\n            else if (name === \"rotateY\") {\n                matrixFunction = rotateY3d;\n            }\n            functionValue = rad;\n        }\n        else if (name === \"matrix3d\") {\n            matrixFunction = matrix3d;\n            functionValue = splitComma(value).map(function (v) { return parseFloat(v); });\n        }\n        else if (name === \"matrix\") {\n            var m = splitComma(value).map(function (v) { return parseFloat(v); });\n            matrixFunction = matrix3d;\n            functionValue = [\n                m[0], m[1], 0, 0,\n                m[2], m[3], 0, 0,\n                0, 0, 1, 0,\n                m[4], m[5], 0, 1,\n            ];\n        }\n        else {\n            functionName = \"\";\n        }\n        return {\n            name: name,\n            functionName: functionName,\n            value: value,\n            matrixFunction: matrixFunction,\n            functionValue: functionValue,\n        };\n    });\n}\n\nexport { calculateMatrixDist, createMatrix, getDistElementMatrix, getElementMatrix, parse, parseMat, toMat };\n//# sourceMappingURL=css-to-mat.esm.js.map\n","/*\nCopyright (c) 2019-present NAVER Corp.\nname: @egjs/children-differ\nlicense: MIT\nauthor: NAVER Corp.\nrepository: https://github.com/naver/egjs-children-differ\nversion: 1.0.1\n*/\nimport ListDiffer, { diff as diff$1 } from '@egjs/list-differ';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\n/*\negjs-children-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar findKeyCallback = typeof Map === \"function\" ? undefined : function () {\n  var childrenCount = 0;\n  return function (el) {\n    return el.__DIFF_KEY__ || (el.__DIFF_KEY__ = ++childrenCount);\n  };\n}();\n\n/**\n * A module that checks diff when child are added, removed, or changed .\n * @ko 자식 노드들에서 자식 노드가 추가되거나 삭제되거나 순서가 변경된 사항을 체크하는 모듈입니다.\n * @memberof eg\n * @extends eg.ListDiffer\n */\n\nvar ChildrenDiffer =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(ChildrenDiffer, _super);\n  /**\n   * @param - Initializing Children <ko> 초기 설정할 자식 노드들</ko>\n   */\n\n\n  function ChildrenDiffer(list) {\n    if (list === void 0) {\n      list = [];\n    }\n\n    return _super.call(this, list, findKeyCallback) || this;\n  }\n\n  return ChildrenDiffer;\n}(ListDiffer);\n\n/*\negjs-children-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\n/**\n *\n * @memberof eg.ChildrenDiffer\n * @static\n * @function\n * @param - Previous List <ko> 이전 목록 </ko>\n * @param - List to Update <ko> 업데이트 할 목록 </ko>\n * @return - Returns the diff between `prevList` and `list` <ko> `prevList`와 `list`의 다른 점을 반환한다.</ko>\n * @example\n * import { diff } from \"@egjs/children-differ\";\n * // script => eg.ChildrenDiffer.diff\n * const result = diff([0, 1, 2, 3, 4, 5], [7, 8, 0, 4, 3, 6, 2, 1]);\n * // List before update\n * // [1, 2, 3, 4, 5]\n * console.log(result.prevList);\n * // Updated list\n * // [4, 3, 6, 2, 1]\n * console.log(result.list);\n * // Index array of values added to `list`\n * // [0, 1, 5]\n * console.log(result.added);\n * // Index array of values removed in `prevList`\n * // [5]\n * console.log(result.removed);\n * // An array of index pairs of `prevList` and `list` with different indexes from `prevList` and `list`\n * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n * console.log(result.changed);\n * // The subset of `changed` and an array of index pairs that moved data directly. Indicate an array of absolute index pairs of `ordered`.(Formatted by: Array<[index of prevList, index of list]>)\n * // [[4, 3], [3, 4], [2, 6]]\n * console.log(result.pureChanged);\n * // An array of index pairs to be `ordered` that can synchronize `list` before adding data. (Formatted by: Array<[prevIndex, nextIndex]>)\n * // [[4, 1], [4, 2], [4, 3]]\n * console.log(result.ordered);\n * // An array of index pairs of `prevList` and `list` that have not been added/removed so data is preserved\n * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n * console.log(result.maintained);\n */\n\nfunction diff(prevList, list) {\n  return diff$1(prevList, list, findKeyCallback);\n}\n\n/*\negjs-children-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\n\nexport default ChildrenDiffer;\nexport { diff };\n//# sourceMappingURL=children-differ.esm.js.map\n","/*\nCopyright (c) 2020 Daybrush\nname: overlap-area\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/overlap-area.git\nversion: 1.1.0\n*/\nimport { throttle, TINY_NUM, sum, find, getDist, getShapeDirection, findIndex } from '@daybrush/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n}\n\nfunction tinyThrottle(num) {\n  return throttle(num, TINY_NUM);\n}\nfunction isSameConstants(linearConstants1, linearConstants2) {\n  return linearConstants1.every(function (v, i) {\n    return tinyThrottle(v - linearConstants2[i]) === 0;\n  });\n}\nfunction isSamePoint(point1, point2) {\n  return !tinyThrottle(point1[0] - point2[0]) && !tinyThrottle(point1[1] - point2[1]);\n}\nfunction flat(arr) {\n  return arr.reduce(function (prev, current) {\n    prev.push.apply(prev, current);\n    return prev;\n  }, []);\n}\n\n/**\n * @namespace OverlapArea\n */\n\n/**\n * Gets the size of a shape (polygon) made of points.\n * @memberof OverlapArea\n */\n\nfunction getAreaSize(points) {\n  if (points.length < 3) {\n    return 0;\n  }\n\n  return Math.abs(sum(points.map(function (point, i) {\n    var nextPoint = points[i + 1] || points[0];\n    return point[0] * nextPoint[1] - nextPoint[0] * point[1];\n  }))) / 2;\n}\n/**\n * Get points that fit the rect,\n * @memberof OverlapArea\n */\n\nfunction fitPoints(points, rect) {\n  var width = rect.width,\n      height = rect.height,\n      left = rect.left,\n      top = rect.top;\n\n  var _a = getMinMaxs(points),\n      minX = _a.minX,\n      minY = _a.minY,\n      maxX = _a.maxX,\n      maxY = _a.maxY;\n\n  var ratioX = width / (maxX - minX);\n  var ratioY = height / (maxY - minY);\n  return points.map(function (point) {\n    return [left + (point[0] - minX) * ratioX, top + (point[1] - minY) * ratioY];\n  });\n}\n/**\n * Get the minimum and maximum points of the points.\n * @memberof OverlapArea\n */\n\nfunction getMinMaxs(points) {\n  var xs = points.map(function (point) {\n    return point[0];\n  });\n  var ys = points.map(function (point) {\n    return point[1];\n  });\n  return {\n    minX: Math.min.apply(Math, xs),\n    minY: Math.min.apply(Math, ys),\n    maxX: Math.max.apply(Math, xs),\n    maxY: Math.max.apply(Math, ys)\n  };\n}\n/**\n * Whether the point is in shape\n * @param - point pos\n * @param - shape points\n * @param - whether to check except line\n * @memberof OverlapArea\n */\n\nfunction isInside(pos, points, excludeLine) {\n  var x = pos[0],\n      y = pos[1];\n\n  var _a = getMinMaxs(points),\n      minX = _a.minX,\n      maxX = _a.maxX;\n\n  var xLine = [[minX, y], [maxX, y]];\n  var xLinearConstants = getLinearConstants(xLine[0], xLine[1]);\n  var lines = convertLines(points);\n  var intersectionPosInfos = [];\n  lines.forEach(function (line) {\n    var linearConstants = getLinearConstants(line[0], line[1]);\n    var standardPoint = line[0];\n\n    if (isSameConstants(xLinearConstants, linearConstants)) {\n      intersectionPosInfos.push({\n        pos: pos,\n        line: line,\n        type: \"line\"\n      });\n    } else {\n      var xPoints = getPointsOnLines(getIntersectionPointsByConstants(xLinearConstants, linearConstants), [xLine, line]);\n      xPoints.forEach(function (point) {\n        if (line.some(function (linePoint) {\n          return isSamePoint(linePoint, point);\n        })) {\n          intersectionPosInfos.push({\n            pos: point,\n            line: line,\n            type: \"point\"\n          });\n        } else if (tinyThrottle(standardPoint[1] - y) !== 0) {\n          intersectionPosInfos.push({\n            pos: point,\n            line: line,\n            type: \"intersection\"\n          });\n        }\n      });\n    }\n  });\n\n  if (!excludeLine) {\n    // on line\n    if (find(intersectionPosInfos, function (p) {\n      return p[0] === x;\n    })) {\n      return true;\n    }\n  }\n\n  var intersectionCount = 0;\n  var xMap = {};\n  intersectionPosInfos.forEach(function (_a) {\n    var pos = _a.pos,\n        type = _a.type,\n        line = _a.line;\n\n    if (pos[0] > x) {\n      return;\n    }\n\n    if (type === \"intersection\") {\n      ++intersectionCount;\n    } else if (type === \"line\") {\n      return;\n    } else if (type === \"point\") {\n      var point = find(line, function (linePoint) {\n        return linePoint[1] !== y;\n      });\n      var prevValue = xMap[pos[0]];\n      var nextValue = point[1] > y ? 1 : -1;\n\n      if (!prevValue) {\n        xMap[pos[0]] = nextValue;\n      } else if (prevValue !== nextValue) {\n        ++intersectionCount;\n      }\n    }\n  });\n  return intersectionCount % 2 === 1;\n}\n/**\n * Get distance from point to constants. [a, b, c] (ax + by + c = 0)\n * @return [a, b, c]\n * @memberof OverlapArea\n */\n\nfunction getDistanceFromPointToConstants(_a, pos) {\n  var a = _a[0],\n      b = _a[1],\n      c = _a[2];\n  return (a * pos[0] + b * pos[1] + c) / (a * a + b * b);\n}\n/**\n * Get the coefficient of the linear function. [a, b, c] (ax + by + c = 0)\n * @return [a, b, c]\n * @memberof OverlapArea\n */\n\nfunction getLinearConstants(point1, point2) {\n  var x1 = point1[0],\n      y1 = point1[1];\n  var x2 = point2[0],\n      y2 = point2[1]; // ax + by + c = 0\n  // [a, b, c]\n\n  var dx = x2 - x1;\n  var dy = y2 - y1;\n\n  if (Math.abs(dx) < TINY_NUM) {\n    dx = 0;\n  }\n\n  if (Math.abs(dy) < TINY_NUM) {\n    dy = 0;\n  } // b > 0\n  // ax + by + c = 0\n\n\n  var a = 0;\n  var b = 0;\n  var c = 0;\n\n  if (!dx) {\n    if (dy) {\n      // -x + 1 = 0\n      a = -1;\n      c = x1;\n    }\n  } else if (!dy) {\n    // y - 1 = 0\n    b = 1;\n    c = -y1;\n  } else {\n    // y = -a(x - x1) + y1\n    // ax + y + a * x1 - y1 = 0\n    a = -dy / dx;\n    b = 1;\n    c = -a * x1 - y1;\n  }\n\n  return [a, b, c];\n}\n/**\n * Get intersection points with linear functions.\n * @memberof OverlapArea\n */\n\nfunction getIntersectionPointsByConstants(linearConstants1, linearConstants2) {\n  var a1 = linearConstants1[0],\n      b1 = linearConstants1[1],\n      c1 = linearConstants1[2];\n  var a2 = linearConstants2[0],\n      b2 = linearConstants2[1],\n      c2 = linearConstants2[2];\n  var isZeroA = a1 === 0 && a2 === 0;\n  var isZeroB = b1 === 0 && b2 === 0;\n  var results = [];\n\n  if (isZeroA && isZeroB) {\n    return [];\n  } else if (isZeroA) {\n    // b1 * y + c1 = 0\n    // b2 * y + c2 = 0\n    var y1 = -c1 / b1;\n    var y2 = -c2 / b2;\n\n    if (y1 !== y2) {\n      return [];\n    } else {\n      return [[-Infinity, y1], [Infinity, y1]];\n    }\n  } else if (isZeroB) {\n    // a1 * x + c1 = 0\n    // a2 * x + c2 = 0\n    var x1 = -c1 / a1;\n    var x2 = -c2 / a2;\n\n    if (x1 !== x2) {\n      return [];\n    } else {\n      return [[x1, -Infinity], [x1, Infinity]];\n    }\n  } else if (a1 === 0) {\n    // b1 * y + c1 = 0\n    // y = - c1 / b1;\n    // a2 * x + b2 * y + c2 = 0\n    var y = -c1 / b1;\n    var x = -(b2 * y + c2) / a2;\n    results = [[x, y]];\n  } else if (a2 === 0) {\n    // b2 * y + c2 = 0\n    // y = - c2 / b2;\n    // a1 * x + b1 * y + c1 = 0\n    var y = -c2 / b2;\n    var x = -(b1 * y + c1) / a1;\n    results = [[x, y]];\n  } else if (b1 === 0) {\n    // a1 * x + c1 = 0\n    // x = - c1 / a1;\n    // a2 * x + b2 * y + c2 = 0\n    var x = -c1 / a1;\n    var y = -(a2 * x + c2) / b2;\n    results = [[x, y]];\n  } else if (b2 === 0) {\n    // a2 * x + c2 = 0\n    // x = - c2 / a2;\n    // a1 * x + b1 * y + c1 = 0\n    var x = -c2 / a2;\n    var y = -(a1 * x + c1) / b1;\n    results = [[x, y]];\n  } else {\n    // a1 * x + b1 * y + c1 = 0\n    // a2 * x + b2 * y + c2 = 0\n    // b2 * a1 * x + b2 * b1 * y + b2 * c1 = 0\n    // b1 * a2 * x + b1 * b2 * y + b1 * c2 = 0\n    // (b2 * a1 - b1 * a2)  * x = (b1 * c2 - b2 * c1)\n    var x = (b1 * c2 - b2 * c1) / (b2 * a1 - b1 * a2);\n    var y = -(a1 * x + c1) / b1;\n    results = [[x, y]];\n  }\n\n  return results.map(function (result) {\n    return [result[0], result[1]];\n  });\n}\n/**\n * Get intersection points to the two lines.\n * @memberof OverlapArea\n */\n\nfunction getIntersectionPoints(line1, line2, isLimit) {\n  var points = getIntersectionPointsByConstants(getLinearConstants(line1[0], line1[1]), getLinearConstants(line2[0], line2[1]));\n\n  if (isLimit) {\n    return getPointsOnLines(points, [line1, line2]);\n  }\n\n  return points;\n}\nfunction isPointOnLine(pos, line) {\n  var linearConstants = getLinearConstants(line[0], line[1]);\n  return tinyThrottle(getDistanceFromPointToConstants(linearConstants, pos)) === 0;\n}\n/**\n * Get the points on the lines (between two points).\n * @memberof OverlapArea\n */\n\nfunction getPointsOnLines(points, lines) {\n  var minMaxs = lines.map(function (line) {\n    return [0, 1].map(function (order) {\n      return [Math.min(line[0][order], line[1][order]), Math.max(line[0][order], line[1][order])];\n    });\n  });\n  var results = [];\n\n  if (points.length === 2) {\n    var _a = points[0],\n        x = _a[0],\n        y = _a[1];\n\n    if (!tinyThrottle(x - points[1][0])) {\n      /// Math.max(minY1, minY2)\n      var top = Math.max.apply(Math, minMaxs.map(function (minMax) {\n        return minMax[1][0];\n      })); /// Math.min(maxY1, miax2)\n\n      var bottom = Math.min.apply(Math, minMaxs.map(function (minMax) {\n        return minMax[1][1];\n      }));\n\n      if (tinyThrottle(top - bottom) > 0) {\n        return [];\n      }\n\n      results = [[x, top], [x, bottom]];\n    } else if (!tinyThrottle(y - points[1][1])) {\n      /// Math.max(minY1, minY2)\n      var left = Math.max.apply(Math, minMaxs.map(function (minMax) {\n        return minMax[0][0];\n      })); /// Math.min(maxY1, miax2)\n\n      var right = Math.min.apply(Math, minMaxs.map(function (minMax) {\n        return minMax[0][1];\n      }));\n\n      if (tinyThrottle(left - right) > 0) {\n        return [];\n      }\n\n      results = [[left, y], [right, y]];\n    }\n  }\n\n  if (!results.length) {\n    results = points.filter(function (point) {\n      var pointX = point[0],\n          pointY = point[1];\n      return minMaxs.every(function (minMax) {\n        return 0 <= tinyThrottle(pointX - minMax[0][0]) && 0 <= tinyThrottle(minMax[0][1] - pointX) && 0 <= tinyThrottle(pointY - minMax[1][0]) && 0 <= tinyThrottle(minMax[1][1] - pointY);\n      });\n    });\n  }\n\n  return results.map(function (result) {\n    return [tinyThrottle(result[0]), tinyThrottle(result[1])];\n  });\n}\n/**\n* Convert two points into lines.\n* @function\n* @memberof OverlapArea\n*/\n\nfunction convertLines(points) {\n  return __spreadArrays(points.slice(1), [points[0]]).map(function (point, i) {\n    return [points[i], point];\n  });\n}\n\nfunction getOverlapPointInfos(points1, points2) {\n  var targetPoints1 = points1.slice();\n  var targetPoints2 = points2.slice();\n\n  if (getShapeDirection(targetPoints1) === -1) {\n    targetPoints1.reverse();\n  }\n\n  if (getShapeDirection(targetPoints2) === -1) {\n    targetPoints2.reverse();\n  }\n\n  var lines1 = convertLines(targetPoints1);\n  var lines2 = convertLines(targetPoints2);\n  var linearConstantsList1 = lines1.map(function (line1) {\n    return getLinearConstants(line1[0], line1[1]);\n  });\n  var linearConstantsList2 = lines2.map(function (line2) {\n    return getLinearConstants(line2[0], line2[1]);\n  });\n  var overlapInfos = [];\n  linearConstantsList1.forEach(function (linearConstants1, i) {\n    var line1 = lines1[i];\n    var linePointInfos = [];\n    linearConstantsList2.forEach(function (linearConstants2, j) {\n      var intersectionPoints = getIntersectionPointsByConstants(linearConstants1, linearConstants2);\n      var points = getPointsOnLines(intersectionPoints, [line1, lines2[j]]);\n      linePointInfos.push.apply(linePointInfos, points.map(function (pos) {\n        return {\n          index1: i,\n          index2: j,\n          pos: pos,\n          type: \"intersection\"\n        };\n      }));\n    });\n    linePointInfos.sort(function (a, b) {\n      return getDist(line1[0], a.pos) - getDist(line1[0], b.pos);\n    });\n    overlapInfos.push.apply(overlapInfos, linePointInfos);\n\n    if (isInside(line1[1], targetPoints2)) {\n      overlapInfos.push({\n        index1: i,\n        index2: -1,\n        pos: line1[1],\n        type: \"inside\"\n      });\n    }\n  });\n  lines2.forEach(function (line2, i) {\n    if (!isInside(line2[1], targetPoints1)) {\n      return;\n    }\n\n    var isNext = false;\n    var index = findIndex(overlapInfos, function (_a) {\n      var index2 = _a.index2;\n\n      if (index2 === i) {\n        isNext = true;\n        return false;\n      }\n\n      if (isNext) {\n        return true;\n      }\n\n      return false;\n    });\n\n    if (index === -1) {\n      isNext = false;\n      index = findIndex(overlapInfos, function (_a) {\n        var index1 = _a.index1,\n            index2 = _a.index2;\n\n        if (index1 === -1 && index2 + 1 === i) {\n          isNext = true;\n          return false;\n        }\n\n        if (isNext) {\n          return true;\n        }\n\n        return false;\n      });\n    }\n\n    if (index === -1) {\n      overlapInfos.push({\n        index1: -1,\n        index2: i,\n        pos: line2[1],\n        type: \"inside\"\n      });\n    } else {\n      overlapInfos.splice(index, 0, {\n        index1: -1,\n        index2: i,\n        pos: line2[1],\n        type: \"inside\"\n      });\n    }\n  });\n  var pointMap = {};\n  return overlapInfos.filter(function (_a) {\n    var pos = _a.pos;\n    var key = pos[0] + \"x\" + pos[1];\n\n    if (pointMap[key]) {\n      return false;\n    }\n\n    pointMap[key] = true;\n    return true;\n  });\n}\n/**\n* Get the points of the overlapped part of two shapes.\n* @function\n* @memberof OverlapArea\n*/\n\n\nfunction getOverlapPoints(points1, points2) {\n  var infos = getOverlapPointInfos(points1, points2);\n  return infos.map(function (_a) {\n    var pos = _a.pos;\n    return pos;\n  });\n}\n\nfunction isConnectedLine(line) {\n  var _a = line[0],\n      prevIndex1 = _a.index1,\n      prevIndex2 = _a.index2,\n      _b = line[1],\n      nextIndex1 = _b.index1,\n      nextIndex2 = _b.index2;\n\n  if (prevIndex1 !== -1) {\n    // same line\n    if (prevIndex1 === nextIndex1) {\n      return true;\n    }\n\n    if (prevIndex1 + 1 === nextIndex1) {\n      return true;\n    }\n  }\n\n  if (prevIndex2 !== -1) {\n    // same line\n    if (prevIndex2 === nextIndex2) {\n      return true;\n    }\n\n    if (prevIndex2 + 1 === nextIndex2) {\n      return true;\n    }\n  }\n\n  return false;\n}\n/**\n* Get the areas of the overlapped part of two shapes.\n* @function\n* @memberof OverlapArea\n*/\n\n\nfunction getOverlapAreas(points1, points2) {\n  var infos = getOverlapPointInfos(points1, points2);\n  var areas = [];\n  var area;\n  getOverlapPointInfos(points1, points2).forEach(function (info, i, arr) {\n    if (i === 0 || !isConnectedLine([arr[i - 1], info])) {\n      area = [info];\n      areas.push(area);\n    } else {\n      area.push(info);\n    }\n  });\n  return areas.map(function (area) {\n    return area.map(function (_a) {\n      var pos = _a.pos;\n      return pos;\n    });\n  });\n}\n\nfunction findReversedAreas(points1, points2, index, areas) {\n  if (index === void 0) {\n    index = 0;\n  }\n\n  if (areas === void 0) {\n    areas = [];\n  }\n\n  var isFirst = areas.length === 0;\n  var length = points1.length;\n  var nextIndex = points1[index] ? index : 0;\n\n  var nextPoints1 = __spreadArrays(points1.slice(nextIndex), points1.slice(0, nextIndex));\n\n  var _loop_1 = function (i) {\n    var point1 = nextPoints1[i];\n\n    if (find(points2, function (point2) {\n      return point2[0] === point1[0] && point2[1] === point1[1];\n    })) {\n      return \"continue\";\n    }\n\n    if (areas.some(function (nextArea) {\n      return find(nextArea, function (areaPoint) {\n        return areaPoint[0] === point1[0] && areaPoint[1] === point1[1];\n      });\n    })) {\n      if (isFirst) {\n        return \"continue\";\n      } else {\n        return \"break\";\n      }\n    }\n\n    var nextArea = void 0;\n\n    if (isFirst) {\n      nextArea = [];\n      areas.push(nextArea);\n    } else {\n      nextArea = areas[areas.length - 1];\n    }\n\n    nextArea.push(point1);\n    var line = [point1, points1[index + 1] || points1[0]];\n    var nextPoint2 = points2.filter(function (point2) {\n      return isPointOnLine(point2, line);\n    }).sort(function (a, b) {\n      return getDist(point1, a) - getDist(point1, b);\n    })[0];\n\n    if (!nextPoint2) {\n      findReversedAreas(nextPoints1, points2, i + 1, areas);\n      return \"break\";\n    } else {\n      var point2Index = points2.indexOf(nextPoint2);\n      findReversedAreas(points2, points1, point2Index, areas);\n\n      if (!isFirst) {\n        return \"break\";\n      }\n    }\n  };\n\n  for (var i = 0; i < length; ++i) {\n    var state_1 = _loop_1(i);\n\n    if (state_1 === \"break\") break;\n  }\n\n  return areas;\n}\n\nfunction findConnectedAreas(points1, points2) {\n  return findReversedAreas(points1, __spreadArrays(points2).reverse());\n}\n/**\n* Get non-overlapping areas of two shapes based on points1.\n* @memberof OverlapArea\n*/\n\nfunction getUnoverlapAreas(points1, points2) {\n  if (!points2.length) {\n    return [__spreadArrays(points1)];\n  }\n\n  var overlapAreas = getOverlapAreas(points1, points2);\n  var unoverlapAreas = [points1];\n  overlapAreas.forEach(function (overlapArea) {\n    var nextOverlapArea = __spreadArrays(overlapArea).reverse();\n\n    unoverlapAreas = flat(unoverlapAreas.map(function (area) {\n      var connectedAreas = findReversedAreas(area, nextOverlapArea);\n      var firstConnectedArea = connectedAreas[0];\n\n      if (connectedAreas.length === 1 && nextOverlapArea.every(function (point) {\n        return firstConnectedArea.indexOf(point) === -1;\n      })) {\n        var lastPoint_1 = firstConnectedArea[firstConnectedArea.length - 1];\n\n        var firstPoint = __spreadArrays(nextOverlapArea).sort(function (a, b) {\n          return getDist(lastPoint_1, a) - getDist(lastPoint_1, b);\n        })[0];\n\n        var firstIndex = nextOverlapArea.indexOf(firstPoint);\n        firstConnectedArea.push.apply(firstConnectedArea, __spreadArrays(nextOverlapArea.slice(firstIndex), nextOverlapArea.slice(0, firstIndex), [nextOverlapArea[firstIndex], lastPoint_1]));\n      }\n\n      return connectedAreas;\n    }));\n  });\n  return unoverlapAreas;\n}\n/**\n* Gets the size of the overlapped part of two shapes.\n* @function\n* @memberof OverlapArea\n*/\n\nfunction getOverlapSize(points1, points2) {\n  var points = getOverlapPoints(points1, points2);\n  return getAreaSize(points);\n}\n\nexport { convertLines, findConnectedAreas, fitPoints, getAreaSize, getDistanceFromPointToConstants, getIntersectionPoints, getIntersectionPointsByConstants, getLinearConstants, getMinMaxs, getOverlapAreas, getOverlapPoints, getOverlapSize, getPointsOnLines, getUnoverlapAreas, isInside, isPointOnLine };\n//# sourceMappingURL=overlap-area.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: @scena/event-emitter\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/gesture.git\nversion: 1.0.5\n*/\nimport { isObject, findIndex } from '@daybrush/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n}\n\n/**\n * Implement EventEmitter on object or component.\n */\n\nvar EventEmitter =\n/*#__PURE__*/\nfunction () {\n  function EventEmitter() {\n    this._events = {};\n  }\n  /**\n   * Add a listener to the registered event.\n   * @param - Name of the event to be added\n   * @param - listener function of the event to be added\n   * @example\n   * import EventEmitter from \"@scena/event-emitter\";\n   * cosnt emitter = new EventEmitter();\n   *\n   * // Add listener in \"a\" event\n   * emitter.on(\"a\", () => {\n   * });\n   * // Add listeners\n   * emitter.on({\n   *  a: () => {},\n   *  b: () => {},\n   * });\n   */\n\n\n  var __proto = EventEmitter.prototype;\n\n  __proto.on = function (eventName, listener) {\n    if (isObject(eventName)) {\n      for (var name in eventName) {\n        this.on(name, eventName[name]);\n      }\n    } else {\n      this._addEvent(eventName, listener, {});\n    }\n\n    return this;\n  };\n  /**\n   * Remove listeners registered in the event target.\n   * @param - Name of the event to be removed\n   * @param - listener function of the event to be removed\n   * @example\n   * import EventEmitter from \"@scena/event-emitter\";\n   * cosnt emitter = new EventEmitter();\n   *\n   * // Remove all listeners.\n   * emitter.off();\n   *\n   * // Remove all listeners in \"A\" event.\n   * emitter.off(\"a\");\n   *\n   *\n   * // Remove \"listener\" listener in \"a\" event.\n   * emitter.off(\"a\", listener);\n   */\n\n\n  __proto.off = function (eventName, listener) {\n    if (!eventName) {\n      this._events = {};\n    } else if (isObject(eventName)) {\n      for (var name in eventName) {\n        this.off(name);\n      }\n    } else if (!listener) {\n      this._events[eventName] = [];\n    } else {\n      var events = this._events[eventName];\n\n      if (events) {\n        var index = findIndex(events, function (e) {\n          return e.listener === listener;\n        });\n\n        if (index > -1) {\n          events.splice(index, 1);\n        }\n      }\n    }\n\n    return this;\n  };\n  /**\n   * Add a disposable listener and Use promise to the registered event.\n   * @param - Name of the event to be added\n   * @param - disposable listener function of the event to be added\n   * @example\n   * import EventEmitter from \"@scena/event-emitter\";\n   * cosnt emitter = new EventEmitter();\n   *\n   * // Add a disposable listener in \"a\" event\n   * emitter.once(\"a\", () => {\n   * });\n   *\n   * // Use Promise\n   * emitter.once(\"a\").then(e => {\n   * });\n   */\n\n\n  __proto.once = function (eventName, listener) {\n    var _this = this;\n\n    if (listener) {\n      this._addEvent(eventName, listener, {\n        once: true\n      });\n    }\n\n    return new Promise(function (resolve) {\n      _this._addEvent(eventName, resolve, {\n        once: true\n      });\n    });\n  };\n  /**\n   * Fires an event to call listeners.\n   * @param - Event name\n   * @param - Event parameter\n   * @return If false, stop the event.\n   * @example\n   *\n   * import EventEmitter from \"@scena/event-emitter\";\n   *\n   *\n   * const emitter = new EventEmitter();\n   *\n   * emitter.on(\"a\", e => {\n   * });\n   *\n   *\n   * emitter.emit(\"a\", {\n   *   a: 1,\n   * });\n   */\n\n\n  __proto.emit = function (eventName, param) {\n    var _this = this;\n\n    if (param === void 0) {\n      param = {};\n    }\n\n    var events = this._events[eventName];\n\n    if (!eventName || !events) {\n      return true;\n    }\n\n    var isStop = false;\n    param.eventType = eventName;\n\n    param.stop = function () {\n      isStop = true;\n    };\n\n    param.currentTarget = this;\n\n    __spreadArrays(events).forEach(function (info) {\n      info.listener(param);\n\n      if (info.once) {\n        _this.off(eventName, info.listener);\n      }\n    });\n\n    return !isStop;\n  };\n  /**\n   * Fires an event to call listeners.\n   * @param - Event name\n   * @param - Event parameter\n   * @return If false, stop the event.\n   * @example\n   *\n   * import EventEmitter from \"@scena/event-emitter\";\n   *\n   *\n   * const emitter = new EventEmitter();\n   *\n   * emitter.on(\"a\", e => {\n   * });\n   *\n   *\n   * emitter.emit(\"a\", {\n   *   a: 1,\n   * });\n   */\n\n  /**\n  * Fires an event to call listeners.\n  * @param - Event name\n  * @param - Event parameter\n  * @return If false, stop the event.\n  * @example\n  *\n  * import EventEmitter from \"@scena/event-emitter\";\n  *\n  *\n  * const emitter = new EventEmitter();\n  *\n  * emitter.on(\"a\", e => {\n  * });\n  *\n  * // emit\n  * emitter.trigger(\"a\", {\n  *   a: 1,\n  * });\n  */\n\n\n  __proto.trigger = function (eventName, param) {\n    if (param === void 0) {\n      param = {};\n    }\n\n    return this.emit(eventName, param);\n  };\n\n  __proto._addEvent = function (eventName, listener, options) {\n    var events = this._events;\n    events[eventName] = events[eventName] || [];\n    var listeners = events[eventName];\n    listeners.push(__assign({\n      listener: listener\n    }, options));\n  };\n\n  return EventEmitter;\n}();\n\nexport default EventEmitter;\n//# sourceMappingURL=event-emitter.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: @scena/dragscroll\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/dragscroll.git\nversion: 1.4.0\n*/\nimport EventEmitter from '@scena/event-emitter';\nimport { now, isString, isFunction } from '@daybrush/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n  return extendStatics(d, b);\n};\nfunction __extends(d, b) {\n  extendStatics(d, b);\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\n\nfunction getDefaultScrollPosition(e) {\n  var container = e.container;\n  if (container === document.body) {\n    return [container.scrollLeft || document.documentElement.scrollLeft, container.scrollTop || document.documentElement.scrollTop];\n  }\n  return [container.scrollLeft, container.scrollTop];\n}\nfunction checkDefaultScrollEvent(container, callback) {\n  container.addEventListener(\"scroll\", callback);\n  return function () {\n    container.removeEventListener(\"scroll\", callback);\n  };\n}\nfunction getContainerElement(container) {\n  if (!container) {\n    return null;\n  } else if (isString(container)) {\n    return document.querySelector(container);\n  }\n  if (isFunction(container)) {\n    return container();\n  } else if (container instanceof Element) {\n    return container;\n  } else if (\"current\" in container) {\n    return container.current;\n  } else if (\"value\" in container) {\n    return container.value;\n  }\n}\n/**\n * @sort 1\n */\nvar DragScroll = /*#__PURE__*/function (_super) {\n  __extends(DragScroll, _super);\n  function DragScroll() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._startRect = null;\n    _this._startPos = [];\n    _this._prevTime = 0;\n    _this._timer = 0;\n    _this._prevScrollPos = [0, 0];\n    _this._isWait = false;\n    _this._flag = false;\n    _this._currentOptions = null;\n    _this._lock = false;\n    _this._unregister = null;\n    _this._onScroll = function () {\n      var options = _this._currentOptions;\n      if (_this._lock || !options) {\n        return;\n      }\n      _this.emit(\"scrollDrag\", {\n        next: function (inputEvent) {\n          _this.checkScroll({\n            container: options.container,\n            inputEvent: inputEvent\n          });\n        }\n      });\n    };\n    return _this;\n  }\n  /**\n   */\n  var __proto = DragScroll.prototype;\n  __proto.dragStart = function (e, options) {\n    var container = getContainerElement(options.container);\n    if (!container) {\n      this._flag = false;\n      return;\n    }\n    var top = 0;\n    var left = 0;\n    var width = 0;\n    var height = 0;\n    if (container === document.body) {\n      width = window.innerWidth;\n      height = window.innerHeight;\n    } else {\n      var rect = container.getBoundingClientRect();\n      top = rect.top;\n      left = rect.left;\n      width = rect.width;\n      height = rect.height;\n    }\n    this._flag = true;\n    this._startPos = [e.clientX, e.clientY];\n    this._startRect = {\n      top: top,\n      left: left,\n      width: width,\n      height: height\n    };\n    this._prevScrollPos = this._getScrollPosition([0, 0], options);\n    this._currentOptions = options;\n    this._registerScrollEvent(options);\n  };\n  __proto.drag = function (e, options) {\n    clearTimeout(this._timer);\n    if (!this._flag) {\n      return;\n    }\n    var clientX = e.clientX,\n      clientY = e.clientY;\n    var _a = options.threshold,\n      threshold = _a === void 0 ? 0 : _a;\n    var _b = this,\n      _startRect = _b._startRect,\n      _startPos = _b._startPos;\n    this._currentOptions = options;\n    var direction = [0, 0];\n    if (_startRect.top > clientY - threshold) {\n      if (_startPos[1] > _startRect.top || clientY < _startPos[1]) {\n        direction[1] = -1;\n      }\n    } else if (_startRect.top + _startRect.height < clientY + threshold) {\n      if (_startPos[1] < _startRect.top + _startRect.height || clientY > _startPos[1]) {\n        direction[1] = 1;\n      }\n    }\n    if (_startRect.left > clientX - threshold) {\n      if (_startPos[0] > _startRect.left || clientX < _startPos[0]) {\n        direction[0] = -1;\n      }\n    } else if (_startRect.left + _startRect.width < clientX + threshold) {\n      if (_startPos[0] < _startRect.left + _startRect.width || clientX > _startPos[0]) {\n        direction[0] = 1;\n      }\n    }\n    if (!direction[0] && !direction[1]) {\n      return false;\n    }\n    return this._continueDrag(__assign(__assign({}, options), {\n      direction: direction,\n      inputEvent: e,\n      isDrag: true\n    }));\n  };\n  /**\n   */\n  __proto.checkScroll = function (options) {\n    var _this = this;\n    if (this._isWait) {\n      return false;\n    }\n    var _a = options.prevScrollPos,\n      prevScrollPos = _a === void 0 ? this._prevScrollPos : _a,\n      direction = options.direction,\n      _b = options.throttleTime,\n      throttleTime = _b === void 0 ? 0 : _b,\n      inputEvent = options.inputEvent,\n      isDrag = options.isDrag;\n    var nextScrollPos = this._getScrollPosition(direction || [0, 0], options);\n    var offsetX = nextScrollPos[0] - prevScrollPos[0];\n    var offsetY = nextScrollPos[1] - prevScrollPos[1];\n    var nextDirection = direction || [offsetX ? Math.abs(offsetX) / offsetX : 0, offsetY ? Math.abs(offsetY) / offsetY : 0];\n    this._prevScrollPos = nextScrollPos;\n    this._lock = false;\n    if (!offsetX && !offsetY) {\n      return false;\n    }\n    /**\n     * @event DragScroll#move\n     */\n    this.emit(\"move\", {\n      offsetX: nextDirection[0] ? offsetX : 0,\n      offsetY: nextDirection[1] ? offsetY : 0,\n      inputEvent: inputEvent\n    });\n    if (throttleTime && isDrag) {\n      clearTimeout(this._timer);\n      this._timer = window.setTimeout(function () {\n        _this._continueDrag(options);\n      }, throttleTime);\n    }\n    return true;\n  };\n  /**\n   *\n   */\n  __proto.dragEnd = function () {\n    this._flag = false;\n    this._lock = false;\n    clearTimeout(this._timer);\n    this._unregisterScrollEvent();\n  };\n  __proto._getScrollPosition = function (direction, options) {\n    var container = options.container,\n      _a = options.getScrollPosition,\n      getScrollPosition = _a === void 0 ? getDefaultScrollPosition : _a;\n    return getScrollPosition({\n      container: getContainerElement(container),\n      direction: direction\n    });\n  };\n  __proto._continueDrag = function (options) {\n    var _this = this;\n    var _a;\n    var container = options.container,\n      direction = options.direction,\n      throttleTime = options.throttleTime,\n      useScroll = options.useScroll,\n      isDrag = options.isDrag,\n      inputEvent = options.inputEvent;\n    if (!this._flag || isDrag && this._isWait) {\n      return;\n    }\n    var nowTime = now();\n    var distTime = Math.max(throttleTime + this._prevTime - nowTime, 0);\n    if (distTime > 0) {\n      clearTimeout(this._timer);\n      this._timer = window.setTimeout(function () {\n        _this._continueDrag(options);\n      }, distTime);\n      return false;\n    }\n    this._prevTime = nowTime;\n    var prevScrollPos = this._getScrollPosition(direction, options);\n    this._prevScrollPos = prevScrollPos;\n    if (isDrag) {\n      this._isWait = true;\n    }\n    // unregister native scroll event\n    if (!useScroll) {\n      this._lock = true;\n    }\n    var param = {\n      container: getContainerElement(container),\n      direction: direction,\n      inputEvent: inputEvent\n    };\n    (_a = options.requestScroll) === null || _a === void 0 ? void 0 : _a.call(options, param);\n    /**\n     * @event DragScroll#scroll\n     */\n    this.emit(\"scroll\", param);\n    this._isWait = false;\n    return useScroll || this.checkScroll(__assign(__assign({}, options), {\n      prevScrollPos: prevScrollPos,\n      direction: direction,\n      inputEvent: inputEvent\n    }));\n  };\n  __proto._registerScrollEvent = function (options) {\n    this._unregisterScrollEvent();\n    var checkScrollEvent = options.checkScrollEvent;\n    if (!checkScrollEvent) {\n      return;\n    }\n    var callback = checkScrollEvent === true ? checkDefaultScrollEvent : checkScrollEvent;\n    var container = getContainerElement(options.container);\n    if (checkScrollEvent === true && (container === document.body || container === document.documentElement)) {\n      this._unregister = checkDefaultScrollEvent(window, this._onScroll);\n    } else {\n      this._unregister = callback(container, this._onScroll);\n    }\n  };\n  __proto._unregisterScrollEvent = function () {\n    var _a;\n    (_a = this._unregister) === null || _a === void 0 ? void 0 : _a.call(this);\n    this._unregister = null;\n  };\n  return DragScroll;\n}(EventEmitter);\n\nexport default DragScroll;\n//# sourceMappingURL=dragscroll.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: gesto\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/gesto.git\nversion: 1.19.1\n*/\nimport EventEmitter from '@scena/event-emitter';\nimport { removeEvent, addEvent, now, isWindow, getWindow } from '@daybrush/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nfunction getRad(pos1, pos2) {\n    var distX = pos2[0] - pos1[0];\n    var distY = pos2[1] - pos1[1];\n    var rad = Math.atan2(distY, distX);\n    return rad >= 0 ? rad : rad + Math.PI * 2;\n}\nfunction getRotatiion(touches) {\n    return getRad([\n        touches[0].clientX,\n        touches[0].clientY,\n    ], [\n        touches[1].clientX,\n        touches[1].clientY,\n    ]) / Math.PI * 180;\n}\nfunction isMultiTouch(e) {\n    return e.touches && e.touches.length >= 2;\n}\nfunction getEventClients(e) {\n    if (!e) {\n        return [];\n    }\n    if (e.touches) {\n        return getClients(e.touches);\n    }\n    else {\n        return [getClient(e)];\n    }\n}\nfunction isMouseEvent(e) {\n    return e && (e.type.indexOf(\"mouse\") > -1 || \"button\" in e);\n}\nfunction getPosition(clients, prevClients, startClients) {\n    var length = startClients.length;\n    var _a = getAverageClient(clients, length), clientX = _a.clientX, clientY = _a.clientY, originalClientX = _a.originalClientX, originalClientY = _a.originalClientY;\n    var _b = getAverageClient(prevClients, length), prevX = _b.clientX, prevY = _b.clientY;\n    var _c = getAverageClient(startClients, length), startX = _c.clientX, startY = _c.clientY;\n    var deltaX = clientX - prevX;\n    var deltaY = clientY - prevY;\n    var distX = clientX - startX;\n    var distY = clientY - startY;\n    return {\n        clientX: originalClientX,\n        clientY: originalClientY,\n        deltaX: deltaX,\n        deltaY: deltaY,\n        distX: distX,\n        distY: distY,\n    };\n}\nfunction getDist(clients) {\n    return Math.sqrt(Math.pow(clients[0].clientX - clients[1].clientX, 2)\n        + Math.pow(clients[0].clientY - clients[1].clientY, 2));\n}\nfunction getClients(touches) {\n    var length = Math.min(touches.length, 2);\n    var clients = [];\n    for (var i = 0; i < length; ++i) {\n        clients.push(getClient(touches[i]));\n    }\n    return clients;\n}\nfunction getClient(e) {\n    return {\n        clientX: e.clientX,\n        clientY: e.clientY,\n    };\n}\nfunction getAverageClient(clients, length) {\n    if (length === void 0) { length = clients.length; }\n    var sumClient = {\n        clientX: 0,\n        clientY: 0,\n        originalClientX: 0,\n        originalClientY: 0,\n    };\n    for (var i = 0; i < length; ++i) {\n        var client = clients[i];\n        sumClient.originalClientX += \"originalClientX\" in client ? client.originalClientX : client.clientX;\n        sumClient.originalClientY += \"originalClientY\" in client ? client.originalClientY : client.clientY;\n        sumClient.clientX += client.clientX;\n        sumClient.clientY += client.clientY;\n    }\n    if (!length) {\n        return sumClient;\n    }\n    return {\n        clientX: sumClient.clientX / length,\n        clientY: sumClient.clientY / length,\n        originalClientX: sumClient.originalClientX / length,\n        originalClientY: sumClient.originalClientY / length,\n    };\n}\n\nvar ClientStore = /*#__PURE__*/ (function () {\n    function ClientStore(clients) {\n        this.prevClients = [];\n        this.startClients = [];\n        this.movement = 0;\n        this.length = 0;\n        this.startClients = clients;\n        this.prevClients = clients;\n        this.length = clients.length;\n    }\n    ClientStore.prototype.getAngle = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        return getRotatiion(clients);\n    };\n    ClientStore.prototype.getRotation = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        return getRotatiion(clients) - getRotatiion(this.startClients);\n    };\n    ClientStore.prototype.getPosition = function (clients, isAdd) {\n        if (clients === void 0) { clients = this.prevClients; }\n        var position = getPosition(clients || this.prevClients, this.prevClients, this.startClients);\n        var deltaX = position.deltaX, deltaY = position.deltaY;\n        this.movement += Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n        this.prevClients = clients;\n        return position;\n    };\n    ClientStore.prototype.getPositions = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        var prevClients = this.prevClients;\n        return this.startClients.map(function (startClient, i) { return getPosition([clients[i]], [prevClients[i]], [startClient]); });\n    };\n    ClientStore.prototype.getMovement = function (clients) {\n        var movement = this.movement;\n        if (!clients) {\n            return movement;\n        }\n        var currentClient = getAverageClient(clients, this.length);\n        var prevClient = getAverageClient(this.prevClients, this.length);\n        var deltaX = currentClient.clientX - prevClient.clientX;\n        var deltaY = currentClient.clientY - prevClient.clientY;\n        return Math.sqrt(deltaX * deltaX + deltaY * deltaY) + movement;\n    };\n    ClientStore.prototype.getDistance = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        return getDist(clients);\n    };\n    ClientStore.prototype.getScale = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        return getDist(clients) / getDist(this.startClients);\n    };\n    ClientStore.prototype.move = function (deltaX, deltaY) {\n        this.startClients.forEach(function (client) {\n            client.clientX -= deltaX;\n            client.clientY -= deltaY;\n        });\n        this.prevClients.forEach(function (client) {\n            client.clientX -= deltaX;\n            client.clientY -= deltaY;\n        });\n    };\n    return ClientStore;\n}());\n\nvar INPUT_TAGNAMES = [\"textarea\", \"input\"];\n/**\n * You can set up drag, pinch events in any browser.\n */\nvar Gesto = /*#__PURE__*/ (function (_super) {\n    __extends(Gesto, _super);\n    /**\n     *\n     */\n    function Gesto(targets, options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this) || this;\n        _this.options = {};\n        _this.flag = false;\n        _this.pinchFlag = false;\n        _this.data = {};\n        _this.isDrag = false;\n        _this.isPinch = false;\n        _this.clientStores = [];\n        _this.targets = [];\n        _this.prevTime = 0;\n        _this.doubleFlag = false;\n        _this._useMouse = false;\n        _this._useTouch = false;\n        _this._useDrag = false;\n        _this._dragFlag = false;\n        _this._isTrusted = false;\n        _this._isMouseEvent = false;\n        _this._isSecondaryButton = false;\n        _this._preventMouseEvent = false;\n        _this._prevInputEvent = null;\n        _this._isDragAPI = false;\n        _this._isIdle = true;\n        _this._window = window;\n        _this.onDragStart = function (e, isTrusted) {\n            if (isTrusted === void 0) { isTrusted = true; }\n            if (!_this.flag && e.cancelable === false) {\n                return;\n            }\n            var isDragAPI = e.type.indexOf(\"drag\") >= -1;\n            if (_this.flag && isDragAPI) {\n                return;\n            }\n            _this._isDragAPI = true;\n            var _a = _this.options, container = _a.container, pinchOutside = _a.pinchOutside, preventWheelClick = _a.preventWheelClick, preventRightClick = _a.preventRightClick, preventDefault = _a.preventDefault, checkInput = _a.checkInput, dragFocusedInput = _a.dragFocusedInput, preventClickEventOnDragStart = _a.preventClickEventOnDragStart, preventClickEventOnDrag = _a.preventClickEventOnDrag, preventClickEventByCondition = _a.preventClickEventByCondition;\n            var useTouch = _this._useTouch;\n            var isDragStart = !_this.flag;\n            _this._isSecondaryButton = e.which === 3 || e.button === 2;\n            if ((preventWheelClick && (e.which === 2 || e.button === 1))\n                || (preventRightClick && (e.which === 3 || e.button === 2))) {\n                _this.stop();\n                return false;\n            }\n            if (isDragStart) {\n                var activeElement = _this._window.document.activeElement;\n                var target = e.target;\n                if (target) {\n                    var tagName = target.tagName.toLowerCase();\n                    var hasInput = INPUT_TAGNAMES.indexOf(tagName) > -1;\n                    var hasContentEditable = target.isContentEditable;\n                    if (hasInput || hasContentEditable) {\n                        if (checkInput || (!dragFocusedInput && activeElement === target)) {\n                            // force false or already focused.\n                            return false;\n                        }\n                        // no focus\n                        if (activeElement && (activeElement === target\n                            || (hasContentEditable && activeElement.isContentEditable && activeElement.contains(target)))) {\n                            if (dragFocusedInput) {\n                                target.blur();\n                            }\n                            else {\n                                return false;\n                            }\n                        }\n                    }\n                    else if ((preventDefault || e.type === \"touchstart\") && activeElement) {\n                        var activeTagName = activeElement.tagName.toLowerCase();\n                        if (activeElement.isContentEditable || INPUT_TAGNAMES.indexOf(activeTagName) > -1) {\n                            activeElement.blur();\n                        }\n                    }\n                    if (preventClickEventOnDragStart || preventClickEventOnDrag || preventClickEventByCondition) {\n                        addEvent(_this._window, \"click\", _this._onClick, true);\n                    }\n                }\n                _this.clientStores = [new ClientStore(getEventClients(e))];\n                _this._isIdle = false;\n                _this.flag = true;\n                _this.isDrag = false;\n                _this._isTrusted = isTrusted;\n                _this._dragFlag = true;\n                _this._prevInputEvent = e;\n                _this.data = {};\n                _this.doubleFlag = now() - _this.prevTime < 200;\n                _this._isMouseEvent = isMouseEvent(e);\n                if (!_this._isMouseEvent && _this._preventMouseEvent) {\n                    _this._preventMouseEvent = false;\n                }\n                var result = _this._preventMouseEvent || _this.emit(\"dragStart\", __assign(__assign({ data: _this.data, datas: _this.data, inputEvent: e, isMouseEvent: _this._isMouseEvent, isSecondaryButton: _this._isSecondaryButton, isTrusted: isTrusted, isDouble: _this.doubleFlag }, _this.getCurrentStore().getPosition()), { preventDefault: function () {\n                        e.preventDefault();\n                    }, preventDrag: function () {\n                        _this._dragFlag = false;\n                    } }));\n                if (result === false) {\n                    _this.stop();\n                }\n                if (_this._isMouseEvent && _this.flag && preventDefault) {\n                    e.preventDefault();\n                }\n            }\n            if (!_this.flag) {\n                return false;\n            }\n            var timer = 0;\n            if (isDragStart) {\n                _this._attchDragEvent();\n                // wait pinch\n                if (useTouch && pinchOutside) {\n                    timer = setTimeout(function () {\n                        addEvent(container, \"touchstart\", _this.onDragStart, {\n                            passive: false\n                        });\n                    });\n                }\n            }\n            else if (useTouch && pinchOutside) {\n                // pinch is occured\n                removeEvent(container, \"touchstart\", _this.onDragStart);\n            }\n            if (_this.flag && isMultiTouch(e)) {\n                clearTimeout(timer);\n                if (isDragStart && (e.touches.length !== e.changedTouches.length)) {\n                    return;\n                }\n                if (!_this.pinchFlag) {\n                    _this.onPinchStart(e);\n                }\n            }\n        };\n        _this.onDrag = function (e, isScroll) {\n            if (!_this.flag) {\n                return;\n            }\n            var preventDefault = _this.options.preventDefault;\n            if (!_this._isMouseEvent && preventDefault) {\n                e.preventDefault();\n            }\n            _this._prevInputEvent = e;\n            var clients = getEventClients(e);\n            var result = _this.moveClients(clients, e, false);\n            if (_this._dragFlag) {\n                if (_this.pinchFlag || result.deltaX || result.deltaY) {\n                    var dragResult = _this._preventMouseEvent || _this.emit(\"drag\", __assign(__assign({}, result), { isScroll: !!isScroll, inputEvent: e }));\n                    if (dragResult === false) {\n                        _this.stop();\n                        return;\n                    }\n                }\n                if (_this.pinchFlag) {\n                    _this.onPinch(e, clients);\n                }\n            }\n            _this.getCurrentStore().getPosition(clients, true);\n        };\n        _this.onDragEnd = function (e) {\n            if (!_this.flag) {\n                return;\n            }\n            var _a = _this.options, pinchOutside = _a.pinchOutside, container = _a.container, preventClickEventOnDrag = _a.preventClickEventOnDrag, preventClickEventOnDragStart = _a.preventClickEventOnDragStart, preventClickEventByCondition = _a.preventClickEventByCondition;\n            var isDrag = _this.isDrag;\n            if (preventClickEventOnDrag || preventClickEventOnDragStart || preventClickEventByCondition) {\n                requestAnimationFrame(function () {\n                    _this._allowClickEvent();\n                });\n            }\n            if (!preventClickEventByCondition && !preventClickEventOnDragStart && preventClickEventOnDrag && !isDrag) {\n                _this._allowClickEvent();\n            }\n            if (_this._useTouch && pinchOutside) {\n                removeEvent(container, \"touchstart\", _this.onDragStart);\n            }\n            if (_this.pinchFlag) {\n                _this.onPinchEnd(e);\n            }\n            var clients = (e === null || e === void 0 ? void 0 : e.touches) ? getEventClients(e) : [];\n            var clientsLength = clients.length;\n            if (clientsLength === 0 || !_this.options.keepDragging) {\n                _this.flag = false;\n            }\n            else {\n                _this._addStore(new ClientStore(clients));\n            }\n            var position = _this._getPosition();\n            var currentTime = now();\n            var isDouble = !isDrag && _this.doubleFlag;\n            _this._prevInputEvent = null;\n            _this.prevTime = isDrag || isDouble ? 0 : currentTime;\n            if (!_this.flag) {\n                _this._dettachDragEvent();\n                _this._preventMouseEvent || _this.emit(\"dragEnd\", __assign({ data: _this.data, datas: _this.data, isDouble: isDouble, isDrag: isDrag, isClick: !isDrag, isMouseEvent: _this._isMouseEvent, isSecondaryButton: _this._isSecondaryButton, inputEvent: e, isTrusted: _this._isTrusted }, position));\n                _this.clientStores = [];\n                if (!_this._isMouseEvent) {\n                    _this._preventMouseEvent = true;\n                    requestAnimationFrame(function () {\n                        requestAnimationFrame(function () {\n                            _this._preventMouseEvent = false;\n                        });\n                    });\n                }\n                _this._isIdle = true;\n            }\n        };\n        _this.onBlur = function () {\n            _this.onDragEnd();\n        };\n        _this._allowClickEvent = function () {\n            removeEvent(_this._window, \"click\", _this._onClick, true);\n        };\n        _this._onClick = function (e) {\n            _this._allowClickEvent();\n            _this._preventMouseEvent = false;\n            var preventClickEventByCondition = _this.options.preventClickEventByCondition;\n            if (preventClickEventByCondition === null || preventClickEventByCondition === void 0 ? void 0 : preventClickEventByCondition(e)) {\n                return;\n            }\n            e.stopPropagation();\n            e.preventDefault();\n        };\n        _this._onContextMenu = function (e) {\n            var options = _this.options;\n            if (!options.preventRightClick) {\n                e.preventDefault();\n            }\n            else {\n                _this.onDragEnd(e);\n            }\n        };\n        _this._passCallback = function () { };\n        var elements = [].concat(targets);\n        var firstTarget = elements[0];\n        _this._window = isWindow(firstTarget) ? firstTarget : getWindow(firstTarget);\n        _this.options = __assign({ checkInput: false, container: firstTarget && !(\"document\" in firstTarget) ? getWindow(firstTarget) : firstTarget, preventRightClick: true, preventWheelClick: true, preventClickEventOnDragStart: false, preventClickEventOnDrag: false, preventClickEventByCondition: null, preventDefault: true, checkWindowBlur: false, keepDragging: false, pinchThreshold: 0, events: [\"touch\", \"mouse\"] }, options);\n        var _a = _this.options, container = _a.container, events = _a.events, checkWindowBlur = _a.checkWindowBlur;\n        _this._useDrag = events.indexOf(\"drag\") > -1;\n        _this._useTouch = events.indexOf(\"touch\") > -1;\n        _this._useMouse = events.indexOf(\"mouse\") > -1;\n        _this.targets = elements;\n        if (_this._useDrag) {\n            elements.forEach(function (el) {\n                addEvent(el, \"dragstart\", _this.onDragStart);\n            });\n        }\n        if (_this._useMouse) {\n            elements.forEach(function (el) {\n                addEvent(el, \"mousedown\", _this.onDragStart);\n                addEvent(el, \"mousemove\", _this._passCallback);\n            });\n            addEvent(container, \"contextmenu\", _this._onContextMenu);\n        }\n        if (checkWindowBlur) {\n            addEvent(getWindow(), \"blur\", _this.onBlur);\n        }\n        if (_this._useTouch) {\n            var passive_1 = {\n                passive: false,\n            };\n            elements.forEach(function (el) {\n                addEvent(el, \"touchstart\", _this.onDragStart, passive_1);\n                addEvent(el, \"touchmove\", _this._passCallback, passive_1);\n            });\n        }\n        return _this;\n    }\n    /**\n     * Stop Gesto's drag events.\n     */\n    Gesto.prototype.stop = function () {\n        this.isDrag = false;\n        this.data = {};\n        this.clientStores = [];\n        this.pinchFlag = false;\n        this.doubleFlag = false;\n        this.prevTime = 0;\n        this.flag = false;\n        this._isIdle = true;\n        this._allowClickEvent();\n        this._dettachDragEvent();\n        this._isDragAPI = false;\n    };\n    /**\n     * The total moved distance\n     */\n    Gesto.prototype.getMovement = function (clients) {\n        return this.getCurrentStore().getMovement(clients) + this.clientStores.slice(1).reduce(function (prev, cur) {\n            return prev + cur.movement;\n        }, 0);\n    };\n    /**\n     * Whether to drag\n     */\n    Gesto.prototype.isDragging = function () {\n        return this.isDrag;\n    };\n    /**\n     * Whether the operation of gesto is finished and is in idle state\n     */\n    Gesto.prototype.isIdle = function () {\n        return this._isIdle;\n    };\n    /**\n     * Whether to start drag\n     */\n    Gesto.prototype.isFlag = function () {\n        return this.flag;\n    };\n    /**\n     * Whether to start pinch\n     */\n    Gesto.prototype.isPinchFlag = function () {\n        return this.pinchFlag;\n    };\n    /**\n     * Whether to start double click\n     */\n    Gesto.prototype.isDoubleFlag = function () {\n        return this.doubleFlag;\n    };\n    /**\n     * Whether to pinch\n     */\n    Gesto.prototype.isPinching = function () {\n        return this.isPinch;\n    };\n    /**\n     * If a scroll event occurs, it is corrected by the scroll distance.\n     */\n    Gesto.prototype.scrollBy = function (deltaX, deltaY, e, isCallDrag) {\n        if (isCallDrag === void 0) { isCallDrag = true; }\n        if (!this.flag) {\n            return;\n        }\n        this.clientStores[0].move(deltaX, deltaY);\n        isCallDrag && this.onDrag(e, true);\n    };\n    /**\n     * Create a virtual drag event.\n     */\n    Gesto.prototype.move = function (_a, inputEvent) {\n        var deltaX = _a[0], deltaY = _a[1];\n        var store = this.getCurrentStore();\n        var nextClients = store.prevClients;\n        return this.moveClients(nextClients.map(function (_a) {\n            var clientX = _a.clientX, clientY = _a.clientY;\n            return {\n                clientX: clientX + deltaX,\n                clientY: clientY + deltaY,\n                originalClientX: clientX,\n                originalClientY: clientY,\n            };\n        }), inputEvent, true);\n    };\n    /**\n     * The dragStart event is triggered by an external event.\n     */\n    Gesto.prototype.triggerDragStart = function (e) {\n        this.onDragStart(e, false);\n    };\n    /**\n     * Set the event data while dragging.\n     */\n    Gesto.prototype.setEventData = function (data) {\n        var currentData = this.data;\n        for (var name_1 in data) {\n            currentData[name_1] = data[name_1];\n        }\n        return this;\n    };\n    /**\n     * Set the event data while dragging.\n     * Use `setEventData`\n     * @deprecated\n     */\n    Gesto.prototype.setEventDatas = function (data) {\n        return this.setEventData(data);\n    };\n    /**\n     * Get the current event state while dragging.\n     */\n    Gesto.prototype.getCurrentEvent = function (inputEvent) {\n        if (inputEvent === void 0) { inputEvent = this._prevInputEvent; }\n        return __assign(__assign({ data: this.data, datas: this.data }, this._getPosition()), { movement: this.getMovement(), isDrag: this.isDrag, isPinch: this.isPinch, isScroll: false, inputEvent: inputEvent });\n    };\n    /**\n     * Get & Set the event data while dragging.\n     */\n    Gesto.prototype.getEventData = function () {\n        return this.data;\n    };\n    /**\n     * Get & Set the event data while dragging.\n     * Use getEventData method\n     * @depreacated\n     */\n    Gesto.prototype.getEventDatas = function () {\n        return this.data;\n    };\n    /**\n     * Unset Gesto\n     */\n    Gesto.prototype.unset = function () {\n        var _this = this;\n        var targets = this.targets;\n        var container = this.options.container;\n        this.off();\n        removeEvent(this._window, \"blur\", this.onBlur);\n        if (this._useDrag) {\n            targets.forEach(function (el) {\n                removeEvent(el, \"dragstart\", _this.onDragStart);\n            });\n        }\n        if (this._useMouse) {\n            targets.forEach(function (target) {\n                removeEvent(target, \"mousedown\", _this.onDragStart);\n            });\n            removeEvent(container, \"contextmenu\", this._onContextMenu);\n        }\n        if (this._useTouch) {\n            targets.forEach(function (target) {\n                removeEvent(target, \"touchstart\", _this.onDragStart);\n            });\n            removeEvent(container, \"touchstart\", this.onDragStart);\n        }\n        this._prevInputEvent = null;\n        this._allowClickEvent();\n        this._dettachDragEvent();\n    };\n    Gesto.prototype.onPinchStart = function (e) {\n        var _this = this;\n        var pinchThreshold = this.options.pinchThreshold;\n        if (this.isDrag && this.getMovement() > pinchThreshold) {\n            return;\n        }\n        var store = new ClientStore(getEventClients(e));\n        this.pinchFlag = true;\n        this._addStore(store);\n        var result = this.emit(\"pinchStart\", __assign(__assign({ data: this.data, datas: this.data, angle: store.getAngle(), touches: this.getCurrentStore().getPositions() }, store.getPosition()), { inputEvent: e, isTrusted: this._isTrusted, preventDefault: function () {\n                e.preventDefault();\n            }, preventDrag: function () {\n                _this._dragFlag = false;\n            } }));\n        if (result === false) {\n            this.pinchFlag = false;\n        }\n    };\n    Gesto.prototype.onPinch = function (e, clients) {\n        if (!this.flag || !this.pinchFlag || clients.length < 2) {\n            return;\n        }\n        var store = this.getCurrentStore();\n        this.isPinch = true;\n        this.emit(\"pinch\", __assign(__assign({ data: this.data, datas: this.data, movement: this.getMovement(clients), angle: store.getAngle(clients), rotation: store.getRotation(clients), touches: store.getPositions(clients), scale: store.getScale(clients), distance: store.getDistance(clients) }, store.getPosition(clients)), { inputEvent: e, isTrusted: this._isTrusted }));\n    };\n    Gesto.prototype.onPinchEnd = function (e) {\n        if (!this.pinchFlag) {\n            return;\n        }\n        var isPinch = this.isPinch;\n        this.isPinch = false;\n        this.pinchFlag = false;\n        var store = this.getCurrentStore();\n        this.emit(\"pinchEnd\", __assign(__assign({ data: this.data, datas: this.data, isPinch: isPinch, touches: store.getPositions() }, store.getPosition()), { inputEvent: e }));\n    };\n    Gesto.prototype.getCurrentStore = function () {\n        return this.clientStores[0];\n    };\n    Gesto.prototype.moveClients = function (clients, inputEvent, isAdd) {\n        var position = this._getPosition(clients, isAdd);\n        var isPrevDrag = this.isDrag;\n        if (position.deltaX || position.deltaY) {\n            this.isDrag = true;\n        }\n        var isFirstDrag = false;\n        if (!isPrevDrag && this.isDrag) {\n            isFirstDrag = true;\n        }\n        return __assign(__assign({ data: this.data, datas: this.data }, position), { movement: this.getMovement(clients), isDrag: this.isDrag, isPinch: this.isPinch, isScroll: false, isMouseEvent: this._isMouseEvent, isSecondaryButton: this._isSecondaryButton, inputEvent: inputEvent, isTrusted: this._isTrusted, isFirstDrag: isFirstDrag });\n    };\n    Gesto.prototype._addStore = function (store) {\n        this.clientStores.splice(0, 0, store);\n    };\n    Gesto.prototype._getPosition = function (clients, isAdd) {\n        var store = this.getCurrentStore();\n        var position = store.getPosition(clients, isAdd);\n        var _a = this.clientStores.slice(1).reduce(function (prev, cur) {\n            var storePosition = cur.getPosition();\n            prev.distX += storePosition.distX;\n            prev.distY += storePosition.distY;\n            return prev;\n        }, position), distX = _a.distX, distY = _a.distY;\n        return __assign(__assign({}, position), { distX: distX, distY: distY });\n    };\n    Gesto.prototype._attchDragEvent = function () {\n        var win = this._window;\n        var container = this.options.container;\n        var passive = {\n            passive: false\n        };\n        if (this._isDragAPI) {\n            addEvent(container, \"dragover\", this.onDrag, passive);\n            addEvent(win, \"dragend\", this.onDragEnd);\n        }\n        if (this._useMouse) {\n            addEvent(container, \"mousemove\", this.onDrag);\n            addEvent(win, \"mouseup\", this.onDragEnd);\n        }\n        if (this._useTouch) {\n            addEvent(container, \"touchmove\", this.onDrag, passive);\n            addEvent(win, \"touchend\", this.onDragEnd, passive);\n            addEvent(win, \"touchcancel\", this.onDragEnd, passive);\n        }\n    };\n    Gesto.prototype._dettachDragEvent = function () {\n        var win = this._window;\n        var container = this.options.container;\n        if (this._isDragAPI) {\n            removeEvent(container, \"dragover\", this.onDrag);\n            removeEvent(win, \"dragend\", this.onDragEnd);\n        }\n        if (this._useMouse) {\n            removeEvent(container, \"mousemove\", this.onDrag);\n            removeEvent(win, \"mouseup\", this.onDragEnd);\n        }\n        if (this._useTouch) {\n            removeEvent(container, \"touchstart\", this.onDragStart);\n            removeEvent(container, \"touchmove\", this.onDrag);\n            removeEvent(win, \"touchend\", this.onDragEnd);\n            removeEvent(win, \"touchcancel\", this.onDragEnd);\n        }\n    };\n    return Gesto;\n}(EventEmitter));\n\nexport { Gesto as default };\n//# sourceMappingURL=gesto.esm.js.map\n","/*\nCopyright (c) Daybrush\nname: css-styled\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/css-styled.git\nversion: 1.0.8\n*/\nimport { getDocument, splitComma } from '@daybrush/utils';\n\nfunction hash(str) {\n  var hash = 5381,\n      i    = str.length;\n\n  while(i) {\n    hash = (hash * 33) ^ str.charCodeAt(--i);\n  }\n\n  /* JavaScript does bitwise operations (like XOR, above) on 32-bit signed\n   * integers. Since we want the results to be always positive, convert the\n   * signed int to an unsigned by doing an unsigned bitshift. */\n  return hash >>> 0;\n}\n\nvar stringHash = hash;\n\nfunction getHash(str) {\n  return stringHash(str).toString(36);\n}\nfunction getShadowRoot(parentElement) {\n  if (parentElement && parentElement.getRootNode) {\n    var rootNode = parentElement.getRootNode();\n    if (rootNode.nodeType === 11) {\n      return rootNode;\n    }\n  }\n  return;\n}\nfunction replaceStyle(className, css, options) {\n  if (options.original) {\n    return css;\n  }\n  return css.replace(/([^};{\\s}][^};{]*|^\\s*){/mg, function (_, selector) {\n    var trimmedSelector = selector.trim();\n    return (trimmedSelector ? splitComma(trimmedSelector) : [\"\"]).map(function (subSelector) {\n      var trimmedSubSelector = subSelector.trim();\n      if (trimmedSubSelector.indexOf(\"@\") === 0) {\n        return trimmedSubSelector;\n      } else if (trimmedSubSelector.indexOf(\":global\") > -1) {\n        return trimmedSubSelector.replace(/\\:global/g, \"\");\n      } else if (trimmedSubSelector.indexOf(\":host\") > -1) {\n        return \"\".concat(trimmedSubSelector.replace(/\\:host/g, \".\".concat(className)));\n      } else if (trimmedSubSelector) {\n        return \".\".concat(className, \" \").concat(trimmedSubSelector);\n      } else {\n        return \".\".concat(className);\n      }\n    }).join(\", \") + \" {\";\n  });\n}\nfunction injectStyle(className, css, options, el, shadowRoot) {\n  var doc = getDocument(el);\n  var style = doc.createElement(\"style\");\n  style.setAttribute(\"type\", \"text/css\");\n  style.setAttribute(\"data-styled-id\", className);\n  style.setAttribute(\"data-styled-count\", \"1\");\n  if (options.nonce) {\n    style.setAttribute(\"nonce\", options.nonce);\n  }\n  style.innerHTML = replaceStyle(className, css, options);\n  (shadowRoot || doc.head || doc.body).appendChild(style);\n  return style;\n}\n\n/**\n * Create an styled object that can be defined and inserted into the css.\n * @param - css styles\n */\nfunction styled(css) {\n  var injectClassName = \"rCS\" + getHash(css);\n  return {\n    className: injectClassName,\n    inject: function (el, options) {\n      if (options === void 0) {\n        options = {};\n      }\n      var shadowRoot = getShadowRoot(el);\n      var styleElement = (shadowRoot || el.ownerDocument || document).querySelector(\"style[data-styled-id=\\\"\".concat(injectClassName, \"\\\"]\"));\n      if (!styleElement) {\n        styleElement = injectStyle(injectClassName, css, options, el, shadowRoot);\n      } else {\n        var count = parseFloat(styleElement.getAttribute(\"data-styled-count\")) || 0;\n        styleElement.setAttribute(\"data-styled-count\", \"\".concat(count + 1));\n      }\n      return {\n        destroy: function () {\n          var _a;\n          var injectCount = parseFloat(styleElement.getAttribute(\"data-styled-count\")) || 0;\n          if (injectCount <= 1) {\n            if (styleElement.remove) {\n              styleElement.remove();\n            } else {\n              (_a = styleElement.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(styleElement);\n            }\n            styleElement = null;\n          } else {\n            styleElement.setAttribute(\"data-styled-count\", \"\".concat(injectCount - 1));\n          }\n        }\n      };\n    }\n  };\n}\n\nexport default styled;\n//# sourceMappingURL=styled.esm.js.map\n","/*\nCopyright (c) Daybrush\nname: react-compat-css-styled\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/css-styled.git\nversion: 1.0.9\n*/\nimport cssStyled from 'css-styled';\nimport { version, createElement, Component } from 'react-simple-compat';\nimport { ref } from 'framework-utils';\n\n/*\nCopyright (c) 2019 Daybrush\nname: react-css-styled\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/css-styled/tree/master/packages/react-css-styled\nversion: 1.0.4\n*/\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nvar StyledElement =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(StyledElement, _super);\n\n  function StyledElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.injectResult = null;\n    _this.tag = \"div\";\n    return _this;\n  }\n\n  var __proto = StyledElement.prototype;\n\n  __proto.render = function () {\n    var _a = this.props,\n        _b = _a.className,\n        className = _b === void 0 ? \"\" : _b,\n        cspNonce = _a.cspNonce,\n        portalContainer = _a.portalContainer,\n        attributes = __rest(_a, [\"className\", \"cspNonce\", \"portalContainer\"]);\n\n    var cssId = this.injector.className;\n    var Tag = this.tag;\n    var portalAttributes = {};\n\n    if ((version || \"\").indexOf(\"simple\") > -1 && portalContainer) {\n      portalAttributes = {\n        portalContainer: portalContainer\n      };\n    }\n\n    return createElement(Tag, __assign({\n      \"ref\": ref(this, \"element\"),\n      \"data-styled-id\": cssId,\n      \"className\": className + \" \" + cssId\n    }, portalAttributes, attributes));\n  };\n\n  __proto.componentDidMount = function () {\n    this.injectResult = this.injector.inject(this.element, {\n      nonce: this.props.cspNonce\n    });\n  };\n\n  __proto.componentWillUnmount = function () {\n    this.injectResult.destroy();\n    this.injectResult = null;\n  };\n\n  __proto.getElement = function () {\n    return this.element;\n  };\n\n  return StyledElement;\n}(Component);\n\nfunction styled(tag, css) {\n  var injector = cssStyled(css);\n  return (\n    /*#__PURE__*/\n    function (_super) {\n      __extends(Styled, _super);\n\n      function Styled() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.injector = injector;\n        _this.tag = tag;\n        return _this;\n      }\n\n      return Styled;\n    }(StyledElement)\n  );\n}\n\nexport default styled;\nexport { StyledElement };\n","/*\nCopyright (c) 2019 Daybrush\nname: react-compat-moveable\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/moveable/blob/master/packages/react-compat-moveable\nversion: 0.31.1\n*/\nimport getAgent from '@egjs/agent';\nimport { prefixNames, prefixCSS, ref, withMethods, refs } from 'framework-utils';\nimport { throttle, hasClass, getRad, isArray, splitSpace, throttleArray, getKeys, decamelize, isString, dot, calculateBoundSize, getDist as getDist$1, convertUnitSize, find, findIndex, getShapeDirection, isObject, isNumber, addClass, requestAnimationFrame, splitBracket, splitComma, splitUnit, cancelAnimationFrame, removeClass, isUndefined, between, isFunction, TINY_NUM as TINY_NUM$1, average } from '@daybrush/utils';\nimport { plus, minus, calculate, convertPositionMatrix, convertDimension, multiply, multiplies, createOriginMatrix, ignoreDimension, invert, createIdentityMatrix, createWarpMatrix, convertMatrixtoCSS, fromTranslation, createRotateMatrix, getOrigin, rotate, createScaleMatrix, convertCSStoMatrix } from '@scena/matrix';\nimport { parseMat, toMat, parse, calculateMatrixDist } from 'css-to-mat';\nimport ChildrenDiffer, { diff } from '@egjs/children-differ';\nimport { getMinMaxs, fitPoints, getOverlapSize, getAreaSize, isInside, getIntersectionPointsByConstants } from 'overlap-area';\nimport DragScroll from '@scena/dragscroll';\nimport * as React from 'react-simple-compat';\nimport { createElement } from 'react-simple-compat';\nimport Gesto from 'gesto';\nimport styled from 'react-compat-css-styled';\nimport EventEmitter from '@scena/event-emitter';\nimport { diff as diff$1 } from '@egjs/list-differ';\n\n/*\nCopyright (c) 2019 Daybrush\nname: react-moveable\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/moveable/blob/master/packages/react-moveable\nversion: 0.46.1\n*/\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nfunction __decorate(decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nfunction __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nfunction makeAble(name, able) {\n  var _a;\n\n  return __assign({\n    events: {},\n    props: (_a = {}, _a[name] = Boolean, _a),\n    name: name\n  }, able);\n}\n\nfunction getSVGCursor(scale, degree) {\n  return \"data:image/svg+xml;utf8,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"\".concat(32 * scale, \"px\\\" height=\\\"\").concat(32 * scale, \"px\\\" viewBox=\\\"0 0 32 32\\\" ><path d=\\\"M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z\\\" stroke-linejoin=\\\"round\\\" stroke-width=\\\"1.2\\\" fill=\\\"black\\\" stroke=\\\"white\\\" style=\\\"transform:rotate(\").concat(degree, \"deg);transform-origin: 16px 16px\\\"></path></svg>\");\n}\n\nfunction getCursorCSS(degree) {\n  var x1 = getSVGCursor(1, degree); // const x2 = getSVGCursor(2, degree);\n\n  var degree45 = Math.round(degree / 45) * 45 % 180;\n  var defaultCursor = \"ns-resize\";\n\n  if (degree45 === 135) {\n    defaultCursor = \"nwse-resize\";\n  } else if (degree45 === 45) {\n    defaultCursor = \"nesw-resize\";\n  } else if (degree45 === 90) {\n    defaultCursor = \"ew-resize\";\n  } // tslint:disable-next-line: max-line-length\n\n\n  return \"cursor:\".concat(defaultCursor, \";cursor: url('\").concat(x1, \"') 16 16, \").concat(defaultCursor, \";\");\n}\n\nvar agent = getAgent();\nvar IS_WEBKIT = agent.browser.webkit;\n\nvar IS_WEBKIT605 = IS_WEBKIT && function () {\n  var navi = typeof window === \"undefined\" ? {\n    userAgent: \"\"\n  } : window.navigator;\n  var res = /applewebkit\\/([^\\s]+)/g.exec(navi.userAgent.toLowerCase());\n  return res ? parseFloat(res[1]) < 605 : false;\n}();\n\nvar IS_FIREFOX = agent.browser.name === \"firefox\";\nvar IS_SAFARI_ABOVE15 = parseInt(agent.browser.webkitVersion, 10) >= 612 || parseInt(agent.browser.version, 10) >= 15;\nvar PREFIX = \"moveable-\";\nvar MOVEABLE_CSS = \"\\n{\\n\\tposition: absolute;\\n\\twidth: 1px;\\n\\theight: 1px;\\n\\tleft: 0;\\n\\ttop: 0;\\n    z-index: 3000;\\n    --moveable-color: #4af;\\n    --zoom: 1;\\n    --zoompx: 1px;\\n    will-change: transform;\\n    outline: 1px solid transparent;\\n}\\n.control-box {\\n    z-index: 0;\\n}\\n.line, .control {\\n    position: absolute;\\n\\tleft: 0;\\n    top: 0;\\n    will-change: transform;\\n}\\n.control {\\n\\twidth: 14px;\\n\\theight: 14px;\\n\\tborder-radius: 50%;\\n\\tborder: 2px solid #fff;\\n\\tbox-sizing: border-box;\\n    background: #4af;\\n    background: var(--moveable-color);\\n\\tmargin-top: -7px;\\n    margin-left: -7px;\\n    border: 2px solid #fff;\\n    z-index: 10;\\n}\\n.padding {\\n    position: absolute;\\n    top: 0px;\\n    left: 0px;\\n    width: 100px;\\n    height: 100px;\\n    transform-origin: 0 0;\\n}\\n.line {\\n\\twidth: 1px;\\n    height: 1px;\\n    background: #4af;\\n    background: var(--moveable-color);\\n\\ttransform-origin: 0px 50%;\\n}\\n.line.edge {\\n    z-index: 1;\\n    background: transparent;\\n}\\n.line.dashed {\\n    box-sizing: border-box;\\n    background: transparent;\\n}\\n.line.dashed.horizontal {\\n    border-top: 1px dashed #4af;\\n    border-top-color: #4af;\\n    border-top-color: var(--moveable-color);\\n}\\n.line.dashed.vertical {\\n    border-left: 1px dashed #4af;\\n    border-left-color: #4af;\\n    border-left-color: var(--moveable-color);\\n}\\n.line.vertical {\\n    transform: translateX(-50%);\\n}\\n.line.horizontal {\\n    transform: translateY(-50%);\\n}\\n.line.vertical.bold {\\n    width: 2px;\\n}\\n.line.horizontal.bold {\\n    height: 2px;\\n}\\n\\n.control.origin {\\n\\tborder-color: #f55;\\n\\tbackground: #fff;\\n\\twidth: 12px;\\n\\theight: 12px;\\n\\tmargin-top: -6px;\\n    margin-left: -6px;\\n\\tpointer-events: none;\\n}\\n\".concat([0, 15, 30, 45, 60, 75, 90, 105, 120, 135, 150, 165].map(function (degree) {\n  return \"\\n.direction[data-rotation=\\\"\".concat(degree, \"\\\"], :global .view-control-rotation\").concat(degree, \" {\\n\\t\").concat(getCursorCSS(degree), \"\\n}\\n\");\n}).join(\"\\n\"), \"\\n\\n.line.direction:before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    width: 100%;\\n    height: calc(var(--moveable-line-padding, 0) * 1px);\\n    bottom: 0;\\n    left: 0;\\n}\\n.group {\\n    z-index: -1;\\n}\\n.area {\\n    position: absolute;\\n}\\n.area-pieces {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    display: none;\\n}\\n.area.avoid, .area.pass {\\n    pointer-events: none;\\n}\\n.area.avoid+.area-pieces {\\n    display: block;\\n}\\n.area-piece {\\n    position: absolute;\\n}\\n\\n\").concat(IS_WEBKIT605 ? \":global svg *:before {\\n\\tcontent:\\\"\\\";\\n\\ttransform-origin: inherit;\\n}\" : \"\", \"\\n\");\nvar NEARBY_POS = [[0, 1, 2], [1, 0, 3], [2, 0, 3], [3, 1, 2]];\nvar FLOAT_POINT_NUM = 0.0001;\nvar TINY_NUM = 0.0000001;\nvar MIN_SCALE = 0.000000001;\nvar MAX_NUM = Math.pow(10, 10);\nvar MIN_NUM = -MAX_NUM;\nvar DIRECTIONS4 = [\"n\", \"w\", \"s\", \"e\"];\nvar DIRECTIONS = [\"n\", \"w\", \"s\", \"e\", \"nw\", \"ne\", \"sw\", \"se\"];\nvar DIRECTION_REGION_TO_DIRECTION = {\n  n: [0, -1],\n  e: [1, 0],\n  s: [0, 1],\n  w: [-1, 0],\n  nw: [-1, -1],\n  ne: [1, -1],\n  sw: [-1, 1],\n  se: [1, 1]\n};\nvar DIRECTION_INDEXES = {\n  n: [0, 1],\n  e: [1, 3],\n  s: [3, 2],\n  w: [2, 0],\n  nw: [0],\n  ne: [1],\n  sw: [2],\n  se: [3]\n};\nvar DIRECTION_ROTATIONS = {\n  n: 0,\n  s: 180,\n  w: 270,\n  e: 90,\n  nw: 315,\n  ne: 45,\n  sw: 225,\n  se: 135\n};\nvar MOVEABLE_METHODS = [\"isMoveableElement\", \"updateRect\", \"updateTarget\", \"destroy\", \"dragStart\", \"isInside\", \"hitTest\", \"setState\", \"getRect\", \"request\", \"isDragging\", \"getManager\", \"forceUpdate\", \"waitToChangeTarget\", \"updateSelectors\", \"getTargets\", \"stopDrag\"];\n\nfunction setCustomDrag(e, state, delta, isPinch, isConvert, ableName) {\n  var _a, _b;\n\n  if (ableName === void 0) {\n    ableName = \"draggable\";\n  }\n\n  var result = (_b = (_a = state.gestos[ableName]) === null || _a === void 0 ? void 0 : _a.move(delta, e.inputEvent)) !== null && _b !== void 0 ? _b : {};\n  var datas = result.originalDatas || result.datas;\n  var ableDatas = datas[ableName] || (datas[ableName] = {});\n  return __assign(__assign({}, isConvert ? convertDragDist(state, result) : result), {\n    isPinch: !!isPinch,\n    parentEvent: true,\n    datas: ableDatas,\n    originalDatas: e.originalDatas\n  });\n}\n\nvar CustomGesto = /*#__PURE__*/function () {\n  function CustomGesto(ableName) {\n    var _a;\n\n    if (ableName === void 0) {\n      ableName = \"draggable\";\n    }\n\n    this.ableName = ableName;\n    this.prevX = 0;\n    this.prevY = 0;\n    this.startX = 0;\n    this.startY = 0;\n    this.isDrag = false;\n    this.isFlag = false;\n    this.datas = {\n      draggable: {}\n    };\n    this.datas = (_a = {}, _a[ableName] = {}, _a);\n  }\n\n  var __proto = CustomGesto.prototype;\n\n  __proto.dragStart = function (client, e) {\n    this.isDrag = false;\n    this.isFlag = false;\n    var originalDatas = e.originalDatas;\n    this.datas = originalDatas;\n\n    if (!originalDatas[this.ableName]) {\n      originalDatas[this.ableName] = {};\n    }\n\n    return __assign(__assign({}, this.move(client, e.inputEvent)), {\n      type: \"dragstart\"\n    });\n  };\n\n  __proto.drag = function (client, inputEvent) {\n    return this.move([client[0] - this.prevX, client[1] - this.prevY], inputEvent);\n  };\n\n  __proto.move = function (delta, inputEvent) {\n    var clientX;\n    var clientY;\n    var isFirstDrag = false;\n\n    if (!this.isFlag) {\n      this.prevX = delta[0];\n      this.prevY = delta[1];\n      this.startX = delta[0];\n      this.startY = delta[1];\n      clientX = delta[0];\n      clientY = delta[1];\n      this.isFlag = true;\n    } else {\n      var isPrevDrag = this.isDrag;\n      clientX = this.prevX + delta[0];\n      clientY = this.prevY + delta[1];\n\n      if (delta[0] || delta[1]) {\n        this.isDrag = true;\n      }\n\n      if (!isPrevDrag && this.isDrag) {\n        isFirstDrag = true;\n      }\n    }\n\n    this.prevX = clientX;\n    this.prevY = clientY;\n    return {\n      type: \"drag\",\n      clientX: clientX,\n      clientY: clientY,\n      inputEvent: inputEvent,\n      isFirstDrag: isFirstDrag,\n      isDrag: this.isDrag,\n      distX: clientX - this.startX,\n      distY: clientY - this.startY,\n      deltaX: delta[0],\n      deltaY: delta[1],\n      datas: this.datas[this.ableName],\n      originalDatas: this.datas,\n      parentEvent: true,\n      parentGesto: this\n    };\n  };\n\n  return CustomGesto;\n}();\n\nfunction calculatePointerDist(moveable, e) {\n  var clientX = e.clientX,\n      clientY = e.clientY,\n      datas = e.datas;\n  var _a = moveable.state,\n      moveableClientRect = _a.moveableClientRect,\n      rootMatrix = _a.rootMatrix,\n      is3d = _a.is3d,\n      pos1 = _a.pos1;\n  var left = moveableClientRect.left,\n      top = moveableClientRect.top;\n  var n = is3d ? 4 : 3;\n\n  var _b = minus(calculateInversePosition(rootMatrix, [clientX - left, clientY - top], n), pos1),\n      posX = _b[0],\n      posY = _b[1];\n\n  var _c = getDragDist({\n    datas: datas,\n    distX: posX,\n    distY: posY\n  }),\n      distX = _c[0],\n      distY = _c[1];\n\n  return [distX, distY];\n}\n\nfunction setDragStart(moveable, _a) {\n  var datas = _a.datas;\n  var _b = moveable.state,\n      allMatrix = _b.allMatrix,\n      beforeMatrix = _b.beforeMatrix,\n      is3d = _b.is3d,\n      left = _b.left,\n      top = _b.top,\n      origin = _b.origin,\n      offsetMatrix = _b.offsetMatrix,\n      targetMatrix = _b.targetMatrix,\n      transformOrigin = _b.transformOrigin;\n  var n = is3d ? 4 : 3;\n  datas.is3d = is3d;\n  datas.matrix = allMatrix;\n  datas.targetMatrix = targetMatrix;\n  datas.beforeMatrix = beforeMatrix;\n  datas.offsetMatrix = offsetMatrix;\n  datas.transformOrigin = transformOrigin;\n  datas.inverseMatrix = invert(allMatrix, n);\n  datas.inverseBeforeMatrix = invert(beforeMatrix, n);\n  datas.absoluteOrigin = convertPositionMatrix(plus([left, top], origin), n);\n  datas.startDragBeforeDist = calculate(datas.inverseBeforeMatrix, datas.absoluteOrigin, n);\n  datas.startDragDist = calculate(datas.inverseMatrix, datas.absoluteOrigin, n);\n}\n\nfunction getTransformDirection(e) {\n  return calculateMoveablePosition(e.datas.beforeTransform, [50, 50], 100, 100).direction;\n}\n\nfunction resolveTransformEvent(event, functionName) {\n  var datas = event.datas,\n      originalDatas = event.originalDatas.beforeRenderable;\n  var index = datas.transformIndex;\n  var nextTransforms = originalDatas.nextTransforms;\n  var length = nextTransforms.length;\n  var nextTransformAppendedIndexes = originalDatas.nextTransformAppendedIndexes;\n  var nextIndex = 0;\n\n  if (index === -1) {\n    // translate => rotate => scale\n    if (functionName === \"translate\") {\n      nextIndex = 0;\n    } else if (functionName === \"rotate\") {\n      nextIndex = findIndex(nextTransforms, function (text) {\n        return text.match(/scale\\(/g);\n      });\n    }\n\n    if (nextIndex === -1) {\n      nextIndex = nextTransforms.length;\n    }\n\n    datas.transformIndex = nextIndex;\n  } else if (find(nextTransformAppendedIndexes, function (info) {\n    return info.index === index && info.functionName === functionName;\n  })) {\n    nextIndex = index;\n  } else {\n    nextIndex = index + nextTransformAppendedIndexes.filter(function (info) {\n      return info.index < index;\n    }).length;\n  }\n\n  var result = convertTransformInfo(nextTransforms, nextIndex);\n  var targetFunction = result.targetFunction;\n  var matFunctionName = functionName === \"rotate\" ? \"rotateZ\" : functionName;\n  datas.beforeFunctionTexts = result.beforeFunctionTexts;\n  datas.afterFunctionTexts = result.afterFunctionTexts;\n  datas.beforeTransform = result.beforeFunctionMatrix;\n  datas.beforeTransform2 = result.beforeFunctionMatrix2;\n  datas.targetTansform = result.targetFunctionMatrix;\n  datas.afterTransform = result.afterFunctionMatrix;\n  datas.afterTransform2 = result.afterFunctionMatrix2;\n  datas.targetAllTransform = result.allFunctionMatrix;\n\n  if (targetFunction.functionName === matFunctionName) {\n    datas.afterFunctionTexts.splice(0, 1);\n    datas.isAppendTransform = false;\n  } else if (length > nextIndex) {\n    datas.isAppendTransform = true;\n    originalDatas.nextTransformAppendedIndexes = __spreadArray(__spreadArray([], nextTransformAppendedIndexes, true), [{\n      functionName: functionName,\n      index: nextIndex,\n      isAppend: true\n    }], false);\n  }\n}\n\nfunction convertTransformFormat(datas, value, dist) {\n  return \"\".concat(datas.beforeFunctionTexts.join(\" \"), \" \").concat(datas.isAppendTransform ? dist : value, \" \").concat(datas.afterFunctionTexts.join(\" \"));\n}\n\nfunction getTransformDist(_a) {\n  var datas = _a.datas,\n      distX = _a.distX,\n      distY = _a.distY;\n\n  var _b = getBeforeDragDist({\n    datas: datas,\n    distX: distX,\n    distY: distY\n  }),\n      bx = _b[0],\n      by = _b[1]; // B * [tx, ty] * A = [bx, by] * targetMatrix;\n  // [tx, ty] = B-1 * [bx, by] * targetMatrix * A-1 * [0, 0];\n\n\n  var res = getTransfromMatrix(datas, fromTranslation([bx, by], 4));\n  return calculate(res, convertPositionMatrix([0, 0, 0], 4), 4);\n}\n\nfunction getTransfromMatrix(datas, targetMatrix, isAfter) {\n  var beforeTransform = datas.beforeTransform,\n      afterTransform = datas.afterTransform,\n      beforeTransform2 = datas.beforeTransform2,\n      afterTransform2 = datas.afterTransform2,\n      targetAllTransform = datas.targetAllTransform; // B * afterTargetMatrix * A = (targetMatrix * targetAllTransform)\n  // afterTargetMatrix = B-1 * targetMatrix * targetAllTransform * A-1\n  // nextTargetMatrix = (targetMatrix * targetAllTransform)\n\n  var nextTargetMatrix = isAfter ? multiply(targetAllTransform, targetMatrix, 4) : multiply(targetMatrix, targetAllTransform, 4); // res1 = B-1 * nextTargetMatrix\n\n  var res1 = multiply(invert(isAfter ? beforeTransform2 : beforeTransform, 4), nextTargetMatrix, 4); // res3 = res2 * A-1\n\n  var afterTargetMatrix = multiply(res1, invert(isAfter ? afterTransform2 : afterTransform, 4), 4);\n  return afterTargetMatrix;\n}\n\nfunction getBeforeDragDist(_a) {\n  var datas = _a.datas,\n      distX = _a.distX,\n      distY = _a.distY; // TT = BT\n\n  var inverseBeforeMatrix = datas.inverseBeforeMatrix,\n      is3d = datas.is3d,\n      startDragBeforeDist = datas.startDragBeforeDist,\n      absoluteOrigin = datas.absoluteOrigin;\n  var n = is3d ? 4 : 3; // ABS_ORIGIN * [distX, distY] = BM * (ORIGIN + [tx, ty])\n  // BM -1 * ABS_ORIGIN * [distX, distY] - ORIGIN = [tx, ty]\n\n  return minus(calculate(inverseBeforeMatrix, plus(absoluteOrigin, [distX, distY]), n), startDragBeforeDist);\n}\n\nfunction getDragDist(_a, isBefore) {\n  var datas = _a.datas,\n      distX = _a.distX,\n      distY = _a.distY;\n  var inverseBeforeMatrix = datas.inverseBeforeMatrix,\n      inverseMatrix = datas.inverseMatrix,\n      is3d = datas.is3d,\n      startDragBeforeDist = datas.startDragBeforeDist,\n      startDragDist = datas.startDragDist,\n      absoluteOrigin = datas.absoluteOrigin;\n  var n = is3d ? 4 : 3;\n  return minus(calculate(isBefore ? inverseBeforeMatrix : inverseMatrix, plus(absoluteOrigin, [distX, distY]), n), isBefore ? startDragBeforeDist : startDragDist);\n}\n\nfunction getInverseDragDist(_a, isBefore) {\n  var datas = _a.datas,\n      distX = _a.distX,\n      distY = _a.distY;\n  var beforeMatrix = datas.beforeMatrix,\n      matrix = datas.matrix,\n      is3d = datas.is3d,\n      startDragBeforeDist = datas.startDragBeforeDist,\n      startDragDist = datas.startDragDist,\n      absoluteOrigin = datas.absoluteOrigin;\n  var n = is3d ? 4 : 3;\n  return minus(calculate(isBefore ? beforeMatrix : matrix, plus(isBefore ? startDragBeforeDist : startDragDist, [distX, distY]), n), absoluteOrigin);\n}\n\nfunction calculateTransformOrigin(transformOrigin, width, height, prevWidth, prevHeight, prevOrigin) {\n  if (prevWidth === void 0) {\n    prevWidth = width;\n  }\n\n  if (prevHeight === void 0) {\n    prevHeight = height;\n  }\n\n  if (prevOrigin === void 0) {\n    prevOrigin = [0, 0];\n  }\n\n  if (!transformOrigin) {\n    return prevOrigin;\n  }\n\n  return transformOrigin.map(function (pos, i) {\n    var _a = splitUnit(pos),\n        value = _a.value,\n        unit = _a.unit;\n\n    var prevSize = i ? prevHeight : prevWidth;\n    var size = i ? height : width;\n\n    if (pos === \"%\" || isNaN(value)) {\n      // no value but %\n      var measureRatio = prevSize ? prevOrigin[i] / prevSize : 0;\n      return size * measureRatio;\n    } else if (unit !== \"%\") {\n      return value;\n    }\n\n    return size * value / 100;\n  });\n}\n\nfunction getPosIndexesByDirection(direction) {\n  var indexes = [];\n\n  if (direction[1] >= 0) {\n    if (direction[0] >= 0) {\n      indexes.push(3);\n    }\n\n    if (direction[0] <= 0) {\n      indexes.push(2);\n    }\n  }\n\n  if (direction[1] <= 0) {\n    if (direction[0] >= 0) {\n      indexes.push(1);\n    }\n\n    if (direction[0] <= 0) {\n      indexes.push(0);\n    }\n  }\n\n  return indexes;\n}\n\nfunction getPosesByDirection(poses, direction) {\n  /*\n  [-1, -1](pos1)       [0, -1](pos1,pos2)       [1, -1](pos2)\n  [-1, 0](pos1, pos3)                           [1, 0](pos2, pos4)\n  [-1, 1](pos3)        [0, 1](pos3, pos4)       [1, 1](pos4)\n  */\n  return getPosIndexesByDirection(direction).map(function (index) {\n    return poses[index];\n  });\n}\n\nfunction getPosByDirection(poses, direction) {\n  var xRatio = (direction[0] + 1) / 2;\n  var yRatio = (direction[1] + 1) / 2;\n  var top = [dot(poses[0][0], poses[1][0], xRatio, 1 - xRatio), dot(poses[0][1], poses[1][1], xRatio, 1 - xRatio)];\n  var bottom = [dot(poses[2][0], poses[3][0], xRatio, 1 - xRatio), dot(poses[2][1], poses[3][1], xRatio, 1 - xRatio)];\n  return [dot(top[0], bottom[0], yRatio, 1 - yRatio), dot(top[1], bottom[1], yRatio, 1 - yRatio)];\n}\n\nfunction getDist(startPos, matrix, width, height, n, fixedDirection) {\n  var poses = calculatePoses(matrix, width, height, n);\n  var fixedPos = getPosByDirection(poses, fixedDirection);\n  var distX = startPos[0] - fixedPos[0];\n  var distY = startPos[1] - fixedPos[1];\n  return [distX, distY];\n}\n\nfunction getNextMatrix(offsetMatrix, targetMatrix, origin, n) {\n  return multiply(offsetMatrix, getAbsoluteMatrix(targetMatrix, n, origin), n);\n}\n\nfunction getNextTransformMatrix(state, datas, transform) {\n  var transformOrigin = state.transformOrigin,\n      offsetMatrix = state.offsetMatrix,\n      is3d = state.is3d;\n  var beforeTransform = datas.beforeTransform,\n      afterTransform = datas.afterTransform;\n  var n = is3d ? 4 : 3;\n  var targetTransform = parseMat([transform]);\n  return getNextMatrix(offsetMatrix, convertDimension(multiply(multiply(beforeTransform, targetTransform, 4), afterTransform, 4), 4, n), transformOrigin, n);\n}\n\nfunction scaleMatrix(state, scale) {\n  var transformOrigin = state.transformOrigin,\n      offsetMatrix = state.offsetMatrix,\n      is3d = state.is3d,\n      targetMatrix = state.targetMatrix;\n  var n = is3d ? 4 : 3;\n  return getNextMatrix(offsetMatrix, multiply(targetMatrix, createScaleMatrix(scale, n), n), transformOrigin, n);\n}\n\nfunction fillTransformStartEvent(e) {\n  var originalDatas = getBeforeRenderableDatas(e);\n  return {\n    setTransform: function (transform, index) {\n      if (index === void 0) {\n        index = -1;\n      }\n\n      originalDatas.startTransforms = isArray(transform) ? transform : splitSpace(transform);\n      setTransformIndex(e, index);\n    },\n    setTransformIndex: function (index) {\n      setTransformIndex(e, index);\n    }\n  };\n}\n\nfunction setDefaultTransformIndex(e, property) {\n  var originalDatas = getBeforeRenderableDatas(e);\n  var startTransforms = originalDatas.startTransforms;\n  setTransformIndex(e, findIndex(startTransforms, function (func) {\n    return func.indexOf(\"\".concat(property, \"(\")) === 0;\n  }));\n}\n\nfunction setTransformIndex(e, index) {\n  var originalDatas = getBeforeRenderableDatas(e);\n  var datas = e.datas;\n  datas.transformIndex = index;\n\n  if (index === -1) {\n    return;\n  }\n\n  var transform = originalDatas.startTransforms[index];\n\n  if (!transform) {\n    return;\n  }\n\n  var info = parse([transform]);\n  datas.startValue = info[0].functionValue;\n}\n\nfunction fillOriginalTransform(e, transform) {\n  var originalDatas = getBeforeRenderableDatas(e);\n  originalDatas.nextTransforms = splitSpace(transform); // originalDatas.nextTargetMatrix = parseMat(transform);\n}\n\nfunction getBeforeRenderableDatas(e) {\n  return e.originalDatas.beforeRenderable;\n}\n\nfunction getNextTransforms(e) {\n  var originalDatas = e.originalDatas.beforeRenderable;\n  return originalDatas.nextTransforms;\n}\n\nfunction getNextTransformText(e) {\n  return getNextTransforms(e).join(\" \");\n}\n\nfunction getNextStyle(e) {\n  return getBeforeRenderableDatas(e).nextStyle;\n}\n\nfunction fillTransformEvent(moveable, nextTransform, delta, isPinch, e) {\n  fillOriginalTransform(e, nextTransform);\n  var drag = Draggable.drag(moveable, setCustomDrag(e, moveable.state, delta, isPinch, false));\n  var afterTransform = drag ? drag.transform : nextTransform;\n  return __assign(__assign({\n    transform: nextTransform,\n    drag: drag\n  }, fillCSSObject({\n    transform: afterTransform\n  }, e)), {\n    afterTransform: afterTransform\n  });\n}\n\nfunction getTranslateDist(moveable, transform, fixedDirection, fixedPosition, datas) {\n  var state = moveable.state;\n  var left = state.left,\n      top = state.top;\n  var groupable = moveable.props.groupable;\n  var nextMatrix = getNextTransformMatrix(moveable.state, datas, transform);\n  var groupLeft = groupable ? left : 0;\n  var groupTop = groupable ? top : 0;\n  var nextFixedPosition = getDirectionOffset(moveable, fixedDirection, nextMatrix);\n  var dist = minus(fixedPosition, nextFixedPosition);\n  return minus(dist, [groupLeft, groupTop]);\n}\n\nfunction getScaleDist(moveable, scaleDist, fixedDirection, fixedPosition, datas) {\n  var dist = getTranslateDist(moveable, \"scale(\".concat(scaleDist.join(\", \"), \")\"), fixedDirection, fixedPosition, datas);\n  return dist;\n}\n\nfunction getDirectionByPos(pos, width, height) {\n  return [-1 + pos[0] / (width / 2), -1 + pos[1] / (height / 2)];\n}\n\nfunction getDirectionOffset(moveable, direction, nextMatrix) {\n  if (nextMatrix === void 0) {\n    nextMatrix = moveable.state.allMatrix;\n  }\n\n  var _a = moveable.state,\n      width = _a.width,\n      height = _a.height,\n      is3d = _a.is3d;\n  var n = is3d ? 4 : 3;\n  var nextFixedOffset = [width / 2 * (1 + direction[0]), height / 2 * (1 + direction[1])];\n  return calculatePosition(nextMatrix, nextFixedOffset, n);\n}\n\nfunction getRotateDist(moveable, rotateDist, datas) {\n  var fixedDirection = datas.fixedDirection;\n  var fixedPosition = datas.fixedPosition;\n  return getTranslateDist(moveable, \"rotate(\".concat(rotateDist, \"deg)\"), fixedDirection, fixedPosition, datas);\n}\n\nfunction getResizeDist(moveable, width, height, fixedPosition, transformOrigin, datas) {\n  var groupable = moveable.props.groupable;\n  var state = moveable.state;\n  var prevOrigin = state.transformOrigin,\n      offsetMatrix = state.offsetMatrix,\n      is3d = state.is3d,\n      prevWidth = state.width,\n      prevHeight = state.height,\n      left = state.left,\n      top = state.top;\n  var fixedDirection = datas.fixedDirection;\n  var targetMatrix = datas.nextTargetMatrix || state.targetMatrix;\n  var n = is3d ? 4 : 3;\n  var nextOrigin = calculateTransformOrigin(transformOrigin, width, height, prevWidth, prevHeight, prevOrigin);\n  var groupLeft = groupable ? left : 0;\n  var groupTop = groupable ? top : 0;\n  var nextMatrix = getNextMatrix(offsetMatrix, targetMatrix, nextOrigin, n);\n  var dist = getDist(fixedPosition, nextMatrix, width, height, n, fixedDirection);\n  return minus(dist, [groupLeft, groupTop]);\n}\n\nfunction getAbsolutePosition(moveable, direction) {\n  return getPosByDirection(getAbsolutePosesByState(moveable.state), direction);\n}\n\nfunction getGestoData(moveable, ableName) {\n  var targetGesto = moveable.targetGesto;\n  var controlGesto = moveable.controlGesto;\n  var data;\n\n  if (targetGesto === null || targetGesto === void 0 ? void 0 : targetGesto.isFlag()) {\n    data = targetGesto.getEventData()[ableName];\n  }\n\n  if (!data && (controlGesto === null || controlGesto === void 0 ? void 0 : controlGesto.isFlag())) {\n    data = controlGesto.getEventData()[ableName];\n  }\n\n  return data || {};\n}\n\nfunction multiply2(pos1, pos2) {\n  return [pos1[0] * pos2[0], pos1[1] * pos2[1]];\n}\n\nfunction prefix() {\n  var classNames = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    classNames[_i] = arguments[_i];\n  }\n\n  return prefixNames.apply(void 0, __spreadArray([PREFIX], classNames, false));\n}\n\nfunction defaultSync(fn) {\n  fn();\n}\n\nfunction getTransformMatrix(transform) {\n  if (!transform || transform === \"none\") {\n    return [1, 0, 0, 1, 0, 0];\n  }\n\n  if (isObject(transform)) {\n    return transform;\n  }\n\n  return parseMat(transform);\n}\n\nfunction getAbsoluteMatrix(matrix, n, origin) {\n  return multiplies(n, createOriginMatrix(origin, n), matrix, createOriginMatrix(origin.map(function (a) {\n    return -a;\n  }), n));\n}\n\nfunction measureSVGSize(el, unit, isHorizontal) {\n  if (unit === \"%\") {\n    var viewBox = getSVGViewBox(el.ownerSVGElement);\n    return viewBox[isHorizontal ? \"width\" : \"height\"] / 100;\n  }\n\n  return 1;\n}\n\nfunction getBeforeTransformOrigin(el) {\n  var relativeOrigin = getTransformOrigin(getComputedStyle$1(el, \":before\"));\n  return relativeOrigin.map(function (o, i) {\n    var _a = splitUnit(o),\n        value = _a.value,\n        unit = _a.unit;\n\n    return value * measureSVGSize(el, unit, i === 0);\n  });\n}\n\nfunction getTransformOrigin(style) {\n  var transformOrigin = style.transformOrigin;\n  return transformOrigin ? transformOrigin.split(\" \") : [\"0\", \"0\"];\n}\n\nfunction getElementTransform(target, computedStyle) {\n  if (computedStyle === void 0) {\n    computedStyle = getComputedStyle$1(target);\n  }\n\n  var computedTransform = computedStyle.transform;\n\n  if (computedTransform && computedTransform !== \"none\") {\n    return computedStyle.transform;\n  }\n\n  if (\"transform\" in target) {\n    var list = target.transform;\n    var baseVal = list.baseVal;\n\n    if (!baseVal) {\n      return \"\";\n    }\n\n    var length = baseVal.length;\n\n    if (!length) {\n      return \"\";\n    }\n\n    var matrixes = [];\n\n    var _loop_1 = function (i) {\n      var matrix = baseVal[i].matrix;\n      matrixes.push(\"matrix(\".concat([\"a\", \"b\", \"c\", \"d\", \"e\", \"f\"].map(function (chr) {\n        return matrix[chr];\n      }).join(\", \"), \")\"));\n    };\n\n    for (var i = 0; i < length; ++i) {\n      _loop_1(i);\n    }\n\n    return matrixes.join(\" \");\n  }\n\n  return \"\";\n}\n\nfunction getOffsetInfo(el, lastParent, isParent, checkZoom, targetStyle) {\n  var _a, _b, _c;\n\n  var doc = el && el.ownerDocument ? el.ownerDocument : document;\n  var documentElement = doc.documentElement || doc.body;\n  var hasSlot = false;\n  var target;\n  var parentSlotElement;\n\n  if (!el || isParent) {\n    target = el;\n  } else {\n    var assignedSlotParentElement = (_a = el === null || el === void 0 ? void 0 : el.assignedSlot) === null || _a === void 0 ? void 0 : _a.parentElement;\n    var parentElement = el.parentElement;\n\n    if (assignedSlotParentElement) {\n      hasSlot = true;\n      parentSlotElement = parentElement;\n      target = assignedSlotParentElement;\n    } else {\n      target = parentElement;\n    }\n  }\n\n  var isCustomElement = false;\n  var isEnd = el === lastParent || target === lastParent;\n  var position = \"relative\";\n  var offsetZoom = 1;\n  var targetZoom = parseFloat((_b = targetStyle) === null || _b === void 0 ? void 0 : _b.zoom) || 1;\n  var targetPosition = targetStyle === null || targetStyle === void 0 ? void 0 : targetStyle.position;\n\n  while (target && target !== documentElement) {\n    if (lastParent === target) {\n      isEnd = true;\n    }\n\n    var style = getComputedStyle$1(target);\n    var tagName = target.tagName.toLowerCase();\n    var transform = getElementTransform(target, style);\n    var willChange = style.willChange;\n    var zoom = parseFloat(style.zoom) || 1;\n    position = style.position;\n\n    if (checkZoom && zoom !== 1) {\n      offsetZoom = zoom;\n      break;\n    }\n\n    if ( // offsetParent is the parentElement if the target's zoom is not 1 and not absolute.\n    !isParent && checkZoom && targetZoom !== 1 && targetPosition && targetPosition !== \"absolute\" || tagName === \"svg\" || position !== \"static\" || transform && transform !== \"none\" || willChange === \"transform\") {\n      break;\n    }\n\n    var slotParentNode = (_c = el === null || el === void 0 ? void 0 : el.assignedSlot) === null || _c === void 0 ? void 0 : _c.parentNode;\n    var targetParentNode = target.parentNode;\n\n    if (slotParentNode) {\n      hasSlot = true;\n      parentSlotElement = targetParentNode;\n    }\n\n    var parentNode = slotParentNode || targetParentNode;\n\n    if (parentNode && parentNode.nodeType === 11) {\n      // Shadow Root\n      target = parentNode.host;\n      isCustomElement = true;\n      break;\n    }\n\n    target = parentNode;\n    position = \"relative\";\n  }\n\n  return {\n    offsetZoom: offsetZoom,\n    hasSlot: hasSlot,\n    parentSlotElement: parentSlotElement,\n    isCustomElement: isCustomElement,\n    isStatic: position === \"static\",\n    isEnd: isEnd || !target || target === documentElement,\n    offsetParent: target || documentElement\n  };\n}\n\nfunction getOffsetPosInfo(el, target, style) {\n  var _a;\n\n  var tagName = el.tagName.toLowerCase();\n  var offsetLeft = el.offsetLeft;\n  var offsetTop = el.offsetTop; // svg\n\n  var isSVG = isUndefined(offsetLeft);\n  var hasOffset = !isSVG;\n  var origin;\n  var targetOrigin; // inner svg element\n\n  if (!hasOffset && tagName !== \"svg\") {\n    origin = IS_WEBKIT605 ? getBeforeTransformOrigin(el) : getTransformOrigin(style).map(function (pos) {\n      return parseFloat(pos);\n    });\n    targetOrigin = origin.slice();\n    hasOffset = true;\n    _a = getSVGGraphicsOffset(el, origin, el === target && target.tagName.toLowerCase() === \"g\"), offsetLeft = _a[0], offsetTop = _a[1], origin[0] = _a[2], origin[1] = _a[3];\n  } else {\n    origin = getTransformOrigin(style).map(function (pos) {\n      return parseFloat(pos);\n    });\n    targetOrigin = origin.slice();\n  }\n\n  return {\n    tagName: tagName,\n    isSVG: isSVG,\n    hasOffset: hasOffset,\n    offset: [offsetLeft || 0, offsetTop || 0],\n    origin: origin,\n    targetOrigin: targetOrigin\n  };\n}\n\nfunction getBodyOffset(el, isSVG, style) {\n  if (style === void 0) {\n    style = getComputedStyle$1(el);\n  }\n\n  var bodyStyle = getComputedStyle$1(document.body);\n  var bodyPosition = bodyStyle.position;\n\n  if (!isSVG && (!bodyPosition || bodyPosition === \"static\")) {\n    return [0, 0];\n  }\n\n  var marginLeft = parseInt(bodyStyle.marginLeft, 10);\n  var marginTop = parseInt(bodyStyle.marginTop, 10);\n\n  if (style.position === \"absolute\") {\n    if (style.top !== \"auto\" || style.bottom !== \"auto\") {\n      marginTop = 0;\n    }\n\n    if (style.left !== \"auto\" || style.right !== \"auto\") {\n      marginLeft = 0;\n    }\n  }\n\n  return [marginLeft, marginTop];\n}\n\nfunction convert3DMatrixes(matrixes) {\n  matrixes.forEach(function (info) {\n    var matrix = info.matrix;\n\n    if (matrix) {\n      info.matrix = convertDimension(matrix, 3, 4);\n    }\n  });\n}\n\nfunction getPositionFixedInfo(el) {\n  var fixedContainer = el.parentElement;\n  var hasTransform = false;\n\n  while (fixedContainer) {\n    var transform = getComputedStyle$1(fixedContainer).transform;\n\n    if (transform && transform !== \"none\") {\n      hasTransform = true;\n      break;\n    }\n\n    if (fixedContainer === document.body) {\n      break;\n    }\n\n    fixedContainer = fixedContainer.parentElement;\n  }\n\n  return {\n    fixedContainer: fixedContainer || document.body,\n    hasTransform: hasTransform\n  };\n}\n\nfunction makeMatrixCSS(matrix, is3d) {\n  if (is3d === void 0) {\n    is3d = matrix.length > 9;\n  }\n\n  return \"\".concat(is3d ? \"matrix3d\" : \"matrix\", \"(\").concat(convertMatrixtoCSS(matrix, !is3d).join(\",\"), \")\");\n}\n\nfunction getSVGViewBox(el) {\n  var clientWidth = el.clientWidth;\n  var clientHeight = el.clientHeight;\n\n  if (!el) {\n    return {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0,\n      clientWidth: clientWidth,\n      clientHeight: clientHeight\n    };\n  }\n\n  var viewBox = el.viewBox;\n  var baseVal = viewBox && viewBox.baseVal || {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  };\n  return {\n    x: baseVal.x,\n    y: baseVal.y,\n    width: baseVal.width || clientWidth,\n    height: baseVal.height || clientHeight,\n    clientWidth: clientWidth,\n    clientHeight: clientHeight\n  };\n}\n\nfunction getSVGMatrix(el, n) {\n  var _a = getSVGViewBox(el),\n      viewBoxWidth = _a.width,\n      viewBoxHeight = _a.height,\n      clientWidth = _a.clientWidth,\n      clientHeight = _a.clientHeight;\n\n  var scaleX = clientWidth / viewBoxWidth;\n  var scaleY = clientHeight / viewBoxHeight;\n  var preserveAspectRatio = el.preserveAspectRatio.baseVal; // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/preserveAspectRatio\n\n  var align = preserveAspectRatio.align; // 1 : meet 2: slice\n\n  var meetOrSlice = preserveAspectRatio.meetOrSlice;\n  var svgOrigin = [0, 0];\n  var scale = [scaleX, scaleY];\n  var translate = [0, 0];\n\n  if (align !== 1) {\n    var xAlign = (align - 2) % 3;\n    var yAlign = Math.floor((align - 2) / 3);\n    svgOrigin[0] = viewBoxWidth * xAlign / 2;\n    svgOrigin[1] = viewBoxHeight * yAlign / 2;\n    var scaleDimension = meetOrSlice === 2 ? Math.max(scaleY, scaleX) : Math.min(scaleX, scaleY);\n    scale[0] = scaleDimension;\n    scale[1] = scaleDimension;\n    translate[0] = (clientWidth - viewBoxWidth) / 2 * xAlign;\n    translate[1] = (clientHeight - viewBoxHeight) / 2 * yAlign;\n  }\n\n  var scaleMatrix = createScaleMatrix(scale, n);\n  scaleMatrix[n * (n - 1)] = translate[0], scaleMatrix[n * (n - 1) + 1] = translate[1];\n  return getAbsoluteMatrix(scaleMatrix, n, svgOrigin);\n}\n\nfunction getSVGGraphicsOffset(el, origin, isGTarget) {\n  if (!el.getBBox || !isGTarget && el.tagName.toLowerCase() === \"g\") {\n    return [0, 0, 0, 0];\n  }\n\n  var bbox = el.getBBox();\n  var viewBox = getSVGViewBox(el.ownerSVGElement);\n  var left = bbox.x - viewBox.x;\n  var top = bbox.y - viewBox.y;\n  return [left, top, origin[0] - left, origin[1] - top];\n}\n\nfunction calculatePosition(matrix, pos, n) {\n  return calculate(matrix, convertPositionMatrix(pos, n), n);\n}\n\nfunction calculatePoses(matrix, width, height, n) {\n  return [[0, 0], [width, 0], [0, height], [width, height]].map(function (pos) {\n    return calculatePosition(matrix, pos, n);\n  });\n}\n\nfunction getRect(poses) {\n  var posesX = poses.map(function (pos) {\n    return pos[0];\n  });\n  var posesY = poses.map(function (pos) {\n    return pos[1];\n  });\n  var left = Math.min.apply(Math, posesX);\n  var top = Math.min.apply(Math, posesY);\n  var right = Math.max.apply(Math, posesX);\n  var bottom = Math.max.apply(Math, posesY);\n  var rectWidth = right - left;\n  var rectHeight = bottom - top;\n  return {\n    left: left,\n    top: top,\n    right: right,\n    bottom: bottom,\n    width: rectWidth,\n    height: rectHeight\n  };\n}\n\nfunction calculateRect(matrix, width, height, n) {\n  var poses = calculatePoses(matrix, width, height, n);\n  return getRect(poses);\n}\n\nfunction getSVGOffset(offsetInfo, targetInfo, container, n, beforeMatrix) {\n  var _a;\n\n  var target = offsetInfo.target;\n  var origin = offsetInfo.origin;\n  var targetMatrix = targetInfo.matrix;\n\n  var _b = getSize(target),\n      width = _b.offsetWidth,\n      height = _b.offsetHeight;\n\n  var containerClientRect = container.getBoundingClientRect();\n  var margin = [0, 0];\n\n  if (container === document.body) {\n    margin = getBodyOffset(target, true);\n  }\n\n  var rect = target.getBoundingClientRect();\n  var rectLeft = rect.left - containerClientRect.left + container.scrollLeft - (container.clientLeft || 0) + margin[0];\n  var rectTop = rect.top - containerClientRect.top + container.scrollTop - (container.clientTop || 0) + margin[1];\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n  var mat = multiplies(n, beforeMatrix, targetMatrix);\n\n  var _c = calculateRect(mat, width, height, n),\n      prevLeft = _c.left,\n      prevTop = _c.top,\n      prevWidth = _c.width,\n      prevHeight = _c.height;\n\n  var posOrigin = calculatePosition(mat, origin, n);\n  var prevOrigin = minus(posOrigin, [prevLeft, prevTop]);\n  var rectOrigin = [rectLeft + prevOrigin[0] * rectWidth / prevWidth, rectTop + prevOrigin[1] * rectHeight / prevHeight];\n  var offset = [0, 0];\n  var count = 0;\n\n  while (++count < 10) {\n    var inverseBeforeMatrix = invert(beforeMatrix, n);\n    _a = minus(calculatePosition(inverseBeforeMatrix, rectOrigin, n), calculatePosition(inverseBeforeMatrix, posOrigin, n)), offset[0] = _a[0], offset[1] = _a[1];\n    var mat2 = multiplies(n, beforeMatrix, createOriginMatrix(offset, n), targetMatrix);\n\n    var _d = calculateRect(mat2, width, height, n),\n        nextLeft = _d.left,\n        nextTop = _d.top;\n\n    var distLeft = nextLeft - rectLeft;\n    var distTop = nextTop - rectTop;\n\n    if (Math.abs(distLeft) < 2 && Math.abs(distTop) < 2) {\n      break;\n    }\n\n    rectOrigin[0] -= distLeft;\n    rectOrigin[1] -= distTop;\n  }\n\n  return offset.map(function (p) {\n    return Math.round(p);\n  });\n}\n\nfunction calculateMoveableClientPositions(rootMatrix, poses, rootClientRect) {\n  var is3d = rootMatrix.length === 16;\n  var n = is3d ? 4 : 3;\n  var rootPoses = poses.map(function (pos) {\n    return calculatePosition(rootMatrix, pos, n);\n  });\n  var left = rootClientRect.left,\n      top = rootClientRect.top;\n  return rootPoses.map(function (pos) {\n    return [pos[0] + left, pos[1] + top];\n  });\n}\n\nfunction calculateMoveablePosition(matrix, origin, width, height) {\n  var is3d = matrix.length === 16;\n  var n = is3d ? 4 : 3;\n  var poses = calculatePoses(matrix, width, height, n);\n  var _a = poses[0],\n      x1 = _a[0],\n      y1 = _a[1],\n      _b = poses[1],\n      x2 = _b[0],\n      y2 = _b[1],\n      _c = poses[2],\n      x3 = _c[0],\n      y3 = _c[1],\n      _d = poses[3],\n      x4 = _d[0],\n      y4 = _d[1];\n\n  var _e = calculatePosition(matrix, origin, n),\n      originX = _e[0],\n      originY = _e[1];\n\n  var left = Math.min(x1, x2, x3, x4);\n  var top = Math.min(y1, y2, y3, y4);\n  var right = Math.max(x1, x2, x3, x4);\n  var bottom = Math.max(y1, y2, y3, y4);\n  x1 = x1 - left || 0;\n  x2 = x2 - left || 0;\n  x3 = x3 - left || 0;\n  x4 = x4 - left || 0;\n  y1 = y1 - top || 0;\n  y2 = y2 - top || 0;\n  y3 = y3 - top || 0;\n  y4 = y4 - top || 0;\n  originX = originX - left || 0;\n  originY = originY - top || 0;\n  var direction = getShapeDirection(calculatePoses(matrix, 100, 100, n));\n  return {\n    left: left,\n    top: top,\n    right: right,\n    bottom: bottom,\n    origin: [originX, originY],\n    pos1: [x1, y1],\n    pos2: [x2, y2],\n    pos3: [x3, y3],\n    pos4: [x4, y4],\n    direction: direction\n  };\n}\n\nfunction getDistSize(vec) {\n  return Math.sqrt(vec[0] * vec[0] + vec[1] * vec[1]);\n}\n\nfunction getDiagonalSize(pos1, pos2) {\n  return getDistSize([pos2[0] - pos1[0], pos2[1] - pos1[1]]);\n}\n\nfunction getLineStyle(pos1, pos2, zoom, rad) {\n  if (zoom === void 0) {\n    zoom = 1;\n  }\n\n  if (rad === void 0) {\n    rad = getRad(pos1, pos2);\n  }\n\n  var width = getDiagonalSize(pos1, pos2);\n  return {\n    transform: \"translateY(-50%) translate(\".concat(pos1[0], \"px, \").concat(pos1[1], \"px) rotate(\").concat(rad, \"rad) scaleY(\").concat(zoom, \")\"),\n    width: \"\".concat(width, \"px\")\n  };\n}\n\nfunction getControlTransform(rotation, zoom) {\n  var poses = [];\n\n  for (var _i = 2; _i < arguments.length; _i++) {\n    poses[_i - 2] = arguments[_i];\n  }\n\n  var length = poses.length;\n  var x = poses.reduce(function (prev, pos) {\n    return prev + pos[0];\n  }, 0) / length;\n  var y = poses.reduce(function (prev, pos) {\n    return prev + pos[1];\n  }, 0) / length;\n  return {\n    transform: \"translateZ(0px) translate(\".concat(x, \"px, \").concat(y, \"px) rotate(\").concat(rotation, \"rad) scale(\").concat(zoom, \")\")\n  };\n}\n\nfunction getProps(props, ableName) {\n  var self = props[ableName];\n\n  if (isObject(self)) {\n    return __assign(__assign({}, props), self);\n  }\n\n  return props;\n}\n\nfunction getSize(target, style) {\n  if (style === void 0) {\n    style = target ? getComputedStyle$1(target) : null;\n  }\n\n  var hasOffset = target && !isUndefined(target.offsetWidth);\n  var offsetWidth = 0;\n  var offsetHeight = 0;\n  var clientWidth = 0;\n  var clientHeight = 0;\n  var cssWidth = 0;\n  var cssHeight = 0;\n  var contentWidth = 0;\n  var contentHeight = 0;\n  var minWidth = 0;\n  var minHeight = 0;\n  var minOffsetWidth = 0;\n  var minOffsetHeight = 0;\n  var maxWidth = Infinity;\n  var maxHeight = Infinity;\n  var maxOffsetWidth = Infinity;\n  var maxOffsetHeight = Infinity;\n  var inlineCSSWidth = 0;\n  var inlineCSSHeight = 0;\n  var svg = false;\n\n  if (target) {\n    if (!hasOffset && target.tagName.toLowerCase() !== \"svg\") {\n      var bbox = target.getBBox();\n      svg = true;\n      offsetWidth = bbox.width;\n      offsetHeight = bbox.height;\n      cssWidth = offsetWidth;\n      cssHeight = offsetHeight;\n      contentWidth = offsetWidth;\n      contentHeight = offsetHeight;\n      clientWidth = offsetWidth;\n      clientHeight = offsetHeight;\n    } else {\n      var targetStyle = target.style;\n      var boxSizing = style.boxSizing === \"border-box\";\n      var borderLeft = parseFloat(style.borderLeftWidth) || 0;\n      var borderRight = parseFloat(style.borderRightWidth) || 0;\n      var borderTop = parseFloat(style.borderTopWidth) || 0;\n      var borderBottom = parseFloat(style.borderBottomWidth) || 0;\n      var paddingLeft = parseFloat(style.paddingLeft) || 0;\n      var paddingRight = parseFloat(style.paddingRight) || 0;\n      var paddingTop = parseFloat(style.paddingTop) || 0;\n      var paddingBottom = parseFloat(style.paddingBottom) || 0;\n      var horizontalPadding = paddingLeft + paddingRight;\n      var verticalPadding = paddingTop + paddingBottom;\n      var horizontalBorder = borderLeft + borderRight;\n      var verticalBorder = borderTop + borderBottom;\n      var horizontalOffset = horizontalPadding + horizontalBorder;\n      var verticalOffset = verticalPadding + verticalBorder;\n      var position = style.position;\n      var containerWidth = 0;\n      var containerHeight = 0; // SVGSVGElement, HTMLElement\n\n      if (\"clientLeft\" in target) {\n        var parentElement = null;\n\n        if (position === \"absolute\") {\n          var offsetInfo = getOffsetInfo(target, document.body);\n          parentElement = offsetInfo.offsetParent;\n        } else {\n          parentElement = target.parentElement;\n        }\n\n        if (parentElement) {\n          var parentStyle = getComputedStyle$1(parentElement);\n          containerWidth = parseFloat(parentStyle.width);\n          containerHeight = parseFloat(parentStyle.height);\n        }\n      }\n\n      minWidth = Math.max(horizontalPadding, convertUnitSize(style.minWidth, containerWidth) || 0);\n      minHeight = Math.max(verticalPadding, convertUnitSize(style.minHeight, containerHeight) || 0);\n      maxWidth = convertUnitSize(style.maxWidth, containerWidth);\n      maxHeight = convertUnitSize(style.maxHeight, containerHeight);\n\n      if (isNaN(maxWidth)) {\n        maxWidth = Infinity;\n      }\n\n      if (isNaN(maxHeight)) {\n        maxHeight = Infinity;\n      }\n\n      inlineCSSWidth = convertUnitSize(targetStyle.width, 0) || 0;\n      inlineCSSHeight = convertUnitSize(targetStyle.height, 0) || 0;\n      cssWidth = parseFloat(style.width) || 0;\n      cssHeight = parseFloat(style.height) || 0;\n      contentWidth = Math.abs(cssWidth - inlineCSSWidth) < 1 ? between(minWidth, inlineCSSWidth || cssWidth, maxWidth) : cssWidth;\n      contentHeight = Math.abs(cssHeight - inlineCSSHeight) < 1 ? between(minHeight, inlineCSSHeight || cssHeight, maxHeight) : cssHeight;\n      offsetWidth = contentWidth;\n      offsetHeight = contentHeight;\n      clientWidth = contentWidth;\n      clientHeight = contentHeight;\n\n      if (boxSizing) {\n        maxOffsetWidth = maxWidth;\n        maxOffsetHeight = maxHeight;\n        minOffsetWidth = minWidth;\n        minOffsetHeight = minHeight;\n        contentWidth = offsetWidth - horizontalOffset;\n        contentHeight = offsetHeight - verticalOffset;\n      } else {\n        maxOffsetWidth = maxWidth + horizontalOffset;\n        maxOffsetHeight = maxHeight + verticalOffset;\n        minOffsetWidth = minWidth + horizontalOffset;\n        minOffsetHeight = minHeight + verticalOffset;\n        offsetWidth = contentWidth + horizontalOffset;\n        offsetHeight = contentHeight + verticalOffset;\n      }\n\n      clientWidth = contentWidth + horizontalPadding;\n      clientHeight = contentHeight + verticalPadding;\n    }\n  }\n\n  return {\n    svg: svg,\n    offsetWidth: offsetWidth,\n    offsetHeight: offsetHeight,\n    clientWidth: clientWidth,\n    clientHeight: clientHeight,\n    contentWidth: contentWidth,\n    contentHeight: contentHeight,\n    inlineCSSWidth: inlineCSSWidth,\n    inlineCSSHeight: inlineCSSHeight,\n    cssWidth: cssWidth,\n    cssHeight: cssHeight,\n    minWidth: minWidth,\n    minHeight: minHeight,\n    maxWidth: maxWidth,\n    maxHeight: maxHeight,\n    minOffsetWidth: minOffsetWidth,\n    minOffsetHeight: minOffsetHeight,\n    maxOffsetWidth: maxOffsetWidth,\n    maxOffsetHeight: maxOffsetHeight\n  };\n}\n\nfunction getRotationRad(poses, direction) {\n  return getRad(direction > 0 ? poses[0] : poses[1], direction > 0 ? poses[1] : poses[0]);\n}\n\nfunction resetClientRect() {\n  return {\n    left: 0,\n    top: 0,\n    width: 0,\n    height: 0,\n    right: 0,\n    bottom: 0,\n    clientLeft: 0,\n    clientTop: 0,\n    clientWidth: 0,\n    clientHeight: 0,\n    scrollWidth: 0,\n    scrollHeight: 0\n  };\n}\n\nfunction getExtendsRect(el, rect) {\n  var isRoot = el === document.body || el === document.documentElement;\n  var extendsRect = {\n    clientLeft: el.clientLeft,\n    clientTop: el.clientTop,\n    clientWidth: el.clientWidth,\n    clientHeight: el.clientHeight,\n    scrollWidth: el.scrollWidth,\n    scrollHeight: el.scrollHeight,\n    overflow: false\n  };\n\n  if (isRoot) {\n    extendsRect.clientHeight = Math.max(rect.height, extendsRect.clientHeight);\n    extendsRect.scrollHeight = Math.max(rect.height, extendsRect.scrollHeight);\n  }\n\n  extendsRect.overflow = getComputedStyle$1(el).overflow !== \"visible\";\n  return __assign(__assign({}, rect), extendsRect);\n}\n\nfunction getClientRectByPosition(position, base, el, isExtends) {\n  var left = position.left,\n      right = position.right,\n      top = position.top,\n      bottom = position.bottom;\n  var baseTop = base.top;\n  var baseLeft = base.left;\n  var rect = {\n    left: baseLeft + left,\n    top: baseTop + top,\n    right: baseLeft + right,\n    bottom: baseTop + bottom,\n    width: right - left,\n    height: bottom - top\n  };\n\n  if (el && isExtends) {\n    return getExtendsRect(el, rect);\n  }\n\n  return rect;\n}\n\nfunction getClientRect(el, isExtends) {\n  var left = 0;\n  var top = 0;\n  var width = 0;\n  var height = 0; // let isRoot = false;\n\n  if (el) {\n    // isRoot = el === document.body || el === document.documentElement;\n    // if (isRoot) {\n    //     width = window.innerWidth;\n    //     height = window.innerHeight;\n    //     const scrollPos = getBodyScrollPos();\n    //     [left, top] = [-scrollPos[0], -scrollPos[1]];\n    // } else {\n    var clientRect = el.getBoundingClientRect();\n    left = clientRect.left;\n    top = clientRect.top;\n    width = clientRect.width;\n    height = clientRect.height; // }\n  }\n\n  var rect = {\n    left: left,\n    top: top,\n    width: width,\n    height: height,\n    right: left + width,\n    bottom: top + height\n  };\n\n  if (el && isExtends) {\n    return getExtendsRect(el, rect);\n  }\n\n  return rect;\n}\n\nfunction getTotalDirection(parentDirection, isPinch, inputEvent, datas) {\n  var direction;\n\n  if (parentDirection) {\n    direction = parentDirection;\n  } else if (isPinch) {\n    direction = [0, 0];\n  } else {\n    var target = inputEvent.target;\n    direction = getDirection(target, datas);\n  }\n\n  return direction;\n}\n\nfunction getDirection(target, datas) {\n  if (!target) {\n    return;\n  }\n\n  var deg = target.getAttribute(\"data-rotation\") || \"\";\n  var direciton = target.getAttribute(\"data-direction\");\n  datas.deg = deg;\n\n  if (!direciton) {\n    return;\n  }\n\n  var dir = [0, 0];\n  direciton.indexOf(\"w\") > -1 && (dir[0] = -1);\n  direciton.indexOf(\"e\") > -1 && (dir[0] = 1);\n  direciton.indexOf(\"n\") > -1 && (dir[1] = -1);\n  direciton.indexOf(\"s\") > -1 && (dir[1] = 1);\n  return dir;\n}\n\nfunction getAbsolutePoses(poses, dist) {\n  return [plus(dist, poses[0]), plus(dist, poses[1]), plus(dist, poses[2]), plus(dist, poses[3])];\n}\n\nfunction getAbsolutePosesByState(_a) {\n  var left = _a.left,\n      top = _a.top,\n      pos1 = _a.pos1,\n      pos2 = _a.pos2,\n      pos3 = _a.pos3,\n      pos4 = _a.pos4;\n  return getAbsolutePoses([pos1, pos2, pos3, pos4], [left, top]);\n}\n\nfunction roundSign(num) {\n  return Math.round(num % 1 === -0.5 ? num - 1 : num);\n}\n\nfunction unset(self, name) {\n  var _a;\n\n  (_a = self[name]) === null || _a === void 0 ? void 0 : _a.unset();\n  self[name] = null;\n}\n\nfunction fillCSSObject(style, resolvedEvent) {\n  if (resolvedEvent) {\n    var originalDatas = getBeforeRenderableDatas(resolvedEvent);\n    originalDatas.nextStyle = __assign(__assign({}, originalDatas.nextStyle), style);\n  }\n\n  return {\n    style: style,\n    cssText: getKeys(style).map(function (name) {\n      return \"\".concat(decamelize(name, \"-\"), \": \").concat(style[name], \";\");\n    }).join(\"\")\n  };\n}\n\nfunction fillAfterTransform(prevEvent, nextEvent, resolvedEvent) {\n  var afterTransform = nextEvent.afterTransform || nextEvent.transform;\n  return __assign(__assign({}, fillCSSObject(__assign(__assign(__assign({}, prevEvent.style), nextEvent.style), {\n    transform: afterTransform\n  }), resolvedEvent)), {\n    afterTransform: afterTransform,\n    transform: prevEvent.transform\n  });\n}\n\nfunction fillParams(moveable, e, params, isBeforeEvent) {\n  var datas = e.datas;\n\n  if (!datas.datas) {\n    datas.datas = {};\n  }\n\n  var nextParams = __assign(__assign({}, params), {\n    target: moveable.state.target,\n    clientX: e.clientX,\n    clientY: e.clientY,\n    inputEvent: e.inputEvent,\n    currentTarget: moveable,\n    moveable: moveable,\n    datas: datas.datas,\n    isFirstDrag: !!e.isFirstDrag,\n    isTrusted: e.isTrusted !== false,\n    stopAble: function () {\n      datas.isEventStart = false;\n    },\n    stopDrag: function () {\n      var _a;\n\n      (_a = e.stop) === null || _a === void 0 ? void 0 : _a.call(e);\n    }\n  });\n\n  if (!datas.isStartEvent) {\n    datas.isStartEvent = true;\n  } else if (!isBeforeEvent) {\n    datas.lastEvent = nextParams;\n  }\n\n  return nextParams;\n}\n\nfunction fillEndParams(moveable, e, params) {\n  var datas = e.datas;\n  var isDrag = \"isDrag\" in params ? params.isDrag : e.isDrag;\n\n  if (!datas.datas) {\n    datas.datas = {};\n  }\n\n  return __assign(__assign({\n    isDrag: isDrag\n  }, params), {\n    moveable: moveable,\n    target: moveable.state.target,\n    clientX: e.clientX,\n    clientY: e.clientY,\n    inputEvent: e.inputEvent,\n    currentTarget: moveable,\n    lastEvent: datas.lastEvent,\n    isDouble: e.isDouble,\n    datas: datas.datas,\n    isFirstDrag: !!e.isFirstDrag\n  });\n}\n\nfunction catchEvent(moveable, name, callback) {\n  moveable._emitter.on(name, callback);\n}\n\nfunction triggerEvent(moveable, name, params, isManager) {\n  return moveable.triggerEvent(name, params, isManager);\n}\n\nfunction getComputedStyle$1(el, pseudoElt) {\n  return window.getComputedStyle(el, pseudoElt);\n}\n\nfunction filterAbles(ables, methods, triggerAblesSimultaneously) {\n  var enabledAbles = {};\n  var ableGroups = {};\n  return ables.filter(function (able) {\n    var name = able.name;\n\n    if (enabledAbles[name] || !methods.some(function (method) {\n      return able[method];\n    })) {\n      return false;\n    }\n\n    if (!triggerAblesSimultaneously && able.ableGroup) {\n      if (ableGroups[able.ableGroup]) {\n        return false;\n      }\n\n      ableGroups[able.ableGroup] = true;\n    }\n\n    enabledAbles[name] = true;\n    return true;\n  });\n}\n\nfunction equals(a1, a2) {\n  return a1 === a2 || a1 == null && a2 == null;\n}\n\nfunction selectValue() {\n  var values = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    values[_i] = arguments[_i];\n  }\n\n  var length = values.length - 1;\n\n  for (var i = 0; i < length; ++i) {\n    var value = values[i];\n\n    if (!isUndefined(value)) {\n      return value;\n    }\n  }\n\n  return values[length];\n}\n\nfunction groupBy(arr, func) {\n  var groups = [];\n  var groupKeys = [];\n  arr.forEach(function (el, index) {\n    var groupKey = func(el, index, arr);\n    var keyIndex = groupKeys.indexOf(groupKey);\n    var group = groups[keyIndex] || [];\n\n    if (keyIndex === -1) {\n      groupKeys.push(groupKey);\n      groups.push(group);\n    }\n\n    group.push(el);\n  });\n  return groups;\n}\n\nfunction groupByMap(arr, func) {\n  var groups = [];\n  var groupKeys = {};\n  arr.forEach(function (el, index) {\n    var groupKey = func(el, index, arr);\n    var group = groupKeys[groupKey];\n\n    if (!group) {\n      group = [];\n      groupKeys[groupKey] = group;\n      groups.push(group);\n    }\n\n    group.push(el);\n  });\n  return groups;\n}\n\nfunction flat(arr) {\n  return arr.reduce(function (prev, cur) {\n    return prev.concat(cur);\n  }, []);\n}\n\nfunction maxOffset() {\n  var args = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n\n  args.sort(function (a, b) {\n    return Math.abs(b) - Math.abs(a);\n  });\n  return args[0];\n}\n\nfunction calculateInversePosition(matrix, pos, n) {\n  return calculate(invert(matrix, n), convertPositionMatrix(pos, n), n);\n}\n\nfunction convertDragDist(state, e) {\n  var _a;\n\n  var is3d = state.is3d,\n      rootMatrix = state.rootMatrix;\n  var n = is3d ? 4 : 3;\n  _a = calculateInversePosition(rootMatrix, [e.distX, e.distY], n), e.distX = _a[0], e.distY = _a[1];\n  return e;\n}\n\nfunction calculatePadding(matrix, pos, transformOrigin, origin, n) {\n  return minus(calculatePosition(matrix, plus(transformOrigin, pos), n), origin);\n}\n\nfunction convertCSSSize(value, size, isRelative) {\n  return isRelative ? \"\".concat(value / size * 100, \"%\") : \"\".concat(value, \"px\");\n}\n\nfunction getTinyDist(v) {\n  return Math.abs(v) <= TINY_NUM ? 0 : v;\n}\n\nfunction getDirectionViewClassName(ableName) {\n  return function (moveable) {\n    if (!moveable.isDragging(ableName)) {\n      return \"\";\n    }\n\n    var data = getGestoData(moveable, ableName);\n    var deg = data.deg;\n\n    if (!deg) {\n      return \"\";\n    }\n\n    return prefix(\"view-control-rotation\".concat(deg));\n  };\n}\n\nfunction getDirectionCondition(ableName, checkAbles) {\n  if (checkAbles === void 0) {\n    checkAbles = [ableName];\n  }\n\n  return function (moveable, e) {\n    if (e.isRequest) {\n      if (checkAbles.some(function (name) {\n        return e.requestAble === name;\n      })) {\n        return e.parentDirection;\n      } else {\n        return false;\n      }\n    }\n\n    var target = e.inputEvent.target;\n    return hasClass(target, prefix(\"direction\")) && (!ableName || hasClass(target, prefix(ableName)));\n  };\n}\n\nfunction invertObject(obj) {\n  var nextObj = {};\n\n  for (var name in obj) {\n    nextObj[obj[name]] = name;\n  }\n\n  return nextObj;\n}\n\nfunction convertTransformInfo(transforms, index) {\n  var beforeFunctionTexts = transforms.slice(0, index < 0 ? undefined : index);\n  var beforeFunctionTexts2 = transforms.slice(0, index < 0 ? undefined : index + 1);\n  var targetFunctionText = transforms[index] || \"\";\n  var afterFunctionTexts = index < 0 ? [] : transforms.slice(index);\n  var afterFunctionTexts2 = index < 0 ? [] : transforms.slice(index + 1);\n  var beforeFunctions = parse(beforeFunctionTexts);\n  var beforeFunctions2 = parse(beforeFunctionTexts2);\n  var targetFunctions = parse([targetFunctionText]);\n  var afterFunctions = parse(afterFunctionTexts);\n  var afterFunctions2 = parse(afterFunctionTexts2);\n  var beforeFunctionMatrix = toMat(beforeFunctions);\n  var beforeFunctionMatrix2 = toMat(beforeFunctions2);\n  var afterFunctionMatrix = toMat(afterFunctions);\n  var afterFunctionMatrix2 = toMat(afterFunctions2);\n  var allFunctionMatrix = multiply(beforeFunctionMatrix, afterFunctionMatrix, 4);\n  return {\n    transforms: transforms,\n    beforeFunctionMatrix: beforeFunctionMatrix,\n    beforeFunctionMatrix2: beforeFunctionMatrix2,\n    targetFunctionMatrix: toMat(targetFunctions),\n    afterFunctionMatrix: afterFunctionMatrix,\n    afterFunctionMatrix2: afterFunctionMatrix2,\n    allFunctionMatrix: allFunctionMatrix,\n    beforeFunctions: beforeFunctions,\n    beforeFunctions2: beforeFunctions2,\n    targetFunction: targetFunctions[0],\n    afterFunctions: afterFunctions,\n    afterFunctions2: afterFunctions2,\n    beforeFunctionTexts: beforeFunctionTexts,\n    beforeFunctionTexts2: beforeFunctionTexts2,\n    targetFunctionText: targetFunctionText,\n    afterFunctionTexts: afterFunctionTexts,\n    afterFunctionTexts2: afterFunctionTexts2\n  };\n}\n\nfunction isArrayFormat(arr) {\n  if (!arr || !isObject(arr)) {\n    return false;\n  }\n\n  if (arr instanceof Element) {\n    return false;\n  }\n\n  return isArray(arr) || \"length\" in arr;\n}\n\nfunction getRefTarget(target, isSelector) {\n  if (!target) {\n    return null;\n  }\n\n  if (target instanceof Element) {\n    return target;\n  }\n\n  if (isString(target)) {\n    if (isSelector) {\n      return document.querySelector(target);\n    }\n\n    return target;\n  }\n\n  if (isFunction(target)) {\n    return target();\n  }\n\n  if (\"current\" in target) {\n    return target.current;\n  }\n\n  return target;\n}\n\nfunction getRefTargets(targets, isSelector) {\n  if (!targets) {\n    return [];\n  }\n\n  var userTargets = isArrayFormat(targets) ? [].slice.call(targets) : [targets];\n  return userTargets.reduce(function (prev, target) {\n    if (isString(target) && isSelector) {\n      return __spreadArray(__spreadArray([], prev, true), [].slice.call(document.querySelectorAll(target)), true);\n    }\n\n    if (isArray(target)) {\n      prev.push(getRefTargets(target, isSelector));\n    } else {\n      prev.push(getRefTarget(target, isSelector));\n    }\n\n    return prev;\n  }, []);\n}\n\nfunction getAbsoluteRotation(pos1, pos2, direction) {\n  var deg = getRad(pos1, pos2) / Math.PI * 180;\n  deg = direction >= 0 ? deg : 180 - deg;\n  deg = deg >= 0 ? deg : 360 + deg;\n  return deg;\n}\n\nfunction getDragDistByState(state, dist) {\n  var rootMatrix = state.rootMatrix,\n      is3d = state.is3d;\n  var n = is3d ? 4 : 3;\n  var inverseMatrix = invert(rootMatrix, n);\n\n  if (!is3d) {\n    inverseMatrix = convertDimension(inverseMatrix, 3, 4);\n  }\n\n  inverseMatrix[12] = 0;\n  inverseMatrix[13] = 0;\n  inverseMatrix[14] = 0;\n  return calculateMatrixDist(inverseMatrix, dist);\n}\n\nfunction getSizeDistByDist(startSize, dist, ratio, direction, keepRatio) {\n  var startOffsetWidth = startSize[0],\n      startOffsetHeight = startSize[1];\n  var distWidth = 0;\n  var distHeight = 0;\n\n  if (keepRatio && startOffsetWidth && startOffsetHeight) {\n    var rad = getRad([0, 0], dist);\n    var standardRad = getRad([0, 0], direction);\n    var size = getDistSize(dist);\n    var signSize = Math.cos(rad - standardRad) * size;\n\n    if (!direction[0]) {\n      // top, bottom\n      distHeight = signSize;\n      distWidth = distHeight * ratio;\n    } else if (!direction[1]) {\n      // left, right\n      distWidth = signSize;\n      distHeight = distWidth / ratio;\n    } else {\n      // two-way\n      var startWidthSize = direction[0] * 2 * startOffsetWidth;\n      var startHeightSize = direction[1] * 2 * startOffsetHeight;\n      var distSize = getDistSize([startWidthSize + dist[0], startHeightSize + dist[1]]) - getDistSize([startWidthSize, startHeightSize]);\n      var ratioRad = getRad([0, 0], [ratio, 1]);\n      distWidth = Math.cos(ratioRad) * distSize;\n      distHeight = Math.sin(ratioRad) * distSize;\n    }\n  } else {\n    distWidth = direction[0] * dist[0];\n    distHeight = direction[1] * dist[1];\n  }\n\n  return [distWidth, distHeight];\n}\n\nfunction getOffsetSizeDist(sizeDirection, keepRatio, datas, e) {\n  var _a;\n\n  var ratio = datas.ratio,\n      startOffsetWidth = datas.startOffsetWidth,\n      startOffsetHeight = datas.startOffsetHeight;\n  var distWidth = 0;\n  var distHeight = 0;\n  var distX = e.distX,\n      distY = e.distY,\n      parentDistance = e.parentDistance,\n      parentDist = e.parentDist,\n      parentScale = e.parentScale;\n  var startFixedDirection = datas.fixedDirection;\n  var directionsDists = [0, 1].map(function (index) {\n    return Math.abs(sizeDirection[index] - startFixedDirection[index]);\n  });\n  var directionRatios = [0, 1].map(function (index) {\n    var dist = directionsDists[index];\n\n    if (dist !== 0) {\n      dist = 2 / dist;\n    }\n\n    return dist;\n  });\n\n  if (parentDist) {\n    distWidth = parentDist[0];\n    distHeight = parentDist[1];\n\n    if (keepRatio) {\n      if (!distWidth) {\n        distWidth = distHeight * ratio;\n      } else if (!distHeight) {\n        distHeight = distWidth / ratio;\n      }\n    }\n  } else if (parentScale) {\n    distWidth = (parentScale[0] - 1) * startOffsetWidth;\n    distHeight = (parentScale[1] - 1) * startOffsetHeight;\n  } else if (parentDistance) {\n    var scaleX = startOffsetWidth * directionsDists[0];\n    var scaleY = startOffsetHeight * directionsDists[1];\n    var ratioDistance = getDistSize([scaleX, scaleY]);\n    distWidth = parentDistance / ratioDistance * scaleX * directionRatios[0];\n    distHeight = parentDistance / ratioDistance * scaleY * directionRatios[1];\n  } else {\n    var dist_1 = getDragDist({\n      datas: datas,\n      distX: distX,\n      distY: distY\n    });\n    dist_1 = directionRatios.map(function (ratio, i) {\n      return dist_1[i] * ratio;\n    });\n    _a = getSizeDistByDist([startOffsetWidth, startOffsetHeight], dist_1, ratio, sizeDirection, keepRatio), distWidth = _a[0], distHeight = _a[1];\n  }\n\n  return {\n    // direction,\n    // sizeDirection,\n    distWidth: distWidth,\n    distHeight: distHeight\n  };\n}\n\nfunction convertTransformUnit(origin, xy) {\n  if (xy) {\n    if (origin === \"left\") {\n      return {\n        x: \"0%\",\n        y: \"50%\"\n      };\n    } else if (origin === \"top\") {\n      return {\n        x: \"50%\",\n        y: \"50%\"\n      };\n    } else if (origin === \"center\") {\n      return {\n        x: \"50%\",\n        y: \"50%\"\n      };\n    } else if (origin === \"right\") {\n      return {\n        x: \"100%\",\n        y: \"50%\"\n      };\n    } else if (origin === \"bottom\") {\n      return {\n        x: \"50%\",\n        y: \"100%\"\n      };\n    }\n\n    var _a = origin.split(\" \"),\n        left = _a[0],\n        right = _a[1];\n\n    var leftOrigin = convertTransformUnit(left || \"\");\n    var rightOrigin = convertTransformUnit(right || \"\");\n\n    var originObject = __assign(__assign({}, leftOrigin), rightOrigin);\n\n    var nextOriginObject = {\n      x: \"50%\",\n      y: \"50%\"\n    };\n\n    if (originObject.x) {\n      nextOriginObject.x = originObject.x;\n    }\n\n    if (originObject.y) {\n      nextOriginObject.y = originObject.y;\n    }\n\n    if (originObject.value) {\n      if (originObject.x && !originObject.y) {\n        nextOriginObject.y = originObject.value;\n      }\n\n      if (!originObject.x && originObject.y) {\n        nextOriginObject.x = originObject.value;\n      }\n    }\n\n    return nextOriginObject;\n  }\n\n  if (origin === \"left\") {\n    return {\n      x: \"0%\"\n    };\n  }\n\n  if (origin === \"right\") {\n    return {\n      x: \"100%\"\n    };\n  }\n\n  if (origin === \"top\") {\n    return {\n      y: \"0%\"\n    };\n  }\n\n  if (origin === \"bottom\") {\n    return {\n      y: \"100%\"\n    };\n  }\n\n  if (!origin) {\n    return {};\n  }\n\n  if (origin === \"center\") {\n    return {\n      value: \"50%\"\n    };\n  }\n\n  return {\n    value: origin\n  };\n}\n\nfunction convertTransformOriginArray(transformOrigin, width, height) {\n  var _a = convertTransformUnit(transformOrigin, true),\n      x = _a.x,\n      y = _a.y;\n\n  return [convertUnitSize(x, width) || 0, convertUnitSize(y, height) || 0];\n}\n\nfunction rotatePosesInfo(poses, origin, rad) {\n  var prevPoses = poses.map(function (pos) {\n    return minus(pos, origin);\n  });\n  var nextPoses = prevPoses.map(function (pos) {\n    return rotate(pos, rad);\n  });\n  return {\n    prev: prevPoses,\n    next: nextPoses,\n    result: nextPoses.map(function (pos) {\n      return plus(pos, origin);\n    })\n  };\n}\n\nfunction isDeepArrayEquals(arr1, arr2) {\n  return arr1.length === arr2.length && arr1.every(function (value1, i) {\n    var value2 = arr2[i];\n    var isArray1 = isArray(value1);\n    var isArray2 = isArray(value2);\n\n    if (isArray1 && isArray2) {\n      return isDeepArrayEquals(value1, value2);\n    } else if (!isArray1 && !isArray2) {\n      return value1 === value2;\n    }\n\n    return false;\n  });\n}\n/**\n * @namespace Moveable.Pinchable\n * @description Whether or not target can be pinched with draggable, resizable, scalable, rotatable (default: false)\n */\n\n\nvar Pinchable = makeAble(\"pinchable\", {\n  events: {\n    onPinchStart: \"pinchStart\",\n    onPinch: \"pinch\",\n    onPinchEnd: \"pinchEnd\",\n    onPinchGroupStart: \"pinchGroupStart\",\n    onPinchGroup: \"pinchGroup\",\n    onPinchGroupEnd: \"pinchGroupEnd\"\n  },\n  dragStart: function () {\n    return true;\n  },\n  pinchStart: function (moveable, e) {\n    var datas = e.datas,\n        targets = e.targets,\n        angle = e.angle,\n        originalDatas = e.originalDatas;\n    var _a = moveable.props,\n        pinchable = _a.pinchable,\n        ables = _a.ables;\n\n    if (!pinchable) {\n      return false;\n    }\n\n    var eventName = \"onPinch\".concat(targets ? \"Group\" : \"\", \"Start\");\n    var controlEventName = \"drag\".concat(targets ? \"Group\" : \"\", \"ControlStart\");\n    var pinchAbles = (pinchable === true ? moveable.controlAbles : ables.filter(function (able) {\n      return pinchable.indexOf(able.name) > -1;\n    })).filter(function (able) {\n      return able.canPinch && able[controlEventName];\n    });\n    var params = fillParams(moveable, e, {});\n\n    if (targets) {\n      params.targets = targets;\n    }\n\n    var result = triggerEvent(moveable, eventName, params);\n    datas.isPinch = result !== false;\n    datas.ables = pinchAbles;\n    var isPinch = datas.isPinch;\n\n    if (!isPinch) {\n      return false;\n    }\n\n    pinchAbles.forEach(function (able) {\n      originalDatas[able.name] = originalDatas[able.name] || {};\n\n      if (!able[controlEventName]) {\n        return;\n      }\n\n      var ableEvent = __assign(__assign({}, e), {\n        datas: originalDatas[able.name],\n        parentRotate: angle,\n        isPinch: true\n      });\n\n      able[controlEventName](moveable, ableEvent);\n    });\n    moveable.state.snapRenderInfo = {\n      request: e.isRequest,\n      direction: [0, 0]\n    };\n    return isPinch;\n  },\n  pinch: function (moveable, e) {\n    var datas = e.datas,\n        pinchScale = e.scale,\n        distance = e.distance,\n        originalDatas = e.originalDatas,\n        inputEvent = e.inputEvent,\n        targets = e.targets,\n        angle = e.angle;\n\n    if (!datas.isPinch) {\n      return;\n    }\n\n    var parentDistance = distance * (1 - 1 / pinchScale);\n    var params = fillParams(moveable, e, {});\n\n    if (targets) {\n      params.targets = targets;\n    }\n\n    var eventName = \"onPinch\".concat(targets ? \"Group\" : \"\");\n    triggerEvent(moveable, eventName, params);\n    var ables = datas.ables;\n    var controlEventName = \"drag\".concat(targets ? \"Group\" : \"\", \"Control\");\n    ables.forEach(function (able) {\n      if (!able[controlEventName]) {\n        return;\n      }\n\n      able[controlEventName](moveable, __assign(__assign({}, e), {\n        datas: originalDatas[able.name],\n        inputEvent: inputEvent,\n        parentDistance: parentDistance,\n        parentRotate: angle,\n        isPinch: true\n      }));\n    });\n    return params;\n  },\n  pinchEnd: function (moveable, e) {\n    var datas = e.datas,\n        isPinch = e.isPinch,\n        inputEvent = e.inputEvent,\n        targets = e.targets,\n        originalDatas = e.originalDatas;\n\n    if (!datas.isPinch) {\n      return;\n    }\n\n    var eventName = \"onPinch\".concat(targets ? \"Group\" : \"\", \"End\");\n    var params = fillEndParams(moveable, e, {\n      isDrag: isPinch\n    });\n\n    if (targets) {\n      params.targets = targets;\n    }\n\n    triggerEvent(moveable, eventName, params);\n    var ables = datas.ables;\n    var controlEventName = \"drag\".concat(targets ? \"Group\" : \"\", \"ControlEnd\");\n    ables.forEach(function (able) {\n      if (!able[controlEventName]) {\n        return;\n      }\n\n      able[controlEventName](moveable, __assign(__assign({}, e), {\n        isDrag: isPinch,\n        datas: originalDatas[able.name],\n        inputEvent: inputEvent,\n        isPinch: true\n      }));\n    });\n    return isPinch;\n  },\n  pinchGroupStart: function (moveable, e) {\n    return this.pinchStart(moveable, __assign(__assign({}, e), {\n      targets: moveable.props.targets\n    }));\n  },\n  pinchGroup: function (moveable, e) {\n    return this.pinch(moveable, __assign(__assign({}, e), {\n      targets: moveable.props.targets\n    }));\n  },\n  pinchGroupEnd: function (moveable, e) {\n    return this.pinchEnd(moveable, __assign(__assign({}, e), {\n      targets: moveable.props.targets\n    }));\n  }\n});\n/**\n * Whether or not target can be pinched with draggable, resizable, scalable, rotatable (default: false)\n * @name Moveable.Pinchable#pinchable\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.pinchable = true;\n */\n\n/**\n * When the pinch starts, the pinchStart event is called with part of scaleStart, rotateStart, resizeStart\n * @memberof Moveable.Pinchable\n * @event pinchStart\n * @param {Moveable.Pinchable.OnPinchStart} - Parameters for the pinchStart event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     rotatable: true,\n *     scalable: true,\n *     pinchable: true, // [\"rotatable\", \"scalable\"]\n * });\n * moveable.on(\"pinchStart\", ({ target }) => {\n *     console.log(target);\n * });\n * moveable.on(\"rotateStart\", ({ target }) => {\n *     console.log(target);\n * });\n * moveable.on(\"scaleStart\", ({ target }) => {\n *     console.log(target);\n * });\n */\n\n/**\n * When pinching, the pinch event is called with part of scale, rotate, resize\n * @memberof Moveable.Pinchable\n * @event pinch\n * @param {Moveable.Pinchable.OnPinch} - Parameters for the pinch event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     rotatable: true,\n *     scalable: true,\n *     pinchable: true, // [\"rotatable\", \"scalable\"]\n * });\n * moveable.on(\"pinch\", ({ target }) => {\n *     console.log(target);\n * });\n * moveable.on(\"rotate\", ({ target }) => {\n *     console.log(target);\n * });\n * moveable.on(\"scale\", ({ target }) => {\n *     console.log(target);\n * });\n */\n\n/**\n * When the pinch finishes, the pinchEnd event is called.\n * @memberof Moveable.Pinchable\n * @event pinchEnd\n * @param {Moveable.Pinchable.OnPinchEnd} - Parameters for the pinchEnd event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     rotatable: true,\n *     scalable: true,\n *     pinchable: true, // [\"rotatable\", \"scalable\"]\n * });\n * moveable.on(\"pinchEnd\", ({ target }) => {\n *     console.log(target);\n * });\n * moveable.on(\"rotateEnd\", ({ target }) => {\n *     console.log(target);\n * });\n * moveable.on(\"scaleEnd\", ({ target }) => {\n *     console.log(target);\n * });\n */\n\n/**\n * When the group pinch starts, the `pinchGroupStart` event is called.\n * @memberof Moveable.Pinchable\n * @event pinchGroupStart\n * @param {Moveable.Pinchable.OnPinchGroupStart} - Parameters for the `pinchGroupStart` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n *     pinchable: true\n * });\n * moveable.on(\"pinchGroupStart\", ({ targets }) => {\n *     console.log(\"onPinchGroupStart\", targets);\n * });\n */\n\n/**\n * When the group pinch, the `pinchGroup` event is called.\n * @memberof Moveable.Pinchable\n * @event pinchGroup\n * @param {Moveable.Pinchable.OnPinchGroup} - Parameters for the `pinchGroup` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n *     pinchable: true\n * });\n * moveable.on(\"pinchGroup\", ({ targets, events }) => {\n *     console.log(\"onPinchGroup\", targets);\n * });\n */\n\n/**\n * When the group pinch finishes, the `pinchGroupEnd` event is called.\n * @memberof Moveable.Pinchable\n * @event pinchGroupEnd\n * @param {Moveable.Pinchable.OnPinchGroupEnd} - Parameters for the `pinchGroupEnd` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n *     pinchable: true\n * });\n * moveable.on(\"pinchGroupEnd\", ({ targets, isDrag }) => {\n *     console.log(\"onPinchGroupEnd\", targets, isDrag);\n * });\n */\n\nfunction fillChildEvents(moveable, name, e) {\n  var datas = e.originalDatas;\n  datas.groupable = datas.groupable || {};\n  var groupableDatas = datas.groupable;\n  groupableDatas.childDatas = groupableDatas.childDatas || [];\n  var childDatas = groupableDatas.childDatas;\n  return moveable.moveables.map(function (_, i) {\n    childDatas[i] = childDatas[i] || {};\n    childDatas[i][name] = childDatas[i][name] || {};\n    return __assign(__assign({}, e), {\n      datas: childDatas[i][name],\n      originalDatas: childDatas[i]\n    });\n  });\n}\n\nfunction triggerChildGesto(moveable, able, type, delta, e, isConvert, ableName) {\n  var isStart = !!type.match(/Start$/g);\n  var isEnd = !!type.match(/End$/g);\n  var isPinch = e.isPinch;\n  var datas = e.datas;\n  var events = fillChildEvents(moveable, able.name, e);\n  var moveables = moveable.moveables;\n  var childs = events.map(function (ev, i) {\n    var childMoveable = moveables[i];\n    var state = childMoveable.state;\n    var gestos = state.gestos;\n    var childEvent = ev;\n\n    if (isStart) {\n      childEvent = new CustomGesto(ableName).dragStart(delta, ev);\n    } else {\n      if (!gestos[ableName]) {\n        gestos[ableName] = datas.childGestos[i];\n      }\n\n      if (!gestos[ableName]) {\n        return;\n      }\n\n      childEvent = setCustomDrag(ev, state, delta, isPinch, isConvert, ableName);\n    }\n\n    var result = able[type](childMoveable, __assign(__assign({}, childEvent), {\n      parentFlag: true\n    }));\n\n    if (isEnd) {\n      gestos[ableName] = null;\n    }\n\n    return result;\n  });\n\n  if (isStart) {\n    datas.childGestos = moveables.map(function (child) {\n      return child.state.gestos[ableName];\n    });\n  }\n\n  return childs;\n}\n\nfunction triggerChildAbles(moveable, able, type, e, eachEvent, callback) {\n  if (eachEvent === void 0) {\n    eachEvent = function (_, ev) {\n      return ev;\n    };\n  }\n\n  var isEnd = !!type.match(/End$/g);\n  var events = fillChildEvents(moveable, able.name, e);\n  var moveables = moveable.moveables;\n  var childs = events.map(function (ev, i) {\n    var childMoveable = moveables[i];\n    var childEvent = ev;\n    childEvent = eachEvent(childMoveable, ev);\n    var result = able[type](childMoveable, __assign(__assign({}, childEvent), {\n      parentFlag: true\n    }));\n    result && callback && callback(childMoveable, ev, result, i);\n\n    if (isEnd) {\n      childMoveable.state.gestos = {};\n    }\n\n    return result;\n  });\n  return childs;\n}\n\nvar VERTICAL_NAMES = [\"left\", \"right\", \"center\"];\nvar HORIZONTAL_NAMES = [\"top\", \"bottom\", \"middle\"];\nvar VERTICAL_NAMES_MAP = {\n  start: \"left\",\n  end: \"right\",\n  center: \"center\"\n};\nvar HORIZONTAL_NAMES_MAP = {\n  start: \"top\",\n  end: \"bottom\",\n  center: \"middle\"\n};\n\nfunction hasGuidelines(moveable, ableName) {\n  var _a = moveable.props,\n      snappable = _a.snappable,\n      bounds = _a.bounds,\n      innerBounds = _a.innerBounds,\n      verticalGuidelines = _a.verticalGuidelines,\n      horizontalGuidelines = _a.horizontalGuidelines,\n      snapGridWidth = _a.snapGridWidth,\n      snapGridHeight = _a.snapGridHeight,\n      _b = moveable.state,\n      guidelines = _b.guidelines,\n      enableSnap = _b.enableSnap;\n\n  if (!snappable || !enableSnap || ableName && snappable !== true && snappable.indexOf(ableName) < 0) {\n    return false;\n  }\n\n  if (snapGridWidth || snapGridHeight || bounds || innerBounds || guidelines && guidelines.length || verticalGuidelines && verticalGuidelines.length || horizontalGuidelines && horizontalGuidelines.length) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction getSnapDirections(snapDirections) {\n  if (snapDirections === false) {\n    return {};\n  } else if (snapDirections === true || !snapDirections) {\n    return {\n      left: true,\n      right: true,\n      top: true,\n      bottom: true\n    };\n  }\n\n  return snapDirections;\n}\n\nfunction mapSnapDirectionPoses(snapDirections, snapPoses) {\n  var nextSnapDirections = getSnapDirections(snapDirections);\n  var nextSnapPoses = {};\n\n  for (var name in nextSnapDirections) {\n    if (name in snapPoses && nextSnapDirections[name]) {\n      nextSnapPoses[name] = snapPoses[name];\n    }\n  }\n\n  return nextSnapPoses;\n}\n\nfunction splitSnapDirectionPoses(snapDirections, snapPoses) {\n  var nextSnapPoses = mapSnapDirectionPoses(snapDirections, snapPoses);\n  var horizontalNames = HORIZONTAL_NAMES.filter(function (name) {\n    return name in nextSnapPoses;\n  });\n  var verticalNames = VERTICAL_NAMES.filter(function (name) {\n    return name in nextSnapPoses;\n  });\n  return {\n    horizontal: horizontalNames.map(function (name) {\n      return nextSnapPoses[name];\n    }),\n    vertical: verticalNames.map(function (name) {\n      return nextSnapPoses[name];\n    })\n  };\n}\n\nfunction calculateContainerPos(rootMatrix, containerRect, n) {\n  var clientPos = calculatePosition(rootMatrix, [containerRect.clientLeft, containerRect.clientTop], n);\n  return [containerRect.left + clientPos[0], containerRect.top + clientPos[1]];\n}\n\nfunction solveLineConstants(_a) {\n  var point1 = _a[0],\n      point2 = _a[1];\n  var dx = point2[0] - point1[0];\n  var dy = point2[1] - point1[1];\n\n  if (Math.abs(dx) < TINY_NUM$1) {\n    dx = 0;\n  }\n\n  if (Math.abs(dy) < TINY_NUM$1) {\n    dy = 0;\n  } // b > 0\n  // ax + by + c = 0\n\n\n  var a = 0;\n  var b = 0;\n  var c = 0;\n\n  if (!dx) {\n    // -x + 1 = 0\n    a = -1;\n    c = point1[0];\n  } else if (!dy) {\n    // y - 1 = 0\n    b = 1;\n    c = -point1[1];\n  } else {\n    // y = -a(x - x1) + y1\n    // ax + y + a * x1 - y1 = 0\n    a = -dy / dx;\n    b = 1;\n    c = a * point1[0] - point1[1];\n  }\n\n  return [a, b, c].map(function (v) {\n    return throttle(v, TINY_NUM$1);\n  });\n}\n\nfunction checkMoveableSnapPoses(moveable, posesX, posesY, customSnapThreshold) {\n  var props = moveable.props;\n  var snapThreshold = selectValue(customSnapThreshold, props.snapThreshold, 5);\n  return checkSnapPoses(moveable.state.guidelines, posesX, posesY, snapThreshold);\n}\n\nfunction checkSnapPoses(guidelines, posesX, posesY, snapThreshold) {\n  return {\n    vertical: checkSnap(guidelines, \"vertical\", posesX, snapThreshold),\n    horizontal: checkSnap(guidelines, \"horizontal\", posesY, snapThreshold)\n  };\n}\n\nfunction checkSnapKeepRatio(moveable, startPos, endPos) {\n  var endX = endPos[0],\n      endY = endPos[1];\n  var startX = startPos[0],\n      startY = startPos[1];\n\n  var _a = minus(endPos, startPos),\n      dx = _a[0],\n      dy = _a[1];\n\n  var isBottom = dy > 0;\n  var isRight = dx > 0;\n  dx = getTinyDist(dx);\n  dy = getTinyDist(dy);\n  var verticalInfo = {\n    isSnap: false,\n    offset: 0,\n    pos: 0\n  };\n  var horizontalInfo = {\n    isSnap: false,\n    offset: 0,\n    pos: 0\n  };\n\n  if (dx === 0 && dy === 0) {\n    return {\n      vertical: verticalInfo,\n      horizontal: horizontalInfo\n    };\n  }\n\n  var _b = checkMoveableSnapPoses(moveable, dx ? [endX] : [], dy ? [endY] : []),\n      verticalSnapInfo = _b.vertical,\n      horizontalSnapInfo = _b.horizontal;\n\n  verticalSnapInfo.posInfos.filter(function (_a) {\n    var pos = _a.pos;\n    return isRight ? pos >= startX : pos <= startX;\n  });\n  horizontalSnapInfo.posInfos.filter(function (_a) {\n    var pos = _a.pos;\n    return isBottom ? pos >= startY : pos <= startY;\n  });\n  verticalSnapInfo.isSnap = verticalSnapInfo.posInfos.length > 0;\n  horizontalSnapInfo.isSnap = horizontalSnapInfo.posInfos.length > 0;\n\n  var _c = getNearestSnapGuidelineInfo(verticalSnapInfo),\n      isVerticalSnap = _c.isSnap,\n      verticalGuideline = _c.guideline;\n\n  var _d = getNearestSnapGuidelineInfo(horizontalSnapInfo),\n      isHorizontalSnap = _d.isSnap,\n      horizontalGuideline = _d.guideline;\n\n  var horizontalPos = isHorizontalSnap ? horizontalGuideline.pos[1] : 0;\n  var verticalPos = isVerticalSnap ? verticalGuideline.pos[0] : 0;\n\n  if (dx === 0) {\n    if (isHorizontalSnap) {\n      horizontalInfo.isSnap = true;\n      horizontalInfo.pos = horizontalGuideline.pos[1];\n      horizontalInfo.offset = endY - horizontalInfo.pos;\n    }\n  } else if (dy === 0) {\n    if (isVerticalSnap) {\n      verticalInfo.isSnap = true;\n      verticalInfo.pos = verticalPos;\n      verticalInfo.offset = endX - verticalPos;\n    }\n  } else {\n    // y - y1 = a * (x - x1)\n    var a = dy / dx;\n    var b = endPos[1] - a * endX;\n    var y = 0;\n    var x = 0;\n    var isSnap = false;\n\n    if (isVerticalSnap) {\n      x = verticalPos;\n      y = a * x + b;\n      isSnap = true;\n    } else if (isHorizontalSnap) {\n      y = horizontalPos;\n      x = (y - b) / a;\n      isSnap = true;\n    }\n\n    if (isSnap) {\n      verticalInfo.isSnap = true;\n      verticalInfo.pos = x;\n      verticalInfo.offset = endX - x;\n      horizontalInfo.isSnap = true;\n      horizontalInfo.pos = y;\n      horizontalInfo.offset = endY - y;\n    }\n  }\n\n  return {\n    vertical: verticalInfo,\n    horizontal: horizontalInfo\n  };\n}\n\nfunction checkSnaps(moveable, rect, customSnapThreshold) {\n  var poses = splitSnapDirectionPoses(moveable.props.snapDirections, rect);\n  return checkMoveableSnapPoses(moveable, poses.vertical, poses.horizontal, customSnapThreshold);\n}\n\nfunction getNearestSnapGuidelineInfo(snapInfo) {\n  var isSnap = snapInfo.isSnap;\n\n  if (!isSnap) {\n    return {\n      isSnap: false,\n      offset: 0,\n      dist: -1,\n      pos: 0,\n      guideline: null\n    };\n  }\n\n  var posInfo = snapInfo.posInfos[0];\n  var guidelineInfo = posInfo.guidelineInfos[0];\n  var offset = guidelineInfo.offset;\n  var dist = guidelineInfo.dist;\n  var guideline = guidelineInfo.guideline;\n  return {\n    isSnap: isSnap,\n    offset: offset,\n    dist: dist,\n    pos: posInfo.pos,\n    guideline: guideline\n  };\n}\n\nfunction checkSnap(guidelines, targetType, targetPoses, snapThreshold) {\n  if (!guidelines || !guidelines.length) {\n    return {\n      isSnap: false,\n      index: -1,\n      posInfos: []\n    };\n  }\n\n  var isVertical = targetType === \"vertical\";\n  var posType = isVertical ? 0 : 1;\n  var snapPosInfos = targetPoses.map(function (targetPos, index) {\n    var guidelineInfos = guidelines.map(function (guideline) {\n      var pos = guideline.pos;\n      var offset = targetPos - pos[posType];\n      return {\n        offset: offset,\n        dist: Math.abs(offset),\n        guideline: guideline\n      };\n    }).filter(function (_a) {\n      var guideline = _a.guideline,\n          dist = _a.dist;\n      var type = guideline.type;\n\n      if (type !== targetType || dist > snapThreshold) {\n        return false;\n      }\n\n      return true;\n    }).sort(function (a, b) {\n      return a.dist - b.dist;\n    });\n    return {\n      pos: targetPos,\n      index: index,\n      guidelineInfos: guidelineInfos\n    };\n  }).filter(function (snapPosInfo) {\n    return snapPosInfo.guidelineInfos.length > 0;\n  }).sort(function (a, b) {\n    return a.guidelineInfos[0].dist - b.guidelineInfos[0].dist;\n  });\n  var isSnap = snapPosInfos.length > 0;\n  return {\n    isSnap: isSnap,\n    index: isSnap ? snapPosInfos[0].index : -1,\n    posInfos: snapPosInfos\n  };\n}\n\nfunction getSnapInfosByDirection(moveable, poses, snapDirection, snapThreshold) {\n  if (snapThreshold === void 0) {\n    snapThreshold = 1;\n  }\n\n  var nextPoses = [];\n\n  if (snapDirection[0] && snapDirection[1]) {\n    nextPoses = [snapDirection, [-snapDirection[0], snapDirection[1]], [snapDirection[0], -snapDirection[1]]].map(function (direction) {\n      return getPosByDirection(poses, direction);\n    });\n  } else if (!snapDirection[0] && !snapDirection[1]) {\n    var alignPoses = [poses[0], poses[1], poses[3], poses[2], poses[0]];\n\n    for (var i = 0; i < 4; ++i) {\n      nextPoses.push(alignPoses[i]);\n      nextPoses.push([(alignPoses[i][0] + alignPoses[i + 1][0]) / 2, (alignPoses[i][1] + alignPoses[i + 1][1]) / 2]);\n    }\n  } else {\n    if (moveable.props.keepRatio) {\n      nextPoses = [[-1, -1], [-1, 1], [1, -1], [1, 1], snapDirection].map(function (dir) {\n        return getPosByDirection(poses, dir);\n      });\n    } else {\n      nextPoses = getPosesByDirection(poses, snapDirection);\n\n      if (nextPoses.length > 1) {\n        nextPoses.push([(nextPoses[0][0] + nextPoses[1][0]) / 2, (nextPoses[0][1] + nextPoses[1][1]) / 2]);\n      }\n    }\n  }\n\n  return checkMoveableSnapPoses(moveable, nextPoses.map(function (pos) {\n    return pos[0];\n  }), nextPoses.map(function (pos) {\n    return pos[1];\n  }), snapThreshold);\n}\n\nfunction checkSnapBoundPriority(a, b) {\n  var aDist = Math.abs(a.offset);\n  var bDist = Math.abs(b.offset);\n\n  if (a.isBound && b.isBound) {\n    return bDist - aDist;\n  } else if (a.isBound) {\n    return -1;\n  } else if (b.isBound) {\n    return 1;\n  } else if (a.isSnap && b.isSnap) {\n    return bDist - aDist;\n  } else if (a.isSnap) {\n    return -1;\n  } else if (b.isSnap) {\n    return 1;\n  } else if (aDist < TINY_NUM) {\n    return 1;\n  } else if (bDist < TINY_NUM) {\n    return -1;\n  }\n\n  return aDist - bDist;\n}\n\nfunction getNearOffsetInfo(offsets, index) {\n  return offsets.slice().sort(function (a, b) {\n    var aSign = a.sign[index];\n    var bSign = b.sign[index];\n    var aOffset = a.offset[index];\n    var bOffset = b.offset[index]; // -1 The positions of a and b do not change.\n    // 1 The positions of a and b are reversed.\n\n    if (!aSign) {\n      return 1;\n    } else if (!bSign) {\n      return -1;\n    }\n\n    return checkSnapBoundPriority({\n      isBound: a.isBound,\n      isSnap: a.isSnap,\n      offset: aOffset\n    }, {\n      isBound: b.isBound,\n      isSnap: b.isSnap,\n      offset: bOffset\n    });\n  })[0];\n}\n\nfunction getCheckSnapDirections(direction, fixedDirection, keepRatio) {\n  var directions = []; // const fixedDirection = [-direction[0], -direction[1]];\n\n  if (keepRatio) {\n    if (Math.abs(fixedDirection[0]) !== 1 || Math.abs(fixedDirection[1]) !== 1) {\n      directions.push([fixedDirection, [-1, -1]], [fixedDirection, [-1, 1]], [fixedDirection, [1, -1]], [fixedDirection, [1, 1]]);\n    } else {\n      directions.push([fixedDirection, [direction[0], -direction[1]]], [fixedDirection, [-direction[0], direction[1]]]);\n    }\n\n    directions.push([fixedDirection, direction]);\n  } else {\n    if (direction[0] && direction[1] || !direction[0] && !direction[1]) {\n      var endDirection_1 = direction[0] ? direction : [1, 1];\n      [1, -1].forEach(function (signX) {\n        [1, -1].forEach(function (signY) {\n          var nextDirection = [signX * endDirection_1[0], signY * endDirection_1[1]];\n\n          if (fixedDirection[0] === nextDirection[0] && fixedDirection[1] === nextDirection[1]) {\n            return;\n          }\n\n          directions.push([fixedDirection, nextDirection]);\n        });\n      });\n    } else if (direction[0]) {\n      var signs = Math.abs(fixedDirection[0]) === 1 ? [1] : [1, -1];\n      signs.forEach(function (sign) {\n        directions.push([[fixedDirection[0], -1], [sign * direction[0], -1]], [[fixedDirection[0], 0], [sign * direction[0], 0]], [[fixedDirection[0], 1], [sign * direction[0], 1]]);\n      });\n    } else if (direction[1]) {\n      var signs = Math.abs(fixedDirection[1]) === 1 ? [1] : [1, -1];\n      signs.forEach(function (sign) {\n        directions.push([[-1, fixedDirection[1]], [-1, sign * direction[1]]], [[0, fixedDirection[1]], [0, sign * direction[1]]], [[1, fixedDirection[1]], [1, sign * direction[1]]]);\n      });\n    }\n  }\n\n  return directions;\n}\n\nfunction isStartLine(dot, line) {\n  // l    o     => true\n  // o    l    => false\n  var cx = average([line[0][0], line[1][0]]);\n  var cy = average([line[0][1], line[1][1]]);\n  return {\n    vertical: cx <= dot[0],\n    horizontal: cy <= dot[1]\n  };\n}\n\nfunction hitTestLine(dot, _a) {\n  var pos1 = _a[0],\n      pos2 = _a[1];\n  var dx = pos2[0] - pos1[0];\n  var dy = pos2[1] - pos1[1];\n\n  if (Math.abs(dx) < TINY_NUM) {\n    dx = 0;\n  }\n\n  if (Math.abs(dy) < TINY_NUM) {\n    dy = 0;\n  }\n\n  var test1;\n  var test2;\n\n  if (!dx) {\n    test1 = pos1[0];\n    test2 = dot[0];\n  } else if (!dy) {\n    test1 = pos1[1];\n    test2 = dot[1];\n  } else {\n    var a = dy / dx; // y = a * (x - pos1) + pos1\n\n    test1 = a * (dot[0] - pos1[0]) + pos1[1];\n    test2 = dot[1];\n  }\n\n  return test1 - test2;\n}\n\nfunction isSameStartLine(dots, line, centerSign, error) {\n  if (error === void 0) {\n    error = TINY_NUM;\n  }\n\n  return dots.every(function (dot) {\n    var value = hitTestLine(dot, line);\n    var sign = value <= 0;\n    return sign === centerSign || Math.abs(value) <= error;\n  });\n}\n\nfunction checkInnerBoundDot(pos, start, end, isStart, threshold) {\n  if (threshold === void 0) {\n    threshold = 0;\n  }\n\n  if (isStart && start - threshold <= pos || !isStart && pos <= end + threshold) {\n    // false 402 565 602 => 37 ([0, 37])\n    // true 400 524.9712603540036 600 => 124 ([124, 0])\n    // true 400 410 600 => 10 ([10, 0])\n    return {\n      isBound: true,\n      offset: isStart ? start - pos : end - pos\n    };\n  }\n\n  return {\n    isBound: false,\n    offset: 0\n  };\n}\n\nfunction checkInnerBound(moveable, _a) {\n  var line = _a.line,\n      centerSign = _a.centerSign,\n      verticalSign = _a.verticalSign,\n      horizontalSign = _a.horizontalSign,\n      lineConstants = _a.lineConstants;\n  var bounds = moveable.props.innerBounds;\n\n  if (!bounds) {\n    return {\n      isAllBound: false,\n      isBound: false,\n      isVerticalBound: false,\n      isHorizontalBound: false,\n      offset: [0, 0]\n    };\n  }\n\n  var left = bounds.left,\n      top = bounds.top,\n      width = bounds.width,\n      height = bounds.height;\n  var leftLine = [[left, top], [left, top + height]];\n  var topLine = [[left, top], [left + width, top]];\n  var rightLine = [[left + width, top], [left + width, top + height]];\n  var bottomLine = [[left, top + height], [left + width, top + height]];\n\n  if (isSameStartLine([[left, top], [left + width, top], [left, top + height], [left + width, top + height]], line, centerSign)) {\n    return {\n      isAllBound: false,\n      isBound: false,\n      isVerticalBound: false,\n      isHorizontalBound: false,\n      offset: [0, 0]\n    };\n  } // test vertical\n\n\n  var topBoundInfo = checkLineBoundCollision(line, lineConstants, topLine, verticalSign);\n  var bottomBoundInfo = checkLineBoundCollision(line, lineConstants, bottomLine, verticalSign); // test horizontal\n\n  var leftBoundInfo = checkLineBoundCollision(line, lineConstants, leftLine, horizontalSign);\n  var rightBoundInfo = checkLineBoundCollision(line, lineConstants, rightLine, horizontalSign);\n  var isAllVerticalBound = topBoundInfo.isBound && bottomBoundInfo.isBound;\n  var isVerticalBound = topBoundInfo.isBound || bottomBoundInfo.isBound;\n  var isAllHorizontalBound = leftBoundInfo.isBound && rightBoundInfo.isBound;\n  var isHorizontalBound = leftBoundInfo.isBound || rightBoundInfo.isBound;\n  var verticalOffset = maxOffset(topBoundInfo.offset, bottomBoundInfo.offset);\n  var horizontalOffset = maxOffset(leftBoundInfo.offset, rightBoundInfo.offset);\n  var offset = [0, 0];\n  var isBound = false;\n  var isAllBound = false;\n\n  if (Math.abs(horizontalOffset) < Math.abs(verticalOffset)) {\n    offset = [verticalOffset, 0];\n    isBound = isVerticalBound;\n    isAllBound = isAllVerticalBound;\n  } else {\n    offset = [0, horizontalOffset];\n    isBound = isHorizontalBound;\n    isAllBound = isAllHorizontalBound;\n  }\n\n  return {\n    isAllBound: isAllBound,\n    isVerticalBound: isVerticalBound,\n    isHorizontalBound: isHorizontalBound,\n    isBound: isBound,\n    offset: offset\n  };\n}\n\nfunction checkLineBoundCollision(line, _a, boundLine, isStart, threshold, isRender) {\n  var a = _a[0],\n      b = _a[1];\n  var dot1 = line[0]; // const dot2 = line[1];\n\n  var boundDot1 = boundLine[0];\n  var boundDot2 = boundLine[1]; // const dy1 = getTinyDist(dot2[1] - dot1[1]);\n  // const dx1 = getTinyDist(dot2[0] - dot1[0]);\n\n  var dy2 = getTinyDist(boundDot2[1] - boundDot1[1]);\n  var dx2 = getTinyDist(boundDot2[0] - boundDot1[0]);\n  var hasDx = b;\n  var hasDy = a;\n  var slope = -a / b; // lineConstants\n  // ax + by + c = 0\n  // dx2 or dy2 is zero\n\n  if (!dx2) {\n    // vertical\n    // by + c = 0\n    if (isRender && !hasDy) {\n      // 90deg\n      return {\n        isBound: false,\n        offset: 0\n      };\n    } else if (hasDx) {\n      // ax + by + c = 0\n      // const y = dy1 ? dy1 / dx1 * (boundDot1[0] - dot1[0]) + dot1[1] : dot1[1];\n      var y = slope * (boundDot1[0] - dot1[0]) + dot1[1]; // boundDot1[1] <= y  <= boundDot2[1]\n\n      return checkInnerBoundDot(y, boundDot1[1], boundDot2[1], isStart, threshold);\n    } else {\n      // ax + c = 0\n      var offset = boundDot1[0] - dot1[0];\n      var isBound = Math.abs(offset) <= (threshold || 0);\n      return {\n        isBound: isBound,\n        offset: isBound ? offset : 0\n      };\n    }\n  } else if (!dy2) {\n    // horizontal\n    if (isRender && !hasDx) {\n      // 90deg\n      return {\n        isBound: false,\n        offset: 0\n      };\n    } else if (hasDy) {\n      // y = a * (x - x1) + y1\n      // x = (y - y1) / a + x1\n      // const a = dy1 / dx1;\n      // const x = dx1 ? (boundDot1[1] - dot1[1]) / a + dot1[0] : dot1[0];\n      var x = (boundDot1[1] - dot1[1]) / slope + dot1[0]; // boundDot1[0] <= x && x <= boundDot2[0]\n\n      return checkInnerBoundDot(x, boundDot1[0], boundDot2[0], isStart, threshold);\n    } else {\n      var offset = boundDot1[1] - dot1[1];\n      var isBound = Math.abs(offset) <= (threshold || 0);\n      return {\n        isBound: isBound,\n        offset: isBound ? offset : 0\n      };\n    }\n  }\n\n  return {\n    isBound: false,\n    offset: 0\n  };\n}\n\nfunction getInnerBoundInfo(moveable, lineInfos, datas) {\n  return lineInfos.map(function (info) {\n    var _a = checkInnerBound(moveable, info),\n        isBound = _a.isBound,\n        offset = _a.offset,\n        isVerticalBound = _a.isVerticalBound,\n        isHorizontalBound = _a.isHorizontalBound;\n\n    var multiple = info.multiple;\n    var sizeOffset = getDragDist({\n      datas: datas,\n      distX: offset[0],\n      distY: offset[1]\n    }).map(function (size, i) {\n      return size * (multiple[i] ? 2 / multiple[i] : 0);\n    });\n    return {\n      sign: multiple,\n      isBound: isBound,\n      isVerticalBound: isVerticalBound,\n      isHorizontalBound: isHorizontalBound,\n      isSnap: false,\n      offset: sizeOffset\n    };\n  });\n}\n\nfunction getInnerBoundDragInfo(moveable, poses, datas) {\n  var _a;\n\n  var lines = getCheckInnerBoundLineInfos(moveable, poses, [0, 0], false).map(function (info) {\n    return __assign(__assign({}, info), {\n      multiple: info.multiple.map(function (dir) {\n        return Math.abs(dir) * 2;\n      })\n    });\n  });\n  var innerBoundInfo = getInnerBoundInfo(moveable, lines, datas);\n  var widthOffsetInfo = getNearOffsetInfo(innerBoundInfo, 0);\n  var heightOffsetInfo = getNearOffsetInfo(innerBoundInfo, 1);\n  var verticalOffset = 0;\n  var horizontalOffset = 0;\n  var isVerticalBound = widthOffsetInfo.isVerticalBound || heightOffsetInfo.isVerticalBound;\n  var isHorizontalBound = widthOffsetInfo.isHorizontalBound || heightOffsetInfo.isHorizontalBound;\n\n  if (isVerticalBound || isHorizontalBound) {\n    _a = getInverseDragDist({\n      datas: datas,\n      distX: -widthOffsetInfo.offset[0],\n      distY: -heightOffsetInfo.offset[1]\n    }), verticalOffset = _a[0], horizontalOffset = _a[1];\n  }\n\n  return {\n    vertical: {\n      isBound: isVerticalBound,\n      offset: verticalOffset\n    },\n    horizontal: {\n      isBound: isHorizontalBound,\n      offset: horizontalOffset\n    }\n  };\n}\n\nfunction getCheckSnapLineDirections(direction, keepRatio) {\n  var lineDirections = [];\n  var x = direction[0];\n  var y = direction[1];\n\n  if (x && y) {\n    lineDirections.push([[0, y * 2], direction, [-x, y]], [[x * 2, 0], direction, [x, -y]]);\n  } else if (x) {\n    // vertcal\n    lineDirections.push([[x * 2, 0], [x, 1], [x, -1]]);\n\n    if (keepRatio) {\n      lineDirections.push([[0, -1], [x, -1], [-x, -1]], [[0, 1], [x, 1], [-x, 1]]);\n    }\n  } else if (y) {\n    // horizontal\n    lineDirections.push([[0, y * 2], [1, y], [-1, y]]);\n\n    if (keepRatio) {\n      lineDirections.push([[-1, 0], [-1, y], [-1, -y]], [[1, 0], [1, y], [1, -y]]);\n    }\n  } else {\n    // [0, 0] to all direction\n    lineDirections.push([[-1, 0], [-1, -1], [-1, 1]], [[1, 0], [1, -1], [1, 1]], [[0, -1], [-1, -1], [1, -1]], [[0, 1], [-1, 1], [1, 1]]);\n  }\n\n  return lineDirections;\n}\n\nfunction getCheckInnerBoundLineInfos(moveable, poses, direction, keepRatio) {\n  var _a = moveable.state,\n      allMatrix = _a.allMatrix,\n      is3d = _a.is3d;\n  var virtualPoses = calculatePoses(allMatrix, 100, 100, is3d ? 4 : 3);\n  var center = getPosByDirection(virtualPoses, [0, 0]);\n  return getCheckSnapLineDirections(direction, keepRatio).map(function (_a) {\n    var multiple = _a[0],\n        dir1 = _a[1],\n        dir2 = _a[2];\n    var virtualLine = [getPosByDirection(virtualPoses, dir1), getPosByDirection(virtualPoses, dir2)];\n    var lineConstants = solveLineConstants(virtualLine);\n\n    var _b = isStartLine(center, virtualLine),\n        verticalSign = _b.vertical,\n        horizontalSign = _b.horizontal;\n\n    var centerSign = hitTestLine(center, virtualLine) <= 0;\n    return {\n      multiple: multiple,\n      centerSign: centerSign,\n      verticalSign: verticalSign,\n      horizontalSign: horizontalSign,\n      lineConstants: lineConstants,\n      line: [getPosByDirection(poses, dir1), getPosByDirection(poses, dir2)]\n    };\n  });\n}\n\nfunction isBoundRotate$1(relativePoses, boundDots, center, rad) {\n  var nextPoses = rad ? relativePoses.map(function (pos) {\n    return rotate(pos, rad);\n  }) : relativePoses;\n  return [[nextPoses[0], nextPoses[1]], [nextPoses[1], nextPoses[3]], [nextPoses[3], nextPoses[2]], [nextPoses[2], nextPoses[0]]].some(function (line) {\n    var centerSign = hitTestLine(center, line) <= 0;\n    return !isSameStartLine(boundDots, line, centerSign);\n  });\n}\n\nfunction getDistPointLine(_a) {\n  // x = 0, y = 0\n  // d = (ax + by + c) / root(a2 + b2)\n  var pos1 = _a[0],\n      pos2 = _a[1];\n  var dx = pos2[0] - pos1[0];\n  var dy = pos2[1] - pos1[1];\n\n  if (!dx) {\n    return Math.abs(pos1[0]);\n  }\n\n  if (!dy) {\n    return Math.abs(pos1[1]);\n  } // y - y1 = a(x - x1)\n  // 0 = ax -y + -a * x1 + y1\n\n\n  var a = dy / dx;\n  return Math.abs((-a * pos1[0] + pos1[1]) / Math.sqrt(Math.pow(a, 2) + 1));\n}\n\nfunction solveReverseLine(_a) {\n  var pos1 = _a[0],\n      pos2 = _a[1];\n  var dx = pos2[0] - pos1[0];\n  var dy = pos2[1] - pos1[1];\n\n  if (!dx) {\n    return [pos1[0], 0];\n  }\n\n  if (!dy) {\n    return [0, pos1[1]];\n  }\n\n  var a = dy / dx; // y - y1 = a (x  - x1)\n  // y = ax - a * x1 + y1\n\n  var b = -a * pos1[0] + pos1[1]; // y = ax + b = -1/a x\n  // x = -b / (a + 1 / a)\n  // y = b / (1 + 1 / a^2)\n\n  return [-b / (a + 1 / a), b / (a * a + 1)];\n}\n\nfunction checkRotateInnerBounds(moveable, prevPoses, nextPoses, origin, rotation) {\n  var bounds = moveable.props.innerBounds;\n  var rad = rotation * Math.PI / 180;\n\n  if (!bounds) {\n    return [];\n  }\n\n  var left = bounds.left,\n      top = bounds.top,\n      width = bounds.width,\n      height = bounds.height;\n  var relativeLeft = left - origin[0];\n  var relativeRight = left + width - origin[0];\n  var relativeTop = top - origin[1];\n  var relativeBottom = top + height - origin[1];\n  var dots = [[relativeLeft, relativeTop], [relativeRight, relativeTop], [relativeLeft, relativeBottom], [relativeRight, relativeBottom]];\n  var center = getPosByDirection(nextPoses, [0, 0]);\n\n  if (!isBoundRotate$1(nextPoses, dots, center, 0)) {\n    return [];\n  }\n\n  var result = [];\n  var dotInfos = dots.map(function (dot) {\n    return [getDistSize(dot), getRad([0, 0], dot)];\n  });\n  [[nextPoses[0], nextPoses[1]], [nextPoses[1], nextPoses[3]], [nextPoses[3], nextPoses[2]], [nextPoses[2], nextPoses[0]]].forEach(function (line) {\n    var lineRad = getRad([0, 0], solveReverseLine(line));\n    var lineDist = getDistPointLine(line);\n    result.push.apply(result, dotInfos.filter(function (_a) {\n      var dotDist = _a[0];\n      return dotDist && lineDist <= dotDist;\n    }).map(function (_a) {\n      var dotDist = _a[0],\n          dotRad = _a[1];\n      var distRad = Math.acos(dotDist ? lineDist / dotDist : 0);\n      var nextRad1 = dotRad + distRad;\n      var nextRad2 = dotRad - distRad;\n      return [rad + nextRad1 - lineRad, rad + nextRad2 - lineRad];\n    }).reduce(function (prev, cur) {\n      prev.push.apply(prev, cur);\n      return prev;\n    }, []).filter(function (nextRad) {\n      return !isBoundRotate$1(prevPoses, dots, center, nextRad);\n    }).map(function (nextRad) {\n      return throttle(nextRad * 180 / Math.PI, TINY_NUM);\n    }));\n  });\n  return result;\n}\n\nfunction checkInnerBoundPoses(moveable) {\n  var innerBounds = moveable.props.innerBounds;\n\n  if (!innerBounds) {\n    return {\n      vertical: [],\n      horizontal: []\n    };\n  }\n\n  var _a = moveable.getRect(),\n      pos1 = _a.pos1,\n      pos2 = _a.pos2,\n      pos3 = _a.pos3,\n      pos4 = _a.pos4;\n\n  var poses = [pos1, pos2, pos3, pos4];\n  var center = getPosByDirection(poses, [0, 0]);\n  var left = innerBounds.left,\n      top = innerBounds.top,\n      width = innerBounds.width,\n      height = innerBounds.height;\n  var leftLine = [[left, top], [left, top + height]];\n  var topLine = [[left, top], [left + width, top]];\n  var rightLine = [[left + width, top], [left + width, top + height]];\n  var bottomLine = [[left, top + height], [left + width, top + height]];\n  var lineInfos = getCheckInnerBoundLineInfos(moveable, poses, [0, 0], false);\n  var horizontalPoses = [];\n  var verticalPoses = [];\n  var boundMap = {\n    top: false,\n    bottom: false,\n    left: false,\n    right: false\n  };\n  lineInfos.forEach(function (lineInfo) {\n    var line = lineInfo.line,\n        lineConstants = lineInfo.lineConstants;\n\n    var _a = isStartLine(center, line),\n        isHorizontalStart = _a.horizontal,\n        isVerticalStart = _a.vertical; // test vertical\n\n\n    var topBoundInfo = checkLineBoundCollision(line, lineConstants, topLine, isVerticalStart, 1, true);\n    var bottomBoundInfo = checkLineBoundCollision(line, lineConstants, bottomLine, isVerticalStart, 1, true); // test horizontal\n\n    var leftBoundInfo = checkLineBoundCollision(line, lineConstants, leftLine, isHorizontalStart, 1, true);\n    var rightBoundInfo = checkLineBoundCollision(line, lineConstants, rightLine, isHorizontalStart, 1, true);\n\n    if (topBoundInfo.isBound && !boundMap.top) {\n      horizontalPoses.push(top);\n      boundMap.top = true;\n    }\n\n    if (bottomBoundInfo.isBound && !boundMap.bottom) {\n      horizontalPoses.push(top + height);\n      boundMap.bottom = true;\n    }\n\n    if (leftBoundInfo.isBound && !boundMap.left) {\n      verticalPoses.push(left);\n      boundMap.left = true;\n    }\n\n    if (rightBoundInfo.isBound && !boundMap.right) {\n      verticalPoses.push(left + width);\n      boundMap.right = true;\n    }\n  });\n  return {\n    horizontal: horizontalPoses,\n    vertical: verticalPoses\n  };\n}\n\nfunction checkBoundPoses(bounds, verticalPoses, horizontalPoses) {\n  var _a = bounds || {},\n      _b = _a.position,\n      position = _b === void 0 ? \"client\" : _b,\n      _c = _a.left,\n      left = _c === void 0 ? -Infinity : _c,\n      _d = _a.top,\n      top = _d === void 0 ? -Infinity : _d,\n      _e = _a.right,\n      right = _e === void 0 ? Infinity : _e,\n      _f = _a.bottom,\n      bottom = _f === void 0 ? Infinity : _f;\n\n  var nextBounds = {\n    position: position,\n    left: left,\n    top: top,\n    right: right,\n    bottom: bottom\n  };\n  return {\n    vertical: checkBounds(nextBounds, verticalPoses, true),\n    horizontal: checkBounds(nextBounds, horizontalPoses, false)\n  };\n}\n\nfunction getBounds(moveable, externalBounds) {\n  var _a = moveable.state,\n      _b = _a.containerClientRect,\n      containerHeight = _b.clientHeight,\n      containerWidth = _b.clientWidth,\n      clientLeft = _b.clientLeft,\n      clientTop = _b.clientTop,\n      _c = _a.snapOffset,\n      snapOffsetLeft = _c.left,\n      snapOffsetTop = _c.top,\n      snapOffsetRight = _c.right,\n      snapOffsetBottom = _c.bottom;\n  var bounds = externalBounds || moveable.props.bounds || {};\n  var position = bounds.position || \"client\";\n  var isCSS = position === \"css\";\n  var _d = bounds.left,\n      left = _d === void 0 ? -Infinity : _d,\n      _e = bounds.top,\n      top = _e === void 0 ? -Infinity : _e;\n  var _f = bounds.right,\n      right = _f === void 0 ? isCSS ? -Infinity : Infinity : _f,\n      _g = bounds.bottom,\n      bottom = _g === void 0 ? isCSS ? -Infinity : Infinity : _g;\n\n  if (isCSS) {\n    right = containerWidth + snapOffsetRight - snapOffsetLeft - right;\n    bottom = containerHeight + snapOffsetBottom - snapOffsetTop - bottom;\n  }\n\n  return {\n    left: left + snapOffsetLeft - clientLeft,\n    right: right + snapOffsetLeft - clientLeft,\n    top: top + snapOffsetTop - clientTop,\n    bottom: bottom + snapOffsetTop - clientTop\n  };\n}\n\nfunction checkBoundKeepRatio(moveable, startPos, endPos) {\n  var _a = getBounds(moveable),\n      left = _a.left,\n      top = _a.top,\n      right = _a.right,\n      bottom = _a.bottom;\n\n  var endX = endPos[0],\n      endY = endPos[1];\n\n  var _b = minus(endPos, startPos),\n      dx = _b[0],\n      dy = _b[1];\n\n  if (Math.abs(dx) < TINY_NUM) {\n    dx = 0;\n  }\n\n  if (Math.abs(dy) < TINY_NUM) {\n    dy = 0;\n  }\n\n  var isBottom = dy > 0;\n  var isRight = dx > 0;\n  var verticalInfo = {\n    isBound: false,\n    offset: 0,\n    pos: 0\n  };\n  var horizontalInfo = {\n    isBound: false,\n    offset: 0,\n    pos: 0\n  };\n\n  if (dx === 0 && dy === 0) {\n    return {\n      vertical: verticalInfo,\n      horizontal: horizontalInfo\n    };\n  } else if (dx === 0) {\n    if (isBottom) {\n      if (bottom < endY) {\n        horizontalInfo.pos = bottom;\n        horizontalInfo.offset = endY - bottom;\n      }\n    } else {\n      if (top > endY) {\n        horizontalInfo.pos = top;\n        horizontalInfo.offset = endY - top;\n      }\n    }\n  } else if (dy === 0) {\n    if (isRight) {\n      if (right < endX) {\n        verticalInfo.pos = right;\n        verticalInfo.offset = endX - right;\n      }\n    } else {\n      if (left > endX) {\n        verticalInfo.pos = left;\n        verticalInfo.offset = endX - left;\n      }\n    }\n  } else {\n    // y - y1 = a * (x - x1)\n    var a = dy / dx;\n    var b = endPos[1] - a * endX;\n    var y = 0;\n    var x = 0;\n    var isBound = false;\n\n    if (isRight && right <= endX) {\n      y = a * right + b;\n      x = right;\n      isBound = true;\n    } else if (!isRight && endX <= left) {\n      y = a * left + b;\n      x = left;\n      isBound = true;\n    }\n\n    if (isBound) {\n      if (y < top || y > bottom) {\n        isBound = false;\n      }\n    }\n\n    if (!isBound) {\n      if (isBottom && bottom <= endY) {\n        y = bottom;\n        x = (y - b) / a;\n        isBound = true;\n      } else if (!isBottom && endY <= top) {\n        y = top;\n        x = (y - b) / a;\n        isBound = true;\n      }\n    }\n\n    if (isBound) {\n      verticalInfo.isBound = true;\n      verticalInfo.pos = x;\n      verticalInfo.offset = endX - x;\n      horizontalInfo.isBound = true;\n      horizontalInfo.pos = y;\n      horizontalInfo.offset = endY - y;\n    }\n  }\n\n  return {\n    vertical: verticalInfo,\n    horizontal: horizontalInfo\n  };\n}\n\nfunction checkBounds(bounds, poses, isVertical) {\n  // 0   [100 - 200]  300\n  var startBoundPos = bounds[isVertical ? \"left\" : \"top\"];\n  var endBoundPos = bounds[isVertical ? \"right\" : \"bottom\"]; // 450\n\n  var minPos = Math.min.apply(Math, poses);\n  var maxPos = Math.max.apply(Math, poses);\n  var boundInfos = [];\n\n  if (startBoundPos + 1 > minPos) {\n    boundInfos.push({\n      isBound: true,\n      offset: minPos - startBoundPos,\n      pos: startBoundPos\n    });\n  }\n\n  if (endBoundPos - 1 < maxPos) {\n    boundInfos.push({\n      isBound: true,\n      offset: maxPos - endBoundPos,\n      pos: endBoundPos\n    });\n  }\n\n  if (!boundInfos.length) {\n    boundInfos.push({\n      isBound: false,\n      offset: 0,\n      pos: 0\n    });\n  }\n\n  return boundInfos.sort(function (a, b) {\n    return Math.abs(b.offset) - Math.abs(a.offset);\n  });\n}\n\nfunction isBoundRotate(relativePoses, boundRect, rad) {\n  var nextPoses = rad ? relativePoses.map(function (pos) {\n    return rotate(pos, rad);\n  }) : relativePoses;\n  return nextPoses.some(function (pos) {\n    return pos[0] < boundRect.left && Math.abs(pos[0] - boundRect.left) > 0.1 || pos[0] > boundRect.right && Math.abs(pos[0] - boundRect.right) > 0.1 || pos[1] < boundRect.top && Math.abs(pos[1] - boundRect.top) > 0.1 || pos[1] > boundRect.bottom && Math.abs(pos[1] - boundRect.bottom) > 0.1;\n  });\n}\n\nfunction boundRotate(vec, boundPos, index) {\n  var r = getDistSize(vec);\n  var nextPos = Math.sqrt(r * r - boundPos * boundPos) || 0;\n  return [nextPos, -nextPos].sort(function (a, b) {\n    return Math.abs(a - vec[index ? 0 : 1]) - Math.abs(b - vec[index ? 0 : 1]);\n  }).map(function (pos) {\n    return getRad([0, 0], index ? [pos, boundPos] : [boundPos, pos]);\n  });\n}\n\nfunction checkRotateBounds(moveable, prevPoses, nextPoses, origin, rotation) {\n  if (!moveable.props.bounds) {\n    return [];\n  }\n\n  var rad = rotation * Math.PI / 180;\n\n  var _a = getBounds(moveable),\n      left = _a.left,\n      top = _a.top,\n      right = _a.right,\n      bottom = _a.bottom;\n\n  var relativeLeft = left - origin[0];\n  var relativeRight = right - origin[0];\n  var relativeTop = top - origin[1];\n  var relativeBottom = bottom - origin[1];\n  var boundRect = {\n    left: relativeLeft,\n    top: relativeTop,\n    right: relativeRight,\n    bottom: relativeBottom\n  };\n\n  if (!isBoundRotate(nextPoses, boundRect, 0)) {\n    return [];\n  }\n\n  var result = [];\n  [[relativeLeft, 0], [relativeRight, 0], [relativeTop, 1], [relativeBottom, 1]].forEach(function (_a) {\n    var boundPos = _a[0],\n        index = _a[1];\n    nextPoses.forEach(function (nextPos) {\n      var relativeRad1 = getRad([0, 0], nextPos);\n      result.push.apply(result, boundRotate(nextPos, boundPos, index).map(function (relativeRad2) {\n        return rad + relativeRad2 - relativeRad1;\n      }).filter(function (nextRad) {\n        return !isBoundRotate(prevPoses, boundRect, nextRad);\n      }).map(function (nextRad) {\n        return throttle(nextRad * 180 / Math.PI, TINY_NUM);\n      }));\n    });\n  });\n  return result;\n}\n\nfunction renderGuideline(info, React) {\n  var _a;\n\n  var direction = info.direction,\n      classNames = info.classNames,\n      size = info.size,\n      pos = info.pos,\n      zoom = info.zoom,\n      key = info.key;\n  var isHorizontal = direction === \"horizontal\";\n  var scaleType = isHorizontal ? \"Y\" : \"X\"; // const scaleType2 = isHorizontal ? \"Y\" : \"X\";\n\n  return React.createElement(\"div\", {\n    key: key,\n    className: classNames.join(\" \"),\n    style: (_a = {}, _a[isHorizontal ? \"width\" : \"height\"] = \"\".concat(size), _a.transform = \"translate(\".concat(pos[0], \", \").concat(pos[1], \") translate\").concat(scaleType, \"(-50%) scale\").concat(scaleType, \"(\").concat(zoom, \")\"), _a)\n  });\n}\n\nfunction renderInnerGuideline(info, React) {\n  return renderGuideline(__assign(__assign({}, info), {\n    classNames: __spreadArray([prefix(\"line\", \"guideline\", info.direction)], info.classNames, true).filter(function (className) {\n      return className;\n    }),\n    size: info.size || \"\".concat(info.sizeValue, \"px\"),\n    pos: info.pos || info.posValue.map(function (v) {\n      return \"\".concat(throttle(v, 0.1), \"px\");\n    })\n  }), React);\n}\n\nfunction renderSnapPoses(moveable, direction, snapPoses, minPos, targetPos, size, index, React) {\n  var zoom = moveable.props.zoom;\n  return snapPoses.map(function (_a, i) {\n    var type = _a.type,\n        pos = _a.pos;\n    var renderPos = [0, 0];\n    renderPos[index] = minPos;\n    renderPos[index ? 0 : 1] = -targetPos + pos;\n    return renderInnerGuideline({\n      key: \"\".concat(direction, \"TargetGuideline\").concat(i),\n      classNames: [prefix(\"target\", \"bold\", type)],\n      posValue: renderPos,\n      sizeValue: size,\n      zoom: zoom,\n      direction: direction\n    }, React);\n  });\n}\n\nfunction renderGuidelines(moveable, type, guidelines, targetPos, targetRect, React) {\n  var _a = moveable.props,\n      zoom = _a.zoom,\n      isDisplayInnerSnapDigit = _a.isDisplayInnerSnapDigit;\n  var mainNames = type === \"horizontal\" ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\n  var targetStart = targetRect[mainNames.start];\n  var targetEnd = targetRect[mainNames.end];\n  return guidelines.filter(function (_a) {\n    var hide = _a.hide,\n        elementRect = _a.elementRect;\n\n    if (hide) {\n      return false;\n    }\n\n    if (isDisplayInnerSnapDigit && elementRect) {\n      // inner\n      var rect = elementRect.rect;\n\n      if (rect[mainNames.start] <= targetStart && targetEnd <= rect[mainNames.end]) {\n        return false;\n      }\n    }\n\n    return true;\n  }).map(function (guideline, i) {\n    var pos = guideline.pos,\n        size = guideline.size,\n        element = guideline.element,\n        className = guideline.className;\n    var renderPos = [-targetPos[0] + pos[0], -targetPos[1] + pos[1]];\n    return renderInnerGuideline({\n      key: \"\".concat(type, \"-default-guideline-\").concat(i),\n      classNames: element ? [prefix(\"bold\"), className] : [prefix(\"normal\"), className],\n      direction: type,\n      posValue: renderPos,\n      sizeValue: size,\n      zoom: zoom\n    }, React);\n  });\n}\n\nfunction renderDigitLine(moveable, type, lineType, index, gap, renderPos, className, React) {\n  var _a;\n\n  var _b = moveable.props,\n      _c = _b.snapDigit,\n      snapDigit = _c === void 0 ? 0 : _c,\n      _d = _b.isDisplaySnapDigit,\n      isDisplaySnapDigit = _d === void 0 ? true : _d,\n      _e = _b.snapDistFormat,\n      snapDistFormat = _e === void 0 ? function (v, type) {\n    // Type can be used render different values.\n    if (type === 'vertical') {\n      return v;\n    }\n\n    return v;\n  } : _e,\n      zoom = _b.zoom;\n  var scaleType = type === \"horizontal\" ? \"X\" : \"Y\";\n  var sizeName = type === \"vertical\" ? \"height\" : \"width\";\n  var absGap = Math.abs(gap);\n  var snapSize = isDisplaySnapDigit ? parseFloat(absGap.toFixed(snapDigit)) : 0;\n  return React.createElement(\"div\", {\n    key: \"\".concat(type, \"-\").concat(lineType, \"-guideline-\").concat(index),\n    className: prefix(\"guideline-group\", type),\n    style: (_a = {\n      left: \"\".concat(renderPos[0], \"px\"),\n      top: \"\".concat(renderPos[1], \"px\")\n    }, _a[sizeName] = \"\".concat(absGap, \"px\"), _a)\n  }, renderInnerGuideline({\n    direction: type,\n    classNames: [prefix(lineType), className],\n    size: \"100%\",\n    posValue: [0, 0],\n    sizeValue: absGap,\n    zoom: zoom\n  }, React), React.createElement(\"div\", {\n    className: prefix(\"size-value\", \"gap\"),\n    style: {\n      transform: \"translate\".concat(scaleType, \"(-50%) scale(\").concat(zoom, \")\")\n    }\n  }, snapSize > 0 ? snapDistFormat(snapSize, type) : \"\"));\n}\n\nfunction groupByElementGuidelines(type, guidelines, targetRect, isDisplayInnerSnapDigit) {\n  var index = type === \"vertical\" ? 0 : 1;\n  var otherIndex = type === \"vertical\" ? 1 : 0;\n  var names = index ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\n  var targetStart = targetRect[names.start];\n  var targetEnd = targetRect[names.end];\n  return groupBy(guidelines, function (guideline) {\n    return guideline.pos[index];\n  }).map(function (nextGuidelines) {\n    var start = [];\n    var end = [];\n    var inner = [];\n    nextGuidelines.forEach(function (guideline) {\n      var _a, _b;\n\n      var element = guideline.element;\n      var rect = guideline.elementRect.rect;\n\n      if (rect[names.end] < targetStart) {\n        start.push(guideline);\n      } else if (targetEnd < rect[names.start]) {\n        end.push(guideline);\n      } else if (rect[names.start] <= targetStart && targetEnd <= rect[names.end] && isDisplayInnerSnapDigit) {\n        var pos = guideline.pos;\n        var elementRect1 = {\n          element: element,\n          rect: __assign(__assign({}, rect), (_a = {}, _a[names.end] = rect[names.start], _a))\n        };\n        var elementRect2 = {\n          element: element,\n          rect: __assign(__assign({}, rect), (_b = {}, _b[names.start] = rect[names.end], _b))\n        };\n        var nextPos1 = [0, 0];\n        var nextPos2 = [0, 0];\n        nextPos1[index] = pos[index];\n        nextPos1[otherIndex] = pos[otherIndex];\n        nextPos2[index] = pos[index];\n        nextPos2[otherIndex] = pos[otherIndex] + guideline.size;\n        start.push({\n          type: type,\n          pos: nextPos1,\n          size: 0,\n          elementRect: elementRect1\n        });\n        end.push({\n          type: type,\n          pos: nextPos2,\n          size: 0,\n          elementRect: elementRect2\n        }); // inner.push(guideline);\n      }\n    });\n    start.sort(function (a, b) {\n      return b.pos[otherIndex] - a.pos[otherIndex];\n    });\n    end.sort(function (a, b) {\n      return a.pos[otherIndex] - b.pos[otherIndex];\n    });\n    return {\n      total: nextGuidelines,\n      start: start,\n      end: end,\n      inner: inner\n    };\n  });\n}\n\nfunction renderDashedGuidelines(moveable, guidelines, targetPos, targetRect, React) {\n  var isDisplayInnerSnapDigit = moveable.props.isDisplayInnerSnapDigit;\n  var rendered = [];\n  [\"vertical\", \"horizontal\"].forEach(function (type) {\n    var nextGuidelines = guidelines.filter(function (guideline) {\n      return guideline.type === type;\n    });\n    var index = type === \"vertical\" ? 1 : 0;\n    var otherIndex = index ? 0 : 1;\n    var groups = groupByElementGuidelines(type, nextGuidelines, targetRect, isDisplayInnerSnapDigit);\n    var mainNames = index ? HORIZONTAL_NAMES_MAP : VERTICAL_NAMES_MAP;\n    var sideNames = index ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\n    var targetStart = targetRect[mainNames.start];\n    var targetEnd = targetRect[mainNames.end];\n    groups.forEach(function (_a) {\n      var total = _a.total,\n          start = _a.start,\n          end = _a.end,\n          inner = _a.inner;\n      var sidePos = targetPos[otherIndex] + total[0].pos[otherIndex] - targetRect[sideNames.start];\n      var prevRect = targetRect;\n      start.forEach(function (guideline) {\n        var nextRect = guideline.elementRect.rect;\n        var size = prevRect[mainNames.start] - nextRect[mainNames.end];\n\n        if (size > 0) {\n          var renderPos = [0, 0];\n          renderPos[index] = targetPos[index] + prevRect[mainNames.start] - targetStart - size;\n          renderPos[otherIndex] = sidePos;\n          rendered.push(renderDigitLine(moveable, type, \"dashed\", rendered.length, size, renderPos, guideline.className, React));\n        }\n\n        prevRect = nextRect;\n      });\n      prevRect = targetRect;\n      end.forEach(function (guideline) {\n        var nextRect = guideline.elementRect.rect;\n        var size = nextRect[mainNames.start] - prevRect[mainNames.end];\n\n        if (size > 0) {\n          var renderPos = [0, 0];\n          renderPos[index] = targetPos[index] + prevRect[mainNames.end] - targetStart;\n          renderPos[otherIndex] = sidePos;\n          rendered.push(renderDigitLine(moveable, type, \"dashed\", rendered.length, size, renderPos, guideline.className, React));\n        }\n\n        prevRect = nextRect;\n      });\n      inner.forEach(function (guideline) {\n        var nextRect = guideline.elementRect.rect;\n        var size1 = targetStart - nextRect[mainNames.start];\n        var size2 = nextRect[mainNames.end] - targetEnd;\n        var renderPos1 = [0, 0];\n        var renderPos2 = [0, 0];\n        renderPos1[index] = targetPos[index] - size1;\n        renderPos1[otherIndex] = sidePos;\n        renderPos2[index] = targetPos[index] + targetEnd - targetStart;\n        renderPos2[otherIndex] = sidePos;\n        rendered.push(renderDigitLine(moveable, type, \"dashed\", rendered.length, size1, renderPos1, guideline.className, React));\n        rendered.push(renderDigitLine(moveable, type, \"dashed\", rendered.length, size2, renderPos2, guideline.className, React));\n      });\n    });\n  });\n  return rendered;\n}\n\nfunction renderGapGuidelines(moveable, guidelines, targetPos, targetRect, React) {\n  var rendered = [];\n  [\"horizontal\", \"vertical\"].forEach(function (type) {\n    var nextGuidelines = guidelines.filter(function (guideline) {\n      return guideline.type === type;\n    }).slice(0, 1);\n    var index = type === \"vertical\" ? 0 : 1;\n    var otherIndex = index ? 0 : 1;\n    var mainNames = index ? HORIZONTAL_NAMES_MAP : VERTICAL_NAMES_MAP;\n    var sideNames = index ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\n    var targetStart = targetRect[mainNames.start];\n    var targetEnd = targetRect[mainNames.end];\n    var targetSideStart = targetRect[sideNames.start];\n    var targetSideEnd = targetRect[sideNames.end];\n    nextGuidelines.forEach(function (_a) {\n      var gap = _a.gap,\n          gapRects = _a.gapRects;\n      var sideStartPos = Math.max.apply(Math, __spreadArray([targetSideStart], gapRects.map(function (_a) {\n        var rect = _a.rect;\n        return rect[sideNames.start];\n      }), false));\n      var sideEndPos = Math.min.apply(Math, __spreadArray([targetSideEnd], gapRects.map(function (_a) {\n        var rect = _a.rect;\n        return rect[sideNames.end];\n      }), false));\n      var sideCenterPos = (sideStartPos + sideEndPos) / 2;\n\n      if (sideStartPos === sideEndPos || sideCenterPos === (targetSideStart + targetSideEnd) / 2) {\n        return;\n      }\n\n      gapRects.forEach(function (_a) {\n        var rect = _a.rect,\n            className = _a.className;\n        var renderPos = [targetPos[0], targetPos[1]];\n\n        if (rect[mainNames.end] < targetStart) {\n          renderPos[index] += rect[mainNames.end] - targetStart;\n        } else if (targetEnd < rect[mainNames.start]) {\n          renderPos[index] += rect[mainNames.start] - targetStart - gap;\n        } else {\n          return;\n        }\n\n        renderPos[otherIndex] += sideCenterPos - targetSideStart;\n        rendered.push(renderDigitLine(moveable, index ? \"vertical\" : \"horizontal\", \"gap\", rendered.length, gap, renderPos, className, React));\n      });\n    });\n  });\n  return rendered;\n}\n\nfunction solveEquation(pos1, pos2, snapOffset, isVertical) {\n  var dx = pos2[0] - pos1[0];\n  var dy = pos2[1] - pos1[1];\n\n  if (Math.abs(dx) < TINY_NUM$1) {\n    dx = 0;\n  }\n\n  if (Math.abs(dy) < TINY_NUM$1) {\n    dy = 0;\n  }\n\n  if (!dx) {\n    // y = 0 * x + b\n    // only horizontal\n    if (!isVertical) {\n      return [0, snapOffset];\n    }\n\n    return [0, 0];\n  }\n\n  if (!dy) {\n    // only vertical\n    if (isVertical) {\n      return [snapOffset, 0];\n    }\n\n    return [0, 0];\n  } // y = ax + b\n\n\n  var a = dy / dx;\n  var b = pos1[1] - a * pos1[0];\n\n  if (isVertical) {\n    // y = a * x + b\n    var y = a * (pos2[0] + snapOffset) + b;\n    return [snapOffset, y - pos2[1]];\n  } else {\n    // x = (y - b) / a\n    var x = (pos2[1] + snapOffset - b) / a;\n    return [x - pos2[0], snapOffset];\n  }\n}\n\nfunction solveNextOffset(pos1, pos2, offset, isVertical, datas) {\n  var sizeOffset = solveEquation(pos1, pos2, offset, isVertical);\n\n  if (!sizeOffset) {\n    return {\n      isOutside: false,\n      offset: [0, 0]\n    };\n  }\n\n  var size = getDist$1(pos1, pos2);\n  var dist1 = getDist$1(sizeOffset, pos1);\n  var dist2 = getDist$1(sizeOffset, pos2);\n  var isOutside = dist1 > size || dist2 > size;\n\n  var _a = getDragDist({\n    datas: datas,\n    distX: sizeOffset[0],\n    distY: sizeOffset[1]\n  }),\n      widthOffset = _a[0],\n      heightOffset = _a[1];\n\n  return {\n    offset: [widthOffset, heightOffset],\n    isOutside: isOutside\n  };\n}\n\nfunction getSnapBound(boundInfo, snapInfo) {\n  if (boundInfo.isBound) {\n    return boundInfo.offset;\n  } else if (snapInfo.isSnap) {\n    return getNearestSnapGuidelineInfo(snapInfo).offset;\n  }\n\n  return 0;\n}\n\nfunction checkThrottleDragRotate(throttleDragRotate, _a, _b, _c, _d) {\n  var distX = _a[0],\n      distY = _a[1];\n  var isVerticalBound = _b[0],\n      isHorizontalBound = _b[1];\n  var isVerticalSnap = _c[0],\n      isHorizontalSnap = _c[1];\n  var verticalOffset = _d[0],\n      horizontalOffset = _d[1];\n  var offsetX = -verticalOffset;\n  var offsetY = -horizontalOffset;\n\n  if (throttleDragRotate && distX && distY) {\n    offsetX = 0;\n    offsetY = 0;\n    var adjustPoses = [];\n\n    if (isVerticalBound && isHorizontalBound) {\n      adjustPoses.push([0, horizontalOffset], [verticalOffset, 0]);\n    } else if (isVerticalBound) {\n      adjustPoses.push([verticalOffset, 0]);\n    } else if (isHorizontalBound) {\n      adjustPoses.push([0, horizontalOffset]);\n    } else if (isVerticalSnap && isHorizontalSnap) {\n      adjustPoses.push([0, horizontalOffset], [verticalOffset, 0]);\n    } else if (isVerticalSnap) {\n      adjustPoses.push([verticalOffset, 0]);\n    } else if (isHorizontalSnap) {\n      adjustPoses.push([0, horizontalOffset]);\n    }\n\n    if (adjustPoses.length) {\n      adjustPoses.sort(function (a, b) {\n        return getDistSize(minus([distX, distY], a)) - getDistSize(minus([distX, distY], b));\n      });\n      var adjustPos = adjustPoses[0];\n\n      if (adjustPos[0] && Math.abs(distX) > TINY_NUM$1) {\n        offsetX = -adjustPos[0];\n        offsetY = distY * Math.abs(distX + offsetX) / Math.abs(distX) - distY;\n      } else if (adjustPos[1] && Math.abs(distY) > TINY_NUM$1) {\n        var prevDistY = distY;\n        offsetY = -adjustPos[1];\n        offsetX = distX * Math.abs(distY + offsetY) / Math.abs(prevDistY) - distX;\n      }\n\n      if (throttleDragRotate && isHorizontalBound && isVerticalBound) {\n        if (Math.abs(offsetX) > TINY_NUM$1 && Math.abs(offsetX) < Math.abs(verticalOffset)) {\n          var scale = Math.abs(verticalOffset) / Math.abs(offsetX);\n          offsetX *= scale;\n          offsetY *= scale;\n        } else if (Math.abs(offsetY) > TINY_NUM$1 && Math.abs(offsetY) < Math.abs(horizontalOffset)) {\n          var scale = Math.abs(horizontalOffset) / Math.abs(offsetY);\n          offsetX *= scale;\n          offsetY *= scale;\n        } else {\n          offsetX = maxOffset(-verticalOffset, offsetX);\n          offsetY = maxOffset(-horizontalOffset, offsetY);\n        }\n      }\n    }\n  } else {\n    offsetX = distX || isVerticalBound ? -verticalOffset : 0;\n    offsetY = distY || isHorizontalBound ? -horizontalOffset : 0;\n  }\n\n  return [offsetX, offsetY];\n}\n\nfunction checkSnapBoundsDrag(moveable, distX, distY, throttleDragRotate, isRequest, datas) {\n  if (!hasGuidelines(moveable, \"draggable\")) {\n    return [{\n      isSnap: false,\n      isBound: false,\n      offset: 0\n    }, {\n      isSnap: false,\n      isBound: false,\n      offset: 0\n    }];\n  }\n\n  var poses = getAbsolutePoses(datas.absolutePoses, [distX, distY]);\n\n  var _a = getRect(poses),\n      left = _a.left,\n      right = _a.right,\n      top = _a.top,\n      bottom = _a.bottom;\n\n  var boundPoses = {\n    horizontal: poses.map(function (pos) {\n      return pos[1];\n    }),\n    vertical: poses.map(function (pos) {\n      return pos[0];\n    })\n  };\n  var snapDirections = getSnapDirections(moveable.props.snapDirections);\n  var snapPoses = splitSnapDirectionPoses(snapDirections, {\n    left: left,\n    right: right,\n    top: top,\n    bottom: bottom,\n    center: (left + right) / 2,\n    middle: (top + bottom) / 2\n  });\n\n  var _b = checkMoveableSnapBounds(moveable, isRequest, snapPoses, boundPoses),\n      verticalSnapBoundInfo = _b.vertical,\n      horizontalSnapBoundInfo = _b.horizontal;\n\n  var _c = getInnerBoundDragInfo(moveable, poses, datas),\n      verticalInnerBoundInfo = _c.vertical,\n      horizontalInnerBoundInfo = _c.horizontal;\n\n  var isVerticalSnap = verticalSnapBoundInfo.isSnap;\n  var isHorizontalSnap = horizontalSnapBoundInfo.isSnap;\n  var isVerticalBound = verticalSnapBoundInfo.isBound || verticalInnerBoundInfo.isBound;\n  var isHorizontalBound = horizontalSnapBoundInfo.isBound || horizontalInnerBoundInfo.isBound;\n  var verticalOffset = maxOffset(verticalSnapBoundInfo.offset, verticalInnerBoundInfo.offset);\n  var horizontalOffset = maxOffset(horizontalSnapBoundInfo.offset, horizontalInnerBoundInfo.offset);\n\n  var _d = checkThrottleDragRotate(throttleDragRotate, [distX, distY], [isVerticalBound, isHorizontalBound], [isVerticalSnap, isHorizontalSnap], [verticalOffset, horizontalOffset]),\n      offsetX = _d[0],\n      offsetY = _d[1];\n\n  return [{\n    isBound: isVerticalBound,\n    isSnap: isVerticalSnap,\n    offset: offsetX\n  }, {\n    isBound: isHorizontalBound,\n    isSnap: isHorizontalSnap,\n    offset: offsetY\n  }];\n}\n\nfunction checkMoveableSnapBounds(moveable, isRequest, poses, boundPoses) {\n  if (boundPoses === void 0) {\n    boundPoses = poses;\n  }\n\n  var _a = checkBoundPoses(getBounds(moveable), boundPoses.vertical, boundPoses.horizontal),\n      horizontalBoundInfos = _a.horizontal,\n      verticalBoundInfos = _a.vertical;\n\n  var _b = isRequest ? {\n    horizontal: {\n      isSnap: false,\n      index: -1\n    },\n    vertical: {\n      isSnap: false,\n      index: -1\n    }\n  } : checkMoveableSnapPoses(moveable, poses.vertical, poses.horizontal),\n      horizontalSnapInfo = _b.horizontal,\n      verticalSnapInfo = _b.vertical;\n\n  var horizontalOffset = getSnapBound(horizontalBoundInfos[0], horizontalSnapInfo);\n  var verticalOffset = getSnapBound(verticalBoundInfos[0], verticalSnapInfo);\n  var horizontalDist = Math.abs(horizontalOffset);\n  var verticalDist = Math.abs(verticalOffset);\n  return {\n    horizontal: {\n      isBound: horizontalBoundInfos[0].isBound,\n      isSnap: horizontalSnapInfo.isSnap,\n      snapIndex: horizontalSnapInfo.index,\n      offset: horizontalOffset,\n      dist: horizontalDist,\n      bounds: horizontalBoundInfos,\n      snap: horizontalSnapInfo\n    },\n    vertical: {\n      isBound: verticalBoundInfos[0].isBound,\n      isSnap: verticalSnapInfo.isSnap,\n      snapIndex: verticalSnapInfo.index,\n      offset: verticalOffset,\n      dist: verticalDist,\n      bounds: verticalBoundInfos,\n      snap: verticalSnapInfo\n    }\n  };\n}\n\nfunction checkSnapBounds(guideines, bounds, posesX, posesY, snapThreshold) {\n  var _a = checkBoundPoses(bounds, posesX, posesY),\n      horizontalBoundInfos = _a.horizontal,\n      verticalBoundInfos = _a.vertical; // options.isRequest ? {\n  //     horizontal: { isSnap: false, index: -1 } as SnapInfo,\n  //     vertical: { isSnap: false, index: -1 } as SnapInfo,\n  // } :\n\n\n  var _b = checkSnapPoses(guideines, posesX, posesY, snapThreshold),\n      horizontalSnapInfo = _b.horizontal,\n      verticalSnapInfo = _b.vertical;\n\n  var horizontalOffset = getSnapBound(horizontalBoundInfos[0], horizontalSnapInfo);\n  var verticalOffset = getSnapBound(verticalBoundInfos[0], verticalSnapInfo);\n  var horizontalDist = Math.abs(horizontalOffset);\n  var verticalDist = Math.abs(verticalOffset);\n  return {\n    horizontal: {\n      isBound: horizontalBoundInfos[0].isBound,\n      isSnap: horizontalSnapInfo.isSnap,\n      snapIndex: horizontalSnapInfo.index,\n      offset: horizontalOffset,\n      dist: horizontalDist,\n      bounds: horizontalBoundInfos,\n      snap: horizontalSnapInfo\n    },\n    vertical: {\n      isBound: verticalBoundInfos[0].isBound,\n      isSnap: verticalSnapInfo.isSnap,\n      snapIndex: verticalSnapInfo.index,\n      offset: verticalOffset,\n      dist: verticalDist,\n      bounds: verticalBoundInfos,\n      snap: verticalSnapInfo\n    }\n  };\n}\n\nfunction checkSnapRightLine(startPos, endPos, snapBoundInfo, keepRatio) {\n  var rad = getRad(startPos, endPos) / Math.PI * 180;\n  var _a = snapBoundInfo.vertical,\n      isVerticalBound = _a.isBound,\n      isVerticalSnap = _a.isSnap,\n      verticalDist = _a.dist,\n      _b = snapBoundInfo.horizontal,\n      isHorizontalBound = _b.isBound,\n      isHorizontalSnap = _b.isSnap,\n      horizontalDist = _b.dist;\n  var rad180 = rad % 180;\n  var isHorizontalLine = rad180 < 3 || rad180 > 177;\n  var isVerticalLine = rad180 > 87 && rad180 < 93;\n\n  if (horizontalDist < verticalDist) {\n    if (isVerticalBound || isVerticalSnap && !isVerticalLine && (!keepRatio || !isHorizontalLine)) {\n      return \"vertical\";\n    }\n  }\n\n  if (isHorizontalBound || isHorizontalSnap && !isHorizontalLine && (!keepRatio || !isVerticalLine)) {\n    return \"horizontal\";\n  }\n\n  return \"\";\n}\n\nfunction getSnapBoundInfo(moveable, poses, directions, keepRatio, isRequest, datas) {\n  return directions.map(function (_a) {\n    var startDirection = _a[0],\n        endDirection = _a[1];\n    var otherStartPos = getPosByDirection(poses, startDirection);\n    var otherEndPos = getPosByDirection(poses, endDirection);\n    var snapBoundInfo = keepRatio ? checkSnapBoundsKeepRatio(moveable, otherStartPos, otherEndPos, isRequest) : checkMoveableSnapBounds(moveable, isRequest, {\n      vertical: [otherEndPos[0]],\n      horizontal: [otherEndPos[1]]\n    });\n    var _b = snapBoundInfo.horizontal,\n        // dist: otherHorizontalDist,\n    otherHorizontalOffset = _b.offset,\n        isOtherHorizontalBound = _b.isBound,\n        isOtherHorizontalSnap = _b.isSnap,\n        _c = snapBoundInfo.vertical,\n        // dist: otherVerticalDist,\n    otherVerticalOffset = _c.offset,\n        isOtherVerticalBound = _c.isBound,\n        isOtherVerticalSnap = _c.isSnap;\n    var multiple = minus(endDirection, startDirection);\n\n    if (!otherVerticalOffset && !otherHorizontalOffset) {\n      return {\n        isBound: isOtherVerticalBound || isOtherHorizontalBound,\n        isSnap: isOtherVerticalSnap || isOtherHorizontalSnap,\n        sign: multiple,\n        offset: [0, 0]\n      };\n    }\n\n    var snapLine = checkSnapRightLine(otherStartPos, otherEndPos, snapBoundInfo, keepRatio);\n\n    if (!snapLine) {\n      return {\n        sign: multiple,\n        isBound: false,\n        isSnap: false,\n        offset: [0, 0]\n      };\n    }\n\n    var isVertical = snapLine === \"vertical\";\n    var sizeOffset = [0, 0];\n\n    if (!keepRatio && Math.abs(endDirection[0]) === 1 && Math.abs(endDirection[1]) === 1 && startDirection[0] !== endDirection[0] && startDirection[1] !== endDirection[1]) {\n      sizeOffset = getDragDist({\n        datas: datas,\n        distX: -otherVerticalOffset,\n        distY: -otherHorizontalOffset\n      });\n    } else {\n      sizeOffset = solveNextOffset(otherStartPos, otherEndPos, -(isVertical ? otherVerticalOffset : otherHorizontalOffset), isVertical, datas).offset;\n    }\n\n    sizeOffset = sizeOffset.map(function (size, i) {\n      return size * (multiple[i] ? 2 / multiple[i] : 0);\n    });\n    return {\n      sign: multiple,\n      isBound: isVertical ? isOtherVerticalBound : isOtherHorizontalBound,\n      isSnap: isVertical ? isOtherVerticalSnap : isOtherHorizontalSnap,\n      offset: sizeOffset\n    };\n  });\n}\n\nfunction getSnapBoundOffset(boundInfo, snapInfo) {\n  if (boundInfo.isBound) {\n    return boundInfo.offset;\n  } else if (snapInfo.isSnap) {\n    return snapInfo.offset;\n  }\n\n  return 0;\n}\n\nfunction checkSnapBoundsKeepRatio(moveable, startPos, endPos, isRequest) {\n  var _a = checkBoundKeepRatio(moveable, startPos, endPos),\n      horizontalBoundInfo = _a.horizontal,\n      verticalBoundInfo = _a.vertical;\n\n  var _b = isRequest ? {\n    horizontal: {\n      isSnap: false\n    },\n    vertical: {\n      isSnap: false\n    }\n  } : checkSnapKeepRatio(moveable, startPos, endPos),\n      horizontalSnapInfo = _b.horizontal,\n      verticalSnapInfo = _b.vertical;\n\n  var horizontalOffset = getSnapBoundOffset(horizontalBoundInfo, horizontalSnapInfo);\n  var verticalOffset = getSnapBoundOffset(verticalBoundInfo, verticalSnapInfo);\n  var horizontalDist = Math.abs(horizontalOffset);\n  var verticalDist = Math.abs(verticalOffset);\n  return {\n    horizontal: {\n      isBound: horizontalBoundInfo.isBound,\n      isSnap: horizontalSnapInfo.isSnap,\n      offset: horizontalOffset,\n      dist: horizontalDist\n    },\n    vertical: {\n      isBound: verticalBoundInfo.isBound,\n      isSnap: verticalSnapInfo.isSnap,\n      offset: verticalOffset,\n      dist: verticalDist\n    }\n  };\n}\n\nfunction checkMaxBounds(moveable, poses, direction, fixedPosition, datas) {\n  var fixedDirection = [-direction[0], -direction[1]];\n  var _a = moveable.state,\n      width = _a.width,\n      height = _a.height;\n  var bounds = moveable.props.bounds;\n  var maxWidth = Infinity;\n  var maxHeight = Infinity;\n\n  if (bounds) {\n    var directions = [[direction[0], -direction[1]], [-direction[0], direction[1]]];\n    var _b = bounds.left,\n        left_1 = _b === void 0 ? -Infinity : _b,\n        _c = bounds.top,\n        top_1 = _c === void 0 ? -Infinity : _c,\n        _d = bounds.right,\n        right_1 = _d === void 0 ? Infinity : _d,\n        _e = bounds.bottom,\n        bottom_1 = _e === void 0 ? Infinity : _e;\n    directions.forEach(function (otherDirection) {\n      var isCheckVertical = otherDirection[0] !== fixedDirection[0];\n      var isCheckHorizontal = otherDirection[1] !== fixedDirection[1];\n      var otherPos = getPosByDirection(poses, otherDirection);\n      var deg = getRad(fixedPosition, otherPos) * 360 / Math.PI;\n\n      if (isCheckHorizontal) {\n        var nextOtherPos = otherPos.slice();\n\n        if (Math.abs(deg - 360) < 2 || Math.abs(deg - 180) < 2) {\n          nextOtherPos[1] = fixedPosition[1];\n        }\n\n        var _a = solveNextOffset(fixedPosition, nextOtherPos, (fixedPosition[1] < otherPos[1] ? bottom_1 : top_1) - otherPos[1], false, datas),\n            _b = _a.offset,\n            heightOffset = _b[1],\n            isHeightOutside = _a.isOutside;\n\n        if (!isNaN(heightOffset)) {\n          maxHeight = height + (isHeightOutside ? 1 : -1) * Math.abs(heightOffset);\n        }\n      }\n\n      if (isCheckVertical) {\n        var nextOtherPos = otherPos.slice();\n\n        if (Math.abs(deg - 90) < 2 || Math.abs(deg - 270) < 2) {\n          nextOtherPos[0] = fixedPosition[0];\n        }\n\n        var _c = solveNextOffset(fixedPosition, nextOtherPos, (fixedPosition[0] < otherPos[0] ? right_1 : left_1) - otherPos[0], true, datas),\n            widthOffset = _c.offset[0],\n            isWidthOutside = _c.isOutside;\n\n        if (!isNaN(widthOffset)) {\n          maxWidth = width + (isWidthOutside ? 1 : -1) * Math.abs(widthOffset);\n        }\n      }\n    });\n  }\n\n  return {\n    maxWidth: maxWidth,\n    maxHeight: maxHeight\n  };\n}\n\nfunction getTotalGuidelines(moveable) {\n  var state = moveable.state;\n  var containerClientRect = state.containerClientRect,\n      hasFixed = state.hasFixed;\n  var overflow = containerClientRect.overflow,\n      containerHeight = containerClientRect.scrollHeight,\n      containerWidth = containerClientRect.scrollWidth,\n      containerClientHeight = containerClientRect.clientHeight,\n      containerClientWidth = containerClientRect.clientWidth,\n      clientLeft = containerClientRect.clientLeft,\n      clientTop = containerClientRect.clientTop;\n  var _a = moveable.props,\n      _b = _a.snapGap,\n      snapGap = _b === void 0 ? true : _b,\n      verticalGuidelines = _a.verticalGuidelines,\n      horizontalGuidelines = _a.horizontalGuidelines,\n      _c = _a.snapThreshold,\n      snapThreshold = _c === void 0 ? 5 : _c,\n      _d = _a.snapGridWidth,\n      snapGridWidth = _d === void 0 ? 0 : _d,\n      _e = _a.snapGridHeight,\n      snapGridHeight = _e === void 0 ? 0 : _e,\n      _f = _a.maxSnapElementGuidelineDistance,\n      maxSnapElementGuidelineDistance = _f === void 0 ? Infinity : _f;\n\n  var _g = getRect(getAbsolutePosesByState(moveable.state)),\n      top = _g.top,\n      left = _g.left,\n      bottom = _g.bottom,\n      right = _g.right;\n\n  var targetRect = {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    center: (left + right) / 2,\n    middle: (top + bottom) / 2\n  };\n  var elementGuidelines = getElementGuidelines(moveable);\n\n  var totalGuidelines = __spreadArray([], elementGuidelines, true);\n\n  if (snapGap) {\n    totalGuidelines.push.apply(totalGuidelines, getGapGuidelines(moveable, targetRect, snapThreshold));\n  }\n\n  totalGuidelines.push.apply(totalGuidelines, getGridGuidelines(snapGridWidth, snapGridHeight, overflow ? containerWidth : containerClientWidth, overflow ? containerHeight : containerClientHeight, clientLeft, clientTop));\n\n  var snapOffset = __assign({}, state.snapOffset || {\n    left: 0,\n    top: 0,\n    bottom: 0,\n    right: 0\n  });\n\n  if (hasFixed) {\n    var left_1 = containerClientRect.left,\n        top_1 = containerClientRect.top;\n    snapOffset.left += left_1;\n    snapOffset.top += top_1;\n    snapOffset.right += left_1;\n    snapOffset.bottom += top_1;\n  }\n\n  totalGuidelines.push.apply(totalGuidelines, getDefaultGuidelines(horizontalGuidelines || false, verticalGuidelines || false, overflow ? containerWidth : containerClientWidth, overflow ? containerHeight : containerClientHeight, clientLeft, clientTop, snapOffset));\n  totalGuidelines = totalGuidelines.filter(function (_a) {\n    var element = _a.element,\n        elementRect = _a.elementRect,\n        type = _a.type;\n\n    if (!element || !elementRect) {\n      return true;\n    }\n\n    var rect = elementRect.rect;\n    return checkBetweenRects(targetRect, rect, type, maxSnapElementGuidelineDistance);\n  });\n  return totalGuidelines;\n}\n\nfunction getGapGuidelines(moveable, targetRect, snapThreshold) {\n  var _a = moveable.props,\n      _b = _a.maxSnapElementGuidelineDistance,\n      maxSnapElementGuidelineDistance = _b === void 0 ? Infinity : _b,\n      _c = _a.maxSnapElementGapDistance,\n      maxSnapElementGapDistance = _c === void 0 ? Infinity : _c;\n  var elementRects = moveable.state.elementRects;\n  var gapGuidelines = [];\n  [[\"vertical\", VERTICAL_NAMES_MAP, HORIZONTAL_NAMES_MAP], [\"horizontal\", HORIZONTAL_NAMES_MAP, VERTICAL_NAMES_MAP]].forEach(function (_a) {\n    var type = _a[0],\n        mainNames = _a[1],\n        sideNames = _a[2];\n    var targetStart = targetRect[mainNames.start];\n    var targetEnd = targetRect[mainNames.end];\n    var targetCenter = targetRect[mainNames.center];\n    var targetStart2 = targetRect[sideNames.start];\n    var targetEnd2 = targetRect[sideNames.end]; // element : moveable\n\n    function getDist(elementRect) {\n      var rect = elementRect.rect;\n\n      if (rect[mainNames.end] < targetStart + snapThreshold) {\n        return targetStart - rect[mainNames.end];\n      } else if (targetEnd - snapThreshold < rect[mainNames.start]) {\n        return rect[mainNames.start] - targetEnd;\n      } else {\n        return -1;\n      }\n    }\n\n    var nextElementRects = elementRects.filter(function (elementRect) {\n      var rect = elementRect.rect;\n\n      if (rect[sideNames.start] > targetEnd2 || rect[sideNames.end] < targetStart2) {\n        return false;\n      }\n\n      return getDist(elementRect) > 0;\n    }).sort(function (a, b) {\n      return getDist(a) - getDist(b);\n    });\n    var groups = [];\n    nextElementRects.forEach(function (snapRect1) {\n      nextElementRects.forEach(function (snapRect2) {\n        if (snapRect1 === snapRect2) {\n          return;\n        }\n\n        var rect1 = snapRect1.rect;\n        var rect2 = snapRect2.rect;\n        var rect1Start = rect1[sideNames.start];\n        var rect1End = rect1[sideNames.end];\n        var rect2Start = rect2[sideNames.start];\n        var rect2End = rect2[sideNames.end];\n\n        if (rect1Start > rect2End || rect2Start > rect1End) {\n          return;\n        }\n\n        groups.push([snapRect1, snapRect2]);\n      });\n    });\n    groups.forEach(function (_a) {\n      var snapRect1 = _a[0],\n          snapRect2 = _a[1];\n      var rect1 = snapRect1.rect;\n      var rect2 = snapRect2.rect;\n      var rect1Start = rect1[mainNames.start];\n      var rect1End = rect1[mainNames.end];\n      var rect2Start = rect2[mainNames.start];\n      var rect2End = rect2[mainNames.end];\n      var gap = 0;\n      var pos = 0;\n      var isStart = false;\n      var isCenter = false;\n      var isEnd = false;\n\n      if (rect1End <= targetStart && targetEnd <= rect2Start) {\n        // (l)element1(r) : (l)target(r) : (l)element2(r)\n        isCenter = true;\n        gap = (rect2Start - rect1End - (targetEnd - targetStart)) / 2;\n        pos = rect1End + gap + (targetEnd - targetStart) / 2;\n\n        if (Math.abs(pos - targetCenter) > snapThreshold) {\n          return;\n        }\n      } else if (rect1End < rect2Start && rect2End < targetStart + snapThreshold) {\n        // (l)element1(r) : (l)element2(r) : (l)target\n        isStart = true;\n        gap = rect2Start - rect1End;\n        pos = rect2End + gap;\n\n        if (Math.abs(pos - targetStart) > snapThreshold) {\n          return;\n        }\n      } else if (rect1End < rect2Start && targetEnd - snapThreshold < rect1Start) {\n        // target(r) : (l)element1(r) : (l)element2(r)\n        isEnd = true;\n        gap = rect2Start - rect1End;\n        pos = rect1Start - gap;\n\n        if (Math.abs(pos - targetEnd) > snapThreshold) {\n          return;\n        }\n      } else {\n        return;\n      }\n\n      if (!gap) {\n        return;\n      }\n\n      if (!checkBetweenRects(targetRect, rect2, type, maxSnapElementGuidelineDistance)) {\n        return;\n      }\n\n      if (gap > maxSnapElementGapDistance) {\n        return;\n      }\n\n      gapGuidelines.push({\n        type: type,\n        pos: type === \"vertical\" ? [pos, 0] : [0, pos],\n        element: snapRect2.element,\n        size: 0,\n        className: snapRect2.className,\n        isStart: isStart,\n        isCenter: isCenter,\n        isEnd: isEnd,\n        gap: gap,\n        hide: true,\n        gapRects: [snapRect1, snapRect2]\n      });\n    });\n  });\n  return gapGuidelines;\n}\n\nfunction getGridGuidelines(snapGridWidth, snapGridHeight, containerWidth, containerHeight, clientLeft, clientTop) {\n  if (clientLeft === void 0) {\n    clientLeft = 0;\n  }\n\n  if (clientTop === void 0) {\n    clientTop = 0;\n  }\n\n  var guidelines = [];\n\n  if (snapGridHeight) {\n    for (var pos = 0; pos <= containerHeight; pos += snapGridHeight) {\n      guidelines.push({\n        type: \"horizontal\",\n        pos: [0, throttle(pos - clientTop, 0.1)],\n        size: containerWidth,\n        hide: true\n      });\n    }\n  }\n\n  if (snapGridWidth) {\n    for (var pos = 0; pos <= containerWidth; pos += snapGridWidth) {\n      guidelines.push({\n        type: \"vertical\",\n        pos: [throttle(pos - clientLeft, 0.1), 0],\n        size: containerHeight,\n        hide: true\n      });\n    }\n  }\n\n  return guidelines;\n}\n\nfunction checkBetweenRects(rect1, rect2, type, distance) {\n  if (type === \"horizontal\") {\n    return Math.abs(rect1.right - rect2.left) <= distance || Math.abs(rect1.left - rect2.right) <= distance || rect1.left <= rect2.right && rect2.left <= rect1.right;\n  } else if (type === \"vertical\") {\n    return Math.abs(rect1.bottom - rect2.top) <= distance || Math.abs(rect1.top - rect2.bottom) <= distance || rect1.top <= rect2.bottom && rect2.top <= rect1.bottom;\n  }\n\n  return true;\n}\n\nfunction getElementGuidelines(moveable) {\n  var state = moveable.state;\n  var _a = moveable.props.elementGuidelines,\n      elementGuidelines = _a === void 0 ? [] : _a;\n\n  if (!elementGuidelines.length) {\n    state.elementRects = [];\n    return [];\n  }\n\n  var prevValues = (state.elementRects || []).filter(function (snapRect) {\n    return !snapRect.refresh;\n  });\n  var nextElementGuidelines = elementGuidelines.map(function (el) {\n    if (isObject(el) && \"element\" in el) {\n      return __assign(__assign({}, el), {\n        element: getRefTarget(el.element, true)\n      });\n    }\n\n    return {\n      element: getRefTarget(el, true)\n    };\n  }).filter(function (value) {\n    return value.element;\n  });\n\n  var _b = diff(prevValues.map(function (v) {\n    return v.element;\n  }), nextElementGuidelines.map(function (v) {\n    return v.element;\n  })),\n      maintained = _b.maintained,\n      added = _b.added;\n\n  var nextValues = [];\n  maintained.forEach(function (_a) {\n    var prevIndex = _a[0],\n        nextIndex = _a[1];\n    nextValues[nextIndex] = prevValues[prevIndex];\n  });\n  getSnapElementRects(moveable, added.map(function (index) {\n    return nextElementGuidelines[index];\n  })).map(function (rect, i) {\n    nextValues[added[i]] = rect;\n  });\n  state.elementRects = nextValues;\n  var elementSnapDirections = getSnapDirections(moveable.props.elementSnapDirections);\n  var nextGuidelines = [];\n  nextValues.forEach(function (snapRect) {\n    var element = snapRect.element,\n        _a = snapRect.top,\n        topValue = _a === void 0 ? elementSnapDirections.top : _a,\n        _b = snapRect.left,\n        leftValue = _b === void 0 ? elementSnapDirections.left : _b,\n        _c = snapRect.right,\n        rightValue = _c === void 0 ? elementSnapDirections.right : _c,\n        _d = snapRect.bottom,\n        bottomValue = _d === void 0 ? elementSnapDirections.bottom : _d,\n        _e = snapRect.center,\n        centerValue = _e === void 0 ? elementSnapDirections.center : _e,\n        _f = snapRect.middle,\n        middleValue = _f === void 0 ? elementSnapDirections.middle : _f,\n        className = snapRect.className,\n        rect = snapRect.rect;\n\n    var _g = splitSnapDirectionPoses({\n      top: topValue,\n      right: rightValue,\n      left: leftValue,\n      bottom: bottomValue,\n      center: centerValue,\n      middle: middleValue\n    }, rect),\n        horizontal = _g.horizontal,\n        vertical = _g.vertical;\n\n    var rectTop = rect.top;\n    var rectLeft = rect.left;\n    var width = rect.right - rectLeft;\n    var height = rect.bottom - rectTop;\n    var sizes = [width, height];\n    vertical.forEach(function (pos) {\n      nextGuidelines.push({\n        type: \"vertical\",\n        element: element,\n        pos: [throttle(pos, 0.1), rectTop],\n        size: height,\n        sizes: sizes,\n        className: className,\n        elementRect: snapRect\n      });\n    });\n    horizontal.forEach(function (pos) {\n      nextGuidelines.push({\n        type: \"horizontal\",\n        element: element,\n        pos: [rectLeft, throttle(pos, 0.1)],\n        size: width,\n        sizes: sizes,\n        className: className,\n        elementRect: snapRect\n      });\n    });\n  });\n  return nextGuidelines;\n}\n\nfunction getDefaultGuidelines(horizontalGuidelines, verticalGuidelines, width, height, clientLeft, clientTop, snapOffset) {\n  if (clientLeft === void 0) {\n    clientLeft = 0;\n  }\n\n  if (clientTop === void 0) {\n    clientTop = 0;\n  }\n\n  if (snapOffset === void 0) {\n    snapOffset = {\n      left: 0,\n      top: 0,\n      right: 0,\n      bottom: 0\n    };\n  }\n\n  var guidelines = [];\n  var snapOffsetLeft = snapOffset.left,\n      snapOffsetTop = snapOffset.top,\n      snapOffsetBottom = snapOffset.bottom,\n      snapOffsetRight = snapOffset.right;\n  var snapWidth = width + snapOffsetRight - snapOffsetLeft;\n  var snapHeight = height + snapOffsetBottom - snapOffsetTop;\n  horizontalGuidelines && horizontalGuidelines.forEach(function (posInfo) {\n    var nextPosInfo = isObject(posInfo) ? posInfo : {\n      pos: posInfo\n    };\n    guidelines.push({\n      type: \"horizontal\",\n      pos: [snapOffsetLeft, throttle(nextPosInfo.pos - clientTop + snapOffsetTop, 0.1)],\n      size: snapWidth,\n      className: nextPosInfo.className\n    });\n  });\n  verticalGuidelines && verticalGuidelines.forEach(function (posInfo) {\n    var nextPosInfo = isObject(posInfo) ? posInfo : {\n      pos: posInfo\n    };\n    guidelines.push({\n      type: \"vertical\",\n      pos: [throttle(nextPosInfo.pos - clientLeft + snapOffsetLeft, 0.1), snapOffsetTop],\n      size: snapHeight,\n      className: nextPosInfo.className\n    });\n  });\n  return guidelines;\n}\n\nfunction getSnapElementRects(moveable, values) {\n  if (!values.length) {\n    return [];\n  }\n\n  var state = moveable.state;\n  var containerClientRect = state.containerClientRect,\n      _a = state.targetClientRect,\n      clientTop = _a.top,\n      clientLeft = _a.left,\n      rootMatrix = state.rootMatrix,\n      is3d = state.is3d;\n  var n = is3d ? 4 : 3;\n\n  var _b = calculateContainerPos(rootMatrix, containerClientRect, n),\n      containerLeft = _b[0],\n      containerTop = _b[1];\n\n  var poses = getAbsolutePosesByState(state);\n\n  var _c = getMinMaxs(poses),\n      targetLeft = _c.minX,\n      targetTop = _c.minY;\n\n  var _d = minus([targetLeft, targetTop], calculateInversePosition(rootMatrix, [clientLeft - containerLeft, clientTop - containerTop], n)).map(function (pos) {\n    return roundSign(pos);\n  }),\n      distLeft = _d[0],\n      distTop = _d[1];\n\n  return values.map(function (value) {\n    var rect = value.element.getBoundingClientRect();\n    var left = rect.left - containerLeft;\n    var top = rect.top - containerTop;\n    var bottom = top + rect.height;\n    var right = left + rect.width;\n\n    var _a = calculateInversePosition(rootMatrix, [left, top], n),\n        elementLeft = _a[0],\n        elementTop = _a[1];\n\n    var _b = calculateInversePosition(rootMatrix, [right, bottom], n),\n        elementRight = _b[0],\n        elementBottom = _b[1];\n\n    return __assign(__assign({}, value), {\n      rect: {\n        left: elementLeft + distLeft,\n        right: elementRight + distLeft,\n        top: elementTop + distTop,\n        bottom: elementBottom + distTop,\n        center: (elementLeft + elementRight) / 2 + distLeft,\n        middle: (elementTop + elementBottom) / 2 + distTop\n      }\n    });\n  });\n}\n\nfunction checkSnapInfo(moveable) {\n  var state = moveable.state;\n  var container = state.container;\n  var snapContainer = moveable.props.snapContainer || container;\n\n  if (state.snapContainer === snapContainer && state.guidelines && state.guidelines.length) {\n    return false;\n  }\n\n  var containerClientRect = state.containerClientRect;\n  var snapOffset = {\n    left: 0,\n    top: 0,\n    bottom: 0,\n    right: 0\n  };\n\n  if (container !== snapContainer) {\n    var snapContainerTarget = getRefTarget(snapContainer, true);\n\n    if (snapContainerTarget) {\n      var snapContainerRect = getClientRect(snapContainerTarget);\n      var offset1 = getDragDistByState(state, [snapContainerRect.left - containerClientRect.left, snapContainerRect.top - containerClientRect.top]);\n      var offset2 = getDragDistByState(state, [snapContainerRect.right - containerClientRect.right, snapContainerRect.bottom - containerClientRect.bottom]);\n      snapOffset.left = throttle(offset1[0], 0.00001);\n      snapOffset.top = throttle(offset1[1], 0.00001);\n      snapOffset.right = throttle(offset2[0], 0.00001);\n      snapOffset.bottom = throttle(offset2[1], 0.00001);\n    }\n  }\n\n  state.snapContainer = snapContainer;\n  state.snapOffset = snapOffset;\n  state.guidelines = getTotalGuidelines(moveable);\n  state.enableSnap = true;\n  return true;\n}\n\nfunction getNextFixedPoses(matrix, width, height, fixedDirection, fixedPos, is3d) {\n  var nextPoses = calculatePoses(matrix, width, height, is3d ? 4 : 3);\n  var nextFixedPos = getPosByDirection(nextPoses, fixedDirection);\n  return getAbsolutePoses(nextPoses, minus(fixedPos, nextFixedPos));\n}\n\nfunction getSizeOffsetInfo(moveable, poses, direction, keepRatio, isRequest, datas) {\n  var fixedDirection = datas.fixedDirection;\n  var directions = getCheckSnapDirections(direction, fixedDirection, keepRatio);\n  var innerBoundLineInfos = getCheckInnerBoundLineInfos(moveable, poses, direction, keepRatio);\n\n  var offsets = __spreadArray(__spreadArray([], getSnapBoundInfo(moveable, poses, directions, keepRatio, isRequest, datas), true), getInnerBoundInfo(moveable, innerBoundLineInfos, datas), true);\n\n  var widthOffsetInfo = getNearOffsetInfo(offsets, 0);\n  var heightOffsetInfo = getNearOffsetInfo(offsets, 1);\n  return {\n    width: {\n      isBound: widthOffsetInfo.isBound,\n      offset: widthOffsetInfo.offset[0]\n    },\n    height: {\n      isBound: heightOffsetInfo.isBound,\n      offset: heightOffsetInfo.offset[1]\n    }\n  };\n}\n\nfunction recheckSizeByTwoDirection(moveable, poses, width, height, maxWidth, maxHeight, direction, isRequest, datas) {\n  var snapPos = getPosByDirection(poses, direction);\n\n  var _a = checkMoveableSnapBounds(moveable, isRequest, {\n    vertical: [snapPos[0]],\n    horizontal: [snapPos[1]]\n  }),\n      horizontalOffset = _a.horizontal.offset,\n      verticalOffset = _a.vertical.offset;\n\n  if (throttle(verticalOffset, FLOAT_POINT_NUM) || throttle(horizontalOffset, FLOAT_POINT_NUM)) {\n    var _b = getDragDist({\n      datas: datas,\n      distX: -verticalOffset,\n      distY: -horizontalOffset\n    }),\n        nextWidthOffset = _b[0],\n        nextHeightOffset = _b[1];\n\n    var nextWidth = Math.min(maxWidth || Infinity, width + direction[0] * nextWidthOffset);\n    var nextHeight = Math.min(maxHeight || Infinity, height + direction[1] * nextHeightOffset);\n    return [nextWidth - width, nextHeight - height];\n  }\n\n  return [0, 0];\n}\n\nfunction checkSizeDist(moveable, getNextPoses, width, height, direction, fixedPosition, isRequest, datas) {\n  var poses = getAbsolutePosesByState(moveable.state);\n  var keepRatio = moveable.props.keepRatio;\n  var widthOffset = 0;\n  var heightOffset = 0;\n\n  for (var i = 0; i < 2; ++i) {\n    var nextPoses = getNextPoses(widthOffset, heightOffset);\n\n    var _a = getSizeOffsetInfo(moveable, nextPoses, direction, keepRatio, isRequest, datas),\n        widthOffsetInfo = _a.width,\n        heightOffsetInfo = _a.height;\n\n    var isWidthBound = widthOffsetInfo.isBound;\n    var isHeightBound = heightOffsetInfo.isBound;\n    var nextWidthOffset = widthOffsetInfo.offset;\n    var nextHeightOffset = heightOffsetInfo.offset;\n\n    if (i === 1) {\n      if (!isWidthBound) {\n        nextWidthOffset = 0;\n      }\n\n      if (!isHeightBound) {\n        nextHeightOffset = 0;\n      }\n    }\n\n    if (i === 0 && isRequest && !isWidthBound && !isHeightBound) {\n      return [0, 0];\n    }\n\n    if (keepRatio) {\n      var widthDist = Math.abs(nextWidthOffset) * (width ? 1 / width : 1);\n      var heightDist = Math.abs(nextHeightOffset) * (height ? 1 / height : 1);\n      var isGetWidthOffset = isWidthBound && isHeightBound ? widthDist < heightDist : isHeightBound || !isWidthBound && widthDist < heightDist;\n\n      if (isGetWidthOffset) {\n        // width : height = ? : heightOffset\n        nextWidthOffset = width * nextHeightOffset / height;\n      } else {\n        // width : height = widthOffset : ?\n        nextHeightOffset = height * nextWidthOffset / width;\n      }\n    }\n\n    widthOffset += nextWidthOffset;\n    heightOffset += nextHeightOffset;\n  }\n\n  if (direction[0] && direction[1]) {\n    var _b = checkMaxBounds(moveable, poses, direction, fixedPosition, datas),\n        maxWidth = _b.maxWidth,\n        maxHeight = _b.maxHeight;\n\n    var _c = recheckSizeByTwoDirection(moveable, getNextPoses(widthOffset, heightOffset).map(function (pos) {\n      return pos.map(function (p) {\n        return throttle(p, FLOAT_POINT_NUM);\n      });\n    }), width + widthOffset, height + heightOffset, maxWidth, maxHeight, direction, isRequest, datas),\n        nextWidthOffset = _c[0],\n        nextHeightOffset = _c[1];\n\n    widthOffset += nextWidthOffset;\n    heightOffset += nextHeightOffset;\n  }\n\n  return [widthOffset, heightOffset];\n}\n\nfunction checkSnapRotate(moveable, rect, rotation) {\n  if (!hasGuidelines(moveable, \"rotatable\")) {\n    return {\n      isSnap: false,\n      rotation: rotation\n    };\n  }\n\n  var pos1 = rect.pos1,\n      pos2 = rect.pos2,\n      pos3 = rect.pos3,\n      pos4 = rect.pos4,\n      origin2 = rect.origin;\n  var rad = rotation * Math.PI / 180;\n  var prevPoses = [pos1, pos2, pos3, pos4].map(function (pos) {\n    return minus(pos, origin2);\n  });\n  var nextPoses = prevPoses.map(function (pos) {\n    return rotate(pos, rad);\n  }); // console.log(moveable.state.left, moveable.state.top, moveable.state.origin);\n  // console.log(pos1, pos2, pos3, pos4, origin, rad, prevPoses, nextPoses);\n\n  var result = __spreadArray(__spreadArray([], checkRotateBounds(moveable, prevPoses, nextPoses, origin2, rotation), true), checkRotateInnerBounds(moveable, prevPoses, nextPoses, origin2, rotation), true);\n\n  result.sort(function (a, b) {\n    return Math.abs(a - rotation) - Math.abs(b - rotation);\n  });\n  var isSnap = result.length > 0;\n  return {\n    isSnap: isSnap,\n    rotation: isSnap ? result[0] : rotation\n  };\n}\n\nfunction checkSnapResize(moveable, width, height, direction, fixedPosition, isRequest, datas) {\n  if (!hasGuidelines(moveable, \"resizable\")) {\n    return [0, 0];\n  }\n\n  var fixedDirection = datas.fixedDirection,\n      nextAllMatrix = datas.nextAllMatrix;\n  var _a = moveable.state,\n      allMatrix = _a.allMatrix,\n      is3d = _a.is3d;\n  return checkSizeDist(moveable, function (widthOffset, heightOffset) {\n    return getNextFixedPoses(nextAllMatrix || allMatrix, width + widthOffset, height + heightOffset, fixedDirection, fixedPosition, is3d);\n  }, width, height, direction, fixedPosition, isRequest, datas);\n}\n\nfunction checkSnapScale(moveable, scale, direction, isRequest, datas) {\n  if (!hasGuidelines(moveable, \"scalable\")) {\n    return [0, 0];\n  }\n\n  var startOffsetWidth = datas.startOffsetWidth,\n      startOffsetHeight = datas.startOffsetHeight,\n      fixedPosition = datas.fixedPosition,\n      fixedDirection = datas.fixedDirection,\n      is3d = datas.is3d;\n  var sizeDist = checkSizeDist(moveable, function (widthOffset, heightOffset) {\n    return getNextFixedPoses(scaleMatrix(datas, plus(scale, [widthOffset / startOffsetWidth, heightOffset / startOffsetHeight])), startOffsetWidth, startOffsetHeight, fixedDirection, fixedPosition, is3d);\n  }, startOffsetWidth, startOffsetHeight, direction, fixedPosition, isRequest, datas);\n  return [sizeDist[0] / startOffsetWidth, sizeDist[1] / startOffsetHeight];\n}\n\nfunction startCheckSnapDrag(moveable, datas) {\n  datas.absolutePoses = getAbsolutePosesByState(moveable.state);\n}\n\nfunction getSnapGuidelines(posInfos) {\n  var guidelines = [];\n  posInfos.forEach(function (posInfo) {\n    posInfo.guidelineInfos.forEach(function (_a) {\n      var guideline = _a.guideline;\n\n      if (guidelines.indexOf(guideline) > -1) {\n        return;\n      }\n\n      guidelines.push(guideline);\n    });\n  });\n  return guidelines;\n}\n\nfunction addBoundGuidelines(moveable, verticalPoses, horizontalPoses, verticalSnapPoses, horizontalSnapPoses, externalBounds) {\n  var _a = checkBoundPoses(getBounds(moveable, externalBounds), verticalPoses, horizontalPoses),\n      verticalBoundInfos = _a.vertical,\n      horizontalBoundInfos = _a.horizontal;\n\n  verticalBoundInfos.forEach(function (info) {\n    if (info.isBound) {\n      verticalSnapPoses.push({\n        type: \"bounds\",\n        pos: info.pos\n      });\n    }\n  });\n  horizontalBoundInfos.forEach(function (info) {\n    if (info.isBound) {\n      horizontalSnapPoses.push({\n        type: \"bounds\",\n        pos: info.pos\n      });\n    }\n  });\n\n  var _b = checkInnerBoundPoses(moveable),\n      verticalInnerBoundPoses = _b.vertical,\n      horizontalInnerBoundPoses = _b.horizontal;\n\n  verticalInnerBoundPoses.forEach(function (innerPos) {\n    if (findIndex(verticalSnapPoses, function (_a) {\n      var type = _a.type,\n          pos = _a.pos;\n      return type === \"bounds\" && pos === innerPos;\n    }) >= 0) {\n      return;\n    }\n\n    verticalSnapPoses.push({\n      type: \"bounds\",\n      pos: innerPos\n    });\n  });\n  horizontalInnerBoundPoses.forEach(function (innerPos) {\n    if (findIndex(horizontalSnapPoses, function (_a) {\n      var type = _a.type,\n          pos = _a.pos;\n      return type === \"bounds\" && pos === innerPos;\n    }) >= 0) {\n      return;\n    }\n\n    horizontalSnapPoses.push({\n      type: \"bounds\",\n      pos: innerPos\n    });\n  });\n}\n\nvar directionCondition$2 = getDirectionCondition(\"\", [\"resizable\", \"scalable\"]);\n/**\n * @namespace Moveable.Snappable\n * @description Whether or not target can be snapped to the guideline. (default: false)\n * @sort 2\n */\n\nvar Snappable = {\n  name: \"snappable\",\n  dragRelation: \"strong\",\n  props: {\n    snappable: [Boolean, Array],\n    snapContainer: Object,\n    snapDirections: [Boolean, Object],\n    elementSnapDirections: [Boolean, Object],\n    snapGap: Boolean,\n    snapGridWidth: Number,\n    snapGridHeight: Number,\n    isDisplaySnapDigit: Boolean,\n    isDisplayInnerSnapDigit: Boolean,\n    snapDigit: Number,\n    snapThreshold: Number,\n    snapRenderThreshold: Number,\n    horizontalGuidelines: Array,\n    verticalGuidelines: Array,\n    elementGuidelines: Array,\n    bounds: Object,\n    innerBounds: Object,\n    snapDistFormat: Function,\n    maxSnapElementGuidelineDistance: Number,\n    maxSnapElementGapDistance: Number\n  },\n  events: {\n    onSnap: \"snap\"\n  },\n  css: [\":host {\\n    --bounds-color: #d66;\\n}\\n.guideline {\\n    pointer-events: none;\\n    z-index: 2;\\n}\\n.guideline.bounds {\\n    background: #d66;\\n    background: var(--bounds-color);\\n}\\n.guideline-group {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n}\\n.guideline-group .size-value {\\n    position: absolute;\\n    color: #f55;\\n    font-size: 12px;\\n    font-weight: bold;\\n}\\n.guideline-group.horizontal .size-value {\\n    transform-origin: 50% 100%;\\n    transform: translateX(-50%);\\n    left: 50%;\\n    bottom: 5px;\\n}\\n.guideline-group.vertical .size-value {\\n    transform-origin: 0% 50%;\\n    top: 50%;\\n    transform: translateY(-50%);\\n    left: 5px;\\n}\\n.guideline.gap {\\n    background: #f55;\\n}\\n.size-value.gap {\\n    color: #f55;\\n}\\n\"],\n  render: function (moveable, React) {\n    var state = moveable.state;\n    var targetTop = state.top,\n        targetLeft = state.left,\n        pos1 = state.pos1,\n        pos2 = state.pos2,\n        pos3 = state.pos3,\n        pos4 = state.pos4,\n        snapRenderInfo = state.snapRenderInfo;\n    var _a = moveable.props.snapRenderThreshold,\n        snapRenderThreshold = _a === void 0 ? 1 : _a;\n\n    if (!snapRenderInfo || !snapRenderInfo.render || !hasGuidelines(moveable, \"\")) {\n      return [];\n    }\n\n    state.guidelines = getTotalGuidelines(moveable);\n    var minLeft = Math.min(pos1[0], pos2[0], pos3[0], pos4[0]);\n    var minTop = Math.min(pos1[1], pos2[1], pos3[1], pos4[1]);\n    var externalPoses = snapRenderInfo.externalPoses || [];\n    var poses = getAbsolutePosesByState(moveable.state);\n    var verticalSnapPoses = [];\n    var horizontalSnapPoses = [];\n    var verticalGuidelines = [];\n    var horizontalGuidelines = [];\n    var snapInfos = [];\n\n    var _b = getRect(poses),\n        width = _b.width,\n        height = _b.height,\n        top = _b.top,\n        left = _b.left,\n        bottom = _b.bottom,\n        right = _b.right;\n\n    var targetRect = {\n      left: left,\n      right: right,\n      top: top,\n      bottom: bottom,\n      center: (left + right) / 2,\n      middle: (top + bottom) / 2\n    };\n    var hasExternalPoses = externalPoses.length > 0;\n    var externalRect = hasExternalPoses ? getRect(externalPoses) : {};\n\n    if (!snapRenderInfo.request) {\n      if (snapRenderInfo.direction) {\n        snapInfos.push(getSnapInfosByDirection(moveable, poses, snapRenderInfo.direction, snapRenderThreshold));\n      }\n\n      if (snapRenderInfo.snap) {\n        var rect = getRect(poses);\n\n        if (snapRenderInfo.center) {\n          rect.middle = (rect.top + rect.bottom) / 2;\n          rect.center = (rect.left + rect.right) / 2;\n        }\n\n        snapInfos.push(checkSnaps(moveable, rect, snapRenderThreshold));\n      }\n\n      if (hasExternalPoses) {\n        if (snapRenderInfo.center) {\n          externalRect.middle = (externalRect.top + externalRect.bottom) / 2;\n          externalRect.center = (externalRect.left + externalRect.right) / 2;\n        }\n\n        snapInfos.push(checkSnaps(moveable, externalRect, snapRenderThreshold));\n      }\n\n      snapInfos.forEach(function (snapInfo) {\n        var verticalPosInfos = snapInfo.vertical.posInfos,\n            horizontalPosInfos = snapInfo.horizontal.posInfos;\n        verticalSnapPoses.push.apply(verticalSnapPoses, verticalPosInfos.filter(function (_a) {\n          var guidelineInfos = _a.guidelineInfos;\n          return guidelineInfos.some(function (_a) {\n            var guideline = _a.guideline;\n            return !guideline.hide;\n          });\n        }).map(function (posInfo) {\n          return {\n            type: \"snap\",\n            pos: posInfo.pos\n          };\n        }));\n        horizontalSnapPoses.push.apply(horizontalSnapPoses, horizontalPosInfos.filter(function (_a) {\n          var guidelineInfos = _a.guidelineInfos;\n          return guidelineInfos.some(function (_a) {\n            var guideline = _a.guideline;\n            return !guideline.hide;\n          });\n        }).map(function (posInfo) {\n          return {\n            type: \"snap\",\n            pos: posInfo.pos\n          };\n        }));\n        verticalGuidelines.push.apply(verticalGuidelines, getSnapGuidelines(verticalPosInfos));\n        horizontalGuidelines.push.apply(horizontalGuidelines, getSnapGuidelines(horizontalPosInfos));\n      });\n    }\n\n    addBoundGuidelines(moveable, [left, right], [top, bottom], verticalSnapPoses, horizontalSnapPoses);\n\n    if (hasExternalPoses) {\n      addBoundGuidelines(moveable, [externalRect.left, externalRect.right], [externalRect.top, externalRect.bottom], verticalSnapPoses, horizontalSnapPoses, snapRenderInfo.externalBounds);\n    }\n\n    var allGuidelines = __spreadArray(__spreadArray([], verticalGuidelines, true), horizontalGuidelines, true);\n\n    var elementGuidelines = allGuidelines.filter(function (guideline) {\n      return guideline.element && !guideline.gapRects;\n    });\n    var gapGuidelines = allGuidelines.filter(function (guideline) {\n      return guideline.gapRects;\n    }).sort(function (a, b) {\n      return a.gap - b.gap;\n    });\n    triggerEvent(moveable, \"onSnap\", {\n      guidelines: allGuidelines.filter(function (_a) {\n        var element = _a.element;\n        return !element;\n      }),\n      elements: elementGuidelines,\n      gaps: gapGuidelines\n    }, true);\n    return __spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([], renderDashedGuidelines(moveable, elementGuidelines, [minLeft, minTop], targetRect, React), true), renderGapGuidelines(moveable, gapGuidelines, [minLeft, minTop], targetRect, React), true), renderGuidelines(moveable, \"horizontal\", horizontalGuidelines, [targetLeft, targetTop], targetRect, React), true), renderGuidelines(moveable, \"vertical\", verticalGuidelines, [targetLeft, targetTop], targetRect, React), true), renderSnapPoses(moveable, \"horizontal\", horizontalSnapPoses, minLeft, targetTop, width, 0, React), true), renderSnapPoses(moveable, \"vertical\", verticalSnapPoses, minTop, targetLeft, height, 1, React), true);\n  },\n  dragStart: function (moveable, e) {\n    moveable.state.snapRenderInfo = {\n      request: e.isRequest,\n      snap: true,\n      center: true\n    };\n    checkSnapInfo(moveable);\n  },\n  drag: function (moveable) {\n    var state = moveable.state;\n\n    if (!checkSnapInfo(moveable)) {\n      state.guidelines = getTotalGuidelines(moveable);\n    }\n\n    if (state.snapRenderInfo) {\n      state.snapRenderInfo.render = true;\n    }\n  },\n  pinchStart: function (moveable) {\n    this.unset(moveable);\n  },\n  dragEnd: function (moveable) {\n    this.unset(moveable);\n  },\n  dragControlCondition: function (moveable, e) {\n    if (directionCondition$2(moveable, e) || dragControlCondition(moveable, e)) {\n      return true;\n    }\n\n    if (!e.isRequest && e.inputEvent) {\n      return hasClass(e.inputEvent.target, prefix(\"snap-control\"));\n    }\n  },\n  dragControlStart: function (moveable) {\n    moveable.state.snapRenderInfo = null;\n    checkSnapInfo(moveable);\n  },\n  dragControl: function (moveable) {\n    this.drag(moveable);\n  },\n  dragControlEnd: function (moveable) {\n    this.unset(moveable);\n  },\n  dragGroupStart: function (moveable, e) {\n    this.dragStart(moveable, e);\n  },\n  dragGroup: function (moveable) {\n    this.drag(moveable);\n  },\n  dragGroupEnd: function (moveable) {\n    this.unset(moveable);\n  },\n  dragGroupControlStart: function (moveable) {\n    moveable.state.snapRenderInfo = null;\n    checkSnapInfo(moveable);\n  },\n  dragGroupControl: function (moveable) {\n    this.drag(moveable);\n  },\n  dragGroupControlEnd: function (moveable) {\n    this.unset(moveable);\n  },\n  unset: function (moveable) {\n    var state = moveable.state;\n    state.enableSnap = false;\n    state.guidelines = [];\n    state.snapRenderInfo = null;\n    state.elementRects = [];\n  }\n};\n/**\n * Whether or not target can be snapped to the guideline. (default: false)\n * @name Moveable.Snappable#snappable\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.snappable = true;\n */\n\n/**\n *  A snap container that is the basis for snap, bounds, and innerBounds. (default: null = container)\n * @name Moveable.Snappable#snapContainer\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.querySelector(\".container\"));\n *\n * moveable.snapContainer = document.body;\n */\n\n/**\n * You can specify the directions to snap to the target. (default: { left: true, top: true, right: true, bottom: true })\n * @name Moveable.Snappable#snapDirections\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *   snappable: true,\n *   snapDirections: true,\n * });\n * // snap center\n * moveable.snapDirections = { left: true, top: true, right: true, bottom: true, center: true, middle: true };\n */\n\n/**\n * You can specify the snap directions of elements. (default: { left: true, top: true, right: true, bottom: true })\n * @name Moveable.Snappable#elementSnapDirections\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *   snappable: true,\n *   elementSnapDirections: true,\n * });\n * // snap center\n * moveable.elementSnapDirections = { left: true, top: true, right: true, bottom: true, center: true, middle: true };\n */\n\n/**\n * When you drag, make the gap snap in the element guidelines. (default: true)\n * @name Moveable.Snappable#snapGap\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *   snappable: true,\n *   snapElement: true,\n *   snapGap: true,\n * });\n *\n * moveable.snapGap = false;\n */\n\n/**\n * Distance value that can snap to guidelines. (default: 5)\n * @name Moveable.Snappable#snapThreshold\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.snapThreshold = 5;\n */\n\n/**\n * Add guidelines in the horizontal direction. (default: [])\n * @name Moveable.Snappable#horizontalGuidelines\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.horizontalGuidelines = [100, 200, 500];\n */\n\n/**\n * Add guidelines in the vertical direction. (default: [])\n * @name Moveable.Snappable#verticalGuidelines\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.verticalGuidelines = [100, 200, 500];\n */\n\n/**\n * Add guidelines for the element. (default: [])\n * @name Moveable.Snappable#elementGuidelines\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.elementGuidelines = [\n *   document.querySelector(\".element\"),\n * ];\n */\n\n/**\n * You can set up boundaries.\n * @name Moveable.Snappable#bounds\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @default null\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.bounds = { left: 0, right: 1000, top: 0, bottom: 1000};\n */\n\n/**\n * You can set up inner boundaries.\n * @name Moveable.Snappable#innerBounds\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @default null\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.innerBounds = { left: 500, top: 500, width: 100, height: 100};\n */\n\n/**\n * snap distance digits (default: 0)\n * @name Moveable.Snappable#snapDigit\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.snapDigit = 0\n */\n\n/**\n * If width size is greater than 0, you can vertical snap to the grid. (default: 0)\n * @name Moveable.Snappable#snapGridWidth\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.snapGridWidth = 5;\n */\n\n/**\n * If height size is greater than 0, you can horizontal snap to the grid. (default: 0)\n * @name Moveable.Snappable#snapGridHeight\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.snapGridHeight = 5;\n */\n\n/**\n * Whether to show snap distance (default: true)\n * @name Moveable.Snappable#isDisplaySnapDigit\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.isDisplaySnapDigit = true;\n */\n\n/**\n * Whether to show element inner snap distance (default: false)\n * @name Moveable.Snappable#isDisplayInnerSnapDigit\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.isDisplayInnerSnapDigit = true;\n */\n\n/**\n * You can set the text format of the distance shown in the guidelines. (default: self)\n * @name Moveable.Snappable#snapDistFormat\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *  snappable: true,\n *  snapDistFormat: (v, type) => v,\n * });\n * moveable.snapDistFormat = (v, type) => `${v}px`;\n */\n\n/**\n * When you drag or dragControl, the `snap` event is called.\n * @memberof Moveable.Snappable\n * @event snap\n * @param {Moveable.Snappable.OnSnap} - Parameters for the `snap` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     snappable: true\n * });\n * moveable.on(\"snap\", e => {\n *     console.log(\"onSnap\", e);\n * });\n */\n\nfunction renderDirectionControlsByInfos(moveable, ableName, renderDirections, React) {\n  var _a = moveable.getState(),\n      renderPoses = _a.renderPoses,\n      rotationRad = _a.rotation,\n      direction = _a.direction;\n\n  var zoom = getProps(moveable.props, ableName).zoom;\n  var sign = direction > 0 ? 1 : -1;\n  var degRotation = rotationRad / Math.PI * 180;\n  var directionMap = {};\n  var renderState = moveable.renderState;\n\n  if (!renderState.renderDirectionMap) {\n    renderState.renderDirectionMap = {};\n  }\n\n  var renderDirectionMap = renderState.renderDirectionMap;\n  renderDirections.forEach(function (_a) {\n    var dir = _a.dir;\n    directionMap[dir] = true;\n  });\n  return renderDirections.map(function (_a) {\n    var data = _a.data,\n        classNames = _a.classNames,\n        dir = _a.dir;\n    var indexes = DIRECTION_INDEXES[dir];\n\n    if (!indexes || !directionMap[dir]) {\n      return null;\n    }\n\n    renderDirectionMap[dir] = true;\n    var directionRotation = (throttle(degRotation, 15) + sign * DIRECTION_ROTATIONS[dir] + 720) % 180;\n    var dataAttrs = {};\n    getKeys(data).forEach(function (name) {\n      dataAttrs[\"data-\".concat(name)] = data[name];\n    });\n    return React.createElement(\"div\", __assign({\n      className: prefix.apply(void 0, __spreadArray([\"control\", \"direction\", dir, ableName], classNames, false)),\n      \"data-rotation\": directionRotation,\n      \"data-direction\": dir\n    }, dataAttrs, {\n      key: \"direction-\".concat(dir),\n      style: getControlTransform.apply(void 0, __spreadArray([rotationRad, zoom], indexes.map(function (index) {\n        return renderPoses[index];\n      }), false))\n    }));\n  });\n}\n\nfunction renderDirectionControls(moveable, defaultDirections, ableName, React) {\n  var _a = getProps(moveable.props, ableName).renderDirections,\n      directions = _a === void 0 ? defaultDirections : _a;\n\n  if (!directions) {\n    return [];\n  }\n\n  var renderDirections = directions === true ? DIRECTIONS : directions;\n  return renderDirectionControlsByInfos(moveable, ableName, renderDirections.map(function (dir) {\n    return {\n      data: {},\n      classNames: [],\n      dir: dir\n    };\n  }), React);\n}\n\nfunction renderAroundControls(moveable, React) {\n  var renderState = moveable.renderState;\n\n  if (!renderState.renderDirectionMap) {\n    renderState.renderDirectionMap = {};\n  }\n\n  var _a = moveable.getState(),\n      renderPoses = _a.renderPoses,\n      rotationRad = _a.rotation,\n      direction = _a.direction;\n\n  var renderDirectionMap = renderState.renderDirectionMap;\n  var zoom = moveable.props.zoom;\n  var sign = direction > 0 ? 1 : -1;\n  var degRotation = rotationRad / Math.PI * 180;\n  return getKeys(renderDirectionMap).map(function (dir) {\n    var indexes = DIRECTION_INDEXES[dir];\n\n    if (!indexes) {\n      return null;\n    }\n\n    var directionRotation = (throttle(degRotation, 15) + sign * DIRECTION_ROTATIONS[dir] + 720) % 180;\n    return React.createElement(\"div\", {\n      className: prefix(\"around-control\"),\n      \"data-rotation\": directionRotation,\n      \"data-direction\": dir,\n      key: \"direction-around-\".concat(dir),\n      style: getControlTransform.apply(void 0, __spreadArray([rotationRad, zoom], indexes.map(function (index) {\n        return renderPoses[index];\n      }), false))\n    });\n  });\n}\n\nfunction renderLine(React, direction, pos1, pos2, zoom, key) {\n  var classNames = [];\n\n  for (var _i = 6; _i < arguments.length; _i++) {\n    classNames[_i - 6] = arguments[_i];\n  }\n\n  var rad = getRad(pos1, pos2);\n  var rotation = direction ? throttle(rad / Math.PI * 180, 15) % 180 : -1;\n  return React.createElement(\"div\", {\n    key: \"line-\".concat(key),\n    className: prefix.apply(void 0, __spreadArray([\"line\", \"direction\", direction ? \"edge\" : \"\", direction], classNames, false)),\n    \"data-rotation\": rotation,\n    \"data-line-key\": key,\n    \"data-direction\": direction,\n    style: getLineStyle(pos1, pos2, zoom, rad)\n  });\n}\n\nfunction renderEdgeLines(React, ableName, edge, poses, zoom) {\n  var directions = edge === true ? DIRECTIONS4 : edge;\n  return directions.map(function (direction, i) {\n    var _a = DIRECTION_INDEXES[direction],\n        index1 = _a[0],\n        index2 = _a[1];\n\n    if (index2 == null) {\n      return;\n    }\n\n    return renderLine(React, direction, poses[index1], poses[index2], zoom, \"\".concat(ableName, \"Edge\").concat(i), ableName);\n  }).filter(Boolean);\n}\n\nfunction getRenderDirections(ableName) {\n  return function (moveable, React) {\n    var edge = getProps(moveable.props, ableName).edge;\n\n    if (edge && (edge === true || edge.length)) {\n      return __spreadArray(__spreadArray([], renderEdgeLines(React, ableName, edge, moveable.getState().renderPoses, moveable.props.zoom), true), renderDiagonalDirections(moveable, ableName, React), true);\n    }\n\n    return renderAllDirections(moveable, ableName, React);\n  };\n}\n\nfunction renderAllDirections(moveable, ableName, React) {\n  return renderDirectionControls(moveable, DIRECTIONS, ableName, React);\n}\n\nfunction renderDiagonalDirections(moveable, ableName, React) {\n  return renderDirectionControls(moveable, [\"nw\", \"ne\", \"sw\", \"se\"], ableName, React);\n}\n/**\n * @namespace Draggable\n * @memberof Moveable\n * @description Draggable refers to the ability to drag and move targets.\n */\n\n\nvar Draggable = {\n  name: \"draggable\",\n  props: {\n    draggable: Boolean,\n    throttleDrag: Number,\n    throttleDragRotate: Number,\n    startDragRotate: Number,\n    edgeDraggable: Boolean\n  },\n  events: {\n    onDragStart: \"dragStart\",\n    onDrag: \"drag\",\n    onDragEnd: \"dragEnd\",\n    onDragGroupStart: \"dragGroupStart\",\n    onDragGroup: \"dragGroup\",\n    onDragGroupEnd: \"dragGroupEnd\"\n  },\n  requestStyle: function () {\n    return [\"left\", \"top\", \"right\", \"bottom\"];\n  },\n  render: function (moveable, React) {\n    var _a = moveable.props,\n        throttleDragRotate = _a.throttleDragRotate,\n        zoom = _a.zoom;\n\n    var _b = moveable.getState(),\n        dragInfo = _b.dragInfo,\n        beforeOrigin = _b.beforeOrigin;\n\n    if (!throttleDragRotate || !dragInfo) {\n      return [];\n    }\n\n    var dist = dragInfo.dist;\n\n    if (!dist[0] && !dist[1]) {\n      return [];\n    }\n\n    var width = getDistSize(dist);\n    var rad = getRad(dist, [0, 0]);\n    return [React.createElement(\"div\", {\n      className: prefix(\"line\", \"horizontal\", \"dragline\", \"dashed\"),\n      key: \"dragRotateGuideline\",\n      style: {\n        width: \"\".concat(width, \"px\"),\n        transform: \"translate(\".concat(beforeOrigin[0], \"px, \").concat(beforeOrigin[1], \"px) rotate(\").concat(rad, \"rad) scaleY(\").concat(zoom, \")\")\n      }\n    })];\n  },\n  dragStart: function (moveable, e) {\n    var datas = e.datas,\n        parentEvent = e.parentEvent,\n        parentGesto = e.parentGesto;\n    var state = moveable.state;\n    var gestos = state.gestos,\n        style = state.style;\n\n    if (gestos.draggable) {\n      return false;\n    }\n\n    gestos.draggable = parentGesto || moveable.targetGesto;\n    datas.datas = {};\n    datas.left = parseFloat(style.left || \"\") || 0;\n    datas.top = parseFloat(style.top || \"\") || 0;\n    datas.bottom = parseFloat(style.bottom || \"\") || 0;\n    datas.right = parseFloat(style.right || \"\") || 0;\n    datas.startValue = [0, 0];\n    setDragStart(moveable, e);\n    setDefaultTransformIndex(e, \"translate\");\n    startCheckSnapDrag(moveable, datas);\n    datas.prevDist = [0, 0];\n    datas.prevBeforeDist = [0, 0];\n    datas.isDrag = false;\n    datas.deltaOffset = [0, 0];\n    var params = fillParams(moveable, e, __assign({\n      set: function (translate) {\n        datas.startValue = translate;\n      }\n    }, fillTransformStartEvent(e)));\n    var result = parentEvent || triggerEvent(moveable, \"onDragStart\", params);\n\n    if (result !== false) {\n      datas.isDrag = true;\n      moveable.state.dragInfo = {\n        startRect: moveable.getRect(),\n        dist: [0, 0]\n      };\n    } else {\n      gestos.draggable = null;\n      datas.isPinch = false;\n    }\n\n    return datas.isDrag ? params : false;\n  },\n  drag: function (moveable, e) {\n    if (!e) {\n      return;\n    }\n\n    resolveTransformEvent(e, \"translate\");\n    var datas = e.datas,\n        parentEvent = e.parentEvent,\n        parentFlag = e.parentFlag,\n        isPinch = e.isPinch,\n        isRequest = e.isRequest,\n        deltaOffset = e.deltaOffset;\n    var distX = e.distX,\n        distY = e.distY;\n    var isDrag = datas.isDrag,\n        prevDist = datas.prevDist,\n        prevBeforeDist = datas.prevBeforeDist,\n        startValue = datas.startValue;\n\n    if (!isDrag) {\n      return;\n    }\n\n    if (deltaOffset) {\n      distX += deltaOffset[0];\n      distY += deltaOffset[1];\n    }\n\n    var props = moveable.props;\n    var parentMoveable = props.parentMoveable;\n    var throttleDrag = parentEvent ? 0 : props.throttleDrag || 0;\n    var throttleDragRotate = parentEvent ? 0 : props.throttleDragRotate || 0;\n    var dragRotateRad = 0;\n    var isVerticalSnap = false;\n    var isVerticalBound = false;\n    var isHorizontalSnap = false;\n    var isHorizontalBound = false;\n\n    if (!parentEvent && throttleDragRotate > 0 && (distX || distY)) {\n      var startDragRotate = props.startDragRotate || 0;\n      var deg = throttle(startDragRotate + getRad([0, 0], [distX, distY]) * 180 / Math.PI, throttleDragRotate) - startDragRotate;\n      var ry = distY * Math.abs(Math.cos((deg - 90) / 180 * Math.PI));\n      var rx = distX * Math.abs(Math.cos(deg / 180 * Math.PI));\n      var r = getDistSize([rx, ry]);\n      dragRotateRad = deg * Math.PI / 180;\n      distX = r * Math.cos(dragRotateRad);\n      distY = r * Math.sin(dragRotateRad);\n    }\n\n    if (!isPinch && !parentEvent && !parentFlag) {\n      var _a = checkSnapBoundsDrag(moveable, distX, distY, throttleDragRotate, isRequest || deltaOffset, datas),\n          verticalInfo = _a[0],\n          horizontalInfo = _a[1];\n\n      isVerticalSnap = verticalInfo.isSnap;\n      isVerticalBound = verticalInfo.isBound;\n      isHorizontalSnap = horizontalInfo.isSnap;\n      isHorizontalBound = horizontalInfo.isBound;\n      var verticalOffset = verticalInfo.offset;\n      var horizontalOffset = horizontalInfo.offset;\n      distX += verticalOffset;\n      distY += horizontalOffset;\n    }\n\n    var beforeTranslate = plus(getBeforeDragDist({\n      datas: datas,\n      distX: distX,\n      distY: distY\n    }), startValue);\n    var translate = plus(getTransformDist({\n      datas: datas,\n      distX: distX,\n      distY: distY\n    }), startValue);\n    throttleArray(translate, TINY_NUM);\n    throttleArray(beforeTranslate, TINY_NUM);\n\n    if (!throttleDragRotate) {\n      if (!isVerticalSnap && !isVerticalBound) {\n        translate[0] = throttle(translate[0], throttleDrag);\n        beforeTranslate[0] = throttle(beforeTranslate[0], throttleDrag);\n      }\n\n      if (!isHorizontalSnap && !isHorizontalBound) {\n        translate[1] = throttle(translate[1], throttleDrag);\n        beforeTranslate[1] = throttle(beforeTranslate[1], throttleDrag);\n      }\n    }\n\n    var beforeDist = minus(beforeTranslate, startValue);\n    var dist = minus(translate, startValue);\n    var delta = minus(dist, prevDist);\n    var beforeDelta = minus(beforeDist, prevBeforeDist);\n    datas.prevDist = dist;\n    datas.prevBeforeDist = beforeDist;\n    datas.passDelta = delta; //distX - (datas.passDistX || 0);\n    // datas.passDeltaY = distY - (datas.passDistY || 0);\n\n    datas.passDist = dist; //distX;\n    // datas.passDistY = distY;\n\n    var left = datas.left + beforeDist[0];\n    var top = datas.top + beforeDist[1];\n    var right = datas.right - beforeDist[0];\n    var bottom = datas.bottom - beforeDist[1];\n    var nextTransform = convertTransformFormat(datas, \"translate(\".concat(translate[0], \"px, \").concat(translate[1], \"px)\"), \"translate(\".concat(dist[0], \"px, \").concat(dist[1], \"px)\"));\n    fillOriginalTransform(e, nextTransform);\n    moveable.state.dragInfo.dist = parentEvent ? [0, 0] : dist;\n\n    if (!parentEvent && !parentMoveable && delta.every(function (num) {\n      return !num;\n    }) && beforeDelta.some(function (num) {\n      return !num;\n    })) {\n      return;\n    }\n\n    var _b = moveable.state,\n        width = _b.width,\n        height = _b.height;\n    var params = fillParams(moveable, e, __assign({\n      transform: nextTransform,\n      dist: dist,\n      delta: delta,\n      translate: translate,\n      beforeDist: beforeDist,\n      beforeDelta: beforeDelta,\n      beforeTranslate: beforeTranslate,\n      left: left,\n      top: top,\n      right: right,\n      bottom: bottom,\n      width: width,\n      height: height,\n      isPinch: isPinch\n    }, fillCSSObject({\n      transform: nextTransform\n    }, e)));\n    !parentEvent && triggerEvent(moveable, \"onDrag\", params);\n    return params;\n  },\n  dragAfter: function (moveable, e) {\n    var datas = e.datas;\n    var deltaOffset = datas.deltaOffset;\n\n    if (deltaOffset[0] || deltaOffset[1]) {\n      datas.deltaOffset = [0, 0];\n      return this.drag(moveable, __assign(__assign({}, e), {\n        deltaOffset: deltaOffset\n      }));\n    }\n\n    return false;\n  },\n  dragEnd: function (moveable, e) {\n    var parentEvent = e.parentEvent,\n        datas = e.datas;\n    moveable.state.dragInfo = null;\n\n    if (!datas.isDrag) {\n      return;\n    }\n\n    datas.isDrag = false;\n    var param = fillEndParams(moveable, e, {});\n    !parentEvent && triggerEvent(moveable, \"onDragEnd\", param);\n    return param;\n  },\n  dragGroupStart: function (moveable, e) {\n    var datas = e.datas,\n        clientX = e.clientX,\n        clientY = e.clientY;\n    var params = this.dragStart(moveable, e);\n\n    if (!params) {\n      return false;\n    }\n\n    var events = triggerChildGesto(moveable, this, \"dragStart\", [clientX || 0, clientY || 0], e, false, \"draggable\");\n\n    var nextParams = __assign(__assign({}, params), {\n      targets: moveable.props.targets,\n      events: events\n    });\n\n    var result = triggerEvent(moveable, \"onDragGroupStart\", nextParams);\n    datas.isDrag = result !== false;\n    return datas.isDrag ? params : false;\n  },\n  dragGroup: function (moveable, e) {\n    var datas = e.datas;\n\n    if (!datas.isDrag) {\n      return;\n    }\n\n    var params = this.drag(moveable, e);\n    var passDelta = e.datas.passDelta;\n    var events = triggerChildGesto(moveable, this, \"drag\", passDelta, e, false, \"draggable\");\n\n    if (!params) {\n      return;\n    }\n\n    var nextParams = __assign({\n      targets: moveable.props.targets,\n      events: events\n    }, params);\n\n    triggerEvent(moveable, \"onDragGroup\", nextParams);\n    return nextParams;\n  },\n  dragGroupEnd: function (moveable, e) {\n    var isDrag = e.isDrag,\n        datas = e.datas;\n\n    if (!datas.isDrag) {\n      return;\n    }\n\n    this.dragEnd(moveable, e);\n    var events = triggerChildGesto(moveable, this, \"dragEnd\", [0, 0], e, false, \"draggable\");\n    triggerEvent(moveable, \"onDragGroupEnd\", fillEndParams(moveable, e, {\n      targets: moveable.props.targets,\n      events: events\n    }));\n    return isDrag;\n  },\n\n  /**\n   * @method Moveable.Draggable#request\n   * @param {object} [e] - the draggable's request parameter\n   * @param {number} [e.x] - x position\n   * @param {number} [e.y] - y position\n   * @param {number} [e.deltaX] - X number to move\n   * @param {number} [e.deltaY] - Y number to move\n   * @return {Moveable.Requester} Moveable Requester\n   * @example\n    * // Instantly Request (requestStart - request - requestEnd)\n   * // Use Relative Value\n   * moveable.request(\"draggable\", { deltaX: 10, deltaY: 10 }, true);\n   * // Use Absolute Value\n   * moveable.request(\"draggable\", { x: 200, y: 100 }, true);\n   *\n   * // requestStart\n   * const requester = moveable.request(\"draggable\");\n   *\n   * // request\n   * // Use Relative Value\n   * requester.request({ deltaX: 10, deltaY: 10 });\n   * requester.request({ deltaX: 10, deltaY: 10 });\n   * requester.request({ deltaX: 10, deltaY: 10 });\n   * // Use Absolute Value\n   * moveable.request(\"draggable\", { x: 200, y: 100 });\n   * moveable.request(\"draggable\", { x: 220, y: 100 });\n   * moveable.request(\"draggable\", { x: 240, y: 100 });\n   *\n   * // requestEnd\n   * requester.requestEnd();\n   */\n  request: function (moveable) {\n    var datas = {};\n    var rect = moveable.getRect();\n    var distX = 0;\n    var distY = 0;\n    return {\n      isControl: false,\n      requestStart: function () {\n        return {\n          datas: datas\n        };\n      },\n      request: function (e) {\n        if (\"x\" in e) {\n          distX = e.x - rect.left;\n        } else if (\"deltaX\" in e) {\n          distX += e.deltaX;\n        }\n\n        if (\"y\" in e) {\n          distY = e.y - rect.top;\n        } else if (\"deltaY\" in e) {\n          distY += e.deltaY;\n        }\n\n        return {\n          datas: datas,\n          distX: distX,\n          distY: distY\n        };\n      },\n      requestEnd: function () {\n        return {\n          datas: datas,\n          isDrag: true\n        };\n      }\n    };\n  },\n  unset: function (moveable) {\n    moveable.state.gestos.draggable = null;\n    moveable.state.dragInfo = null;\n  }\n};\n/**\n * Whether or not target can be dragged. (default: false)\n * @name Moveable.Draggable#draggable\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.draggable = true;\n */\n\n/**\n * throttle of x, y when drag.\n * @name Moveable.Draggable#throttleDrag\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.throttleDrag = 1;\n */\n\n/**\n* throttle of angle of x, y when drag.\n* @name Moveable.Draggable#throttleDragRotate\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body);\n*\n* moveable.throttleDragRotate = 45;\n*/\n\n/**\n* start angle of throttleDragRotate of x, y when drag.\n* @name Moveable.Draggable#startDragRotate\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body);\n*\n* // 45, 135, 225, 315\n* moveable.throttleDragRotate = 90;\n* moveable.startDragRotate = 45;\n*/\n\n/**\n * When the drag starts, the dragStart event is called.\n * @memberof Moveable.Draggable\n * @event dragStart\n * @param {Moveable.Draggable.OnDragStart} - Parameters for the dragStart event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { draggable: true });\n * moveable.on(\"dragStart\", ({ target }) => {\n *     console.log(target);\n * });\n */\n\n/**\n * When dragging, the drag event is called.\n * @memberof Moveable.Draggable\n * @event drag\n * @param {Moveable.Draggable.OnDrag} - Parameters for the drag event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { draggable: true });\n * moveable.on(\"drag\", ({ target, transform }) => {\n *     target.style.transform = transform;\n * });\n */\n\n/**\n * When the drag finishes, the dragEnd event is called.\n * @memberof Moveable.Draggable\n * @event dragEnd\n * @param {Moveable.Draggable.OnDragEnd} - Parameters for the dragEnd event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { draggable: true });\n * moveable.on(\"dragEnd\", ({ target, isDrag }) => {\n *     console.log(target, isDrag);\n * });\n */\n\n/**\n* When the group drag starts, the `dragGroupStart` event is called.\n* @memberof Moveable.Draggable\n* @event dragGroupStart\n* @param {Moveable.Draggable.OnDragGroupStart} - Parameters for the `dragGroupStart` event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\n*     draggable: true\n* });\n* moveable.on(\"dragGroupStart\", ({ targets }) => {\n*     console.log(\"onDragGroupStart\", targets);\n* });\n*/\n\n/**\n* When the group drag, the `dragGroup` event is called.\n* @memberof Moveable.Draggable\n* @event dragGroup\n* @param {Moveable.Draggable.OnDragGroup} - Parameters for the `dragGroup` event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\n*     draggable: true\n* });\n* moveable.on(\"dragGroup\", ({ targets, events }) => {\n*     console.log(\"onDragGroup\", targets);\n*     events.forEach(ev => {\n*          // drag event\n*          console.log(\"onDrag left, top\", ev.left, ev.top);\n*          // ev.target!.style.left = `${ev.left}px`;\n*          // ev.target!.style.top = `${ev.top}px`;\n*          console.log(\"onDrag translate\", ev.dist);\n*          ev.target!.style.transform = ev.transform;)\n*     });\n* });\n*/\n\n/**\n * When the group drag finishes, the `dragGroupEnd` event is called.\n * @memberof Moveable.Draggable\n * @event dragGroupEnd\n * @param {Moveable.Draggable.OnDragGroupEnd} - Parameters for the `dragGroupEnd` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n *     draggable: true\n * });\n * moveable.on(\"dragGroupEnd\", ({ targets, isDrag }) => {\n *     console.log(\"onDragGroupEnd\", targets, isDrag);\n * });\n */\n\n/**\n * @namespace Resizable\n * @memberof Moveable\n * @description Resizable indicates whether the target's width and height can be increased or decreased.\n */\n\nvar directionCondition$1 = getDirectionCondition(\"resizable\");\nvar Resizable = {\n  name: \"resizable\",\n  ableGroup: \"size\",\n  canPinch: true,\n  props: {\n    resizable: Boolean,\n    throttleResize: Number,\n    renderDirections: Array,\n    keepRatio: Boolean,\n    resizeFormat: Function,\n    keepRatioFinally: Boolean,\n    edge: Boolean,\n    checkResizableError: Boolean\n  },\n  events: {\n    onResizeStart: \"resizeStart\",\n    onBeforeResize: \"beforeResize\",\n    onResize: \"resize\",\n    onResizeEnd: \"resizeEnd\",\n    onResizeGroupStart: \"resizeGroupStart\",\n    onBeforeResizeGroup: \"beforeResizeGroup\",\n    onResizeGroup: \"resizeGroup\",\n    onResizeGroupEnd: \"resizeGroupEnd\"\n  },\n  render: getRenderDirections(\"resizable\"),\n  dragControlCondition: directionCondition$1,\n  viewClassName: getDirectionViewClassName(\"resizable\"),\n  dragControlStart: function (moveable, e) {\n    var _a;\n\n    var inputEvent = e.inputEvent,\n        isPinch = e.isPinch,\n        isGroup = e.isGroup,\n        parentDirection = e.parentDirection,\n        parentGesto = e.parentGesto,\n        datas = e.datas,\n        parentFixedDirection = e.parentFixedDirection,\n        parentEvent = e.parentEvent;\n    var direction = getTotalDirection(parentDirection, isPinch, inputEvent, datas);\n    var state = moveable.state;\n    var target = state.target,\n        width = state.width,\n        height = state.height,\n        gestos = state.gestos;\n\n    if (!direction || !target) {\n      return false;\n    }\n\n    if (gestos.resizable) {\n      return false;\n    }\n\n    gestos.resizable = parentGesto || moveable.controlGesto;\n    !isPinch && setDragStart(moveable, e);\n    datas.datas = {};\n    datas.direction = direction;\n    datas.startOffsetWidth = width;\n    datas.startOffsetHeight = height;\n    datas.prevWidth = 0;\n    datas.prevHeight = 0;\n    datas.minSize = [0, 0];\n    datas.startWidth = state.inlineCSSWidth || state.cssWidth;\n    datas.startHeight = state.inlineCSSHeight || state.cssHeight;\n    datas.maxSize = [Infinity, Infinity];\n\n    if (!isGroup) {\n      datas.minSize = [state.minOffsetWidth, state.minOffsetHeight];\n      datas.maxSize = [state.maxOffsetWidth, state.maxOffsetHeight];\n    }\n\n    var transformOrigin = moveable.props.transformOrigin || \"% %\";\n    datas.transformOrigin = transformOrigin && isString(transformOrigin) ? transformOrigin.split(\" \") : transformOrigin;\n    datas.startOffsetMatrix = state.offsetMatrix;\n    datas.startTransformOrigin = state.transformOrigin;\n    datas.isWidth = (_a = e === null || e === void 0 ? void 0 : e.parentIsWidth) !== null && _a !== void 0 ? _a : !direction[0] && !direction[1] || direction[0] || !direction[1];\n\n    function setRatio(ratio) {\n      datas.ratio = ratio && isFinite(ratio) ? ratio : 0;\n    }\n\n    datas.startPositions = getAbsolutePosesByState(moveable.state);\n\n    function setFixedDirection(fixedDirection) {\n      datas.fixedDirection = fixedDirection;\n      datas.fixedPosition = getPosByDirection(datas.startPositions, fixedDirection);\n    }\n\n    function setFixedPosition(fixedPosition) {\n      var _a = moveable.state,\n          width = _a.width,\n          height = _a.height;\n      datas.fixedPosition = fixedPosition;\n      datas.fixedDirection = getDirectionByPos(fixedPosition, width, height);\n    }\n\n    function setMin(minSize) {\n      datas.minSize = [convertUnitSize(\"\".concat(minSize[0]), 0) || 0, convertUnitSize(\"\".concat(minSize[1]), 0) || 0];\n    }\n\n    function setMax(maxSize) {\n      var nextMaxSize = [maxSize[0] || Infinity, maxSize[1] || Infinity];\n\n      if (!isNumber(nextMaxSize[0]) || isFinite(nextMaxSize[0])) {\n        nextMaxSize[0] = convertUnitSize(\"\".concat(nextMaxSize[0]), 0) || Infinity;\n      }\n\n      if (!isNumber(nextMaxSize[1]) || isFinite(nextMaxSize[1])) {\n        nextMaxSize[1] = convertUnitSize(\"\".concat(nextMaxSize[1]), 0) || Infinity;\n      }\n\n      datas.maxSize = nextMaxSize;\n    }\n\n    setRatio(width / height);\n    setFixedDirection(parentFixedDirection || [-direction[0], -direction[1]]);\n    datas.setFixedDirection = setFixedDirection;\n    datas.setFixedPosition = setFixedPosition;\n    datas.setMin = setMin;\n    datas.setMax = setMax;\n    var params = fillParams(moveable, e, {\n      direction: direction,\n      startRatio: datas.ratio,\n      set: function (_a) {\n        var startWidth = _a[0],\n            startHeight = _a[1];\n        datas.startWidth = startWidth;\n        datas.startHeight = startHeight;\n      },\n      setMin: setMin,\n      setMax: setMax,\n      setRatio: setRatio,\n      setFixedDirection: setFixedDirection,\n      setFixedPosition: setFixedPosition,\n      setOrigin: function (origin) {\n        datas.transformOrigin = origin;\n      },\n      dragStart: Draggable.dragStart(moveable, new CustomGesto().dragStart([0, 0], e))\n    });\n    var result = parentEvent || triggerEvent(moveable, \"onResizeStart\", params);\n    datas.startFixedDirection = datas.fixedDirection;\n    datas.startFixedPosition = datas.fixedPosition;\n\n    if (result !== false) {\n      datas.isResize = true;\n      moveable.state.snapRenderInfo = {\n        request: e.isRequest,\n        direction: direction\n      };\n    }\n\n    return datas.isResize ? params : false;\n  },\n  dragControl: function (moveable, e) {\n    var _a;\n\n    var datas = e.datas,\n        parentFlag = e.parentFlag,\n        isPinch = e.isPinch,\n        parentKeepRatio = e.parentKeepRatio,\n        dragClient = e.dragClient,\n        parentDist = e.parentDist,\n        isRequest = e.isRequest,\n        isGroup = e.isGroup,\n        parentEvent = e.parentEvent,\n        resolveMatrix = e.resolveMatrix;\n    var isResize = datas.isResize,\n        transformOrigin = datas.transformOrigin,\n        startWidth = datas.startWidth,\n        startHeight = datas.startHeight,\n        prevWidth = datas.prevWidth,\n        prevHeight = datas.prevHeight,\n        minSize = datas.minSize,\n        maxSize = datas.maxSize,\n        ratio = datas.ratio,\n        startOffsetWidth = datas.startOffsetWidth,\n        startOffsetHeight = datas.startOffsetHeight,\n        isWidth = datas.isWidth;\n\n    if (!isResize) {\n      return;\n    }\n\n    if (resolveMatrix) {\n      var is3d = moveable.state.is3d;\n      var startOffsetMatrix = datas.startOffsetMatrix,\n          startTransformOrigin = datas.startTransformOrigin;\n      var n = is3d ? 4 : 3;\n      var targetMatrix = parseMat(getNextTransforms(e));\n      var targetN = Math.sqrt(targetMatrix.length);\n\n      if (n !== targetN) {\n        targetMatrix = convertDimension(targetMatrix, targetN, n);\n      }\n\n      var nextAllMatrix = getNextMatrix(startOffsetMatrix, targetMatrix, startTransformOrigin, n);\n      var poses = calculatePoses(nextAllMatrix, startOffsetWidth, startOffsetHeight, n);\n      datas.startPositions = poses;\n      datas.nextTargetMatrix = targetMatrix;\n      datas.nextAllMatrix = nextAllMatrix;\n    }\n\n    var props = getProps(moveable.props, \"resizable\");\n    var resizeFormat = props.resizeFormat,\n        _b = props.throttleResize,\n        throttleResize = _b === void 0 ? parentFlag ? 0 : 1 : _b,\n        parentMoveable = props.parentMoveable,\n        keepRatioFinally = props.keepRatioFinally;\n    var direction = datas.direction;\n    var sizeDirection = direction;\n    var distWidth = 0;\n    var distHeight = 0;\n\n    if (!direction[0] && !direction[1]) {\n      sizeDirection = [1, 1];\n    }\n\n    var keepRatio = ratio && (parentKeepRatio != null ? parentKeepRatio : props.keepRatio) || false;\n\n    function getNextBoundingSize() {\n      var fixedDirection = datas.fixedDirection;\n      var nextSize = getOffsetSizeDist(sizeDirection, keepRatio, datas, e);\n      distWidth = nextSize.distWidth;\n      distHeight = nextSize.distHeight;\n      var nextWidth = sizeDirection[0] - fixedDirection[0] || keepRatio ? Math.max(startOffsetWidth + distWidth, TINY_NUM) : startOffsetWidth;\n      var nextHeight = sizeDirection[1] - fixedDirection[1] || keepRatio ? Math.max(startOffsetHeight + distHeight, TINY_NUM) : startOffsetHeight;\n\n      if (keepRatio && startOffsetWidth && startOffsetHeight) {\n        // startOffsetWidth : startOffsetHeight = nextWidth : nextHeight\n        if (isWidth) {\n          nextHeight = nextWidth / ratio;\n        } else {\n          nextWidth = nextHeight * ratio;\n        }\n      }\n\n      return [nextWidth, nextHeight];\n    }\n\n    var _c = getNextBoundingSize(),\n        boundingWidth = _c[0],\n        boundingHeight = _c[1];\n\n    if (!parentEvent) {\n      datas.setFixedDirection(datas.fixedDirection);\n      triggerEvent(moveable, \"onBeforeResize\", fillParams(moveable, e, {\n        startFixedDirection: datas.startFixedDirection,\n        startFixedPosition: datas.startFixedPosition,\n        setFixedDirection: function (nextFixedDirection) {\n          var _a;\n\n          datas.setFixedDirection(nextFixedDirection);\n          _a = getNextBoundingSize(), boundingWidth = _a[0], boundingHeight = _a[1];\n          return [boundingWidth, boundingHeight];\n        },\n        setFixedPosition: function (nextFixedPosition) {\n          var _a;\n\n          datas.setFixedPosition(nextFixedPosition);\n          _a = getNextBoundingSize(), boundingWidth = _a[0], boundingHeight = _a[1];\n          return [boundingWidth, boundingHeight];\n        },\n        boundingWidth: boundingWidth,\n        boundingHeight: boundingHeight,\n        setSize: function (size) {\n          boundingWidth = size[0], boundingHeight = size[1];\n        }\n      }, true));\n    }\n\n    var fixedPosition = dragClient;\n\n    if (!dragClient) {\n      if (!parentFlag && isPinch) {\n        fixedPosition = getAbsolutePosition(moveable, [0, 0]);\n      } else {\n        fixedPosition = datas.fixedPosition;\n      }\n    }\n\n    var snapDist = [0, 0];\n\n    if (!isPinch) {\n      snapDist = checkSnapResize(moveable, boundingWidth, boundingHeight, direction, fixedPosition, isRequest, datas);\n    }\n\n    if (parentDist) {\n      !parentDist[0] && (snapDist[0] = 0);\n      !parentDist[1] && (snapDist[1] = 0);\n    }\n\n    function computeSize() {\n      var _a;\n\n      if (resizeFormat) {\n        _a = resizeFormat([boundingWidth, boundingHeight]), boundingWidth = _a[0], boundingHeight = _a[1];\n      }\n\n      boundingWidth = throttle(boundingWidth, throttleResize);\n      boundingHeight = throttle(boundingHeight, throttleResize);\n    }\n\n    if (keepRatio) {\n      if (sizeDirection[0] && sizeDirection[1] && snapDist[0] && snapDist[1]) {\n        if (Math.abs(snapDist[0]) > Math.abs(snapDist[1])) {\n          snapDist[1] = 0;\n        } else {\n          snapDist[0] = 0;\n        }\n      }\n\n      var isNoSnap = !snapDist[0] && !snapDist[1];\n\n      if (isNoSnap) {\n        // pre-compute before maintaining the ratio\n        computeSize();\n      }\n\n      if (sizeDirection[0] && !sizeDirection[1] || snapDist[0] && !snapDist[1] || isNoSnap && isWidth) {\n        boundingWidth += snapDist[0];\n        boundingHeight = boundingWidth / ratio;\n      } else if (!sizeDirection[0] && sizeDirection[1] || !snapDist[0] && snapDist[1] || isNoSnap && !isWidth) {\n        boundingHeight += snapDist[1];\n        boundingWidth = boundingHeight * ratio;\n      }\n    } else {\n      boundingWidth += snapDist[0];\n      boundingHeight += snapDist[1];\n      boundingWidth = Math.max(0, boundingWidth);\n      boundingHeight = Math.max(0, boundingHeight);\n    }\n\n    _a = calculateBoundSize([boundingWidth, boundingHeight], minSize, maxSize, keepRatio ? ratio : false), boundingWidth = _a[0], boundingHeight = _a[1];\n    computeSize();\n\n    if (keepRatio && (isGroup || keepRatioFinally)) {\n      if (isWidth) {\n        boundingHeight = boundingWidth / ratio;\n      } else {\n        boundingWidth = boundingHeight * ratio;\n      }\n    }\n\n    distWidth = boundingWidth - startOffsetWidth;\n    distHeight = boundingHeight - startOffsetHeight;\n    var delta = [distWidth - prevWidth, distHeight - prevHeight];\n    datas.prevWidth = distWidth;\n    datas.prevHeight = distHeight;\n    var inverseDelta = getResizeDist(moveable, boundingWidth, boundingHeight, fixedPosition, transformOrigin, datas);\n\n    if (!parentMoveable && delta.every(function (num) {\n      return !num;\n    }) && inverseDelta.every(function (num) {\n      return !num;\n    })) {\n      return;\n    }\n\n    var drag = Draggable.drag(moveable, setCustomDrag(e, moveable.state, inverseDelta, !!isPinch, false, \"draggable\"));\n    var transform = drag.transform;\n    var nextWidth = startWidth + distWidth;\n    var nextHeight = startHeight + distHeight;\n    var params = fillParams(moveable, e, __assign({\n      width: nextWidth,\n      height: nextHeight,\n      offsetWidth: Math.round(boundingWidth),\n      offsetHeight: Math.round(boundingHeight),\n      startRatio: ratio,\n      boundingWidth: boundingWidth,\n      boundingHeight: boundingHeight,\n      direction: direction,\n      dist: [distWidth, distHeight],\n      delta: delta,\n      isPinch: !!isPinch,\n      drag: drag\n    }, fillAfterTransform({\n      style: {\n        width: \"\".concat(nextWidth, \"px\"),\n        height: \"\".concat(nextHeight, \"px\")\n      },\n      transform: transform\n    }, drag, e)));\n    !parentEvent && triggerEvent(moveable, \"onResize\", params);\n    return params;\n  },\n  dragControlAfter: function (moveable, e) {\n    var datas = e.datas;\n    var isResize = datas.isResize,\n        startOffsetWidth = datas.startOffsetWidth,\n        startOffsetHeight = datas.startOffsetHeight,\n        prevWidth = datas.prevWidth,\n        prevHeight = datas.prevHeight;\n\n    if (!isResize || moveable.props.checkResizableError === false) {\n      return;\n    }\n\n    var _a = moveable.state,\n        width = _a.width,\n        height = _a.height;\n    var errorWidth = width - (startOffsetWidth + prevWidth);\n    var errorHeight = height - (startOffsetHeight + prevHeight);\n    var isErrorWidth = Math.abs(errorWidth) > 3;\n    var isErrorHeight = Math.abs(errorHeight) > 3;\n\n    if (isErrorWidth) {\n      datas.startWidth += errorWidth;\n      datas.startOffsetWidth += errorWidth;\n      datas.prevWidth += errorWidth;\n    }\n\n    if (isErrorHeight) {\n      datas.startHeight += errorHeight;\n      datas.startOffsetHeight += errorHeight;\n      datas.prevHeight += errorHeight;\n    }\n\n    if (isErrorWidth || isErrorHeight) {\n      return this.dragControl(moveable, e);\n    }\n  },\n  dragControlEnd: function (moveable, e) {\n    var datas = e.datas,\n        parentEvent = e.parentEvent;\n\n    if (!datas.isResize) {\n      return;\n    }\n\n    datas.isResize = false;\n    var params = fillEndParams(moveable, e, {});\n    !parentEvent && triggerEvent(moveable, \"onResizeEnd\", params);\n    return params;\n  },\n  dragGroupControlCondition: directionCondition$1,\n  dragGroupControlStart: function (moveable, e) {\n    var datas = e.datas;\n    var params = this.dragControlStart(moveable, __assign(__assign({}, e), {\n      isGroup: true\n    }));\n\n    if (!params) {\n      return false;\n    }\n\n    var originalEvents = fillChildEvents(moveable, \"resizable\", e);\n\n    function setDist(child, ev) {\n      var fixedDirection = datas.fixedDirection;\n      var fixedPosition = datas.fixedPosition;\n      var startPositions = ev.datas.startPositions || getAbsolutePosesByState(child.state);\n      var pos = getPosByDirection(startPositions, fixedDirection);\n\n      var _a = calculate(createRotateMatrix(-moveable.rotation / 180 * Math.PI, 3), [pos[0] - fixedPosition[0], pos[1] - fixedPosition[1], 1], 3),\n          originalX = _a[0],\n          originalY = _a[1];\n\n      ev.datas.originalX = originalX;\n      ev.datas.originalY = originalY;\n      return ev;\n    }\n\n    var parentStartOffsetWidth = datas.startOffsetWidth,\n        parentStartOffsetHeight = datas.startOffsetHeight;\n\n    function updateGroupMin() {\n      var originalMinSize = datas.minSize;\n      originalEvents.forEach(function (ev) {\n        var _a = ev.datas,\n            childMinSize = _a.minSize,\n            childStartOffsetWidth = _a.startOffsetWidth,\n            childStartOffsetHeight = _a.startOffsetHeight;\n        var parentMinWidth = parentStartOffsetWidth * (childStartOffsetWidth ? childMinSize[0] / childStartOffsetWidth : 0);\n        var parentMinHeight = parentStartOffsetHeight * (childStartOffsetHeight ? childMinSize[1] / childStartOffsetHeight : 0);\n        originalMinSize[0] = Math.max(originalMinSize[0], parentMinWidth);\n        originalMinSize[1] = Math.max(originalMinSize[1], parentMinHeight);\n      });\n    }\n\n    function updateGroupMax() {\n      var originalMaxSize = datas.maxSize;\n      originalEvents.forEach(function (ev) {\n        var _a = ev.datas,\n            childMaxSize = _a.maxSize,\n            childStartOffsetWidth = _a.startOffsetWidth,\n            childStartOffsetHeight = _a.startOffsetHeight;\n        var parentMaxWidth = parentStartOffsetWidth * (childStartOffsetWidth ? childMaxSize[0] / childStartOffsetWidth : 0);\n        var parentMaxHeight = parentStartOffsetHeight * (childStartOffsetHeight ? childMaxSize[1] / childStartOffsetHeight : 0);\n        originalMaxSize[0] = Math.min(originalMaxSize[0], parentMaxWidth);\n        originalMaxSize[1] = Math.min(originalMaxSize[1], parentMaxHeight);\n      });\n    }\n\n    var events = triggerChildAbles(moveable, this, \"dragControlStart\", e, function (child, ev) {\n      return setDist(child, ev);\n    });\n    updateGroupMin();\n    updateGroupMax();\n\n    var setFixedDirection = function (fixedDirection) {\n      params.setFixedDirection(fixedDirection);\n      events.forEach(function (ev, i) {\n        ev.setFixedDirection(fixedDirection);\n        setDist(ev.moveable, originalEvents[i]);\n      });\n    };\n\n    datas.setFixedDirection = setFixedDirection;\n\n    var nextParams = __assign(__assign({}, params), {\n      targets: moveable.props.targets,\n      events: events.map(function (ev) {\n        return __assign(__assign({}, ev), {\n          setMin: function (minSize) {\n            ev.setMin(minSize);\n            updateGroupMin();\n          },\n          setMax: function (maxSize) {\n            ev.setMax(maxSize);\n            updateGroupMax();\n          }\n        });\n      }),\n      setFixedDirection: setFixedDirection,\n      setMin: function (minSize) {\n        params.setMin(minSize);\n        updateGroupMin();\n      },\n      setMax: function (maxSize) {\n        params.setMax(maxSize);\n        updateGroupMax();\n      }\n    });\n\n    var result = triggerEvent(moveable, \"onResizeGroupStart\", nextParams);\n    datas.isResize = result !== false;\n    return datas.isResize ? params : false;\n  },\n  dragGroupControl: function (moveable, e) {\n    var datas = e.datas;\n\n    if (!datas.isResize) {\n      return;\n    }\n\n    var props = getProps(moveable.props, \"resizable\");\n    catchEvent(moveable, \"onBeforeResize\", function (parentEvent) {\n      triggerEvent(moveable, \"onBeforeResizeGroup\", fillParams(moveable, e, __assign(__assign({}, parentEvent), {\n        targets: props.targets\n      }), true));\n    });\n    var params = this.dragControl(moveable, __assign(__assign({}, e), {\n      isGroup: true\n    }));\n\n    if (!params) {\n      return;\n    }\n\n    var boundingWidth = params.boundingWidth,\n        boundingHeight = params.boundingHeight,\n        dist = params.dist;\n    var keepRatio = props.keepRatio;\n    var parentScale = [boundingWidth / (boundingWidth - dist[0]), boundingHeight / (boundingHeight - dist[1])];\n    var fixedPosition = datas.fixedPosition;\n    var events = triggerChildAbles(moveable, this, \"dragControl\", e, function (_, ev) {\n      var _a = calculate(createRotateMatrix(moveable.rotation / 180 * Math.PI, 3), [ev.datas.originalX * parentScale[0], ev.datas.originalY * parentScale[1], 1], 3),\n          clientX = _a[0],\n          clientY = _a[1];\n\n      return __assign(__assign({}, ev), {\n        parentDist: null,\n        parentScale: parentScale,\n        dragClient: plus(fixedPosition, [clientX, clientY]),\n        parentKeepRatio: keepRatio\n      });\n    });\n\n    var nextParams = __assign({\n      targets: props.targets,\n      events: events\n    }, params);\n\n    triggerEvent(moveable, \"onResizeGroup\", nextParams);\n    return nextParams;\n  },\n  dragGroupControlEnd: function (moveable, e) {\n    var isDrag = e.isDrag,\n        datas = e.datas;\n\n    if (!datas.isResize) {\n      return;\n    }\n\n    this.dragControlEnd(moveable, e);\n    var events = triggerChildAbles(moveable, this, \"dragControlEnd\", e);\n    var nextParams = fillEndParams(moveable, e, {\n      targets: moveable.props.targets,\n      events: events\n    });\n    triggerEvent(moveable, \"onResizeGroupEnd\", nextParams);\n    return isDrag;\n  },\n\n  /**\n   * @method Moveable.Resizable#request\n   * @param {Moveable.Resizable.ResizableRequestParam} e - the Resizable's request parameter\n   * @return {Moveable.Requester} Moveable Requester\n   * @example\n    * // Instantly Request (requestStart - request - requestEnd)\n   * // Use Relative Value\n   * moveable.request(\"resizable\", { deltaWidth: 10, deltaHeight: 10 }, true);\n   *\n   * // Use Absolute Value\n   * moveable.request(\"resizable\", { offsetWidth: 100, offsetHeight: 100 }, true);\n   *\n   * // requestStart\n   * const requester = moveable.request(\"resizable\");\n   *\n   * // request\n   * // Use Relative Value\n   * requester.request({ deltaWidth: 10, deltaHeight: 10 });\n   * requester.request({ deltaWidth: 10, deltaHeight: 10 });\n   * requester.request({ deltaWidth: 10, deltaHeight: 10 });\n   *\n   * // Use Absolute Value\n   * moveable.request(\"resizable\", { offsetWidth: 100, offsetHeight: 100 });\n   * moveable.request(\"resizable\", { offsetWidth: 110, offsetHeight: 100 });\n   * moveable.request(\"resizable\", { offsetWidth: 120, offsetHeight: 100 });\n   *\n   * // requestEnd\n   * requester.requestEnd();\n   */\n  request: function (moveable) {\n    var datas = {};\n    var distWidth = 0;\n    var distHeight = 0;\n    var rect = moveable.getRect();\n    return {\n      isControl: true,\n      requestStart: function (e) {\n        var _a;\n\n        return {\n          datas: datas,\n          parentDirection: e.direction || [1, 1],\n          parentIsWidth: (_a = e === null || e === void 0 ? void 0 : e.horizontal) !== null && _a !== void 0 ? _a : true\n        };\n      },\n      request: function (e) {\n        if (\"offsetWidth\" in e) {\n          distWidth = e.offsetWidth - rect.offsetWidth;\n        } else if (\"deltaWidth\" in e) {\n          distWidth += e.deltaWidth;\n        }\n\n        if (\"offsetHeight\" in e) {\n          distHeight = e.offsetHeight - rect.offsetHeight;\n        } else if (\"deltaHeight\" in e) {\n          distHeight += e.deltaHeight;\n        }\n\n        return {\n          datas: datas,\n          parentDist: [distWidth, distHeight],\n          parentKeepRatio: e.keepRatio\n        };\n      },\n      requestEnd: function () {\n        return {\n          datas: datas,\n          isDrag: true\n        };\n      }\n    };\n  },\n  unset: function (moveable) {\n    moveable.state.gestos.resizable = null;\n  }\n};\n/**\n * Whether or not target can be resized.\n * @name Moveable.Resizable#resizable\n * @default false\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     resizable: false,\n * });\n *\n * moveable.resizable = true;\n */\n\n/**\n * throttle of width, height when resize. If throttleResize is set to less than 1, the target may shake.\n * @name Moveable.Resizable#throttleResize\n * @default 1\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *   resizable: true,\n *   throttleResize: 1,\n * });\n *\n * moveable.throttleResize = 0;\n */\n\n/**\n * When resize or scale, keeps a ratio of the width, height.\n * @name Moveable.Resizable#keepRatio\n * @default false\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *   resizable: true,\n * });\n *\n * moveable.keepRatio = true;\n */\n\n/**\n * Set directions to show the control box.\n * @name Moveable.Resizable#renderDirections\n * @default [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"]\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *   resizable: true,\n *   renderDirections: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"],\n * });\n *\n * moveable.renderDirections = [\"nw\", \"ne\", \"sw\", \"se\"];\n */\n\n/**\n * Function to convert size for resize\n * @name Moveable.Resizable#resizeFormat\n * @default oneself\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *   resizable: true,\n *   resizeFormat: v => v,\n * });\n *\n * moveable.resizeFormat = (size: number[]) => ([Math.trunc(size[0]), Math.trunc(size[1])];\n */\n\n/**\n * When the resize starts, the resizeStart event is called.\n * @memberof Moveable.Resizable\n * @event resizeStart\n * @param {Moveable.Resizable.OnResizeStart} - Parameters for the resizeStart event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { resizable: true });\n * moveable.on(\"resizeStart\", ({ target }) => {\n *     console.log(target);\n * });\n */\n\n/**\n * When resizing, `beforeResize` is called before `resize` occurs. In `beforeResize`, you can get and set the pre-value before resizing.\n * @memberof Moveable.Resizable\n * @event beforeResize\n * @param {Moveable.Resizable.OnBeforeResize} - Parameters for the `beforeResize` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { resizable: true });\n * moveable.on(\"beforeResize\", ({ setFixedDirection }) => {\n *     if (shiftKey) {\n *        setFixedDirection([0, 0]);\n *     }\n * });\n * moveable.on(\"resize\", ({ target, width, height, drag }) => {\n *     target.style.width = `${width}px`;\n *     target.style.height = `${height}px`;\n *     target.style.transform = drag.transform;\n * });\n */\n\n/**\n * When resizing, the resize event is called.\n * @memberof Moveable.Resizable\n * @event resize\n * @param {Moveable.Resizable.OnResize} - Parameters for the resize event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { resizable: true });\n * moveable.on(\"resize\", ({ target, width, height }) => {\n *     target.style.width = `${e.width}px`;\n *     target.style.height = `${e.height}px`;\n * });\n */\n\n/**\n * When the resize finishes, the resizeEnd event is called.\n * @memberof Moveable.Resizable\n * @event resizeEnd\n * @param {Moveable.Resizable.OnResizeEnd} - Parameters for the resizeEnd event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { resizable: true });\n * moveable.on(\"resizeEnd\", ({ target, isDrag }) => {\n *     console.log(target, isDrag);\n * });\n */\n\n/**\n* When the group resize starts, the `resizeGroupStart` event is called.\n* @memberof Moveable.Resizable\n* @event resizeGroupStart\n* @param {Moveable.Resizable.OnResizeGroupStart} - Parameters for the `resizeGroupStart` event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\n*     resizable: true\n* });\n* moveable.on(\"resizeGroupStart\", ({ targets }) => {\n*     console.log(\"onResizeGroupStart\", targets);\n* });\n*/\n\n/**\n* When the group resize, the `resizeGroup` event is called.\n* @memberof Moveable.Resizable\n* @event resizeGroup\n* @param {Moveable.Resizable.onResizeGroup} - Parameters for the `resizeGroup` event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\n*     resizable: true\n* });\n* moveable.on(\"resizeGroup\", ({ targets, events }) => {\n*     console.log(\"onResizeGroup\", targets);\n*     events.forEach(ev => {\n*         const offset = [\n*             direction[0] < 0 ? -ev.delta[0] : 0,\n*             direction[1] < 0 ? -ev.delta[1] : 0,\n*         ];\n*         // ev.drag is a drag event that occurs when the group resize.\n*         const left = offset[0] + ev.drag.beforeDist[0];\n*         const top = offset[1] + ev.drag.beforeDist[1];\n*         const width = ev.width;\n*         const top = ev.top;\n*     });\n* });\n*/\n\n/**\n * When the group resize finishes, the `resizeGroupEnd` event is called.\n * @memberof Moveable.Resizable\n * @event resizeGroupEnd\n * @param {Moveable.Resizable.OnResizeGroupEnd} - Parameters for the `resizeGroupEnd` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n *     resizable: true\n * });\n * moveable.on(\"resizeGroupEnd\", ({ targets, isDrag }) => {\n *     console.log(\"onResizeGroupEnd\", targets, isDrag);\n * });\n */\n\n/**\n * @namespace Rotatable\n * @memberof Moveable\n * @description Rotatable indicates whether the target can be rotated.\n */\n\nfunction setRotateStartInfo(moveable, datas, clientX, clientY, rect) {\n  var groupable = moveable.props.groupable;\n  var state = moveable.state;\n  var n = state.is3d ? 4 : 3;\n  var origin = datas.origin;\n  var nextOrigin = calculatePosition(moveable.state.rootMatrix, // TO-DO #710\n  minus([origin[0], origin[1]], groupable ? [0, 0] : [state.left, state.top]), n);\n  var startAbsoluteOrigin = plus([rect.left, rect.top], nextOrigin);\n  datas.startAbsoluteOrigin = startAbsoluteOrigin;\n  datas.prevDeg = getRad(startAbsoluteOrigin, [clientX, clientY]) / Math.PI * 180;\n  datas.defaultDeg = datas.prevDeg;\n  datas.prevSnapDeg = 0;\n  datas.loop = 0;\n  datas.startDist = getDist$1(startAbsoluteOrigin, [clientX, clientY]);\n}\n\nfunction getAbsoluteDist(deg, direction, datas) {\n  var defaultDeg = datas.defaultDeg,\n      prevDeg = datas.prevDeg;\n  var normalizedPrevDeg = prevDeg % 360;\n  var loop = Math.floor(prevDeg / 360);\n\n  if (normalizedPrevDeg < 0) {\n    normalizedPrevDeg += 360;\n  }\n\n  if (normalizedPrevDeg > deg && normalizedPrevDeg > 270 && deg < 90) {\n    // 360 => 0\n    ++loop;\n  } else if (normalizedPrevDeg < deg && normalizedPrevDeg < 90 && deg > 270) {\n    // 0 => 360\n    --loop;\n  }\n\n  var dist = direction * (loop * 360 + deg - defaultDeg);\n  datas.prevDeg = defaultDeg + dist;\n  return dist;\n}\n\nfunction getAbsoluteDistByClient(clientX, clientY, direction, datas) {\n  return getAbsoluteDist(getRad(datas.startAbsoluteOrigin, [clientX, clientY]) / Math.PI * 180, direction, datas);\n}\n\nfunction getRotateInfo(moveable, moveableRect, datas, dist, startValue, checkSnap) {\n  var _a = moveable.props.throttleRotate,\n      throttleRotate = _a === void 0 ? 0 : _a;\n  var prevSnapDeg = datas.prevSnapDeg;\n  var snapRotation = 0;\n  var isSnap = false;\n\n  if (checkSnap) {\n    var result = checkSnapRotate(moveable, moveableRect, dist);\n    isSnap = result.isSnap;\n    snapRotation = startValue + result.rotation;\n  }\n\n  if (!isSnap) {\n    snapRotation = throttle(startValue + dist, throttleRotate);\n  }\n\n  var snapDeg = snapRotation - startValue;\n  datas.prevSnapDeg = snapDeg;\n  return [snapDeg - prevSnapDeg, snapDeg, snapRotation];\n}\n\nfunction getRotationPositions(rotationPosition, _a, direction) {\n  var pos1 = _a[0],\n      pos2 = _a[1],\n      pos3 = _a[2],\n      pos4 = _a[3];\n\n  if (rotationPosition === \"none\") {\n    return [];\n  }\n\n  if (isArray(rotationPosition)) {\n    return rotationPosition.map(function (child) {\n      return getRotationPositions(child, [pos1, pos2, pos3, pos4], direction)[0];\n    });\n  }\n\n  var _b = (rotationPosition || \"top\").split(\"-\"),\n      dir1 = _b[0],\n      dir2 = _b[1];\n\n  var radPoses = [pos1, pos2];\n\n  if (dir1 === \"left\") {\n    radPoses = [pos3, pos1];\n  } else if (dir1 === \"right\") {\n    radPoses = [pos2, pos4];\n  } else if (dir1 === \"bottom\") {\n    radPoses = [pos4, pos3];\n  }\n\n  var pos = [(radPoses[0][0] + radPoses[1][0]) / 2, (radPoses[0][1] + radPoses[1][1]) / 2];\n  var rad = getRotationRad(radPoses, direction);\n\n  if (dir2) {\n    var isStart = dir2 === \"top\" || dir2 === \"left\";\n    var isReverse = dir1 === \"bottom\" || dir1 === \"left\";\n    pos = radPoses[isStart && !isReverse || !isStart && isReverse ? 0 : 1];\n  }\n\n  return [[pos, rad]];\n}\n\nfunction dragControlCondition(moveable, e) {\n  if (e.isRequest) {\n    return e.requestAble === \"rotatable\";\n  }\n\n  var target = e.inputEvent.target;\n\n  if (hasClass(target, prefix(\"rotation-control\")) || hasClass(target, prefix(\"around-control\")) || hasClass(target, prefix(\"control\")) && hasClass(target, prefix(\"rotatable\"))) {\n    return true;\n  }\n\n  var rotationTarget = moveable.props.rotationTarget;\n\n  if (rotationTarget) {\n    return getRefTargets(rotationTarget, true).some(function (element) {\n      if (!element) {\n        return false;\n      }\n\n      return target === element || target.contains(element);\n    });\n  }\n\n  return false;\n}\n\nvar directionCSS = DIRECTIONS.map(function (dir) {\n  var top = \"\";\n  var left = \"\";\n  var originX = \"center\";\n  var originY = \"center\";\n\n  if (dir.indexOf(\"n\") > -1) {\n    top = \"top: -20px;\";\n    originY = \"bottom\";\n  }\n\n  if (dir.indexOf(\"s\") > -1) {\n    top = \"top: 0px;\";\n    originY = \"top\";\n  }\n\n  if (dir.indexOf(\"w\") > -1) {\n    left = \"left: -20px;\";\n    originX = \"right\";\n  }\n\n  if (dir.indexOf(\"e\") > -1) {\n    left = \"left: 0px;\";\n    originX = \"left\";\n  }\n\n  return \".around-control[data-direction*=\\\"\".concat(dir, \"\\\"] {\\n        \").concat(left).concat(top, \"\\n        transform-origin: \").concat(originX, \" \").concat(originY, \";\\n    }\");\n}).join(\"\\n\");\nvar css = \".rotation {\\n    position: absolute;\\n    height: 40px;\\n    width: 1px;\\n    transform-origin: 50% 100%;\\n    height: calc(40px * var(--zoom));\\n    top: auto;\\n    left: 0;\\n    bottom: 100%;\\n    will-change: transform;\\n}\\n.rotation .rotation-line {\\n    display: block;\\n    width: 100%;\\n    height: 100%;\\n    transform-origin: 50% 50%;\\n}\\n.rotation .rotation-control {\\n    border-color: #4af;\\n    border-color: var(--moveable-color);\\n    background:#fff;\\n    cursor: alias;\\n}\\n:global .view-rotation-dragging, .rotatable.direction.control {\\n    cursor: alias;\\n}\\n.around-control {\\n    position: absolute;\\n    will-change: transform;\\n    width: 20px;\\n    height: 20px;\\n    left: -10px;\\n    top: -10px;\\n    box-sizing: border-box;\\n    background: transparent;\\n    z-index: 8;\\n    cursor: alias;\\n    transform-origin: center center;\\n}\\n.rotatable.direction.control.move {\\n    cursor: move;\\n}\\n\".concat(directionCSS, \"\\n\");\nvar Rotatable = {\n  name: \"rotatable\",\n  canPinch: true,\n  props: {\n    rotatable: Boolean,\n    rotationPosition: String,\n    throttleRotate: Number,\n    renderDirections: Object,\n    rotationTarget: Object,\n    rotateAroundControls: Boolean,\n    edge: Boolean,\n    resolveAblesWithRotatable: Object\n  },\n  events: {\n    onRotateStart: \"rotateStart\",\n    onBeforeRotate: \"beforeRotate\",\n    onRotate: \"rotate\",\n    onRotateEnd: \"rotateEnd\",\n    onRotateGroupStart: \"rotateGroupStart\",\n    onBeforeRotateGroup: \"beforeRotateGroup\",\n    onRotateGroup: \"rotateGroup\",\n    onRotateGroupEnd: \"rotateGroupEnd\"\n  },\n  css: [css],\n  viewClassName: function (moveable) {\n    if (!moveable.isDragging(\"rotatable\")) {\n      return \"\";\n    }\n\n    return prefix(\"view-rotation-dragging\");\n  },\n  render: function (moveable, React) {\n    var _a = getProps(moveable.props, \"rotatable\"),\n        rotatable = _a.rotatable,\n        rotationPosition = _a.rotationPosition,\n        zoom = _a.zoom,\n        renderDirections = _a.renderDirections,\n        rotateAroundControls = _a.rotateAroundControls,\n        resolveAblesWithRotatable = _a.resolveAblesWithRotatable;\n\n    var _b = moveable.getState(),\n        renderPoses = _b.renderPoses,\n        direction = _b.direction;\n\n    if (!rotatable) {\n      return null;\n    }\n\n    var positions = getRotationPositions(rotationPosition, renderPoses, direction);\n    var jsxs = [];\n    positions.forEach(function (_a, i) {\n      var pos = _a[0],\n          rad = _a[1];\n      jsxs.push(React.createElement(\"div\", {\n        key: \"rotation\".concat(i),\n        className: prefix(\"rotation\"),\n        style: {\n          // tslint:disable-next-line: max-line-length\n          transform: \"translate(-50%) translate(\".concat(pos[0], \"px, \").concat(pos[1], \"px) rotate(\").concat(rad, \"rad)\")\n        }\n      }, React.createElement(\"div\", {\n        className: prefix(\"line rotation-line\"),\n        style: {\n          transform: \"scaleX(\".concat(zoom, \")\")\n        }\n      }), React.createElement(\"div\", {\n        className: prefix(\"control rotation-control\"),\n        style: {\n          transform: \"translate(0.5px) scale(\".concat(zoom, \")\")\n        }\n      })));\n    });\n\n    if (renderDirections) {\n      var ables = getKeys(resolveAblesWithRotatable || {});\n      var resolveMap_1 = {};\n      ables.forEach(function (name) {\n        resolveAblesWithRotatable[name].forEach(function (direction) {\n          resolveMap_1[direction] = name;\n        });\n      });\n      var directionControlInfos = [];\n\n      if (isArray(renderDirections)) {\n        directionControlInfos = renderDirections.map(function (dir) {\n          var able = resolveMap_1[dir];\n          return {\n            data: able ? {\n              resolve: able\n            } : {},\n            classNames: able ? [\"move\"] : [],\n            dir: dir\n          };\n        });\n      }\n\n      jsxs.push.apply(jsxs, renderDirectionControlsByInfos(moveable, \"rotatable\", directionControlInfos, React));\n    }\n\n    if (rotateAroundControls) {\n      jsxs.push.apply(jsxs, renderAroundControls(moveable, React));\n    }\n\n    return jsxs;\n  },\n  dragControlCondition: dragControlCondition,\n  dragControlStart: function (moveable, e) {\n    var _a;\n\n    var _b;\n\n    var datas = e.datas,\n        clientX = e.clientX,\n        clientY = e.clientY,\n        parentRotate = e.parentRotate,\n        parentFlag = e.parentFlag,\n        isPinch = e.isPinch,\n        isRequest = e.isRequest;\n    var state = moveable.state;\n    var target = state.target,\n        left = state.left,\n        top = state.top,\n        direction = state.direction,\n        beforeDirection = state.beforeDirection,\n        targetTransform = state.targetTransform,\n        moveableClientRect = state.moveableClientRect,\n        offsetMatrix = state.offsetMatrix,\n        targetMatrix = state.targetMatrix,\n        allMatrix = state.allMatrix,\n        width = state.width,\n        height = state.height;\n\n    if (!isRequest && !target) {\n      return false;\n    }\n\n    var rect = moveable.getRect();\n    datas.rect = rect;\n    datas.transform = targetTransform;\n    datas.left = left;\n    datas.top = top;\n\n    var setFixedPosition = function (fixedPosition) {\n      var _a = moveable.state,\n          allMatrix = _a.allMatrix,\n          is3d = _a.is3d,\n          width = _a.width,\n          height = _a.height;\n      var fixedDirection = getDirectionByPos(fixedPosition, width, height);\n      datas.fixedDirection = fixedDirection;\n      datas.fixedPosition = calculatePosition(allMatrix, fixedPosition, is3d ? 4 : 3);\n\n      if (resizeStart) {\n        resizeStart.setFixedPosition(fixedPosition);\n      }\n    };\n\n    var setFixedDirection = function (fixedDirection) {\n      datas.fixedDirection = fixedDirection;\n      datas.fixedPosition = getDirectionOffset(moveable, fixedDirection);\n\n      if (resizeStart) {\n        resizeStart.setFixedDirection(fixedDirection);\n      }\n    };\n\n    var startClientX = clientX;\n    var startClientY = clientY;\n\n    if (isRequest || isPinch || parentFlag) {\n      var externalRotate = parentRotate || 0;\n      datas.beforeInfo = {\n        origin: rect.beforeOrigin,\n        prevDeg: externalRotate,\n        defaultDeg: externalRotate,\n        prevSnapDeg: 0,\n        startDist: 0\n      };\n      datas.afterInfo = __assign(__assign({}, datas.beforeInfo), {\n        origin: rect.origin\n      });\n      datas.absoluteInfo = __assign(__assign({}, datas.beforeInfo), {\n        origin: rect.origin,\n        startValue: externalRotate\n      });\n    } else {\n      var inputTarget = (_b = e.inputEvent) === null || _b === void 0 ? void 0 : _b.target;\n\n      if (inputTarget) {\n        var regionDirection = inputTarget.getAttribute(\"data-direction\") || \"\";\n        var controlDirection = DIRECTION_REGION_TO_DIRECTION[regionDirection];\n\n        if (controlDirection) {\n          datas.isControl = true;\n          datas.isAroundControl = hasClass(inputTarget, prefix(\"around-control\"));\n          datas.controlDirection = controlDirection;\n          var resolve = inputTarget.getAttribute(\"data-resolve\");\n\n          if (resolve) {\n            datas.resolveAble = resolve;\n          }\n\n          var clientPoses = calculateMoveableClientPositions(state.rootMatrix, state.renderPoses, moveableClientRect);\n          _a = getPosByDirection(clientPoses, controlDirection), startClientX = _a[0], startClientY = _a[1];\n        }\n      }\n\n      datas.beforeInfo = {\n        origin: rect.beforeOrigin\n      };\n      datas.afterInfo = {\n        origin: rect.origin\n      };\n      datas.absoluteInfo = {\n        origin: rect.origin,\n        startValue: rect.rotation\n      };\n      var originalFixedPosition_1 = setFixedPosition;\n\n      setFixedPosition = function (fixedPosition) {\n        var n = state.is3d ? 4 : 3;\n\n        var _a = plus(getOrigin(targetMatrix, n), fixedPosition),\n            originX = _a[0],\n            originY = _a[1];\n\n        var fixedBeforeOrigin = calculate(offsetMatrix, convertPositionMatrix([originX, originY], n));\n        var fixedAfterOrigin = calculate(allMatrix, convertPositionMatrix([fixedPosition[0], fixedPosition[1]], n));\n        originalFixedPosition_1(fixedPosition);\n        var posDelta = state.posDelta;\n        datas.beforeInfo.origin = minus(fixedBeforeOrigin, posDelta);\n        datas.afterInfo.origin = minus(fixedAfterOrigin, posDelta);\n        datas.absoluteInfo.origin = minus(fixedAfterOrigin, posDelta);\n        setRotateStartInfo(moveable, datas.beforeInfo, startClientX, startClientY, moveableClientRect);\n        setRotateStartInfo(moveable, datas.afterInfo, startClientX, startClientY, moveableClientRect);\n        setRotateStartInfo(moveable, datas.absoluteInfo, startClientX, startClientY, moveableClientRect);\n      };\n\n      setFixedDirection = function (fixedDirection) {\n        var fixedPosition = getPosByDirection([[0, 0], [width, 0], [0, height], [width, height]], fixedDirection);\n        setFixedPosition(fixedPosition);\n      };\n    }\n\n    datas.startClientX = startClientX;\n    datas.startClientY = startClientY;\n    datas.direction = direction;\n    datas.beforeDirection = beforeDirection;\n    datas.startValue = 0;\n    datas.datas = {};\n    setDefaultTransformIndex(e, \"rotate\");\n    var dragStart = false;\n    var resizeStart = false;\n\n    if (datas.isControl && datas.resolveAble) {\n      var resolveAble = datas.resolveAble;\n\n      if (resolveAble === \"resizable\") {\n        resizeStart = Resizable.dragControlStart(moveable, __assign(__assign({}, new CustomGesto(\"resizable\").dragStart([0, 0], e)), {\n          parentPosition: datas.controlPosition,\n          parentFixedPosition: datas.fixedPosition\n        }));\n      }\n    }\n\n    if (!resizeStart) {\n      dragStart = Draggable.dragStart(moveable, new CustomGesto().dragStart([0, 0], e));\n    }\n\n    setFixedPosition(state.transformOrigin);\n    var params = fillParams(moveable, e, __assign(__assign({\n      set: function (rotatation) {\n        datas.startValue = rotatation * Math.PI / 180;\n      },\n      setFixedDirection: setFixedDirection,\n      setFixedPosition: setFixedPosition\n    }, fillTransformStartEvent(e)), {\n      dragStart: dragStart,\n      resizeStart: resizeStart\n    }));\n    var result = triggerEvent(moveable, \"onRotateStart\", params);\n    datas.isRotate = result !== false;\n    state.snapRenderInfo = {\n      request: e.isRequest\n    };\n    return datas.isRotate ? params : false;\n  },\n  dragControl: function (moveable, e) {\n    var _a, _b, _c;\n\n    var datas = e.datas,\n        clientDistX = e.clientDistX,\n        clientDistY = e.clientDistY,\n        parentRotate = e.parentRotate,\n        parentFlag = e.parentFlag,\n        isPinch = e.isPinch,\n        groupDelta = e.groupDelta;\n    var beforeDirection = datas.beforeDirection,\n        beforeInfo = datas.beforeInfo,\n        afterInfo = datas.afterInfo,\n        absoluteInfo = datas.absoluteInfo,\n        isRotate = datas.isRotate,\n        startValue = datas.startValue,\n        rect = datas.rect,\n        startClientX = datas.startClientX,\n        startClientY = datas.startClientY;\n\n    if (!isRotate) {\n      return;\n    }\n\n    resolveTransformEvent(e, \"rotate\");\n    var targetDirection = getTransformDirection(e);\n    var direction = beforeDirection * targetDirection;\n    var parentMoveable = moveable.props.parentMoveable;\n    var beforeDelta = 0;\n    var beforeDist;\n    var beforeRotation;\n    var delta = 0;\n    var dist;\n    var rotation;\n    var absoluteDelta = 0;\n    var absoluteDist;\n    var absoluteRotation;\n    var startRotation = 180 / Math.PI * startValue;\n    var absoluteStartRotation = absoluteInfo.startValue;\n    var isSnap = false;\n    var nextClientX = startClientX + clientDistX;\n    var nextClientY = startClientY + clientDistY;\n\n    if (!parentFlag && \"parentDist\" in e) {\n      var parentDist = e.parentDist;\n      beforeDist = parentDist;\n      dist = parentDist;\n      absoluteDist = parentDist;\n    } else if (isPinch || parentFlag) {\n      beforeDist = getAbsoluteDist(parentRotate, beforeDirection, beforeInfo);\n      dist = getAbsoluteDist(parentRotate, direction, afterInfo);\n      absoluteDist = getAbsoluteDist(parentRotate, direction, absoluteInfo);\n    } else {\n      beforeDist = getAbsoluteDistByClient(nextClientX, nextClientY, beforeDirection, beforeInfo);\n      dist = getAbsoluteDistByClient(nextClientX, nextClientY, direction, afterInfo);\n      absoluteDist = getAbsoluteDistByClient(nextClientX, nextClientY, direction, absoluteInfo);\n      isSnap = true;\n    }\n\n    beforeRotation = startRotation + beforeDist;\n    rotation = startRotation + dist;\n    absoluteRotation = absoluteStartRotation + absoluteDist;\n    triggerEvent(moveable, \"onBeforeRotate\", fillParams(moveable, e, {\n      beforeRotation: beforeRotation,\n      rotation: rotation,\n      absoluteRotation: absoluteRotation,\n      setRotation: function (nextRotation) {\n        dist = nextRotation - startRotation;\n        beforeDist = dist;\n        absoluteDist = dist;\n      }\n    }, true));\n    _a = getRotateInfo(moveable, rect, beforeInfo, beforeDist, startRotation, isSnap), beforeDelta = _a[0], beforeDist = _a[1], beforeRotation = _a[2];\n    _b = getRotateInfo(moveable, rect, afterInfo, dist, startRotation, isSnap), delta = _b[0], dist = _b[1], rotation = _b[2];\n    _c = getRotateInfo(moveable, rect, absoluteInfo, absoluteDist, absoluteStartRotation, isSnap), absoluteDelta = _c[0], absoluteDist = _c[1], absoluteRotation = _c[2];\n\n    if (!absoluteDelta && !delta && !beforeDelta && !parentMoveable) {\n      return;\n    }\n\n    var nextTransform = convertTransformFormat(datas, \"rotate(\".concat(rotation, \"deg)\"), \"rotate(\".concat(dist, \"deg)\"));\n    var inverseDist = getRotateDist(moveable, dist, datas);\n    var inverseDelta = minus(plus(groupDelta || [0, 0], inverseDist), datas.prevInverseDist || [0, 0]);\n    datas.prevInverseDist = inverseDist;\n    datas.requestValue = null;\n    var dragEvent = fillTransformEvent(moveable, nextTransform, inverseDelta, isPinch, e);\n    var transformEvent = dragEvent;\n    var parentDistance = getDist$1([nextClientX, nextClientY], absoluteInfo.startAbsoluteOrigin) - absoluteInfo.startDist;\n    var resize = undefined;\n\n    if (datas.resolveAble === \"resizable\") {\n      var resizeEvent = Resizable.dragControl(moveable, __assign(__assign({}, setCustomDrag(e, moveable.state, [e.deltaX, e.deltaY], !!isPinch, false, \"resizable\")), {\n        resolveMatrix: true,\n        parentDistance: parentDistance\n      }));\n\n      if (resizeEvent) {\n        resize = resizeEvent;\n        transformEvent = fillAfterTransform(transformEvent, resizeEvent, e);\n      }\n    }\n\n    var params = fillParams(moveable, e, __assign(__assign({\n      delta: delta,\n      dist: dist,\n      rotate: rotation,\n      rotation: rotation,\n      beforeDist: beforeDist,\n      beforeDelta: beforeDelta,\n      beforeRotate: beforeRotation,\n      beforeRotation: beforeRotation,\n      absoluteDist: absoluteDist,\n      absoluteDelta: absoluteDelta,\n      absoluteRotate: absoluteRotation,\n      absoluteRotation: absoluteRotation,\n      isPinch: !!isPinch,\n      resize: resize\n    }, dragEvent), transformEvent));\n    triggerEvent(moveable, \"onRotate\", params);\n    return params;\n  },\n  dragControlEnd: function (moveable, e) {\n    var datas = e.datas;\n\n    if (!datas.isRotate) {\n      return;\n    }\n\n    datas.isRotate = false;\n    var params = fillEndParams(moveable, e, {});\n    triggerEvent(moveable, \"onRotateEnd\", params);\n    return params;\n  },\n  dragGroupControlCondition: dragControlCondition,\n  dragGroupControlStart: function (moveable, e) {\n    var datas = e.datas;\n    var _a = moveable.state,\n        parentLeft = _a.left,\n        parentTop = _a.top,\n        parentBeforeOrigin = _a.beforeOrigin;\n    var params = this.dragControlStart(moveable, e);\n\n    if (!params) {\n      return false;\n    }\n\n    params.set(datas.beforeDirection * moveable.rotation);\n    var events = triggerChildAbles(moveable, this, \"dragControlStart\", e, function (child, ev) {\n      var _a = child.state,\n          left = _a.left,\n          top = _a.top,\n          beforeOrigin = _a.beforeOrigin;\n      var childClient = plus(minus([left, top], [parentLeft, parentTop]), minus(beforeOrigin, parentBeforeOrigin));\n      ev.datas.startGroupClient = childClient;\n      ev.datas.groupClient = childClient;\n      return __assign(__assign({}, ev), {\n        parentRotate: 0\n      });\n    });\n\n    var nextParams = __assign(__assign({}, params), {\n      targets: moveable.props.targets,\n      events: events\n    });\n\n    var result = triggerEvent(moveable, \"onRotateGroupStart\", nextParams);\n    datas.isRotate = result !== false;\n    return datas.isRotate ? params : false;\n  },\n  dragGroupControl: function (moveable, e) {\n    var datas = e.datas;\n\n    if (!datas.isRotate) {\n      return;\n    }\n\n    catchEvent(moveable, \"onBeforeRotate\", function (parentEvent) {\n      triggerEvent(moveable, \"onBeforeRotateGroup\", fillParams(moveable, e, __assign(__assign({}, parentEvent), {\n        targets: moveable.props.targets\n      }), true));\n    });\n    var params = this.dragControl(moveable, e);\n\n    if (!params) {\n      return;\n    }\n\n    var direction = datas.beforeDirection;\n    var parentRotate = params.beforeDist;\n    var rad = parentRotate / 180 * Math.PI;\n    var events = triggerChildAbles(moveable, this, \"dragControl\", e, function (_, ev) {\n      var startGroupClient = ev.datas.startGroupClient;\n      var _a = ev.datas.groupClient,\n          prevClientX = _a[0],\n          prevClientY = _a[1];\n\n      var _b = rotate(startGroupClient, rad * direction),\n          clientX = _b[0],\n          clientY = _b[1];\n\n      var delta = [clientX - prevClientX, clientY - prevClientY];\n      ev.datas.groupClient = [clientX, clientY];\n      return __assign(__assign({}, ev), {\n        parentRotate: parentRotate,\n        groupDelta: delta\n      });\n    });\n    moveable.rotation = direction * params.beforeRotation;\n\n    var nextParams = __assign({\n      targets: moveable.props.targets,\n      events: events,\n      set: function (rotation) {\n        moveable.rotation = rotation;\n      },\n      setGroupRotation: function (rotation) {\n        moveable.rotation = rotation;\n      }\n    }, params);\n\n    triggerEvent(moveable, \"onRotateGroup\", nextParams);\n    return nextParams;\n  },\n  dragGroupControlEnd: function (moveable, e) {\n    var isDrag = e.isDrag,\n        datas = e.datas;\n\n    if (!datas.isRotate) {\n      return;\n    }\n\n    this.dragControlEnd(moveable, e);\n    var events = triggerChildAbles(moveable, this, \"dragControlEnd\", e);\n    var nextParams = fillEndParams(moveable, e, {\n      targets: moveable.props.targets,\n      events: events\n    });\n    triggerEvent(moveable, \"onRotateGroupEnd\", nextParams);\n    return isDrag;\n  },\n\n  /**\n   * @method Moveable.Rotatable#request\n   * @param {object} [e] - the Resizable's request parameter\n   * @param {number} [e.deltaRotate=0] -  delta number of rotation\n   * @param {number} [e.rotate=0] - absolute number of moveable's rotation\n   * @return {Moveable.Requester} Moveable Requester\n   * @example\n    * // Instantly Request (requestStart - request - requestEnd)\n   * moveable.request(\"rotatable\", { deltaRotate: 10 }, true);\n   *\n   * * moveable.request(\"rotatable\", { rotate: 10 }, true);\n   *\n   * // requestStart\n   * const requester = moveable.request(\"rotatable\");\n   *\n   * // request\n   * requester.request({ deltaRotate: 10 });\n   * requester.request({ deltaRotate: 10 });\n   * requester.request({ deltaRotate: 10 });\n   *\n   * requester.request({ rotate: 10 });\n   * requester.request({ rotate: 20 });\n   * requester.request({ rotate: 30 });\n   *\n   * // requestEnd\n   * requester.requestEnd();\n   */\n  request: function (moveable) {\n    var datas = {};\n    var distRotate = 0;\n    var startRotation = moveable.getRotation();\n    return {\n      isControl: true,\n      requestStart: function () {\n        return {\n          datas: datas\n        };\n      },\n      request: function (e) {\n        if (\"deltaRotate\" in e) {\n          distRotate += e.deltaRotate;\n        } else if (\"rotate\" in e) {\n          distRotate = e.rotate - startRotation;\n        }\n\n        return {\n          datas: datas,\n          parentDist: distRotate\n        };\n      },\n      requestEnd: function () {\n        return {\n          datas: datas,\n          isDrag: true\n        };\n      }\n    };\n  }\n};\n/**\n * Whether or not target can be rotated. (default: false)\n * @name Moveable.Rotatable#rotatable\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.rotatable = true;\n */\n\n/**\n * You can specify the position of the rotation. (default: \"top\")\n * @name Moveable.Rotatable#rotationPosition\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *   rotationPosition: \"top\",\n * });\n *\n * moveable.rotationPosition = \"bottom\"\n */\n\n/**\n * throttle of angle(degree) when rotate.\n * @name Moveable.Rotatable#throttleRotate\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.throttleRotate = 1;\n */\n\n/**\n * When the rotate starts, the rotateStart event is called.\n * @memberof Moveable.Rotatable\n * @event rotateStart\n * @param {Moveable.Rotatable.OnRotateStart} - Parameters for the rotateStart event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { rotatable: true });\n * moveable.on(\"rotateStart\", ({ target }) => {\n *     console.log(target);\n * });\n */\n\n/**\n* When rotating, the rotate event is called.\n* @memberof Moveable.Rotatable\n* @event rotate\n* @param {Moveable.Rotatable.OnRotate} - Parameters for the rotate event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, { rotatable: true });\n* moveable.on(\"rotate\", ({ target, transform, dist }) => {\n*     target.style.transform = transform;\n* });\n*/\n\n/**\n * When the rotate finishes, the rotateEnd event is called.\n * @memberof Moveable.Rotatable\n * @event rotateEnd\n * @param {Moveable.Rotatable.OnRotateEnd} - Parameters for the rotateEnd event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { rotatable: true });\n * moveable.on(\"rotateEnd\", ({ target, isDrag }) => {\n *     console.log(target, isDrag);\n * });\n */\n\n/**\n * When the group rotate starts, the `rotateGroupStart` event is called.\n * @memberof Moveable.Rotatable\n * @event rotateGroupStart\n * @param {Moveable.Rotatable.OnRotateGroupStart} - Parameters for the `rotateGroupStart` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n *     rotatable: true\n * });\n * moveable.on(\"rotateGroupStart\", ({ targets }) => {\n *     console.log(\"onRotateGroupStart\", targets);\n * });\n */\n\n/**\n* When the group rotate, the `rotateGroup` event is called.\n* @memberof Moveable.Rotatable\n* @event rotateGroup\n* @param {Moveable.Rotatable.OnRotateGroup} - Parameters for the `rotateGroup` event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\n*     rotatable: true\n* });\n* moveable.on(\"rotateGroup\", ({ targets, events }) => {\n*     console.log(\"onRotateGroup\", targets);\n*     events.forEach(ev => {\n*         const target = ev.target;\n*         // ev.drag is a drag event that occurs when the group rotate.\n*         const left = ev.drag.beforeDist[0];\n*         const top = ev.drag.beforeDist[1];\n*         const deg = ev.beforeDist;\n*     });\n* });\n*/\n\n/**\n * When the group rotate finishes, the `rotateGroupEnd` event is called.\n * @memberof Moveable.Rotatable\n * @event rotateGroupEnd\n * @param {Moveable.Rotatable.OnRotateGroupEnd} - Parameters for the `rotateGroupEnd` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n *     rotatable: true\n * });\n * moveable.on(\"rotateGroupEnd\", ({ targets, isDrag }) => {\n *     console.log(\"onRotateGroupEnd\", targets, isDrag);\n * });\n */\n\nvar directionCondition = getDirectionCondition(\"scalable\");\n/**\n * @namespace Scalable\n * @memberof Moveable\n * @description Scalable indicates whether the target's x and y can be scale of transform.\n */\n\nvar Scalable = {\n  name: \"scalable\",\n  ableGroup: \"size\",\n  canPinch: true,\n  props: {\n    scalable: Boolean,\n    throttleScale: Number,\n    renderDirections: String,\n    keepRatio: Boolean,\n    edge: Boolean\n  },\n  events: {\n    onScaleStart: \"scaleStart\",\n    onBeforeScale: \"beforeScale\",\n    onScale: \"scale\",\n    onScaleEnd: \"scaleEnd\",\n    onScaleGroupStart: \"scaleGroupStart\",\n    onBeforeScaleGroup: \"beforeScaleGroup\",\n    onScaleGroup: \"scaleGroup\",\n    onScaleGroupEnd: \"scaleGroupEnd\"\n  },\n  render: getRenderDirections(\"scalable\"),\n  dragControlCondition: directionCondition,\n  viewClassName: getDirectionViewClassName(\"scalable\"),\n  dragControlStart: function (moveable, e) {\n    var datas = e.datas,\n        isPinch = e.isPinch,\n        inputEvent = e.inputEvent,\n        parentDirection = e.parentDirection;\n    var direction = getTotalDirection(parentDirection, isPinch, inputEvent, datas);\n    var _a = moveable.state,\n        width = _a.width,\n        height = _a.height,\n        targetTransform = _a.targetTransform,\n        target = _a.target,\n        pos1 = _a.pos1,\n        pos2 = _a.pos2,\n        pos4 = _a.pos4;\n\n    if (!direction || !target) {\n      return false;\n    }\n\n    if (!isPinch) {\n      setDragStart(moveable, e);\n    }\n\n    datas.datas = {};\n    datas.transform = targetTransform;\n    datas.prevDist = [1, 1];\n    datas.direction = direction;\n    datas.startOffsetWidth = width;\n    datas.startOffsetHeight = height;\n    datas.startValue = [1, 1];\n    var scaleWidth = getDist$1(pos1, pos2);\n    var scaleHeight = getDist$1(pos2, pos4);\n    var isWidth = !direction[0] && !direction[1] || direction[0] || !direction[1];\n    datas.scaleWidth = scaleWidth;\n    datas.scaleHeight = scaleHeight;\n    datas.scaleXRatio = scaleWidth / width;\n    datas.scaleYRatio = scaleHeight / height;\n    setDefaultTransformIndex(e, \"scale\");\n    datas.isWidth = isWidth;\n\n    function setRatio(ratio) {\n      datas.ratio = ratio && isFinite(ratio) ? ratio : 0;\n    }\n\n    datas.startPositions = getAbsolutePosesByState(moveable.state);\n\n    function setFixedDirection(fixedDirection) {\n      datas.fixedDirection = fixedDirection;\n      datas.fixedPosition = getPosByDirection(datas.startPositions, fixedDirection);\n    }\n\n    datas.setFixedDirection = setFixedDirection;\n    setRatio(getDist$1(pos1, pos2) / getDist$1(pos2, pos4));\n    setFixedDirection([-direction[0], -direction[1]]);\n    var params = fillParams(moveable, e, __assign(__assign({\n      direction: direction,\n      set: function (scale) {\n        datas.startValue = scale;\n      },\n      setRatio: setRatio,\n      setFixedDirection: setFixedDirection\n    }, fillTransformStartEvent(e)), {\n      dragStart: Draggable.dragStart(moveable, new CustomGesto().dragStart([0, 0], e))\n    }));\n    var result = triggerEvent(moveable, \"onScaleStart\", params);\n    datas.startFixedDirection = datas.fixedDirection;\n\n    if (result !== false) {\n      datas.isScale = true;\n      moveable.state.snapRenderInfo = {\n        request: e.isRequest,\n        direction: direction\n      };\n    }\n\n    return datas.isScale ? params : false;\n  },\n  dragControl: function (moveable, e) {\n    resolveTransformEvent(e, \"scale\");\n    var datas = e.datas,\n        parentKeepRatio = e.parentKeepRatio,\n        parentFlag = e.parentFlag,\n        isPinch = e.isPinch,\n        dragClient = e.dragClient,\n        isRequest = e.isRequest;\n    var prevDist = datas.prevDist,\n        direction = datas.direction,\n        startOffsetWidth = datas.startOffsetWidth,\n        startOffsetHeight = datas.startOffsetHeight,\n        isScale = datas.isScale,\n        startValue = datas.startValue,\n        isWidth = datas.isWidth,\n        ratio = datas.ratio;\n\n    if (!isScale) {\n      return false;\n    }\n\n    var props = moveable.props;\n    var throttleScale = props.throttleScale,\n        parentMoveable = props.parentMoveable;\n    var sizeDirection = direction;\n\n    if (!direction[0] && !direction[1]) {\n      sizeDirection = [1, 1];\n    }\n\n    var keepRatio = ratio && (parentKeepRatio != null ? parentKeepRatio : props.keepRatio) || false;\n    var state = moveable.state;\n\n    function getNextScale() {\n      var _a = getOffsetSizeDist(sizeDirection, keepRatio, datas, e),\n          distWidth = _a.distWidth,\n          distHeight = _a.distHeight;\n\n      var scaleX = startOffsetWidth ? (startOffsetWidth + distWidth) / startOffsetWidth : 1;\n      var scaleY = startOffsetHeight ? (startOffsetHeight + distHeight) / startOffsetHeight : 1;\n      scaleX = sizeDirection[0] || keepRatio ? scaleX * startValue[0] : startValue[0];\n      scaleY = sizeDirection[1] || keepRatio ? scaleY * startValue[1] : startValue[1];\n\n      if (scaleX === 0) {\n        scaleX = (prevDist[0] > 0 ? 1 : -1) * MIN_SCALE;\n      }\n\n      if (scaleY === 0) {\n        scaleY = (prevDist[1] > 0 ? 1 : -1) * MIN_SCALE;\n      }\n\n      return [scaleX, scaleY];\n    }\n\n    var scale = getNextScale();\n\n    if (!isPinch && moveable.props.groupable) {\n      var snapRenderInfo = state.snapRenderInfo || {};\n      var stateDirection = snapRenderInfo.direction;\n\n      if (isArray(stateDirection) && (stateDirection[0] || stateDirection[1])) {\n        state.snapRenderInfo = {\n          direction: direction,\n          request: e.isRequest\n        };\n      }\n    }\n\n    triggerEvent(moveable, \"onBeforeScale\", fillParams(moveable, e, {\n      scale: scale,\n      setFixedDirection: function (nextFixedDirection) {\n        datas.setFixedDirection(nextFixedDirection);\n        scale = getNextScale();\n        return scale;\n      },\n      startFixedDirection: datas.startFixedDirection,\n      setScale: function (nextScale) {\n        scale = nextScale;\n      }\n    }, true));\n    var dist = [scale[0] / startValue[0], scale[1] / startValue[1]];\n    var fixedPosition = dragClient;\n    var snapDist = [0, 0];\n\n    if (!dragClient) {\n      if (!parentFlag && isPinch) {\n        fixedPosition = getAbsolutePosition(moveable, [0, 0]);\n      } else {\n        fixedPosition = datas.fixedPosition;\n      }\n    }\n\n    if (!isPinch) {\n      snapDist = checkSnapScale(moveable, dist, direction, isRequest, datas);\n    }\n\n    if (keepRatio) {\n      if (sizeDirection[0] && sizeDirection[1] && snapDist[0] && snapDist[1]) {\n        if (Math.abs(snapDist[0] * startOffsetWidth) > Math.abs(snapDist[1] * startOffsetHeight)) {\n          snapDist[1] = 0;\n        } else {\n          snapDist[0] = 0;\n        }\n      }\n\n      var isNoSnap = !snapDist[0] && !snapDist[1];\n\n      if (isNoSnap) {\n        if (isWidth) {\n          dist[0] = throttle(dist[0] * startValue[0], throttleScale) / startValue[0];\n        } else {\n          dist[1] = throttle(dist[1] * startValue[1], throttleScale) / startValue[1];\n        }\n      }\n\n      if (sizeDirection[0] && !sizeDirection[1] || snapDist[0] && !snapDist[1] || isNoSnap && isWidth) {\n        dist[0] += snapDist[0];\n        var snapHeight = startOffsetWidth * dist[0] * startValue[0] / ratio;\n        dist[1] = snapHeight / startOffsetHeight / startValue[1];\n      } else if (!sizeDirection[0] && sizeDirection[1] || !snapDist[0] && snapDist[1] || isNoSnap && !isWidth) {\n        dist[1] += snapDist[1];\n        var snapWidth = startOffsetHeight * dist[1] * startValue[1] * ratio;\n        dist[0] = snapWidth / startOffsetWidth / startValue[0];\n      }\n    } else {\n      dist[0] += snapDist[0];\n      dist[1] += snapDist[1];\n\n      if (!snapDist[0]) {\n        dist[0] = throttle(dist[0] * startValue[0], throttleScale) / startValue[0];\n      }\n\n      if (!snapDist[1]) {\n        dist[1] = throttle(dist[1] * startValue[1], throttleScale) / startValue[1];\n      }\n    }\n\n    if (dist[0] === 0) {\n      dist[0] = (prevDist[0] > 0 ? 1 : -1) * MIN_SCALE;\n    }\n\n    if (dist[1] === 0) {\n      dist[1] = (prevDist[1] > 0 ? 1 : -1) * MIN_SCALE;\n    }\n\n    var delta = [dist[0] / prevDist[0], dist[1] / prevDist[1]];\n    scale = multiply2(dist, startValue);\n    var inverseDist = getScaleDist(moveable, dist, datas.fixedDirection, fixedPosition, datas);\n    var inverseDelta = minus(inverseDist, datas.prevInverseDist || [0, 0]);\n    datas.prevDist = dist;\n    datas.prevInverseDist = inverseDist;\n\n    if (scale[0] === prevDist[0] && scale[1] === prevDist[1] && inverseDelta.every(function (num) {\n      return !num;\n    }) && !parentMoveable) {\n      return false;\n    }\n\n    var nextTransform = convertTransformFormat(datas, \"scale(\".concat(scale.join(\", \"), \")\"), \"scale(\".concat(dist.join(\", \"), \")\"));\n    var params = fillParams(moveable, e, __assign({\n      offsetWidth: startOffsetWidth,\n      offsetHeight: startOffsetHeight,\n      direction: direction,\n      scale: scale,\n      dist: dist,\n      delta: delta,\n      isPinch: !!isPinch\n    }, fillTransformEvent(moveable, nextTransform, inverseDelta, isPinch, e)));\n    triggerEvent(moveable, \"onScale\", params);\n    return params;\n  },\n  dragControlEnd: function (moveable, e) {\n    var datas = e.datas;\n\n    if (!datas.isScale) {\n      return false;\n    }\n\n    datas.isScale = false;\n    var scaleEndParam = fillEndParams(moveable, e, {});\n    triggerEvent(moveable, \"onScaleEnd\", scaleEndParam);\n    return scaleEndParam;\n  },\n  dragGroupControlCondition: directionCondition,\n  dragGroupControlStart: function (moveable, e) {\n    var datas = e.datas;\n    var params = this.dragControlStart(moveable, e);\n\n    if (!params) {\n      return false;\n    }\n\n    var originalEvents = fillChildEvents(moveable, \"resizable\", e);\n\n    function setDist(child, ev) {\n      var fixedDirection = datas.fixedDirection;\n      var fixedPosition = datas.fixedPosition;\n      var startPositions = ev.datas.startPositions || getAbsolutePosesByState(child.state);\n      var pos = getPosByDirection(startPositions, fixedDirection);\n\n      var _a = calculate(createRotateMatrix(-moveable.rotation / 180 * Math.PI, 3), [pos[0] - fixedPosition[0], pos[1] - fixedPosition[1], 1], 3),\n          originalX = _a[0],\n          originalY = _a[1];\n\n      ev.datas.originalX = originalX;\n      ev.datas.originalY = originalY;\n      return ev;\n    }\n\n    datas.moveableScale = moveable.scale;\n    var events = triggerChildAbles(moveable, this, \"dragControlStart\", e, function (child, ev) {\n      return setDist(child, ev);\n    });\n\n    var setFixedDirection = function (fixedDirection) {\n      params.setFixedDirection(fixedDirection);\n      events.forEach(function (ev, i) {\n        ev.setFixedDirection(fixedDirection);\n        setDist(ev.moveable, originalEvents[i]);\n      });\n    };\n\n    datas.setFixedDirection = setFixedDirection;\n\n    var nextParams = __assign(__assign({}, params), {\n      targets: moveable.props.targets,\n      events: events,\n      setFixedDirection: setFixedDirection\n    });\n\n    var result = triggerEvent(moveable, \"onScaleGroupStart\", nextParams);\n    datas.isScale = result !== false;\n    return datas.isScale ? nextParams : false;\n  },\n  dragGroupControl: function (moveable, e) {\n    var datas = e.datas;\n\n    if (!datas.isScale) {\n      return;\n    }\n\n    catchEvent(moveable, \"onBeforeScale\", function (parentEvent) {\n      triggerEvent(moveable, \"onBeforeScaleGroup\", fillParams(moveable, e, __assign(__assign({}, parentEvent), {\n        targets: moveable.props.targets\n      }), true));\n    });\n    var params = this.dragControl(moveable, e);\n\n    if (!params) {\n      return;\n    }\n\n    var moveableScale = datas.moveableScale;\n    moveable.scale = [params.scale[0] * moveableScale[0], params.scale[1] * moveableScale[1]];\n    var keepRatio = moveable.props.keepRatio;\n    var dist = params.dist,\n        scale = params.scale;\n    var fixedPosition = datas.fixedPosition;\n    var events = triggerChildAbles(moveable, this, \"dragControl\", e, function (_, ev) {\n      var _a = calculate(createRotateMatrix(moveable.rotation / 180 * Math.PI, 3), [ev.datas.originalX * dist[0], ev.datas.originalY * dist[1], 1], 3),\n          clientX = _a[0],\n          clientY = _a[1];\n\n      return __assign(__assign({}, ev), {\n        parentDist: null,\n        parentScale: scale,\n        parentKeepRatio: keepRatio,\n        dragClient: plus(fixedPosition, [clientX, clientY])\n      });\n    });\n\n    var nextParams = __assign({\n      targets: moveable.props.targets,\n      events: events\n    }, params);\n\n    triggerEvent(moveable, \"onScaleGroup\", nextParams);\n    return nextParams;\n  },\n  dragGroupControlEnd: function (moveable, e) {\n    var isDrag = e.isDrag,\n        datas = e.datas;\n\n    if (!datas.isScale) {\n      return;\n    }\n\n    this.dragControlEnd(moveable, e);\n    var events = triggerChildAbles(moveable, this, \"dragControlEnd\", e);\n    var nextParams = fillEndParams(moveable, e, {\n      targets: moveable.props.targets,\n      events: events\n    });\n    triggerEvent(moveable, \"onScaleGroupEnd\", nextParams);\n    return isDrag;\n  },\n\n  /**\n   * @method Moveable.Scalable#request\n   * @param {Moveable.Scalable.ScalableRequestParam} e - the Scalable's request parameter\n   * @return {Moveable.Requester} Moveable Requester\n   * @example\n    * // Instantly Request (requestStart - request - requestEnd)\n   * moveable.request(\"scalable\", { deltaWidth: 10, deltaHeight: 10 }, true);\n   *\n   * // requestStart\n   * const requester = moveable.request(\"scalable\");\n   *\n   * // request\n   * requester.request({ deltaWidth: 10, deltaHeight: 10 });\n   * requester.request({ deltaWidth: 10, deltaHeight: 10 });\n   * requester.request({ deltaWidth: 10, deltaHeight: 10 });\n   *\n   * // requestEnd\n   * requester.requestEnd();\n   */\n  request: function () {\n    var datas = {};\n    var distWidth = 0;\n    var distHeight = 0;\n    return {\n      isControl: true,\n      requestStart: function (e) {\n        return {\n          datas: datas,\n          parentDirection: e.direction || [1, 1]\n        };\n      },\n      request: function (e) {\n        distWidth += e.deltaWidth;\n        distHeight += e.deltaHeight;\n        return {\n          datas: datas,\n          parentDist: [distWidth, distHeight],\n          parentKeepRatio: e.keepRatio\n        };\n      },\n      requestEnd: function () {\n        return {\n          datas: datas,\n          isDrag: true\n        };\n      }\n    };\n  }\n};\n/**\n * Whether or not target can scaled.\n *\n * @name Moveable.Scalable#scalable\n * @default false\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.scalable = true;\n */\n\n/**\n * throttle of scaleX, scaleY when scale.\n * @name Moveable.Scalable#throttleScale\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.throttleScale = 0.1;\n */\n\n/**\n * Set directions to show the control box. (default: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"])\n * @name Moveable.Scalable#renderDirections\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     scalable: true,\n *   renderDirections: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"],\n * });\n *\n * moveable.renderDirections = [\"nw\", \"ne\", \"sw\", \"se\"];\n */\n\n/**\n * When resize or scale, keeps a ratio of the width, height. (default: false)\n * @name Moveable.Scalable#keepRatio\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     scalable: true,\n * });\n *\n * moveable.keepRatio = true;\n */\n\n/**\n * When the scale starts, the scaleStart event is called.\n * @memberof Moveable.Scalable\n * @event scaleStart\n * @param {Moveable.Scalable.OnScaleStart} - Parameters for the scaleStart event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { scalable: true });\n * moveable.on(\"scaleStart\", ({ target }) => {\n *     console.log(target);\n * });\n */\n\n/**\n * When scaling, `beforeScale` is called before `scale` occurs. In `beforeScale`, you can get and set the pre-value before scaling.\n * @memberof Moveable.Scalable\n * @event beforeScale\n * @param {Moveable.Scalable.OnBeforeScale} - Parameters for the `beforeScale` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { scalable: true });\n * moveable.on(\"beforeScale\", ({ setFixedDirection }) => {\n *     if (shiftKey) {\n *        setFixedDirection([0, 0]);\n *     }\n * });\n * moveable.on(\"scale\", ({ target, transform, dist }) => {\n *     target.style.transform = transform;\n * });\n */\n\n/**\n * When scaling, the `scale` event is called.\n * @memberof Moveable.Scalable\n * @event scale\n * @param {Moveable.Scalable.OnScale} - Parameters for the `scale` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { scalable: true });\n * moveable.on(\"scale\", ({ target, transform, dist }) => {\n *     target.style.transform = transform;\n * });\n */\n\n/**\n * When the scale finishes, the `scaleEnd` event is called.\n * @memberof Moveable.Scalable\n * @event scaleEnd\n * @param {Moveable.Scalable.OnScaleEnd} - Parameters for the `scaleEnd` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { scalable: true });\n * moveable.on(\"scaleEnd\", ({ target, isDrag }) => {\n *     console.log(target, isDrag);\n * });\n */\n\n/**\n* When the group scale starts, the `scaleGroupStart` event is called.\n* @memberof Moveable.Scalable\n* @event scaleGroupStart\n* @param {Moveable.Scalable.OnScaleGroupStart} - Parameters for the `scaleGroupStart` event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\n*     scalable: true\n* });\n* moveable.on(\"scaleGroupStart\", ({ targets }) => {\n*     console.log(\"onScaleGroupStart\", targets);\n* });\n*/\n\n/**\n* When the group scale, the `scaleGroup` event is called.\n* @memberof Moveable.Scalable\n* @event scaleGroup\n* @param {Moveable.Scalable.OnScaleGroup} - Parameters for the `scaleGroup` event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\n*     scalable: true\n* });\n* moveable.on(\"scaleGroup\", ({ targets, events }) => {\n*     console.log(\"onScaleGroup\", targets);\n*     events.forEach(ev => {\n*         const target = ev.target;\n*         // ev.drag is a drag event that occurs when the group scale.\n*         const left = ev.drag.beforeDist[0];\n*         const top = ev.drag.beforeDist[1];\n*         const scaleX = ev.scale[0];\n*         const scaleY = ev.scale[1];\n*     });\n* });\n*/\n\n/**\n * When the group scale finishes, the `scaleGroupEnd` event is called.\n * @memberof Moveable.Scalable\n * @event scaleGroupEnd\n * @param {Moveable.Scalable.OnScaleGroupEnd} - Parameters for the `scaleGroupEnd` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n *     scalable: true\n * });\n * moveable.on(\"scaleGroupEnd\", ({ targets, isDrag }) => {\n *     console.log(\"onScaleGroupEnd\", targets, isDrag);\n * });\n */\n\nfunction getMiddleLinePos(pos1, pos2) {\n  return pos1.map(function (pos, i) {\n    return dot(pos, pos2[i], 1, 2);\n  });\n}\n\nfunction getTriangleRad(pos1, pos2, pos3) {\n  // pos1 Rad\n  var rad1 = getRad(pos1, pos2);\n  var rad2 = getRad(pos1, pos3);\n  var rad = rad2 - rad1;\n  return rad >= 0 ? rad : rad + 2 * Math.PI;\n}\n\nfunction isValidPos(poses1, poses2) {\n  var rad1 = getTriangleRad(poses1[0], poses1[1], poses1[2]);\n  var rad2 = getTriangleRad(poses2[0], poses2[1], poses2[2]);\n  var pi = Math.PI;\n\n  if (rad1 >= pi && rad2 <= pi || rad1 <= pi && rad2 >= pi) {\n    return false;\n  }\n\n  return true;\n}\n/**\n * @namespace Moveable.Warpable\n * @description Warpable indicates whether the target can be warped(distorted, bented).\n */\n\n\nvar Warpable = {\n  name: \"warpable\",\n  ableGroup: \"size\",\n  props: {\n    warpable: Boolean,\n    renderDirections: Array,\n    edge: Boolean\n  },\n  events: {\n    onWarpStart: \"warpStart\",\n    onWarp: \"warp\",\n    onWarpEnd: \"warpEnd\"\n  },\n  viewClassName: getDirectionViewClassName(\"warpable\"),\n  render: function (moveable, React) {\n    var _a = moveable.props,\n        resizable = _a.resizable,\n        scalable = _a.scalable,\n        warpable = _a.warpable,\n        zoom = _a.zoom;\n\n    if (resizable || scalable || !warpable) {\n      return [];\n    }\n\n    var _b = moveable.state,\n        pos1 = _b.pos1,\n        pos2 = _b.pos2,\n        pos3 = _b.pos3,\n        pos4 = _b.pos4;\n    var linePosFrom1 = getMiddleLinePos(pos1, pos2);\n    var linePosFrom2 = getMiddleLinePos(pos2, pos1);\n    var linePosFrom3 = getMiddleLinePos(pos1, pos3);\n    var linePosFrom4 = getMiddleLinePos(pos3, pos1);\n    var linePosTo1 = getMiddleLinePos(pos3, pos4);\n    var linePosTo2 = getMiddleLinePos(pos4, pos3);\n    var linePosTo3 = getMiddleLinePos(pos2, pos4);\n    var linePosTo4 = getMiddleLinePos(pos4, pos2);\n    return __spreadArray([React.createElement(\"div\", {\n      className: prefix(\"line\"),\n      key: \"middeLine1\",\n      style: getLineStyle(linePosFrom1, linePosTo1, zoom)\n    }), React.createElement(\"div\", {\n      className: prefix(\"line\"),\n      key: \"middeLine2\",\n      style: getLineStyle(linePosFrom2, linePosTo2, zoom)\n    }), React.createElement(\"div\", {\n      className: prefix(\"line\"),\n      key: \"middeLine3\",\n      style: getLineStyle(linePosFrom3, linePosTo3, zoom)\n    }), React.createElement(\"div\", {\n      className: prefix(\"line\"),\n      key: \"middeLine4\",\n      style: getLineStyle(linePosFrom4, linePosTo4, zoom)\n    })], renderAllDirections(moveable, \"warpable\", React), true);\n  },\n  dragControlCondition: function (moveable, e) {\n    if (e.isRequest) {\n      return false;\n    }\n\n    var target = e.inputEvent.target;\n    return hasClass(target, prefix(\"direction\")) && hasClass(target, prefix(\"warpable\"));\n  },\n  dragControlStart: function (moveable, e) {\n    var datas = e.datas,\n        inputEvent = e.inputEvent;\n    var target = moveable.props.target;\n    var inputTarget = inputEvent.target;\n    var direction = getDirection(inputTarget, datas);\n\n    if (!direction || !target) {\n      return false;\n    }\n\n    var state = moveable.state;\n    var transformOrigin = state.transformOrigin,\n        is3d = state.is3d,\n        targetTransform = state.targetTransform,\n        targetMatrix = state.targetMatrix,\n        width = state.width,\n        height = state.height,\n        left = state.left,\n        top = state.top;\n    datas.datas = {};\n    datas.targetTransform = targetTransform;\n    datas.warpTargetMatrix = is3d ? targetMatrix : convertDimension(targetMatrix, 3, 4);\n    datas.targetInverseMatrix = ignoreDimension(invert(datas.warpTargetMatrix, 4), 3, 4);\n    datas.direction = direction;\n    datas.left = left;\n    datas.top = top;\n    datas.poses = [[0, 0], [width, 0], [0, height], [width, height]].map(function (p) {\n      return minus(p, transformOrigin);\n    });\n    datas.nextPoses = datas.poses.map(function (_a) {\n      var x = _a[0],\n          y = _a[1];\n      return calculate(datas.warpTargetMatrix, [x, y, 0, 1], 4);\n    });\n    datas.startValue = createIdentityMatrix(4);\n    datas.prevMatrix = createIdentityMatrix(4);\n    datas.absolutePoses = getAbsolutePosesByState(state);\n    datas.posIndexes = getPosIndexesByDirection(direction);\n    setDragStart(moveable, e);\n    setDefaultTransformIndex(e, \"matrix3d\");\n    state.snapRenderInfo = {\n      request: e.isRequest,\n      direction: direction\n    };\n    var params = fillParams(moveable, e, __assign({\n      set: function (matrix) {\n        datas.startValue = matrix;\n      }\n    }, fillTransformStartEvent(e)));\n    var result = triggerEvent(moveable, \"onWarpStart\", params);\n\n    if (result !== false) {\n      datas.isWarp = true;\n    }\n\n    return datas.isWarp;\n  },\n  dragControl: function (moveable, e) {\n    var datas = e.datas,\n        isRequest = e.isRequest;\n    var distX = e.distX,\n        distY = e.distY;\n    var targetInverseMatrix = datas.targetInverseMatrix,\n        prevMatrix = datas.prevMatrix,\n        isWarp = datas.isWarp,\n        startValue = datas.startValue,\n        poses = datas.poses,\n        posIndexes = datas.posIndexes,\n        absolutePoses = datas.absolutePoses;\n\n    if (!isWarp) {\n      return false;\n    }\n\n    resolveTransformEvent(e, \"matrix3d\");\n\n    if (hasGuidelines(moveable, \"warpable\")) {\n      var selectedPoses = posIndexes.map(function (index) {\n        return absolutePoses[index];\n      });\n\n      if (selectedPoses.length > 1) {\n        selectedPoses.push([(selectedPoses[0][0] + selectedPoses[1][0]) / 2, (selectedPoses[0][1] + selectedPoses[1][1]) / 2]);\n      }\n\n      var _a = checkMoveableSnapBounds(moveable, isRequest, {\n        horizontal: selectedPoses.map(function (pos) {\n          return pos[1] + distY;\n        }),\n        vertical: selectedPoses.map(function (pos) {\n          return pos[0] + distX;\n        })\n      }),\n          horizontalSnapInfo = _a.horizontal,\n          verticalSnapInfo = _a.vertical;\n\n      distY -= horizontalSnapInfo.offset;\n      distX -= verticalSnapInfo.offset;\n    }\n\n    var dist = getDragDist({\n      datas: datas,\n      distX: distX,\n      distY: distY\n    }, true);\n    var nextPoses = datas.nextPoses.slice();\n    posIndexes.forEach(function (index) {\n      nextPoses[index] = plus(nextPoses[index], dist);\n    });\n\n    if (!NEARBY_POS.every(function (nearByPoses) {\n      return isValidPos(nearByPoses.map(function (i) {\n        return poses[i];\n      }), nearByPoses.map(function (i) {\n        return nextPoses[i];\n      }));\n    })) {\n      return false;\n    }\n\n    var h = createWarpMatrix(poses[0], poses[2], poses[1], poses[3], nextPoses[0], nextPoses[2], nextPoses[1], nextPoses[3]);\n\n    if (!h.length) {\n      return false;\n    } // B * A * M\n\n\n    var afterMatrix = multiply(targetInverseMatrix, h, 4); // B * M * A\n\n    var matrix = getTransfromMatrix(datas, afterMatrix, true);\n    var delta = multiply(invert(prevMatrix, 4), matrix, 4);\n    datas.prevMatrix = matrix;\n    var totalMatrix = multiply(startValue, matrix, 4);\n    var nextTransform = convertTransformFormat(datas, \"matrix3d(\".concat(totalMatrix.join(\", \"), \")\"), \"matrix3d(\".concat(matrix.join(\", \"), \")\"));\n    fillOriginalTransform(e, nextTransform);\n    triggerEvent(moveable, \"onWarp\", fillParams(moveable, e, __assign({\n      delta: delta,\n      matrix: totalMatrix,\n      dist: matrix,\n      multiply: multiply,\n      transform: nextTransform\n    }, fillCSSObject({\n      transform: nextTransform\n    }, e))));\n    return true;\n  },\n  dragControlEnd: function (moveable, e) {\n    var datas = e.datas,\n        isDrag = e.isDrag;\n\n    if (!datas.isWarp) {\n      return false;\n    }\n\n    datas.isWarp = false;\n    triggerEvent(moveable, \"onWarpEnd\", fillEndParams(moveable, e, {}));\n    return isDrag;\n  }\n};\n/**\n * Whether or not target can be warped. (default: false)\n * @name Moveable.Warpable#warpable\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.warpable = true;\n */\n\n/**\n* Set directions to show the control box. (default: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"])\n* @name Moveable.Warpable#renderDirections\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     warpable: true,\n*     renderDirections: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"],\n* });\n*\n* moveable.renderDirections = [\"nw\", \"ne\", \"sw\", \"se\"];\n*/\n\n/**\n* When the warp starts, the warpStart event is called.\n* @memberof Moveable.Warpable\n* @event warpStart\n* @param {Moveable.Warpable.OnWarpStart} - Parameters for the warpStart event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, { warpable: true });\n* moveable.on(\"warpStart\", ({ target }) => {\n*     console.log(target);\n* });\n*/\n\n/**\n * When warping, the warp event is called.\n * @memberof Moveable.Warpable\n * @event warp\n * @param {Moveable.Warpable.OnWarp} - Parameters for the warp event\n * @example\n * import Moveable from \"moveable\";\n * let matrix = [\n *  1, 0, 0, 0,\n *  0, 1, 0, 0,\n *  0, 0, 1, 0,\n *  0, 0, 0, 1,\n * ];\n * const moveable = new Moveable(document.body, { warpable: true });\n * moveable.on(\"warp\", ({ target, transform, delta, multiply }) => {\n *    // target.style.transform = transform;\n *    matrix = multiply(matrix, delta);\n *    target.style.transform = `matrix3d(${matrix.join(\",\")})`;\n * });\n */\n\n/**\n * When the warp finishes, the warpEnd event is called.\n * @memberof Moveable.Warpable\n * @event warpEnd\n * @param {Moveable.Warpable.OnWarpEnd} - Parameters for the warpEnd event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { warpable: true });\n * moveable.on(\"warpEnd\", ({ target, isDrag }) => {\n *     console.log(target, isDrag);\n * });\n */\n\nvar AREA_PIECES = /*#__PURE__*/prefix(\"area-pieces\");\nvar AREA_PIECE = /*#__PURE__*/prefix(\"area-piece\");\nvar AVOID = /*#__PURE__*/prefix(\"avoid\");\nvar VIEW_DRAGGING = prefix(\"view-dragging\");\n\nfunction restoreStyle(moveable) {\n  var el = moveable.areaElement;\n\n  if (!el) {\n    return;\n  }\n\n  var _a = moveable.state,\n      width = _a.width,\n      height = _a.height;\n  removeClass(el, AVOID);\n  el.style.cssText += \"left: 0px; top: 0px; width: \".concat(width, \"px; height: \").concat(height, \"px\");\n}\n\nfunction renderPieces(React) {\n  return React.createElement(\"div\", {\n    key: \"area_pieces\",\n    className: AREA_PIECES\n  }, React.createElement(\"div\", {\n    className: AREA_PIECE\n  }), React.createElement(\"div\", {\n    className: AREA_PIECE\n  }), React.createElement(\"div\", {\n    className: AREA_PIECE\n  }), React.createElement(\"div\", {\n    className: AREA_PIECE\n  }));\n}\n\nvar DragArea = {\n  name: \"dragArea\",\n  props: {\n    dragArea: Boolean,\n    passDragArea: Boolean\n  },\n  events: {\n    onClick: \"click\",\n    onClickGroup: \"clickGroup\"\n  },\n  render: function (moveable, React) {\n    var _a = moveable.props,\n        target = _a.target,\n        dragArea = _a.dragArea,\n        groupable = _a.groupable,\n        passDragArea = _a.passDragArea;\n\n    var _b = moveable.getState(),\n        width = _b.width,\n        height = _b.height,\n        renderPoses = _b.renderPoses;\n\n    var className = passDragArea ? prefix(\"area\", \"pass\") : prefix(\"area\");\n\n    if (groupable) {\n      return [React.createElement(\"div\", {\n        key: \"area\",\n        ref: ref(moveable, \"areaElement\"),\n        className: className\n      }), renderPieces(React)];\n    }\n\n    if (!target || !dragArea) {\n      return [];\n    }\n\n    var h = createWarpMatrix([0, 0], [width, 0], [0, height], [width, height], renderPoses[0], renderPoses[1], renderPoses[2], renderPoses[3]);\n    var transform = h.length ? makeMatrixCSS(h, true) : \"none\";\n    return [React.createElement(\"div\", {\n      key: \"area\",\n      ref: ref(moveable, \"areaElement\"),\n      className: className,\n      style: {\n        top: \"0px\",\n        left: \"0px\",\n        width: \"\".concat(width, \"px\"),\n        height: \"\".concat(height, \"px\"),\n        transformOrigin: \"0 0\",\n        transform: transform\n      }\n    }), renderPieces(React)];\n  },\n  dragStart: function (moveable, _a) {\n    var datas = _a.datas,\n        clientX = _a.clientX,\n        clientY = _a.clientY,\n        inputEvent = _a.inputEvent;\n\n    if (!inputEvent) {\n      return false;\n    }\n\n    datas.isDragArea = false;\n    var areaElement = moveable.areaElement;\n    var state = moveable.state;\n    var moveableClientRect = state.moveableClientRect,\n        renderPoses = state.renderPoses,\n        rootMatrix = state.rootMatrix,\n        is3d = state.is3d;\n    var left = moveableClientRect.left,\n        top = moveableClientRect.top;\n\n    var _b = getRect(renderPoses),\n        relativeLeft = _b.left,\n        relativeTop = _b.top,\n        width = _b.width,\n        height = _b.height;\n\n    var n = is3d ? 4 : 3;\n\n    var _c = calculateInversePosition(rootMatrix, [clientX - left, clientY - top], n),\n        posX = _c[0],\n        posY = _c[1];\n\n    posX -= relativeLeft;\n    posY -= relativeTop;\n    var rects = [{\n      left: relativeLeft,\n      top: relativeTop,\n      width: width,\n      height: posY - 10\n    }, {\n      left: relativeLeft,\n      top: relativeTop,\n      width: posX - 10,\n      height: height\n    }, {\n      left: relativeLeft,\n      top: relativeTop + posY + 10,\n      width: width,\n      height: height - posY - 10\n    }, {\n      left: relativeLeft + posX + 10,\n      top: relativeTop,\n      width: width - posX - 10,\n      height: height\n    }];\n    var children = [].slice.call(areaElement.nextElementSibling.children);\n    rects.forEach(function (rect, i) {\n      children[i].style.cssText = \"left: \".concat(rect.left, \"px;top: \").concat(rect.top, \"px; width: \").concat(rect.width, \"px; height: \").concat(rect.height, \"px;\");\n    });\n    addClass(areaElement, AVOID);\n    state.disableNativeEvent = true;\n    return;\n  },\n  drag: function (moveable, _a) {\n    var datas = _a.datas,\n        inputEvent = _a.inputEvent;\n    this.enableNativeEvent(moveable);\n\n    if (!inputEvent) {\n      return false;\n    }\n\n    if (!datas.isDragArea) {\n      datas.isDragArea = true;\n      restoreStyle(moveable);\n    }\n  },\n  dragEnd: function (moveable, e) {\n    this.enableNativeEvent(moveable);\n    var inputEvent = e.inputEvent,\n        datas = e.datas;\n\n    if (!inputEvent) {\n      return false;\n    }\n\n    if (!datas.isDragArea) {\n      restoreStyle(moveable);\n    }\n  },\n  dragGroupStart: function (moveable, e) {\n    return this.dragStart(moveable, e);\n  },\n  dragGroup: function (moveable, e) {\n    return this.drag(moveable, e);\n  },\n  dragGroupEnd: function (moveable, e) {\n    return this.dragEnd(moveable, e);\n  },\n  unset: function (moveable) {\n    restoreStyle(moveable);\n    moveable.state.disableNativeEvent = false;\n  },\n  enableNativeEvent: function (moveable) {\n    var state = moveable.state;\n\n    if (state.disableNativeEvent) {\n      requestAnimationFrame(function () {\n        state.disableNativeEvent = false;\n      });\n    }\n  }\n};\n/**\n * Add an event to the moveable area instead of the target for stopPropagation. (default: false, true in group)\n * @name Moveable#dragArea\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *  dragArea: false,\n * });\n */\n\n/**\n * Set `pointerEvents: none;` css to pass events in dragArea. (default: false)\n * @name Moveable#passDragArea\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *  dragArea: false,\n * });\n */\n\nvar Origin = makeAble(\"origin\", {\n  render: function (moveable, React) {\n    var zoom = moveable.props.zoom;\n\n    var _a = moveable.getState(),\n        beforeOrigin = _a.beforeOrigin,\n        rotation = _a.rotation;\n\n    return [React.createElement(\"div\", {\n      className: prefix(\"control\", \"origin\"),\n      style: getControlTransform(rotation, zoom, beforeOrigin),\n      key: \"beforeOrigin\"\n    })];\n  }\n});\n/**\n * Whether or not the origin controlbox will be visible or not (default: true)\n * @name Moveable#origin\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.origin = true;\n */\n\nfunction getDefaultScrollPosition(e) {\n  var scrollContainer = e.scrollContainer;\n  return [scrollContainer.scrollLeft, scrollContainer.scrollTop];\n}\n/**\n * @namespace Moveable.Scrollable\n * @description Whether or not target can be scrolled to the scroll container (default: false)\n */\n\n\nvar Scrollable = {\n  name: \"scrollable\",\n  canPinch: true,\n  props: {\n    scrollable: Boolean,\n    scrollContainer: Object,\n    scrollThreshold: Number,\n    scrollThrottleTime: Number,\n    getScrollPosition: Function,\n    scrollOptions: Object\n  },\n  events: {\n    onScroll: \"scroll\",\n    onScrollGroup: \"scrollGroup\"\n  },\n  dragRelation: \"strong\",\n  dragStart: function (moveable, e) {\n    var props = moveable.props;\n    var _a = props.scrollContainer,\n        scrollContainer = _a === void 0 ? moveable.getContainer() : _a,\n        scrollOptions = props.scrollOptions;\n    var dragScroll = new DragScroll();\n    var scrollContainerElement = getRefTarget(scrollContainer, true);\n    e.datas.dragScroll = dragScroll;\n    moveable.state.dragScroll = dragScroll;\n    var gestoName = e.isControl ? \"controlGesto\" : \"targetGesto\";\n    var targets = e.targets;\n    dragScroll.on(\"scroll\", function (_a) {\n      var container = _a.container,\n          direction = _a.direction;\n      var params = fillParams(moveable, e, {\n        scrollContainer: container,\n        direction: direction\n      });\n      var eventName = targets ? \"onScrollGroup\" : \"onScroll\";\n\n      if (targets) {\n        params.targets = targets;\n      }\n\n      triggerEvent(moveable, eventName, params);\n    }).on(\"move\", function (_a) {\n      var offsetX = _a.offsetX,\n          offsetY = _a.offsetY,\n          inputEvent = _a.inputEvent;\n      moveable[gestoName].scrollBy(offsetX, offsetY, inputEvent.inputEvent, true);\n    }).on(\"scrollDrag\", function (_a) {\n      var next = _a.next;\n      next(moveable[gestoName].getCurrentEvent());\n    });\n    dragScroll.dragStart(e, __assign({\n      container: scrollContainerElement\n    }, scrollOptions));\n  },\n  checkScroll: function (moveable, e) {\n    var dragScroll = e.datas.dragScroll;\n\n    if (!dragScroll) {\n      return;\n    }\n\n    var _a = moveable.props,\n        _b = _a.scrollContainer,\n        scrollContainer = _b === void 0 ? moveable.getContainer() : _b,\n        _c = _a.scrollThreshold,\n        scrollThreshold = _c === void 0 ? 0 : _c,\n        _d = _a.scrollThrottleTime,\n        scrollThrottleTime = _d === void 0 ? 0 : _d,\n        _e = _a.getScrollPosition,\n        getScrollPosition = _e === void 0 ? getDefaultScrollPosition : _e,\n        scrollOptions = _a.scrollOptions;\n    dragScroll.drag(e, __assign({\n      container: scrollContainer,\n      threshold: scrollThreshold,\n      throttleTime: scrollThrottleTime,\n      getScrollPosition: function (ev) {\n        return getScrollPosition({\n          scrollContainer: ev.container,\n          direction: ev.direction\n        });\n      }\n    }, scrollOptions));\n    return true;\n  },\n  drag: function (moveable, e) {\n    return this.checkScroll(moveable, e);\n  },\n  dragEnd: function (moveable, e) {\n    e.datas.dragScroll.dragEnd();\n    e.datas.dragScroll = null;\n  },\n  dragControlStart: function (moveable, e) {\n    return this.dragStart(moveable, __assign(__assign({}, e), {\n      isControl: true\n    }));\n  },\n  dragControl: function (moveable, e) {\n    return this.drag(moveable, e);\n  },\n  dragControlEnd: function (moveable, e) {\n    return this.dragEnd(moveable, e);\n  },\n  dragGroupStart: function (moveable, e) {\n    return this.dragStart(moveable, __assign(__assign({}, e), {\n      targets: moveable.props.targets\n    }));\n  },\n  dragGroup: function (moveable, e) {\n    return this.drag(moveable, __assign(__assign({}, e), {\n      targets: moveable.props.targets\n    }));\n  },\n  dragGroupEnd: function (moveable, e) {\n    return this.dragEnd(moveable, __assign(__assign({}, e), {\n      targets: moveable.props.targets\n    }));\n  },\n  dragGroupControlStart: function (moveable, e) {\n    return this.dragStart(moveable, __assign(__assign({}, e), {\n      targets: moveable.props.targets,\n      isControl: true\n    }));\n  },\n  dragGroupControl: function (moveable, e) {\n    return this.drag(moveable, __assign(__assign({}, e), {\n      targets: moveable.props.targets\n    }));\n  },\n  dragGroupControEnd: function (moveable, e) {\n    return this.dragEnd(moveable, __assign(__assign({}, e), {\n      targets: moveable.props.targets\n    }));\n  },\n  unset: function (moveable) {\n    var _a;\n\n    var state = moveable.state;\n    (_a = state.dragScroll) === null || _a === void 0 ? void 0 : _a.dragEnd();\n    state.dragScroll = null;\n  }\n};\n/**\n * When the drag cursor leaves the scrollContainer, the `scroll` event occur to scroll.\n * @memberof Moveable.Scrollable\n * @event scroll\n * @param {Moveable.Scrollable.OnScroll} - Parameters for the `scroll` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: document.querySelector(\".target\"),\n * });\n * moveable.on(\"scroll\", ({ scrollContainer, direction }) => {\n *   scrollContainer.scrollLeft += direction[0] * 10;\n *   scrollContainer.scrollTop += direction[1] * 10;\n * });\n */\n\n/**\n * When the drag cursor leaves the scrollContainer, the `scrollGroup` event occur to scroll in group.\n * @memberof Moveable.Scrollable\n * @event scrollGroup\n * @param {Moveable.Scrollable.OnScrollGroup} - Parameters for the `scrollGroup` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n * });\n * moveable.on(\"scroll\", ({ scrollContainer, direction }) => {\n *   scrollContainer.scrollLeft += direction[0] * 10;\n *   scrollContainer.scrollTop += direction[1] * 10;\n * });\n */\n\nvar Default = {\n  name: \"\",\n  props: {\n    target: Object,\n    dragTarget: Object,\n    container: Object,\n    portalContainer: Object,\n    rootContainer: Object,\n    useResizeObserver: Boolean,\n    zoom: Number,\n    transformOrigin: Array,\n    edge: Object,\n    ables: Array,\n    className: String,\n    pinchThreshold: Number,\n    pinchOutside: Boolean,\n    triggerAblesSimultaneously: Boolean,\n    checkInput: Boolean,\n    cspNonce: String,\n    translateZ: Number,\n    hideDefaultLines: Boolean,\n    props: Object,\n    flushSync: Function,\n    stopPropagation: Boolean,\n    preventClickEventOnDrag: Boolean,\n    preventClickDefault: Boolean,\n    viewContainer: Object,\n    persistData: Object,\n    useAccuratePosition: Boolean,\n    firstRenderState: Object,\n    linePadding: Boolean\n  },\n  events: {\n    onChangeTargets: \"changeTargets\"\n  }\n};\nvar Padding = makeAble(\"padding\", {\n  render: function (moveable, React) {\n    var props = moveable.props;\n\n    if (props.dragArea) {\n      return [];\n    }\n\n    var padding = props.padding || {};\n    var _a = padding.left,\n        left = _a === void 0 ? 0 : _a,\n        _b = padding.top,\n        top = _b === void 0 ? 0 : _b,\n        _c = padding.right,\n        right = _c === void 0 ? 0 : _c,\n        _d = padding.bottom,\n        bottom = _d === void 0 ? 0 : _d;\n\n    var _e = moveable.getState(),\n        renderPoses = _e.renderPoses,\n        pos1 = _e.pos1,\n        pos2 = _e.pos2,\n        pos3 = _e.pos3,\n        pos4 = _e.pos4;\n\n    var poses = [pos1, pos2, pos3, pos4];\n    var paddingDirections = [];\n\n    if (left > 0) {\n      paddingDirections.push([0, 2]);\n    }\n\n    if (top > 0) {\n      paddingDirections.push([0, 1]);\n    }\n\n    if (right > 0) {\n      paddingDirections.push([1, 3]);\n    }\n\n    if (bottom > 0) {\n      paddingDirections.push([2, 3]);\n    }\n\n    return paddingDirections.map(function (_a, i) {\n      var dir1 = _a[0],\n          dir2 = _a[1];\n      var paddingPos1 = poses[dir1];\n      var paddingPos2 = poses[dir2];\n      var paddingPos3 = renderPoses[dir1];\n      var paddingPos4 = renderPoses[dir2];\n      var h = createWarpMatrix([0, 0], [100, 0], [0, 100], [100, 100], paddingPos1, paddingPos2, paddingPos3, paddingPos4);\n\n      if (!h.length) {\n        return undefined;\n      }\n\n      return React.createElement(\"div\", {\n        key: \"padding\".concat(i),\n        className: prefix(\"padding\"),\n        style: {\n          transform: makeMatrixCSS(h, true)\n        }\n      });\n    });\n  }\n});\n/**\n * Add padding around the target to increase the drag area.\n * @name Moveable#padding\n * @default null\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *  target: document.querySelector(\".target\"),\n *  padding: { left: 0, top: 0, right: 0, bottom: 0 },\n * });\n * moveable.padding = { left: 10, top: 10, right: 10, bottom: 10 },\n * moveable.updateRect();\n */\n\nvar RADIUS_DIRECTIONS = [\"nw\", \"ne\", \"se\", \"sw\"];\n\nfunction calculateRatio(values, size) {\n  var sumSize = values[0] + values[1];\n  var sumRatio = sumSize > size ? size / sumSize : 1;\n  values[0] *= sumRatio;\n  values[1] = size - values[1] * sumRatio;\n  return values;\n}\n\nvar HORIZONTAL_RADIUS_ORDER = [1, 2, 5, 6];\nvar VERTICAL_RADIUS_ORDER = [0, 3, 4, 7];\nvar HORIZONTAL_RADIUS_DIRECTIONS = [1, -1, -1, 1];\nvar VERTICAL_RADIUS_DIRECTIONS = [1, 1, -1, -1];\n\nfunction getRadiusStyles(nextPoses, isRelative, width, height, left, top, right, bottom) {\n  if (left === void 0) {\n    left = 0;\n  }\n\n  if (top === void 0) {\n    top = 0;\n  }\n\n  if (right === void 0) {\n    right = width;\n  }\n\n  if (bottom === void 0) {\n    bottom = height;\n  }\n\n  var clipStyles = [];\n  var isVertical = false;\n  var radiusPoses = nextPoses.filter(function (pos) {\n    return !pos.virtual;\n  });\n  var raws = radiusPoses.map(function (posInfo) {\n    var horizontal = posInfo.horizontal,\n        vertical = posInfo.vertical,\n        pos = posInfo.pos;\n\n    if (vertical && !isVertical) {\n      isVertical = true;\n      clipStyles.push(\"/\");\n    }\n\n    if (isVertical) {\n      var rawPos = Math.max(0, vertical === 1 ? pos[1] - top : bottom - pos[1]);\n      clipStyles.push(convertCSSSize(rawPos, height, isRelative));\n      return rawPos;\n    } else {\n      var rawPos = Math.max(0, horizontal === 1 ? pos[0] - left : right - pos[0]);\n      clipStyles.push(convertCSSSize(rawPos, width, isRelative));\n      return rawPos;\n    }\n  });\n  return {\n    radiusPoses: radiusPoses,\n    styles: clipStyles,\n    raws: raws\n  };\n}\n\nfunction getRadiusRange(controlPoses) {\n  // [start, length]\n  var horizontalRange = [0, 0];\n  var verticalRange = [0, 0];\n  var length = controlPoses.length;\n\n  for (var i = 0; i < length; ++i) {\n    var clipPose = controlPoses[i];\n\n    if (!clipPose.sub) {\n      continue;\n    }\n\n    if (clipPose.horizontal) {\n      if (horizontalRange[1] === 0) {\n        horizontalRange[0] = i;\n      }\n\n      horizontalRange[1] = i - horizontalRange[0] + 1;\n      verticalRange[0] = i + 1;\n    }\n\n    if (clipPose.vertical) {\n      if (verticalRange[1] === 0) {\n        verticalRange[0] = i;\n      }\n\n      verticalRange[1] = i - verticalRange[0] + 1;\n    }\n  }\n\n  return {\n    horizontalRange: horizontalRange,\n    verticalRange: verticalRange\n  };\n}\n\nfunction getRadiusValues(values, width, height, left, top, minCounts, full) {\n  var _a, _b, _c, _d;\n\n  if (minCounts === void 0) {\n    minCounts = [0, 0];\n  }\n\n  if (full === void 0) {\n    full = false;\n  }\n\n  var splitIndex = values.indexOf(\"/\");\n  var splitLength = (splitIndex > -1 ? values.slice(0, splitIndex) : values).length;\n  var horizontalValues = values.slice(0, splitLength);\n  var verticalValues = values.slice(splitLength + 1);\n  var horizontalValuesLength = horizontalValues.length;\n  var verticalValuesLength = verticalValues.length;\n  var hasVerticalValues = verticalValuesLength > 0;\n  var _e = horizontalValues[0],\n      nwValue = _e === void 0 ? \"0px\" : _e,\n      _f = horizontalValues[1],\n      neValue = _f === void 0 ? nwValue : _f,\n      _g = horizontalValues[2],\n      seValue = _g === void 0 ? nwValue : _g,\n      _h = horizontalValues[3],\n      swValue = _h === void 0 ? neValue : _h;\n  var _j = verticalValues[0],\n      wnValue = _j === void 0 ? nwValue : _j,\n      _k = verticalValues[1],\n      enValue = _k === void 0 ? hasVerticalValues ? wnValue : neValue : _k,\n      _l = verticalValues[2],\n      esValue = _l === void 0 ? hasVerticalValues ? wnValue : seValue : _l,\n      _m = verticalValues[3],\n      wsValue = _m === void 0 ? hasVerticalValues ? enValue : swValue : _m;\n  var horizontalRawPoses = [nwValue, neValue, seValue, swValue].map(function (pos) {\n    return convertUnitSize(pos, width);\n  });\n  var verticalRawPoses = [wnValue, enValue, esValue, wsValue].map(function (pos) {\n    return convertUnitSize(pos, height);\n  });\n  var horizontalPoses = horizontalRawPoses.slice();\n  var verticalPoses = verticalRawPoses.slice();\n  _a = calculateRatio([horizontalPoses[0], horizontalPoses[1]], width), horizontalPoses[0] = _a[0], horizontalPoses[1] = _a[1];\n  _b = calculateRatio([horizontalPoses[3], horizontalPoses[2]], width), horizontalPoses[3] = _b[0], horizontalPoses[2] = _b[1];\n  _c = calculateRatio([verticalPoses[0], verticalPoses[3]], height), verticalPoses[0] = _c[0], verticalPoses[3] = _c[1];\n  _d = calculateRatio([verticalPoses[1], verticalPoses[2]], height), verticalPoses[1] = _d[0], verticalPoses[2] = _d[1];\n  var nextHorizontalPoses = full ? horizontalPoses : horizontalPoses.slice(0, Math.max(minCounts[0], horizontalValuesLength));\n  var nextVerticalPoses = full ? verticalPoses : verticalPoses.slice(0, Math.max(minCounts[1], verticalValuesLength));\n  return __spreadArray(__spreadArray([], nextHorizontalPoses.map(function (pos, i) {\n    var direction = RADIUS_DIRECTIONS[i];\n    return {\n      virtual: i >= horizontalValuesLength,\n      horizontal: HORIZONTAL_RADIUS_DIRECTIONS[i],\n      vertical: 0,\n      pos: [left + pos, top + (VERTICAL_RADIUS_DIRECTIONS[i] === -1 ? height : 0)],\n      sub: true,\n      raw: horizontalRawPoses[i],\n      direction: direction\n    };\n  }), true), nextVerticalPoses.map(function (pos, i) {\n    var direction = RADIUS_DIRECTIONS[i];\n    return {\n      virtual: i >= verticalValuesLength,\n      horizontal: 0,\n      vertical: VERTICAL_RADIUS_DIRECTIONS[i],\n      pos: [left + (HORIZONTAL_RADIUS_DIRECTIONS[i] === -1 ? width : 0), top + pos],\n      sub: true,\n      raw: verticalRawPoses[i],\n      direction: direction\n    };\n  }), true);\n}\n\nfunction removeRadiusPos(controlPoses, poses, index, startIndex, length) {\n  if (length === void 0) {\n    length = poses.length;\n  }\n\n  var _a = getRadiusRange(controlPoses.slice(startIndex)),\n      horizontalRange = _a.horizontalRange,\n      verticalRange = _a.verticalRange;\n\n  var radiuslIndex = index - startIndex;\n  var deleteCount = 0;\n\n  if (radiuslIndex === 0) {\n    deleteCount = length;\n  } else if (radiuslIndex > 0 && radiuslIndex < horizontalRange[1]) {\n    deleteCount = horizontalRange[1] - radiuslIndex;\n  } else if (radiuslIndex >= verticalRange[0]) {\n    deleteCount = verticalRange[0] + verticalRange[1] - radiuslIndex;\n  } else {\n    return;\n  }\n\n  controlPoses.splice(index, deleteCount);\n  poses.splice(index, deleteCount);\n}\n\nfunction addRadiusPos(controlPoses, poses, startIndex, horizontalIndex, verticalIndex, distX, distY, right, bottom, left, top) {\n  if (left === void 0) {\n    left = 0;\n  }\n\n  if (top === void 0) {\n    top = 0;\n  }\n\n  var _a = getRadiusRange(controlPoses.slice(startIndex)),\n      horizontalRange = _a.horizontalRange,\n      verticalRange = _a.verticalRange;\n\n  if (horizontalIndex > -1) {\n    var radiusX = HORIZONTAL_RADIUS_DIRECTIONS[horizontalIndex] === 1 ? distX - left : right - distX;\n\n    for (var i = horizontalRange[1]; i <= horizontalIndex; ++i) {\n      var y = VERTICAL_RADIUS_DIRECTIONS[i] === 1 ? top : bottom;\n      var x = 0;\n\n      if (horizontalIndex === i) {\n        x = distX;\n      } else if (i === 0) {\n        x = left + radiusX;\n      } else if (HORIZONTAL_RADIUS_DIRECTIONS[i] === -1) {\n        x = right - (poses[startIndex][0] - left);\n      }\n\n      controlPoses.splice(startIndex + i, 0, {\n        horizontal: HORIZONTAL_RADIUS_DIRECTIONS[i],\n        vertical: 0,\n        pos: [x, y]\n      });\n      poses.splice(startIndex + i, 0, [x, y]);\n\n      if (i === 0) {\n        break;\n      }\n    }\n  } else if (verticalIndex > -1) {\n    var radiusY = VERTICAL_RADIUS_DIRECTIONS[verticalIndex] === 1 ? distY - top : bottom - distY;\n\n    if (horizontalRange[1] === 0 && verticalRange[1] === 0) {\n      var pos = [left + radiusY, top];\n      controlPoses.push({\n        horizontal: HORIZONTAL_RADIUS_DIRECTIONS[0],\n        vertical: 0,\n        pos: pos\n      });\n      poses.push(pos);\n    }\n\n    var startVerticalIndex = verticalRange[0];\n\n    for (var i = verticalRange[1]; i <= verticalIndex; ++i) {\n      var x = HORIZONTAL_RADIUS_DIRECTIONS[i] === 1 ? left : right;\n      var y = 0;\n\n      if (verticalIndex === i) {\n        y = distY;\n      } else if (i === 0) {\n        y = top + radiusY;\n      } else if (VERTICAL_RADIUS_DIRECTIONS[i] === 1) {\n        y = poses[startIndex + startVerticalIndex][1];\n      } else if (VERTICAL_RADIUS_DIRECTIONS[i] === -1) {\n        y = bottom - (poses[startIndex + startVerticalIndex][1] - top);\n      }\n\n      controlPoses.push({\n        horizontal: 0,\n        vertical: VERTICAL_RADIUS_DIRECTIONS[i],\n        pos: [x, y]\n      });\n      poses.push([x, y]);\n\n      if (i === 0) {\n        break;\n      }\n    }\n  }\n}\n\nfunction splitRadiusPoses(controlPoses, raws) {\n  if (raws === void 0) {\n    raws = controlPoses.map(function (pos) {\n      return pos.raw;\n    });\n  }\n\n  var horizontals = controlPoses.map(function (pos, i) {\n    return pos.horizontal ? raws[i] : null;\n  }).filter(function (pos) {\n    return pos != null;\n  });\n  var verticals = controlPoses.map(function (pos, i) {\n    return pos.vertical ? raws[i] : null;\n  }).filter(function (pos) {\n    return pos != null;\n  });\n  return {\n    horizontals: horizontals,\n    verticals: verticals\n  };\n}\n\nvar CLIP_DIRECTIONS = [[0, -1, \"n\"], [1, 0, \"e\"]];\nvar CLIP_RECT_DIRECTIONS = [[-1, -1, \"nw\"], [0, -1, \"n\"], [1, -1, \"ne\"], [1, 0, \"e\"], [1, 1, \"se\"], [0, 1, \"s\"], [-1, 1, \"sw\"], [-1, 0, \"w\"]]; // 1 2 5 6 0 3 4 7\n// 0 1 2 3 4 5 6 7\n\nfunction getClipStyles(moveable, clipPath, poses) {\n  var clipRelative = moveable.props.clipRelative;\n  var _a = moveable.state,\n      width = _a.width,\n      height = _a.height;\n  var _b = clipPath,\n      clipType = _b.type,\n      clipPoses = _b.poses;\n  var isRect = clipType === \"rect\";\n  var isCircle = clipType === \"circle\";\n\n  if (clipType === \"polygon\") {\n    return poses.map(function (pos) {\n      return \"\".concat(convertCSSSize(pos[0], width, clipRelative), \" \").concat(convertCSSSize(pos[1], height, clipRelative));\n    });\n  } else if (isRect || clipType === \"inset\") {\n    var top = poses[1][1];\n    var right = poses[3][0];\n    var left = poses[7][0];\n    var bottom = poses[5][1];\n\n    if (isRect) {\n      return [top, right, bottom, left].map(function (pos) {\n        return \"\".concat(pos, \"px\");\n      });\n    }\n\n    var clipStyles = [top, width - right, height - bottom, left].map(function (pos, i) {\n      return convertCSSSize(pos, i % 2 ? width : height, clipRelative);\n    });\n\n    if (poses.length > 8) {\n      var _c = minus(poses[4], poses[0]),\n          subWidth = _c[0],\n          subHeight = _c[1];\n\n      clipStyles.push.apply(clipStyles, __spreadArray([\"round\"], getRadiusStyles(clipPoses.slice(8).map(function (info, i) {\n        return __assign(__assign({}, info), {\n          pos: poses[i]\n        });\n      }), clipRelative, subWidth, subHeight, left, top, right, bottom).styles, false));\n    }\n\n    return clipStyles;\n  } else if (isCircle || clipType === \"ellipse\") {\n    var center = poses[0];\n    var ry = convertCSSSize(Math.abs(poses[1][1] - center[1]), isCircle ? Math.sqrt((width * width + height * height) / 2) : height, clipRelative);\n    var clipStyles = isCircle ? [ry] : [convertCSSSize(Math.abs(poses[2][0] - center[0]), width, clipRelative), ry];\n    clipStyles.push(\"at\", convertCSSSize(center[0], width, clipRelative), convertCSSSize(center[1], height, clipRelative));\n    return clipStyles;\n  }\n}\n\nfunction getRectPoses(top, right, bottom, left) {\n  var xs = [left, (left + right) / 2, right];\n  var ys = [top, (top + bottom) / 2, bottom];\n  return CLIP_RECT_DIRECTIONS.map(function (_a) {\n    var dirx = _a[0],\n        diry = _a[1],\n        dir = _a[2];\n    var x = xs[dirx + 1];\n    var y = ys[diry + 1];\n    return {\n      vertical: Math.abs(diry),\n      horizontal: Math.abs(dirx),\n      direction: dir,\n      pos: [x, y]\n    };\n  });\n}\n\nfunction getControlSize(controlPoses) {\n  var xRange = [Infinity, -Infinity];\n  var yRange = [Infinity, -Infinity];\n  controlPoses.forEach(function (_a) {\n    var pos = _a.pos;\n    xRange[0] = Math.min(xRange[0], pos[0]);\n    xRange[1] = Math.max(xRange[1], pos[0]);\n    yRange[0] = Math.min(yRange[0], pos[1]);\n    yRange[1] = Math.max(yRange[1], pos[1]);\n  });\n  return [Math.abs(xRange[1] - xRange[0]), Math.abs(yRange[1] - yRange[0])];\n}\n\nfunction getClipPath(target, width, height, defaultClip, customClip) {\n  var _a, _b, _c, _d, _e, _f, _g;\n\n  if (!target) {\n    return;\n  }\n\n  var clipText = customClip;\n\n  if (!clipText) {\n    var style = getComputedStyle(target);\n    var clipPath = style.clipPath;\n    clipText = clipPath !== \"none\" ? clipPath : style.clip;\n  }\n\n  if (!clipText || clipText === \"none\" || clipText === \"auto\") {\n    clipText = defaultClip;\n\n    if (!clipText) {\n      return;\n    }\n  }\n\n  var _h = splitBracket(clipText),\n      _j = _h.prefix,\n      clipPrefix = _j === void 0 ? clipText : _j,\n      _k = _h.value,\n      value = _k === void 0 ? \"\" : _k;\n\n  var isCircle = clipPrefix === \"circle\";\n  var splitter = \" \";\n\n  if (clipPrefix === \"polygon\") {\n    var values = splitComma(value || \"0% 0%, 100% 0%, 100% 100%, 0% 100%\");\n    splitter = \",\";\n    var poses = values.map(function (pos) {\n      var _a = pos.split(\" \"),\n          xPos = _a[0],\n          yPos = _a[1];\n\n      return {\n        vertical: 1,\n        horizontal: 1,\n        pos: [convertUnitSize(xPos, width), convertUnitSize(yPos, height)]\n      };\n    });\n    var minMaxs = getMinMaxs(poses.map(function (pos) {\n      return pos.pos;\n    }));\n    return {\n      type: clipPrefix,\n      clipText: clipText,\n      poses: poses,\n      splitter: splitter,\n      left: minMaxs.minX,\n      right: minMaxs.maxX,\n      top: minMaxs.minY,\n      bottom: minMaxs.maxY\n    };\n  } else if (isCircle || clipPrefix === \"ellipse\") {\n    var xPos = \"\";\n    var yPos = \"\";\n    var radiusX_1 = 0;\n    var radiusY_1 = 0;\n    var values = splitSpace(value);\n\n    if (isCircle) {\n      var radius = \"\";\n      _a = values[0], radius = _a === void 0 ? \"50%\" : _a, _b = values[2], xPos = _b === void 0 ? \"50%\" : _b, _c = values[3], yPos = _c === void 0 ? \"50%\" : _c;\n      radiusX_1 = convertUnitSize(radius, Math.sqrt((width * width + height * height) / 2));\n      radiusY_1 = radiusX_1;\n    } else {\n      var xRadius = \"\";\n      var yRadius = \"\";\n      _d = values[0], xRadius = _d === void 0 ? \"50%\" : _d, _e = values[1], yRadius = _e === void 0 ? \"50%\" : _e, _f = values[3], xPos = _f === void 0 ? \"50%\" : _f, _g = values[4], yPos = _g === void 0 ? \"50%\" : _g;\n      radiusX_1 = convertUnitSize(xRadius, width);\n      radiusY_1 = convertUnitSize(yRadius, height);\n    }\n\n    var centerPos_1 = [convertUnitSize(xPos, width), convertUnitSize(yPos, height)];\n\n    var poses = __spreadArray([{\n      vertical: 1,\n      horizontal: 1,\n      pos: centerPos_1,\n      direction: \"nesw\"\n    }], CLIP_DIRECTIONS.slice(0, isCircle ? 1 : 2).map(function (dir) {\n      return {\n        vertical: Math.abs(dir[1]),\n        horizontal: dir[0],\n        direction: dir[2],\n        sub: true,\n        pos: [centerPos_1[0] + dir[0] * radiusX_1, centerPos_1[1] + dir[1] * radiusY_1]\n      };\n    }), true);\n\n    return {\n      type: clipPrefix,\n      clipText: clipText,\n      radiusX: radiusX_1,\n      radiusY: radiusY_1,\n      left: centerPos_1[0] - radiusX_1,\n      top: centerPos_1[1] - radiusY_1,\n      right: centerPos_1[0] + radiusX_1,\n      bottom: centerPos_1[1] + radiusY_1,\n      poses: poses,\n      splitter: splitter\n    };\n  } else if (clipPrefix === \"inset\") {\n    var values = splitSpace(value || \"0 0 0 0\");\n    var roundIndex = values.indexOf(\"round\");\n    var rectLength = (roundIndex > -1 ? values.slice(0, roundIndex) : values).length;\n    var radiusValues = values.slice(rectLength + 1);\n\n    var _l = values.slice(0, rectLength),\n        topValue = _l[0],\n        _m = _l[1],\n        rightValue = _m === void 0 ? topValue : _m,\n        _o = _l[2],\n        bottomValue = _o === void 0 ? topValue : _o,\n        _p = _l[3],\n        leftValue = _p === void 0 ? rightValue : _p;\n\n    var _q = [topValue, bottomValue].map(function (pos) {\n      return convertUnitSize(pos, height);\n    }),\n        top = _q[0],\n        bottom = _q[1];\n\n    var _r = [leftValue, rightValue].map(function (pos) {\n      return convertUnitSize(pos, width);\n    }),\n        left = _r[0],\n        right = _r[1];\n\n    var nextRight = width - right;\n    var nextBottom = height - bottom;\n    var radiusPoses = getRadiusValues(radiusValues, nextRight - left, nextBottom - top, left, top);\n\n    var poses = __spreadArray(__spreadArray([], getRectPoses(top, nextRight, nextBottom, left), true), radiusPoses, true);\n\n    return {\n      type: \"inset\",\n      clipText: clipText,\n      poses: poses,\n      top: top,\n      left: left,\n      right: nextRight,\n      bottom: nextBottom,\n      radius: radiusValues,\n      splitter: splitter\n    };\n  } else if (clipPrefix === \"rect\") {\n    // top right bottom left\n    var values = splitComma(value || \"0px, \".concat(width, \"px, \").concat(height, \"px, 0px\"));\n    splitter = \",\";\n\n    var _s = values.map(function (pos) {\n      var posValue = splitUnit(pos).value;\n      return posValue;\n    }),\n        top = _s[0],\n        right = _s[1],\n        bottom = _s[2],\n        left = _s[3];\n\n    var poses = getRectPoses(top, right, bottom, left);\n    return {\n      type: \"rect\",\n      clipText: clipText,\n      poses: poses,\n      top: top,\n      right: right,\n      bottom: bottom,\n      left: left,\n      values: values,\n      splitter: splitter\n    };\n  }\n\n  return;\n}\n\nfunction moveControlPos(controlPoses, index, dist, isRect, keepRatio) {\n  var _a = controlPoses[index],\n      direction = _a.direction,\n      sub = _a.sub;\n  var dists = controlPoses.map(function () {\n    return [0, 0];\n  });\n  var directions = direction ? direction.split(\"\") : [];\n\n  if (isRect && index < 8) {\n    var verticalDirections = directions.filter(function (dir) {\n      return dir === \"w\" || dir === \"e\";\n    });\n    var horizontalDirections = directions.filter(function (dir) {\n      return dir === \"n\" || dir === \"s\";\n    });\n    var verticalDirection_1 = verticalDirections[0];\n    var horizontalDirection_1 = horizontalDirections[0];\n    dists[index] = dist;\n\n    var _b = getControlSize(controlPoses),\n        width = _b[0],\n        height = _b[1];\n\n    var ratio = width && height ? width / height : 0;\n\n    if (ratio && keepRatio) {\n      // 0 1 2\n      // 7   3\n      // 6 5 4\n      var fixedIndex = (index + 4) % 8;\n      var fixedPosition = controlPoses[fixedIndex].pos;\n      var sizeDirection = [0, 0];\n\n      if (direction.indexOf(\"w\") > -1) {\n        sizeDirection[0] = -1;\n      } else if (direction.indexOf(\"e\") > -1) {\n        sizeDirection[0] = 1;\n      }\n\n      if (direction.indexOf(\"n\") > -1) {\n        sizeDirection[1] = -1;\n      } else if (direction.indexOf(\"s\") > -1) {\n        sizeDirection[1] = 1;\n      }\n\n      var nextDist = getSizeDistByDist([width, height], dist, ratio, sizeDirection, true);\n      var nextWidth = width + nextDist[0];\n      var nextHeight = height + nextDist[1];\n      var top = fixedPosition[1];\n      var bottom = fixedPosition[1];\n      var left = fixedPosition[0];\n      var right = fixedPosition[0];\n\n      if (sizeDirection[0] === -1) {\n        left = right - nextWidth;\n      } else if (sizeDirection[0] === 1) {\n        right = left + nextWidth;\n      } else {\n        left = left - nextWidth / 2;\n        right = right + nextWidth / 2;\n      }\n\n      if (sizeDirection[1] === -1) {\n        top = bottom - nextHeight;\n      } else if (sizeDirection[1] === 1) {\n        bottom = top + nextHeight;\n      } else {\n        top = bottom - nextHeight / 2;\n        bottom = top + nextHeight;\n      }\n\n      var nextControlPoses_1 = getRectPoses(top, right, bottom, left);\n      controlPoses.forEach(function (controlPose, i) {\n        dists[i][0] = nextControlPoses_1[i].pos[0] - controlPose.pos[0];\n        dists[i][1] = nextControlPoses_1[i].pos[1] - controlPose.pos[1];\n      });\n    } else {\n      controlPoses.forEach(function (controlPose, i) {\n        var controlDir = controlPose.direction;\n\n        if (!controlDir) {\n          return;\n        }\n\n        if (controlDir.indexOf(verticalDirection_1) > -1) {\n          dists[i][0] = dist[0];\n        }\n\n        if (controlDir.indexOf(horizontalDirection_1) > -1) {\n          dists[i][1] = dist[1];\n        }\n      });\n\n      if (verticalDirection_1) {\n        dists[1][0] = dist[0] / 2;\n        dists[5][0] = dist[0] / 2;\n      }\n\n      if (horizontalDirection_1) {\n        dists[3][1] = dist[1] / 2;\n        dists[7][1] = dist[1] / 2;\n      }\n    }\n  } else if (direction && !sub) {\n    directions.forEach(function (dir) {\n      var isVertical = dir === \"n\" || dir === \"s\";\n      controlPoses.forEach(function (controlPose, i) {\n        var dirDir = controlPose.direction,\n            dirHorizontal = controlPose.horizontal,\n            dirVertical = controlPose.vertical;\n\n        if (!dirDir || dirDir.indexOf(dir) === -1) {\n          return;\n        }\n\n        dists[i] = [isVertical || !dirHorizontal ? 0 : dist[0], !isVertical || !dirVertical ? 0 : dist[1]];\n      });\n    });\n  } else {\n    dists[index] = dist;\n  }\n\n  return dists;\n}\n\nfunction addClipPath(moveable, e) {\n  var _a = calculatePointerDist(moveable, e),\n      distX = _a[0],\n      distY = _a[1];\n\n  var _b = e.datas,\n      clipPath = _b.clipPath,\n      clipIndex = _b.clipIndex;\n  var _c = clipPath,\n      clipType = _c.type,\n      clipPoses = _c.poses,\n      splitter = _c.splitter;\n  var poses = clipPoses.map(function (pos) {\n    return pos.pos;\n  });\n\n  if (clipType === \"polygon\") {\n    poses.splice(clipIndex, 0, [distX, distY]);\n  } else if (clipType === \"inset\") {\n    var horizontalIndex = HORIZONTAL_RADIUS_ORDER.indexOf(clipIndex);\n    var verticalIndex = VERTICAL_RADIUS_ORDER.indexOf(clipIndex);\n    var length = clipPoses.length;\n    addRadiusPos(clipPoses, poses, 8, horizontalIndex, verticalIndex, distX, distY, poses[4][0], poses[4][1], poses[0][0], poses[0][1]);\n\n    if (length === clipPoses.length) {\n      return;\n    }\n  } else {\n    return;\n  }\n\n  var clipStyles = getClipStyles(moveable, clipPath, poses);\n  var clipStyle = \"\".concat(clipType, \"(\").concat(clipStyles.join(splitter), \")\");\n  triggerEvent(moveable, \"onClip\", fillParams(moveable, e, __assign({\n    clipEventType: \"added\",\n    clipType: clipType,\n    poses: poses,\n    clipStyles: clipStyles,\n    clipStyle: clipStyle,\n    distX: 0,\n    distY: 0\n  }, fillCSSObject({\n    clipPath: clipStyle\n  }, e))));\n}\n\nfunction removeClipPath(moveable, e) {\n  var _a = e.datas,\n      clipPath = _a.clipPath,\n      clipIndex = _a.clipIndex;\n  var _b = clipPath,\n      clipType = _b.type,\n      clipPoses = _b.poses,\n      splitter = _b.splitter;\n  var poses = clipPoses.map(function (pos) {\n    return pos.pos;\n  });\n  var length = poses.length;\n\n  if (clipType === \"polygon\") {\n    clipPoses.splice(clipIndex, 1);\n    poses.splice(clipIndex, 1);\n  } else if (clipType === \"inset\") {\n    if (clipIndex < 8) {\n      return;\n    }\n\n    removeRadiusPos(clipPoses, poses, clipIndex, 8, length);\n\n    if (length === clipPoses.length) {\n      return;\n    }\n  } else {\n    return;\n  }\n\n  var clipStyles = getClipStyles(moveable, clipPath, poses);\n  var clipStyle = \"\".concat(clipType, \"(\").concat(clipStyles.join(splitter), \")\");\n  triggerEvent(moveable, \"onClip\", fillParams(moveable, e, __assign({\n    clipEventType: \"removed\",\n    clipType: clipType,\n    poses: poses,\n    clipStyles: clipStyles,\n    clipStyle: clipStyle,\n    distX: 0,\n    distY: 0\n  }, fillCSSObject({\n    clipPath: clipStyle\n  }, e))));\n}\n/**\n * @namespace Moveable.Clippable\n * @description Whether to clip the target.\n */\n\n\nvar Clippable = {\n  name: \"clippable\",\n  props: {\n    clippable: Boolean,\n    defaultClipPath: String,\n    customClipPath: String,\n    keepRatio: Boolean,\n    clipRelative: Boolean,\n    clipArea: Boolean,\n    dragWithClip: Boolean,\n    clipTargetBounds: Boolean,\n    clipVerticalGuidelines: Array,\n    clipHorizontalGuidelines: Array,\n    clipSnapThreshold: Boolean\n  },\n  events: {\n    onClipStart: \"clipStart\",\n    onClip: \"clip\",\n    onClipEnd: \"clipEnd\"\n  },\n  css: [\".control.clip-control {\\n    background: #6d6;\\n    cursor: pointer;\\n}\\n.control.clip-control.clip-radius {\\n    background: #d66;\\n}\\n.line.clip-line {\\n    background: #6e6;\\n    cursor: move;\\n    z-index: 1;\\n}\\n.clip-area {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n}\\n.clip-ellipse {\\n    position: absolute;\\n    cursor: move;\\n    border: 1px solid #6d6;\\n    border: var(--zoompx) solid #6d6;\\n    border-radius: 50%;\\n    transform-origin: 0px 0px;\\n}\", \":host {\\n    --bounds-color: #d66;\\n}\", \".guideline {\\n    pointer-events: none;\\n    z-index: 2;\\n}\", \".line.guideline.bounds {\\n    background: #d66;\\n    background: var(--bounds-color);\\n}\"],\n  render: function (moveable, React) {\n    var _a = moveable.props,\n        customClipPath = _a.customClipPath,\n        defaultClipPath = _a.defaultClipPath,\n        clipArea = _a.clipArea,\n        zoom = _a.zoom,\n        groupable = _a.groupable;\n\n    var _b = moveable.getState(),\n        target = _b.target,\n        width = _b.width,\n        height = _b.height,\n        allMatrix = _b.allMatrix,\n        is3d = _b.is3d,\n        left = _b.left,\n        top = _b.top,\n        pos1 = _b.pos1,\n        pos2 = _b.pos2,\n        pos3 = _b.pos3,\n        pos4 = _b.pos4,\n        clipPathState = _b.clipPathState,\n        snapBoundInfos = _b.snapBoundInfos,\n        rotationRad = _b.rotation;\n\n    if (!target || groupable) {\n      return [];\n    }\n\n    var clipPath = getClipPath(target, width, height, defaultClipPath || \"inset\", clipPathState || customClipPath);\n\n    if (!clipPath) {\n      return [];\n    }\n\n    var n = is3d ? 4 : 3;\n    var type = clipPath.type;\n    var clipPoses = clipPath.poses;\n    var poses = clipPoses.map(function (pos) {\n      // return [x, y];\n      var calculatedPos = calculatePosition(allMatrix, pos.pos, n);\n      return [calculatedPos[0] - left, calculatedPos[1] - top];\n    });\n    var controls = [];\n    var lines = [];\n    var isRect = type === \"rect\";\n    var isInset = type === \"inset\";\n    var isPolygon = type === \"polygon\";\n\n    if (isRect || isInset || isPolygon) {\n      var linePoses_1 = isInset ? poses.slice(0, 8) : poses;\n      lines = linePoses_1.map(function (to, i) {\n        var from = i === 0 ? linePoses_1[linePoses_1.length - 1] : linePoses_1[i - 1];\n        var rad = getRad(from, to);\n        var dist = getDiagonalSize(from, to);\n        return React.createElement(\"div\", {\n          key: \"clipLine\".concat(i),\n          className: prefix(\"line\", \"clip-line\", \"snap-control\"),\n          \"data-clip-index\": i,\n          style: {\n            width: \"\".concat(dist, \"px\"),\n            transform: \"translate(\".concat(from[0], \"px, \").concat(from[1], \"px) rotate(\").concat(rad, \"rad) scaleY(\").concat(zoom, \")\")\n          }\n        });\n      });\n    }\n\n    controls = poses.map(function (pos, i) {\n      return React.createElement(\"div\", {\n        key: \"clipControl\".concat(i),\n        className: prefix(\"control\", \"clip-control\", \"snap-control\"),\n        \"data-clip-index\": i,\n        style: {\n          transform: \"translate(\".concat(pos[0], \"px, \").concat(pos[1], \"px) rotate(\").concat(rotationRad, \"rad) scale(\").concat(zoom, \")\")\n        }\n      });\n    });\n\n    if (isInset) {\n      controls.push.apply(controls, poses.slice(8).map(function (pos, i) {\n        return React.createElement(\"div\", {\n          key: \"clipRadiusControl\".concat(i),\n          className: prefix(\"control\", \"clip-control\", \"clip-radius\", \"snap-control\"),\n          \"data-clip-index\": 8 + i,\n          style: {\n            transform: \"translate(\".concat(pos[0], \"px, \").concat(pos[1], \"px) rotate(\").concat(rotationRad, \"rad) scale(\").concat(zoom, \")\")\n          }\n        });\n      }));\n    }\n\n    if (type === \"circle\" || type === \"ellipse\") {\n      var clipLeft = clipPath.left,\n          clipTop = clipPath.top,\n          radiusX = clipPath.radiusX,\n          radiusY = clipPath.radiusY;\n\n      var _c = minus(calculatePosition(allMatrix, [clipLeft, clipTop], n), calculatePosition(allMatrix, [0, 0], n)),\n          distLeft = _c[0],\n          distTop = _c[1];\n\n      var ellipseClipPath = \"none\";\n\n      if (!clipArea) {\n        var piece = Math.max(10, radiusX / 5, radiusY / 5);\n        var areaPoses = [];\n\n        for (var i = 0; i <= piece; ++i) {\n          var rad = Math.PI * 2 / piece * i;\n          areaPoses.push([radiusX + (radiusX - zoom) * Math.cos(rad), radiusY + (radiusY - zoom) * Math.sin(rad)]);\n        }\n\n        areaPoses.push([radiusX, -2]);\n        areaPoses.push([-2, -2]);\n        areaPoses.push([-2, radiusY * 2 + 2]);\n        areaPoses.push([radiusX * 2 + 2, radiusY * 2 + 2]);\n        areaPoses.push([radiusX * 2 + 2, -2]);\n        areaPoses.push([radiusX, -2]);\n        ellipseClipPath = \"polygon(\".concat(areaPoses.map(function (pos) {\n          return \"\".concat(pos[0], \"px \").concat(pos[1], \"px\");\n        }).join(\", \"), \")\");\n      }\n\n      controls.push(React.createElement(\"div\", {\n        key: \"clipEllipse\",\n        className: prefix(\"clip-ellipse\", \"snap-control\"),\n        style: {\n          width: \"\".concat(radiusX * 2, \"px\"),\n          height: \"\".concat(radiusY * 2, \"px\"),\n          clipPath: ellipseClipPath,\n          transform: \"translate(\".concat(-left + distLeft, \"px, \").concat(-top + distTop, \"px) \").concat(makeMatrixCSS(allMatrix))\n        }\n      }));\n    }\n\n    if (clipArea) {\n      var _d = getRect(__spreadArray([pos1, pos2, pos3, pos4], poses, true)),\n          allWidth = _d.width,\n          allHeight = _d.height,\n          allLeft_1 = _d.left,\n          allTop_1 = _d.top;\n\n      if (isPolygon || isRect || isInset) {\n        var areaPoses = isInset ? poses.slice(0, 8) : poses;\n        controls.push(React.createElement(\"div\", {\n          key: \"clipArea\",\n          className: prefix(\"clip-area\", \"snap-control\"),\n          style: {\n            width: \"\".concat(allWidth, \"px\"),\n            height: \"\".concat(allHeight, \"px\"),\n            transform: \"translate(\".concat(allLeft_1, \"px, \").concat(allTop_1, \"px)\"),\n            clipPath: \"polygon(\".concat(areaPoses.map(function (pos) {\n              return \"\".concat(pos[0] - allLeft_1, \"px \").concat(pos[1] - allTop_1, \"px\");\n            }).join(\", \"), \")\")\n          }\n        }));\n      }\n    }\n\n    if (snapBoundInfos) {\n      [\"vertical\", \"horizontal\"].forEach(function (directionType) {\n        var info = snapBoundInfos[directionType];\n        var isHorizontal = directionType === \"horizontal\";\n\n        if (info.isSnap) {\n          lines.push.apply(lines, info.snap.posInfos.map(function (_a, i) {\n            var pos = _a.pos;\n            var snapPos1 = minus(calculatePosition(allMatrix, isHorizontal ? [0, pos] : [pos, 0], n), [left, top]);\n            var snapPos2 = minus(calculatePosition(allMatrix, isHorizontal ? [width, pos] : [pos, height], n), [left, top]);\n            return renderLine(React, \"\", snapPos1, snapPos2, zoom, \"clip\".concat(directionType, \"snap\").concat(i), \"guideline\");\n          }));\n        }\n\n        if (info.isBound) {\n          lines.push.apply(lines, info.bounds.map(function (_a, i) {\n            var pos = _a.pos;\n            var snapPos1 = minus(calculatePosition(allMatrix, isHorizontal ? [0, pos] : [pos, 0], n), [left, top]);\n            var snapPos2 = minus(calculatePosition(allMatrix, isHorizontal ? [width, pos] : [pos, height], n), [left, top]);\n            return renderLine(React, \"\", snapPos1, snapPos2, zoom, \"clip\".concat(directionType, \"bounds\").concat(i), \"guideline\", \"bounds\", \"bold\");\n          }));\n        }\n      });\n    }\n\n    return __spreadArray(__spreadArray([], controls, true), lines, true);\n  },\n  dragControlCondition: function (moveable, e) {\n    return e.inputEvent && (e.inputEvent.target.getAttribute(\"class\") || \"\").indexOf(\"clip\") > -1;\n  },\n  dragStart: function (moveable, e) {\n    var props = moveable.props;\n    var _a = props.dragWithClip,\n        dragWithClip = _a === void 0 ? true : _a;\n\n    if (dragWithClip) {\n      return false;\n    }\n\n    return this.dragControlStart(moveable, e);\n  },\n  drag: function (moveable, e) {\n    return this.dragControl(moveable, __assign(__assign({}, e), {\n      isDragTarget: true\n    }));\n  },\n  dragEnd: function (moveable, e) {\n    return this.dragControlEnd(moveable, e);\n  },\n  dragControlStart: function (moveable, e) {\n    var state = moveable.state;\n    var _a = moveable.props,\n        defaultClipPath = _a.defaultClipPath,\n        customClipPath = _a.customClipPath;\n    var target = state.target,\n        width = state.width,\n        height = state.height;\n    var inputTarget = e.inputEvent ? e.inputEvent.target : null;\n    var className = inputTarget && inputTarget.getAttribute(\"class\") || \"\";\n    var datas = e.datas;\n    var clipPath = getClipPath(target, width, height, defaultClipPath || \"inset\", customClipPath);\n\n    if (!clipPath) {\n      return false;\n    }\n\n    var clipText = clipPath.clipText,\n        type = clipPath.type,\n        poses = clipPath.poses;\n    var result = triggerEvent(moveable, \"onClipStart\", fillParams(moveable, e, {\n      clipType: type,\n      clipStyle: clipText,\n      poses: poses.map(function (pos) {\n        return pos.pos;\n      })\n    }));\n\n    if (result === false) {\n      datas.isClipStart = false;\n      return false;\n    }\n\n    datas.isControl = className && className.indexOf(\"clip-control\") > -1;\n    datas.isLine = className.indexOf(\"clip-line\") > -1;\n    datas.isArea = className.indexOf(\"clip-area\") > -1 || className.indexOf(\"clip-ellipse\") > -1;\n    datas.clipIndex = inputTarget ? parseInt(inputTarget.getAttribute(\"data-clip-index\"), 10) : -1;\n    datas.clipPath = clipPath;\n    datas.isClipStart = true;\n    state.clipPathState = clipText;\n    setDragStart(moveable, e);\n    return true;\n  },\n  dragControl: function (moveable, e) {\n    var _a, _b;\n\n    var datas = e.datas,\n        originalDatas = e.originalDatas,\n        isDragTarget = e.isDragTarget;\n\n    if (!datas.isClipStart) {\n      return false;\n    }\n\n    var _c = datas,\n        isControl = _c.isControl,\n        isLine = _c.isLine,\n        isArea = _c.isArea,\n        clipIndex = _c.clipIndex,\n        clipPath = _c.clipPath;\n\n    if (!clipPath) {\n      return false;\n    }\n\n    var props = getProps(moveable.props, \"clippable\");\n    var keepRatio = props.keepRatio;\n    var distX = 0;\n    var distY = 0;\n    var originalDraggable = originalDatas.draggable;\n    var originalDist = getDragDist(e);\n\n    if (isDragTarget && originalDraggable) {\n      _a = originalDraggable.prevBeforeDist, distX = _a[0], distY = _a[1];\n    } else {\n      distX = originalDist[0], distY = originalDist[1];\n    }\n\n    var firstDist = [distX, distY];\n    var state = moveable.state;\n    var width = state.width,\n        height = state.height;\n    var isDragWithTarget = !isArea && !isControl && !isLine;\n    var clipType = clipPath.type,\n        clipPoses = clipPath.poses,\n        splitter = clipPath.splitter;\n    var poses = clipPoses.map(function (pos) {\n      return pos.pos;\n    });\n\n    if (isDragWithTarget) {\n      distX = -distX;\n      distY = -distY;\n    }\n\n    var isAll = !isControl || clipPoses[clipIndex].direction === \"nesw\";\n    var isRect = clipType === \"inset\" || clipType === \"rect\";\n    var dists = clipPoses.map(function () {\n      return [0, 0];\n    });\n\n    if (isControl && !isAll) {\n      var _d = clipPoses[clipIndex],\n          horizontal = _d.horizontal,\n          vertical = _d.vertical;\n      var dist = [distX * Math.abs(horizontal), distY * Math.abs(vertical)];\n      dists = moveControlPos(clipPoses, clipIndex, dist, isRect, keepRatio);\n    } else if (isAll) {\n      dists = poses.map(function () {\n        return [distX, distY];\n      });\n    }\n\n    var nextPoses = poses.map(function (pos, i) {\n      return plus(pos, dists[i]);\n    });\n\n    var guidePoses = __spreadArray([], nextPoses, true);\n\n    state.snapBoundInfos = null;\n    var isCircle = clipPath.type === \"circle\";\n    var isEllipse = clipPath.type === \"ellipse\";\n\n    if (isCircle || isEllipse) {\n      var guideRect = getRect(nextPoses);\n      var ry = Math.abs(guideRect.bottom - guideRect.top);\n      var rx = Math.abs(isEllipse ? guideRect.right - guideRect.left : ry);\n      var bottom = nextPoses[0][1] + ry;\n      var left = nextPoses[0][0] - rx;\n      var right = nextPoses[0][0] + rx; // right\n\n      if (isCircle) {\n        guidePoses.push([right, guideRect.bottom]);\n        dists.push([1, 0]);\n      } // bottom\n\n\n      guidePoses.push([guideRect.left, bottom]);\n      dists.push([0, 1]); // left\n\n      guidePoses.push([left, guideRect.bottom]);\n      dists.push([1, 0]);\n    }\n\n    var guidelines = getDefaultGuidelines((props.clipHorizontalGuidelines || []).map(function (v) {\n      return convertUnitSize(\"\".concat(v), height);\n    }), (props.clipVerticalGuidelines || []).map(function (v) {\n      return convertUnitSize(\"\".concat(v), width);\n    }), width, height);\n    var guideXPoses = [];\n    var guideYPoses = [];\n\n    if (isCircle || isEllipse) {\n      guideXPoses = [guidePoses[4][0], guidePoses[2][0]];\n      guideYPoses = [guidePoses[1][1], guidePoses[3][1]];\n    } else if (isRect) {\n      var rectPoses = [guidePoses[0], guidePoses[2], guidePoses[4], guidePoses[6]];\n      var rectDists_1 = [dists[0], dists[2], dists[4], dists[6]];\n      guideXPoses = rectPoses.filter(function (_, i) {\n        return rectDists_1[i][0];\n      }).map(function (pos) {\n        return pos[0];\n      });\n      guideYPoses = rectPoses.filter(function (_, i) {\n        return rectDists_1[i][1];\n      }).map(function (pos) {\n        return pos[1];\n      });\n    } else {\n      guideXPoses = guidePoses.filter(function (_, i) {\n        return dists[i][0];\n      }).map(function (pos) {\n        return pos[0];\n      });\n      guideYPoses = guidePoses.filter(function (_, i) {\n        return dists[i][1];\n      }).map(function (pos) {\n        return pos[1];\n      });\n    }\n\n    var boundDelta = [0, 0];\n\n    var _e = checkSnapBounds(guidelines, props.clipTargetBounds && {\n      left: 0,\n      top: 0,\n      right: width,\n      bottom: height\n    }, guideXPoses, guideYPoses, 5),\n        horizontalSnapInfo = _e.horizontal,\n        verticalSnapInfo = _e.vertical;\n\n    var snapOffsetY = horizontalSnapInfo.offset;\n    var snapOffsetX = verticalSnapInfo.offset;\n\n    if (horizontalSnapInfo.isBound) {\n      boundDelta[1] += snapOffsetY;\n    }\n\n    if (verticalSnapInfo.isBound) {\n      boundDelta[0] += snapOffsetX;\n    }\n\n    if ((isEllipse || isCircle) && dists[0][0] === 0 && dists[0][1] === 0) {\n      var guideRect = getRect(nextPoses);\n      var cy = guideRect.bottom - guideRect.top;\n      var cx = isEllipse ? guideRect.right - guideRect.left : cy;\n      var distSnapX = verticalSnapInfo.isBound ? Math.abs(snapOffsetX) : verticalSnapInfo.snapIndex === 0 ? -snapOffsetX : snapOffsetX;\n      var distSnapY = horizontalSnapInfo.isBound ? Math.abs(snapOffsetY) : horizontalSnapInfo.snapIndex === 0 ? -snapOffsetY : snapOffsetY;\n      cx -= distSnapX;\n      cy -= distSnapY;\n\n      if (isCircle) {\n        cy = checkSnapBoundPriority(verticalSnapInfo, horizontalSnapInfo) > 0 ? cy : cx;\n        cx = cy;\n      }\n\n      var center = guidePoses[0];\n      guidePoses[1][1] = center[1] - cy;\n      guidePoses[2][0] = center[0] + cx;\n      guidePoses[3][1] = center[1] + cy;\n      guidePoses[4][0] = center[0] - cx;\n    } else if (isRect && keepRatio && isControl) {\n      var _f = getControlSize(clipPoses),\n          width_1 = _f[0],\n          height_1 = _f[1];\n\n      var ratio = width_1 && height_1 ? width_1 / height_1 : 0;\n      var clipPose = clipPoses[clipIndex];\n      var direction = clipPose.direction || \"\";\n      var top = guidePoses[1][1];\n      var bottom = guidePoses[5][1];\n      var left = guidePoses[7][0];\n      var right = guidePoses[3][0];\n\n      if (snapOffsetY <= snapOffsetX) {\n        snapOffsetY = snapOffsetX / ratio;\n      } else {\n        snapOffsetX = snapOffsetY * ratio;\n      }\n\n      if (direction.indexOf(\"w\") > -1) {\n        left -= snapOffsetX;\n      } else if (direction.indexOf(\"e\") > -1) {\n        right -= snapOffsetX;\n      } else {\n        left += snapOffsetX / 2;\n        right -= snapOffsetX / 2;\n      }\n\n      if (direction.indexOf(\"n\") > -1) {\n        top -= snapOffsetY;\n      } else if (direction.indexOf(\"s\") > -1) {\n        bottom -= snapOffsetY;\n      } else {\n        top += snapOffsetY / 2;\n        bottom -= snapOffsetY / 2;\n      }\n\n      var nextControlPoses_2 = getRectPoses(top, right, bottom, left);\n      guidePoses.forEach(function (pos, i) {\n        var _a;\n\n        _a = nextControlPoses_2[i].pos, pos[0] = _a[0], pos[1] = _a[1];\n      });\n    } else {\n      guidePoses.forEach(function (pos, j) {\n        var dist = dists[j];\n\n        if (dist[0]) {\n          pos[0] -= snapOffsetX;\n        }\n\n        if (dist[1]) {\n          pos[1] -= snapOffsetY;\n        }\n      });\n    }\n\n    var nextClipStyles = getClipStyles(moveable, clipPath, nextPoses);\n    var clipStyle = \"\".concat(clipType, \"(\").concat(nextClipStyles.join(splitter), \")\");\n    state.clipPathState = clipStyle;\n\n    if (isCircle || isEllipse) {\n      guideXPoses = [guidePoses[4][0], guidePoses[2][0]];\n      guideYPoses = [guidePoses[1][1], guidePoses[3][1]];\n    } else if (isRect) {\n      var rectPoses = [guidePoses[0], guidePoses[2], guidePoses[4], guidePoses[6]];\n      guideXPoses = rectPoses.map(function (pos) {\n        return pos[0];\n      });\n      guideYPoses = rectPoses.map(function (pos) {\n        return pos[1];\n      });\n    } else {\n      guideXPoses = guidePoses.map(function (pos) {\n        return pos[0];\n      });\n      guideYPoses = guidePoses.map(function (pos) {\n        return pos[1];\n      });\n    }\n\n    state.snapBoundInfos = checkSnapBounds(guidelines, props.clipTargetBounds && {\n      left: 0,\n      top: 0,\n      right: width,\n      bottom: height\n    }, guideXPoses, guideYPoses, 1);\n\n    if (originalDraggable) {\n      var is3d = state.is3d,\n          allMatrix = state.allMatrix;\n      var n = is3d ? 4 : 3;\n      var dragDist = boundDelta;\n\n      if (isDragTarget) {\n        dragDist = [firstDist[0] + boundDelta[0] - originalDist[0], firstDist[1] + boundDelta[1] - originalDist[1]];\n      }\n\n      originalDraggable.deltaOffset = multiply(allMatrix, [dragDist[0], dragDist[1], 0, 0], n);\n    }\n\n    triggerEvent(moveable, \"onClip\", fillParams(moveable, e, __assign({\n      clipEventType: \"changed\",\n      clipType: clipType,\n      poses: nextPoses,\n      clipStyle: clipStyle,\n      clipStyles: nextClipStyles,\n      distX: distX,\n      distY: distY\n    }, fillCSSObject((_b = {}, _b[clipType === \"rect\" ? \"clip\" : \"clipPath\"] = clipStyle, _b), e))));\n    return true;\n  },\n  dragControlEnd: function (moveable, e) {\n    this.unset(moveable);\n    var isDrag = e.isDrag,\n        datas = e.datas,\n        isDouble = e.isDouble;\n    var isLine = datas.isLine,\n        isClipStart = datas.isClipStart,\n        isControl = datas.isControl;\n\n    if (!isClipStart) {\n      return false;\n    }\n\n    triggerEvent(moveable, \"onClipEnd\", fillEndParams(moveable, e, {}));\n\n    if (isDouble) {\n      if (isControl) {\n        removeClipPath(moveable, e);\n      } else if (isLine) {\n        // add\n        addClipPath(moveable, e);\n      }\n    }\n\n    return isDouble || isDrag;\n  },\n  unset: function (moveable) {\n    moveable.state.clipPathState = \"\";\n    moveable.state.snapBoundInfos = null;\n  }\n};\n/**\n * Whether to clip the target. (default: false)\n * @name Moveable.Clippable#clippable\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     clippable: true,\n *     defaultClipPath: \"inset\",\n *     customClipPath: \"\",\n *     clipRelative: false,\n *     clipArea: false,\n *     dragWithClip: true,\n * });\n * moveable.on(\"clipStart\", e => {\n *     console.log(e);\n * }).on(\"clip\", e => {\n *     if (e.clipType === \"rect\") {\n *         e.target.style.clip = e.clipStyle;\n *     } else {\n *         e.target.style.clipPath = e.clipStyle;\n *     }\n * }).on(\"clipEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n *  If clippath is not set, the default value can be set. (defaultClipPath < style < customClipPath < dragging clipPath)\n * @name Moveable.Clippable#defaultClipPath\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     clippable: true,\n *     defaultClipPath: \"inset\",\n *     customClipPath: \"\",\n *     clipRelative: false,\n *     clipArea: false,\n *     dragWithClip: true,\n * });\n * moveable.on(\"clipStart\", e => {\n *     console.log(e);\n * }).on(\"clip\", e => {\n *     if (e.clipType === \"rect\") {\n *         e.target.style.clip = e.clipStyle;\n *     } else {\n *         e.target.style.clipPath = e.clipStyle;\n *     }\n * }).on(\"clipEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n * % Can be used instead of the absolute px (`rect` not possible) (default: false)\n * @name Moveable.Clippable#clipRelative\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     clippable: true,\n *     defaultClipPath: \"inset\",\n *     customClipPath: \"\",\n *     clipRelative: false,\n *     clipArea: false,\n *     dragWithClip: true,\n * });\n * moveable.on(\"clipStart\", e => {\n *     console.log(e);\n * }).on(\"clip\", e => {\n *     if (e.clipType === \"rect\") {\n *         e.target.style.clip = e.clipStyle;\n *     } else {\n *         e.target.style.clipPath = e.clipStyle;\n *     }\n * }).on(\"clipEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n * You can force the custom clipPath. (defaultClipPath < style < customClipPath < dragging clipPath)\n * @name Moveable.Clippable#customClipPath\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     clippable: true,\n *     defaultClipPath: \"inset\",\n *     customClipPath: \"\",\n *     clipRelative: false,\n *     clipArea: false,\n *     dragWithClip: true,\n * });\n * moveable.on(\"clipStart\", e => {\n *     console.log(e);\n * }).on(\"clip\", e => {\n *     if (e.clipType === \"rect\") {\n *         e.target.style.clip = e.clipStyle;\n *     } else {\n *         e.target.style.clipPath = e.clipStyle;\n *     }\n * }).on(\"clipEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n * When dragging the target, the clip also moves. (default: true)\n * @name Moveable.Clippable#dragWithClip\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     clippable: true,\n *     defaultClipPath: \"inset\",\n *     customClipPath: \"\",\n *     clipRelative: false,\n *     clipArea: false,\n *     dragWithClip: true,\n * });\n * moveable.on(\"clipStart\", e => {\n *     console.log(e);\n * }).on(\"clip\", e => {\n *     if (e.clipType === \"rect\") {\n *         e.target.style.clip = e.clipStyle;\n *     } else {\n *         e.target.style.clipPath = e.clipStyle;\n *     }\n * }).on(\"clipEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n * You can drag the clip by setting clipArea.\n * @name Moveable.Clippable#clipArea\n * @default false\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     clippable: true,\n *     defaultClipPath: \"inset\",\n *     customClipPath: \"\",\n *     clipRelative: false,\n *     clipArea: false,\n *     dragWithClip: true,\n * });\n * moveable.on(\"clipStart\", e => {\n *     console.log(e);\n * }).on(\"clip\", e => {\n *     if (e.clipType === \"rect\") {\n *         e.target.style.clip = e.clipStyle;\n *     } else {\n *         e.target.style.clipPath = e.clipStyle;\n *     }\n * }).on(\"clipEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n* Whether the clip is bound to the target.\n* @name Moveable.Clippable#clipTargetBounds\n* @default false\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     clippable: true,\n*     defaultClipPath: \"inset\",\n*     customClipPath: \"\",\n*     clipRelative: false,\n*     clipArea: false,\n*     dragWithClip: true,\n*     clipTargetBounds: true,\n* });\n* moveable.on(\"clipStart\", e => {\n*     console.log(e);\n* }).on(\"clip\", e => {\n*     if (e.clipType === \"rect\") {\n*         e.target.style.clip = e.clipStyle;\n*     } else {\n*         e.target.style.clipPath = e.clipStyle;\n*     }\n* }).on(\"clipEnd\", e => {\n*     console.log(e);\n* });\n*/\n\n/**\n * Add clip guidelines in the vertical direction.\n * @name Moveable.Clippable#clipVerticalGuidelines\n * @default 0\n * @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     clippable: true,\n*     defaultClipPath: \"inset\",\n*     customClipPath: \"\",\n*     clipRelative: false,\n*     clipArea: false,\n*     dragWithClip: true,\n*     clipVerticalGuidelines: [0, 100, 200],\n*     clipHorizontalGuidelines: [0, 100, 200],\n*     clipSnapThreshold: 5,\n* });\n*/\n\n/**\n* Add clip guidelines in the horizontal direction.\n* @name Moveable.Clippable#clipHorizontalGuidelines\n* @default []\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     clippable: true,\n*     defaultClipPath: \"inset\",\n*     customClipPath: \"\",\n*     clipRelative: false,\n*     clipArea: false,\n*     dragWithClip: true,\n*     clipVerticalGuidelines: [0, 100, 200],\n*     clipHorizontalGuidelines: [0, 100, 200],\n*     clipSnapThreshold: 5,\n* });\n*/\n\n/**\n* istance value that can snap to clip guidelines.\n* @name Moveable.Clippable#clipSnapThreshold\n* @default 5\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     clippable: true,\n*     defaultClipPath: \"inset\",\n*     customClipPath: \"\",\n*     clipRelative: false,\n*     clipArea: false,\n*     dragWithClip: true,\n*     clipVerticalGuidelines: [0, 100, 200],\n*     clipHorizontalGuidelines: [0, 100, 200],\n*     clipSnapThreshold: 5,\n* });\n*/\n\n/**\n * When drag start the clip area or controls, the `clipStart` event is called.\n * @memberof Moveable.Clippable\n * @event clipStart\n * @param {Moveable.Clippable.OnClipStart} - Parameters for the `clipStart` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     clippable: true,\n *     defaultClipPath: \"inset\",\n *     customClipPath: \"\",\n *     clipRelative: false,\n *     clipArea: false,\n *     dragWithClip: true,\n * });\n * moveable.on(\"clipStart\", e => {\n *     console.log(e);\n * }).on(\"clip\", e => {\n *     if (e.clipType === \"rect\") {\n *         e.target.style.clip = e.clipStyle;\n *     } else {\n *         e.target.style.clipPath = e.clipStyle;\n *     }\n * }).on(\"clipEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n * When drag the clip area or controls, the `clip` event is called.\n * @memberof Moveable.Clippable\n * @event clip\n * @param {Moveable.Clippable.OnClip} - Parameters for the `clip` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     clippable: true,\n *     defaultClipPath: \"inset\",\n *     customClipPath: \"\",\n *     clipRelative: false,\n *     clipArea: false,\n *     dragWithClip: true,\n * });\n * moveable.on(\"clipStart\", e => {\n *     console.log(e);\n * }).on(\"clip\", e => {\n *     if (e.clipType === \"rect\") {\n *         e.target.style.clip = e.clipStyle;\n *     } else {\n *         e.target.style.clipPath = e.clipStyle;\n *     }\n * }).on(\"clipEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n * When drag end the clip area or controls, the `clipEnd` event is called.\n * @memberof Moveable.Clippable\n * @event clipEnd\n * @param {Moveable.Clippable.OnClipEnd} - Parameters for the `clipEnd` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     clippable: true,\n *     defaultClipPath: \"inset\",\n *     customClipPath: \"\",\n *     clipRelative: false,\n *     clipArea: false,\n *     dragWithClip: true,\n * });\n * moveable.on(\"clipStart\", e => {\n *     console.log(e);\n * }).on(\"clip\", e => {\n *     if (e.clipType === \"rect\") {\n *         e.target.style.clip = e.clipStyle;\n *     } else {\n *         e.target.style.clipPath = e.clipStyle;\n *     }\n * }).on(\"clipEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n * @namespace OriginDraggable\n * @memberof Moveable\n * @description Whether to drag origin (default: false)\n */\n\nvar OriginDraggable = {\n  name: \"originDraggable\",\n  props: {\n    originDraggable: Boolean,\n    originRelative: Boolean\n  },\n  events: {\n    onDragOriginStart: \"dragOriginStart\",\n    onDragOrigin: \"dragOrigin\",\n    onDragOriginEnd: \"dragOriginEnd\"\n  },\n  css: [\":host[data-able-origindraggable] .control.origin {\\n    pointer-events: auto;\\n}\"],\n  dragControlCondition: function (_, e) {\n    if (e.isRequest) {\n      return e.requestAble === \"originDraggable\";\n    }\n\n    return hasClass(e.inputEvent.target, prefix(\"origin\"));\n  },\n  dragControlStart: function (moveable, e) {\n    var datas = e.datas;\n    setDragStart(moveable, e);\n    var params = fillParams(moveable, e, {\n      dragStart: Draggable.dragStart(moveable, new CustomGesto().dragStart([0, 0], e))\n    });\n    var result = triggerEvent(moveable, \"onDragOriginStart\", params);\n    datas.startOrigin = moveable.state.transformOrigin;\n    datas.startTargetOrigin = moveable.state.targetOrigin;\n    datas.prevOrigin = [0, 0];\n    datas.isDragOrigin = true;\n\n    if (result === false) {\n      datas.isDragOrigin = false;\n      return false;\n    }\n\n    return params;\n  },\n  dragControl: function (moveable, e) {\n    var datas = e.datas,\n        isPinch = e.isPinch,\n        isRequest = e.isRequest;\n\n    if (!datas.isDragOrigin) {\n      return false;\n    }\n\n    var _a = getDragDist(e),\n        distX = _a[0],\n        distY = _a[1];\n\n    var state = moveable.state;\n    var width = state.width,\n        height = state.height,\n        offsetMatrix = state.offsetMatrix,\n        targetMatrix = state.targetMatrix,\n        is3d = state.is3d;\n    var _b = moveable.props.originRelative,\n        originRelative = _b === void 0 ? true : _b;\n    var n = is3d ? 4 : 3;\n    var dist = [distX, distY];\n\n    if (isRequest) {\n      var distOrigin = e.distOrigin;\n\n      if (distOrigin[0] || distOrigin[1]) {\n        dist = distOrigin;\n      }\n    }\n\n    var origin = plus(datas.startOrigin, dist);\n    var targetOrigin = plus(datas.startTargetOrigin, dist);\n    var delta = minus(dist, datas.prevOrigin);\n    var nextMatrix = getNextMatrix(offsetMatrix, targetMatrix, origin, n);\n    var rect = moveable.getRect();\n    var nextRect = getRect(calculatePoses(nextMatrix, width, height, n));\n    var dragDelta = [rect.left - nextRect.left, rect.top - nextRect.top];\n    datas.prevOrigin = dist;\n    var transformOrigin = [convertCSSSize(targetOrigin[0], width, originRelative), convertCSSSize(targetOrigin[1], height, originRelative)].join(\" \");\n    var result = Draggable.drag(moveable, setCustomDrag(e, moveable.state, dragDelta, !!isPinch, false));\n    var params = fillParams(moveable, e, __assign(__assign({\n      width: width,\n      height: height,\n      origin: origin,\n      dist: dist,\n      delta: delta,\n      transformOrigin: transformOrigin,\n      drag: result\n    }, fillCSSObject({\n      transformOrigin: transformOrigin,\n      transform: result.transform\n    }, e)), {\n      afterTransform: result.transform\n    }));\n    triggerEvent(moveable, \"onDragOrigin\", params);\n    return params;\n  },\n  dragControlEnd: function (moveable, e) {\n    var datas = e.datas;\n\n    if (!datas.isDragOrigin) {\n      return false;\n    }\n\n    triggerEvent(moveable, \"onDragOriginEnd\", fillEndParams(moveable, e, {}));\n    return true;\n  },\n  dragGroupControlCondition: function (moveable, e) {\n    return this.dragControlCondition(moveable, e);\n  },\n  dragGroupControlStart: function (moveable, e) {\n    var params = this.dragControlStart(moveable, e);\n\n    if (!params) {\n      return false;\n    }\n\n    return true;\n  },\n  dragGroupControl: function (moveable, e) {\n    var params = this.dragControl(moveable, e);\n\n    if (!params) {\n      return false;\n    }\n\n    moveable.transformOrigin = params.transformOrigin;\n    return true;\n  },\n\n  /**\n  * @method Moveable.OriginDraggable#request\n  * @param {object} e - the OriginDraggable's request parameter\n  * @param {number} [e.x] - x position\n  * @param {number} [e.y] - y position\n  * @param {number} [e.deltaX] - x number to move\n  * @param {number} [e.deltaY] - y number to move\n  * @param {array} [e.deltaOrigin] - left, top number to move transform-origin\n  * @param {array} [e.origin] - transform-origin position\n  * @param {number} [e.isInstant] - Whether to execute the request instantly\n  * @return {Moveable.Requester} Moveable Requester\n  * @example\n   * // Instantly Request (requestStart - request - requestEnd)\n  * // Use Relative Value\n  * moveable.request(\"originDraggable\", { deltaX: 10, deltaY: 10 }, true);\n  * // Use Absolute Value\n  * moveable.request(\"originDraggable\", { x: 200, y: 100 }, true);\n  * // Use Transform Value\n  * moveable.request(\"originDraggable\", { deltaOrigin: [10, 0] }, true);\n  * moveable.request(\"originDraggable\", { origin: [100, 0] }, true);\n  * // requestStart\n  * const requester = moveable.request(\"originDraggable\");\n  *\n  * // request\n  * // Use Relative Value\n  * requester.request({ deltaX: 10, deltaY: 10 });\n  * requester.request({ deltaX: 10, deltaY: 10 });\n  * requester.request({ deltaX: 10, deltaY: 10 });\n  * // Use Absolute Value\n  * moveable.request(\"originDraggable\", { x: 200, y: 100 });\n  * moveable.request(\"originDraggable\", { x: 220, y: 100 });\n  * moveable.request(\"originDraggable\", { x: 240, y: 100 });\n  *\n  * // requestEnd\n  * requester.requestEnd();\n  */\n  request: function (moveable) {\n    var datas = {};\n    var rect = moveable.getRect();\n    var distX = 0;\n    var distY = 0;\n    var transformOrigin = rect.transformOrigin;\n    var distOrigin = [0, 0];\n    return {\n      isControl: true,\n      requestStart: function () {\n        return {\n          datas: datas\n        };\n      },\n      request: function (e) {\n        if (\"deltaOrigin\" in e) {\n          distOrigin[0] += e.deltaOrigin[0];\n          distOrigin[1] += e.deltaOrigin[1];\n        } else if (\"origin\" in e) {\n          distOrigin[0] = e.origin[0] - transformOrigin[0];\n          distOrigin[1] = e.origin[1] - transformOrigin[1];\n        } else {\n          if (\"x\" in e) {\n            distX = e.x - rect.left;\n          } else if (\"deltaX\" in e) {\n            distX += e.deltaX;\n          }\n\n          if (\"y\" in e) {\n            distY = e.y - rect.top;\n          } else if (\"deltaY\" in e) {\n            distY += e.deltaY;\n          }\n        }\n\n        return {\n          datas: datas,\n          distX: distX,\n          distY: distY,\n          distOrigin: distOrigin\n        };\n      },\n      requestEnd: function () {\n        return {\n          datas: datas,\n          isDrag: true\n        };\n      }\n    };\n  }\n};\n/**\n * Whether to drag origin (default: false)\n * @name Moveable.OriginDraggable#originDraggable\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     originDraggable: true,\n * });\n * let translate = [0, 0];\n * moveable.on(\"dragOriginStart\", e => {\n *     e.dragStart && e.dragStart.set(translate);\n * }).on(\"dragOrigin\", e => {\n *     translate = e.drag.beforeTranslate;\n *     e.target.style.cssText\n *         = `transform-origin: ${e.transformOrigin};`\n *         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\n * }).on(\"dragOriginEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n * % Can be used instead of the absolute px (default: true)\n * @name Moveable.OriginDraggable#originRelative\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     originDraggable: true,\n *     originRelative: false,\n * });\n * moveable.originRelative = true;\n */\n\n/**\n* When drag start the origin, the `dragOriginStart` event is called.\n* @memberof Moveable.OriginDraggable\n* @event dragOriginStart\n* @param {Moveable.OriginDraggable.OnDragOriginStart} - Parameters for the `dragOriginStart` event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     originDraggable: true,\n* });\n* let translate = [0, 0];\n* moveable.on(\"dragOriginStart\", e => {\n*     e.dragStart && e.dragStart.set(translate);\n* }).on(\"dragOrigin\", e => {\n*     translate = e.drag.beforeTranslate;\n*     e.target.style.cssText\n*         = `transform-origin: ${e.transformOrigin};`\n*         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\n* }).on(\"dragOriginEnd\", e => {\n*     console.log(e);\n* });\n*/\n\n/**\n* When drag the origin, the `dragOrigin` event is called.\n* @memberof Moveable.OriginDraggable\n* @event dragOrigin\n* @param {Moveable.OriginDraggable.OnDragOrigin} - Parameters for the `dragOrigin` event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     originDraggable: true,\n* });\n* let translate = [0, 0];\n* moveable.on(\"dragOriginStart\", e => {\n*     e.dragStart && e.dragStart.set(translate);\n* }).on(\"dragOrigin\", e => {\n*     translate = e.drag.beforeTranslate;\n*     e.target.style.cssText\n*         = `transform-origin: ${e.transformOrigin};`\n*         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\n* }).on(\"dragOriginEnd\", e => {\n*     console.log(e);\n* });\n*/\n\n/**\n* When drag end the origin, the `dragOriginEnd` event is called.\n* @memberof Moveable.OriginDraggable\n* @event dragOriginEnd\n* @param {Moveable.OriginDraggable.OnDragOriginEnd} - Parameters for the `dragOriginEnd` event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     originDraggable: true,\n* });\n* let translate = [0, 0];\n* moveable.on(\"dragOriginStart\", e => {\n*     e.dragStart && e.dragStart.set(translate);\n* }).on(\"dragOrigin\", e => {\n*     translate = e.drag.beforeTranslate;\n*     e.target.style.cssText\n*         = `transform-origin: ${e.transformOrigin};`\n*         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\n* }).on(\"dragOriginEnd\", e => {\n*     console.log(e);\n* });\n*/\n\nfunction addBorderRadiusByLine(controlPoses, lineIndex, distX, distY) {\n  // lineIndex\n  // 0 top\n  // 1 right\n  // 2 bottom\n  // 3 left\n  var horizontalsLength = controlPoses.filter(function (_a) {\n    var virtual = _a.virtual,\n        horizontal = _a.horizontal;\n    return horizontal && !virtual;\n  }).length;\n  var verticalsLength = controlPoses.filter(function (_a) {\n    var virtual = _a.virtual,\n        vertical = _a.vertical;\n    return vertical && !virtual;\n  }).length;\n  var controlIndex = -1; //top\n\n  if (lineIndex === 0) {\n    if (horizontalsLength === 0) {\n      controlIndex = 0;\n    } else if (horizontalsLength === 1) {\n      controlIndex = 1;\n    }\n  } // bottom\n\n\n  if (lineIndex === 2) {\n    if (horizontalsLength <= 2) {\n      controlIndex = 2;\n    } else if (horizontalsLength <= 3) {\n      controlIndex = 3;\n    }\n  } // left\n\n\n  if (lineIndex === 3) {\n    if (verticalsLength === 0) {\n      controlIndex = 4;\n    } else if (verticalsLength < 4) {\n      controlIndex = 7;\n    }\n  } // right\n\n\n  if (lineIndex === 1) {\n    if (verticalsLength <= 1) {\n      controlIndex = 5;\n    } else if (verticalsLength <= 2) {\n      controlIndex = 6;\n    }\n  }\n\n  if (controlIndex === -1 || !controlPoses[controlIndex].virtual) {\n    return;\n  }\n\n  var controlPoseInfo = controlPoses[controlIndex];\n  addBorderRadius(controlPoses, controlIndex);\n\n  if (controlIndex < 4) {\n    controlPoseInfo.pos[0] = distX;\n  } else {\n    controlPoseInfo.pos[1] = distY;\n  }\n}\n\nfunction addBorderRadius(controlPoses, index) {\n  if (index < 4) {\n    controlPoses.slice(0, index + 1).forEach(function (info) {\n      info.virtual = false;\n    });\n  } else {\n    if (controlPoses[0].virtual) {\n      controlPoses[0].virtual = false;\n    }\n\n    controlPoses.slice(4, index + 1).forEach(function (info) {\n      info.virtual = false;\n    });\n  }\n}\n\nfunction removeBorderRadius(controlPoses, index) {\n  if (index < 4) {\n    controlPoses.slice(index, 4).forEach(function (info) {\n      info.virtual = true;\n    });\n  } else {\n    controlPoses.slice(index).forEach(function (info) {\n      info.virtual = true;\n    });\n  }\n}\n\nfunction getBorderRadius(borderRadius, width, height, minCounts, full) {\n  if (minCounts === void 0) {\n    minCounts = [0, 0];\n  }\n\n  var values = [];\n\n  if (!borderRadius || borderRadius === \"0px\") {\n    values = [];\n  } else {\n    values = splitSpace(borderRadius);\n  }\n\n  return getRadiusValues(values, width, height, 0, 0, minCounts, full);\n}\n\nfunction triggerRoundEvent(moveable, e, dist, delta, nextPoses) {\n  var state = moveable.state;\n  var width = state.width,\n      height = state.height;\n\n  var _a = getRadiusStyles(nextPoses, moveable.props.roundRelative, width, height),\n      raws = _a.raws,\n      styles = _a.styles,\n      radiusPoses = _a.radiusPoses;\n\n  var _b = splitRadiusPoses(radiusPoses, raws),\n      horizontals = _b.horizontals,\n      verticals = _b.verticals;\n\n  var borderRadius = styles.join(\" \");\n  state.borderRadiusState = borderRadius;\n  var params = fillParams(moveable, e, __assign({\n    horizontals: horizontals,\n    verticals: verticals,\n    borderRadius: borderRadius,\n    width: width,\n    height: height,\n    delta: delta,\n    dist: dist\n  }, fillCSSObject({\n    borderRadius: borderRadius\n  }, e)));\n  triggerEvent(moveable, \"onRound\", params);\n  return params;\n}\n\nfunction getStyleBorderRadius(moveable) {\n  var style = moveable.getState().style;\n  var borderRadius = style.borderRadius || \"\";\n\n  if (!borderRadius && moveable.props.groupable) {\n    var firstTarget = moveable.getTargets()[0];\n\n    if (firstTarget) {\n      borderRadius = getComputedStyle(firstTarget).borderRadius;\n      style.borderRadius = borderRadius;\n    }\n  }\n\n  return borderRadius;\n}\n/**\n * @namespace Moveable.Roundable\n * @description Whether to show and drag or double click border-radius\n */\n\n\nvar Roundable = {\n  name: \"roundable\",\n  props: {\n    roundable: Boolean,\n    roundRelative: Boolean,\n    minRoundControls: Array,\n    maxRoundControls: Array,\n    roundClickable: Boolean,\n    roundPadding: Number,\n    isDisplayShadowRoundControls: Boolean\n  },\n  events: {\n    onRoundStart: \"roundStart\",\n    onRound: \"round\",\n    onRoundEnd: \"roundEnd\",\n    onRoundGroupStart: \"roundGroupStart\",\n    onRoundGroup: \"roundGroup\",\n    onRoundGroupEnd: \"roundGroupEnd\"\n  },\n  css: [\".control.border-radius {\\n    background: #d66;\\n    cursor: pointer;\\n    z-index: 3;\\n}\", \".control.border-radius.vertical {\\n    background: #d6d;\\n    z-index: 2;\\n}\", \".control.border-radius.virtual {\\n    opacity: 0.5;\\n    z-index: 1;\\n}\", \":host.round-line-clickable .line.direction {\\n    cursor: pointer;\\n}\"],\n  className: function (moveable) {\n    var roundClickable = moveable.props.roundClickable;\n    return roundClickable === true || roundClickable === \"line\" ? prefix(\"round-line-clickable\") : \"\";\n  },\n  requestStyle: function () {\n    return [\"borderRadius\"];\n  },\n  render: function (moveable, React) {\n    var _a = moveable.getState(),\n        target = _a.target,\n        width = _a.width,\n        height = _a.height,\n        allMatrix = _a.allMatrix,\n        is3d = _a.is3d,\n        left = _a.left,\n        top = _a.top,\n        borderRadiusState = _a.borderRadiusState;\n\n    var _b = moveable.props,\n        _c = _b.minRoundControls,\n        minRoundControls = _c === void 0 ? [0, 0] : _c,\n        _d = _b.maxRoundControls,\n        maxRoundControls = _d === void 0 ? [4, 4] : _d,\n        zoom = _b.zoom,\n        _e = _b.roundPadding,\n        roundPadding = _e === void 0 ? 0 : _e,\n        isDisplayShadowRoundControls = _b.isDisplayShadowRoundControls,\n        groupable = _b.groupable;\n\n    if (!target) {\n      return null;\n    }\n\n    var borderRadius = borderRadiusState || getStyleBorderRadius(moveable);\n    var n = is3d ? 4 : 3;\n    var radiusValues = getBorderRadius(borderRadius, width, height, minRoundControls, true);\n\n    if (!radiusValues) {\n      return null;\n    }\n\n    var verticalCount = 0;\n    var horizontalCount = 0;\n    var basePos = groupable ? [0, 0] : [left, top];\n    return radiusValues.map(function (v, i) {\n      var horizontal = v.horizontal;\n      var vertical = v.vertical;\n      var direction = v.direction || \"\";\n\n      var originalPos = __spreadArray([], v.pos, true);\n\n      horizontalCount += Math.abs(horizontal);\n      verticalCount += Math.abs(vertical);\n\n      if (horizontal && direction.indexOf(\"n\") > -1) {\n        originalPos[1] -= roundPadding;\n      }\n\n      if (vertical && direction.indexOf(\"w\") > -1) {\n        originalPos[0] -= roundPadding;\n      }\n\n      if (horizontal && direction.indexOf(\"s\") > -1) {\n        originalPos[1] += roundPadding;\n      }\n\n      if (vertical && direction.indexOf(\"e\") > -1) {\n        originalPos[0] += roundPadding;\n      }\n\n      var pos = minus(calculatePosition(allMatrix, originalPos, n), basePos);\n      var isDisplay = v.vertical ? verticalCount <= maxRoundControls[1] && (isDisplayShadowRoundControls || !v.virtual) : horizontalCount <= maxRoundControls[0] && (isDisplayShadowRoundControls || !v.virtual);\n      return React.createElement(\"div\", {\n        key: \"borderRadiusControl\".concat(i),\n        className: prefix(\"control\", \"border-radius\", v.vertical ? \"vertical\" : \"\", v.virtual ? \"virtual\" : \"\"),\n        \"data-radius-index\": i,\n        style: {\n          display: isDisplay ? \"block\" : \"none\",\n          transform: \"translate(\".concat(pos[0], \"px, \").concat(pos[1], \"px) scale(\").concat(zoom, \")\")\n        }\n      });\n    });\n  },\n  dragControlCondition: function (moveable, e) {\n    if (!e.inputEvent || e.isRequest) {\n      return false;\n    }\n\n    var className = e.inputEvent.target.getAttribute(\"class\") || \"\";\n    return className.indexOf(\"border-radius\") > -1 || className.indexOf(\"moveable-line\") > -1 && className.indexOf(\"moveable-direction\") > -1;\n  },\n  dragGroupControlCondition: function (moveable, e) {\n    return this.dragControlCondition(moveable, e);\n  },\n  dragControlStart: function (moveable, e) {\n    var inputEvent = e.inputEvent,\n        datas = e.datas;\n    var inputTarget = inputEvent.target;\n    var className = inputTarget.getAttribute(\"class\") || \"\";\n    var isControl = className.indexOf(\"border-radius\") > -1;\n    var isLine = className.indexOf(\"moveable-line\") > -1 && className.indexOf(\"moveable-direction\") > -1;\n    var controlIndex = isControl ? parseInt(inputTarget.getAttribute(\"data-radius-index\"), 10) : -1;\n    var lineIndex = -1;\n\n    if (isLine) {\n      var indexAttr = inputTarget.getAttribute(\"data-line-key\") || \"\";\n\n      if (indexAttr) {\n        lineIndex = parseInt(indexAttr.replace(/render-line-/g, \"\"), 10);\n\n        if (isNaN(lineIndex)) {\n          lineIndex = -1;\n        }\n      }\n    }\n\n    if (!isControl && !isLine) {\n      return false;\n    }\n\n    var params = fillParams(moveable, e, {});\n    var result = triggerEvent(moveable, \"onRoundStart\", params);\n\n    if (result === false) {\n      return false;\n    }\n\n    datas.lineIndex = lineIndex;\n    datas.controlIndex = controlIndex;\n    datas.isControl = isControl;\n    datas.isLine = isLine;\n    setDragStart(moveable, e);\n    var _a = moveable.props,\n        roundRelative = _a.roundRelative,\n        _b = _a.minRoundControls,\n        minRoundControls = _b === void 0 ? [0, 0] : _b;\n    var state = moveable.state;\n    var width = state.width,\n        height = state.height;\n    datas.isRound = true;\n    datas.prevDist = [0, 0];\n    var borderRadius = getStyleBorderRadius(moveable);\n    var controlPoses = getBorderRadius(borderRadius || \"\", width, height, minRoundControls, true) || [];\n    datas.controlPoses = controlPoses;\n    state.borderRadiusState = getRadiusStyles(controlPoses, roundRelative, width, height).styles.join(\" \");\n    return params;\n  },\n  dragControl: function (moveable, e) {\n    var datas = e.datas;\n    var controlPoses = datas.controlPoses;\n\n    if (!datas.isRound || !datas.isControl || !controlPoses.length) {\n      return false;\n    }\n\n    var index = datas.controlIndex;\n\n    var _a = getDragDist(e),\n        distX = _a[0],\n        distY = _a[1];\n\n    var dist = [distX, distY];\n    var delta = minus(dist, datas.prevDist);\n    var _b = moveable.props.maxRoundControls,\n        maxRoundControls = _b === void 0 ? [4, 4] : _b;\n    var _c = moveable.state,\n        width = _c.width,\n        height = _c.height;\n    var selectedControlPose = controlPoses[index];\n    var selectedVertical = selectedControlPose.vertical;\n    var selectedHorizontal = selectedControlPose.horizontal; // 0: [0, 1, 2, 3] maxCount === 1\n    // 0: [0, 2] maxCount === 2\n    // 1: [1, 3] maxCount === 2\n    // 0: [0] maxCount === 3\n    // 1: [1, 3] maxCount === 3\n\n    var dists = controlPoses.map(function (pose) {\n      var horizontal = pose.horizontal,\n          vertical = pose.vertical;\n      var poseDist = [horizontal * selectedHorizontal * dist[0], vertical * selectedVertical * dist[1]];\n\n      if (horizontal) {\n        if (maxRoundControls[0] === 1) {\n          return poseDist;\n        } else if (maxRoundControls[0] < 4 && horizontal !== selectedHorizontal) {\n          return poseDist;\n        }\n      } else if (maxRoundControls[1] === 0) {\n        poseDist[1] = vertical * selectedHorizontal * dist[0] / width * height;\n        return poseDist;\n      } else if (selectedVertical) {\n        if (maxRoundControls[1] === 1) {\n          return poseDist;\n        } else if (maxRoundControls[1] < 4 && vertical !== selectedVertical) {\n          return poseDist;\n        }\n      }\n\n      return [0, 0];\n    });\n    dists[index] = dist;\n    var nextPoses = controlPoses.map(function (info, i) {\n      return __assign(__assign({}, info), {\n        pos: plus(info.pos, dists[i])\n      });\n    });\n\n    if (index < 4) {\n      nextPoses.slice(0, index + 1).forEach(function (info) {\n        info.virtual = false;\n      });\n    } else {\n      nextPoses.slice(4, index + 1).forEach(function (info) {\n        info.virtual = false;\n      });\n    }\n\n    datas.prevDist = [distX, distY];\n    return triggerRoundEvent(moveable, e, dist, delta, nextPoses);\n  },\n  dragControlEnd: function (moveable, e) {\n    var state = moveable.state;\n    state.borderRadiusState = \"\";\n    var datas = e.datas,\n        isDouble = e.isDouble;\n\n    if (!datas.isRound) {\n      return false;\n    }\n\n    var isControl = datas.isControl,\n        controlIndex = datas.controlIndex,\n        isLine = datas.isLine,\n        lineIndex = datas.lineIndex;\n    var controlPoses = datas.controlPoses;\n    var length = controlPoses.filter(function (_a) {\n      var virtual = _a.virtual;\n      return virtual;\n    }).length;\n    var _a = moveable.props.roundClickable,\n        roundClickable = _a === void 0 ? true : _a;\n\n    if (isDouble && roundClickable) {\n      if (isControl && (roundClickable === true || roundClickable === \"control\")) {\n        removeBorderRadius(controlPoses, controlIndex);\n      } else if (isLine && (roundClickable === true || roundClickable === \"line\")) {\n        var _b = calculatePointerDist(moveable, e),\n            distX = _b[0],\n            distY = _b[1];\n\n        addBorderRadiusByLine(controlPoses, lineIndex, distX, distY);\n      }\n\n      if (length !== controlPoses.filter(function (_a) {\n        var virtual = _a.virtual;\n        return virtual;\n      }).length) {\n        triggerRoundEvent(moveable, e, [0, 0], [0, 0], controlPoses);\n      }\n    }\n\n    var params = fillEndParams(moveable, e, {});\n    triggerEvent(moveable, \"onRoundEnd\", params);\n    state.borderRadiusState = \"\";\n    return params;\n  },\n  dragGroupControlStart: function (moveable, e) {\n    var result = this.dragControlStart(moveable, e);\n\n    if (!result) {\n      return false;\n    }\n\n    var moveables = moveable.moveables;\n    var targets = moveable.props.targets;\n    var events = fillChildEvents(moveable, \"roundable\", e);\n\n    var nextParams = __assign({\n      targets: moveable.props.targets,\n      events: events.map(function (ev, i) {\n        return __assign(__assign({}, ev), {\n          target: targets[i],\n          moveable: moveables[i],\n          currentTarget: moveables[i]\n        });\n      })\n    }, result);\n\n    triggerEvent(moveable, \"onRoundGroupStart\", nextParams);\n    return result;\n  },\n  dragGroupControl: function (moveable, e) {\n    var result = this.dragControl(moveable, e);\n\n    if (!result) {\n      return false;\n    }\n\n    var moveables = moveable.moveables;\n    var targets = moveable.props.targets;\n    var events = fillChildEvents(moveable, \"roundable\", e);\n\n    var nextParams = __assign({\n      targets: moveable.props.targets,\n      events: events.map(function (ev, i) {\n        return __assign(__assign(__assign({}, ev), {\n          target: targets[i],\n          moveable: moveables[i],\n          currentTarget: moveables[i]\n        }), fillCSSObject({\n          borderRadius: result.borderRadius\n        }, ev));\n      })\n    }, result);\n\n    triggerEvent(moveable, \"onRoundGroup\", nextParams);\n    return nextParams;\n  },\n  dragGroupControlEnd: function (moveable, e) {\n    var moveables = moveable.moveables;\n    var targets = moveable.props.targets;\n    var events = fillChildEvents(moveable, \"roundable\", e);\n    catchEvent(moveable, \"onRound\", function (parentEvent) {\n      var nextParams = __assign({\n        targets: moveable.props.targets,\n        events: events.map(function (ev, i) {\n          return __assign(__assign(__assign({}, ev), {\n            target: targets[i],\n            moveable: moveables[i],\n            currentTarget: moveables[i]\n          }), fillCSSObject({\n            borderRadius: parentEvent.borderRadius\n          }, ev));\n        })\n      }, parentEvent);\n\n      triggerEvent(moveable, \"onRoundGroup\", nextParams);\n    });\n    var result = this.dragControlEnd(moveable, e);\n\n    if (!result) {\n      return false;\n    }\n\n    var nextParams = __assign({\n      targets: moveable.props.targets,\n      events: events.map(function (ev, i) {\n        var _a;\n\n        return __assign(__assign({}, ev), {\n          target: targets[i],\n          moveable: moveables[i],\n          currentTarget: moveables[i],\n          lastEvent: (_a = ev.datas) === null || _a === void 0 ? void 0 : _a.lastEvent\n        });\n      })\n    }, result);\n\n    triggerEvent(moveable, \"onRoundGroupEnd\", nextParams);\n    return nextParams;\n  },\n  unset: function (moveable) {\n    moveable.state.borderRadiusState = \"\";\n  }\n};\n/**\n * Whether to show and drag or double click border-radius, (default: false)\n * @name Moveable.Roundable#roundable\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     roundable: true,\n *     roundRelative: false,\n * });\n * moveable.on(\"roundStart\", e => {\n *     console.log(e);\n * }).on(\"round\", e => {\n *     e.target.style.borderRadius = e.borderRadius;\n * }).on(\"roundEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n * % Can be used instead of the absolute px\n * @name Moveable.Roundable#roundRelative\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     roundable: true,\n *     roundRelative: false,\n * });\n * moveable.on(\"roundStart\", e => {\n *     console.log(e);\n * }).on(\"round\", e => {\n *     e.target.style.borderRadius = e.borderRadius;\n * }).on(\"roundEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n * Minimum number of round controls. It moves in proportion by control. [horizontal, vertical] (default: [0, 0])\n * @name Moveable.Roundable#minRoundControls\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     roundable: true,\n *     roundRelative: false,\n *     minRoundControls: [0, 0],\n * });\n * moveable.minRoundControls = [1, 0];\n */\n\n/**\n * Maximum number of round controls. It moves in proportion by control. [horizontal, vertical] (default: [4, 4])\n * @name Moveable.Roundable#maxRoundControls\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     roundable: true,\n *     roundRelative: false,\n *     maxRoundControls: [4, 4],\n * });\n * moveable.maxRoundControls = [1, 0];\n */\n\n/**\n * Whether you can add/delete round controls by double-clicking a line or control.\n * @name Moveable.Roundable#roundClickable\n * @default true\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     roundable: true,\n *     roundRelative: false,\n *     roundClickable: true,\n * });\n * moveable.roundClickable = false;\n */\n\n/**\n * Whether to show a round control that does not actually exist as a shadow\n * @name Moveable.Roundable#isDisplayShadowRoundControls\n * @default false\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     roundable: true,\n *     isDisplayShadowRoundControls: false,\n * });\n * moveable.isDisplayShadowRoundControls = true;\n */\n\n/**\n * The padding value of the position of the round control\n * @name Moveable.Roundable#roundPadding\n * @default false\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     roundable: true,\n *     roundPadding: 0,\n * });\n * moveable.roundPadding = 15;\n */\n\n/**\n * When drag start the clip area or controls, the `roundStart` event is called.\n * @memberof Moveable.Roundable\n * @event roundStart\n * @param {Moveable.Roundable.OnRoundStart} - Parameters for the `roundStart` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     roundable: true,\n *     roundRelative: false,\n * });\n * moveable.on(\"roundStart\", e => {\n *     console.log(e);\n * }).on(\"round\", e => {\n *     e.target.style.borderRadius = e.borderRadius;\n * }).on(\"roundEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n * When drag or double click the border area or controls, the `round` event is called.\n * @memberof Moveable.Roundable\n * @event round\n * @param {Moveable.Roundable.OnRound} - Parameters for the `round` event\n * @example\n  * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     roundable: true,\n *     roundRelative: false,\n * });\n * moveable.on(\"roundStart\", e => {\n *     console.log(e);\n * }).on(\"round\", e => {\n *     e.target.style.borderRadius = e.borderRadius;\n * }).on(\"roundEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n * When drag end the border area or controls, the `roundEnd` event is called.\n * @memberof Moveable.Roundable\n * @event roundEnd\n * @param {Moveable.Roundable.onRoundEnd} - Parameters for the `roundEnd` event\n * @example\n  * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     roundable: true,\n *     roundRelative: false,\n * });\n * moveable.on(\"roundStart\", e => {\n *     console.log(e);\n * }).on(\"round\", e => {\n *     e.target.style.borderRadius = e.borderRadius;\n * }).on(\"roundEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n * When drag start the clip area or controls, the `roundGroupStart` event is called.\n * @memberof Moveable.Roundable\n * @event roundGroupStart\n * @param {Moveable.Roundable.OnRoundGroupStart} - Parameters for the `roundGroupStart` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     targets: [target1, target2, target3],\n *     roundable: true,\n * });\n * moveable.on(\"roundGroupStart\", e => {\n *     console.log(e.targets);\n * }).on(\"roundGroup\", e => {\n *   e.events.forEach(ev => {\n *       ev.target.style.cssText += ev.cssText;\n *   });\n * }).on(\"roundGroupEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n * When drag or double click the border area or controls, the `roundGroup` event is called.\n * @memberof Moveable.Roundable\n * @event roundGroup\n * @param {Moveable.Roundable.OnRoundGroup} - Parameters for the `roundGroup` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     targets: [target1, target2, target3],\n *     roundable: true,\n * });\n * moveable.on(\"roundGroupStart\", e => {\n *     console.log(e.targets);\n * }).on(\"roundGroup\", e => {\n *   e.events.forEach(ev => {\n *       ev.target.style.cssText += ev.cssText;\n *   });\n * }).on(\"roundGroupEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n * When drag end the border area or controls, the `roundGroupEnd` event is called.\n * @memberof Moveable.Roundable\n * @event roundGroupEnd\n * @param {Moveable.Roundable.onRoundGroupEnd} - Parameters for the `roundGroupEnd` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     targets: [target1, target2, target3],\n *     roundable: true,\n * });\n * moveable.on(\"roundGroupStart\", e => {\n *     console.log(e.targets);\n * }).on(\"roundGroup\", e => {\n *     e.events.forEach(ev => {\n *         ev.target.style.cssText += ev.cssText;\n *     });\n * }).on(\"roundGroupEnd\", e => {\n *     console.log(e);\n * });\n */\n\nfunction isIdentityMatrix(matrix, is3d) {\n  var n = is3d ? 4 : 3;\n  var identityMatrix = createIdentityMatrix(n);\n  var value = \"matrix\".concat(is3d ? \"3d\" : \"\", \"(\").concat(identityMatrix.join(\",\"), \")\");\n  return matrix === value || matrix === \"matrix(1,0,0,1,0,0)\";\n}\n\nvar BeforeRenderable = {\n  isPinch: true,\n  name: \"beforeRenderable\",\n  props: {},\n  events: {\n    onBeforeRenderStart: \"beforeRenderStart\",\n    onBeforeRender: \"beforeRender\",\n    onBeforeRenderEnd: \"beforeRenderEnd\",\n    onBeforeRenderGroupStart: \"beforeRenderGroupStart\",\n    onBeforeRenderGroup: \"beforeRenderGroup\",\n    onBeforeRenderGroupEnd: \"beforeRenderGroupEnd\"\n  },\n  dragRelation: \"weak\",\n  setTransform: function (moveable, e) {\n    var _a = moveable.state,\n        is3d = _a.is3d,\n        target = _a.target,\n        targetMatrix = _a.targetMatrix;\n    var transform = target === null || target === void 0 ? void 0 : target.style.transform;\n    var cssMatrix = is3d ? \"matrix3d(\".concat(targetMatrix.join(\",\"), \")\") : \"matrix(\".concat(convertMatrixtoCSS(targetMatrix, true), \")\");\n    var startTransform = !transform || transform === \"none\" ? cssMatrix : transform;\n    e.datas.startTransforms = isIdentityMatrix(startTransform, is3d) ? [] : splitSpace(startTransform);\n  },\n  resetStyle: function (e) {\n    var datas = e.datas;\n    datas.nextStyle = {};\n    datas.nextTransforms = e.datas.startTransforms;\n    datas.nextTransformAppendedIndexes = [];\n  },\n  fillDragStartParams: function (moveable, e) {\n    return fillParams(moveable, e, {\n      setTransform: function (transform) {\n        e.datas.startTransforms = isArray(transform) ? transform : splitSpace(transform);\n      },\n      isPinch: !!e.isPinch\n    });\n  },\n  fillDragParams: function (moveable, e) {\n    return fillParams(moveable, e, {\n      isPinch: !!e.isPinch\n    });\n  },\n  dragStart: function (moveable, e) {\n    this.setTransform(moveable, e);\n    this.resetStyle(e);\n    triggerEvent(moveable, \"onBeforeRenderStart\", this.fillDragStartParams(moveable, e));\n  },\n  drag: function (moveable, e) {\n    this.resetStyle(e);\n    triggerEvent(moveable, \"onBeforeRender\", fillParams(moveable, e, {\n      isPinch: !!e.isPinch\n    }));\n  },\n  dragEnd: function (moveable, e) {\n    triggerEvent(moveable, \"onBeforeRenderEnd\", fillParams(moveable, e, {\n      isPinch: !!e.isPinch,\n      isDrag: e.isDrag\n    }));\n  },\n  dragGroupStart: function (moveable, e) {\n    var _this = this;\n\n    this.dragStart(moveable, e);\n    var events = fillChildEvents(moveable, \"beforeRenderable\", e);\n    var moveables = moveable.moveables;\n    var params = events.map(function (childEvent, i) {\n      var childMoveable = moveables[i];\n\n      _this.setTransform(childMoveable, childEvent);\n\n      _this.resetStyle(childEvent);\n\n      return _this.fillDragStartParams(childMoveable, childEvent);\n    });\n    triggerEvent(moveable, \"onBeforeRenderGroupStart\", fillParams(moveable, e, {\n      isPinch: !!e.isPinch,\n      targets: moveable.props.targets,\n      setTransform: function () {},\n      events: params\n    }));\n  },\n  dragGroup: function (moveable, e) {\n    var _this = this;\n\n    this.drag(moveable, e);\n    var events = fillChildEvents(moveable, \"beforeRenderable\", e);\n    var moveables = moveable.moveables;\n    var params = events.map(function (childEvent, i) {\n      var childMoveable = moveables[i];\n\n      _this.resetStyle(childEvent);\n\n      return _this.fillDragParams(childMoveable, childEvent);\n    });\n    triggerEvent(moveable, \"onBeforeRenderGroup\", fillParams(moveable, e, {\n      isPinch: !!e.isPinch,\n      targets: moveable.props.targets,\n      events: params\n    }));\n  },\n  dragGroupEnd: function (moveable, e) {\n    this.dragEnd(moveable, e);\n    triggerEvent(moveable, \"onBeforeRenderGroupEnd\", fillParams(moveable, e, {\n      isPinch: !!e.isPinch,\n      isDrag: e.isDrag,\n      targets: moveable.props.targets\n    }));\n  },\n  dragControlStart: function (moveable, e) {\n    return this.dragStart(moveable, e);\n  },\n  dragControl: function (moveable, e) {\n    return this.drag(moveable, e);\n  },\n  dragControlEnd: function (moveable, e) {\n    return this.dragEnd(moveable, e);\n  },\n  dragGroupControlStart: function (moveable, e) {\n    return this.dragGroupStart(moveable, e);\n  },\n  dragGroupControl: function (moveable, e) {\n    return this.dragGroup(moveable, e);\n  },\n  dragGroupControlEnd: function (moveable, e) {\n    return this.dragGroupEnd(moveable, e);\n  }\n};\nvar Renderable = {\n  name: \"renderable\",\n  props: {},\n  events: {\n    onRenderStart: \"renderStart\",\n    onRender: \"render\",\n    onRenderEnd: \"renderEnd\",\n    onRenderGroupStart: \"renderGroupStart\",\n    onRenderGroup: \"renderGroup\",\n    onRenderGroupEnd: \"renderGroupEnd\"\n  },\n  dragRelation: \"weak\",\n  dragStart: function (moveable, e) {\n    triggerEvent(moveable, \"onRenderStart\", fillParams(moveable, e, {\n      isPinch: !!e.isPinch\n    }));\n  },\n  drag: function (moveable, e) {\n    triggerEvent(moveable, \"onRender\", this.fillDragParams(moveable, e));\n  },\n  dragAfter: function (moveable, e) {\n    if (e.resultCount) {\n      return this.drag(moveable, e);\n    }\n  },\n  dragEnd: function (moveable, e) {\n    triggerEvent(moveable, \"onRenderEnd\", this.fillDragEndParams(moveable, e));\n  },\n  dragGroupStart: function (moveable, e) {\n    triggerEvent(moveable, \"onRenderGroupStart\", fillParams(moveable, e, {\n      isPinch: !!e.isPinch,\n      targets: moveable.props.targets\n    }));\n  },\n  dragGroup: function (moveable, e) {\n    var _this = this;\n\n    var events = fillChildEvents(moveable, \"beforeRenderable\", e);\n    var moveables = moveable.moveables;\n    var params = events.map(function (childEvent, i) {\n      var childMoveable = moveables[i];\n      return _this.fillDragParams(childMoveable, childEvent);\n    });\n    triggerEvent(moveable, \"onRenderGroup\", fillParams(moveable, e, __assign(__assign({\n      isPinch: !!e.isPinch,\n      targets: moveable.props.targets,\n      transform: getNextTransformText(e)\n    }, fillCSSObject(getNextStyle(e))), {\n      events: params\n    })));\n  },\n  dragGroupEnd: function (moveable, e) {\n    var _this = this;\n\n    var events = fillChildEvents(moveable, \"beforeRenderable\", e);\n    var moveables = moveable.moveables;\n    var params = events.map(function (childEvent, i) {\n      var childMoveable = moveables[i];\n      return _this.fillDragEndParams(childMoveable, childEvent);\n    });\n    triggerEvent(moveable, \"onRenderGroupEnd\", fillParams(moveable, e, __assign({\n      isPinch: !!e.isPinch,\n      isDrag: e.isDrag,\n      targets: moveable.props.targets,\n      events: params,\n      transform: getNextTransformText(e)\n    }, fillCSSObject(getNextStyle(e)))));\n  },\n  dragControlStart: function (moveable, e) {\n    return this.dragStart(moveable, e);\n  },\n  dragControl: function (moveable, e) {\n    return this.drag(moveable, e);\n  },\n  dragControlAfter: function (moveable, e) {\n    return this.dragAfter(moveable, e);\n  },\n  dragControlEnd: function (moveable, e) {\n    return this.dragEnd(moveable, e);\n  },\n  dragGroupControlStart: function (moveable, e) {\n    return this.dragGroupStart(moveable, e);\n  },\n  dragGroupControl: function (moveable, e) {\n    return this.dragGroup(moveable, e);\n  },\n  dragGroupControlEnd: function (moveable, e) {\n    return this.dragGroupEnd(moveable, e);\n  },\n  fillDragParams: function (moveable, e) {\n    return fillParams(moveable, e, __assign({\n      isPinch: !!e.isPinch,\n      transform: getNextTransformText(e)\n    }, fillCSSObject(getNextStyle(e))));\n  },\n  fillDragEndParams: function (moveable, e) {\n    return fillParams(moveable, e, __assign({\n      isPinch: !!e.isPinch,\n      isDrag: e.isDrag,\n      transform: getNextTransformText(e)\n    }, fillCSSObject(getNextStyle(e))));\n  }\n};\n\nfunction triggerAble(moveable, ableType, eventOperation, eventAffix, eventType, e, requestInstant) {\n  var isStart = eventType === \"Start\";\n  var target = moveable.state.target;\n  var isRequest = e.isRequest;\n\n  if (!target || isStart && eventAffix.indexOf(\"Control\") > -1 && !isRequest && moveable.areaElement === e.inputEvent.target) {\n    return false;\n  } // \"drag\" \"Control\" \"After\"\n\n\n  var eventName = \"\".concat(eventOperation).concat(eventAffix).concat(eventType);\n  var conditionName = \"\".concat(eventOperation).concat(eventAffix, \"Condition\");\n  var isEnd = eventType === \"End\";\n  var isAfter = eventType === \"After\";\n  var isFirstStart = isStart && (!moveable.targetGesto || !moveable.controlGesto || !moveable.targetGesto.isFlag() || !moveable.controlGesto.isFlag());\n\n  if (isFirstStart) {\n    moveable.updateRect(eventType, true, false);\n  }\n\n  e.clientDistX = e.distX;\n  e.clientDistY = e.distY;\n\n  if (eventType === \"\" && !isRequest) {\n    // Convert distX, distY\n    convertDragDist(moveable.state, e);\n  } // const isGroup = eventAffix.indexOf(\"Group\") > -1;\n\n\n  var ables = __spreadArray([], moveable[ableType], true);\n\n  if (isRequest) {\n    var requestAble_1 = e.requestAble;\n\n    if (!ables.some(function (able) {\n      return able.name === requestAble_1;\n    })) {\n      ables.push.apply(ables, moveable.props.ables.filter(function (able) {\n        return able.name === requestAble_1;\n      }));\n    }\n  }\n\n  if (!ables.length || ables.every(function (able) {\n    return able.dragRelation;\n  })) {\n    return false;\n  }\n\n  var eventAbles = __spreadArray(__spreadArray([BeforeRenderable], ables, true), [Renderable], false).filter(function (able) {\n    return able[eventName];\n  });\n\n  var datas = e.datas;\n\n  if (isFirstStart) {\n    eventAbles.forEach(function (able) {\n      able.unset && able.unset(moveable);\n    });\n  }\n\n  var inputEvent = e.inputEvent;\n  var inputTarget;\n\n  if (isEnd && inputEvent) {\n    inputTarget = document.elementFromPoint(e.clientX, e.clientY) || inputEvent.target;\n  }\n\n  var resultCount = 0;\n  var isDragStop = false;\n\n  var stop = function () {\n    var _a;\n\n    isDragStop = true;\n    (_a = e.stop) === null || _a === void 0 ? void 0 : _a.call(e);\n  };\n\n  var results = eventAbles.filter(function (able) {\n    var ableName = able.name;\n    var nextDatas = datas[ableName] || (datas[ableName] = {});\n\n    if (isStart) {\n      nextDatas.isEventStart = !able[conditionName] || able[conditionName](moveable, e);\n    }\n\n    if (nextDatas.isEventStart) {\n      var result = able[eventName](moveable, __assign(__assign({}, e), {\n        stop: stop,\n        resultCount: resultCount,\n        datas: nextDatas,\n        originalDatas: datas,\n        inputTarget: inputTarget\n      }));\n\n      moveable._emitter.off();\n\n      if (isStart && result === false) {\n        nextDatas.isEventStart = false;\n      }\n\n      resultCount += result || nextDatas.isEventStart ? 1 : 0;\n      return result;\n    }\n\n    return false;\n  });\n  var isUpdate = results.length;\n  var isForceEnd = false; // end ables\n\n  if (isDragStop) {\n    isForceEnd = true;\n  }\n\n  if (!isForceEnd && isStart && eventAbles.length && !isUpdate) {\n    isForceEnd = eventAbles.filter(function (able) {\n      var ableName = able.name;\n      var nextDatas = datas[ableName];\n\n      if (nextDatas.isEventStart) {\n        if (able.dragRelation === \"strong\") {\n          return false;\n        } // start drag\n\n\n        return true;\n      } // cancel event\n\n\n      return false;\n    }).length;\n  }\n\n  if (isEnd || isForceEnd) {\n    moveable.state.gestos = {};\n\n    if (moveable.moveables) {\n      moveable.moveables.forEach(function (childMoveable) {\n        childMoveable.state.gestos = {};\n      });\n    }\n\n    eventAbles.forEach(function (able) {\n      able.unset && able.unset(moveable);\n    });\n  }\n\n  if (isStart && !isForceEnd && !isRequest && isUpdate) {\n    e === null || e === void 0 ? void 0 : e.preventDefault();\n  }\n\n  if (moveable.isUnmounted || isForceEnd) {\n    return false;\n  }\n\n  if (!isStart && isUpdate && !requestInstant || isEnd) {\n    var flushSync = moveable.props.flushSync || defaultSync;\n    flushSync(function () {\n      moveable.updateRect(isEnd ? eventType : \"\", true, false);\n      moveable.forceUpdate();\n    });\n  }\n\n  if (!isStart && !isEnd && !isAfter && isUpdate && !requestInstant) {\n    triggerAble(moveable, ableType, eventOperation, eventAffix, eventType + \"After\", e);\n  }\n\n  return true;\n}\n\nfunction checkMoveableTarget(moveable) {\n  return function (e) {\n    var dragTarget = moveable.props.dragTarget;\n    var eventTarget = e.inputEvent.target;\n    var areaElement = moveable.areaElement;\n    return dragTarget && (eventTarget === dragTarget || dragTarget.contains(eventTarget)) || eventTarget === areaElement || !moveable.isMoveableElement(eventTarget) && !moveable.controlBox.getElement().contains(eventTarget) || hasClass(eventTarget, \"moveable-area\") || hasClass(eventTarget, \"moveable-padding\") || hasClass(eventTarget, \"moveable-edgeDraggable\");\n  };\n}\n\nfunction getTargetAbleGesto(moveable, moveableTarget, eventAffix) {\n  var controlBox = moveable.controlBox.getElement();\n  var targets = [];\n  var dragTarget = moveable.props.dragTarget;\n  targets.push(controlBox);\n\n  if (!moveable.props.dragArea || dragTarget) {\n    targets.push(moveableTarget);\n  }\n\n  return getAbleGesto(moveable, targets, \"targetAbles\", eventAffix, {\n    dragStart: checkMoveableTarget(moveable),\n    pinchStart: checkMoveableTarget(moveable)\n  });\n}\n\nfunction getAbleGesto(moveable, target, ableType, eventAffix, conditionFunctions) {\n  if (conditionFunctions === void 0) {\n    conditionFunctions = {};\n  }\n\n  var isTargetAbles = ableType === \"targetAbles\";\n  var _a = moveable.props,\n      pinchOutside = _a.pinchOutside,\n      pinchThreshold = _a.pinchThreshold,\n      preventClickEventOnDrag = _a.preventClickEventOnDrag,\n      preventClickDefault = _a.preventClickDefault,\n      checkInput = _a.checkInput;\n  var options = {\n    preventDefault: true,\n    preventRightClick: true,\n    preventWheelClick: true,\n    container: window,\n    pinchThreshold: pinchThreshold,\n    pinchOutside: pinchOutside,\n    preventClickEventOnDrag: isTargetAbles ? preventClickEventOnDrag : false,\n    preventClickEventOnDragStart: isTargetAbles ? preventClickDefault : false,\n    preventClickEventByCondition: isTargetAbles ? null : function (e) {\n      return moveable.controlBox.getElement().contains(e.target);\n    },\n    checkInput: isTargetAbles ? checkInput : false\n  };\n  var gesto = new Gesto(target, options);\n  var isControl = eventAffix === \"Control\";\n  [\"drag\", \"pinch\"].forEach(function (eventOperation) {\n    [\"Start\", \"\", \"End\"].forEach(function (eventType) {\n      gesto.on(\"\".concat(eventOperation).concat(eventType), function (e) {\n        var _a;\n\n        var eventName = e.eventType;\n\n        if (conditionFunctions[eventName] && !conditionFunctions[eventName](e)) {\n          e.stop();\n          return;\n        }\n\n        var result = triggerAble(moveable, ableType, eventOperation, eventAffix, eventType, e);\n\n        if (!result) {\n          e.stop();\n        } else if (moveable.props.stopPropagation || eventType === \"Start\" && isControl) {\n          (_a = e === null || e === void 0 ? void 0 : e.inputEvent) === null || _a === void 0 ? void 0 : _a.stopPropagation();\n        }\n      });\n    });\n  });\n  return gesto;\n}\n\nvar EventManager = /*#__PURE__*/function () {\n  function EventManager(target, moveable, eventName) {\n    var _this = this;\n\n    this.target = target;\n    this.moveable = moveable;\n    this.eventName = eventName;\n    this.ables = [];\n\n    this._onEvent = function (e) {\n      var eventName = _this.eventName;\n      var moveable = _this.moveable;\n\n      if (moveable.state.disableNativeEvent) {\n        return;\n      }\n\n      _this.ables.forEach(function (able) {\n        able[eventName](moveable, {\n          inputEvent: e\n        });\n      });\n    };\n\n    target.addEventListener(eventName.toLowerCase(), this._onEvent);\n  }\n\n  var __proto = EventManager.prototype;\n\n  __proto.setAbles = function (ables) {\n    this.ables = ables;\n  };\n\n  __proto.destroy = function () {\n    this.target.removeEventListener(this.eventName.toLowerCase(), this._onEvent);\n    this.target = null;\n    this.moveable = null;\n  };\n\n  return EventManager;\n}();\n\nfunction getShadowRoot(parentElement) {\n  if (parentElement && parentElement.getRootNode) {\n    var rootNode = parentElement.getRootNode();\n\n    if (rootNode.nodeType === 11) {\n      return rootNode;\n    }\n  }\n\n  return;\n}\n\nfunction getMatrixStackInfo(target, container, checkContainer) {\n  var el = target;\n  var matrixes = [];\n  var documentElement = document.documentElement || document.body;\n  var requestEnd = !checkContainer && target === container || target === documentElement;\n  var isEnd = requestEnd;\n  var is3d = false;\n  var n = 3;\n  var transformOrigin;\n  var targetTransformOrigin;\n  var targetMatrix;\n  var hasFixed = false;\n  var offsetContainer = getOffsetInfo(container, container, true).offsetParent;\n  var zoom = 1;\n\n  while (el && !isEnd) {\n    isEnd = requestEnd;\n    var style = getComputedStyle(el);\n    var position = style.position;\n    var transform = getElementTransform(el, style);\n    var matrix = convertCSStoMatrix(getTransformMatrix(transform));\n    var isFixed = position === \"fixed\";\n    var fixedInfo = {\n      hasTransform: false,\n      fixedContainer: null\n    };\n\n    if (isFixed) {\n      hasFixed = true;\n      fixedInfo = getPositionFixedInfo(el);\n      offsetContainer = fixedInfo.fixedContainer;\n    } // convert 3 to 4\n\n\n    var length = matrix.length;\n\n    if (!is3d && length === 16) {\n      is3d = true;\n      n = 4;\n      convert3DMatrixes(matrixes);\n\n      if (targetMatrix) {\n        targetMatrix = convertDimension(targetMatrix, 3, 4);\n      }\n    }\n\n    if (is3d && length === 9) {\n      matrix = convertDimension(matrix, 3, 4);\n    }\n\n    var _a = getOffsetPosInfo(el, target, style),\n        tagName = _a.tagName,\n        hasOffset = _a.hasOffset,\n        isSVG = _a.isSVG,\n        origin = _a.origin,\n        targetOrigin = _a.targetOrigin,\n        offsetPos = _a.offset;\n\n    var offsetLeft = offsetPos[0],\n        offsetTop = offsetPos[1];\n\n    if (tagName === \"svg\" && targetMatrix) {\n      // scale matrix for svg's SVGElements.\n      matrixes.push({\n        type: \"target\",\n        target: el,\n        matrix: getSVGMatrix(el, n)\n      });\n      matrixes.push({\n        type: \"offset\",\n        target: el,\n        matrix: createIdentityMatrix(n)\n      });\n    }\n\n    var offsetParent = void 0;\n    var isOffsetEnd = false;\n    var isStatic = false;\n    var targetZoom = parseFloat(style.zoom) || 1;\n\n    if (isFixed) {\n      offsetParent = fixedInfo.fixedContainer;\n      isOffsetEnd = true;\n    } else {\n      var offsetInfo = getOffsetInfo(el, container, false, true, style);\n      var offsetZoom = offsetInfo.offsetZoom;\n      offsetParent = offsetInfo.offsetParent;\n      isOffsetEnd = offsetInfo.isEnd;\n      isStatic = offsetInfo.isStatic;\n      zoom *= offsetZoom;\n\n      if (offsetZoom !== 1 && isStatic) {\n        offsetLeft -= offsetParent.offsetLeft;\n        offsetTop -= offsetParent.offsetTop;\n      } else if (IS_FIREFOX) {\n        var parentSlotElement = offsetInfo.parentSlotElement;\n\n        if (parentSlotElement) {\n          var customOffsetParent = offsetParent;\n          var customOffsetLeft = 0;\n          var customOffsetTop = 0;\n\n          while (customOffsetParent) {\n            if (!getShadowRoot(customOffsetParent)) {\n              break;\n            }\n\n            customOffsetLeft += customOffsetParent.offsetLeft;\n            customOffsetTop += customOffsetParent.offsetTop;\n            customOffsetParent = customOffsetParent.offsetParent;\n          }\n\n          offsetLeft -= customOffsetLeft;\n          offsetTop -= customOffsetTop;\n        }\n      }\n    }\n\n    if (IS_WEBKIT && !IS_SAFARI_ABOVE15 && hasOffset && !isSVG && isStatic && (position === \"relative\" || position === \"static\")) {\n      offsetLeft -= offsetParent.offsetLeft;\n      offsetTop -= offsetParent.offsetTop;\n      requestEnd = requestEnd || isOffsetEnd;\n    }\n\n    var parentClientLeft = 0;\n    var parentClientTop = 0;\n    var fixedClientLeft = 0;\n    var fixedClientTop = 0;\n\n    if (isFixed) {\n      if (hasOffset && fixedInfo.hasTransform) {\n        // border\n        fixedClientLeft = offsetParent.clientLeft;\n        fixedClientTop = offsetParent.clientTop;\n      }\n    } else {\n      if (hasOffset && offsetContainer !== offsetParent) {\n        // border\n        parentClientLeft = offsetParent.clientLeft;\n        parentClientTop = offsetParent.clientTop;\n      }\n\n      if (hasOffset && offsetParent === documentElement) {\n        var margin = getBodyOffset(el, false, style);\n        offsetLeft += margin[0];\n        offsetTop += margin[1];\n      }\n    }\n\n    matrixes.push({\n      type: \"target\",\n      target: el,\n      matrix: getAbsoluteMatrix(matrix, n, origin)\n    });\n\n    if (hasOffset) {\n      var isElementTarget = el === target;\n      var scrollLeft = isElementTarget ? 0 : el.scrollLeft;\n      var scrollTop = isElementTarget ? 0 : el.scrollTop;\n      matrixes.push({\n        type: \"offset\",\n        target: el,\n        matrix: createOriginMatrix([offsetLeft - scrollLeft + parentClientLeft - fixedClientLeft, offsetTop - scrollTop + parentClientTop - fixedClientTop], n)\n      });\n    } else {\n      // svg\n      matrixes.push({\n        type: \"offset\",\n        target: el,\n        origin: origin\n      });\n    } // transform으로 계산되지 않는 zoom을 위한 (0, 0) 을 기준 matrix 추가.\n\n\n    if (targetZoom !== 1) {\n      matrixes.push({\n        type: \"zoom\",\n        target: el,\n        matrix: getAbsoluteMatrix(createScaleMatrix([targetZoom, targetZoom], n), n, [0, 0])\n      });\n    }\n\n    if (!targetMatrix) {\n      targetMatrix = matrix;\n    }\n\n    if (!transformOrigin) {\n      transformOrigin = origin;\n    }\n\n    if (!targetTransformOrigin) {\n      targetTransformOrigin = targetOrigin;\n    }\n\n    if (isEnd || isFixed) {\n      break;\n    } else {\n      el = offsetParent;\n      requestEnd = isOffsetEnd;\n    }\n\n    if (!checkContainer || el === documentElement) {\n      isEnd = requestEnd;\n    }\n  }\n\n  if (!targetMatrix) {\n    targetMatrix = createIdentityMatrix(n);\n  }\n\n  if (!transformOrigin) {\n    transformOrigin = [0, 0];\n  }\n\n  if (!targetTransformOrigin) {\n    targetTransformOrigin = [0, 0];\n  }\n\n  return {\n    zoom: zoom,\n    offsetContainer: offsetContainer,\n    matrixes: matrixes,\n    targetMatrix: targetMatrix,\n    transformOrigin: transformOrigin,\n    targetOrigin: targetTransformOrigin,\n    is3d: is3d,\n    hasFixed: hasFixed\n  };\n}\n\nfunction calculateMatrixStack(target, container, rootContainer, isAbsolute3d) {\n  var _a;\n\n  if (rootContainer === void 0) {\n    rootContainer = container;\n  }\n\n  var _b = getMatrixStackInfo(target, container),\n      matrixes = _b.matrixes,\n      is3d = _b.is3d,\n      prevTargetMatrix = _b.targetMatrix,\n      transformOrigin = _b.transformOrigin,\n      targetOrigin = _b.targetOrigin,\n      offsetContainer = _b.offsetContainer,\n      hasFixed = _b.hasFixed,\n      containerZoom = _b.zoom; // prevMatrix\n\n\n  var _c = getMatrixStackInfo(offsetContainer, rootContainer, true),\n      rootMatrixes = _c.matrixes,\n      isRoot3d = _c.is3d,\n      offsetRootContainer = _c.offsetContainer,\n      rootZoom = _c.zoom; // prevRootMatrix\n  // if (rootContainer === document.body) {\n  //     console.log(offsetContainer, rootContainer, rootMatrixes);\n  // }\n\n\n  var isNext3d = isAbsolute3d || isRoot3d || is3d;\n  var n = isNext3d ? 4 : 3;\n  var isSVGGraphicElement = target.tagName.toLowerCase() !== \"svg\" && \"ownerSVGElement\" in target;\n  var targetMatrix = prevTargetMatrix; // let allMatrix = prevMatrix ? convertDimension(prevMatrix, prevN!, n) : createIdentityMatrix(n);\n  // let rootMatrix = prevRootMatrix ? convertDimension(prevRootMatrix, prevN!, n) : createIdentityMatrix(n);\n  // let beforeMatrix = prevMatrix ? convertDimension(prevMatrix, prevN!, n) : createIdentityMatrix(n);\n\n  var allMatrix = createIdentityMatrix(n);\n  var rootMatrix = createIdentityMatrix(n);\n  var beforeMatrix = createIdentityMatrix(n);\n  var offsetMatrix = createIdentityMatrix(n);\n  var length = matrixes.length;\n  rootMatrixes.reverse();\n  matrixes.reverse();\n\n  if (!is3d && isNext3d) {\n    targetMatrix = convertDimension(targetMatrix, 3, 4);\n    convert3DMatrixes(matrixes);\n  }\n\n  if (!isRoot3d && isNext3d) {\n    convert3DMatrixes(rootMatrixes);\n  } // rootMatrix = (...) -> container -> offset -> absolute -> offset -> absolute(targetMatrix)\n  // rootMatrixBeforeOffset = lastOffsetMatrix -> (...) -> container\n  // beforeMatrix = (... -> container -> offset -> absolute) -> offset -> absolute(targetMatrix)\n  // offsetMatrix = (... -> container -> offset -> absolute -> offset) -> absolute(targetMatrix)\n\n\n  rootMatrixes.forEach(function (info) {\n    rootMatrix = multiply(rootMatrix, info.matrix, n);\n  });\n  var originalRootContainer = rootContainer || document.body;\n  var endContainer = ((_a = rootMatrixes[0]) === null || _a === void 0 ? void 0 : _a.target) || getOffsetInfo(originalRootContainer, originalRootContainer, true).offsetParent;\n  var rootMatrixBeforeOffset = rootMatrixes.slice(1).reduce(function (matrix, info) {\n    return multiply(matrix, info.matrix, n);\n  }, createIdentityMatrix(n));\n  matrixes.forEach(function (info, i) {\n    if (length - 2 === i) {\n      // length - 3\n      beforeMatrix = allMatrix.slice();\n    }\n\n    if (length - 1 === i) {\n      // length - 2\n      offsetMatrix = allMatrix.slice();\n    } // calculate for SVGElement\n\n\n    if (!info.matrix) {\n      var nextInfo = matrixes[i + 1];\n      var offset = getSVGOffset(info, nextInfo, endContainer, n, multiply(rootMatrixBeforeOffset, allMatrix, n));\n      info.matrix = createOriginMatrix(offset, n);\n    }\n\n    allMatrix = multiply(allMatrix, info.matrix, n);\n  });\n  var isMatrix3d = !isSVGGraphicElement && is3d;\n\n  if (!targetMatrix) {\n    targetMatrix = createIdentityMatrix(isMatrix3d ? 4 : 3);\n  }\n\n  var targetTransform = makeMatrixCSS(isSVGGraphicElement && targetMatrix.length === 16 ? convertDimension(targetMatrix, 4, 3) : targetMatrix, isMatrix3d);\n  var originalRootMatrix = rootMatrix;\n  rootMatrix = ignoreDimension(rootMatrix, n, n);\n  return {\n    hasZoom: containerZoom !== 1 || rootZoom !== 1,\n    hasFixed: hasFixed,\n    rootMatrix: rootMatrix,\n    originalRootMatrix: originalRootMatrix,\n    beforeMatrix: beforeMatrix,\n    offsetMatrix: offsetMatrix,\n    allMatrix: allMatrix,\n    targetMatrix: targetMatrix,\n    targetTransform: targetTransform,\n    transformOrigin: transformOrigin,\n    targetOrigin: targetOrigin,\n    is3d: isNext3d,\n    offsetContainer: offsetContainer,\n    offsetRootContainer: offsetRootContainer\n  };\n}\n\nfunction calculateElementInfo(target, container, rootContainer, isAbsolute3d) {\n  if (rootContainer === void 0) {\n    rootContainer = container;\n  }\n\n  var width = 0;\n  var height = 0;\n  var rotation = 0;\n  var allResult = {};\n  var sizes = getSize(target);\n\n  if (target) {\n    width = sizes.offsetWidth;\n    height = sizes.offsetHeight;\n  }\n\n  if (target) {\n    var result = calculateMatrixStack(target, container, rootContainer, isAbsolute3d);\n    var position = calculateMoveablePosition(result.allMatrix, result.transformOrigin, width, height);\n    allResult = __assign(__assign({}, result), position);\n    var rotationPosition = calculateMoveablePosition(result.allMatrix, [50, 50], 100, 100);\n    rotation = getRotationRad([rotationPosition.pos1, rotationPosition.pos2], rotationPosition.direction);\n  }\n\n  var n = isAbsolute3d ? 4 : 3;\n  return __assign(__assign(__assign({\n    hasZoom: false,\n    width: width,\n    height: height,\n    rotation: rotation\n  }, sizes), {\n    originalRootMatrix: createIdentityMatrix(n),\n    rootMatrix: createIdentityMatrix(n),\n    beforeMatrix: createIdentityMatrix(n),\n    offsetMatrix: createIdentityMatrix(n),\n    allMatrix: createIdentityMatrix(n),\n    targetMatrix: createIdentityMatrix(n),\n    targetTransform: \"\",\n    transformOrigin: [0, 0],\n    targetOrigin: [0, 0],\n    is3d: !!isAbsolute3d,\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    origin: [0, 0],\n    pos1: [0, 0],\n    pos2: [0, 0],\n    pos3: [0, 0],\n    pos4: [0, 0],\n    direction: 1,\n    hasFixed: false,\n    offsetContainer: null,\n    offsetRootContainer: null\n  }), allResult);\n}\n\nfunction getElementInfo(target, container, rootContainer) {\n  if (rootContainer === void 0) {\n    rootContainer = container;\n  }\n\n  return calculateElementInfo(target, container, rootContainer, true);\n}\n\nfunction getMoveableTargetInfo(moveableElement, target, container, parentContainer, rootContainer, requestStyle) {\n  if (requestStyle === void 0) {\n    requestStyle = [];\n  }\n\n  var beforeDirection = 1;\n  var beforeOrigin = [0, 0];\n  var targetClientRect = resetClientRect();\n  var moveableClientRect = resetClientRect();\n  var containerClientRect = resetClientRect();\n  var rootContainerClientRect = resetClientRect();\n  var offsetDelta = [0, 0];\n  var style = {};\n  var result = calculateElementInfo(target, container, rootContainer, true);\n\n  if (target) {\n    var computedStyle_1 = getComputedStyle(target);\n    requestStyle.forEach(function (name) {\n      style[name] = computedStyle_1[name];\n    });\n    var n = result.is3d ? 4 : 3;\n    var beforePosition = calculateMoveablePosition(result.offsetMatrix, plus(result.transformOrigin, getOrigin(result.targetMatrix, n)), result.width, result.height);\n    beforeDirection = beforePosition.direction;\n    beforeOrigin = plus(beforePosition.origin, [beforePosition.left - result.left, beforePosition.top - result.top]);\n    rootContainerClientRect = getClientRect(result.offsetRootContainer);\n    var offsetContainer = getOffsetInfo(parentContainer, parentContainer, true).offsetParent || result.offsetRootContainer;\n\n    if (result.hasZoom) {\n      var absoluteTargetPosition = calculateMoveablePosition(multiply(result.originalRootMatrix, result.allMatrix), result.transformOrigin, result.width, result.height);\n      var absoluteContainerPosition = calculateMoveablePosition(result.originalRootMatrix, getTransformOrigin(getComputedStyle(offsetContainer)).map(function (pos) {\n        return parseFloat(pos);\n      }), offsetContainer.offsetWidth, offsetContainer.offsetHeight);\n      targetClientRect = getClientRectByPosition(absoluteTargetPosition, rootContainerClientRect);\n      containerClientRect = getClientRectByPosition(absoluteContainerPosition, rootContainerClientRect, offsetContainer, true);\n\n      if (moveableElement) {\n        var left = absoluteTargetPosition.left;\n        var top = absoluteTargetPosition.top;\n        moveableClientRect = getClientRectByPosition({\n          left: left,\n          top: top,\n          bottom: top,\n          right: top\n        }, rootContainerClientRect);\n      }\n    } else {\n      targetClientRect = getClientRect(target);\n      containerClientRect = getClientRect(offsetContainer, true);\n\n      if (moveableElement) {\n        moveableClientRect = getClientRect(moveableElement);\n      }\n\n      var containerClientRectLeft = containerClientRect.left,\n          containerClientRectTop = containerClientRect.top,\n          containterClientLeft = containerClientRect.clientLeft,\n          containerClientTop = containerClientRect.clientTop;\n      var clientDelta = [targetClientRect.left - containerClientRectLeft, targetClientRect.top - containerClientRectTop];\n      offsetDelta = minus(calculateInversePosition(result.rootMatrix, clientDelta, 4), [containterClientLeft + result.left, containerClientTop + result.top]);\n    }\n  }\n\n  return __assign({\n    targetClientRect: targetClientRect,\n    containerClientRect: containerClientRect,\n    moveableClientRect: moveableClientRect,\n    rootContainerClientRect: rootContainerClientRect,\n    beforeDirection: beforeDirection,\n    beforeOrigin: beforeOrigin,\n    originalBeforeOrigin: beforeOrigin,\n    target: target,\n    style: style,\n    offsetDelta: offsetDelta\n  }, result);\n}\n\nfunction getPersistState(rect) {\n  var pos1 = rect.pos1,\n      pos2 = rect.pos2,\n      pos3 = rect.pos3,\n      pos4 = rect.pos4;\n\n  if (!pos1 || !pos2 || !pos3 || !pos4) {\n    return null;\n  }\n\n  var minPos = getMinMaxs([pos1, pos2, pos3, pos4]);\n  var posDelta = [minPos.minX, minPos.minY];\n  var origin = minus(rect.origin, posDelta);\n  pos1 = minus(pos1, posDelta);\n  pos2 = minus(pos2, posDelta);\n  pos3 = minus(pos3, posDelta);\n  pos4 = minus(pos4, posDelta);\n  return __assign(__assign({}, rect), {\n    left: rect.left,\n    top: rect.top,\n    posDelta: posDelta,\n    pos1: pos1,\n    pos2: pos2,\n    pos3: pos3,\n    pos4: pos4,\n    origin: origin,\n    beforeOrigin: origin,\n    // originalBeforeOrigin: origin,\n    isPersisted: true\n  });\n}\n\nvar MoveableManager = /*#__PURE__*/function (_super) {\n  __extends(MoveableManager, _super);\n\n  function MoveableManager() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = __assign({\n      container: null,\n      gestos: {},\n      renderPoses: [[0, 0], [0, 0], [0, 0], [0, 0]],\n      disableNativeEvent: false,\n      posDelta: [0, 0]\n    }, getMoveableTargetInfo(null));\n    _this.renderState = {};\n    _this.enabledAbles = [];\n    _this.targetAbles = [];\n    _this.controlAbles = [];\n    _this.rotation = 0;\n    _this.scale = [1, 1];\n    _this.isMoveableMounted = false;\n    _this.isUnmounted = false;\n    _this.events = {\n      \"mouseEnter\": null,\n      \"mouseLeave\": null\n    };\n    _this._emitter = new EventEmitter();\n    _this._prevTarget = null;\n    _this._prevDragArea = false;\n    _this._isPropTargetChanged = false;\n    _this._hasFirstTarget = false;\n    _this._observer = null;\n    _this._observerId = 0;\n    _this._rootContainer = null;\n    _this._viewContainer = null;\n    _this._viewClassNames = [];\n\n    _this.checkUpdateRect = function () {\n      if (_this.isDragging()) {\n        return;\n      }\n\n      var parentMoveable = _this.props.parentMoveable;\n\n      if (parentMoveable) {\n        parentMoveable.checkUpdateRect();\n        return;\n      }\n\n      cancelAnimationFrame(_this._observerId);\n      _this._observerId = requestAnimationFrame(function () {\n        if (_this.isDragging()) {\n          return;\n        }\n\n        _this.updateRect();\n      });\n    };\n\n    _this._onPreventClick = function (e) {\n      e.stopPropagation();\n      e.preventDefault(); // removeEvent(window, \"click\", this._onPreventClick, true);\n    };\n\n    return _this;\n  }\n\n  var __proto = MoveableManager.prototype;\n\n  __proto.render = function () {\n    var props = this.props;\n    var state = this.getState();\n    var parentPosition = props.parentPosition,\n        className = props.className,\n        propsTarget = props.target,\n        zoom = props.zoom,\n        cspNonce = props.cspNonce,\n        translateZ = props.translateZ,\n        ControlBoxElement = props.cssStyled,\n        portalContainer = props.portalContainer,\n        groupable = props.groupable,\n        linePadding = props.linePadding;\n\n    this._checkUpdateRootContainer();\n\n    this.checkUpdate();\n    this.updateRenderPoses();\n\n    var _a = parentPosition || [0, 0],\n        parentLeft = _a[0],\n        parentTop = _a[1];\n\n    var left = state.left,\n        top = state.top,\n        stateTarget = state.target,\n        direction = state.direction,\n        hasFixed = state.hasFixed,\n        offsetDelta = state.offsetDelta;\n    var groupTargets = props.targets;\n    var isDragging = this.isDragging();\n    var ableAttributes = {};\n    this.getEnabledAbles().forEach(function (able) {\n      ableAttributes[\"data-able-\".concat(able.name.toLowerCase())] = true;\n    });\n\n    var ableClassName = this._getAbleClassName();\n\n    var isDisplay = groupTargets && groupTargets.length && (stateTarget || groupable) || propsTarget || !this._hasFirstTarget && this.state.isPersisted;\n    var isVisible = this.controlBox || this.props.firstRenderState || this.props.persistData;\n    var translate = [left - parentLeft, top - parentTop];\n\n    if (!groupable && props.useAccuratePosition) {\n      translate[0] += offsetDelta[0];\n      translate[1] += offsetDelta[1];\n    }\n\n    var style = {\n      \"position\": hasFixed ? \"fixed\" : \"absolute\",\n      \"display\": isDisplay ? \"block\" : \"none\",\n      \"visibility\": isVisible ? \"visible\" : \"hidden\",\n      \"transform\": \"translate3d(\".concat(translate[0], \"px, \").concat(translate[1], \"px, \").concat(translateZ, \")\"),\n      \"--zoom\": zoom,\n      \"--zoompx\": \"\".concat(zoom, \"px\")\n    };\n\n    if (linePadding) {\n      style[\"--moveable-line-padding\"] = linePadding;\n    }\n\n    return React.createElement(ControlBoxElement, __assign({\n      cspNonce: cspNonce,\n      ref: ref(this, \"controlBox\"),\n      className: \"\".concat(prefix(\"control-box\", direction === -1 ? \"reverse\" : \"\", isDragging ? \"dragging\" : \"\"), \" \").concat(ableClassName, \" \").concat(className)\n    }, ableAttributes, {\n      onClick: this._onPreventClick,\n      portalContainer: portalContainer,\n      style: style\n    }), this.renderAbles(), this._renderLines());\n  };\n\n  __proto.componentDidMount = function () {\n    this.isMoveableMounted = true;\n    this.isUnmounted = false;\n    this.controlBox.getElement();\n    var props = this.props;\n    var parentMoveable = props.parentMoveable,\n        container = props.container,\n        wrapperMoveable = props.wrapperMoveable;\n\n    this._checkUpdateRootContainer();\n\n    this._checkUpdateViewContainer();\n\n    this._updateTargets();\n\n    this._updateNativeEvents();\n\n    this._updateEvents();\n\n    this.updateCheckInput();\n\n    this._updateObserver(this.props);\n\n    if (!container && !parentMoveable && !wrapperMoveable && !this.state.isPersisted) {\n      this.updateRect(\"\", false, false);\n      this.forceUpdate();\n    }\n  };\n\n  __proto.componentDidUpdate = function (prevProps) {\n    this._checkUpdateRootContainer();\n\n    this._checkUpdateViewContainer();\n\n    this._updateNativeEvents();\n\n    this._updateEvents();\n\n    this._updateTargets();\n\n    this.updateCheckInput();\n\n    this._updateObserver(prevProps);\n  };\n\n  __proto.componentWillUnmount = function () {\n    this.isMoveableMounted = false;\n    this.isUnmounted = true;\n\n    this._emitter.off();\n\n    var viewContainer = this._viewContainer;\n\n    if (viewContainer) {\n      this._changeAbleViewClassNames([]);\n    }\n\n    unset(this, \"targetGesto\");\n    unset(this, \"controlGesto\");\n    var events = this.events;\n\n    for (var name in events) {\n      var manager = events[name];\n      manager && manager.destroy();\n    }\n  };\n\n  __proto.getTargets = function () {\n    var target = this.props.target;\n    return target ? [target] : [];\n  };\n  /**\n   * Get the able used in MoveableManager.\n   * @method Moveable#getAble\n   * @param - able name\n   */\n\n\n  __proto.getAble = function (ableName) {\n    var ables = this.props.ables || [];\n    return find(ables, function (able) {\n      return able.name === ableName;\n    });\n  };\n\n  __proto.getContainer = function () {\n    var _a = this.props,\n        parentMoveable = _a.parentMoveable,\n        wrapperMoveable = _a.wrapperMoveable,\n        container = _a.container;\n    return container || wrapperMoveable && wrapperMoveable.getContainer() || parentMoveable && parentMoveable.getContainer() || this.controlBox.getElement().parentElement;\n  };\n  /**\n   * Check if the target is an element included in the moveable.\n   * @method Moveable#isMoveableElement\n   * @param - the target\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body);\n   *\n   * window.addEventListener(\"click\", e => {\n   *     if (!moveable.isMoveableElement(e.target)) {\n   *         moveable.target = e.target;\n   *     }\n   * });\n   */\n\n\n  __proto.isMoveableElement = function (target) {\n    var _a;\n\n    return target && (((_a = target.getAttribute) === null || _a === void 0 ? void 0 : _a.call(target, \"class\")) || \"\").indexOf(PREFIX) > -1;\n  };\n  /**\n   * You can drag start the Moveable through the external `MouseEvent`or `TouchEvent`. (Angular: ngDragStart)\n   * @method Moveable#dragStart\n   * @param - external `MouseEvent`or `TouchEvent`\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body);\n   *\n   * document.body.addEventListener(\"mousedown\", e => {\n   *     if (!moveable.isMoveableElement(e.target)) {\n   *          moveable.dragStart(e);\n   *     }\n   * });\n   */\n\n\n  __proto.dragStart = function (e) {\n    var targetGesto = this.targetGesto;\n    var controlGesto = this.controlGesto;\n\n    if (targetGesto && checkMoveableTarget(this)({\n      inputEvent: e\n    })) {\n      if (!targetGesto.isFlag()) {\n        targetGesto.triggerDragStart(e);\n      }\n    } else if (controlGesto && this.isMoveableElement(e.target)) {\n      if (!controlGesto.isFlag()) {\n        controlGesto.triggerDragStart(e);\n      }\n    }\n\n    return this;\n  };\n  /**\n   * Hit test an element or rect on a moveable target.\n   * (100% = 100)\n   * @method Moveable#hitTest\n   * @param - element or rect to test\n   * @return - Get hit test rate (rate > 0 is hitted)\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body);\n   *\n   * document.body.addEventListener(\"mousedown\", e => {\n   *     if (moveable.hitTest(e.target) > 0) {\n   *          console.log(\"hiited\");\n   *     }\n   * });\n   */\n\n\n  __proto.hitTest = function (el) {\n    var _a = this.state,\n        target = _a.target,\n        pos1 = _a.pos1,\n        pos2 = _a.pos2,\n        pos3 = _a.pos3,\n        pos4 = _a.pos4,\n        targetClientRect = _a.targetClientRect;\n\n    if (!target) {\n      return 0;\n    }\n\n    var rect;\n\n    if (el instanceof Element) {\n      var clientRect = el.getBoundingClientRect();\n      rect = {\n        left: clientRect.left,\n        top: clientRect.top,\n        width: clientRect.width,\n        height: clientRect.height\n      };\n    } else {\n      rect = __assign({\n        width: 0,\n        height: 0\n      }, el);\n    }\n\n    var rectLeft = rect.left,\n        rectTop = rect.top,\n        rectWidth = rect.width,\n        rectHeight = rect.height;\n    var points = fitPoints([pos1, pos2, pos4, pos3], targetClientRect);\n    var size = getOverlapSize(points, [[rectLeft, rectTop], [rectLeft + rectWidth, rectTop], [rectLeft + rectWidth, rectTop + rectHeight], [rectLeft, rectTop + rectHeight]]);\n    var totalSize = getAreaSize(points);\n\n    if (!size || !totalSize) {\n      return 0;\n    }\n\n    return Math.min(100, size / totalSize * 100);\n  };\n  /**\n   * Whether the coordinates are inside Moveable\n   * @method Moveable#isInside\n   * @param - x coordinate\n   * @param - y coordinate\n   * @return - True if the coordinate is in moveable or false\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body);\n   *\n   * document.body.addEventListener(\"mousedown\", e => {\n   *     if (moveable.isInside(e.clientX, e.clientY)) {\n   *          console.log(\"inside\");\n   *     }\n   * });\n   */\n\n\n  __proto.isInside = function (clientX, clientY) {\n    var _a = this.state,\n        target = _a.target,\n        pos1 = _a.pos1,\n        pos2 = _a.pos2,\n        pos3 = _a.pos3,\n        pos4 = _a.pos4,\n        targetClientRect = _a.targetClientRect;\n\n    if (!target) {\n      return false;\n    }\n\n    return isInside([clientX, clientY], fitPoints([pos1, pos2, pos4, pos3], targetClientRect));\n  };\n  /**\n   * If the width, height, left, and top of all elements change, update the shape of the moveable.\n   * @method Moveable#updateRect\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body);\n   *\n   * window.addEventListener(\"resize\", e => {\n   *     moveable.updateRect();\n   * });\n   */\n\n\n  __proto.updateRect = function (type, isTarget, isSetState) {\n    if (isSetState === void 0) {\n      isSetState = true;\n    }\n\n    var props = this.props;\n    var parentMoveable = props.parentMoveable;\n    var state = this.state;\n    var target = state.target || this.props.target;\n    var container = this.getContainer();\n    var rootContainer = parentMoveable ? parentMoveable._rootContainer : this._rootContainer;\n    var nextState = getMoveableTargetInfo(this.controlBox && this.controlBox.getElement(), target, container, container, rootContainer || container, this._getRequestStyles());\n\n    if (!target && this._hasFirstTarget && props.persistData) {\n      var persistState = getPersistState(props.persistData);\n\n      for (var name in persistState) {\n        nextState[name] = persistState[name];\n      }\n    }\n\n    this.updateState(nextState, parentMoveable ? false : isSetState);\n  };\n  /**\n   * Check if the moveable state is being dragged.\n   * @method Moveable#isDragging\n   * @param - If you want to check if able is dragging, specify ableName.\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body);\n   *\n   * // false\n   * console.log(moveable.isDragging());\n   *\n   * moveable.on(\"drag\", () => {\n   *   // true\n   *   console.log(moveable.isDragging());\n   * });\n   */\n\n\n  __proto.isDragging = function (ableName) {\n    var _a, _b;\n\n    var targetGesto = this.targetGesto;\n    var controlGesto = this.controlGesto;\n\n    if (targetGesto === null || targetGesto === void 0 ? void 0 : targetGesto.isFlag()) {\n      if (!ableName) {\n        return true;\n      }\n\n      var data = targetGesto.getEventData();\n      return !!((_a = data[ableName]) === null || _a === void 0 ? void 0 : _a.isEventStart);\n    }\n\n    if (controlGesto === null || controlGesto === void 0 ? void 0 : controlGesto.isFlag()) {\n      if (!ableName) {\n        return true;\n      }\n\n      var data = controlGesto.getEventData();\n      return !!((_b = data[ableName]) === null || _b === void 0 ? void 0 : _b.isEventStart);\n    }\n\n    return false;\n  };\n  /**\n   * If the width, height, left, and top of the only target change, update the shape of the moveable.\n   * @method Moveable#updateTarget\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body);\n   *\n   * moveable.updateTarget();\n   */\n\n\n  __proto.updateTarget = function (type) {\n    this.updateRect(type, true);\n  };\n  /**\n   * You can get the vertex information, position and offset size information of the target based on the container.\n   * @method Moveable#getRect\n   * @return - The Rect Info\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body);\n   *\n   * const rectInfo = moveable.getRect();\n   */\n\n\n  __proto.getRect = function () {\n    var state = this.state;\n    var poses = getAbsolutePosesByState(this.state);\n    var pos1 = poses[0],\n        pos2 = poses[1],\n        pos3 = poses[2],\n        pos4 = poses[3];\n    var rect = getRect(poses);\n    var offsetWidth = state.width,\n        offsetHeight = state.height;\n    var width = rect.width,\n        height = rect.height,\n        left = rect.left,\n        top = rect.top;\n    var statePos = [state.left, state.top];\n    var origin = plus(statePos, state.origin);\n    var beforeOrigin = plus(statePos, state.beforeOrigin);\n    var transformOrigin = state.transformOrigin;\n    return {\n      width: width,\n      height: height,\n      left: left,\n      top: top,\n      pos1: pos1,\n      pos2: pos2,\n      pos3: pos3,\n      pos4: pos4,\n      offsetWidth: offsetWidth,\n      offsetHeight: offsetHeight,\n      beforeOrigin: beforeOrigin,\n      origin: origin,\n      transformOrigin: transformOrigin,\n      rotation: this.getRotation()\n    };\n  };\n  /**\n   * Get a manager that manages the moveable's state and props.\n   * @method Moveable#getManager\n   * @return - The Rect Info\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body);\n   *\n   * const manager = moveable.getManager(); // real moveable class instance\n   */\n\n\n  __proto.getManager = function () {\n    return this;\n  };\n  /**\n   * You can stop the dragging currently in progress through a method from outside.\n   * @method Moveable#stopDrag\n   * @return - The Rect Info\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body);\n   *\n   * moveable.stopDrag();\n   */\n\n\n  __proto.stopDrag = function (type) {\n    var _a, _b;\n\n    if (!type || type === \"target\") {\n      (_a = this.targetGesto) === null || _a === void 0 ? void 0 : _a.stop();\n    }\n\n    if (!type || type === \"control\") {\n      (_b = this.controlGesto) === null || _b === void 0 ? void 0 : _b.stop();\n    }\n  };\n\n  __proto.getRotation = function () {\n    var _a = this.state,\n        pos1 = _a.pos1,\n        pos2 = _a.pos2,\n        direction = _a.direction;\n    return getAbsoluteRotation(pos1, pos2, direction);\n  };\n  /**\n   * Request able through a method rather than an event.\n   * At the moment of execution, requestStart is executed,\n   * and then request and requestEnd can be executed through Requester.\n   * @method Moveable#request\n   * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Draggable.html#request|Draggable Requester}\n   * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Resizable.html#request|Resizable Requester}\n   * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Scalable.html#request|Scalable Requester}\n   * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Rotatable.html#request|Rotatable Requester}\n   * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.OriginDraggable.html#request|OriginDraggable Requester}\n   * @param - ableName\n   * @param - request to be able params.\n   * @param - If isInstant is true, request and requestEnd are executed immediately.\n   * @return - Able Requester. If there is no request in able, nothing will work.\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body);\n   *\n   * // Instantly Request (requestStart - request - requestEnd)\n   * moveable.request(\"draggable\", { deltaX: 10, deltaY: 10 }, true);\n   *\n   * // Start move\n   * const requester = moveable.request(\"draggable\");\n   * requester.request({ deltaX: 10, deltaY: 10 });\n   * requester.request({ deltaX: 10, deltaY: 10 });\n   * requester.request({ deltaX: 10, deltaY: 10 });\n   * requester.requestEnd();\n   */\n\n\n  __proto.request = function (ableName, param, isInstant) {\n    if (param === void 0) {\n      param = {};\n    }\n\n    var _a = this.props,\n        ables = _a.ables,\n        groupable = _a.groupable;\n    var requsetAble = ables.filter(function (able) {\n      return able.name === ableName;\n    })[0];\n\n    if (this.isDragging() || !requsetAble || !requsetAble.request) {\n      return {\n        request: function () {\n          return this;\n        },\n        requestEnd: function () {\n          return this;\n        }\n      };\n    }\n\n    var self = this;\n    var ableRequester = requsetAble.request(this);\n    var requestInstant = isInstant || param.isInstant;\n    var ableType = ableRequester.isControl ? \"controlAbles\" : \"targetAbles\";\n    var eventAffix = \"\".concat(groupable ? \"Group\" : \"\").concat(ableRequester.isControl ? \"Control\" : \"\");\n    var requester = {\n      request: function (ableParam) {\n        triggerAble(self, ableType, \"drag\", eventAffix, \"\", __assign(__assign({}, ableRequester.request(ableParam)), {\n          requestAble: ableName,\n          isRequest: true\n        }), requestInstant);\n        return this;\n      },\n      requestEnd: function () {\n        triggerAble(self, ableType, \"drag\", eventAffix, \"End\", __assign(__assign({}, ableRequester.requestEnd()), {\n          requestAble: ableName,\n          isRequest: true\n        }), requestInstant);\n        return this;\n      }\n    };\n    triggerAble(self, ableType, \"drag\", eventAffix, \"Start\", __assign(__assign({}, ableRequester.requestStart(param)), {\n      requestAble: ableName,\n      isRequest: true\n    }), requestInstant);\n    return requestInstant ? requester.request(param).requestEnd() : requester;\n  };\n  /**\n   * Remove the Moveable object and the events.\n   * @method Moveable#destroy\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body);\n   *\n   * moveable.destroy();\n   */\n\n\n  __proto.destroy = function () {\n    this.componentWillUnmount();\n  };\n\n  __proto.updateRenderPoses = function () {\n    var state = this.getState();\n    var props = this.props;\n    var originalBeforeOrigin = state.originalBeforeOrigin,\n        transformOrigin = state.transformOrigin,\n        allMatrix = state.allMatrix,\n        is3d = state.is3d,\n        pos1 = state.pos1,\n        pos2 = state.pos2,\n        pos3 = state.pos3,\n        pos4 = state.pos4,\n        stateLeft = state.left,\n        stateTop = state.top,\n        // offsetWidth,\n    // offsetHeight,\n    isPersisted = state.isPersisted;\n\n    var _a = props.padding || {},\n        _b = _a.left,\n        left = _b === void 0 ? 0 : _b,\n        _c = _a.top,\n        top = _c === void 0 ? 0 : _c,\n        _d = _a.bottom,\n        bottom = _d === void 0 ? 0 : _d,\n        _e = _a.right,\n        right = _e === void 0 ? 0 : _e;\n\n    var n = is3d ? 4 : 3; // const clipPathInfo = getClipPath(\n    //     props.target,\n    //     offsetWidth,\n    //     offsetHeight,\n    // );\n    // if (clipPathInfo) {\n    //     left -= Math.max(0, clipPathInfo.left);\n    //     top -= Math.max(0, clipPathInfo.top);\n    //     bottom -= Math.max(0, offsetHeight - clipPathInfo.bottom);\n    //     right -= Math.max(0, offsetWidth - clipPathInfo.right);\n    // }\n\n    var absoluteOrigin = [];\n\n    if (isPersisted) {\n      absoluteOrigin = transformOrigin;\n    } else if (this.controlBox && props.groupable) {\n      absoluteOrigin = originalBeforeOrigin;\n    } else {\n      absoluteOrigin = plus(originalBeforeOrigin, [stateLeft, stateTop]);\n    }\n\n    state.renderPoses = [plus(pos1, calculatePadding(allMatrix, [-left, -top], transformOrigin, absoluteOrigin, n)), plus(pos2, calculatePadding(allMatrix, [right, -top], transformOrigin, absoluteOrigin, n)), plus(pos3, calculatePadding(allMatrix, [-left, bottom], transformOrigin, absoluteOrigin, n)), plus(pos4, calculatePadding(allMatrix, [right, bottom], transformOrigin, absoluteOrigin, n))];\n  };\n\n  __proto.checkUpdate = function () {\n    this._isPropTargetChanged = false;\n    var _a = this.props,\n        target = _a.target,\n        container = _a.container,\n        parentMoveable = _a.parentMoveable;\n    var _b = this.state,\n        stateTarget = _b.target,\n        stateContainer = _b.container;\n\n    if (!stateTarget && !target) {\n      return;\n    }\n\n    this.updateAbles();\n    var isTargetChanged = !equals(stateTarget, target);\n    var isChanged = isTargetChanged || !equals(stateContainer, container);\n\n    if (!isChanged) {\n      return;\n    }\n\n    var moveableContainer = container || this.controlBox;\n\n    if (moveableContainer) {\n      this.unsetAbles();\n    }\n\n    this.updateState({\n      target: target,\n      container: container\n    });\n\n    if (!parentMoveable && moveableContainer) {\n      this.updateRect(\"End\", false, false);\n    }\n\n    this._isPropTargetChanged = isTargetChanged;\n  };\n\n  __proto.waitToChangeTarget = function () {\n    return new Promise(function () {});\n  };\n\n  __proto.triggerEvent = function (name, e) {\n    this._emitter.trigger(name, e);\n\n    var callback = this.props[name];\n    return callback && callback(e);\n  };\n\n  __proto.useCSS = function (tag, css) {\n    var customStyleMap = this.props.customStyledMap;\n    var key = tag + css;\n\n    if (!customStyleMap[key]) {\n      customStyleMap[key] = styled(tag, css);\n    }\n\n    return customStyleMap[key];\n  };\n\n  __proto.getState = function () {\n    var _a;\n\n    var props = this.props;\n\n    if (props.target || ((_a = props.targets) === null || _a === void 0 ? void 0 : _a.length)) {\n      this._hasFirstTarget = true;\n    }\n\n    var hasControlBox = this.controlBox;\n    var persistData = props.persistData;\n    var firstRenderState = props.firstRenderState;\n\n    if (firstRenderState && !hasControlBox) {\n      return firstRenderState;\n    }\n\n    if (!this._hasFirstTarget && persistData) {\n      var persistState = getPersistState(persistData);\n\n      if (persistState) {\n        this.updateState(persistState, false);\n        return this.state;\n      }\n    }\n\n    this.state.isPersisted = false;\n    return this.state;\n  };\n\n  __proto.updateSelectors = function () {};\n\n  __proto.unsetAbles = function () {\n    var _this = this;\n\n    this.targetAbles.forEach(function (able) {\n      if (able.unset) {\n        able.unset(_this);\n      }\n    });\n  };\n\n  __proto.updateAbles = function (ables, eventAffix) {\n    if (ables === void 0) {\n      ables = this.props.ables;\n    }\n\n    if (eventAffix === void 0) {\n      eventAffix = \"\";\n    }\n\n    var props = this.props;\n    var triggerAblesSimultaneously = props.triggerAblesSimultaneously;\n    var enabledAbles = this.getEnabledAbles(ables);\n    var dragStart = \"drag\".concat(eventAffix, \"Start\");\n    var pinchStart = \"pinch\".concat(eventAffix, \"Start\");\n    var dragControlStart = \"drag\".concat(eventAffix, \"ControlStart\");\n    var targetAbles = filterAbles(enabledAbles, [dragStart, pinchStart], triggerAblesSimultaneously);\n    var controlAbles = filterAbles(enabledAbles, [dragControlStart], triggerAblesSimultaneously);\n    this.enabledAbles = enabledAbles;\n    this.targetAbles = targetAbles;\n    this.controlAbles = controlAbles;\n  };\n\n  __proto.updateState = function (nextState, isSetState) {\n    if (isSetState) {\n      if (this.isUnmounted) {\n        return;\n      }\n\n      this.setState(nextState);\n    } else {\n      var state = this.state;\n\n      for (var name in nextState) {\n        state[name] = nextState[name];\n      }\n    }\n  };\n\n  __proto.getEnabledAbles = function (ables) {\n    if (ables === void 0) {\n      ables = this.props.ables;\n    }\n\n    var props = this.props;\n    return ables.filter(function (able) {\n      return able && (able.always && props[able.name] !== false || props[able.name]);\n    });\n  };\n\n  __proto.renderAbles = function () {\n    var _this = this;\n\n    var props = this.props;\n    var triggerAblesSimultaneously = props.triggerAblesSimultaneously;\n    var Renderer = {\n      createElement: createElement\n    };\n    this.renderState = {};\n    return groupByMap(flat(filterAbles(this.getEnabledAbles(), [\"render\"], triggerAblesSimultaneously).map(function (_a) {\n      var render = _a.render;\n      return render(_this, Renderer) || [];\n    })).filter(function (el) {\n      return el;\n    }), function (_a) {\n      var key = _a.key;\n      return key;\n    }).map(function (group) {\n      return group[0];\n    });\n  };\n\n  __proto.updateCheckInput = function () {\n    this.targetGesto && (this.targetGesto.options.checkInput = this.props.checkInput);\n  };\n\n  __proto._getRequestStyles = function () {\n    var styleNames = this.getEnabledAbles().reduce(function (names, able) {\n      var _a, _b;\n\n      var ableStyleNames = (_b = (_a = able.requestStyle) === null || _a === void 0 ? void 0 : _a.call(able)) !== null && _b !== void 0 ? _b : [];\n      return __spreadArray(__spreadArray([], names, true), ableStyleNames, true);\n    }, []);\n    return styleNames;\n  };\n\n  __proto._updateObserver = function (prevProps) {\n    var _a;\n\n    var props = this.props;\n    var target = props.target;\n\n    if (!window.ResizeObserver || !target || !props.useResizeObserver) {\n      (_a = this._observer) === null || _a === void 0 ? void 0 : _a.disconnect();\n      return;\n    }\n\n    if (prevProps.target === target && this._observer) {\n      return;\n    }\n\n    var observer = new ResizeObserver(this.checkUpdateRect);\n    observer.observe(target, {\n      box: \"border-box\"\n    });\n    this._observer = observer;\n    return;\n  };\n\n  __proto._updateEvents = function () {\n    var controlBoxElement = this.controlBox.getElement();\n    var hasTargetAble = this.targetAbles.length;\n    var hasControlAble = this.controlAbles.length;\n    var props = this.props;\n    var target = props.dragTarget || props.target;\n\n    var isUnset = !hasTargetAble && this.targetGesto || this._isTargetChanged(true);\n\n    if (isUnset) {\n      unset(this, \"targetGesto\");\n      this.updateState({\n        gesto: null\n      });\n    }\n\n    if (!hasControlAble) {\n      unset(this, \"controlGesto\");\n    }\n\n    if (target && hasTargetAble && !this.targetGesto) {\n      this.targetGesto = getTargetAbleGesto(this, target, \"\");\n    }\n\n    if (!this.controlGesto && hasControlAble) {\n      this.controlGesto = getAbleGesto(this, controlBoxElement, \"controlAbles\", \"Control\");\n    }\n  };\n\n  __proto._updateTargets = function () {\n    var props = this.props;\n    this._prevTarget = props.dragTarget || props.target;\n    this._prevDragArea = props.dragArea;\n  };\n\n  __proto._renderLines = function () {\n    var props = this.props;\n    var _a = props,\n        zoom = _a.zoom,\n        hideDefaultLines = _a.hideDefaultLines,\n        hideChildMoveableDefaultLines = _a.hideChildMoveableDefaultLines,\n        parentMoveable = _a.parentMoveable;\n\n    if (hideDefaultLines || parentMoveable && hideChildMoveableDefaultLines) {\n      return [];\n    }\n\n    var renderPoses = this.getState().renderPoses;\n    var Renderer = {\n      createElement: createElement\n    };\n    return [[0, 1], [1, 3], [3, 2], [2, 0]].map(function (_a, i) {\n      var from = _a[0],\n          to = _a[1];\n      return renderLine(Renderer, \"\", renderPoses[from], renderPoses[to], zoom, \"render-line-\".concat(i));\n    });\n  };\n\n  __proto._isTargetChanged = function (useDragArea) {\n    var props = this.props;\n    var target = props.dragTarget || props.target;\n    var prevTarget = this._prevTarget;\n    var prevDragArea = this._prevDragArea;\n    var dragArea = props.dragArea; // check target without dragArea\n\n    var isTargetChanged = !dragArea && prevTarget !== target;\n    var isDragAreaChanged = (useDragArea || dragArea) && prevDragArea !== dragArea;\n    return isTargetChanged || isDragAreaChanged;\n  };\n\n  __proto._updateNativeEvents = function () {\n    var _this = this;\n\n    var props = this.props;\n    var target = props.dragArea ? this.areaElement : this.state.target;\n    var events = this.events;\n    var eventKeys = getKeys(events);\n\n    if (this._isTargetChanged()) {\n      for (var eventName in events) {\n        var manager = events[eventName];\n        manager && manager.destroy();\n        events[eventName] = null;\n      }\n    }\n\n    if (!target) {\n      return;\n    }\n\n    var enabledAbles = this.enabledAbles;\n    eventKeys.forEach(function (eventName) {\n      var ables = filterAbles(enabledAbles, [eventName]);\n      var hasAbles = ables.length > 0;\n      var manager = events[eventName];\n\n      if (!hasAbles) {\n        if (manager) {\n          manager.destroy();\n          events[eventName] = null;\n        }\n\n        return;\n      }\n\n      if (!manager) {\n        manager = new EventManager(target, _this, eventName);\n        events[eventName] = manager;\n      }\n\n      manager.setAbles(ables);\n    });\n  };\n\n  __proto._checkUpdateRootContainer = function () {\n    var rootContainer = this.props.rootContainer;\n\n    if (!this._rootContainer && rootContainer) {\n      this._rootContainer = getRefTarget(rootContainer, true);\n    }\n  };\n\n  __proto._checkUpdateViewContainer = function () {\n    var viewContainerOption = this.props.viewContainer;\n\n    if (!this._viewContainer && viewContainerOption) {\n      this._viewContainer = getRefTarget(viewContainerOption, true);\n    }\n\n    var viewContainer = this._viewContainer;\n\n    if (viewContainer) {\n      this._changeAbleViewClassNames(__spreadArray(__spreadArray([], this._getAbleViewClassNames(), true), [this.isDragging() ? VIEW_DRAGGING : \"\"], false));\n    }\n  };\n\n  __proto._changeAbleViewClassNames = function (classNames) {\n    var viewContainer = this._viewContainer;\n    var nextClassNames = groupBy(classNames.filter(Boolean), function (el) {\n      return el;\n    }).map(function (_a) {\n      var className = _a[0];\n      return className;\n    });\n    var prevClassNames = this._viewClassNames;\n\n    var _a = diff$1(prevClassNames, nextClassNames),\n        removed = _a.removed,\n        added = _a.added;\n\n    removed.forEach(function (index) {\n      removeClass(viewContainer, prevClassNames[index]);\n    });\n    added.forEach(function (index) {\n      addClass(viewContainer, nextClassNames[index]);\n    });\n    this._viewClassNames = nextClassNames;\n  };\n\n  __proto._getAbleViewClassNames = function () {\n    var _this = this;\n\n    return (this.getEnabledAbles().map(function (able) {\n      var _a;\n\n      return ((_a = able.viewClassName) === null || _a === void 0 ? void 0 : _a.call(able, _this)) || \"\";\n    }).join(\" \") + \" \".concat(this._getAbleClassName(\"-view\"))).split(/\\s+/g);\n  };\n\n  __proto._getAbleClassName = function (classPrefix) {\n    var _this = this;\n\n    if (classPrefix === void 0) {\n      classPrefix = \"\";\n    }\n\n    var ables = this.getEnabledAbles();\n    var targetGesto = this.targetGesto;\n    var controlGesto = this.controlGesto;\n    var targetGestoData = (targetGesto === null || targetGesto === void 0 ? void 0 : targetGesto.isFlag()) ? targetGesto.getEventData() : {};\n    var controlGestoData = (controlGesto === null || controlGesto === void 0 ? void 0 : controlGesto.isFlag()) ? controlGesto.getEventData() : {};\n    return ables.map(function (able) {\n      var _a, _b, _c;\n\n      var name = able.name;\n      var className = ((_a = able.className) === null || _a === void 0 ? void 0 : _a.call(able, _this)) || \"\";\n\n      if (((_b = targetGestoData[name]) === null || _b === void 0 ? void 0 : _b.isEventStart) || ((_c = controlGestoData[name]) === null || _c === void 0 ? void 0 : _c.isEventStart)) {\n        className += \" \".concat(prefix(\"\".concat(name).concat(classPrefix, \"-dragging\")));\n      }\n\n      return className.trim();\n    }).filter(Boolean).join(\" \");\n  };\n\n  MoveableManager.defaultProps = {\n    target: null,\n    dragTarget: null,\n    container: null,\n    rootContainer: null,\n    origin: true,\n    parentMoveable: null,\n    wrapperMoveable: null,\n    isWrapperMounted: false,\n    parentPosition: null,\n    portalContainer: null,\n    useResizeObserver: false,\n    linePadding: 0,\n    ables: [],\n    pinchThreshold: 20,\n    dragArea: false,\n    passDragArea: false,\n    transformOrigin: \"\",\n    className: \"\",\n    zoom: 1,\n    triggerAblesSimultaneously: false,\n    padding: {},\n    pinchOutside: true,\n    checkInput: false,\n    groupable: false,\n    hideDefaultLines: false,\n    cspNonce: \"\",\n    translateZ: 0,\n    cssStyled: null,\n    customStyledMap: {},\n    props: {},\n    stopPropagation: false,\n    preventClickDefault: false,\n    preventClickEventOnDrag: true,\n    flushSync: defaultSync,\n    firstRenderState: null,\n    persistData: null,\n    viewContainer: null,\n    useAccuratePosition: false\n  };\n  return MoveableManager;\n}(React.PureComponent);\n/**\n * The target to indicate Moveable Control Box.\n * @name Moveable#target\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n * moveable.target = document.querySelector(\".target\");\n */\n\n/**\n * Zooms in the elements of a moveable.\n * @name Moveable#zoom\n * @default 1\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n * moveable.zoom = 2;\n */\n\n/**\n * Whether the target size is detected and updated whenever it changes.\n * @name Moveable#useResizeObserver\n * @default false\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n * moveable.useResizeObserver = true;\n */\n\n/**\n * Resize, Scale Events at edges\n * @name Moveable#edge\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n * moveable.edge = true;\n */\n\n/**\n * You can specify the className of the moveable controlbox.\n * @name Moveable#className\n * @default \"\"\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *   className: \"\",\n * });\n *\n * moveable.className = \"moveable1\";\n */\n\n/**\n * The target(s) to drag Moveable target(s)\n * @name Moveable#dragTarget\n * @default target\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n * moveable.target = document.querySelector(\".target\");\n * moveable.dragTarget = document.querySelector(\".dragTarget\");\n */\n\n/**\n * `renderStart` event occurs at the first start of all events.\n * @memberof Moveable\n * @event renderStart\n * @param {Moveable.OnRenderStart} - Parameters for the `renderStart` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: document.querySelector(\".target\"),\n * });\n * moveable.on(\"renderStart\", ({ target }) => {\n *     console.log(\"onRenderStart\", target);\n * });\n */\n\n/**\n * `render` event occurs before the target is drawn on the screen.\n * @memberof Moveable\n * @event render\n * @param {Moveable.OnRender} - Parameters for the `render` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: document.querySelector(\".target\"),\n * });\n * moveable.on(\"render\", ({ target }) => {\n *     console.log(\"onRender\", target);\n * });\n */\n\n/**\n * `renderEnd` event occurs at the end of all events.\n * @memberof Moveable\n * @event renderEnd\n * @param {Moveable.OnRenderEnd} - Parameters for the `renderEnd` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: document.querySelector(\".target\"),\n * });\n * moveable.on(\"renderEnd\", ({ target }) => {\n *     console.log(\"onRenderEnd\", target);\n * });\n */\n\n/**\n * `renderGroupStart` event occurs at the first start of all events in group.\n * @memberof Moveable\n * @event renderGroupStart\n * @param {Moveable.OnRenderGroupStart} - Parameters for the `renderGroupStart` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n * });\n * moveable.on(\"renderGroupStart\", ({ targets }) => {\n *     console.log(\"onRenderGroupStart\", targets);\n * });\n */\n\n/**\n * `renderGroup` event occurs before the target is drawn on the screen in group.\n * @memberof Moveable\n * @event renderGroup\n * @param {Moveable.OnRenderGroup} - Parameters for the `renderGroup` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n * });\n * moveable.on(\"renderGroup\", ({ targets }) => {\n *     console.log(\"onRenderGroup\", targets);\n * });\n */\n\n/**\n * `renderGroupEnd` event occurs at the end of all events in group.\n * @memberof Moveable\n * @event renderGroupEnd\n * @param {Moveable.OnRenderGroupEnd} - Parameters for the `renderGroupEnd` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n * });\n * moveable.on(\"renderGroupEnd\", ({ targets }) => {\n *     console.log(\"onRenderGroupEnd\", targets);\n * });\n */\n\n\nvar Groupable = {\n  name: \"groupable\",\n  props: {\n    defaultGroupRotate: Number,\n    defaultGroupOrigin: String,\n    groupable: Boolean,\n    groupableProps: Object,\n    targetGroups: Object,\n    hideChildMoveableDefaultLines: Boolean\n  },\n  events: {},\n  render: function (moveable, React) {\n    var _a;\n\n    var props = moveable.props;\n    var targets = props.targets || [];\n    moveable.moveables = [];\n\n    var _b = moveable.getState(),\n        left = _b.left,\n        top = _b.top,\n        isPersisted = _b.isPersisted;\n\n    var position = [left, top];\n    var zoom = props.zoom || 1;\n    var renderGroupRects = moveable.renderGroupRects;\n    var persistDatChildren = ((_a = props.persistData) === null || _a === void 0 ? void 0 : _a.children) || [];\n\n    if (isPersisted) {\n      targets = persistDatChildren.map(function () {\n        return null;\n      });\n    } else {\n      persistDatChildren = [];\n    }\n\n    return __spreadArray(__spreadArray([], targets.map(function (target, i) {\n      return React.createElement(MoveableManager, {\n        key: \"moveable\" + i,\n        ref: refs(moveable, \"moveables\", i),\n        target: target,\n        origin: false,\n        cssStyled: props.cssStyled,\n        customStyledMap: props.customStyledMap,\n        useResizeObserver: props.useResizeObserver,\n        hideChildMoveableDefaultLines: props.hideChildMoveableDefaultLines,\n        parentMoveable: moveable,\n        parentPosition: position,\n        persistData: persistDatChildren[i],\n        zoom: zoom\n      });\n    }), true), flat(renderGroupRects.map(function (_a, i) {\n      var pos1 = _a.pos1,\n          pos2 = _a.pos2,\n          pos3 = _a.pos3,\n          pos4 = _a.pos4;\n      var poses = [pos1, pos2, pos3, pos4];\n      return [[0, 1], [1, 3], [3, 2], [2, 0]].map(function (_a, j) {\n        var from = _a[0],\n            to = _a[1];\n        return renderLine(React, \"\", minus(poses[from], position), minus(poses[to], position), zoom, \"group-rect-\".concat(i, \"-\").concat(j));\n      });\n    })), true);\n  }\n};\nvar Clickable = makeAble(\"clickable\", {\n  props: {\n    clickable: Boolean\n  },\n  events: {\n    onClick: \"click\",\n    onClickGroup: \"clickGroup\"\n  },\n  always: true,\n  dragRelation: \"weak\",\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  dragStart: function () {\n    return;\n  },\n  dragControlStart: function () {\n    return;\n  },\n  dragGroupStart: function (moveable, e) {\n    e.datas.inputTarget = e.inputEvent && e.inputEvent.target;\n  },\n  dragEnd: function (moveable, e) {\n    var target = moveable.props.target;\n    var inputEvent = e.inputEvent;\n    var inputTarget = e.inputTarget;\n    var isMoveableElement = moveable.isMoveableElement(inputTarget);\n    var containsElement = !isMoveableElement && moveable.controlBox.getElement().contains(inputTarget);\n\n    if (!inputEvent || !inputTarget || e.isDrag || moveable.isMoveableElement(inputTarget) || containsElement // External event duplicate target or dragAreaElement\n    ) {\n      return;\n    }\n\n    var containsTarget = target.contains(inputTarget);\n    triggerEvent(moveable, \"onClick\", fillParams(moveable, e, {\n      isDouble: e.isDouble,\n      inputTarget: inputTarget,\n      isTarget: target === inputTarget,\n      moveableTarget: moveable.props.target,\n      containsTarget: containsTarget\n    }));\n  },\n  dragGroupEnd: function (moveable, e) {\n    var inputEvent = e.inputEvent;\n    var inputTarget = e.inputTarget;\n\n    if (!inputEvent || !inputTarget || e.isDrag || moveable.isMoveableElement(inputTarget) // External event duplicate target or dragAreaElement\n    || e.datas.inputTarget === inputTarget) {\n      return;\n    }\n\n    var targets = moveable.props.targets;\n    var targetIndex = targets.indexOf(inputTarget);\n    var isTarget = targetIndex > -1;\n    var containsTarget = false;\n\n    if (targetIndex === -1) {\n      targetIndex = findIndex(targets, function (parentTarget) {\n        return parentTarget.contains(inputTarget);\n      });\n      containsTarget = targetIndex > -1;\n    }\n\n    triggerEvent(moveable, \"onClickGroup\", fillParams(moveable, e, {\n      isDouble: e.isDouble,\n      targets: targets,\n      inputTarget: inputTarget,\n      targetIndex: targetIndex,\n      isTarget: isTarget,\n      containsTarget: containsTarget,\n      moveableTarget: targets[targetIndex]\n    }));\n  },\n  dragControlEnd: function (moveable, e) {\n    this.dragEnd(moveable, e);\n  },\n  dragGroupControlEnd: function (moveable, e) {\n    this.dragEnd(moveable, e);\n  }\n});\n/**\n * When you click on the element, the `click` event is called.\n * @memberof Moveable\n * @event click\n * @param {Moveable.OnClick} - Parameters for the `click` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: document.querySelector(\".target\"),\n * });\n * moveable.on(\"click\", ({ hasTarget, containsTarget, targetIndex }) => {\n *     // If you click on an element other than the target and not included in the target, index is -1.\n *     console.log(\"onClickGroup\", target, hasTarget, containsTarget, targetIndex);\n * });\n */\n\n/**\n * When you click on the element inside the group, the `clickGroup` event is called.\n * @memberof Moveable\n * @event clickGroup\n * @param {Moveable.OnClickGroup} - Parameters for the `clickGroup` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n * });\n * moveable.on(\"clickGroup\", ({ inputTarget, isTarget, containsTarget, targetIndex }) => {\n *     // If you click on an element other than the target and not included in the target, index is -1.\n *     console.log(\"onClickGroup\", inputTarget, isTarget, containsTarget, targetIndex);\n * });\n */\n\nfunction getDraggableEvent(e) {\n  var datas = e.originalDatas.draggable;\n\n  if (!datas) {\n    e.originalDatas.draggable = {};\n    datas = e.originalDatas.draggable;\n  }\n\n  return __assign(__assign({}, e), {\n    datas: datas\n  });\n}\n\nvar edgeDraggable = makeAble(\"edgeDraggable\", {\n  css: [\".edge.edgeDraggable.line {\\n    cursor: move;\\n}\"],\n  render: function (moveable, React) {\n    var props = moveable.props;\n    var edge = props.edgeDraggable;\n\n    if (!edge) {\n      return [];\n    }\n\n    return renderEdgeLines(React, \"edgeDraggable\", edge, moveable.getState().renderPoses, props.zoom);\n  },\n  dragCondition: function (moveable, e) {\n    var _a;\n\n    var props = moveable.props;\n    var target = (_a = e.inputEvent) === null || _a === void 0 ? void 0 : _a.target;\n\n    if (!props.edgeDraggable || !target) {\n      return false;\n    }\n\n    return !props.draggable && hasClass(target, prefix(\"direction\")) && hasClass(target, prefix(\"edge\")) && hasClass(target, prefix(\"edgeDraggable\"));\n  },\n  dragStart: function (moveable, e) {\n    return Draggable.dragStart(moveable, getDraggableEvent(e));\n  },\n  drag: function (moveable, e) {\n    return Draggable.drag(moveable, getDraggableEvent(e));\n  },\n  dragEnd: function (moveable, e) {\n    return Draggable.dragEnd(moveable, getDraggableEvent(e));\n  },\n  dragGroupCondition: function (moveable, e) {\n    var _a;\n\n    var props = moveable.props;\n    var target = (_a = e.inputEvent) === null || _a === void 0 ? void 0 : _a.target;\n\n    if (!props.edgeDraggable || !target) {\n      return false;\n    }\n\n    return !props.draggable && hasClass(target, prefix(\"direction\")) && hasClass(target, prefix(\"line\"));\n  },\n  dragGroupStart: function (moveable, e) {\n    return Draggable.dragGroupStart(moveable, getDraggableEvent(e));\n  },\n  dragGroup: function (moveable, e) {\n    return Draggable.dragGroup(moveable, getDraggableEvent(e));\n  },\n  dragGroupEnd: function (moveable, e) {\n    return Draggable.dragGroupEnd(moveable, getDraggableEvent(e));\n  },\n  unset: function (moveable) {\n    return Draggable.unset(moveable);\n  }\n});\n/**\n * Whether to move by dragging the edge line (default: false)\n * @name Moveable.Draggable#edgeDraggable\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *  draggable: true,\n *  edgeDraggable: false,\n * });\n *\n * moveable.edgeDraggable = true;\n */\n\nvar IndividualGroupable = {\n  name: \"individualGroupable\",\n  props: {\n    individualGroupable: Boolean\n  },\n  events: {}\n};\nvar MOVEABLE_ABLES = [BeforeRenderable, Default, Snappable, Pinchable, Draggable, edgeDraggable, Resizable, Scalable, Warpable, Rotatable, Scrollable, Padding, Origin, OriginDraggable, Clippable, Roundable, Groupable, IndividualGroupable, Clickable, DragArea, Renderable];\nvar MOVEABLE_EVENTS_PROPS_MAP = /*#__PURE__*/MOVEABLE_ABLES.reduce(function (current, able) {\n  return __assign(__assign({}, current), \"events\" in able ? able.events : {});\n}, {});\nvar MOVEABLE_PROPS_MAP = /*#__PURE__*/MOVEABLE_ABLES.reduce(function (current, able) {\n  return __assign(__assign({}, current), able.props);\n}, {});\nvar MOVEABLE_EVENTS_MAP = /*#__PURE__*/invertObject(MOVEABLE_EVENTS_PROPS_MAP);\nvar MOVEABLE_EVENTS = Object.keys(MOVEABLE_EVENTS_MAP);\nvar MOVEABLE_PROPS = Object.keys(MOVEABLE_PROPS_MAP);\n\nfunction solveConstantsDistance(_a, pos) {\n  var a = _a[0],\n      b = _a[1],\n      c = _a[2];\n  return (a * pos[0] + b * pos[1] + c) / Math.sqrt(a * a + b * b);\n}\n\nfunction solveC(_a, pos) {\n  var a = _a[0],\n      b = _a[1]; // ax + by + c = 0\n  // -ax -by;\n\n  return -a * pos[0] - b * pos[1];\n}\n\nfunction getMaxPos(poses, index) {\n  return Math.max.apply(Math, poses.map(function (_a) {\n    var pos1 = _a[0],\n        pos2 = _a[1],\n        pos3 = _a[2],\n        pos4 = _a[3];\n    return Math.max(pos1[index], pos2[index], pos3[index], pos4[index]);\n  }));\n}\n\nfunction getMinPos(poses, index) {\n  return Math.min.apply(Math, poses.map(function (_a) {\n    var pos1 = _a[0],\n        pos2 = _a[1],\n        pos3 = _a[2],\n        pos4 = _a[3];\n    return Math.min(pos1[index], pos2[index], pos3[index], pos4[index]);\n  }));\n}\n\nfunction getGroupRect(parentPoses, rotation) {\n  var _a;\n\n  var pos1 = [0, 0];\n  var pos2 = [0, 0];\n  var pos3 = [0, 0];\n  var pos4 = [0, 0];\n  var width = 0;\n  var height = 0;\n\n  if (!parentPoses.length) {\n    return {\n      pos1: pos1,\n      pos2: pos2,\n      pos3: pos3,\n      pos4: pos4,\n      minX: 0,\n      minY: 0,\n      maxX: 0,\n      maxY: 0,\n      width: width,\n      height: height,\n      rotation: rotation\n    };\n  }\n\n  var fixedRotation = throttle(rotation, TINY_NUM);\n\n  if (fixedRotation % 90) {\n    var rad = fixedRotation / 180 * Math.PI;\n    var a1_1 = Math.tan(rad);\n    var a2_1 = -1 / a1_1; // ax = y  // -ax + y = 0 // 0 => 1\n    // -ax = y // ax + y = 0  // 0 => 3\n\n    var a1MinMax_1 = [MAX_NUM, MIN_NUM];\n    var a1MinMaxPos_1 = [[0, 0], [0, 0]];\n    var a2MinMax_1 = [MAX_NUM, MIN_NUM];\n    var a2MinMaxPos_1 = [[0, 0], [0, 0]];\n    parentPoses.forEach(function (poses) {\n      poses.forEach(function (pos) {\n        // const b1 = pos[1] - a1 * pos[0];\n        // const b2 = pos[1] - a2 * pos[0];\n        var a1Dist = solveConstantsDistance([-a1_1, 1, 0], pos);\n        var a2Dist = solveConstantsDistance([-a2_1, 1, 0], pos);\n\n        if (a1MinMax_1[0] > a1Dist) {\n          a1MinMaxPos_1[0] = pos;\n          a1MinMax_1[0] = a1Dist;\n        }\n\n        if (a1MinMax_1[1] < a1Dist) {\n          a1MinMaxPos_1[1] = pos;\n          a1MinMax_1[1] = a1Dist;\n        }\n\n        if (a2MinMax_1[0] > a2Dist) {\n          a2MinMaxPos_1[0] = pos;\n          a2MinMax_1[0] = a2Dist;\n        }\n\n        if (a2MinMax_1[1] < a2Dist) {\n          a2MinMaxPos_1[1] = pos;\n          a2MinMax_1[1] = a2Dist;\n        }\n      });\n    });\n    var a1MinPos = a1MinMaxPos_1[0],\n        a1MaxPos = a1MinMaxPos_1[1];\n    var a2MinPos = a2MinMaxPos_1[0],\n        a2MaxPos = a2MinMaxPos_1[1];\n    var minHorizontalLine = [-a1_1, 1, solveC([-a1_1, 1], a1MinPos)];\n    var maxHorizontalLine = [-a1_1, 1, solveC([-a1_1, 1], a1MaxPos)];\n    var minVerticalLine = [-a2_1, 1, solveC([-a2_1, 1], a2MinPos)];\n    var maxVerticalLine = [-a2_1, 1, solveC([-a2_1, 1], a2MaxPos)];\n    _a = [[minHorizontalLine, minVerticalLine], [minHorizontalLine, maxVerticalLine], [maxHorizontalLine, minVerticalLine], [maxHorizontalLine, maxVerticalLine]].map(function (_a) {\n      var line1 = _a[0],\n          line2 = _a[1];\n      return getIntersectionPointsByConstants(line1, line2)[0];\n    }), pos1 = _a[0], pos2 = _a[1], pos3 = _a[2], pos4 = _a[3];\n    width = a2MinMax_1[1] - a2MinMax_1[0];\n    height = a1MinMax_1[1] - a1MinMax_1[0];\n  } else {\n    var minX_1 = getMinPos(parentPoses, 0);\n    var minY_1 = getMinPos(parentPoses, 1);\n    var maxX_1 = getMaxPos(parentPoses, 0);\n    var maxY_1 = getMaxPos(parentPoses, 1);\n    pos1 = [minX_1, minY_1];\n    pos2 = [maxX_1, minY_1];\n    pos3 = [minX_1, maxY_1];\n    pos4 = [maxX_1, maxY_1];\n    width = maxX_1 - minX_1;\n    height = maxY_1 - minY_1;\n\n    if (fixedRotation % 180) {\n      // 0\n      // 1 2\n      // 3 4\n      // 90\n      // 3 1\n      // 4 2\n      // 180\n      // 4 3\n      // 2 1\n      // 270\n      // 2 4\n      // 1 3\n      // 1, 2, 3,4 = 3 1 4 2\n      var changedX = [pos3, pos1, pos4, pos2];\n      pos1 = changedX[0], pos2 = changedX[1], pos3 = changedX[2], pos4 = changedX[3];\n      width = maxY_1 - minY_1;\n      height = maxX_1 - minX_1;\n    }\n  }\n\n  if (fixedRotation % 360 > 180) {\n    // 1 2   4 3\n    // 3 4   2 1\n    var changedX = [pos4, pos3, pos2, pos1];\n    pos1 = changedX[0], pos2 = changedX[1], pos3 = changedX[2], pos4 = changedX[3];\n  }\n\n  var _b = getMinMaxs([pos1, pos2, pos3, pos4]),\n      minX = _b.minX,\n      minY = _b.minY,\n      maxX = _b.maxX,\n      maxY = _b.maxY;\n\n  return {\n    pos1: pos1,\n    pos2: pos2,\n    pos3: pos3,\n    pos4: pos4,\n    width: width,\n    height: height,\n    minX: minX,\n    minY: minY,\n    maxX: maxX,\n    maxY: maxY,\n    rotation: rotation\n  };\n}\n\nfunction findMoveableGroups(moveables, childTargetGroups) {\n  var groups = childTargetGroups.map(function (targetGroup) {\n    if (isArray(targetGroup)) {\n      var childMoveableGroups = findMoveableGroups(moveables, targetGroup);\n      var length = childMoveableGroups.length;\n\n      if (length > 1) {\n        return childMoveableGroups;\n      } else if (length === 1) {\n        return childMoveableGroups[0];\n      } else {\n        return null;\n      }\n    } else {\n      var checked = find(moveables, function (_a) {\n        var manager = _a.manager;\n        return manager.props.target === targetGroup;\n      });\n\n      if (checked) {\n        checked.finded = true;\n        return checked.manager;\n      }\n\n      return null;\n    }\n  }).filter(Boolean);\n\n  if (groups.length === 1 && isArray(groups[0])) {\n    return groups[0];\n  }\n\n  return groups;\n}\n/**\n * @namespace Moveable.Group\n * @description You can make targets moveable.\n */\n\n\nvar MoveableGroup = /*#__PURE__*/function (_super) {\n  __extends(MoveableGroup, _super);\n\n  function MoveableGroup() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.differ = new ChildrenDiffer();\n    _this.moveables = [];\n    _this.transformOrigin = \"50% 50%\";\n    _this.renderGroupRects = [];\n    _this._targetGroups = [];\n    _this._hasFirstTargets = false;\n    return _this;\n  }\n\n  var __proto = MoveableGroup.prototype;\n\n  __proto.componentDidMount = function () {\n    _super.prototype.componentDidMount.call(this);\n  };\n\n  __proto.checkUpdate = function () {\n    this._isPropTargetChanged = false;\n    this.updateAbles();\n  };\n\n  __proto.getTargets = function () {\n    return this.props.targets;\n  };\n\n  __proto.updateRect = function (type, isTarget, isSetState) {\n    var _a;\n\n    if (isSetState === void 0) {\n      isSetState = true;\n    }\n\n    var state = this.state;\n\n    if (!this.controlBox || state.isPersisted) {\n      return;\n    }\n\n    this.moveables.forEach(function (moveable) {\n      moveable.updateRect(type, false, false);\n    });\n    var props = this.props;\n    var moveables = this.moveables;\n    var target = state.target || props.target;\n    var checkeds = moveables.map(function (moveable) {\n      return {\n        finded: false,\n        manager: moveable\n      };\n    });\n    var targetGroups = this.props.targetGroups || [];\n    var moveableGroups = findMoveableGroups(checkeds, targetGroups);\n    moveableGroups.push.apply(moveableGroups, checkeds.filter(function (_a) {\n      var finded = _a.finded;\n      return !finded;\n    }).map(function (_a) {\n      var manager = _a.manager;\n      return manager;\n    }));\n    var renderGroupRects = [];\n    var isReset = !isTarget || type !== \"\" && props.updateGroup;\n    var defaultGroupRotate = props.defaultGroupRotate || 0;\n\n    if (!this._hasFirstTargets) {\n      var persistedRoatation = (_a = this.props.persistData) === null || _a === void 0 ? void 0 : _a.rotation;\n\n      if (persistedRoatation != null) {\n        defaultGroupRotate = persistedRoatation;\n      }\n    }\n\n    function getMoveableGroupRect(group, parentRotation, isRoot) {\n      var posesRotations = group.map(function (moveable) {\n        if (isArray(moveable)) {\n          var rect = getMoveableGroupRect(moveable, parentRotation);\n          var poses = [rect.pos1, rect.pos2, rect.pos3, rect.pos4];\n          renderGroupRects.push(rect);\n          return {\n            poses: poses,\n            rotation: rect.rotation\n          };\n        } else {\n          return {\n            poses: getAbsolutePosesByState(moveable.state),\n            rotation: moveable.getRotation()\n          };\n        }\n      });\n      var rotations = posesRotations.map(function (_a) {\n        var rotation = _a.rotation;\n        return rotation;\n      });\n      var groupRotation = 0;\n      var firstRotation = rotations[0];\n      var isSameRotation = rotations.every(function (nextRotation) {\n        return Math.abs(firstRotation - nextRotation) < 0.1;\n      });\n\n      if (isReset) {\n        groupRotation = isSameRotation ? firstRotation : defaultGroupRotate;\n      } else {\n        groupRotation = !isRoot && isSameRotation ? firstRotation : parentRotation;\n      }\n\n      var groupPoses = posesRotations.map(function (_a) {\n        var poses = _a.poses;\n        return poses;\n      });\n      var groupRect = getGroupRect(groupPoses, groupRotation);\n      return groupRect;\n    }\n\n    var rootGroupRect = getMoveableGroupRect(moveableGroups, this.rotation, true);\n\n    if (isReset) {\n      // reset rotataion\n      this.rotation = rootGroupRect.rotation;\n      this.transformOrigin = props.defaultGroupOrigin || \"50% 50%\";\n      this.scale = [1, 1];\n    }\n\n    this._targetGroups = targetGroups;\n    this.renderGroupRects = renderGroupRects;\n    var transformOrigin = this.transformOrigin;\n    var rotation = this.rotation;\n    var scale = this.scale;\n    var width = rootGroupRect.width,\n        height = rootGroupRect.height,\n        minX = rootGroupRect.minX,\n        minY = rootGroupRect.minY;\n    var posesInfo = rotatePosesInfo([[0, 0], [width, 0], [0, height], [width, height]], convertTransformOriginArray(transformOrigin, width, height), this.rotation / 180 * Math.PI);\n\n    var _b = getMinMaxs(posesInfo.result),\n        deltaX = _b.minX,\n        deltaY = _b.minY;\n\n    var rotateScale = \" rotate(\".concat(rotation, \"deg)\") + \" scale(\".concat(scale[0] >= 0 ? 1 : -1, \", \").concat(scale[1] >= 0 ? 1 : -1, \")\");\n    var transform = \"translate(\".concat(-deltaX, \"px, \").concat(-deltaY, \"px)\").concat(rotateScale);\n    this.controlBox.getElement().style.transform = \"translate3d(\".concat(minX, \"px, \").concat(minY, \"px, \").concat(this.props.translateZ || 0, \")\");\n    target.style.cssText += \"left:0px;top:0px;\" + \"transform-origin:\".concat(transformOrigin, \";\") + \"width:\".concat(width, \"px;height:\").concat(height, \"px;\") + \"transform: \".concat(transform);\n    state.width = width;\n    state.height = height;\n    var container = this.getContainer();\n    var info = getMoveableTargetInfo(this.controlBox.getElement(), target, this.controlBox.getElement(), this.getContainer(), this._rootContainer || container, []);\n    var pos = [info.left, info.top];\n\n    var _c = getAbsolutePosesByState(info),\n        pos1 = _c[0],\n        pos2 = _c[1],\n        pos3 = _c[2],\n        pos4 = _c[3]; // info.left + info.pos(1 ~ 4)\n\n\n    var minPos = getMinMaxs([pos1, pos2, pos3, pos4]);\n    var delta = [minPos.minX, minPos.minY];\n    var direction = scale[0] * scale[1] > 0 ? 1 : -1;\n    info.pos1 = minus(pos1, delta);\n    info.pos2 = minus(pos2, delta);\n    info.pos3 = minus(pos3, delta);\n    info.pos4 = minus(pos4, delta); // info.left = info.left + delta[0];\n    // info.top = info.top + delta[1];\n\n    info.left = minX - info.left + delta[0];\n    info.top = minY - info.top + delta[1];\n    info.origin = minus(plus(pos, info.origin), delta);\n    info.beforeOrigin = minus(plus(pos, info.beforeOrigin), delta);\n    info.originalBeforeOrigin = plus(pos, info.originalBeforeOrigin);\n    info.transformOrigin = minus(plus(pos, info.transformOrigin), delta);\n    target.style.transform = \"translate(\".concat(-deltaX - delta[0], \"px, \").concat(-deltaY - delta[1], \"px)\") + rotateScale;\n    this.updateState(__assign(__assign({}, info), {\n      posDelta: delta,\n      direction: direction,\n      beforeDirection: direction\n    }), isSetState);\n  };\n\n  __proto.getRect = function () {\n    return __assign(__assign({}, _super.prototype.getRect.call(this)), {\n      children: this.moveables.map(function (child) {\n        return child.getRect();\n      })\n    });\n  };\n\n  __proto.triggerEvent = function (name, e, isManager) {\n    if (isManager || name.indexOf(\"Group\") > -1) {\n      return _super.prototype.triggerEvent.call(this, name, e);\n    } else {\n      this._emitter.trigger(name, e);\n    }\n  };\n\n  __proto.updateAbles = function () {\n    _super.prototype.updateAbles.call(this, __spreadArray(__spreadArray([], this.props.ables, true), [Groupable], false), \"Group\");\n  };\n\n  __proto._updateTargets = function () {\n    _super.prototype._updateTargets.call(this);\n\n    this._prevTarget = this.props.dragTarget || this.areaElement;\n  };\n\n  __proto._updateEvents = function () {\n    var state = this.state;\n    var props = this.props;\n    var prevTarget = this._prevTarget;\n    var nextTarget = props.dragTarget || this.areaElement;\n\n    if (prevTarget !== nextTarget) {\n      unset(this, \"targetGesto\");\n      unset(this, \"controlGesto\");\n      state.target = null;\n    }\n\n    if (!state.target) {\n      state.target = this.areaElement;\n      this.controlBox.getElement().style.display = \"block\";\n    }\n\n    if (state.target) {\n      if (!this.targetGesto) {\n        this.targetGesto = getTargetAbleGesto(this, nextTarget, \"Group\");\n      }\n\n      if (!this.controlGesto) {\n        this.controlGesto = getAbleGesto(this, this.controlBox.getElement(), \"controlAbles\", \"GroupControl\");\n      }\n    }\n\n    var isContainerChanged = !equals(state.container, props.container);\n\n    if (isContainerChanged) {\n      state.container = props.container;\n    }\n\n    var targets = props.targets;\n\n    var _a = this.differ.update(targets),\n        added = _a.added,\n        changed = _a.changed,\n        removed = _a.removed;\n\n    var isTargetChanged = added.length || removed.length;\n\n    if (isContainerChanged || isTargetChanged || this.transformOrigin !== (props.defaultGroupOrigin || \"50% 50%\") || changed.length || targets.length && !isDeepArrayEquals(this._targetGroups, props.targetGroups || [])) {\n      this.updateRect();\n      this._hasFirstTargets = true;\n    }\n\n    this._isPropTargetChanged = !!isTargetChanged;\n  };\n\n  __proto._updateObserver = function () {};\n\n  MoveableGroup.defaultProps = __assign(__assign({}, MoveableManager.defaultProps), {\n    transformOrigin: [\"50%\", \"50%\"],\n    groupable: true,\n    dragArea: true,\n    keepRatio: true,\n    targets: [],\n    defaultGroupRotate: 0,\n    defaultGroupOrigin: \"50% 50%\"\n  });\n  return MoveableGroup;\n}(MoveableManager);\n/**\n * @namespace Moveable.IndividualGroup\n * @description Create targets individually, not as a group.Create targets individually, not as a group.\n */\n\n\nvar MoveableIndividualGroup = /*#__PURE__*/function (_super) {\n  __extends(MoveableIndividualGroup, _super);\n\n  function MoveableIndividualGroup() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.moveables = [];\n    return _this;\n  }\n\n  var __proto = MoveableIndividualGroup.prototype;\n\n  __proto.render = function () {\n    var _this = this;\n\n    var _a;\n\n    var props = this.props;\n    var cspNonce = props.cspNonce,\n        ControlBoxElement = props.cssStyled,\n        persistData = props.persistData;\n    var targets = props.targets || [];\n    var length = targets.length;\n    var canPersist = this.isUnmounted || !length;\n    var persistDatChildren = (_a = persistData === null || persistData === void 0 ? void 0 : persistData.children) !== null && _a !== void 0 ? _a : [];\n\n    if (canPersist && !length && persistDatChildren.length) {\n      targets = persistDatChildren.map(function () {\n        return null;\n      });\n    } else if (!canPersist) {\n      persistDatChildren = [];\n    }\n\n    return React.createElement(ControlBoxElement, {\n      cspNonce: cspNonce,\n      ref: ref(this, \"controlBox\"),\n      className: prefix(\"control-box\")\n    }, targets.map(function (target, i) {\n      return React.createElement(MoveableManager, __assign({\n        key: \"moveable\" + i,\n        ref: refs(_this, \"moveables\", i)\n      }, _this.props, {\n        target: target,\n        wrapperMoveable: _this,\n        isWrapperMounted: _this.isMoveableMounted,\n        persistData: persistDatChildren[i]\n      }));\n    }));\n  };\n\n  __proto.componentDidUpdate = function () {};\n\n  __proto.getTargets = function () {\n    return this.props.targets;\n  };\n\n  __proto.updateRect = function (type, isTarget, isSetState) {\n    if (isSetState === void 0) {\n      isSetState = true;\n    }\n\n    this.moveables.forEach(function (moveable) {\n      moveable.updateRect(type, isTarget, isSetState);\n    });\n  };\n\n  __proto.getRect = function () {\n    return __assign(__assign({}, _super.prototype.getRect.call(this)), {\n      children: this.moveables.map(function (child) {\n        return child.getRect();\n      })\n    });\n  };\n\n  __proto.request = function () {\n    return {\n      request: function () {\n        return this;\n      },\n      requestEnd: function () {\n        return this;\n      }\n    };\n  };\n\n  __proto.dragStart = function () {\n    return this;\n  };\n\n  __proto.hitTest = function () {\n    return 0;\n  };\n\n  __proto.isInside = function () {\n    return false;\n  };\n\n  __proto.isDragging = function () {\n    return false;\n  };\n\n  __proto.updateRenderPoses = function () {};\n\n  __proto.checkUpdate = function () {};\n\n  __proto.triggerEvent = function () {};\n\n  __proto.updateAbles = function () {};\n\n  __proto._updateEvents = function () {};\n\n  __proto._updateObserver = function () {};\n\n  return MoveableIndividualGroup;\n}(MoveableManager);\n\nfunction getElementTargets(refTargets, selectorMap) {\n  var elementTargets = [];\n  refTargets.forEach(function (target) {\n    if (!target) {\n      return;\n    }\n\n    if (isString(target)) {\n      if (selectorMap[target]) {\n        elementTargets.push.apply(elementTargets, selectorMap[target]);\n      }\n\n      return;\n    }\n\n    if (isArray(target)) {\n      elementTargets.push.apply(elementTargets, getElementTargets(target, selectorMap));\n    } else {\n      elementTargets.push(target);\n    }\n  });\n  return elementTargets;\n}\n\nfunction getTargetGroups(refTargets, selectorMap) {\n  var targetGroups = [];\n  refTargets.forEach(function (target) {\n    if (!target) {\n      return;\n    }\n\n    if (isString(target)) {\n      if (selectorMap[target]) {\n        targetGroups.push.apply(targetGroups, selectorMap[target]);\n      }\n\n      return;\n    }\n\n    if (isArray(target)) {\n      targetGroups.push(getTargetGroups(target, selectorMap));\n    } else {\n      targetGroups.push(target);\n    }\n  });\n  return targetGroups;\n}\n\nfunction compareRefTargets(prevRefTargets, nextRefTargets) {\n  return prevRefTargets.length !== nextRefTargets.length || prevRefTargets.some(function (target, i) {\n    var nextTarget = nextRefTargets[i];\n\n    if (!target && !nextTarget) {\n      return false;\n    } else if (target != nextTarget) {\n      if (isArray(target) && isArray(nextTarget)) {\n        return compareRefTargets(target, nextTarget);\n      }\n\n      return true;\n    }\n\n    return false;\n  });\n}\n\nvar InitialMoveable = /*#__PURE__*/function (_super) {\n  __extends(InitialMoveable, _super);\n\n  function InitialMoveable() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.refTargets = [];\n    _this.selectorMap = {};\n    _this._differ = new ChildrenDiffer();\n    _this._elementTargets = [];\n    _this._onChangeTargets = null;\n    return _this;\n  }\n\n  var __proto = InitialMoveable.prototype;\n\n  InitialMoveable.makeStyled = function () {\n    var cssMap = {};\n    var ables = this.getTotalAbles();\n    ables.forEach(function (_a) {\n      var css = _a.css;\n\n      if (!css) {\n        return;\n      }\n\n      css.forEach(function (text) {\n        cssMap[text] = true;\n      });\n    });\n    var style = getKeys(cssMap).join(\"\\n\");\n    this.defaultStyled = styled(\"div\", prefixCSS(PREFIX, MOVEABLE_CSS + style));\n  };\n\n  InitialMoveable.getTotalAbles = function () {\n    return __spreadArray([Default, Groupable, IndividualGroupable, DragArea], this.defaultAbles, true);\n  };\n\n  __proto.render = function () {\n    var _a;\n\n    var moveableContructor = this.constructor;\n\n    if (!moveableContructor.defaultStyled) {\n      moveableContructor.makeStyled();\n    }\n\n    var _b = this.props,\n        userAbles = _b.ables,\n        userProps = _b.props,\n        props = __rest(_b, [\"ables\", \"props\"]);\n\n    var refTargets = this._updateRefs(true);\n\n    var elementTargets = getElementTargets(refTargets, this.selectorMap);\n    var isGroup = elementTargets.length > 1;\n    var totalAbles = moveableContructor.getTotalAbles();\n\n    var ables = __spreadArray(__spreadArray([], totalAbles, true), userAbles || [], true);\n\n    var nextProps = __assign(__assign(__assign({}, props), userProps || {}), {\n      ables: ables,\n      cssStyled: moveableContructor.defaultStyled,\n      customStyledMap: moveableContructor.customStyledMap\n    });\n\n    this._elementTargets = elementTargets;\n    var firstRenderState = null;\n    var prevMoveable = this.moveable;\n    var persistData = props.persistData;\n\n    if (persistData === null || persistData === void 0 ? void 0 : persistData.children) {\n      isGroup = true;\n    }\n\n    if (isGroup) {\n      if (props.individualGroupable) {\n        return React.createElement(MoveableIndividualGroup, __assign({\n          key: \"individual-group\",\n          ref: ref(this, \"moveable\")\n        }, nextProps, {\n          target: null,\n          targets: elementTargets\n        }));\n      }\n\n      var targetGroups = getTargetGroups(refTargets, this.selectorMap); // manager\n\n      if (prevMoveable && !prevMoveable.props.groupable && !prevMoveable.props.individualGroupable) {\n        var target = prevMoveable.props.target;\n\n        if (target && elementTargets.indexOf(target) > -1) {\n          firstRenderState = __assign({}, prevMoveable.state);\n        }\n      }\n\n      return React.createElement(MoveableGroup, __assign({\n        key: \"group\",\n        ref: ref(this, \"moveable\")\n      }, nextProps, (_a = props.groupableProps) !== null && _a !== void 0 ? _a : {}, {\n        target: null,\n        targets: elementTargets,\n        targetGroups: targetGroups,\n        firstRenderState: firstRenderState\n      }));\n    } else {\n      var target_1 = elementTargets[0]; // manager\n\n      if (prevMoveable && (prevMoveable.props.groupable || prevMoveable.props.individualGroupable)) {\n        var moveables = prevMoveable.moveables || [];\n        var prevTargetMoveable = find(moveables, function (mv) {\n          return mv.props.target === target_1;\n        });\n\n        if (prevTargetMoveable) {\n          firstRenderState = __assign({}, prevTargetMoveable.state);\n        }\n      }\n\n      return React.createElement(MoveableManager, __assign({\n        key: \"single\",\n        ref: ref(this, \"moveable\")\n      }, nextProps, {\n        target: target_1,\n        firstRenderState: firstRenderState\n      }));\n    }\n  };\n\n  __proto.componentDidMount = function () {\n    this._checkChangeTargets();\n\n    this._updateRefs();\n  };\n\n  __proto.componentDidUpdate = function () {\n    this._checkChangeTargets();\n  };\n\n  __proto.componentWillUnmount = function () {\n    this.selectorMap = {};\n    this.refTargets = [];\n  };\n  /**\n   * Get targets set in moveable through target or targets of props.\n   * @method Moveable#getTargets\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body, {\n   *    target: [targetRef, \".target\", document.querySelectorAll(\".target\")],\n   * });\n   *\n   * console.log(moveable.getTargets());\n   */\n\n\n  __proto.getTargets = function () {\n    var _a, _b;\n\n    return (_b = (_a = this.moveable) === null || _a === void 0 ? void 0 : _a.getTargets()) !== null && _b !== void 0 ? _b : [];\n  };\n  /**\n   * If the element list corresponding to the selector among the targets is changed, it is updated.\n   * @method Moveable#updateSelectors\n   * @example\n   * import Moveable from \"moveable\";\n   *\n   * const moveable = new Moveable(document.body, {\n   *    target: \".target\",\n   * });\n   *\n   * moveable.updateSelectors();\n   */\n\n\n  __proto.updateSelectors = function () {\n    this.selectorMap = {};\n\n    this._updateRefs();\n  };\n  /**\n   * User changes target and waits for target to change.\n   * @method Moveable#waitToChangeTarget\n   * @story combination-with-other-components--use-selecto\n   * @example\n   * document.querySelector(\".target\").addEventListener(\"mousedown\", e => {\n   *   moveable.waitToChangeTarget().then(() => {\n   *      moveable.dragStart(e.currentTarget);\n   *   });\n   *   moveable.target = e.currentTarget;\n   * });\n   */\n\n\n  __proto.waitToChangeTarget = function () {\n    // let resolvePromise: (e: OnChangeTarget) => void;\n    var _this = this; // this._onChangeTargets = () => {\n    //     this._onChangeTargets = null;\n    //     resolvePromise({\n    //         moveable: this.getManager(),\n    //         targets: this._elementTargets,\n    //     });\n    // };\n    // return new Promise<OnChangeTarget>(resolve => {\n    //     resolvePromise = resolve;\n    // });\n\n\n    var resolvePromise;\n\n    this._onChangeTargets = function () {\n      _this._onChangeTargets = null;\n      resolvePromise();\n    };\n\n    return new Promise(function (resolve) {\n      resolvePromise = resolve;\n    });\n  };\n\n  __proto.waitToChangeTargets = function () {\n    return this.waitToChangeTarget();\n  };\n\n  __proto.getManager = function () {\n    return this.moveable;\n  };\n\n  __proto._updateRefs = function (isRender) {\n    var prevRefTargets = this.refTargets;\n    var nextRefTargets = getRefTargets(this.props.target || this.props.targets);\n    var isBrowser = typeof document !== \"undefined\";\n    var isUpdate = compareRefTargets(prevRefTargets, nextRefTargets);\n    var selectorMap = this.selectorMap;\n    var nextSelectorMap = {};\n    this.refTargets.forEach(function updateSelectorMap(target) {\n      if (isString(target)) {\n        var selectorTarget = selectorMap[target];\n\n        if (selectorTarget) {\n          nextSelectorMap[target] = selectorMap[target];\n        } else if (isBrowser) {\n          isUpdate = true;\n          nextSelectorMap[target] = [].slice.call(document.querySelectorAll(target));\n        }\n      } else if (isArray(target)) {\n        target.forEach(updateSelectorMap);\n      }\n    });\n    this.refTargets = nextRefTargets;\n    this.selectorMap = nextSelectorMap;\n\n    if (!isRender && isUpdate) {\n      this.forceUpdate();\n    }\n\n    return nextRefTargets;\n  };\n\n  __proto._checkChangeTargets = function () {\n    var _a, _b, _c;\n\n    var _d = this._differ.update(this._elementTargets),\n        added = _d.added,\n        removed = _d.removed;\n\n    var isTargetChanged = added.length || removed.length;\n\n    if (isTargetChanged) {\n      (_b = (_a = this.props).onChangeTargets) === null || _b === void 0 ? void 0 : _b.call(_a, {\n        moveable: this.moveable,\n        targets: this._elementTargets\n      });\n      (_c = this._onChangeTargets) === null || _c === void 0 ? void 0 : _c.call(this);\n    }\n\n    this._updateRefs();\n  };\n\n  InitialMoveable.defaultAbles = [];\n  InitialMoveable.customStyledMap = {};\n  InitialMoveable.defaultStyled = null;\n\n  __decorate([withMethods(MOVEABLE_METHODS)], InitialMoveable.prototype, \"moveable\", void 0);\n\n  return InitialMoveable;\n}(React.PureComponent);\n\nvar Moveable$1 = /*#__PURE__*/function (_super) {\n  __extends(Moveable, _super);\n\n  function Moveable() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Moveable.defaultAbles = MOVEABLE_ABLES;\n  return Moveable;\n}(InitialMoveable);\n\nfunction makeMoveable(ables) {\n  var _a;\n\n  return _a = /*#__PURE__*/function (_super) {\n    __extends(Moveable, _super);\n\n    function Moveable() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    return Moveable;\n  }(InitialMoveable), _a.defaultAbles = ables, _a;\n}\n\nvar Moveable = Moveable$1;\n\nexport { Clippable, DIRECTIONS, Draggable, edgeDraggable as EdgeDraggable, InitialMoveable, MOVEABLE_ABLES, MOVEABLE_EVENTS, MOVEABLE_EVENTS_MAP, MOVEABLE_EVENTS_PROPS_MAP, MOVEABLE_METHODS, MOVEABLE_PROPS, MOVEABLE_PROPS_MAP, Pinchable, Resizable, Rotatable, Roundable, Scalable, Snappable, Warpable, Moveable as default, getElementInfo, makeAble, makeMoveable };\n","/*\nCopyright (c) 2019 Daybrush\nname: moveable\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/moveable/blob/master/packages/moveable\nversion: 0.43.1\n*/\nimport { ref, Properties } from 'framework-utils';\nimport * as React from 'react-simple-compat';\nimport { createPortal, render } from 'react-simple-compat';\nimport Moveable$1, { MOVEABLE_PROPS, MOVEABLE_METHODS, MOVEABLE_EVENTS, MOVEABLE_PROPS_MAP, getElementInfo as getElementInfo$1, makeAble as makeAble$1 } from 'react-compat-moveable';\nimport { camelize, isArray } from '@daybrush/utils';\nimport EventEmitter from '@scena/event-emitter';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\n\nvar InnerMoveable =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(InnerMoveable, _super);\n\n  function InnerMoveable(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.state = {};\n    _this.state = _this.props;\n    return _this;\n  }\n\n  var __proto = InnerMoveable.prototype;\n\n  __proto.render = function () {\n    return createPortal(React.createElement(Moveable$1, __assign({\n      ref: ref(this, \"moveable\")\n    }, this.state)), this.state.parentElement);\n  };\n\n  return InnerMoveable;\n}(React.Component);\n\nvar PROPERTIES = MOVEABLE_PROPS;\nvar METHODS = MOVEABLE_METHODS;\nvar EVENTS = MOVEABLE_EVENTS;\nvar PROPS_MAP = MOVEABLE_PROPS_MAP;\n\n/**\n * Moveable is Draggable! Resizable! Scalable! Rotatable!\n * @sort 1\n * @alias Moveable\n * @extends EventEmitter\n */\n\nvar MoveableManager =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(MoveableManager, _super);\n  /**\n   *\n   */\n\n\n  function MoveableManager(parentElement, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.tempElement = document.createElement(\"div\");\n\n    var nextOptions = __assign({}, options);\n\n    var events = {};\n    EVENTS.forEach(function (name) {\n      events[camelize(\"on \".concat(name))] = function (e) {\n        return _this.trigger(name, e);\n      };\n    });\n    render(React.createElement(InnerMoveable, __assign({\n      ref: ref(_this, \"innerMoveable\"),\n      parentElement: parentElement\n    }, nextOptions, events)), _this.tempElement);\n    var target = nextOptions.target;\n\n    if (isArray(target) && target.length > 1) {\n      _this.updateRect();\n    }\n\n    return _this;\n  }\n\n  var __proto = MoveableManager.prototype;\n\n  __proto.setState = function (state, callback) {\n    this.innerMoveable.setState(state, callback);\n  };\n\n  __proto.forceUpdate = function (callback) {\n    this.innerMoveable.forceUpdate(callback);\n  };\n\n  __proto.dragStart = function (e) {\n    var innerMoveable = this.innerMoveable;\n\n    if (innerMoveable.$_timer) {\n      this.forceUpdate();\n    }\n\n    this.getMoveable().dragStart(e);\n  };\n\n  __proto.destroy = function () {\n    render(null, this.tempElement);\n    this.off();\n    this.tempElement = null;\n    this.innerMoveable = null;\n  };\n\n  __proto.getMoveable = function () {\n    return this.innerMoveable.moveable;\n  };\n\n  MoveableManager = __decorate([Properties(METHODS, function (prototype, property) {\n    if (prototype[property]) {\n      return;\n    }\n\n    prototype[property] = function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      var self = this.getMoveable();\n\n      if (!self || !self[property]) {\n        return;\n      }\n\n      return self[property].apply(self, args);\n    };\n  }), Properties(PROPERTIES, function (prototype, property) {\n    Object.defineProperty(prototype, property, {\n      get: function () {\n        return this.getMoveable().props[property];\n      },\n      set: function (value) {\n        var _a;\n\n        this.setState((_a = {}, _a[property] = value, _a));\n      },\n      enumerable: true,\n      configurable: true\n    });\n  })], MoveableManager);\n  return MoveableManager;\n}(EventEmitter);\n\nvar Moveable =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(Moveable, _super);\n\n  function Moveable() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return Moveable;\n}(MoveableManager);\n\nfunction getElementInfo(target, container, rootContainer) {\n  return getElementInfo$1(target, container, rootContainer);\n}\nfunction makeAble(name, able) {\n  return makeAble$1(name, able);\n}\n\nexport { EVENTS, METHODS, PROPERTIES, PROPS_MAP, Moveable as default, getElementInfo, makeAble };\n//# sourceMappingURL=moveable.esm.js.map\n","/*\nCopyright (c) Daybrush\nname: keycon\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/keycon.git\nversion: 1.2.2\n*/\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\n/*\nCopyright (c) 2018 Daybrush\n@name: @daybrush/utils\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/utils\n@version 1.7.1\n*/\n/**\n* get string \"object\"\n* @memberof Consts\n* @example\nimport {OBJECT} from \"@daybrush/utils\";\n\nconsole.log(OBJECT); // \"object\"\n*/\n\nvar OBJECT = \"object\";\n/**\n* get string \"string\"\n* @memberof Consts\n* @example\nimport {STRING} from \"@daybrush/utils\";\n\nconsole.log(STRING); // \"string\"\n*/\n\nvar STRING = \"string\";\n/**\n* Check the type that the value is object.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isObject} from \"@daybrush/utils\";\n\nconsole.log(isObject({})); // true\nconsole.log(isObject(undefined)); // false\nconsole.log(isObject(\"\")); // false\nconsole.log(isObject(null)); // false\n*/\n\nfunction isObject(value) {\n  return value && typeof value === OBJECT;\n}\n/**\n* Check the type that the value is isArray.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isArray} from \"@daybrush/utils\";\n\nconsole.log(isArray([])); // true\nconsole.log(isArray({})); // false\nconsole.log(isArray(undefined)); // false\nconsole.log(isArray(null)); // false\n*/\n\nfunction isArray(value) {\n  return Array.isArray(value);\n}\n/**\n* Check the type that the value is string.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isString} from \"@daybrush/utils\";\n\nconsole.log(isString(\"1234\")); // true\nconsole.log(isString(undefined)); // false\nconsole.log(isString(1)); // false\nconsole.log(isString(null)); // false\n*/\n\nfunction isString(value) {\n  return typeof value === STRING;\n}\n/**\n* Returns the index of the first element in the array that satisfies the provided testing function.\n* @function\n* @memberof CrossBrowser\n* @param - The array `findIndex` was called upon.\n* @param - A function to execute on each value in the array until the function returns true, indicating that the satisfying element was found.\n* @param - Returns defaultIndex if not found by the function.\n* @example\nimport { findIndex } from \"@daybrush/utils\";\n\nfindIndex([{a: 1}, {a: 2}, {a: 3}, {a: 4}], ({ a }) => a === 2); // 1\n*/\n\nfunction findIndex(arr, callback, defaultIndex) {\n  if (defaultIndex === void 0) {\n    defaultIndex = -1;\n  }\n\n  var length = arr.length;\n\n  for (var i = 0; i < length; ++i) {\n    if (callback(arr[i], i, arr)) {\n      return i;\n    }\n  }\n\n  return defaultIndex;\n}\n/**\n* Sets up a function that will be called whenever the specified event is delivered to the target\n* @memberof DOM\n* @param - event target\n* @param - A case-sensitive string representing the event type to listen for.\n* @param - The object which receives a notification (an object that implements the Event interface) when an event of the specified type occurs\n* @param - An options object that specifies characteristics about the event listener.\n* @example\nimport {addEvent} from \"@daybrush/utils\";\n\naddEvent(el, \"click\", e => {\n  console.log(e);\n});\n*/\n\nfunction addEvent(el, type, listener, options) {\n  el.addEventListener(type, listener, options);\n}\n/**\n* removes from the EventTarget an event listener previously registered with EventTarget.addEventListener()\n* @memberof DOM\n* @param - event target\n* @param - A case-sensitive string representing the event type to listen for.\n* @param - The EventListener function of the event handler to remove from the event target.\n* @param - An options object that specifies characteristics about the event listener.\n* @example\nimport {addEvent, removeEvent} from \"@daybrush/utils\";\nconst listener = e => {\n  console.log(e);\n};\naddEvent(el, \"click\", listener);\nremoveEvent(el, \"click\", listener);\n*/\n\nfunction removeEvent(el, type, listener, options) {\n  el.removeEventListener(type, listener, options);\n}\n\n/*\nCopyright (c) 2019 Daybrush\nname: @scena/event-emitter\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/gesture.git\nversion: 1.0.5\n*/\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n}\n\n/**\n * Implement EventEmitter on object or component.\n */\n\nvar EventEmitter =\n/*#__PURE__*/\nfunction () {\n  function EventEmitter() {\n    this._events = {};\n  }\n  /**\n   * Add a listener to the registered event.\n   * @param - Name of the event to be added\n   * @param - listener function of the event to be added\n   * @example\n   * import EventEmitter from \"@scena/event-emitter\";\n   * cosnt emitter = new EventEmitter();\n   *\n   * // Add listener in \"a\" event\n   * emitter.on(\"a\", () => {\n   * });\n   * // Add listeners\n   * emitter.on({\n   *  a: () => {},\n   *  b: () => {},\n   * });\n   */\n\n\n  var __proto = EventEmitter.prototype;\n\n  __proto.on = function (eventName, listener) {\n    if (isObject(eventName)) {\n      for (var name in eventName) {\n        this.on(name, eventName[name]);\n      }\n    } else {\n      this._addEvent(eventName, listener, {});\n    }\n\n    return this;\n  };\n  /**\n   * Remove listeners registered in the event target.\n   * @param - Name of the event to be removed\n   * @param - listener function of the event to be removed\n   * @example\n   * import EventEmitter from \"@scena/event-emitter\";\n   * cosnt emitter = new EventEmitter();\n   *\n   * // Remove all listeners.\n   * emitter.off();\n   *\n   * // Remove all listeners in \"A\" event.\n   * emitter.off(\"a\");\n   *\n   *\n   * // Remove \"listener\" listener in \"a\" event.\n   * emitter.off(\"a\", listener);\n   */\n\n\n  __proto.off = function (eventName, listener) {\n    if (!eventName) {\n      this._events = {};\n    } else if (isObject(eventName)) {\n      for (var name in eventName) {\n        this.off(name);\n      }\n    } else if (!listener) {\n      this._events[eventName] = [];\n    } else {\n      var events = this._events[eventName];\n\n      if (events) {\n        var index = findIndex(events, function (e) {\n          return e.listener === listener;\n        });\n\n        if (index > -1) {\n          events.splice(index, 1);\n        }\n      }\n    }\n\n    return this;\n  };\n  /**\n   * Add a disposable listener and Use promise to the registered event.\n   * @param - Name of the event to be added\n   * @param - disposable listener function of the event to be added\n   * @example\n   * import EventEmitter from \"@scena/event-emitter\";\n   * cosnt emitter = new EventEmitter();\n   *\n   * // Add a disposable listener in \"a\" event\n   * emitter.once(\"a\", () => {\n   * });\n   *\n   * // Use Promise\n   * emitter.once(\"a\").then(e => {\n   * });\n   */\n\n\n  __proto.once = function (eventName, listener) {\n    var _this = this;\n\n    if (listener) {\n      this._addEvent(eventName, listener, {\n        once: true\n      });\n    }\n\n    return new Promise(function (resolve) {\n      _this._addEvent(eventName, resolve, {\n        once: true\n      });\n    });\n  };\n  /**\n   * Fires an event to call listeners.\n   * @param - Event name\n   * @param - Event parameter\n   * @return If false, stop the event.\n   * @example\n   *\n   * import EventEmitter from \"@scena/event-emitter\";\n   *\n   *\n   * const emitter = new EventEmitter();\n   *\n   * emitter.on(\"a\", e => {\n   * });\n   *\n   *\n   * emitter.emit(\"a\", {\n   *   a: 1,\n   * });\n   */\n\n\n  __proto.emit = function (eventName, param) {\n    var _this = this;\n\n    if (param === void 0) {\n      param = {};\n    }\n\n    var events = this._events[eventName];\n\n    if (!eventName || !events) {\n      return true;\n    }\n\n    var isStop = false;\n    param.eventType = eventName;\n\n    param.stop = function () {\n      isStop = true;\n    };\n\n    param.currentTarget = this;\n\n    __spreadArrays(events).forEach(function (info) {\n      info.listener(param);\n\n      if (info.once) {\n        _this.off(eventName, info.listener);\n      }\n    });\n\n    return !isStop;\n  };\n  /**\n   * Fires an event to call listeners.\n   * @param - Event name\n   * @param - Event parameter\n   * @return If false, stop the event.\n   * @example\n   *\n   * import EventEmitter from \"@scena/event-emitter\";\n   *\n   *\n   * const emitter = new EventEmitter();\n   *\n   * emitter.on(\"a\", e => {\n   * });\n   *\n   *\n   * emitter.emit(\"a\", {\n   *   a: 1,\n   * });\n   */\n\n  /**\n  * Fires an event to call listeners.\n  * @param - Event name\n  * @param - Event parameter\n  * @return If false, stop the event.\n  * @example\n  *\n  * import EventEmitter from \"@scena/event-emitter\";\n  *\n  *\n  * const emitter = new EventEmitter();\n  *\n  * emitter.on(\"a\", e => {\n  * });\n  *\n  * // emit\n  * emitter.trigger(\"a\", {\n  *   a: 1,\n  * });\n  */\n\n\n  __proto.trigger = function (eventName, param) {\n    if (param === void 0) {\n      param = {};\n    }\n\n    return this.emit(eventName, param);\n  };\n\n  __proto._addEvent = function (eventName, listener, options) {\n    var events = this._events;\n    events[eventName] = events[eventName] || [];\n    var listeners = events[eventName];\n    listeners.push(__assign({\n      listener: listener\n    }, options));\n  };\n\n  return EventEmitter;\n}();\n\nfunction createCommonjsModule(fn, module) {\n  return module = {\n    exports: {}\n  }, fn(module, module.exports), module.exports;\n}\n\nvar keycode = createCommonjsModule(function (module, exports) {\n// Source: http://jsfiddle.net/vWx8V/\n// http://stackoverflow.com/questions/5603195/full-list-of-javascript-keycodes\n\n/**\n * Conenience method returns corresponding value for given keyName or keyCode.\n *\n * @param {Mixed} keyCode {Number} or keyName {String}\n * @return {Mixed}\n * @api public\n */\n\nfunction keyCode(searchInput) {\n  // Keyboard Events\n  if (searchInput && 'object' === typeof searchInput) {\n    var hasKeyCode = searchInput.which || searchInput.keyCode || searchInput.charCode;\n    if (hasKeyCode) searchInput = hasKeyCode;\n  }\n\n  // Numbers\n  if ('number' === typeof searchInput) return names[searchInput]\n\n  // Everything else (cast to string)\n  var search = String(searchInput);\n\n  // check codes\n  var foundNamedKey = codes[search.toLowerCase()];\n  if (foundNamedKey) return foundNamedKey\n\n  // check aliases\n  var foundNamedKey = aliases[search.toLowerCase()];\n  if (foundNamedKey) return foundNamedKey\n\n  // weird character?\n  if (search.length === 1) return search.charCodeAt(0)\n\n  return undefined\n}\n\n/**\n * Compares a keyboard event with a given keyCode or keyName.\n *\n * @param {Event} event Keyboard event that should be tested\n * @param {Mixed} keyCode {Number} or keyName {String}\n * @return {Boolean}\n * @api public\n */\nkeyCode.isEventKey = function isEventKey(event, nameOrCode) {\n  if (event && 'object' === typeof event) {\n    var keyCode = event.which || event.keyCode || event.charCode;\n    if (keyCode === null || keyCode === undefined) { return false; }\n    if (typeof nameOrCode === 'string') {\n      // check codes\n      var foundNamedKey = codes[nameOrCode.toLowerCase()];\n      if (foundNamedKey) { return foundNamedKey === keyCode; }\n    \n      // check aliases\n      var foundNamedKey = aliases[nameOrCode.toLowerCase()];\n      if (foundNamedKey) { return foundNamedKey === keyCode; }\n    } else if (typeof nameOrCode === 'number') {\n      return nameOrCode === keyCode;\n    }\n    return false;\n  }\n};\n\nexports = module.exports = keyCode;\n\n/**\n * Get by name\n *\n *   exports.code['enter'] // => 13\n */\n\nvar codes = exports.code = exports.codes = {\n  'backspace': 8,\n  'tab': 9,\n  'enter': 13,\n  'shift': 16,\n  'ctrl': 17,\n  'alt': 18,\n  'pause/break': 19,\n  'caps lock': 20,\n  'esc': 27,\n  'space': 32,\n  'page up': 33,\n  'page down': 34,\n  'end': 35,\n  'home': 36,\n  'left': 37,\n  'up': 38,\n  'right': 39,\n  'down': 40,\n  'insert': 45,\n  'delete': 46,\n  'command': 91,\n  'left command': 91,\n  'right command': 93,\n  'numpad *': 106,\n  'numpad +': 107,\n  'numpad -': 109,\n  'numpad .': 110,\n  'numpad /': 111,\n  'num lock': 144,\n  'scroll lock': 145,\n  'my computer': 182,\n  'my calculator': 183,\n  ';': 186,\n  '=': 187,\n  ',': 188,\n  '-': 189,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '[': 219,\n  '\\\\': 220,\n  ']': 221,\n  \"'\": 222\n};\n\n// Helper aliases\n\nvar aliases = exports.aliases = {\n  'windows': 91,\n  '⇧': 16,\n  '⌥': 18,\n  '⌃': 17,\n  '⌘': 91,\n  'ctl': 17,\n  'control': 17,\n  'option': 18,\n  'pause': 19,\n  'break': 19,\n  'caps': 20,\n  'return': 13,\n  'escape': 27,\n  'spc': 32,\n  'spacebar': 32,\n  'pgup': 33,\n  'pgdn': 34,\n  'ins': 45,\n  'del': 46,\n  'cmd': 91\n};\n\n/*!\n * Programatically add the following\n */\n\n// lower case chars\nfor (i = 97; i < 123; i++) codes[String.fromCharCode(i)] = i - 32;\n\n// numbers\nfor (var i = 48; i < 58; i++) codes[i - 48] = i;\n\n// function keys\nfor (i = 1; i < 13; i++) codes['f'+i] = i + 111;\n\n// numpad keys\nfor (i = 0; i < 10; i++) codes['numpad '+i] = i + 96;\n\n/**\n * Get by code\n *\n *   exports.name[13] // => 'Enter'\n */\n\nvar names = exports.names = exports.title = {}; // title for backward compat\n\n// Create reverse mapping\nfor (i in codes) names[codes[i]] = i;\n\n// Add aliases\nfor (var alias in aliases) {\n  codes[alias] = aliases[alias];\n}\n});\nvar keycode_1 = keycode.code;\nvar keycode_2 = keycode.codes;\nvar keycode_3 = keycode.aliases;\nvar keycode_4 = keycode.names;\nvar keycode_5 = keycode.title;\n\nvar codeData = {\n  \"+\": \"plus\",\n  \"left command\": \"meta\",\n  \"right command\": \"meta\"\n};\nvar keysSort = {\n  shift: 1,\n  ctrl: 2,\n  alt: 3,\n  meta: 4\n};\n/**\n * @memberof KeyController\n */\n\nfunction getKey(keyCode, keyName) {\n  var key = (keycode_4[keyCode] || keyName || \"\").toLowerCase();\n\n  for (var name in codeData) {\n    key = key.replace(name, codeData[name]);\n  }\n\n  return key.replace(/\\s/g, \"\");\n}\n/**\n * @memberof KeyController\n */\n\nfunction getCombi(e, key) {\n  if (key === void 0) {\n    key = getKey(e.keyCode, e.key);\n  }\n\n  var keys = getModifierCombi(e);\n  keys.indexOf(key) === -1 && keys.push(key);\n  return keys.filter(Boolean);\n}\n/**\n * @memberof KeyController\n */\n\nfunction getModifierCombi(e) {\n  var keys = [e.shiftKey && \"shift\", e.ctrlKey && \"ctrl\", e.altKey && \"alt\", e.metaKey && \"meta\"];\n  return keys.filter(Boolean);\n}\n\nfunction getArrangeCombi(keys) {\n  var arrangeKeys = keys.slice();\n  arrangeKeys.sort(function (prev, next) {\n    var prevScore = keysSort[prev] || 5;\n    var nextScore = keysSort[next] || 5;\n    return prevScore - nextScore;\n  });\n  return arrangeKeys;\n}\n\nvar globalKeyController;\n/**\n */\n\nvar KeyController =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(KeyController, _super);\n  /**\n   *\n   */\n\n\n  function KeyController(container) {\n    if (container === void 0) {\n      container = window;\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.container = container;\n    /**\n     */\n\n    _this.ctrlKey = false;\n    /**\n     */\n\n    _this.altKey = false;\n    /**\n     *\n     */\n\n    _this.shiftKey = false;\n    /**\n     *\n     */\n\n    _this.metaKey = false;\n\n    _this.clear = function () {\n      _this.ctrlKey = false;\n      _this.altKey = false;\n      _this.shiftKey = false;\n      _this.metaKey = false;\n      return _this;\n    };\n\n    _this.keydownEvent = function (e) {\n      _this.triggerEvent(\"keydown\", e);\n    };\n\n    _this.keyupEvent = function (e) {\n      _this.triggerEvent(\"keyup\", e);\n    };\n\n    _this.blur = function () {\n      _this.clear();\n\n      _this.trigger(\"blur\");\n    };\n\n    addEvent(container, \"blur\", _this.blur);\n    addEvent(container, \"keydown\", _this.keydownEvent);\n    addEvent(container, \"keyup\", _this.keyupEvent);\n    return _this;\n  }\n\n  var __proto = KeyController.prototype;\n  Object.defineProperty(KeyController, \"global\", {\n    /**\n     */\n    get: function () {\n      return globalKeyController || (globalKeyController = new KeyController());\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  KeyController.setGlobal = function () {\n    return this.global;\n  };\n  /**\n   *\n   */\n\n\n  __proto.destroy = function () {\n    var container = this.container;\n    this.clear();\n    this.off();\n    removeEvent(container, \"blur\", this.blur);\n    removeEvent(container, \"keydown\", this.keydownEvent);\n    removeEvent(container, \"keyup\", this.keyupEvent);\n  };\n  /**\n   *\n   */\n\n\n  __proto.keydown = function (comb, callback) {\n    return this.addEvent(\"keydown\", comb, callback);\n  };\n  /**\n   *\n   */\n\n\n  __proto.offKeydown = function (comb, callback) {\n    return this.removeEvent(\"keydown\", comb, callback);\n  };\n  /**\n   *\n   */\n\n\n  __proto.offKeyup = function (comb, callback) {\n    return this.removeEvent(\"keyup\", comb, callback);\n  };\n  /**\n   *\n   */\n\n\n  __proto.keyup = function (comb, callback) {\n    return this.addEvent(\"keyup\", comb, callback);\n  };\n\n  __proto.addEvent = function (type, comb, callback) {\n    if (isArray(comb)) {\n      this.on(type + \".\" + getArrangeCombi(comb).join(\".\"), callback);\n    } else if (isString(comb)) {\n      this.on(type + \".\" + comb, callback);\n    } else {\n      this.on(type, comb);\n    }\n\n    return this;\n  };\n\n  __proto.removeEvent = function (type, comb, callback) {\n    if (isArray(comb)) {\n      this.off(type + \".\" + getArrangeCombi(comb).join(\".\"), callback);\n    } else if (isString(comb)) {\n      this.off(type + \".\" + comb, callback);\n    } else {\n      this.off(type, comb);\n    }\n\n    return this;\n  };\n\n  __proto.triggerEvent = function (type, e) {\n    this.ctrlKey = e.ctrlKey;\n    this.shiftKey = e.shiftKey;\n    this.altKey = e.altKey;\n    this.metaKey = e.metaKey;\n    var key = getKey(e.keyCode, e.key);\n    var isToggle = key === \"ctrl\" || key === \"shift\" || key === \"meta\" || key === \"alt\";\n    var param = {\n      key: key,\n      isToggle: isToggle,\n      inputEvent: e,\n      keyCode: e.keyCode,\n      ctrlKey: e.ctrlKey,\n      altKey: e.altKey,\n      shiftKey: e.shiftKey,\n      metaKey: e.metaKey\n    };\n    this.trigger(type, param);\n    this.trigger(type + \".\" + key, param);\n    var combi = getCombi(e, key);\n    combi.length > 1 && this.trigger(type + \".\" + combi.join(\".\"), param);\n  };\n\n  return KeyController;\n}(EventEmitter);\n\nexport default KeyController;\nexport { getCombi, getKey, getModifierCombi };\n//# sourceMappingURL=keycon.esm.js.map\n","/*\nCopyright (c) 2020 Daybrush\nname: selecto\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/selecto.git\nversion: 1.26.0\n*/\nimport EventEmitter from '@scena/event-emitter';\nimport Gesto from 'gesto';\nimport { Properties } from 'framework-utils';\nimport { getDocument, hasClass, addClass, calculateBoundSize, getDist, getWindow, isObject, isString, isNode, removeEvent, isFunction, addEvent, isArray, camelize, splitUnit, between } from '@daybrush/utils';\nimport { diff } from '@egjs/children-differ';\nimport DragScroll from '@scena/dragscroll';\nimport KeyController, { getCombi } from 'keycon';\nimport { fitPoints, getOverlapPoints, isInside, getAreaSize } from 'overlap-area';\nimport { createMatrix, getDistElementMatrix, calculateMatrixDist } from 'css-to-mat';\nimport styled from 'css-styled';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\nfunction __decorate(decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\nfunction __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nfunction getClient(e) {\n  if (\"touches\" in e) {\n    var touch = e.touches[0] || e.changedTouches[0];\n    return {\n      clientX: touch.clientX,\n      clientY: touch.clientY\n    };\n  } else {\n    return {\n      clientX: e.clientX,\n      clientY: e.clientY\n    };\n  }\n}\nfunction filterDuplicated(arr) {\n  if (typeof Map === \"undefined\") {\n    return arr.filter(function (value, index) {\n      return arr.indexOf(value) === index;\n    });\n  }\n\n  var map = new Map();\n  return arr.filter(function (value) {\n    if (map.has(value)) {\n      return false;\n    }\n\n    map.set(value, true);\n    return true;\n  });\n}\nfunction elementFromPoint(baseNode, clientX, clientY) {\n  var doc = getDocument(baseNode);\n  return doc.elementFromPoint && doc.elementFromPoint(clientX, clientY) || null;\n}\nfunction createElement(jsx, prevTarget, container) {\n  var tag = jsx.tag,\n      children = jsx.children,\n      attributes = jsx.attributes,\n      className = jsx.className,\n      style = jsx.style;\n  var el = prevTarget || getDocument(container).createElement(tag);\n\n  for (var name in attributes) {\n    el.setAttribute(name, attributes[name]);\n  }\n\n  var elChildren = el.children;\n  children.forEach(function (child, i) {\n    createElement(child, elChildren[i], el);\n  });\n\n  if (className) {\n    className.split(/\\s+/g).forEach(function (name) {\n      if (name && !hasClass(el, name)) {\n        addClass(el, name);\n      }\n    });\n  }\n\n  if (style) {\n    var elStyle = el.style;\n\n    for (var name in style) {\n      elStyle[name] = style[name];\n    }\n  }\n\n  if (!prevTarget && container) {\n    container.appendChild(el);\n  }\n\n  return el;\n}\nfunction h(tag, attrs) {\n  var children = [];\n\n  for (var _i = 2; _i < arguments.length; _i++) {\n    children[_i - 2] = arguments[_i];\n  }\n\n  var _a = attrs || {},\n      _b = _a.className,\n      className = _b === void 0 ? \"\" : _b,\n      _c = _a.style,\n      style = _c === void 0 ? {} : _c,\n      attributes = __rest(_a, [\"className\", \"style\"]);\n\n  return {\n    tag: tag,\n    className: className,\n    style: style,\n    attributes: attributes,\n    children: children\n  };\n}\nfunction diffValue(prev, cur, func) {\n  if (prev !== cur) {\n    func(prev, cur);\n  }\n}\nfunction getRect(e, ratio, boundArea) {\n  var _a;\n\n  if (boundArea === void 0) {\n    boundArea = e.data.boundArea;\n  }\n\n  var _b = e.distX,\n      distX = _b === void 0 ? 0 : _b,\n      _c = e.distY,\n      distY = _c === void 0 ? 0 : _c;\n  var _d = e.data,\n      startX = _d.startX,\n      startY = _d.startY;\n\n  if (ratio > 0) {\n    var nextHeight = Math.sqrt((distX * distX + distY * distY) / (1 + ratio * ratio));\n    var nextWidth = ratio * nextHeight;\n    distX = (distX >= 0 ? 1 : -1) * nextWidth;\n    distY = (distY >= 0 ? 1 : -1) * nextHeight;\n  }\n\n  var width = Math.abs(distX);\n  var height = Math.abs(distY);\n  var maxWidth = distX < 0 ? startX - boundArea.left : boundArea.right - startX;\n  var maxHeight = distY < 0 ? startY - boundArea.top : boundArea.bottom - startY;\n  _a = calculateBoundSize([width, height], [0, 0], [maxWidth, maxHeight], !!ratio), width = _a[0], height = _a[1];\n  distX = (distX >= 0 ? 1 : -1) * width;\n  distY = (distY >= 0 ? 1 : -1) * height;\n  var tx = Math.min(0, distX);\n  var ty = Math.min(0, distY);\n  var left = startX + tx;\n  var top = startY + ty;\n  return {\n    left: left,\n    top: top,\n    right: left + width,\n    bottom: top + height,\n    width: width,\n    height: height\n  };\n}\nfunction getDefaultElementRect(el) {\n  var rect = el.getBoundingClientRect();\n  var left = rect.left,\n      top = rect.top,\n      width = rect.width,\n      height = rect.height;\n  return {\n    pos1: [left, top],\n    pos2: [left + width, top],\n    pos3: [left, top + height],\n    pos4: [left + width, top + height]\n  };\n}\nfunction passTargets(beforeTargets, afterTargets, continueSelectWithoutDeselect) {\n  var _a = diff(beforeTargets, afterTargets),\n      list = _a.list,\n      prevList = _a.prevList,\n      added = _a.added,\n      removed = _a.removed,\n      maintained = _a.maintained;\n\n  return __spreadArray(__spreadArray(__spreadArray([], added.map(function (index) {\n    return list[index];\n  }), true), removed.map(function (index) {\n    return prevList[index];\n  }), true), continueSelectWithoutDeselect ? maintained.map(function (_a) {\n    var nextIndex = _a[1];\n    return list[nextIndex];\n  }) : [], true);\n}\nfunction getLineSize(points) {\n  var size = 0;\n  var length = points.length;\n\n  for (var i = 1; i < length; ++i) {\n    size = Math.max(getDist(points[i], points[i - 1]), size);\n  }\n\n  return size;\n}\n\nvar injector = styled(\"\\n:host {\\n    position: fixed;\\n    display: none;\\n    border: 1px solid #4af;\\n    background: rgba(68, 170, 255, 0.5);\\n    pointer-events: none;\\n    will-change: transform;\\n    z-index: 100;\\n}\\n\");\n/**\n * @memberof Selecto\n */\n\nvar CLASS_NAME = \"selecto-selection \".concat(injector.className);\nvar PROPERTIES = [\"className\", \"boundContainer\", \"selectableTargets\", \"selectByClick\", \"selectFromInside\", \"continueSelect\", \"continueSelectWithoutDeselect\", \"toggleContinueSelect\", \"toggleContinueSelectWithoutDeselect\", \"keyContainer\", \"hitRate\", \"scrollOptions\", \"checkInput\", \"preventDefault\", \"ratio\", \"getElementRect\", \"preventDragFromInside\", \"rootContainer\", \"dragCondition\", \"clickBySelectEnd\", \"checkOverflow\", \"innerScrollOptions\"];\n/**\n * @memberof Selecto\n */\n\nvar OPTIONS = __spreadArray([// ignore target, container,\n\"dragContainer\", \"cspNonce\", \"preventClickEventOnDrag\", \"preventClickEventOnDragStart\", \"preventRightClick\"], PROPERTIES, true);\nvar OPTION_TYPES = {\n  className: String,\n  boundContainer: null,\n  portalContainer: null,\n  container: null,\n  dragContainer: null,\n  selectableTargets: Array,\n  selectByClick: Boolean,\n  selectFromInside: Boolean,\n  continueSelect: Boolean,\n  toggleContinueSelect: Array,\n  toggleContinueSelectWithoutDeselect: Array,\n  keyContainer: null,\n  hitRate: Number,\n  scrollOptions: Object,\n  checkInput: Boolean,\n  preventDefault: Boolean,\n  cspNonce: String,\n  ratio: Number,\n  getElementRect: Function,\n  preventDragFromInside: Boolean,\n  rootContainer: Object,\n  dragCondition: Function,\n  clickBySelectEnd: Boolean,\n  continueSelectWithoutDeselect: Boolean,\n  preventClickEventOnDragStart: Boolean,\n  preventClickEventOnDrag: Boolean,\n  checkOverflow: Boolean,\n  innerScrollOptions: Object\n};\n/**\n * @memberof Selecto\n */\n\nvar EVENTS = [\"dragStart\", \"drag\", \"dragEnd\", \"selectStart\", \"select\", \"selectEnd\", \"keydown\", \"keyup\", \"scroll\", \"innerScroll\"];\n/**\n * @memberof Selecto\n */\n\nvar METHODS = [\"clickTarget\", \"getSelectableElements\", \"setSelectedTargets\", \"getElementPoints\", \"getSelectedTargets\", \"findSelectableTargets\", \"triggerDragStart\", \"checkScroll\", \"selectTargetsByPoints\", \"setSelectedTargetsByPoints\"];\n\n/**\n * Selecto.js is a component that allows you to select elements in the drag area using the mouse or touch.\n * @sort 1\n * @extends EventEmitter\n */\n\nvar Selecto =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(Selecto, _super);\n  /**\n   *\n   */\n\n\n  function Selecto(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.selectedTargets = [];\n    _this.dragScroll = new DragScroll();\n\n    _this._onDragStart = function (e, clickedTarget) {\n      var data = e.data,\n          clientX = e.clientX,\n          clientY = e.clientY,\n          inputEvent = e.inputEvent;\n      var _a = _this.options,\n          selectFromInside = _a.selectFromInside,\n          selectByClick = _a.selectByClick,\n          rootContainer = _a.rootContainer,\n          boundContainer = _a.boundContainer,\n          _b = _a.preventDragFromInside,\n          preventDragFromInside = _b === void 0 ? true : _b,\n          clickBySelectEnd = _a.clickBySelectEnd,\n          dragCondition = _a.dragCondition;\n\n      if (dragCondition && !dragCondition(e)) {\n        e.stop();\n        return;\n      }\n\n      data.data = {};\n      var win = getWindow(_this.container);\n      data.innerWidth = win.innerWidth;\n      data.innerHeight = win.innerHeight;\n\n      _this.findSelectableTargets(data);\n\n      data.startSelectedTargets = _this.selectedTargets;\n      data.scaleMatrix = createMatrix();\n      data.containerX = 0;\n      data.containerY = 0;\n      var container = _this.container;\n      var boundArea = {\n        left: -Infinity,\n        top: -Infinity,\n        right: Infinity,\n        bottom: Infinity\n      };\n\n      if (rootContainer) {\n        var containerRect = _this.container.getBoundingClientRect();\n\n        data.containerX = containerRect.left;\n        data.containerY = containerRect.top;\n        data.scaleMatrix = getDistElementMatrix(_this.container, rootContainer);\n      }\n\n      if (boundContainer) {\n        var boundInfo = isObject(boundContainer) && \"element\" in boundContainer ? __assign({\n          left: true,\n          top: true,\n          bottom: true,\n          right: true\n        }, boundContainer) : {\n          element: boundContainer,\n          left: true,\n          top: true,\n          bottom: true,\n          right: true\n        };\n        var boundElement = boundInfo.element;\n        var rectElement = void 0;\n\n        if (boundElement) {\n          if (isString(boundElement)) {\n            rectElement = getDocument(container).querySelector(boundElement);\n          } else if (boundElement === true) {\n            rectElement = _this.container;\n          } else {\n            rectElement = boundElement;\n          }\n\n          var rect = rectElement.getBoundingClientRect();\n\n          if (boundInfo.left) {\n            boundArea.left = rect.left;\n          }\n\n          if (boundInfo.top) {\n            boundArea.top = rect.top;\n          }\n\n          if (boundInfo.right) {\n            boundArea.right = rect.right;\n          }\n\n          if (boundInfo.bottom) {\n            boundArea.bottom = rect.bottom;\n          }\n        }\n      }\n\n      data.boundArea = boundArea;\n      var hitRect = {\n        left: clientX,\n        top: clientY,\n        right: clientX,\n        bottom: clientY,\n        width: 0,\n        height: 0\n      };\n      var firstPassedTargets = [];\n\n      if (!selectFromInside || selectByClick && !clickBySelectEnd) {\n        var pointTarget = _this._findElement(clickedTarget || inputEvent.target, // elementFromPoint(clientX, clientY),\n        data.selectableTargets);\n\n        firstPassedTargets = pointTarget ? [pointTarget] : [];\n      }\n\n      var hasInsideTargets = firstPassedTargets.length > 0;\n      var isPreventSelect = !selectFromInside && hasInsideTargets; // prevent drag from inside when selectByClick is false\n\n      if (isPreventSelect && !selectByClick) {\n        e.stop();\n        return false;\n      }\n\n      var type = inputEvent.type;\n      var isTrusted = type === \"mousedown\" || type === \"touchstart\";\n      /**\n       * When the drag starts (triggers on mousedown or touchstart), the dragStart event is called.\n       * Call the stop () function if you have a specific element or don't want to raise a select\n       * @memberof Selecto\n       * @event dragStart\n       * @param {OnDragStart} - Parameters for the dragStart event\n       * @example\n       * import Selecto from \"selecto\";\n       *\n       * const selecto = new Selecto({\n       *   container: document.body,\n       *   selectByClick: true,\n       *   selectFromInside: false,\n       * });\n       *\n       * selecto.on(\"dragStart\", e => {\n       *   if (e.inputEvent.target.tagName === \"SPAN\") {\n       *     e.stop();\n       *   }\n       * }).on(\"select\", e => {\n       *   e.added.forEach(el => {\n       *     el.classList.add(\"selected\");\n       *   });\n       *   e.removed.forEach(el => {\n       *     el.classList.remove(\"selected\");\n       *   });\n       * });\n       */\n\n      var result = !e.isClick && isTrusted ? _this.emit(\"dragStart\", __assign(__assign({}, e), {\n        data: data.data\n      })) : true;\n\n      if (!result) {\n        e.stop();\n        return false;\n      }\n\n      if (_this.continueSelect) {\n        firstPassedTargets = passTargets(_this.selectedTargets, firstPassedTargets, _this.continueSelectWithoutDeselect);\n        data.startPassedTargets = _this.selectedTargets;\n      } else {\n        data.startPassedTargets = [];\n      }\n\n      _this._select(firstPassedTargets, hitRect, e, true, isPreventSelect && selectByClick && !clickBySelectEnd && preventDragFromInside);\n\n      data.startX = clientX;\n      data.startY = clientY;\n      data.selectFlag = false;\n      data.preventDragFromInside = false;\n\n      if (inputEvent.target) {\n        var offsetPos = calculateMatrixDist(data.scaleMatrix, [clientX - data.containerX, clientY - data.containerY]);\n        _this.target.style.cssText += \"position: \".concat(rootContainer ? \"absolute\" : \"fixed\", \";\") + \"left:0px;top:0px;\" + \"transform: translate(\".concat(offsetPos[0], \"px, \").concat(offsetPos[1], \"px)\");\n      }\n\n      if (isPreventSelect && selectByClick && !clickBySelectEnd) {\n        inputEvent.preventDefault(); // prevent drag from inside when selectByClick is true and force call `selectEnd`\n\n        if (preventDragFromInside) {\n          _this._selectEnd(data.startSelectedTargets, data.startPassedTargets, hitRect, e, true);\n\n          data.preventDragFromInside = true;\n        }\n      } else {\n        data.selectFlag = true; // why?\n        // if (type === \"touchstart\") {\n        //     inputEvent.preventDefault();\n        // }\n\n        var _c = _this.options,\n            scrollOptions = _c.scrollOptions,\n            innerScrollOptions = _c.innerScrollOptions;\n        var isInnerScroll = false;\n\n        if (innerScrollOptions) {\n          var inputEvent_1 = e.inputEvent;\n          var target = inputEvent_1.target;\n          var innerScrollElement = null;\n          var parentElement = target;\n\n          while (parentElement && parentElement !== getDocument(container).body) {\n            var overflow = getComputedStyle(parentElement).overflow !== \"visible\";\n\n            if (overflow) {\n              innerScrollElement = parentElement;\n              break;\n            }\n\n            parentElement = parentElement.parentElement;\n          }\n\n          if (innerScrollElement) {\n            data.innerScrollOptions = __assign({\n              container: innerScrollElement,\n              checkScrollEvent: true\n            }, innerScrollOptions === true ? {} : innerScrollOptions);\n\n            _this.dragScroll.dragStart(e, data.innerScrollOptions);\n\n            isInnerScroll = true;\n          }\n        }\n\n        if (!isInnerScroll && scrollOptions && scrollOptions.container) {\n          _this.dragScroll.dragStart(e, scrollOptions);\n        }\n\n        if (clickBySelectEnd) {\n          data.selectFlag = false;\n          e.preventDrag();\n        }\n      }\n\n      return true;\n    };\n\n    _this._onDrag = function (e) {\n      if (e.data.selectFlag) {\n        var scrollOptions = _this.scrollOptions;\n        var innerScrollOptions = e.data.innerScrollOptions;\n        var hasScrollOptions = innerScrollOptions || (scrollOptions === null || scrollOptions === void 0 ? void 0 : scrollOptions.container); // If it is a scrolling position, pass drag\n\n        if (hasScrollOptions && !e.isScroll && _this.dragScroll.drag(e, innerScrollOptions || scrollOptions)) {\n          return;\n        }\n      }\n\n      _this._checkSelected(e);\n    };\n\n    _this._onDragEnd = function (e) {\n      var data = e.data,\n          inputEvent = e.inputEvent;\n      var rect = getRect(e, _this.options.ratio);\n      var selectFlag = data.selectFlag;\n      var container = _this.container;\n      /**\n       * When the drag ends (triggers on mouseup or touchend after drag), the dragEnd event is called.\n       * @memberof Selecto\n       * @event dragEnd\n       * @param {OnDragEnd} - Parameters for the dragEnd event\n       */\n\n      if (inputEvent) {\n        _this.emit(\"dragEnd\", __assign(__assign({\n          isDouble: !!e.isDouble,\n          isClick: !!e.isClick,\n          isDrag: false,\n          isSelect: selectFlag\n        }, e), {\n          data: data.data,\n          rect: rect\n        }));\n      }\n\n      _this.target.style.cssText += \"display: none;\";\n\n      if (selectFlag) {\n        data.selectFlag = false;\n\n        _this.dragScroll.dragEnd();\n      } else if (_this.selectByClick && _this.clickBySelectEnd) {\n        // only clickBySelectEnd\n        var pointTarget = _this._findElement((inputEvent === null || inputEvent === void 0 ? void 0 : inputEvent.target) || elementFromPoint(container, e.clientX, e.clientY), data.selectableTargets);\n\n        _this._select(pointTarget ? [pointTarget] : [], rect, e);\n      }\n\n      if (!data.preventDragFromInside) {\n        _this._selectEnd(data.startSelectedTargets, data.startPassedTargets, rect, e);\n      }\n    };\n\n    _this._onKeyDown = function (e) {\n      var options = _this.options;\n      var isKeyDown = false;\n\n      if (!_this._keydownContinueSelect) {\n        var result = _this._sameCombiKey(e, options.toggleContinueSelect);\n\n        _this._keydownContinueSelect = result;\n        isKeyDown || (isKeyDown = result);\n      }\n\n      if (!_this._keydownContinueSelectWithoutDeselection) {\n        var result = _this._sameCombiKey(e, options.toggleContinueSelectWithoutDeselect);\n\n        _this._keydownContinueSelectWithoutDeselection = result;\n        isKeyDown || (isKeyDown = result);\n      }\n\n      if (!isKeyDown) {\n        return;\n      }\n      /**\n       * When you keydown the key you specified in toggleContinueSelect, the keydown event is called.\n       * @memberof Selecto\n       * @event keydown\n       * @example\n       * import Selecto from \"selecto\";\n       *\n       * const selecto = new Selecto({\n       *   container: document.body,\n       *   toggleContinueSelect: \"shift\";\n       *   keyContainer: window,\n       * });\n       *\n       * selecto.on(\"keydown\", () => {\n       *   document.querySelector(\".button\").classList.add(\"selected\");\n       * }).on(\"keyup\", () => {\n       *   document.querySelector(\".button\").classList.remove(\"selected\");\n       * }).on(\"select\", e => {\n       *   e.added.forEach(el => {\n       *     el.classList.add(\"selected\");\n       *   });\n       *   e.removed.forEach(el => {\n       *     el.classList.remove(\"selected\");\n       *   });\n       * });\n       */\n\n\n      _this.emit(\"keydown\", {\n        keydownContinueSelect: _this._keydownContinueSelect,\n        keydownContinueSelectWithoutDeselection: _this._keydownContinueSelectWithoutDeselection\n      });\n    };\n\n    _this._onKeyUp = function (e) {\n      var options = _this.options;\n      var isKeyUp = false;\n\n      if (_this._keydownContinueSelect) {\n        var result = _this._sameCombiKey(e, options.toggleContinueSelect, true);\n\n        _this._keydownContinueSelect = !result;\n        isKeyUp || (isKeyUp = result);\n      }\n\n      if (_this._keydownContinueSelectWithoutDeselection) {\n        var result = _this._sameCombiKey(e, options.toggleContinueSelectWithoutDeselect, true);\n\n        _this._keydownContinueSelectWithoutDeselection = !result;\n        isKeyUp || (isKeyUp = result);\n      }\n\n      if (!isKeyUp) {\n        return;\n      }\n      /**\n       * When you keyup the key you specified in toggleContinueSelect, the keyup event is called.\n       * @memberof Selecto\n       * @event keyup\n       * @example\n       * import Selecto from \"selecto\";\n       *\n       * const selecto = new Selecto({\n       *   container: document.body,\n       *   toggleContinueSelect: \"shift\";\n       *   keyContainer: window,\n       * });\n       *\n       * selecto.on(\"keydown\", () => {\n       *   document.querySelector(\".button\").classList.add(\"selected\");\n       * }).on(\"keyup\", () => {\n       *   document.querySelector(\".button\").classList.remove(\"selected\");\n       * }).on(\"select\", e => {\n       *   e.added.forEach(el => {\n       *     el.classList.add(\"selected\");\n       *   });\n       *   e.removed.forEach(el => {\n       *     el.classList.remove(\"selected\");\n       *   });\n       * });\n       */\n\n\n      _this.emit(\"keyup\", {\n        keydownContinueSelect: _this._keydownContinueSelect,\n        keydownContinueSelectWithoutDeselection: _this._keydownContinueSelectWithoutDeselection\n      });\n    };\n\n    _this._onBlur = function () {\n      if (_this._keydownContinueSelect || _this._keydownContinueSelectWithoutDeselection) {\n        _this._keydownContinueSelect = false;\n        _this._keydownContinueSelectWithoutDeselection = false;\n\n        _this.emit(\"keyup\", {\n          keydownContinueSelect: _this._keydownContinueSelect,\n          keydownContinueSelectWithoutDeselection: _this._keydownContinueSelectWithoutDeselection\n        });\n      }\n    };\n\n    _this._onDocumentSelectStart = function (e) {\n      var doc = getDocument(_this.container);\n\n      if (!_this.gesto.isFlag()) {\n        return;\n      }\n\n      var dragContainer = _this.dragContainer;\n\n      if (dragContainer === getWindow(_this.container)) {\n        dragContainer = doc.documentElement;\n      }\n\n      var containers = isNode(dragContainer) ? [dragContainer] : [].slice.call(dragContainer);\n      var target = e.target;\n      containers.some(function (container) {\n        if (container === target || container.contains(target)) {\n          e.preventDefault();\n          return true;\n        }\n      });\n    };\n\n    _this.target = options.portalContainer;\n    var container = options.container;\n    _this.options = __assign({\n      className: \"\",\n      portalContainer: null,\n      container: null,\n      dragContainer: null,\n      selectableTargets: [],\n      selectByClick: true,\n      selectFromInside: true,\n      clickBySelectEnd: false,\n      hitRate: 100,\n      continueSelect: false,\n      continueSelectWithoutDeselect: false,\n      toggleContinueSelect: null,\n      toggleContinueSelectWithoutDeselect: null,\n      keyContainer: null,\n      scrollOptions: undefined,\n      checkInput: false,\n      preventDefault: false,\n      boundContainer: false,\n      preventDragFromInside: true,\n      dragCondition: null,\n      rootContainer: null,\n      checkOverflow: false,\n      innerScrollOptions: false,\n      getElementRect: getDefaultElementRect,\n      cspNonce: \"\",\n      ratio: 0\n    }, options);\n    var portalContainer = _this.options.portalContainer;\n\n    if (portalContainer) {\n      container = portalContainer.parentElement;\n    }\n\n    _this.container = container || document.body;\n\n    _this.initElement();\n\n    _this.initDragScroll();\n\n    _this.setKeyController();\n\n    return _this;\n  }\n  /**\n   * You can set the currently selected targets.\n   * selectByClick, continueSelect, and continueSelectWithoutDeselect are not applied.\n   */\n\n\n  var __proto = Selecto.prototype;\n\n  __proto.setSelectedTargets = function (selectedTargets) {\n    var beforeSelected = this.selectedTargets;\n\n    var _a = diff(beforeSelected, selectedTargets),\n        added = _a.added,\n        removed = _a.removed,\n        prevList = _a.prevList,\n        list = _a.list;\n\n    this.selectedTargets = selectedTargets;\n    return {\n      added: added.map(function (index) {\n        return list[index];\n      }),\n      removed: removed.map(function (index) {\n        return prevList[index];\n      }),\n      beforeSelected: beforeSelected,\n      selected: selectedTargets\n    };\n  };\n  /**\n   * You can set the currently selected targets by points\n   * selectByClick, continueSelect, and continueSelectWithoutDeselect are not applied.\n   */\n\n\n  __proto.setSelectedTargetsByPoints = function (point1, point2) {\n    var left = Math.min(point1[0], point2[0]);\n    var top = Math.min(point1[1], point2[1]);\n    var right = Math.max(point1[0], point2[0]);\n    var bottom = Math.max(point1[1], point2[1]);\n    var rect = {\n      left: left,\n      top: top,\n      right: right,\n      bottom: bottom,\n      width: right - left,\n      height: bottom - top\n    };\n    var data = {\n      ignoreClick: true\n    };\n    this.findSelectableTargets(data);\n    var selectedElements = this.hitTest(rect, data);\n    var result = this.setSelectedTargets(selectedElements);\n    return __assign(__assign({}, result), {\n      rect: rect\n    });\n  };\n  /**\n   * Select target by virtual drag from startPoint to endPoint.\n   * The target of inputEvent is null.\n   */\n\n\n  __proto.selectTargetsByPoints = function (startPoint, endPoint) {\n    var mousedown = new MouseEvent(\"mousedown\", {\n      clientX: startPoint[0],\n      clientY: startPoint[1],\n      cancelable: true,\n      bubbles: true\n    });\n    var mousemove = new MouseEvent(\"mousemove\", {\n      clientX: endPoint[0],\n      clientY: endPoint[1],\n      cancelable: true,\n      bubbles: true\n    });\n    var mouseup = new MouseEvent(\"mousemove\", {\n      clientX: endPoint[0],\n      clientY: endPoint[1],\n      cancelable: true,\n      bubbles: true\n    });\n    var gesto = this.gesto;\n    var result = gesto.onDragStart(mousedown);\n\n    if (result !== false) {\n      gesto.onDrag(mousemove);\n      gesto.onDragEnd(mouseup);\n    }\n  };\n  /**\n   * You can get the currently selected targets.\n   */\n\n\n  __proto.getSelectedTargets = function () {\n    return this.selectedTargets;\n  };\n  /**\n   * `OnDragStart` is triggered by an external event.\n   * @param - external event\n   * @example\n   * import Selecto from \"selecto\";\n   *\n   * const selecto = new Selecto();\n   *\n   * window.addEventListener(\"mousedown\", e => {\n   *   selecto.triggerDragStart(e);\n   * });\n   */\n\n\n  __proto.triggerDragStart = function (e) {\n    this.gesto.triggerDragStart(e);\n    return this;\n  };\n  /**\n   * Destroy elements, properties, and events.\n   */\n\n\n  __proto.destroy = function () {\n    var _a;\n\n    this.off();\n    this.keycon && this.keycon.destroy();\n    this.gesto.unset();\n    this.injectResult.destroy();\n    this.dragScroll.dragEnd();\n    removeEvent(document, \"selectstart\", this._onDocumentSelectStart);\n\n    if (!this.options.portalContainer) {\n      (_a = this.target.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(this.target);\n    }\n\n    this.keycon = null;\n    this.gesto = null;\n    this.injectResult = null;\n    this.target = null;\n    this.container = null;\n    this.options = null;\n  };\n\n  __proto.getElementPoints = function (target) {\n    var getElementRect = this.getElementRect || getDefaultElementRect;\n    var info = getElementRect(target);\n    var points = [info.pos1, info.pos2, info.pos4, info.pos3];\n\n    if (getElementRect !== getDefaultElementRect) {\n      var rect = target.getBoundingClientRect();\n      return fitPoints(points, rect);\n    }\n\n    return points;\n  };\n  /**\n   * Get all elements set in `selectableTargets`.\n   */\n\n\n  __proto.getSelectableElements = function () {\n    var container = this.container;\n    var selectableElements = [];\n    this.options.selectableTargets.forEach(function (target) {\n      if (isFunction(target)) {\n        var result = target();\n\n        if (result) {\n          selectableElements.push.apply(selectableElements, [].slice.call(result));\n        }\n      } else if (isNode(target)) {\n        selectableElements.push(target);\n      } else if (isObject(target)) {\n        selectableElements.push(target.value || target.current);\n      } else {\n        var elements = [].slice.call(getDocument(container).querySelectorAll(target));\n        selectableElements.push.apply(selectableElements, elements);\n      }\n    });\n    return selectableElements;\n  };\n  /**\n   * If scroll occurs during dragging, you can manually call this method to check the position again.\n   */\n\n\n  __proto.checkScroll = function () {\n    if (!this.gesto.isFlag()) {\n      return;\n    }\n\n    var scrollOptions = this.scrollOptions;\n    var innerScrollOptions = this.gesto.getEventData().innerScrollOptions;\n    var hasScrollOptions = innerScrollOptions || (scrollOptions === null || scrollOptions === void 0 ? void 0 : scrollOptions.container); // If it is a scrolling position, pass drag\n\n    if (hasScrollOptions) {\n      this.dragScroll.checkScroll(__assign({\n        inputEvent: this.gesto.getCurrentEvent()\n      }, innerScrollOptions || scrollOptions));\n    }\n  };\n  /**\n   * Find for selectableTargets again during drag event\n   * You can update selectable targets during an event.\n   */\n\n\n  __proto.findSelectableTargets = function (data) {\n    var _this = this;\n\n    if (data === void 0) {\n      data = this.gesto.getEventData();\n    }\n\n    var selectableTargets = this.getSelectableElements();\n    var selectablePoints = selectableTargets.map(function (target) {\n      return _this.getElementPoints(target);\n    });\n    data.selectableTargets = selectableTargets;\n    data.selectablePoints = selectablePoints;\n    data.selectableParentMap = null;\n    var options = this.options;\n    var hasIndexesMap = options.checkOverflow || options.innerScrollOptions;\n    var doc = getDocument(this.container);\n\n    if (hasIndexesMap) {\n      var parentMap_1 = new Map();\n      data.selectableInnerScrollParentMap = parentMap_1;\n      data.selectableInnerScrollPathsList = selectableTargets.map(function (target, index) {\n        var parentElement = target.parentElement;\n        var parents = [];\n        var paths = [];\n\n        var _loop_1 = function () {\n          var info = parentMap_1.get(parentElement);\n\n          if (!info) {\n            var overflow = getComputedStyle(parentElement).overflow !== \"visible\";\n\n            if (overflow) {\n              var rect = getDefaultElementRect(parentElement);\n              info = {\n                parentElement: parentElement,\n                indexes: [],\n                points: [rect.pos1, rect.pos2, rect.pos4, rect.pos3],\n                paths: __spreadArray([], paths, true)\n              };\n              parents.push(parentElement);\n              parents.forEach(function (prevParentElement) {\n                parentMap_1.set(prevParentElement, info);\n              });\n              parents = [];\n            }\n          }\n\n          if (info) {\n            parentElement = info.parentElement;\n            parentMap_1.get(parentElement).indexes.push(index);\n            paths.push(parentElement);\n          } else {\n            parents.push(parentElement);\n          }\n\n          parentElement = parentElement.parentElement;\n        };\n\n        while (parentElement && parentElement !== doc.body) {\n          _loop_1();\n        }\n\n        return paths;\n      });\n    }\n\n    if (!options.checkOverflow) {\n      data.selectableInners = selectableTargets.map(function () {\n        return true;\n      });\n    }\n\n    this._refreshGroups(data);\n\n    return selectableTargets;\n  };\n  /**\n   * External click or mouse events can be applied to the selecto.\n   * @params - Extenal click or mouse event\n   * @params - Specify the clicked target directly.\n   */\n\n\n  __proto.clickTarget = function (e, clickedTarget) {\n    var _a = getClient(e),\n        clientX = _a.clientX,\n        clientY = _a.clientY;\n\n    var dragEvent = {\n      data: {\n        selectFlag: false\n      },\n      clientX: clientX,\n      clientY: clientY,\n      inputEvent: e,\n      isClick: true,\n      isTrusted: false,\n      stop: function () {\n        return false;\n      }\n    };\n\n    if (this._onDragStart(dragEvent, clickedTarget)) {\n      this._onDragEnd(dragEvent);\n    }\n\n    return this;\n  };\n\n  __proto.setKeyController = function () {\n    var _a = this.options,\n        keyContainer = _a.keyContainer,\n        toggleContinueSelect = _a.toggleContinueSelect,\n        toggleContinueSelectWithoutDeselect = _a.toggleContinueSelectWithoutDeselect;\n\n    if (this.keycon) {\n      this.keycon.destroy();\n      this.keycon = null;\n    }\n\n    if (toggleContinueSelect || toggleContinueSelectWithoutDeselect) {\n      this.keycon = new KeyController(keyContainer || getWindow(this.container));\n      this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on(\"blur\", this._onBlur);\n    }\n  };\n\n  __proto.setClassName = function (nextClassName) {\n    this.options.className = nextClassName;\n    this.target.setAttribute(\"class\", \"\".concat(CLASS_NAME, \" \").concat(nextClassName || \"\"));\n  };\n\n  __proto.setKeyEvent = function () {\n    var _a = this.options,\n        toggleContinueSelect = _a.toggleContinueSelect,\n        toggleContinueSelectWithoutDeselect = _a.toggleContinueSelectWithoutDeselect;\n\n    if (!toggleContinueSelect && !toggleContinueSelectWithoutDeselect || this.keycon) {\n      return;\n    }\n\n    this.setKeyController();\n  }; // with getter, setter property\n\n\n  __proto.setKeyContainer = function (keyContainer) {\n    var _this = this;\n\n    var options = this.options;\n    diffValue(options.keyContainer, keyContainer, function () {\n      options.keyContainer = keyContainer;\n\n      _this.setKeyController();\n    });\n  };\n\n  __proto.getContinueSelect = function () {\n    var _a = this.options,\n        continueSelect = _a.continueSelect,\n        toggleContinueSelect = _a.toggleContinueSelect;\n\n    if (!toggleContinueSelect || !this._keydownContinueSelect) {\n      return continueSelect;\n    }\n\n    return !continueSelect;\n  };\n\n  __proto.getContinueSelectWithoutDeselect = function () {\n    var _a = this.options,\n        continueSelectWithoutDeselect = _a.continueSelectWithoutDeselect,\n        toggleContinueSelectWithoutDeselect = _a.toggleContinueSelectWithoutDeselect;\n\n    if (!toggleContinueSelectWithoutDeselect || !this._keydownContinueSelectWithoutDeselection) {\n      return continueSelectWithoutDeselect;\n    }\n\n    return !continueSelectWithoutDeselect;\n  };\n\n  __proto.setToggleContinueSelect = function (toggleContinueSelect) {\n    var _this = this;\n\n    var options = this.options;\n    diffValue(options.toggleContinueSelect, toggleContinueSelect, function () {\n      options.toggleContinueSelect = toggleContinueSelect;\n\n      _this.setKeyEvent();\n    });\n  };\n\n  __proto.setToggleContinueSelectWithoutDeselect = function (toggleContinueSelectWithoutDeselect) {\n    var _this = this;\n\n    var options = this.options;\n    diffValue(options.toggleContinueSelectWithoutDeselect, toggleContinueSelectWithoutDeselect, function () {\n      options.toggleContinueSelectWithoutDeselect = toggleContinueSelectWithoutDeselect;\n\n      _this.setKeyEvent();\n    });\n  };\n\n  __proto.setPreventDefault = function (value) {\n    this.gesto.options.preventDefault = value;\n  };\n\n  __proto.setCheckInput = function (value) {\n    this.gesto.options.checkInput = value;\n  };\n\n  __proto.initElement = function () {\n    var _a = this.options,\n        dragContainer = _a.dragContainer,\n        checkInput = _a.checkInput,\n        preventDefault = _a.preventDefault,\n        preventClickEventOnDragStart = _a.preventClickEventOnDragStart,\n        preventClickEventOnDrag = _a.preventClickEventOnDrag,\n        preventClickEventByCondition = _a.preventClickEventByCondition,\n        _b = _a.preventRightClick,\n        preventRightClick = _b === void 0 ? true : _b,\n        className = _a.className;\n    var container = this.container;\n    this.target = createElement(h(\"div\", {\n      className: \"\".concat(CLASS_NAME, \" \").concat(className || \"\")\n    }), this.target, container);\n    var target = this.target;\n    this.dragContainer = typeof dragContainer === \"string\" ? [].slice.call(getDocument(container).querySelectorAll(dragContainer)) : dragContainer || this.target.parentNode;\n    this.gesto = new Gesto(this.dragContainer, {\n      checkWindowBlur: true,\n      container: getWindow(container),\n      checkInput: checkInput,\n      preventDefault: preventDefault,\n      preventClickEventOnDragStart: preventClickEventOnDragStart,\n      preventClickEventOnDrag: preventClickEventOnDrag,\n      preventClickEventByCondition: preventClickEventByCondition,\n      preventRightClick: preventRightClick\n    }).on({\n      dragStart: this._onDragStart,\n      drag: this._onDrag,\n      dragEnd: this._onDragEnd\n    });\n    addEvent(document, \"selectstart\", this._onDocumentSelectStart);\n    this.injectResult = injector.inject(target, {\n      nonce: this.options.cspNonce\n    });\n  };\n\n  __proto.hitTest = function (selectRect, data, gestoEvent) {\n    var _a = this.options,\n        hitRate = _a.hitRate,\n        selectByClick = _a.selectByClick;\n    var left = selectRect.left,\n        top = selectRect.top,\n        right = selectRect.right,\n        bottom = selectRect.bottom;\n    var innerGroups = data.innerGroups;\n    var innerWidth = data.innerWidth;\n    var innerHeight = data.innerHeight;\n    var clientX = gestoEvent === null || gestoEvent === void 0 ? void 0 : gestoEvent.clientX;\n    var clientY = gestoEvent === null || gestoEvent === void 0 ? void 0 : gestoEvent.clientY;\n    var ignoreClick = data.ignoreClick;\n    var rectPoints = [[left, top], [right, top], [right, bottom], [left, bottom]];\n\n    var isHit = function (points, el) {\n      var hitRateValue = typeof hitRate === \"function\" ? splitUnit(\"\".concat(hitRate(el))) : splitUnit(\"\".concat(hitRate));\n      var inArea = ignoreClick ? false : isInside([clientX, clientY], points);\n\n      if (selectByClick && inArea) {\n        return true;\n      }\n\n      var overlapPoints = getOverlapPoints(rectPoints, points);\n\n      if (!overlapPoints.length) {\n        return false;\n      }\n\n      var overlapSize = getAreaSize(overlapPoints); // Line\n\n      var targetSize = 0;\n\n      if (overlapSize === 0 && getAreaSize(points) === 0) {\n        targetSize = getLineSize(points);\n        overlapSize = getLineSize(overlapPoints);\n      } else {\n        targetSize = getAreaSize(points);\n      }\n\n      if (hitRateValue.unit === \"px\") {\n        return overlapSize >= hitRateValue.value;\n      } else {\n        var rate = between(Math.round(overlapSize / targetSize * 100), 0, 100);\n        return rate >= Math.min(100, hitRateValue.value);\n      }\n    };\n\n    var selectableTargets = data.selectableTargets;\n    var selectablePoints = data.selectablePoints;\n    var selectableInners = data.selectableInners;\n\n    if (!innerGroups) {\n      return selectableTargets.filter(function (_, i) {\n        if (!selectableInners[i]) {\n          return false;\n        }\n\n        return isHit(selectablePoints[i], selectableTargets[i]);\n      });\n    }\n\n    var selectedTargets = [];\n    var minX = Math.floor(left / innerWidth);\n    var maxX = Math.floor(right / innerWidth);\n    var minY = Math.floor(top / innerHeight);\n    var maxY = Math.floor(bottom / innerHeight);\n\n    for (var x = minX; x <= maxX; ++x) {\n      var yGroups = innerGroups[x];\n\n      if (!yGroups) {\n        continue;\n      }\n\n      for (var y = minY; y <= maxY; ++y) {\n        var group = yGroups[y];\n\n        if (!group) {\n          continue;\n        }\n\n        group.forEach(function (index) {\n          var points = selectablePoints[index];\n          var inner = selectableInners[index];\n          var target = selectableTargets[index];\n\n          if (inner && isHit(points, target)) {\n            selectedTargets.push(target);\n          }\n        });\n      }\n    }\n\n    return filterDuplicated(selectedTargets);\n  };\n\n  __proto.initDragScroll = function () {\n    var _this = this;\n\n    this.dragScroll.on(\"scrollDrag\", function (_a) {\n      var next = _a.next;\n      next(_this.gesto.getCurrentEvent());\n    }).on(\"scroll\", function (_a) {\n      var container = _a.container,\n          direction = _a.direction;\n\n      var innerScrollOptions = _this.gesto.getEventData().innerScrollOptions;\n\n      if (innerScrollOptions) {\n        _this.emit(\"innerScroll\", {\n          container: container,\n          direction: direction\n        });\n      } else {\n        _this.emit(\"scroll\", {\n          container: container,\n          direction: direction\n        });\n      }\n    }).on(\"move\", function (_a) {\n      var offsetX = _a.offsetX,\n          offsetY = _a.offsetY,\n          inputEvent = _a.inputEvent;\n      var gesto = _this.gesto;\n\n      if (!gesto || !gesto.isFlag()) {\n        return;\n      }\n\n      var data = _this.gesto.getEventData();\n\n      var boundArea = data.boundArea;\n      data.startX -= offsetX;\n      data.startY -= offsetY;\n\n      var innerScrollOptions = _this.gesto.getEventData().innerScrollOptions;\n\n      var container = innerScrollOptions === null || innerScrollOptions === void 0 ? void 0 : innerScrollOptions.container;\n      var isMoveInnerScroll = false;\n\n      if (container) {\n        var parentMap_2 = data.selectableInnerScrollParentMap;\n        var parentInfo = parentMap_2.get(container);\n\n        if (parentInfo) {\n          parentInfo.paths.forEach(function (scrollContainer) {\n            var containerInfo = parentMap_2.get(scrollContainer);\n            containerInfo.points.forEach(function (pos) {\n              pos[0] -= offsetX;\n              pos[1] -= offsetY;\n            });\n          });\n          parentInfo.indexes.forEach(function (index) {\n            data.selectablePoints[index].forEach(function (pos) {\n              pos[0] -= offsetX;\n              pos[1] -= offsetY;\n            });\n          });\n          isMoveInnerScroll = true;\n        }\n      }\n\n      if (!isMoveInnerScroll) {\n        data.selectablePoints.forEach(function (points) {\n          points.forEach(function (pos) {\n            pos[0] -= offsetX;\n            pos[1] -= offsetY;\n          });\n        });\n      }\n\n      _this._refreshGroups(data);\n\n      boundArea.left -= offsetX;\n      boundArea.right -= offsetX;\n      boundArea.top -= offsetY;\n      boundArea.bottom -= offsetY;\n\n      _this.gesto.scrollBy(offsetX, offsetY, inputEvent.inputEvent);\n\n      _this._checkSelected(_this.gesto.getCurrentEvent());\n    });\n  };\n\n  __proto._select = function (selectedTargets, rect, e, isStart, isDragStartEnd) {\n    if (isDragStartEnd === void 0) {\n      isDragStartEnd = false;\n    }\n\n    var inputEvent = e.inputEvent;\n    var data = e.data;\n    var result = this.setSelectedTargets(selectedTargets);\n\n    var _a = diff(data.startSelectedTargets, selectedTargets),\n        added = _a.added,\n        removed = _a.removed,\n        prevList = _a.prevList,\n        list = _a.list;\n\n    var startResult = {\n      startSelected: prevList,\n      startAdded: added.map(function (i) {\n        return list[i];\n      }),\n      startRemoved: removed.map(function (i) {\n        return prevList[i];\n      })\n    };\n\n    if (isStart) {\n      /**\n       * When the select(drag) starts, the selectStart event is called.\n       * @memberof Selecto\n       * @event selectStart\n       * @param {Selecto.OnSelect} - Parameters for the selectStart event\n       * @example\n       * import Selecto from \"selecto\";\n       *\n       * const selecto = new Selecto({\n       *   container: document.body,\n       *   selectByClick: true,\n       *   selectFromInside: false,\n       * });\n       *\n       * selecto.on(\"selectStart\", e => {\n       *   e.added.forEach(el => {\n       *     el.classList.add(\"selected\");\n       *   });\n       *   e.removed.forEach(el => {\n       *     el.classList.remove(\"selected\");\n       *   });\n       * }).on(\"selectEnd\", e => {\n       *   e.afterAdded.forEach(el => {\n       *     el.classList.add(\"selected\");\n       *   });\n       *   e.afterRemoved.forEach(el => {\n       *     el.classList.remove(\"selected\");\n       *   });\n       * });\n       */\n      this.emit(\"selectStart\", __assign(__assign(__assign({}, result), startResult), {\n        rect: rect,\n        inputEvent: inputEvent,\n        data: data.data,\n        isTrusted: e.isTrusted,\n        isDragStartEnd: isDragStartEnd\n      }));\n    }\n\n    if (result.added.length || result.removed.length) {\n      /**\n       * When the select in real time, the select event is called.\n       * @memberof Selecto\n       * @event select\n       * @param {Selecto.OnSelect} - Parameters for the select event\n       * @example\n       * import Selecto from \"selecto\";\n       *\n       * const selecto = new Selecto({\n       *   container: document.body,\n       *   selectByClick: true,\n       *   selectFromInside: false,\n       * });\n       *\n       * selecto.on(\"select\", e => {\n       *   e.added.forEach(el => {\n       *     el.classList.add(\"selected\");\n       *   });\n       *   e.removed.forEach(el => {\n       *     el.classList.remove(\"selected\");\n       *   });\n       * });\n       */\n      this.emit(\"select\", __assign(__assign(__assign({}, result), startResult), {\n        rect: rect,\n        inputEvent: inputEvent,\n        data: data.data,\n        isTrusted: e.isTrusted,\n        isDragStartEnd: isDragStartEnd\n      }));\n    }\n  };\n\n  __proto._selectEnd = function (startSelectedTargets, startPassedTargets, rect, e, isDragStartEnd) {\n    if (isDragStartEnd === void 0) {\n      isDragStartEnd = false;\n    }\n\n    var inputEvent = e.inputEvent,\n        isDouble = e.isDouble,\n        data = e.data;\n    var type = inputEvent && inputEvent.type;\n    var isDragStart = type === \"mousedown\" || type === \"touchstart\";\n\n    var _a = diff(startSelectedTargets, this.selectedTargets),\n        added = _a.added,\n        removed = _a.removed,\n        prevList = _a.prevList,\n        list = _a.list;\n\n    var _b = diff(startPassedTargets, this.selectedTargets),\n        afterAdded = _b.added,\n        afterRemoved = _b.removed,\n        afterPrevList = _b.prevList,\n        afterList = _b.list;\n    /**\n     * When the select(dragEnd or click) ends, the selectEnd event is called.\n     * @memberof Selecto\n     * @event selectEnd\n     * @param {Selecto.OnSelectEnd} - Parameters for the selectEnd event\n     * @example\n     * import Selecto from \"selecto\";\n     *\n     * const selecto = new Selecto({\n     *   container: document.body,\n     *   selectByClick: true,\n     *   selectFromInside: false,\n     * });\n     *\n     * selecto.on(\"selectStart\", e => {\n     *   e.added.forEach(el => {\n     *     el.classList.add(\"selected\");\n     *   });\n     *   e.removed.forEach(el => {\n     *     el.classList.remove(\"selected\");\n     *   });\n     * }).on(\"selectEnd\", e => {\n     *   e.afterAdded.forEach(el => {\n     *     el.classList.add(\"selected\");\n     *   });\n     *   e.afterRemoved.forEach(el => {\n     *     el.classList.remove(\"selected\");\n     *   });\n     * });\n     */\n\n\n    this.emit(\"selectEnd\", {\n      startSelected: startSelectedTargets,\n      beforeSelected: startPassedTargets,\n      selected: this.selectedTargets,\n      added: added.map(function (index) {\n        return list[index];\n      }),\n      removed: removed.map(function (index) {\n        return prevList[index];\n      }),\n      afterAdded: afterAdded.map(function (index) {\n        return afterList[index];\n      }),\n      afterRemoved: afterRemoved.map(function (index) {\n        return afterPrevList[index];\n      }),\n      isDragStart: isDragStart && isDragStartEnd,\n      isDragStartEnd: isDragStart && isDragStartEnd,\n      isClick: !!e.isClick,\n      isDouble: !!isDouble,\n      rect: rect,\n      inputEvent: inputEvent,\n      data: data.data,\n      isTrusted: e.isTrusted\n    });\n  };\n\n  __proto._checkSelected = function (e, rect) {\n    if (rect === void 0) {\n      rect = getRect(e, this.options.ratio);\n    }\n\n    var data = e.data;\n    var top = rect.top,\n        left = rect.left,\n        width = rect.width,\n        height = rect.height;\n    var selectFlag = data.selectFlag;\n    var containerX = data.containerX,\n        containerY = data.containerY,\n        scaleMatrix = data.scaleMatrix;\n    var offsetPos = calculateMatrixDist(scaleMatrix, [left - containerX, top - containerY]);\n    var offsetSize = calculateMatrixDist(scaleMatrix, [width, height]);\n    var selectedTargets = [];\n\n    if (selectFlag) {\n      this.target.style.cssText += \"display: block;\" + \"left:0px;top:0px;\" + \"transform: translate(\".concat(offsetPos[0], \"px, \").concat(offsetPos[1], \"px);\") + \"width:\".concat(offsetSize[0], \"px;height:\").concat(offsetSize[1], \"px;\");\n      var passedTargets = this.hitTest(rect, data, e);\n      selectedTargets = passTargets(data.startPassedTargets, passedTargets, this.continueSelect && this.continueSelectWithoutDeselect);\n    }\n    /**\n     * When the drag, the drag event is called.\n     * Call the stop () function if you have a specific element or don't want to raise a select\n     * @memberof Selecto\n     * @event drag\n     * @param {OnDrag} - Parameters for the drag event\n     * @example\n     * import Selecto from \"selecto\";\n     *\n     * const selecto = new Selecto({\n     *   container: document.body,\n     *   selectByClick: true,\n     *   selectFromInside: false,\n     * });\n     *\n     * selecto.on(\"drag\", e => {\n     *   e.stop();\n     * }).on(\"select\", e => {\n     *   e.added.forEach(el => {\n     *     el.classList.add(\"selected\");\n     *   });\n     *   e.removed.forEach(el => {\n     *     el.classList.remove(\"selected\");\n     *   });\n     * });\n     */\n\n\n    var result = this.emit(\"drag\", __assign(__assign({}, e), {\n      data: data.data,\n      isSelect: selectFlag,\n      rect: rect\n    }));\n\n    if (result === false) {\n      this.target.style.cssText += \"display: none;\";\n      e.stop();\n      return;\n    }\n\n    if (selectFlag) {\n      this._select(selectedTargets, rect, e);\n    }\n  };\n\n  __proto._sameCombiKey = function (e, keys, isKeyup) {\n    if (!keys) {\n      return false;\n    }\n\n    var combi = getCombi(e.inputEvent, e.key);\n    var nextKeys = [].concat(keys);\n    var toggleKeys = isArray(nextKeys[0]) ? nextKeys : [nextKeys];\n\n    if (isKeyup) {\n      var singleKey_1 = e.key;\n      return toggleKeys.some(function (keys) {\n        return keys.some(function (key) {\n          return key === singleKey_1;\n        });\n      });\n    }\n\n    return toggleKeys.some(function (keys) {\n      return keys.every(function (key) {\n        return combi.indexOf(key) > -1;\n      });\n    });\n  };\n\n  __proto._findElement = function (clickedTarget, selectableTargets) {\n    var pointTarget = clickedTarget;\n\n    while (pointTarget) {\n      if (selectableTargets.indexOf(pointTarget) > -1) {\n        break;\n      }\n\n      pointTarget = pointTarget.parentElement;\n    }\n\n    return pointTarget;\n  };\n\n  __proto._refreshGroups = function (data) {\n    var _a;\n\n    var innerWidth = data.innerWidth;\n    var innerHeight = data.innerHeight;\n    var selectablePoints = data.selectablePoints;\n\n    if (this.options.checkOverflow) {\n      var innerScrollContainer_1 = (_a = this.gesto.getEventData().innerScrollOptions) === null || _a === void 0 ? void 0 : _a.container;\n      var parentMap_3 = data.selectableInnerScrollParentMap;\n      var innerScrollPathsList = data.selectableInnerScrollPathsList;\n      data.selectableInners = innerScrollPathsList.map(function (innerScrollPaths, i) {\n        var isAlwaysTrue = false;\n        return innerScrollPaths.every(function (target) {\n          if (isAlwaysTrue) {\n            return true;\n          }\n\n          if (target === innerScrollContainer_1) {\n            isAlwaysTrue = true;\n            return true;\n          }\n\n          var rect = parentMap_3.get(target);\n\n          if (rect) {\n            var points1 = selectablePoints[i];\n            var points2 = rect.points;\n            var overlapPoints = getOverlapPoints(points1, points2);\n\n            if (!overlapPoints.length) {\n              return false;\n            }\n          }\n\n          return true;\n        });\n      });\n    }\n\n    if (!innerWidth || !innerHeight) {\n      data.innerGroups = null;\n    } else {\n      var selectablePoints_1 = data.selectablePoints;\n      var groups_1 = {};\n      selectablePoints_1.forEach(function (points, i) {\n        var minX = Infinity;\n        var maxX = -Infinity;\n        var minY = Infinity;\n        var maxY = -Infinity;\n        points.forEach(function (pos) {\n          var x = Math.floor(pos[0] / innerWidth);\n          var y = Math.floor(pos[1] / innerHeight);\n          minX = Math.min(x, minX);\n          maxX = Math.max(x, maxX);\n          minY = Math.min(y, minY);\n          maxY = Math.max(y, maxY);\n        });\n\n        for (var x = minX; x <= maxX; ++x) {\n          for (var y = minY; y <= maxY; ++y) {\n            groups_1[x] = groups_1[x] || {};\n            groups_1[x][y] = groups_1[x][y] || [];\n            groups_1[x][y].push(i);\n          }\n        }\n      });\n      data.innerGroups = groups_1;\n    }\n  };\n\n  Selecto = __decorate([Properties(PROPERTIES, function (prototype, property) {\n    var attributes = {\n      enumerable: true,\n      configurable: true,\n      get: function () {\n        return this.options[property];\n      }\n    };\n    var getter = camelize(\"get \".concat(property));\n\n    if (prototype[getter]) {\n      attributes.get = function get() {\n        return this[getter]();\n      };\n    } else {\n      attributes.get = function get() {\n        return this.options[property];\n      };\n    }\n\n    var setter = camelize(\"set \".concat(property));\n\n    if (prototype[setter]) {\n      attributes.set = function set(value) {\n        this[setter](value);\n      };\n    } else {\n      attributes.set = function set(value) {\n        this.options[property] = value;\n      };\n    }\n\n    Object.defineProperty(prototype, property, attributes);\n  })], Selecto);\n  return Selecto;\n}(EventEmitter);\n\nvar Selecto$1 =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(Selecto, _super);\n\n  function Selecto() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return Selecto;\n}(Selecto);\n\nexport default Selecto$1;\nexport { CLASS_NAME, EVENTS, METHODS, OPTIONS, OPTION_TYPES, PROPERTIES };\n//# sourceMappingURL=selecto.esm.js.map\n","import { css } from '@emotion/css';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { first } from 'rxjs/operators';\n\nimport { SelectableValue } from '@grafana/data';\nimport { ContextMenu, MenuItem, MenuItemProps } from '@grafana/ui';\nimport { ElementState } from 'app/features/canvas/runtime/element';\nimport { FrameState } from 'app/features/canvas/runtime/frame';\nimport { Scene } from 'app/features/canvas/runtime/scene';\n\nimport { CanvasPanel } from '../CanvasPanel';\nimport { AnchorPoint, LayerActionID } from '../types';\nimport { getElementTypes, onAddItem } from '../utils';\n\ntype Props = {\n  scene: Scene;\n  panel: CanvasPanel;\n};\n\nexport const CanvasContextMenu = ({ scene, panel }: Props) => {\n  const inlineEditorOpen = panel.state.openInlineEdit;\n  const [isMenuVisible, setIsMenuVisible] = useState<boolean>(false);\n  const [anchorPoint, setAnchorPoint] = useState<AnchorPoint>({ x: 0, y: 0 });\n\n  const styles = getStyles();\n\n  const selectedElements = scene.selecto?.getSelectedTargets();\n  const rootLayer: FrameState | undefined = panel.context?.instanceState?.layer;\n\n  const handleContextMenu = useCallback(\n    (event: Event) => {\n      if (!(event instanceof MouseEvent)) {\n        return;\n      }\n\n      event.preventDefault();\n      panel.setActivePanel();\n\n      const shouldSelectElement = event.currentTarget !== scene.div;\n      if (\n        shouldSelectElement &&\n        (event.currentTarget instanceof HTMLElement || event.currentTarget instanceof SVGElement)\n      ) {\n        scene.select({ targets: [event.currentTarget] });\n      }\n      setAnchorPoint({ x: event.pageX, y: event.pageY });\n      setIsMenuVisible(true);\n    },\n    [scene, panel]\n  );\n\n  useEffect(() => {\n    if (scene.selecto) {\n      scene.selecto.getSelectableElements().forEach((element) => {\n        element.addEventListener('contextmenu', handleContextMenu);\n      });\n    }\n  }, [handleContextMenu, scene.selecto]);\n\n  useEffect(() => {\n    if (scene.div) {\n      scene.div.addEventListener('contextmenu', handleContextMenu);\n    }\n  }, [handleContextMenu, scene.div]);\n\n  const closeContextMenu = () => {\n    setIsMenuVisible(false);\n  };\n\n  const renderMenuItems = () => {\n    const openCloseEditorMenuItem = !scene.isPanelEditing && (\n      <MenuItem\n        label={inlineEditorOpen ? 'Close Editor' : 'Open Editor'}\n        onClick={() => {\n          if (scene.inlineEditingCallback) {\n            if (inlineEditorOpen) {\n              panel.closeInlineEdit();\n            } else {\n              scene.inlineEditingCallback();\n            }\n          }\n          closeContextMenu();\n        }}\n        className={styles.menuItem}\n      />\n    );\n\n    const editElementMenuItem = () => {\n      if (selectedElements?.length === 1) {\n        const onClickEditElementMenuItem = () => {\n          scene.editModeEnabled.next(true);\n          closeContextMenu();\n        };\n\n        const element = scene.findElementByTarget(selectedElements[0]);\n        return (\n          element &&\n          element.item.hasEditMode && (\n            <MenuItem label=\"Edit\" onClick={onClickEditElementMenuItem} className={styles.menuItem} />\n          )\n        );\n      }\n      return null;\n    };\n\n    const typeOptions = getElementTypes(scene.shouldShowAdvancedTypes).options;\n\n    const getTypeOptionsSubmenu = () => {\n      const submenuItems: Array<\n        React.ReactElement<MenuItemProps<unknown>, string | React.JSXElementConstructor<unknown>>\n      > = [];\n\n      const onClickItem = (option: SelectableValue<string>) => {\n        let offsetY = anchorPoint.y;\n        let offsetX = anchorPoint.x;\n        if (scene.div) {\n          const sceneContainerDimensions = scene.div.getBoundingClientRect();\n          offsetY = offsetY - sceneContainerDimensions.top;\n          offsetX = offsetX - sceneContainerDimensions.left;\n        }\n\n        onAddItem(option, rootLayer, {\n          ...anchorPoint,\n          y: offsetY,\n          x: offsetX,\n        });\n      };\n\n      typeOptions.map((option) => {\n        submenuItems.push(\n          <MenuItem key={option.value} label={option.label ?? 'Canvas item'} onClick={() => onClickItem(option)} />\n        );\n      });\n\n      return submenuItems;\n    };\n\n    const addItemMenuItem = !scene.isPanelEditing && (\n      <MenuItem\n        label=\"Add item\"\n        className={styles.menuItem}\n        childItems={getTypeOptionsSubmenu()}\n        customSubMenuContainerStyles={{ maxHeight: '150px', overflowY: 'auto' }}\n      />\n    );\n\n    const setBackgroundMenuItem = !scene.isPanelEditing && (\n      <MenuItem\n        label={'Set background'}\n        onClick={() => {\n          if (scene.setBackgroundCallback) {\n            scene.setBackgroundCallback(anchorPoint);\n          }\n          closeContextMenu();\n        }}\n        className={styles.menuItem}\n      />\n    );\n\n    if (selectedElements && selectedElements.length >= 1) {\n      return (\n        <>\n          {editElementMenuItem()}\n          <MenuItem\n            label=\"Delete\"\n            onClick={() => {\n              contextMenuAction(LayerActionID.Delete);\n              closeContextMenu();\n            }}\n            className={styles.menuItem}\n          />\n          <MenuItem\n            label=\"Duplicate\"\n            onClick={() => {\n              contextMenuAction(LayerActionID.Duplicate);\n              closeContextMenu();\n            }}\n            className={styles.menuItem}\n          />\n          <MenuItem\n            label=\"Bring to front\"\n            onClick={() => {\n              contextMenuAction(LayerActionID.MoveTop);\n              closeContextMenu();\n            }}\n            className={styles.menuItem}\n          />\n          <MenuItem\n            label=\"Send to back\"\n            onClick={() => {\n              contextMenuAction(LayerActionID.MoveBottom);\n              closeContextMenu();\n            }}\n            className={styles.menuItem}\n          />\n          {openCloseEditorMenuItem}\n        </>\n      );\n    } else {\n      return (\n        <>\n          {openCloseEditorMenuItem}\n          {setBackgroundMenuItem}\n          {addItemMenuItem}\n        </>\n      );\n    }\n  };\n\n  const contextMenuAction = (actionType: LayerActionID) => {\n    scene.selection.pipe(first()).subscribe((currentSelectedElements) => {\n      const currentLayer = currentSelectedElements[0].parent!;\n      currentSelectedElements.forEach((currentSelectedElement: ElementState) => {\n        currentLayer.doAction(actionType, currentSelectedElement);\n      });\n    });\n\n    setTimeout(() => {\n      scene.addToSelection();\n      scene.targetsToSelect.clear();\n    });\n  };\n\n  if (isMenuVisible) {\n    return (\n      <div\n        onContextMenu={(event) => {\n          event.preventDefault();\n          closeContextMenu();\n        }}\n      >\n        <ContextMenu\n          x={anchorPoint.x}\n          y={anchorPoint.y}\n          onClose={closeContextMenu}\n          renderMenuItems={renderMenuItems}\n          focusOnOpen={false}\n        />\n      </div>\n    );\n  }\n\n  return <></>;\n};\n\nconst getStyles = () => ({\n  menuItem: css({\n    maxWidth: '200px',\n  }),\n});\n","import { css } from '@emotion/css';\nimport { useDialog } from '@react-aria/dialog';\nimport { useOverlay } from '@react-aria/overlays';\nimport React, { createRef } from 'react';\n\nimport { GrafanaTheme2, LinkModel } from '@grafana/data/src';\nimport { LinkButton, Portal, useStyles2, VerticalGroup, VizTooltipContainer } from '@grafana/ui';\nimport { CloseButton } from 'app/core/components/CloseButton/CloseButton';\nimport { Scene } from 'app/features/canvas/runtime/scene';\n\ninterface Props {\n  scene: Scene;\n}\n\nexport const CanvasTooltip = ({ scene }: Props) => {\n  const style = useStyles2(getStyles);\n\n  const onClose = () => {\n    if (scene?.tooltipCallback && scene.tooltip) {\n      scene.tooltipCallback(undefined);\n    }\n  };\n\n  const ref = createRef<HTMLElement>();\n  const { overlayProps } = useOverlay({ onClose: onClose, isDismissable: true }, ref);\n  const { dialogProps } = useDialog({}, ref);\n\n  const element = scene.tooltip?.element;\n  if (!element) {\n    return <></>;\n  }\n\n  const renderDataLinks = () =>\n    element.data?.links &&\n    element.data?.links.length > 0 && (\n      <div>\n        <VerticalGroup>\n          {element.data?.links?.map((link: LinkModel, i: number) => (\n            <LinkButton\n              key={i}\n              icon={'external-link-alt'}\n              target={link.target}\n              href={link.href}\n              onClick={link.onClick}\n              fill=\"text\"\n              style={{ width: '100%' }}\n            >\n              {link.title}\n            </LinkButton>\n          ))}\n        </VerticalGroup>\n      </div>\n    );\n\n  return (\n    <>\n      {scene.tooltip?.element && scene.tooltip.anchorPoint && (\n        <Portal>\n          <VizTooltipContainer\n            position={{ x: scene.tooltip.anchorPoint.x, y: scene.tooltip.anchorPoint.y }}\n            offset={{ x: 5, y: 0 }}\n            allowPointerEvents={scene.tooltip.isOpen}\n          >\n            <section ref={ref} {...overlayProps} {...dialogProps}>\n              {scene.tooltip.isOpen && <CloseButton style={{ zIndex: 1 }} onClick={onClose} />}\n              <div className={style.wrapper}>{renderDataLinks()}</div>\n            </section>\n          </VizTooltipContainer>\n        </Portal>\n      )}\n    </>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  wrapper: css({\n    marginTop: '20px',\n    background: theme.colors.background.primary,\n  }),\n});\n","import { css } from '@emotion/css';\nimport React, { useRef } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport { ConnectionCoordinates } from 'app/features/canvas';\n\ntype Props = {\n  setRef: (anchorElement: HTMLDivElement) => void;\n  handleMouseLeave: (\n    event: React.MouseEvent<Element, MouseEvent> | React.FocusEvent<HTMLDivElement, Element>\n  ) => boolean;\n};\n\nexport const CONNECTION_ANCHOR_DIV_ID = 'connectionControl';\nexport const CONNECTION_ANCHOR_ALT = 'connection anchor';\nexport const CONNECTION_ANCHOR_HIGHLIGHT_OFFSET = 8;\n\nconst ANCHOR_PADDING = 3;\n\nexport const ConnectionAnchors = ({ setRef, handleMouseLeave }: Props) => {\n  const highlightEllipseRef = useRef<HTMLDivElement>(null);\n  const styles = useStyles2(getStyles);\n  const halfSize = 2.5;\n  const halfSizeHighlightEllipse = 5.5;\n  const anchorImage =\n    'data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI1cHgiIGhlaWdodD0iNXB4IiB2ZXJzaW9uPSIxLjEiPjxwYXRoIGQ9Im0gMCAwIEwgNSA1IE0gMCA1IEwgNSAwIiBzdHJva2Utd2lkdGg9IjIiIHN0eWxlPSJzdHJva2Utb3BhY2l0eTowLjQiIHN0cm9rZT0iI2ZmZmZmZiIvPjxwYXRoIGQ9Im0gMCAwIEwgNSA1IE0gMCA1IEwgNSAwIiBzdHJva2U9IiMyOWI2ZjIiLz48L3N2Zz4=';\n\n  const onMouseEnterAnchor = (event: React.MouseEvent) => {\n    if (!(event.target instanceof HTMLImageElement)) {\n      return;\n    }\n\n    if (highlightEllipseRef.current && event.target.style) {\n      highlightEllipseRef.current.style.display = 'block';\n      highlightEllipseRef.current.style.top = `calc(${event.target.style.top} - ${halfSizeHighlightEllipse}px + ${ANCHOR_PADDING}px)`;\n      highlightEllipseRef.current.style.left = `calc(${event.target.style.left} - ${halfSizeHighlightEllipse}px + ${ANCHOR_PADDING}px)`;\n    }\n  };\n\n  const onMouseLeaveHighlightElement = () => {\n    if (highlightEllipseRef.current) {\n      highlightEllipseRef.current.style.display = 'none';\n    }\n  };\n\n  const handleMouseLeaveAnchors = (\n    event: React.MouseEvent<Element, MouseEvent> | React.FocusEvent<HTMLDivElement, Element>\n  ) => {\n    const didHideAnchors = handleMouseLeave(event);\n\n    if (didHideAnchors) {\n      onMouseLeaveHighlightElement();\n    }\n  };\n\n  // Unit is percentage from the middle of the element\n  // 0, 0 middle; -1, -1 bottom left; 1, 1 top right\n  const ANCHORS = [\n    { x: -1, y: 1 },\n    { x: -0.5, y: 1 },\n    { x: 0, y: 1 },\n    { x: 0.5, y: 1 },\n    { x: 1, y: 1 },\n    { x: 1, y: 0.5 },\n    { x: 1, y: 0 },\n    { x: 1, y: -0.5 },\n    { x: 1, y: -1 },\n    { x: 0.5, y: -1 },\n    { x: 0, y: -1 },\n    { x: -0.5, y: -1 },\n    { x: -1, y: -1 },\n    { x: -1, y: -0.5 },\n    { x: -1, y: 0 },\n    { x: -1, y: 0.5 },\n  ];\n\n  const generateAnchors = (anchors: ConnectionCoordinates[] = ANCHORS) => {\n    return anchors.map((anchor) => {\n      const id = `${anchor.x},${anchor.y}`;\n\n      // Convert anchor coords to relative percentage\n      const style = {\n        top: `calc(${-anchor.y * 50 + 50}% - ${halfSize}px - ${ANCHOR_PADDING}px)`,\n        left: `calc(${anchor.x * 50 + 50}% - ${halfSize}px - ${ANCHOR_PADDING}px)`,\n      };\n\n      return (\n        <img\n          id={id}\n          ref={(element) => {\n            if (element) {\n              // After React 15+, inline styles no longer support !important\n              element.style.setProperty('pointer-events', 'auto', 'important');\n            }\n          }}\n          key={id}\n          alt={CONNECTION_ANCHOR_ALT}\n          className={styles.anchor}\n          style={style}\n          src={anchorImage}\n          onMouseEnter={onMouseEnterAnchor}\n        />\n      );\n    });\n  };\n\n  return (\n    <div className={styles.root} ref={setRef}>\n      <div className={styles.mouseoutDiv} onMouseOut={handleMouseLeaveAnchors} onBlur={handleMouseLeaveAnchors} />\n      <div\n        id={CONNECTION_ANCHOR_DIV_ID}\n        ref={highlightEllipseRef}\n        className={styles.highlightElement}\n        onMouseLeave={onMouseLeaveHighlightElement}\n      />\n      {generateAnchors()}\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  root: css({\n    position: 'absolute',\n    display: 'none',\n  }),\n  mouseoutDiv: css({\n    position: 'absolute',\n    margin: '-30px',\n    width: 'calc(100% + 60px)',\n    height: 'calc(100% + 60px)',\n  }),\n  anchor: css({\n    padding: `${ANCHOR_PADDING}px`,\n    position: 'absolute',\n    cursor: 'cursor',\n    width: `calc(5px + 2 * ${ANCHOR_PADDING}px)`,\n    height: `calc(5px + 2 * ${ANCHOR_PADDING}px)`,\n    zIndex: 100,\n  }),\n  highlightElement: css({\n    backgroundColor: '#00ff00',\n    opacity: 0.3,\n    position: 'absolute',\n    cursor: 'cursor',\n    pointerEvents: 'auto',\n    width: '16px',\n    height: '16px',\n    borderRadius: theme.shape.radius.circle,\n    display: 'none',\n    zIndex: 110,\n  }),\n});\n","import { css } from '@emotion/css';\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport { config } from 'app/core/config';\nimport { Scene } from 'app/features/canvas/runtime/scene';\n\nimport { ConnectionState } from '../../types';\nimport { calculateCoordinates, getConnectionStyles } from '../../utils';\n\ntype Props = {\n  setSVGRef: (anchorElement: SVGSVGElement) => void;\n  setLineRef: (anchorElement: SVGLineElement) => void;\n  scene: Scene;\n};\n\nlet idCounter = 0;\nconst htmlElementTypes = ['input', 'textarea'];\n\nexport const ConnectionSVG = ({ setSVGRef, setLineRef, scene }: Props) => {\n  const styles = useStyles2(getStyles);\n\n  const headId = Date.now() + '_' + idCounter++;\n  const CONNECTION_LINE_ID = useMemo(() => `connectionLineId-${headId}`, [headId]);\n  const EDITOR_HEAD_ID = useMemo(() => `editorHead-${headId}`, [headId]);\n  const defaultArrowColor = config.theme2.colors.text.primary;\n  const defaultArrowSize = 2;\n\n  const [selectedConnection, setSelectedConnection] = useState<ConnectionState | undefined>(undefined);\n\n  // Need to use ref to ensure state is not stale in event handler\n  const selectedConnectionRef = useRef(selectedConnection);\n  useEffect(() => {\n    selectedConnectionRef.current = selectedConnection;\n  });\n\n  useEffect(() => {\n    if (scene.panel.context.instanceState?.selectedConnection) {\n      setSelectedConnection(scene.panel.context.instanceState?.selectedConnection);\n    }\n  }, [scene.panel.context.instanceState?.selectedConnection]);\n\n  const onKeyUp = (e: KeyboardEvent) => {\n    const target = e.target;\n\n    if (!(target instanceof HTMLElement)) {\n      return;\n    }\n\n    if (htmlElementTypes.indexOf(target.nodeName.toLowerCase()) > -1) {\n      return;\n    }\n\n    // Backspace (8) or delete (46)\n    if (e.keyCode === 8 || e.keyCode === 46) {\n      if (selectedConnectionRef.current && selectedConnectionRef.current.source) {\n        selectedConnectionRef.current.source.options.connections =\n          selectedConnectionRef.current.source.options.connections?.filter(\n            (connection) => connection !== selectedConnectionRef.current?.info\n          );\n        selectedConnectionRef.current.source.onChange(selectedConnectionRef.current.source.options);\n\n        setSelectedConnection(undefined);\n        scene.connections.select(undefined);\n        scene.connections.updateState();\n        scene.save();\n      }\n    } else {\n      // Prevent removing event listener if key is not delete\n      return;\n    }\n\n    document.removeEventListener('keyup', onKeyUp);\n    scene.selecto!.rootContainer!.removeEventListener('click', clearSelectedConnection);\n  };\n\n  const clearSelectedConnection = (event: MouseEvent) => {\n    const eventTarget = event.target;\n\n    const shouldResetSelectedConnection = !(\n      eventTarget instanceof SVGLineElement && eventTarget.id === CONNECTION_LINE_ID\n    );\n\n    if (shouldResetSelectedConnection) {\n      setSelectedConnection(undefined);\n      scene.connections.select(undefined);\n    }\n  };\n\n  const selectConnection = (connection: ConnectionState) => {\n    if (scene.isEditingEnabled) {\n      setSelectedConnection(connection);\n      scene.connections.select(connection);\n\n      document.addEventListener('keyup', onKeyUp);\n      scene.selecto!.rootContainer!.addEventListener('click', clearSelectedConnection);\n    }\n  };\n\n  // Figure out target and then target's relative coordinates drawing (if no target do parent)\n  const renderConnections = () => {\n    return scene.connections.state.map((v, idx) => {\n      const { source, target, info } = v;\n      const sourceRect = source.div?.getBoundingClientRect();\n      const parent = source.div?.parentElement;\n      const parentRect = parent?.getBoundingClientRect();\n\n      if (!sourceRect || !parent || !parentRect) {\n        return;\n      }\n\n      const { x1, y1, x2, y2 } = calculateCoordinates(sourceRect, parentRect, info, target);\n\n      const { strokeColor, strokeWidth } = getConnectionStyles(info, scene, defaultArrowSize);\n\n      const isSelected = selectedConnection === v && scene.panel.context.instanceState.selectedConnection;\n\n      const connectionCursorStyle = scene.isEditingEnabled ? 'grab' : '';\n      const selectedStyles = { stroke: '#44aaff', strokeOpacity: 0.6, strokeWidth: strokeWidth + 5 };\n\n      const CONNECTION_HEAD_ID = `connectionHead-${headId + Math.random()}`;\n\n      return (\n        <svg className={styles.connection} key={idx}>\n          <g onClick={() => selectConnection(v)}>\n            <defs>\n              <marker\n                id={CONNECTION_HEAD_ID}\n                markerWidth=\"10\"\n                markerHeight=\"7\"\n                refX=\"10\"\n                refY=\"3.5\"\n                orient=\"auto\"\n                stroke={strokeColor}\n              >\n                <polygon points=\"0 0, 10 3.5, 0 7\" fill={strokeColor} />\n              </marker>\n            </defs>\n            <line\n              id={`${CONNECTION_LINE_ID}_transparent`}\n              cursor={connectionCursorStyle}\n              pointerEvents=\"auto\"\n              stroke=\"transparent\"\n              strokeWidth={15}\n              style={isSelected ? selectedStyles : {}}\n              x1={x1}\n              y1={y1}\n              x2={x2}\n              y2={y2}\n            />\n            <line\n              id={CONNECTION_LINE_ID}\n              stroke={strokeColor}\n              pointerEvents=\"auto\"\n              strokeWidth={strokeWidth}\n              markerEnd={`url(#${CONNECTION_HEAD_ID})`}\n              x1={x1}\n              y1={y1}\n              x2={x2}\n              y2={y2}\n              cursor={connectionCursorStyle}\n            />\n          </g>\n        </svg>\n      );\n    });\n  };\n\n  return (\n    <>\n      <svg ref={setSVGRef} className={styles.editorSVG}>\n        <defs>\n          <marker\n            id={EDITOR_HEAD_ID}\n            markerWidth=\"10\"\n            markerHeight=\"7\"\n            refX=\"10\"\n            refY=\"3.5\"\n            orient=\"auto\"\n            stroke={defaultArrowColor}\n          >\n            <polygon points=\"0 0, 10 3.5, 0 7\" fill={defaultArrowColor} />\n          </marker>\n        </defs>\n        <line ref={setLineRef} stroke={defaultArrowColor} strokeWidth={2} markerEnd={`url(#${EDITOR_HEAD_ID})`} />\n      </svg>\n      {renderConnections()}\n    </>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  editorSVG: css({\n    position: 'absolute',\n    pointerEvents: 'none',\n    width: '100%',\n    height: '100%',\n    zIndex: 1000,\n    display: 'none',\n  }),\n  connection: css({\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    zIndex: 1000,\n    pointerEvents: 'none',\n  }),\n});\n","import React from 'react';\nimport { BehaviorSubject } from 'rxjs';\n\nimport { config } from '@grafana/runtime';\nimport { CanvasConnection, ConnectionPath } from 'app/features/canvas';\nimport { ElementState } from 'app/features/canvas/runtime/element';\nimport { Scene } from 'app/features/canvas/runtime/scene';\n\nimport { ConnectionState } from '../../types';\nimport { getConnections, isConnectionSource, isConnectionTarget } from '../../utils';\n\nimport { CONNECTION_ANCHOR_ALT, ConnectionAnchors, CONNECTION_ANCHOR_HIGHLIGHT_OFFSET } from './ConnectionAnchors';\nimport { ConnectionSVG } from './ConnectionSVG';\n\nexport class Connections {\n  scene: Scene;\n  connectionAnchorDiv?: HTMLDivElement;\n  connectionSVG?: SVGElement;\n  connectionLine?: SVGLineElement;\n  connectionSource?: ElementState;\n  connectionTarget?: ElementState;\n  isDrawingConnection?: boolean;\n  didConnectionLeaveHighlight?: boolean;\n  state: ConnectionState[] = [];\n  readonly selection = new BehaviorSubject<ConnectionState | undefined>(undefined);\n\n  constructor(scene: Scene) {\n    this.scene = scene;\n    this.updateState();\n  }\n\n  select = (connection: ConnectionState | undefined) => {\n    if (connection === this.selection.value) {\n      return;\n    }\n    this.selection.next(connection);\n  };\n\n  updateState = () => {\n    const s = this.selection.value;\n    this.state = getConnections(this.scene.byName);\n\n    if (s) {\n      for (let c of this.state) {\n        if (c.source === s.source && c.index === s.index) {\n          this.selection.next(c);\n          break;\n        }\n      }\n    }\n  };\n\n  setConnectionAnchorRef = (anchorElement: HTMLDivElement) => {\n    this.connectionAnchorDiv = anchorElement;\n  };\n\n  setConnectionSVGRef = (connectionSVG: SVGSVGElement) => {\n    this.connectionSVG = connectionSVG;\n  };\n\n  setConnectionLineRef = (connectionLine: SVGLineElement) => {\n    this.connectionLine = connectionLine;\n  };\n\n  // Recursively find the first parent that is a canvas element\n  findElementTarget = (element: Element): ElementState | undefined => {\n    let elementTarget = undefined;\n\n    // Cap recursion at the scene level\n    if (element === this.scene.div) {\n      return undefined;\n    }\n\n    elementTarget = this.scene.findElementByTarget(element);\n\n    if (!elementTarget && element.parentElement) {\n      elementTarget = this.findElementTarget(element.parentElement);\n    }\n\n    return elementTarget;\n  };\n\n  handleMouseEnter = (event: React.MouseEvent) => {\n    if (!(event.target instanceof Element) || !this.scene.isEditingEnabled) {\n      return;\n    }\n\n    let element: ElementState | undefined = this.findElementTarget(event.target);\n\n    if (!element) {\n      console.log('no element');\n      return;\n    }\n\n    if (this.isDrawingConnection) {\n      this.connectionTarget = element;\n    } else {\n      this.connectionSource = element;\n      if (!this.connectionSource) {\n        console.log('no connection source');\n        return;\n      }\n    }\n\n    const elementBoundingRect = element.div!.getBoundingClientRect();\n    const parentBoundingRect = this.scene.div?.getBoundingClientRect();\n\n    const relativeTop = elementBoundingRect.top - (parentBoundingRect?.top ?? 0);\n    const relativeLeft = elementBoundingRect.left - (parentBoundingRect?.left ?? 0);\n\n    if (this.connectionAnchorDiv) {\n      this.connectionAnchorDiv.style.display = 'none';\n      this.connectionAnchorDiv.style.display = 'block';\n      this.connectionAnchorDiv.style.top = `${relativeTop}px`;\n      this.connectionAnchorDiv.style.left = `${relativeLeft}px`;\n      this.connectionAnchorDiv.style.height = `${elementBoundingRect.height}px`;\n      this.connectionAnchorDiv.style.width = `${elementBoundingRect.width}px`;\n    }\n  };\n\n  // Return boolean indicates if connection anchors were hidden or not\n  handleMouseLeave = (event: React.MouseEvent | React.FocusEvent): boolean => {\n    // If mouse is leaving INTO the anchor image, don't remove div\n    if (\n      event.relatedTarget instanceof HTMLImageElement &&\n      event.relatedTarget.getAttribute('alt') === CONNECTION_ANCHOR_ALT\n    ) {\n      return false;\n    }\n\n    this.connectionTarget = undefined;\n    this.connectionAnchorDiv!.style.display = 'none';\n    return true;\n  };\n\n  connectionListener = (event: MouseEvent) => {\n    event.preventDefault();\n\n    if (!(this.connectionLine && this.scene.div && this.scene.div.parentElement)) {\n      return;\n    }\n\n    const parentBoundingRect = this.scene.div.parentElement.getBoundingClientRect();\n    const x = event.pageX - parentBoundingRect.x;\n    const y = event.pageY - parentBoundingRect.y;\n\n    this.connectionLine.setAttribute('x2', `${x}`);\n    this.connectionLine.setAttribute('y2', `${y}`);\n\n    const connectionLineX1 = this.connectionLine.x1.baseVal.value;\n    const connectionLineY1 = this.connectionLine.y1.baseVal.value;\n    if (!this.didConnectionLeaveHighlight) {\n      const connectionLength = Math.hypot(x - connectionLineX1, y - connectionLineY1);\n      if (connectionLength > CONNECTION_ANCHOR_HIGHLIGHT_OFFSET && this.connectionSVG) {\n        this.didConnectionLeaveHighlight = true;\n        this.connectionSVG.style.display = 'block';\n        this.isDrawingConnection = true;\n      }\n    }\n\n    if (!event.buttons) {\n      if (this.connectionSource && this.connectionSource.div && this.connectionSource.div.parentElement) {\n        const sourceRect = this.connectionSource.div.getBoundingClientRect();\n        const parentRect = this.connectionSource.div.parentElement.getBoundingClientRect();\n\n        const sourceVerticalCenter = sourceRect.top - parentRect.top + sourceRect.height / 2;\n        const sourceHorizontalCenter = sourceRect.left - parentRect.left + sourceRect.width / 2;\n\n        // Convert from DOM coords to connection coords\n        // TODO: Break this out into util function and add tests\n        const sourceX = (connectionLineX1 - sourceHorizontalCenter) / (sourceRect.width / 2);\n        const sourceY = (sourceVerticalCenter - connectionLineY1) / (sourceRect.height / 2);\n\n        let targetX;\n        let targetY;\n        let targetName;\n\n        if (this.connectionTarget && this.connectionTarget.div) {\n          const targetRect = this.connectionTarget.div.getBoundingClientRect();\n\n          const targetVerticalCenter = targetRect.top - parentRect.top + targetRect.height / 2;\n          const targetHorizontalCenter = targetRect.left - parentRect.left + targetRect.width / 2;\n\n          targetX = (x - targetHorizontalCenter) / (targetRect.width / 2);\n          targetY = (targetVerticalCenter - y) / (targetRect.height / 2);\n          targetName = this.connectionTarget.options.name;\n        } else {\n          const parentVerticalCenter = parentRect.height / 2;\n          const parentHorizontalCenter = parentRect.width / 2;\n\n          targetX = (x - parentHorizontalCenter) / (parentRect.width / 2);\n          targetY = (parentVerticalCenter - y) / (parentRect.height / 2);\n        }\n\n        const connection = {\n          source: {\n            x: sourceX,\n            y: sourceY,\n          },\n          target: {\n            x: targetX,\n            y: targetY,\n          },\n          targetName: targetName,\n          color: {\n            fixed: config.theme2.colors.text.primary,\n          },\n          size: {\n            fixed: 2,\n            min: 1,\n            max: 10,\n          },\n          path: ConnectionPath.Straight,\n        };\n\n        const { options } = this.connectionSource;\n        if (!options.connections) {\n          options.connections = [];\n        }\n        if (this.didConnectionLeaveHighlight) {\n          this.connectionSource.options.connections = [...options.connections, connection];\n          this.connectionSource.onChange(this.connectionSource.options);\n        }\n      }\n\n      if (this.connectionSVG) {\n        this.connectionSVG.style.display = 'none';\n      }\n\n      if (this.scene.selecto && this.scene.selecto.rootContainer) {\n        this.scene.selecto.rootContainer.style.cursor = 'default';\n        this.scene.selecto.rootContainer.removeEventListener('mousemove', this.connectionListener);\n      }\n\n      this.isDrawingConnection = false;\n      this.updateState();\n      this.scene.save();\n    }\n  };\n\n  handleConnectionDragStart = (selectedTarget: HTMLElement, clientX: number, clientY: number) => {\n    this.scene.selecto!.rootContainer!.style.cursor = 'crosshair';\n    if (this.connectionSVG && this.connectionLine && this.scene.div && this.scene.div.parentElement) {\n      const connectionStartTargetBox = selectedTarget.getBoundingClientRect();\n      const parentBoundingRect = this.scene.div.parentElement.getBoundingClientRect();\n\n      const x = connectionStartTargetBox.x - parentBoundingRect.x + CONNECTION_ANCHOR_HIGHLIGHT_OFFSET;\n      const y = connectionStartTargetBox.y - parentBoundingRect.y + CONNECTION_ANCHOR_HIGHLIGHT_OFFSET;\n\n      const mouseX = clientX - parentBoundingRect.x;\n      const mouseY = clientY - parentBoundingRect.y;\n\n      this.connectionLine.setAttribute('x1', `${x}`);\n      this.connectionLine.setAttribute('y1', `${y}`);\n      this.connectionLine.setAttribute('x2', `${mouseX}`);\n      this.connectionLine.setAttribute('y2', `${mouseY}`);\n      this.didConnectionLeaveHighlight = false;\n    }\n\n    this.scene.selecto?.rootContainer?.addEventListener('mousemove', this.connectionListener);\n  };\n\n  onChange = (current: ConnectionState, update: CanvasConnection) => {\n    const connections = current.source.options.connections?.splice(0) ?? [];\n    connections[current.index] = update;\n    current.source.onChange({ ...current.source.options, connections });\n    this.updateState();\n  };\n\n  // used for moveable actions\n  connectionsNeedUpdate = (element: ElementState): boolean => {\n    return isConnectionSource(element) || isConnectionTarget(element, this.scene.byName);\n  };\n\n  render() {\n    return (\n      <>\n        <ConnectionAnchors setRef={this.setConnectionAnchorRef} handleMouseLeave={this.handleMouseLeave} />\n        <ConnectionSVG setSVGRef={this.setConnectionSVGRef} setLineRef={this.setConnectionLineRef} scene={this.scene} />\n      </>\n    );\n  }\n}\n","import { MoveableManagerInterface, Renderer } from 'moveable';\n\nimport { HorizontalConstraint, VerticalConstraint } from '../types';\n\nimport { Scene } from './scene';\n\nexport const settingsViewable = (scene: Scene) => ({\n  name: 'settingsViewable',\n  props: {},\n  events: {},\n  render(moveable: MoveableManagerInterface<unknown, unknown>, React: Renderer) {\n    // If selection is more than 1 element don't display settings button\n    if (scene.selecto?.getSelectedTargets() && scene.selecto?.getSelectedTargets().length > 1) {\n      return;\n    }\n\n    const openSettings = (x: number, y: number) => {\n      const container = moveable.getContainer();\n      const evt = new PointerEvent('contextmenu', { clientX: x, clientY: y });\n      container.dispatchEvent(evt);\n    };\n\n    const onClick = (event: React.MouseEvent) => {\n      openSettings(event.clientX, event.clientY);\n    };\n\n    const onKeyPress = (event: React.KeyboardEvent) => {\n      if (event.key === 'Enter') {\n        const rect = event.currentTarget.getBoundingClientRect();\n        openSettings(rect.x, rect.y);\n      }\n    };\n\n    const rect = moveable.getRect();\n    return (\n      <div\n        key={'settings-viewable'}\n        className={'moveable-settings'}\n        style={{\n          position: 'absolute',\n          left: `${rect.width + 18}px`,\n          top: '0px',\n          color: 'white',\n          fontSize: '18px',\n          cursor: 'pointer',\n          userSelect: 'none',\n          willChange: 'transform',\n          transform: 'translate(-50%, 0px)',\n          zIndex: 100,\n        }}\n        onClick={onClick}\n        onKeyDown={onKeyPress}\n        role=\"button\"\n        tabIndex={0}\n      >\n        {``}\n        ⚙️\n        {``}\n      </div>\n    );\n  },\n});\n\nexport const dimensionViewable = {\n  name: 'dimensionViewable',\n  props: {},\n  events: {},\n  render(moveable: MoveableManagerInterface<unknown, unknown>, React: Renderer) {\n    const rect = moveable.getRect();\n    return (\n      <div\n        key={'dimension-viewable'}\n        className={'moveable-dimension'}\n        style={{\n          position: 'absolute',\n          left: `${rect.width / 2}px`,\n          top: `${rect.height + 20}px`,\n          background: '#4af',\n          borderRadius: '2px',\n          padding: '2px 4px',\n          color: 'white',\n          fontSize: '13px',\n          whiteSpace: 'nowrap',\n          fontWeight: 'bold',\n          willChange: 'transform',\n          transform: 'translate(-50%, 0px)',\n          zIndex: 100,\n        }}\n      >\n        {Math.round(rect.offsetWidth)} x {Math.round(rect.offsetHeight)}\n      </div>\n    );\n  },\n};\n\nexport const constraintViewable = (scene: Scene) => ({\n  name: 'constraintViewable',\n  props: {},\n  events: {},\n  render(moveable: MoveableManagerInterface<unknown, unknown>, React: Renderer) {\n    const rect = moveable.getRect();\n    const targetElement = scene.findElementByTarget(moveable.state.target!);\n\n    // If selection is more than 1 element don't display constraint visualizations\n    if (scene.selecto?.getSelectedTargets() && scene.selecto?.getSelectedTargets().length > 1) {\n      return;\n    }\n\n    let verticalConstraintVisualization = null;\n    let horizontalConstraintVisualization = null;\n\n    const constraint = targetElement?.tempConstraint ?? targetElement?.options.constraint ?? {};\n\n    const borderStyle = '1px dashed #4af';\n\n    const centerIndicatorLineOne = React.createElement('div', {\n      style: {\n        position: 'absolute',\n        left: `${rect.width / 2}px`,\n        top: `${rect.height / 2 - rect.height / 16}px`,\n        borderLeft: borderStyle,\n        height: `${rect.height / 8}px`,\n        transform: 'rotate(45deg)',\n      },\n    });\n\n    const centerIndicatorLineTwo = React.createElement('div', {\n      style: {\n        position: 'absolute',\n        left: `${rect.width / 2}px`,\n        top: `${rect.height / 2 - rect.height / 16}px`,\n        borderLeft: borderStyle,\n        height: `${rect.height / 8}px`,\n        transform: 'rotate(-45deg)',\n      },\n    });\n\n    const centerIndicator = React.createElement('div', {}, [centerIndicatorLineOne, centerIndicatorLineTwo]);\n\n    const verticalConstraintTop = React.createElement('div', {\n      style: {\n        position: 'absolute',\n        left: `${rect.width / 2}px`,\n        bottom: '0px',\n        borderLeft: borderStyle,\n        height: '100vh',\n      },\n    });\n\n    const verticalConstraintBottom = React.createElement('div', {\n      style: {\n        position: 'absolute',\n        left: `${rect.width / 2}px`,\n        top: `${rect.height}px`,\n        borderLeft: borderStyle,\n        height: '100vh',\n      },\n    });\n\n    const verticalConstraintTopBottom = React.createElement('div', {}, [\n      verticalConstraintTop,\n      verticalConstraintBottom,\n    ]);\n\n    const verticalConstraintCenterLine = React.createElement('div', {\n      style: {\n        position: 'absolute',\n        left: `${rect.width / 2}px`,\n        top: `${rect.height / 4}px`,\n        borderLeft: borderStyle,\n        height: `${rect.height / 2}px`,\n      },\n    });\n\n    const verticalConstraintCenter = React.createElement('div', {}, [verticalConstraintCenterLine, centerIndicator]);\n\n    switch (constraint.vertical) {\n      case VerticalConstraint.Top:\n        verticalConstraintVisualization = verticalConstraintTop;\n        break;\n      case VerticalConstraint.Bottom:\n        verticalConstraintVisualization = verticalConstraintBottom;\n        break;\n      case VerticalConstraint.TopBottom:\n        verticalConstraintVisualization = verticalConstraintTopBottom;\n        break;\n      case VerticalConstraint.Center:\n        verticalConstraintVisualization = verticalConstraintCenter;\n        break;\n    }\n\n    const horizontalConstraintLeft = React.createElement('div', {\n      style: {\n        position: 'absolute',\n        right: '0px',\n        top: `${rect.height / 2}px`,\n        borderTop: borderStyle,\n        width: '100vw',\n      },\n    });\n\n    const horizontalConstraintRight = React.createElement('div', {\n      style: {\n        position: 'absolute',\n        left: `${rect.width}px`,\n        top: `${rect.height / 2}px`,\n        borderTop: borderStyle,\n        width: '100vw',\n      },\n    });\n\n    const horizontalConstraintLeftRight = React.createElement('div', {}, [\n      horizontalConstraintLeft,\n      horizontalConstraintRight,\n    ]);\n\n    const horizontalConstraintCenterLine = React.createElement('div', {\n      style: {\n        position: 'absolute',\n        left: `${rect.width / 4}px`,\n        top: `${rect.height / 2}px`,\n        borderTop: borderStyle,\n        width: `${rect.width / 2}px`,\n      },\n    });\n\n    const horizontalConstraintCenter = React.createElement('div', {}, [\n      horizontalConstraintCenterLine,\n      centerIndicator,\n    ]);\n\n    switch (constraint.horizontal) {\n      case HorizontalConstraint.Left:\n        horizontalConstraintVisualization = horizontalConstraintLeft;\n        break;\n      case HorizontalConstraint.Right:\n        horizontalConstraintVisualization = horizontalConstraintRight;\n        break;\n      case HorizontalConstraint.LeftRight:\n        horizontalConstraintVisualization = horizontalConstraintLeftRight;\n        break;\n      case HorizontalConstraint.Center:\n        horizontalConstraintVisualization = horizontalConstraintCenter;\n        break;\n    }\n\n    const constraintVisualization = React.createElement('div', {}, [\n      verticalConstraintVisualization,\n      horizontalConstraintVisualization,\n    ]);\n\n    return constraintVisualization;\n  },\n});\n","import React from 'react';\n\nimport { CanvasElementOptions, CanvasFrameOptions } from 'app/features/canvas';\n\nimport { FrameState } from './frame';\nimport { Scene } from './scene';\n\nexport class RootElement extends FrameState {\n  constructor(\n    public options: CanvasFrameOptions,\n    public scene: Scene,\n    private changeCallback: () => void\n  ) {\n    super(options, scene);\n\n    this.sizeStyle = {\n      height: '100%',\n      width: '100%',\n    };\n  }\n\n  isRoot(): this is RootElement {\n    return true;\n  }\n\n  // root type can not change\n  onChange(options: CanvasElementOptions) {\n    this.revId++;\n    this.options = { ...options } as CanvasFrameOptions;\n    this.changeCallback();\n  }\n\n  getSaveModel(): CanvasFrameOptions {\n    const { placement, constraint, ...rest } = this.options;\n\n    return {\n      ...rest, // everything except placement & constraint\n      elements: this.elements.map((v) => v.getSaveModel()),\n    };\n  }\n\n  setRootRef = (target: HTMLDivElement) => {\n    this.div = target;\n  };\n\n  render() {\n    return (\n      <div\n        onContextMenu={(event) => event.preventDefault()}\n        key={this.UID}\n        ref={this.setRootRef}\n        style={{ ...this.sizeStyle, ...this.dataStyle }}\n      >\n        {this.elements.map((v) => v.render())}\n      </div>\n    );\n  }\n}\n","import { css } from '@emotion/css';\nimport Moveable from 'moveable';\nimport React, { CSSProperties } from 'react';\nimport { BehaviorSubject, ReplaySubject, Subject, Subscription } from 'rxjs';\nimport { first } from 'rxjs/operators';\nimport Selecto from 'selecto';\n\nimport { AppEvents, GrafanaTheme2, PanelData } from '@grafana/data';\nimport { locationService } from '@grafana/runtime/src';\nimport {\n  ColorDimensionConfig,\n  ResourceDimensionConfig,\n  ScalarDimensionConfig,\n  ScaleDimensionConfig,\n  TextDimensionConfig,\n} from '@grafana/schema';\nimport { Portal, stylesFactory } from '@grafana/ui';\nimport { config } from 'app/core/config';\nimport { CanvasFrameOptions, DEFAULT_CANVAS_ELEMENT_CONFIG } from 'app/features/canvas';\nimport { DimensionContext } from 'app/features/dimensions';\nimport {\n  getColorDimensionFromData,\n  getResourceDimensionFromData,\n  getScalarDimensionFromData,\n  getScaleDimensionFromData,\n  getTextDimensionFromData,\n} from 'app/features/dimensions/utils';\nimport { CanvasContextMenu } from 'app/plugins/panel/canvas/components/CanvasContextMenu';\nimport { CanvasTooltip } from 'app/plugins/panel/canvas/components/CanvasTooltip';\nimport { CONNECTION_ANCHOR_DIV_ID } from 'app/plugins/panel/canvas/components/connections/ConnectionAnchors';\nimport { Connections } from 'app/plugins/panel/canvas/components/connections/Connections';\nimport { AnchorPoint, CanvasTooltipPayload, LayerActionID } from 'app/plugins/panel/canvas/types';\n\nimport appEvents from '../../../core/app_events';\nimport { CanvasPanel } from '../../../plugins/panel/canvas/CanvasPanel';\nimport { HorizontalConstraint, Placement, VerticalConstraint } from '../types';\n\nimport { constraintViewable, dimensionViewable, settingsViewable } from './ables';\nimport { ElementState } from './element';\nimport { FrameState } from './frame';\nimport { RootElement } from './root';\n\nexport interface SelectionParams {\n  targets: Array<HTMLElement | SVGElement>;\n  frame?: FrameState;\n}\n\nexport class Scene {\n  styles = getStyles(config.theme2);\n  readonly selection = new ReplaySubject<ElementState[]>(1);\n  readonly moved = new Subject<number>(); // called after resize/drag for editor updates\n  readonly byName = new Map<string, ElementState>();\n\n  root: RootElement;\n\n  revId = 0;\n\n  width = 0;\n  height = 0;\n  style: CSSProperties = {};\n  data?: PanelData;\n  selecto?: Selecto;\n  moveable?: Moveable;\n  div?: HTMLDivElement;\n  connections: Connections;\n  currentLayer?: FrameState;\n  isEditingEnabled?: boolean;\n  shouldShowAdvancedTypes?: boolean;\n  skipNextSelectionBroadcast = false;\n  ignoreDataUpdate = false;\n  panel: CanvasPanel;\n\n  isPanelEditing = locationService.getSearchObject().editPanel !== undefined;\n\n  inlineEditingCallback?: () => void;\n  setBackgroundCallback?: (anchorPoint: AnchorPoint) => void;\n\n  tooltipCallback?: (tooltip: CanvasTooltipPayload | undefined) => void;\n  tooltip?: CanvasTooltipPayload;\n\n  moveableActionCallback?: (moved: boolean) => void;\n\n  readonly editModeEnabled = new BehaviorSubject<boolean>(false);\n  subscription: Subscription;\n\n  targetsToSelect = new Set<HTMLDivElement>();\n\n  constructor(\n    cfg: CanvasFrameOptions,\n    enableEditing: boolean,\n    showAdvancedTypes: boolean,\n    public onSave: (cfg: CanvasFrameOptions) => void,\n    panel: CanvasPanel\n  ) {\n    this.root = this.load(cfg, enableEditing, showAdvancedTypes);\n\n    this.subscription = this.editModeEnabled.subscribe((open) => {\n      if (!this.moveable || !this.isEditingEnabled) {\n        return;\n      }\n      this.moveable.draggable = !open;\n    });\n\n    this.panel = panel;\n    this.connections = new Connections(this);\n  }\n\n  getNextElementName = (isFrame = false) => {\n    const label = isFrame ? 'Frame' : 'Element';\n    let idx = this.byName.size + 1;\n\n    const max = idx + 100;\n    while (true && idx < max) {\n      const name = `${label} ${idx++}`;\n      if (!this.byName.has(name)) {\n        return name;\n      }\n    }\n\n    return `${label} ${Date.now()}`;\n  };\n\n  canRename = (v: string) => {\n    return !this.byName.has(v);\n  };\n\n  load(cfg: CanvasFrameOptions, enableEditing: boolean, showAdvancedTypes: boolean) {\n    this.root = new RootElement(\n      cfg ?? {\n        type: 'frame',\n        elements: [DEFAULT_CANVAS_ELEMENT_CONFIG],\n      },\n      this,\n      this.save // callback when changes are made\n    );\n\n    this.isEditingEnabled = enableEditing;\n    this.shouldShowAdvancedTypes = showAdvancedTypes;\n\n    setTimeout(() => {\n      if (this.div) {\n        // If editing is enabled, clear selecto instance\n        const destroySelecto = enableEditing;\n        this.initMoveable(destroySelecto, enableEditing);\n        this.currentLayer = this.root;\n        this.selection.next([]);\n        this.connections.select(undefined);\n        this.connections.updateState();\n      }\n    });\n    return this.root;\n  }\n\n  context: DimensionContext = {\n    getColor: (color: ColorDimensionConfig) => getColorDimensionFromData(this.data, color),\n    getScale: (scale: ScaleDimensionConfig) => getScaleDimensionFromData(this.data, scale),\n    getScalar: (scalar: ScalarDimensionConfig) => getScalarDimensionFromData(this.data, scalar),\n    getText: (text: TextDimensionConfig) => getTextDimensionFromData(this.data, text),\n    getResource: (res: ResourceDimensionConfig) => getResourceDimensionFromData(this.data, res),\n    getPanelData: () => this.data,\n  };\n\n  updateData(data: PanelData) {\n    this.data = data;\n    this.root.updateData(this.context);\n  }\n\n  updateSize(width: number, height: number) {\n    this.width = width;\n    this.height = height;\n    this.style = { width, height };\n\n    if (this.selecto?.getSelectedTargets().length) {\n      this.clearCurrentSelection();\n    }\n  }\n\n  frameSelection() {\n    this.selection.pipe(first()).subscribe((currentSelectedElements) => {\n      const currentLayer = currentSelectedElements[0].parent!;\n\n      const newLayer = new FrameState(\n        {\n          type: 'frame',\n          name: this.getNextElementName(true),\n          elements: [],\n        },\n        this,\n        currentSelectedElements[0].parent\n      );\n\n      const framePlacement = this.generateFrameContainer(currentSelectedElements);\n\n      newLayer.options.placement = framePlacement;\n\n      currentSelectedElements.forEach((element: ElementState) => {\n        const elementContainer = element.div?.getBoundingClientRect();\n        element.setPlacementFromConstraint(elementContainer, framePlacement as DOMRect);\n        currentLayer.doAction(LayerActionID.Delete, element);\n        newLayer.doAction(LayerActionID.Duplicate, element, false, false);\n      });\n\n      newLayer.setPlacementFromConstraint(framePlacement as DOMRect, currentLayer.div?.getBoundingClientRect());\n\n      currentLayer.elements.push(newLayer);\n\n      this.byName.set(newLayer.getName(), newLayer);\n\n      this.save();\n    });\n  }\n\n  private generateFrameContainer = (elements: ElementState[]): Placement => {\n    let minTop = Infinity;\n    let minLeft = Infinity;\n    let maxRight = 0;\n    let maxBottom = 0;\n\n    elements.forEach((element: ElementState) => {\n      const elementContainer = element.div?.getBoundingClientRect();\n\n      if (!elementContainer) {\n        return;\n      }\n\n      if (minTop > elementContainer.top) {\n        minTop = elementContainer.top;\n      }\n\n      if (minLeft > elementContainer.left) {\n        minLeft = elementContainer.left;\n      }\n\n      if (maxRight < elementContainer.right) {\n        maxRight = elementContainer.right;\n      }\n\n      if (maxBottom < elementContainer.bottom) {\n        maxBottom = elementContainer.bottom;\n      }\n    });\n\n    return {\n      top: minTop,\n      left: minLeft,\n      width: maxRight - minLeft,\n      height: maxBottom - minTop,\n    };\n  };\n\n  clearCurrentSelection(skipNextSelectionBroadcast = false) {\n    this.skipNextSelectionBroadcast = skipNextSelectionBroadcast;\n    let event: MouseEvent = new MouseEvent('click');\n    this.selecto?.clickTarget(event, this.div);\n  }\n\n  updateCurrentLayer(newLayer: FrameState) {\n    this.currentLayer = newLayer;\n    this.clearCurrentSelection();\n    this.save();\n  }\n\n  save = (updateMoveable = false) => {\n    this.onSave(this.root.getSaveModel());\n\n    if (updateMoveable) {\n      setTimeout(() => {\n        if (this.div) {\n          this.initMoveable(true, this.isEditingEnabled);\n        }\n      });\n    }\n  };\n\n  findElementByTarget = (target: Element): ElementState | undefined => {\n    // We will probably want to add memoization to this as we are calling on drag / resize\n\n    const stack = [...this.root.elements];\n    while (stack.length > 0) {\n      const currentElement = stack.shift();\n\n      if (currentElement && currentElement.div && currentElement.div === target) {\n        return currentElement;\n      }\n\n      const nestedElements = currentElement instanceof FrameState ? currentElement.elements : [];\n      for (const nestedElement of nestedElements) {\n        stack.unshift(nestedElement);\n      }\n    }\n\n    return undefined;\n  };\n\n  setNonTargetPointerEvents = (target: Element, disablePointerEvents: boolean) => {\n    const stack = [...this.root.elements];\n    while (stack.length > 0) {\n      const currentElement = stack.shift();\n\n      if (currentElement && currentElement.div && currentElement.div !== target) {\n        currentElement.applyLayoutStylesToDiv(disablePointerEvents);\n      }\n\n      const nestedElements = currentElement instanceof FrameState ? currentElement.elements : [];\n      for (const nestedElement of nestedElements) {\n        stack.unshift(nestedElement);\n      }\n    }\n  };\n\n  setRef = (sceneContainer: HTMLDivElement) => {\n    this.div = sceneContainer;\n  };\n\n  select = (selection: SelectionParams) => {\n    if (this.selecto) {\n      this.selecto.setSelectedTargets(selection.targets);\n      this.updateSelection(selection);\n      this.editModeEnabled.next(false);\n\n      // Hide connection anchors on programmatic select\n      if (this.connections.connectionAnchorDiv) {\n        this.connections.connectionAnchorDiv.style.display = 'none';\n      }\n    }\n  };\n\n  private updateSelection = (selection: SelectionParams) => {\n    this.moveable!.target = selection.targets;\n    if (this.skipNextSelectionBroadcast) {\n      this.skipNextSelectionBroadcast = false;\n      return;\n    }\n\n    if (selection.frame) {\n      this.selection.next([selection.frame]);\n    } else {\n      const s = selection.targets.map((t) => this.findElementByTarget(t)!);\n      this.selection.next(s);\n    }\n  };\n\n  private generateTargetElements = (rootElements: ElementState[]): HTMLDivElement[] => {\n    let targetElements: HTMLDivElement[] = [];\n\n    const stack = [...rootElements];\n    while (stack.length > 0) {\n      const currentElement = stack.shift();\n\n      if (currentElement && currentElement.div) {\n        targetElements.push(currentElement.div);\n      }\n\n      const nestedElements = currentElement instanceof FrameState ? currentElement.elements : [];\n      for (const nestedElement of nestedElements) {\n        stack.unshift(nestedElement);\n      }\n    }\n\n    return targetElements;\n  };\n\n  initMoveable = (destroySelecto = false, allowChanges = true) => {\n    const targetElements = this.generateTargetElements(this.root.elements);\n\n    if (destroySelecto && this.selecto) {\n      this.selecto.destroy();\n    }\n\n    this.selecto = new Selecto({\n      container: this.div,\n      rootContainer: this.div,\n      selectableTargets: targetElements,\n      toggleContinueSelect: 'shift',\n      selectFromInside: false,\n      hitRate: 0,\n    });\n\n    this.moveable = new Moveable(this.div!, {\n      draggable: allowChanges && !this.editModeEnabled.getValue(),\n      resizable: allowChanges,\n      ables: [dimensionViewable, constraintViewable(this), settingsViewable(this)],\n      props: {\n        dimensionViewable: allowChanges,\n        constraintViewable: allowChanges,\n        settingsViewable: allowChanges,\n      },\n      origin: false,\n      className: this.styles.selected,\n    })\n      .on('click', (event) => {\n        const targetedElement = this.findElementByTarget(event.target);\n        let elementSupportsEditing = false;\n        if (targetedElement) {\n          elementSupportsEditing = targetedElement.item.hasEditMode ?? false;\n        }\n\n        if (event.isDouble && allowChanges && !this.editModeEnabled.getValue() && elementSupportsEditing) {\n          this.editModeEnabled.next(true);\n        }\n      })\n      .on('clickGroup', (event) => {\n        this.selecto!.clickTarget(event.inputEvent, event.inputTarget);\n      })\n      .on('dragStart', (event) => {\n        this.ignoreDataUpdate = true;\n        this.setNonTargetPointerEvents(event.target, true);\n      })\n      .on('dragGroupStart', (event) => {\n        this.ignoreDataUpdate = true;\n      })\n      .on('drag', (event) => {\n        const targetedElement = this.findElementByTarget(event.target);\n        if (targetedElement) {\n          targetedElement.applyDrag(event);\n\n          if (this.connections.connectionsNeedUpdate(targetedElement) && this.moveableActionCallback) {\n            this.moveableActionCallback(true);\n          }\n        }\n      })\n      .on('dragGroup', (e) => {\n        let needsUpdate = false;\n        for (let event of e.events) {\n          const targetedElement = this.findElementByTarget(event.target);\n          if (targetedElement) {\n            targetedElement.applyDrag(event);\n            if (!needsUpdate) {\n              needsUpdate = this.connections.connectionsNeedUpdate(targetedElement);\n            }\n          }\n        }\n\n        if (needsUpdate && this.moveableActionCallback) {\n          this.moveableActionCallback(true);\n        }\n      })\n      .on('dragGroupEnd', (e) => {\n        e.events.forEach((event) => {\n          const targetedElement = this.findElementByTarget(event.target);\n          if (targetedElement) {\n            targetedElement.setPlacementFromConstraint();\n          }\n        });\n\n        this.moved.next(Date.now());\n        this.ignoreDataUpdate = false;\n      })\n      .on('dragEnd', (event) => {\n        const targetedElement = this.findElementByTarget(event.target);\n        if (targetedElement) {\n          targetedElement.setPlacementFromConstraint();\n        }\n\n        this.moved.next(Date.now());\n        this.ignoreDataUpdate = false;\n        this.setNonTargetPointerEvents(event.target, false);\n      })\n      .on('resizeStart', (event) => {\n        const targetedElement = this.findElementByTarget(event.target);\n\n        if (targetedElement) {\n          targetedElement.tempConstraint = { ...targetedElement.options.constraint };\n          targetedElement.options.constraint = {\n            vertical: VerticalConstraint.Top,\n            horizontal: HorizontalConstraint.Left,\n          };\n          targetedElement.setPlacementFromConstraint();\n        }\n      })\n      .on('resize', (event) => {\n        const targetedElement = this.findElementByTarget(event.target);\n        if (targetedElement) {\n          targetedElement.applyResize(event);\n\n          if (this.connections.connectionsNeedUpdate(targetedElement) && this.moveableActionCallback) {\n            this.moveableActionCallback(true);\n          }\n        }\n        this.moved.next(Date.now()); // TODO only on end\n      })\n      .on('resizeGroup', (e) => {\n        let needsUpdate = false;\n        for (let event of e.events) {\n          const targetedElement = this.findElementByTarget(event.target);\n          if (targetedElement) {\n            targetedElement.applyResize(event);\n\n            if (!needsUpdate) {\n              needsUpdate = this.connections.connectionsNeedUpdate(targetedElement);\n            }\n          }\n        }\n\n        if (needsUpdate && this.moveableActionCallback) {\n          this.moveableActionCallback(true);\n        }\n\n        this.moved.next(Date.now()); // TODO only on end\n      })\n      .on('resizeEnd', (event) => {\n        const targetedElement = this.findElementByTarget(event.target);\n\n        if (targetedElement) {\n          if (targetedElement.tempConstraint) {\n            targetedElement.options.constraint = targetedElement.tempConstraint;\n            targetedElement.tempConstraint = undefined;\n          }\n\n          targetedElement.setPlacementFromConstraint();\n        }\n      });\n\n    let targets: Array<HTMLElement | SVGElement> = [];\n    this.selecto!.on('dragStart', (event) => {\n      const selectedTarget = event.inputEvent.target;\n\n      // If selected target is a connection control, eject to handle connection event\n      if (selectedTarget.id === CONNECTION_ANCHOR_DIV_ID) {\n        this.connections.handleConnectionDragStart(selectedTarget, event.inputEvent.clientX, event.inputEvent.clientY);\n        event.stop();\n        return;\n      }\n\n      const isTargetMoveableElement =\n        this.moveable!.isMoveableElement(selectedTarget) ||\n        targets.some((target) => target === selectedTarget || target.contains(selectedTarget));\n\n      const isTargetAlreadySelected = this.selecto\n        ?.getSelectedTargets()\n        .includes(selectedTarget.parentElement.parentElement);\n\n      // Apply grabbing cursor while dragging, applyLayoutStylesToDiv() resets it to grab when done\n      if (\n        this.isEditingEnabled &&\n        !this.editModeEnabled.getValue() &&\n        isTargetMoveableElement &&\n        this.selecto?.getSelectedTargets().length\n      ) {\n        this.selecto.getSelectedTargets()[0].style.cursor = 'grabbing';\n      }\n\n      if (isTargetMoveableElement || isTargetAlreadySelected || !this.isEditingEnabled) {\n        // Prevent drawing selection box when selected target is a moveable element or already selected\n        event.stop();\n      }\n    })\n      .on('select', () => {\n        this.editModeEnabled.next(false);\n\n        // Hide connection anchors on select\n        if (this.connections.connectionAnchorDiv) {\n          this.connections.connectionAnchorDiv.style.display = 'none';\n        }\n      })\n      .on('selectEnd', (event) => {\n        targets = event.selected;\n        this.updateSelection({ targets });\n\n        if (event.isDragStart) {\n          if (this.isEditingEnabled && !this.editModeEnabled.getValue() && this.selecto?.getSelectedTargets().length) {\n            this.selecto.getSelectedTargets()[0].style.cursor = 'grabbing';\n          }\n          event.inputEvent.preventDefault();\n          event.data.timer = setTimeout(() => {\n            this.moveable!.dragStart(event.inputEvent);\n          });\n        }\n      })\n      .on('dragEnd', (event) => {\n        clearTimeout(event.data.timer);\n      });\n  };\n\n  reorderElements = (src: ElementState, dest: ElementState, dragToGap: boolean, destPosition: number) => {\n    switch (dragToGap) {\n      case true:\n        switch (destPosition) {\n          case -1:\n            // top of the tree\n            if (src.parent instanceof FrameState) {\n              // move outside the frame\n              if (dest.parent) {\n                this.updateElements(src, dest.parent, dest.parent.elements.length);\n                src.updateData(dest.parent.scene.context);\n              }\n            } else {\n              dest.parent?.reorderTree(src, dest, true);\n            }\n            break;\n          default:\n            if (dest.parent) {\n              this.updateElements(src, dest.parent, dest.parent.elements.indexOf(dest));\n              src.updateData(dest.parent.scene.context);\n            }\n            break;\n        }\n        break;\n      case false:\n        if (dest instanceof FrameState) {\n          if (src.parent === dest) {\n            // same frame parent\n            src.parent?.reorderTree(src, dest, true);\n          } else {\n            this.updateElements(src, dest);\n            src.updateData(dest.scene.context);\n          }\n        } else if (src.parent === dest.parent) {\n          src.parent?.reorderTree(src, dest);\n        } else {\n          if (dest.parent) {\n            this.updateElements(src, dest.parent);\n            src.updateData(dest.parent.scene.context);\n          }\n        }\n        break;\n    }\n  };\n\n  private updateElements = (src: ElementState, dest: FrameState | RootElement, idx: number | null = null) => {\n    src.parent?.doAction(LayerActionID.Delete, src);\n    src.parent = dest;\n\n    const elementContainer = src.div?.getBoundingClientRect();\n    src.setPlacementFromConstraint(elementContainer, dest.div?.getBoundingClientRect());\n\n    const destIndex = idx ?? dest.elements.length - 1;\n    dest.elements.splice(destIndex, 0, src);\n    dest.scene.save();\n\n    dest.reinitializeMoveable();\n  };\n\n  addToSelection = () => {\n    try {\n      let selection: SelectionParams = { targets: [] };\n      selection.targets = [...this.targetsToSelect];\n      this.select(selection);\n    } catch (error) {\n      appEvents.emit(AppEvents.alertError, ['Unable to add to selection']);\n    }\n  };\n\n  render() {\n    const canShowContextMenu = this.isPanelEditing || (!this.isPanelEditing && this.isEditingEnabled);\n    const isTooltipValid = (this.tooltip?.element?.data?.links?.length ?? 0) > 0;\n    const canShowElementTooltip = !this.isEditingEnabled && isTooltipValid;\n\n    return (\n      <div key={this.revId} className={this.styles.wrap} style={this.style} ref={this.setRef}>\n        {this.connections.render()}\n        {this.root.render()}\n        {canShowContextMenu && (\n          <Portal>\n            <CanvasContextMenu scene={this} panel={this.panel} />\n          </Portal>\n        )}\n        {canShowElementTooltip && (\n          <Portal>\n            <CanvasTooltip scene={this} />\n          </Portal>\n        )}\n      </div>\n    );\n  }\n}\n\nconst getStyles = stylesFactory((theme: GrafanaTheme2) => ({\n  wrap: css`\n    overflow: hidden;\n    position: relative;\n  `,\n  selected: css`\n    z-index: 999 !important;\n  `,\n}));\n","import { css } from '@emotion/css';\nimport React, { useState } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { ResourceDimensionMode } from '@grafana/schema';\nimport { Portal, useTheme2 } from '@grafana/ui';\nimport { Scene } from 'app/features/canvas/runtime/scene';\nimport { MediaType, ResourceFolderName } from 'app/features/dimensions';\nimport { ResourcePickerPopover } from 'app/features/dimensions/editors/ResourcePickerPopover';\n\nimport { AnchorPoint } from '../types';\n\ntype Props = {\n  onClose: () => void;\n  scene: Scene;\n  anchorPoint: AnchorPoint;\n};\n\nexport function SetBackground({ onClose, scene, anchorPoint }: Props) {\n  const defaultValue = scene.root.options.background?.image?.fixed ?? '';\n\n  const [bgImage, setBgImage] = useState(defaultValue);\n  const theme = useTheme2();\n  const styles = getStyles(theme, anchorPoint);\n\n  const onChange = (value: string | undefined) => {\n    if (value) {\n      setBgImage(value);\n      if (scene.root) {\n        scene.root.options.background = {\n          ...scene.root.options.background,\n          image: { mode: ResourceDimensionMode.Fixed, fixed: value },\n        };\n        scene.revId++;\n        scene.save();\n\n        scene.root.reinitializeMoveable();\n      }\n\n      // Force a re-render (update scene data after config update)\n      if (scene) {\n        scene.updateData(scene.data!);\n      }\n    }\n\n    onClose();\n  };\n\n  return (\n    <Portal className={styles.portalWrapper}>\n      <ResourcePickerPopover\n        onChange={onChange}\n        value={bgImage}\n        mediaType={MediaType.Image}\n        folderName={ResourceFolderName.IOT}\n      />\n    </Portal>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2, anchorPoint: AnchorPoint) => ({\n  portalWrapper: css({\n    width: '315px',\n    height: '445px',\n    transform: `translate(${anchorPoint.x}px, ${anchorPoint.y - 200}px)`,\n  }),\n});\n","import React, { useCallback } from 'react';\n\nimport { SelectableValue, StandardEditorProps } from '@grafana/data';\nimport { InlineField, InlineFieldRow, RadioButtonGroup } from '@grafana/ui/src';\nimport { BackgroundImageSize } from 'app/features/canvas';\n\nconst options: Array<SelectableValue<BackgroundImageSize>> = [\n  { value: BackgroundImageSize.Original, label: 'Original' },\n  { value: BackgroundImageSize.Contain, label: 'Contain' },\n  { value: BackgroundImageSize.Cover, label: 'Cover' },\n  { value: BackgroundImageSize.Fill, label: 'Fill' },\n  { value: BackgroundImageSize.Tile, label: 'Tile' },\n];\n\nexport const BackgroundSizeEditor = ({ value, onChange }: StandardEditorProps<string, undefined, undefined>) => {\n  const imageSize = value ?? BackgroundImageSize.Cover;\n\n  const onImageSizeChange = useCallback(\n    (size: string) => {\n      onChange(size);\n    },\n    [onChange]\n  );\n\n  return (\n    <InlineFieldRow>\n      <InlineField grow={true}>\n        <RadioButtonGroup value={imageSize} options={options} onChange={onImageSizeChange} fullWidth />\n      </InlineField>\n    </InlineFieldRow>\n  );\n};\n","import { PanelOptionsSupplier } from '@grafana/data/src/panel/PanelPlugin';\nimport { CanvasConnection, CanvasElementOptions } from 'app/features/canvas';\nimport { ColorDimensionEditor, ResourceDimensionEditor, ScaleDimensionEditor } from 'app/features/dimensions/editors';\nimport { BackgroundSizeEditor } from 'app/features/dimensions/editors/BackgroundSizeEditor';\n\ninterface OptionSuppliers {\n  addBackground: PanelOptionsSupplier<CanvasElementOptions>;\n  addBorder: PanelOptionsSupplier<CanvasElementOptions>;\n  addColor: PanelOptionsSupplier<CanvasConnection>;\n  addSize: PanelOptionsSupplier<CanvasConnection>;\n}\n\nconst getCategoryName = (str: string, type: string | undefined) => {\n  if (type !== 'frame' && type !== undefined) {\n    return [str + ` (${type})`];\n  }\n  return [str];\n};\n\nexport const optionBuilder: OptionSuppliers = {\n  addBackground: (builder, context) => {\n    const category = getCategoryName('Background', context.options?.type);\n    builder\n      .addCustomEditor({\n        category,\n        id: 'background.color',\n        path: 'background.color',\n        name: 'Color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {\n          // Configured values\n          fixed: '',\n        },\n      })\n      .addCustomEditor({\n        category,\n        id: 'background.image',\n        path: 'background.image',\n        name: 'Image',\n        editor: ResourceDimensionEditor,\n        settings: {\n          resourceType: 'image',\n        },\n      })\n      .addCustomEditor({\n        category,\n        id: 'background.size',\n        path: 'background.size',\n        name: 'Image size',\n        editor: BackgroundSizeEditor,\n        settings: {\n          resourceType: 'image',\n        },\n      });\n  },\n\n  addBorder: (builder, context) => {\n    const category = getCategoryName('Border', context.options?.type);\n    builder.addSliderInput({\n      category,\n      path: 'border.width',\n      name: 'Width',\n      defaultValue: 2,\n      settings: {\n        min: 0,\n        max: 20,\n      },\n    });\n\n    if (context.options?.border?.width) {\n      builder.addCustomEditor({\n        category,\n        id: 'border.color',\n        path: 'border.color',\n        name: 'Color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {\n          // Configured values\n          fixed: '',\n        },\n      });\n    }\n  },\n\n  addColor: (builder, context) => {\n    const category = ['Color'];\n    builder.addCustomEditor({\n      category,\n      id: 'color',\n      path: 'color',\n      name: 'Color',\n      editor: ColorDimensionEditor,\n      settings: {},\n      defaultValue: {\n        // Configured values\n        fixed: '',\n      },\n    });\n  },\n\n  addSize: (builder, context) => {\n    const category = ['Size'];\n    builder.addCustomEditor({\n      category,\n      id: 'size',\n      path: 'size',\n      name: 'Size',\n      editor: ScaleDimensionEditor,\n      settings: {\n        min: 1,\n        max: 10,\n      },\n      defaultValue: {\n        // Configured values\n        fixed: 2,\n        min: 1,\n        max: 10,\n      },\n    });\n  },\n};\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport { Constraint, HorizontalConstraint, VerticalConstraint } from 'app/features/canvas';\n\ninterface Props {\n  onVerticalConstraintChange: (v: VerticalConstraint) => void;\n  onHorizontalConstraintChange: (h: HorizontalConstraint) => void;\n  currentConstraints: Constraint;\n}\n\nexport const ConstraintSelectionBox = ({\n  onVerticalConstraintChange,\n  onHorizontalConstraintChange,\n  currentConstraints,\n}: Props) => {\n  const styles = useStyles2(getStyles(currentConstraints));\n\n  const onClickTopConstraint = () => {\n    onVerticalConstraintChange(VerticalConstraint.Top);\n  };\n\n  const onClickBottomConstraint = () => {\n    onVerticalConstraintChange(VerticalConstraint.Bottom);\n  };\n\n  const onClickVerticalCenterConstraint = () => {\n    onVerticalConstraintChange(VerticalConstraint.Center);\n  };\n\n  const onClickLeftConstraint = () => {\n    onHorizontalConstraintChange(HorizontalConstraint.Left);\n  };\n\n  const onClickRightConstraint = () => {\n    onHorizontalConstraintChange(HorizontalConstraint.Right);\n  };\n\n  const onClickHorizontalCenterConstraint = () => {\n    onHorizontalConstraintChange(HorizontalConstraint.Center);\n  };\n\n  return (\n    <svg\n      version=\"1.0\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"75.000000pt\"\n      height=\"75.000000pt\"\n      viewBox=\"0 0 228.000000 228.000000\"\n      preserveAspectRatio=\"xMidYMid meet\"\n      style={{ marginBottom: '4.8px' }}\n    >\n      <g transform=\"translate(0.000000,228.000000) scale(0.100000,-0.100000)\" fill=\"#000000\" stroke=\"none\">\n        <path\n          fill=\"#e5e5e5\"\n          d=\"M198 2028 l-28 -32 0 -912 0 -912 31 -31 31 -31 915 0 915 0 29 29\n29 29 0 917 0 917 -27 29 -28 29 -920 0 -920 0 -27 -32z m1876 -17 c15 -16 16\n-98 16 -927 0 -860 -1 -909 -18 -926 -17 -17 -66 -18 -927 -18 -862 0 -910 1\n-927 18 -17 17 -18 65 -18 926 0 832 1 911 16 927 16 18 45 19 468 21 248 2\n659 2 912 0 431 -2 462 -4 478 -21z\"\n        />\n        <rect className={styles.topConstraint} height=\"228\" width=\"46\" y=\"1735\" x=\"1123\" />\n        <rect\n          className={styles.constraintHover}\n          onClick={onClickTopConstraint}\n          height=\"350\"\n          width=\"300\"\n          y=\"1680\"\n          x=\"995\"\n          fill=\"transparent\"\n        />\n        <rect className={styles.bottomConstraint} height=\"228\" width=\"46\" y=\"210\" x=\"1123\" />\n        <rect\n          className={styles.constraintHover}\n          onClick={onClickBottomConstraint}\n          height=\"350\"\n          width=\"300\"\n          y=\"135\"\n          x=\"995\"\n          fill=\"transparent\"\n        />\n        <rect className={styles.leftConstraint} height=\"46\" width=\"228\" y=\"1060\" x=\"265\" />\n        <rect\n          className={styles.constraintHover}\n          onClick={onClickLeftConstraint}\n          height=\"300\"\n          width=\"350\"\n          y=\"925\"\n          x=\"200\"\n          fill=\"transparent\"\n        />\n        <rect className={styles.rightConstraint} height=\"46\" width=\"228\" y=\"1060\" x=\"1795\" />\n        <rect\n          className={styles.constraintHover}\n          onClick={onClickRightConstraint}\n          height=\"300\"\n          width=\"350\"\n          y=\"925\"\n          x=\"1730\"\n          fill=\"transparent\"\n        />\n        <path\n          className={styles.box}\n          d=\"M568 1669 c-17 -9 -18 -48 -18 -584 0 -558 1 -575 19 -585 27 -14\n1125 -14 1152 0 18 10 19 27 19 580 0 504 -2 570 -16 584 -14 14 -80 16 -577\n16 -363 -1 -568 -4 -579 -11z m1119 -42 c4 -5 4 -1079 0 -1084 -5 -4 -1079 -4\n-1084 0 -5 6 -4 1077 1 1085 4 7 1076 6 1083 -1z\"\n        />\n        <rect className={styles.verticalCenterConstraint} height=\"456\" width=\"46\" y=\"855\" x=\"1123\" />\n        <rect\n          className={styles.constraintHover}\n          onClick={onClickVerticalCenterConstraint}\n          height=\"660\"\n          width=\"300\"\n          y=\"750\"\n          x=\"995\"\n          fill=\"transparent\"\n        />\n        <rect className={styles.horizontalCenterConstraint} height=\"46\" width=\"456\" y=\"1060\" x=\"918\" />\n        <rect\n          className={styles.constraintHover}\n          onClick={onClickHorizontalCenterConstraint}\n          height=\"300\"\n          width=\"660\"\n          y=\"925\"\n          x=\"815\"\n          fill=\"transparent\"\n        />\n      </g>\n    </svg>\n  );\n};\n\nconst getStyles = (currentConstraints: Constraint) => (theme: GrafanaTheme2) => {\n  const HOVER_COLOR = '#daebf7';\n  const HOVER_OPACITY = '0.6';\n  const SELECTED_COLOR = '#0d99ff';\n\n  const selectionBoxColor = theme.isDark ? '#ffffff' : '#000000';\n\n  return {\n    constraintHover: css({\n      '&:hover': {\n        fill: HOVER_COLOR,\n        fillOpacity: HOVER_OPACITY,\n      },\n    }),\n    topConstraint: css({\n      ...(currentConstraints.vertical === VerticalConstraint.Top ||\n      currentConstraints.vertical === VerticalConstraint.TopBottom\n        ? {\n            width: '92pt',\n            x: '1085',\n            fill: SELECTED_COLOR,\n          }\n        : {\n            fill: selectionBoxColor,\n          }),\n    }),\n    bottomConstraint: css({\n      ...(currentConstraints.vertical === VerticalConstraint.Bottom ||\n      currentConstraints.vertical === VerticalConstraint.TopBottom\n        ? {\n            width: '92pt',\n            x: '1085',\n            fill: SELECTED_COLOR,\n          }\n        : {\n            fill: selectionBoxColor,\n          }),\n    }),\n    leftConstraint: css({\n      ...(currentConstraints.horizontal === HorizontalConstraint.Left ||\n      currentConstraints.horizontal === HorizontalConstraint.LeftRight\n        ? {\n            height: '92pt',\n            y: '1014',\n            fill: SELECTED_COLOR,\n          }\n        : {\n            fill: selectionBoxColor,\n          }),\n    }),\n    rightConstraint: css({\n      ...(currentConstraints.horizontal === HorizontalConstraint.Right ||\n      currentConstraints.horizontal === HorizontalConstraint.LeftRight\n        ? {\n            height: '92pt',\n            y: '1014',\n            fill: SELECTED_COLOR,\n          }\n        : {\n            fill: selectionBoxColor,\n          }),\n    }),\n    horizontalCenterConstraint: css({\n      ...(currentConstraints.horizontal === HorizontalConstraint.Center\n        ? {\n            height: '92pt',\n            y: '1014',\n            fill: SELECTED_COLOR,\n          }\n        : {\n            fill: selectionBoxColor,\n          }),\n    }),\n    verticalCenterConstraint: css({\n      ...(currentConstraints.vertical === VerticalConstraint.Center\n        ? {\n            width: '92pt',\n            x: '1085',\n            fill: SELECTED_COLOR,\n          }\n        : {\n            fill: selectionBoxColor,\n          }),\n    }),\n    box: css({\n      fill: selectionBoxColor,\n    }),\n  };\n};\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data/src';\nimport { IconButton, useStyles2 } from '@grafana/ui/src';\nimport { HorizontalConstraint, Placement, QuickPlacement, VerticalConstraint } from 'app/features/canvas';\nimport { ElementState } from 'app/features/canvas/runtime/element';\n\nimport { CanvasEditorOptions } from './elementEditor';\n\ntype Props = {\n  onPositionChange: (value: number | undefined, placement: keyof Placement) => void;\n  element: ElementState;\n  settings: CanvasEditorOptions;\n};\n\nexport const QuickPositioning = ({ onPositionChange, element, settings }: Props) => {\n  const styles = useStyles2(getStyles);\n\n  const onQuickPositioningChange = (position: QuickPlacement) => {\n    const defaultConstraint = { vertical: VerticalConstraint.Top, horizontal: HorizontalConstraint.Left };\n    const originalConstraint = { ...element.options.constraint };\n\n    element.options.constraint = defaultConstraint;\n    element.setPlacementFromConstraint();\n\n    switch (position) {\n      case QuickPlacement.Top:\n        onPositionChange(0, 'top');\n        break;\n      case QuickPlacement.Bottom:\n        onPositionChange(getRightBottomPosition(element.options.placement?.height ?? 0, 'bottom'), 'top');\n        break;\n      case QuickPlacement.VerticalCenter:\n        onPositionChange(getCenterPosition(element.options.placement?.height ?? 0, 'v'), 'top');\n        break;\n      case QuickPlacement.Left:\n        onPositionChange(0, 'left');\n        break;\n      case QuickPlacement.Right:\n        onPositionChange(getRightBottomPosition(element.options.placement?.width ?? 0, 'right'), 'left');\n        break;\n      case QuickPlacement.HorizontalCenter:\n        onPositionChange(getCenterPosition(element.options.placement?.width ?? 0, 'h'), 'left');\n        break;\n    }\n\n    element.options.constraint = originalConstraint;\n    element.setPlacementFromConstraint();\n  };\n\n  // Basing this on scene will mean that center is based on root for the time being\n  const getCenterPosition = (elementSize: number, align: 'h' | 'v') => {\n    const sceneSize = align === 'h' ? settings.scene.width : settings.scene.height;\n\n    return (sceneSize - elementSize) / 2;\n  };\n\n  const getRightBottomPosition = (elementSize: number, align: 'right' | 'bottom') => {\n    const sceneSize = align === 'right' ? settings.scene.width : settings.scene.height;\n\n    return sceneSize - elementSize;\n  };\n\n  return (\n    <div className={styles.buttonGroup}>\n      <IconButton\n        name=\"horizontal-align-left\"\n        onClick={() => onQuickPositioningChange(QuickPlacement.Left)}\n        className={styles.button}\n        size=\"lg\"\n        tooltip=\"Align left\"\n      />\n      <IconButton\n        name=\"horizontal-align-center\"\n        onClick={() => onQuickPositioningChange(QuickPlacement.HorizontalCenter)}\n        className={styles.button}\n        size=\"lg\"\n        tooltip=\"Align horizontal centers\"\n      />\n      <IconButton\n        name=\"horizontal-align-right\"\n        onClick={() => onQuickPositioningChange(QuickPlacement.Right)}\n        className={styles.button}\n        size=\"lg\"\n        tooltip=\"Align right\"\n      />\n      <IconButton\n        name=\"vertical-align-top\"\n        onClick={() => onQuickPositioningChange(QuickPlacement.Top)}\n        size=\"lg\"\n        tooltip=\"Align top\"\n      />\n      <IconButton\n        name=\"vertical-align-center\"\n        onClick={() => onQuickPositioningChange(QuickPlacement.VerticalCenter)}\n        className={styles.button}\n        size=\"lg\"\n        tooltip=\"Align vertical centers\"\n      />\n      <IconButton\n        name=\"vertical-align-bottom\"\n        onClick={() => onQuickPositioningChange(QuickPlacement.Bottom)}\n        className={styles.button}\n        size=\"lg\"\n        tooltip=\"Align bottom\"\n      />\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  buttonGroup: css({\n    display: 'flex',\n    flexWrap: 'wrap',\n    padding: '12px 0 12px 0',\n  }),\n  button: css({\n    marginLeft: '5px',\n    marginRight: '5px',\n  }),\n});\n","import React from 'react';\nimport { useObservable } from 'react-use';\nimport { Subject } from 'rxjs';\n\nimport { SelectableValue, StandardEditorProps } from '@grafana/data';\nimport { Field, HorizontalGroup, Icon, InlineField, InlineFieldRow, Select, VerticalGroup } from '@grafana/ui';\nimport { NumberInput } from 'app/core/components/OptionsUI/NumberInput';\nimport { HorizontalConstraint, Placement, VerticalConstraint } from 'app/features/canvas';\n\nimport { Options } from '../../panelcfg.gen';\n\nimport { ConstraintSelectionBox } from './ConstraintSelectionBox';\nimport { QuickPositioning } from './QuickPositioning';\nimport { CanvasEditorOptions } from './elementEditor';\n\nconst places: Array<keyof Placement> = ['top', 'left', 'bottom', 'right', 'width', 'height'];\n\nconst horizontalOptions: Array<SelectableValue<HorizontalConstraint>> = [\n  { label: 'Left', value: HorizontalConstraint.Left },\n  { label: 'Right', value: HorizontalConstraint.Right },\n  { label: 'Left & right', value: HorizontalConstraint.LeftRight },\n  { label: 'Center', value: HorizontalConstraint.Center },\n  { label: 'Scale', value: HorizontalConstraint.Scale },\n];\n\nconst verticalOptions: Array<SelectableValue<VerticalConstraint>> = [\n  { label: 'Top', value: VerticalConstraint.Top },\n  { label: 'Bottom', value: VerticalConstraint.Bottom },\n  { label: 'Top & bottom', value: VerticalConstraint.TopBottom },\n  { label: 'Center', value: VerticalConstraint.Center },\n  { label: 'Scale', value: VerticalConstraint.Scale },\n];\n\ntype Props = StandardEditorProps<any, CanvasEditorOptions, Options>;\n\nexport function PlacementEditor({ item }: Props) {\n  const settings = item.settings;\n\n  // Will force a rerender whenever the subject changes\n  useObservable(settings?.scene ? settings.scene.moved : new Subject());\n\n  if (!settings) {\n    return <div>Loading...</div>;\n  }\n\n  const element = settings.element;\n  if (!element) {\n    return <div>???</div>;\n  }\n  const { options } = element;\n  const { placement, constraint: layout } = options;\n\n  const reselectElementAfterChange = () => {\n    setTimeout(() => {\n      settings.scene.select({ targets: [element.div!] });\n    });\n  };\n\n  const onHorizontalConstraintSelect = (h: SelectableValue<HorizontalConstraint>) => {\n    onHorizontalConstraintChange(h.value!);\n  };\n\n  const onHorizontalConstraintChange = (h: HorizontalConstraint) => {\n    element.options.constraint!.horizontal = h;\n    element.setPlacementFromConstraint();\n    settings.scene.revId++;\n    settings.scene.save(true);\n    reselectElementAfterChange();\n  };\n\n  const onVerticalConstraintSelect = (v: SelectableValue<VerticalConstraint>) => {\n    onVerticalConstraintChange(v.value!);\n  };\n\n  const onVerticalConstraintChange = (v: VerticalConstraint) => {\n    element.options.constraint!.vertical = v;\n    element.setPlacementFromConstraint();\n    settings.scene.revId++;\n    settings.scene.save(true);\n    reselectElementAfterChange();\n  };\n\n  const onPositionChange = (value: number | undefined, placement: keyof Placement) => {\n    element.options.placement![placement] = value ?? element.options.placement![placement];\n    element.applyLayoutStylesToDiv();\n    settings.scene.clearCurrentSelection(true);\n    reselectElementAfterChange();\n  };\n\n  const constraint = element.tempConstraint ?? layout ?? {};\n\n  return (\n    <div>\n      <QuickPositioning onPositionChange={onPositionChange} settings={settings} element={element} />\n      <br />\n      <Field label=\"Constraints\">\n        <HorizontalGroup>\n          <ConstraintSelectionBox\n            onVerticalConstraintChange={onVerticalConstraintChange}\n            onHorizontalConstraintChange={onHorizontalConstraintChange}\n            currentConstraints={constraint}\n          />\n          <VerticalGroup>\n            <HorizontalGroup>\n              <Icon name=\"arrows-h\" />\n              <Select\n                options={horizontalOptions}\n                onChange={onHorizontalConstraintSelect}\n                value={constraint.horizontal}\n              />\n            </HorizontalGroup>\n            <HorizontalGroup>\n              <Icon name=\"arrows-v\" />\n              <Select options={verticalOptions} onChange={onVerticalConstraintSelect} value={constraint.vertical} />\n            </HorizontalGroup>\n          </VerticalGroup>\n        </HorizontalGroup>\n      </Field>\n\n      <br />\n\n      <Field label=\"Position\">\n        <>\n          {places.map((p) => {\n            const v = placement![p];\n            if (v == null) {\n              return null;\n            }\n            return (\n              <InlineFieldRow key={p}>\n                <InlineField label={p} labelWidth={8} grow={true}>\n                  <NumberInput value={v} onChange={(v) => onPositionChange(v, p)} />\n                </InlineField>\n              </InlineFieldRow>\n            );\n          })}\n        </>\n      </Field>\n    </div>\n  );\n}\n","import { get as lodashGet } from 'lodash';\n\nimport { NestedPanelOptions, NestedValueAccess } from '@grafana/data/src/utils/OptionsUIBuilders';\nimport {\n  CanvasElementOptions,\n  canvasElementRegistry,\n  DEFAULT_CANVAS_ELEMENT_CONFIG,\n  defaultElementItems,\n} from 'app/features/canvas';\nimport { ElementState } from 'app/features/canvas/runtime/element';\nimport { FrameState } from 'app/features/canvas/runtime/frame';\nimport { Scene } from 'app/features/canvas/runtime/scene';\nimport { setOptionImmutably } from 'app/features/dashboard/components/PanelEditor/utils';\n\nimport { getElementTypes } from '../../utils';\nimport { optionBuilder } from '../options';\n\nimport { PlacementEditor } from './PlacementEditor';\n\nexport interface CanvasEditorOptions {\n  element: ElementState;\n  scene: Scene;\n  category?: string[];\n}\n\nexport interface TreeViewEditorProps {\n  scene: Scene;\n  layer: FrameState;\n  selected: ElementState[];\n}\n\nexport function getElementEditor(opts: CanvasEditorOptions): NestedPanelOptions<CanvasElementOptions> {\n  return {\n    category: opts.category,\n    path: '--', // not used!\n\n    // Note that canvas editor writes things to the scene!\n    values: (parent: NestedValueAccess) => ({\n      getValue: (path) => {\n        return lodashGet(opts.element.options, path);\n      },\n      onChange: (path, value) => {\n        let options = opts.element.options;\n        if (path === 'type' && value) {\n          const layer = canvasElementRegistry.getIfExists(value);\n          if (!layer) {\n            console.warn('layer does not exist', value);\n            return;\n          }\n          options = {\n            ...options,\n            ...layer.getNewOptions(options),\n            type: layer.id,\n          };\n        } else {\n          options = setOptionImmutably(options, path, value);\n        }\n        opts.element.onChange(options);\n        opts.element.updateData(opts.scene.context);\n      },\n    }),\n\n    // Dynamically fill the selected element\n    build: (builder, context) => {\n      const { options } = opts.element;\n      const current = options?.type ? options.type : DEFAULT_CANVAS_ELEMENT_CONFIG.type;\n      const layerTypes = getElementTypes(opts.scene.shouldShowAdvancedTypes, current).options;\n\n      const isUnsupported =\n        !opts.scene.shouldShowAdvancedTypes && !defaultElementItems.filter((item) => item.id === options?.type).length;\n\n      builder.addSelect({\n        path: 'type',\n        name: undefined as any, // required, but hide space\n        settings: {\n          options: layerTypes,\n        },\n        description: isUnsupported\n          ? 'Selected element type is not supported by current settings. Please enable advanced element types.'\n          : '',\n      });\n\n      // force clean layer configuration\n      const layer = canvasElementRegistry.getIfExists(options?.type ?? DEFAULT_CANVAS_ELEMENT_CONFIG.type)!;\n      let currentOptions = options;\n      if (!currentOptions) {\n        currentOptions = {\n          ...layer.getNewOptions(options),\n          type: layer.id,\n          name: `Element ${Date.now()}.${Math.floor(Math.random() * 100)}`,\n        };\n      }\n      const ctx = { ...context, options: currentOptions };\n\n      if (layer?.registerOptionsUI) {\n        layer.registerOptionsUI(builder, ctx);\n      }\n\n      const shouldAddLayoutEditor = opts.element.item.standardEditorConfig?.layout ?? true;\n      if (shouldAddLayoutEditor) {\n        builder.addCustomEditor({\n          category: ['Layout'],\n          id: 'content',\n          path: '__', // not used\n          name: 'Quick placement',\n          editor: PlacementEditor,\n          settings: opts,\n        });\n      }\n\n      const shouldAddBackgroundEditor = opts.element.item.standardEditorConfig?.background ?? true;\n      if (shouldAddBackgroundEditor) {\n        optionBuilder.addBackground(builder, ctx);\n      }\n\n      const shouldAddBorderEditor = opts.element.item.standardEditorConfig?.border ?? true;\n      if (shouldAddBorderEditor) {\n        optionBuilder.addBorder(builder, ctx);\n      }\n    },\n  };\n}\n","/**\n * Webpack has bug for import loop, which is not the same behavior as ES module.\n * When util.js imports the TreeNode for tree generate will cause treeContextTypes be empty.\n */\nimport * as React from 'react';\nexport var TreeContext = /*#__PURE__*/React.createContext(null);","import * as React from 'react';\nexport default function DropIndicator(_ref) {\n  var dropPosition = _ref.dropPosition,\n    dropLevelOffset = _ref.dropLevelOffset,\n    indent = _ref.indent;\n  var style = {\n    pointerEvents: 'none',\n    position: 'absolute',\n    right: 0,\n    backgroundColor: 'red',\n    height: 2\n  };\n  switch (dropPosition) {\n    case -1:\n      style.top = 0;\n      style.left = -dropLevelOffset * indent;\n      break;\n    case 1:\n      style.bottom = 0;\n      style.left = -dropLevelOffset * indent;\n      break;\n    case 0:\n      style.bottom = 0;\n      style.left = indent;\n      break;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: style\n  });\n}","export default function _objectDestructuringEmpty(obj) {\n  if (obj == null) throw new TypeError(\"Cannot destructure \" + obj);\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport * as React from 'react';\nimport classNames from 'classnames';\nvar Indent = function Indent(_ref) {\n  var prefixCls = _ref.prefixCls,\n    level = _ref.level,\n    isStart = _ref.isStart,\n    isEnd = _ref.isEnd;\n  var baseClassName = \"\".concat(prefixCls, \"-indent-unit\");\n  var list = [];\n  for (var i = 0; i < level; i += 1) {\n    var _classNames;\n    list.push( /*#__PURE__*/React.createElement(\"span\", {\n      key: i,\n      className: classNames(baseClassName, (_classNames = {}, _defineProperty(_classNames, \"\".concat(baseClassName, \"-start\"), isStart[i]), _defineProperty(_classNames, \"\".concat(baseClassName, \"-end\"), isEnd[i]), _classNames))\n    }));\n  }\n  return /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-hidden\": \"true\",\n    className: \"\".concat(prefixCls, \"-indent\")\n  }, list);\n};\nexport default /*#__PURE__*/React.memo(Indent);","export default function getEntity(keyEntities, key) {\n  return keyEntities[key];\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"children\"];\nimport toArray from \"rc-util/es/Children/toArray\";\nimport omit from \"rc-util/es/omit\";\nimport warning from \"rc-util/es/warning\";\nimport getEntity from './keyUtil';\nexport function getPosition(level, index) {\n  return \"\".concat(level, \"-\").concat(index);\n}\nexport function isTreeNode(node) {\n  return node && node.type && node.type.isTreeNode;\n}\nexport function getKey(key, pos) {\n  if (key !== null && key !== undefined) {\n    return key;\n  }\n  return pos;\n}\nexport function fillFieldNames(fieldNames) {\n  var _ref = fieldNames || {},\n    title = _ref.title,\n    _title = _ref._title,\n    key = _ref.key,\n    children = _ref.children;\n  var mergedTitle = title || 'title';\n  return {\n    title: mergedTitle,\n    _title: _title || [mergedTitle],\n    key: key || 'key',\n    children: children || 'children'\n  };\n}\n/**\n * Warning if TreeNode do not provides key\n */\nexport function warningWithoutKey(treeData, fieldNames) {\n  var keys = new Map();\n  function dig(list) {\n    var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    (list || []).forEach(function (treeNode) {\n      var key = treeNode[fieldNames.key];\n      var children = treeNode[fieldNames.children];\n      warning(key !== null && key !== undefined, \"Tree node must have a certain key: [\".concat(path).concat(key, \"]\"));\n      var recordKey = String(key);\n      warning(!keys.has(recordKey) || key === null || key === undefined, \"Same 'key' exist in the Tree: \".concat(recordKey));\n      keys.set(recordKey, true);\n      dig(children, \"\".concat(path).concat(recordKey, \" > \"));\n    });\n  }\n  dig(treeData);\n}\n/**\n * Convert `children` of Tree into `treeData` structure.\n */\nexport function convertTreeToData(rootNodes) {\n  function dig(node) {\n    var treeNodes = toArray(node);\n    return treeNodes.map(function (treeNode) {\n      // Filter invalidate node\n      if (!isTreeNode(treeNode)) {\n        warning(!treeNode, 'Tree/TreeNode can only accept TreeNode as children.');\n        return null;\n      }\n      var key = treeNode.key;\n      var _treeNode$props = treeNode.props,\n        children = _treeNode$props.children,\n        rest = _objectWithoutProperties(_treeNode$props, _excluded);\n      var dataNode = _objectSpread({\n        key: key\n      }, rest);\n      var parsedChildren = dig(children);\n      if (parsedChildren.length) {\n        dataNode.children = parsedChildren;\n      }\n      return dataNode;\n    }).filter(function (dataNode) {\n      return dataNode;\n    });\n  }\n  return dig(rootNodes);\n}\n/**\n * Flat nest tree data into flatten list. This is used for virtual list render.\n * @param treeNodeList Origin data node list\n * @param expandedKeys\n * need expanded keys, provides `true` means all expanded (used in `rc-tree-select`).\n */\nexport function flattenTreeData(treeNodeList, expandedKeys, fieldNames) {\n  var _fillFieldNames = fillFieldNames(fieldNames),\n    fieldTitles = _fillFieldNames._title,\n    fieldKey = _fillFieldNames.key,\n    fieldChildren = _fillFieldNames.children;\n  var expandedKeySet = new Set(expandedKeys === true ? [] : expandedKeys);\n  var flattenList = [];\n  function dig(list) {\n    var parent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    return list.map(function (treeNode, index) {\n      var pos = getPosition(parent ? parent.pos : '0', index);\n      var mergedKey = getKey(treeNode[fieldKey], pos);\n      // Pick matched title in field title list\n      var mergedTitle;\n      for (var i = 0; i < fieldTitles.length; i += 1) {\n        var fieldTitle = fieldTitles[i];\n        if (treeNode[fieldTitle] !== undefined) {\n          mergedTitle = treeNode[fieldTitle];\n          break;\n        }\n      }\n      // Add FlattenDataNode into list\n      var flattenNode = _objectSpread(_objectSpread({}, omit(treeNode, [].concat(_toConsumableArray(fieldTitles), [fieldKey, fieldChildren]))), {}, {\n        title: mergedTitle,\n        key: mergedKey,\n        parent: parent,\n        pos: pos,\n        children: null,\n        data: treeNode,\n        isStart: [].concat(_toConsumableArray(parent ? parent.isStart : []), [index === 0]),\n        isEnd: [].concat(_toConsumableArray(parent ? parent.isEnd : []), [index === list.length - 1])\n      });\n      flattenList.push(flattenNode);\n      // Loop treeNode children\n      if (expandedKeys === true || expandedKeySet.has(mergedKey)) {\n        flattenNode.children = dig(treeNode[fieldChildren] || [], flattenNode);\n      } else {\n        flattenNode.children = [];\n      }\n      return flattenNode;\n    });\n  }\n  dig(treeNodeList);\n  return flattenList;\n}\n/**\n * Traverse all the data by `treeData`.\n * Please not use it out of the `rc-tree` since we may refactor this code.\n */\nexport function traverseDataNodes(dataNodes, callback,\n// To avoid too many params, let use config instead of origin param\nconfig) {\n  var mergedConfig = {};\n  if (_typeof(config) === 'object') {\n    mergedConfig = config;\n  } else {\n    mergedConfig = {\n      externalGetKey: config\n    };\n  }\n  mergedConfig = mergedConfig || {};\n  // Init config\n  var _mergedConfig = mergedConfig,\n    childrenPropName = _mergedConfig.childrenPropName,\n    externalGetKey = _mergedConfig.externalGetKey,\n    fieldNames = _mergedConfig.fieldNames;\n  var _fillFieldNames2 = fillFieldNames(fieldNames),\n    fieldKey = _fillFieldNames2.key,\n    fieldChildren = _fillFieldNames2.children;\n  var mergeChildrenPropName = childrenPropName || fieldChildren;\n  // Get keys\n  var syntheticGetKey;\n  if (externalGetKey) {\n    if (typeof externalGetKey === 'string') {\n      syntheticGetKey = function syntheticGetKey(node) {\n        return node[externalGetKey];\n      };\n    } else if (typeof externalGetKey === 'function') {\n      syntheticGetKey = function syntheticGetKey(node) {\n        return externalGetKey(node);\n      };\n    }\n  } else {\n    syntheticGetKey = function syntheticGetKey(node, pos) {\n      return getKey(node[fieldKey], pos);\n    };\n  }\n  // Process\n  function processNode(node, index, parent, pathNodes) {\n    var children = node ? node[mergeChildrenPropName] : dataNodes;\n    var pos = node ? getPosition(parent.pos, index) : '0';\n    var connectNodes = node ? [].concat(_toConsumableArray(pathNodes), [node]) : [];\n    // Process node if is not root\n    if (node) {\n      var key = syntheticGetKey(node, pos);\n      var data = {\n        node: node,\n        index: index,\n        pos: pos,\n        key: key,\n        parentPos: parent.node ? parent.pos : null,\n        level: parent.level + 1,\n        nodes: connectNodes\n      };\n      callback(data);\n    }\n    // Process children node\n    if (children) {\n      children.forEach(function (subNode, subIndex) {\n        processNode(subNode, subIndex, {\n          node: node,\n          pos: pos,\n          level: parent ? parent.level + 1 : -1\n        }, connectNodes);\n      });\n    }\n  }\n  processNode(null);\n}\n/**\n * Convert `treeData` into entity records.\n */\nexport function convertDataToEntities(dataNodes) {\n  var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n    initWrapper = _ref2.initWrapper,\n    processEntity = _ref2.processEntity,\n    onProcessFinished = _ref2.onProcessFinished,\n    externalGetKey = _ref2.externalGetKey,\n    childrenPropName = _ref2.childrenPropName,\n    fieldNames = _ref2.fieldNames;\n  var /** @deprecated Use `config.externalGetKey` instead */\n  legacyExternalGetKey = arguments.length > 2 ? arguments[2] : undefined;\n  // Init config\n  var mergedExternalGetKey = externalGetKey || legacyExternalGetKey;\n  var posEntities = {};\n  var keyEntities = {};\n  var wrapper = {\n    posEntities: posEntities,\n    keyEntities: keyEntities\n  };\n  if (initWrapper) {\n    wrapper = initWrapper(wrapper) || wrapper;\n  }\n  traverseDataNodes(dataNodes, function (item) {\n    var node = item.node,\n      index = item.index,\n      pos = item.pos,\n      key = item.key,\n      parentPos = item.parentPos,\n      level = item.level,\n      nodes = item.nodes;\n    var entity = {\n      node: node,\n      nodes: nodes,\n      index: index,\n      key: key,\n      pos: pos,\n      level: level\n    };\n    var mergedKey = getKey(key, pos);\n    posEntities[pos] = entity;\n    keyEntities[mergedKey] = entity;\n    // Fill children\n    entity.parent = posEntities[parentPos];\n    if (entity.parent) {\n      entity.parent.children = entity.parent.children || [];\n      entity.parent.children.push(entity);\n    }\n    if (processEntity) {\n      processEntity(entity, wrapper);\n    }\n  }, {\n    externalGetKey: mergedExternalGetKey,\n    childrenPropName: childrenPropName,\n    fieldNames: fieldNames\n  });\n  if (onProcessFinished) {\n    onProcessFinished(wrapper);\n  }\n  return wrapper;\n}\n/**\n * Get TreeNode props with Tree props.\n */\nexport function getTreeNodeProps(key, _ref3) {\n  var expandedKeys = _ref3.expandedKeys,\n    selectedKeys = _ref3.selectedKeys,\n    loadedKeys = _ref3.loadedKeys,\n    loadingKeys = _ref3.loadingKeys,\n    checkedKeys = _ref3.checkedKeys,\n    halfCheckedKeys = _ref3.halfCheckedKeys,\n    dragOverNodeKey = _ref3.dragOverNodeKey,\n    dropPosition = _ref3.dropPosition,\n    keyEntities = _ref3.keyEntities;\n  var entity = getEntity(keyEntities, key);\n  var treeNodeProps = {\n    eventKey: key,\n    expanded: expandedKeys.indexOf(key) !== -1,\n    selected: selectedKeys.indexOf(key) !== -1,\n    loaded: loadedKeys.indexOf(key) !== -1,\n    loading: loadingKeys.indexOf(key) !== -1,\n    checked: checkedKeys.indexOf(key) !== -1,\n    halfChecked: halfCheckedKeys.indexOf(key) !== -1,\n    pos: String(entity ? entity.pos : ''),\n    // [Legacy] Drag props\n    // Since the interaction of drag is changed, the semantic of the props are\n    // not accuracy, I think it should be finally removed\n    dragOver: dragOverNodeKey === key && dropPosition === 0,\n    dragOverGapTop: dragOverNodeKey === key && dropPosition === -1,\n    dragOverGapBottom: dragOverNodeKey === key && dropPosition === 1\n  };\n  return treeNodeProps;\n}\nexport function convertNodePropsToEventData(props) {\n  var data = props.data,\n    expanded = props.expanded,\n    selected = props.selected,\n    checked = props.checked,\n    loaded = props.loaded,\n    loading = props.loading,\n    halfChecked = props.halfChecked,\n    dragOver = props.dragOver,\n    dragOverGapTop = props.dragOverGapTop,\n    dragOverGapBottom = props.dragOverGapBottom,\n    pos = props.pos,\n    active = props.active,\n    eventKey = props.eventKey;\n  var eventData = _objectSpread(_objectSpread({}, data), {}, {\n    expanded: expanded,\n    selected: selected,\n    checked: checked,\n    loaded: loaded,\n    loading: loading,\n    halfChecked: halfChecked,\n    dragOver: dragOver,\n    dragOverGapTop: dragOverGapTop,\n    dragOverGapBottom: dragOverGapBottom,\n    pos: pos,\n    active: active,\n    key: eventKey\n  });\n  if (!('props' in eventData)) {\n    Object.defineProperty(eventData, 'props', {\n      get: function get() {\n        warning(false, 'Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`.');\n        return props;\n      }\n    });\n  }\n  return eventData;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nvar _excluded = [\"eventKey\", \"className\", \"style\", \"dragOver\", \"dragOverGapTop\", \"dragOverGapBottom\", \"isLeaf\", \"isStart\", \"isEnd\", \"expanded\", \"selected\", \"checked\", \"halfChecked\", \"loading\", \"domRef\", \"active\", \"data\", \"onMouseMove\", \"selectable\"];\nimport classNames from 'classnames';\nimport pickAttrs from \"rc-util/es/pickAttrs\";\nimport * as React from 'react';\n// @ts-ignore\nimport { TreeContext } from './contextTypes';\nimport Indent from './Indent';\nimport getEntity from './utils/keyUtil';\nimport { convertNodePropsToEventData } from './utils/treeUtil';\nvar ICON_OPEN = 'open';\nvar ICON_CLOSE = 'close';\nvar defaultTitle = '---';\nvar InternalTreeNode = /*#__PURE__*/function (_React$Component) {\n  _inherits(InternalTreeNode, _React$Component);\n  var _super = _createSuper(InternalTreeNode);\n  function InternalTreeNode() {\n    var _this;\n    _classCallCheck(this, InternalTreeNode);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      dragNodeHighlight: false\n    };\n    _this.selectHandle = void 0;\n    _this.cacheIndent = void 0;\n    _this.onSelectorClick = function (e) {\n      // Click trigger before select/check operation\n      var onNodeClick = _this.props.context.onNodeClick;\n      onNodeClick(e, convertNodePropsToEventData(_this.props));\n      if (_this.isSelectable()) {\n        _this.onSelect(e);\n      } else {\n        _this.onCheck(e);\n      }\n    };\n    _this.onSelectorDoubleClick = function (e) {\n      var onNodeDoubleClick = _this.props.context.onNodeDoubleClick;\n      onNodeDoubleClick(e, convertNodePropsToEventData(_this.props));\n    };\n    _this.onSelect = function (e) {\n      if (_this.isDisabled()) return;\n      var onNodeSelect = _this.props.context.onNodeSelect;\n      onNodeSelect(e, convertNodePropsToEventData(_this.props));\n    };\n    _this.onCheck = function (e) {\n      if (_this.isDisabled()) return;\n      var _this$props = _this.props,\n        disableCheckbox = _this$props.disableCheckbox,\n        checked = _this$props.checked;\n      var onNodeCheck = _this.props.context.onNodeCheck;\n      if (!_this.isCheckable() || disableCheckbox) return;\n      var targetChecked = !checked;\n      onNodeCheck(e, convertNodePropsToEventData(_this.props), targetChecked);\n    };\n    _this.onMouseEnter = function (e) {\n      var onNodeMouseEnter = _this.props.context.onNodeMouseEnter;\n      onNodeMouseEnter(e, convertNodePropsToEventData(_this.props));\n    };\n    _this.onMouseLeave = function (e) {\n      var onNodeMouseLeave = _this.props.context.onNodeMouseLeave;\n      onNodeMouseLeave(e, convertNodePropsToEventData(_this.props));\n    };\n    _this.onContextMenu = function (e) {\n      var onNodeContextMenu = _this.props.context.onNodeContextMenu;\n      onNodeContextMenu(e, convertNodePropsToEventData(_this.props));\n    };\n    _this.onDragStart = function (e) {\n      var onNodeDragStart = _this.props.context.onNodeDragStart;\n      e.stopPropagation();\n      _this.setState({\n        dragNodeHighlight: true\n      });\n      onNodeDragStart(e, _assertThisInitialized(_this));\n      try {\n        // ie throw error\n        // firefox-need-it\n        e.dataTransfer.setData('text/plain', '');\n      } catch (error) {\n        // empty\n      }\n    };\n    _this.onDragEnter = function (e) {\n      var onNodeDragEnter = _this.props.context.onNodeDragEnter;\n      e.preventDefault();\n      e.stopPropagation();\n      onNodeDragEnter(e, _assertThisInitialized(_this));\n    };\n    _this.onDragOver = function (e) {\n      var onNodeDragOver = _this.props.context.onNodeDragOver;\n      e.preventDefault();\n      e.stopPropagation();\n      onNodeDragOver(e, _assertThisInitialized(_this));\n    };\n    _this.onDragLeave = function (e) {\n      var onNodeDragLeave = _this.props.context.onNodeDragLeave;\n      e.stopPropagation();\n      onNodeDragLeave(e, _assertThisInitialized(_this));\n    };\n    _this.onDragEnd = function (e) {\n      var onNodeDragEnd = _this.props.context.onNodeDragEnd;\n      e.stopPropagation();\n      _this.setState({\n        dragNodeHighlight: false\n      });\n      onNodeDragEnd(e, _assertThisInitialized(_this));\n    };\n    _this.onDrop = function (e) {\n      var onNodeDrop = _this.props.context.onNodeDrop;\n      e.preventDefault();\n      e.stopPropagation();\n      _this.setState({\n        dragNodeHighlight: false\n      });\n      onNodeDrop(e, _assertThisInitialized(_this));\n    };\n    // Disabled item still can be switch\n    _this.onExpand = function (e) {\n      var _this$props2 = _this.props,\n        loading = _this$props2.loading,\n        onNodeExpand = _this$props2.context.onNodeExpand;\n      if (loading) return;\n      onNodeExpand(e, convertNodePropsToEventData(_this.props));\n    };\n    // Drag usage\n    _this.setSelectHandle = function (node) {\n      _this.selectHandle = node;\n    };\n    _this.getNodeState = function () {\n      var expanded = _this.props.expanded;\n      if (_this.isLeaf()) {\n        return null;\n      }\n      return expanded ? ICON_OPEN : ICON_CLOSE;\n    };\n    _this.hasChildren = function () {\n      var eventKey = _this.props.eventKey;\n      var keyEntities = _this.props.context.keyEntities;\n      var _ref = getEntity(keyEntities, eventKey) || {},\n        children = _ref.children;\n      return !!(children || []).length;\n    };\n    _this.isLeaf = function () {\n      var _this$props3 = _this.props,\n        isLeaf = _this$props3.isLeaf,\n        loaded = _this$props3.loaded;\n      var loadData = _this.props.context.loadData;\n      var hasChildren = _this.hasChildren();\n      if (isLeaf === false) {\n        return false;\n      }\n      return isLeaf || !loadData && !hasChildren || loadData && loaded && !hasChildren;\n    };\n    _this.isDisabled = function () {\n      var disabled = _this.props.disabled;\n      var treeDisabled = _this.props.context.disabled;\n      return !!(treeDisabled || disabled);\n    };\n    _this.isCheckable = function () {\n      var checkable = _this.props.checkable;\n      var treeCheckable = _this.props.context.checkable;\n      // Return false if tree or treeNode is not checkable\n      if (!treeCheckable || checkable === false) return false;\n      return treeCheckable;\n    };\n    // Load data to avoid default expanded tree without data\n    _this.syncLoadData = function (props) {\n      var expanded = props.expanded,\n        loading = props.loading,\n        loaded = props.loaded;\n      var _this$props$context = _this.props.context,\n        loadData = _this$props$context.loadData,\n        onNodeLoad = _this$props$context.onNodeLoad;\n      if (loading) {\n        return;\n      }\n      // read from state to avoid loadData at same time\n      if (loadData && expanded && !_this.isLeaf()) {\n        // We needn't reload data when has children in sync logic\n        // It's only needed in node expanded\n        if (!_this.hasChildren() && !loaded) {\n          onNodeLoad(convertNodePropsToEventData(_this.props));\n        }\n      }\n    };\n    _this.isDraggable = function () {\n      var _this$props4 = _this.props,\n        data = _this$props4.data,\n        draggable = _this$props4.context.draggable;\n      return !!(draggable && (!draggable.nodeDraggable || draggable.nodeDraggable(data)));\n    };\n    // ==================== Render: Drag Handler ====================\n    _this.renderDragHandler = function () {\n      var _this$props$context2 = _this.props.context,\n        draggable = _this$props$context2.draggable,\n        prefixCls = _this$props$context2.prefixCls;\n      return (draggable === null || draggable === void 0 ? void 0 : draggable.icon) ? /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-draggable-icon\")\n      }, draggable.icon) : null;\n    };\n    // ====================== Render: Switcher ======================\n    _this.renderSwitcherIconDom = function (isLeaf) {\n      var switcherIconFromProps = _this.props.switcherIcon;\n      var switcherIconFromCtx = _this.props.context.switcherIcon;\n      var switcherIcon = switcherIconFromProps || switcherIconFromCtx;\n      // if switcherIconDom is null, no render switcher span\n      if (typeof switcherIcon === 'function') {\n        return switcherIcon(_objectSpread(_objectSpread({}, _this.props), {}, {\n          isLeaf: isLeaf\n        }));\n      }\n      return switcherIcon;\n    };\n    // Switcher\n    _this.renderSwitcher = function () {\n      var expanded = _this.props.expanded;\n      var prefixCls = _this.props.context.prefixCls;\n      if (_this.isLeaf()) {\n        // if switcherIconDom is null, no render switcher span\n        var _switcherIconDom = _this.renderSwitcherIconDom(true);\n        return _switcherIconDom !== false ? /*#__PURE__*/React.createElement(\"span\", {\n          className: classNames(\"\".concat(prefixCls, \"-switcher\"), \"\".concat(prefixCls, \"-switcher-noop\"))\n        }, _switcherIconDom) : null;\n      }\n      var switcherCls = classNames(\"\".concat(prefixCls, \"-switcher\"), \"\".concat(prefixCls, \"-switcher_\").concat(expanded ? ICON_OPEN : ICON_CLOSE));\n      var switcherIconDom = _this.renderSwitcherIconDom(false);\n      return switcherIconDom !== false ? /*#__PURE__*/React.createElement(\"span\", {\n        onClick: _this.onExpand,\n        className: switcherCls\n      }, switcherIconDom) : null;\n    };\n    // ====================== Render: Checkbox ======================\n    // Checkbox\n    _this.renderCheckbox = function () {\n      var _this$props5 = _this.props,\n        checked = _this$props5.checked,\n        halfChecked = _this$props5.halfChecked,\n        disableCheckbox = _this$props5.disableCheckbox;\n      var prefixCls = _this.props.context.prefixCls;\n      var disabled = _this.isDisabled();\n      var checkable = _this.isCheckable();\n      if (!checkable) return null;\n      // [Legacy] Custom element should be separate with `checkable` in future\n      var $custom = typeof checkable !== 'boolean' ? checkable : null;\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: classNames(\"\".concat(prefixCls, \"-checkbox\"), checked && \"\".concat(prefixCls, \"-checkbox-checked\"), !checked && halfChecked && \"\".concat(prefixCls, \"-checkbox-indeterminate\"), (disabled || disableCheckbox) && \"\".concat(prefixCls, \"-checkbox-disabled\")),\n        onClick: _this.onCheck\n      }, $custom);\n    };\n    // ==================== Render: Title + Icon ====================\n    _this.renderIcon = function () {\n      var loading = _this.props.loading;\n      var prefixCls = _this.props.context.prefixCls;\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: classNames(\"\".concat(prefixCls, \"-iconEle\"), \"\".concat(prefixCls, \"-icon__\").concat(_this.getNodeState() || 'docu'), loading && \"\".concat(prefixCls, \"-icon_loading\"))\n      });\n    };\n    // Icon + Title\n    _this.renderSelector = function () {\n      var dragNodeHighlight = _this.state.dragNodeHighlight;\n      var _this$props6 = _this.props,\n        _this$props6$title = _this$props6.title,\n        title = _this$props6$title === void 0 ? defaultTitle : _this$props6$title,\n        selected = _this$props6.selected,\n        icon = _this$props6.icon,\n        loading = _this$props6.loading,\n        data = _this$props6.data;\n      var _this$props$context3 = _this.props.context,\n        prefixCls = _this$props$context3.prefixCls,\n        showIcon = _this$props$context3.showIcon,\n        treeIcon = _this$props$context3.icon,\n        loadData = _this$props$context3.loadData,\n        titleRender = _this$props$context3.titleRender;\n      var disabled = _this.isDisabled();\n      var wrapClass = \"\".concat(prefixCls, \"-node-content-wrapper\");\n      // Icon - Still show loading icon when loading without showIcon\n      var $icon;\n      if (showIcon) {\n        var currentIcon = icon || treeIcon;\n        $icon = currentIcon ? /*#__PURE__*/React.createElement(\"span\", {\n          className: classNames(\"\".concat(prefixCls, \"-iconEle\"), \"\".concat(prefixCls, \"-icon__customize\"))\n        }, typeof currentIcon === 'function' ? currentIcon(_this.props) : currentIcon) : _this.renderIcon();\n      } else if (loadData && loading) {\n        $icon = _this.renderIcon();\n      }\n      // Title\n      var titleNode;\n      if (typeof title === 'function') {\n        titleNode = title(data);\n      } else if (titleRender) {\n        titleNode = titleRender(data);\n      } else {\n        titleNode = title;\n      }\n      var $title = /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-title\")\n      }, titleNode);\n      return /*#__PURE__*/React.createElement(\"span\", {\n        ref: _this.setSelectHandle,\n        title: typeof title === 'string' ? title : '',\n        className: classNames(\"\".concat(wrapClass), \"\".concat(wrapClass, \"-\").concat(_this.getNodeState() || 'normal'), !disabled && (selected || dragNodeHighlight) && \"\".concat(prefixCls, \"-node-selected\")),\n        onMouseEnter: _this.onMouseEnter,\n        onMouseLeave: _this.onMouseLeave,\n        onContextMenu: _this.onContextMenu,\n        onClick: _this.onSelectorClick,\n        onDoubleClick: _this.onSelectorDoubleClick\n      }, $icon, $title, _this.renderDropIndicator());\n    };\n    // =================== Render: Drop Indicator ===================\n    _this.renderDropIndicator = function () {\n      var _this$props7 = _this.props,\n        disabled = _this$props7.disabled,\n        eventKey = _this$props7.eventKey;\n      var _this$props$context4 = _this.props.context,\n        draggable = _this$props$context4.draggable,\n        dropLevelOffset = _this$props$context4.dropLevelOffset,\n        dropPosition = _this$props$context4.dropPosition,\n        prefixCls = _this$props$context4.prefixCls,\n        indent = _this$props$context4.indent,\n        dropIndicatorRender = _this$props$context4.dropIndicatorRender,\n        dragOverNodeKey = _this$props$context4.dragOverNodeKey,\n        direction = _this$props$context4.direction;\n      var rootDraggable = !!draggable;\n      // allowDrop is calculated in Tree.tsx, there is no need for calc it here\n      var showIndicator = !disabled && rootDraggable && dragOverNodeKey === eventKey;\n      // This is a hot fix which is already fixed in\n      // https://github.com/react-component/tree/pull/743/files\n      // But some case need break point so we hack on this\n      // ref https://github.com/ant-design/ant-design/issues/43493\n      var mergedIndent = indent !== null && indent !== void 0 ? indent : _this.cacheIndent;\n      _this.cacheIndent = indent;\n      return showIndicator ? dropIndicatorRender({\n        dropPosition: dropPosition,\n        dropLevelOffset: dropLevelOffset,\n        indent: mergedIndent,\n        prefixCls: prefixCls,\n        direction: direction\n      }) : null;\n    };\n    return _this;\n  }\n  _createClass(InternalTreeNode, [{\n    key: \"componentDidMount\",\n    value:\n    // Isomorphic needn't load data in server side\n    function componentDidMount() {\n      this.syncLoadData(this.props);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.syncLoadData(this.props);\n    }\n  }, {\n    key: \"isSelectable\",\n    value: function isSelectable() {\n      var selectable = this.props.selectable;\n      var treeSelectable = this.props.context.selectable;\n      // Ignore when selectable is undefined or null\n      if (typeof selectable === 'boolean') {\n        return selectable;\n      }\n      return treeSelectable;\n    }\n  }, {\n    key: \"render\",\n    value:\n    // =========================== Render ===========================\n    function render() {\n      var _classNames;\n      var _this$props8 = this.props,\n        eventKey = _this$props8.eventKey,\n        className = _this$props8.className,\n        style = _this$props8.style,\n        dragOver = _this$props8.dragOver,\n        dragOverGapTop = _this$props8.dragOverGapTop,\n        dragOverGapBottom = _this$props8.dragOverGapBottom,\n        isLeaf = _this$props8.isLeaf,\n        isStart = _this$props8.isStart,\n        isEnd = _this$props8.isEnd,\n        expanded = _this$props8.expanded,\n        selected = _this$props8.selected,\n        checked = _this$props8.checked,\n        halfChecked = _this$props8.halfChecked,\n        loading = _this$props8.loading,\n        domRef = _this$props8.domRef,\n        active = _this$props8.active,\n        data = _this$props8.data,\n        onMouseMove = _this$props8.onMouseMove,\n        selectable = _this$props8.selectable,\n        otherProps = _objectWithoutProperties(_this$props8, _excluded);\n      var _this$props$context5 = this.props.context,\n        prefixCls = _this$props$context5.prefixCls,\n        filterTreeNode = _this$props$context5.filterTreeNode,\n        keyEntities = _this$props$context5.keyEntities,\n        dropContainerKey = _this$props$context5.dropContainerKey,\n        dropTargetKey = _this$props$context5.dropTargetKey,\n        draggingNodeKey = _this$props$context5.draggingNodeKey;\n      var disabled = this.isDisabled();\n      var dataOrAriaAttributeProps = pickAttrs(otherProps, {\n        aria: true,\n        data: true\n      });\n      var _ref2 = getEntity(keyEntities, eventKey) || {},\n        level = _ref2.level;\n      var isEndNode = isEnd[isEnd.length - 1];\n      var mergedDraggable = this.isDraggable();\n      var draggableWithoutDisabled = !disabled && mergedDraggable;\n      var dragging = draggingNodeKey === eventKey;\n      var ariaSelected = selectable !== undefined ? {\n        'aria-selected': !!selectable\n      } : undefined;\n      return /*#__PURE__*/React.createElement(\"div\", _extends({\n        ref: domRef,\n        className: classNames(className, \"\".concat(prefixCls, \"-treenode\"), (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-treenode-disabled\"), disabled), _defineProperty(_classNames, \"\".concat(prefixCls, \"-treenode-switcher-\").concat(expanded ? 'open' : 'close'), !isLeaf), _defineProperty(_classNames, \"\".concat(prefixCls, \"-treenode-checkbox-checked\"), checked), _defineProperty(_classNames, \"\".concat(prefixCls, \"-treenode-checkbox-indeterminate\"), halfChecked), _defineProperty(_classNames, \"\".concat(prefixCls, \"-treenode-selected\"), selected), _defineProperty(_classNames, \"\".concat(prefixCls, \"-treenode-loading\"), loading), _defineProperty(_classNames, \"\".concat(prefixCls, \"-treenode-active\"), active), _defineProperty(_classNames, \"\".concat(prefixCls, \"-treenode-leaf-last\"), isEndNode), _defineProperty(_classNames, \"\".concat(prefixCls, \"-treenode-draggable\"), mergedDraggable), _defineProperty(_classNames, \"dragging\", dragging), _defineProperty(_classNames, 'drop-target', dropTargetKey === eventKey), _defineProperty(_classNames, 'drop-container', dropContainerKey === eventKey), _defineProperty(_classNames, 'drag-over', !disabled && dragOver), _defineProperty(_classNames, 'drag-over-gap-top', !disabled && dragOverGapTop), _defineProperty(_classNames, 'drag-over-gap-bottom', !disabled && dragOverGapBottom), _defineProperty(_classNames, 'filter-node', filterTreeNode && filterTreeNode(convertNodePropsToEventData(this.props))), _classNames)),\n        style: style\n        // Draggable config\n        ,\n        draggable: draggableWithoutDisabled,\n        \"aria-grabbed\": dragging,\n        onDragStart: draggableWithoutDisabled ? this.onDragStart : undefined\n        // Drop config\n        ,\n        onDragEnter: mergedDraggable ? this.onDragEnter : undefined,\n        onDragOver: mergedDraggable ? this.onDragOver : undefined,\n        onDragLeave: mergedDraggable ? this.onDragLeave : undefined,\n        onDrop: mergedDraggable ? this.onDrop : undefined,\n        onDragEnd: mergedDraggable ? this.onDragEnd : undefined,\n        onMouseMove: onMouseMove\n      }, ariaSelected, dataOrAriaAttributeProps), /*#__PURE__*/React.createElement(Indent, {\n        prefixCls: prefixCls,\n        level: level,\n        isStart: isStart,\n        isEnd: isEnd\n      }), this.renderDragHandler(), this.renderSwitcher(), this.renderCheckbox(), this.renderSelector());\n    }\n  }]);\n  return InternalTreeNode;\n}(React.Component);\nvar ContextTreeNode = function ContextTreeNode(props) {\n  return /*#__PURE__*/React.createElement(TreeContext.Consumer, null, function (context) {\n    return /*#__PURE__*/React.createElement(InternalTreeNode, _extends({}, props, {\n      context: context\n    }));\n  });\n};\nContextTreeNode.displayName = 'TreeNode';\nContextTreeNode.isTreeNode = 1;\nexport default ContextTreeNode;","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\n/**\n * Trigger only when component unmount\n */\nexport default function useUnmount(triggerStart, triggerEnd) {\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    firstMount = _React$useState2[0],\n    setFirstMount = _React$useState2[1];\n  React.useLayoutEffect(function () {\n    if (firstMount) {\n      triggerStart();\n      return function () {\n        triggerEnd();\n      };\n    }\n  }, [firstMount]);\n  React.useLayoutEffect(function () {\n    setFirstMount(true);\n    return function () {\n      setFirstMount(false);\n    };\n  }, []);\n}","import _objectDestructuringEmpty from \"@babel/runtime/helpers/esm/objectDestructuringEmpty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"className\", \"style\", \"motion\", \"motionNodes\", \"motionType\", \"onMotionStart\", \"onMotionEnd\", \"active\", \"treeNodeRequiredProps\"];\nimport classNames from 'classnames';\nimport CSSMotion from 'rc-motion';\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport * as React from 'react';\nimport { TreeContext } from './contextTypes';\nimport TreeNode from './TreeNode';\nimport useUnmount from './useUnmount';\nimport { getTreeNodeProps } from './utils/treeUtil';\nvar MotionTreeNode = function MotionTreeNode(_ref, ref) {\n  var className = _ref.className,\n    style = _ref.style,\n    motion = _ref.motion,\n    motionNodes = _ref.motionNodes,\n    motionType = _ref.motionType,\n    onOriginMotionStart = _ref.onMotionStart,\n    onOriginMotionEnd = _ref.onMotionEnd,\n    active = _ref.active,\n    treeNodeRequiredProps = _ref.treeNodeRequiredProps,\n    props = _objectWithoutProperties(_ref, _excluded);\n  var _React$useState = React.useState(true),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    visible = _React$useState2[0],\n    setVisible = _React$useState2[1];\n  var _React$useContext = React.useContext(TreeContext),\n    prefixCls = _React$useContext.prefixCls;\n  // Calculate target visible here.\n  // And apply in effect to make `leave` motion work.\n  var targetVisible = motionNodes && motionType !== 'hide';\n  useLayoutEffect(function () {\n    if (motionNodes) {\n      if (targetVisible !== visible) {\n        setVisible(targetVisible);\n      }\n    }\n  }, [motionNodes]);\n  var triggerMotionStart = function triggerMotionStart() {\n    if (motionNodes) {\n      onOriginMotionStart();\n    }\n  };\n  // Should only trigger once\n  var triggerMotionEndRef = React.useRef(false);\n  var triggerMotionEnd = function triggerMotionEnd() {\n    if (motionNodes && !triggerMotionEndRef.current) {\n      triggerMotionEndRef.current = true;\n      onOriginMotionEnd();\n    }\n  };\n  // Effect if unmount\n  useUnmount(triggerMotionStart, triggerMotionEnd);\n  // Motion end event\n  var onVisibleChanged = function onVisibleChanged(nextVisible) {\n    if (targetVisible === nextVisible) {\n      triggerMotionEnd();\n    }\n  };\n  if (motionNodes) {\n    return /*#__PURE__*/React.createElement(CSSMotion, _extends({\n      ref: ref,\n      visible: visible\n    }, motion, {\n      motionAppear: motionType === 'show',\n      onVisibleChanged: onVisibleChanged\n    }), function (_ref2, motionRef) {\n      var motionClassName = _ref2.className,\n        motionStyle = _ref2.style;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        ref: motionRef,\n        className: classNames(\"\".concat(prefixCls, \"-treenode-motion\"), motionClassName),\n        style: motionStyle\n      }, motionNodes.map(function (treeNode) {\n        var restProps = _extends({}, (_objectDestructuringEmpty(treeNode.data), treeNode.data)),\n          title = treeNode.title,\n          key = treeNode.key,\n          isStart = treeNode.isStart,\n          isEnd = treeNode.isEnd;\n        delete restProps.children;\n        var treeNodeProps = getTreeNodeProps(key, treeNodeRequiredProps);\n        return /*#__PURE__*/React.createElement(TreeNode, _extends({}, restProps, treeNodeProps, {\n          title: title,\n          active: active,\n          data: treeNode.data,\n          key: key,\n          isStart: isStart,\n          isEnd: isEnd\n        }));\n      }));\n    });\n  }\n  return /*#__PURE__*/React.createElement(TreeNode, _extends({\n    domRef: ref,\n    className: className,\n    style: style\n  }, props, {\n    active: active\n  }));\n};\nMotionTreeNode.displayName = 'MotionTreeNode';\nvar RefMotionTreeNode = /*#__PURE__*/React.forwardRef(MotionTreeNode);\nexport default RefMotionTreeNode;","export function findExpandedKeys() {\n  var prev = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var next = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var prevLen = prev.length;\n  var nextLen = next.length;\n  if (Math.abs(prevLen - nextLen) !== 1) {\n    return {\n      add: false,\n      key: null\n    };\n  }\n  function find(shorter, longer) {\n    var cache = new Map();\n    shorter.forEach(function (key) {\n      cache.set(key, true);\n    });\n    var keys = longer.filter(function (key) {\n      return !cache.has(key);\n    });\n    return keys.length === 1 ? keys[0] : null;\n  }\n  if (prevLen < nextLen) {\n    return {\n      add: true,\n      key: find(prev, next)\n    };\n  }\n  return {\n    add: false,\n    key: find(next, prev)\n  };\n}\nexport function getExpandRange(shorter, longer, key) {\n  var shorterStartIndex = shorter.findIndex(function (data) {\n    return data.key === key;\n  });\n  var shorterEndNode = shorter[shorterStartIndex + 1];\n  var longerStartIndex = longer.findIndex(function (data) {\n    return data.key === key;\n  });\n  if (shorterEndNode) {\n    var longerEndIndex = longer.findIndex(function (data) {\n      return data.key === shorterEndNode.key;\n    });\n    return longer.slice(longerStartIndex + 1, longerEndIndex);\n  }\n  return longer.slice(longerStartIndex + 1);\n}","import _objectDestructuringEmpty from \"@babel/runtime/helpers/esm/objectDestructuringEmpty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"prefixCls\", \"data\", \"selectable\", \"checkable\", \"expandedKeys\", \"selectedKeys\", \"checkedKeys\", \"loadedKeys\", \"loadingKeys\", \"halfCheckedKeys\", \"keyEntities\", \"disabled\", \"dragging\", \"dragOverNodeKey\", \"dropPosition\", \"motion\", \"height\", \"itemHeight\", \"virtual\", \"focusable\", \"activeItem\", \"focused\", \"tabIndex\", \"onKeyDown\", \"onFocus\", \"onBlur\", \"onActiveChange\", \"onListChangeStart\", \"onListChangeEnd\"];\n/**\n * Handle virtual list of the TreeNodes.\n */\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport VirtualList from 'rc-virtual-list';\nimport * as React from 'react';\nimport MotionTreeNode from './MotionTreeNode';\nimport { findExpandedKeys, getExpandRange } from './utils/diffUtil';\nimport { getKey, getTreeNodeProps } from './utils/treeUtil';\nvar HIDDEN_STYLE = {\n  width: 0,\n  height: 0,\n  display: 'flex',\n  overflow: 'hidden',\n  opacity: 0,\n  border: 0,\n  padding: 0,\n  margin: 0\n};\nvar noop = function noop() {};\nexport var MOTION_KEY = \"RC_TREE_MOTION_\".concat(Math.random());\nvar MotionNode = {\n  key: MOTION_KEY\n};\nexport var MotionEntity = {\n  key: MOTION_KEY,\n  level: 0,\n  index: 0,\n  pos: '0',\n  node: MotionNode,\n  nodes: [MotionNode]\n};\nvar MotionFlattenData = {\n  parent: null,\n  children: [],\n  pos: MotionEntity.pos,\n  data: MotionNode,\n  title: null,\n  key: MOTION_KEY,\n  /** Hold empty list here since we do not use it */\n  isStart: [],\n  isEnd: []\n};\n/**\n * We only need get visible content items to play the animation.\n */\nexport function getMinimumRangeTransitionRange(list, virtual, height, itemHeight) {\n  if (virtual === false || !height) {\n    return list;\n  }\n  return list.slice(0, Math.ceil(height / itemHeight) + 1);\n}\nfunction itemKey(item) {\n  var key = item.key,\n    pos = item.pos;\n  return getKey(key, pos);\n}\nfunction getAccessibilityPath(item) {\n  var path = String(item.data.key);\n  var current = item;\n  while (current.parent) {\n    current = current.parent;\n    path = \"\".concat(current.data.key, \" > \").concat(path);\n  }\n  return path;\n}\nvar NodeList = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var prefixCls = props.prefixCls,\n    data = props.data,\n    selectable = props.selectable,\n    checkable = props.checkable,\n    expandedKeys = props.expandedKeys,\n    selectedKeys = props.selectedKeys,\n    checkedKeys = props.checkedKeys,\n    loadedKeys = props.loadedKeys,\n    loadingKeys = props.loadingKeys,\n    halfCheckedKeys = props.halfCheckedKeys,\n    keyEntities = props.keyEntities,\n    disabled = props.disabled,\n    dragging = props.dragging,\n    dragOverNodeKey = props.dragOverNodeKey,\n    dropPosition = props.dropPosition,\n    motion = props.motion,\n    height = props.height,\n    itemHeight = props.itemHeight,\n    virtual = props.virtual,\n    focusable = props.focusable,\n    activeItem = props.activeItem,\n    focused = props.focused,\n    tabIndex = props.tabIndex,\n    onKeyDown = props.onKeyDown,\n    onFocus = props.onFocus,\n    onBlur = props.onBlur,\n    onActiveChange = props.onActiveChange,\n    onListChangeStart = props.onListChangeStart,\n    onListChangeEnd = props.onListChangeEnd,\n    domProps = _objectWithoutProperties(props, _excluded);\n  // =============================== Ref ================================\n  var listRef = React.useRef(null);\n  var indentMeasurerRef = React.useRef(null);\n  React.useImperativeHandle(ref, function () {\n    return {\n      scrollTo: function scrollTo(scroll) {\n        listRef.current.scrollTo(scroll);\n      },\n      getIndentWidth: function getIndentWidth() {\n        return indentMeasurerRef.current.offsetWidth;\n      }\n    };\n  });\n  // ============================== Motion ==============================\n  var _React$useState = React.useState(expandedKeys),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    prevExpandedKeys = _React$useState2[0],\n    setPrevExpandedKeys = _React$useState2[1];\n  var _React$useState3 = React.useState(data),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    prevData = _React$useState4[0],\n    setPrevData = _React$useState4[1];\n  var _React$useState5 = React.useState(data),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    transitionData = _React$useState6[0],\n    setTransitionData = _React$useState6[1];\n  var _React$useState7 = React.useState([]),\n    _React$useState8 = _slicedToArray(_React$useState7, 2),\n    transitionRange = _React$useState8[0],\n    setTransitionRange = _React$useState8[1];\n  var _React$useState9 = React.useState(null),\n    _React$useState10 = _slicedToArray(_React$useState9, 2),\n    motionType = _React$useState10[0],\n    setMotionType = _React$useState10[1];\n  // When motion end but data change, this will makes data back to previous one\n  var dataRef = React.useRef(data);\n  dataRef.current = data;\n  function onMotionEnd() {\n    var latestData = dataRef.current;\n    setPrevData(latestData);\n    setTransitionData(latestData);\n    setTransitionRange([]);\n    setMotionType(null);\n    onListChangeEnd();\n  }\n  // Do animation if expanded keys changed\n  // layoutEffect here to avoid blink of node removing\n  useLayoutEffect(function () {\n    setPrevExpandedKeys(expandedKeys);\n    var diffExpanded = findExpandedKeys(prevExpandedKeys, expandedKeys);\n    if (diffExpanded.key !== null) {\n      if (diffExpanded.add) {\n        var keyIndex = prevData.findIndex(function (_ref) {\n          var key = _ref.key;\n          return key === diffExpanded.key;\n        });\n        var rangeNodes = getMinimumRangeTransitionRange(getExpandRange(prevData, data, diffExpanded.key), virtual, height, itemHeight);\n        var newTransitionData = prevData.slice();\n        newTransitionData.splice(keyIndex + 1, 0, MotionFlattenData);\n        setTransitionData(newTransitionData);\n        setTransitionRange(rangeNodes);\n        setMotionType('show');\n      } else {\n        var _keyIndex = data.findIndex(function (_ref2) {\n          var key = _ref2.key;\n          return key === diffExpanded.key;\n        });\n        var _rangeNodes = getMinimumRangeTransitionRange(getExpandRange(data, prevData, diffExpanded.key), virtual, height, itemHeight);\n        var _newTransitionData = data.slice();\n        _newTransitionData.splice(_keyIndex + 1, 0, MotionFlattenData);\n        setTransitionData(_newTransitionData);\n        setTransitionRange(_rangeNodes);\n        setMotionType('hide');\n      }\n    } else if (prevData !== data) {\n      // If whole data changed, we just refresh the list\n      setPrevData(data);\n      setTransitionData(data);\n    }\n  }, [expandedKeys, data]);\n  // We should clean up motion if is changed by dragging\n  React.useEffect(function () {\n    if (!dragging) {\n      onMotionEnd();\n    }\n  }, [dragging]);\n  var mergedData = motion ? transitionData : data;\n  var treeNodeRequiredProps = {\n    expandedKeys: expandedKeys,\n    selectedKeys: selectedKeys,\n    loadedKeys: loadedKeys,\n    loadingKeys: loadingKeys,\n    checkedKeys: checkedKeys,\n    halfCheckedKeys: halfCheckedKeys,\n    dragOverNodeKey: dragOverNodeKey,\n    dropPosition: dropPosition,\n    keyEntities: keyEntities\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, focused && activeItem && /*#__PURE__*/React.createElement(\"span\", {\n    style: HIDDEN_STYLE,\n    \"aria-live\": \"assertive\"\n  }, getAccessibilityPath(activeItem)), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"input\", {\n    style: HIDDEN_STYLE,\n    disabled: focusable === false || disabled,\n    tabIndex: focusable !== false ? tabIndex : null,\n    onKeyDown: onKeyDown,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    value: \"\",\n    onChange: noop,\n    \"aria-label\": \"for screen reader\"\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-treenode\"),\n    \"aria-hidden\": true,\n    style: {\n      position: 'absolute',\n      pointerEvents: 'none',\n      visibility: 'hidden',\n      height: 0,\n      overflow: 'hidden',\n      border: 0,\n      padding: 0\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-indent\")\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: indentMeasurerRef,\n    className: \"\".concat(prefixCls, \"-indent-unit\")\n  }))), /*#__PURE__*/React.createElement(VirtualList, _extends({}, domProps, {\n    data: mergedData,\n    itemKey: itemKey,\n    height: height,\n    fullHeight: false,\n    virtual: virtual,\n    itemHeight: itemHeight,\n    prefixCls: \"\".concat(prefixCls, \"-list\"),\n    ref: listRef,\n    onVisibleChange: function onVisibleChange(originList, fullList) {\n      var originSet = new Set(originList);\n      var restList = fullList.filter(function (item) {\n        return !originSet.has(item);\n      });\n      // Motion node is not render. Skip motion\n      if (restList.some(function (item) {\n        return itemKey(item) === MOTION_KEY;\n      })) {\n        onMotionEnd();\n      }\n    }\n  }), function (treeNode) {\n    var pos = treeNode.pos,\n      restProps = _extends({}, (_objectDestructuringEmpty(treeNode.data), treeNode.data)),\n      title = treeNode.title,\n      key = treeNode.key,\n      isStart = treeNode.isStart,\n      isEnd = treeNode.isEnd;\n    var mergedKey = getKey(key, pos);\n    delete restProps.key;\n    delete restProps.children;\n    var treeNodeProps = getTreeNodeProps(mergedKey, treeNodeRequiredProps);\n    return /*#__PURE__*/React.createElement(MotionTreeNode, _extends({}, restProps, treeNodeProps, {\n      title: title,\n      active: !!activeItem && key === activeItem.key,\n      pos: pos,\n      data: treeNode.data,\n      isStart: isStart,\n      isEnd: isEnd,\n      motion: motion,\n      motionNodes: key === MOTION_KEY ? transitionRange : null,\n      motionType: motionType,\n      onMotionStart: onListChangeStart,\n      onMotionEnd: onMotionEnd,\n      treeNodeRequiredProps: treeNodeRequiredProps,\n      onMouseMove: function onMouseMove() {\n        onActiveChange(null);\n      }\n    }));\n  }));\n});\nNodeList.displayName = 'NodeList';\nexport default NodeList;","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"children\"];\n/* eslint-disable no-lonely-if */\n/**\n * Legacy code. Should avoid to use if you are new to import these code.\n */\nimport warning from \"rc-util/es/warning\";\nimport React from 'react';\nimport TreeNode from './TreeNode';\nimport getEntity from './utils/keyUtil';\nexport { getPosition, isTreeNode } from './utils/treeUtil';\nexport function arrDel(list, value) {\n  if (!list) return [];\n  var clone = list.slice();\n  var index = clone.indexOf(value);\n  if (index >= 0) {\n    clone.splice(index, 1);\n  }\n  return clone;\n}\nexport function arrAdd(list, value) {\n  var clone = (list || []).slice();\n  if (clone.indexOf(value) === -1) {\n    clone.push(value);\n  }\n  return clone;\n}\nexport function posToArr(pos) {\n  return pos.split('-');\n}\nexport function getDragChildrenKeys(dragNodeKey, keyEntities) {\n  // not contains self\n  // self for left or right drag\n  var dragChildrenKeys = [];\n  var entity = getEntity(keyEntities, dragNodeKey);\n  function dig() {\n    var list = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    list.forEach(function (_ref) {\n      var key = _ref.key,\n        children = _ref.children;\n      dragChildrenKeys.push(key);\n      dig(children);\n    });\n  }\n  dig(entity.children);\n  return dragChildrenKeys;\n}\nexport function isLastChild(treeNodeEntity) {\n  if (treeNodeEntity.parent) {\n    var posArr = posToArr(treeNodeEntity.pos);\n    return Number(posArr[posArr.length - 1]) === treeNodeEntity.parent.children.length - 1;\n  }\n  return false;\n}\nexport function isFirstChild(treeNodeEntity) {\n  var posArr = posToArr(treeNodeEntity.pos);\n  return Number(posArr[posArr.length - 1]) === 0;\n}\n// Only used when drag, not affect SSR.\nexport function calcDropPosition(event, dragNode, targetNode, indent, startMousePosition, allowDrop, flattenedNodes, keyEntities, expandKeys, direction) {\n  var _abstractDropNodeEnti;\n  var clientX = event.clientX,\n    clientY = event.clientY;\n  var _event$target$getBoun = event.target.getBoundingClientRect(),\n    top = _event$target$getBoun.top,\n    height = _event$target$getBoun.height;\n  // optional chain for testing\n  var horizontalMouseOffset = (direction === 'rtl' ? -1 : 1) * (((startMousePosition === null || startMousePosition === void 0 ? void 0 : startMousePosition.x) || 0) - clientX);\n  var rawDropLevelOffset = (horizontalMouseOffset - 12) / indent;\n  // find abstract drop node by horizontal offset\n  var abstractDropNodeEntity = getEntity(keyEntities, targetNode.props.eventKey);\n  if (clientY < top + height / 2) {\n    // first half, set abstract drop node to previous node\n    var nodeIndex = flattenedNodes.findIndex(function (flattenedNode) {\n      return flattenedNode.key === abstractDropNodeEntity.key;\n    });\n    var prevNodeIndex = nodeIndex <= 0 ? 0 : nodeIndex - 1;\n    var prevNodeKey = flattenedNodes[prevNodeIndex].key;\n    abstractDropNodeEntity = getEntity(keyEntities, prevNodeKey);\n  }\n  var initialAbstractDropNodeKey = abstractDropNodeEntity.key;\n  var abstractDragOverEntity = abstractDropNodeEntity;\n  var dragOverNodeKey = abstractDropNodeEntity.key;\n  var dropPosition = 0;\n  var dropLevelOffset = 0;\n  // Only allow cross level drop when dragging on a non-expanded node\n  if (!expandKeys.includes(initialAbstractDropNodeKey)) {\n    for (var i = 0; i < rawDropLevelOffset; i += 1) {\n      if (isLastChild(abstractDropNodeEntity)) {\n        abstractDropNodeEntity = abstractDropNodeEntity.parent;\n        dropLevelOffset += 1;\n      } else {\n        break;\n      }\n    }\n  }\n  var abstractDragDataNode = dragNode.props.data;\n  var abstractDropDataNode = abstractDropNodeEntity.node;\n  var dropAllowed = true;\n  if (isFirstChild(abstractDropNodeEntity) && abstractDropNodeEntity.level === 0 && clientY < top + height / 2 && allowDrop({\n    dragNode: abstractDragDataNode,\n    dropNode: abstractDropDataNode,\n    dropPosition: -1\n  }) && abstractDropNodeEntity.key === targetNode.props.eventKey) {\n    // first half of first node in first level\n    dropPosition = -1;\n  } else if ((abstractDragOverEntity.children || []).length && expandKeys.includes(dragOverNodeKey)) {\n    // drop on expanded node\n    // only allow drop inside\n    if (allowDrop({\n      dragNode: abstractDragDataNode,\n      dropNode: abstractDropDataNode,\n      dropPosition: 0\n    })) {\n      dropPosition = 0;\n    } else {\n      dropAllowed = false;\n    }\n  } else if (dropLevelOffset === 0) {\n    if (rawDropLevelOffset > -1.5) {\n      // | Node     | <- abstractDropNode\n      // | -^-===== | <- mousePosition\n      // 1. try drop after\n      // 2. do not allow drop\n      if (allowDrop({\n        dragNode: abstractDragDataNode,\n        dropNode: abstractDropDataNode,\n        dropPosition: 1\n      })) {\n        dropPosition = 1;\n      } else {\n        dropAllowed = false;\n      }\n    } else {\n      // | Node     | <- abstractDropNode\n      // | ---==^== | <- mousePosition\n      // whether it has children or doesn't has children\n      // always\n      // 1. try drop inside\n      // 2. try drop after\n      // 3. do not allow drop\n      if (allowDrop({\n        dragNode: abstractDragDataNode,\n        dropNode: abstractDropDataNode,\n        dropPosition: 0\n      })) {\n        dropPosition = 0;\n      } else if (allowDrop({\n        dragNode: abstractDragDataNode,\n        dropNode: abstractDropDataNode,\n        dropPosition: 1\n      })) {\n        dropPosition = 1;\n      } else {\n        dropAllowed = false;\n      }\n    }\n  } else {\n    // | Node1 | <- abstractDropNode\n    //      |  Node2  |\n    // --^--|----=====| <- mousePosition\n    // 1. try insert after Node1\n    // 2. do not allow drop\n    if (allowDrop({\n      dragNode: abstractDragDataNode,\n      dropNode: abstractDropDataNode,\n      dropPosition: 1\n    })) {\n      dropPosition = 1;\n    } else {\n      dropAllowed = false;\n    }\n  }\n  return {\n    dropPosition: dropPosition,\n    dropLevelOffset: dropLevelOffset,\n    dropTargetKey: abstractDropNodeEntity.key,\n    dropTargetPos: abstractDropNodeEntity.pos,\n    dragOverNodeKey: dragOverNodeKey,\n    dropContainerKey: dropPosition === 0 ? null : ((_abstractDropNodeEnti = abstractDropNodeEntity.parent) === null || _abstractDropNodeEnti === void 0 ? void 0 : _abstractDropNodeEnti.key) || null,\n    dropAllowed: dropAllowed\n  };\n}\n/**\n * Return selectedKeys according with multiple prop\n * @param selectedKeys\n * @param props\n * @returns [string]\n */\nexport function calcSelectedKeys(selectedKeys, props) {\n  if (!selectedKeys) return undefined;\n  var multiple = props.multiple;\n  if (multiple) {\n    return selectedKeys.slice();\n  }\n  if (selectedKeys.length) {\n    return [selectedKeys[0]];\n  }\n  return selectedKeys;\n}\nvar internalProcessProps = function internalProcessProps(props) {\n  return props;\n};\nexport function convertDataToTree(treeData, processor) {\n  if (!treeData) return [];\n  var _ref2 = processor || {},\n    _ref2$processProps = _ref2.processProps,\n    processProps = _ref2$processProps === void 0 ? internalProcessProps : _ref2$processProps;\n  var list = Array.isArray(treeData) ? treeData : [treeData];\n  return list.map(function (_ref3) {\n    var children = _ref3.children,\n      props = _objectWithoutProperties(_ref3, _excluded);\n    var childrenNodes = convertDataToTree(children, processor);\n    return /*#__PURE__*/React.createElement(TreeNode, _extends({\n      key: props.key\n    }, processProps(props)), childrenNodes);\n  });\n}\n/**\n * Parse `checkedKeys` to { checkedKeys, halfCheckedKeys } style\n */\nexport function parseCheckedKeys(keys) {\n  if (!keys) {\n    return null;\n  }\n  // Convert keys to object format\n  var keyProps;\n  if (Array.isArray(keys)) {\n    // [Legacy] Follow the api doc\n    keyProps = {\n      checkedKeys: keys,\n      halfCheckedKeys: undefined\n    };\n  } else if (_typeof(keys) === 'object') {\n    keyProps = {\n      checkedKeys: keys.checked || undefined,\n      halfCheckedKeys: keys.halfChecked || undefined\n    };\n  } else {\n    warning(false, '`checkedKeys` is not an array or an object');\n    return null;\n  }\n  return keyProps;\n}\n/**\n * If user use `autoExpandParent` we should get the list of parent node\n * @param keyList\n * @param keyEntities\n */\nexport function conductExpandParent(keyList, keyEntities) {\n  var expandedKeys = new Set();\n  function conductUp(key) {\n    if (expandedKeys.has(key)) return;\n    var entity = getEntity(keyEntities, key);\n    if (!entity) return;\n    expandedKeys.add(key);\n    var parent = entity.parent,\n      node = entity.node;\n    if (node.disabled) return;\n    if (parent) {\n      conductUp(parent.key);\n    }\n  }\n  (keyList || []).forEach(function (key) {\n    conductUp(key);\n  });\n  return _toConsumableArray(expandedKeys);\n}","import warning from \"rc-util/es/warning\";\nimport getEntity from './keyUtil';\nfunction removeFromCheckedKeys(halfCheckedKeys, checkedKeys) {\n  var filteredKeys = new Set();\n  halfCheckedKeys.forEach(function (key) {\n    if (!checkedKeys.has(key)) {\n      filteredKeys.add(key);\n    }\n  });\n  return filteredKeys;\n}\nexport function isCheckDisabled(node) {\n  var _ref = node || {},\n    disabled = _ref.disabled,\n    disableCheckbox = _ref.disableCheckbox,\n    checkable = _ref.checkable;\n  return !!(disabled || disableCheckbox) || checkable === false;\n}\n// Fill miss keys\nfunction fillConductCheck(keys, levelEntities, maxLevel, syntheticGetCheckDisabled) {\n  var checkedKeys = new Set(keys);\n  var halfCheckedKeys = new Set();\n  // Add checked keys top to bottom\n  for (var level = 0; level <= maxLevel; level += 1) {\n    var entities = levelEntities.get(level) || new Set();\n    entities.forEach(function (entity) {\n      var key = entity.key,\n        node = entity.node,\n        _entity$children = entity.children,\n        children = _entity$children === void 0 ? [] : _entity$children;\n      if (checkedKeys.has(key) && !syntheticGetCheckDisabled(node)) {\n        children.filter(function (childEntity) {\n          return !syntheticGetCheckDisabled(childEntity.node);\n        }).forEach(function (childEntity) {\n          checkedKeys.add(childEntity.key);\n        });\n      }\n    });\n  }\n  // Add checked keys from bottom to top\n  var visitedKeys = new Set();\n  for (var _level = maxLevel; _level >= 0; _level -= 1) {\n    var _entities = levelEntities.get(_level) || new Set();\n    _entities.forEach(function (entity) {\n      var parent = entity.parent,\n        node = entity.node;\n      // Skip if no need to check\n      if (syntheticGetCheckDisabled(node) || !entity.parent || visitedKeys.has(entity.parent.key)) {\n        return;\n      }\n      // Skip if parent is disabled\n      if (syntheticGetCheckDisabled(entity.parent.node)) {\n        visitedKeys.add(parent.key);\n        return;\n      }\n      var allChecked = true;\n      var partialChecked = false;\n      (parent.children || []).filter(function (childEntity) {\n        return !syntheticGetCheckDisabled(childEntity.node);\n      }).forEach(function (_ref2) {\n        var key = _ref2.key;\n        var checked = checkedKeys.has(key);\n        if (allChecked && !checked) {\n          allChecked = false;\n        }\n        if (!partialChecked && (checked || halfCheckedKeys.has(key))) {\n          partialChecked = true;\n        }\n      });\n      if (allChecked) {\n        checkedKeys.add(parent.key);\n      }\n      if (partialChecked) {\n        halfCheckedKeys.add(parent.key);\n      }\n      visitedKeys.add(parent.key);\n    });\n  }\n  return {\n    checkedKeys: Array.from(checkedKeys),\n    halfCheckedKeys: Array.from(removeFromCheckedKeys(halfCheckedKeys, checkedKeys))\n  };\n}\n// Remove useless key\nfunction cleanConductCheck(keys, halfKeys, levelEntities, maxLevel, syntheticGetCheckDisabled) {\n  var checkedKeys = new Set(keys);\n  var halfCheckedKeys = new Set(halfKeys);\n  // Remove checked keys from top to bottom\n  for (var level = 0; level <= maxLevel; level += 1) {\n    var entities = levelEntities.get(level) || new Set();\n    entities.forEach(function (entity) {\n      var key = entity.key,\n        node = entity.node,\n        _entity$children2 = entity.children,\n        children = _entity$children2 === void 0 ? [] : _entity$children2;\n      if (!checkedKeys.has(key) && !halfCheckedKeys.has(key) && !syntheticGetCheckDisabled(node)) {\n        children.filter(function (childEntity) {\n          return !syntheticGetCheckDisabled(childEntity.node);\n        }).forEach(function (childEntity) {\n          checkedKeys.delete(childEntity.key);\n        });\n      }\n    });\n  }\n  // Remove checked keys form bottom to top\n  halfCheckedKeys = new Set();\n  var visitedKeys = new Set();\n  for (var _level2 = maxLevel; _level2 >= 0; _level2 -= 1) {\n    var _entities2 = levelEntities.get(_level2) || new Set();\n    _entities2.forEach(function (entity) {\n      var parent = entity.parent,\n        node = entity.node;\n      // Skip if no need to check\n      if (syntheticGetCheckDisabled(node) || !entity.parent || visitedKeys.has(entity.parent.key)) {\n        return;\n      }\n      // Skip if parent is disabled\n      if (syntheticGetCheckDisabled(entity.parent.node)) {\n        visitedKeys.add(parent.key);\n        return;\n      }\n      var allChecked = true;\n      var partialChecked = false;\n      (parent.children || []).filter(function (childEntity) {\n        return !syntheticGetCheckDisabled(childEntity.node);\n      }).forEach(function (_ref3) {\n        var key = _ref3.key;\n        var checked = checkedKeys.has(key);\n        if (allChecked && !checked) {\n          allChecked = false;\n        }\n        if (!partialChecked && (checked || halfCheckedKeys.has(key))) {\n          partialChecked = true;\n        }\n      });\n      if (!allChecked) {\n        checkedKeys.delete(parent.key);\n      }\n      if (partialChecked) {\n        halfCheckedKeys.add(parent.key);\n      }\n      visitedKeys.add(parent.key);\n    });\n  }\n  return {\n    checkedKeys: Array.from(checkedKeys),\n    halfCheckedKeys: Array.from(removeFromCheckedKeys(halfCheckedKeys, checkedKeys))\n  };\n}\n/**\n * Conduct with keys.\n * @param keyList current key list\n * @param keyEntities key - dataEntity map\n * @param mode `fill` to fill missing key, `clean` to remove useless key\n */\nexport function conductCheck(keyList, checked, keyEntities, getCheckDisabled) {\n  var warningMissKeys = [];\n  var syntheticGetCheckDisabled;\n  if (getCheckDisabled) {\n    syntheticGetCheckDisabled = getCheckDisabled;\n  } else {\n    syntheticGetCheckDisabled = isCheckDisabled;\n  }\n  // We only handle exist keys\n  var keys = new Set(keyList.filter(function (key) {\n    var hasEntity = !!getEntity(keyEntities, key);\n    if (!hasEntity) {\n      warningMissKeys.push(key);\n    }\n    return hasEntity;\n  }));\n  var levelEntities = new Map();\n  var maxLevel = 0;\n  // Convert entities by level for calculation\n  Object.keys(keyEntities).forEach(function (key) {\n    var entity = keyEntities[key];\n    var level = entity.level;\n    var levelSet = levelEntities.get(level);\n    if (!levelSet) {\n      levelSet = new Set();\n      levelEntities.set(level, levelSet);\n    }\n    levelSet.add(entity);\n    maxLevel = Math.max(maxLevel, level);\n  });\n  warning(!warningMissKeys.length, \"Tree missing follow keys: \".concat(warningMissKeys.slice(0, 100).map(function (key) {\n    return \"'\".concat(key, \"'\");\n  }).join(', ')));\n  var result;\n  if (checked === true) {\n    result = fillConductCheck(keys, levelEntities, maxLevel, syntheticGetCheckDisabled);\n  } else {\n    result = cleanConductCheck(keys, checked.halfCheckedKeys, levelEntities, maxLevel, syntheticGetCheckDisabled);\n  }\n  return result;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\n// TODO: https://www.w3.org/TR/2017/NOTE-wai-aria-practices-1.1-20171214/examples/treeview/treeview-2/treeview-2a.html\n// Fully accessibility support\nimport classNames from 'classnames';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport pickAttrs from \"rc-util/es/pickAttrs\";\nimport warning from \"rc-util/es/warning\";\nimport * as React from 'react';\nimport { TreeContext } from './contextTypes';\nimport DropIndicator from './DropIndicator';\nimport NodeList, { MotionEntity, MOTION_KEY } from './NodeList';\nimport TreeNode from './TreeNode';\nimport { arrAdd, arrDel, calcDropPosition, calcSelectedKeys, conductExpandParent, getDragChildrenKeys, parseCheckedKeys, posToArr } from './util';\nimport { conductCheck } from './utils/conductUtil';\nimport getEntity from './utils/keyUtil';\nimport { convertDataToEntities, convertNodePropsToEventData, convertTreeToData, fillFieldNames, flattenTreeData, getTreeNodeProps, warningWithoutKey } from './utils/treeUtil';\nvar MAX_RETRY_TIMES = 10;\nvar Tree = /*#__PURE__*/function (_React$Component) {\n  _inherits(Tree, _React$Component);\n  var _super = _createSuper(Tree);\n  function Tree() {\n    var _this;\n    _classCallCheck(this, Tree);\n    for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n      _args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(_args));\n    _this.destroyed = false;\n    _this.delayedDragEnterLogic = void 0;\n    _this.loadingRetryTimes = {};\n    _this.state = {\n      keyEntities: {},\n      indent: null,\n      selectedKeys: [],\n      checkedKeys: [],\n      halfCheckedKeys: [],\n      loadedKeys: [],\n      loadingKeys: [],\n      expandedKeys: [],\n      draggingNodeKey: null,\n      dragChildrenKeys: [],\n      // dropTargetKey is the key of abstract-drop-node\n      // the abstract-drop-node is the real drop node when drag and drop\n      // not the DOM drag over node\n      dropTargetKey: null,\n      dropPosition: null,\n      dropContainerKey: null,\n      dropLevelOffset: null,\n      dropTargetPos: null,\n      dropAllowed: true,\n      // the abstract-drag-over-node\n      // if mouse is on the bottom of top dom node or no the top of the bottom dom node\n      // abstract-drag-over-node is the top node\n      dragOverNodeKey: null,\n      treeData: [],\n      flattenNodes: [],\n      focused: false,\n      activeKey: null,\n      listChanging: false,\n      prevProps: null,\n      fieldNames: fillFieldNames()\n    };\n    _this.dragStartMousePosition = null;\n    _this.dragNode = void 0;\n    _this.currentMouseOverDroppableNodeKey = null;\n    _this.listRef = /*#__PURE__*/React.createRef();\n    _this.onNodeDragStart = function (event, node) {\n      var _this$state = _this.state,\n        expandedKeys = _this$state.expandedKeys,\n        keyEntities = _this$state.keyEntities;\n      var onDragStart = _this.props.onDragStart;\n      var eventKey = node.props.eventKey;\n      _this.dragNode = node;\n      _this.dragStartMousePosition = {\n        x: event.clientX,\n        y: event.clientY\n      };\n      var newExpandedKeys = arrDel(expandedKeys, eventKey);\n      _this.setState({\n        draggingNodeKey: eventKey,\n        dragChildrenKeys: getDragChildrenKeys(eventKey, keyEntities),\n        indent: _this.listRef.current.getIndentWidth()\n      });\n      _this.setExpandedKeys(newExpandedKeys);\n      window.addEventListener('dragend', _this.onWindowDragEnd);\n      onDragStart === null || onDragStart === void 0 ? void 0 : onDragStart({\n        event: event,\n        node: convertNodePropsToEventData(node.props)\n      });\n    };\n    /**\n     * [Legacy] Select handler is smaller than node,\n     * so that this will trigger when drag enter node or select handler.\n     * This is a little tricky if customize css without padding.\n     * Better for use mouse move event to refresh drag state.\n     * But let's just keep it to avoid event trigger logic change.\n     */\n    _this.onNodeDragEnter = function (event, node) {\n      var _this$state2 = _this.state,\n        expandedKeys = _this$state2.expandedKeys,\n        keyEntities = _this$state2.keyEntities,\n        dragChildrenKeys = _this$state2.dragChildrenKeys,\n        flattenNodes = _this$state2.flattenNodes,\n        indent = _this$state2.indent;\n      var _this$props = _this.props,\n        onDragEnter = _this$props.onDragEnter,\n        onExpand = _this$props.onExpand,\n        allowDrop = _this$props.allowDrop,\n        direction = _this$props.direction;\n      var _node$props = node.props,\n        pos = _node$props.pos,\n        eventKey = _node$props.eventKey;\n      var _assertThisInitialize = _assertThisInitialized(_this),\n        dragNode = _assertThisInitialize.dragNode;\n      // record the key of node which is latest entered, used in dragleave event.\n      if (_this.currentMouseOverDroppableNodeKey !== eventKey) {\n        _this.currentMouseOverDroppableNodeKey = eventKey;\n      }\n      if (!dragNode) {\n        _this.resetDragState();\n        return;\n      }\n      var _calcDropPosition = calcDropPosition(event, dragNode, node, indent, _this.dragStartMousePosition, allowDrop, flattenNodes, keyEntities, expandedKeys, direction),\n        dropPosition = _calcDropPosition.dropPosition,\n        dropLevelOffset = _calcDropPosition.dropLevelOffset,\n        dropTargetKey = _calcDropPosition.dropTargetKey,\n        dropContainerKey = _calcDropPosition.dropContainerKey,\n        dropTargetPos = _calcDropPosition.dropTargetPos,\n        dropAllowed = _calcDropPosition.dropAllowed,\n        dragOverNodeKey = _calcDropPosition.dragOverNodeKey;\n      if (\n      // don't allow drop inside its children\n      dragChildrenKeys.indexOf(dropTargetKey) !== -1 ||\n      // don't allow drop when drop is not allowed caculated by calcDropPosition\n      !dropAllowed) {\n        _this.resetDragState();\n        return;\n      }\n      // Side effect for delay drag\n      if (!_this.delayedDragEnterLogic) {\n        _this.delayedDragEnterLogic = {};\n      }\n      Object.keys(_this.delayedDragEnterLogic).forEach(function (key) {\n        clearTimeout(_this.delayedDragEnterLogic[key]);\n      });\n      if (dragNode.props.eventKey !== node.props.eventKey) {\n        // hoist expand logic here\n        // since if logic is on the bottom\n        // it will be blocked by abstract dragover node check\n        //   => if you dragenter from top, you mouse will still be consider as in the top node\n        event.persist();\n        _this.delayedDragEnterLogic[pos] = window.setTimeout(function () {\n          if (_this.state.draggingNodeKey === null) return;\n          var newExpandedKeys = _toConsumableArray(expandedKeys);\n          var entity = getEntity(keyEntities, node.props.eventKey);\n          if (entity && (entity.children || []).length) {\n            newExpandedKeys = arrAdd(expandedKeys, node.props.eventKey);\n          }\n          if (!('expandedKeys' in _this.props)) {\n            _this.setExpandedKeys(newExpandedKeys);\n          }\n          onExpand === null || onExpand === void 0 ? void 0 : onExpand(newExpandedKeys, {\n            node: convertNodePropsToEventData(node.props),\n            expanded: true,\n            nativeEvent: event.nativeEvent\n          });\n        }, 800);\n      }\n      // Skip if drag node is self\n      if (dragNode.props.eventKey === dropTargetKey && dropLevelOffset === 0) {\n        _this.resetDragState();\n        return;\n      }\n      // Update drag over node and drag state\n      _this.setState({\n        dragOverNodeKey: dragOverNodeKey,\n        dropPosition: dropPosition,\n        dropLevelOffset: dropLevelOffset,\n        dropTargetKey: dropTargetKey,\n        dropContainerKey: dropContainerKey,\n        dropTargetPos: dropTargetPos,\n        dropAllowed: dropAllowed\n      });\n      onDragEnter === null || onDragEnter === void 0 ? void 0 : onDragEnter({\n        event: event,\n        node: convertNodePropsToEventData(node.props),\n        expandedKeys: expandedKeys\n      });\n    };\n    _this.onNodeDragOver = function (event, node) {\n      var _this$state3 = _this.state,\n        dragChildrenKeys = _this$state3.dragChildrenKeys,\n        flattenNodes = _this$state3.flattenNodes,\n        keyEntities = _this$state3.keyEntities,\n        expandedKeys = _this$state3.expandedKeys,\n        indent = _this$state3.indent;\n      var _this$props2 = _this.props,\n        onDragOver = _this$props2.onDragOver,\n        allowDrop = _this$props2.allowDrop,\n        direction = _this$props2.direction;\n      var _assertThisInitialize2 = _assertThisInitialized(_this),\n        dragNode = _assertThisInitialize2.dragNode;\n      if (!dragNode) {\n        return;\n      }\n      var _calcDropPosition2 = calcDropPosition(event, dragNode, node, indent, _this.dragStartMousePosition, allowDrop, flattenNodes, keyEntities, expandedKeys, direction),\n        dropPosition = _calcDropPosition2.dropPosition,\n        dropLevelOffset = _calcDropPosition2.dropLevelOffset,\n        dropTargetKey = _calcDropPosition2.dropTargetKey,\n        dropContainerKey = _calcDropPosition2.dropContainerKey,\n        dropAllowed = _calcDropPosition2.dropAllowed,\n        dropTargetPos = _calcDropPosition2.dropTargetPos,\n        dragOverNodeKey = _calcDropPosition2.dragOverNodeKey;\n      if (dragChildrenKeys.indexOf(dropTargetKey) !== -1 || !dropAllowed) {\n        // don't allow drop inside its children\n        // don't allow drop when drop is not allowed caculated by calcDropPosition\n        return;\n      }\n      // Update drag position\n      if (dragNode.props.eventKey === dropTargetKey && dropLevelOffset === 0) {\n        if (!(_this.state.dropPosition === null && _this.state.dropLevelOffset === null && _this.state.dropTargetKey === null && _this.state.dropContainerKey === null && _this.state.dropTargetPos === null && _this.state.dropAllowed === false && _this.state.dragOverNodeKey === null)) {\n          _this.resetDragState();\n        }\n      } else if (!(dropPosition === _this.state.dropPosition && dropLevelOffset === _this.state.dropLevelOffset && dropTargetKey === _this.state.dropTargetKey && dropContainerKey === _this.state.dropContainerKey && dropTargetPos === _this.state.dropTargetPos && dropAllowed === _this.state.dropAllowed && dragOverNodeKey === _this.state.dragOverNodeKey)) {\n        _this.setState({\n          dropPosition: dropPosition,\n          dropLevelOffset: dropLevelOffset,\n          dropTargetKey: dropTargetKey,\n          dropContainerKey: dropContainerKey,\n          dropTargetPos: dropTargetPos,\n          dropAllowed: dropAllowed,\n          dragOverNodeKey: dragOverNodeKey\n        });\n      }\n      onDragOver === null || onDragOver === void 0 ? void 0 : onDragOver({\n        event: event,\n        node: convertNodePropsToEventData(node.props)\n      });\n    };\n    _this.onNodeDragLeave = function (event, node) {\n      // if it is outside the droppable area\n      // currentMouseOverDroppableNodeKey will be updated in dragenter event when into another droppable receiver.\n      if (_this.currentMouseOverDroppableNodeKey === node.props.eventKey && !event.currentTarget.contains(event.relatedTarget)) {\n        _this.resetDragState();\n        _this.currentMouseOverDroppableNodeKey = null;\n      }\n      var onDragLeave = _this.props.onDragLeave;\n      onDragLeave === null || onDragLeave === void 0 ? void 0 : onDragLeave({\n        event: event,\n        node: convertNodePropsToEventData(node.props)\n      });\n    };\n    // since stopPropagation() is called in treeNode\n    // if onWindowDrag is called, whice means state is keeped, drag state should be cleared\n    _this.onWindowDragEnd = function (event) {\n      _this.onNodeDragEnd(event, null, true);\n      window.removeEventListener('dragend', _this.onWindowDragEnd);\n    };\n    // if onNodeDragEnd is called, onWindowDragEnd won't be called since stopPropagation() is called\n    _this.onNodeDragEnd = function (event, node) {\n      var onDragEnd = _this.props.onDragEnd;\n      _this.setState({\n        dragOverNodeKey: null\n      });\n      _this.cleanDragState();\n      onDragEnd === null || onDragEnd === void 0 ? void 0 : onDragEnd({\n        event: event,\n        node: convertNodePropsToEventData(node.props)\n      });\n      _this.dragNode = null;\n      window.removeEventListener('dragend', _this.onWindowDragEnd);\n    };\n    _this.onNodeDrop = function (event, node) {\n      var _this$getActiveItem;\n      var outsideTree = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var _this$state4 = _this.state,\n        dragChildrenKeys = _this$state4.dragChildrenKeys,\n        dropPosition = _this$state4.dropPosition,\n        dropTargetKey = _this$state4.dropTargetKey,\n        dropTargetPos = _this$state4.dropTargetPos,\n        dropAllowed = _this$state4.dropAllowed;\n      if (!dropAllowed) return;\n      var onDrop = _this.props.onDrop;\n      _this.setState({\n        dragOverNodeKey: null\n      });\n      _this.cleanDragState();\n      if (dropTargetKey === null) return;\n      var abstractDropNodeProps = _objectSpread(_objectSpread({}, getTreeNodeProps(dropTargetKey, _this.getTreeNodeRequiredProps())), {}, {\n        active: ((_this$getActiveItem = _this.getActiveItem()) === null || _this$getActiveItem === void 0 ? void 0 : _this$getActiveItem.key) === dropTargetKey,\n        data: getEntity(_this.state.keyEntities, dropTargetKey).node\n      });\n      var dropToChild = dragChildrenKeys.indexOf(dropTargetKey) !== -1;\n      warning(!dropToChild, \"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.\");\n      var posArr = posToArr(dropTargetPos);\n      var dropResult = {\n        event: event,\n        node: convertNodePropsToEventData(abstractDropNodeProps),\n        dragNode: _this.dragNode ? convertNodePropsToEventData(_this.dragNode.props) : null,\n        dragNodesKeys: [_this.dragNode.props.eventKey].concat(dragChildrenKeys),\n        dropToGap: dropPosition !== 0,\n        dropPosition: dropPosition + Number(posArr[posArr.length - 1])\n      };\n      if (!outsideTree) {\n        onDrop === null || onDrop === void 0 ? void 0 : onDrop(dropResult);\n      }\n      _this.dragNode = null;\n    };\n    _this.cleanDragState = function () {\n      var draggingNodeKey = _this.state.draggingNodeKey;\n      if (draggingNodeKey !== null) {\n        _this.setState({\n          draggingNodeKey: null,\n          dropPosition: null,\n          dropContainerKey: null,\n          dropTargetKey: null,\n          dropLevelOffset: null,\n          dropAllowed: true,\n          dragOverNodeKey: null\n        });\n      }\n      _this.dragStartMousePosition = null;\n      _this.currentMouseOverDroppableNodeKey = null;\n    };\n    _this.triggerExpandActionExpand = function (e, treeNode) {\n      var _this$state5 = _this.state,\n        expandedKeys = _this$state5.expandedKeys,\n        flattenNodes = _this$state5.flattenNodes;\n      var expanded = treeNode.expanded,\n        key = treeNode.key,\n        isLeaf = treeNode.isLeaf;\n      if (isLeaf || e.shiftKey || e.metaKey || e.ctrlKey) {\n        return;\n      }\n      var node = flattenNodes.filter(function (nodeItem) {\n        return nodeItem.key === key;\n      })[0];\n      var eventNode = convertNodePropsToEventData(_objectSpread(_objectSpread({}, getTreeNodeProps(key, _this.getTreeNodeRequiredProps())), {}, {\n        data: node.data\n      }));\n      _this.setExpandedKeys(expanded ? arrDel(expandedKeys, key) : arrAdd(expandedKeys, key));\n      _this.onNodeExpand(e, eventNode);\n    };\n    _this.onNodeClick = function (e, treeNode) {\n      var _this$props3 = _this.props,\n        onClick = _this$props3.onClick,\n        expandAction = _this$props3.expandAction;\n      if (expandAction === 'click') {\n        _this.triggerExpandActionExpand(e, treeNode);\n      }\n      onClick === null || onClick === void 0 ? void 0 : onClick(e, treeNode);\n    };\n    _this.onNodeDoubleClick = function (e, treeNode) {\n      var _this$props4 = _this.props,\n        onDoubleClick = _this$props4.onDoubleClick,\n        expandAction = _this$props4.expandAction;\n      if (expandAction === 'doubleClick') {\n        _this.triggerExpandActionExpand(e, treeNode);\n      }\n      onDoubleClick === null || onDoubleClick === void 0 ? void 0 : onDoubleClick(e, treeNode);\n    };\n    _this.onNodeSelect = function (e, treeNode) {\n      var selectedKeys = _this.state.selectedKeys;\n      var _this$state6 = _this.state,\n        keyEntities = _this$state6.keyEntities,\n        fieldNames = _this$state6.fieldNames;\n      var _this$props5 = _this.props,\n        onSelect = _this$props5.onSelect,\n        multiple = _this$props5.multiple;\n      var selected = treeNode.selected;\n      var key = treeNode[fieldNames.key];\n      var targetSelected = !selected;\n      // Update selected keys\n      if (!targetSelected) {\n        selectedKeys = arrDel(selectedKeys, key);\n      } else if (!multiple) {\n        selectedKeys = [key];\n      } else {\n        selectedKeys = arrAdd(selectedKeys, key);\n      }\n      // [Legacy] Not found related usage in doc or upper libs\n      var selectedNodes = selectedKeys.map(function (selectedKey) {\n        var entity = getEntity(keyEntities, selectedKey);\n        if (!entity) return null;\n        return entity.node;\n      }).filter(function (node) {\n        return node;\n      });\n      _this.setUncontrolledState({\n        selectedKeys: selectedKeys\n      });\n      onSelect === null || onSelect === void 0 ? void 0 : onSelect(selectedKeys, {\n        event: 'select',\n        selected: targetSelected,\n        node: treeNode,\n        selectedNodes: selectedNodes,\n        nativeEvent: e.nativeEvent\n      });\n    };\n    _this.onNodeCheck = function (e, treeNode, checked) {\n      var _this$state7 = _this.state,\n        keyEntities = _this$state7.keyEntities,\n        oriCheckedKeys = _this$state7.checkedKeys,\n        oriHalfCheckedKeys = _this$state7.halfCheckedKeys;\n      var _this$props6 = _this.props,\n        checkStrictly = _this$props6.checkStrictly,\n        onCheck = _this$props6.onCheck;\n      var key = treeNode.key;\n      // Prepare trigger arguments\n      var checkedObj;\n      var eventObj = {\n        event: 'check',\n        node: treeNode,\n        checked: checked,\n        nativeEvent: e.nativeEvent\n      };\n      if (checkStrictly) {\n        var checkedKeys = checked ? arrAdd(oriCheckedKeys, key) : arrDel(oriCheckedKeys, key);\n        var halfCheckedKeys = arrDel(oriHalfCheckedKeys, key);\n        checkedObj = {\n          checked: checkedKeys,\n          halfChecked: halfCheckedKeys\n        };\n        eventObj.checkedNodes = checkedKeys.map(function (checkedKey) {\n          return getEntity(keyEntities, checkedKey);\n        }).filter(function (entity) {\n          return entity;\n        }).map(function (entity) {\n          return entity.node;\n        });\n        _this.setUncontrolledState({\n          checkedKeys: checkedKeys\n        });\n      } else {\n        // Always fill first\n        var _conductCheck = conductCheck([].concat(_toConsumableArray(oriCheckedKeys), [key]), true, keyEntities),\n          _checkedKeys = _conductCheck.checkedKeys,\n          _halfCheckedKeys = _conductCheck.halfCheckedKeys;\n        // If remove, we do it again to correction\n        if (!checked) {\n          var keySet = new Set(_checkedKeys);\n          keySet.delete(key);\n          var _conductCheck2 = conductCheck(Array.from(keySet), {\n            checked: false,\n            halfCheckedKeys: _halfCheckedKeys\n          }, keyEntities);\n          _checkedKeys = _conductCheck2.checkedKeys;\n          _halfCheckedKeys = _conductCheck2.halfCheckedKeys;\n        }\n        checkedObj = _checkedKeys;\n        // [Legacy] This is used for `rc-tree-select`\n        eventObj.checkedNodes = [];\n        eventObj.checkedNodesPositions = [];\n        eventObj.halfCheckedKeys = _halfCheckedKeys;\n        _checkedKeys.forEach(function (checkedKey) {\n          var entity = getEntity(keyEntities, checkedKey);\n          if (!entity) return;\n          var node = entity.node,\n            pos = entity.pos;\n          eventObj.checkedNodes.push(node);\n          eventObj.checkedNodesPositions.push({\n            node: node,\n            pos: pos\n          });\n        });\n        _this.setUncontrolledState({\n          checkedKeys: _checkedKeys\n        }, false, {\n          halfCheckedKeys: _halfCheckedKeys\n        });\n      }\n      onCheck === null || onCheck === void 0 ? void 0 : onCheck(checkedObj, eventObj);\n    };\n    _this.onNodeLoad = function (treeNode) {\n      var key = treeNode.key;\n      var loadPromise = new Promise(function (resolve, reject) {\n        // We need to get the latest state of loading/loaded keys\n        _this.setState(function (_ref) {\n          var _ref$loadedKeys = _ref.loadedKeys,\n            loadedKeys = _ref$loadedKeys === void 0 ? [] : _ref$loadedKeys,\n            _ref$loadingKeys = _ref.loadingKeys,\n            loadingKeys = _ref$loadingKeys === void 0 ? [] : _ref$loadingKeys;\n          var _this$props7 = _this.props,\n            loadData = _this$props7.loadData,\n            onLoad = _this$props7.onLoad;\n          if (!loadData || loadedKeys.indexOf(key) !== -1 || loadingKeys.indexOf(key) !== -1) {\n            return null;\n          }\n          // Process load data\n          var promise = loadData(treeNode);\n          promise.then(function () {\n            var currentLoadedKeys = _this.state.loadedKeys;\n            var newLoadedKeys = arrAdd(currentLoadedKeys, key);\n            // onLoad should trigger before internal setState to avoid `loadData` trigger twice.\n            // https://github.com/ant-design/ant-design/issues/12464\n            onLoad === null || onLoad === void 0 ? void 0 : onLoad(newLoadedKeys, {\n              event: 'load',\n              node: treeNode\n            });\n            _this.setUncontrolledState({\n              loadedKeys: newLoadedKeys\n            });\n            _this.setState(function (prevState) {\n              return {\n                loadingKeys: arrDel(prevState.loadingKeys, key)\n              };\n            });\n            resolve();\n          }).catch(function (e) {\n            _this.setState(function (prevState) {\n              return {\n                loadingKeys: arrDel(prevState.loadingKeys, key)\n              };\n            });\n            // If exceed max retry times, we give up retry\n            _this.loadingRetryTimes[key] = (_this.loadingRetryTimes[key] || 0) + 1;\n            if (_this.loadingRetryTimes[key] >= MAX_RETRY_TIMES) {\n              var currentLoadedKeys = _this.state.loadedKeys;\n              warning(false, 'Retry for `loadData` many times but still failed. No more retry.');\n              _this.setUncontrolledState({\n                loadedKeys: arrAdd(currentLoadedKeys, key)\n              });\n              resolve();\n            }\n            reject(e);\n          });\n          return {\n            loadingKeys: arrAdd(loadingKeys, key)\n          };\n        });\n      });\n      // Not care warning if we ignore this\n      loadPromise.catch(function () {});\n      return loadPromise;\n    };\n    _this.onNodeMouseEnter = function (event, node) {\n      var onMouseEnter = _this.props.onMouseEnter;\n      onMouseEnter === null || onMouseEnter === void 0 ? void 0 : onMouseEnter({\n        event: event,\n        node: node\n      });\n    };\n    _this.onNodeMouseLeave = function (event, node) {\n      var onMouseLeave = _this.props.onMouseLeave;\n      onMouseLeave === null || onMouseLeave === void 0 ? void 0 : onMouseLeave({\n        event: event,\n        node: node\n      });\n    };\n    _this.onNodeContextMenu = function (event, node) {\n      var onRightClick = _this.props.onRightClick;\n      if (onRightClick) {\n        event.preventDefault();\n        onRightClick({\n          event: event,\n          node: node\n        });\n      }\n    };\n    _this.onFocus = function () {\n      var onFocus = _this.props.onFocus;\n      _this.setState({\n        focused: true\n      });\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      onFocus === null || onFocus === void 0 ? void 0 : onFocus.apply(void 0, args);\n    };\n    _this.onBlur = function () {\n      var onBlur = _this.props.onBlur;\n      _this.setState({\n        focused: false\n      });\n      _this.onActiveChange(null);\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n      onBlur === null || onBlur === void 0 ? void 0 : onBlur.apply(void 0, args);\n    };\n    _this.getTreeNodeRequiredProps = function () {\n      var _this$state8 = _this.state,\n        expandedKeys = _this$state8.expandedKeys,\n        selectedKeys = _this$state8.selectedKeys,\n        loadedKeys = _this$state8.loadedKeys,\n        loadingKeys = _this$state8.loadingKeys,\n        checkedKeys = _this$state8.checkedKeys,\n        halfCheckedKeys = _this$state8.halfCheckedKeys,\n        dragOverNodeKey = _this$state8.dragOverNodeKey,\n        dropPosition = _this$state8.dropPosition,\n        keyEntities = _this$state8.keyEntities;\n      return {\n        expandedKeys: expandedKeys || [],\n        selectedKeys: selectedKeys || [],\n        loadedKeys: loadedKeys || [],\n        loadingKeys: loadingKeys || [],\n        checkedKeys: checkedKeys || [],\n        halfCheckedKeys: halfCheckedKeys || [],\n        dragOverNodeKey: dragOverNodeKey,\n        dropPosition: dropPosition,\n        keyEntities: keyEntities\n      };\n    };\n    // =========================== Expanded ===========================\n    /** Set uncontrolled `expandedKeys`. This will also auto update `flattenNodes`. */\n    _this.setExpandedKeys = function (expandedKeys) {\n      var _this$state9 = _this.state,\n        treeData = _this$state9.treeData,\n        fieldNames = _this$state9.fieldNames;\n      var flattenNodes = flattenTreeData(treeData, expandedKeys, fieldNames);\n      _this.setUncontrolledState({\n        expandedKeys: expandedKeys,\n        flattenNodes: flattenNodes\n      }, true);\n    };\n    _this.onNodeExpand = function (e, treeNode) {\n      var expandedKeys = _this.state.expandedKeys;\n      var _this$state10 = _this.state,\n        listChanging = _this$state10.listChanging,\n        fieldNames = _this$state10.fieldNames;\n      var _this$props8 = _this.props,\n        onExpand = _this$props8.onExpand,\n        loadData = _this$props8.loadData;\n      var expanded = treeNode.expanded;\n      var key = treeNode[fieldNames.key];\n      // Do nothing when motion is in progress\n      if (listChanging) {\n        return;\n      }\n      // Update selected keys\n      var index = expandedKeys.indexOf(key);\n      var targetExpanded = !expanded;\n      warning(expanded && index !== -1 || !expanded && index === -1, 'Expand state not sync with index check');\n      if (targetExpanded) {\n        expandedKeys = arrAdd(expandedKeys, key);\n      } else {\n        expandedKeys = arrDel(expandedKeys, key);\n      }\n      _this.setExpandedKeys(expandedKeys);\n      onExpand === null || onExpand === void 0 ? void 0 : onExpand(expandedKeys, {\n        node: treeNode,\n        expanded: targetExpanded,\n        nativeEvent: e.nativeEvent\n      });\n      // Async Load data\n      if (targetExpanded && loadData) {\n        var loadPromise = _this.onNodeLoad(treeNode);\n        if (loadPromise) {\n          loadPromise.then(function () {\n            // [Legacy] Refresh logic\n            var newFlattenTreeData = flattenTreeData(_this.state.treeData, expandedKeys, fieldNames);\n            _this.setUncontrolledState({\n              flattenNodes: newFlattenTreeData\n            });\n          }).catch(function () {\n            var currentExpandedKeys = _this.state.expandedKeys;\n            var expandedKeysToRestore = arrDel(currentExpandedKeys, key);\n            _this.setExpandedKeys(expandedKeysToRestore);\n          });\n        }\n      }\n    };\n    _this.onListChangeStart = function () {\n      _this.setUncontrolledState({\n        listChanging: true\n      });\n    };\n    _this.onListChangeEnd = function () {\n      setTimeout(function () {\n        _this.setUncontrolledState({\n          listChanging: false\n        });\n      });\n    };\n    // =========================== Keyboard ===========================\n    _this.onActiveChange = function (newActiveKey) {\n      var activeKey = _this.state.activeKey;\n      var onActiveChange = _this.props.onActiveChange;\n      if (activeKey === newActiveKey) {\n        return;\n      }\n      _this.setState({\n        activeKey: newActiveKey\n      });\n      if (newActiveKey !== null) {\n        _this.scrollTo({\n          key: newActiveKey\n        });\n      }\n      onActiveChange === null || onActiveChange === void 0 ? void 0 : onActiveChange(newActiveKey);\n    };\n    _this.getActiveItem = function () {\n      var _this$state11 = _this.state,\n        activeKey = _this$state11.activeKey,\n        flattenNodes = _this$state11.flattenNodes;\n      if (activeKey === null) {\n        return null;\n      }\n      return flattenNodes.find(function (_ref2) {\n        var key = _ref2.key;\n        return key === activeKey;\n      }) || null;\n    };\n    _this.offsetActiveKey = function (offset) {\n      var _this$state12 = _this.state,\n        flattenNodes = _this$state12.flattenNodes,\n        activeKey = _this$state12.activeKey;\n      var index = flattenNodes.findIndex(function (_ref3) {\n        var key = _ref3.key;\n        return key === activeKey;\n      });\n      // Align with index\n      if (index === -1 && offset < 0) {\n        index = flattenNodes.length;\n      }\n      index = (index + offset + flattenNodes.length) % flattenNodes.length;\n      var item = flattenNodes[index];\n      if (item) {\n        var key = item.key;\n        _this.onActiveChange(key);\n      } else {\n        _this.onActiveChange(null);\n      }\n    };\n    _this.onKeyDown = function (event) {\n      var _this$state13 = _this.state,\n        activeKey = _this$state13.activeKey,\n        expandedKeys = _this$state13.expandedKeys,\n        checkedKeys = _this$state13.checkedKeys,\n        fieldNames = _this$state13.fieldNames;\n      var _this$props9 = _this.props,\n        onKeyDown = _this$props9.onKeyDown,\n        checkable = _this$props9.checkable,\n        selectable = _this$props9.selectable;\n      // >>>>>>>>>> Direction\n      switch (event.which) {\n        case KeyCode.UP:\n          {\n            _this.offsetActiveKey(-1);\n            event.preventDefault();\n            break;\n          }\n        case KeyCode.DOWN:\n          {\n            _this.offsetActiveKey(1);\n            event.preventDefault();\n            break;\n          }\n      }\n      // >>>>>>>>>> Expand & Selection\n      var activeItem = _this.getActiveItem();\n      if (activeItem && activeItem.data) {\n        var treeNodeRequiredProps = _this.getTreeNodeRequiredProps();\n        var expandable = activeItem.data.isLeaf === false || !!(activeItem.data[fieldNames.children] || []).length;\n        var eventNode = convertNodePropsToEventData(_objectSpread(_objectSpread({}, getTreeNodeProps(activeKey, treeNodeRequiredProps)), {}, {\n          data: activeItem.data,\n          active: true\n        }));\n        switch (event.which) {\n          // >>> Expand\n          case KeyCode.LEFT:\n            {\n              // Collapse if possible\n              if (expandable && expandedKeys.includes(activeKey)) {\n                _this.onNodeExpand({}, eventNode);\n              } else if (activeItem.parent) {\n                _this.onActiveChange(activeItem.parent.key);\n              }\n              event.preventDefault();\n              break;\n            }\n          case KeyCode.RIGHT:\n            {\n              // Expand if possible\n              if (expandable && !expandedKeys.includes(activeKey)) {\n                _this.onNodeExpand({}, eventNode);\n              } else if (activeItem.children && activeItem.children.length) {\n                _this.onActiveChange(activeItem.children[0].key);\n              }\n              event.preventDefault();\n              break;\n            }\n          // Selection\n          case KeyCode.ENTER:\n          case KeyCode.SPACE:\n            {\n              if (checkable && !eventNode.disabled && eventNode.checkable !== false && !eventNode.disableCheckbox) {\n                _this.onNodeCheck({}, eventNode, !checkedKeys.includes(activeKey));\n              } else if (!checkable && selectable && !eventNode.disabled && eventNode.selectable !== false) {\n                _this.onNodeSelect({}, eventNode);\n              }\n              break;\n            }\n        }\n      }\n      onKeyDown === null || onKeyDown === void 0 ? void 0 : onKeyDown(event);\n    };\n    /**\n     * Only update the value which is not in props\n     */\n    _this.setUncontrolledState = function (state) {\n      var atomic = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var forceState = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      if (!_this.destroyed) {\n        var needSync = false;\n        var allPassed = true;\n        var newState = {};\n        Object.keys(state).forEach(function (name) {\n          if (name in _this.props) {\n            allPassed = false;\n            return;\n          }\n          needSync = true;\n          newState[name] = state[name];\n        });\n        if (needSync && (!atomic || allPassed)) {\n          _this.setState(_objectSpread(_objectSpread({}, newState), forceState));\n        }\n      }\n    };\n    _this.scrollTo = function (scroll) {\n      _this.listRef.current.scrollTo(scroll);\n    };\n    return _this;\n  }\n  _createClass(Tree, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.destroyed = false;\n      this.onUpdated();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.onUpdated();\n    }\n  }, {\n    key: \"onUpdated\",\n    value: function onUpdated() {\n      var _this$props10 = this.props,\n        activeKey = _this$props10.activeKey,\n        _this$props10$itemScr = _this$props10.itemScrollOffset,\n        itemScrollOffset = _this$props10$itemScr === void 0 ? 0 : _this$props10$itemScr;\n      if (activeKey !== undefined && activeKey !== this.state.activeKey) {\n        this.setState({\n          activeKey: activeKey\n        });\n        if (activeKey !== null) {\n          this.scrollTo({\n            key: activeKey,\n            offset: itemScrollOffset\n          });\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener('dragend', this.onWindowDragEnd);\n      this.destroyed = true;\n    }\n  }, {\n    key: \"resetDragState\",\n    value: function resetDragState() {\n      this.setState({\n        dragOverNodeKey: null,\n        dropPosition: null,\n        dropLevelOffset: null,\n        dropTargetKey: null,\n        dropContainerKey: null,\n        dropTargetPos: null,\n        dropAllowed: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _classNames;\n      var _this$state14 = this.state,\n        focused = _this$state14.focused,\n        flattenNodes = _this$state14.flattenNodes,\n        keyEntities = _this$state14.keyEntities,\n        draggingNodeKey = _this$state14.draggingNodeKey,\n        activeKey = _this$state14.activeKey,\n        dropLevelOffset = _this$state14.dropLevelOffset,\n        dropContainerKey = _this$state14.dropContainerKey,\n        dropTargetKey = _this$state14.dropTargetKey,\n        dropPosition = _this$state14.dropPosition,\n        dragOverNodeKey = _this$state14.dragOverNodeKey,\n        indent = _this$state14.indent;\n      var _this$props11 = this.props,\n        prefixCls = _this$props11.prefixCls,\n        className = _this$props11.className,\n        style = _this$props11.style,\n        showLine = _this$props11.showLine,\n        focusable = _this$props11.focusable,\n        _this$props11$tabInde = _this$props11.tabIndex,\n        tabIndex = _this$props11$tabInde === void 0 ? 0 : _this$props11$tabInde,\n        selectable = _this$props11.selectable,\n        showIcon = _this$props11.showIcon,\n        icon = _this$props11.icon,\n        switcherIcon = _this$props11.switcherIcon,\n        draggable = _this$props11.draggable,\n        checkable = _this$props11.checkable,\n        checkStrictly = _this$props11.checkStrictly,\n        disabled = _this$props11.disabled,\n        motion = _this$props11.motion,\n        loadData = _this$props11.loadData,\n        filterTreeNode = _this$props11.filterTreeNode,\n        height = _this$props11.height,\n        itemHeight = _this$props11.itemHeight,\n        virtual = _this$props11.virtual,\n        titleRender = _this$props11.titleRender,\n        dropIndicatorRender = _this$props11.dropIndicatorRender,\n        onContextMenu = _this$props11.onContextMenu,\n        onScroll = _this$props11.onScroll,\n        direction = _this$props11.direction,\n        rootClassName = _this$props11.rootClassName,\n        rootStyle = _this$props11.rootStyle;\n      var domProps = pickAttrs(this.props, {\n        aria: true,\n        data: true\n      });\n      // It's better move to hooks but we just simply keep here\n      var draggableConfig;\n      if (draggable) {\n        if (_typeof(draggable) === 'object') {\n          draggableConfig = draggable;\n        } else if (typeof draggable === 'function') {\n          draggableConfig = {\n            nodeDraggable: draggable\n          };\n        } else {\n          draggableConfig = {};\n        }\n      }\n      return /*#__PURE__*/React.createElement(TreeContext.Provider, {\n        value: {\n          prefixCls: prefixCls,\n          selectable: selectable,\n          showIcon: showIcon,\n          icon: icon,\n          switcherIcon: switcherIcon,\n          draggable: draggableConfig,\n          draggingNodeKey: draggingNodeKey,\n          checkable: checkable,\n          checkStrictly: checkStrictly,\n          disabled: disabled,\n          keyEntities: keyEntities,\n          dropLevelOffset: dropLevelOffset,\n          dropContainerKey: dropContainerKey,\n          dropTargetKey: dropTargetKey,\n          dropPosition: dropPosition,\n          dragOverNodeKey: dragOverNodeKey,\n          indent: indent,\n          direction: direction,\n          dropIndicatorRender: dropIndicatorRender,\n          loadData: loadData,\n          filterTreeNode: filterTreeNode,\n          titleRender: titleRender,\n          onNodeClick: this.onNodeClick,\n          onNodeDoubleClick: this.onNodeDoubleClick,\n          onNodeExpand: this.onNodeExpand,\n          onNodeSelect: this.onNodeSelect,\n          onNodeCheck: this.onNodeCheck,\n          onNodeLoad: this.onNodeLoad,\n          onNodeMouseEnter: this.onNodeMouseEnter,\n          onNodeMouseLeave: this.onNodeMouseLeave,\n          onNodeContextMenu: this.onNodeContextMenu,\n          onNodeDragStart: this.onNodeDragStart,\n          onNodeDragEnter: this.onNodeDragEnter,\n          onNodeDragOver: this.onNodeDragOver,\n          onNodeDragLeave: this.onNodeDragLeave,\n          onNodeDragEnd: this.onNodeDragEnd,\n          onNodeDrop: this.onNodeDrop\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        role: \"tree\",\n        className: classNames(prefixCls, className, rootClassName, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-show-line\"), showLine), _defineProperty(_classNames, \"\".concat(prefixCls, \"-focused\"), focused), _defineProperty(_classNames, \"\".concat(prefixCls, \"-active-focused\"), activeKey !== null), _classNames)),\n        style: rootStyle\n      }, /*#__PURE__*/React.createElement(NodeList, _extends({\n        ref: this.listRef,\n        prefixCls: prefixCls,\n        style: style,\n        data: flattenNodes,\n        disabled: disabled,\n        selectable: selectable,\n        checkable: !!checkable,\n        motion: motion,\n        dragging: draggingNodeKey !== null,\n        height: height,\n        itemHeight: itemHeight,\n        virtual: virtual,\n        focusable: focusable,\n        focused: focused,\n        tabIndex: tabIndex,\n        activeItem: this.getActiveItem(),\n        onFocus: this.onFocus,\n        onBlur: this.onBlur,\n        onKeyDown: this.onKeyDown,\n        onActiveChange: this.onActiveChange,\n        onListChangeStart: this.onListChangeStart,\n        onListChangeEnd: this.onListChangeEnd,\n        onContextMenu: onContextMenu,\n        onScroll: onScroll\n      }, this.getTreeNodeRequiredProps(), domProps))));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, prevState) {\n      var prevProps = prevState.prevProps;\n      var newState = {\n        prevProps: props\n      };\n      function needSync(name) {\n        return !prevProps && name in props || prevProps && prevProps[name] !== props[name];\n      }\n      // ================== Tree Node ==================\n      var treeData;\n      // fieldNames\n      var fieldNames = prevState.fieldNames;\n      if (needSync('fieldNames')) {\n        fieldNames = fillFieldNames(props.fieldNames);\n        newState.fieldNames = fieldNames;\n      }\n      // Check if `treeData` or `children` changed and save into the state.\n      if (needSync('treeData')) {\n        treeData = props.treeData;\n      } else if (needSync('children')) {\n        warning(false, '`children` of Tree is deprecated. Please use `treeData` instead.');\n        treeData = convertTreeToData(props.children);\n      }\n      // Save flatten nodes info and convert `treeData` into keyEntities\n      if (treeData) {\n        newState.treeData = treeData;\n        var entitiesMap = convertDataToEntities(treeData, {\n          fieldNames: fieldNames\n        });\n        newState.keyEntities = _objectSpread(_defineProperty({}, MOTION_KEY, MotionEntity), entitiesMap.keyEntities);\n        // Warning if treeNode not provide key\n        if (process.env.NODE_ENV !== 'production') {\n          warningWithoutKey(treeData, fieldNames);\n        }\n      }\n      var keyEntities = newState.keyEntities || prevState.keyEntities;\n      // ================ expandedKeys =================\n      if (needSync('expandedKeys') || prevProps && needSync('autoExpandParent')) {\n        newState.expandedKeys = props.autoExpandParent || !prevProps && props.defaultExpandParent ? conductExpandParent(props.expandedKeys, keyEntities) : props.expandedKeys;\n      } else if (!prevProps && props.defaultExpandAll) {\n        var cloneKeyEntities = _objectSpread({}, keyEntities);\n        delete cloneKeyEntities[MOTION_KEY];\n        newState.expandedKeys = Object.keys(cloneKeyEntities).map(function (key) {\n          return cloneKeyEntities[key].key;\n        });\n      } else if (!prevProps && props.defaultExpandedKeys) {\n        newState.expandedKeys = props.autoExpandParent || props.defaultExpandParent ? conductExpandParent(props.defaultExpandedKeys, keyEntities) : props.defaultExpandedKeys;\n      }\n      if (!newState.expandedKeys) {\n        delete newState.expandedKeys;\n      }\n      // ================ flattenNodes =================\n      if (treeData || newState.expandedKeys) {\n        var flattenNodes = flattenTreeData(treeData || prevState.treeData, newState.expandedKeys || prevState.expandedKeys, fieldNames);\n        newState.flattenNodes = flattenNodes;\n      }\n      // ================ selectedKeys =================\n      if (props.selectable) {\n        if (needSync('selectedKeys')) {\n          newState.selectedKeys = calcSelectedKeys(props.selectedKeys, props);\n        } else if (!prevProps && props.defaultSelectedKeys) {\n          newState.selectedKeys = calcSelectedKeys(props.defaultSelectedKeys, props);\n        }\n      }\n      // ================= checkedKeys =================\n      if (props.checkable) {\n        var checkedKeyEntity;\n        if (needSync('checkedKeys')) {\n          checkedKeyEntity = parseCheckedKeys(props.checkedKeys) || {};\n        } else if (!prevProps && props.defaultCheckedKeys) {\n          checkedKeyEntity = parseCheckedKeys(props.defaultCheckedKeys) || {};\n        } else if (treeData) {\n          // If `treeData` changed, we also need check it\n          checkedKeyEntity = parseCheckedKeys(props.checkedKeys) || {\n            checkedKeys: prevState.checkedKeys,\n            halfCheckedKeys: prevState.halfCheckedKeys\n          };\n        }\n        if (checkedKeyEntity) {\n          var _checkedKeyEntity = checkedKeyEntity,\n            _checkedKeyEntity$che = _checkedKeyEntity.checkedKeys,\n            checkedKeys = _checkedKeyEntity$che === void 0 ? [] : _checkedKeyEntity$che,\n            _checkedKeyEntity$hal = _checkedKeyEntity.halfCheckedKeys,\n            halfCheckedKeys = _checkedKeyEntity$hal === void 0 ? [] : _checkedKeyEntity$hal;\n          if (!props.checkStrictly) {\n            var conductKeys = conductCheck(checkedKeys, true, keyEntities);\n            checkedKeys = conductKeys.checkedKeys;\n            halfCheckedKeys = conductKeys.halfCheckedKeys;\n          }\n          newState.checkedKeys = checkedKeys;\n          newState.halfCheckedKeys = halfCheckedKeys;\n        }\n      }\n      // ================= loadedKeys ==================\n      if (needSync('loadedKeys')) {\n        newState.loadedKeys = props.loadedKeys;\n      }\n      return newState;\n    }\n  }]);\n  return Tree;\n}(React.Component);\nTree.defaultProps = {\n  prefixCls: 'rc-tree',\n  showLine: false,\n  showIcon: true,\n  selectable: true,\n  multiple: false,\n  checkable: false,\n  disabled: false,\n  checkStrictly: false,\n  draggable: false,\n  defaultExpandParent: true,\n  autoExpandParent: false,\n  defaultExpandAll: false,\n  defaultExpandedKeys: [],\n  defaultCheckedKeys: [],\n  defaultSelectedKeys: [],\n  dropIndicatorRender: DropIndicator,\n  allowDrop: function allowDrop() {\n    return true;\n  },\n  expandAction: false\n};\nTree.TreeNode = TreeNode;\nexport default Tree;","import Tree from './Tree';\nimport TreeNode from './TreeNode';\nexport { TreeNode };\nexport default Tree;","import { css } from '@emotion/react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\n\nexport function getGlobalStyles(theme: GrafanaTheme2) {\n  return css`\n    .moveable-control-box {\n      z-index: 999;\n    }\n    ,\n    .rc-tree {\n      margin: 0;\n      margin-bottom: 15px;\n      border: 1px solid transparent;\n\n      &-focused:not(&-active-focused) {\n        border-color: cyan;\n      }\n\n      .rc-tree-title {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        width: 100%;\n      }\n\n      .rc-tree-treenode {\n        margin: 0;\n        padding: 1px;\n        line-height: 24px;\n        white-space: nowrap;\n        list-style: none;\n        outline: 0;\n\n        display: flex;\n        margin-bottom: 3px;\n        cursor: pointer;\n\n        .draggable {\n          color: #333;\n          -moz-user-select: none;\n          -khtml-user-select: none;\n          -webkit-user-select: none;\n          user-select: none;\n          /* Required to make elements draggable in old WebKit */\n          // -khtml-user-drag: element;\n          // -webkit-user-drag: element;\n        }\n\n        &.drop-container {\n          > .draggable::after {\n            position: absolute;\n            top: 0;\n            right: 0;\n            bottom: 0;\n            left: 0;\n            box-shadow: inset 0 0 0 2px blue;\n            content: '';\n          }\n          & ~ .rc-tree-treenode {\n            border-left: 2px solid ${theme.components.input.borderColor};\n          }\n        }\n        &.drop-target {\n          & ~ .rc-tree-treenode {\n            border-left: none;\n          }\n        }\n        &.filter-node {\n          > .rc-tree-node-content-wrapper {\n            color: #a60000 !important;\n            font-weight: bold !important;\n          }\n        }\n        ul {\n          margin: 0;\n          padding: 0 0 0 18px;\n        }\n        .rc-tree-node-content-wrapper {\n          position: relative;\n          display: inline-block;\n          height: 24px;\n          margin: 0;\n          padding: 0;\n          text-decoration: none;\n          vertical-align: top;\n          cursor: grab;\n          flex-grow: 1;\n          display: flex;\n\n          border: 1px solid ${theme.components.input.borderColor};\n          border-radius: ${theme.shape.radius.default};\n          background: ${theme.colors.background.secondary};\n          min-height: ${theme.spacing.gridSize * 4}px;\n\n          &:hover {\n            border: 1px solid ${theme.components.input.borderHover};\n          }\n\n          &.rc-tree-node-selected {\n            border: 1px solid ${theme.colors.primary.border};\n            opacity: 1;\n          }\n        }\n\n        span {\n          &.rc-tree-checkbox,\n          &.rc-tree-iconEle {\n            display: inline-block;\n            width: 16px;\n            height: 16px;\n            margin-right: 2px;\n            line-height: 16px;\n            vertical-align: -0.125em;\n            background-color: transparent;\n            background-repeat: no-repeat;\n            background-attachment: scroll;\n            border: 0 none;\n            outline: none;\n            cursor: pointer;\n\n            &.rc-tree-icon__customize {\n              background-image: none;\n            }\n          }\n          &.rc-tree-switcher {\n            display: flex;\n            align-items: center;\n            width: 16px;\n            background-color: transparent;\n            background-repeat: no-repeat;\n            background-attachment: scroll;\n            border: 0 none;\n            outline: none;\n            cursor: pointer;\n\n            &.rc-tree-icon__customize {\n              background-image: none;\n            }\n          }\n          &.rc-tree-icon_loading {\n            margin-right: 2px;\n            vertical-align: top;\n            background: url('data:image/gif;base64,R0lGODlhEAAQAKIGAMLY8YSx5HOm4Mjc88/g9Ofw+v///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFCgAGACwAAAAAEAAQAAADMGi6RbUwGjKIXCAA016PgRBElAVlG/RdLOO0X9nK61W39qvqiwz5Ls/rRqrggsdkAgAh+QQFCgAGACwCAAAABwAFAAADD2hqELAmiFBIYY4MAutdCQAh+QQFCgAGACwGAAAABwAFAAADD1hU1kaDOKMYCGAGEeYFCQAh+QQFCgAGACwKAAIABQAHAAADEFhUZjSkKdZqBQG0IELDQAIAIfkEBQoABgAsCgAGAAUABwAAAxBoVlRKgyjmlAIBqCDCzUoCACH5BAUKAAYALAYACgAHAAUAAAMPaGpFtYYMAgJgLogA610JACH5BAUKAAYALAIACgAHAAUAAAMPCAHWFiI4o1ghZZJB5i0JACH5BAUKAAYALAAABgAFAAcAAAMQCAFmIaEp1motpDQySMNFAgA7')\n              no-repeat scroll 0 0 transparent;\n          }\n          &.rc-tree-switcher {\n            &.rc-tree-switcher-noop {\n              cursor: auto;\n            }\n            &.rc-tree-switcher_open {\n              background-position: -93px -56px;\n            }\n            &.rc-tree-switcher_close {\n              background-position: -75px -56px;\n            }\n          }\n          &.rc-tree-checkbox {\n            width: 13px;\n            height: 13px;\n            margin: 0 3px;\n            background-position: 0 0;\n            &-checked {\n              background-position: -14px 0;\n            }\n            &-indeterminate {\n              background-position: -14px -28px;\n            }\n            &-disabled {\n              background-position: 0 -56px;\n            }\n            &.rc-tree-checkbox-checked.rc-tree-checkbox-disabled {\n              background-position: -14px -56px;\n            }\n            &.rc-tree-checkbox-indeterminate.rc-tree-checkbox-disabled {\n              position: relative;\n              background: #ccc;\n              border-radius: 3px;\n              &::after {\n                position: absolute;\n                top: 5px;\n                left: 3px;\n                width: 5px;\n                height: 0;\n                border: 2px solid #fff;\n                border-top: 0;\n                border-left: 0;\n                -webkit-transform: scale(1);\n                transform: scale(1);\n                content: ' ';\n              }\n            }\n          }\n        }\n      }\n      &:not(.rc-tree-show-line) {\n        .rc-tree-treenode {\n          .rc-tree-switcher-noop {\n            background: none;\n          }\n        }\n      }\n      &.rc-tree-show-line {\n        .rc-tree-treenode:not(:last-child) {\n          > ul {\n            background: url('data:image/gif;base64,R0lGODlhCQACAIAAAMzMzP///yH5BAEAAAEALAAAAAAJAAIAAAIEjI9pUAA7') 0 0\n              repeat-y;\n          }\n          > .rc-tree-switcher-noop {\n            background-position: -56px -18px;\n          }\n        }\n        .rc-tree-treenode:last-child {\n          > .rc-tree-switcher-noop {\n            background-position: -56px -36px;\n          }\n        }\n      }\n      &-child-tree {\n        display: none;\n        &-open {\n          display: block;\n        }\n      }\n      &-treenode-disabled {\n        > span:not(.rc-tree-switcher),\n        > a,\n        > a span {\n          color: #767676;\n          cursor: not-allowed;\n        }\n      }\n      &-treenode-active {\n        background: rgba(0, 0, 0, 0.1);\n      }\n      &-node-selected {\n        opacity: 0.8;\n      }\n      &-icon__open {\n        margin-right: 2px;\n        vertical-align: top;\n        background-position: -110px -16px;\n      }\n      &-icon__close {\n        margin-right: 2px;\n        vertical-align: top;\n        background-position: -110px 0;\n      }\n      &-icon__docu {\n        margin-right: 2px;\n        vertical-align: top;\n        background-position: -110px -32px;\n      }\n      &-icon__customize {\n        margin-right: 2px;\n        vertical-align: top;\n      }\n      &-title {\n        display: inline-block;\n      }\n      &-indent {\n        display: inline-block;\n        height: 0;\n        vertical-align: bottom;\n      }\n      &-indent-unit {\n        display: inline-block;\n        width: 16px;\n      }\n\n      &-draggable-icon {\n        display: inline-flex;\n        justify-content: center;\n        width: 16px;\n      }\n    }\n  `;\n}\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { IconButton, useStyles2 } from '@grafana/ui';\nimport { LayerName } from 'app/core/components/Layers/LayerName';\nimport { ElementState } from 'app/features/canvas/runtime/element';\n\nimport { LayerActionID } from '../../types';\nimport { TreeViewEditorProps } from '../element/elementEditor';\n\nimport { TreeElement } from './tree';\n\ninterface Props {\n  settings: TreeViewEditorProps;\n  nodeData: TreeElement;\n  setAllowSelection: (allow: boolean) => void;\n}\n\nexport const TreeNodeTitle = ({ settings, nodeData, setAllowSelection }: Props) => {\n  const element = nodeData.dataRef;\n  const name = nodeData.dataRef.getName();\n\n  const styles = useStyles2(getStyles);\n\n  const layer = settings.layer;\n\n  const getScene = () => {\n    if (!settings?.layer) {\n      return;\n    }\n\n    return settings.layer.scene;\n  };\n\n  const onDelete = (element: ElementState) => {\n    const elLayer = element.parent ?? layer;\n    elLayer.doAction(LayerActionID.Delete, element);\n    setAllowSelection(false);\n  };\n\n  const onDuplicate = (element: ElementState) => {\n    const elLayer = element.parent ?? layer;\n    elLayer.doAction(LayerActionID.Duplicate, element);\n    setAllowSelection(false);\n  };\n\n  const onNameChange = (element: ElementState, name: string) => {\n    element.onChange({ ...element.options, name });\n  };\n\n  const verifyLayerNameUniqueness = (nameToVerify: string) => {\n    const scene = getScene();\n\n    return Boolean(scene?.canRename(nameToVerify));\n  };\n\n  const getLayerInfo = (element: ElementState) => {\n    return element.options.type;\n  };\n\n  return (\n    <>\n      <LayerName\n        name={name}\n        onChange={(v) => onNameChange(element, v)}\n        verifyLayerNameUniqueness={verifyLayerNameUniqueness ?? undefined}\n      />\n\n      <div className={styles.textWrapper}>&nbsp; {getLayerInfo(element)}</div>\n\n      {!nodeData.children && (\n        <div className={styles.actionButtonsWrapper}>\n          <IconButton\n            name=\"copy\"\n            title=\"Duplicate\"\n            className={styles.actionIcon}\n            onClick={() => onDuplicate(element)}\n            tooltip=\"Duplicate\"\n          />\n          <IconButton\n            name=\"trash-alt\"\n            title=\"remove\"\n            className={styles.actionIcon}\n            onClick={() => onDelete(element)}\n            tooltip=\"Remove\"\n          />\n        </div>\n      )}\n    </>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  actionButtonsWrapper: css({\n    display: 'flex',\n    alignItems: 'flex-end',\n  }),\n  actionIcon: css({\n    color: theme.colors.text.secondary,\n    cursor: 'pointer',\n    '&:hover': {\n      color: theme.colors.text.primary,\n    },\n  }),\n  textWrapper: css({\n    display: 'flex',\n    alignItems: 'center',\n    flexGrow: 1,\n    overflow: 'hidden',\n    marginRight: theme.spacing(1),\n  }),\n  layerName: css({\n    fontWeight: theme.typography.fontWeightMedium,\n    color: theme.colors.primary.text,\n    cursor: 'pointer',\n    overflow: 'hidden',\n    marginLeft: theme.spacing(0.5),\n  }),\n});\n","import { CSSProperties } from 'react';\n\nimport { ElementState } from 'app/features/canvas/runtime/element';\nimport { FrameState } from 'app/features/canvas/runtime/frame';\nimport { RootElement } from 'app/features/canvas/runtime/root';\n\nimport { DragNode, DropNode } from '../../types';\n\nexport interface TreeElement {\n  key: number;\n  title: string;\n  selectable?: boolean;\n  children?: TreeElement[];\n  dataRef: ElementState | FrameState;\n  style?: CSSProperties;\n}\n\nexport function getTreeData(root?: RootElement | FrameState, selection?: string[], selectedColor?: string) {\n  let elements: TreeElement[] = [];\n  if (root) {\n    for (let i = root.elements.length; i--; i >= 0) {\n      const item = root.elements[i];\n      const element: TreeElement = {\n        key: item.UID,\n        title: item.getName(),\n        selectable: true,\n        dataRef: item,\n      };\n\n      if (item instanceof FrameState) {\n        element.children = getTreeData(item, selection, selectedColor);\n      }\n      elements.push(element);\n    }\n  }\n\n  return elements;\n}\n\nexport function onNodeDrop(\n  info: { node: DropNode; dragNode: DragNode; dropPosition: number; dropToGap: boolean },\n  treeData: TreeElement[]\n) {\n  const destKey = info.node.key;\n  const srcKey = info.dragNode.key;\n  const destPos = info.node.pos.split('-');\n  const destPosition = info.dropPosition - Number(destPos[destPos.length - 1]);\n\n  const loop = (\n    data: TreeElement[],\n    key: number,\n    callback: { (item: TreeElement, index: number, arr: TreeElement[]): void }\n  ) => {\n    data.forEach((item, index, arr) => {\n      if (item.key === key) {\n        callback(item, index, arr);\n        return;\n      }\n      if (item.children) {\n        loop(item.children, key, callback);\n      }\n    });\n  };\n  const data = [...treeData];\n\n  // Find dragObject\n  let srcElement: TreeElement | undefined = undefined;\n  loop(data, srcKey, (item: TreeElement, index: number, arr: TreeElement[]) => {\n    arr.splice(index, 1);\n    srcElement = item;\n  });\n\n  if (destPosition === 0) {\n    // Drop on the content\n    loop(data, destKey, (item: TreeElement) => {\n      item.children = item.children || [];\n      item.children.unshift(srcElement!);\n    });\n  } else {\n    // Drop on the gap (insert before or insert after)\n    let ar: TreeElement[] = [];\n    let i = 0;\n    loop(data, destKey, (item: TreeElement, index: number, arr: TreeElement[]) => {\n      ar = arr;\n      i = index;\n    });\n\n    if (destPosition === -1) {\n      ar.splice(i, 0, srcElement!);\n    } else {\n      ar.splice(i + 1, 0, srcElement!);\n    }\n  }\n\n  return data;\n}\n","import { css } from '@emotion/css';\nimport { Global } from '@emotion/react';\nimport Tree, { TreeNodeProps } from 'rc-tree';\nimport React, { Key, useEffect, useMemo, useState } from 'react';\n\nimport { GrafanaTheme2, StandardEditorProps } from '@grafana/data';\nimport { config } from '@grafana/runtime';\nimport { Button, HorizontalGroup, Icon, useStyles2, useTheme2 } from '@grafana/ui';\nimport { AddLayerButton } from 'app/core/components/Layers/AddLayerButton';\nimport { ElementState } from 'app/features/canvas/runtime/element';\n\nimport { getGlobalStyles } from '../../globalStyles';\nimport { Options } from '../../panelcfg.gen';\nimport { DragNode, DropNode } from '../../types';\nimport { doSelect, getElementTypes, onAddItem } from '../../utils';\nimport { TreeViewEditorProps } from '../element/elementEditor';\n\nimport { TreeNodeTitle } from './TreeNodeTitle';\nimport { getTreeData, onNodeDrop, TreeElement } from './tree';\n\nlet allowSelection = true;\n\nexport const TreeNavigationEditor = ({ item }: StandardEditorProps<any, TreeViewEditorProps, Options>) => {\n  const [treeData, setTreeData] = useState(getTreeData(item?.settings?.scene.root));\n  const [autoExpandParent, setAutoExpandParent] = useState(true);\n  const [expandedKeys, setExpandedKeys] = useState<Key[]>([]);\n  const [selectedKeys, setSelectedKeys] = useState<Key[]>([]);\n\n  const theme = useTheme2();\n  const globalCSS = getGlobalStyles(theme);\n  const styles = useStyles2(getStyles);\n\n  const selectedBgColor = theme.colors.primary.border;\n  const { settings } = item;\n  const selection = useMemo(\n    () => (settings?.selected ? settings.selected.map((v) => v?.getName()) : []),\n    [settings?.selected]\n  );\n\n  const selectionByUID = useMemo(\n    () => (settings?.selected ? settings.selected.map((v) => v?.UID) : []),\n    [settings?.selected]\n  );\n\n  useEffect(() => {\n    setTreeData(getTreeData(item?.settings?.scene.root, selection, selectedBgColor));\n    setSelectedKeys(selectionByUID);\n    setAllowSelection();\n  }, [item?.settings?.scene.root, selectedBgColor, selection, selectionByUID]);\n\n  if (!settings) {\n    return <div>No settings</div>;\n  }\n\n  const layer = settings.layer;\n  if (!layer) {\n    return <div>Missing layer?</div>;\n  }\n\n  const onSelect = (selectedKeys: Key[], info: { node: { dataRef: ElementState } }) => {\n    if (allowSelection && item.settings?.scene) {\n      doSelect(item.settings.scene, info.node.dataRef);\n    }\n  };\n\n  const allowDrop = () => {\n    return true;\n  };\n\n  const onDrop = (info: { node: DropNode; dragNode: DragNode; dropPosition: number; dropToGap: boolean }) => {\n    const destPos = info.node.pos.split('-');\n    const destPosition = info.dropPosition - Number(destPos[destPos.length - 1]);\n\n    const srcEl = info.dragNode.dataRef;\n    const destEl = info.node.dataRef;\n\n    const data = onNodeDrop(info, treeData);\n\n    setTreeData(data);\n    destEl.parent?.scene.reorderElements(srcEl, destEl, info.dropToGap, destPosition);\n  };\n\n  const onExpand = (expandedKeys: Key[]) => {\n    setExpandedKeys(expandedKeys);\n    setAutoExpandParent(false);\n  };\n\n  const switcherIcon = (obj: TreeNodeProps) => {\n    if (obj.isLeaf) {\n      // TODO: Implement element specific icons\n      return <></>;\n    }\n\n    return (\n      <Icon\n        name=\"angle-right\"\n        title={'Node Icon'}\n        style={{\n          transform: `rotate(${obj.expanded ? 90 : 0}deg)`,\n          fill: theme.colors.text.primary,\n        }}\n      />\n    );\n  };\n\n  const setAllowSelection = (allow = true) => {\n    allowSelection = allow;\n  };\n\n  const onClearSelection = () => {\n    layer.scene.clearCurrentSelection();\n  };\n\n  const onTitleRender = (nodeData: TreeElement) => {\n    return <TreeNodeTitle nodeData={nodeData} setAllowSelection={setAllowSelection} settings={settings} />;\n  };\n\n  // TODO: This functionality is currently kinda broken / no way to decouple / delete created frames at this time\n  const onFrameSelection = () => {\n    if (layer.scene) {\n      layer.scene.frameSelection();\n    } else {\n      console.warn('no scene!');\n    }\n  };\n\n  const typeOptions = getElementTypes(settings.scene.shouldShowAdvancedTypes).options;\n\n  return (\n    <>\n      <Global styles={globalCSS} />\n      <Tree\n        selectable={true}\n        onSelect={onSelect}\n        draggable={true}\n        defaultExpandAll={true}\n        autoExpandParent={autoExpandParent}\n        showIcon={false}\n        allowDrop={allowDrop}\n        onDrop={onDrop}\n        expandedKeys={expandedKeys}\n        onExpand={onExpand}\n        treeData={treeData}\n        titleRender={onTitleRender}\n        switcherIcon={switcherIcon}\n        selectedKeys={selectedKeys}\n        multiple={true}\n      />\n\n      <HorizontalGroup justify=\"space-between\">\n        <div className={styles.addLayerButton}>\n          <AddLayerButton onChange={(sel) => onAddItem(sel, layer)} options={typeOptions} label={'Add item'} />\n        </div>\n        {selection.length > 0 && (\n          <Button size=\"sm\" variant=\"secondary\" onClick={onClearSelection}>\n            Clear selection\n          </Button>\n        )}\n        {selection.length > 1 && config.featureToggles.canvasPanelNesting && (\n          <Button size=\"sm\" variant=\"secondary\" onClick={onFrameSelection}>\n            Frame selection\n          </Button>\n        )}\n      </HorizontalGroup>\n    </>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  addLayerButton: css({\n    marginLeft: '18px',\n    minWidth: '150px',\n  }),\n});\n","import { get as lodashGet } from 'lodash';\n\nimport { NestedPanelOptions, NestedValueAccess } from '@grafana/data/src/utils/OptionsUIBuilders';\nimport { ElementState } from 'app/features/canvas/runtime/element';\nimport { FrameState } from 'app/features/canvas/runtime/frame';\nimport { Scene } from 'app/features/canvas/runtime/scene';\nimport { setOptionImmutably } from 'app/features/dashboard/components/PanelEditor/utils';\n\nimport { InstanceState } from '../../CanvasPanel';\nimport { PlacementEditor } from '../element/PlacementEditor';\nimport { optionBuilder } from '../options';\n\nimport { TreeNavigationEditor } from './TreeNavigationEditor';\n\nexport interface LayerEditorProps {\n  scene: Scene;\n  layer: FrameState;\n  selected: ElementState[];\n}\n\nexport function getLayerEditor(opts: InstanceState): NestedPanelOptions<LayerEditorProps> {\n  const { selected, scene } = opts;\n\n  if (!scene.currentLayer) {\n    scene.currentLayer = scene.root;\n  }\n\n  if (selected) {\n    for (const element of selected) {\n      if (element instanceof FrameState) {\n        scene.currentLayer = element;\n        break;\n      }\n\n      if (element && element.parent) {\n        scene.currentLayer = element.parent;\n        break;\n      }\n    }\n  }\n\n  const options = scene.currentLayer.options || { elements: [] };\n\n  return {\n    category: ['Layer'],\n    path: '--', // not used!\n\n    // Note that canvas editor writes things to the scene!\n    values: (parent: NestedValueAccess) => ({\n      getValue: (path) => {\n        return lodashGet(options, path);\n      },\n      onChange: (path, value) => {\n        if (path === 'type' && value) {\n          console.warn('unable to change layer type');\n          return;\n        }\n        const c = setOptionImmutably(options, path, value);\n        scene.currentLayer?.onChange(c);\n        scene.currentLayer?.updateData(scene.context);\n      },\n    }),\n\n    // Dynamically fill the selected element\n    build: (builder, context) => {\n      const currentLayer = scene.currentLayer;\n      if (currentLayer && !currentLayer.isRoot()) {\n        // TODO: the non-root nav option\n      }\n\n      builder.addCustomEditor({\n        id: 'content',\n        path: 'root',\n        name: 'Elements',\n        editor: TreeNavigationEditor,\n        settings: { scene, layer: scene.currentLayer, selected },\n      });\n\n      const ctx = { ...context, options };\n      optionBuilder.addBackground(builder as any, ctx);\n      optionBuilder.addBorder(builder as any, ctx);\n\n      if (currentLayer && !currentLayer.isRoot()) {\n        builder.addCustomEditor({\n          category: ['Layout'],\n          id: 'content',\n          path: '__', // not used\n          name: 'Constraints',\n          editor: PlacementEditor,\n          settings: {\n            scene: opts.scene,\n            element: currentLayer,\n          },\n        });\n      }\n    },\n  };\n}\n","import React, { useState } from 'react';\n\nimport { Tab, TabsBar } from '@grafana/ui/src';\n\nimport { InlineEditTabs } from '../../types';\n\ntype Props = {\n  onTabChange: (v: string) => void;\n};\n\nexport const TabsEditor = ({ onTabChange }: Props) => {\n  const [activeTab, setActiveTab] = useState<string>(InlineEditTabs.SelectedElement);\n\n  const tabs = [\n    { label: 'Selected Element', value: InlineEditTabs.SelectedElement },\n    { label: 'Element Management', value: InlineEditTabs.ElementManagement },\n  ];\n\n  const onCurrentTabChange = (value: string) => {\n    onTabChange(value);\n    setActiveTab(value);\n  };\n\n  return (\n    <>\n      <TabsBar>\n        {tabs.map((t, index) => (\n          <Tab\n            key={`${t.value}-${index}`}\n            label={t.label}\n            active={t.value === activeTab}\n            onChangeTab={() => onCurrentTabChange(t.value!)}\n          />\n        ))}\n      </TabsBar>\n    </>\n  );\n};\n","import { css } from '@emotion/css';\nimport { get as lodashGet } from 'lodash';\nimport React, { useMemo, useState } from 'react';\nimport { useObservable } from 'react-use';\n\nimport { DataFrame, GrafanaTheme2, PanelOptionsEditorBuilder, StandardEditorContext } from '@grafana/data';\nimport { PanelOptionsSupplier } from '@grafana/data/src/panel/PanelPlugin';\nimport { NestedValueAccess } from '@grafana/data/src/utils/OptionsUIBuilders';\nimport { useStyles2 } from '@grafana/ui/src';\nimport { AddLayerButton } from 'app/core/components/Layers/AddLayerButton';\nimport { FrameState } from 'app/features/canvas/runtime/frame';\nimport { OptionsPaneCategory } from 'app/features/dashboard/components/PanelEditor/OptionsPaneCategory';\nimport { OptionsPaneCategoryDescriptor } from 'app/features/dashboard/components/PanelEditor/OptionsPaneCategoryDescriptor';\nimport { fillOptionsPaneItems } from 'app/features/dashboard/components/PanelEditor/getVisualizationOptions';\nimport { setOptionImmutably } from 'app/features/dashboard/components/PanelEditor/utils';\n\nimport { activePanelSubject, InstanceState } from '../../CanvasPanel';\nimport { addStandardCanvasEditorOptions } from '../../module';\nimport { InlineEditTabs } from '../../types';\nimport { getElementTypes, onAddItem } from '../../utils';\nimport { getElementEditor } from '../element/elementEditor';\nimport { getLayerEditor } from '../layer/layerEditor';\n\nimport { TabsEditor } from './TabsEditor';\n\nexport function InlineEditBody() {\n  const activePanel = useObservable(activePanelSubject);\n  const instanceState = activePanel?.panel.context?.instanceState;\n  const styles = useStyles2(getStyles);\n\n  const [activeTab, setActiveTab] = useState<string>(InlineEditTabs.SelectedElement);\n\n  const pane = useMemo(() => {\n    const p = activePanel?.panel;\n    const state: InstanceState = instanceState;\n    if (!state || !p) {\n      return new OptionsPaneCategoryDescriptor({ id: 'root', title: 'root' });\n    }\n\n    const supplier = (builder: PanelOptionsEditorBuilder<any>) => {\n      if (activeTab === InlineEditTabs.ElementManagement) {\n        builder.addNestedOptions(getLayerEditor(instanceState));\n      }\n\n      const selection = state.selected;\n      if (selection?.length === 1 && activeTab === InlineEditTabs.SelectedElement) {\n        const element = selection[0];\n        if (element && !(element instanceof FrameState)) {\n          builder.addNestedOptions(\n            getElementEditor({\n              category: [`Selected element (${element.options.name})`],\n              element,\n              scene: state.scene,\n            })\n          );\n        }\n      }\n\n      addStandardCanvasEditorOptions(builder);\n    };\n\n    return getOptionsPaneCategoryDescriptor(\n      {\n        options: p.props.options,\n        onChange: p.props.onOptionsChange,\n        data: p.props.data?.series,\n      },\n      supplier\n    );\n  }, [instanceState, activePanel, activeTab]);\n\n  const topLevelItemsContainerStyle = {\n    marginLeft: 15,\n    marginTop: 10,\n  };\n\n  const onTabChange = (tab: string) => {\n    setActiveTab(tab);\n  };\n\n  const typeOptions = getElementTypes(instanceState?.scene.shouldShowAdvancedTypes).options;\n  const rootLayer: FrameState | undefined = instanceState?.layer;\n\n  const noElementSelected =\n    instanceState && activeTab === InlineEditTabs.SelectedElement && instanceState.selected.length === 0;\n\n  return (\n    <>\n      <div style={topLevelItemsContainerStyle}>{pane.items.map((item) => item.render())}</div>\n      <div style={topLevelItemsContainerStyle}>\n        <AddLayerButton onChange={(sel) => onAddItem(sel, rootLayer)} options={typeOptions} label={'Add item'} />\n      </div>\n      <div style={topLevelItemsContainerStyle}>\n        <TabsEditor onTabChange={onTabChange} />\n        {pane.categories.map((p) => renderOptionsPaneCategoryDescriptor(p))}\n        {noElementSelected && <div className={styles.selectElement}>Please select an element</div>}\n      </div>\n    </>\n  );\n}\n\n// Recursively render options\nfunction renderOptionsPaneCategoryDescriptor(pane: OptionsPaneCategoryDescriptor) {\n  return (\n    <OptionsPaneCategory {...pane.props} key={pane.props.id}>\n      <div>{pane.items.map((v) => v.render())}</div>\n      {pane.categories.map((c) => renderOptionsPaneCategoryDescriptor(c))}\n    </OptionsPaneCategory>\n  );\n}\n\ninterface EditorProps<T> {\n  onChange: (v: T) => void;\n  options: T;\n  data?: DataFrame[];\n}\n\nfunction getOptionsPaneCategoryDescriptor<T = any>(\n  props: EditorProps<T>,\n  supplier: PanelOptionsSupplier<T>\n): OptionsPaneCategoryDescriptor {\n  const context: StandardEditorContext<unknown, unknown> = {\n    data: props.data ?? [],\n    options: props.options,\n  };\n\n  const root = new OptionsPaneCategoryDescriptor({ id: 'root', title: 'root' });\n  const getOptionsPaneCategory = (categoryNames?: string[]): OptionsPaneCategoryDescriptor => {\n    if (categoryNames?.length) {\n      const key = categoryNames[0];\n      let sub = root.categories.find((v) => v.props.id === key);\n      if (!sub) {\n        sub = new OptionsPaneCategoryDescriptor({ id: key, title: key });\n        root.categories.push(sub);\n      }\n      return sub;\n    }\n    return root;\n  };\n\n  const access: NestedValueAccess = {\n    getValue: (path) => lodashGet(props.options, path),\n    onChange: (path, value) => {\n      props.onChange(setOptionImmutably(props.options as any, path, value));\n    },\n  };\n\n  // Use the panel options loader\n  fillOptionsPaneItems(supplier, access, getOptionsPaneCategory, context);\n  return root;\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  selectElement: css({\n    color: theme.colors.text.secondary,\n    padding: theme.spacing(2),\n  }),\n});\n","import { css } from '@emotion/css';\nimport React, { SyntheticEvent, useEffect, useRef, useState } from 'react';\nimport Draggable, { DraggableEventHandler } from 'react-draggable';\nimport { Resizable, ResizeCallbackData } from 'react-resizable';\n\nimport { Dimensions2D, GrafanaTheme2 } from '@grafana/data';\nimport { IconButton, Portal, useStyles2 } from '@grafana/ui';\nimport store from 'app/core/store';\nimport { Scene } from 'app/features/canvas/runtime/scene';\n\nimport { InlineEditBody } from './InlineEditBody';\n\ntype Props = {\n  onClose?: () => void;\n  id: number;\n  scene: Scene;\n};\n\nconst OFFSET_X = 10;\nconst OFFSET_Y = 32;\n\nexport function InlineEdit({ onClose, id, scene }: Props) {\n  const root = scene.root.div?.getBoundingClientRect();\n  const windowHeight = window.innerHeight;\n  const windowWidth = window.innerWidth;\n  const ref = useRef<HTMLDivElement>(null);\n  const styles = useStyles2(getStyles);\n  const inlineEditKey = 'inlineEditPanel' + id.toString();\n\n  const defaultMeasurements = { width: 400, height: 400 };\n  const widthOffset = root?.width ?? defaultMeasurements.width + OFFSET_X * 2;\n  const defaultX = root?.x ?? 0 + widthOffset - defaultMeasurements.width - OFFSET_X;\n  const defaultY = root?.y ?? 0 + OFFSET_Y;\n\n  const savedPlacement = store.getObject(inlineEditKey, {\n    x: defaultX,\n    y: defaultY,\n    w: defaultMeasurements.width,\n    h: defaultMeasurements.height,\n  });\n  const [measurements, setMeasurements] = useState<Dimensions2D>({ width: savedPlacement.w, height: savedPlacement.h });\n  const [placement, setPlacement] = useState({ x: savedPlacement.x, y: savedPlacement.y });\n\n  // Checks that placement is within browser window\n  useEffect(() => {\n    const minX = windowWidth - measurements.width - OFFSET_X;\n    const minY = windowHeight - measurements.height - OFFSET_Y;\n    if (minX < placement.x && minX > 0) {\n      setPlacement({ ...placement, x: minX });\n    }\n    if (minY < placement.y && minY > 0) {\n      setPlacement({ ...placement, y: minY });\n    }\n  }, [windowHeight, windowWidth, placement, measurements]);\n\n  const onDragStop: DraggableEventHandler = (event, dragElement) => {\n    let x = dragElement.x < 0 ? 0 : dragElement.x;\n    let y = dragElement.y < 0 ? 0 : dragElement.y;\n\n    setPlacement({ x: x, y: y });\n    saveToStore(x, y, measurements.width, measurements.height);\n  };\n\n  const onResizeStop = (event: SyntheticEvent<Element, Event>, data: ResizeCallbackData) => {\n    const { size } = data;\n    setMeasurements({ width: size.width, height: size.height });\n    saveToStore(placement.x, placement.y, size.width, size.height);\n  };\n\n  const saveToStore = (x: number, y: number, width: number, height: number) => {\n    store.setObject(inlineEditKey, { x: x, y: y, w: width, h: height });\n  };\n\n  return (\n    <Portal>\n      <div className={styles.draggableWrapper}>\n        <Draggable handle=\"strong\" onStop={onDragStop} position={{ x: placement.x, y: placement.y }}>\n          <Resizable height={measurements.height} width={measurements.width} onResize={onResizeStop}>\n            <div\n              className={styles.inlineEditorContainer}\n              style={{ height: `${measurements.height}px`, width: `${measurements.width}px` }}\n              ref={ref}\n            >\n              <strong className={styles.inlineEditorHeader}>\n                <div className={styles.placeholder} />\n                <div>Canvas Inline Editor</div>\n                <IconButton\n                  name=\"times\"\n                  size=\"xl\"\n                  className={styles.inlineEditorClose}\n                  onClick={onClose}\n                  tooltip=\"Close inline editor\"\n                />\n              </strong>\n              <div className={styles.inlineEditorContentWrapper}>\n                <div className={styles.inlineEditorContent}>\n                  <InlineEditBody />\n                </div>\n              </div>\n            </div>\n          </Resizable>\n        </Draggable>\n      </div>\n    </Portal>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  inlineEditorContainer: css({\n    display: 'flex',\n    flexDirection: 'column',\n    background: theme.components.panel.background,\n    border: `1px solid ${theme.colors.border.weak}`,\n    boxShadow: theme.shadows.z3,\n    zIndex: 1000,\n    opacity: 1,\n    minWidth: '400px',\n  }),\n  draggableWrapper: css({\n    width: 0,\n    height: 0,\n  }),\n  inlineEditorHeader: css({\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    background: theme.colors.background.canvas,\n    borderBottom: `1px solid ${theme.colors.border.weak}`,\n    height: '40px',\n    cursor: 'move',\n  }),\n  inlineEditorContent: css({\n    whiteSpace: 'pre-wrap',\n    padding: '10px',\n  }),\n  inlineEditorClose: css({\n    marginLeft: 'auto',\n  }),\n  placeholder: css({\n    width: '24px',\n    height: '24px',\n    visibility: 'hidden',\n    marginRight: 'auto',\n  }),\n  inlineEditorContentWrapper: css({\n    overflow: 'scroll',\n  }),\n});\n","import React, { Component } from 'react';\nimport { ReplaySubject, Subscription } from 'rxjs';\n\nimport { PanelProps } from '@grafana/data';\nimport { locationService } from '@grafana/runtime/src';\nimport { PanelContext, PanelContextRoot } from '@grafana/ui';\nimport { CanvasFrameOptions } from 'app/features/canvas';\nimport { ElementState } from 'app/features/canvas/runtime/element';\nimport { Scene } from 'app/features/canvas/runtime/scene';\nimport { PanelEditEnteredEvent, PanelEditExitedEvent } from 'app/types/events';\n\nimport { SetBackground } from './components/SetBackground';\nimport { InlineEdit } from './editor/inline/InlineEdit';\nimport { Options } from './panelcfg.gen';\nimport { AnchorPoint, CanvasTooltipPayload, ConnectionState } from './types';\n\ninterface Props extends PanelProps<Options> {}\n\ninterface State {\n  refresh: number;\n  openInlineEdit: boolean;\n  openSetBackground: boolean;\n  contextMenuAnchorPoint: AnchorPoint;\n  moveableAction: boolean;\n}\n\nexport interface InstanceState {\n  scene: Scene;\n  selected: ElementState[];\n  selectedConnection?: ConnectionState;\n}\n\nexport interface SelectionAction {\n  panel: CanvasPanel;\n}\n\nlet canvasInstances: CanvasPanel[] = [];\nlet activeCanvasPanel: CanvasPanel | undefined = undefined;\nlet isInlineEditOpen = false;\nlet isSetBackgroundOpen = false;\n\nexport const activePanelSubject = new ReplaySubject<SelectionAction>(1);\n\nexport class CanvasPanel extends Component<Props, State> {\n  declare context: React.ContextType<typeof PanelContextRoot>;\n  static contextType = PanelContextRoot;\n  panelContext: PanelContext | undefined;\n\n  readonly scene: Scene;\n  private subs = new Subscription();\n  needsReload = false;\n  isEditing = locationService.getSearchObject().editPanel !== undefined;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      refresh: 0,\n      openInlineEdit: false,\n      openSetBackground: false,\n      contextMenuAnchorPoint: { x: 0, y: 0 },\n      moveableAction: false,\n    };\n\n    // Only the initial options are ever used.\n    // later changes are all controlled by the scene\n    this.scene = new Scene(\n      this.props.options.root,\n      this.props.options.inlineEditing,\n      this.props.options.showAdvancedTypes,\n      this.onUpdateScene,\n      this\n    );\n    this.scene.updateSize(props.width, props.height);\n    this.scene.updateData(props.data);\n    this.scene.inlineEditingCallback = this.openInlineEdit;\n    this.scene.setBackgroundCallback = this.openSetBackground;\n    this.scene.tooltipCallback = this.tooltipCallback;\n    this.scene.moveableActionCallback = this.moveableActionCallback;\n\n    this.subs.add(\n      this.props.eventBus.subscribe(PanelEditEnteredEvent, (evt: PanelEditEnteredEvent) => {\n        // Remove current selection when entering edit mode for any panel in dashboard\n        this.scene.clearCurrentSelection();\n        this.closeInlineEdit();\n      })\n    );\n\n    this.subs.add(\n      this.props.eventBus.subscribe(PanelEditExitedEvent, (evt: PanelEditExitedEvent) => {\n        if (this.props.id === evt.payload) {\n          this.needsReload = true;\n          this.scene.clearCurrentSelection();\n        }\n      })\n    );\n  }\n\n  componentDidMount() {\n    activeCanvasPanel = this;\n    activePanelSubject.next({ panel: this });\n\n    this.panelContext = this.context;\n    if (this.panelContext.onInstanceStateChange) {\n      this.panelContext.onInstanceStateChange({\n        scene: this.scene,\n        layer: this.scene.root,\n      });\n\n      this.subs.add(\n        this.scene.selection.subscribe({\n          next: (v) => {\n            if (v.length) {\n              activeCanvasPanel = this;\n              activePanelSubject.next({ panel: this });\n            }\n\n            canvasInstances.forEach((canvasInstance) => {\n              if (canvasInstance !== activeCanvasPanel) {\n                canvasInstance.scene.clearCurrentSelection(true);\n                canvasInstance.scene.connections.select(undefined);\n              }\n            });\n\n            this.panelContext?.onInstanceStateChange!({\n              scene: this.scene,\n              selected: v,\n              layer: this.scene.root,\n            });\n          },\n        })\n      );\n\n      this.subs.add(\n        this.scene.connections.selection.subscribe({\n          next: (v) => {\n            if (!this.context.instanceState) {\n              return;\n            }\n\n            this.panelContext?.onInstanceStateChange!({\n              scene: this.scene,\n              selected: this.context.instanceState.selected,\n              selectedConnection: v,\n              layer: this.scene.root,\n            });\n\n            if (v) {\n              activeCanvasPanel = this;\n              activePanelSubject.next({ panel: this });\n            }\n\n            canvasInstances.forEach((canvasInstance) => {\n              if (canvasInstance !== activeCanvasPanel) {\n                canvasInstance.scene.clearCurrentSelection(true);\n                canvasInstance.scene.connections.select(undefined);\n              }\n            });\n\n            setTimeout(() => {\n              this.forceUpdate();\n            });\n          },\n        })\n      );\n    }\n\n    canvasInstances.push(this);\n  }\n\n  componentWillUnmount() {\n    this.scene.subscription.unsubscribe();\n    this.subs.unsubscribe();\n    isInlineEditOpen = false;\n    isSetBackgroundOpen = false;\n    canvasInstances = canvasInstances.filter((ci) => ci.props.id !== activeCanvasPanel?.props.id);\n  }\n\n  // NOTE, all changes to the scene flow through this function\n  // even the editor gets current state from the same scene instance!\n  onUpdateScene = (root: CanvasFrameOptions) => {\n    const { onOptionsChange, options } = this.props;\n    onOptionsChange({\n      ...options,\n      root,\n    });\n\n    this.setState({ refresh: this.state.refresh + 1 });\n    activePanelSubject.next({ panel: this });\n  };\n\n  shouldComponentUpdate(nextProps: Props, nextState: State) {\n    const { width, height, data, options } = this.props;\n    let changed = false;\n\n    if (width !== nextProps.width || height !== nextProps.height) {\n      this.scene.updateSize(nextProps.width, nextProps.height);\n      changed = true;\n    }\n\n    if (data !== nextProps.data && !this.scene.ignoreDataUpdate) {\n      this.scene.updateData(nextProps.data);\n      changed = true;\n    }\n\n    if (options !== nextProps.options && !this.scene.ignoreDataUpdate) {\n      this.scene.updateData(nextProps.data);\n      changed = true;\n    }\n\n    if (this.state.refresh !== nextState.refresh) {\n      changed = true;\n    }\n\n    if (this.state.openInlineEdit !== nextState.openInlineEdit) {\n      changed = true;\n    }\n\n    if (this.state.openSetBackground !== nextState.openSetBackground) {\n      changed = true;\n    }\n\n    if (this.state.moveableAction !== nextState.moveableAction) {\n      changed = true;\n    }\n\n    // After editing, the options are valid, but the scene was in a different panel or inline editing mode has changed\n    const inlineEditingSwitched = this.props.options.inlineEditing !== nextProps.options.inlineEditing;\n    const shouldShowAdvancedTypesSwitched =\n      this.props.options.showAdvancedTypes !== nextProps.options.showAdvancedTypes;\n    if (this.needsReload || inlineEditingSwitched || shouldShowAdvancedTypesSwitched) {\n      if (inlineEditingSwitched) {\n        // Replace scene div to prevent selecto instance leaks\n        this.scene.revId++;\n      }\n\n      this.needsReload = false;\n      this.scene.load(nextProps.options.root, nextProps.options.inlineEditing, nextProps.options.showAdvancedTypes);\n      this.scene.updateSize(nextProps.width, nextProps.height);\n      this.scene.updateData(nextProps.data);\n      changed = true;\n    }\n\n    return changed;\n  }\n\n  openInlineEdit = () => {\n    if (isInlineEditOpen) {\n      this.forceUpdate();\n      this.setActivePanel();\n      return;\n    }\n\n    this.setActivePanel();\n    this.setState({ openInlineEdit: true });\n    isInlineEditOpen = true;\n  };\n\n  openSetBackground = (anchorPoint: AnchorPoint) => {\n    if (isSetBackgroundOpen) {\n      this.forceUpdate();\n      this.setActivePanel();\n      return;\n    }\n\n    this.setActivePanel();\n    this.setState({ openSetBackground: true });\n    this.setState({ contextMenuAnchorPoint: anchorPoint });\n\n    isSetBackgroundOpen = true;\n  };\n\n  tooltipCallback = (tooltip: CanvasTooltipPayload | undefined) => {\n    this.scene.tooltip = tooltip;\n    this.forceUpdate();\n  };\n\n  moveableActionCallback = (updated: boolean) => {\n    this.setState({ moveableAction: updated });\n    this.forceUpdate();\n  };\n\n  closeInlineEdit = () => {\n    this.setState({ openInlineEdit: false });\n    isInlineEditOpen = false;\n  };\n\n  closeSetBackground = () => {\n    this.setState({ openSetBackground: false });\n    isSetBackgroundOpen = false;\n  };\n\n  setActivePanel = () => {\n    activeCanvasPanel = this;\n    activePanelSubject.next({ panel: this });\n  };\n\n  renderInlineEdit = () => {\n    return <InlineEdit onClose={() => this.closeInlineEdit()} id={this.props.id} scene={this.scene} />;\n  };\n\n  renderSetBackground = () => {\n    return (\n      <SetBackground\n        onClose={() => this.closeSetBackground()}\n        scene={this.scene}\n        anchorPoint={this.state.contextMenuAnchorPoint}\n      />\n    );\n  };\n\n  render() {\n    return (\n      <>\n        {this.scene.render()}\n        {this.state.openInlineEdit && this.renderInlineEdit()}\n        {this.state.openSetBackground && this.renderSetBackground()}\n      </>\n    );\n  }\n}\n","import { get as lodashGet } from 'lodash';\n\nimport { NestedPanelOptions, NestedValueAccess } from '@grafana/data/src/utils/OptionsUIBuilders';\nimport { CanvasConnection } from 'app/features/canvas';\nimport { Scene } from 'app/features/canvas/runtime/scene';\nimport { setOptionImmutably } from 'app/features/dashboard/components/PanelEditor/utils';\n\nimport { ConnectionState } from '../types';\n\nimport { optionBuilder } from './options';\n\nexport interface CanvasConnectionEditorOptions {\n  connection: ConnectionState;\n  scene: Scene;\n  category?: string[];\n}\n\nexport function getConnectionEditor(opts: CanvasConnectionEditorOptions): NestedPanelOptions<CanvasConnection> {\n  return {\n    category: opts.category,\n    path: '--', // not used!\n\n    values: (parent: NestedValueAccess) => ({\n      getValue: (path: string) => {\n        return lodashGet(opts.connection.info, path);\n      },\n      // TODO: Fix this unknown (maybe a dimension supplier?)\n      onChange: (path: string, value: unknown) => {\n        let options = opts.connection.info;\n        options = setOptionImmutably(options, path, value);\n        opts.scene.connections.onChange(opts.connection, options);\n      },\n    }),\n\n    build: (builder, context) => {\n      const ctx = { ...context, options: opts.connection.info };\n      optionBuilder.addColor(builder, ctx);\n      optionBuilder.addSize(builder, ctx);\n    },\n  };\n}\n","import { PanelModel } from '@grafana/data';\n\nimport { Options } from './panelcfg.gen';\n\nexport const canvasMigrationHandler = (panel: PanelModel): Partial<Options> => {\n  const pluginVersion = panel?.pluginVersion ?? '';\n\n  // Rename text-box to rectangle\n  // Initial plugin version is empty string for first migration\n  if (pluginVersion === '') {\n    const root = panel.options?.root;\n    if (root?.elements) {\n      for (const element of root.elements) {\n        if (element.type === 'text-box') {\n          element.type = 'rectangle';\n        }\n      }\n    }\n  }\n\n  return panel.options;\n};\n","import { FieldConfigProperty, PanelOptionsEditorBuilder, PanelPlugin } from '@grafana/data';\nimport { FrameState } from 'app/features/canvas/runtime/frame';\n\nimport { CanvasPanel, InstanceState } from './CanvasPanel';\nimport { getConnectionEditor } from './editor/connectionEditor';\nimport { getElementEditor } from './editor/element/elementEditor';\nimport { getLayerEditor } from './editor/layer/layerEditor';\nimport { canvasMigrationHandler } from './migrations';\nimport { Options } from './panelcfg.gen';\n\nexport const addStandardCanvasEditorOptions = (builder: PanelOptionsEditorBuilder<Options>) => {\n  builder.addBooleanSwitch({\n    path: 'inlineEditing',\n    name: 'Inline editing',\n    description: 'Enable editing the panel directly',\n    defaultValue: true,\n  });\n\n  builder.addBooleanSwitch({\n    path: 'showAdvancedTypes',\n    name: 'Experimental element types',\n    description: 'Enable selection of experimental element types',\n    defaultValue: true,\n  });\n};\n\nexport const plugin = new PanelPlugin<Options>(CanvasPanel)\n  .setNoPadding() // extend to panel edges\n  .useFieldConfig({\n    standardOptions: {\n      [FieldConfigProperty.Mappings]: {\n        settings: {\n          icon: true,\n        },\n      },\n    },\n  })\n  .setMigrationHandler(canvasMigrationHandler)\n  .setPanelOptions((builder, context) => {\n    const state: InstanceState = context.instanceState;\n\n    addStandardCanvasEditorOptions(builder);\n\n    if (state) {\n      builder.addNestedOptions(getLayerEditor(state));\n\n      const selection = state.selected;\n      const connectionSelection = state.selectedConnection;\n\n      if (selection?.length === 1) {\n        const element = selection[0];\n        if (!(element instanceof FrameState)) {\n          builder.addNestedOptions(\n            getElementEditor({\n              category: [`Selected element (${element.options.name})`],\n              element,\n              scene: state.scene,\n            })\n          );\n        }\n      }\n\n      if (connectionSelection) {\n        builder.addNestedOptions(\n          getConnectionEditor({\n            category: ['Selected connection'],\n            connection: connectionSelection,\n            scene: state.scene,\n          })\n        );\n      }\n    }\n  });\n"],"names":["AddLayerButton","onChange","options","label","HorizontalConstraint","VerticalConstraint","BackgroundImageSize","HttpRequestMethod","ConnectionPath","defaultCanvasElementOptions","defaultOptions","QuickPlacement","Align","VAlign","defaultBgColor","defaultTextColor","defaultLightTextColor","defaultThemeTextColor","config","ParamsEditor","value","paramName","setParamName","paramValue","setParamValue","changeParamValue","currentTarget","changeParamName","removeParam","key","updatedParams","param","addParam","newParams","e","a","b","isAddParamsDisabled","Input","IconButton","entry","callApi","api","updateLoadingStateCallback","requestMatchesGrafanaOrigin","request","getRequest","error","interpolateVariables","text","panel","requestHeaders","url","getData","data","requestEndpoint","requestURL","grafanaURL","dummyStringSettings","httpMethodOptions","contentTypeOptions","APIEditor","context","defaultApiConfig","onEndpointChange","endpoint","onDataChange","onMethodChange","method","onContentTypeChange","contentType","formatCreateLabel","input","onQueryParamsChange","queryParams","onHeaderParamsChange","headerParams","renderJSON","json","JSONFormatter","renderTestAPIButton","Button","InlineFieldRow","InlineField","RadioButtonGroup","Select","Field","variantOptions","ButtonStyleEditor","defaultStyleConfig","onVariantChange","variant","ButtonDisplay","styles","getStyles","isLoading","setIsLoading","loading","onClick","Spinner","theme","buttonItem","ctx","cfg","getCfgApi","builder","category","TextDimensionEditor","droneFrontItem","droneFrontTransformStyle","droneSideItem","droneSidePitchTransformStyle","droneTopItem","fRightRotorAnimation","fLeftRotorAnimation","bRightRotorAnimation","bLeftRotorAnimation","droneTopTransformStyle","EllipseDisplay","ellipseItem","ColorDimensionEditor","svgStrokePathClass","IconDisplay","props","svgStyle","SanitizedSVG","iconItem","path","NotFoundDisplay","notFoundItem","counter","ElementState","item","parent","target","event","hasHorizontalCenterConstraint","hasVerticalCenterConstraint","height","yOffset","placement","style","deltaX","deltaY","dirLR","dirTB","isSelected","scene","rect","fallbackName","newName","trav","disablePointerEvents","constraint","vertical","horizontal","translate","elementContainer","parentContainer","parentBorderWidth","relativeTop","relativeBottom","relativeLeft","relativeRight","width","elementCenter","distanceFromCenter","background","border","css","color","image","v","visitor","canvasElementRegistry","oldName","isConnectionTarget","getConnectionsByTarget","connection","div","doSelect","element","selection","FrameState","targetElements","getElementTypes","shouldShowAdvancedTypes","current","getElementTypesOptions","defaultElementItems","advancedElementItems","items","selectables","alpha","option","onAddItem","sel","rootLayer","anchorPoint","newItem","newElementOptions","newElement","getDataLinks","textData","frames","links","linkLookup","frame","visibleFields","field","f","disp","link","isConnectionSource","sceneByName","getConnections","connections","c","index","updateConnectionsForSource","con","calculateCoordinates","sourceRect","parentRect","info","sourceHorizontalCenter","sourceVerticalCenter","x1","y1","x2","y2","targetRect","targetHorizontalCenter","targetVerticalCenter","parentHorizontalCenter","parentVerticalCenter","getRowIndex","fieldName","getConnectionStyles","defaultArrowSize","defaultArrowColor","lastRowIndex","strokeColor","strokeWidth","dummyFieldSettings","MetricValueDisplay","panelData","isEditMode","useObservable","of","getDisplayValue","fieldNotFound","fieldNames","MetricValueEdit","onFieldChange","selectedElement","FieldNamePicker","metricValueItem","RectangleDisplay","stylesFactory","rectangleItem","ServerDatabase","getServerStyles","ServerSingle","ServerStack","ServerTerminal","ServerType","outlineColor","serverItem","TextDisplay","TextEdit","textRef","saveText","onKeyDown","onKeyUp","textValue","textItem","windTurbineItem","windTurbineAnimation","DEFAULT_CANVAS_ELEMENT_CONFIG","Registry","LayerActionID","InlineEditTabs","DEFAULT_OFFSET","HORIZONTAL_OFFSET","frameItemDummy","action","updateName","shiftItemsOnDuplicate","opts","oldPlacement","copy","elements","elem","startIndex","endIndex","result","removed","src","dest","firstPosition","srcIndex","destIndex","child","vals","prefixNames","prefix","classNames","_i","className","name","prefixCSS","_","selector","ref","refs","i","Properties","properties","component","prototype","property","withMethods","methods","duplicate","propertyName","methodName","_a","args","PolyMap","__proto","keys","values","prevIndex","HashMap","SUPPORT_MAP","Link","prevLink","nextLink","orderChanged","changed","fixed","fromLinks","toLinks","from","to","fromLink","toLink","fromIndex","toIndex","Result","prevList","list","added","maintained","changedBeforeAdded","ordered","pureChanged","_b","fromBefore","toBefore","diff","findKeyCallback","mapClass","callback","prevKeys","prevKeyMap","keyMap","removedMap","addedCount","removedCount","prevListIndex","listIndex","ListDiffer","newData","RGB","RGBA","HSL","HSLA","COLOR_MODELS","FUNCTION","PROPERTY","ARRAY","OBJECT","STRING","NUMBER","UNDEFINED","IS_WINDOW","doc","prefixes","getCrossBrowserProperty","length","TRANSFORM","FILTER","ANIMATION","KEYFRAMES","OPEN_CLOSED_CHARACTERS","TINY_NUM","REVERSE_TINY_NUM","DEFAULT_UNIT_PRESETS","pos","size","__spreadArrays","s","il","k","j","jl","dot","a1","a2","b1","b2","isUndefined","isObject","isArray","isString","isNumber","isFunction","isEqualSeparator","character","separator","isCharacterSpace","isSeparatorSpace","findOpen","openCharacter","texts","openCloseCharacters","isIgnore","findIgnore","findClose","otherText","closeCharacter","_loop_1","nextIndex","open","out_i_1","state_1","splitText","splitOptions","isSeparateFirst","isSeparateOnlyOpenClose","_c","isSeparateOpenClose","_d","openClosedText","close","regexText","regex","chr","tempValues","resetTemp","_loop_2","out_i_2","nextOpenCloseCharacters","state_2","splitSpace","splitComma","splitBracket","matches","splitUnit","unit","camelize","str","all","letter","decamelize","letter2","toArray","now","findIndex","arr","defaultIndex","findLastIndex","findLast","defalutValue","firstTime","raf","currTime","id","cancelAnimationFrame","caf","handle","getKeys","obj","getValues","getEntries","sortOrders","orders","index1","index2","convertUnitSize","sizeFunction","between","min","max","checkBoundSize","targetSize","compareSize","isMax","ratio","throttle","defaultSize","throttledSize","calculateBoundSize","minSize","maxSize","keepRatio","minWidth","minHeight","maxWidth","maxHeight","sum","nums","total","getRad","pos1","pos2","distX","distY","rad","getCenterPoint","points","getShapeDirection","center","pos1Rad","pos2Rad","num","reverseUnit","throttleArray","replaceOnce","fromText","toText","isOnce","flat","prev","cur","deepFlat","pushSet","cutHex","hex","hexToRGBA","h","r","g","toFullHex","hslToRGBA","hsl","l","x","m","rgb","stringToRGBA","colorArr","$","selectors","multi","hasClass","addClass","removeClass","reg","fromCSS","cssObject","getWindow","addEvent","el","type","listener","removeEvent","getDocument","getDocumentElement","getDocumentBody","isWindow","val","isNode","extendStatics","d","p","__extends","__","__assign","t","n","__rest","isDiff","diffObject","keys1","keys2","executeHooks","hooks","hook","fillKeys","createProvider","container","TextProvider","providerClass","ElementProvider","ComponentProvider","FunctionProvider","arr2","getAttributes","otherProps","fillProps","defaultProps","createElement","children","Provider","nextProps","nextState","nextElement","isForceUpdate","prevProps","nextstate","diffAttributes","attrs1","attrs2","diffEvents","events1","events2","provier","diffStyle","style1","style2","beforeName","splitProps","attributes","events","_super","_this","isMount","isSVG","renderProviders","base","prevAttributes","prevEvents","nextAttributes","nextEvents","provider","containerNode","findContainerNode","findDOMNode","comp","providers","template","ContainerProvider","prevState","Component","state","isUpdate","PureComponent","_Portal","renderProvider","updateProvider","getNextSibiling","childProvider","childProviders","diffProviders","containerProvider","childrenKeys","childrenProvider","next","updatedHooks","updated","isProvider","render","createPortal","version","some","getUserAgent","agent","userAgent","execRegExp","pattern","hasUserAgentData","userAgentData","brands","findVersion","versionTest","convertVersion","findPreset","presets","userPreset","preset","findPresetBrand","brandInfo","findBrand","brand","BROWSER_PRESETS","CHROMIUM_PRESETS","WEBKIT_PRESETS","WEBVIEW_PRESETS","OS_PRESETS","parseUserAgentData","osData","isMobile","firstBrand","browser","os","chromiumBrand","webkitBrand","platform_1","browserBrand","parseUserAgent","nextAgent","browserPreset","browserVersion","osPreset","osVersion","chromiumPreset","webkitPreset","getAccurateAgent","agentInfo","add","matrix","inverseMatrix","fromX","swap","iv","divide","ignoreDimension","newMatrix","invert","createIdentityMatrix","identityIndex","targetStartIndex","targetIndex","transpose","getOrigin","originMatrix","w","fromTranslation","convertPositionMatrix","convertDimension","multiplies","matrixes","multiply","matrix2","plus","nextPos","minus","convertCSStoMatrix","is2d","convertMatrixtoCSS","calculate","rotateX3d","rotateY3d","rotateZ3d","createRotateMatrix","scale3d","sx","sy","sz","rotate","translate3d","tx","ty","tz","matrix3d","matrix1","cos","sin","createScaleMatrix","scale","createOriginMatrix","origin","createWarpMatrix","pos0","pos3","nextPos0","nextPos1","nextPos2","nextPos3","x0","y0","x3","y3","u0","v0","u1","v1","u2","v2","u3","v3","getCenter","createMatrix","parseMat","transform","toMat","parse","getElementMatrix","calculateMatrixDist","res","getDistElementMatrix","matrixInfos","matrixFunction","functionValue","transforms","functionName","nextSize_1","posX","posY","posZ","nextSize","_e","_f","_g","_h","unitValue","childrenCount","ChildrenDiffer","tinyThrottle","isSameConstants","linearConstants1","linearConstants2","isSamePoint","point1","point2","getAreaSize","point","nextPoint","fitPoints","left","top","getMinMaxs","minX","minY","maxX","maxY","ratioX","ratioY","xs","ys","isInside","excludeLine","y","xLine","xLinearConstants","getLinearConstants","lines","convertLines","intersectionPosInfos","line","linearConstants","standardPoint","xPoints","getPointsOnLines","getIntersectionPointsByConstants","linePoint","intersectionCount","xMap","prevValue","nextValue","getDistanceFromPointToConstants","dx","dy","c1","c2","isZeroA","isZeroB","results","getIntersectionPoints","line1","line2","isLimit","isPointOnLine","minMaxs","order","minMax","right","bottom","pointX","pointY","getOverlapPointInfos","points1","points2","targetPoints1","targetPoints2","lines1","lines2","linearConstantsList1","linearConstantsList2","overlapInfos","linePointInfos","intersectionPoints","isNext","pointMap","getOverlapPoints","infos","isConnectedLine","prevIndex1","prevIndex2","nextIndex1","nextIndex2","getOverlapAreas","areas","area","findReversedAreas","isFirst","nextPoints1","nextArea","areaPoint","nextPoint2","point2Index","findConnectedAreas","getUnoverlapAreas","overlapAreas","unoverlapAreas","overlapArea","nextOverlapArea","connectedAreas","firstConnectedArea","lastPoint_1","firstPoint","firstIndex","getOverlapSize","EventEmitter","eventName","resolve","isStop","listeners","getDefaultScrollPosition","checkDefaultScrollEvent","getContainerElement","DragScroll","inputEvent","clientX","clientY","threshold","_startRect","_startPos","direction","prevScrollPos","throttleTime","isDrag","nextScrollPos","offsetX","offsetY","nextDirection","getScrollPosition","useScroll","nowTime","distTime","checkScrollEvent","getRotatiion","touches","isMultiTouch","getEventClients","getClients","getClient","isMouseEvent","getPosition","clients","prevClients","startClients","getAverageClient","originalClientX","originalClientY","prevX","prevY","startX","startY","sumClient","client","ClientStore","isAdd","position","startClient","movement","currentClient","prevClient","INPUT_TAGNAMES","Gesto","targets","isTrusted","isDragAPI","pinchOutside","preventWheelClick","preventRightClick","preventDefault","checkInput","dragFocusedInput","preventClickEventOnDragStart","preventClickEventOnDrag","preventClickEventByCondition","useTouch","isDragStart","activeElement","tagName","hasInput","hasContentEditable","activeTagName","timer","isScroll","dragResult","clientsLength","currentTime","isDouble","firstTarget","checkWindowBlur","passive_1","isCallDrag","store","nextClients","currentData","name_1","pinchThreshold","isPinch","isPrevDrag","isFirstDrag","storePosition","win","passive","hash","stringHash","getHash","getShadowRoot","parentElement","rootNode","replaceStyle","trimmedSelector","subSelector","trimmedSubSelector","injectStyle","shadowRoot","styled","injectClassName","styleElement","count","injectCount","StyledElement","cspNonce","portalContainer","cssId","Tag","portalAttributes","tag","injector","Styled","__decorate","decorators","desc","__spreadArray","pack","ar","makeAble","able","getSVGCursor","degree","getCursorCSS","degree45","defaultCursor","IS_WEBKIT","IS_WEBKIT605","navi","IS_FIREFOX","IS_SAFARI_ABOVE15","PREFIX","MOVEABLE_CSS","NEARBY_POS","FLOAT_POINT_NUM","MIN_SCALE","MAX_NUM","MIN_NUM","DIRECTIONS4","DIRECTIONS","DIRECTION_REGION_TO_DIRECTION","DIRECTION_INDEXES","DIRECTION_ROTATIONS","MOVEABLE_METHODS","setCustomDrag","delta","isConvert","ableName","datas","ableDatas","convertDragDist","CustomGesto","originalDatas","calculatePointerDist","moveable","moveableClientRect","rootMatrix","is3d","calculateInversePosition","getDragDist","setDragStart","allMatrix","beforeMatrix","offsetMatrix","targetMatrix","transformOrigin","getTransformDirection","calculateMoveablePosition","resolveTransformEvent","nextTransforms","nextTransformAppendedIndexes","convertTransformInfo","targetFunction","matFunctionName","convertTransformFormat","dist","getTransformDist","getBeforeDragDist","bx","by","getTransfromMatrix","isAfter","beforeTransform","afterTransform","beforeTransform2","afterTransform2","targetAllTransform","nextTargetMatrix","res1","afterTargetMatrix","inverseBeforeMatrix","startDragBeforeDist","absoluteOrigin","isBefore","startDragDist","getInverseDragDist","calculateTransformOrigin","prevWidth","prevHeight","prevOrigin","prevSize","measureRatio","getPosIndexesByDirection","indexes","getPosesByDirection","poses","getPosByDirection","xRatio","yRatio","startPos","fixedDirection","calculatePoses","fixedPos","getNextMatrix","getAbsoluteMatrix","getNextTransformMatrix","targetTransform","scaleMatrix","fillTransformStartEvent","getBeforeRenderableDatas","setTransformIndex","setDefaultTransformIndex","startTransforms","func","fillOriginalTransform","getNextTransforms","getNextTransformText","getNextStyle","fillTransformEvent","nextTransform","drag","Draggable","fillCSSObject","getTranslateDist","fixedPosition","groupable","nextMatrix","groupLeft","groupTop","nextFixedPosition","getDirectionOffset","getScaleDist","scaleDist","getDirectionByPos","nextFixedOffset","calculatePosition","getRotateDist","rotateDist","getResizeDist","nextOrigin","getAbsolutePosition","getAbsolutePosesByState","getGestoData","targetGesto","controlGesto","multiply2","defaultSync","fn","getTransformMatrix","measureSVGSize","isHorizontal","viewBox","getSVGViewBox","getBeforeTransformOrigin","relativeOrigin","getTransformOrigin","getComputedStyle$1","o","getElementTransform","computedStyle","computedTransform","baseVal","getOffsetInfo","lastParent","isParent","checkZoom","targetStyle","documentElement","hasSlot","parentSlotElement","assignedSlotParentElement","isCustomElement","isEnd","offsetZoom","targetZoom","targetPosition","willChange","zoom","slotParentNode","targetParentNode","parentNode","getOffsetPosInfo","offsetLeft","offsetTop","hasOffset","targetOrigin","getSVGGraphicsOffset","getBodyOffset","bodyStyle","bodyPosition","marginLeft","marginTop","convert3DMatrixes","getPositionFixedInfo","fixedContainer","hasTransform","makeMatrixCSS","clientWidth","clientHeight","getSVGMatrix","viewBoxWidth","viewBoxHeight","scaleX","scaleY","preserveAspectRatio","align","meetOrSlice","svgOrigin","xAlign","yAlign","scaleDimension","isGTarget","bbox","getRect","posesX","posesY","rectWidth","rectHeight","calculateRect","getSVGOffset","offsetInfo","targetInfo","getSize","containerClientRect","margin","rectLeft","rectTop","mat","prevLeft","prevTop","posOrigin","rectOrigin","offset","mat2","nextLeft","nextTop","distLeft","distTop","calculateMoveableClientPositions","rootClientRect","rootPoses","x4","y4","originX","originY","getDistSize","vec","getDiagonalSize","getLineStyle","getControlTransform","rotation","getProps","self","offsetWidth","offsetHeight","cssWidth","cssHeight","contentWidth","contentHeight","minOffsetWidth","minOffsetHeight","maxOffsetWidth","maxOffsetHeight","inlineCSSWidth","inlineCSSHeight","svg","boxSizing","borderLeft","borderRight","borderTop","borderBottom","paddingLeft","paddingRight","paddingTop","paddingBottom","horizontalPadding","verticalPadding","horizontalBorder","verticalBorder","horizontalOffset","verticalOffset","containerWidth","containerHeight","parentStyle","getRotationRad","resetClientRect","getExtendsRect","isRoot","extendsRect","getClientRectByPosition","isExtends","baseTop","baseLeft","getClientRect","clientRect","getTotalDirection","parentDirection","getDirection","deg","direciton","dir","getAbsolutePoses","pos4","roundSign","unset","resolvedEvent","fillAfterTransform","prevEvent","nextEvent","fillParams","params","isBeforeEvent","nextParams","fillEndParams","catchEvent","triggerEvent","isManager","pseudoElt","filterAbles","ables","triggerAblesSimultaneously","enabledAbles","ableGroups","equals","selectValue","groupBy","groups","groupKeys","groupKey","keyIndex","group","groupByMap","maxOffset","calculatePadding","convertCSSSize","isRelative","getTinyDist","getDirectionViewClassName","getDirectionCondition","checkAbles","invertObject","nextObj","beforeFunctionTexts","beforeFunctionTexts2","targetFunctionText","afterFunctionTexts","afterFunctionTexts2","beforeFunctions","beforeFunctions2","targetFunctions","afterFunctions","afterFunctions2","beforeFunctionMatrix","beforeFunctionMatrix2","afterFunctionMatrix","afterFunctionMatrix2","allFunctionMatrix","isArrayFormat","getRefTarget","isSelector","getRefTargets","userTargets","getAbsoluteRotation","getDragDistByState","getSizeDistByDist","startSize","startOffsetWidth","startOffsetHeight","distWidth","distHeight","standardRad","signSize","startWidthSize","startHeightSize","distSize","ratioRad","getOffsetSizeDist","sizeDirection","parentDistance","parentDist","parentScale","startFixedDirection","directionsDists","directionRatios","ratioDistance","dist_1","convertTransformUnit","xy","leftOrigin","rightOrigin","originObject","nextOriginObject","convertTransformOriginArray","rotatePosesInfo","prevPoses","nextPoses","isDeepArrayEquals","arr1","value1","value2","isArray1","isArray2","Pinchable","angle","pinchable","controlEventName","pinchAbles","ableEvent","pinchScale","distance","fillChildEvents","groupableDatas","childDatas","triggerChildGesto","isStart","moveables","childs","ev","childMoveable","gestos","childEvent","triggerChildAbles","eachEvent","VERTICAL_NAMES","HORIZONTAL_NAMES","VERTICAL_NAMES_MAP","HORIZONTAL_NAMES_MAP","hasGuidelines","snappable","bounds","innerBounds","verticalGuidelines","horizontalGuidelines","snapGridWidth","snapGridHeight","guidelines","enableSnap","getSnapDirections","snapDirections","mapSnapDirectionPoses","snapPoses","nextSnapDirections","nextSnapPoses","splitSnapDirectionPoses","horizontalNames","verticalNames","calculateContainerPos","containerRect","clientPos","solveLineConstants","checkMoveableSnapPoses","customSnapThreshold","snapThreshold","checkSnapPoses","checkSnap","checkSnapKeepRatio","endPos","endX","endY","isBottom","isRight","verticalInfo","horizontalInfo","verticalSnapInfo","horizontalSnapInfo","getNearestSnapGuidelineInfo","isVerticalSnap","verticalGuideline","isHorizontalSnap","horizontalGuideline","horizontalPos","verticalPos","isSnap","checkSnaps","snapInfo","posInfo","guidelineInfo","guideline","targetType","targetPoses","isVertical","posType","snapPosInfos","targetPos","guidelineInfos","snapPosInfo","getSnapInfosByDirection","snapDirection","alignPoses","checkSnapBoundPriority","aDist","bDist","getNearOffsetInfo","offsets","aSign","bSign","aOffset","bOffset","getCheckSnapDirections","directions","endDirection_1","signX","signY","signs","sign","isStartLine","cx","cy","hitTestLine","test1","test2","isSameStartLine","dots","centerSign","checkInnerBoundDot","start","end","checkInnerBound","verticalSign","horizontalSign","lineConstants","leftLine","topLine","rightLine","bottomLine","topBoundInfo","checkLineBoundCollision","bottomBoundInfo","leftBoundInfo","rightBoundInfo","isAllVerticalBound","isVerticalBound","isAllHorizontalBound","isHorizontalBound","isBound","isAllBound","boundLine","isRender","dot1","boundDot1","boundDot2","dy2","dx2","hasDx","hasDy","slope","getInnerBoundInfo","lineInfos","multiple","sizeOffset","getInnerBoundDragInfo","getCheckInnerBoundLineInfos","innerBoundInfo","widthOffsetInfo","heightOffsetInfo","getCheckSnapLineDirections","lineDirections","virtualPoses","dir1","dir2","virtualLine","isBoundRotate$1","relativePoses","boundDots","getDistPointLine","solveReverseLine","checkRotateInnerBounds","dotInfos","lineRad","lineDist","dotDist","dotRad","distRad","nextRad1","nextRad2","nextRad","checkInnerBoundPoses","horizontalPoses","verticalPoses","boundMap","lineInfo","isHorizontalStart","isVerticalStart","checkBoundPoses","nextBounds","checkBounds","getBounds","externalBounds","clientLeft","clientTop","snapOffsetLeft","snapOffsetTop","snapOffsetRight","snapOffsetBottom","isCSS","checkBoundKeepRatio","startBoundPos","endBoundPos","minPos","maxPos","boundInfos","isBoundRotate","boundRect","boundRotate","boundPos","checkRotateBounds","relativeRad1","relativeRad2","renderGuideline","React","scaleType","renderInnerGuideline","renderSnapPoses","renderPos","renderGuidelines","isDisplayInnerSnapDigit","mainNames","targetStart","targetEnd","hide","elementRect","renderDigitLine","lineType","gap","snapDigit","isDisplaySnapDigit","snapDistFormat","sizeName","absGap","snapSize","groupByElementGuidelines","otherIndex","names","nextGuidelines","inner","elementRect1","elementRect2","renderDashedGuidelines","rendered","sideNames","sidePos","prevRect","nextRect","size1","size2","renderPos1","renderPos2","renderGapGuidelines","targetSideStart","targetSideEnd","gapRects","sideStartPos","sideEndPos","sideCenterPos","solveEquation","snapOffset","solveNextOffset","dist1","dist2","isOutside","widthOffset","heightOffset","getSnapBound","boundInfo","checkThrottleDragRotate","throttleDragRotate","adjustPoses","adjustPos","prevDistY","checkSnapBoundsDrag","isRequest","boundPoses","checkMoveableSnapBounds","verticalSnapBoundInfo","horizontalSnapBoundInfo","verticalInnerBoundInfo","horizontalInnerBoundInfo","horizontalBoundInfos","verticalBoundInfos","horizontalDist","verticalDist","checkSnapBounds","guideines","checkSnapRightLine","snapBoundInfo","rad180","isHorizontalLine","isVerticalLine","getSnapBoundInfo","startDirection","endDirection","otherStartPos","otherEndPos","checkSnapBoundsKeepRatio","otherHorizontalOffset","isOtherHorizontalBound","isOtherHorizontalSnap","otherVerticalOffset","isOtherVerticalBound","isOtherVerticalSnap","snapLine","getSnapBoundOffset","horizontalBoundInfo","verticalBoundInfo","checkMaxBounds","left_1","top_1","right_1","bottom_1","otherDirection","isCheckVertical","isCheckHorizontal","otherPos","nextOtherPos","isHeightOutside","isWidthOutside","getTotalGuidelines","hasFixed","overflow","containerClientHeight","containerClientWidth","snapGap","maxSnapElementGuidelineDistance","elementGuidelines","getElementGuidelines","totalGuidelines","getGapGuidelines","getGridGuidelines","getDefaultGuidelines","checkBetweenRects","maxSnapElementGapDistance","elementRects","gapGuidelines","targetCenter","targetStart2","targetEnd2","getDist","nextElementRects","snapRect1","snapRect2","rect1","rect2","rect1Start","rect1End","rect2Start","rect2End","isCenter","prevValues","snapRect","nextElementGuidelines","nextValues","getSnapElementRects","elementSnapDirections","topValue","leftValue","rightValue","bottomValue","centerValue","middleValue","sizes","snapWidth","snapHeight","nextPosInfo","containerLeft","containerTop","targetLeft","targetTop","elementLeft","elementTop","elementRight","elementBottom","checkSnapInfo","snapContainer","snapContainerTarget","snapContainerRect","offset1","offset2","getNextFixedPoses","nextFixedPos","getSizeOffsetInfo","innerBoundLineInfos","recheckSizeByTwoDirection","snapPos","nextWidthOffset","nextHeightOffset","nextWidth","nextHeight","checkSizeDist","getNextPoses","isWidthBound","isHeightBound","widthDist","heightDist","isGetWidthOffset","checkSnapRotate","origin2","checkSnapResize","nextAllMatrix","checkSnapScale","sizeDist","startCheckSnapDrag","getSnapGuidelines","posInfos","addBoundGuidelines","verticalSnapPoses","horizontalSnapPoses","verticalInnerBoundPoses","horizontalInnerBoundPoses","innerPos","directionCondition$2","Snappable","snapRenderInfo","snapRenderThreshold","minLeft","minTop","externalPoses","snapInfos","hasExternalPoses","externalRect","verticalPosInfos","horizontalPosInfos","allGuidelines","dragControlCondition","renderDirectionControlsByInfos","renderDirections","renderPoses","rotationRad","degRotation","directionMap","renderState","renderDirectionMap","directionRotation","dataAttrs","renderDirectionControls","defaultDirections","renderAroundControls","renderLine","renderEdgeLines","edge","getRenderDirections","renderDiagonalDirections","renderAllDirections","dragInfo","beforeOrigin","parentEvent","parentGesto","parentFlag","deltaOffset","prevDist","prevBeforeDist","startValue","parentMoveable","throttleDrag","dragRotateRad","startDragRotate","ry","rx","beforeTranslate","beforeDist","beforeDelta","passDelta","directionCondition$1","Resizable","isGroup","parentFixedDirection","setRatio","setFixedDirection","setFixedPosition","setMin","setMax","nextMaxSize","startWidth","startHeight","parentKeepRatio","dragClient","resolveMatrix","isResize","isWidth","startOffsetMatrix","startTransformOrigin","targetN","resizeFormat","throttleResize","keepRatioFinally","getNextBoundingSize","boundingWidth","boundingHeight","nextFixedDirection","snapDist","computeSize","isNoSnap","inverseDelta","errorWidth","errorHeight","isErrorWidth","isErrorHeight","originalEvents","setDist","startPositions","originalX","originalY","parentStartOffsetWidth","parentStartOffsetHeight","updateGroupMin","originalMinSize","childMinSize","childStartOffsetWidth","childStartOffsetHeight","parentMinWidth","parentMinHeight","updateGroupMax","originalMaxSize","childMaxSize","parentMaxWidth","parentMaxHeight","setRotateStartInfo","startAbsoluteOrigin","getAbsoluteDist","defaultDeg","prevDeg","normalizedPrevDeg","loop","getAbsoluteDistByClient","getRotateInfo","moveableRect","throttleRotate","prevSnapDeg","snapRotation","snapDeg","getRotationPositions","rotationPosition","radPoses","isReverse","rotationTarget","directionCSS","Rotatable","rotatable","rotateAroundControls","resolveAblesWithRotatable","positions","jsxs","resolveMap_1","directionControlInfos","parentRotate","beforeDirection","resizeStart","startClientX","startClientY","externalRotate","inputTarget","regionDirection","controlDirection","clientPoses","originalFixedPosition_1","fixedBeforeOrigin","fixedAfterOrigin","posDelta","dragStart","resolveAble","rotatation","clientDistX","clientDistY","groupDelta","beforeInfo","afterInfo","absoluteInfo","isRotate","targetDirection","beforeRotation","absoluteDelta","absoluteDist","absoluteRotation","startRotation","absoluteStartRotation","nextClientX","nextClientY","nextRotation","inverseDist","dragEvent","transformEvent","resize","resizeEvent","parentLeft","parentTop","parentBeforeOrigin","childClient","startGroupClient","prevClientX","prevClientY","distRotate","directionCondition","Scalable","scaleWidth","scaleHeight","isScale","throttleScale","getNextScale","stateDirection","nextScale","scaleEndParam","moveableScale","getMiddleLinePos","getTriangleRad","rad1","rad2","isValidPos","poses1","poses2","pi","Warpable","resizable","scalable","warpable","linePosFrom1","linePosFrom2","linePosFrom3","linePosFrom4","linePosTo1","linePosTo2","linePosTo3","linePosTo4","targetInverseMatrix","prevMatrix","isWarp","posIndexes","absolutePoses","selectedPoses","nearByPoses","afterMatrix","totalMatrix","AREA_PIECES","AREA_PIECE","AVOID","VIEW_DRAGGING","restoreStyle","renderPieces","DragArea","dragArea","passDragArea","areaElement","rects","Origin","scrollContainer","Scrollable","scrollOptions","dragScroll","scrollContainerElement","gestoName","scrollThreshold","scrollThrottleTime","Default","Padding","padding","paddingDirections","paddingPos1","paddingPos2","paddingPos3","paddingPos4","RADIUS_DIRECTIONS","calculateRatio","sumSize","sumRatio","HORIZONTAL_RADIUS_ORDER","VERTICAL_RADIUS_ORDER","HORIZONTAL_RADIUS_DIRECTIONS","VERTICAL_RADIUS_DIRECTIONS","getRadiusStyles","clipStyles","radiusPoses","raws","rawPos","getRadiusRange","controlPoses","horizontalRange","verticalRange","clipPose","getRadiusValues","minCounts","full","splitIndex","splitLength","horizontalValues","verticalValues","horizontalValuesLength","verticalValuesLength","hasVerticalValues","nwValue","neValue","seValue","swValue","_j","wnValue","_k","enValue","_l","esValue","_m","wsValue","horizontalRawPoses","verticalRawPoses","nextHorizontalPoses","nextVerticalPoses","removeRadiusPos","radiuslIndex","deleteCount","addRadiusPos","horizontalIndex","verticalIndex","radiusX","radiusY","startVerticalIndex","splitRadiusPoses","horizontals","verticals","CLIP_DIRECTIONS","CLIP_RECT_DIRECTIONS","getClipStyles","clipPath","clipRelative","clipType","clipPoses","isRect","isCircle","subWidth","subHeight","getRectPoses","dirx","diry","getControlSize","xRange","yRange","getClipPath","defaultClip","customClip","clipText","clipPrefix","splitter","xPos","yPos","radiusX_1","radiusY_1","radius","xRadius","yRadius","centerPos_1","roundIndex","rectLength","radiusValues","_o","_p","_q","_r","nextRight","nextBottom","_s","posValue","moveControlPos","sub","dists","verticalDirections","horizontalDirections","verticalDirection_1","horizontalDirection_1","fixedIndex","nextDist","nextControlPoses_1","controlPose","controlDir","dirDir","dirHorizontal","dirVertical","addClipPath","clipIndex","clipStyle","removeClipPath","Clippable","customClipPath","defaultClipPath","clipArea","clipPathState","snapBoundInfos","calculatedPos","controls","isInset","isPolygon","linePoses_1","clipLeft","clipTop","ellipseClipPath","piece","areaPoses","allWidth","allHeight","allLeft_1","allTop_1","directionType","snapPos1","snapPos2","dragWithClip","isDragTarget","isControl","isLine","isArea","originalDraggable","originalDist","firstDist","isDragWithTarget","isAll","guidePoses","isEllipse","guideRect","guideXPoses","guideYPoses","rectPoses","rectDists_1","boundDelta","snapOffsetY","snapOffsetX","distSnapX","distSnapY","width_1","height_1","nextControlPoses_2","nextClipStyles","dragDist","isClipStart","OriginDraggable","originRelative","distOrigin","dragDelta","addBorderRadiusByLine","lineIndex","horizontalsLength","virtual","verticalsLength","controlIndex","controlPoseInfo","addBorderRadius","removeBorderRadius","getBorderRadius","borderRadius","triggerRoundEvent","getStyleBorderRadius","Roundable","roundClickable","borderRadiusState","minRoundControls","maxRoundControls","roundPadding","isDisplayShadowRoundControls","verticalCount","horizontalCount","basePos","originalPos","isDisplay","indexAttr","roundRelative","selectedControlPose","selectedVertical","selectedHorizontal","pose","poseDist","isIdentityMatrix","identityMatrix","BeforeRenderable","cssMatrix","startTransform","Renderable","triggerAble","ableType","eventOperation","eventAffix","eventType","requestInstant","conditionName","isFirstStart","requestAble_1","eventAbles","resultCount","isDragStop","stop","nextDatas","isForceEnd","flushSync","checkMoveableTarget","dragTarget","eventTarget","getTargetAbleGesto","moveableTarget","controlBox","getAbleGesto","conditionFunctions","isTargetAbles","preventClickDefault","gesto","EventManager","getMatrixStackInfo","checkContainer","requestEnd","targetTransformOrigin","offsetContainer","isFixed","fixedInfo","offsetPos","offsetParent","isOffsetEnd","isStatic","customOffsetParent","customOffsetLeft","customOffsetTop","parentClientLeft","parentClientTop","fixedClientLeft","fixedClientTop","isElementTarget","scrollLeft","scrollTop","calculateMatrixStack","rootContainer","isAbsolute3d","prevTargetMatrix","containerZoom","rootMatrixes","isRoot3d","offsetRootContainer","rootZoom","isNext3d","isSVGGraphicElement","originalRootContainer","endContainer","rootMatrixBeforeOffset","nextInfo","isMatrix3d","originalRootMatrix","calculateElementInfo","allResult","getElementInfo","getMoveableTargetInfo","moveableElement","requestStyle","targetClientRect","rootContainerClientRect","offsetDelta","computedStyle_1","beforePosition","absoluteTargetPosition","absoluteContainerPosition","containerClientRectLeft","containerClientRectTop","containterClientLeft","containerClientTop","clientDelta","getPersistState","MoveableManager","parentPosition","propsTarget","translateZ","ControlBoxElement","linePadding","stateTarget","groupTargets","isDragging","ableAttributes","ableClassName","isVisible","wrapperMoveable","viewContainer","manager","totalSize","isTarget","isSetState","persistState","statePos","isInstant","requsetAble","ableRequester","requester","ableParam","originalBeforeOrigin","stateLeft","stateTop","isPersisted","stateContainer","isTargetChanged","isChanged","moveableContainer","customStyleMap","hasControlBox","persistData","firstRenderState","pinchStart","dragControlStart","targetAbles","controlAbles","Renderer","styleNames","ableStyleNames","observer","controlBoxElement","hasTargetAble","hasControlAble","isUnset","hideDefaultLines","hideChildMoveableDefaultLines","useDragArea","prevTarget","prevDragArea","isDragAreaChanged","eventKeys","hasAbles","viewContainerOption","nextClassNames","prevClassNames","classPrefix","targetGestoData","controlGestoData","Groupable","renderGroupRects","persistDatChildren","Clickable","isMoveableElement","containsElement","containsTarget","parentTarget","getDraggableEvent","edgeDraggable","IndividualGroupable","MOVEABLE_ABLES","MOVEABLE_EVENTS_PROPS_MAP","MOVEABLE_EVENTS_MAP","MOVEABLE_EVENTS","MOVEABLE_PROPS","solveConstantsDistance","solveC","getMaxPos","getMinPos","getGroupRect","parentPoses","fixedRotation","a1_1","a2_1","a1MinMax_1","a1MinMaxPos_1","a2MinMax_1","a2MinMaxPos_1","a1Dist","a2Dist","a1MinPos","a1MaxPos","a2MinPos","a2MaxPos","minHorizontalLine","maxHorizontalLine","minVerticalLine","maxVerticalLine","minX_1","minY_1","maxX_1","maxY_1","changedX","findMoveableGroups","childTargetGroups","targetGroup","childMoveableGroups","checked","MoveableGroup","checkeds","targetGroups","moveableGroups","finded","isReset","defaultGroupRotate","persistedRoatation","getMoveableGroupRect","parentRotation","posesRotations","rotations","groupRotation","firstRotation","isSameRotation","groupPoses","groupRect","rootGroupRect","posesInfo","rotateScale","nextTarget","isContainerChanged","MoveableIndividualGroup","canPersist","getElementTargets","refTargets","selectorMap","elementTargets","getTargetGroups","compareRefTargets","prevRefTargets","nextRefTargets","InitialMoveable","cssMap","moveableContructor","userAbles","userProps","totalAbles","prevMoveable","target_1","prevTargetMoveable","mv","resolvePromise","isBrowser","nextSelectorMap","updateSelectorMap","selectorTarget","Moveable$1","Moveable","makeMoveable","InnerMoveable","PROPERTIES","METHODS","EVENTS","PROPS_MAP","nextOptions","innerMoveable","createCommonjsModule","module","keycode","exports","keyCode","searchInput","hasKeyCode","search","foundNamedKey","codes","aliases","nameOrCode","alias","keycode_1","keycode_2","keycode_3","keycode_4","keycode_5","codeData","keysSort","getKey","keyName","getCombi","getModifierCombi","getArrangeCombi","arrangeKeys","prevScore","nextScore","globalKeyController","KeyController","comb","isToggle","combi","touch","filterDuplicated","map","elementFromPoint","baseNode","jsx","elChildren","elStyle","attrs","diffValue","boundArea","getDefaultElementRect","passTargets","beforeTargets","afterTargets","continueSelectWithoutDeselect","getLineSize","CLASS_NAME","OPTIONS","OPTION_TYPES","Selecto","clickedTarget","selectFromInside","selectByClick","boundContainer","preventDragFromInside","clickBySelectEnd","dragCondition","boundElement","rectElement","hitRect","firstPassedTargets","pointTarget","hasInsideTargets","isPreventSelect","innerScrollOptions","isInnerScroll","inputEvent_1","innerScrollElement","hasScrollOptions","selectFlag","isKeyDown","isKeyUp","dragContainer","containers","selectedTargets","beforeSelected","selectedElements","startPoint","endPoint","mousedown","mousemove","mouseup","getElementRect","selectableElements","selectableTargets","selectablePoints","hasIndexesMap","parentMap_1","parents","paths","prevParentElement","keyContainer","toggleContinueSelect","toggleContinueSelectWithoutDeselect","nextClassName","continueSelect","selectRect","gestoEvent","hitRate","innerGroups","innerWidth","innerHeight","ignoreClick","rectPoints","isHit","hitRateValue","inArea","overlapPoints","overlapSize","rate","selectableInners","yGroups","isMoveInnerScroll","parentMap_2","parentInfo","containerInfo","isDragStartEnd","startResult","startSelectedTargets","startPassedTargets","afterAdded","afterRemoved","afterPrevList","afterList","containerX","containerY","offsetSize","passedTargets","isKeyup","nextKeys","toggleKeys","singleKey_1","innerScrollContainer_1","parentMap_3","innerScrollPathsList","innerScrollPaths","isAlwaysTrue","selectablePoints_1","groups_1","getter","setter","Selecto$1","CanvasContextMenu","inlineEditorOpen","isMenuVisible","setIsMenuVisible","setAnchorPoint","handleContextMenu","closeContextMenu","renderMenuItems","openCloseEditorMenuItem","MenuItem","editElementMenuItem","onClickEditElementMenuItem","typeOptions","getTypeOptionsSubmenu","submenuItems","onClickItem","sceneContainerDimensions","addItemMenuItem","setBackgroundMenuItem","contextMenuAction","actionType","first","currentSelectedElements","currentLayer","currentSelectedElement","ContextMenu","CanvasTooltip","onClose","overlayProps","dialogProps","renderDataLinks","Portal","VizTooltipContainer","CloseButton","CONNECTION_ANCHOR_DIV_ID","CONNECTION_ANCHOR_ALT","CONNECTION_ANCHOR_HIGHLIGHT_OFFSET","ANCHOR_PADDING","ConnectionAnchors","setRef","handleMouseLeave","highlightEllipseRef","halfSize","halfSizeHighlightEllipse","anchorImage","onMouseEnterAnchor","onMouseLeaveHighlightElement","handleMouseLeaveAnchors","ANCHORS","generateAnchors","anchors","anchor","idCounter","htmlElementTypes","ConnectionSVG","setSVGRef","setLineRef","headId","CONNECTION_LINE_ID","EDITOR_HEAD_ID","selectedConnection","setSelectedConnection","selectedConnectionRef","clearSelectedConnection","selectConnection","renderConnections","idx","source","connectionCursorStyle","selectedStyles","CONNECTION_HEAD_ID","Connections","BehaviorSubject","anchorElement","connectionSVG","connectionLine","elementTarget","elementBoundingRect","parentBoundingRect","connectionLineX1","connectionLineY1","sourceX","sourceY","targetX","targetY","targetName","selectedTarget","connectionStartTargetBox","mouseX","mouseY","update","settingsViewable","openSettings","evt","onKeyPress","dimensionViewable","constraintViewable","targetElement","verticalConstraintVisualization","horizontalConstraintVisualization","borderStyle","centerIndicatorLineOne","centerIndicatorLineTwo","centerIndicator","verticalConstraintTop","verticalConstraintBottom","verticalConstraintTopBottom","verticalConstraintCenterLine","verticalConstraintCenter","horizontalConstraintLeft","horizontalConstraintRight","horizontalConstraintLeftRight","horizontalConstraintCenterLine","horizontalConstraintCenter","RootElement","changeCallback","rest","Scene","enableEditing","showAdvancedTypes","onSave","ReplaySubject","Subject","isFrame","scalar","maxRight","maxBottom","updateMoveable","stack","currentElement","nestedElements","nestedElement","sceneContainer","rootElements","destroySelecto","allowChanges","targetedElement","elementSupportsEditing","needsUpdate","isTargetMoveableElement","isTargetAlreadySelected","dragToGap","destPosition","newLayer","framePlacement","skipNextSelectionBroadcast","canShowContextMenu","isTooltipValid","canShowElementTooltip","SetBackground","defaultValue","bgImage","setBgImage","ResourcePickerPopover","BackgroundSizeEditor","imageSize","onImageSizeChange","getCategoryName","optionBuilder","ConstraintSelectionBox","onVerticalConstraintChange","onHorizontalConstraintChange","currentConstraints","onClickTopConstraint","onClickBottomConstraint","onClickVerticalCenterConstraint","onClickLeftConstraint","onClickRightConstraint","onClickHorizontalCenterConstraint","HOVER_COLOR","HOVER_OPACITY","SELECTED_COLOR","selectionBoxColor","QuickPositioning","onPositionChange","settings","onQuickPositioningChange","defaultConstraint","originalConstraint","getRightBottomPosition","getCenterPosition","elementSize","places","horizontalOptions","verticalOptions","PlacementEditor","layout","reselectElementAfterChange","onHorizontalConstraintSelect","onVerticalConstraintSelect","Icon","NumberInput","getElementEditor","lodash","layer","layerTypes","isUnsupported","currentOptions","TreeContext","DropIndicator","_ref","dropPosition","dropLevelOffset","indent","_objectDestructuringEmpty","Indent","prefixCls","level","baseClassName","_classNames","getEntity","keyEntities","_excluded","isTreeNode","node","fillFieldNames","title","_title","mergedTitle","warningWithoutKey","treeData","dig","treeNode","recordKey","convertTreeToData","rootNodes","treeNodes","_treeNode$props","dataNode","parsedChildren","flattenTreeData","treeNodeList","expandedKeys","_fillFieldNames","fieldTitles","fieldKey","fieldChildren","expandedKeySet","flattenList","mergedKey","fieldTitle","flattenNode","omit","traverseDataNodes","dataNodes","mergedConfig","_mergedConfig","childrenPropName","externalGetKey","_fillFieldNames2","mergeChildrenPropName","syntheticGetKey","processNode","pathNodes","connectNodes","subNode","subIndex","convertDataToEntities","_ref2","initWrapper","processEntity","onProcessFinished","legacyExternalGetKey","mergedExternalGetKey","posEntities","wrapper","parentPos","nodes","entity","getTreeNodeProps","_ref3","selectedKeys","loadedKeys","loadingKeys","checkedKeys","halfCheckedKeys","dragOverNodeKey","treeNodeProps","convertNodePropsToEventData","expanded","selected","loaded","halfChecked","dragOver","dragOverGapTop","dragOverGapBottom","active","eventKey","eventData","ICON_OPEN","ICON_CLOSE","defaultTitle","InternalTreeNode","_React$Component","_len","_key","onNodeClick","onNodeDoubleClick","onNodeSelect","_this$props","disableCheckbox","onNodeCheck","targetChecked","onNodeMouseEnter","onNodeMouseLeave","onNodeContextMenu","onNodeDragStart","onNodeDragEnter","onNodeDragOver","onNodeDragLeave","onNodeDragEnd","onNodeDrop","_this$props2","onNodeExpand","_this$props3","isLeaf","loadData","hasChildren","disabled","treeDisabled","checkable","treeCheckable","_this$props$context","onNodeLoad","_this$props4","draggable","_this$props$context2","switcherIconFromProps","switcherIconFromCtx","switcherIcon","_switcherIconDom","switcherCls","switcherIconDom","_this$props5","$custom","dragNodeHighlight","_this$props6","_this$props6$title","icon","_this$props$context3","showIcon","treeIcon","titleRender","wrapClass","$icon","currentIcon","titleNode","$title","_this$props7","_this$props$context4","dropIndicatorRender","rootDraggable","showIndicator","mergedIndent","selectable","treeSelectable","_this$props8","domRef","onMouseMove","_this$props$context5","filterTreeNode","dropContainerKey","dropTargetKey","draggingNodeKey","dataOrAriaAttributeProps","pickAttrs","isEndNode","mergedDraggable","draggableWithoutDisabled","dragging","ariaSelected","ContextTreeNode","useUnmount","triggerStart","triggerEnd","_React$useState","_React$useState2","firstMount","setFirstMount","MotionTreeNode","motion","motionNodes","motionType","onOriginMotionStart","onOriginMotionEnd","treeNodeRequiredProps","visible","setVisible","_React$useContext","targetVisible","useLayoutEffect","triggerMotionStart","triggerMotionEndRef","triggerMotionEnd","onVisibleChanged","nextVisible","motionRef","motionClassName","motionStyle","restProps","RefMotionTreeNode","findExpandedKeys","prevLen","nextLen","find","shorter","longer","cache","getExpandRange","shorterStartIndex","shorterEndNode","longerStartIndex","longerEndIndex","HIDDEN_STYLE","noop","MOTION_KEY","MotionNode","MotionEntity","MotionFlattenData","getMinimumRangeTransitionRange","itemHeight","itemKey","getAccessibilityPath","NodeList","focusable","activeItem","focused","tabIndex","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd","domProps","listRef","indentMeasurerRef","scroll","prevExpandedKeys","setPrevExpandedKeys","_React$useState3","_React$useState4","prevData","setPrevData","_React$useState5","_React$useState6","transitionData","setTransitionData","_React$useState7","_React$useState8","transitionRange","setTransitionRange","_React$useState9","_React$useState10","setMotionType","dataRef","onMotionEnd","latestData","diffExpanded","rangeNodes","newTransitionData","_keyIndex","_rangeNodes","_newTransitionData","mergedData","originList","fullList","originSet","restList","arrDel","clone","arrAdd","posToArr","getDragChildrenKeys","dragNodeKey","dragChildrenKeys","isLastChild","treeNodeEntity","posArr","isFirstChild","calcDropPosition","dragNode","targetNode","startMousePosition","allowDrop","flattenedNodes","expandKeys","_abstractDropNodeEnti","_event$target$getBoun","horizontalMouseOffset","rawDropLevelOffset","abstractDropNodeEntity","nodeIndex","flattenedNode","prevNodeIndex","prevNodeKey","initialAbstractDropNodeKey","abstractDragOverEntity","abstractDragDataNode","abstractDropDataNode","dropAllowed","calcSelectedKeys","internalProcessProps","convertDataToTree","processor","_ref2$processProps","processProps","childrenNodes","parseCheckedKeys","keyProps","conductExpandParent","keyList","conductUp","removeFromCheckedKeys","filteredKeys","isCheckDisabled","fillConductCheck","levelEntities","maxLevel","syntheticGetCheckDisabled","entities","_entity$children","childEntity","visitedKeys","_level","_entities","allChecked","partialChecked","cleanConductCheck","halfKeys","_entity$children2","_level2","_entities2","conductCheck","getCheckDisabled","warningMissKeys","hasEntity","levelSet","MAX_RETRY_TIMES","Tree","_args","_this$state","onDragStart","newExpandedKeys","_this$state2","flattenNodes","onDragEnter","onExpand","_node$props","_assertThisInitialize","_calcDropPosition","dropTargetPos","_this$state3","onDragOver","_assertThisInitialize2","_calcDropPosition2","onDragLeave","onDragEnd","_this$getActiveItem","outsideTree","_this$state4","onDrop","abstractDropNodeProps","dropToChild","dropResult","_this$state5","nodeItem","eventNode","expandAction","onDoubleClick","_this$state6","onSelect","targetSelected","selectedNodes","selectedKey","_this$state7","oriCheckedKeys","oriHalfCheckedKeys","checkStrictly","onCheck","checkedObj","eventObj","checkedKey","_conductCheck","_checkedKeys","_halfCheckedKeys","keySet","_conductCheck2","loadPromise","reject","_ref$loadedKeys","_ref$loadingKeys","onLoad","promise","currentLoadedKeys","newLoadedKeys","onMouseEnter","onMouseLeave","onRightClick","_len2","_key2","_len3","_key3","_this$state8","_this$state9","_this$state10","listChanging","targetExpanded","newFlattenTreeData","currentExpandedKeys","expandedKeysToRestore","newActiveKey","activeKey","_this$state11","_this$state12","_this$state13","_this$props9","KeyCode","expandable","atomic","forceState","needSync","allPassed","newState","_this$props10","_this$props10$itemScr","itemScrollOffset","_this$state14","_this$props11","showLine","_this$props11$tabInde","onContextMenu","onScroll","rootClassName","rootStyle","draggableConfig","entitiesMap","cloneKeyEntities","checkedKeyEntity","_checkedKeyEntity","_checkedKeyEntity$che","_checkedKeyEntity$hal","conductKeys","getGlobalStyles","TreeNodeTitle","nodeData","setAllowSelection","getScene","onDelete","onDuplicate","onNameChange","verifyLayerNameUniqueness","nameToVerify","getLayerInfo","LayerName","getTreeData","root","selectedColor","destKey","srcKey","destPos","srcElement","allowSelection","TreeNavigationEditor","setTreeData","autoExpandParent","setAutoExpandParent","setExpandedKeys","setSelectedKeys","globalCSS","selectedBgColor","selectionByUID","srcEl","destEl","allow","onClearSelection","onTitleRender","onFrameSelection","getLayerEditor","TabsEditor","onTabChange","activeTab","setActiveTab","tabs","onCurrentTabChange","TabsBar","Tab","InlineEditBody","activePanel","activePanelSubject","instanceState","pane","OptionsPaneCategoryDescriptor","supplier","addStandardCanvasEditorOptions","getOptionsPaneCategoryDescriptor","topLevelItemsContainerStyle","tab","noElementSelected","renderOptionsPaneCategoryDescriptor","OptionsPaneCategory","getOptionsPaneCategory","categoryNames","access","OFFSET_X","OFFSET_Y","InlineEdit","windowHeight","windowWidth","inlineEditKey","defaultMeasurements","defaultX","defaultY","savedPlacement","measurements","setMeasurements","setPlacement","onDragStop","dragElement","saveToStore","onResizeStop","canvasInstances","activeCanvasPanel","isInlineEditOpen","isSetBackgroundOpen","CanvasPanel","Subscription","onOptionsChange","tooltip","canvasInstance","ci","inlineEditingSwitched","shouldShowAdvancedTypesSwitched","PanelContext","getConnectionEditor","canvasMigrationHandler","PanelPlugin","connectionSelection"],"sourceRoot":""}