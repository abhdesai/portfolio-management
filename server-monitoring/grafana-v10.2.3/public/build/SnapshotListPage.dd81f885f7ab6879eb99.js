"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5295],{40410:(Z,h,n)=>{n.r(h),n.d(h,{SnapshotListPage:()=>S,default:()=>T});var e=n(85960),d=n(20989),v=n(84041),g=n(90857),f=n(77980),o=n(95329),u=n(83676),p=n(66681),c=n(34785),E=n(29165),k=n(47257);const r=({snapshot:t,onRemove:l})=>{const s=t.externalUrl||t.url;return e.createElement("tr",null,e.createElement("td",null,e.createElement("a",{href:s},t.name)),e.createElement("td",null,e.createElement("a",{href:s},s)),e.createElement("td",null,t.external&&e.createElement("span",{className:"query-keyword"},e.createElement(o.cC,{i18nKey:"snapshot.external-badge"},"External"))),e.createElement("td",{className:"text-center"},e.createElement(E.Qj,{href:s,variant:"secondary",size:"sm",icon:"eye"},e.createElement(o.cC,{i18nKey:"snapshot.view-button"},"View"))),e.createElement("td",{className:"text-right"},e.createElement(E.zx,{variant:"destructive",size:"sm",icon:"times",onClick:l})))},C=()=>{const t=(0,k.wW)(x);return e.createElement("tr",null,e.createElement("td",null,e.createElement(c.Z,{width:80})),e.createElement("td",null,e.createElement(c.Z,{width:240})),e.createElement("td",null),e.createElement("td",null,e.createElement(c.Z,{width:63,height:24,containerClassName:t.blockSkeleton})),e.createElement("td",null,e.createElement(c.Z,{width:22,height:24,containerClassName:t.blockSkeleton})))};r.Skeleton=C;const x=()=>({blockSkeleton:(0,p.css)({display:"block",lineHeight:1})});function b(){return(0,u.G)().getSnapshots().then(t=>t.map(l=>({...l,url:`${g.config.appUrl}dashboard/snapshot/${l.key}`})))}const N=()=>{const[t,l]=(0,e.useState)([]),[s,y]=(0,e.useState)(!1),[m,i]=(0,e.useState)();(0,v.Z)(async()=>{y(!0);const a=await b();y(!1),l(a)},[l]);const w=(0,e.useCallback)(async a=>{const L=t.filter(R=>R.key!==a.key);l(L),await(0,u.G)().deleteSnapshot(a.key).catch(()=>{l(t)})},[t]);return e.createElement("div",null,e.createElement("table",{className:"filter-table"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,e.createElement("strong",null,e.createElement(o.cC,{i18nKey:"snapshot.name-column-header"},"Name"))),e.createElement("th",null,e.createElement("strong",null,e.createElement(o.cC,{i18nKey:"snapshot.url-column-header"},"Snapshot url"))),e.createElement("th",{style:{width:"70px"}}),e.createElement("th",{style:{width:"30px"}}),e.createElement("th",{style:{width:"25px"}}))),e.createElement("tbody",null,s?e.createElement(e.Fragment,null,e.createElement(r.Skeleton,null),e.createElement(r.Skeleton,null),e.createElement(r.Skeleton,null)):t.map(a=>e.createElement(r,{key:a.key,snapshot:a,onRemove:()=>i(a)})))),e.createElement(f.s,{isOpen:!!m,icon:"trash-alt",title:"Delete",body:`Are you sure you want to delete '${m?.name}'?`,confirmText:"Delete",onDismiss:()=>i(void 0),onConfirm:()=>{w(m),i(void 0)}}))},S=({})=>e.createElement(d.T,{navId:"dashboards/snapshots"},e.createElement(d.T.Contents,null,e.createElement(N,null))),T=S}}]);

//# sourceMappingURL=SnapshotListPage.dd81f885f7ab6879eb99.js.map