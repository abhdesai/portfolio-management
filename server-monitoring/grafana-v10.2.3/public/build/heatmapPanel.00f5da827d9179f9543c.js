"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[6987],{7655:(_e,we,y)=>{y.d(we,{q:()=>Ne});var d=y(66681),te=y(85960),Be=y(47257);const pe=10,Ne=({colorPalette:_,min:le,max:xe,display:T,hoverValue:re,useStopsPercentage:ve})=>{const[ae,he]=(0,te.useState)([]),[oe,ye]=(0,te.useState)({isShown:!1,value:0}),[de,Ee]=(0,te.useState)(null),Fe=(0,Be.l4)(),se=Le(Fe,ae);(0,te.useEffect)(()=>{he(ue({colorArray:_,stops:pe,useStopsPercentage:ve}))},[_,ve]);const Ie=be=>{const me=be.nativeEvent.offsetX,fe=be.currentTarget.offsetWidth,ge=Math.floor(me*100/fe+1),Oe=Math.floor((xe-le)*ge/100+le);ye({isShown:!0,value:Oe}),Ee(ge)},Re=()=>{ye({isShown:!1,value:0})};return(0,te.useEffect)(()=>{Ee(re==null?null:c((re-le)/(xe-le)))},[re,le,xe]),te.createElement("div",{className:se.scaleWrapper,onMouseMove:Ie,onMouseLeave:Re},te.createElement("div",{className:se.scaleGradient},T&&(oe.isShown||re!==void 0)&&te.createElement("div",{className:se.followerContainer},te.createElement("div",{className:se.follower,style:{left:`${de}%`}}))),T&&te.createElement("div",{className:se.followerContainer},te.createElement("div",{className:se.legendValues},te.createElement("span",{className:se.disabled},T(le)),te.createElement("span",{className:se.disabled},T(xe))),de!=null&&(oe.isShown||re!==void 0)&&te.createElement("span",{className:se.hoverValue,style:{left:`${de}%`}},T(re??oe.value))))},ue=({colorArray:_,stops:le,useStopsPercentage:xe=!0})=>{const T=_.length;if(xe&&T<=20){const he=1/T*100;let oe=0;const ye=[];for(const de of _)oe>0?ye.push(`${de} ${oe}%`):ye.push(de),oe+=he,ye.push(`${de} ${oe}%`);return ye}const re=_[T-1],ve=Math.ceil(T/le),ae=new Set;for(let he=0;he<T;he+=ve)ae.add(_[he]);return ae.add(re),[...ae]};function c(_){return _>1?100:_<0?0:_*100}const Le=(_,le)=>({scaleWrapper:(0,d.css)({width:"100%",fontSize:"11px",opacity:1}),scaleGradient:(0,d.css)({background:`linear-gradient(90deg, ${le.join()})`,height:"9px",pointerEvents:"none",borderRadius:_.shape.radius.default}),legendValues:(0,d.css)({display:"flex",justifyContent:"space-between",pointerEvents:"none"}),hoverValue:(0,d.css)({position:"absolute",marginTop:"-14px",padding:"3px 15px",transform:"translateX(-50%)"}),followerContainer:(0,d.css)({position:"relative",pointerEvents:"none",whiteSpace:"nowrap"}),follower:(0,d.css)({position:"absolute",height:"13px",width:"13px",borderRadius:_.shape.radius.default,transform:"translateX(-50%) translateY(-50%)",border:`2px solid ${_.colors.text.primary}`,top:"5px"}),disabled:(0,d.css)({color:_.colors.text.disabled})})},95445:(_e,we,y)=>{y.r(we),y.d(we,{plugin:()=>Vt});var d=y(85960),te=y(12932),Be=y(37496),pe=y(58309),Ne=y(17945),ue=y(90857),c=y(1713),Le=y(59864),_=y(36438),le=y(7655),xe=y(98951),T=y(35466),re=y(66681),ve=y(17338),ae=y(512),he=y(88912),oe=y(47257),ye=y(76738),de=y(29627),Ee=y(34305),Fe=y(80995),se=y(25690),Ie=y(25142),Re=y(10642),be=y(52208),me=y(56871),fe=y(1930),ge=y(94372),Oe=y(27110),et=y(1164),tt=y(49404),lt=y(1122),Ge=y(93657),Ae=y(56512);function Ye(e,a,t,s,l,n,r){let o=e.current?.getContext("2d");if(o!=null){let h=n;for(;s[h--]===s[n];);h++;let u=h+r,x=0,i=h;for(;i<u;){let j=l[i];x=Math.max(x,j),i++}let g=new Path2D,O=new Path2D;i=h;let W=0;for(;i<u;){let j=l[i];if(j>0){let A=j/x,L=W/(r+1);(i===n?g:O).rect(Math.round(a*L),Math.round(t*(1-A)),Math.round(a/r),Math.round(t*A))}i++,W++}o.clearRect(0,0,a,t),o.fillStyle="#2E3036",o.fill(O),o.fillStyle="#5794F2",o.fill(g)}}const at=(e,a)=>{const t=e.heatmapColors?.palette,s=e.heatmapColors?.values[a];let l;return s!=null&&(l=t[s]),{cellColor:l,colorPalette:t}},ze={year:1e3*60*60*24*365,month:1e3*60*60*24*30,week:1e3*60*60*24*7,day:1e3*60*60*24,hour:1e3*60*60,minute:1e3*60,second:1e3,millisecond:1},nt=e=>{let a=1,t="millisecond";for(t in ze)if(e>=ze[t]){a=Math.floor(e/ze[t]);break}const s=a===1?t:t+"s";return`${a} ${s}`},Te=(e,a,t)=>{let s;switch(a){case"x":s=t?e?.fields.find(({name:l})=>l==="x"||l==="xMin"||l==="xMax"):e?.fields[0];break;case"y":s=t?e?.fields.find(({name:l})=>l==="y"||l==="yMin"||l==="yMax"):e?.fields[1];break;case"count":s=t?e?.fields.find(({name:l})=>l==="count"):e?.fields[2];break}return s},ot=(e,a)=>{let t=e.heatmap.fields,s=t.find(o=>o.name==="xMax"),l=t.find(o=>o.name==="yMin"),n=t.find(o=>o.name==="yMax"),r=s.config.interval;return{xBucketMin:s.values[a]-r,xBucketMax:s.values[a],yBucketMin:l.values[a],yBucketMax:n.values[a]}},st=e=>e.seriesIdx===2?d.createElement(Ae.H,{data:e.dataRef.current.exemplars,rowIndex:e.dataIdxs[2],header:"Exemplar",padding:8}):d.createElement(it,{...e}),it=({dataIdxs:e,dataRef:a,showHistogram:t,isPinned:s,canAnnotate:l,panelData:n,showColorScale:r=!1,scopedVars:o,replaceVars:h,dismiss:u})=>{const x=e[1],i=a.current,[g]=(0,d.useState)(()=>i.heatmap?.meta?.type===ae.P.HeatmapCells&&!(0,T.qJ)(i.heatmap)),O=Te(i.heatmap,"x",g),W=Te(i.heatmap,"y",g),j=Te(i.heatmap,"count",g),A=v=>{if(O?.display)return(0,fe.zc)(O.display(v));if(O?.type===pe.fS.time){const H="YYYY-MM-DD HH:mm:ss";return(0,Ge.h4)().getCurrent()?.formatDate(v,H)}return`${v}`},L=O.values,D=W.values,N=j.values,C=(0,T.d8)(i.heatmap),Z=W?.display?v=>(0,fe.zc)(W.display(v)):v=>`${v}`,k=x%i.yBucketCount;let R=O?.config.interval,E,J,F,$,K;if(g)({xBucketMin:F,xBucketMax:$,yBucketMin:E,yBucketMax:J}=ot(i,x));else{if(C.yOrdinalDisplay){const v=i.yLayout===c.kv.le?k-1:k,H=i.yLayout===c.kv.le?k:k+1;E=v<0?C.yMinDisplay:`${C.yOrdinalDisplay[v]}`,J=`${C.yOrdinalDisplay[H]}`,(!C.yOrdinalLabel||Number.isNaN(+C.yOrdinalLabel[0]))&&(K=i.yLayout===c.kv.le?J:E)}else{const v=D?.[k];if(i.yLayout===c.kv.le)if(J=`${v}`,i.yLog){let B=(i.yLog===2?Math.log2:Math.log10)(v)-1/i.yLogSplit;E=`${i.yLog**B}`}else E=`${v-i.yBucketSize}`;else if(E=`${v}`,i.yLog){let B=(i.yLog===2?Math.log2:Math.log10)(v)+1/i.yLogSplit;J=`${i.yLog**B}`}else J=`${v+i.yBucketSize}`}i.xLayout===c.kv.le?($=L[x],F=$-i.xBucketSize):(F=L[x],$=F+i.xBucketSize)}const Q=N?.[x],Y=i.heatmap?.fields.filter(v=>!v.config.custom?.hideFrom?.tooltip),q=[],S=new Set;for(const v of Y??[]){if(v.config.links&&v.config.links.length>0&&i.heatmap){const B=o.find(ee=>ee&&ee.__dataContext&&ee.__dataContext.value.field.name===K);v.getLinks=(0,ve.oB)(i.heatmap,v,B||{},h)}if(v.getLinks){const B=v.values[x],ee=v.display?v.display(B):{text:`${B}`,numeric:+B};v.getLinks({calculatedValue:ee,valueRowIndex:x}).forEach(ie=>{const ce=`${ie.title}/${ie.href}`;S.has(ce)||(q.push(ie),S.add(ce))})}}let U=(0,d.useRef)(null),V=264,P=64,z=Math.round(V*me.Z.pxRatio),G=Math.round(P*me.Z.pxRatio);(0,d.useEffect)(()=>{t&&L!=null&&N!=null&&Ye(U,z,G,L,N,x,i.yBucketCount)},[x]);const{cellColor:I,colorPalette:X}=at(i,x),ne=()=>[{label:(0,ge.CZ)(j,i.heatmap),value:i.display(Q),color:I??"#FFF",colorIndicator:lt.F.value}],m=()=>{if(K)return{label:"Name",value:K};switch(i.yLayout){case c.kv.unknown:return{label:"",value:Z(E)}}return{label:"Bucket",value:`${Z(E)}-${Z(J)}`}},f=()=>X&&r?d.createElement(le.q,{colorPalette:X,min:i.heatmapColors?.minValue,max:i.heatmapColors?.maxValue,display:i.display,hoverValue:Q}):null,p=()=>{let v=[{label:"From",value:A(F)}];if(i.xLayout!==c.kv.unknown&&(v.push({label:"To",value:A($)}),R)){const H=nt(R);v.push({label:"Interval",value:H})}return v},b=()=>t?d.createElement("canvas",{width:z,height:G,ref:U,style:{width:V+"px",height:P+"px"}}):null;l=!1;const w=(0,oe.wW)(rt);return d.createElement("div",{className:w.wrapper},d.createElement(tt.r,{headerLabel:m(),keyValuePairs:ne(),customValueDisplay:f()}),d.createElement(Oe.X,{contentLabelValue:p(),customContent:b()}),s&&d.createElement(et.c,{dataLinks:q,canAnnotate:l}))},rt=e=>({wrapper:(0,re.css)({display:"flex",flexDirection:"column",width:"280px"})});var ct=y(74042),ut=y(29165);const dt=e=>e.hover.seriesIdx===2?d.createElement(Ae.H,{data:e.data.exemplars,rowIndex:e.hover.dataIdx,header:"Exemplar"}):d.createElement(mt,{...e}),mt=({data:e,hover:a,showHistogram:t=!1,scopedVars:s,replaceVars:l})=>{const n=a.dataIdx,[r]=(0,d.useState)(()=>e.heatmap?.meta?.type===ae.P.HeatmapCells&&!(0,T.qJ)(e.heatmap)),o=e.heatmap?.fields[0],h=e.heatmap?.fields[1],u=e.heatmap?.fields[2],x=S=>{if(o?.display)return(0,fe.zc)(o.display(S));if(o?.type===pe.fS.time){const U="YYYY-MM-DD HH:mm:ss";return(0,Ge.h4)().getCurrent()?.formatDate(S,U)}return`${S}`},i=o?.values,g=h?.values,O=u?.values,W=(0,T.d8)(e.heatmap),j=h?.display?S=>(0,fe.zc)(h.display(S)):S=>`${S}`,A=n%e.yBucketCount;let L,D,N;if(W.yOrdinalDisplay){const S=e.yLayout===c.kv.le?A-1:A,U=e.yLayout===c.kv.le?A:A+1;L=S<0?W.yMinDisplay:`${W.yOrdinalDisplay[S]}`,D=`${W.yOrdinalDisplay[U]}`,(!W.yOrdinalLabel||Number.isNaN(+W.yOrdinalLabel[0]))&&(N=e.yLayout===c.kv.le?D:L)}else{const S=g?.[A];if(e.yLayout===c.kv.le)if(D=`${S}`,e.yLog){let V=(e.yLog===2?Math.log2:Math.log10)(S)-1/e.yLogSplit;L=`${e.yLog**V}`}else L=`${S-e.yBucketSize}`;else if(L=`${S}`,e.yLog){let V=(e.yLog===2?Math.log2:Math.log10)(S)+1/e.yLogSplit;D=`${e.yLog**V}`}else D=`${S+e.yBucketSize}`}let C,Z;e.xLayout===c.kv.le?(Z=i?.[n],C=Z-e.xBucketSize):(C=i?.[n],Z=C+e.xBucketSize);const k=O?.[n],R=e.heatmap?.fields.filter(S=>!S.config.custom?.hideFrom?.tooltip),E=[],J=new Set;for(const S of R??[]){if(S.config.links&&S.config.links.length>0&&e.heatmap){const V=s.find(P=>P&&P.__dataContext&&P.__dataContext.value.field.name===N);S.getLinks=(0,ve.oB)(e.heatmap,S,V||{},l)}if(S.getLinks){const V=S.values[n],P=S.display?S.display(V):{text:`${V}`,numeric:+V};S.getLinks({calculatedValue:P,valueRowIndex:n}).forEach(z=>{const G=`${z.title}/${z.href}`;J.has(G)||(E.push(z),J.add(G))})}}let F=(0,d.useRef)(null),$=264,K=64,Q=Math.round($*me.Z.pxRatio),Y=Math.round(K*me.Z.pxRatio);if((0,d.useEffect)(()=>{t&&i!=null&&O!=null&&Ye(F,Q,Y,i,O,n,e.yBucketCount)},[n]),r)return d.createElement("div",null,d.createElement(Ae.H,{data:e.heatmap,rowIndex:n}));const q=()=>{if(N)return d.createElement("div",null,"Name: ",N);switch(e.yLayout){case c.kv.unknown:return d.createElement("div",null,j(L))}return d.createElement("div",null,"Bucket: ",j(L)," - ",j(D))};return d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement("div",null,x(C)),e.xLayout!==c.kv.unknown&&d.createElement("div",null,x(Z))),t&&d.createElement("canvas",{width:Q,height:Y,ref:F,style:{width:$+"px",height:K+"px"}}),d.createElement("div",null,q(),d.createElement("div",null,(0,ge.CZ)(u,e.heatmap),": ",e.display(k))),E.length>0&&d.createElement(ct.wc,null,E.map((S,U)=>d.createElement(ut.Qj,{key:U,icon:"external-link-alt",target:S.target,href:S.href,onClick:S.onClick,fill:"text",style:{width:"100%"}},S.title))))};var ft=y(85334),pt=y(64282),ke=y(63764),We=y(43471),Se=y(87500),ht=y(62610),yt=y(65277),Ue=y(36148);function xt(e){const{dataRef:a,theme:t,eventBus:s,onhover:l,onclick:n,isToolTipOpen:r,timeZone:o,getTimeRange:h,cellGap:u,hideLE:x,hideGE:i,yAxisConfig:g,ySizeDivisor:O,sync:W,eventsScope:j="__global_"}=e,A="x";let L="time",D=!0;a.current?.heatmap?.fields[0].type!==pe.fS.time&&(L=a.current?.heatmap?.fields[0].config?.unit??"x",D=!1);const N=devicePixelRatio;let C=a.current?.heatmap?.meta?.type;const Z=t.visualization.getColorByName(e.exemplarColor);let k,R,E=new yt.U(o),J;E.addHook("init",m=>{m.root.querySelectorAll(".u-cursor-pt").forEach(f=>{Object.assign(f.style,{borderRadius:"0",border:"1px solid white",background:"transparent"})}),n&&m.over.addEventListener("mouseup",f=>{m.cursor.drag._x||m.cursor.drag._y||n(f)},!0)}),D&&E.addHook("setData",m=>{let{min:f,max:p}=m.scales.x,b=h().from.valueOf(),w=h().to.valueOf();(f!==b||p!==w)&&queueMicrotask(()=>{m.setScale(A,{min:b,max:w})})}),E.addHook("syncRect",(m,f)=>{J=f});const F={point:{[L]:null},data:a.current?.heatmap},$=new We.es(F);let K;l&&E.addHook("setLegend",m=>{if(m.cursor.idxs!=null)for(let f=0;f<m.cursor.idxs.length;f++){const p=m.cursor.idxs[f];if(p!=null){const{left:b,top:w}=m.cursor;F.rowIndex=p,F.point[L]=m.posToVal(b,A),s.publish($),r?.current||(K&&(clearTimeout(K),K=0),l({seriesIdx:f,dataIdx:p,pageX:J.left+b,pageY:J.top+w}));return}}r?.current||K||(K=setTimeout(()=>{l(null),F.rowIndex=void 0,F.point[L]=null,s.publish($)},100))}),E.addHook("drawClear",m=>{k=k||new Ue.lW(0,0,m.bbox.width,m.bbox.height),k.clear(),m.series.forEach((f,p)=>{p>0&&(f._paths=null)})}),E.setMode(2),E.addScale({scaleKey:A,isTime:D,orientation:c.wN.Horizontal,direction:c.bQ.Right,range:(m,f,p)=>{if(D)return[h().from.valueOf(),h().to.valueOf()];if(a.current?.xLayout===c.kv.le)return[f-a.current?.xBucketSize,p];if(a.current?.xLayout===c.kv.ge)return[f,p+a.current?.xBucketSize];{let b=a.current?.xBucketSize/2;return[f-b,p+b]}}});let Q;if(!D){Q=[];for(let m=0;m<10;m++)Q.push(m*a.current?.xBucketSize)}E.addAxis({scaleKey:A,placement:c.LB.Bottom,incrs:Q,isTime:D,theme:t,timeZone:o});const Y=a.current?.heatmap?.fields[1];if(!Y)return E;const S=Y.config?.custom?.scaleDistribution??{type:c.wf.Linear},U=!!g.reverse,V=C===ae.P.HeatmapCells&&!(0,T.qJ)(a.current?.heatmap),P=S.type!==c.wf.Linear||V,z=(0,T.d8)(a.current?.heatmap).yOrdinalDisplay!=null,G="y_"+(Math.random()+1).toString(36).substring(7);E.addScale({scaleKey:G,isTime:!1,orientation:c.wN.Vertical,direction:U?c.bQ.Down:c.bQ.Up,distribution:P?c.wf.Log:c.wf.Linear,log:S.log??2,range:V?(m,f,p)=>{let b=m.data[1][2][0]/m.data[1][1][0];p*=b;let w,v;if([w,v]=P?me.Z.rangeLog(f,p,S.log??2,!0):[f,p],P&&!z){let H=m.scales[G].log,B=H===2?Math.log2:Math.log10,{min:ee,max:ie}=g;if(ee!=null&&ee>0){let ce=B(ee);w=H**(0,Se.mB)(ce,1)}if(ie!=null&&ie>0){let ce=B(ie);v=H**(0,Se.UO)(ce,1)}}return[w,v]}:(m,f,p)=>{let b=f,w=p,{min:v,max:H}=g;if(P){let B=m.scales[G].log,ee=!1,ie=!1,ce=B===2?Math.log2:Math.log10;if(O!==1){let Ce=ce(f),qe=ce(p);Number.isInteger(Ce)||(b=B**(0,Se.mB)(Ce,1),ee=!0),Number.isInteger(qe)||(w=B**(0,Se.UO)(qe,1),ie=!0)}if(a.current?.yLayout===c.kv.le?ee||(b/=B):a.current?.yLayout===c.kv.ge?ie||(w*=B):(b/=B/2,w*=B/2),!z){if(v!=null&&v>0){let Ce=ce(v);b=B**(0,Se.mB)(Ce,1)}if(H!=null&&H>0){let Ce=ce(H);w=B**(0,Se.UO)(Ce,1)}}}else{let B=a.current?.yBucketSize;B===0&&(B=1),B&&(a.current?.yLayout===c.kv.le?b-=B:a.current?.yLayout===c.kv.ge?w+=B:(b-=B/2,w+=B/2)),z||(b=v??b,w=H??w)}return[b,w]}});const I=Y.display??(0,fe.Cf)("short");E.addAxis({scaleKey:G,show:g.axisPlacement!==c.LB.Hidden,placement:g.axisPlacement||c.LB.Left,size:g.axisWidth||null,label:g.axisLabel,theme:t,formatValue:(m,f)=>(0,fe.zc)(I(m,f)),splits:z?m=>{const f=(0,T.d8)(a.current?.heatmap);if(!f.yOrdinalDisplay)return[0,1];let p=f.yOrdinalDisplay.map((b,w)=>w);switch(a.current?.yLayout){case c.kv.le:p.unshift(-1);break;case c.kv.ge:p.push(p.length);break}if(m.height<60)p=[p[0],p[p.length-1]];else for(;p.length>3&&(m.height-15)/p.length<10;)p=p.filter((b,w)=>w%2===0);return p}:void 0,values:z?(m,f)=>{const p=(0,T.d8)(a.current?.heatmap);return p.yOrdinalDisplay?f.map(b=>b<0?p.yMinDisplay??"":p.yOrdinalDisplay[b]??""):f}:void 0});const X=V?St:vt;E.addSeries({facets:[{scale:A,auto:!0,sorted:1},{scale:G,auto:!0}],pathBuilder:X({each:(m,f,p,b,w,v,H)=>{k.add({x:b-m.bbox.left,y:w-m.bbox.top,w:v,h:H,sidx:f,didx:p})},gap:u,hideLE:x,hideGE:i,xAlign:a.current?.xLayout===c.kv.le?-1:a.current?.xLayout===c.kv.ge?1:0,yAlign:(a.current?.yLayout===c.kv.le?-1:a.current?.yLayout===c.kv.ge?1:0)*(U?-1:1),ySizeDivisor:O,disp:{fill:{values:(m,f)=>a.current?.heatmapColors?.values,index:a.current?.heatmapColors?.palette}}}),theme:t,scaleKey:""}),E.addSeries({facets:[{scale:A,auto:!0,sorted:1},{scale:G,auto:!0}],pathBuilder:gt({each:(m,f,p,b,w,v,H)=>{k.add({x:b-m.bbox.left,y:w-m.bbox.top,w:v,h:H,sidx:f,didx:p})}},Z),theme:t,scaleKey:""});const ne={drag:{x:!0,y:!1,setScale:!1},dataIdx:(m,f)=>{if(f===1){R=null;let p=m.cursor.left*N,b=m.cursor.top*N;k.get(p,b,1,1,w=>{(0,Ue.Pn)(p,b,w.x,w.y,w.x+w.w,w.y+w.h)&&(R=w)})}return R&&f===R.sidx?R.didx:null},points:{fill:"rgba(255,255,255, 0.3)",bbox:(m,f)=>{let p=R&&f===R.sidx;return{left:p?R.x/N:-10,top:p?R.y/N:-10,width:p?R.w/N:0,height:p?R.h/N:0}}}};return W&&W()!==ht.m.Off&&(ne.sync={key:j,scales:[A,G],filters:{pub:(m,f,p,b,w,v,H)=>(p<0?(F.point[L]=null,s.publish(new We.xH)):(F.point[L]=f.posToVal(p,A),s.publish($)),!0)}},E.setSync()),E.setCursor(ne),E}const Ze=4;function vt(e){const{disp:a,each:t,gap:s=1,hideLE:l=-1/0,hideGE:n=1/0,xAlign:r=1,yAlign:o=1,ySizeDivisor:h=1}=e,u=devicePixelRatio,x=s>=Ze?Math.round:g=>g,i=Math.round(s*u);return(g,O)=>(me.Z.orient(g,O,(W,j,A,L,D,N,C,Z,k,R,E,J,F,$,K)=>{let Q=g.data[O];const Y=Q[0],q=Q[1],S=Q[2],U=Y.length;let V=a.fill.values(g,O),P=a.fill.index??[...new Set(V)],z=P.map(H=>new Path2D),G=U-q.lastIndexOf(q[0]),I=U/G,X=q[1]-q[0]||D.max-D.min,ne=Y[G]-Y[0],m,f;L.distr===3?m=Math.abs(N(Y[0]*L.log,L,R,Z)-N(Y[0],L,R,Z)):m=Math.abs(N(ne,L,R,Z)-N(0,L,R,Z)),D.distr===3?f=Math.abs(C(q[0]*D.log,D,E,k)-C(q[0],D,E,k))/h:f=Math.abs(C(X,D,E,k)-C(0,D,E,k))/h,m=Math.max(1,x(m-i)),f=Math.max(1,x(f-i));let p=r===-1?-m:r===0?-m/2:0,b=o===1?-f:o===0?-f/2:0,w=q.slice(0,G).map(H=>x(C(H,D,E,k)+b)),v=Array.from({length:I},(H,B)=>x(N(Y[B*G],L,R,Z)+p));for(let H=0;H<U;H++)if(S[H]>l&&S[H]<n){let B=v[~~(H/G)],ee=w[H%G],ie=z[V[H]];$(ie,B,ee,m,f),t(g,1,H,B,ee,m,f)}return g.ctx.save(),g.ctx.rect(g.bbox.left,g.bbox.top,g.bbox.width,g.bbox.height),g.ctx.clip(),z.forEach((H,B)=>{g.ctx.fillStyle=P[B],g.ctx.fill(H)}),g.ctx.restore(),null}),null)}function gt(e,a){return(t,s)=>(me.Z.orient(t,s,(l,n,r,o,h,u,x,i,g,O,W,j,A,L,D)=>{let N=new Path2D,C=[N],Z=[a??"rgba(255,0,255,0.7)"];for(let k=0;k<n.length;k++){let R=r[k];if(!(h.distr===3&&h.log===2)){R-=.5;let Q=Math.round(Math.random())*2-1;R+=Q*.5*Math.random()}let J=u(n[k],o,O,i),F=x(R,h,W,g),$=8,K=8;L(N,J-$/2,F-K/2,$,K),e.each(t,s,k,J-$/2,F-K/2,$,K)}t.ctx.save(),t.ctx.rect(t.bbox.left,t.bbox.top,t.bbox.width,t.bbox.height),t.ctx.clip(),C.forEach((k,R)=>{t.ctx.fillStyle=Z[R],t.ctx.fill(k)}),t.ctx.restore()}),null)}function St(e){const{disp:a,each:t,gap:s=1,hideLE:l=-1/0,hideGE:n=1/0}=e,r=devicePixelRatio,o=s>=Ze?Math.round:u=>u,h=Math.round(s*r);return(u,x)=>(me.Z.orient(u,x,(i,g,O,W,j,A,L,D,N,C,Z,k,R,E,J)=>{let F=u.data[x];const $=F[0],K=F[1],Q=F[2],Y=F[3],q=$.length;let S=a.fill.values(u,x),U=a.fill.index??[...new Set(S)],V=U.map(I=>new Path2D),P=new Map,z=new Map;for(let I=0;I<$.length;I++){let X=$[I],ne=K[I],m=Q[I];P.has(X)||P.set(X,o(A(X,W,C,D))),z.has(ne)||z.set(ne,o(L(ne,j,Z,N))),z.has(m)||z.set(m,o(L(m,j,Z,N)))}let G=P.get($.find(I=>I!==$[0]))-P.get($[0]);for(let I=0;I<q;I++){if(Y[I]<=l||Y[I]>=n)continue;let X=$[I],ne=K[I],m=Q[I],f=P.get(X),p=z.get(ne),b=z.get(m),w=G,v=p-b;w=Math.max(1,w-h),v=Math.max(1,v-h);let H=f-h/2-w,B=b+h/2,ee=V[S[I]];E(ee,H,B,w,v),t(u,1,I,H,B,w,v)}u.ctx.save(),u.ctx.rect(u.bbox.left,u.bbox.top,u.bbox.width,u.bbox.height),u.ctx.clip(),V.forEach((I,X)=>{u.ctx.fillStyle=U[X],u.ctx.fill(I)}),u.ctx.restore()}),null)}const Ke=(e,a,t,s=-1/0,l=1/0)=>{if(a==null){a=1/0;for(let n=0;n<e.length;n++)e[n]>s&&e[n]<l&&(a=Math.min(a,e[n]))}if(t==null){t=-1/0;for(let n=0;n<e.length;n++)e[n]>s&&e[n]<l&&(t=Math.max(t,e[n]))}return[a,t]},je=(e,a,t,s)=>{let l=s-t||1,n=a.length,r=Array(e.length);for(let o=0;o<e.length;o++)r[o]=e[o]<t?0:e[o]>s?n-1:Math.min(n-1,Math.floor(n*(e[o]-t)/l));return r};function $e(e,a,t,s,l,n,r){if(!e?.length)return{};(0,ge.UY)(e);const o=a?.find(u=>u.name==="exemplar");if(n&&o?.fields.forEach((u,x)=>{o.fields[x].getLinks=n(o,u)}),t.calculate){if(ue.config.featureToggles.transformationsVariableSupport){const u={...t,calculation:{xBuckets:{...t.calculation?.xBuckets},yBuckets:{...t.calculation?.yBuckets}}};return u.calculation?.xBuckets?.value&&r!==void 0&&(u.calculation.xBuckets.value=r(u.calculation.xBuckets.value)),u.calculation?.yBuckets?.value&&r!==void 0&&(u.calculation.yBuckets.value=r(u.calculation.yBuckets.value)),He((0,T.xf)(e,u.calculation??{}),o,u,s,l)}return He((0,T.xf)(e,t.calculation??{}),o,t,s,l)}let h;for(const u of e)switch(u.meta?.type){case ae.P.HeatmapCells:return(0,T.qJ)(u)?He(u,o,t,s,l):Ct(u,o,t,s,l);case ae.P.HeatmapRows:h=u}if(!h)if(e.length>1)e.every(x=>!Number.isNaN((0,ke.Ky)(x.fields[1].state?.displayName)))&&e.sort(ke.nf),h=[(0,ft._9)({frames:e})][0];else{let u=e[0],x=u.fields.filter(g=>g.type===pe.fS.number);x.every(g=>!Number.isNaN((0,ke.Ky)(g.state?.displayName)))?(x.sort((g,O)=>(0,ke.Ky)(g.state?.displayName)-(0,ke.Ky)(O.state?.displayName)),h={...u,fields:[u.fields.find(g=>g.type===pe.fS.time),...x]}):h=u}return He((0,T.Cj)({unit:t.yAxis?.unit,decimals:t.yAxis?.decimals,...t.rowsFrame,frame:h}),o,t,s,l)}const Ct=(e,a,t,s,l)=>{if(e.meta?.type!==ae.P.HeatmapCells||(0,T.qJ)(e))return{warning:"Expected sparse heatmap format",heatmap:e};Ve(e.fields[1],t.yAxis,l);const n=e.fields[3],r=Ve(n,t.cellValues,l);let[o,h]=Ke(n.values,t.color.min,t.color.max,t.filterValues?.le,t.filterValues?.ge);return{heatmap:e,heatmapColors:{palette:s,values:je(n.values,s,o,h),minValue:o,maxValue:h},exemplars:a,display:u=>(0,fe.zc)(r(u))}},He=(e,a,t,s,l)=>{if(e.meta?.type!==ae.P.HeatmapCells)return{warning:"Expected heatmap scanlines format",heatmap:e};if(e.fields.length<2||e.length<2)return{heatmap:e};const n=(0,T.d8)(e);let r,o,h;for(const k of e.fields)switch(k.name){case"y":o=k.name;case"yMin":case"yMax":{o||(o=k.name),n.yOrdinalDisplay==null&&Ve(k,t.yAxis,l);break}case"x":case"xMin":case"xMax":r=k.name;break;default:k.type===pe.fS.number&&!h&&(h=k)}if(!o)return{warning:"Missing Y field",heatmap:e};if(!o)return{warning:"Missing X field",heatmap:e};if(!h)return{warning:"Missing value field",heatmap:e};const u=Ve(h,t.cellValues,l),x=e.fields[0].values,i=e.fields[1].values,g=x.length;let O=g-i.lastIndexOf(i[0]),W=g/O,j=i[1]-i[0],A=x[O]-x[0],[L,D]=Ke(h.values,t.color.min,t.color.max,t.filterValues?.le,t.filterValues?.ge),N=t.calculation?.xBuckets,C=t.calculation?.yBuckets;return{heatmap:e,heatmapColors:{palette:s,values:je(h.values,s,L,D),minValue:L,maxValue:D},exemplars:a?.length?a:void 0,xBucketSize:A,yBucketSize:j,xBucketCount:W,yBucketCount:O,yLog:C?.scale?.log??0,xLog:N?.scale?.log??0,xLogSplit:N?.scale?.log?+(N?.value??"1"):1,yLogSplit:C?.scale?.log?+(C?.value??"1"):1,xLayout:r==="xMax"?c.kv.le:r==="xMin"?c.kv.ge:c.kv.unknown,yLayout:o==="yMax"?c.kv.le:o==="yMin"?c.kv.ge:c.kv.unknown,display:k=>(0,fe.zc)(u(k))}};function Ve(e,a,t){if(a?.unit?.length||a?.decimals!=null){const{unit:s,decimals:l}=a;e.display=void 0,e.config={...e.config},s?.length&&(e.config.unit=s),l!=null&&(e.config.decimals=l)}return e.display||(e.display=(0,pt.U)({field:e,theme:t})),e.display}var Je=y(33409),kt=y(79849),Qe=y(19737),M=y(43454);const Me=[{name:"BrBG",invert:"always"},{name:"PiYG",invert:"always"},{name:"PRGn",invert:"always"},{name:"PuOr",invert:"always"},{name:"RdBu",invert:"always"},{name:"RdGy",invert:"always"},{name:"RdYlBu",invert:"always"},{name:"RdYlGn",invert:"always"},{name:"Spectral",invert:"always"},{name:"Blues",invert:"dark"},{name:"Greens",invert:"dark"},{name:"Greys",invert:"dark"},{name:"Oranges",invert:"dark"},{name:"Purples",invert:"dark"},{name:"Reds",invert:"dark"},{name:"Turbo",invert:"light"},{name:"Cividis",invert:"light"},{name:"Viridis",invert:"light"},{name:"Magma",invert:"light"},{name:"Inferno",invert:"light"},{name:"Plasma",invert:"light"},{name:"Warm",invert:"light"},{name:"Cool",invert:"light"},{name:"Cubehelix",invert:"light",name2:"CubehelixDefault"},{name:"BuGn",invert:"dark"},{name:"BuPu",invert:"dark"},{name:"GnBu",invert:"dark"},{name:"OrRd",invert:"dark"},{name:"PuBuGn",invert:"dark"},{name:"PuBu",invert:"dark"},{name:"PuRd",invert:"dark"},{name:"RdPu",invert:"dark"},{name:"YlGnBu",invert:"dark"},{name:"YlGn",invert:"dark"},{name:"YlOrBr",invert:"dark"},{name:"YlOrRd",invert:"dark"},{name:"Rainbow",invert:"always"},{name:"Sinebow",invert:"always"}],Mt=Me.find(e=>e.name==="Spectral");function Pe(e,a){const t={...M.vC.color,...e},s=[],l=(t.steps??128)-1;if(e.mode===M.S_.Opacity){const n=(0,Qe.Z)(a.visualization.getColorByName(e.fill)).toPercentageRgb(),r=t.scale===M.YG.Exponential?Je.scalePow().exponent(t.exponent).domain([0,1]).range([0,1]):Je.scaleLinear().domain([0,1]).range([0,1]);for(let o=0;o<=l;o++)n.a=r(o/l),s.push((0,Qe.Z)(n).toString("hex8"))}else{const n=Me.find(h=>h.name===t.scheme)??Mt;let r="interpolate"+(n.name2??n.name);const o=kt[r];for(let h=0;h<=l;h++){let u=o(h/l),x=u.indexOf("rgb")===0?"#"+[...u.matchAll(/\d+/g)].map(i=>(+i[0]).toString(16).padStart(2,"0")).join(""):u;s.push(x)}(n.invert==="always"||n.invert==="dark"&&a.isDark||n.invert==="light"&&a.isLight)&&s.reverse(),e.reverse&&s.reverse()}return s}const wt=({data:e,id:a,timeRange:t,timeZone:s,width:l,height:n,options:r,fieldConfig:o,eventBus:h,onChangeTimeRange:u,replaceVariables:x})=>{const i=(0,oe.l4)(),g=(0,oe.wW)(Bt),{sync:O,canAddAnnotations:W}=(0,ye.R9)(),j=!!(W&&W());let A=[];for(const V of e.series)for(const P of V.fields)P.state?.scopedVars&&A.push(P.state.scopedVars);let L=(0,d.useRef)(t);L.current=t;const D=(0,d.useCallback)((V,P)=>(0,ve.oB)(V,P,P.state?.scopedVars??{},x),[x]),N=(0,d.useMemo)(()=>Pe(r.color,i),[r.color,i]),C=(0,d.useMemo)(()=>{try{return $e(e.series,e.annotations,r,N,i,D,x)}catch(V){return{warning:`${V}`}}},[e.series,e.annotations,r,N,i,D,x]),Z=(0,d.useMemo)(()=>{let V=[],P=[];const z=(0,T.d8)(C.heatmap);return C.exemplars?.length&&(V=C.exemplars?.fields[0].values,z.yMatchWithLabel&&z.yOrdinalDisplay!=null?P=(C.exemplars?.fields.find(X=>X.name===z.yMatchWithLabel).values).map(X=>z.yOrdinalLabel?.indexOf(X)):P=C.exemplars?.fields[1].values),[null,C.heatmap?.fields.map(G=>G.values),[V,P]]},[C.heatmap,C.exemplars]),[k,R]=(0,d.useState)(void 0),[E,J]=(0,d.useState)(!1),F=(0,d.useRef)(!1),$=()=>{F.current=!1,J(!1),Q(null)},K=()=>{F.current=!F.current,J(F.current)},Q=(0,d.useCallback)(V=>{R(V??void 0)},[r,e.structureRev]),Y=(0,d.useRef)(C);Y.current=C;const q=(0,d.useMemo)(()=>{const V=Y.current?.heatmap?.fields[1].config?.custom?.scaleDistribution;return xt({dataRef:Y,theme:i,eventBus:h,onhover:Q,onclick:r.tooltip.show?K:null,isToolTipOpen:F,timeZone:s,getTimeRange:()=>L.current,sync:O,cellGap:r.cellGap,hideLE:r.filterValues?.le,hideGE:r.filterValues?.ge,exemplarColor:r.exemplars?.color??"rgba(255,0,255,0.7)",yAxisConfig:r.yAxis,ySizeDivisor:V?.type===c.wf.Log?+(r.calculation?.yBuckets?.value||1):1})},[r,s,e.structureRev]),S=()=>{if(!C.heatmap||!r.legend.show)return null;let z=Y.current?.heatmap?.meta?.type===ae.P.HeatmapCells&&!(0,T.qJ)(Y.current?.heatmap)?3:2;const G=C.heatmap.fields[z];let I;return k&&C.heatmap.fields&&k.seriesIdx===1&&(I=G.values[k.dataIdx]),d.createElement(de.AY.Legend,{placement:"bottom",maxHeight:"20%"},d.createElement("div",{className:g.colorScaleWrapper},d.createElement(le.q,{hoverValue:I,colorPalette:N,min:Y.current.heatmapColors?.minValue,max:Y.current.heatmapColors?.maxValue,display:C.display})))};if(C.warning||!C.heatmap)return d.createElement(he.Z,{panelId:a,fieldConfig:o,data:e,needsNumberField:!0,message:C.warning});const U=ue.config.featureToggles.newVizTooltips??!1;return d.createElement(d.Fragment,null,d.createElement(de.AY,{width:l,height:n,legend:S()},(V,P)=>d.createElement(Ee.N,{config:q,data:Z,width:V,height:P},!U&&d.createElement(Fe.R,{config:q,onZoom:u}),U&&r.tooltip.show&&d.createElement(se.x,{config:q,hoverMode:se.c.xyOne,queryZoom:u,render:(z,G,I,X,ne)=>d.createElement(st,{dataIdxs:G,seriesIdx:I,dataRef:Y,isPinned:X,dismiss:ne,showHistogram:r.tooltip.yHistogram,showColorScale:r.tooltip.showColorScale,canAnnotate:j,panelData:e,replaceVars:x,scopedVars:A})}))),!U&&d.createElement(Ie.h_,null,k&&r.tooltip.show&&d.createElement(Re.S,{position:{x:k.pageX,y:k.pageY},offset:{x:10,y:10},allowPointerEvents:F.current},E&&d.createElement(be.o,{onClick:$}),d.createElement(dt,{timeRange:t,data:C,hover:k,showHistogram:r.tooltip.yHistogram,replaceVars:x,scopedVars:A}))))},Bt=e=>({colorScaleWrapper:(0,re.css)({marginLeft:"25px",padding:"10px 0",maxWidth:"300px"})}),Lt=e=>Object.keys(e.options).length===0?Xe(e,"heatmap",{angular:e},e.fieldConfig):e.options,Xe=(e,a,t,s)=>{if(a==="heatmap"&&t.angular){const{fieldConfig:l,options:n}=Et({...t.angular,fieldConfig:s});return e.fieldConfig=l,n}if(a==="heatmap-new"){const{bucketFrame:l,...n}=e.options;return l?{...n,rowsFrame:l}:e.options}return{}};function Et(e){const a={defaults:{},overrides:[]},t=e.dataFormat!=="tsbuckets",s={...M.vC.calculation},l={logBase:1,...e.yAxis};t&&(e.xBucketSize?s.xBuckets={mode:c.kW.Size,value:`${e.xBucketSize}`}:e.xBucketNumber&&(s.xBuckets={mode:c.kW.Count,value:`${e.xBucketNumber}`}),e.yBucketSize?s.yBuckets={mode:c.kW.Size,value:`${e.yBucketSize}`}:e.xBucketNumber&&(s.yBuckets={mode:c.kW.Count,value:`${e.yBucketNumber}`}),l.logBase>1&&(s.yBuckets={mode:c.kW.Count,value:+l.splitFactor>0?`${l.splitFactor}`:void 0,scale:{type:c.wf.Log,log:l.logBase}}));const n=De(e.cards?.cardPadding,2),r={calculate:t,calculation:s,color:{...M.vC.color,steps:128},cellGap:n||1,cellRadius:De(e.cards?.cardRound),yAxis:{axisPlacement:l.show===!1?c.LB.Hidden:c.LB.Left,reverse:!!e.reverseYBuckets,axisWidth:De(l.width),min:l.min,max:l.max,unit:l.format,decimals:l.decimals},cellValues:{decimals:De(e.tooltipDecimals)},rowsFrame:{layout:bt(e.yBucketBound)},legend:{show:!!e.legend?.show},showValue:c.Jp.Never,tooltip:{show:!!e.tooltip?.show,yHistogram:!!e.tooltip?.showHistogram},exemplars:{...M.vC.exemplars}};e.hideZeroBuckets&&(r.filterValues={...M.vC.filterValues});const o=e.color??{};switch(o?.mode){case"spectrum":{r.color.mode=M.S_.Scheme;const h=o.colorScheme;let u=Me.find(x=>x.name===h);u||(u=Me.find(x=>h.indexOf(x.name)>=0)),r.color.scheme=u?u.name:M.vC.color.scheme;break}case"opacity":{r.color.mode=M.S_.Opacity,r.color.scale=o.scale;break}}return r.color.fill=o.cardColor,r.color.min=o.min,r.color.max=o.max,typeof o.min=="number"&&typeof o.max=="number"&&o.min>o.max&&(r.color.min=o.max,r.color.max=o.min,r.color.reverse=!0),{fieldConfig:a,options:r}}function bt(e){switch(e){case"upper":return c.kv.ge;case"lower":return c.kv.le;case"middle":return c.kv.unknown}return c.kv.auto}function De(e,a){if(e==null||e==="")return a;const t=+e;return isNaN(t)?a:t}class Ht{getSuggestionsForData(a){const{dataSummary:t}=a;if(!a.data?.series||!t.hasData||t.timeFieldCount<1||t.numberFieldCount<2||t.numberFieldCount>10)return;const s=Pe(M.vC.color,ue.config.theme2),l=$e(a.data.series,void 0,M.vC,s,ue.config.theme2);!l||l.warning||a.getListAppender({name:"",pluginId:"heatmap",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}})}}const Vt=new te.c(wt).useFieldConfig({disableStandardOptions:Object.values(Be.qb).filter(e=>e!==Be.qb.Links),useCustomConfig:e=>{e.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Y axis scale",category:["Heatmap"],editor:Le.Y,override:Le.Y,defaultValue:{type:c.wf.Linear},shouldApply:a=>a.type===pe.fS.number,process:Ne.kG,hideFromDefaults:!0}),(0,_.B)(e)}}).setPanelChangeHandler(Xe).setMigrationHandler(Lt).setPanelOptions((e,a)=>{const t=a.options??M.vC;let s=!1;if(a.data.length>0)try{const n=Pe(t.color,ue.config.theme2),r=$e(a.data,void 0,t,n,ue.config.theme2,void 0,a.replaceVariables);s=(0,T.d8)(r.heatmap).yOrdinalDisplay!=null}catch{}let l=["Heatmap"];e.addRadio({path:"calculate",name:"Calculate from data",defaultValue:M.vC.calculate,category:l,settings:{options:[{label:"Yes",value:!0},{label:"No",value:!1}]}}),t.calculate&&(0,xe.J)("calculation.",e,t.calculation,l),l=["Y Axis"],e.addRadio({path:"yAxis.axisPlacement",name:"Placement",defaultValue:M.vC.yAxis.axisPlacement??c.LB.Left,category:l,settings:{options:[{label:"Left",value:c.LB.Left},{label:"Right",value:c.LB.Right},{label:"Hidden",value:c.LB.Hidden}]}}).addUnitPicker({category:l,path:"yAxis.unit",name:"Unit",defaultValue:void 0,settings:{isClearable:!0}}).addNumberInput({category:l,path:"yAxis.decimals",name:"Decimals",settings:{placeholder:"Auto"}}),s||e.addNumberInput({path:"yAxis.min",name:"Min value",settings:{placeholder:"Auto"},category:l}).addTextInput({path:"yAxis.max",name:"Max value",settings:{placeholder:"Auto"},category:l}),e.addNumberInput({path:"yAxis.axisWidth",name:"Axis width",defaultValue:M.vC.yAxis.axisWidth,settings:{placeholder:"Auto",min:5},category:l}).addTextInput({path:"yAxis.axisLabel",name:"Axis label",defaultValue:M.vC.yAxis.axisLabel,settings:{placeholder:"Auto"},category:l}),t.calculate||e.addRadio({path:"rowsFrame.layout",name:"Tick alignment",defaultValue:M.vC.rowsFrame?.layout??c.kv.auto,category:l,settings:{options:[{label:"Auto",value:c.kv.auto},{label:"Top (LE)",value:c.kv.le},{label:"Middle",value:c.kv.unknown},{label:"Bottom (GE)",value:c.kv.ge}]}}),e.addBooleanSwitch({path:"yAxis.reverse",name:"Reverse",defaultValue:M.vC.yAxis.reverse===!0,category:l}),l=["Colors"],e.addRadio({path:"color.mode",name:"Mode",defaultValue:M.vC.color.mode,category:l,settings:{options:[{label:"Scheme",value:M.S_.Scheme},{label:"Opacity",value:M.S_.Opacity}]}}),e.addColorPicker({path:"color.fill",name:"Color",defaultValue:M.vC.color.fill,category:l,showIf:n=>n.color.mode===M.S_.Opacity}),e.addRadio({path:"color.scale",name:"Scale",defaultValue:M.vC.color.scale,category:l,settings:{options:[{label:"Exponential",value:M.YG.Exponential},{label:"Linear",value:M.YG.Linear}]},showIf:n=>n.color.mode===M.S_.Opacity}),e.addSliderInput({path:"color.exponent",name:"Exponent",defaultValue:M.vC.color.exponent,category:l,settings:{min:.1,max:2,step:.1},showIf:n=>n.color.mode===M.S_.Opacity&&n.color.scale===M.YG.Exponential}),e.addSelect({path:"color.scheme",name:"Scheme",description:"",defaultValue:M.vC.color.scheme,category:l,settings:{options:Me.map(n=>({value:n.name,label:n.name}))},showIf:n=>n.color.mode!==M.S_.Opacity}),e.addSliderInput({path:"color.steps",name:"Steps",defaultValue:M.vC.color.steps,category:l,settings:{min:2,max:128,step:1}}).addBooleanSwitch({path:"color.reverse",name:"Reverse",defaultValue:M.vC.color.reverse,category:l}).addCustomEditor({id:"__scale__",path:"__scale__",name:"",category:l,editor:()=>{const n=Pe(t.color,ue.config.theme2);return d.createElement("div",null,d.createElement(le.q,{colorPalette:n,min:1,max:100}))}}),e.addNumberInput({path:"color.min",name:"Start color scale from value",defaultValue:M.vC.color.min,settings:{placeholder:"Auto (min)"},category:l}).addNumberInput({path:"color.max",name:"End color scale at value",defaultValue:M.vC.color.max,settings:{placeholder:"Auto (max)"},category:l}),l=["Cell display"],t.calculate||e.addTextInput({path:"rowsFrame.value",name:"Value name",defaultValue:M.vC.rowsFrame?.value,settings:{placeholder:"Value"},category:l}),e.addUnitPicker({category:l,path:"cellValues.unit",name:"Unit",defaultValue:void 0,settings:{isClearable:!0}}).addNumberInput({category:l,path:"cellValues.decimals",name:"Decimals",settings:{placeholder:"Auto"}}),e.addSliderInput({name:"Cell gap",path:"cellGap",defaultValue:M.vC.cellGap,category:l,settings:{min:0,max:25}}).addNumberInput({path:"filterValues.le",name:"Hide cells with values <=",defaultValue:M.vC.filterValues?.le,settings:{placeholder:"None"},category:l}).addNumberInput({path:"filterValues.ge",name:"Hide cells with values >=",defaultValue:M.vC.filterValues?.ge,settings:{placeholder:"None"},category:l}),l=["Tooltip"],e.addBooleanSwitch({path:"tooltip.show",name:"Show tooltip",defaultValue:M.vC.tooltip.show,category:l}),e.addBooleanSwitch({path:"tooltip.yHistogram",name:"Show histogram (Y axis)",defaultValue:M.vC.tooltip.yHistogram,category:l,showIf:n=>n.tooltip.show}),e.addBooleanSwitch({path:"tooltip.showColorScale",name:"Show color scale",defaultValue:M.vC.tooltip.showColorScale,category:l,showIf:n=>n.tooltip.show&&ue.config.featureToggles.newVizTooltips}),l=["Legend"],e.addBooleanSwitch({path:"legend.show",name:"Show legend",defaultValue:M.vC.legend.show,category:l}),l=["Exemplars"],e.addColorPicker({path:"exemplars.color",name:"Color",defaultValue:M.vC.exemplars.color,category:l})}).setSuggestionsSupplier(new Ht)}}]);

//# sourceMappingURL=heatmapPanel.00f5da827d9179f9543c.js.map