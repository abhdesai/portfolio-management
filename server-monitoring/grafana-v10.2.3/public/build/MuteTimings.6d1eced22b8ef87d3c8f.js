"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[9355,9865],{29431:(J,N,t)=>{t.r(N),t.d(N,{default:()=>ya,useMuteTimingNavData:()=>ia});var a=t(85960),P=t(30694),E=t(49199),f=t(763),R=t(39512),g=t(66681),u=t(10476),K=t(47257),p=t(79468),C=t(51637),v=t(20519),T=t(24956),S=t(29165),j=t(95162),W=t(70335),F=t(84954),V=t(5970),x=t(98724),U=t(77294),I=t(56375);const m=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],b=["january","february","march","april","may","june","july","august","september","october","november","december"],A={times:[{start_time:"",end_time:""}],weekdays:"",days_of_month:"",months:"",years:"",location:""},O=(e,r,i)=>e?e.split(",").map(o=>o.trim()).every(o=>o.split(":").every(r))||i:!0,L=e=>e?e.split(",").map(r=>r.trim()):void 0,Y=e=>{const r=e.time_intervals.map(({times:i,weekdays:o,days_of_month:d,months:h,years:B,location:s})=>{const n={times:i.filter(({start_time:c,end_time:l})=>!!c&&!!l),weekdays:L(o)?.map(c=>c.toLowerCase()),days_of_month:L(d),months:L(h),years:L(B),location:s||void 0};return(0,I.omitBy)(n,I.isUndefined)});return{name:e.name,time_intervals:r}};var k=t(84237),X=t(13086),Q=t(97666),ra=t(81368),q=t(84933),na=t(75064),Z=t(77542);const aa="Times must be between 00:00 and 24:00 UTC",oa=({intervalIndex:e})=>{const r=(0,K.wW)(sa),{register:i,formState:o,getValues:d}=(0,u.Gc)(),{fields:h,append:B,remove:s}=(0,u.Dq)({name:`time_intervals.${e}.times`}),n=o.errors.time_intervals?.[e],c=n?.times?.some(l=>l?.start_time||l?.end_time)??!1;return a.createElement("div",null,a.createElement(v.g,{className:r.field,label:"Time range",description:"The time inclusive of the start and exclusive of the end time (in UTC if no location has been selected, otherwise local time)",invalid:c},a.createElement(a.Fragment,null,h.map((l,y)=>{const M=n?.times?.[y],_=`time_intervals.${e}.times.${y}.start_time`,G=`time_intervals.${e}.times.${y}.end_time`,$=()=>{const D=d(_),w=d(G);return[D,w]};return a.createElement("div",{className:r.timeRange,key:l.id},a.createElement(ra.Z,null,a.createElement(q._,{label:"Start time",invalid:!!M?.start_time,error:M?.start_time?.message},a.createElement(T.I,{...i(_,{validate:D=>{if(!(0,Z.ot)(D))return aa;const[H,z]=$();if(!(0,Z.kO)(H,z))return"Start time must be before end time"}}),className:r.timeRangeInput,maxLength:5,suffix:a.createElement(Q.J,{name:"clock-nine"}),defaultValue:l.start_time,placeholder:"HH:mm","data-testid":"mute-timing-starts-at"})),a.createElement(q._,{label:"End time",invalid:!!M?.end_time,error:M?.end_time?.message},a.createElement(T.I,{...i(`time_intervals.${e}.times.${y}.end_time`,{validate:D=>{if(!(0,Z.ot)(D))return aa;const[H,z]=$();if(!(0,Z.kO)(H,z))return"End time must be after start time"}}),className:r.timeRangeInput,maxLength:5,suffix:a.createElement(Q.J,{name:"clock-nine"}),defaultValue:l.end_time,placeholder:"HH:mm","data-testid":"mute-timing-ends-at"})),a.createElement(na.h,{className:r.deleteTimeRange,title:"Remove",name:"trash-alt",onClick:D=>{D.preventDefault(),s(y)},tooltip:"Remove time range"})))}))),a.createElement(S.zx,{className:r.addTimeRange,variant:"secondary",type:"button",icon:"plus",onClick:()=>B({start_time:"",end_time:""})},"Add another time range"))},sa=e=>({field:(0,g.css)`
    margin-bottom: 0;
  `,timeRange:(0,g.css)`
    margin-bottom: ${e.spacing(1)};
  `,timeRangeInput:(0,g.css)`
    width: 90px;
  `,deleteTimeRange:(0,g.css)`
    margin: ${e.spacing(1)} 0 0 ${e.spacing(.5)};
  `,addTimeRange:(0,g.css)`
    margin-bottom: ${e.spacing(2)};
  `});var ca=t(27436);const ma=["Africa/Abidjan","Africa/Accra","Africa/Addis_Ababa","Africa/Algiers","Africa/Asmara","Africa/Bamako","Africa/Bangui","Africa/Banjul","Africa/Bissau","Africa/Blantyre","Africa/Brazzaville","Africa/Bujumbura","Africa/Cairo","Africa/Casablanca","Africa/Ceuta","Africa/Conakry","Africa/Dakar","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Douala","Africa/El_Aaiun","Africa/Freetown","Africa/Gaborone","Africa/Harare","Africa/Johannesburg","Africa/Juba","Africa/Kampala","Africa/Khartoum","Africa/Kigali","Africa/Kinshasa","Africa/Lagos","Africa/Libreville","Africa/Lome","Africa/Luanda","Africa/Lubumbashi","Africa/Lusaka","Africa/Malabo","Africa/Maputo","Africa/Maseru","Africa/Mbabane","Africa/Mogadishu","Africa/Monrovia","Africa/Nairobi","Africa/Ndjamena","Africa/Niamey","Africa/Nouakchott","Africa/Ouagadougou","Africa/Porto-Novo","Africa/Sao_Tome","Africa/Tripoli","Africa/Tunis","Africa/Windhoek","America/Adak","America/Anchorage","America/Anguilla","America/Antigua","America/Araguaina","America/Argentina/Buenos_Aires","America/Argentina/Catamarca","America/Argentina/Cordoba","America/Argentina/Jujuy","America/Argentina/La_Rioja","America/Argentina/Mendoza","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Aruba","America/Asuncion","America/Atikokan","America/Bahia","America/Bahia_Banderas","America/Barbados","America/Belem","America/Belize","America/Blanc-Sablon","America/Boa_Vista","America/Bogota","America/Boise","America/Cambridge_Bay","America/Campo_Grande","America/Cancun","America/Caracas","America/Cayenne","America/Cayman","America/Chicago","America/Chihuahua","America/Ciudad_Juarez","America/Costa_Rica","America/Creston","America/Cuiaba","America/Curacao","America/Danmarkshavn","America/Dawson","America/Dawson_Creek","America/Denver","America/Detroit","America/Dominica","America/Edmonton","America/Eirunepe","America/El_Salvador","America/Fort_Nelson","America/Fortaleza","America/Glace_Bay","America/Godthab","America/Goose_Bay","America/Grand_Turk","America/Grenada","America/Guadeloupe","America/Guatemala","America/Guayaquil","America/Guyana","America/Halifax","America/Havana","America/Hermosillo","America/Indiana/Indianapolis","America/Indiana/Knox","America/Indiana/Marengo","America/Indiana/Petersburg","America/Indiana/Tell_City","America/Indiana/Vevay","America/Indiana/Vincennes","America/Indiana/Winamac","America/Inuvik","America/Iqaluit","America/Jamaica","America/Juneau","America/Kentucky/Louisville","America/Kentucky/Monticello","America/Kralendijk","America/La_Paz","America/Lima","America/Los_Angeles","America/Lower_Princes","America/Maceio","America/Managua","America/Manaus","America/Marigot","America/Martinique","America/Matamoros","America/Mazatlan","America/Menominee","America/Merida","America/Metlakatla","America/Mexico_City","America/Miquelon","America/Moncton","America/Monterrey","America/Montevideo","America/Montreal","America/Montserrat","America/Nassau","America/New_York","America/Nipigon","America/Nome","America/Noronha","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Nuuk","America/Ojinaga","America/Panama","America/Pangnirtung","America/Paramaribo","America/Phoenix","America/Port-au-Prince","America/Port_of_Spain","America/Porto_Velho","America/Puerto_Rico","America/Punta_Arenas","America/Rainy_River","America/Rankin_Inlet","America/Recife","America/Regina","America/Resolute","America/Rio_Branco","America/Santa_Isabel","America/Santarem","America/Santiago","America/Santo_Domingo","America/Sao_Paulo","America/Scoresbysund","America/Shiprock","America/Sitka","America/St_Barthelemy","America/St_Johns","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Swift_Current","America/Tegucigalpa","America/Thule","America/Thunder_Bay","America/Tijuana","America/Toronto","America/Tortola","America/Vancouver","America/Whitehorse","America/Winnipeg","America/Yakutat","America/Yellowknife","Antarctica/Casey","Antarctica/Davis","Antarctica/DumontDUrville","Antarctica/Macquarie","Antarctica/Mawson","Antarctica/McMurdo","Antarctica/Palmer","Antarctica/Rothera","Antarctica/South_Pole","Antarctica/Syowa","Antarctica/Troll","Antarctica/Vostok","Arctic/Longyearbyen","Asia/Aden","Asia/Almaty","Asia/Amman","Asia/Anadyr","Asia/Aqtau","Asia/Aqtobe","Asia/Ashgabat","Asia/Atyrau","Asia/Baghdad","Asia/Bahrain","Asia/Baku","Asia/Bangkok","Asia/Barnaul","Asia/Beirut","Asia/Bishkek","Asia/Brunei","Asia/Calcutta","Asia/Chita","Asia/Choibalsan","Asia/Chongqing","Asia/Colombo","Asia/Damascus","Asia/Dhaka","Asia/Dili","Asia/Dubai","Asia/Dushanbe","Asia/Famagusta","Asia/Gaza","Asia/Harbin","Asia/Hebron","Asia/Ho_Chi_Minh","Asia/Hong_Kong","Asia/Hovd","Asia/Irkutsk","Asia/Jakarta","Asia/Jayapura","Asia/Jerusalem","Asia/Kabul","Asia/Kamchatka","Asia/Karachi","Asia/Kashgar","Asia/Kathmandu","Asia/Katmandu","Asia/Khandyga","Asia/Krasnoyarsk","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Kuwait","Asia/Macau","Asia/Magadan","Asia/Makassar","Asia/Manila","Asia/Muscat","Asia/Nicosia","Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Omsk","Asia/Oral","Asia/Phnom_Penh","Asia/Pontianak","Asia/Pyongyang","Asia/Qatar","Asia/Qostanay","Asia/Qyzylorda","Asia/Rangoon","Asia/Riyadh","Asia/Sakhalin","Asia/Samarkand","Asia/Seoul","Asia/Shanghai","Asia/Singapore","Asia/Srednekolymsk","Asia/Taipei","Asia/Tashkent","Asia/Tbilisi","Asia/Tehran","Asia/Thimphu","Asia/Tokyo","Asia/Tomsk","Asia/Ulaanbaatar","Asia/Urumqi","Asia/Ust-Nera","Asia/Vientiane","Asia/Vladivostok","Asia/Yakutsk","Asia/Yangon","Asia/Yekaterinburg","Asia/Yerevan","Atlantic/Azores","Atlantic/Bermuda","Atlantic/Canary","Atlantic/Cape_Verde","Atlantic/Faroe","Atlantic/Madeira","Atlantic/Reykjavik","Atlantic/South_Georgia","Atlantic/St_Helena","Atlantic/Stanley","Australia/Adelaide","Australia/Brisbane","Australia/Broken_Hill","Australia/Currie","Australia/Darwin","Australia/Eucla","Australia/Hobart","Australia/Lindeman","Australia/Lord_Howe","Australia/Melbourne","Australia/Perth","Australia/Sydney","Europe/Amsterdam","Europe/Andorra","Europe/Astrakhan","Europe/Athens","Europe/Belgrade","Europe/Berlin","Europe/Bratislava","Europe/Brussels","Europe/Bucharest","Europe/Budapest","Europe/Busingen","Europe/Chisinau","Europe/Copenhagen","Europe/Dublin","Europe/Gibraltar","Europe/Guernsey","Europe/Helsinki","Europe/Isle_of_Man","Europe/Istanbul","Europe/Jersey","Europe/Kaliningrad","Europe/Kiev","Europe/Kirov","Europe/Kyiv","Europe/Lisbon","Europe/Ljubljana","Europe/London","Europe/Luxembourg","Europe/Madrid","Europe/Malta","Europe/Mariehamn","Europe/Minsk","Europe/Monaco","Europe/Moscow","Europe/Oslo","Europe/Paris","Europe/Podgorica","Europe/Prague","Europe/Riga","Europe/Rome","Europe/Samara","Europe/San_Marino","Europe/Sarajevo","Europe/Saratov","Europe/Simferopol","Europe/Skopje","Europe/Sofia","Europe/Stockholm","Europe/Tallinn","Europe/Tirane","Europe/Ulyanovsk","Europe/Uzhgorod","Europe/Vaduz","Europe/Vatican","Europe/Vienna","Europe/Vilnius","Europe/Volgograd","Europe/Warsaw","Europe/Zagreb","Europe/Zaporozhye","Europe/Zurich","GMT","Indian/Antananarivo","Indian/Chagos","Indian/Christmas","Indian/Cocos","Indian/Comoro","Indian/Kerguelen","Indian/Mahe","Indian/Maldives","Indian/Mauritius","Indian/Mayotte","Indian/Reunion","Local","Pacific/Apia","Pacific/Auckland","Pacific/Bougainville","Pacific/Chatham","Pacific/Chuuk","Pacific/Easter","Pacific/Efate","Pacific/Enderbury","Pacific/Fakaofo","Pacific/Fiji","Pacific/Funafuti","Pacific/Galapagos","Pacific/Gambier","Pacific/Guadalcanal","Pacific/Guam","Pacific/Honolulu","Pacific/Johnston","Pacific/Kanton","Pacific/Kiritimati","Pacific/Kosrae","Pacific/Kwajalein","Pacific/Majuro","Pacific/Marquesas","Pacific/Midway","Pacific/Nauru","Pacific/Niue","Pacific/Norfolk","Pacific/Noumea","Pacific/Pago_Pago","Pacific/Palau","Pacific/Pitcairn","Pacific/Pohnpei","Pacific/Ponape","Pacific/Port_Moresby","Pacific/Rarotonga","Pacific/Saipan","Pacific/Tahiti","Pacific/Tarawa","Pacific/Tongatapu","Pacific/Truk","Pacific/Wake","Pacific/Wallis","UTC"],la=e=>{const r=ma.map(i=>({label:i,value:i}));return a.createElement(ca.Ph,{...e,options:r})},ua=()=>{const e=(0,K.wW)(ea),{formState:r,register:i,setValue:o}=(0,u.Gc)(),{fields:d,append:h,remove:B}=(0,u.Dq)({name:"time_intervals"});return a.createElement(C.C,{label:"Time intervals"},a.createElement(a.Fragment,null,a.createElement("p",null,"A time interval is a definition for a moment in time. All fields are lists, and at least one list element must be satisfied to match the field. If a field is left blank, any moment of time will match the field. For an instant of time to match a complete time interval, all fields must match. A mute timing can contain multiple time intervals."),a.createElement(X.K,{direction:"column",gap:2},d.map((s,n)=>{const c=r.errors;return i(`time_intervals.${n}.location`),a.createElement("div",{key:s.id,className:e.timeIntervalSection},a.createElement(oa,{intervalIndex:n}),a.createElement(v.g,{label:"Location",invalid:!!c.location,error:c.location?.message},a.createElement(la,{prefix:a.createElement(Q.J,{name:"map-marker"}),width:50,onChange:l=>{o(`time_intervals.${n}.location`,l.value)},defaultValue:{label:s.location,value:s.location},"data-testid":"mute-timing-location"})),a.createElement(v.g,{label:"Days of the week"},a.createElement(ga,{onChange:l=>{o(`time_intervals.${n}.weekdays`,l)},defaultValue:s.weekdays})),a.createElement(v.g,{label:"Days of the month",description:"The days of the month, 1-31, of a month. Negative values can be used to represent days which begin at the end of the month",invalid:!!c.time_intervals?.[n]?.days_of_month,error:c.time_intervals?.[n]?.days_of_month?.message},a.createElement(T.I,{...i(`time_intervals.${n}.days_of_month`,{validate:l=>O(l,y=>{const M=parseInt(y,10);return M>-31&&M<0||M>0&&M<32},"Invalid day")}),width:50,defaultValue:s.days_of_month,placeholder:"Example: 1, 14:16, -1","data-testid":"mute-timing-days"})),a.createElement(v.g,{label:"Months",description:"The months of the year in either numerical or the full calendar month",invalid:!!c.time_intervals?.[n]?.months,error:c.time_intervals?.[n]?.months?.message},a.createElement(T.I,{...i(`time_intervals.${n}.months`,{validate:l=>O(l,y=>b.includes(y)||parseInt(y,10)<13&&parseInt(y,10)>0,"Invalid month")}),width:50,placeholder:"Example: 1:3, may:august, december",defaultValue:s.months,"data-testid":"mute-timing-months"})),a.createElement(v.g,{label:"Years",invalid:!!c.time_intervals?.[n]?.years,error:c.time_intervals?.[n]?.years?.message??""},a.createElement(T.I,{...i(`time_intervals.${n}.years`,{validate:l=>O(l,y=>/^\d{4}$/.test(y),"Invalid year")}),width:50,placeholder:"Example: 2021:2022, 2030",defaultValue:s.years,"data-testid":"mute-timing-years"})),a.createElement(S.zx,{type:"button",variant:"destructive",fill:"outline",icon:"trash-alt",onClick:()=>B(n)},"Remove time interval"))})),a.createElement(S.zx,{type:"button",variant:"secondary",className:e.removeTimeIntervalButton,onClick:()=>{h(A)},icon:"plus"},"Add another time interval")))},Aa=e=>{const r=e.split(",").map(i=>i.trim()).flatMap(i=>i.includes(":")?da(i):i).map(i=>i.toLowerCase()).filter(i=>m.includes(i));return(0,I.uniq)(r)};function da(e){const[r="",i=""]=e.split(":"),o=m.indexOf(r),d=m.indexOf(i);return m.slice(o,d+1)}const ga=({defaultValue:e="",onChange:r})=>{const i=(0,K.wW)(ea),o=Aa(e),[d,h]=(0,a.useState)(o),B=s=>{d.includes(s)?h(n=>(0,I.without)(n,s)):h(n=>(0,I.concat)(n,s))};return(0,a.useEffect)(()=>{r(d.join(", "))},[d,r]),a.createElement("div",{"data-testid":"mute-timing-weekdays"},a.createElement(X.K,{gap:1},m.map(s=>{const n=(0,g.cx)(i.dayOfTheWeek,d.includes(s)&&"selected"),c=s.slice(0,3);return a.createElement("button",{type:"button",key:s,className:n,onClick:()=>B(s)},(0,I.upperFirst)(c))})))},ea=e=>({input:(0,g.css)`
    width: 400px;
  `,timeIntervalSection:(0,g.css)`
    background-color: ${e.colors.background.secondary};
    padding: ${e.spacing(2)};
  `,removeTimeIntervalButton:(0,g.css)`
    margin-top: ${e.spacing(2)};
  `,dayOfTheWeek:(0,g.css)`
    cursor: pointer;
    user-select: none;
    padding: ${e.spacing(1)} ${e.spacing(3)};

    border: solid 1px ${e.colors.border.medium};
    background: none;
    border-radius: ${e.shape.radius.default};

    color: ${e.colors.text.secondary};

    &.selected {
      font-weight: ${e.typography.fontWeightBold};
      color: ${e.colors.primary.text};
      border-color: ${e.colors.primary.border};
      background: ${e.colors.primary.transparent};
    }
  `}),fa=e=>{const r={name:"",time_intervals:[A]};if(!e)return r;const i=e.time_intervals.map(o=>({times:o.times??A.times,weekdays:o.weekdays?.join(", ")??A.weekdays,days_of_month:o.days_of_month?.join(", ")??A.days_of_month,months:o.months?.join(", ")??A.months,years:o.years?.join(", ")??A.years,location:o.location??A.location}));return{name:e.name,time_intervals:i}},ha=({muteTiming:e,showError:r,loading:i,provenance:o})=>{const d=(0,j.useDispatch)(),{selectedAlertmanager:h}=(0,F.ZA)(),B=(0,K.wW)(Ea),[s,n]=(0,a.useState)(!1),{currentData:c}=(0,W.W)(h),l=c?.alertmanager_config,y=fa(e),M=(0,u.cI)({defaultValues:y}),_=G=>{if(!c)return;const $=Y(G),D=e?l?.mute_time_intervals?.filter(({name:z})=>z!==e.name):l?.mute_time_intervals,w={...c,alertmanager_config:{...l,route:e&&$.name!==e.name?(0,x.FM)($.name,e.name,l?.route??{}):l?.route,mute_time_intervals:[...D||[],$]}},H=d((0,V.mM)({newConfig:w,oldConfig:c,alertManagerSourceName:h,successMessage:"Mute timing saved",redirectPath:"/alerting/routes/",redirectSearch:"tab=mute_timings"}));n(!0),H.unwrap().finally(()=>{n(!1)})};return a.createElement(a.Fragment,null,o&&a.createElement(k.Xq,{resource:k.Uv.MuteTiming}),i&&a.createElement(p.u,{text:"Loading mute timing"}),r&&a.createElement(E.b,{title:"No matching mute timing found"}),c&&!i&&!r&&a.createElement(u.RV,{...M},a.createElement("form",{onSubmit:M.handleSubmit(_),"data-testid":"mute-timing-form"},a.createElement(C.C,{label:"Create mute timing",disabled:!!o||s},a.createElement(v.g,{required:!0,label:"Name",description:"A unique name for the mute timing",invalid:!!M.formState.errors?.name,error:M.formState.errors.name?.message},a.createElement(T.I,{...M.register("name",{required:!0,validate:G=>{if(!e)return l?.mute_time_intervals?.find(({name:D})=>G===D)?`Mute timing already exists for "${G}"`:!0}}),className:B.input,"data-testid":"mute-timing-name"})),a.createElement(ua,null),a.createElement(S.zx,{type:"submit",className:B.submitButton,disabled:s},"Save mute timing"),a.createElement(S.Qj,{type:"button",variant:"secondary",fill:"outline",href:(0,U.eQ)("/alerting/routes/",h,{tab:"mute_timings"}),disabled:s},"Cancel")))))},Ea=e=>({input:(0,g.css)`
    width: 400px;
  `,submitButton:(0,g.css)`
    margin-right: ${e.spacing(1)};
  `}),ta=ha,pa=()=>{const[e]=(0,f.K)(),{selectedAlertmanager:r}=(0,F.ZA)(),{currentData:i,isLoading:o,error:d}=(0,W.W)(r,{refetchOnFocus:!0,refetchOnReconnect:!0}),h=i?.alertmanager_config,B=(0,a.useCallback)(s=>{const n=h?.mute_time_intervals?.find(({name:c})=>c===s);if(n){const c=h?.muteTimeProvenances?.[n.name];return{...n,provenance:c}}return n},[h]);return a.createElement(a.Fragment,null,d&&!o&&!i&&a.createElement(E.b,{severity:"error",title:`Error loading Alertmanager config for ${r}`},d.message||"Unknown error."),i&&!d&&a.createElement(P.rs,null,a.createElement(P.AW,{exact:!0,path:"/alerting/routes/mute-timing/new"},a.createElement(ta,{loading:o})),a.createElement(P.AW,{exact:!0,path:"/alerting/routes/mute-timing/edit"},()=>{if(e.muteName){const s=B(String(e.muteName)),n=s?.provenance;return a.createElement(ta,{loading:o,muteTiming:s,showError:!s&&!o,provenance:n})}return a.createElement(P.l_,{to:"/alerting/routes"})})))},va=()=>{const e=ia();return a.createElement(R.O,{pageId:"am-routes",pageNav:e,accessType:"notification"},a.createElement(pa,null))};function ia(){const{isExact:e,path:r}=(0,P.$B)(),[i,o]=(0,a.useState)();return(0,a.useEffect)(()=>{r==="/alerting/routes/mute-timing/new"?o({id:"alert-policy-new",text:"Add mute timing"}):r==="/alerting/routes/mute-timing/edit"&&o({id:"alert-policy-edit",text:"Edit mute timing"})},[r,e]),i}const ya=va},39512:(J,N,t)=>{t.d(N,{J:()=>V,O:()=>x});var a=t(85960),P=t(8134),E=t(20989),f=t(84954),R=t(66681),g=t(47257),u=t(84933),K=t(27436),p=t(76679);function C(m){return m.name===p.GC?"Grafana":m.name.slice(0,37)}const v=({disabled:m=!1})=>{const b=(0,g.wW)(T),{selectedAlertmanager:A,availableAlertManagers:O,setSelectedAlertmanager:L}=(0,f.ZA)(),Y=(0,a.useMemo)(()=>O.map(k=>({label:C(k),value:k.name,imgUrl:k.imgUrl,meta:k.meta})),[O]);return a.createElement(u._,{className:b.field,label:m?"Alertmanager":"Choose Alertmanager",disabled:m||Y.length===1,"data-testid":"alertmanager-picker"},a.createElement(K.Ph,{"aria-label":m?"Alertmanager":"Choose Alertmanager",width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:k=>{k?.value&&L(k.value)},options:Y,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:A,getOptionLabel:k=>k.label}))},T=m=>({field:(0,R.css)`
    margin: 0;
  `});var S=t(49199);const j=()=>a.createElement(S.b,{title:"No Alertmanager found",severity:"warning"},"We could not find any external Alertmanagers and you may not have access to the built-in Grafana Alertmanager."),W=()=>a.createElement(S.b,{title:"Selected Alertmanager not found.",severity:"warning"},"The selected Alertmanager no longer exists or you may not have permission to access it. You can select a different Alertmanager from the dropdown."),F=({availableAlertManagers:m})=>{const b=m.length>0;return a.createElement("div",null,b?a.createElement(W,null):a.createElement(j,null))},V=({children:m,pageId:b,pageNav:A,actions:O,isLoading:L})=>a.createElement(E.T,{pageNav:A,navId:b,actions:O},a.createElement(E.T.Contents,{isLoading:L},m)),x=({children:m,accessType:b,...A})=>{const O=U();return a.createElement(f.h5,{accessType:b},a.createElement(V,{...A,actions:a.createElement(v,{disabled:O})},a.createElement(I,null,m)))};function U(){const m=(0,P.Z)();return["/edit","/new"].some(A=>m?.pathname?.includes(A))}const I=({children:m})=>{const{availableAlertManagers:b,selectedAlertmanager:A}=(0,f.ZA)();return A?a.createElement(a.Fragment,null,m):a.createElement(F,{availableAlertManagers:b})}},84237:(J,N,t)=>{t.d(N,{C0:()=>g,Uv:()=>f,Xq:()=>R});var a=t(85960),P=t(49199),E=t(67192),f=(u=>(u.ContactPoint="contact point",u.Template="template",u.MuteTiming="mute timing",u.AlertRule="alert rule",u.RootNotificationPolicy="root notification policy",u))(f||{});const R=({resource:u})=>a.createElement(P.b,{title:`This ${u} cannot be edited through the UI`,severity:"info"},"This ",u," has been provisioned, that means it was created by config. Please contact your server admin to update this ",u,"."),g=()=>a.createElement(E.C,{text:"Provisioned",color:"purple"})},77542:(J,N,t)=>{t.d(N,{Nx:()=>K,kO:()=>u,ot:()=>g});var a=t(55104),P=t.n(a),E=t(85960),f=t(98724);const R=/^((([01][0-9])|(2[0-3])):[0-5][0-9])$|(^24:00$)/,g=p=>p?R.test(p):!0,u=(p,C)=>{if(!p&&!C)return!0;if(!p&&C||p&&!C)return!1;const v="HH:mm",T=P()().startOf("day").add(p,v),S=P()().startOf("day").add(C,v);return!!(p&&C&&T.isBefore(S)||p&&C&&S.isAfter(T))};function K(p){return p.time_intervals.map((v,T)=>{const{times:S,weekdays:j,days_of_month:W,months:F,years:V,location:x}=v,U=(0,f.u6)(S,x),I=(0,f.v7)(j),m=(0,f.J8)(W),b=(0,f.m8)(F),A=(0,f.qw)(V);return E.createElement(E.Fragment,{key:JSON.stringify(v)+T},`${U} ${I}`,E.createElement("br",null),[m,b,A].join(" | "),E.createElement("br",null))})}},70335:(J,N,t)=>{t.d(N,{W:()=>P});var a=t(81828);function P(E,f){const R=a.alertmanagerApi.endpoints.getAlertmanagerConfiguration.useQuery(E??"",{...f,skip:!E});return{...R,error:R.error}}}}]);

//# sourceMappingURL=MuteTimings.6d1eced22b8ef87d3c8f.js.map