"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[94],{57636:(ee,N,s)=>{s.d(N,{Nq:()=>m,Do:()=>h,SX:()=>r,IF:()=>b,oZ:()=>D,xh:()=>$});var o=s(85960),e=s(73667),v=s(67192);function r({error:c}){const S=x(c);return o.createElement(v.C,{icon:"exclamation-triangle",text:"Disabled",color:"red",tooltip:S})}function x(c){switch(c){case e.w2.modifiedSignature:return"Plugin disabled due to modified content";case e.w2.invalidSignature:return"Plugin disabled due to invalid plugin signature";case e.w2.missingSignature:return"Plugin disabled due to missing plugin signature";case null:case void 0:return"Plugin disabled";default:return`Plugin disabled due to unknown error${c?`: ${c}`:""}`}}var u=s(47257),L=s(66681);const E=c=>(0,L.css)`
  background: ${c.colors.background.primary};
  border-color: ${c.colors.border.strong};
  color: ${c.colors.text.secondary};
`;function D(){const c=(0,u.wW)(E);return o.createElement(v.C,{text:"Installed",color:"orange",className:c})}var A=s(11855),z=s(74042),I=s(15343),T=s(29165);function b({plugin:c}){const S=(0,u.wW)(E),F=Z=>{Z.preventDefault(),window.open(`https://grafana.com/grafana/plugins/${c.id}?utm_source=grafana_catalog_learn_more`,"_blank","noopener,noreferrer")};return(0,A.v)("enterprise.plugins")?o.createElement(v.C,{text:"Enterprise",color:"blue"}):o.createElement(z.Lh,null,o.createElement(I.o,{status:c.signature}),o.createElement(v.C,{icon:"lock","aria-label":"lock icon",text:"Enterprise",color:"blue",className:S}),o.createElement(T.zx,{size:"sm",fill:"text",icon:"external-link-alt",onClick:F},"Learn more"))}function $({plugin:c}){const S=(0,u.wW)(B);return o.createElement("p",{className:S.hasUpdate},"Update available!")}const B=c=>({hasUpdate:(0,L.css)`
      color: ${c.colors.text.secondary};
      font-size: ${c.typography.bodySmall.fontSize};
      margin-bottom: 0;
    `});function m(){return o.createElement(v.C,{icon:"exclamation-triangle",text:"Angular",color:"orange",tooltip:"This plugin uses deprecated functionality, support for which is being removed."})}function h(){return o.createElement(v.C,{icon:"exclamation-triangle",text:"Deprecated",color:"orange",tooltip:"This plugin is deprecated and no longer receives updates."})}},13923:(ee,N,s)=>{s.r(N),s.d(N,{default:()=>p});var o=s(66681),e=s(85960),v=s(30694),r=s(91),x=s(47257),u=s(20519),L=s(27436),E=s(5106),D=s(14607),A=s(20989),z=s(87947),I=s(82955),T=s(95162),b=s(99544),$=s(90857),B=s(14559),m=s(87809),h=s(34785),c=s(97666),S=s(13086),F=s(67192),Z=s(73667),M=s(74042),w=s(15343),f=s(57636);function O({plugin:n}){const l=n.hasUpdate&&!n.isCore&&n.type!==Z.zV.renderer;return n.isEnterprise?e.createElement(M.Lh,{height:"auto",wrap:!0},e.createElement(f.IF,{plugin:n}),n.isDisabled&&e.createElement(f.SX,{error:n.error}),l&&e.createElement(f.xh,{plugin:n}),n.angularDetected&&e.createElement(f.Nq,null)):e.createElement(M.Lh,{height:"auto",wrap:!0},e.createElement(w.o,{status:n.signature}),n.isDisabled&&e.createElement(f.SX,{error:n.error}),n.isDeprecated&&e.createElement(f.Do,null),n.isInstalled&&e.createElement(f.oZ,null),l&&e.createElement(f.xh,{plugin:n}),n.angularDetected&&e.createElement(f.Nq,null))}function V({alt:n,className:l,src:i,height:g}){return e.createElement("img",{src:i,className:l,alt:n,loading:"lazy",height:g})}const G="48px";function U({plugin:n,pathName:l,displayMode:i=m.lL.Grid}){const g=(0,x.wW)(H),y=i===m.lL.List;return e.createElement("a",{href:`${l}/${n.id}`,className:(0,o.cx)(g.container,{[g.list]:y})},e.createElement(V,{src:n.info.logos.small,className:g.pluginLogo,height:G,alt:""}),e.createElement("h2",{className:(0,o.cx)(g.name,"plugin-name")},n.name),e.createElement("div",{className:(0,o.cx)(g.content,"plugin-content")},e.createElement("p",null,"By ",n.orgName),e.createElement(O,{plugin:n})),e.createElement("div",{className:g.pluginType},n.type&&e.createElement(c.J,{name:m.Co[n.type],title:`${n.type} plugin`})))}const X=({displayMode:n=m.lL.Grid})=>{const l=(0,x.wW)(H),i=n===m.lL.List;return e.createElement("div",{className:(0,o.cx)(l.container,{[l.list]:i})},e.createElement(h.Z,{containerClassName:(0,o.cx)(l.pluginLogo,(0,o.css)({lineHeight:1})),width:G,height:G}),e.createElement("h2",{className:l.name},e.createElement(h.Z,{width:100})),e.createElement("div",{className:l.content},e.createElement("p",null,e.createElement(h.Z,{width:120})),e.createElement(S.K,{direction:"row"},e.createElement(F.C.Skeleton,null),e.createElement(F.C.Skeleton,null))),e.createElement("div",{className:l.pluginType},e.createElement(h.Z,{width:16,height:16})))};U.Skeleton=X;const H=n=>({container:(0,o.css)({display:"grid",gridTemplateColumns:`${G} 1fr ${n.spacing(3)}`,gridTemplateRows:"auto",gap:n.spacing(2),gridAutoFlow:"row",background:n.colors.background.secondary,borderRadius:n.shape.radius.default,padding:n.spacing(3),transition:n.transitions.create(["background-color","box-shadow","border-color","color"],{duration:n.transitions.duration.short}),"&:hover":{background:n.colors.emphasize(n.colors.background.secondary,.03)}}),list:(0,o.css)({rowGap:0,"> img":{alignSelf:"start"},"> .plugin-content":{minHeight:0,gridArea:"2 / 2 / 4 / 3","> p":{margin:n.spacing(0,0,.5,0)}},"> .plugin-name":{alignSelf:"center",gridArea:"1 / 2 / 2 / 3"}}),pluginType:(0,o.css)({gridArea:"1 / 3 / 2 / 4",color:n.colors.text.secondary}),pluginLogo:(0,o.css)({gridArea:"1 / 1 / 3 / 2",maxWidth:"100%",alignSelf:"center",objectFit:"contain"}),content:(0,o.css)({gridArea:"3 / 1 / 4 / 3",color:n.colors.text.secondary}),name:(0,o.css)({gridArea:"1 / 2 / 3 / 3",alignSelf:"center",fontSize:n.typography.h4.fontSize,color:n.colors.text.primary,margin:0})}),J=({plugins:n,displayMode:l,isLoading:i})=>{const g=l===m.lL.List,{pathname:y}=(0,v.TH)(),_=$.config.appSubUrl+(y.endsWith("/")?y.slice(0,-1):y);return e.createElement(B.r,{gap:3,...g?{columns:1}:{minColumnWidth:34},"data-testid":"plugin-list"},i?new Array(50).fill(null).map((C,R)=>e.createElement(U.Skeleton,{key:R,displayMode:l})):n.map(C=>e.createElement(U,{key:C.id,plugin:C,pathName:_,displayMode:l})))};var W=s(27160),K=s(96535);const Y=(n,l=0,i=[])=>{const g=(0,e.useRef)(!0),y=[...i,g];return(0,W.Z)(()=>{if(g.current){g.current=!1;return}return n()},l,y)},k=({value:n,onSearch:l})=>{const[i,g]=(0,e.useState)(n);return Y(()=>l(i??""),500,[i]),e.createElement(K.H,{value:i,onKeyDown:y=>{(y.key==="Enter"||y.keyCode===13)&&l(y.currentTarget.value)},placeholder:"Search Grafana plugins",onChange:y=>{g(y)},width:46})};var q=s(67187);const t=()=>({push:({query:n})=>{r.E1.partial(n)}});var a=s(95991);function p({route:n}){const l=(0,v.TH)(),i=(0,r.Ox)(l.search),g=(0,T.useSelector)(P=>(0,z.ht)(P.navIndex,"plugins")),{displayMode:y,setDisplayMode:_}=(0,a.iY)(),C=(0,x.wW)(d),R=t(),oe=(0,a.y9)(),te=i.q?.toString()||"",Q=i.filterBy?.toString()||"installed",j=i.filterByType||"all",ne=i.sortBy||q.Nh.nameAsc,{isLoading:re,error:se,plugins:ce}=(0,a.Pj)({keyword:te,type:j!=="all"?j:void 0,isInstalled:Q==="installed"?!0:void 0},ne),ae=[{value:"all",label:"All"},{value:"installed",label:"Installed"}],ie=P=>{R.push({query:{sortBy:P.value}})},le=P=>{R.push({query:{filterBy:P}})},ue=P=>{R.push({query:{filterByType:P.value}})},de=P=>{R.push({query:{filterBy:Q,filterByType:j,q:P}})};if(se)return console.error(se.message),null;const ge=e.createElement("div",null,"Extend the Grafana experience with panel plugins and apps. To find more data sources go to"," ",e.createElement("a",{className:"external-link",href:`${I.Z.AddNewConnection}?cat=data-source`},"Connections"),".");return e.createElement(A.T,{navModel:g,subTitle:ge},e.createElement(A.T.Contents,null,e.createElement(b.L,{wrap:!0},e.createElement(u.g,{label:"Search"},e.createElement(k,{value:te,onSearch:de})),e.createElement(b.L,{wrap:!0,className:C.actionBar},e.createElement(u.g,{label:"Type"},e.createElement(L.Ph,{"aria-label":"Plugin type filter",value:j,onChange:ue,width:18,options:[{value:"all",label:"All"},{value:"datasource",label:"Data sources"},{value:"panel",label:"Panels"},{value:"app",label:"Applications"}]})),oe?e.createElement(u.g,{label:"State"},e.createElement(E.S,{value:Q,onChange:le,options:ae})):e.createElement(D.u,{content:"This filter has been disabled because the Grafana server cannot access grafana.com",placement:"top"},e.createElement("div",null,e.createElement(u.g,{label:"State"},e.createElement(E.S,{disabled:!0,value:Q,onChange:le,options:ae})))),e.createElement(u.g,{label:"Sort"},e.createElement(L.Ph,{"aria-label":"Sort Plugins List",width:24,value:ne,onChange:ie,options:[{value:"nameAsc",label:"By name (A-Z)"},{value:"nameDesc",label:"By name (Z-A)"},{value:"updated",label:"By updated date"},{value:"published",label:"By published date"},{value:"downloads",label:"By downloads"}]})),e.createElement(u.g,{label:"View"},e.createElement(E.S,{className:C.displayAs,value:y,onChange:_,options:[{value:m.lL.Grid,icon:"table",description:"Display plugins in a grid layout"},{value:m.lL.List,icon:"list-ul",description:"Display plugins in list"}]})))),e.createElement("div",{className:C.listWrap},e.createElement(J,{plugins:ce,displayMode:y,isLoading:re}))))}const d=n=>({actionBar:(0,o.css)({[n.breakpoints.up("xl")]:{marginLeft:"auto"}}),listWrap:(0,o.css)({marginTop:n.spacing(2)}),displayAs:(0,o.css)({svg:{marginRight:0}})})},95991:(ee,N,s)=>{s.d(N,{iY:()=>q,or:()=>k,bt:()=>X,ZV:()=>U,Pj:()=>S,UQ:()=>M,bJ:()=>F,x3:()=>w,IS:()=>H,y9:()=>V,S1:()=>O,wq:()=>J,kH:()=>f});var o=s(85960),e=s(95162),v=s(67187),r=s(69396),x=s(14746),u=s(8111),L=s(49531),E=s(87809);const D=t=>t.plugins,A=(0,u.P1)(D,({items:t})=>t),z=(0,u.P1)(D,({settings:t})=>t.displayMode),{selectAll:I,selectById:T}=x.CD.getSelectors(A),b=t=>(0,u.P1)(I,a=>{const p=t.keyword?(0,L.x6)(t.keyword.toLowerCase()):"";return a.filter(d=>{const n=[d.name,d.orgName].filter(Boolean).map(l=>l.toLowerCase());return!(p&&!n.some(l=>l.includes(p))||t.type&&d.type!==t.type||t.isInstalled!==void 0&&d.isInstalled!==t.isInstalled||t.isEnterprise!==void 0&&d.isEnterprise!==t.isEnterprise)})}),$=t=>(0,u.P1)(I,a=>{const p=[];for(const d of a)d.error&&(!t||d.type===t)&&p.push({pluginId:d.id,errorCode:d.error,pluginType:d.type});return p}),B=t=>(0,u.P1)(D,({requests:a={}})=>a[t]),m=t=>(0,u.P1)(B(t),a=>a?.status===E.eE.Pending),h=t=>(0,u.P1)(B(t),a=>a?.status===E.eE.Rejected?a?.error:null),c=t=>(0,u.P1)(B(t),a=>a===void 0),S=(t,a=v.Nh.nameAsc)=>{W();const p=(0,o.useMemo)(()=>b(t),[t]),d=(0,e.useSelector)(p),{isLoading:n,error:l}=G(),i=(0,v.AA)(d,a);return{isLoading:n,error:l,plugins:i}},F=t=>(W(),Y(t),(0,e.useSelector)(a=>T(a,t))),Z=t=>(K(),useSelector(a=>selectById(a,t))),M=t=>(W(),(0,e.useSelector)($(t))),w=()=>{const t=(0,e.useDispatch)();return(a,p,d)=>t((0,r.N9)({id:a,version:p,isUpdating:d}))},f=()=>{const t=(0,e.useDispatch)();return()=>t((0,r.bQ)())},O=()=>{const t=(0,e.useDispatch)();return a=>t((0,r.Tz)(a))},V=()=>(0,e.useSelector)(h(r.tQ.typePrefix))===null,G=()=>{const t=(0,e.useSelector)(m("plugins/fetchLocal")),a=(0,e.useSelector)(h("plugins/fetchLocal"));return{isLoading:t,error:a}},U=()=>{const t=(0,e.useSelector)(m(r.Qd.typePrefix)),a=(0,e.useSelector)(h(r.Qd.typePrefix));return{isLoading:t,error:a}},X=()=>{const t=(0,e.useSelector)(m(r.DD.typePrefix)),a=(0,e.useSelector)(h(r.DD.typePrefix));return{isLoading:t,error:a}},H=()=>{const t=(0,e.useSelector)(m(r.N9.typePrefix)),a=(0,e.useSelector)(h(r.N9.typePrefix));return{isInstalling:t,error:a}},J=()=>{const t=(0,e.useSelector)(m(r.Tz.typePrefix)),a=(0,e.useSelector)(h(r.Tz.typePrefix));return{isUninstalling:t,error:a}},W=()=>{const t=(0,e.useDispatch)(),a=(0,e.useSelector)(c(r.Qd.typePrefix));(0,o.useEffect)(()=>{a&&t((0,r.Qd)())},[])},K=()=>{const t=useDispatch(),a=useSelector(selectIsRequestNotFetched(fetchAllLocal.typePrefix));useEffect(()=>{a&&t(fetchAllLocal())},[])},Y=t=>{const a=(0,e.useDispatch)(),p=(0,e.useSelector)(l=>T(l,t)),n=!(0,e.useSelector)(m(r.DD.typePrefix))&&p&&!p.details;(0,o.useEffect)(()=>{n&&a((0,r.DD)(t))},[p])},k=()=>{const t=(0,e.useDispatch)();return a=>t((0,r.DD)(a))},q=()=>{const t=(0,e.useDispatch)();return{displayMode:(0,e.useSelector)(z),setDisplayMode:p=>t((0,x.UC)(p))}}}}]);

//# sourceMappingURL=PluginListPage.46259cd2ba312a80a450.js.map