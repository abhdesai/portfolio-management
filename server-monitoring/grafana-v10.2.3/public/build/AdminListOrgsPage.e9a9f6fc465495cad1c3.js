"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3798],{87162:(P,d,n)=>{n.r(d),n.d(d,{default:()=>T});var e=n(85960),v=n(31622),c=n(85445),g=n(29165),u=n(20989),f=n(41879),E=n(95162),y=n(66681),o=n(34785),O=n(77980),A=n(47257),C=n(49683);const h=()=>e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"ID"),e.createElement("th",null,"Name"),e.createElement("th",{style:{width:"1%"}})));function m({orgs:t,onDelete:a}){const s=C.Vt.hasPermission(E.AccessControlAction.OrgsDelete),[r,i]=(0,e.useState)();return e.createElement("table",{className:"filter-table form-inline filter-table--hover"},h(),e.createElement("tbody",null,t.map(l=>e.createElement("tr",{key:`${l.id}-${l.name}`},e.createElement("td",{className:"link-td"},e.createElement("a",{href:`admin/orgs/edit/${l.id}`},l.id)),e.createElement("td",{className:"link-td"},e.createElement("a",{href:`admin/orgs/edit/${l.id}`},l.name)),e.createElement("td",{className:"text-right"},e.createElement(g.zx,{variant:"destructive",size:"sm",icon:"times",onClick:()=>i(l),"aria-label":"Delete org",disabled:!s}))))),r&&e.createElement(O.s,{isOpen:!0,icon:"trash-alt",title:"Delete",body:e.createElement("div",null,"Are you sure you want to delete '",r.name,"'?",e.createElement("br",null)," ",e.createElement("small",null,"All dashboards for this organization will be removed!")),confirmText:"Delete",onDismiss:()=>i(void 0),onConfirm:()=>{a(r.id),i(void 0)}}))}const D=()=>{const t=(0,A.wW)(b);return e.createElement("table",{className:"filter-table"},h(),e.createElement("tbody",null,new Array(3).fill(null).map((a,s)=>e.createElement("tr",{key:s},e.createElement("td",null,e.createElement(o.Z,{width:16})),e.createElement("td",null,e.createElement(o.Z,{width:240})),e.createElement("td",null,e.createElement(o.Z,{containerClassName:t.deleteButton,width:22,height:24}))))))};m.Skeleton=D;const b=t=>({deleteButton:(0,y.css)({alignItems:"center",display:"flex",height:30,lineHeight:1})}),N=async t=>await(0,c.i)().delete("/api/orgs/"+t),S=async()=>await(0,c.i)().get("/api/orgs"),x=t=>(0,c.kW)(t)?t?.data?.message:"An unexpected error happened.";function T(){const[t,a]=(0,v.default)(async()=>await S(),[]),s=f.contextSrv.hasPermission(E.AccessControlAction.OrgsCreate);return(0,e.useEffect)(()=>{a()},[a]),e.createElement(u.T,{navId:"global-orgs",actions:e.createElement(g.Qj,{icon:"plus",href:"org/new",disabled:!s},"New org")},e.createElement(u.T.Contents,null,t.error&&x(t.error),t.loading&&e.createElement(m.Skeleton,null),t.value&&e.createElement(m,{orgs:t.value,onDelete:r=>{N(r).then(()=>a())}})))}}}]);

//# sourceMappingURL=AdminListOrgsPage.e9a9f6fc465495cad1c3.js.map