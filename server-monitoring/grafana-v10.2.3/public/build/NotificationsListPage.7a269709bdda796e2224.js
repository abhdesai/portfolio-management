"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[6618],{80372:(I,m,t)=>{t.r(m),t.d(m,{default:()=>D});var e=t(85960),l=t(85954),c=t(85445),a=t(29165),f=t(74042),A=t(64409),E=t(20989),P=t(49683),v=t(6119),M=t(14914);const D=()=>{const d=(0,v.q)("channels"),[r,T]=(0,e.useState)([]),y=async()=>await(0,c.i)().get("/api/alert-notifications"),[g,C]=(0,l.Z)(y);(0,e.useEffect)(()=>{C().then(n=>{T(n)})},[C]);const W=n=>{P.h$.publish(new M.VJ({title:"Delete",text:"Do you want to delete this notification channel?",text2:"Deleting this notification channel will not delete from alerts any references to it",icon:"trash-alt",confirmText:"Delete",yesText:"Delete",onConfirm:async()=>{L(n)}}))},L=async n=>{await(0,c.i)().delete(`/api/alert-notifications/${n}`);const o=await C();T(o)};return e.createElement(E.T,{navModel:d},e.createElement(E.T.Contents,null,g.error&&e.createElement("p",null,g.error.message),!!r.length&&e.createElement(e.Fragment,null,e.createElement("div",{className:"page-action-bar"},e.createElement("div",{className:"page-action-bar__spacer"}),e.createElement(a.Qj,{icon:"channel-add",href:"alerting/notification/new"},"New channel")),e.createElement("table",{className:"filter-table filter-table--hover"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",{style:{minWidth:"200px"}},e.createElement("strong",null,"Name")),e.createElement("th",{style:{minWidth:"100px"}},"Type"),e.createElement("th",{style:{width:"1%"}}))),e.createElement("tbody",null,r.map(n=>e.createElement("tr",{key:n.id},e.createElement("td",{className:"link-td"},e.createElement("a",{href:`alerting/notification/${n.id}/edit`},n.name)),e.createElement("td",{className:"link-td"},e.createElement("a",{href:`alerting/notification/${n.id}/edit`},n.type)),e.createElement("td",{className:"text-right"},e.createElement(f.Lh,{justify:"flex-end"},n.isDefault&&e.createElement(a.zx,{disabled:!0,variant:"secondary",size:"sm"},"default"),e.createElement(a.zx,{variant:"destructive",icon:"times",size:"sm",onClick:()=>{W(n.id)}})))))))),!(r.length||g.loading)&&e.createElement(A.Z,{title:"There are no notification channels defined yet",buttonIcon:"channel-add",buttonLink:"alerting/notification/new",buttonTitle:"Add channel",proTip:"You can include images in your alert notifications.",proTipLink:"http://docs.grafana.org/alerting/notifications/",proTipLinkTitle:"Learn more",proTipTarget:"_blank"})))}},17589:(I,m,t)=>{t.r(m),t.d(m,{default:()=>r});var e=t(85960),l=t(30694),c=t(8958),a=t(3693),f=t(39512);const A=(0,a.Q)(()=>Promise.all([t.e(3638),t.e(8525),t.e(4339),t.e(2323),t.e(9865)]).then(t.bind(t,42323))),E=(0,a.Q)(()=>Promise.all([t.e(3638),t.e(3258),t.e(5482),t.e(2815),t.e(3293)]).then(t.bind(t,83293))),P=(0,a.Q)(()=>Promise.all([t.e(3638),t.e(3258),t.e(5482),t.e(2815),t.e(710)]).then(t.bind(t,50710))),v=(0,a.Q)(()=>Promise.all([t.e(3638),t.e(3258),t.e(5624),t.e(5864)]).then(t.bind(t,85864))),M=(0,a.Q)(()=>Promise.all([t.e(3638),t.e(3258),t.e(5624),t.e(2900)]).then(t.bind(t,42900))),O=(0,a.Q)(()=>Promise.all([t.e(5482),t.e(5799)]).then(t.bind(t,95799))),D=(0,a.Q)(()=>Promise.all([t.e(3638),t.e(3258),t.e(5624),t.e(5222)]).then(t.bind(t,35222))),d=T=>e.createElement(f.O,{pageId:"receivers",accessType:"notification"},e.createElement(l.rs,null,e.createElement(l.AW,{exact:!0,path:"/alerting/notifications",component:A}),e.createElement(l.AW,{exact:!0,path:"/alerting/notifications/receivers/new",component:P}),e.createElement(l.AW,{exact:!0,path:"/alerting/notifications/receivers/:name/edit",component:E}),e.createElement(l.AW,{exact:!0,path:"/alerting/notifications/templates/:name/edit",component:v}),e.createElement(l.AW,{exact:!0,path:"/alerting/notifications/templates/new",component:M}),e.createElement(l.AW,{exact:!0,path:"/alerting/notifications/templates/:name/duplicate",component:D}),e.createElement(l.AW,{exact:!0,path:"/alerting/notifications/global-config",component:O}))),r=(0,c.Pf)(d,{style:"page"})},39512:(I,m,t)=>{t.d(m,{J:()=>g,O:()=>C});var e=t(85960),l=t(8134),c=t(20989),a=t(84954),f=t(66681),A=t(47257),E=t(84933),P=t(27436),v=t(76679);function M(n){return n.name===v.GC?"Grafana":n.name.slice(0,37)}const O=({disabled:n=!1})=>{const o=(0,A.wW)(D),{selectedAlertmanager:s,availableAlertManagers:h,setSelectedAlertmanager:N}=(0,a.ZA)(),u=(0,e.useMemo)(()=>h.map(i=>({label:M(i),value:i.name,imgUrl:i.imgUrl,meta:i.meta})),[h]);return e.createElement(E._,{className:o.field,label:n?"Alertmanager":"Choose Alertmanager",disabled:n||u.length===1,"data-testid":"alertmanager-picker"},e.createElement(P.Ph,{"aria-label":n?"Alertmanager":"Choose Alertmanager",width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:i=>{i?.value&&N(i.value)},options:u,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:s,getOptionLabel:i=>i.label}))},D=n=>({field:(0,f.css)`
    margin: 0;
  `});var d=t(49199);const r=()=>e.createElement(d.b,{title:"No Alertmanager found",severity:"warning"},"We could not find any external Alertmanagers and you may not have access to the built-in Grafana Alertmanager."),T=()=>e.createElement(d.b,{title:"Selected Alertmanager not found.",severity:"warning"},"The selected Alertmanager no longer exists or you may not have permission to access it. You can select a different Alertmanager from the dropdown."),y=({availableAlertManagers:n})=>{const o=n.length>0;return e.createElement("div",null,o?e.createElement(T,null):e.createElement(r,null))},g=({children:n,pageId:o,pageNav:s,actions:h,isLoading:N})=>e.createElement(c.T,{pageNav:s,navId:o,actions:h},e.createElement(c.T.Contents,{isLoading:N},n)),C=({children:n,accessType:o,...s})=>{const h=W();return e.createElement(a.h5,{accessType:o},e.createElement(g,{...s,actions:e.createElement(O,{disabled:h})},e.createElement(L,null,n)))};function W(){const n=(0,l.Z)();return["/edit","/new"].some(s=>n?.pathname?.includes(s))}const L=({children:n})=>{const{availableAlertManagers:o,selectedAlertmanager:s}=(0,a.ZA)();return s?e.createElement(e.Fragment,null,n):e.createElement(y,{availableAlertManagers:o})}}}]);

//# sourceMappingURL=NotificationsListPage.7a269709bdda796e2224.js.map