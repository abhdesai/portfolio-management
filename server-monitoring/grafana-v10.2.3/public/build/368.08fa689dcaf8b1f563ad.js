(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[368],{93821:(G,A,e)=>{"use strict";e.d(A,{n:()=>o});var n=e(85960),a=e(13184);function o(r){const{children:i,instanceSettings:g}=r,u=(0,n.useMemo)(()=>({instanceSettings:g,meta:g.meta}),[g]);return n.createElement(a._.Provider,{value:u},i)}},13184:(G,A,e)=>{"use strict";e.d(A,{_:()=>a});var n=e(85960);const a=(0,n.createContext)(void 0)},77786:(G,A,e)=>{"use strict";e.d(A,{b:()=>o});var n=e(85960),a=e(13184);function o(r){const{children:i,...g}=r;return n.createElement(a._.Provider,{value:g},i)}},46707:(G,A,e)=>{"use strict";e.d(A,{v:()=>n});function n(a){return"instanceSettings"in a&&"meta"in a}},23882:(G,A,e)=>{"use strict";e.d(A,{gp:()=>o});var n=e(85960),a=e(13184);function o(){const u=(0,n.useContext)(a._);if(!u)throw new Error("usePluginContext must be used within a PluginContextProvider");return u}function r(){return o().meta}function i(){return o().meta.jsonData}function g(){return o().meta.info.version}},18100:(G,A,e)=>{"use strict";e.d(A,{P:()=>r,i:()=>o});var n=e(58309),a=e(45878);class o{constructor(u,l){return this.fields=[],this.length=0,r(u,l)}}function r(g,u){const l={fields:[],length:g.length};if(!g?.length)return l;if(u){for(const c of u)l.fields.push(i(c,g.map(d=>d[c])));return l}const m=g.find(c=>c!=null);return m!=null&&(typeof m=="object"?l.fields=Object.keys(m).map(c=>i(c,g.map(d=>d[c]))):l.fields.push(i(n.M5,g))),l}function i(g,u){const l={name:g,config:{},values:u,type:n.fS.other};return l.type=(0,a.fu)(l)??n.fS.other,l}},93843:(G,A,e)=>{"use strict";e.d(A,{a:()=>o});var n=e(81424),a=e(38070);class o extends a.v{constructor(i){super(void 0,g=>new n.d({...i,buffer:g}))}}},79739:(G,A,e)=>{"use strict";e.d(A,{Ib:()=>i,Jy:()=>r,Y:()=>l,vP:()=>u});var n=e(58309),a=e(45878);const o={Inf:1/0,NegInf:-1/0,Undef:void 0,NaN:NaN};function r(m,c){for(const d in m){const f=o[d];for(const E of m[d])E<c.length&&(c[E]=f)}}function i(m,c){for(let d=0;d<c.length;d++)c[d]=m[Number(c[d])]}function g(m,c){for(const d of c)if(d!=null)return(0,a._m)(m,d);return n.fS.other}function u(m){const{schema:c,data:d}=m;if(!c||!c.fields)throw new Error("JSON needs a fields definition");const f=d?d.values.reduce((v,h)=>Math.max(v,h.length),0):0,E=c.fields.map((v,h)=>{let p=d?d.values[h]:[],s=p.length,y=v.type;s!==f&&(p.length=f,p.fill(void 0,s));let C=d?.entities?.[h];C&&r(C,p);let b=d?.enums?.[h];b&&(i(b,p),y=n.fS.string);const S=d?.nanos?.[h],D={...v,type:y??g(v.name,p),config:v.config??{},values:p,entities:C??{}};return S!=null&&(D.nanos=S),D});return{...c,fields:E,length:f}}function l(m){const c={values:[]},d=[];let f=!1;const E={refId:m.refId,meta:m.meta,name:m.name,fields:m.fields.map(v=>{const{values:h,nanos:p,state:s,display:y,...C}=v;return"entities"in C&&delete C.entities,c.values.push(h),p!=null?(d.push(p),f=!0):d.push(null),C})};return f&&(c.nanos=d),{schema:E,data:c}}},73891:(G,A,e)=>{"use strict";e.d(A,{U:()=>a});var n=e(2207);class a extends n.G{constructor(r){super(),this.data=r,this.index=0;const i={},g={};for(let u=0;u<r.fields.length;u++){const l=r.fields[u];if(!l.name)continue;g[l.name]=l;const m=()=>l.values.get(this.index);i.hasOwnProperty(l.name)||Object.defineProperty(i,l.name,{enumerable:!0,get:m}),i.hasOwnProperty(u.toString())||Object.defineProperty(i,u,{enumerable:!1,get:m})}this.obj=i,this.fields=g}get dataFrame(){return this.data}get length(){return this.data.length}getFieldDisplayProcessor(r){if(!this.dataFrame||!this.dataFrame.fields)return;const i=this.dataFrame.fields[r];if(!(!i||!i.display))return i.display}get(r){return this.index=r,this.obj}toArray(){return new Array(this.data.length).fill(0).map((r,i)=>({...this.get(i)}))}}},30215:(G,A,e)=>{"use strict";e.d(A,{N:()=>o});var n=e(58309),a=e(45878);class o{constructor(i){this.fields=[],this.fieldByName={},this.fieldByType={},this.fields=i.fields.map((g,u)=>({...g,index:u}));for(let g=0;g<i.fields.length;g++){const u=i.fields[g];if(u.type===n.fS.other){const l=(0,a.fu)(u);l&&(u.type=l)}this.fieldByType[u.type]||(this.fieldByType[u.type]=[]),this.fieldByType[u.type].push({...u,index:g}),this.fieldByName[u.name]?console.warn("Duplicate field names in DataFrame: ",u.name):this.fieldByName[u.name]={...u,index:g}}}getFields(i){if(!i)return[...this.fields];const g=this.fieldByType[i];return g?[...g]:[]}hasFieldOfType(i){const g=this.fieldByType[i];return g&&g.length>0}getFirstFieldOfType(i,g=!1){return this.fieldByType[i]?.find(m=>g||!m.config.custom?.hidden)}hasFieldNamed(i){return!!this.fieldByName[i]}hasFieldWithNameAndType(i,g){return!!this.fieldByName[i]&&this.fieldByType[g].filter(u=>u.name===i).length>0}getFieldByName(i){return this.fieldByName[i]}getFieldsByLabel(i,g){return Object.values(this.fieldByName).filter(u=>u.labels&&u.labels[i]===g)}}},38070:(G,A,e)=>{"use strict";e.d(A,{Y:()=>g,v:()=>u});var n=e(56375),a=e(58309),o=e(45878);function r(l,m){return m.type||(m.name==="time"||m.name==="Time"?m.type=a.fS.time:m.type=(0,o.LI)(l)),m.type===a.fS.number?c=>parseFloat(c):m.type===a.fS.boolean?c=>!(c[0]==="F"||c[0]==="f"||c[0]==="0"):c=>c}var i=e(2207);const g=void 0;class u extends i.G{constructor(m,c){if(super(),this.fields=[],this.first=[],this.parsers=void 0,this.creator=c||(d=>d??[]),m){const{name:d,refId:f,meta:E,fields:v}=m;if(d&&(this.name=d),f&&(this.refId=f),E&&(this.meta=E),v)for(const h of v)this.addField(h)}Object.defineProperty(this,"length",{enumerable:!0,get:()=>this.first.length})}get length(){return this.first.length}addFieldFor(m,c){return this.addField({name:c||"",type:(0,o.LI)(m)})}addField(m,c){let d;m.values&&(d=m.values);let f=m.type;!f&&(m.name==="time"||m.name==="Time")?f=a.fS.time:(!f&&d&&d.length&&(f=(0,o.LI)(d[0])),f||(f=a.fS.other));let E=m.name;E||(E=`Field ${this.fields.length+1}`);const v={...m,name:E,type:f,config:m.config||{},values:this.creator(d)};if(f===a.fS.other&&(f=(0,o.fu)(v),f&&(v.type=f)),this.fields.push(v),this.first=this.fields[0].values,c)for(;v.values.length<c;)v.values.push(g);else this.validate();return v}validate(){const m=this.fields.reduce((c,d)=>Math.max(c,d.values.length),0);for(const c of this.fields)for(;c.values.length!==m;)c.values.push(g)}setParser(m,c){return this.parsers||(this.parsers=new Map),this.parsers.set(m,c),c}parseValue(m,c){let d=this.parsers?.get(m);return d||(d=this.setParser(m,r(c,m))),d(c)}appendRow(m){for(let c=this.fields.length;c<m.length;c++)this.addField({name:`Field ${c+1}`,type:(0,o.LI)(m[c])});if(this.length<1)for(let c=0;c<this.fields.length;c++){const d=this.fields[c];(!d.type||d.type===a.fS.other)&&(d.type=(0,o.LI)(m[c]))}for(let c=0;c<this.fields.length;c++){const d=this.fields[c];let f=m[c];d.type!==a.fS.string&&(0,n.isString)(f)&&(f=this.parseValue(d,f)),d.values.push(f)}}push(...m){for(const c of m)this.add(c);return this.length}reverse(){for(const m of this.fields)m.values.reverse();return this}add(m){const c=m;for(const d of this.fields){let f=c[d.name];d.type!==a.fS.string&&(0,n.isString)(f)&&(f=this.parseValue(d,f)),f===void 0&&(f=g),d.values.push(f)}}set(m,c){if(m>this.length)throw new Error("Unable to set value beyond current length");const d=c||{};for(const f of this.fields)f.values[m]=d[f.name]}get(m){const c={};for(const d of this.fields)c[d.name]=d.values[m];return c}toJSON(){return(0,o.og)(this)}}},28870:(G,A,e)=>{"use strict";e.d(A,{Av:()=>d,Ko:()=>v,MB:()=>p,T0:()=>u,_A:()=>f});var n=e(58309),a=e(5e4),o=e(85334),r=e(70313),i=e(45878),g=e(79739),u=(S=>(S.Append="append",S.Replace="replace",S))(u||{});const l="__name__";var m=(S=>(S[S.wide=0]="wide",S[S.labels=1]="labels",S))(m||{});const c=class{constructor(S){this.options=S,this.meta={},this.fields=[],this.length=0,this.schemaFields=[],this.timeFieldIndex=-1,this.pushMode=0,this.labels=new Set,this.packetInfo={schemaChanged:!0,number:0,action:"replace",length:0},this.serialize=(D,M,T)=>{const R=M?Object.assign({},{...this.options,...M}):this.options,O=(0,i.Aw)(this,D),x=C(O.fields.map(L=>L.values),typeof T?.maxLength=="number"?Math.min(T.maxLength,R.maxLength):R.maxLength,this.timeFieldIndex,R.maxDelta);O.fields=O.fields.map(L=>({...L,values:L.values?.slice(x)}));const I=O.fields[0]?.values?.length??0;return{...O,labels:this.labels,schemaFields:this.schemaFields,name:this.name,refId:this.refId,meta:this.meta,length:I,timeFieldIndex:this.timeFieldIndex,pushMode:this.pushMode,packetInfo:this.packetInfo,options:R}},this.initFromSerialized=D=>{this.name=D.name,this.refId=D.refId,this.meta=D.meta,this.length=D.length,this.labels=D.labels,this.schemaFields=D.schemaFields,this.timeFieldIndex=D.timeFieldIndex,this.pushMode=D.pushMode,this.packetInfo.length=D.packetInfo.length,this.packetInfo.number=D.packetInfo.number,this.packetInfo.action="replace",this.packetInfo.schemaChanged=!0,this.fields=D.fields.map(M=>({...M,type:M.type??n.fS.other,config:M.config??{},values:M.values??[]})),y(this.fields.map(M=>M.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)},this.needsResizing=({maxLength:D,maxDelta:M})=>{const T=D&&this.options.maxLength<D,R=M&&this.options.maxDelta<M,O=M&&this.options.maxDelta===1/0;return!!(T||R||O)},this.resize=({maxLength:D,maxDelta:M})=>{M&&(this.options.maxDelta===1/0?this.options.maxDelta=M:this.options.maxDelta=Math.max(M,this.options.maxDelta)),this.options.maxLength=Math.max(this.options.maxLength,D??0)},this.pushNewValues=D=>{if(!D?.length)return;this.packetInfo.action=this.options.action,this.packetInfo.number++,this.packetInfo.length=D[0].length,this.packetInfo.schemaChanged=!1,this.options.action==="append"?s(this.fields.map(T=>T.values),D,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta):(D.forEach((T,R)=>{this.fields[R]&&(this.fields[R].values=T)}),y(this.fields.map(T=>T.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta));const M=this.fields?.[0]?.values.length;M!==void 0&&(this.length=M)},this.resetStateCalculations=()=>{this.fields.forEach(D=>{D.state={...D.state??{},calcs:void 0,range:void 0}})},this.getMatchingFieldIndexes=D=>this.fields.map((M,T)=>D(M)?T:void 0).filter(M=>M!==void 0),this.getValuesFromLastPacket=()=>this.fields.map(D=>{const M=D.values;return M.slice(Math.max(M.length-this.packetInfo.length))}),this.hasAtLeastOnePacket=()=>!!this.packetInfo.length,this.getOptions=()=>this.options,Object.defineProperty(this,"length",{enumerable:!0}),Object.defineProperty(this,"fields",{enumerable:!0})}get alwaysReplace(){return this.options.action==="replace"}push(S){const{schema:D,data:M}=S;if(this.packetInfo.number++,this.packetInfo.length=0,this.packetInfo.schemaChanged=!1,D){this.pushMode=0,this.timeFieldIndex=D.fields.findIndex(x=>x.type===n.fS.time);const T=D.fields[0];this.timeFieldIndex===1&&T.type===n.fS.string&&(T.name==="labels"||T.name==="Labels")&&(this.pushMode=1,this.timeFieldIndex=0);const R=this.pushMode===1?D.fields.slice(1):D.fields;this.refId=D.refId,D.meta&&(this.meta={...D.meta});const{displayNameFormat:O}=this.options;if(b(this.schemaFields,R)){const x=R.length;this.fields.forEach((I,L)=>{const P=R[L%x];I.config=P.config??{},I.labels=P.labels}),O&&this.fields.forEach(I=>{const L={[l]:I.name,...I.labels};I.config.displayNameFromDS=(0,r.W)(O,L)})}else{this.packetInfo.schemaChanged=!0;const x=this.pushMode===0;this.fields=R.map(I=>{const L=I.config??{};if(O){const P={[l]:I.name,...I.labels};L.displayNameFromDS=(0,r.W)(O,P)}return{config:L,name:I.name,labels:I.labels,type:I.type??n.fS.other,values:x?this.fields.find(P=>P.name===I.name&&I.type===P.type)?.values??Array(this.length).fill(void 0):[]}})}this.schemaFields=R}if(M&&M.values.length&&M.values[0].length){let{values:T,entities:R}=M;if(R&&R.forEach((x,I)=>{x&&(0,g.Jy)(x,T[I])}),this.pushMode===1){const x=E(T);for(const P of x.keys())this.labels.has(P)||(this.packetInfo.schemaChanged=!0,this.addLabel(P));let I=Array(this.schemaFields.length).fill([]),L=[];this.labels.forEach(P=>{L.push(x.get(P)??I)}),T=(0,o.v_)(L)}if(T.length!==this.fields.length){if(this.fields.length)throw new Error(`push message mismatch.  Expected: ${this.fields.length}, received: ${T.length} (labels=${this.pushMode===1})`);this.fields=T.map((x,I)=>{let L=`Field ${I}`,P=(0,i.LI)(x[0]);return I===0&&P===n.fS.number&&x[0]>1600016688632&&(P=n.fS.time,L="Time"),{name:L,type:P,config:{},values:[]}})}let O=T;this.packetInfo.length=T[0].length,this.alwaysReplace||!this.length?this.packetInfo.action="replace":(this.packetInfo.action="append",O=this.fields.map(x=>x.values),s(O,T,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)),O.forEach((x,I)=>{const L=this.fields[I],{state:P}=L;L.values=x,P&&(P.calcs=void 0)}),this.length=O[0].length}return{...this.packetInfo}}addLabel(S){const{displayNameFormat:D}=this.options,M=this.labels.size,T=h(S);if(M===0)this.fields.forEach((R,O)=>{if(O>0&&(R.labels=T,D)){const x={[l]:R.name,...T};R.config.displayNameFromDS=(0,r.W)(D,x)}});else for(let R=1;R<this.schemaFields.length;R++){let O=this.schemaFields[R];const x=O.config??{};if(D){const I={[l]:O.name,...T};x.displayNameFromDS=(0,r.W)(D,I)}this.fields.push({...O,config:x,labels:T,values:Array(this.length).fill(void 0)})}this.labels.add(S)}};let d=c;d.deserialize=S=>{const D=new c(S.options);return D.initFromSerialized(S),D},d.empty=S=>new c(f(S)),d.fromDataFrameJSON=(S,D)=>{const M=new c(f(D));return M.push(S),M};function f(S){return{maxLength:S?.maxLength??1e3,maxDelta:S?.maxDelta??1/0,action:S?.action??"append",displayNameFormat:S?.displayNameFormat}}function E(S){let D=new Set(S[0]),M=new Map;D.forEach(T=>{let R=Array(S.length-1).fill(null).map(()=>[]);M.set(T,R)});for(let T=0;T<S[0].length;T++){let R=M.get(S[0][T]);for(let O=1;O<S.length;O++)R[O-1].push(S[O][T])}return M}function v(S,D,M,T){let R;M=M||0,T=T||D.length-1;let O=T<=2147483647;for(;T-M>1;)R=O?M+T>>1:Math.floor((M+T)/2),D[R]<S?M=R:T=R;return S-D[M]<=D[T]-S?M:T}function h(S){if(!S.length)return{};if(S.charAt(0)==="{")return(0,a.J8)(S);const D={};return S.split(",").forEach(M=>{const[T,R]=M.trim().split("=");D[T]=R}),D}function p(S){const D=S.packetInfo;return D?.action?D:void 0}function s(S,D,M=1/0,T=0,R=1/0){for(let O=0;O<S.length;O++)for(let x=0;x<D[O].length;x++)S[O].push(D[O][x]);return y(S,M,T,R)}function y(S,D=1/0,M=0,T=1/0){const R=C(S,D,M,T);if(R)for(let O=0;O<S.length;O++)S[O].splice(0,R);return R}function C(S,D=1/0,M=0,T=1/0){if(!S[0]?.length)return 0;const R=S[0].length;let O=0;if(R>D&&(O=R-D),T!==1/0&&M>=0){const x=S[M],I=x[O],L=x[R-1];L-I>T&&(O=v(L-T,x,O))}return O}function b(S,D){if(S?.length!==D.length)return!1;for(let M=0;M<S.length;M++){const T=S[M],R=D[M];if(T.name!==R.name||T.type!==R.type)return!1}return!0}},74409:(G,A,e)=>{"use strict";e.d(A,{$q:()=>o,GV:()=>a,YP:()=>g,jC:()=>r,q2:()=>n,r7:()=>i});const n=(u,l)=>({name:u,columns:l}),a=u=>u.columns,o=(u,l)=>u.columns[l],r=(u,l,m)=>u.columns[l].values[m],i=(u,l,m)=>u.columns.map(c=>c.values[m]),g=(u,l)=>u[l]},73722:(G,A,e)=>{"use strict";e.d(A,{Ch:()=>o,Vv:()=>g,nl:()=>r});var n=e(56375),a=e.n(n);function o(u,l,m){if(u===l)return!0;if(u?.fields?.length!==l?.fields?.length||u.name!==l.name)return!1;for(let c=0;c<u.fields.length;c++){const d=u.fields[c],f=l.fields[c];if(d.type!==f.type||d.name!==f.name)return!1;if(m)continue;if(d.labels&&f.labels&&!g(d.labels,f.labels))return!1;const E=d.config,v=f.config;let h=Object.keys(E),p=Object.keys(v);if(h.length!==p.length)return!1;for(const s of h){if(!(s in v))return!1;if(s!=="interval"&&!(0,n.isEqual)(E[s],v[s]))return!1}}return!0}function r(u,l,m){if(u===l)return!0;if(u?.length!==l?.length)return!1;for(let c=0;c<u.length;c++)if(!m(u[c],l[c]))return!1;return!0}const i=(u,l)=>u===l;function g(u,l,m=i){if(u===l)return!0;const c=Object.keys(u),d=Object.keys(l);if(c.length!==d.length)return!1;for(let f of c)if(!m(u[f],l[f]))return!1;return!0}},11935:(G,A,e)=>{"use strict";e.d(A,{$q:()=>g.$q,Av:()=>d.Av,Aw:()=>i.Aw,Ch:()=>m.Ch,DP:()=>i.DP,F9:()=>i.F9,GV:()=>g.GV,Ib:()=>l.Ib,Ji:()=>i.Ji,Jy:()=>l.Jy,Ko:()=>d.Ko,LI:()=>i.LI,N:()=>a.N,Pc:()=>u.P,SX:()=>i.SX,T0:()=>d.T0,US:()=>n.U,Vv:()=>m.Vv,Y:()=>l.Y,Y6:()=>i.Y6,YP:()=>g.YP,Yi:()=>r.Y,Zr:()=>i.Zr,_m:()=>i._m,a2:()=>o.a,aK:()=>i.aK,aY:()=>i.aY,at:()=>i.at,fh:()=>i.fh,fu:()=>i.fu,g0:()=>i.g0,iB:()=>u.i,jC:()=>g.jC,jM:()=>c.jM,m$:()=>c.m$,nl:()=>m.nl,og:()=>i.og,pP:()=>c.pP,q2:()=>g.q2,r7:()=>g.r7,sV:()=>i.sV,vA:()=>r.v,vP:()=>l.vP,xI:()=>c.xI,z4:()=>i.z4,zR:()=>i.zR});var n=e(73891),a=e(30215),o=e(93843),r=e(38070),i=e(45878),g=e(74409),u=e(18100),l=e(79739),m=e(73722),c=e(24677),d=e(28870)},45878:(G,A,e)=>{"use strict";e.d(A,{Aw:()=>L,DP:()=>p,F9:()=>F,Ji:()=>b,LI:()=>s,SX:()=>C,Y6:()=>O,Zr:()=>T,_m:()=>h,aK:()=>R,aY:()=>S,at:()=>j,fh:()=>x,fu:()=>y,g0:()=>M,og:()=>I,sV:()=>P,z4:()=>D,zR:()=>U});var n=e(56375),a=e.n(n),o=e(85745),r=e(70129),i=e(94372),g=e(58309),u=e(23757),l=e(18100),m=e(79739);function c(V){const _=V.columns.map(H=>{const{text:z,type:K,...Y}=H,k=[];return{name:z?.length?z:H,config:Y||{},values:k,type:K&&Object.values(g.fS).includes(K)?K:g.fS.other}});if(!(0,n.isArray)(V.rows))throw new Error(`Expected table rows to be array, got ${typeof V.rows}.`);for(const H of V.rows)for(let z=0;z<_.length;z++)_[z].values.push(H[z]);for(const H of _)if(H.type===g.fS.other){const z=y(H);z&&(H.type=z)}return{fields:_,refId:V.refId,meta:V.meta,name:V.name,length:V.rows.length}}function d(V){const _=[],H=[],z=V.datapoints||V.points;for(const Y of z)H.push(Y[0]),_.push(Y[1]);const K=[{name:g.Ls,type:g.fS.time,config:{},values:_},{name:g.M5,type:g.fS.number,config:{unit:V.unit},values:H,labels:V.tags}];return V.title&&(K[1].config.displayNameFromDS=V.title),{name:V.target||V.name,refId:V.refId,meta:V.meta,fields:K,length:H.length}}function f(V){const _=[],H=[];for(let z=0;z<V.data.length;z++){const K=V.data[z];_.push(K[1]),H.push(K[0])}return{name:V.label,fields:[{name:V.label||g.M5,type:g.fS.number,config:{},values:_},{name:g.Ls,type:g.fS.time,config:{unit:"dateTimeAsIso"},values:H}],length:_.length}}function E(V){const _=[{name:V.target,type:g.fS.other,labels:V.tags,config:{unit:V.unit,filterable:V.filterable},values:[]}];for(const H of V.datapoints)_[0].values.push(H);return{name:V.target,refId:V.target,meta:{json:!0},fields:_,length:V.datapoints.length}}const v=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function h(V,_){return V&&(V=V.toLowerCase(),V==="date"||V==="time")?g.fS.time:s(_)}function p(V){return V instanceof Date||(0,o.v9)(V)?g.fS.time:(0,n.isNumber)(V)?g.fS.number:(0,n.isString)(V)?g.fS.string:(0,n.isBoolean)(V)?g.fS.boolean:g.fS.other}function s(V){return V instanceof Date||(0,o.v9)(V)?g.fS.time:(0,n.isNumber)(V)?g.fS.number:(0,n.isString)(V)?v.test(V)?g.fS.number:V==="true"||V==="TRUE"||V==="True"||V==="false"||V==="FALSE"||V==="False"?g.fS.boolean:g.fS.string:(0,n.isBoolean)(V)?g.fS.boolean:g.fS.other}function y(V){if(V.name){const _=V.name.toLowerCase();if(_==="date"||_==="time")return g.fS.time}for(let _=0;_<V.values.length;_++){const H=V.values[_];if(H!=null)return s(H)}}const C=(V,_=!1)=>{for(const H of V.fields)if(!H.type||H.type===g.fS.other||_)return{...V,fields:V.fields.map(z=>z.type&&z.type!==g.fS.other&&!_?z:{...z,type:y(z)||g.fS.other})};return V},b=V=>!!(V&&V.hasOwnProperty("columns")),S=V=>!!(V&&V.hasOwnProperty("fields")),D=V=>!!(S(V)&&V.hasOwnProperty("value"));function M(V){if("fields"in V)return"length"in V&&V.fields[0]?.values?.get?V:j(V);if(V.hasOwnProperty("type")&&V.type==="docs")return E(V);if(V.hasOwnProperty("datapoints")||V.hasOwnProperty("points"))return d(V);if(V.hasOwnProperty("data"))return V.hasOwnProperty("schema")?(0,m.vP)(V):f(V);if(V.hasOwnProperty("columns"))return c(V);if(Array.isArray(V))return(0,l.P)(V);throw console.warn("Can not convert",V),new Error("Unsupported data format")}const T=V=>{const{fields:_}=V,H=V.length,z=[];if(_.length===2){const{timeField:K,timeIndex:Y}=P(V);if(K){const q=_[Y===0?1:0],X=_[Y];for(let te=0;te<H;te++)z.push([q.values[te],X.values[te]]);return{alias:V.name,target:(0,i.CZ)(q,V),datapoints:z,unit:_[0].config?_[0].config.unit:void 0,refId:V.refId,meta:V.meta}}}for(let K=0;K<H;K++){const Y=[];for(let k=0;k<_.length;k++)Y.push(_[k].values[K]);z.push(Y)}return V.meta&&V.meta.json?{alias:_[0].name||V.name,target:_[0].name||V.name,datapoints:_[0].values,filterable:_[0].config?_[0].config.filterable:void 0,type:"docs"}:{columns:_.map(K=>{const{name:Y,config:k}=K;if(k){const{...q}=k;return q.text=Y,q}return{text:Y}}),type:"table",refId:V.refId,meta:V.meta,rows:z}};function R(V,_,H=!1){const z=V.fields[_];if(!z)return V;const K=[];for(let k=0;k<V.length;k++)K.push(k);const Y=(0,r.Mo)(z,H);return K.sort(Y),{...V,fields:V.fields.map(k=>{const q={...k,values:k.values.map((te,se)=>k.values[K[se]])},{nanos:X}=k;return X!==void 0&&(q.nanos=X.map((te,se)=>X[K[se]])),q})}}function O(V){return{...V,fields:V.fields.map(_=>{const H=[..._.values];H.reverse();const z={..._,values:H},{nanos:K}=_;if(K!==void 0){const Y=[...K];Y.reverse(),z.nanos=Y}return z})}}function x(V,_){const H=[];for(const z of V.fields)H.push(z.values[_]);return H}function I(V){return L(V)}function L(V,_){return{fields:(_?V.fields.filter(_):V.fields).map(K=>{let Y=K.values;return{name:K.name,type:K.type,config:K.config,values:Y,labels:K.labels}}),refId:V.refId,meta:V.meta,name:V.name}}const P=V=>{for(let _=0;_<V.fields.length;_++)if(V.fields[_].type===g.fS.time)return{timeField:V.fields[_],timeIndex:_};return{}};function N(V){const _=C(M(V));if(_.fields&&_.fields.length)for(const H of _.fields)H.state=null;return _}function F(V){return!V||!(0,n.isArray)(V)?[]:V.map(_=>N(_))}function U(V,_){const{series:H,annotations:z}=V;if(V.state===u.Gu.Loading&&H.length===0)return _||(_=V),{..._,state:u.Gu.Loading,request:V.request};const K=performance.now(),Y=H.map(X=>N(X)),k=F(z),q=performance.now();return{...V,series:Y,annotations:k,timings:{dataProcessingTime:q-K}}}function j(V){let _=0;const H=V.fields.map((z,K)=>{const{state:Y,...k}=z;return k.name||(k.name=`Field ${K+1}`),k.config||(k.config={}),k.values?k.values.length>_&&(_=k.values.length):k.values=new Array(_),k.type||(k.type=y(k)??g.fS.other),k});return{...V,fields:H,length:_}}},24677:(G,A,e)=>{"use strict";e.d(A,{jM:()=>g,m$:()=>u,pP:()=>r,xI:()=>i});var n=e(58309),a=e(45878);const o=100;function r(l){if(l.fields.length<2)return!1;const m=l.fields.find(d=>d.type===n.fS.number);let c=!1;for(const d of l.fields)if(g(d)){c=!0;break}return c&&m!==void 0}function i(l){return!l.find(m=>!r(m))}function g(l){if(l.type!==n.fS.time)return!1;let m=null,c=l.values.length>o?o:l.values.length;for(let d=0;d<c;d++){const f=l.values[d];if(m===null||f!==null&&f>m)m=f;else return!1}return!0}function u(l){for(let m=0;m<l.length;m++){const c=(0,a.sV)(l[m]);if(c.timeField!==void 0&&c.timeIndex!==void 0)return!0}return!1}},58715:(G,A,e)=>{"use strict";e.d(A,{K:()=>i,Z:()=>g});var n=e(56375),a=e.n(n),o=e(9833);let r=()=>o.Ys;const i=u=>{r=u??r},g=u=>u?.timeZone&&!(0,n.isEmpty)(u.timeZone)?u.timeZone:r()??o.Ys},13446:(G,A,e)=>{"use strict";e.r(A),e.d(A,{isMathString:()=>i,isValid:()=>u,parse:()=>g,parseDateMath:()=>l,roundToFiscal:()=>m});var n=e(56375),a=e.n(n),o=e(85745);const r=["y","M","w","d","h","m","s","Q"];function i(c){return c?!!(typeof c=="string"&&(c.substring(0,3)==="now"||c.includes("||"))):!1}function g(c,d,f,E){if(c){if(typeof c!="string")return(0,o.v9)(c)?c:(0,n.isDate)(c)?(0,o.CQ)(c):void 0;{let v,h="",p,s;return c.substring(0,3)==="now"?(v=(0,o.GY)(f),h=c.substring(3)):(p=c.indexOf("||"),p===-1?(s=c,h=""):(s=c.substring(0,p),h=c.substring(p+2)),v=(0,o.CQ)(s,o.VJ)),h.length?l(h,v,d,E):v}}}function u(c){const d=g(c);return d&&(0,o.v9)(d)?d.isValid():!1}function l(c,d,f,E=0){const v=c.replace(/\s/g,""),h=(0,o.CQ)(d);let p=0;const s=v.length;for(;p<s;){const y=v.charAt(p++);let C,b,S,D=!1;if(y==="/")C=0;else if(y==="+")C=1;else if(y==="-")C=2;else return;if(isNaN(parseInt(v.charAt(p),10)))b=1;else if(v.length===2)b=parseInt(v.charAt(p),10);else{const T=p;for(;!isNaN(parseInt(v.charAt(p),10));)if(p++,p>10)return;b=parseInt(v.substring(T,p),10)}if(C===0&&b!==1)return;S=v.charAt(p++),S==="f"&&(S=v.charAt(p++),D=!0);const M=S;if((0,n.includes)(r,M))C===0?D?m(E,h,M,f):f?h.endOf(M):h.startOf(M):C===1?h.add(b,M):C===2&&h.subtract(b,M);else return}return h}function m(c,d,f,E){switch(f){case"y":return E?m(c,d,f,!1).add(11,"M").endOf("M"):d.subtract((d.month()-c+12)%12,"M").startOf("M"),d;case"Q":return E?m(c,d,f,!1).add(2,"M").endOf("M"):d.subtract((d.month()-c+12)%3,"M").startOf("M"),d;default:return}}},18678:(G,A,e)=>{"use strict";e.d(A,{IA:()=>d,Ks:()=>u,RA:()=>g,fI:()=>f,iX:()=>l,jO:()=>c,qb:()=>m,vT:()=>i});var n=e(89760),a=e(54541),o=e(48898);const r={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};function i(v,h=!0){if((0,n.Z)(v.start,v.end))return"";const p=(0,o.Z)(v);return Object.entries(p).reduce((s,[y,C])=>C&&C!==0&&!(y==="seconds"&&!h&&s)?s+`${s!==""?" ":""}${C}${r[y][0]}`:s,"")}function g(v){return v.split(" ").reduce((h,p)=>{const s=p.match(/(\d+)(.+)/),y=s?.[1],C=s?.[2];if(!(y&&C))return h;const b=Object.entries(r).find(([D,M])=>M?.includes(s[2])),S=parseInt(y,10);return b?{...h,[b[0]]:S}:h},{})}function u(v,h){return(0,a.Z)(v,h)}function l(v){const h=new Date;return u(h,v).getTime()-h.getTime()}function m(v){return!isNaN(Date.parse(v))}function c(v){for(const h of v.trim().split(" ")){const p=h.match(/(\d+)(.+)/);if(p===null||p.length!==3||!Object.entries(r).find(([y,C])=>C?.includes(p[2]))?.[0])return!1}return!0}function d(v){return E(v,["h","m","s","ms","us","\xB5s","ns"])}function f(v){return E(v,["y","M","w","d","h","m","s","ms","us","\xB5s","ns"])}function E(v,h){for(const p of v.trim().split(" ")){const s=p.match(/([0-9]*[.]?[0-9]+)(.+)/);if(s===null||s.length!==3||!h.includes(s[2]))return!1}return!0}},70991:(G,A,e)=>{"use strict";e.d(A,{Ji:()=>r,U6:()=>i,zf:()=>o});const n="YYYY-MM-DD HH:mm:ss",a="YYYY-MM-DD HH:mm:ss.SSS";class o{constructor(){this.fullDate=n,this.fullDateMS=a,this.interval={millisecond:"HH:mm:ss.SSS",second:"HH:mm:ss",minute:"HH:mm",hour:"MM/DD HH:mm",day:"MM/DD",month:"YYYY-MM",year:"YYYY"}}update(l){this.fullDate=l.fullDate,this.interval=l.interval,l.useBrowserLocale&&this.useBrowserLocale()}useBrowserLocale(){this.fullDate=r({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.fullDateMS=this.fullDate.replace("ss","ss.SSS"),this.interval.millisecond=r({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second).replace("ss","ss.SSS"),this.interval.second=r({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second),this.interval.minute=r({hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.minute),this.interval.hour=r({month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.hour),this.interval.day=r({month:"2-digit",day:"2-digit",hour12:!1},null,this.interval.day),this.interval.month=r({year:"numeric",month:"2-digit",hour12:!1},null,this.interval.month)}getTimeFieldUnit(l){return`time:${l?this.fullDateMS:this.fullDate}`}}function r(u,l,m){if(g())return m??n;!l&&navigator&&(l=[...navigator.languages]);const c=new Intl.DateTimeFormat(l||void 0,u),d=c.formatToParts(new Date),E={year:"YYYY",month:"MM",day:"DD",hour:c.resolvedOptions().hour12?"hh":"HH",minute:"mm",second:"ss",weekday:"ddd",era:"N",dayPeriod:"A",timeZoneName:"Z"};return d.map(v=>E[v.type]||v.value).join("")}const i=new o,g=()=>!("DateTimeFormat"in Intl)||!("formatToParts"in Intl.DateTimeFormat.prototype)},12537:(G,A,e)=>{"use strict";e.d(A,{E8:()=>u,Fm:()=>l,Hk:()=>m,dq:()=>i,lf:()=>g});var n=e(770),a=e.n(n),o=e(58715),r=e(70991);const i=(f,E)=>d(f,(0,o.Z)(E)).format(c(E)),g=(f,E)=>d(f,(0,o.Z)(E)).format(),u=(f,E)=>d(f,(0,o.Z)(E)).fromNow(),l=(f,E)=>d(f,(0,o.Z)(E)).format(`${r.U6.fullDate} z`),m=(f,E)=>d(f,(0,o.Z)(E)).format("z"),c=f=>f?.defaultWithMS?f?.format??r.U6.fullDateMS:f?.format??r.U6.fullDate,d=(f,E)=>{const v=f,h=a().tz.zone(E);if(h&&h.name)return a().utc(v).tz(h.name);switch(E){case"utc":return a().utc(v);default:return a().utc(v).local()}}},38646:(G,A,e)=>{"use strict";e.d(A,{$8:()=>r.$8,CQ:()=>o.CQ,C_:()=>o.C_,D2:()=>o.D2,E8:()=>g.E8,Fm:()=>g.Fm,GY:()=>o.GY,Hk:()=>g.Hk,IA:()=>l.IA,J:()=>u.J,Ji:()=>i.Ji,K7:()=>m.K,Kd:()=>o.Kd,Ks:()=>l.Ks,Ls:()=>o.Ls,Pr:()=>r.Pr,RA:()=>l.RA,RQ:()=>r.RQ,Rn:()=>n,U6:()=>i.U6,VJ:()=>o.VJ,Vs:()=>r.Vs,ZV:()=>r.ZV,Ze:()=>m.Z,cT:()=>a,dq:()=>g.dq,fI:()=>l.fI,iX:()=>l.iX,i_:()=>o.i_,ig:()=>o.ig,jN:()=>o.jN,jO:()=>l.jO,k4:()=>o.k4,lf:()=>g.lf,nA:()=>r.nA,np:()=>o.Ks,qb:()=>l.qb,v9:()=>o.v9,vT:()=>l.vT,zf:()=>i.zf,zh:()=>o.zh});var n=e(13446),a=e(71244),o=e(85745),r=e(72623),i=e(70991),g=e(12537),u=e(61385),l=e(18678),m=e(58715)},85745:(G,A,e)=>{"use strict";e.d(A,{CQ:()=>d,C_:()=>f,D2:()=>u,GY:()=>E,Kd:()=>i,Ks:()=>c,Ls:()=>p,VJ:()=>o,i_:()=>r,ig:()=>v,jN:()=>h,k4:()=>g,v9:()=>l,zh:()=>m});var n=e(55104),a=e.n(n);const o=a().ISO_8601,r=s=>{a().locale(s)},i=()=>a().locale(),g=()=>a().localeData(),u=s=>s===null||typeof s=="string"||typeof s=="number"||s instanceof Date||Array.isArray(s)&&s.every(y=>typeof y=="string"||typeof y=="number")||l(s),l=s=>a().isMoment(s),m=(s,y)=>a().utc(s,y),c=(s,y)=>a().duration(s,y),d=(s,y)=>a()(s,y),f=s=>d(s),E=(s,y,C)=>{if(s==="utc")return m(y,C);if(s&&s!=="browser"){let b;if(typeof y=="string"&&C?b=a().tz(y,C,s):b=a().tz(y,s),l(b))return b}return d(y,C)},v=s=>a().weekdays().findIndex(y=>y.toLowerCase()===s.toLowerCase()),h=s=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].findIndex(y=>y.toLowerCase()===s.toLowerCase()),p=s=>{const y="-weekStart",C=i().replace(y,""),b=s?h(s):-1;b!==-1?a().locale(C+y,{parentLocale:C,week:{dow:b}}):r(C)}},61385:(G,A,e)=>{"use strict";e.d(A,{J:()=>m});var n=e(56375),a=e.n(n),o=e(770),r=e.n(o),i=e(58715),g=e(13446),u=e(70991),l=e(85745);const m=(f,E)=>(0,l.v9)(f)?f:typeof f=="string"?c(f,E):d(f,E),c=(f,E)=>{if(f.indexOf("now")!==-1)return(0,g.isValid)(f)&&(0,g.parse)(f,E?.roundUp,E?.timeZone,E?.fiscalYearStartMonth)||r()();const v=(0,i.Z)(E),h=r().tz.zone(v),p=E?.format??u.U6.fullDate;if(h&&h.name)return r().tz(f,p,h.name);switch((0,n.lowerCase)(v)){case"utc":return r().utc(f,p);default:return r()(f,p)}},d=(f,E)=>{const v=f,h=(0,i.Z)(E),p=r().tz.zone(h);if(p&&p.name)return r().tz(v,p.name);switch((0,n.lowerCase)(h)){case"utc":return r().utc(v);default:return r()(v)}}},71244:(G,A,e)=>{"use strict";e.r(A),e.d(A,{calculateInterval:()=>S,convertRawToRange:()=>h,describeInterval:()=>T,describeTextRange:()=>d,describeTimeRange:()=>f,describeTimeRangeAbbreviation:()=>v,intervalToMs:()=>O,intervalToSeconds:()=>R,isFiscal:()=>s,isRelativeTime:()=>p,isRelativeTimeRange:()=>y,isValidTimeSpan:()=>E,msRangeToTimeString:()=>b,relativeToTimeRange:()=>L,roundInterval:()=>x,secondsToHms:()=>C,timeRangeToRelative:()=>I});var n=e(56375),a=e.n(n),o=e(13446),r=e(12537),i=e(85745),g=e(61385);const u={s:{display:"second"},m:{display:"minute"},h:{display:"hour"},d:{display:"day"},w:{display:"week"},M:{display:"month"},y:{display:"year"}},l=[{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],m=[{from:"now",to:"now+1m",display:"Next minute"},{from:"now",to:"now+5m",display:"Next 5 minutes"},{from:"now",to:"now+15m",display:"Next 15 minutes"},{from:"now",to:"now+30m",display:"Next 30 minutes"},{from:"now",to:"now+1h",display:"Next hour"},{from:"now",to:"now+3h",display:"Next 3 hours"},{from:"now",to:"now+6h",display:"Next 6 hours"},{from:"now",to:"now+12h",display:"Next 12 hours"},{from:"now",to:"now+24h",display:"Next 24 hours"},{from:"now",to:"now+2d",display:"Next 2 days"},{from:"now",to:"now+7d",display:"Next 7 days"},{from:"now",to:"now+30d",display:"Next 30 days"},{from:"now",to:"now+90d",display:"Next 90 days"},{from:"now",to:"now+6M",display:"Next 6 months"},{from:"now",to:"now+1y",display:"Next year"},{from:"now",to:"now+2y",display:"Next 2 years"},{from:"now",to:"now+5y",display:"Next 5 years"}],c={};(0,n.each)(l,P=>{c[P.from+" to "+P.to]=P}),(0,n.each)(m,P=>{c[P.from+" to "+P.to]=P});function d(P){const N=P.indexOf("+")!==0;P.indexOf("now")===-1&&(P=(N?"now-":"now")+P);let F=c[P+" to now"];if(F)return F;N?F={from:P,to:"now",display:""}:F={from:"now",to:P,display:""};const U=/^now([-+])(\d+)(\w)/.exec(P);if(U){const j=U[3],V=parseInt(U[2],10),_=u[j];_&&(F.display=N?"Last ":"Next ",F.display+=V+" "+_.display,F.section=_.section,V>1&&(F.display+="s"))}else F.display=F.from+" to "+F.to,F.invalid=!0;return F}function f(P,N){const F=c[P.from.toString()+" to "+P.to.toString()];if(F)return F.display;const U={timeZone:N};if((0,i.v9)(P.from)&&(0,i.v9)(P.to))return(0,r.dq)(P.from,U)+" to "+(0,r.dq)(P.to,U);if((0,i.v9)(P.from)){const j=o.parse(P.to,!0,"utc");return j?(0,r.dq)(P.from,U)+" to "+(0,r.E8)(j,U):""}if((0,i.v9)(P.to)){const j=o.parse(P.from,!1,"utc");return j?(0,r.E8)(j,U)+" to "+(0,r.dq)(P.to,U):""}return P.to.toString()==="now"?d(P.from).display:P.from.toString()+" to "+P.to.toString()}const E=P=>P.indexOf("$")===0||P.indexOf("+$")===0?!0:d(P).invalid!==!0,v=(P,N)=>{if((0,i.v9)(P.from))return(0,r.Hk)(P.from,{timeZone:N});const F=o.parse(P.from,!0);return F?(0,r.Hk)(F,{timeZone:N}):""},h=(P,N,F,U)=>{const j=(0,g.J)(P.from,{roundUp:!1,timeZone:N,fiscalYearStartMonth:F,format:U}),V=(0,g.J)(P.to,{roundUp:!0,timeZone:N,fiscalYearStartMonth:F,format:U});return o.isMathString(P.from)||o.isMathString(P.to)?{from:j,to:V,raw:P}:{from:j,to:V,raw:{from:j,to:V}}};function p(P){return typeof P=="string"?P.indexOf("now")>=0:!1}function s(P){return typeof P.raw.from=="string"&&P.raw.from.indexOf("f")>0?!0:typeof P.raw.to=="string"&&P.raw.to.indexOf("f")>0}function y(P){return p(P.from)||p(P.to)}function C(P){const N=Math.floor(P/31536e3);if(N)return N+"y";const F=Math.floor(P%31536e3/86400);if(F)return F+"d";const U=Math.floor(P%31536e3%86400/3600);if(U)return U+"h";const j=Math.floor(P%31536e3%86400%3600/60);if(j)return j+"m";const V=Math.floor(P%31536e3%86400%3600%60);if(V)return V+"s";const _=Math.floor(P*1e3);return _?_+"ms":"less than a millisecond"}function b(P){const N=Number((P/1e3).toFixed()),F=Math.floor(N/60/60),U=Math.floor(N/60)-F*60,j=Number((N%60).toFixed());let V=F?F+"h":"",_=U?U+"min":"",H=j?j+"sec":"";return V&&_?V=V+" ":V=V,(_||V)&&H?_=_+" ":_=_,V+_+H||"less than 1sec"}function S(P,N,F){let U=1;F&&(U=O(F));let j=x((P.to.valueOf()-P.from.valueOf())/N);return U>j&&(j=U),{intervalMs:j,interval:C(j/1e3)}}const D=/(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,M={y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001};function T(P){if(Number(P))return{sec:M.s,type:"s",count:parseInt(P,10)};const N=P.match(D);if(!N||!(0,n.has)(M,N[2]))throw new Error(`Invalid interval string, has to be either unit-less or end with one of the following units: "${Object.keys(M).join(", ")}"`);return{sec:M[N[2]],type:N[2],count:parseInt(N[1],10)}}function R(P){const N=T(P);return N.sec*N.count}function O(P){const N=T(P);return N.sec*1e3*N.count}function x(P){switch(!0){case P<10:return 1;case P<15:return 10;case P<35:return 20;case P<75:return 50;case P<150:return 100;case P<350:return 200;case P<750:return 500;case P<1500:return 1e3;case P<3500:return 2e3;case P<7500:return 5e3;case P<12500:return 1e4;case P<17500:return 15e3;case P<25e3:return 2e4;case P<45e3:return 3e4;case P<9e4:return 6e4;case P<21e4:return 12e4;case P<45e4:return 3e5;case P<75e4:return 6e5;case P<105e4:return 9e5;case P<15e5:return 12e5;case P<27e5:return 18e5;case P<54e5:return 36e5;case P<9e6:return 72e5;case P<162e5:return 108e5;case P<324e5:return 216e5;case P<864e5:return 432e5;case P<6048e5:return 864e5;case P<18144e5:return 6048e5;case P<36288e5:return 2592e6;default:return 31536e6}}function I(P,N=(0,i.CQ)()){const F=N.unix()-P.from.unix(),U=N.unix()-P.to.unix();return{from:F,to:U}}function L(P,N=(0,i.CQ)()){const F=(0,i.CQ)(N).subtract(P.from,"s"),U=P.to===0?(0,i.CQ)(N):(0,i.CQ)(N).subtract(P.to,"s");return{from:F,to:U,raw:{from:F,to:U}}}},72623:(G,A,e)=>{"use strict";e.d(A,{$8:()=>d,Pr:()=>m,RQ:()=>g,Vs:()=>u,ZV:()=>c,nA:()=>l});var n=e(56375),a=e.n(n),o=e(770),r=e.n(o),i=e(58715),g=(s=>(s.default="",s.localBrowserTime="browser",s.utc="utc",s))(g||{});const u=s=>{switch((0,i.Z)({timeZone:s})){case"browser":return"Local browser time";case"utc":return"UTC";default:return s}},l=s=>r().tz.zone(s),m=(s,y)=>{const C=f(s,y);return C||v(s,y)},c=(0,n.memoize)((s=!1)=>{const y=[];return s===!0?y.push("","browser","utc"):s&&y.push(...s),r().tz.names().reduce((C,b)=>{const S=p[b];return!Array.isArray(S)||S.length===0||C.push(b),C},y)}),d=(0,n.memoize)((s=!1)=>{const C=c(s).reduce((b,S)=>{const D=S.indexOf("/");if(D===-1){const T="";return b[T]=b[T]??[],b[T].push(S),b}const M=S.slice(0,D);return b[M]=b[M]??[],b[M].push(S),b},{});return Object.keys(C).map(b=>({name:b,zones:C[b]}))}),f=(s,y)=>{switch(s){case"utc":return{name:"Coordinated Universal Time",ianaName:"UTC",zone:s,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case"":{const C=(0,i.Z)(),S=C==="browser"||C==="utc"?f(C,y):v(C,y);return{countries:p[C]??[],abbreviation:"",offsetInMins:0,...S,ianaName:S?.ianaName??"",name:"Default",zone:s}}case"browser":{const C=r().tz.guess(!0),b=v(C,y);return{countries:p[C]??[],abbreviation:"Your local time",offsetInMins:new Date().getTimezoneOffset(),...b,name:"Browser Time",ianaName:b?.ianaName??"",zone:s}}default:return}},E=s=>/^(\+|\-).+/.test(s)?"":s,v=(s,y)=>{const C=r().tz.zone(s);if(C)return{name:s,ianaName:C.name,zone:s,countries:p[s]??[],abbreviation:E(C.abbr(y)),offsetInMins:C.utcOffset(y)}},h={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},p=(()=>r().tz.countries().reduce((s,y)=>r().tz.zonesForCountry(y).reduce((b,S)=>{b[S]||(b[S]=[]);const D=h[y];return D&&b[S].push({code:y,name:D}),b},s),{}))()},16293:(G,A,e)=>{"use strict";e.d(A,{F:()=>r});var n=e(39769),a=e(1050),o=e(18719);class r{constructor(){this.subscribers=new Map,this.emitter=new n.Z}publish(u){this.emitter.emit(u.type,u)}subscribe(u,l){return this.getStream(u).subscribe({next:l})}getStream(u){return new a.y(l=>{const m=c=>{l.next(c)};return this.emitter.on(u.type,m),this.subscribers.set(m,l),()=>{this.emitter.off(u.type,m),this.subscribers.delete(m)}})}newScopedBus(u,l){return new i([u],this,l)}emit(u,l){typeof u=="string"?this.emitter.emit(u,{type:u,payload:l}):this.emitter.emit(u.name,{type:u.name,payload:l})}on(u,l,m){if(l.wrapper=c=>{l(c.payload)},typeof u=="string"?this.emitter.on(u,l.wrapper):this.emitter.on(u.name,l.wrapper),m){const c=m.$on("$destroy",()=>{this.off(u,l),c()})}}off(u,l){if(typeof u=="string"){this.emitter.off(u,l.wrapper);return}this.emitter.off(u.name,l.wrapper)}removeAllListeners(){this.emitter.removeAllListeners();for(const[u,l]of this.subscribers)l.complete(),this.subscribers.delete(u)}}class i{constructor(u,l,m){this.path=u,this.eventBus=l,this.filterConfig=m??{onlyLocal:!1}}publish(u){u.origin||(u.origin=this),this.eventBus.publish(u)}filter(u){return this.filterConfig.onlyLocal?u.origin===this:!0}getStream(u){return this.eventBus.getStream(u).pipe((0,o.h)(this.filter.bind(this)))}subscribe(u,l){return this.getStream(u).subscribe({next:l})}removeAllListeners(){this.eventBus.removeAllListeners()}newScopedBus(u,l){return new i([...this.path,u],this,l)}}},43471:(G,A,e)=>{"use strict";e.d(A,{Ix:()=>u,Pl:()=>g,U6:()=>l,_m:()=>m,es:()=>a,n1:()=>i,v9:()=>r,xH:()=>o});var n=e(74442);class a extends n.R{}a.type="data-hover";class o extends n.m{}o.type="data-hover-clear";class r extends n.R{}r.type="data-select";class i extends n.R{}i.type="annotation-event";class g extends n.R{}g.type="dashboard-loaded";class u extends n.m{}u.type="datasource-updated-successfully";class l extends n.m{}l.type="datasource-test-succeeded";class m extends n.m{}m.type="datasource-test-failed"},47064:(G,A,e)=>{"use strict";e.d(A,{X:()=>a});const n=new Set;function a(o){if(n.has(o))throw new Error(`There is already an event defined with type '${o}'`);return n.add(o),{name:o}}},63852:(G,A,e)=>{"use strict";e.d(A,{Fb:()=>o.F,Ix:()=>r.Ix,Pl:()=>r.Pl,R_:()=>a.R,U6:()=>r.U6,Xw:()=>n.X,_m:()=>r._m,es:()=>r.es,mA:()=>a.m,n1:()=>r.n1,v9:()=>r.v9,xH:()=>r.xH});var n=e(47064),a=e(74442),o=e(16293),r=e(43471)},74442:(G,A,e)=>{"use strict";e.d(A,{R:()=>a,m:()=>n});class n{constructor(){this.type=this.__proto__.constructor.type}}class a extends n{constructor(r){super(),this.payload=r}}},82844:(G,A,e)=>{"use strict";e.d(A,{Z:()=>a});var n=e(73039);class a extends n.B{}},64282:(G,A,e)=>{"use strict";e.d(A,{U:()=>f,g:()=>v});var n=e(56375),a=e.n(n),o=e(45878),r=e(61385),i=e(85745),g=e(58309),u=e(97127),l=e(49433),m=e(1930),c=e(72211);const d={dateTimeAsIso:!0,dateTimeAsIsoNoDateIfToday:!0,dateTimeAsUS:!0,dateTimeAsUSNoDateIfToday:!0,dateTimeAsLocal:!0,dateTimeAsLocalNoDateIfToday:!0,dateTimeFromNow:!0};function f(p){if(!p||(0,n.isEmpty)(p)||!p.field)return E;const s=p.field,y=s.config??{},{palette:C}=p.theme.visualization;let b=y.unit,S=b&&(d[b]||b.startsWith("time:")),D=!1;if(s.type===g.fS.time&&!S){if(b="dateTimeAsSystem",S=!0,s.values&&s.values.length>1){let P=s.values[0],N=s.values[s.values.length-1];typeof P=="string"?(P=(0,r.J)(P).unix(),N=(0,r.J)(N).unix()):(P/=1e3,N/=1e3),D=Math.abs(N-P)<60}}else s.type===g.fS.boolean?(0,m.br)(b)||(b="bool"):!b&&s.type===g.fS.string&&(b="string");const M=b?.startsWith("currency"),T=(0,m.br)(b),R=s.type===g.fS.number,x=!S&&!M&&!T&&!(b==="locale")&&R&&y.decimals==null,I=(0,m.Cf)(b||"none"),L=(0,c.NI)(s,p.theme);return(P,N)=>{const{mappings:F}=y,U=b==="string";S&&typeof P=="string"&&(P=(0,i.zh)(P).valueOf());let j=U?NaN:(0,u.I)(P),V,_,H,z,K,Y;if(F&&F.length>0){const q=(0,l.vh)(F,P);q&&(q.text!=null&&(V=q.text),q.color!=null&&(z=p.theme.visualization.getColorByName(q.color)),q.icon!=null&&(K=q.icon))}else if(s.type===g.fS.enum){if(P==null)return{text:"",numeric:NaN};const q=+P;if(y&&y.type&&y.type.enum){const{text:X,color:te}=y.type.enum;if(V=X?X[q]:`${P}`,z=te?te[q]:void 0,z==null){const se=C[q%C.length];z=p.theme.visualization.getColorByName(se)}}}if(!Number.isNaN(j)){if(V==null&&!(0,n.isBoolean)(P)){let q;x&&N!=null?(q=I(j,N,null,p.timeZone,D),q.text=+q.text+""):q=I(j,y.decimals,null,p.timeZone,D),V=q.text,H=q.suffix,_=q.prefix}if(z==null){const q=L(j);z=q.color,Y=q.percent}}if(V==null&&(0,n.isArray)(P)&&(V=(0,n.join)(P,", ")),V==null&&(V=(0,n.toString)(P),V||(y.noValue?V=y.noValue:V="")),!z){const q=L(-1/0);z=q.color,Y=q.percent}const k={text:V,numeric:j,prefix:_,suffix:H,color:z};return K!=null&&(k.icon=K),Y!=null&&(k.percent=Y),k}}function E(p){return{text:(0,n.toString)(p),numeric:(0,u.I)(p)}}function v(){return p=>({text:(0,o.DP)(p)==="other"?`${JSON.stringify(p,h())}`:`${p}`,numeric:null})}const h=()=>{const p=new WeakSet;return(s,y)=>{if(typeof y=="object"&&y!==null){if(p.has(y))return;p.add(y)}return y}}},73859:(G,A,e)=>{"use strict";e.d(A,{QY:()=>v,WO:()=>d,YO:()=>h,fD:()=>E});var n=e(69980),a=e(57097),o=e.n(a),r=e(19737),i=e(30887),g=e(16515),u=e(14345),l=e(73039),m=e(72211),c=e(76784);const d=new l.B(()=>[{id:u.S.Fixed,name:"Single color",description:"Set a specific color",getCalculator:p},{id:u.S.Shades,name:"Shades of a color",description:"Select shades of a specific color",getCalculator:s},{id:u.S.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(y,C)=>(b,S,D)=>{const M=D??c.yM;return C.visualization.getColorByName(M.color)}},new f({id:u.S.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:y=>y.visualization.palette}),new f({id:u.S.PaletteClassicByName,name:"Classic palette (by series name)",isContinuous:!1,isByValue:!1,useSeriesName:!0,getColors:y=>y.visualization.palette.filter(C=>i.getContrastRatio(y.visualization.getColorByName(C),y.colors.background.primary)>=y.colors.contrastThreshold)}),new f({id:u.S.ContinuousGrYlRd,name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:y=>["green","yellow","red"]}),new f({id:u.S.ContinuousRdYlGr,name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:y=>["red","yellow","green"]}),new f({id:u.S.ContinuousBlYlRd,name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:y=>["dark-blue","super-light-yellow","dark-red"]}),new f({id:u.S.ContinuousYlRd,name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:y=>["super-light-yellow","dark-red"]}),new f({id:u.S.ContinuousBlPu,name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:y=>["blue","purple"]}),new f({id:u.S.ContinuousYlBl,name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:y=>["super-light-yellow","dark-blue"]}),new f({id:u.S.ContinuousBlues,name:"Blues",isContinuous:!0,isByValue:!0,getColors:y=>["panel-bg","dark-blue"]}),new f({id:u.S.ContinuousReds,name:"Reds",isContinuous:!0,isByValue:!0,getColors:y=>["panel-bg","dark-red"]}),new f({id:u.S.ContinuousGreens,name:"Greens",isContinuous:!0,isByValue:!0,getColors:y=>["panel-bg","dark-green"]}),new f({id:u.S.ContinuousPurples,name:"Purples",isContinuous:!0,isByValue:!0,getColors:y=>["panel-bg","dark-purple"]})]);class f{constructor(C){this.id=C.id,this.name=C.name,this.description=C.description,this.getNamedColors=C.getColors,this.isContinuous=C.isContinuous,this.isByValue=C.isByValue,this.useSeriesName=C.useSeriesName}getColors(C){return this.getNamedColors?this.colorCache&&this.colorCacheTheme===C?this.colorCache:(this.colorCache=this.getNamedColors(C).map(C.visualization.getColorByName),this.colorCacheTheme=C,this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,n.hD)(this.colorCache)),this.interpolator}getCalculator(C,b){const S=this.getColors(b);return this.isByValue?this.isContinuous?(D,M,T)=>this.getInterpolator()(M):(D,M,T)=>S[M*(S.length-1)]:this.useSeriesName?(D,M,T)=>S[Math.abs(o()(C.name))%S.length]:(D,M,T)=>{const R=C.state?.seriesIndex??0;return S[R%S.length]}}}function E(y){return d.get(y.config.color?.mode??u.S.Thresholds)}function v(y){return d.get(y??u.S.Thresholds)}function h(y,C){const b=E(y);if(!b.isByValue)return{color:b.getCalculator(y,C)(0,0),threshold:c.yM,percent:1};const S=(0,m.NI)(y,C),D=y.config.color?.seriesBy??"last",T=(0,g.Kx)({field:y,reducers:[D]})[D]??0;return S(T)}function p(y,C){return()=>C.visualization.getColorByName(y.config.color?.fixedColor??u.R)}function s(y,C){return()=>{const b=C.visualization.getColorByName(y.config.color?.fixedColor??u.R),S=[b],D=6,M=10,T=35,R=35;for(let x=1;x<D;x++)S.push((0,r.Z)(b).spin(x/D*M).brighten(x/D*T).toHexString()),S.push((0,r.Z)(b).spin(-(x/D)*M).darken(x/D*R).toHexString());const O=y.state?.seriesIndex??0;return S[O%S.length]}}},98068:(G,A,e)=>{"use strict";e.d(A,{E1:()=>E,HU:()=>d,cB:()=>p,dE:()=>h,gG:()=>S,nG:()=>s,n_:()=>f,pZ:()=>v,r5:()=>R,sg:()=>D});var n=e(56375),a=e.n(n),o=e(73891),r=e(45878),i=e(34103),g=e(16515),u=e(70274),l=e(58309),m=e(64282),c=e(94372);const d="__series.name",f="__field.displayName",E="__field.labels",v="__calc",h="__cell_",p=25,s=x=>{const{replaceVariables:I,reduceOptions:L,timeZone:P,theme:N}=x,F=L.calcs.length?L.calcs:[g.gz.last],U=[],j=(0,i.sq)(L.fields?{id:u.mi.byRegexp,options:L.fields}:{id:u.mi.numeric}),V=x.data??[],_=L.limit?L.limit:p;let H=!1;for(let z=0;z<V.length&&!H;z++){const K=V[z],{timeField:Y}=(0,r.sV)(K),k=new o.U(K);for(let q=0;q<K.fields.length&&!H;q++){const X=K.fields[q],te=X.getLinks;if(!j(X,K,V))continue;let se=X.config;X.state?.range&&(se={...se,...X.state?.range});let de=X.config.displayName??"";const re=X.display??(0,m.U)({field:X,theme:x.theme,timeZone:P});if(L.values)for(let fe=0;fe<X.values.length;fe++){X.state=C(X,U.length);const ie=O(X,fe),oe=re(X.values[fe]),ue=y(K,X,fe,I,ie),me=b(ue,x.fieldConfig,N);if(U.push({name:"",field:se,display:{...oe,title:ue,color:me??oe.color},view:k,colIndex:q,rowIndex:fe,getLinks:te?()=>te({valueRowIndex:fe}):()=>[],hasLinks:S(X)}),U.length>=_){H=!0;break}}else{const fe=(0,g.Kx)({field:X,reducers:F});for(const ie of F){const oe=X.state?.scopedVars??{};oe[v]={value:ie,text:ie};const ue=re(fe[ie]);de!==""?ue.title=I(de,oe):ue.title=(0,c.CZ)(X,K,V);let me;x.sparkline&&(me={y:K.fields[q],x:Y},ie===g.gz.last?me.highlightIndex=me.y.values.length-1:ie===g.gz.first&&(me.highlightIndex=0)),U.push({name:ie,field:se,display:ue,sparkline:me,view:k,colIndex:q,getLinks:te?()=>te({calculatedValue:ue}):()=>[],hasLinks:S(X)})}}}}return U.length===0&&U.push(M(x)),U};function y(x,I,L,P,N){const F=I.config.displayName;if(F)return F.indexOf(h)?P(R(F),N):P(F,N);let U=[],j=0;for(const V of x.fields)if(V!==I)if(V.type===l.fS.string){const _=V.values[L]??"",H=V.display?V.display(_).text:_;H.length>0&&U.push(H)}else V.type===l.fS.number&&j++;return(j||U.length===0)&&U.push((0,c.CZ)(I,x)),U.join(" ")}function C(x,I){return{...x.state,seriesIndex:I}}function b(x,I,L){for(const P of I.overrides)if(P.matcher.id==="byName"&&P.matcher.options===x){for(const N of P.properties)if(N.id==="color"&&N.value)return L.visualization.getColorByName(N.value.fixedColor)}return null}function S(x){return x.config?.links?.length?x.config.links.length>0:!1}function D(x){let I="",L="",P="",N="";for(let F=0;F<x.length;F++){const U=x[F].display;U.text&&U.text.length>L.length&&(L=U.text),U.title&&U.title.length>I.length&&(I=U.title),U.prefix&&U.prefix.length>P.length&&(P=U.prefix),U.suffix&&U.suffix.length>N.length&&(N=U.suffix)}return{text:L,title:I,suffix:N,prefix:P}}function M(x){const I="No data",{fieldConfig:L,timeZone:P}=x,{defaults:N}=L,U=(0,m.U)({field:{type:l.fS.other,config:N},theme:x.theme,timeZone:P})(null),j=T(U,I);return{name:I,field:{...N,max:N.max??0,min:N.min??0},display:{text:j,numeric:0,color:U.color},hasLinks:!1}}function T(x,I){return!x||(0,n.isEmpty)(x.text)?I:x.text}function R(x){return x.replace(/\${__cell_(\d+)(.*?)}|\[\[__cell_(\d+)(.*?)\]\]|\$__cell_(\d+)(\S*)/g,(I,L,P,N,F,U,j)=>`\${__data.fields[${L??N??U}]${P??F??j}}`)}function O(x,I){return x.state?.scopedVars?.__dataContext?{...x.state?.scopedVars,__dataContext:{value:{...x.state?.scopedVars?.__dataContext.value,rowIndex:I}}}:x.state?.scopedVars}},17338:(G,A,e)=>{"use strict";e.d(A,{Cc:()=>L,Of:()=>I,SM:()=>C,Xu:()=>y,gb:()=>R,oB:()=>x});var n=e(56375),a=e.n(n),o=e(85960),r=e(3517),i=e(1713),g=e(45878),u=e(73722),l=e(30887),m=e(16515),c=e(34103),d=e(58309),f=e(14345),E=e(12693),v=e(56582),h=e(64282),p=e(72211),s=e(88008);function y(N){let F=null,U=null;const j=[m.gz.min,m.gz.max];for(const V of N)for(const _ of V.fields)if(_.type===d.fS.number){const H=(0,m.Kx)({field:_,reducers:j}),z=H[m.gz.min],K=H[m.gz.max];(F===null||z<F)&&(F=z),(U===null||K>U)&&(U=K)}return{min:F,max:U,delta:(U??0)-(F??0)}}function C(N){if(!N.data)return[];const F=N.fieldConfig;if(!F)return N.data;const U=N.fieldConfigRegistry??s.N;let j=0,V;const _=[];if(F.overrides)for(const H of F.overrides){const z=c.Ls.get(H.matcher.id);z&&_.push({match:z.get(H.matcher.options),properties:H.properties})}return N.data.map((H,z)=>{const K={...H};K.fields=K.fields.map(Y=>({...Y,config:(0,n.cloneDeep)(Y.config),state:{...Y.state}}));for(const Y of K.fields){const k=Y.config;Y.state.scopedVars={__dataContext:{value:{data:N.data,frame:K,frameIndex:z,field:Y}}};const q={field:Y,data:N.data,dataFrameIndex:z,replaceVariables:N.replaceVariables,fieldConfigRegistry:U};M(k,F.defaults,q);for(const de of _)if(de.match(Y,K,N.data))for(const re of de.properties)D(k,re,q);let X=Y.type;if(!X||X===d.fS.other){const de=(0,g.fu)(Y);de&&(X=de)}const{range:te,newGlobalRange:se}=b(k,Y,V,N.data);if(V=se,Y.state.seriesIndex=j,Y.state.range=te,Y.type=X,Y.type!==d.fS.time&&j++,Y.display=(0,h.U)({field:Y,theme:N.theme,timeZone:N.timeZone}),Y.config.unit!=="dateTimeFromNow"&&(Y.display=S(Y.display,2500)),Y.getLinks=x(K,Y,Y.state.scopedVars,q.replaceVariables,N.timeZone,N.dataLinkPostProcessor),Y.type===d.fS.nestedFrames)for(const de of Y.values)for(let re=0;re<de.length;re++)for(const fe of de[re].fields)fe.state={scopedVars:{__dataContext:{value:{data:de,frame:de[re],frameIndex:re,field:fe}}}},fe.getLinks=x(de[re],fe,fe.state.scopedVars,q.replaceVariables,N.timeZone,N.dataLinkPostProcessor)}return K})}function b(N,F,U,j){if(F.type!==d.fS.number||(0,n.isNumber)(N.min)&&(0,n.isNumber)(N.max))return{newGlobalRange:U};if(N.fieldMinMax){const z=(0,p.dz)(F),K=N.min??z.min,Y=N.max??z.max;return{range:{min:K,max:Y,delta:Y-K},newGlobalRange:U}}const V=U??y(j),_=N.min??V.min,H=N.max??V.max;return{range:{min:_,max:H,delta:H-_},newGlobalRange:V}}function S(N,F=2500){const U=new Map;for(let j=-1;j<=15;j++)U.set(j,new Map);return(j,V)=>{let _=U.get(V??-1),H=_.get(j);return H||(_.size===F&&_.clear(),H=N(j,V),H.color&&(H.color=(0,l.asHexString)(H.color)),_.set(j,H)),H}}function D(N,F,U){const V=U.fieldConfigRegistry.getIfExists(F.id);if(!V)return;const _=V.process(F.value,U,V.settings);_==null?V.isCustom&&N.custom?(0,n.unset)(N.custom,V.path):(0,n.unset)(N,V.path):V.isCustom?(N.custom||(N.custom={}),(0,n.set)(N.custom,V.path,_)):(0,n.set)(N,V.path,_)}function M(N,F,U){N.links&&F.links&&(N.links=[...N.links,...F.links]);for(const j of U.fieldConfigRegistry.list())j.isCustom&&!N.custom&&(N.custom={}),T(j.isCustom?N.custom:N,j.isCustom?F.custom:F,j,U);R(N)}function T(N,F,U,j){const V=(0,n.get)(N,U.path);if(V==null){const _=j.fieldConfigRegistry.getIfExists(U.id);if(!_)return;if(_&&_.shouldApply(j.field)){const H=_.process((0,n.get)(F,_.path),j,_.settings);H!=null&&(0,n.set)(N,_.path,H)}}}function R(N){const{thresholds:F}=N;if(N.color?N.color.mode||delete N.color:F&&(N.color={mode:f.S.Thresholds}),N.hasOwnProperty("min")&&N.hasOwnProperty("max")&&N.min>N.max){const U=N.max;N.max=N.min,N.min=U}}const O=N=>{const{link:F,linkModel:U,dataLinkScopedVars:j,field:V,replaceVariables:_}=N;return F.internal?(0,v._)({link:F,internalLink:F.internal,scopedVars:j,field:V,range:F.internal.range,replaceVariables:_}):U},x=(N,F,U,j,V,_)=>H=>!F.config.links||F.config.links.length===0?[]:F.config.links.map(K=>{const Y=P(N,F,U),k={...U,__dataContext:Y},q=(te,se,de)=>j(te,{...k,...se},de);H.valueRowIndex!==void 0&&!isNaN(H.valueRowIndex)?Y.value.rowIndex=H.valueRowIndex:Y.value.calculatedValue=H.calculatedValue;let X;if(K.onClick)X={href:K.url,title:j(K.title||"",k),target:K.targetBlank?"_blank":void 0,onClick:(te,se)=>{K.onClick({origin:se??F,e:te,replaceVariables:q})},origin:F};else{let te=K.onBuildUrl?K.onBuildUrl({origin:F,replaceVariables:q}):K.url;te&&(te=E.u.assureBaseUrl(te.replace(/\n/g,"")),te=j(te,k,i.b8.UriEncode),te=E.u.processUrl(te)),X={href:te,title:j(K.title||"",k),target:K.targetBlank?"_blank":void 0,origin:F}}return(_||O)({frame:N,field:F,dataLinkScopedVars:k,replaceVariables:j,config:H,link:K,linkModel:X})}).filter(K=>!!K);function I(N){if(!N||N.length===0)return[];const F=[...N],U=(0,h.g)();for(let j=0;j<F.length;j++){const V={...F[j]},_=[...V.fields];for(let H=0;H<_.length;H++)_[H]={..._[H],display:U};F[j]={...V,fields:_}}return F}function L(N,F,U,j,V,_,H){const z=N?.fieldConfigRegistry,K=(0,o.useRef)(0),Y=(0,r.Z)(U?.series);return(0,o.useMemo)(()=>{if(!z||!F||!U)return;const k=U?.series;U.structureRev==null&&k&&Y&&!(0,u.nl)(k,Y,u.Ch)&&K.current++;const q={structureRev:K.current,...U,series:C({data:k,fieldConfig:F,fieldConfigRegistry:z,replaceVariables:_,theme:V,timeZone:j,dataLinkPostProcessor:H})};return U.annotations&&U.annotations.length>0&&(q.annotations=C({data:U.annotations,fieldConfig:{defaults:{},overrides:[]},replaceVariables:_,theme:V,timeZone:j,dataLinkPostProcessor:H})),q},[z,F,U,Y,j,V,_,H])}function P(N,F,U){return U?.__dataContext?{value:{...U.__dataContext.value}}:{value:{frame:N,field:F,data:[N]}}}},94372:(G,A,e)=>{"use strict";e.d(A,{CZ:()=>u,U$:()=>m,UY:()=>g,nf:()=>i});var n=e(56375),a=e.n(n),o=e(58309),r=e(5e4);function i(d,f){if(d.name)return d.name;const E=[];for(const v of d.fields)if(v.type!==o.fS.time){if(E.length>1)break;E.push(u(v,d))}return E.length===1?E[0]:f===void 0&&d.fields.length>0?d.fields.filter(v=>v.type!==o.fS.time).map(v=>u(v,d)).join(", "):d.refId?`Series (${d.refId})`:`Series (${f})`}function g(d){d.forEach(f=>{f.fields.forEach(E=>{u(E,f,d)})})}function u(d,f,E){const v=d.state?.displayName,h=!!(E&&E.length>1);if(v&&h===d.state?.multipleFrames)return v;const p=l(d,f,E);return d.state=d.state||{},d.state.displayName=p,d.state.multipleFrames=h,p}function l(d,f,E){const v=d.config?.displayName&&d.config?.displayName.length,h=!!f?.meta?.timeCompare?.isTimeShiftQuery;let p=v?d.config.displayName:d.name;if(v)return h?`${p} (comparison)`:p;if(f&&d.config?.displayNameFromDS)return h?`${d.config.displayNameFromDS} (comparison)`:d.config.displayNameFromDS;if(d.type===o.fS.time&&!d.labels)return p??o.Ls;let s=[],y=!1;if(E&&E.length>1){for(let S=1;S<E.length;S++)if(E[S].name!==E[S-1].name){y=!0;break}}let C=!1,b=!1;if(y&&f?.name&&(s.push(f.name),C=!0),d.name&&d.name!==o.M5&&s.push(d.name),d.labels&&f){let S=c(E??[f]);if(S)d.labels[S]&&(s.push(d.labels[S]),b=!0);else{let D=(0,r.aA)(d.labels);D&&(s.push(D),b=!0)}}return f&&!C&&!b&&d.name===o.M5&&f.name&&f.name.length>0&&(s.push(f.name),C=!0),s.length?p=s.join(" "):d.name?p=d.name:p=o.M5,p===d.name&&(p=m(d,f)),h&&(p=`${p} (comparison)`),p}function m(d,f){let E=0,v=!1;if(f)for(let h=0;h<f.fields.length;h++){const p=f.fields[h];if((0,n.isEqual)(d,p)){if(v=!0,E>0){E++;break}}else if(d.name===p.name&&(E++,v))break}return E?`${d.name} ${E}`:d.name}function c(d){let f=null;for(let E=0;E<d.length;E++){const v=d[E];for(const h of v.fields)if(h.labels){for(const p in h.labels)if(f===null)f=p;else if(p!==f)return null}}return f}},32205:(G,A,e)=>{"use strict";e.d(A,{z:()=>i});var n=e(56375),a=e.n(n),o=e(1930),r=e(64282);function i(g){return new Proxy({},{get:(u,l)=>{let m=g.frame.fields.find(E=>l===E.name);if(!m){const E=(0,n.toNumber)(l);m=g.frame.fields[E]}if(m||(m=g.frame.fields.find(E=>l===E.config.displayName)),m||(m=g.frame.fields.find(E=>E.labels?l===E.labels.name:!1)),!m)return;const c=m.display??(0,r.U)(),d=m.values[g.rowIndex],f=c(d);return f.toString=()=>(0,o.zc)(f),f}})}},96641:(G,A,e)=>{"use strict";e.d(A,{AE:()=>r.AE,CZ:()=>c.CZ,Cc:()=>l.Cc,E1:()=>n.E1,HU:()=>n.HU,N6:()=>o.N,NI:()=>d.NI,NN:()=>r.NN,Of:()=>l.Of,Oh:()=>r.Oh,QY:()=>i.QY,SM:()=>l.SM,SO:()=>o.S,U$:()=>c.U$,UY:()=>c.UY,U_:()=>a.U,VB:()=>r.VB,W0:()=>r.W0,W4:()=>r.W4,WO:()=>i.WO,YO:()=>i.YO,ZD:()=>g.Z,ZN:()=>r.ZN,bP:()=>u.bP,cB:()=>n.cB,dE:()=>n.dE,dz:()=>d.dz,fD:()=>i.fD,gE:()=>a.g,gG:()=>n.gG,gb:()=>l.gb,kG:()=>r.kG,m1:()=>u.m1,nG:()=>n.nG,n_:()=>n.n_,nf:()=>c.nf,op:()=>r.op,pZ:()=>n.pZ,r5:()=>n.r5,sg:()=>n.sg,uj:()=>r.uj,xD:()=>d.xD,zv:()=>m.z});var n=e(98068),a=e(64282),o=e(88008),r=e(17945),i=e(73859),g=e(82844),u=e(76784),l=e(17338),m=e(32205),c=e(94372),d=e(72211)},17945:(G,A,e)=>{"use strict";e.d(A,{AE:()=>g,NN:()=>r,Oh:()=>a,VB:()=>m,W0:()=>o,W4:()=>c,ZN:()=>l,kG:()=>n,op:()=>u,uj:()=>i});const n=d=>d,a=(d,f,E)=>{if(d!=null)return parseFloat(d)},o=(d,f,E)=>(delete f.field?.state?.displayName,u(d,f,E)),r=(d,f,E)=>d,i=(d,f,E)=>d,g=(d,f,E)=>d,u=(d,f,E)=>d==null?d:E&&E.expandTemplateVars&&f.replaceVariables&&typeof d=="string"?f.replaceVariables(d,f.field.state.scopedVars):`${d}`,l=(d,f,E)=>d,m=(d,f,E)=>d,c=(d,f,E)=>d},72211:(G,A,e)=>{"use strict";e.d(A,{NI:()=>u,dz:()=>m,xD:()=>c});var n=e(56375),a=e.n(n),o=e(16515),r=e(58309),i=e(73859),g=e(76784);function u(d,f){if(d.type===r.fS.boolean)return l(d,f);const v=(0,i.fD)(d).getCalculator(d,f),h=d.state?.range??m(d);return p=>{let s=0;p!==-1/0&&(s=(p-h.min)/h.delta,Number.isNaN(s)&&(s=0));const y=(0,g.pD)(d,p,s);return{percent:s,threshold:y,color:v(p,s,y)}}}function l(d,f){const E={color:f.visualization.getColorByName("green"),percent:1,threshold:void 0},v={color:f.visualization.getColorByName("red"),percent:0,threshold:void 0},h=(0,i.fD)(d);if(h.isContinuous&&h.getColors){const p=h.getColors(f);E.color=p[p.length-1],v.color=p[0]}return p=>p?E:v}function m(d){if(d.type!==r.fS.number)return{min:0,max:100,delta:100};let f=d.config.min,E=d.config.max;if(!(0,n.isNumber)(f)||!(0,n.isNumber)(E))if(d.values&&d.values.length){const v=(0,o.Kx)({field:d,reducers:[o.gz.min,o.gz.max]});(0,n.isNumber)(f)||(f=v[o.gz.min]),(0,n.isNumber)(E)||(E=v[o.gz.max])}else f=0,E=100;return{min:f,max:E,delta:E-f}}function c(d,f){const{config:E}=d;let{min:v,max:h}=E;return(0,n.isNumber)(v)&&(0,n.isNumber)(h)?E:f||!d.state?.range?{...E,...m(d)}:{...E,...d.state.range}}},88008:(G,A,e)=>{"use strict";e.d(A,{N:()=>o,S:()=>r});var n=e(73039),a=e(82844);const o=new a.Z,r=new n.B},76784:(G,A,e)=>{"use strict";e.d(A,{bP:()=>g,m1:()=>r,pD:()=>i,yM:()=>o});var n=e(14345),a=e(37634);const o={value:0,color:n.R};function r(u,l){if(!l||l.length===0)return o;let m=l[0];for(const c of l)if(u>=c.value)m=c;else break;return m}function i(u,l,m){const{thresholds:c}=u.config;return c?.mode===a.H.Percentage?r(m*100,c?.steps):r(l,c?.steps)}function g(u){return u.sort((l,m)=>l.value-m.value)}},48575:(G,A,e)=>{"use strict";e.d(A,{q:()=>n.q1});var n=e(1713)},11512:(G,A,e)=>{"use strict";e.r(A),e.d(A,{AnnotationChangeEvent:()=>d.n1,AppendedVectors:()=>r.l$,ArrayDataFrame:()=>i.iB,ArrayVector:()=>r.Gt,AsNumberVector:()=>r.sq,BinaryOperationID:()=>n.LH,BinaryOperationVector:()=>r.rM,BusEventBase:()=>d.mA,BusEventWithPayload:()=>d.R_,ByNamesMatcherMode:()=>g.Ys,CSVHeaderStyle:()=>n.x5,CSVReader:()=>n.QM,CircularDataFrame:()=>i.a2,CircularVector:()=>r.dV,ConstantVector:()=>r.uI,DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:()=>c.cB,DashboardLoadedEvent:()=>d.Pl,DataFrameView:()=>i.US,DataHoverClearEvent:()=>d.xH,DataHoverEvent:()=>d.es,DataLinkBuiltInVars:()=>n.WC,DataSelectEvent:()=>d.v9,DataSourcePluginContextProvider:()=>b.n,DataSourceTestFailed:()=>d._m,DataSourceTestSucceeded:()=>d.U6,DataSourceUpdatedSuccessfully:()=>d.Ix,DataTransformerID:()=>g.Wk,DocsId:()=>n.xV,EventBusSrv:()=>d.Fb,FieldCache:()=>i.N,FieldConfigEditorBuilder:()=>n.vo,FieldConfigOptionsRegistry:()=>c.ZD,FieldMatcherID:()=>g.mi,FormattedVector:()=>r.$Y,FrameGeometrySourceMode:()=>v.q,FrameMatcherID:()=>g.E4,ISO_8601:()=>u.VJ,IndexVector:()=>r.rm,InternalTimeZones:()=>u.RQ,LayoutModes:()=>h.l,LegacyMappingType:()=>n.HU,MISSING_VALUE:()=>i.Yi,MatcherID:()=>g.Ff,MutableDataFrame:()=>i.vA,NodeGraphDataFrameFieldNames:()=>n.zG,PanelOptionsEditorBuilder:()=>n.rt,PanelPlugin:()=>p.c,PluginContextProvider:()=>C.b,ReducerID:()=>g.gz,Registry:()=>n.Bz,SortedVector:()=>r.oH,StreamingDataFrame:()=>i.Av,StreamingFrameAction:()=>i.T0,SystemDateFormatsState:()=>u.zf,ThemeContext:()=>f.Ni,TransformerCategory:()=>g.wf,UnaryOperationID:()=>n.T1,VAR_CALC:()=>c.pZ,VAR_CELL_PREFIX:()=>c.dE,VAR_FIELD_LABELS:()=>c.E1,VAR_FIELD_NAME:()=>c.n_,VAR_SERIES_NAME:()=>c.HU,ValueMatcherID:()=>g.mE,addDurationToDate:()=>u.Ks,anySeriesWithTimeField:()=>i.m$,anyToNumber:()=>n.IX,applyFieldOverrides:()=>c.SM,applyNullInsertThreshold:()=>g.wb,applyRawFieldOverrides:()=>c.Of,arrayToDataFrame:()=>i.Pc,arrayUtils:()=>n.sq,binaryOperators:()=>n.nk,booleanOverrideProcessor:()=>c.W4,booleanValueFormatter:()=>m.IR,buildHistogram:()=>g.gY,cacheFieldDisplayNames:()=>c.UY,classicColors:()=>n.ZC,closestIdx:()=>i.Ko,colorManipulator:()=>f.r8,compareArrayValues:()=>i.nl,compareDataFrameStructures:()=>i.Ch,containsSearchFilter:()=>n.bf,convertOldAngularValueMappings:()=>n.Jb,createDataFrame:()=>i.at,createDimension:()=>i.q2,createFieldConfigRegistry:()=>y.j,createTheme:()=>f.jG,dataFrameFromJSON:()=>i.vP,dataFrameToJSON:()=>i.Y,dataLinksOverrideProcessor:()=>c.NN,dateMath:()=>u.Rn,dateTime:()=>u.CQ,dateTimeAsMoment:()=>u.C_,dateTimeForTimeZone:()=>u.GY,dateTimeFormat:()=>u.dq,dateTimeFormatISO:()=>u.lf,dateTimeFormatTimeAgo:()=>u.E8,dateTimeFormatWithAbbrevation:()=>u.Fm,dateTimeParse:()=>u.J,decodeFieldValueEntities:()=>i.Jy,decodeFieldValueEnums:()=>i.Ib,deprecationWarning:()=>n.d9,displayNameOverrideProcessor:()=>c.W0,doStandardCalcs:()=>g.uP,durationToMilliseconds:()=>u.iX,ensureTimeField:()=>g.J_,escapeRegex:()=>l.yI,escapeStringForRegex:()=>l.GE,eventFactory:()=>d.Xw,fieldColorModeRegistry:()=>c.WO,fieldMatchers:()=>g.Ls,fieldReducers:()=>g.TB,filterFieldConfigOverrides:()=>s.aS,findCommonLabels:()=>n.FT,findHighlightChunksInText:()=>l.Xt,findMatchesInText:()=>l.lu,findUniqueLabels:()=>n.IU,fixCellTemplateExpressions:()=>c.r5,formatLabels:()=>n.aA,formattedValueToString:()=>m.zc,frameMatchers:()=>g.Ac,getActiveThreshold:()=>c.m1,getAllValuesFromDimension:()=>i.r7,getBuiltInThemes:()=>f.d5,getColumnFromDimension:()=>i.$q,getColumnsFromDimension:()=>i.GV,getDataFrameRow:()=>i.fh,getDataSourceRef:()=>n.iU,getDataSourceUID:()=>n.BT,getDimensionByName:()=>i.YP,getDisplayProcessor:()=>c.U_,getDisplayValueAlignmentFactors:()=>c.sg,getFieldColorMode:()=>c.QY,getFieldColorModeForField:()=>c.fD,getFieldConfigWithMinMax:()=>c.xD,getFieldDisplayName:()=>c.CZ,getFieldDisplayValues:()=>c.nG,getFieldDisplayValuesProxy:()=>c.zv,getFieldMatcher:()=>g.sq,getFieldSeriesColor:()=>c.YO,getFieldTypeFromValue:()=>i.DP,getFlotPairs:()=>n.k8,getFlotPairsConstant:()=>n.HE,getFrameDisplayName:()=>c.nf,getFrameMatchers:()=>g.b9,getHistogramFields:()=>g.qr,getLinksSupplier:()=>M.oB,getLocale:()=>u.Kd,getLocaleData:()=>u.k4,getMinMaxAndDelta:()=>c.dz,getPanelOptionsWithDefaults:()=>s.d4,getProcessedDataFrames:()=>i.F9,getRawDisplayProcessor:()=>c.gE,getScaleCalculator:()=>c.NI,getSearchFilterScopedVar:()=>n._6,getSeriesTimeStep:()=>n.e4,getThemeById:()=>f.jY,getTimeField:()=>i.sV,getTimeZone:()=>u.Ze,getTimeZoneGroups:()=>u.$8,getTimeZoneInfo:()=>u.Pr,getTimeZones:()=>u.ZV,getUniqueFieldName:()=>c.U$,getValueFormat:()=>m.Cf,getValueFormats:()=>m.QW,getValueFormatterIndex:()=>m.Td,getValueFromDimension:()=>i.jC,getValueMatcher:()=>g.IG,getWeekdayIndex:()=>u.ig,getWeekdayIndexByEnglishName:()=>u.jN,getZone:()=>u.nA,guessDecimals:()=>n.dP,guessFieldTypeForField:()=>i.fu,guessFieldTypeFromNameAndValue:()=>i._m,guessFieldTypeFromValue:()=>i.LI,guessFieldTypes:()=>i.SX,hasLinks:()=>c.gG,hasMsResolution:()=>n.fp,histogramBucketSizes:()=>g.Zi,histogramFieldInfo:()=>g.py,histogramFieldsToFrame:()=>g.zM,histogramFrameBucketMaxFieldName:()=>g.cO,histogramFrameBucketMinFieldName:()=>g.wL,histogramTransformer:()=>g.Op,identityOverrideProcessor:()=>c.kG,incrRound:()=>g.Jz,incrRoundDn:()=>g.mB,incrRoundUp:()=>g.UO,intervalToAbbreviatedDurationString:()=>u.vT,isBooleanUnit:()=>m.br,isCustomFieldProp:()=>s.Lc,isDataFrame:()=>i.aY,isDataFrameWithValue:()=>i.z4,isDataSourcePluginContext:()=>D.v,isDataSourceRef:()=>n.cv,isDateTime:()=>u.v9,isDateTimeInput:()=>u.D2,isEmptyObject:()=>n.Qr,isHistogramFrameBucketMaxFieldName:()=>g.kl,isHistogramFrameBucketMinFieldName:()=>g.Ok,isLikelyAscendingVector:()=>g.lP,isReducerID:()=>g.CC,isStandardFieldProp:()=>s._k,isTableData:()=>i.Ji,isTimeSeriesField:()=>i.jM,isTimeSeriesFrame:()=>i.pP,isTimeSeriesFrames:()=>i.xI,isValidDate:()=>u.qb,isValidDuration:()=>u.jO,isValidGoDuration:()=>u.IA,isValidGrafanaDuration:()=>u.fI,localTimeFormat:()=>u.Ji,locale:()=>m.SP,locationUtil:()=>n.uT,makeClassES5Compatible:()=>n.s2,mapInternalLinkToExplore:()=>n._N,matchAllLabels:()=>n.VS,matchPluginId:()=>n.Sp,monacoLanguageRegistry:()=>E.F,numberOverrideProcessor:()=>c.Oh,objRemoveUndefined:()=>n.Hh,onUpdateDatasourceJsonDataOption:()=>n._R,onUpdateDatasourceJsonDataOptionChecked:()=>n.hz,onUpdateDatasourceJsonDataOptionSelect:()=>n.nx,onUpdateDatasourceOption:()=>n.z_,onUpdateDatasourceResetOption:()=>n.HD,onUpdateDatasourceSecureJsonDataOption:()=>n.fi,onUpdateDatasourceSecureJsonDataOptionSelect:()=>n.TX,outerJoinDataFrames:()=>g.JP,parseDuration:()=>u.RA,parseFlags:()=>l.TL,parseLabels:()=>n.J8,preProcessPanelData:()=>i.zR,rangeUtil:()=>u.cT,readCSV:()=>n.uP,reduceField:()=>g.Kx,renderLegendFormat:()=>n.Wn,renderMarkdown:()=>l.ap,renderTextPanelMarkdown:()=>l.xH,restoreCustomOverrideRules:()=>s.__,reverseDataFrame:()=>i.Y6,roundDecimals:()=>n.O9,scaledUnits:()=>m.Qj,selectOverrideProcessor:()=>c.AE,serializeStateToUrlParam:()=>n.S,setLocale:()=>u.i_,setTimeZoneResolver:()=>u.K7,setWeekStart:()=>u.Ls,shallowCompare:()=>i.Vv,simpleCountUnit:()=>m.SR,sortDataFrame:()=>i.aK,sortThresholds:()=>c.bP,standardEditorsRegistry:()=>c.SO,standardFieldConfigEditorRegistry:()=>c.N6,standardTransformers:()=>g.YR,standardTransformersRegistry:()=>g.Ze,stringFormater:()=>m.vb,stringOverrideProcessor:()=>c.op,stringStartsAsRegEx:()=>l.oH,stringToJsRegex:()=>l.jO,stringToMs:()=>l.e0,systemDateFormats:()=>u.U6,textUtil:()=>l.QX,thresholdsOverrideProcessor:()=>c.ZN,timeZoneAbbrevation:()=>u.Hk,timeZoneFormatUserFriendly:()=>u.Vs,toCSV:()=>n.MJ,toDataFrame:()=>i.g0,toDataFrameDTO:()=>i.og,toDuration:()=>u.np,toFilteredDataFrameDTO:()=>i.Aw,toFixed:()=>m.FH,toFixedScaled:()=>m.bn,toFixedUnit:()=>m.q2,toFloatOrUndefined:()=>l.dz,toIntegerOrUndefined:()=>l.By,toLegacyResponseData:()=>i.Zr,toNumberString:()=>l.PF,toOption:()=>n.Er,toPascalCase:()=>l.Mh,toURLRange:()=>n.R_,toUtc:()=>u.zh,transformDataFrame:()=>g.Hz,unEscapeStringFromRegex:()=>l.x6,unaryOperators:()=>n.mL,unitOverrideProcessor:()=>c.VB,updateDatasourcePluginJsonDataOption:()=>n.tp,updateDatasourcePluginOption:()=>n.fd,updateDatasourcePluginResetOption:()=>n.Mf,updateDatasourcePluginSecureJsonDataOption:()=>n.uw,urlUtil:()=>n.Cj,useFieldOverrides:()=>c.Cc,usePluginContext:()=>S.gp,validateFieldConfig:()=>c.gb,valueMappingsOverrideProcessor:()=>c.uj,valueMatchers:()=>g.U8,vectorator:()=>r.sD,withLoadingIndicator:()=>n.xc});var n=e(92695),a=e(60487),o={};for(const T in a)["default","LayoutModes","PanelPlugin","getPanelOptionsWithDefaults","filterFieldConfigOverrides","restoreCustomOverrideRules","isCustomFieldProp","isStandardFieldProp","createFieldConfigRegistry","PluginContextProvider","DataSourcePluginContextProvider","usePluginContext","isDataSourcePluginContext","getLinksSupplier","BinaryOperationID","CSVHeaderStyle","CSVReader","DataLinkBuiltInVars","DocsId","FieldConfigEditorBuilder","LegacyMappingType","NodeGraphDataFrameFieldNames","PanelOptionsEditorBuilder","Registry","UnaryOperationID","anyToNumber","arrayUtils","binaryOperators","classicColors","containsSearchFilter","convertOldAngularValueMappings","deprecationWarning","findCommonLabels","findUniqueLabels","formatLabels","getDataSourceRef","getDataSourceUID","getFlotPairs","getFlotPairsConstant","getSearchFilterScopedVar","getSeriesTimeStep","guessDecimals","hasMsResolution","isDataSourceRef","isEmptyObject","locationUtil","makeClassES5Compatible","mapInternalLinkToExplore","matchAllLabels","matchPluginId","objRemoveUndefined","onUpdateDatasourceJsonDataOption","onUpdateDatasourceJsonDataOptionChecked","onUpdateDatasourceJsonDataOptionSelect","onUpdateDatasourceOption","onUpdateDatasourceResetOption","onUpdateDatasourceSecureJsonDataOption","onUpdateDatasourceSecureJsonDataOptionSelect","parseLabels","readCSV","renderLegendFormat","roundDecimals","serializeStateToUrlParam","toCSV","toOption","toURLRange","unaryOperators","updateDatasourcePluginJsonDataOption","updateDatasourcePluginOption","updateDatasourcePluginResetOption","updateDatasourcePluginSecureJsonDataOption","urlUtil","withLoadingIndicator"].indexOf(T)<0&&(o[T]=()=>a[T]);e.d(A,o);var r=e(97573),i=e(11935),g=e(77861),u=e(38646),l=e(86734),m=e(20154),c=e(96641),d=e(63852),f=e(12138),E=e(43080),v=e(48575),h=e(76923),p=e(12932),s=e(24372),y=e(13708),C=e(77786),b=e(93821),S=e(23882),D=e(46707),M=e(17338)},43080:(G,A,e)=>{"use strict";e.d(A,{F:()=>n.F});var n=e(35853)},35853:(G,A,e)=>{"use strict";e.d(A,{F:()=>a});var n=e(73039);const a=new n.B},12932:(G,A,e)=>{"use strict";e.d(A,{c:()=>l});var n=e(56375),a=e.n(n),o=e(82844),r=e(73667),i=e(20440),g=e(96072),u=e(13708);class l extends r.Sg{constructor(c){super(),this._fieldConfigDefaults={defaults:{},overrides:[]},this._initConfigRegistry=()=>new o.Z,this.dataSupport={annotations:!1,alertStates:!1},this.panel=c}get defaults(){let c=this._defaults||{};if(!this._defaults&&this.optionsSupplier){const d=new g.rt;this.optionsSupplier(d,{data:[]});for(const f of d.getItems())f.defaultValue!=null&&(0,n.set)(c,f.path,f.defaultValue)}return c}get fieldConfigDefaults(){const c=this._fieldConfigDefaults.defaults;c.custom={};for(const d of this.fieldConfigRegistry.list())d.defaultValue!==void 0&&(0,n.set)(c,d.id,d.defaultValue);return{defaults:{...c},overrides:this._fieldConfigDefaults.overrides}}setDefaults(c){return(0,i.d)("PanelPlugin","setDefaults","setPanelOptions"),this._defaults=c,this}get fieldConfigRegistry(){return this._fieldConfigRegistry||(this._fieldConfigRegistry=this._initConfigRegistry()),this._fieldConfigRegistry}setEditor(c){return(0,i.d)("PanelPlugin","setEditor","setPanelOptions"),this.editor=c,this}setNoPadding(){return this.noPadding=!0,this}setMigrationHandler(c){return this.onPanelMigration=c,this}setPanelChangeHandler(c){return this.onPanelTypeChanged=c,this}setPanelOptions(c){return this.optionsSupplier=c,this}getPanelOptionsSupplier(){return this.optionsSupplier??(()=>{})}setDataSupport(c){return this.dataSupport={...this.dataSupport,...c},this}useFieldConfig(c={}){return this._initConfigRegistry=()=>(0,u.j)(c,this.meta.name),this}setSuggestionsSupplier(c){return this.suggestionsSupplier=c,this}getSuggestionsSupplier(){return this.suggestionsSupplier}hasPluginId(c){return this.meta.id===c}}},24372:(G,A,e)=>{"use strict";e.d(A,{Lc:()=>v,__:()=>E,_k:()=>h,aS:()=>m,d4:()=>u});var n=e(56375),a=e.n(n),o=e(73859),r=e(14345),i=e(37496),g=e(37634);function u({plugin:p,currentOptions:s,currentFieldConfig:y,isAfterPluginChange:C}){const b=(0,n.mergeWith)({},p.defaults,s||{},(M,T)=>{if((0,n.isArray)(T))return T}),S=l(y,p),D=d(p,S,C);return{options:b,fieldConfig:D}}function l(p,s){const y=s.fieldConfigDefaults,C={defaults:(0,n.mergeWith)({},y.defaults,p?p.defaults:{},(b,S)=>{if((0,n.isArray)(S))return S}),overrides:p?.overrides??[]};c(C.defaults,"",s.fieldConfigRegistry),C.defaults.thresholds&&f(C.defaults.thresholds),C.overrides=m(C.overrides,b=>s.fieldConfigRegistry.getIfExists(b.id)!==void 0);for(const b of C.overrides)for(const S of b.properties)S.id==="thresholds"&&f(S.value);return C}function m(p,s){return p.map(y=>{const C=y.properties.filter(s);return{...y,properties:C}}).filter(y=>y.properties.length>0)}function c(p,s,y){let C=!1;for(const[b,S]of Object.entries(p)){const D=`${s}${b}`,M=!!y.getIfExists(D);if(M){C=!0;continue}(0,n.isArray)(S)||!(0,n.isObject)(S)?M||(0,n.unset)(p,b):c(S,`${D}.`,y)||(0,n.unset)(p,b)}return C}function d(p,s,y){if(!y)return s;const C=p.fieldConfigRegistry.getIfExists(i.qb.Color);if(C&&C.settings){const b=C.settings,S=o.WO.getIfExists(s.defaults.color?.mode);if(!b.byValueSupport&&(!S||S.isByValue))return s.defaults.color={mode:r.S.PaletteClassic},s;if(b.byValueSupport&&b.preferThresholdsMode&&S?.id!==r.S.Fixed&&(!S||!S.isByValue))return s.defaults.color={mode:r.S.Thresholds},s;if(b.bySeriesSupport&&S?.isByValue)return s.defaults.color={mode:r.S.PaletteClassic},s}return s}function f(p){p.mode||(p.mode=g.H.Absolute),p.steps?p.steps.length&&(p.steps[0].value=-1/0):p.steps=[]}function E(p,s){const y={defaults:{...p.defaults,custom:s.defaults.custom},overrides:[...p.overrides]};for(const C of s.overrides)for(const b of C.properties)if(v(b)){const S=y.overrides.find(D=>(0,n.isEqual)(D.matcher,C.matcher));S?S!==C&&S.properties.push(b):y.overrides.push(C)}return y}function v(p){return p.id.startsWith("custom.")}function h(p){return!v(p)}},13708:(G,A,e)=>{"use strict";e.d(A,{j:()=>r});var n=e(82844),a=e(88008),o=e(96072);function r(g={},u){const l=new n.Z,m=a.N.list(),c={};if(g.useCustomConfig){const d=new o.vo;g.useCustomConfig(d);for(const f of d.getRegistry().list())if(f.isCustom=!0,f.id="custom."+f.id,i(f,m)){const E=c[f.category[0]]??[];E.push(f),c[f.category[0]]=E}else l.register(f)}for(let d of m){const f=d.id;if(!(g.disableStandardOptions&&g.disableStandardOptions.indexOf(f)>-1)){if(g.standardOptions){const E=g.standardOptions[f]?.hideFromDefaults,v=g.standardOptions[f]?.defaultValue,h=g.standardOptions[f]?.settings;E&&(d={...d,hideFromDefaults:E}),v&&(d={...d,defaultValue:v}),h&&(d={...d,settings:d.settings?{...d.settings,...h}:h})}if(l.register(d),d.category&&c[d.category[0]])for(let E of c[d.category[0]])l.register(E)}}for(const d of l.list())if(d.path.indexOf("[")>0)throw new Error(`[${u}] Field config paths do not support arrays: ${d.id}`);return l}function i(g,u){return!!u.find(l=>g.category&&l.category&&g.category[0]===l.category[0])}},86734:(G,A,e)=>{"use strict";e.d(A,{By:()=>n.By,GE:()=>n.GE,Mh:()=>n.Mh,PF:()=>n.PF,QX:()=>i,TL:()=>o.TL,Xt:()=>o.Xt,ap:()=>a.a,dz:()=>n.dz,e0:()=>n.e0,jO:()=>n.jO,lu:()=>o.lu,oH:()=>n.oH,x6:()=>n.x6,xH:()=>a.x,yI:()=>n.yI});var n=e(49531),a=e(55583),o=e(2119),r=e(12331);const i={escapeHtml:r.Xv,hasAnsiCodes:r.oT,sanitize:r.Nw,sanitizeTextPanelContent:r.he,sanitizeUrl:r.Nm,sanitizeSVGContent:r.Is,sanitizeTrustedTypes:r.cd,sanitizeTrustedTypesRSS:r.pQ}},55583:(G,A,e)=>{"use strict";e.d(A,{a:()=>g,x:()=>u});var n=e(44339),a=e(53938),o=e(12331);let r=!1;const i={headerIds:!1,pedantic:!1,gfm:!0,smartLists:!0,smartypants:!1,xhtml:!1,breaks:!1};function g(l,m){r||(n.TU.use((0,a.d)()),n.TU.setOptions({...i}),r=!0);let c;m?.breaks&&(c={...i,breaks:!0});const d=(0,n.TU)(l||"",c);return m?.noSanitize?d:(0,o.he)(d)}function u(l,m){r||(n.TU.use((0,a.d)()),n.TU.setOptions({...i}),r=!0);const c=(0,n.TU)(l||"");return m?.noSanitize?c:(0,o.he)(c)}},12331:(G,A,e)=>{"use strict";e.d(A,{Is:()=>f,Nm:()=>E,Nw:()=>l,Xv:()=>h,cd:()=>c,he:()=>d,oT:()=>v,pQ:()=>m});var n=e(64421),a=e(60374),o=e.n(a),r=e(97717),i=e.n(r);const g=Object.keys(r.whiteList).reduce((p,s)=>(p[s]=r.whiteList[s]?.concat(["class","style"]),p),{}),u=new r.FilterXSS({whiteList:g,css:{whiteList:{...r.getDefaultCSSWhiteList(),"flex-direction":!0,"flex-wrap":!0,"flex-basis":!0,"flex-grow":!0,"flex-shrink":!0,"flex-flow":!0,gap:!0,order:!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"align-items":!0,"align-content":!0,"align-self":!0}}});function l(p){try{return o().sanitize(p,{USE_PROFILES:{html:!0},FORBID_TAGS:["form","input"]})}catch{return console.error("String could not be sanitized",p),h(p)}}function m(p){return o().sanitize(p,{RETURN_TRUSTED_TYPE:!0,ADD_ATTR:["xmlns:atom","version","property","content"],ADD_TAGS:["rss","meta","channel","title","link","description","atom:link","item","pubDate","guid"],PARSER_MEDIA_TYPE:"application/xhtml+xml"})}function c(p){return o().sanitize(p,{RETURN_TRUSTED_TYPE:!0})}function d(p){try{return u.process(p)}catch{return console.error("String could not be sanitized",p),"Text string could not be sanitized"}}function f(p){return o().sanitize(p,{USE_PROFILES:{svg:!0,svgFilters:!0}})}function E(p){return(0,n.N)(p)}function v(p){return/\u001b\[\d{1,2}m/.test(p)}function h(p){return String(p).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")}},49531:(G,A,e)=>{"use strict";e.d(A,{By:()=>E,GE:()=>u,Mh:()=>h,PF:()=>f,dz:()=>v,e0:()=>d,jO:()=>c,oH:()=>m,x6:()=>l,yI:()=>p});var n=e(56375),a=e.n(n);const r="([\\"+["(","[","{","}","]",")","\\","|","*","+","-",".","?","<",">","#","&","^","$"].join("\\")+"])",i=new RegExp(r,"g"),g=new RegExp("(\\\\)"+r,"g");function u(s){return s&&s.replace(i,"\\$1")}function l(s){return s&&s.replace(g,"$2")}function m(s){return s?s[0]==="/":!1}function c(s){if(!m(s))return new RegExp(`^${s}$`);const y=s.match(new RegExp("^/(.*?)/(g?i?m?y?s?)$"));if(!y)throw new Error(`'${s}' is not a valid regular expression.`);return new RegExp(y[1],y[2])}function d(s){if(!s)return 0;const y=parseInt(s,10),C=s.slice(String(y).length),b=1e3,S=b*60,D=S*60,M=D*24;switch(C){case"s":return y*b;case"m":return y*S;case"h":return y*D;case"d":return y*M;default:if(!C)return isNaN(y)?0:y;throw new Error("Not supported unit: "+C)}}function f(s){return s!=null&&Number.isFinite(s)?s.toString():""}function E(s){if(!s)return;const y=parseInt(s,10);return isNaN(y)?void 0:y}function v(s){if(!s)return;const y=parseFloat(s);return isNaN(y)?void 0:y}function h(s){const y=(0,n.camelCase)(s);return y.charAt(0).toUpperCase()+y.substring(1)}function p(s){return s.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&")}},2119:(G,A,e)=>{"use strict";e.d(A,{TL:()=>g,Xt:()=>n,lu:()=>o});function n({searchWords:u,textToHighlight:l}){const m=[];for(const c of u)typeof c=="string"&&m.push(...o(l,c));return m}const a=u=>u.replace(/[[{(][\w,.\/:;<=>?:*+]+$/,"");function o(u,l){if(!u||!l)return[];const m=[],{cleaned:c,flags:d}=g(a(l));let f;try{f=new RegExp(`(?:${c})`,d)}catch{return m}return u.replace(f,(E,...v)=>{if(E){const h=v[v.length-2];m.push({text:E,start:h,length:E.length,end:h+E.length})}return""}),m}const r="-",i=/\(\?([ims-]+)\)/g;function g(u){const l=new Set(["g"]);return{cleaned:u.replace(i,(c,d)=>{const f=d.startsWith(r);for(let E=0;E<d.length;++E){const v=d.charAt(E);f||d.charAt(E-1)===r?l.delete(v):v!==r&&l.add(v)}return""}),flags:Array.from(l).join("")}}},30887:(G,A,e)=>{"use strict";e.r(A),e.d(A,{alpha:()=>v,asHexString:()=>g,asRgbString:()=>u,darken:()=>h,decomposeColor:()=>m,emphasize:()=>E,getContrastRatio:()=>d,getLuminance:()=>f,hexToRgb:()=>o,hslToRgb:()=>l,lighten:()=>p,recomposeColor:()=>c,rgbToHex:()=>i});var n=e(19737);function a(s,y=0,C=1){return Math.min(Math.max(y,s),C)}function o(s){s=s.slice(1);const y=new RegExp(`.{1,${s.length>=6?2:1}}`,"g");let C=s.match(y);if(!C)return"";let b=Array.from(C);return b[0].length===1&&(b=b.map(S=>S+S)),b?`rgb${b.length===4?"a":""}(${b.map((S,D)=>D<3?parseInt(S,16):Math.round(parseInt(S,16)/255*1e3)/1e3).join(", ")})`:""}function r(s){const y=s.toString(16);return y.length===1?`0${y}`:y}function i(s){if(s.indexOf("#")===0)return s;const{values:y}=m(s);return`#${y.map(C=>r(C)).join("")}`}function g(s){if(s[0]==="#")return s;const y=(0,n.Z)(s);return y.getAlpha()===1?y.toHexString():y.toHex8String()}function u(s){return s.startsWith("rgb")?s:(0,n.Z)(s).toRgbString()}function l(s){const y=m(s),{values:C}=y,b=C[0],S=C[1]/100,D=C[2]/100,M=S*Math.min(D,1-D),T=(x,I=(x+b/30)%12)=>D-M*Math.max(Math.min(I-3,9-I,1),-1);let R="rgb";const O=[Math.round(T(0)*255),Math.round(T(8)*255),Math.round(T(4)*255)];return y.type==="hsla"&&(R+="a",O.push(C[3])),c({type:R,values:O})}function m(s){if(typeof s!="string")return s;if(s.charAt(0)==="#")return m(o(s));const y=s.indexOf("("),C=s.substring(0,y);if(["rgb","rgba","hsl","hsla","color"].indexOf(C)===-1)throw new Error(`Unsupported '${s}' color. The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()`);let b=s.substring(y+1,s.length-1),S;if(C==="color"){if(b=b.split(" "),S=b.shift(),b.length===4&&b[3].charAt(0)==="/"&&(b[3]=b[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(S)===-1)throw new Error(`Unsupported ${S} color space. The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else b=b.split(",");return b=b.map(D=>parseFloat(D)),{type:C,values:b,colorSpace:S}}function c(s){const{type:y,colorSpace:C}=s;let b=s.values;return y.indexOf("rgb")!==-1?b=b.map((S,D)=>D<3?parseInt(S,10):S):y.indexOf("hsl")!==-1&&(b[1]=`${b[1]}%`,b[2]=`${b[2]}%`),y.indexOf("color")!==-1?b=`${C} ${b.join(" ")}`:b=`${b.join(", ")}`,`${y}(${b})`}function d(s,y,C){const b=f(s),S=f(y,C);return(Math.max(b,S)+.05)/(Math.min(b,S)+.05)}function f(s,y){const C=m(s);let b=C.type==="hsl"?m(l(s)).values:C.values;if(y&&C.type==="rgba"){const D=m(y),M=b[3];b[0]=b[0]*M+D.values[0]*(1-M),b[1]=b[1]*M+D.values[1]*(1-M),b[2]=b[2]*M+D.values[2]*(1-M)}const S=b.map(D=>(C.type!=="color"&&(D/=255),D<=.03928?D/12.92:((D+.055)/1.055)**2.4));return Number((.2126*S[0]+.7152*S[1]+.0722*S[2]).toFixed(3))}function E(s,y=.15){return f(s)>.5?h(s,y):p(s,y)}function v(s,y){if(s==="")return"#000000";if(y=a(y),s[0]==="#"){if(s.length===9)s=s.substring(0,7);else if(s.length<=5){let b="#";for(let S=1;S<4;S++)b+=s[S]+s[S];s=b}return s+Math.round(y*255).toString(16).padStart(2,"0")}else{if(s[3]==="(")return s.replace(")",`, ${y})`);if(s[4]==="(")return s.substring(0,s.lastIndexOf(","))+`, ${y})`}const C=m(s);return C.type==="color"?C.values[3]=`/${y}`:C.values[3]=y,c(C)}function h(s,y){const C=m(s);if(y=a(y),C.type.indexOf("hsl")!==-1)C.values[2]*=1-y;else if(C.type.indexOf("rgb")!==-1||C.type.indexOf("color")!==-1)for(let b=0;b<3;b+=1)C.values[b]*=1-y;return c(C)}function p(s,y){const C=m(s);if(y=a(y),C.type.indexOf("hsl")!==-1)C.values[2]+=(100-C.values[2])*y;else if(C.type.indexOf("rgb")!==-1)for(let b=0;b<3;b+=1)C.values[b]+=(255-C.values[b])*y;else if(C.type.indexOf("color")!==-1)for(let b=0;b<3;b+=1)C.values[b]+=(1-C.values[b])*y;return c(C)}},76176:(G,A,e)=>{"use strict";e.d(A,{N:()=>o});var n=e(85960),a=e(40354);const o=n.createContext((0,a.j)());o.displayName="ThemeContext"},40354:(G,A,e)=>{"use strict";e.d(A,{j:()=>F});function n(){const j=["xs","sm","md","lg","xl","xxl"],V="px",_={xs:0,sm:544,md:769,lg:992,xl:1200,xxl:1440};function H(K){return`@media (min-width:${typeof K=="number"?K:_[K]}${V})`}function z(K){return`@media (max-width:${(typeof K=="number"?K:_[K])-5/100}${V})`}return{values:_,up:H,down:z,keys:j,unit:V}}var a=e(56375),o=e(30887);const r={white:"#FFFFFF",black:"#000000",gray25:"#2c3235",gray15:"#22252b",gray10:"#181b1f",gray05:"#111217",darkLayer0:"#18181A",darkLayer1:"#212124",darkLayer2:"#2a2a2f",darkBorder1:"#34343B",darkBorder2:"#64646B",gray90:"#F4F5F5",gray100:"#F4F5F5",gray80:"#D0D1D3",lightBorder1:"#E4E7E7",blueDarkMain:"#3D71D9",blueDarkText:"#6E9FFF",redDarkMain:"#D10E5C",redDarkText:"#FF5286",greenDarkMain:"#1A7F4B",greenDarkText:"#6CCF8E",orangeDarkMain:"#FF9900",orangeDarkText:"#fbad37",blueLightMain:"#3871DC",blueLightText:"#1F62E0",redLightMain:"#E0226E",redLightText:"#CF0E5B",greenLightMain:"#1B855E",greenLightText:"#0A764E",orangeLightMain:"#FF9900",orangeLightText:"#B5510D"};class i{constructor(){this.mode="dark",this.whiteBase="204, 204, 220",this.border={weak:`rgba(${this.whiteBase}, 0.12)`,medium:`rgba(${this.whiteBase}, 0.20)`,strong:`rgba(${this.whiteBase}, 0.30)`},this.text={primary:`rgb(${this.whiteBase})`,secondary:`rgba(${this.whiteBase}, 0.65)`,disabled:`rgba(${this.whiteBase}, 0.6)`,link:r.blueDarkText,maxContrast:r.white},this.primary={main:r.blueDarkMain,text:r.blueDarkText,border:r.blueDarkText},this.secondary={main:`rgba(${this.whiteBase}, 0.10)`,shade:`rgba(${this.whiteBase}, 0.14)`,transparent:`rgba(${this.whiteBase}, 0.08)`,text:this.text.primary,contrastText:`rgb(${this.whiteBase})`,border:`rgba(${this.whiteBase}, 0.08)`},this.info=this.primary,this.error={main:r.redDarkMain,text:r.redDarkText},this.success={main:r.greenDarkMain,text:r.greenDarkText},this.warning={main:r.orangeDarkMain,text:r.orangeDarkText},this.background={canvas:r.gray05,primary:r.gray10,secondary:r.gray15},this.action={hover:`rgba(${this.whiteBase}, 0.16)`,selected:`rgba(${this.whiteBase}, 0.12)`,selectedBorder:r.orangeDarkMain,focus:`rgba(${this.whiteBase}, 0.16)`,hoverOpacity:.08,disabledText:this.text.disabled,disabledBackground:`rgba(${this.whiteBase}, 0.04)`,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(270deg, #F55F3E 0%, #FF8833 100%)",brandVertical:"linear-gradient(0.01deg, #F55F3E 0.01%, #FF8833 99.99%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.15}}class g{constructor(){this.mode="light",this.blackBase="36, 41, 46",this.primary={main:r.blueLightMain,border:r.blueLightText,text:r.blueLightText},this.text={primary:`rgba(${this.blackBase}, 1)`,secondary:`rgba(${this.blackBase}, 0.75)`,disabled:`rgba(${this.blackBase}, 0.50)`,link:this.primary.text,maxContrast:r.black},this.border={weak:`rgba(${this.blackBase}, 0.12)`,medium:`rgba(${this.blackBase}, 0.30)`,strong:`rgba(${this.blackBase}, 0.40)`},this.secondary={main:`rgba(${this.blackBase}, 0.08)`,shade:`rgba(${this.blackBase}, 0.15)`,transparent:`rgba(${this.blackBase}, 0.08)`,contrastText:`rgba(${this.blackBase},  1)`,text:this.text.primary,border:this.border.weak},this.info={main:r.blueLightMain,text:r.blueLightText},this.error={main:r.redLightMain,text:r.redLightText,border:r.redLightText},this.success={main:r.greenLightMain,text:r.greenLightText},this.warning={main:r.orangeLightMain,text:r.orangeLightText},this.background={canvas:r.gray90,primary:r.white,secondary:r.gray100},this.action={hover:`rgba(${this.blackBase}, 0.12)`,selected:`rgba(${this.blackBase}, 0.08)`,selectedBorder:r.orangeLightMain,hoverOpacity:.08,focus:`rgba(${this.blackBase}, 0.12)`,disabledBackground:`rgba(${this.blackBase}, 0.04)`,disabledText:this.text.disabled,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(90deg, #FF8833 0%, #F53E4C 100%)",brandVertical:"linear-gradient(0.01deg, #F53E4C -31.2%, #FF8833 113.07%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.2}}function u(U){const j=new i,V=new g,_=(U.mode??"dark")==="dark"?j:V,{primary:H=_.primary,secondary:z=_.secondary,info:K=_.info,warning:Y=_.warning,success:k=_.success,error:q=_.error,tonalOffset:X=_.tonalOffset,hoverFactor:te=_.hoverFactor,contrastThreshold:se=_.contrastThreshold,...de}=U;function re(ie,oe=se){return(0,o.getContrastRatio)(j.text.maxContrast,ie,_.background.primary)>=oe?j.text.maxContrast:V.text.maxContrast}const fe=({color:ie,name:oe})=>{if(ie={...ie,name:oe},!ie.main)throw new Error(`Missing main color for ${oe}`);return ie.text||(ie.text=ie.main),ie.border||(ie.border=ie.text),ie.shade||(ie.shade=_.mode==="light"?(0,o.darken)(ie.main,X):(0,o.lighten)(ie.main,X)),ie.transparent||(ie.transparent=(0,o.alpha)(ie.main,.15)),ie.contrastText||(ie.contrastText=re(ie.main)),ie.borderTransparent||(ie.borderTransparent=(0,o.alpha)(ie.border,.25)),ie};return(0,a.merge)({..._,primary:fe({color:H,name:"primary"}),secondary:fe({color:z,name:"secondary"}),info:fe({color:K,name:"info"}),error:fe({color:q,name:"error"}),success:fe({color:k,name:"success"}),warning:fe({color:Y,name:"warning"}),getContrastText:re,emphasize:(ie,oe)=>(0,o.emphasize)(ie,oe??te)},de)}function l(U,j){const V={padding:1,headerHeight:4,background:U.background.primary,borderColor:U.border.weak,boxShadow:"none"},_={borderColor:U.border.medium,borderHover:U.border.strong,text:U.text.primary,background:U.mode==="dark"?U.background.canvas:U.background.primary};return{height:{sm:3,md:4,lg:6},input:_,panel:V,dropdown:{background:_.background},tooltip:{background:U.background.secondary,text:U.text.primary},dashboard:{background:U.background.canvas,padding:1},overlay:{background:U.mode==="dark"?"rgba(63, 62, 62, 0.45)":"rgba(208, 209, 211, 0.24)"},sidemenu:{width:57},menuTabs:{height:42},textHighlight:{text:U.warning.contrastText,background:U.warning.main},horizontalDrawer:{defaultHeight:400},table:{rowHoverBackground:U.emphasize(U.background.primary,.03)}}}function m(U){return U.mode==="dark"?{z1:"0px 1px 2px rgba(1, 4, 9, 0.75)",z2:"0px 4px 8px rgba(1, 4, 9, 0.75)",z3:"0px 8px 24px rgb(1, 4, 9)"}:{z1:"0px 1px 2px rgba(24, 26, 27, 0.2)",z2:"0px 4px 8px rgba(24, 26, 27, 0.2)",z3:"0px 13px 20px 1px rgba(24, 26, 27, 0.18)"}}function c(U){const j=U.borderRadius??2;return{radius:{default:"2px",pill:"9999px",circle:"100%"},borderRadius:H=>`${(H??1)*j}px`}}function d(U={}){const{gridSize:j=8}=U,V=H=>typeof H=="string"?H:H*j,_=(...H)=>(H.length===0&&(H[0]=1),H.map(z=>{const K=V(z);return typeof K=="number"?`${K}px`:K}).join(" "));return _.gridSize=j,_.x0="0px",_.x0_25="2px",_.x0_5="4px",_.x1="8px",_.x1_5="12px",_.x2="16px",_.x2_5="20px",_.x3="24px",_.x4="32px",_.x5="40px",_.x6="48px",_.x8="64px",_.x10="80px",_}const f={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},E={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function v(U=["all"],j={}){const{duration:V=E.standard,easing:_=f.easeInOut,delay:H=0}=j;return(Array.isArray(U)?U:[U]).map(z=>`${z} ${typeof V=="string"?V:p(V)} ${_} ${typeof H=="string"?H:p(H)}`).join(",")}function h(U){if(!U)return 0;const j=U/36;return Math.round((4+15*j**.25+j/5)*10)}function p(U){return`${Math.round(U)}ms`}function s(){return{create:v,duration:E,easing:f,getAutoHeightDuration:h}}const y='"Inter", "Helvetica", "Arial", sans-serif',C="'Roboto Mono', monospace";function b(U,j={}){const{fontFamily:V=y,fontFamilyMonospace:_=C,fontSize:H=14,fontWeightLight:z=300,fontWeightRegular:K=400,fontWeightMedium:Y=500,fontWeightBold:k=500,htmlFontSize:q=14}=j,X=H/14,te=fe=>`${fe/q*X}rem`,se=(fe,ie,oe,ue,me)=>{if(oe%2!==0||ie%2!==0)throw new Error("Font size and line height should be integer multiples of 2 to prevent issues with alignment");return{fontFamily:V,fontWeight:fe,fontSize:te(ie),lineHeight:oe/ie,...V===y?{letterSpacing:`${S(ue/ie)}em`}:{},...me}},de={h1:se(K,28,32,-.25),h2:se(K,24,28,0),h3:se(K,22,24,0),h4:se(K,18,22,.25),h5:se(K,16,22,0),h6:se(Y,14,22,.15),body:se(K,H,22,.15),bodySmall:se(K,12,18,.15)};return{htmlFontSize:q,pxToRem:te,fontFamily:V,fontFamilyMonospace:_,fontSize:H,fontWeightLight:z,fontWeightRegular:K,fontWeightMedium:Y,fontWeightBold:k,size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},...de}}function S(U){return Math.round(U*1e5)/1e5}var D=e(56123);function M(U){const j={name:"Grafana Default",typography:{fontFamily:{sansSerif:U.typography.fontFamily,monospace:U.typography.fontFamilyMonospace},size:{base:`${U.typography.fontSize}px`,xs:U.typography.size.xs,sm:U.typography.size.sm,md:U.typography.size.md,lg:U.typography.size.lg},heading:{h1:U.typography.h1.fontSize,h2:U.typography.h2.fontSize,h3:U.typography.h3.fontSize,h4:U.typography.h4.fontSize,h5:U.typography.h5.fontSize,h6:U.typography.h6.fontSize},weight:{light:U.typography.fontWeightLight,regular:U.typography.fontWeightRegular,semibold:U.typography.fontWeightMedium,bold:U.typography.fontWeightBold},lineHeight:{xs:U.typography.bodySmall.lineHeight,sm:U.typography.bodySmall.lineHeight,md:U.typography.body.lineHeight,lg:U.typography.h2.lineHeight},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:`${U.breakpoints.values.xs}px`,sm:`${U.breakpoints.values.sm}px`,md:`${U.breakpoints.values.md}px`,lg:`${U.breakpoints.values.lg}px`,xl:`${U.breakpoints.values.xl}px`,xxl:`${U.breakpoints.values.xxl}px`},spacing:{base:U.spacing.gridSize,insetSquishMd:U.spacing(.5,1),d:U.spacing(2),xxs:U.spacing(.25),xs:U.spacing(.5),sm:U.spacing(1),md:U.spacing(2),lg:U.spacing(3),xl:U.spacing(4),gutter:U.spacing(4),formSpacingBase:U.spacing.gridSize,formMargin:`${U.spacing.gridSize*4}px`,formFieldsetMargin:`${U.spacing.gridSize*2}px`,formInputHeight:U.spacing.gridSize*4,formButtonHeight:U.spacing.gridSize*4,formInputPaddingHorizontal:`${U.spacing.gridSize}px`,formInputAffixPaddingHorizontal:`${U.spacing.gridSize/2}px`,formInputMargin:`${U.spacing.gridSize*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${U.spacing.gridSize/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:U.shape.borderRadius(1),md:U.shape.borderRadius(2),lg:U.shape.borderRadius(3)},width:{sm:"1px"}},height:{sm:U.spacing.gridSize*U.components.height.sm,md:U.spacing.gridSize*U.components.height.md,lg:U.spacing.gridSize*U.components.height.lg},panelPadding:U.components.panel.padding*U.spacing.gridSize,panelHeaderHeight:U.spacing.gridSize*U.components.panel.headerHeight,zIndex:U.zIndex},V={...T,black:"#000000",white:"#ffffff",dark1:"#141414",dark2:"#161719",dark3:"#1f1f20",dark4:"#212124",dark5:"#222426",dark6:"#262628",dark7:"#292a2d",dark8:"#2f2f32",dark9:"#343436",dark10:"#424345",gray1:"#555555",gray2:"#8e8e8e",gray3:"#b3b3b3",gray4:"#d8d9da",gray5:"#ececec",gray6:"#f4f5f8",gray7:"#fbfbfb",redBase:"#e02f44",redShade:"#c4162a",greenBase:"#299c46",greenShade:"#23843b",red:"#d44a3a",yellow:"#ecbb13",purple:"#9933cc",variable:"#32d1df",orange:"#eb7b18",orangeDark:"#ff780a"},_={bg1:U.colors.background.primary,bg2:U.colors.background.secondary,bg3:U.colors.action.hover,dashboardBg:U.colors.background.canvas,bgBlue1:U.colors.primary.main,bgBlue2:U.colors.primary.shade},H={border1:U.colors.border.weak,border2:U.colors.border.medium,border3:U.colors.border.strong},z={textStrong:U.colors.text.maxContrast,textHeading:U.colors.text.primary,text:U.colors.text.primary,textSemiWeak:U.colors.text.secondary,textWeak:U.colors.text.secondary,textFaint:U.colors.text.disabled,textBlue:U.colors.primary.text},K={formLabel:U.colors.text.primary,formDescription:U.colors.text.secondary,formInputBg:U.components.input.background,formInputBgDisabled:U.colors.action.disabledBackground,formInputBorder:U.components.input.borderColor,formInputBorderHover:U.components.input.borderHover,formInputBorderActive:U.colors.primary.border,formInputBorderInvalid:U.colors.error.border,formInputPlaceholderText:U.colors.text.disabled,formInputText:U.components.input.text,formInputDisabledText:U.colors.action.disabledText,formFocusOutline:U.colors.primary.main,formValidationMessageText:U.colors.error.contrastText,formValidationMessageBg:U.colors.error.main};return{...j,type:U.colors.mode==="dark"?D.Q.Dark:D.Q.Light,isDark:U.isDark,isLight:U.isLight,name:U.name,palette:{...V,brandPrimary:V.orange,brandSuccess:U.colors.success.main,brandWarning:U.colors.warning.main,brandDanger:U.colors.error.main,queryRed:U.colors.error.text,queryGreen:U.colors.success.text,queryPurple:"#fe85fc",queryOrange:V.orange,online:U.colors.success.main,warn:U.colors.success.main,critical:U.colors.success.main},colors:{..._,...H,...K,...z,bodyBg:U.colors.background.canvas,panelBg:U.components.panel.background,panelBorder:U.components.panel.borderColor,pageHeaderBg:U.colors.background.canvas,pageHeaderBorder:U.colors.background.canvas,dropdownBg:K.formInputBg,dropdownShadow:V.black,dropdownOptionHoverBg:_.bg2,link:U.colors.text.primary,linkDisabled:U.colors.text.disabled,linkHover:U.colors.text.maxContrast,linkExternal:U.colors.text.link},shadows:{listItem:"none"},visualization:U.visualization}}const T={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"};var R=e(14345);function O(U){const j=U.mode==="light"?I():x(),V={};for(const z of j)for(const K of z.shades)if(V[K.name]=K.color,K.aliases)for(const Y of K.aliases)V[Y]=K.color;V.transparent="rgba(0,0,0,0)",V["panel-bg"]=U.background.primary,V.text=U.text.primary;const _=z=>{if(!z)return R.R;const K=V[z];if(K)return K;if(z[0]==="#"||z.indexOf("rgb")>-1)return z;const Y=P[z.toLowerCase()];return Y?(V[z]=Y,Y):z},H=L();return{hues:j,palette:H,getColorByName:_}}function x(){return[{name:"red",shades:[{color:"#FFA6B0",name:"super-light-red"},{color:"#FF7383",name:"light-red"},{color:"#F2495C",name:"red",primary:!0},{color:"#E02F44",name:"semi-dark-red"},{color:"#C4162A",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFCB7D",name:"super-light-orange",aliases:[]},{color:"#FFB357",name:"light-orange",aliases:[]},{color:"#FF9830",name:"orange",aliases:[],primary:!0},{color:"#FF780A",name:"semi-dark-orange",aliases:[]},{color:"#FA6400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFF899",name:"super-light-yellow",aliases:[]},{color:"#FFEE52",name:"light-yellow",aliases:[]},{color:"#FADE2A",name:"yellow",aliases:[],primary:!0},{color:"#F2CC0C",name:"semi-dark-yellow",aliases:[]},{color:"#E0B400",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#C8F2C2",name:"super-light-green",aliases:[]},{color:"#96D98D",name:"light-green",aliases:[]},{color:"#73BF69",name:"green",aliases:[],primary:!0},{color:"#56A64B",name:"semi-dark-green",aliases:[]},{color:"#37872D",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#C0D8FF",name:"super-light-blue",aliases:[]},{color:"#8AB8FF",name:"light-blue",aliases:[]},{color:"#5794F2",name:"blue",aliases:[],primary:!0},{color:"#3274D9",name:"semi-dark-blue",aliases:[]},{color:"#1F60C4",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#DEB6F2",name:"super-light-purple",aliases:[]},{color:"#CA95E5",name:"light-purple",aliases:[]},{color:"#B877D9",name:"purple",aliases:[],primary:!0},{color:"#A352CC",name:"semi-dark-purple",aliases:[]},{color:"#8F3BB8",name:"dark-purple",aliases:[]}]}]}function I(){return[{name:"red",shades:[{color:"#FF7383",name:"super-light-red"},{color:"#F2495C",name:"light-red"},{color:"#E02F44",name:"red",primary:!0},{color:"#C4162A",name:"semi-dark-red"},{color:"#AD0317",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFB357",name:"super-light-orange",aliases:[]},{color:"#FF9830",name:"light-orange",aliases:[]},{color:"#FF780A",name:"orange",aliases:[],primary:!0},{color:"#FA6400",name:"semi-dark-orange",aliases:[]},{color:"#E55400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFEE52",name:"super-light-yellow",aliases:[]},{color:"#FADE2A",name:"light-yellow",aliases:[]},{color:"#F2CC0C",name:"yellow",aliases:[],primary:!0},{color:"#E0B400",name:"semi-dark-yellow",aliases:[]},{color:"#CC9D00",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#96D98D",name:"super-light-green",aliases:[]},{color:"#73BF69",name:"light-green",aliases:[]},{color:"#56A64B",name:"green",aliases:[],primary:!0},{color:"#37872D",name:"semi-dark-green",aliases:[]},{color:"#19730E",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#8AB8FF",name:"super-light-blue",aliases:[]},{color:"#5794F2",name:"light-blue",aliases:[]},{color:"#3274D9",name:"blue",aliases:[],primary:!0},{color:"#1F60C4",name:"semi-dark-blue",aliases:[]},{color:"#1250B0",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#CA95E5",name:"super-light-purple",aliases:[]},{color:"#B877D9",name:"light-purple",aliases:[]},{color:"#A352CC",name:"purple",aliases:[],primary:!0},{color:"#8F3BB8",name:"semi-dark-purple",aliases:[]},{color:"#7C2EA3",name:"dark-purple",aliases:[]}]}]}function L(){return["green","semi-dark-yellow","light-blue","semi-dark-orange","red","blue","purple","#705DA0","dark-green","yellow","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"]}const P={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},N={activePanel:999,navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061};function F(U={}){const{colors:j={},spacing:V={},shape:_={},typography:H={}}=U,z=u(j),K=n(),Y=d(V),k=c(_),q=b(z,H),X=m(z),te=s(),se=l(z,X),de=O(z),re={name:z.mode==="dark"?"Dark":"Light",isDark:z.mode==="dark",isLight:z.mode==="light",colors:z,breakpoints:K,spacing:Y,shape:k,components:se,typography:q,shadows:X,transitions:te,visualization:de,zIndex:{...N},flags:{}};return{...re,v1:M(re)}}},12138:(G,A,e)=>{"use strict";e.d(A,{Ni:()=>r.N,d5:()=>a.d,jG:()=>n.j,jY:()=>a.j,r8:()=>o});var n=e(40354),a=e(83105),o=e(30887),r=e(76176)},83105:(G,A,e)=>{"use strict";e.d(A,{d:()=>r,j:()=>o});var n=e(73039),a=e(40354);function o(m){return(i.getIfExists(m)??i.get("dark")).build()}function r(m){return i.list().filter(c=>m?!0:!c.isExtra)}const i=new n.B(()=>[{id:"system",name:"System preference",build:g},{id:"dark",name:"Dark",build:()=>(0,a.j)({colors:{mode:"dark"}})},{id:"light",name:"Light",build:()=>(0,a.j)({colors:{mode:"light"}})},{id:"blue-night",name:"Blue night",build:l,isExtra:!0},{id:"midnight",name:"Midnight",build:u,isExtra:!0}]);function g(){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";return o(c)}function u(){const m="204, 204, 220";return(0,a.j)({name:"Midnight",colors:{mode:"dark",background:{canvas:"#000000",primary:"#000000",secondary:"#181818"},border:{weak:`rgba(${m}, 0.17)`,medium:`rgba(${m}, 0.25)`,strong:`rgba(${m}, 0.35)`}}})}function l(){return(0,a.j)({name:"Blue night",colors:{mode:"dark",background:{canvas:"#15161d",primary:"#15161d",secondary:"#1d1f2e"},border:{weak:"#2e304f",medium:"#2e304f",strong:"#2e304f"}}})}},16515:(G,A,e)=>{"use strict";e.d(A,{CC:()=>u,Kx:()=>l,TB:()=>m,gz:()=>g,uP:()=>c});var n=e(56375),a=e.n(n),o=e(23757),r=e(58309),i=e(73039),g=(y=>(y.sum="sum",y.max="max",y.min="min",y.logmin="logmin",y.mean="mean",y.variance="variance",y.stdDev="stdDev",y.last="last",y.first="first",y.count="count",y.range="range",y.diff="diff",y.diffperc="diffperc",y.delta="delta",y.step="step",y.firstNotNull="firstNotNull",y.lastNotNull="lastNotNull",y.changeCount="changeCount",y.distinctCount="distinctCount",y.allIsZero="allIsZero",y.allIsNull="allIsNull",y.allValues="allValues",y.uniqueValues="uniqueValues",y))(g||{});function u(y){return Object.keys(g).includes(y)}function l(y){const{field:C,reducers:b}=y;if(!C||!b||b.length<1)return{};if(C.state?.calcs){const x=[];for(const I of b)C.state.calcs.hasOwnProperty(I)||x.push(I);if(x.length<1)return{...C.state.calcs}}C.state||(C.state={});const S=m.list(b);if(C.values.length<1){const x={...C.state.calcs};for(const I of S)x[I.id]=I.emptyInputResult!==null?I.emptyInputResult:null;return C.state.calcs=x}const{nullValueMode:M=o.Gl.Ignore}=C.config,T=M===o.Gl.Ignore,R=M===o.Gl.AsZero;if(S.length===1&&S[0].reduce){const x=S[0].reduce(C,T,R);return C.state.calcs={...C.state.calcs,...x},x}let O=c(C,T,R);for(const x of S)!O.hasOwnProperty(x.id)&&x.reduce&&(O={...O,...x.reduce(C,T,R)});return C.state.calcs={...C.state.calcs,...O},O}const m=new i.B(()=>[{id:"lastNotNull",name:"Last *",description:"Last non-null value (also excludes NaNs)",standard:!0,aliasIds:["current"],reduce:v},{id:"last",name:"Last",description:"Last value",standard:!0,reduce:E},{id:"firstNotNull",name:"First *",description:"First non-null value (also excludes NaNs)",standard:!0,reduce:f},{id:"first",name:"First",description:"First Value",standard:!0,reduce:d},{id:"min",name:"Min",description:"Minimum Value",standard:!0},{id:"max",name:"Max",description:"Maximum Value",standard:!0},{id:"mean",name:"Mean",description:"Average Value",standard:!0,aliasIds:["avg"]},{id:"variance",name:"Variance",description:"Variance of all values in a field",standard:!1,reduce:h},{id:"stdDev",name:"StdDev",description:"Standard deviation of all values in a field",standard:!1,reduce:h},{id:"sum",name:"Total",description:"The sum of all values",emptyInputResult:0,standard:!0,aliasIds:["total"]},{id:"count",name:"Count",description:"Number of values in response",emptyInputResult:0,standard:!0},{id:"range",name:"Range",description:"Difference between minimum and maximum values",standard:!0},{id:"delta",name:"Delta",description:"Cumulative change in value",standard:!0},{id:"step",name:"Step",description:"Minimum interval between values",standard:!0},{id:"diff",name:"Difference",description:"Difference between first and last values",standard:!0},{id:"logmin",name:"Min (above zero)",description:"Used for log min scale",standard:!0},{id:"allIsZero",name:"All Zeros",description:"All values are zero",emptyInputResult:!1,standard:!0},{id:"allIsNull",name:"All Nulls",description:"All values are null",emptyInputResult:!0,standard:!0},{id:"changeCount",name:"Change Count",description:"Number of times the value changes",standard:!1,reduce:p},{id:"distinctCount",name:"Distinct Count",description:"Number of distinct values",standard:!1,reduce:s},{id:"diffperc",name:"Difference percent",description:"Percentage difference between first and last values",standard:!0},{id:"allValues",name:"All values",description:"Returns an array with all values",standard:!1,reduce:y=>({allValues:[...y.values]})},{id:"uniqueValues",name:"All unique values",description:"Returns an array with all unique values",standard:!1,reduce:y=>({uniqueValues:[...new Set(y.values)]})}]);function c(y,C,b){const S={sum:0,max:-Number.MAX_VALUE,min:Number.MAX_VALUE,logmin:Number.MAX_VALUE,mean:null,last:null,first:null,lastNotNull:null,firstNotNull:null,count:0,nonNullCount:0,allIsNull:!0,allIsZero:!0,range:null,diff:null,delta:0,step:Number.MAX_VALUE,diffperc:0,previousDeltaUp:!0},D=y.values,M=y.type===r.fS.number||y.type===r.fS.time;for(let T=0;T<D.length;T++){let R=D[T];if(T===0&&(S.first=R),S.last=R,R==null){if(C)continue;b&&(R=0)}if(S.count++,R!=null&&!Number.isNaN(R)){const O=S.firstNotNull===null;if(O&&(S.firstNotNull=R),M){if(S.sum+=R,S.allIsNull=!1,S.nonNullCount++,!O){const x=R-S.lastNotNull;S.step>x&&(S.step=x),S.lastNotNull>R?(S.previousDeltaUp=!1,T===D.length-1&&(S.delta+=R)):(S.previousDeltaUp?S.delta+=x:S.delta+=R,S.previousDeltaUp=!0)}R>S.max&&(S.max=R),R<S.min&&(S.min=R),R<S.logmin&&R>0&&(S.logmin=R)}R!==0&&(S.allIsZero=!1),S.lastNotNull=R}}return S.max===-Number.MAX_VALUE&&(S.max=null),S.min===Number.MAX_VALUE&&(S.min=null),S.step===Number.MAX_VALUE&&(S.step=null),S.nonNullCount>0&&(S.mean=S.sum/S.nonNullCount),S.allIsNull&&(S.allIsZero=!1),S.max!==null&&S.min!==null&&(S.range=S.max-S.min),(0,n.isNumber)(S.firstNotNull)&&(0,n.isNumber)(S.lastNotNull)&&(S.diff=S.lastNotNull-S.firstNotNull),(0,n.isNumber)(S.firstNotNull)&&(0,n.isNumber)(S.diff)&&(S.diffperc=S.diff/S.firstNotNull),S}function d(y,C,b){return{first:y.values[0]}}function f(y,C,b){const S=y.values;for(let D=0;D<S.length;D++){const M=S[D];if(M!=null&&!Number.isNaN(M))return{firstNotNull:M}}return{firstNotNull:null}}function E(y,C,b){const S=y.values;return{last:S[S.length-1]}}function v(y,C,b){const S=y.values;let D=S.length-1;for(;D>=0;){const M=S[D--];if(M!=null&&!Number.isNaN(M))return{lastNotNull:M}}return{lastNotNull:null}}function h(y,C,b){if(!(y.type===r.fS.number||y.type===r.fS.time))return{variance:0,stdDev:0};let S=0,D=0,M=0;const T=y.values;for(let R=0;R<T.length;R++){const O=T[R];if(O!=null){M++;let x=D;D+=(O-x)/M,S+=(O-x)*(O-D)}}if(M>0){const R=S/M;return{variance:R,stdDev:Math.sqrt(R)}}return{variance:0,stdDev:0}}function p(y,C,b){const S=y.values;let D=0,M=!0,T=null;for(let R=0;R<S.length;R++){let O=S[R];if(O===null){if(C)continue;b&&(O=0)}!M&&T!==O&&D++,M=!1,T=O}return{changeCount:D}}function s(y,C,b){const S=y.values,D=new Set;for(let M=0;M<S.length;M++){let T=S[M];if(T===null){if(C)continue;b&&(T=0)}D.add(T)}return{distinctCount:D.size}}},77861:(G,A,e)=>{"use strict";e.d(A,{Ac:()=>o.Ac,CC:()=>i.CC,E4:()=>n.E4,Ff:()=>n.Ff,Hz:()=>g.H,IG:()=>o.IG,JP:()=>m._9,J_:()=>d.J_,Jz:()=>c.Jz,Kx:()=>i.Kx,Ls:()=>o.Ls,Ok:()=>c.Ok,Op:()=>c.Op,TB:()=>i.TB,U8:()=>o.U8,UO:()=>c.UO,Wk:()=>a.W,YR:()=>r.Y,Ys:()=>l.Ys,Ze:()=>u.Z,Zi:()=>c.Zi,b9:()=>o.b9,cO:()=>c.cO,gY:()=>c.gY,gz:()=>i.gz,kl:()=>c.kl,lP:()=>m.lP,mB:()=>c.mB,mE:()=>n.mE,mi:()=>n.mi,py:()=>c.py,qr:()=>c.qr,sq:()=>o.sq,uP:()=>i.uP,wL:()=>c.wL,wb:()=>f.w,wf:()=>u.w,zM:()=>c.zM});var n=e(70274),a=e(61751),o=e(34103),r=e(53615),i=e(16515),g=e(6011),u=e(31674),l=e(79965),m=e(85334),c=e(87500),d=e(8499),f=e(84231)},34103:(G,A,e)=>{"use strict";e.d(A,{Ac:()=>v,IG:()=>y,Ls:()=>E,U8:()=>h,b9:()=>s,sq:()=>p});var n=e(73039),a=e(53712),o=e(61355),r=e(79965),i=e(1290),g=e(56736),u=e(50891),l=e(99507),m=e(2796),c=e(16370),d=e(39225),f=e(40294);const E=new n.B(()=>[...(0,i.Ty)(),...(0,a.N)(),...(0,r.Lk)(),...(0,u.z)(),o.b]),v=new n.B(()=>[...(0,i.fX)(),...(0,r.cC)(),...(0,g.n)()]),h=new n.B(()=>[...(0,m.a)(),...(0,c.H)(),...(0,l.T)(),...(0,d.G)(),...(0,f.G)()]);function p(C){const b=E.get(C.id);if(!b)throw new Error("Unknown field matcher: "+C.id);return b.get(C.options)}function s(C){const b=v.get(C.id);if(!b)throw new Error("Unknown frame matcher: "+C.id);return b.get(C.options)}function y(C){const b=h.get(C.id);if(!b)throw new Error("Unknown value matcher: "+C.id);return b.get(C.options)}},79965:(G,A,e)=>{"use strict";e.d(A,{Lk:()=>v,Ys:()=>i,cC:()=>h});var n=e(94372),a=e(49531),o=e(58309),r=e(70274),i=(p=>(p.exclude="exclude",p.include="include",p))(i||{});const g={id:r.mi.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:p=>{const y=l(new Set([p]));return(C,b,S)=>p===C.name||p===(0,n.CZ)(C,b,S)||!!(y&&y(C,b,S))},getOptionsDisplayText:p=>`Field name: ${p}`},u={id:r.mi.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:"include",names:[]},get:p=>{const{names:s,mode:y="include"}=p,C=new Set(s??[]),b=l(C),S=(D,M,T)=>C.has(D.name)||C.has((0,n.CZ)(D,M,T))||!!(b&&b(D,M,T));return y==="exclude"?(D,M,T)=>!S(D,M,T):S},getOptionsDisplayText:p=>{const{names:s,mode:y}=p,C=(s??[]).join(", ");return y==="exclude"?`All except: ${C}`:`All of: ${C}`}};function l(p){let s;return window?.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback&&(p.has(o.M5)?s=(C,b)=>!!C.labels&&C.labels?.__name__===C.name:(p.has("Time")||p.has("time"))&&(s=(C,b)=>b.meta?.typeVersion==null&&C.type===o.fS.time)),s}const m={id:r.mi.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:p=>{const s=f(p);return(y,C,b)=>{const S=(0,n.CZ)(y,C,b);return!!s&&s.test(S)}},getOptionsDisplayText:p=>`Field name by pattern: ${p}`},c={id:r.mi.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:p=>(s,y,C)=>y.refId===p,getOptionsDisplayText:p=>`Math all fields returned by query with reference ID: ${p}`},d={id:r.mi.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:p=>{const s=m.get(p?.pattern||""),y=u.get({mode:"include",names:p?.names??[]});return(C,b,S)=>y(C,b,S)||s(C,b,S)},getOptionsDisplayText:p=>{const s=p?.pattern??"",y=p?.names?.join(",")??"";return`Field name by pattern: ${s} or names: ${y}`}},f=p=>{if(p)try{return(0,a.jO)(p)}catch(s){console.error(s);return}},E={id:r.E4.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:p=>{const s=(0,a.jO)(p);return y=>s.test(y.name||"")},getOptionsDisplayText:p=>`Frame name: ${p}`};function v(){return[g,m,u,d,c]}function h(){return[E]}},1290:(G,A,e)=>{"use strict";e.d(A,{Qw:()=>E,Ty:()=>C,fX:()=>b,m3:()=>c});var n=e(58309),a=e(34103),o=e(70274);const r={id:o.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:S=>{const D=S.map(M=>(0,a.sq)(M));return(M,T,R)=>{for(const O of D)if(O(M,T,R))return!0;return!1}},getOptionsDisplayText:S=>{let D="";for(const M of S){D.length>0&&(D+=" OR ");const T=a.Ls.get(M.id);D+=T.getOptionsDisplayText?T.getOptionsDisplayText(M):T.name}return D}},i={id:o.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:S=>{const D=S.map(M=>(0,a.b9)(M));return M=>{for(const T of D)if(T(M))return!0;return!1}},getOptionsDisplayText:S=>{let D="";for(const M of S){D.length>0&&(D+=" OR ");const T=a.Ac.get(M.id);D+=T.getOptionsDisplayText?T.getOptionsDisplayText(M):T.name}return D}},g={id:o.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:S=>{const D=S.map(M=>(0,a.sq)(M));return(M,T,R)=>{for(const O of D)if(!O(M,T,R))return!1;return!0}},getOptionsDisplayText:S=>{let D="";for(const M of S){D.length>0&&(D+=" AND ");const T=a.Ls.get(M.id);D+=T.getOptionsDisplayText?T.getOptionsDisplayText(M):T.name}return D}},u={id:o.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:S=>{const D=S.map(M=>(0,a.b9)(M));return M=>{for(const T of D)if(!T(M))return!1;return!0}},getOptionsDisplayText:S=>{let D="";for(const M of S){D.length>0&&(D+=" AND ");const T=a.Ac.get(M.id);D+=T.getOptionsDisplayText?T.getOptionsDisplayText(M):T.name}return D}},l={id:o.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:S=>{const D=(0,a.sq)(S);return(M,T,R)=>!D(M,T,R)},getOptionsDisplayText:S=>{const D=a.Ls.get(S.id);return"NOT "+(D.getOptionsDisplayText?D.getOptionsDisplayText(S.options):D.name)}},m={id:o.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:S=>{const D=(0,a.b9)(S);return M=>!D(M)},getOptionsDisplayText:S=>{const D=a.Ac.get(S.id);return"NOT "+(D.getOptionsDisplayText?D.getOptionsDisplayText(S.options):D.name)}},c=S=>!0,d=S=>!0,f=S=>!1,E=S=>S.type!==n.fS.time,v=S=>!1,h={id:o.Ff.alwaysMatch,name:"All Fields",description:"Always Match",get:S=>c,getOptionsDisplayText:S=>"Always"},p={id:o.Ff.alwaysMatch,name:"All Frames",description:"Always Match",get:S=>d,getOptionsDisplayText:S=>"Always"},s={id:o.Ff.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:S=>f,getOptionsDisplayText:S=>"Never"},y={id:o.Ff.neverMatch,name:"No Frames",description:"Never Match",get:S=>v,getOptionsDisplayText:S=>"Never"};function C(){return[r,g,l,h,s]}function b(){return[i,u,m,p,y]}},31674:(G,A,e)=>{"use strict";e.d(A,{Z:()=>o,w:()=>a});var n=e(73039),a=(r=>(r.Combine="combine",r.CalculateNewFields="calculateNewFields",r.CreateNewVisualization="createNewVisualization",r.Filter="filter",r.PerformSpatialOperations="performSpatialOperations",r.Reformat="reformat",r.ReorderAndRename="reorderAndRename",r))(a||{});const o=new n.B},6011:(G,A,e)=>{"use strict";e.d(A,{H:()=>m});var n=e(21964),a=e(25066),o=e(98231),r=e(34103),i=e(31674);const g=(d,f)=>E=>{const v=i.Z.get(d.id);if(!v)return E;const p={...v.transformation.defaultOptions??{},...d.options},s=d.filter?.options?(0,r.b9)(d.filter):void 0;return E.pipe((0,a.z)(y=>(0,n.of)(u(y,s)).pipe(v.transformation.operator(p,f),l(y,v,s))))};function u(d,f){return f?d.filter(E=>f(E)):d}const l=(d,f,E)=>v=>v.pipe((0,o.U)(h=>{if(h===d)return h;for(const p of h)p.meta||(p.meta={}),p.meta.transformations?p.meta.transformations=[...p.meta.transformations,f.id]:p.meta.transformations=[f.id];if(E){let p=0;const s=d.filter((y,C)=>{const b=!E(y);return b&&!p&&(p=C),b});s.length&&h.splice(p,0,...s)}return h}));function m(d,f,E){const v=(0,n.of)(f);if(!d.length)return v;const h=[],p=E??{interpolate:s=>s};for(let s=0;s<d.length;s++){const y=d[s];if(c(y))h.push(y(p));else{if(y.disabled)continue;h.push(g(y,p))}}return v.pipe.apply(v,h)}function c(d){return typeof d=="function"}},53615:(G,A,e)=>{"use strict";e.d(A,{Y:()=>De});var n=e(89872),a=e(3874),o=e(8499),r=e(68868),i=e(37882),g=e(19285),u=e(70274),l=e(61751);const m={id:l.W.filterByRefId,name:"Filter data by query refId",description:"select a subset of results",defaultOptions:{},operator:(Pe,ye)=>Te=>{const nt={};return Pe.include&&(nt.include={id:u.E4.byRefId,options:Pe.include}),Pe.exclude&&(nt.exclude={id:u.E4.byRefId,options:Pe.exclude}),Te.pipe(i.u.operator(nt,ye))}};var c=e(34460),d=e(33661),f=e(98231),E=e(92344);const v={id:l.W.formatTime,name:"Format time",description:"Set the output format of a time field",defaultOptions:{timeField:"",outputFormat:"",useTimezone:!0},isApplicable:Pe=>{for(const ye of Pe)for(const Te of ye.fields)if(Te.type==="time")return E.s.Applicable;return E.s.NotApplicable},isApplicableDescription:"The Format time transformation requires a time field to work. No time field could be found.",operator:Pe=>ye=>ye.pipe((0,f.U)(Te=>{const nt=h(Pe.timeField,Pe.outputFormat,Pe.timezone);return!Array.isArray(Te)||Te.length===0?Te:Te.map(ct=>({...ct,fields:nt(ct.fields)}))}))},h=(Pe,ye,Te)=>nt=>nt.map(ct=>{if(ct.name===Pe){let he=null;return Te?he=(0,o.ub)(ct,ye,{timeZone:Te}):he=(0,o.ub)(ct,ye),he}return ct});var p=e(87762),s=e(94372),y=e(58309),C=e(34103);const b="Time",S="Time",D="Value",M=E.U.Empty,T=window?.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback,R={id:l.W.groupingToMatrix,name:"Grouping to Matrix",description:"Groups series by field and return a matrix visualisation",defaultOptions:{columnField:b,rowField:S,valueField:D},isApplicable:Pe=>{let ye=0;for(const Te of Pe)ye+=Te.fields.length;return ye>=3?E.s.Applicable:E.s.NotApplicable},isApplicableDescription:Pe=>{let ye=0;for(const Te of Pe)ye+=Te.fields.length;return`Grouping to matrix requiers at least 3 fields to work. Currently there are ${ye} fields.`},operator:Pe=>ye=>ye.pipe((0,f.U)(Te=>{const nt=Pe.columnField||b,ct=Pe.rowField||S,he=Pe.valueField||D,xe=Pe.emptyValue||M;if(Te.length!==1)return Te;const Me=Te[0],He=x(Me,nt),Ve=x(Me,ct),Oe=x(Me,he),Ne=`${ct}\\${nt}`;if(!He||!Ve||!Oe)return Te;const _e=O(He.values),qe=O(Ve.values),rt={};for(let Je=0;Je<Oe.values.length;Je++){const Ae=He.values[Je],Ke=Ve.values[Je],Xe=Oe.values[Je];rt[Ae]||(rt[Ae]={}),rt[Ae][Ke]=Xe}const mt=[{name:Ne,values:qe,type:y.fS.string,config:{}}];for(const Je of _e){let Ae=[];for(const Ke of qe){const Xe=rt[Je][Ke]??I(xe);Ae.push(Xe)}T&&typeof Je=="number"&&(Oe.config={...Oe.config,displayNameFromDS:void 0}),mt.push({name:Je.toString(),values:Ae,config:Oe.config,type:Oe.type})}return[{fields:mt,length:qe.length}]}))};function O(Pe){const ye=new Set;for(let Te=0;Te<Pe.length;Te++)ye.add(Pe[Te]);return Array.from(ye)}function x(Pe,ye){for(let Te=0;Te<Pe.fields.length;Te++){const nt=Pe.fields[Te];let ct;if(T?ct=C.Ls.get(u.mi.byName).get(ye)(nt,Pe,[Pe]):ct=ye===(0,s.CZ)(nt),ct)return nt}return null}function I(Pe){switch(Pe){case E.U.False:return!1;case E.U.True:return!0;case E.U.Null:return null;case E.U.Empty:default:return""}}var L=e(87500),P=e(73886),N=e(8138),F=e(4578);const U=10,j={id:l.W.limit,name:"Limit",description:"Limit the number of items to the top N",defaultOptions:{limitField:U},operator:(Pe,ye)=>Te=>Te.pipe((0,f.U)(nt=>{let ct=U;return Pe.limitField!==void 0&&(typeof Pe.limitField=="string"?(0,F.U)()?ct=parseInt(ye.interpolate(Pe.limitField),10):ct=parseInt(Pe.limitField,10):ct=Pe.limitField),nt.map(he=>he.length>ct?{...he,fields:he.fields.map(xe=>({...xe,values:xe.values.slice(0,ct)})),length:ct}:he)}))};var V=e(14857),_=e(77582),H=e(65746);const z={id:l.W.rename,name:"Rename fields by name",description:"Rename fields based on configuration given by user",defaultOptions:{renameByName:{}},operator:Pe=>ye=>ye.pipe((0,f.U)(Te=>{const nt=K(Pe.renameByName);return!Array.isArray(Te)||Te.length===0?Te:Te.map(ct=>({...ct,fields:nt(ct)}))}))},K=Pe=>ye=>!Pe||Object.keys(Pe).length===0?ye.fields:ye.fields.map(Te=>{const nt=(0,s.CZ)(Te,ye),ct=Pe[nt];return typeof ct!="string"||ct.length===0?Te:{...Te,config:{...Te.config,displayName:ct},state:{...Te.state,displayName:ct}}}),Y={id:l.W.organize,name:"Organize fields by name",description:"Order, filter and rename fields based on configuration given by user",defaultOptions:{excludeByName:{},indexByName:{},renameByName:{},includeByName:{}},isApplicable:Pe=>Pe.length>1?E.s.NotPossible:E.s.Applicable,operator:(Pe,ye)=>Te=>Te.pipe(g.w.operator({include:Pe.includeByName?{names:k(Pe.includeByName)}:void 0,exclude:{names:k(Pe.excludeByName)}},ye),H.t.operator(Pe,ye),z.operator(Pe,ye))},k=Pe=>Pe?Object.keys(Pe).filter(ye=>Pe[ye]):[];var q=e(9463),X=e(49531);const te={id:l.W.renameByRegex,name:"Rename fields by regex",description:"Rename fields based on regular expression by users.",defaultOptions:{regex:"(.*)",renamePattern:"$1"},operator:Pe=>ye=>ye.pipe((0,f.U)(Te=>!Array.isArray(Te)||Te.length===0?Te:Te.map(se(Pe))))},se=Pe=>ye=>{const Te=(0,X.jO)(Pe.regex),nt=ye.fields.map(ct=>{const he=(0,s.CZ)(ct,ye);if(!Te.test(he))return ct;const xe=he.replace(Te,Pe.renamePattern);return{...ct,config:{...ct.config,displayName:xe},state:{...ct.state,displayName:xe}}});return{...ye,fields:nt}};var de=e(56375),re=e(38070),fe=e(45878),ie=e(24677);const oe={id:l.W.seriesToRows,name:"Series to rows",description:"Combines multiple series into a single serie and appends a column with metric name per value.",defaultOptions:{},operator:Pe=>ye=>ye.pipe((0,f.U)(Te=>{if(!Array.isArray(Te)||Te.length<=1||(Te=Te.filter(Me=>Me.length>0),!(0,ie.xI)(Te)))return Te;const nt={},ct=new Set,he=new re.v,xe={name:y.rN,values:[],config:{},type:y.fS.string};for(let Me=0;Me<Te.length;Me++){const He=Te[Me];for(let Ve=0;Ve<He.fields.length;Ve++){const Oe=He.fields[Ve];if(Oe.type===y.fS.time){nt[Me]=Ve,ct.has(y.Ls)||(he.addField(ue(Oe,y.Ls)),he.addField(xe),ct.add(y.Ls));continue}ct.has(y.M5)||(he.addField(ue(Oe,y.M5)),ct.add(y.M5))}}for(let Me=0;Me<Te.length;Me++){const He=Te[Me];for(let Ve=0;Ve<He.length;Ve++){const Oe=nt[Me],Ne=Oe===0?1:0;he.add({[y.Ls]:He.fields[Oe].values[Ve],[y.rN]:(0,s.nf)(He),[y.M5]:He.fields[Ne].values[Ve]})}}return[(0,fe.aK)(he,0,!0)]}))},ue=(Pe,ye)=>({...(0,de.omit)(Pe,["values","state","labels","config","name"]),name:ye,values:[],config:{...(0,de.omit)(Pe.config,["displayName","displayNameFromDS"])}}),me={id:l.W.sortBy,name:"Sort by",description:"Sort fields in a frame.",defaultOptions:{fields:{}},operator:(Pe,ye)=>Te=>Te.pipe((0,f.U)(nt=>!Array.isArray(nt)||nt.length===0||!Pe?.sort?.length?nt:ge(nt,Pe.sort,ye)))};function ge(Pe,ye,Te){return Pe.map(nt=>{const ct=Ue(nt,ye,Te);return ct.length&&ct[0].index!=null?(0,fe.aK)(nt,ct[0].index,ct[0].desc):nt})}function Ue(Pe,ye,Te){return ye.map(nt=>nt.index!=null?nt:(0,F.U)()?{...nt,index:Pe.fields.findIndex(ct=>Te.interpolate(nt.field)===(0,s.CZ)(ct,Pe))}:{...nt,index:Pe.fields.findIndex(ct=>nt.field===(0,s.CZ)(ct,Pe))})}const De={noopTransformer:_.d,filterFieldsTransformer:i.P,filterFieldsByNameTransformer:g.w,filterFramesTransformer:i.u,filterFramesByRefIdTransformer:m,filterByValueTransformer:c.JA,formatStringTransformer:d.kA,formatTimeTransformer:v,orderFieldsTransformer:H.t,organizeFieldsTransformer:Y,reduceTransformer:q.mf,concatenateTransformer:a.aE,calculateFieldTransformer:n.U,joinByFieldTransformer:P.M,seriesToColumnsTransformer:P.M,seriesToRowsTransformer:oe,renameFieldsTransformer:z,labelsToFieldsTransformer:N.r,ensureColumnsTransformer:r.W,groupByTransformer:p.i,sortByTransformer:me,mergeTransformer:V.R,renameByRegexTransformer:te,histogramTransformer:L.Op,convertFieldTypeTransformer:o.mg,groupingToMatrixTransformer:R,limitTransformer:j}},89872:(G,A,e)=>{"use strict";e.d(A,{Hx:()=>y,U:()=>M,a1:()=>b,h:()=>j,iO:()=>s,ie:()=>p});var n=e(56375),a=e.n(n),o=e(98231),r=e(45878),i=e(94372),g=e(58309),u=e(23757),l=e(47302),m=e(86468),c=e(16515),d=e(34103),f=e(70274),E=e(68868),v=e(61751),h=e(77582),p=(V=>(V.ReduceRow="reduceRow",V.CumulativeFunctions="cumulativeFunctions",V.WindowFunctions="windowFunctions",V.BinaryOperation="binary",V.UnaryOperation="unary",V.Index="index",V))(p||{}),s=(V=>(V.Percentage="percentage",V.Fixed="fixed",V))(s||{}),y=(V=>(V.Trailing="trailing",V.Centered="centered",V))(y||{});const C={reducer:c.gz.sum},b={reducer:c.gz.mean,windowAlignment:"trailing",windowSizeMode:"percentage",windowSize:.1},S={left:"",operator:l.L.Add,right:""},D={operator:m.T.Abs,fieldName:""},M={id:v.W.calculateField,name:"Add field from calculation",description:"Use the row values to calculate a new field",defaultOptions:{mode:"reduceRow",reduce:{reducer:c.gz.sum}},operator:(V,_)=>H=>{const z=V&&V.timeSeries!==!1?E.W.operator(null,_):h.d.operator({},_);return V.alias!=null&&(V.alias=_.interpolate(V.alias)),H.pipe(z,(0,o.U)(K=>{const Y=V.mode??"reduceRow";let k;switch(Y){case"reduceRow":k=P((0,n.defaults)(V.reduce,C),K);break;case"cumulativeFunctions":k=L((0,n.defaults)(V.cumulative,C),K);break;case"windowFunctions":k=T((0,n.defaults)(V.window,b),K);break;case"unary":k=U((0,n.defaults)(V.unary,D),K);break;case"binary":const q={...V.binary,left:_.interpolate(V.binary?.left),right:_.interpolate(V.binary?.right)};k=F((0,n.defaults)(q,S),K);break;case"index":return K.map(X=>{const te=[...Array(X.length).keys()];if(V.index?.asPercentile)for(let de=0;de<te.length;de++)te[de]=te[de]/te.length;const se={name:V.alias??"Row",type:g.fS.number,values:te,config:V.index?.asPercentile?{unit:"percentunit"}:{}};return{...X,fields:V.replaceFields?[se]:[...X.fields,se]}})}return k?K.map(q=>{const X=k(q);if(!X)return q;const te={name:j(V),type:g.fS.number,config:{},values:X};let se=[];if(V.replaceFields){const{timeField:de}=(0,r.sV)(q);de&&V.timeSeries!==!1?se=[de,te]:se=[te]}else se=[...q.fields,te];return{...q,fields:se}}):K}))}};function T(V,_){if(V.windowSize<=0)throw new Error("Add field from calculation transformation - Window size must be larger than 0");let H=(0,d.sq)({id:f.mi.numeric});return V.field&&(H=(0,d.sq)({id:f.mi.byNames,options:{names:[V.field]}})),z=>{const K=Math.ceil(V.windowSize*(V.windowSizeMode==="percentage"?z.length:1));let Y=null;for(const k of z.fields)if(H(k,z,_)){Y=k;break}if(Y){if(![c.gz.mean,c.gz.stdDev,c.gz.variance].includes(V.reducer))throw new Error(`Add field from calculation transformation - Unsupported reducer: ${V.reducer}`);return V.windowAlignment==="centered"?O(z,V.reducer,Y,K):R(z,V.reducer,Y,K)}}}function R(V,_,H,z){const K=[];let Y=0,k=0;for(let q=0;q<V.length;q++)if(_===c.gz.mean){const X=H.values[q];X!=null&&(k++,Y+=X,q>z-1&&(Y-=H.values[q-z],k--)),K.push(k===0?0:Y/k)}else if(_===c.gz.variance){const X=Math.max(0,q-z+1),te=q+1;K.push(x(H.values.slice(X,te)))}else if(_===c.gz.stdDev){const X=Math.max(0,q-z+1),te=q+1;K.push(I(H.values.slice(X,te)))}return K}function O(V,_,H,z){const K=[];let Y=0,k=0;const q=Math.ceil(z/2)-1,X=Math.floor(z/2);for(let te=0;te<V.length;te++){const se=te-X,de=te+q;if(_===c.gz.mean){if(te===0)for(let re=0;re<q+1&&re<H.values.length;re++)H.values[re]!=null&&(Y+=H.values[re],k++);else de<H.values.length&&H.values[de]!=null&&(Y+=H.values[de],k++),se>0&&H.values[se-1]!=null&&(Y-=H.values[se-1],k--);K.push(k===0?0:Y/k)}else if(_===c.gz.variance){const re=H.values.slice(Math.max(0,se),Math.min(de+1,H.values.length));K.push(x(re))}else if(_===c.gz.stdDev){const re=H.values.slice(Math.max(0,se),Math.min(de+1,H.values.length));K.push(I(re))}}return K}function x(V){if(V.length<1)return 0;let _=0,H=0,z=0;for(let Y=0;Y<V.length;Y++){const k=V[Y];if(k!=null){z++;let q=H;H+=(k-q)/z,_+=(k-q)*(k-H)}}return z===0?0:_/z}function I(V){return Math.sqrt(x(V))}function L(V,_){let H=(0,d.sq)({id:f.mi.numeric});if(V.field&&(H=(0,d.sq)({id:f.mi.byNames,options:{names:[V.field]}})),![c.gz.mean,c.gz.sum].includes(V.reducer))throw new Error(`Add field from calculation transformation - Unsupported reducer: ${V.reducer}`);return z=>{let K=null;for(const q of z.fields)if(H(q,z,_)){K=q;break}if(!K)return;const Y=[];let k=0;for(let q=0;q<z.length;q++)k+=K.values[q]??0,V.reducer===c.gz.sum?Y.push(k):V.reducer===c.gz.mean&&Y.push(k/(q+1));return Y}}function P(V,_){let H=(0,d.sq)({id:f.mi.numeric});V.include&&V.include.length&&(H=(0,d.sq)({id:f.mi.byNames,options:{names:V.include}}));const z=c.TB.get(V.reducer);if(!z)throw new Error(`Unknown reducer: ${V.reducer}`);const K=z.reduce??c.uP,Y=V.nullValueMode===u.Gl.Ignore,k=V.nullValueMode===u.Gl.AsZero;return q=>{const X=[];for(const re of q.fields)H(re,q,_)&&X.push(re.values);const te=X.length,se={name:"temp",values:new Array(te),type:g.fS.number,config:{}},de=[];for(let re=0;re<q.length;re++){for(let fe=0;fe<te;fe++)se.values[fe]=X[fe][re];de.push(K(se,Y,k)[V.reducer])}return de}}function N(V,_,H){if(!_)return;for(const K of V.fields)if(_===(0,i.CZ)(K,V,H))return K.type===g.fS.boolean?K.values.map(Y=>Y?1:0):K.values;const z=parseFloat(_);if(!isNaN(z))return new Array(V.length).fill(z)}function F(V,_){const H=l.n.getIfExists(V.operator);return z=>{const K=N(z,V.left,_),Y=N(z,V.right,_);if(!K||!Y||!H)return;const k=new Array(K.length);for(let q=0;q<k.length;q++)k[q]=H.operation(K[q],Y[q]);return k}}function U(V,_){const H=m.m.getIfExists(V.operator);return z=>{let K=[];for(const k of z.fields)V.fieldName===(0,i.CZ)(k,z,_)&&k.type===g.fS.number&&(K=k.values);if(!K.length||!H)return;const Y=new Array(K.length);for(let k=0;k<Y.length;k++)Y[k]=H.operation(K[k]);return Y}}function j(V){if(V.alias?.length)return V.alias;switch(V.mode){case"cumulativeFunctions":{const{cumulative:_}=V;return`cumulative ${_?.reducer??""}${_?.field?`(${_.field})`:""}`}case"windowFunctions":{const{window:_}=V;return`${_?.windowAlignment??""} moving ${_?.reducer??""}${_?.field?`(${_.field})`:""}`}case"unary":{const{unary:_}=V;return`${_?.operator??""}${_?.fieldName?`(${_.fieldName})`:""}`}case"binary":{const{binary:_}=V;return`${_?.left??""} ${_?.operator??""} ${_?.right??""}`.replace(/\$/g,"")}case"reduceRow":{const _=c.TB.getIfExists(V.reduce?.reducer);if(_)return _.name}break;case"index":return"Row"}return"math"}},3874:(G,A,e)=>{"use strict";e.d(A,{HO:()=>r,aE:()=>i});var n=e(98231),a=e(58309),o=e(61751),r=(u=>(u.Drop="drop",u.FieldName="field",u.Label="label",u))(r||{});const i={id:o.W.concatenate,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",defaultOptions:{frameNameMode:"field",frameNameLabel:"frame"},operator:u=>l=>l.pipe((0,n.U)(m=>!Array.isArray(m)||m.length<2?m:[g(m,u)]))};function g(u,l){let m=!0,c=u[0].length;const d=l.frameNameLabel??"frame";let f=[];for(const E of u){c!==E.length&&(m=!1,c=Math.max(c,E.length));for(const v of E.fields){const h={...v};h.state=void 0,E.name&&(l.frameNameMode==="drop"||(l.frameNameMode==="label"?(h.labels={...v.labels},h.labels[d]=E.name):!h.name||h.name===a.M5?h.name=E.name:h.name=`${E.name} \xB7 ${v.name}`)),f.push(h)}}return m||(f=f.map(E=>{if(E.values.length===c)return E;const v=E.values.slice();return v.length=c,{...E,values:v}})),{fields:f,length:c}}},8499:(G,A,e)=>{"use strict";e.d(A,{J_:()=>p,mg:()=>u,p8:()=>m,ub:()=>v});var n=e(98231),a=e(61385),o=e(58309),r=e(34103),i=e(70274),g=e(61751);const u={id:g.W.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type.",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0,timezone:void 0}]},operator:(y,C)=>b=>b.pipe((0,n.U)(S=>u.transformer(y,C)(S))),transformer:y=>C=>!Array.isArray(C)||C.length===0?C:l(y,C)??[]};function l(y,C){if(!y.conversions.length)return C;const b=C.map(S=>({...S}));for(const S of y.conversions){if(!S.targetField)continue;const D=r.Ls.get(i.mi.byName).get(S.targetField);for(const M of b)M.fields=M.fields.map(T=>D(T,M,b)?m(T,S):T)}return b}function m(y,C){switch(C.destinationType){case o.fS.time:return p(y,C.dateFormat);case o.fS.number:return f(y);case o.fS.string:return v(y,C.dateFormat,{timeZone:C.timezone});case o.fS.boolean:return E(y);case o.fS.enum:return s(y,C.enumConfig);case o.fS.other:return h(y);default:return y}}const c=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3,})?(?:Z|[-+]\d{2}:?\d{2})$/;function d(y,C){let b=C?{format:C}:void 0;const S=y.values.slice();let D=S.find(T=>T!=null),M=typeof D=="string"&&c.test(D);for(let T=0;T<S.length;T++)if(S[T]){let R=M?Date.parse(S[T]):(0,a.J)(S[T],b).valueOf();S[T]=Number.isFinite(R)?R:null}else S[T]=null;return{...y,type:o.fS.time,values:S}}function f(y){const C=y.values.slice(),b=C.some(S=>typeof S=="string");for(let S=0;S<C.length;S++){let D=C[S];b&&D!=null&&typeof D=="string"&&(D=D.replace(/,/g,""));const M=+D;C[S]=Number.isFinite(M)?M:null}return{...y,type:o.fS.number,values:C}}function E(y){const C=y.values.slice();for(let b=0;b<C.length;b++)C[b]=!!C[b];return{...y,type:o.fS.boolean,values:C}}function v(y,C,b){let S=y.values;switch(y.type){case o.fS.time:S=S.map(D=>(0,a.J)(D,b).format(C));break;case o.fS.other:S=S.map(D=>JSON.stringify(D));break;default:S=S.map(D=>`${D}`)}return{...y,type:o.fS.string,values:S}}function h(y){const C=y.values.slice();for(let b=0;b<C.length;b++)try{C[b]=JSON.parse(C[b])}catch{C[b]=null}return{...y,type:o.fS.other,values:C}}function p(y,C){const b=typeof y.values[0]=="number";return y.type===o.fS.time&&b?y:b?{...y,type:o.fS.time}:d(y,C)}function s(y,C){const b={...C},S=y.values.slice(),D=new Map;if(b.text&&b.text.length>0)for(let M=0;M<b.text.length;M++)D.set(b.text[M],M);else return y;for(let M=0;M<S.length;M++){const T=S[M];S[M]=D.get(T)}return{...y,config:{...y.config,type:{enum:b}},type:o.fS.enum,values:S}}},68868:(G,A,e)=>{"use strict";e.d(A,{W:()=>i});var n=e(98231),a=e(45878),o=e(61751),r=e(73886);const i={id:o.W.ensureColumns,name:"Ensure Columns Transformer",description:"Will check if current data frames is series or columns. If in series it will convert to columns.",operator:(u,l)=>m=>m.pipe((0,n.U)(c=>i.transformer(u,l)(c))),transformer:(u,l)=>m=>{const c=g(m);return m.length>1&&c?r.M.transformer({byField:c},l)(m):m}};function g(u){let l;for(const m of u){const{timeField:c}=(0,a.sV)(m);if(!c)return;if(!l)l=c.name;else if(l!==c.name)return}return l}},37882:(G,A,e)=>{"use strict";e.d(A,{P:()=>i,u:()=>g});var n=e(98231),a=e(34103),o=e(61751),r=e(77582);const i={id:o.W.filterFields,name:"Filter Fields",description:"select a subset of fields",defaultOptions:{},operator:(u,l)=>m=>!u.include&&!u.exclude?m.pipe(r.d.operator({},l)):(typeof u.include?.options=="string"?u.include.options=l.interpolate(u.include?.options):typeof u.include?.options?.pattern=="string"&&(u.include.options.pattern=l.interpolate(u.include?.options.pattern)),typeof u.exclude?.options=="string"?u.exclude.options=l.interpolate(u.exclude?.options):typeof u.exclude?.options?.pattern=="string"&&(u.exclude.options.pattern=l.interpolate(u.exclude?.options.pattern)),m.pipe((0,n.U)(c=>{const d=u.include?(0,a.sq)(u.include):null,f=u.exclude?(0,a.sq)(u.exclude):null,E=[];for(const v of c){const h=[];for(let s=0;s<v.fields.length;s++){const y=v.fields[s];if(f){if(f(y,v,c))continue;d||h.push(y)}d&&d(y,v,c)&&h.push(y)}if(!h.length)continue;const p={...v,fields:h};E.push(p)}return E})))},g={id:o.W.filterFrames,name:"Filter Frames",description:"select a subset of frames",defaultOptions:{},operator:(u,l)=>m=>!u.include&&!u.exclude?m.pipe(r.d.operator({},l)):m.pipe((0,n.U)(c=>{const d=u.include?(0,a.b9)(u.include):null,f=u.exclude?(0,a.b9)(u.exclude):null,E=[];for(const v of c){if(f){if(f(v))continue;d||E.push(v)}d&&d(v)&&E.push(v)}return E}))}},19285:(G,A,e)=>{"use strict";e.d(A,{f:()=>i,w:()=>r});var n=e(70274),a=e(37882),o=e(61751);const r={id:o.W.filterFieldsByName,name:"Filter fields by name",description:"select a subset of fields",defaultOptions:{},operator:(g,u)=>l=>l.pipe(a.P.operator({include:i(u,g.include,g.byVariable),exclude:i(u,g.exclude,g.byVariable)},u))},i=(g,u,l)=>{if(!u)return;const{names:m,pattern:c,variable:d}=u;if(l&&d){const f=g.interpolate(d);if(/\{.*\}/.test(f)){const E=f.slice(1).slice(0,-1).split(",");return{id:n.mi.byNames,options:{names:E}}}return{id:n.mi.byNames,options:{names:f.split(",")}}}if(!((!Array.isArray(m)||m.length===0)&&!c))return c?!Array.isArray(m)||m.length===0?{id:n.mi.byRegexp,options:c}:{id:n.mi.byRegexpOrNames,options:u}:{id:n.mi.byNames,options:{names:m}}}},34460:(G,A,e)=>{"use strict";e.d(A,{ER:()=>m,JA:()=>c,PQ:()=>l});var n=e(98231),a=e(94372),o=e(34103),r=e(70274),i=e(61751),g=e(77582),u=e(4578),l=(E=>(E.exclude="exclude",E.include="include",E))(l||{}),m=(E=>(E.all="all",E.any="any",E))(m||{});const c={id:i.W.filterByValue,name:"Filter data by values",description:"select a subset of results based on values",defaultOptions:{filters:[],type:"include",match:"any"},operator:(E,v)=>h=>{const p=E.filters,s=E.match==="all",y=E.type==="include";if(!Array.isArray(p)||p.length===0)return h.pipe(g.d.operator({},v));const C=[];return(0,u.U)()&&C.push(...p.map(b=>{if(b.config.id===r.mE.between){const S=v.interpolate(b.config.options.from),D=v.interpolate(b.config.options.to);return{...b,config:{...b.config,options:{...b.config.options,to:D,from:S}}}}else{if(b.config.id===r.mE.regex)return b;if(b.config.options.value){const S=v.interpolate(b.config.options.value),D={...b,config:{...b.config,options:{...b.config.options,value:S}}};return D.config.options.value=S,D}}return b})),h.pipe((0,n.U)(b=>{if(!Array.isArray(b)||b.length===0)return b;const S=new Set;for(const T of b){const R=f(T,b);let O;(0,u.U)()?O=d(C,R):O=d(p,R);for(let x=0;x<T.length;x++){if(S.has(x))continue;let I=!0;for(const L of O){const P=L(x,T,b);if(!s&&P){I=!0;break}if(s&&!P){I=!1;break}I=P}I&&S.add(x)}}const D=[],M=y?S.size:b[0].length-S.size;for(const T of b){const R=[];for(const O of T.fields){const x=[];for(let I=0;I<T.length;I++){if(y&&S.has(I)){x.push(O.values[I]);continue}if(!y&&!S.has(I)){x.push(O.values[I]);continue}}R.push({...O,values:x,state:{}})}D.push({...T,fields:R,length:M})}return D}))}},d=(E,v)=>{const h=()=>!1;return E.map(p=>{const s=v[p.fieldName]??-1;if(s<0)return console.warn(`[FilterByValue] Could not find index for field name: ${p.fieldName}`),h;const y=(0,o.IG)(p.config);return(C,b,S)=>y(C,b.fields[s],b,S)})},f=(E,v)=>E.fields.reduce((h,p,s)=>{const y=(0,a.CZ)(p,E,v);return h[y]=s,h},{})},33661:(G,A,e)=>{"use strict";e.d(A,{kA:()=>m,vh:()=>g});var n=e(98231),a=e(58309),o=e(34103),r=e(70274),i=e(61751),g=(d=>(d.UpperCase="Upper Case",d.LowerCase="Lower Case",d.SentenceCase="Sentence Case",d.TitleCase="Title Case",d.PascalCase="Pascal Case",d.CamelCase="Camel Case",d.SnakeCase="Snake Case",d.KebabCase="Kebab Case",d.Trim="Trim",d.Substring="Substring",d))(g||{});const u=d=>{const f=d.split(" ");for(let E=0;E<f.length;E++)f[E]=f[E].charAt(0).toUpperCase()+f[E].slice(1).toLowerCase();return f},l=d=>f=>f.values.map(E=>{switch(d.outputFormat){case"Upper Case":return E.toUpperCase();case"Lower Case":return E.toLowerCase();case"Sentence Case":return E.charAt(0).toUpperCase()+E.slice(1);case"Title Case":return u(E).join(" ");case"Pascal Case":return u(E).join("");case"Camel Case":return E=u(E).join(""),E.charAt(0).toLowerCase()+E.slice(1);case"Snake Case":return E.toLowerCase().split(" ").join("_");case"Kebab Case":return E.toLowerCase().split(" ").join("-");case"Trim":return E.trim();case"Substring":return E.substring(d.substringStart,d.substringEnd)}}),m={id:i.W.formatString,name:"Format string",description:"Manipulate string fields formatting",defaultOptions:{stringField:"",outputFormat:"Upper Case"},operator:d=>f=>f.pipe((0,n.U)(E=>{if(E.length===0)return E;const v=o.Ls.get(r.mi.byName).get(d.stringField),h=l(d),p=c(v,h);return E.map(s=>({...s,fields:p(s,E)}))}))},c=(d,f)=>(E,v)=>E.fields.map(h=>{if(d(h,E,v)){const p=f(h);return{...h,type:a.fS.string,values:p}}return h})},87762:(G,A,e)=>{"use strict";e.d(A,{i:()=>m,x:()=>l});var n=e(98231),a=e(45878),o=e(94372),r=e(92344),i=e(58309),g=e(16515),u=e(61751),l=(E=>(E.aggregate="aggregate",E.groupBy="groupby",E))(l||{});const m={id:u.W.groupBy,name:"Group by",description:"Group the data by a field values then process calculations for each group.",defaultOptions:{fields:{}},isApplicable:E=>{let v=0;for(const h of E)h.fields.length>v&&(v=h.fields.length);return v>=2?r.s.Applicable:r.s.NotApplicable},isApplicableDescription:E=>{let v=0;for(const h of E)h.fields.length>v&&(v=h.fields.length);return`The Group by transformation requires a series with at least two fields to work. The maximum number of fields found on a series is ${v}`},operator:E=>v=>v.pipe((0,n.U)(h=>{if(!Object.keys(E.fields).find(y=>E.fields[y].operation==="groupby"))return h;const s=[];for(const y of h){const C=[];for(const D of y.fields)c(D,E)&&C.push(D);if(C.length===0)continue;const b=new Map;for(let D=0;D<y.length;D++){const M=String(C.map(R=>R.values[D])),T=b.get(M)??{};b.has(M)||b.set(M,T);for(let R of y.fields){const O=(0,o.CZ)(R);T[O]||(T[O]={name:O,type:R.type,config:{...R.config},values:[]}),T[O].values.push(R.values[D])}}const S=[];for(const D of C){const M=[],T=(0,o.CZ)(D);b.forEach(R=>{M.push(R[T].values[0])}),S.push({name:D.name,type:D.type,config:{...D.config},values:M})}for(const D of y.fields){if(!d(D,E))continue;const M=(0,o.CZ)(D),T=E.fields[M].aggregations,R={};b.forEach(O=>{const x=O[M],I=(0,g.Kx)({field:x,reducers:T});for(const L of T)Array.isArray(R[L])||(R[L]=[]),R[L].push(I[L])});for(const O of T){const x={name:`${M} (${O})`,values:R[O]??[],type:i.fS.other,config:{}};x.type=f(O,D,x),S.push(x)}}s.push({fields:S,length:b.size})}return s}))},c=(E,v)=>{const h=(0,o.CZ)(E);return v?.fields[h]?.operation==="groupby"},d=(E,v)=>{const h=(0,o.CZ)(E);return v?.fields[h]?.operation==="aggregate"&&Array.isArray(v?.fields[h].aggregations)&&v?.fields[h].aggregations.length>0},f=(E,v,h)=>{switch(E){case g.gz.allIsNull:return i.fS.boolean;case g.gz.last:case g.gz.lastNotNull:case g.gz.first:case g.gz.firstNotNull:return v.type;default:return(0,a.fu)(h)??i.fS.string}}},87500:(G,A,e)=>{"use strict";e.d(A,{Jz:()=>D,Ok:()=>p,Op:()=>v,UO:()=>M,Zi:()=>c,cO:()=>s,gY:()=>S,kl:()=>y,mB:()=>T,py:()=>E,qr:()=>C,wL:()=>h,zM:()=>O});var n=e(98231),a=e(64282),o=e(40354),r=e(512),i=e(58309),g=e(63352),u=e(61751),l=e(85334),m=e(4578);const c=[1e-9,2e-9,25e-10,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],d=[],f=(x,I)=>x-I,E={bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},v={id:u.W.histogram,name:"Histogram",description:"Calculate a histogram from input data.",defaultOptions:{fields:{}},operator:(x,I)=>L=>L.pipe((0,n.U)(P=>v.transformer(x,I)(P))),transformer:(x,I)=>L=>{if(!Array.isArray(L)||L.length===0)return L;let P,N;x.bucketSize&&((0,m.U)()&&(x.bucketSize=I.interpolate(x.bucketSize.toString())),typeof x.bucketSize=="string"?P=parseFloat(x.bucketSize):P=x.bucketSize,isNaN(P)&&(P=void 0)),x.bucketOffset&&((0,m.U)()&&(x.bucketOffset=I.interpolate(x.bucketOffset.toString())),typeof x.bucketOffset=="string"?N=parseFloat(x.bucketOffset):N=x.bucketOffset,isNaN(N)&&(N=void 0));const F={bucketSize:P,bucketOffset:N,combine:x.combine},U=S(L,F);return U==null?[]:[O(U)]}},h="xMin";function p(x){return x===h||x==="BucketMin"}const s="xMax";function y(x){return x===s||x==="BucketMax"}function C(x){if(x.meta?.type===r.P.HeatmapCells){let N=x.fields.find(z=>z.name==="yMin"),F=x.fields.find(z=>z.name==="yMax"),U=x.fields.find(z=>z.name==="count"),j=[...new Set(F.values)].sort((z,K)=>z-K),V=[...new Set(N.values)].sort((z,K)=>z-K),_=new Map;j.forEach(z=>_.set(z,0));for(let z=0;z<F.values.length;z++){let K=F.values[z];_.set(K,_.get(K)+U.values[z])}return{xMin:{...N,name:"xMin",values:V},xMax:{...F,name:"xMax",values:j},counts:[{...U,values:[..._.values()]}]}}else if(x.meta?.type===r.P.HeatmapRows){let N=[],F=[],U=[],j="0";return x.fields.forEach(_=>{if(_.type===i.fS.number){let H=_.values.reduce((z,K)=>z+K,0);U.push(H),N.push(j),F.push(j=_.name)}}),U.push(0),N.push(j),F.push(j),{xMin:{...x.fields[1],name:"xMin",type:i.fS.string,values:N},xMax:{...x.fields[1],name:"xMax",type:i.fS.string,values:F},counts:[{...x.fields[1],name:"count",type:i.fS.number,values:U}]}}let I,L;const P=[];for(const N of x.fields)p(N.name)?I=N:y(N.name)?L=N:N.type===i.fS.number&&P.push(N);if(!L&&I&&I.values.length>1){let N=I.values,F=(0,g.O)(N[1]-N[0],6);L={...I,name:s,values:N.map(U=>U+F)}}if(!I&&L&&L?.values.length>1){let N=L.values,F=(0,g.O)(N[1]-N[0],6);I={...L,name:h,values:N.map(U=>U-F)}}if(I&&L&&P.length)return{xMin:I,xMax:L,counts:P}}const b=20;function S(x,I){let L=I?.bucketSize,P=I?.bucketOffset??0;if(!L||L<0){let K=[];for(const se of x)for(const de of se.fields)de.type===i.fS.number&&(K=K.concat(de.values));K=K.filter(se=>se!=null),K.sort((se,de)=>se-de);let Y=1/0;if(K.length===1)Y=1;else for(let se=1;se<K.length;se++){let de=K[se]-K[se-1];de!==0&&(Y=Math.min(Y,de))}let k=K[0];const te=(K[K.length-1]-k)/b;for(let se=0;se<c.length;se++){let de=c[se];if(te<de&&de>=Y){L=de;break}}}const N=K=>T(K-P,L)+P;let F=((""+L).match(/\.\d+$/)??["."])[0].length-1,U=[],j=[],V;for(const K of x)for(const Y of K.fields)if(Y.type===i.fS.number){let k=R(Y.values,N,d,f);U.push(k),j.push({...Y,config:{...Y.config,unit:Y.config.unit==="short"?"short":void 0}}),!V&&Y.config.unit&&(V=Y.config)}if(!j.length)return null;let _=(0,l.v_)(U);for(let K=1;K<_.length;K++){let Y=_[K];for(let k=0;k<Y.length;k++)Y[k]==null&&(Y[k]=0)}const H={name:h,values:_[0],type:i.fS.number,state:void 0,config:F===0?V??{}:{...V,decimals:F}},z={...H,name:s,values:_[0].map(K=>K+L)};if(I?.combine){const K=new Array(_[0].length).fill(0);for(let Y=1;Y<_.length;Y++)for(let k=0;k<K.length;k++)K[k]+=_[Y][k];j=[{...j[0],name:"count",values:K,type:i.fS.number,state:void 0}]}else j.forEach((K,Y)=>{K.values=_[Y+1]});return{xMin:H,xMax:z,counts:j}}function D(x,I){return Math.round(x/I)*I}function M(x,I){return Math.ceil(x/I)*I}function T(x,I){return Math.floor(x/I)*I}function R(x,I,L,P){let N=new Map;for(let V=0;V<x.length;V++){let _=x[V];_!=null&&(_=I(_));let H=N.get(_);H?H.count++:N.set(_,{value:_,count:1})}L&&L.forEach(V=>N.delete(V));let F=[...N.values()];P&&F.sort((V,_)=>P(V.value,_.value));let U=Array(F.length),j=Array(F.length);for(let V=0;V<F.length;V++)U[V]=F[V].value,j[V]=F[V].count;return[U,j]}function O(x,I){if(!x.xMin.display){const L=(0,a.U)({field:x.xMin,theme:I??(0,o.j)()});x.xMin.display=L,x.xMax.display=L}return x.counts[0].display=(0,a.U)({field:x.counts[0],theme:I??(0,o.j)()}),{length:x.xMin.values.length,meta:{type:r.P.Histogram},fields:[x.xMin,x.xMax,...x.counts]}}},73886:(G,A,e)=>{"use strict";e.d(A,{M:()=>u,c:()=>g});var n=e(98231),a=e(34103),o=e(70274),r=e(61751),i=e(85334),g=(l=>(l.outer="outer",l.inner="inner",l.outerTabular="outerTabular",l))(g||{});const u={id:r.W.joinByField,aliasIds:[r.W.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{byField:void 0,mode:"outer"},operator:(l,m)=>c=>c.pipe((0,n.U)(d=>u.transformer(l,m)(d))),transformer:(l,m)=>{let c;return d=>{if(d.length>1){l.byField&&!c&&(c=a.Ls.get(o.mi.byName).get(m.interpolate(l.byField)));const f=(0,i._9)({frames:d,joinBy:c,mode:l.mode});if(f)return[f]}return d}}}},85334:(G,A,e)=>{"use strict";e.d(A,{Y3:()=>m,_9:()=>c,lP:()=>s,v_:()=>p});var n=e(10256),a=e(45878),o=e(58309),r=e(34103),i=e(70274),g=e(73886);function u(y){const{timeField:C}=(0,a.sV)(y[0]);if(C)return r.Ls.get(i.mi.firstTimeField).get({});let b=[];for(const S of y[0].fields)S.type===o.fS.number&&b.push(S.name);for(let S=1;S<y.length;S++){const D=[];for(const M of y[0].fields)M.type===o.fS.number&&D.push(M.name);b=b.filter(M=>!D.includes(M))}return r.Ls.get(i.mi.byName).get(b[0])}function l(y){return y.joinBy??u(y.frames)}function m(y,C){if(C>=0){let b=y.fields[C];b.type!==o.fS.string&&!s(b.values)&&(y=(0,a.aK)(y,C))}return y}function c(y){if(!y.frames?.length)return;if(y.frames.length===1){let O=y.frames[0],x=O;const I=l(y);let L=x.fields.findIndex(P=>I(P,x,y.frames));if(y.keepOriginIndices&&(x={...O,fields:O.fields.map((P,N)=>{const F={...P},U={frameIndex:0,fieldIndex:N};return F.state?F.state.origin=U:F.state={origin:U},F})},L>0)){const P=x.fields[L],N=x.fields.filter((F,U)=>U!==L);N.unshift(P),x.fields=N,L=0}if(L>=0&&(x=m(x,L)),y.keep){let P=x.fields.filter((N,F)=>F===L||y.keep(N,x,y.frames));O!==x?x.fields=P:x={...O,fields:P}}return x}const C=[],b=[],S=[],D=[];let M=1;const T=l(y);for(let O=0;O<y.frames.length;O++){const x=y.frames[O];if(!x||!x.fields?.length)continue;const I=[f];let L,P=[],N=[];for(let U=0;U<x.fields.length;U++){const j=x.fields[U];if(j.state=j.state||{},!L&&T(j,x,y.frames))L=j;else{if(y.keep&&!y.keep(j,x,y.frames))continue;let V=j.config.custom?.spanNulls;I.push(V===!0?f:V===-1?E:v);let _=j.labels??{},H=j.name;x.name&&(j.name===o.M5?H=x.name:_={..._,name:x.name}),P.push({...j,name:H,labels:_})}y.keepOriginIndices&&(j.state.origin={frameIndex:O,fieldIndex:U})}if(!L)continue;S.length===0&&S.push(L),C.push(I);const F=[L.values];for(const U of P)F.push(U.values),S.push(U),delete U.state?.displayName,N.push(M),M++;D.push(N),b.push(F)}let R=[];return y.mode===g.c.outerTabular?R=d(b,D,S.length,C):R=p(b,C,y.mode),{length:R[0]?R[0].length:0,fields:S.map((O,x)=>({...O,values:R[x]}))}}function d(y,C,b,S){let D={};for(let T=0;T<y.length;T++){let R=y[T],O=R[0];for(let x=0;x<y.length;x++){if(x===T)continue;let I=y[x],L=I[0];for(let P=0;P<O.length;P++){const N=O[P],F=b-1;let U=[N].concat(new Array(F)),j=0;for(let V=1;V<R.length;V++){const _=C[T][j];U[_]=R[V][P],j++}for(let V=0;V<L.length;V++)if(O[P]===L[V]){let _=0;for(let H=1;H<I.length;H++){const z=C[x][_];U[z]=I[H][V],_++}break}D[JSON.stringify(U)]=U}}}let M=[];for(let T=0;T<b;T++)M.push(new Array(0));for(let T in D){const R=D[T];for(let O=0;O<R.length;O++)M[O].push(R[O])}return M}const f=0,E=1,v=2;function h(y,C,b){for(let S=0,D,M=-1;S<C.length;S++){let T=C[S];if(T>M){for(D=T-1;D>=0&&y[D]==null;)y[D--]=null;for(D=T+1;D<b&&y[D]==null;)y[M=D++]=null}}}function p(y,C,b=g.c.outer){let S;if(b===g.c.inner)S=new Set((0,n.Z)(y.map(R=>R[0])));else{S=new Set;for(let R=0;R<y.length;R++){let x=y[R][0],I=x.length;for(let L=0;L<I;L++)S.add(x[L])}}let D=[Array.from(S).sort((R,O)=>R-O)],M=D[0].length,T=new Map;for(let R=0;R<M;R++)T.set(D[0][R],R);for(let R=0;R<y.length;R++){let O=y[R],x=O[0];for(let I=1;I<O.length;I++){let L=O[I],P=Array(M).fill(void 0),N=C?C[R][I]:E,F=[];for(let U=0;U<L.length;U++){let j=L[U],V=T.get(x[U]);j===null?N!==f&&(P[V]=j,N===v&&F.push(V)):P[V]=j}h(P,F,M),D.push(P)}}return D}function s(y,C=50){const b=y.length;if(b<=1)return!0;let S=0,D=b-1;for(;S<=D&&y[S]==null;)S++;for(;D>=S&&y[D]==null;)D--;if(D<=S)return!0;const M=Math.max(1,Math.floor((D-S+1)/C));for(let T=y[S],R=S+M;R<=D;R+=M){const O=y[R];if(O!=null){if(O<=T)return!1;T=O}}return!0}},8138:(G,A,e)=>{"use strict";e.d(A,{k:()=>i,r:()=>g});var n=e(98231),a=e(94372),o=e(58309),r=e(61751),i=(l=>(l.Columns="columns",l.Rows="rows",l))(i||{});const g={id:r.W.labelsToFields,name:"Labels to fields",description:"Extract time series labels to fields (columns or rows)",defaultOptions:{},operator:(l,m)=>c=>c.pipe((0,n.U)(d=>g.transformer(l,m)(d))),transformer:l=>m=>{if(l.mode==="rows")return u(m,l.keepLabels);const c=[],d=l.keepLabels?.length?new Set(l.keepLabels):void 0;for(const f of m){const E=[],v={};for(const h of f.fields){if(!h.labels){E.push(h);continue}const p={...h,config:{...h.config,displayName:void 0,displayNameFromDS:void 0},labels:void 0};E.push(p);for(const s of Object.keys(h.labels)){if(d&&!d.has(s))continue;if(l.valueLabel===s){p.name=h.labels[s];continue}(v[s]??(v[s]=new Set)).add(h.labels[s])}}for(const h in v)for(const p of v[h]){const s=new Array(f.length).fill(p);E.push({name:h,type:o.fS.string,values:s,config:{}})}c.push({...f,fields:E,length:f.length})}return c}};function u(l,m){const c=[];for(const d of l)for(const f of d.fields)if(f.labels){const E=[],v=[];if(m)for(const h of m)E.push(h),v.push(f.labels[h]);else for(const[h,p]of Object.entries(f.labels))E.push(h),v.push(p);v.length&&c.push({...d,name:(0,a.CZ)(f,d,l),fields:[{name:"label",type:o.fS.string,config:{},values:E},{name:"value",type:o.fS.string,config:{},values:v}],length:v.length})}return c}},14857:(G,A,e)=>{"use strict";e.d(A,{R:()=>u});var n=e(56375),a=e.n(n),o=e(98231),r=e(38070),i=e(92344),g=e(61751);const u={id:g.W.merge,name:"Merge series/tables",description:"Merges multiple series/tables into a single serie/table",defaultOptions:{},isApplicable:v=>v.length>1?i.s.Applicable:i.s.NotApplicable,isApplicableDescription:v=>`The merge transformation requires at least 2 data series to work. There is currently ${v.length} data series.`,operator:v=>h=>h.pipe((0,o.U)(p=>{if(!Array.isArray(p)||p.length<=1)return p;const s=p.filter(O=>O.fields.length>0);if(s.length===0)return[p[0]];const y=new Set,C={},b=[],S=new r.v;for(let O=0;O<s.length;O++){const x=s[O];for(let I=0;I<x.fields.length;I++){const L=x.fields[I];y.has(L.name)||(S.addField(l(L)),y.add(L.name)),C[L.name]=C[L.name]||{},C[L.name][O]=I,s.length-1===O&&f(C,L,s)&&b.push(L.name)}}if(b.length===0)return p;const D={},M=[],T=m(s,C,b),R=c(s,y,C);for(let O=0;O<s.length;O++){const x=s[O];for(let I=0;I<x.length;I++){const L=T(O,I),P=R(O,I);if(!Array.isArray(D[L])){D[L]=[P],M.push(E(L,D));continue}let N=!1;D[L]=D[L].map(F=>d(F,P)?(N=!0,{...F,...P}):F),N||(D[L].push(P),M.push(E(L,D)))}}for(const O of M){const x=D[O.key][O.index];x&&S.add(x)}return[S]}))},l=v=>({...(0,n.omit)(v,["values","state","labels","config"]),values:[],config:{...(0,n.omit)(v.config,"displayName")}}),m=(v,h,p)=>{const s=p.reduce((y,C)=>Object.keys(h[C]).reduce((b,S)=>(b[S]=b[S]||[],b[S].push(h[C][S]),b),y),{});return(y,C)=>s[y].reduce((b,S)=>b+v[y].fields[S].values[C],"")},c=(v,h,p)=>(s,y)=>{const C={},b=Array.from(h);for(const S of b){const D=p[S];if(!D)continue;const M=D[s];if(typeof M!="number")continue;const T=v[s];if(!T||!T.fields)continue;const R=T.fields[M];!R||!R.values||(C[S]=R.values[y])}return C},d=(v,h)=>{let p=!0;for(const s in h)if(!(typeof v[s]>"u")&&v[s]!==null&&v[s]!==h[s]){p=!1;break}return p},f=(v,h,p)=>Object.keys(v[h.name]).length===p.length,E=(v,h)=>({key:v,index:h[v].length-1})},77582:(G,A,e)=>{"use strict";e.d(A,{d:()=>a});var n=e(61751);const a={id:n.W.noop,name:"noop",description:"No-operation transformer",defaultOptions:{},operator:o=>r=>r,transformer:o=>r=>r}},84231:(G,A,e)=>{"use strict";e.d(A,{w:()=>r});var n=e(58309);const a={threshold:(g,u,l)=>g+l,midpoint:(g,u,l)=>(g+u)/2,plusone:(g,u,l)=>g+1};function o(g,u){return g.fields.find(l=>u!=null?l.name===u:l.type===n.fS.time)}function r(g){if(g.frame.length===0)return g.frame;let u=!0,{frame:l,refFieldName:m,refFieldPseudoMax:c,refFieldPseudoMin:d,insertMode:f}=g;f||(f=a.threshold);const E=o(l,m);if(E==null)return l;E.state={...E.state,nullThresholdApplied:!0};const v=l.fields.map(p=>p.config.custom?.insertNulls||E.config.interval||null),h=new Set(v);if(h.delete(null),h.size===0)return l;if(h.size===1){const p=h.values().next().value;if(p<=0)return l;const s=E.values,y=l.fields.map(b=>b.values),C=i(s,y,p,d,c,f,u);return C===y?l:{...l,length:C[0].length,fields:l.fields.map((b,S)=>({...b,values:C[S]}))}}return l}function i(g,u,l,m=null,c=null,d,f){const E=g.length,v=[];if(m!=null&&m<g[0]){let y=Math.ceil((g[0]-m)/l),C=g[0]-y*l;for(;C<g[0];)v.push(d(C-l,C,l)),C+=l}v.push(g[0]);let h=g[0];for(let y=1;y<E;y++){const C=g[y];for(;C-h>l&&(v.push(d(h,C,l)),h+=l,!!f););v.push(C),h=C}if(c!=null&&c>h)for(;h+l<c;)v.push(d(h,c,l)),h+=l;const p=v.length;if(p===E)return u;const s=[];for(let y of u){let C;if(y!==g){C=Array(p);for(let b=0,S=0;b<p;b++)C[b]=g[S]===v[b]?y[S++]:null}else C=v;s.push(C)}return s}},44558:(G,A,e)=>{"use strict";e.d(A,{I:()=>n});function n(a){return{...a,fields:a.fields.map(o=>{const r=+o.config?.noValue;if(Number.isNaN(r))return o;{const i=o.values.slice();for(let g=0;g<i.length;g++)i[g]===null&&(i[g]=r);return{...o,values:i}}})}}},65746:(G,A,e)=>{"use strict";e.d(A,{$:()=>u,t:()=>g});var n=e(56375),a=e.n(n),o=e(98231),r=e(94372),i=e(61751);const g={id:i.W.order,name:"Order fields by name",description:"Order fields based on configuration given by user",defaultOptions:{indexByName:{}},operator:c=>d=>d.pipe((0,o.U)(f=>{const E=l(c.indexByName);return!Array.isArray(f)||f.length===0?f:f.map(v=>({...v,fields:E(v.fields,f,v)}))}))},u=c=>(d,f)=>m(d,c)-m(f,c),l=c=>(d,f,E)=>{if(!Array.isArray(d)||d.length===0||!c||Object.keys(c).length===0)return d;const v=u(c);return(0,n.clone)(d).sort((h,p)=>v((0,r.CZ)(h,E,f),(0,r.CZ)(p,E,f)))},m=(c,d)=>Number.isInteger(d[c])?d[c]:Number.MAX_SAFE_INTEGER},9463:(G,A,e)=>{"use strict";e.d(A,{AL:()=>m,mf:()=>c});var n=e(98231),a=e(45878),o=e(94372),r=e(58309),i=e(16515),g=e(34103),u=e(1290),l=e(61751),m=(h=>(h.SeriesToRows="seriesToRows",h.ReduceFields="reduceFields",h))(m||{});const c={id:l.W.reduce,name:"Reduce",description:"Reduce all rows or data points to a single value using a function like max, min, mean or last.",defaultOptions:{reducers:[i.gz.max]},operator:h=>p=>p.pipe((0,n.U)(s=>{if(!h?.reducers?.length)return s;const y=h.fields?(0,g.sq)(h.fields):h.includeTimeField&&h.mode==="reduceFields"?u.m3:u.Qw;if(h.mode==="reduceFields")return v(s,y,h.reducers);const C=d(s,y,h.reducers,h.labelsToFields);return C?[C]:[]}))};function d(h,p,s,y){const C=i.TB.list(s),b=C.map(M=>M.id),S=[],D=y?f(h):[];for(const M of h){const T=M.fields.filter(P=>p(P,M,h)),R=T.length,O=[],x=new Array(R);O.push({name:"Field",type:r.fS.string,values:x,config:{}});const I={};if(y)for(const P of D)I[P]=new Array(R),O.push({name:P,type:r.fS.string,values:I[P],config:{}});const L={};for(const P of C)L[P.id]=new Array(R),O.push({name:P.name,type:r.fS.other,values:L[P.id],config:{}});for(let P=0;P<T.length;P++){const N=T[P],F=(0,i.Kx)({field:N,reducers:b});if(y){if(x[P]=N.name,N.labels)for(const U of Object.keys(N.labels))I[U][P]=N.labels[U]}else x[P]=(0,o.CZ)(N,M,h);for(const U of C){const j=F[U.id];L[U.id][P]=j}}for(const P of O)if(P.type===r.fS.other){const N=(0,a.fu)(P);N&&(P.type=N)}S.push({...M,fields:O,length:R})}return E(S)}function f(h){const p=new Set;for(const s of h)for(const y of s.fields)if(y.labels)for(const C of Object.keys(y.labels))p.add(C);return[...p]}function E(h){if(!h?.length)return;const p=h[0];for(let s=1;s<h.length;s++){const y=h[s];for(let C=0;C<p.fields.length;C++){const b=p.fields[C];for(let S=0;S<y.fields.length;S++){const D=y.fields[S],M=C===0&&S===0,T=b.type===D.type&&b.name===D.name;if(M||T){const R=b.values,O=D.values;b.values=R.concat(O)}}}}return p.name=void 0,p.length=p.fields[0].values.length,p}function v(h,p,s){const C=i.TB.list(s).map(S=>S.id),b=[];for(const S of h){const D=[];for(const M of S.fields)if(p(M,S,h)){const T=(0,i.Kx)({field:M,reducers:C});for(const R of C){const O=T[R],x={...M,values:[O]};x.state=void 0,C.length>1&&(x.labels||(x.labels={}),x.labels.reducer=i.TB.get(R).name),D.push(x)}}D.length&&b.push({...S,fields:D,length:1})}return b}},4578:(G,A,e)=>{"use strict";e.d(A,{U:()=>n});const n=()=>window?.grafanaBootData?.settings?.featureToggles?.transformationsVariableSupport},67852:()=>{},29186:()=>{},5108:(G,A,e)=>{"use strict";e.d(A,{Z:()=>n});var n=(a=>(a.NoData="no_data",a.Paused="paused",a.Alerting="alerting",a.OK="ok",a.Pending="pending",a.Unknown="unknown",a))(n||{})},16949:(G,A,e)=>{"use strict";e.d(A,{L:()=>n});var n=(a=>(a.Field="field",a.Text="text",a.Skip="skip",a))(n||{})},81223:(G,A,e)=>{"use strict";e.d(A,{CQ:()=>i,k8:()=>r,zj:()=>o});var n=e(73667),a=e(73999),o=(g=>(g.CloudAlerting="cloud-alerting",g.UnifiedAlerting="unified-alerting",g.Dashboard="dashboard",g.Explore="explore",g.Correlations="correlations",g.Unknown="unknown",g.PanelEditor="panel-editor",g.PanelViewer="panel-viewer",g))(o||{});class r extends n.Sg{constructor(){super(...arguments),this._extensionConfigs=[]}init(u){}setRootPage(u){return this.root=u,this}setComponentsFromLegacyExports(u){if(u.ConfigCtrl&&(this.angularConfigCtrl=u.ConfigCtrl),this.meta&&this.meta.includes){for(const l of this.meta.includes)if(l.type===n.$_.page&&l.component&&!u[l.component]){console.warn("App Page uses unknown component: ",l.component,this.meta);continue}}}get extensionConfigs(){return this._extensionConfigs}configureExtensionLink(u){return this._extensionConfigs.push({...u,type:a.D.link}),this}configureExtensionComponent(u){return this._extensionConfigs.push({...u,type:a.D.component}),this}}var i=(g=>(g.alpha="alpha",g.beta="beta",g))(i||{})},92380:(G,A,e)=>{"use strict";e.d(A,{e:()=>n});var n=(a=>(a.OpenSource="Open Source",a.Pro="Pro",a.Enterprise="Enterprise",a))(n||{})},94864:(G,A,e)=>{"use strict";e.d(A,{Hx:()=>n,Z3:()=>a,bm:()=>o});const n=0,a=100,o="SAML"},62610:(G,A,e)=>{"use strict";e.d(A,{m:()=>n});var n=(a=>(a[a.Off=0]="Off",a[a.Crosshair=1]="Crosshair",a[a.Tooltip=2]="Tooltip",a))(n||{})},23757:(G,A,e)=>{"use strict";e.d(A,{Gl:()=>o,Gu:()=>n,Kn:()=>g,dC:()=>a,fQ:()=>r});var n=(u=>(u.NotStarted="NotStarted",u.Loading="Loading",u.Streaming="Streaming",u.Done="Done",u.Error="Error",u))(n||{});const a=["graph","table","logs","trace","nodeGraph","flamegraph","rawPrometheus"];var o=(u=>(u.Null="null",u.Ignore="connected",u.AsZero="null as zero",u))(o||{});const r=u=>!!u;function i(u){return u}function g(u){return typeof u=="object"&&u!==null?!0:!1}},58309:(G,A,e)=>{"use strict";e.d(A,{Ls:()=>o,M5:()=>a,fS:()=>n,rN:()=>r});var n=(i=>(i.time="time",i.number="number",i.string="string",i.boolean="boolean",i.trace="trace",i.geo="geo",i.enum="enum",i.other="other",i.frame="frame",i.nestedFrames="nestedFrames",i))(n||{});const a="Value",o="Time",r="Metric"},512:(G,A,e)=>{"use strict";e.d(A,{P:()=>n});var n=(a=>(a.TimeSeriesWide="timeseries-wide",a.TimeSeriesLong="timeseries-long",a.TimeSeriesMany="timeseries-many",a.TimeSeriesMulti="timeseries-multi",a.NumericWide="numeric-wide",a.NumericMulti="numeric-multi",a.NumericLong="numeric-long",a.LogLines="log-lines",a.DirectoryListing="directory-listing",a.HeatmapRows="heatmap-rows",a.HeatmapCells="heatmap-cells",a.Histogram="histogram",a))(n||{})},89306:(G,A,e)=>{"use strict";e.d(A,{L8:()=>o,n1:()=>n,o3:()=>r,sN:()=>a});var n=(i=>(i.Datasource="Datasource",i.Correlations="Correlations",i.ExploreCorrelationsEditor="CorrelationsEditor",i))(n||{}),a=(i=>(i.Regex="regex",i.Logfmt="logfmt",i))(a||{}),o=(i=>(i.Series="series",i.Field="field",i.Fields="fields",i.Value="value",i.BuiltIn="built-in",i.Template="template",i))(o||{}),r=(i=>(i.Values="values",i))(r||{})},41466:(G,A,e)=>{"use strict";e.d(A,{MF:()=>r,Ru:()=>i,eA:()=>g,hf:()=>o,iL:()=>u});var n=e(10066),a=e(73667);class o extends a.Sg{constructor(m){super(),this.DataSourceClass=m,this.components={}}setConfigEditor(m){return this.components.ConfigEditor=m,this}setConfigCtrl(m){return this.angularConfigCtrl=m,this}setQueryCtrl(m){return this.components.QueryCtrl=m,this}setAnnotationQueryCtrl(m){return this.components.AnnotationsQueryCtrl=m,this}setQueryEditor(m){return this.components.QueryEditor=m,this}setExploreQueryField(m){return this.components.ExploreQueryField=m,this}setExploreMetricsQueryField(m){return this.components.ExploreMetricsQueryField=m,this}setExploreLogsQueryField(m){return this.components.ExploreLogsQueryField=m,this}setQueryEditorHelp(m){return this.components.QueryEditorHelp=m,this}setExploreStartPage(m){return this.setQueryEditorHelp(m)}setVariableQueryEditor(m){return this.components.VariableQueryEditor=m,this}setMetadataInspector(m){return this.components.MetadataInspector=m,this}setComponentsFromLegacyExports(m){this.angularConfigCtrl=m.ConfigCtrl,this.components.QueryCtrl=m.QueryCtrl,this.components.AnnotationsQueryCtrl=m.AnnotationsQueryCtrl,this.components.ExploreQueryField=m.ExploreQueryField,this.components.QueryEditor=m.QueryEditor,this.components.QueryEditorHelp=m.QueryEditorHelp,this.components.VariableQueryEditor=m.VariableQueryEditor}}class r{constructor(m){this.name=m.name,this.id=m.id,this.type=m.type,this.meta=m.meta,this.cachingConfig=m.cachingConfig,this.uid=m.uid}getRef(){return{type:this.type,uid:this.uid}}}var i=(l=>(l.Logs="Logs",l.Metrics="Metrics",l.Tracing="Tracing",l))(i||{}),g=(l=>(l.Cancelled="cancelled",l.Timeout="timeout",l.Unknown="unknown",l))(g||{});class u{}u=(0,n.s)(u),r=(0,n.s)(r)},87681:()=>{},83260:()=>{},14345:(G,A,e)=>{"use strict";e.d(A,{R:()=>a,S:()=>n});var n=(o=>(o.Thresholds="thresholds",o.PaletteClassic="palette-classic",o.PaletteClassicByName="palette-classic-by-name",o.PaletteSaturated="palette-saturated",o.ContinuousGrYlRd="continuous-GrYlRd",o.ContinuousRdYlGr="continuous-RdYlGr",o.ContinuousBlYlRd="continuous-BlYlRd",o.ContinuousYlRd="continuous-YlRd",o.ContinuousBlPu="continuous-BlPu",o.ContinuousYlBl="continuous-YlBl",o.ContinuousBlues="continuous-blues",o.ContinuousReds="continuous-reds",o.ContinuousGreens="continuous-greens",o.ContinuousPurples="continuous-purples",o.Fixed="fixed",o.Shades="shades",o))(n||{});const a="#808080"},37496:(G,A,e)=>{"use strict";e.d(A,{Y4:()=>n,qb:()=>o,v3:()=>a});function n(r){return i=>i.__systemRef===r}const a=r=>typeof r?.__systemRef=="string";var o=(r=>(r.Unit="unit",r.Min="min",r.Max="max",r.Decimals="decimals",r.DisplayName="displayName",r.NoValue="noValue",r.Thresholds="thresholds",r.Mappings="mappings",r.Links="links",r.Color="color",r.Filterable="filterable",r))(o||{})},11578:()=>{},8253:()=>{},47202:()=>{},6556:(G,A,e)=>{"use strict";e.d(A,{Mo:()=>a,_S:()=>n,iJ:()=>o});const n={google:!0,microsoft:!0,github:!0,gitlab:!0,okta:!0,discord:!0,hipchat:!0,amazon:!0,"google-hangouts-alt":!0,pagerduty:!0,line:!0,anchor:!0,"adjust-circle":!0,"angle-double-down":!0,"angle-double-right":!0,"angle-double-up":!0,"angle-down":!0,"angle-left":!0,"angle-right":!0,"angle-up":!0,"align-left":!0,"align-right":!0,"application-observability":!0,apps:!0,arrow:!0,"arrow-down":!0,"arrow-from-right":!0,"arrow-left":!0,"arrow-random":!0,"arrow-right":!0,"arrow-to-right":!0,"arrow-up":!0,"arrows-h":!0,"arrows-v":!0,"expand-arrows":!0,at:!0,ai:!0,backward:!0,bars:!0,bell:!0,"bell-slash":!0,bolt:!0,book:!0,bookmark:!0,"book-open":!0,"brackets-curly":!0,bug:!0,building:!0,"calculator-alt":!0,"calendar-alt":!0,"calendar-slash":!0,camera:!0,capture:!0,"channel-add":!0,"chart-line":!0,check:!0,"check-circle":!0,"check-square":!0,circle:!0,"circle-mono":!0,"clipboard-alt":!0,"clock-nine":!0,cloud:!0,"cloud-download":!0,"cloud-upload":!0,"code-branch":!0,cog:!0,columns:!0,"comment-alt":!0,"comment-alt-message":!0,"comment-alt-share":!0,"comments-alt":!0,compass:!0,copy:!0,"corner-down-right-alt":!0,"create-dashboard":!0,"credit-card":!0,crosshair:!0,cube:!0,dashboard:!0,database:!0,"dice-three":!0,"document-info":!0,"download-alt":!0,draggabledots:!0,edit:!0,"ellipsis-v":!0,envelope:!0,"exchange-alt":!0,"exclamation-triangle":!0,"exclamation-circle":!0,"external-link-alt":!0,eye:!0,"eye-slash":!0,"ellipsis-h":!0,"fa fa-spinner":!0,favorite:!0,"file-alt":!0,"file-blank":!0,"file-copy-alt":!0,"file-download":!0,"file-landscape-alt":!0,filter:!0,flip:!0,folder:!0,font:!0,fire:!0,"folder-open":!0,"folder-plus":!0,"folder-upload":!0,forward:!0,"frontend-observability":!0,"gf-bar-alignment-after":!0,"gf-bar-alignment-before":!0,"gf-bar-alignment-center":!0,"gf-glue":!0,"gf-grid":!0,"gf-interpolation-linear":!0,"gf-interpolation-smooth":!0,"gf-interpolation-step-after":!0,"gf-interpolation-step-before":!0,"gf-landscape":!0,"gf-layout-simple":!0,"gf-logs":!0,"gf-ml":!0,"gf-movepane-left":!0,"gf-movepane-right":!0,"gf-portrait":!0,"gf-service-account":!0,"gf-show-context":!0,"gf-pin":!0,"gf-prometheus":!0,"gf-traces":!0,grafana:!0,"graph-bar":!0,heart:!0,"heart-rate":!0,"heart-break":!0,history:!0,"history-alt":!0,home:!0,"home-alt":!0,"horizontal-align-center":!0,"horizontal-align-left":!0,"horizontal-align-right":!0,hourglass:!0,import:!0,info:!0,"info-circle":!0,k6:!0,"key-skeleton-alt":!0,keyboard:!0,"layer-group":!0,"layers-alt":!0,"library-panel":!0,"line-alt":!0,link:!0,"list-ui-alt":!0,"list-ul":!0,"list-ol":!0,lock:!0,"map-marker":!0,"map-marker-plus":!0,"map-marker-minus":!0,message:!0,minus:!0,"minus-circle":!0,"mobile-android":!0,monitor:!0,palette:!0,"panel-add":!0,"pathfinder-unite":!0,pause:!0,pen:!0,percentage:!0,play:!0,plug:!0,plus:!0,"plus-circle":!0,"plus-square":!0,power:!0,"presentation-play":!0,process:!0,"question-circle":!0,"record-audio":!0,repeat:!0,rocket:!0,"ruler-combined":!0,save:!0,search:!0,"search-minus":!0,"search-plus":!0,"share-alt":!0,shield:!0,"shield-exclamation":!0,signal:!0,signin:!0,signout:!0,sitemap:!0,slack:!0,"sliders-v-alt":!0,spinner:!0,"sort-amount-down":!0,"sort-amount-up":!0,"square-shape":!0,star:!0,"step-backward":!0,stopwatch:!0,"stopwatch-slash":!0,sync:!0,"sync-slash":!0,table:!0,"tag-alt":!0,"telegram-alt":!0,"text-fields":!0,"thumbs-up":!0,times:!0,"times-circle":!0,"toggle-on":!0,"toggle-off":!0,"trash-alt":!0,unlock:!0,upload:!0,user:!0,"users-alt":!0,"user-arrows":!0,"vertical-align-bottom":!0,"vertical-align-center":!0,"vertical-align-top":!0,"web-section-alt":!0,"wrap-text":!0,rss:!0,x:!0};function a(r){return!r||typeof r!="string"?!1:r in n}function o(r){if(a(r))return r}},60487:(G,A,e)=>{"use strict";e.r(A),e.d(A,{AbstractLabelOperator:()=>u.K2,AlertState:()=>se.Z,AnnotationEventFieldSource:()=>l.L,AppEvents:()=>K.SI,AppPlugin:()=>R.k8,CoreApp:()=>R.zj,CustomVariableSupport:()=>k.Mg,DEFAULT_SAML_NAME:()=>n.bm,DashboardCursorSync:()=>g.m,DataFrameType:()=>r.P,DataLinkConfigOrigin:()=>i.n1,DataQueryErrorType:()=>O.eA,DataSourceApi:()=>O.MF,DataSourcePlugin:()=>O.hf,DataSourceVariableSupport:()=>k.gv,DataTopic:()=>u.w5,DefaultTimeZone:()=>E.Ys,ExploreMode:()=>O.Ru,FALLBACK_COLOR:()=>P.R,FeatureState:()=>R.CQ,FieldColorModeId:()=>P.S,FieldConfigProperty:()=>M.qb,FieldType:()=>o.fS,GAUGE_DEFAULT_MAXIMUM:()=>n.Z3,GAUGE_DEFAULT_MINIMUM:()=>n.Hx,GrafanaPlugin:()=>I.Sg,GrafanaThemeType:()=>N.Q,LanguageProvider:()=>O.iL,LegacyGraphHoverClearEvent:()=>K.oi,LegacyGraphHoverEvent:()=>K.IA,LiveChannelConnectionState:()=>Y.yS,LiveChannelEventType:()=>Y.FU,LiveChannelScope:()=>Y.z,LiveChannelType:()=>Y.SK,LoadingState:()=>a.Gu,LogLevel:()=>m.in,LogRowContextQueryDirection:()=>m.M4,LogsDedupDescription:()=>m.Uv,LogsDedupStrategy:()=>m.Y4,LogsMetaKind:()=>m.Ku,LogsSortOrder:()=>m.UV,LogsVolumeType:()=>m.o8,MappingType:()=>h.H,NullValueMode:()=>a.Gl,OrgRole:()=>F.B,PageLayoutType:()=>c.Q,PanelEvents:()=>K.Kh,PluginErrorCode:()=>I.w2,PluginExtensionPoints:()=>me.y,PluginExtensionTypes:()=>me.D,PluginIncludeType:()=>I.$_,PluginSignatureStatus:()=>I.Xy,PluginSignatureType:()=>I._Z,PluginState:()=>I.BV,PluginType:()=>I.zV,SpecialValue:()=>D.U,SpecialValueMatch:()=>h.e,StandardVariableSupport:()=>k.v6,SupplementaryQueryType:()=>m.v8,SupportedTransformationType:()=>i.sN,TIME_FORMAT:()=>E.T_,TIME_SERIES_METRIC_FIELD_NAME:()=>o.rN,TIME_SERIES_TIME_FIELD_NAME:()=>o.Ls,TIME_SERIES_VALUE_FIELD_NAME:()=>o.M5,ThresholdsMode:()=>v.H,TransformationApplicabilityLevels:()=>D.s,VariableHide:()=>L.bU,VariableOrigin:()=>i.L8,VariableRefresh:()=>L.Bd,VariableSort:()=>L.$U,VariableSuggestionsScope:()=>i.o3,VariableSupportBase:()=>k.Tq,VariableSupportType:()=>k.j2,VisualizationSuggestionScore:()=>x._,VisualizationSuggestionsBuilder:()=>x.mi,VisualizationSuggestionsListAppender:()=>x.sf,VizOrientation:()=>x.wm,availableIconsIndex:()=>ue._S,getDefaultRelativeTimeRange:()=>E.Rr,getDefaultTimeRange:()=>E.JK,hasLogsContextSupport:()=>m.Q4,hasLogsContextUiSupport:()=>m.xW,hasQueryExportSupport:()=>u.p,hasQueryImportSupport:()=>u.CZ,hasQueryModificationSupport:()=>m._,hasSupplementaryQuerySupport:()=>m.mN,hasToggleableQueryFiltersSupport:()=>m.Vw,isIconName:()=>ue.Mo,isLiveChannelJoinEvent:()=>Y.mx,isLiveChannelLeaveEvent:()=>Y.gH,isLiveChannelMessageEvent:()=>Y.RL,isLiveChannelStatusEvent:()=>Y.se,isObject:()=>a.Kn,isSystemOverride:()=>M.v3,isSystemOverrideWithRef:()=>M.Y4,isTruthy:()=>a.fQ,isUnsignedPluginSignature:()=>te.x,isValidLiveChannelAddress:()=>Y.nU,makeArrayIndexableVector:()=>T.U,parseLiveChannelAddress:()=>Y.H7,patchArrayVectorProrotypeMethods:()=>T.X,preferredVisualizationTypes:()=>a.dC,toIconName:()=>ue.iJ,toLiveChannelId:()=>Y.Aj});var n=e(94864),a=e(23757),o=e(58309),r=e(512),i=e(89306),g=e(62610),u=e(34921),l=e(16949),m=e(45236),c=e(5836),d=e(75324),f=e.n(d),oe={};for(const ge in d)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType"].indexOf(ge)<0&&(oe[ge]=()=>d[ge]);e.d(A,oe);var E=e(9833),v=e(37634),h=e(43626),p=e(87681),s=e.n(p),oe={};for(const ge in p)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(ge)<0&&(oe[ge]=()=>p[ge]);e.d(A,oe);var y=e(47202),C=e.n(y),oe={};for(const ge in y)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(ge)<0&&(oe[ge]=()=>y[ge]);e.d(A,oe);var b=e(67852),S=e.n(b),oe={};for(const ge in b)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(ge)<0&&(oe[ge]=()=>b[ge]);e.d(A,oe);var D=e(92344),M=e(37496),T=e(99911),R=e(81223),O=e(41466),x=e(11795),I=e(73667),L=e(50595),P=e(14345),N=e(56123),F=e(98521),U=e(11578),j=e.n(U),oe={};for(const ge in U)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(ge)<0&&(oe[ge]=()=>U[ge]);e.d(A,oe);var V=e(18611),_=e.n(V),oe={};for(const ge in V)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(ge)<0&&(oe[ge]=()=>V[ge]);e.d(A,oe);var H=e(83260),z=e.n(H),oe={};for(const ge in H)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(ge)<0&&(oe[ge]=()=>H[ge]);e.d(A,oe);var K=e(47475),Y=e(68898),k=e(23361),q=e(8253),X=e.n(q),oe={};for(const ge in q)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType"].indexOf(ge)<0&&(oe[ge]=()=>q[ge]);e.d(A,oe);var te=e(1058),se=e(5108),de=e(5724),re=e.n(de),oe={};for(const ge in de)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(ge)<0&&(oe[ge]=()=>de[ge]);e.d(A,oe);var fe=e(29186),ie=e.n(fe),oe={};for(const ge in fe)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(ge)<0&&(oe[ge]=()=>fe[ge]);e.d(A,oe);var ue=e(6556),me=e(73999)},76923:(G,A,e)=>{"use strict";e.d(A,{l:()=>n});var n=(a=>(a.Grid="grid",a.List="list",a))(n||{})},47475:(G,A,e)=>{"use strict";e.d(A,{IA:()=>i,Kh:()=>r,SI:()=>o,oi:()=>g});var n=e(47064),a=e(74442);const o={alertSuccess:(0,n.X)("alert-success"),alertWarning:(0,n.X)("alert-warning"),alertError:(0,n.X)("alert-error")},r={refresh:(0,n.X)("refresh"),componentDidMount:(0,n.X)("component-did-mount"),dataReceived:(0,n.X)("data-received"),dataError:(0,n.X)("data-error"),dataFramesReceived:(0,n.X)("data-frames-received"),dataSnapshotLoad:(0,n.X)("data-snapshot-load"),editModeInitialized:(0,n.X)("init-edit-mode"),initPanelActions:(0,n.X)("init-panel-actions"),initialized:(0,n.X)("panel-initialized"),panelTeardown:(0,n.X)("panel-teardown"),render:(0,n.X)("render")};class i extends a.R{}i.type="graph-hover";class g extends a.m{constructor(){super(...arguments),this.payload={point:{}}}}g.type="graph-hover-clear"},68898:(G,A,e)=>{"use strict";e.d(A,{Aj:()=>d,FU:()=>r,H7:()=>m,RL:()=>l,SK:()=>a,gH:()=>u,mx:()=>g,nU:()=>c,se:()=>i,yS:()=>o,z:()=>n});var n=(f=>(f.DataSource="ds",f.Plugin="plugin",f.Grafana="grafana",f.Stream="stream",f))(n||{}),a=(f=>(f.DataStream="stream",f.DataFrame="frame",f.JSON="json",f))(a||{}),o=(f=>(f.Pending="pending",f.Connected="connected",f.Connecting="connecting",f.Disconnected="disconnected",f.Shutdown="shutdown",f.Invalid="invalid",f))(o||{}),r=(f=>(f.Status="status",f.Join="join",f.Leave="leave",f.Message="message",f))(r||{});function i(f){return f.type==="status"}function g(f){return f.type==="join"}function u(f){return f.type==="leave"}function l(f){return f.type==="message"}function m(f){if(f?.length){let E=f.trim().split("/");if(E.length>=3)return{scope:E[0],namespace:E[1],path:E.slice(2).join("/")}}}function c(f){return!!(f?.path&&f.namespace&&f.scope)}function d(f){if(!f.scope)return"";let E=f.scope;return!f.namespace||(E+="/"+f.namespace,!f.path)?E:E+"/"+f.path}},45236:(G,A,e)=>{"use strict";e.d(A,{Ku:()=>o,M4:()=>i,Q4:()=>g,UV:()=>n.UV,Uv:()=>r,Vw:()=>d,Y4:()=>n.Y4,_:()=>f,in:()=>a,mN:()=>m,o8:()=>l,v8:()=>u,xW:()=>c});var n=e(1713),a=(E=>(E.emerg="critical",E.fatal="critical",E.alert="critical",E.crit="critical",E.critical="critical",E.warn="warning",E.warning="warning",E.err="error",E.eror="error",E.error="error",E.info="info",E.information="info",E.informational="info",E.notice="info",E.dbug="debug",E.debug="debug",E.trace="trace",E.unknown="unknown",E))(a||{}),o=(E=>(E[E.Number=0]="Number",E[E.String=1]="String",E[E.LabelsMap=2]="LabelsMap",E[E.Error=3]="Error",E))(o||{}),r=(E=>(E.none="No de-duplication",E.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",E.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",E.signature="De-duplication of successive lines that have identical punctuation and whitespace.",E))(r||{}),i=(E=>(E.Backward="BACKWARD",E.Forward="FORWARD",E))(i||{});const g=E=>!E||typeof E!="object"?!1:"getLogRowContext"in E;var u=(E=>(E.LogsVolume="LogsVolume",E.LogsSample="LogsSample",E))(u||{}),l=(E=>(E.FullRange="FullRange",E.Limited="Limited",E))(l||{});const m=(E,v)=>{if(!E)return!1;const h=E;return h.getDataProvider!==void 0&&h.getSupplementaryQuery!==void 0&&h.getSupportedSupplementaryQueryTypes().includes(v)},c=E=>!E||typeof E!="object"?!1:"getLogRowContextUi"in E,d=E=>E!=null&&typeof E=="object"&&"toggleQueryFilter"in E&&"queryHasFilter"in E,f=E=>E!=null&&typeof E=="object"&&"modifyQuery"in E&&"getSupportedQueryModifications"in E},5836:(G,A,e)=>{"use strict";e.d(A,{Q:()=>n});var n=(a=>(a[a.Standard=0]="Standard",a[a.Canvas=1]="Canvas",a[a.Custom=2]="Custom",a))(n||{})},98521:(G,A,e)=>{"use strict";e.d(A,{B:()=>n});var n=(a=>(a.None="None",a.Viewer="Viewer",a.Editor="Editor",a.Admin="Admin",a))(n||{})},11795:(G,A,e)=>{"use strict";e.d(A,{_:()=>i,mi:()=>g,sf:()=>u,wm:()=>r});var n=e(56375),a=e.n(n),o=e(58309),r=(l=>(l.Auto="auto",l.Vertical="vertical",l.Horizontal="horizontal",l))(r||{}),i=(l=>(l[l.Best=100]="Best",l[l.Good=70]="Good",l[l.OK=50]="OK",l))(i||{});class g{constructor(m,c){this.list=[],this.data=m,this.panel=c,this.dataSummary=this.computeDataSummary()}getListAppender(m){return new u(this.list,m)}computeDataSummary(){const m=this.data?.series||[];let c=0,d=0,f=0,E=0,v=0,h=0,p;for(const s of m){E+=s.length,s.meta?.preferredVisualisationType&&(p=s.meta.preferredVisualisationType);for(const y of s.fields)switch(h++,y.type){case o.fS.number:c+=1;break;case o.fS.time:d+=1;break;case o.fS.string:f+=1;break}s.length>v&&(v=s.length)}return{numberFieldCount:c,timeFieldCount:d,stringFieldCount:f,rowCountTotal:E,rowCountMax:v,fieldCount:h,preferredVisualisationType:p,frameCount:m.length,hasData:E>0,hasTimeField:d>0,hasNumberField:c>0,hasStringField:f>0}}getList(){return this.list}}class u{constructor(m,c){this.list=m,this.defaults=c}append(m){this.list.push((0,n.defaultsDeep)(m,this.defaults))}}},73667:(G,A,e)=>{"use strict";e.d(A,{$_:()=>g,BV:()=>n,Sg:()=>u,Xy:()=>o,_Z:()=>r,w2:()=>i,zV:()=>a});var n=(l=>(l.alpha="alpha",l.beta="beta",l.stable="stable",l.deprecated="deprecated",l))(n||{}),a=(l=>(l.panel="panel",l.datasource="datasource",l.app="app",l.renderer="renderer",l.secretsmanager="secretsmanager",l))(a||{}),o=(l=>(l.internal="internal",l.valid="valid",l.invalid="invalid",l.modified="modified",l.missing="missing",l))(o||{}),r=(l=>(l.grafana="grafana",l.commercial="commercial",l.community="community",l.private="private",l.core="core",l))(r||{}),i=(l=>(l.missingSignature="signatureMissing",l.invalidSignature="signatureInvalid",l.modifiedSignature="signatureModified",l))(i||{}),g=(l=>(l.dashboard="dashboard",l.page="page",l.panel="panel",l.datasource="datasource",l))(g||{});class u{addConfigPage(m){return this.configPages||(this.configPages=[]),this.configPages.push(m),this}setChannelSupport(){return console.warn("[deprecation] plugin is using ignored option: setChannelSupport",this.meta),this}constructor(){this.meta={}}}},73999:(G,A,e)=>{"use strict";e.d(A,{D:()=>n,y:()=>a});var n=(o=>(o.link="link",o.component="component",o))(n||{}),a=(o=>(o.AlertInstanceAction="grafana/alerting/instance/action",o.DashboardPanelMenu="grafana/dashboard/panel/menu",o.DataSourceConfig="grafana/datasources/config",o.ExploreToolbarAction="grafana/explore/toolbar/action",o.UserProfileTab="grafana/user/profile/tab",o))(a||{})},1058:(G,A,e)=>{"use strict";e.d(A,{x:()=>a});var n=e(73667);function a(o){return o&&o!==n.Xy.valid&&o!==n.Xy.internal}},34921:(G,A,e)=>{"use strict";e.d(A,{CZ:()=>o,K2:()=>a,p:()=>r,w5:()=>n});var n=(i=>(i.Annotations="annotations",i.AlertStates="alertStates",i))(n||{}),a=(i=>(i.Equal="Equal",i.NotEqual="NotEqual",i.EqualRegEx="EqualRegEx",i.NotEqualRegEx="NotEqualRegEx",i))(a||{});const o=i=>!i||typeof i!="object"?!1:"importFromAbstractQueries"in i,r=i=>!i||typeof i!="object"?!1:"exportToAbstractQueries"in i},75324:()=>{},5724:()=>{},50595:(G,A,e)=>{"use strict";e.d(A,{$U:()=>a,Bd:()=>n,bU:()=>o});var n=(r=>(r[r.never=0]="never",r[r.onDashboardLoad=1]="onDashboardLoad",r[r.onTimeRangeChanged=2]="onTimeRangeChanged",r))(n||{}),a=(r=>(r[r.disabled=0]="disabled",r[r.alphabeticalAsc=1]="alphabeticalAsc",r[r.alphabeticalDesc=2]="alphabeticalDesc",r[r.numericalAsc=3]="numericalAsc",r[r.numericalDesc=4]="numericalDesc",r[r.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",r[r.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",r[r.naturalAsc=7]="naturalAsc",r[r.naturalDesc=8]="naturalDesc",r))(a||{}),o=(r=>(r[r.dontHide=0]="dontHide",r[r.hideLabel=1]="hideLabel",r[r.hideVariable=2]="hideVariable",r))(o||{})},56123:(G,A,e)=>{"use strict";e.d(A,{Q:()=>n});var n=(a=>(a.Light="light",a.Dark="dark",a))(n||{})},37634:(G,A,e)=>{"use strict";e.d(A,{H:()=>n});var n=(a=>(a.Absolute="absolute",a.Percentage="percentage",a))(n||{})},9833:(G,A,e)=>{"use strict";e.d(A,{JK:()=>i,Rr:()=>g,T_:()=>r,Ys:()=>o});var n=e(1713),a=e(85745);const o=n.iT,r="YYYY-MM-DD HH:mm:ss";function i(){const u=(0,a.CQ)();return{from:(0,a.CQ)(u).subtract(6,"hour"),to:u,raw:{from:"now-6h",to:"now"}}}function g(){return{from:600,to:0}}},18611:()=>{},92344:(G,A,e)=>{"use strict";e.d(A,{U:()=>a,s:()=>n});var n=(o=>(o[o.NotPossible=-1]="NotPossible",o[o.NotApplicable=0]="NotApplicable",o[o.Applicable=1]="Applicable",o[o.HighlyApplicable=2]="HighlyApplicable",o))(n||{}),a=(o=>(o.True="true",o.False="false",o.Null="null",o.Empty="empty",o))(a||{})},43626:(G,A,e)=>{"use strict";e.d(A,{H:()=>n,e:()=>a});var n=(o=>(o.ValueToText="value",o.RangeToText="range",o.RegexToText="regex",o.SpecialValue="special",o))(n||{}),a=(o=>(o.True="true",o.False="false",o.Null="null",o.NaN="nan",o.NullAndNaN="null+nan",o.Empty="empty",o))(a||{})},23361:(G,A,e)=>{"use strict";e.d(A,{Mg:()=>r,Tq:()=>a,gv:()=>i,j2:()=>n,v6:()=>o});var n=(g=>(g.Legacy="legacy",g.Standard="standard",g.Custom="custom",g.Datasource="datasource",g))(n||{});class a{}class o extends a{getType(){return"standard"}}class r extends a{getType(){return"custom"}}class i extends a{getType(){return"datasource"}}},99911:(G,A,e)=>{"use strict";e.d(A,{U:()=>a,X:()=>n});function n(){Object.getOwnPropertyDescriptor(Array.prototype,"toArray")||Object.defineProperties(Array.prototype,{get:{value:function(o){return this[o]},writable:!0,enumerable:!1,configurable:!0},set:{value:function(o,r){this[o]=r},writable:!0,enumerable:!1,configurable:!0},add:{value:function(o){this.push(o)},writable:!0,enumerable:!1,configurable:!0},toArray:{value:function(){return this},writable:!0,enumerable:!1,configurable:!0}})}n();function a(o){return new Proxy(o,{get(r,i,g){if(typeof i!="symbol"){const u=+i;if(String(u)===i)return r.get(u)}return Reflect.get(r,i,g)},set(r,i,g,u){if(typeof i!="symbol"){const l=+i;if(String(l)===i)return r.set(l,g),!0}return Reflect.set(r,i,g,u)}})}},96072:(G,A,e)=>{"use strict";e.d(A,{vo:()=>g,rt:()=>m,j:()=>l});var n=e(88008),a=e(17945),o=e(23757),r=e(73039);class i{constructor(){this.properties=[]}addCustomEditor(d){return this.properties.push(d),this}getRegistry(){return new r.B(()=>this.properties)}getItems(){return this.properties}}class g extends i{addNumberInput(d){return this.addCustomEditor({...d,id:d.path,override:n.S.get("number").editor,editor:n.S.get("number").editor,process:a.Oh,shouldApply:d.shouldApply??(()=>!0),settings:d.settings||{}})}addSliderInput(d){return this.addCustomEditor({...d,id:d.path,override:n.S.get("slider").editor,editor:n.S.get("slider").editor,process:a.Oh,shouldApply:d.shouldApply??(()=>!0),settings:d.settings||{}})}addTextInput(d){return this.addCustomEditor({...d,id:d.path,override:n.S.get("text").editor,editor:n.S.get("text").editor,process:a.op,shouldApply:d.shouldApply??(()=>!0),settings:d.settings||{}})}addSelect(d){return this.addCustomEditor({...d,id:d.path,override:n.S.get("select").editor,editor:n.S.get("select").editor,process:a.AE,shouldApply:d.shouldApply?d.shouldApply:()=>!0,settings:d.settings||{options:[]}})}addRadio(d){return this.addCustomEditor({...d,id:d.path,override:n.S.get("radio").editor,editor:n.S.get("radio").editor,process:a.AE,shouldApply:d.shouldApply?d.shouldApply:()=>!0,settings:d.settings||{options:[]}})}addBooleanSwitch(d){return this.addCustomEditor({...d,id:d.path,editor:n.S.get("boolean").editor,override:n.S.get("boolean").editor,process:a.W4,shouldApply:d.shouldApply?d.shouldApply:()=>!0,settings:d.settings||{}})}addColorPicker(d){return this.addCustomEditor({...d,id:d.path,editor:n.S.get("color").editor,override:n.S.get("color").editor,process:a.kG,shouldApply:d.shouldApply?d.shouldApply:()=>!0,settings:d.settings||{}})}addUnitPicker(d){return this.addCustomEditor({...d,id:d.path,editor:n.S.get("unit").editor,override:n.S.get("unit").editor,process:a.VB,shouldApply:d.shouldApply?d.shouldApply:()=>!0,settings:d.settings||{}})}addFieldNamePicker(d){return this.addCustomEditor({...d,id:d.path,editor:n.S.get("field-name").editor,override:n.S.get("field-name").editor,process:a.kG,shouldApply:d.shouldApply?d.shouldApply:()=>!0,settings:d.settings||{}})}addGenericEditor(d,f){return this.addCustomEditor({...d,id:d.path,editor:f,override:f,process:a.kG,shouldApply:d.shouldApply?d.shouldApply:()=>!0,settings:d.settings||{}})}}class u{constructor(d){this.cfg=d,this.path="",this.id="nested-panel-options",this.name="nested",this.editor=()=>null,this.getBuilder=()=>this.cfg.build,this.getNestedValueAccess=f=>{const E=this.cfg.values;return E?E(f):{getValue:v=>f.getValue(`${this.path}.${v}`),onChange:(v,h)=>f.onChange(`${this.path}.${v}`,h)}},this.path=d.path,this.category=d.category,this.defaultValue=d.defaultValue}}function l(c){return(0,o.Kn)(c)&&"id"in c&&c.id==="nested-panel-options"}class m extends i{addNestedOptions(d){const f=new u(d);return this.addCustomEditor(f)}addNumberInput(d){return this.addCustomEditor({...d,id:d.path,editor:n.S.get("number").editor})}addSliderInput(d){return this.addCustomEditor({...d,id:d.path,editor:n.S.get("slider").editor})}addTextInput(d){return this.addCustomEditor({...d,id:d.path,editor:n.S.get("text").editor})}addStringArray(d){return this.addCustomEditor({...d,id:d.path,editor:n.S.get("strings").editor})}addSelect(d){return this.addCustomEditor({...d,id:d.path,editor:n.S.get("select").editor})}addMultiSelect(d){return this.addCustomEditor({...d,id:d.path,editor:n.S.get("multi-select").editor})}addRadio(d){return this.addCustomEditor({...d,id:d.path,editor:n.S.get("radio").editor})}addBooleanSwitch(d){return this.addCustomEditor({...d,id:d.path,editor:n.S.get("boolean").editor})}addColorPicker(d){return this.addCustomEditor({...d,id:d.path,editor:n.S.get("color").editor,settings:d.settings||{}})}addTimeZonePicker(d){return this.addCustomEditor({...d,id:d.path,editor:n.S.get("timezone").editor,settings:d.settings||{}})}addUnitPicker(d){return this.addCustomEditor({...d,id:d.path,editor:n.S.get("unit").editor})}addFieldNamePicker(d){return this.addCustomEditor({...d,id:d.path,editor:n.S.get("field-name").editor})}addDashboardPicker(d){return this.addCustomEditor({...d,id:d.path,editor:n.S.get("dashboard-uid").editor})}}},97127:(G,A,e)=>{"use strict";e.d(A,{I:()=>o});var n=e(56375),a=e.n(n);function o(r){return typeof r=="number"?r:r===""||r===null||r===void 0||Array.isArray(r)?NaN:typeof r=="boolean"?r?1:0:(0,n.toNumber)(r)}},8898:(G,A,e)=>{"use strict";e.r(A),e.d(A,{moveItemImmutably:()=>a,sortValues:()=>i});var n=e(1713);function a(g,u,l){const m=[...g];return Array.prototype.splice.call(m,l,0,Array.prototype.splice.call(m,u,1)[0]),m}const o=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),r=(g,u)=>g-u;function i(g){return(u,l)=>{if(u===l)return 0;if(l==null||typeof l=="string"&&l.trim()==="")return-1;if(u==null||typeof u=="string"&&u?.trim()==="")return 1;let m=o.compare;return typeof u=="number"&&typeof l=="number"&&(m=r),g===n.As.Descending?m(l,u):m(u,l)}}},47302:(G,A,e)=>{"use strict";e.d(A,{L:()=>a,n:()=>o});var n=e(73039),a=(r=>(r.Add="+",r.Subtract="-",r.Divide="/",r.Multiply="*",r))(a||{});const o=new n.B(()=>[{id:"+",name:"Add",operation:(r,i)=>r+i,binaryOperationID:"+"},{id:"-",name:"Subtract",operation:(r,i)=>r-i,binaryOperationID:"-"},{id:"*",name:"Multiply",operation:(r,i)=>r*i,binaryOperationID:"*"},{id:"/",name:"Divide",operation:(r,i)=>r/i,binaryOperationID:"/"}])},86346:(G,A,e)=>{"use strict";e.d(A,{MJ:()=>y,QM:()=>E,uP:()=>d,x5:()=>c});var n=e(56375),a=e.n(n),o=e(97269),r=e.n(o),i=e(38070),g=e(45878),u=e(94372),l=e(58309),m=e(1930),c=(C=>(C[C.full=0]="full",C[C.name=1]="name",C[C.none=2]="none",C))(c||{});function d(C,b){return new E(b).readCSV(C)}var f=(C=>(C[C.Starting=0]="Starting",C[C.InHeader=1]="InHeader",C[C.ReadingRows=2]="ReadingRows",C))(f||{});class E{constructor(b){this.chunk=(S,D)=>{for(let M=0;M<S.data.length;M++){const T=S.data[M];if(T.length<1)continue;const R=T[0];if(R){if(R.startsWith("#")){const O=R.indexOf("#",2);if(O>0){const x=R.slice(1,O),I=x==="name";if(I||{unit:"#"}.hasOwnProperty(x)){this.state===2&&(this.current=new i.v({fields:[]}),this.data.push(this.current));const P=R.slice(O+1);if(I){this.current.addFieldFor(void 0,P);for(let N=1;N<T.length;N++)this.current.addFieldFor(void 0,T[N])}else{const{fields:N}=this.current;for(let F=0;F<N.length;F++){N[F].config||(N[F].config={});const U=N[F].config;U[x]=F===0?P:T[F]}}this.state=1;continue}}else if(this.state===0){this.state=1;continue}continue}if(this.state===0){if((0,g.LI)(R)===l.fS.string){for(const x of T)this.current.addFieldFor(void 0,x);this.state=1;continue}this.state=1}}if(this.state,this.state=2,T.length>this.current.fields.length){const{fields:O}=this.current;for(let x=O.length;x<T.length;x++)this.current.addFieldFor(T[x]);this.callback&&this.callback.onHeader(this.current.fields)}this.current.appendRow(T),this.callback&&this.callback.onRow(T)}},b||(b={}),this.config=b.config||{},this.callback=b.callback,this.current=new i.v({fields:[]}),this.state=0,this.data=[]}readCSV(b){this.current=new i.v({fields:[]}),this.data=[this.current];const S={...this.config,dynamicTyping:!1,skipEmptyLines:!0,comments:!1,chunk:this.chunk};return r().parse(b,S),this.data}}function v(C,b){if(C==null)return"";const S=C.toString();return S.includes('"')?b.quoteChar+S.replace(/"/gi,'""')+b.quoteChar:S.includes(`
`)||b.delimiter&&S.includes(b.delimiter)?b.quoteChar+S+b.quoteChar:S}function h(C,b){return C.display?S=>{const D=C.display(S);return v((0,m.zc)(D),b)}:S=>v(S,b)}function p(C,b,S){const D=C==="name",M=C==="type";for(const T of b){const R=T.config;if(D||M||R&&R.hasOwnProperty(C)){let O="#"+C+"#";for(let x=0;x<b.length;x++){x>0&&(O=O+S.delimiter);let I=b[x].name;M?I=b[x].type:D||(I=b[x].config[C]),I&&(O=O+v(I,S))}return O+S.newline}}return""}function s(){const C=["x","y"];return C.toLocaleString?C.toLocaleString().charAt(1):","}function y(C,b){if(!C)return"";b=(0,n.defaults)(b,{delimiter:s(),newline:`\r
`,quoteChar:'"',encoding:"",headerStyle:1,useExcelHeader:!1});let S=b.useExcelHeader?`sep=${b.delimiter}${b.newline}`:"";for(let D=0;D<C.length;D++){const M=C[D],{fields:T}=M;if(T.length===0)continue;if(b.headerStyle===0)S=S+p("name",T,b)+p("type",T,b)+p("unit",T,b)+p("dateFormat",T,b);else if(b.headerStyle===1){for(let O=0;O<T.length;O++)O>0&&(S+=b.delimiter),S+=`"${(0,u.CZ)(T[O],M).replace(/"/g,'""')}"`;S+=b.newline}const R=T[0].values.length;if(R>0){const O=T.map(x=>h(x,b));for(let x=0;x<R;x++){for(let I=0;I<T.length;I++){I>0&&(S=S+b.delimiter);const L=T[I].values[x];L!==null&&(S=S+O[I](L))}x!==R-1&&(S=S+b.newline)}}D!==C.length-1&&(S=S+b.newline)}return S}},56582:(G,A,e)=>{"use strict";e.d(A,{W:()=>o,_:()=>r});var n=e(12693),a=e(173);const o={keepTime:"__url_time_range",timeRangeFrom:"__from",timeRangeTo:"__to",includeVars:"__all_variables",seriesName:"__series.name",fieldName:"__field.name",valueTime:"__value.time",valueNumeric:"__value.numeric",valueText:"__value.text",valueRaw:"__value.raw",valueCalc:"__value.calc"};function r(l){const{onClickFn:m,replaceVariables:c,link:d,scopedVars:f,range:E,field:v,internalLink:h}=l,p=g(d.internal?.query,f,c),s=g(d.internal?.panelsState,f,c),y=g(d.internal?.meta?.correlationData,f,c),C=d.title?d.title:h.datasourceName;return{title:c(C,f),href:i(h.datasourceUid,p,E,s),onClick:m?b=>{b.preventDefault&&b.preventDefault(),m({datasourceUid:h.datasourceUid,queries:[p],panelsState:s,correlationHelperData:y,range:E})}:void 0,target:d?.targetBlank?"_blank":"_self",origin:v}}function i(l,m,c,d){return n.u.assureBaseUrl(`/explore?left=${encodeURIComponent((0,a.S)({...c?.raw?{range:(0,a.R_)(c.raw)}:{},datasource:l,queries:[m],panelsState:d}))}`)}function g(l,m,c){if(!l)return l;if(typeof l=="string")return c(l,m);const d=JSON.parse(JSON.stringify(l));return u(d,m,c)}function u(l,m,c){for(const d of Object.keys(l))typeof l[d]=="string"?l[d]=c(l[d],m):typeof l[d]=="object"&&l[d]!==null&&(l[d]=u(l[d],m,c));return l}},52219:(G,A,e)=>{"use strict";e.d(A,{BT:()=>i,HD:()=>f,Mf:()=>p,TX:()=>d,_R:()=>u,cv:()=>r,fd:()=>E,fi:()=>l,hz:()=>c,iU:()=>o,nx:()=>m,tp:()=>v,uw:()=>h,z_:()=>g});var n=e(56375),a=e.n(n);function o(s){return{uid:s.uid,type:s.type}}function r(s){return typeof s=="object"&&typeof s?.uid=="string"}function i(s){if(r(s))return s.uid;if((0,n.isString)(s))return s}const g=(s,y)=>C=>{E(s,y,C.currentTarget.value)},u=(s,y)=>C=>{v(s,y,C.currentTarget.value)},l=(s,y)=>C=>{h(s,y,C.currentTarget.value)},m=(s,y)=>C=>{v(s,y,C.value)},c=(s,y)=>C=>{v(s,y,C.currentTarget.checked)},d=(s,y)=>C=>{h(s,y,C.value)},f=(s,y)=>C=>{p(s,y)};function E(s,y,C){const b=s.options;s.onOptionsChange({...b,[y]:C})}const v=(s,y,C)=>{const b=s.options;s.onOptionsChange({...b,jsonData:{...b.jsonData,[y]:C}})},h=(s,y,C)=>{const b=s.options;s.onOptionsChange({...b,secureJsonData:{...b.secureJsonData?b.secureJsonData:{},[y]:C}})},p=(s,y)=>{const C=s.options;s.onOptionsChange({...C,secureJsonData:{...C.secureJsonData?C.secureJsonData:{},[y]:""},secureJsonFields:{...C.secureJsonFields,[y]:!1}})}},20440:(G,A,e)=>{"use strict";e.d(A,{d:()=>a});const n={},a=(o,r,i)=>{let g=`[Deprecation warning] ${o}: ${r} is deprecated`;i&&(g+=`. Use ${i} instead`);const u=Date.now(),l=n[g];(!l||u-l>1e4)&&(console.warn(g),n[g]=u)}},94203:(G,A,e)=>{"use strict";e.d(A,{x:()=>n});var n=(a=>(a[a.Transformations=0]="Transformations",a[a.FieldConfig=1]="FieldConfig",a[a.FieldConfigOverrides=2]="FieldConfigOverrides",a))(n||{})},2912:(G,A,e)=>{"use strict";e.d(A,{H:()=>o,k:()=>a});var n=e(23757);function a({xField:r,yField:i,nullValueMode:g}){const u=r.values,l=i.values,m=u.length;if(l.length!==m)throw new Error("Unexpected field length");const c=g===n.Gl.Ignore,d=g===n.Gl.AsZero,f=[];for(let E=0;E<m;E++){const v=u[E];let h=l[E];if(h===null){if(c)continue;d&&(h=0)}v!==null&&f.push([v,h])}return f}function o(r,i){if(!i.from||!i.to||!r||r.length===0)return[];const g=i.from.valueOf(),u=i.to.valueOf(),l=r[0][1];return[[g,l],[u,l]]}},92695:(G,A,e)=>{"use strict";e.d(A,{LH:()=>f.L,x5:()=>i.x5,QM:()=>i.QM,WC:()=>b.W,xV:()=>S.x,vo:()=>p.vo,HU:()=>R.HU,zG:()=>v.z,rt:()=>p.rt,Bz:()=>a.B,T1:()=>E.T,IX:()=>M.I,sq:()=>n,nk:()=>f.n,ZC:()=>m,bf:()=>O.b,Jb:()=>R.Jb,d9:()=>r.d,FT:()=>g.FT,IU:()=>g.IU,aA:()=>g.aA,iU:()=>o.iU,BT:()=>o.BT,k8:()=>s.k,HE:()=>s.H,_6:()=>O._,e4:()=>c,dP:()=>u.d,fp:()=>d,cv:()=>o.cv,Qr:()=>l.Q,uT:()=>y.u,s2:()=>D.s,_N:()=>b._,VS:()=>g.VS,Sp:()=>I.S,Hh:()=>l.H,_R:()=>o._R,hz:()=>o.hz,nx:()=>o.nx,z_:()=>o.z_,HD:()=>o.HD,fi:()=>o.fi,TX:()=>o.TX,J8:()=>g.J8,uP:()=>i.uP,Wn:()=>x.W,O9:()=>u.O,S:()=>C.S,MJ:()=>i.MJ,Er:()=>h.E,R_:()=>C.R_,mL:()=>E.m,tp:()=>o.tp,fd:()=>o.fd,Mf:()=>o.Mf,uw:()=>o.uw,Cj:()=>C.Cj,xc:()=>T.x});var n=e(8898),a=e(73039),o=e(52219),r=e(20440),i=e(86346),g=e(5e4),u=e(63352),l=e(25788);const m=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"],c=L=>{let P,N,F=Number.MAX_VALUE;for(let U=0;U<L.values.length;U++){const j=L.values[U];if(P!==void 0){const V=j-P;N===void 0&&(F=V),V<F&&(F=V)}P=j}return F},d=L=>{for(let P=0;P<L.values.length;P++){const N=L.values[P];if(N!=null){const F=N.toString();if(F.length===13&&F%1e3!==0)return!0}}return!1};var f=e(47302),E=e(86468),v=e(68619),h=e(11248),p=e(96072),s=e(2912),y=e(12693),C=e(173),b=e(56582),S=e(94203),D=e(10066),M=e(97127),T=e(31902),R=e(49433),O=e(48762),x=e(70313),I=e(16218)},5e4:(G,A,e)=>{"use strict";e.d(A,{FT:()=>o,IU:()=>r,J8:()=>a,VS:()=>i,aA:()=>g});const n=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function a(u){const l={};return u.replace(n,(m,c,d,f)=>(l[c]=f,"")),l}function o(u){return u.reduce((l,m)=>{if(!m)throw new Error("Need parsed labels to find common labels.");return Object.keys(m).forEach(c=>{(l[c]===void 0||l[c]!==m[c])&&delete l[c]}),Object.keys(l).forEach(c=>{m[c]===void 0&&delete l[c]}),l},{...u[0]})}function r(u,l){const m={...u};return Object.keys(l).forEach(c=>{delete m[c]}),m}function i(u,l){if(!u)return!0;for(const[m,c]of Object.entries(u))if(!l||l[m]!==c)return!1;return!0}function g(u,l="",m){if(!u||Object.keys(u).length===0)return l;const d=Object.keys(u).sort().map(f=>`${f}="${u[f]}"`).join(", ");return m?d:["{",d,"}"].join("")}},12693:(G,A,e)=>{"use strict";e.d(A,{u:()=>d});var n=e(86734),a=e(173);let o={appSubUrl:""},r,i;const g=f=>{try{return new URL(f)}catch{return}},u=f=>{const E=g(f);if(E&&E.origin!==window.location.origin)return f;const v=o.appSubUrl??"",h=v.endsWith("/")?1:0,p=f.startsWith("http");let s=v;return(!f.startsWith("/")||p)&&(s=`${window.location.origin}${v}`),f.length>0&&(f.indexOf(s+"/")===0||f===s)?f.slice(s.length-h):f},l=f=>f.startsWith("/")?`${o.appSubUrl}${u(f)}`:f,d={initialize:f=>{o=f.config,r=f.getTimeRangeForUrl,i=f.getVariablesUrlParams},stripBaseFromUrl:u,assureBaseUrl:l,updateSearchParams:(f,E)=>{const v=new URLSearchParams(E);try{const h=new URL(f);return v.forEach((p,s)=>h.searchParams.set(s,p)),h.href}catch{const h=new URLSearchParams(f);return v.forEach((p,s)=>{h.set(s,p)}),"?"+h.toString()}},getTimeRangeUrlParams:()=>r?a.Cj.toUrlParams(r()):null,getVariablesUrlParams:f=>{if(!i)return null;const E=i(f);return a.Cj.toUrlParams(E)},getUrlForPartial:(f,E)=>{const v=a.Cj.parseKeyValue(f.search.startsWith("?")?f.search.substring(1):f.search);for(const h of Object.keys(E))E[h]===null||E[h]===void 0?delete v[h]:v[h]=E[h];return l(a.Cj.renderUrl(f.pathname,v))},processUrl:f=>o.disableSanitizeHtml?f:n.QX.sanitizeUrl(f)}},10066:(G,A,e)=>{"use strict";e.d(A,{s:()=>n});function n(a){return new Proxy(a,{apply(o,r,i){return(typeof Reflect>"u"||!Reflect.construct)&&alert("Browser is too old"),Reflect.construct(o,i,r.constructor)}})}},16218:(G,A,e)=>{"use strict";e.d(A,{S:()=>n});function n(a,o){return o.id===a?!0:o.aliasIDs?o.aliasIDs.includes(a):!1}},68619:(G,A,e)=>{"use strict";e.d(A,{z:()=>n});var n=(a=>(a.id="id",a.title="title",a.subTitle="subtitle",a.mainStat="mainstat",a.secondaryStat="secondarystat",a.arc="arc__",a.icon="icon",a.color="color",a.source="source",a.target="target",a.detail="detail__",a.nodeRadius="noderadius",a.thickness="thickness",a.highlighted="highlighted",a))(n||{})},63352:(G,A,e)=>{"use strict";e.d(A,{O:()=>n,d:()=>a});function n(o,r=0){if(Number.isInteger(o))return o;let i=10**r,g=o*i*(1+Number.EPSILON);return Math.round(g)/i}function a(o){return((""+o).split(".")[1]||"").length}},25788:(G,A,e)=>{"use strict";e.d(A,{H:()=>n,Q:()=>a});const n=o=>Object.keys(o).reduce((r,i)=>(o[i]!==void 0&&(r[i]=o[i]),r),{}),a=o=>typeof o=="object"&&o!==null&&Object.keys(o).length===0},11248:(G,A,e)=>{"use strict";e.d(A,{E:()=>n});const n=a=>({label:a,value:a})},86468:(G,A,e)=>{"use strict";e.d(A,{T:()=>a,m:()=>o});var n=e(73039),a=(r=>(r.Abs="abs",r.Exp="exp",r.Ln="ln",r.Floor="floor",r.Ceil="ceil",r))(a||{});const o=new n.B(()=>[{id:"abs",name:"Absolute value",operation:r=>Math.abs(r),unaryOperationID:"abs"},{id:"exp",name:"Natural exponent",operation:r=>Math.exp(r),unaryOperationID:"exp"},{id:"ln",name:"Natural logarithm",operation:r=>Math.log(r),unaryOperationID:"ln"},{id:"floor",name:"Floor",operation:r=>Math.floor(r),unaryOperationID:"floor"},{id:"ceil",name:"Ceiling",operation:r=>Math.ceil(r),unaryOperationID:"ceil"}])},173:(G,A,e)=>{"use strict";e.d(A,{Cj:()=>c,R_:()=>f,S:()=>d});var n=e(85745);/**
 * @preserve jquery-param (c) 2015 KNOWLEDGECODE | MIT
 */function a(E,v){return v&&Object.keys(v).length>0&&(E+="?"+r(v)),E}function o(E,v){return encodeURIComponent(E).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,v?"%20":"+").replace(/[!'()*]/g,function(h){return"%"+h.charCodeAt(0).toString(16).toUpperCase()})}function r(E,v=!0){const h=[],p=/\[\]$/,s=v?(S,D)=>o(S,D):(S,D)=>encodeURIComponent(S),y=S=>Object.prototype.toString.call(S)==="[object Array]",C=(S,D)=>{if(D=typeof D=="function"?D():D===null||D===void 0?"":D,typeof D!="boolean")h[h.length]=s(S,!0)+"="+s(D,!0);else{const M=D?"":"="+s("false",!0);h[h.length]=s(S,!0)+M}},b=(S,D)=>{let M,T,R;if(S)if(y(D))for(M=0,T=D.length;M<T;M++)p.test(S)?C(S,D[M]):b(S,D[M]);else if(D&&String(D)==="[object Object]")for(R in D)b(S+"["+R+"]",D[R]);else C(S,D);else if(y(D))for(M=0,T=D.length;M<T;M++)C(D[M].name,D[M].value);else for(R in D)b(R,D[R]);return h};return b("",E).join("&")}function i(E){return r(E,!1)}function g(E,v){if(v!=null&&v!==""){const h=E.indexOf("?");h!==-1?E.length-h>1&&(E+="&"):E+="?",E+=v}return E}function u(){const v=window.location.search.substring(1).split("&"),h={};for(const p of v){const s=p.split("=");if(s.length>1){const y=decodeURIComponent(s[0]),C=decodeURIComponent(s[1]);y in h?h[y]=[...h[y],C]:h[y]=[C]}else if(s.length===1){const y=decodeURIComponent(s[0]);h[y]=!0}}return h}function l(E){const v={},h=(E||"").split("&");for(let p of h){let s,y,C;if(p&&(y=p=p.replace(/\+/g,"%20"),s=p.indexOf("="),s!==-1&&(y=p.substring(0,s),C=p.substring(s+1)),y=m(y),y!==void 0)){C=C!==void 0?m(C):!0;let b;typeof C=="string"&&C!==""?b=C==="true"||C==="false"?C==="true":C:b=C,v.hasOwnProperty(y)?Array.isArray(v[y])?v[y].push(C):v[y]=[v[y],isNaN(b)?C:b]:v[y]=isNaN(b)?C:b}}return v}function m(E){try{return decodeURIComponent(E)}catch{return}}const c={renderUrl:a,toUrlParams:r,appendQueryToUrl:g,getUrlSearchParams:u,parseKeyValue:l,serializeParams:i};function d(E,v){return v!==void 0&&console.warn("`compact` parameter is deprecated and will be removed in a future release"),JSON.stringify(E)}const f=E=>{let v=E.from;(0,n.v9)(v)&&(v=v.valueOf().toString());let h=E.to;return(0,n.v9)(h)&&(h=h.valueOf().toString()),{from:v,to:h}}},49433:(G,A,e)=>{"use strict";e.d(A,{HU:()=>g,Jb:()=>u,vh:()=>r});var n=e(76784),a=e(49531),o=e(43626);function r(m,c){for(const d of m)switch(d.type){case o.H.ValueToText:if(c==null)continue;const f=d.options[c];if(f)return f;break;case o.H.RangeToText:if(c==null)continue;const E=parseFloat(c);if(isNaN(E)||!isNaN(d.options.from)&&E<d.options.from||!isNaN(d.options.to)&&E>d.options.to)continue;return d.options.result;case o.H.RegexToText:if(c==null||typeof c!="string")continue;const p=(0,a.jO)(d.options.pattern);if(c.match(p)){const s={...d.options.result};return s.text!=null&&(s.text=c.replace(p,d.options.result.text||"")),s}case o.H.SpecialValue:switch(d.options.match){case o.e.Null:{if(c==null)return d.options.result;break}case o.e.NaN:{if(typeof c=="number"&&isNaN(c))return d.options.result;break}case o.e.NullAndNaN:{if(typeof c=="number"&&isNaN(c)||c==null)return d.options.result;break}case o.e.True:{if(c===!0||c==="true")return d.options.result;break}case o.e.False:{if(c===!1||c==="false")return d.options.result;break}case o.e.Empty:{if(c==="")return d.options.result;break}}}return null}function i(m){return(typeof m=="number"||typeof m=="string"&&m.trim()!=="")&&!isNaN(m)}var g=(m=>(m[m.ValueToText=1]="ValueToText",m[m.RangeToText=2]="RangeToText",m))(g||{});function u(m,c){const d=[];let f=m.mappingType;if(m.mappingType||(m.valueMaps&&m.valueMaps.length?f=1:m.rangeMaps&&m.rangeMaps.length&&(f=2)),f===1)for(let E=0;E<m.valueMaps.length;E++){const v=m.valueMaps[E];d.push(l({...v,id:E,type:o.H.ValueToText},m.fieldConfig?.defaults?.thresholds||c))}else if(f===2)for(let E=0;E<m.rangeMaps.length;E++){const v=m.rangeMaps[E];d.push(l({...v,id:E,type:o.H.RangeToText},m.fieldConfig?.defaults?.thresholds||c))}return d}function l(m,c){const d={type:o.H.ValueToText,options:{}},f=[];let E;const v=parseFloat(m.text);if(c&&!isNaN(v)){const h=(0,n.m1)(v,c.steps);h&&h.color&&(E=h.color)}switch(m.type){case 1:case o.H.ValueToText:m.value!=null&&(m.value==="null"?f.push({type:o.H.SpecialValue,options:{match:o.e.Null,result:{text:m.text,color:E}}}):d.options[String(m.value)]={text:m.text,color:E});break;case 2:case o.H.RangeToText:m.from==="null"||m.to==="null"?f.push({type:o.H.SpecialValue,options:{match:o.e.Null,result:{text:m.text,color:E}}}):f.push({type:o.H.RangeToText,options:{from:+m.from,to:+m.to,result:{text:m.text,color:E}}});break}return Object.keys(d.options).length>0&&f.unshift(d),f[0]}},48762:(G,A,e)=>{"use strict";e.d(A,{_:()=>o,b:()=>a});const n="__searchFilter",a=r=>r&&typeof r=="string"?r.indexOf(n)!==-1:!1,o=r=>{const{query:i,wildcardChar:g}=r;if(!a(i))return{};let{options:u}=r;return u=u||{searchFilter:""},{__searchFilter:{value:u.searchFilter?`${u.searchFilter}${g}`:`${g}`,text:""}}}},31902:(G,A,e)=>{"use strict";e.d(A,{x:()=>i});var n=e(59069),a=e(55670),o=e(24596),r=e(23136);function i({whileLoading:g,source:u}){return(0,n.T)((0,a.H)(200).pipe((0,o.h)(g),(0,r.R)(u)),u)}},20154:(G,A,e)=>{"use strict";e.d(A,{Cf:()=>n.Cf,FH:()=>n.FH,IR:()=>n.IR,QW:()=>n.QW,Qj:()=>n.Qj,SP:()=>n.SP,SR:()=>n.SR,Td:()=>n.Td,bn:()=>n.bn,br:()=>n.br,q2:()=>n.q2,vb:()=>n.vb,zc:()=>n.zc});var n=e(1930)},7321:(G,A,e)=>{"use strict";e.d(A,{Aq:()=>a,Yh:()=>u,dT:()=>i,i7:()=>l});var n=e(1930);function a(m,c){const d=["","K","M","B","T"],f=(0,n.Qj)(1e3,d);return(E,v,h)=>{if(E==null)return{text:""};const p=E<0;p&&(E=Math.abs(E));const s=f(E,v,h);return c?s.suffix=s.suffix!==void 0?`${s.suffix}${m}`:void 0:s.prefix=m,p&&(s.prefix=`-${s.prefix?.length?s.prefix:""}`),s}}const o=["f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],r=o.indexOf("");function i(m){const c=o.findIndex(d=>d.normalize("NFKD")===m.normalize("NFKD"));return c<0?0:c-r}const g=["","Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"];function u(m,c=0){const d=g.map(f=>" "+f+m);return(0,n.Qj)(1024,d,c)}function l(m,c=0){const d=o.map(f=>" "+f+m);return(0,n.Qj)(1e3,d,r+c)}},1930:(G,A,e)=>{"use strict";e.d(A,{IR:()=>ue,zc:()=>k,Cf:()=>Te,QW:()=>ct,Td:()=>nt,br:()=>oe,SP:()=>Ue,Qj:()=>ge,SR:()=>De,vb:()=>Pe,FH:()=>se,bn:()=>re,q2:()=>ie});var n=e(56375);function a(he,xe){return he===null?{text:""}:{text:se(he,xe),suffix:"%"}}function o(he,xe){return he===null?{text:""}:{text:se(100*he,xe),suffix:"%"}}function r(he,xe){if(he==null)return{text:""};const Me=i(he,xe);return Me.text.substring(0,1)==="-"?Me.text="-0x"+Me.text.substring(1):Me.text="0x"+Me.text,Me}function i(he,xe){return he==null?{text:""}:{text:parseFloat(se(he,xe)).toString(16).toUpperCase()}}function g(he,xe){return he==null?{text:""}:{text:he.toExponential(xe??void 0)}}var u=e(12537),l=e(70991),m=e(85745),c=(he=>(he.Year="year",he.Month="month",he.Week="week",he.Day="day",he.Hour="hour",he.Minute="minute",he.Second="second",he.Millisecond="millisecond",he))(c||{});const d=["year","month","week","day","hour","minute","second","millisecond"],f={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1,millisecond:.001};function E(he,xe){return he===null?{text:""}:Math.abs(he)<1e3?{text:se(he,xe),suffix:" ns"}:Math.abs(he)<1e6?re(he/1e3,xe," \xB5s"):Math.abs(he)<1e9?re(he/1e6,xe," ms"):Math.abs(he)<6e10?re(he/1e9,xe," s"):Math.abs(he)<36e11?re(he/6e10,xe," min"):Math.abs(he)<864e11?re(he/36e11,xe," hour"):re(he/864e11,xe," day")}function v(he,xe){return he===null?{text:""}:Math.abs(he)<1e3?{text:se(he,xe),suffix:" \xB5s"}:Math.abs(he)<1e6?re(he/1e3,xe," ms"):re(he/1e6,xe," s")}function h(he,xe,Me){return he===null?{text:""}:Math.abs(he)<1e3?{text:se(he,xe),suffix:" ms"}:Math.abs(he)<6e4?re(he/1e3,xe," s"):Math.abs(he)<36e5?re(he/6e4,xe," min"):Math.abs(he)<864e5?re(he/36e5,xe," hour"):Math.abs(he)<31536e6?re(he/864e5,xe," day"):re(he/31536e6,xe," year")}function p(he,xe){if(he!=null&&xe!==null&&xe!==void 0)return he-xe}function s(he,xe){return he===null?{text:""}:he===0?{text:"0",suffix:" s"}:Math.abs(he)<1e-6?re(he*1e9,xe," ns"):Math.abs(he)<.001?re(he*1e6,xe," \xB5s"):Math.abs(he)<1?re(he*1e3,xe," ms"):Math.abs(he)<60?{text:se(he,xe),suffix:" s"}:Math.abs(he)<3600?re(he/60,xe," min"):Math.abs(he)<86400?re(he/3600,xe," hour"):Math.abs(he)<604800?re(he/86400,xe," day"):Math.abs(he)<31536e3?re(he/604800,xe," week"):re(he/31556900,xe," year")}function y(he,xe){return he===null?{text:""}:Math.abs(he)<60?{text:se(he,xe),suffix:" min"}:Math.abs(he)<1440?re(he/60,xe," hour"):Math.abs(he)<10080?re(he/1440,xe," day"):Math.abs(he)<604800?re(he/10080,xe," week"):re(he/525948,xe," year")}function C(he,xe){return he===null?{text:""}:Math.abs(he)<24?{text:se(he,xe),suffix:" hour"}:Math.abs(he)<168?re(he/24,xe," day"):Math.abs(he)<8760?re(he/168,xe," week"):re(he/8760,xe," year")}function b(he,xe){return he===null?{text:""}:Math.abs(he)<7?{text:se(he,xe),suffix:" day"}:Math.abs(he)<365?re(he/7,xe," week"):re(he/365,xe," year")}function S(he,xe,Me){if(he===null)return{text:""};if(he===0)return{text:"0",suffix:" "+Me+"s"};if(he<0){const Ne=S(-he,xe,Me);return Ne.suffix||(Ne.suffix=""),Ne.suffix+=" ago",Ne}he*=f[Me]*1e3;const He=[];let Ve=!1,Oe=0;xe!=null&&(Oe=xe);for(let Ne=0;Ne<d.length&&Oe>=0;Ne++){const _e=f[d[Ne]]*1e3,qe=he/_e;if(qe>=1||Ve){Ve=!0;const rt=Math.floor(qe),mt=d[Ne]+(rt!==1?"s":"");He.push(rt+" "+mt),he=he%_e,Oe--}}return{text:He.join(", ")}}function D(he,xe){if(he===null)return{text:""};if(he<1e3)return{text:(0,m.zh)(he).format("SSS\\m\\s")};if(he<6e4){let Oe="ss\\s:SSS\\m\\s";return xe===0&&(Oe="ss\\s"),{text:(0,m.zh)(he).format(Oe)}}if(he<36e5){let Oe="mm\\m:ss\\s:SSS\\m\\s";return xe===0?Oe="mm\\m":xe===1&&(Oe="mm\\m:ss\\s"),{text:(0,m.zh)(he).format(Oe)}}let Me="mm\\m:ss\\s:SSS\\m\\s";const He=`${("0"+Math.floor((0,m.Ks)(he,"milliseconds").asHours())).slice(-2)}h`;return xe===0?Me="":xe===1?Me="mm\\m":xe===2&&(Me="mm\\m:ss\\s"),{text:Me?`${He}:${(0,m.zh)(he).format(Me)}`:He}}function M(he,xe){return S(he,xe,"millisecond")}function T(he,xe){return S(he,xe,"second")}function R(he){if(he<0){const Oe=R(-he);return Oe.suffix||(Oe.suffix=""),Oe.suffix+=" ago",Oe}const xe=[],Me=Math.floor(he/3600),He=Math.floor(he%3600/60),Ve=Math.floor(he%3600%60);return Me>9?xe.push(""+Me):xe.push("0"+Me),He>9?xe.push(""+He):xe.push("0"+He),Ve>9?xe.push(""+Ve):xe.push("0"+Ve),{text:xe.join(":")}}function O(he){if(he<0){const Ve=O(-he);return Ve.suffix||(Ve.suffix=""),Ve.suffix+=" ago",Ve}let xe="";const Me=Math.floor(he/(24*3600));Me>0&&(xe=Me+" d ");const He=R(he-Me*24*3600);return{text:xe+He.text}}function x(he,xe){return s(he/100,xe)}function I(he,xe){return D(he,xe)}function L(he,xe){return D(he*1e3,xe)}function P(he,xe){return(Me,He,Ve,Oe)=>xe&&(0,m.CQ)().isSame(Me,"day")?{text:(0,u.dq)(Me,{format:xe,timeZone:Oe})}:{text:(0,u.dq)(Me,{format:he,timeZone:Oe})}}const N=P("YYYY-MM-DD HH:mm:ss"),F=P("YYYY-MM-DD HH:mm:ss","HH:mm:ss"),U=P("MM/DD/YYYY h:mm:ss a"),j=P("MM/DD/YYYY h:mm:ss a","h:mm:ss a");function V(){return P((0,l.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function _(){return P((0,l.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),(0,l.Ji)({hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function H(he,xe,Me,He,Ve){return{text:(0,u.dq)(he,{format:Ve?l.U6.fullDateMS:l.U6.fullDate,timeZone:He})}}function z(he,xe,Me,He){return{text:(0,u.E8)(he,{timeZone:He})}}var K=e(7321);const Y=()=>[{name:"Misc",formats:[{name:"Number",id:"none",fn:ie("")},{name:"String",id:"string",fn:Pe},{name:"short",id:"short",fn:ge(1e3,[""," K"," Mil"," Bil"," Tri"," Quadr"," Quint"," Sext"," Sept"])},{name:"Percent (0-100)",id:"percent",fn:a},{name:"Percent (0.0-1.0)",id:"percentunit",fn:o},{name:"Humidity (%H)",id:"humidity",fn:ie("%H")},{name:"Decibel",id:"dB",fn:ie("dB")},{name:"Candela (cd)",id:"candela",fn:(0,K.i7)("cd")},{name:"Hexadecimal (0x)",id:"hex0x",fn:r},{name:"Hexadecimal",id:"hex",fn:i},{name:"Scientific notation",id:"sci",fn:g},{name:"Locale format",id:"locale",fn:Ue},{name:"Pixels",id:"pixel",fn:ie("px")}]},{name:"Acceleration",formats:[{name:"Meters/sec\xB2",id:"accMS2",fn:ie("m/sec\xB2")},{name:"Feet/sec\xB2",id:"accFS2",fn:ie("f/sec\xB2")},{name:"G unit",id:"accG",fn:ie("g")}]},{name:"Angle",formats:[{name:"Degrees (\xB0)",id:"degree",fn:ie("\xB0")},{name:"Radians",id:"radian",fn:ie("rad")},{name:"Gradian",id:"grad",fn:ie("grad")},{name:"Arc Minutes",id:"arcmin",fn:ie("arcmin")},{name:"Arc Seconds",id:"arcsec",fn:ie("arcsec")}]},{name:"Area",formats:[{name:"Square Meters (m\xB2)",id:"areaM2",fn:ie("m\xB2")},{name:"Square Feet (ft\xB2)",id:"areaF2",fn:ie("ft\xB2")},{name:"Square Miles (mi\xB2)",id:"areaMI2",fn:ie("mi\xB2")},{name:"Acres (ac)",id:"acres",fn:ie("ac")},{name:"Hectares (ha)",id:"hectares",fn:ie("ha")}]},{name:"Computation",formats:[{name:"FLOP/s",id:"flops",fn:(0,K.i7)("FLOPS")},{name:"MFLOP/s",id:"mflops",fn:(0,K.i7)("FLOPS",2)},{name:"GFLOP/s",id:"gflops",fn:(0,K.i7)("FLOPS",3)},{name:"TFLOP/s",id:"tflops",fn:(0,K.i7)("FLOPS",4)},{name:"PFLOP/s",id:"pflops",fn:(0,K.i7)("FLOPS",5)},{name:"EFLOP/s",id:"eflops",fn:(0,K.i7)("FLOPS",6)},{name:"ZFLOP/s",id:"zflops",fn:(0,K.i7)("FLOPS",7)},{name:"YFLOP/s",id:"yflops",fn:(0,K.i7)("FLOPS",8)}]},{name:"Concentration",formats:[{name:"parts-per-million (ppm)",id:"ppm",fn:ie("ppm")},{name:"parts-per-billion (ppb)",id:"conppb",fn:ie("ppb")},{name:"nanogram per cubic meter (ng/m\xB3)",id:"conngm3",fn:ie("ng/m\xB3")},{name:"nanogram per normal cubic meter (ng/Nm\xB3)",id:"conngNm3",fn:ie("ng/Nm\xB3")},{name:"microgram per cubic meter (\u03BCg/m\xB3)",id:"con\u03BCgm3",fn:ie("\u03BCg/m\xB3")},{name:"microgram per normal cubic meter (\u03BCg/Nm\xB3)",id:"con\u03BCgNm3",fn:ie("\u03BCg/Nm\xB3")},{name:"milligram per cubic meter (mg/m\xB3)",id:"conmgm3",fn:ie("mg/m\xB3")},{name:"milligram per normal cubic meter (mg/Nm\xB3)",id:"conmgNm3",fn:ie("mg/Nm\xB3")},{name:"gram per cubic meter (g/m\xB3)",id:"congm3",fn:ie("g/m\xB3")},{name:"gram per normal cubic meter (g/Nm\xB3)",id:"congNm3",fn:ie("g/Nm\xB3")},{name:"milligrams per decilitre (mg/dL)",id:"conmgdL",fn:ie("mg/dL")},{name:"millimoles per litre (mmol/L)",id:"conmmolL",fn:ie("mmol/L")}]},{name:"Currency",formats:[{name:"Dollars ($)",id:"currencyUSD",fn:(0,K.Aq)("$")},{name:"Pounds (\xA3)",id:"currencyGBP",fn:(0,K.Aq)("\xA3")},{name:"Euro (\u20AC)",id:"currencyEUR",fn:(0,K.Aq)("\u20AC")},{name:"Yen (\xA5)",id:"currencyJPY",fn:(0,K.Aq)("\xA5")},{name:"Rubles (\u20BD)",id:"currencyRUB",fn:(0,K.Aq)("\u20BD")},{name:"Hryvnias (\u20B4)",id:"currencyUAH",fn:(0,K.Aq)("\u20B4")},{name:"Real (R$)",id:"currencyBRL",fn:(0,K.Aq)("R$")},{name:"Danish Krone (kr)",id:"currencyDKK",fn:(0,K.Aq)("kr",!0)},{name:"Icelandic Kr\xF3na (kr)",id:"currencyISK",fn:(0,K.Aq)("kr",!0)},{name:"Norwegian Krone (kr)",id:"currencyNOK",fn:(0,K.Aq)("kr",!0)},{name:"Swedish Krona (kr)",id:"currencySEK",fn:(0,K.Aq)("kr",!0)},{name:"Czech koruna (czk)",id:"currencyCZK",fn:(0,K.Aq)("czk")},{name:"Swiss franc (CHF)",id:"currencyCHF",fn:(0,K.Aq)("CHF")},{name:"Polish Z\u0142oty (PLN)",id:"currencyPLN",fn:(0,K.Aq)("PLN")},{name:"Bitcoin (\u0E3F)",id:"currencyBTC",fn:(0,K.Aq)("\u0E3F")},{name:"Milli Bitcoin (\u0E3F)",id:"currencymBTC",fn:(0,K.Aq)("mBTC")},{name:"Micro Bitcoin (\u0E3F)",id:"currency\u03BCBTC",fn:(0,K.Aq)("\u03BCBTC")},{name:"South African Rand (R)",id:"currencyZAR",fn:(0,K.Aq)("R")},{name:"Indian Rupee (\u20B9)",id:"currencyINR",fn:(0,K.Aq)("\u20B9")},{name:"South Korean Won (\u20A9)",id:"currencyKRW",fn:(0,K.Aq)("\u20A9")},{name:"Indonesian Rupiah (Rp)",id:"currencyIDR",fn:(0,K.Aq)("Rp")},{name:"Philippine Peso (PHP)",id:"currencyPHP",fn:(0,K.Aq)("PHP")},{name:"Vietnamese Dong (VND)",id:"currencyVND",fn:(0,K.Aq)("\u0111",!0)},{name:"Turkish Lira (\u20BA)",id:"currencyTRY",fn:(0,K.Aq)("\u20BA",!0)},{name:"Malaysian Ringgit (RM)",id:"currencyMYR",fn:(0,K.Aq)("RM")},{name:"CFP franc (XPF)",id:"currencyXPF",fn:(0,K.Aq)("XPF")},{name:"Bulgarian Lev (BGN)",id:"currencyBGN",fn:(0,K.Aq)("BGN")}]},{name:"Data",formats:[{name:"bytes(IEC)",id:"bytes",fn:(0,K.Yh)("B")},{name:"bytes(SI)",id:"decbytes",fn:(0,K.i7)("B")},{name:"bits(IEC)",id:"bits",fn:(0,K.Yh)("b")},{name:"bits(SI)",id:"decbits",fn:(0,K.i7)("b")},{name:"kibibytes",id:"kbytes",fn:(0,K.Yh)("B",1)},{name:"kilobytes",id:"deckbytes",fn:(0,K.i7)("B",1)},{name:"mebibytes",id:"mbytes",fn:(0,K.Yh)("B",2)},{name:"megabytes",id:"decmbytes",fn:(0,K.i7)("B",2)},{name:"gibibytes",id:"gbytes",fn:(0,K.Yh)("B",3)},{name:"gigabytes",id:"decgbytes",fn:(0,K.i7)("B",3)},{name:"tebibytes",id:"tbytes",fn:(0,K.Yh)("B",4)},{name:"terabytes",id:"dectbytes",fn:(0,K.i7)("B",4)},{name:"pebibytes",id:"pbytes",fn:(0,K.Yh)("B",5)},{name:"petabytes",id:"decpbytes",fn:(0,K.i7)("B",5)}]},{name:"Data rate",formats:[{name:"packets/sec",id:"pps",fn:(0,K.i7)("p/s")},{name:"bytes/sec(IEC)",id:"binBps",fn:(0,K.Yh)("B/s")},{name:"bytes/sec(SI)",id:"Bps",fn:(0,K.i7)("B/s")},{name:"bits/sec(IEC)",id:"binbps",fn:(0,K.Yh)("b/s")},{name:"bits/sec(SI)",id:"bps",fn:(0,K.i7)("b/s")},{name:"kibibytes/sec",id:"KiBs",fn:(0,K.Yh)("B/s",1)},{name:"kibibits/sec",id:"Kibits",fn:(0,K.Yh)("b/s",1)},{name:"kilobytes/sec",id:"KBs",fn:(0,K.i7)("B/s",1)},{name:"kilobits/sec",id:"Kbits",fn:(0,K.i7)("b/s",1)},{name:"mebibytes/sec",id:"MiBs",fn:(0,K.Yh)("B/s",2)},{name:"mebibits/sec",id:"Mibits",fn:(0,K.Yh)("b/s",2)},{name:"megabytes/sec",id:"MBs",fn:(0,K.i7)("B/s",2)},{name:"megabits/sec",id:"Mbits",fn:(0,K.i7)("b/s",2)},{name:"gibibytes/sec",id:"GiBs",fn:(0,K.Yh)("B/s",3)},{name:"gibibits/sec",id:"Gibits",fn:(0,K.Yh)("b/s",3)},{name:"gigabytes/sec",id:"GBs",fn:(0,K.i7)("B/s",3)},{name:"gigabits/sec",id:"Gbits",fn:(0,K.i7)("b/s",3)},{name:"tebibytes/sec",id:"TiBs",fn:(0,K.Yh)("B/s",4)},{name:"tebibits/sec",id:"Tibits",fn:(0,K.Yh)("b/s",4)},{name:"terabytes/sec",id:"TBs",fn:(0,K.i7)("B/s",4)},{name:"terabits/sec",id:"Tbits",fn:(0,K.i7)("b/s",4)},{name:"pebibytes/sec",id:"PiBs",fn:(0,K.Yh)("B/s",5)},{name:"pebibits/sec",id:"Pibits",fn:(0,K.Yh)("b/s",5)},{name:"petabytes/sec",id:"PBs",fn:(0,K.i7)("B/s",5)},{name:"petabits/sec",id:"Pbits",fn:(0,K.i7)("b/s",5)}]},{name:"Date & time",formats:[{name:"Datetime ISO",id:"dateTimeAsIso",fn:N},{name:"Datetime ISO (No date if today)",id:"dateTimeAsIsoNoDateIfToday",fn:F},{name:"Datetime US",id:"dateTimeAsUS",fn:U},{name:"Datetime US (No date if today)",id:"dateTimeAsUSNoDateIfToday",fn:j},{name:"Datetime local",id:"dateTimeAsLocal",fn:V()},{name:"Datetime local (No date if today)",id:"dateTimeAsLocalNoDateIfToday",fn:_()},{name:"Datetime default",id:"dateTimeAsSystem",fn:H},{name:"From Now",id:"dateTimeFromNow",fn:z}]},{name:"Energy",formats:[{name:"Watt (W)",id:"watt",fn:(0,K.i7)("W")},{name:"Kilowatt (kW)",id:"kwatt",fn:(0,K.i7)("W",1)},{name:"Megawatt (MW)",id:"megwatt",fn:(0,K.i7)("W",2)},{name:"Gigawatt (GW)",id:"gwatt",fn:(0,K.i7)("W",3)},{name:"Milliwatt (mW)",id:"mwatt",fn:(0,K.i7)("W",-1)},{name:"Watt per square meter (W/m\xB2)",id:"Wm2",fn:ie("W/m\xB2")},{name:"Volt-Ampere (VA)",id:"voltamp",fn:(0,K.i7)("VA")},{name:"Kilovolt-Ampere (kVA)",id:"kvoltamp",fn:(0,K.i7)("VA",1)},{name:"Volt-Ampere reactive (VAr)",id:"voltampreact",fn:(0,K.i7)("VAr")},{name:"Kilovolt-Ampere reactive (kVAr)",id:"kvoltampreact",fn:(0,K.i7)("VAr",1)},{name:"Watt-hour (Wh)",id:"watth",fn:(0,K.i7)("Wh")},{name:"Watt-hour per Kilogram (Wh/kg)",id:"watthperkg",fn:(0,K.i7)("Wh/kg")},{name:"Kilowatt-hour (kWh)",id:"kwatth",fn:(0,K.i7)("Wh",1)},{name:"Kilowatt-min (kWm)",id:"kwattm",fn:(0,K.i7)("W-Min",1)},{name:"Megawatt-hour (MWh)",id:"mwatth",fn:(0,K.i7)("Wh",2)},{name:"Ampere-hour (Ah)",id:"amph",fn:(0,K.i7)("Ah")},{name:"Kiloampere-hour (kAh)",id:"kamph",fn:(0,K.i7)("Ah",1)},{name:"Milliampere-hour (mAh)",id:"mamph",fn:(0,K.i7)("Ah",-1)},{name:"Joule (J)",id:"joule",fn:(0,K.i7)("J")},{name:"Electron volt (eV)",id:"ev",fn:(0,K.i7)("eV")},{name:"Ampere (A)",id:"amp",fn:(0,K.i7)("A")},{name:"Kiloampere (kA)",id:"kamp",fn:(0,K.i7)("A",1)},{name:"Milliampere (mA)",id:"mamp",fn:(0,K.i7)("A",-1)},{name:"Volt (V)",id:"volt",fn:(0,K.i7)("V")},{name:"Kilovolt (kV)",id:"kvolt",fn:(0,K.i7)("V",1)},{name:"Millivolt (mV)",id:"mvolt",fn:(0,K.i7)("V",-1)},{name:"Decibel-milliwatt (dBm)",id:"dBm",fn:(0,K.i7)("dBm")},{name:"Milliohm (m\u03A9)",id:"mohm",fn:(0,K.i7)("\u03A9",-1)},{name:"Ohm (\u03A9)",id:"ohm",fn:(0,K.i7)("\u03A9")},{name:"Kiloohm (k\u03A9)",id:"kohm",fn:(0,K.i7)("\u03A9",1)},{name:"Megaohm (M\u03A9)",id:"Mohm",fn:(0,K.i7)("\u03A9",2)},{name:"Farad (F)",id:"farad",fn:(0,K.i7)("F")},{name:"Microfarad (\xB5F)",id:"\xB5farad",fn:(0,K.i7)("F",-2)},{name:"Nanofarad (nF)",id:"nfarad",fn:(0,K.i7)("F",-3)},{name:"Picofarad (pF)",id:"pfarad",fn:(0,K.i7)("F",-4)},{name:"Femtofarad (fF)",id:"ffarad",fn:(0,K.i7)("F",-5)},{name:"Henry (H)",id:"henry",fn:(0,K.i7)("H")},{name:"Millihenry (mH)",id:"mhenry",fn:(0,K.i7)("H",-1)},{name:"Microhenry (\xB5H)",id:"\xB5henry",fn:(0,K.i7)("H",-2)},{name:"Lumens (Lm)",id:"lumens",fn:(0,K.i7)("Lm")}]},{name:"Flow",formats:[{name:"Gallons/min (gpm)",id:"flowgpm",fn:ie("gpm")},{name:"Cubic meters/sec (cms)",id:"flowcms",fn:ie("cms")},{name:"Cubic feet/sec (cfs)",id:"flowcfs",fn:ie("cfs")},{name:"Cubic feet/min (cfm)",id:"flowcfm",fn:ie("cfm")},{name:"Litre/hour",id:"litreh",fn:ie("L/h")},{name:"Litre/min (L/min)",id:"flowlpm",fn:ie("L/min")},{name:"milliLitre/min (mL/min)",id:"flowmlpm",fn:ie("mL/min")},{name:"Lux (lx)",id:"lux",fn:ie("lux")}]},{name:"Force",formats:[{name:"Newton-meters (Nm)",id:"forceNm",fn:(0,K.i7)("Nm")},{name:"Kilonewton-meters (kNm)",id:"forcekNm",fn:(0,K.i7)("Nm",1)},{name:"Newtons (N)",id:"forceN",fn:(0,K.i7)("N")},{name:"Kilonewtons (kN)",id:"forcekN",fn:(0,K.i7)("N",1)}]},{name:"Hash rate",formats:[{name:"hashes/sec",id:"Hs",fn:(0,K.i7)("H/s")},{name:"kilohashes/sec",id:"KHs",fn:(0,K.i7)("H/s",1)},{name:"megahashes/sec",id:"MHs",fn:(0,K.i7)("H/s",2)},{name:"gigahashes/sec",id:"GHs",fn:(0,K.i7)("H/s",3)},{name:"terahashes/sec",id:"THs",fn:(0,K.i7)("H/s",4)},{name:"petahashes/sec",id:"PHs",fn:(0,K.i7)("H/s",5)},{name:"exahashes/sec",id:"EHs",fn:(0,K.i7)("H/s",6)}]},{name:"Mass",formats:[{name:"milligram (mg)",id:"massmg",fn:(0,K.i7)("g",-1)},{name:"gram (g)",id:"massg",fn:(0,K.i7)("g")},{name:"pound (lb)",id:"masslb",fn:ie("lb")},{name:"kilogram (kg)",id:"masskg",fn:(0,K.i7)("g",1)},{name:"metric ton (t)",id:"masst",fn:ie("t")}]},{name:"Length",formats:[{name:"millimeter (mm)",id:"lengthmm",fn:(0,K.i7)("m",-1)},{name:"inch (in)",id:"lengthin",fn:ie("in")},{name:"feet (ft)",id:"lengthft",fn:ie("ft")},{name:"meter (m)",id:"lengthm",fn:(0,K.i7)("m")},{name:"kilometer (km)",id:"lengthkm",fn:(0,K.i7)("m",1)},{name:"mile (mi)",id:"lengthmi",fn:ie("mi")}]},{name:"Pressure",formats:[{name:"Millibars",id:"pressurembar",fn:(0,K.i7)("bar",-1)},{name:"Bars",id:"pressurebar",fn:(0,K.i7)("bar")},{name:"Kilobars",id:"pressurekbar",fn:(0,K.i7)("bar",1)},{name:"Pascals",id:"pressurepa",fn:(0,K.i7)("Pa")},{name:"Hectopascals",id:"pressurehpa",fn:ie("hPa")},{name:"Kilopascals",id:"pressurekpa",fn:ie("kPa")},{name:"Inches of mercury",id:"pressurehg",fn:ie('"Hg')},{name:"PSI",id:"pressurepsi",fn:ge(1e3,["psi","ksi","Mpsi"])}]},{name:"Radiation",formats:[{name:"Becquerel (Bq)",id:"radbq",fn:(0,K.i7)("Bq")},{name:"curie (Ci)",id:"radci",fn:(0,K.i7)("Ci")},{name:"Gray (Gy)",id:"radgy",fn:(0,K.i7)("Gy")},{name:"rad",id:"radrad",fn:(0,K.i7)("rad")},{name:"Sievert (Sv)",id:"radsv",fn:(0,K.i7)("Sv")},{name:"milliSievert (mSv)",id:"radmsv",fn:(0,K.i7)("Sv",-1)},{name:"microSievert (\xB5Sv)",id:"radusv",fn:(0,K.i7)("Sv",-2)},{name:"rem",id:"radrem",fn:(0,K.i7)("rem")},{name:"Exposure (C/kg)",id:"radexpckg",fn:(0,K.i7)("C/kg")},{name:"roentgen (R)",id:"radr",fn:(0,K.i7)("R")},{name:"Sievert/hour (Sv/h)",id:"radsvh",fn:(0,K.i7)("Sv/h")},{name:"milliSievert/hour (mSv/h)",id:"radmsvh",fn:(0,K.i7)("Sv/h",-1)},{name:"microSievert/hour (\xB5Sv/h)",id:"radusvh",fn:(0,K.i7)("Sv/h",-2)}]},{name:"Rotational Speed",formats:[{name:"Revolutions per minute (rpm)",id:"rotrpm",fn:ie("rpm")},{name:"Hertz (Hz)",id:"rothz",fn:(0,K.i7)("Hz")},{name:"Kilohertz (kHz)",id:"rotkhz",fn:(0,K.i7)("Hz",1)},{name:"Megahertz (MHz)",id:"rotmhz",fn:(0,K.i7)("Hz",2)},{name:"Gigahertz (GHz)",id:"rotghz",fn:(0,K.i7)("Hz",3)},{name:"Radians per second (rad/s)",id:"rotrads",fn:ie("rad/s")},{name:"Degrees per second (\xB0/s)",id:"rotdegs",fn:ie("\xB0/s")}]},{name:"Temperature",formats:[{name:"Celsius (\xB0C)",id:"celsius",fn:ie("\xB0C")},{name:"Fahrenheit (\xB0F)",id:"fahrenheit",fn:ie("\xB0F")},{name:"Kelvin (K)",id:"kelvin",fn:ie("K")}]},{name:"Time",formats:[{name:"Hertz (1/s)",id:"hertz",fn:(0,K.i7)("Hz")},{name:"nanoseconds (ns)",id:"ns",fn:E},{name:"microseconds (\xB5s)",id:"\xB5s",fn:v},{name:"milliseconds (ms)",id:"ms",fn:h},{name:"seconds (s)",id:"s",fn:s},{name:"minutes (m)",id:"m",fn:y},{name:"hours (h)",id:"h",fn:C},{name:"days (d)",id:"d",fn:b},{name:"duration (ms)",id:"dtdurationms",fn:M},{name:"duration (s)",id:"dtdurations",fn:T},{name:"duration (hh:mm:ss)",id:"dthms",fn:R},{name:"duration (d hh:mm:ss)",id:"dtdhms",fn:O},{name:"Timeticks (s/100)",id:"timeticks",fn:x},{name:"clock (ms)",id:"clockms",fn:I},{name:"clock (s)",id:"clocks",fn:L}]},{name:"Throughput",formats:[{name:"counts/sec (cps)",id:"cps",fn:De("c/s")},{name:"ops/sec (ops)",id:"ops",fn:De("ops/s")},{name:"requests/sec (rps)",id:"reqps",fn:De("req/s")},{name:"reads/sec (rps)",id:"rps",fn:De("rd/s")},{name:"writes/sec (wps)",id:"wps",fn:De("wr/s")},{name:"I/O ops/sec (iops)",id:"iops",fn:De("io/s")},{name:"events/sec (eps)",id:"eps",fn:De("evt/s")},{name:"messages/sec (mps)",id:"mps",fn:De("msg/s")},{name:"records/sec (rps)",id:"recps",fn:De("rec/s")},{name:"rows/sec (rps)",id:"rowsps",fn:De("rows/s")},{name:"counts/min (cpm)",id:"cpm",fn:De("c/m")},{name:"ops/min (opm)",id:"opm",fn:De("ops/m")},{name:"requests/min (rpm)",id:"reqpm",fn:De("req/m")},{name:"reads/min (rpm)",id:"rpm",fn:De("rd/m")},{name:"writes/min (wpm)",id:"wpm",fn:De("wr/m")},{name:"events/min (epm)",id:"epm",fn:De("evts/m")},{name:"messages/min (mpm)",id:"mpm",fn:De("msgs/m")},{name:"records/min (rpm)",id:"recpm",fn:De("rec/m")},{name:"rows/min (rpm)",id:"rowspm",fn:De("rows/m")}]},{name:"Velocity",formats:[{name:"meters/second (m/s)",id:"velocityms",fn:ie("m/s")},{name:"kilometers/hour (km/h)",id:"velocitykmh",fn:ie("km/h")},{name:"miles/hour (mph)",id:"velocitymph",fn:ie("mph")},{name:"knot (kn)",id:"velocityknot",fn:ie("kn")}]},{name:"Volume",formats:[{name:"millilitre (mL)",id:"mlitre",fn:(0,K.i7)("L",-1)},{name:"litre (L)",id:"litre",fn:(0,K.i7)("L")},{name:"cubic meter",id:"m3",fn:ie("m\xB3")},{name:"Normal cubic meter",id:"Nm3",fn:ie("Nm\xB3")},{name:"cubic decimeter",id:"dm3",fn:ie("dm\xB3")},{name:"gallons",id:"gallons",fn:ie("gal")}]},{name:"Boolean",formats:[{name:"True / False",id:"bool",fn:ue("True","False")},{name:"Yes / No",id:"bool_yes_no",fn:ue("Yes","No")},{name:"On / Off",id:"bool_on_off",fn:ue("On","Off")}]}];function k(he){return`${he.prefix??""}${he.text}${he.suffix??""}`}let q=[];const X={};let te=!1;function se(he,xe){if(he===null)return"";if(he===Number.NEGATIVE_INFINITY||he===Number.POSITIVE_INFINITY)return he.toLocaleString();if(xe==null&&(xe=de(he)),he===0)return he.toFixed(xe);const Me=xe?Math.pow(10,Math.max(0,xe)):1,He=String(Math.round(he*Me)/Me);if(He.indexOf("e")!==-1||he===0)return He;const Ve=He.indexOf("."),Oe=Ve===-1?0:He.length-Ve-1;return Oe<xe?(Oe?He:He+".")+String(Me).slice(1,xe-Oe+1):He}function de(he){const xe=Math.abs(he);let He=-Math.floor(Math.log(xe)/Math.LN10)+1;const Ve=Math.pow(10,-He);return xe/Ve>2.25&&++He,he%1===0&&(He=0),Math.max(0,He)}function re(he,xe,Me){return{text:se(he,xe),suffix:fe(Me,Math.abs(he)>1)}}function fe(he,xe){if(!xe)return he;switch(he){case" min":case" hour":case" day":case" week":case" year":return`${he}s`;default:return he}}function ie(he,xe){return(Me,He)=>{if(Me===null)return{text:""};const Ve=se(Me,He);return he?xe?{text:Ve,prefix:he}:{text:Ve,suffix:" "+he}:{text:Ve}}}function oe(he){return he&&he.startsWith("bool")}function ue(he,xe){return Me=>({text:Me?he:xe})}const me=(he,xe)=>Math.log10(xe)/Math.log10(he);function ge(he,xe,Me=0){return(He,Ve)=>{if(He==null)return{text:""};if(He===Number.NEGATIVE_INFINITY||He===Number.POSITIVE_INFINITY||isNaN(He))return{text:He.toLocaleString()};const Oe=He===0?0:Math.floor(me(he,Math.abs(He))),Ne=xe[(0,n.clamp)(Me+Oe,0,xe.length-1)];return{text:se(He/he**(0,n.clamp)(Oe,-Me,xe.length-Me-1),Ve),suffix:Ne}}}function Ue(he,xe){return he==null?{text:""}:{text:he.toLocaleString(void 0,{maximumFractionDigits:xe??void 0})}}function De(he){const Me=ge(1e3,["","K","M","B","T"]);return(He,Ve,Oe)=>{if(He===null)return{text:""};const Ne=Me(He,Ve,Oe);return Ne.suffix+=" "+he,Ne}}function Pe(he){return{text:`${he}`}}function ye(){q=Y();for(const he of q)for(const xe of he.formats)X[xe.id]=xe.fn;[{from:"farenheit",to:"fahrenheit"}].forEach(he=>{const xe=X[he.to];xe&&(X[he.from]=xe)}),te=!0}function Te(he){if(!he)return ie("");te||ye();const xe=X[he];if(!xe&&he){let Me=he.indexOf(":");if(Me>0){const He=he.substring(0,Me),Ve=he.substring(Me+1);if(He==="prefix")return ie(Ve,!0);if(He==="suffix")return ie(Ve,!1);if(He==="time")return P(Ve);if(He==="si"){const Oe=(0,K.dT)(Ve.charAt(0)),Ne=Oe===0?Ve:Ve.substring(1);return(0,K.i7)(Ne,Oe)}if(He==="count")return De(Ve);if(He==="currency")return(0,K.Aq)(Ve);if(He==="bool"){if(Me=Ve.indexOf("/"),Me>=0){const Oe=Ve.substring(0,Me),Ne=Ve.substring(Me+1);return ue(Oe,Ne)}return ue(Ve,"-")}}return ie(he)}return xe}function nt(){return te||ye(),X}function ct(){return te||ye(),q.map(he=>({text:he.name,submenu:he.formats.map(xe=>({text:xe.name,value:xe.id}))}))}},81424:(G,A,e)=>{"use strict";e.d(A,{d:()=>o});var n=e(99911),a=e(2207);class o extends a.G{constructor(i){return super(),this.buffer=i.buffer||[],this.capacity=this.buffer.length,this.tail=i.append!=="head",this.index=0,this.add=this.getAddFunction(),i.capacity&&this.setCapacity(i.capacity),(0,n.U)(this)}getAddFunction(){return this.capacity>this.buffer.length?this.tail?i=>{this.buffer.push(i),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:i=>{this.buffer.unshift(i),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:this.tail?i=>{this.buffer[this.index]=i,this.index=(this.index+1)%this.buffer.length}:i=>{let g=this.index-1;g<0&&(g=this.buffer.length-1),this.buffer[g]=i,this.index=g}}setCapacity(i){if(this.capacity===i)return;const g=this.toArray();if(i>this.length)this.buffer=g;else if(i<this.capacity){const u=this.length-i;this.tail?this.buffer=g.slice(u,g.length):this.buffer=g.slice(0,g.length-u)}this.capacity=i,this.index=0,this.add=this.getAddFunction()}setAppendMode(i){const g=i!=="head";g!==this.tail&&(this.buffer=this.toArray().reverse(),this.index=0,this.tail=g,this.add=this.getAddFunction())}reverse(){return this.buffer.reverse()}get(i){return this.buffer[(i+this.index)%this.buffer.length]}set(i,g){this.buffer[(i+this.index)%this.buffer.length]=g}get length(){return this.buffer.length}}},2207:(G,A,e)=>{"use strict";e.d(A,{G:()=>o,s:()=>i});var n=e(21115),a;class o{constructor(){this[a]={}}*iterator(){for(let u=0;u<this.length;u++)yield this.get(u)}set(u,l){throw"unsupported operation"}add(u){throw"unsupported operation"}push(...u){for(const l of u)this.add(l);return this.length}[Symbol.iterator](){return this.iterator()}forEach(u){return i(this).forEach(u)}map(u){return i(this).map(u)}filter(u){return i(this).filter(u)}at(u){return this.get(u)}toArray(){return(0,n.n)(this)}join(u){return this.toArray().join(u)}toJSON(){return this.toArray()}pop(){throw new Error("Method not implemented.")}concat(...u){throw new Error("Method not implemented.")}reverse(){throw new Error("Method not implemented.")}shift(){throw new Error("Method not implemented.")}sort(u){throw new Error("Method not implemented.")}splice(u,l,...m){throw new Error("Method not implemented.")}unshift(...u){throw new Error("Method not implemented.")}fill(u,l,m){throw new Error("Method not implemented.")}copyWithin(u,l,m){throw new Error("Method not implemented.")}slice(u,l){return this.toArray().slice(u,l)}indexOf(u,l){return this.toArray().indexOf(u,l)}lastIndexOf(u,l){return this.toArray().lastIndexOf(u,l)}every(u,l){return this.toArray().every(u,l)}some(u,l){return this.toArray().some(u,l)}reduce(u,l){throw new Error("Method not implemented.")}reduceRight(u,l){throw new Error("Method not implemented.")}find(u,l){return this.toArray().find(u,l)}findIndex(u,l){return this.toArray().findIndex(u,l)}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.toArray().values()}includes(u,l){return this.toArray().includes(u,l)}flatMap(u,l){return this.toArray().flatMap(u,l)}flat(u){throw new Error("Method not implemented.")}}a=Symbol.unscopables;const r=[];function i(g){return{*[Symbol.iterator](){for(let u=0;u<g.length;u++)yield g.get(u)},forEach(u){for(let l=0;l<g.length;l++)u(g.get(l),l,r)},map(u){const l=[];for(let m=0;m<g.length;m++)l.push(u(g.get(m),m,r));return l},filter(u){const l=[];let m=0;for(const c of this)u(c,m++,r)&&l.push(c);return l}}}},6237:(G,A,e)=>{"use strict";e.d(A,{o:()=>r});var n=e(99911),a=e(2207),o=e(21115);class r extends a.G{constructor(g,u){return super(),this.source=g,this.order=u,(0,n.U)(this)}get length(){return this.source.length}get(g){return this.source.get(this.order[g])}toArray(){return(0,o.n)(this)}toJSON(){return(0,o.n)(this)}getOrderArray(){return this.order}}},97573:(G,A,e)=>{"use strict";e.d(A,{l$:()=>r,Gt:()=>u,sq:()=>p,rM:()=>c,dV:()=>l.d,uI:()=>m,$Y:()=>E,rm:()=>h,oH:()=>d.o,sD:()=>a.s});var n=e(99911),a=e(2207),o=e(21115);class r extends a.G{constructor(y=0){return super(),this.length=0,this.source=[],this.length=y,(0,n.U)(this)}setLength(y){if(y>this.length)this.length=y;else if(y<this.length){const C=[];for(const b of this.source)if(C.push(b),b.end>y){b.end=y;break}this.source=C,this.length=y}}append(y){const C={start:this.length,end:this.length+y.length,values:y};return this.length=C.end,this.source.push(C),C}get(y){for(let C=0;C<this.source.length;C++){const b=this.source[C];if(y>=b.start&&y<b.end)return b.values[y-b.start]}}toArray(){return(0,o.n)(this)}toJSON(){return(0,o.n)(this)}}const i="ArrayVector is deprecated and will be removed in Grafana 11. Please use plain arrays for field.values.";let g=!1;class u extends Array{get buffer(){return this}set buffer(y){this.length=0;const C=y?.length;if(C){let b=65e3,S=Math.ceil(C/b);for(let D=0;D<S;D++)this.push.apply(this,y.slice(D*b,(D+1)*b))}}constructor(y){super(),this.buffer=y??[],g||(console.warn(i),g=!0)}toJSON(){return[...this]}}var l=e(81424);class m extends Array{constructor(y,C){return super(),new Array(C).fill(y)}}class c extends Array{constructor(y,C,b){super();const S=new Array(y.length);for(let D=0;D<S.length;D++)S[D]=b(y[D],C[D]);return S}}var d=e(6237),f=e(1930);class E extends Array{constructor(y,C){return super(),y.map(b=>(0,f.zc)(C(b)))}}var v=e(58309);class h extends Array{constructor(y){super();const C=new Array(y);for(let b=0;b<y;b++)C[b]=b;return C}static newField(y){return{name:"",values:new h(y),type:v.fS.number,config:{min:0,max:y-1}}}}class p extends Array{constructor(y){return super(),y.map(C=>+C)}}},21115:(G,A,e)=>{"use strict";e.d(A,{n:()=>n});function n(a){const o=Array(a.length);for(let r=0;r<a.length;r++)o[r]=a.get(r);return o}},221:(G,A,e)=>{"use strict";e.d(A,{Sg:()=>E,d6:()=>f,cN:()=>d});var n=e(58309),a=e(40354),o=e(64282),r=e(4957),i=e(56375);function g(h,p){const s=u(h);return l(s,p,"parents")}function u(h){return h.map(p=>{if(!p.parents?.length)return p;const s={...p,children:[]},y=[{child:s,parent:p.parents[0]}];for(;y.length;){const C=y.shift(),b={...C.parent,children:C.child?[C.child]:[],parents:[]};C.child&&(b.value=C.child.value,C.child.parents=[b]),C.parent.parents?.length&&y.push({child:b,parent:C.parent.parents[0]})}return s})}function l(h,p,s="children"){const y=s==="parents"?"children":"parents",C=[],b=[{previous:void 0,items:h,level:0}];for(;b.length;){const S=b.shift(),D=S.items.flatMap(O=>O.itemIndexes),M={value:S.items.reduce((O,x)=>O+x.value,0),itemIndexes:D,children:[],parents:[],start:0,level:S.level};if(C[S.level]=C[S.level]||[],C[S.level].push(M),S.previous){M[y]=[S.previous];const O=S.previous[s]?.reduce((x,I)=>x+I.value,0)||0;M.start=S.previous.start+O,S.previous[s].push(M)}const T=S.items.flatMap(O=>O[s]||[]),R=(0,i.groupBy)(T,O=>p.getLabel(O.itemIndexes[0]));for(const O of Object.values(R))b.push({previous:M,items:O,level:S.level+1})}return s==="parents"&&(C.reverse(),C.forEach((S,D)=>{S.forEach(M=>{M.level=D})})),C}function m(h,p){const s=[];let y=0,C;const b={};for(let D=0;D<h.data.length;D++){const M=h.getLevel(D),T=D>0?h.getLevel(D-1):void 0;if(s[M]=s[M]||[],T&&T>=M){const O=s[M][s[M].length-1];y=O.start+h.getValue(O.itemIndexes[0])+h.getValueRight(O.itemIndexes[0]),C=O.parents[0]}const R={itemIndexes:[D],value:h.getValue(D)+h.getValueRight(D),valueRight:h.isDiffFlamegraph()?h.getValueRight(D):void 0,start:y,parents:C&&[C],children:[],level:M};b[h.getLabel(D)]?b[h.getLabel(D)].push(R):b[h.getLabel(D)]=[R],C&&C.children.push(R),C=R,s[M].push(R)}const S=new c(p?.collapsingThreshold);return p?.collapsing&&S.addTree(s[0][0]),[s,b,S.getMap()]}class c{constructor(p){this.map=new Map,this.threshold=.99,p!==void 0&&(this.threshold=p)}addTree(p){const s=[p];for(;s.length;){const y=s.shift();y.parents?.length&&this.addItem(y,y.parents[0]),y.children.length&&s.unshift(...y.children)}}addItem(p,s){if(s&&p.value>s.value*this.threshold&&s.children.length===1)if(this.map.has(s)){const y=this.map.get(s);this.map.set(p,y),y.items.push(p)}else{const y={items:[s,p],collapsed:!0};this.map.set(s,y),this.map.set(p,y)}}getMap(){return new Map(this.map)}}function d(h){return h.missingFields.length?`Data is missing fields: ${h.missingFields.join(", ")}`:h.wrongTypeFields.length?`Data has fields of wrong type: ${h.wrongTypeFields.map(p=>`${p.name} has type ${p.type} but should be ${p.expectedTypes.join(" or ")}`).join(", ")}`:""}function f(h){const p=[["label",[n.fS.string,n.fS.enum]],["level",[n.fS.number]],["value",[n.fS.number]],["self",[n.fS.number]]],s=[],y=[];for(const C of p){const[b,S]=C,D=h.fields.find(M=>M.name===b);if(!D){s.push(b);continue}S.includes(D.type)||y.push({name:b,expectedTypes:S,type:D.type})}if(s.length>0||y.length>0)return{wrongTypeFields:y,missingFields:s}}class E{constructor(p,s,y=(0,a.j)()){this.data=p,this.options=s;const C=f(p);if(C)throw new Error(d(C));if(this.labelField=p.fields.find(S=>S.name==="label"),this.levelField=p.fields.find(S=>S.name==="level"),this.valueField=p.fields.find(S=>S.name==="value"),this.selfField=p.fields.find(S=>S.name==="self"),this.valueRightField=p.fields.find(S=>S.name==="valueRight"),this.selfRightField=p.fields.find(S=>S.name==="selfRight"),(this.valueField||this.selfField)&&!(this.valueField&&this.selfField))throw new Error("Malformed dataFrame: both valueRight and selfRight has to be present if one of them is present.");const b=this.labelField?.config?.type?.enum;b?(this.labelDisplayProcessor=(0,o.U)({field:this.labelField,theme:y}),this.uniqueLabels=b.text||[]):(this.labelDisplayProcessor=S=>({text:S+"",numeric:0}),this.uniqueLabels=[...new Set(this.labelField.values)]),this.valueDisplayProcessor=(0,o.U)({field:this.valueField,theme:y})}isDiffFlamegraph(){return this.valueRightField&&this.selfRightField}getLabel(p){return this.labelDisplayProcessor(this.labelField.values[p]).text}getLevel(p){return this.levelField.values[p]}getValue(p){return v(this.valueField,p)}getValueRight(p){return v(this.valueRightField,p)}getSelf(p){return v(this.selfField,p)}getSelfRight(p){return v(this.selfRightField,p)}getSelfDisplay(p){return this.valueDisplayProcessor(this.getSelf(p))}getUniqueLabels(){return this.uniqueLabels}getUnitTitle(){switch(this.valueField.config.unit){case r._r.Bytes:return"RAM";case r._r.Nanoseconds:return"Time"}return"Count"}getLevels(){return this.initLevels(),this.levels}getSandwichLevels(p){const s=this.getNodesWithLabel(p);if(!s?.length)return[[],[]];const y=g(s,this),C=l(s,this);return[y,C]}getNodesWithLabel(p){return this.initLevels(),this.uniqueLabelsMap[p]}getCollapsedMap(){return this.initLevels(),this.collapsedMap}initLevels(){if(!this.levels){const[p,s,y]=m(this,this.options);this.levels=p,this.uniqueLabelsMap=s,this.collapsedMap=y}}}function v(h,p){return h?(typeof p=="number"?[p]:p).reduce((y,C)=>y+h.values[C],0):0}},52968:(G,A,e)=>{"use strict";e.d(A,{Z:()=>Ea});var n=e(66681),a=e(51670),o=e(85960),r=e(66137),i=e(76176),g=e(97666);const u=22*window.devicePixelRatio,l=10*window.devicePixelRatio,m=.5*window.devicePixelRatio,c=20*window.devicePixelRatio,d=.5*window.devicePixelRatio,f=4*window.devicePixelRatio,E=3*window.devicePixelRatio,v=3*window.devicePixelRatio,h=4*window.devicePixelRatio,p=2*window.devicePixelRatio,s=800,y=120;var C=e(69707),b=e(71862),S=e(19841);const M=({itemData:Nt,onMenuItemClick:en,onItemFocus:rn,onSandwich:un,collapseConfig:on,onExpandGroup:In,onCollapseGroup:Sn,onExpandAllGroups:Ln,onCollapseAllGroups:hn,collapsing:Gn,allGroupsExpanded:Cn,allGroupsCollapsed:Yn})=>{function Xn(){return o.createElement(o.Fragment,null,o.createElement(C.s,{label:"Focus block",icon:"eye",onClick:()=>{rn(),en()}}),o.createElement(C.s,{label:"Copy function name",icon:"copy",onClick:()=>{navigator.clipboard.writeText(Nt.label).then(()=>{en()})}}),o.createElement(C.s,{label:"Sandwich view",icon:"gf-show-context",onClick:()=>{un(),en()}}),Gn&&o.createElement(b.k,{label:"Grouping"},on?on.collapsed?o.createElement(C.s,{label:"Expand group",icon:"angle-double-down",onClick:()=>{In(),en()}}):o.createElement(C.s,{label:"Collapse group",icon:"angle-double-up",onClick:()=>{Sn(),en()}}):null,!Cn&&o.createElement(C.s,{label:"Expand all groups",icon:"angle-double-down",onClick:()=>{Ln(),en()}}),!Yn&&o.createElement(C.s,{label:"Collapse all groups",icon:"angle-double-up",onClick:()=>{hn(),en()}})))}return o.createElement("div",{"data-testid":"contextMenu"},o.createElement(S.x,{renderMenuItems:Xn,x:Nt.posX+10,y:Nt.posY,focusOnOpen:!1}))};var T=e(1930),R=e(47257),O=e(23940),x=e(25142),I=e(10642);const L=({data:Nt,item:en,totalTicks:rn,position:un,collapseConfig:on})=>{const In=(0,R.wW)(U);if(!(en&&un))return null;let Sn;if(Nt.isDiffFlamegraph()){const Ln=N(Nt,en,rn);Sn=o.createElement(O.e,{className:In.tooltipTable,columns:[{id:"label",header:""},{id:"baseline",header:"Baseline"},{id:"comparison",header:"Comparison"},{id:"diff",header:"Diff"}],data:Ln,getRowId:hn=>hn.rowId})}else{const Ln=P(Nt,en,rn);Sn=o.createElement("p",{className:In.lastParagraph},Ln.unitTitle,o.createElement("br",null),"Total: ",o.createElement("b",null,Ln.unitValue)," (",Ln.percentValue,"%)",o.createElement("br",null),"Self: ",o.createElement("b",null,Ln.unitSelf)," (",Ln.percentSelf,"%)",o.createElement("br",null),"Samples: ",o.createElement("b",null,Ln.samples))}return o.createElement(x.h_,null,o.createElement(I.S,{className:In.tooltipContainer,position:un,offset:{x:15,y:0}},o.createElement("div",{className:In.tooltipContent},o.createElement("p",{className:In.tooltipName},Nt.getLabel(en.itemIndexes[0]),on&&on.collapsed?o.createElement("span",null,o.createElement("br",null),"and ",on.items.length," similar items"):""),Sn)))},P=(Nt,en,rn)=>{const un=Nt.valueDisplayProcessor(en.value),on=Nt.getSelfDisplay(en.itemIndexes),In=Math.round(1e4*(un.numeric/rn))/100,Sn=Math.round(1e4*(on.numeric/rn))/100;let Ln=un.text+un.suffix,hn=on.text+on.suffix;const Gn=Nt.getUnitTitle();return Gn==="Count"&&(un.suffix||(Ln=un.text),on.suffix||(hn=on.text)),{percentValue:In,percentSelf:Sn,unitTitle:Gn,unitValue:Ln,unitSelf:hn,samples:un.numeric.toLocaleString()}},N=(Nt,en,rn)=>{const on=Nt.getLevels()[0][0].valueRight,In=rn-on,Sn=en.value-en.valueRight,Ln=Math.round(1e4*Sn/In)/100,hn=Math.round(1e4*en.valueRight/on)/100,Gn=(hn-Ln)/Ln*100,Cn=F(Nt,Nt.valueDisplayProcessor(Sn)),Yn=F(Nt,Nt.valueDisplayProcessor(en.valueRight)),Xn=(0,T.Cf)("short");return[{rowId:"1",label:"% of total",baseline:Ln+"%",comparison:hn+"%",diff:Xn(Gn).text+"%"},{rowId:"2",label:"Value",baseline:Cn,comparison:Yn,diff:F(Nt,Nt.valueDisplayProcessor(en.valueRight-Sn))},{rowId:"3",label:"Samples",baseline:Xn(Sn).text,comparison:Xn(en.valueRight).text,diff:Xn(en.valueRight-Sn).text}]};function F(Nt,en){let rn=en.text+en.suffix;return Nt.getUnitTitle()==="Count"&&(en.suffix||(rn=en.text)),rn}const U=Nt=>({tooltipContainer:(0,n.css)`
    title: tooltipContainer;
    overflow: hidden;
  `,tooltipContent:(0,n.css)`
    title: tooltipContent;
    font-size: ${Nt.typography.bodySmall.fontSize};
    width: 100%;
  `,tooltipName:(0,n.css)`
    title: tooltipName;
    margin-top: 0;
    word-break: break-all;
  `,lastParagraph:(0,n.css)`
    title: lastParagraph;
    margin-bottom: 0;
  `,name:(0,n.css)`
    title: name;
    margin-bottom: 10px;
  `,tooltipTable:(0,n.css)`
    title: tooltipTable;
    max-width: 400px;
  `}),j=L;var V=e(19737),_=e(4957),H=e(33409);function z(Nt,en=0){let rn,un,on,In,Sn,Ln,hn,Gn;for(rn=Nt.length&3,un=Nt.length-rn,on=en,Sn=3432918353,Ln=461845907,Gn=0;Gn<un;)hn=Nt.charCodeAt(Gn)&255|(Nt.charCodeAt(++Gn)&255)<<8|(Nt.charCodeAt(++Gn)&255)<<16|(Nt.charCodeAt(++Gn)&255)<<24,++Gn,hn=(hn&65535)*Sn+(((hn>>>16)*Sn&65535)<<16)&4294967295,hn=hn<<15|hn>>>17,hn=(hn&65535)*Ln+(((hn>>>16)*Ln&65535)<<16)&4294967295,on^=hn,on=on<<13|on>>>19,In=(on&65535)*5+(((on>>>16)*5&65535)<<16)&4294967295,on=(In&65535)+27492+(((In>>>16)+58964&65535)<<16);switch(hn=0,rn){case 3:hn^=(Nt.charCodeAt(Gn+2)&255)<<16;case 2:hn^=(Nt.charCodeAt(Gn+1)&255)<<8;case 1:hn^=Nt.charCodeAt(Gn)&255;default:hn=(hn&65535)*Sn+(((hn>>>16)*Sn&65535)<<16)&4294967295,hn=hn<<15|hn>>>17,hn=(hn&65535)*Ln+(((hn>>>16)*Ln&65535)<<16)&4294967295,on^=hn}return on^=Nt.length,on^=on>>>16,on=(on&65535)*2246822507+(((on>>>16)*2246822507&65535)<<16)&4294967295,on^=on>>>13,on=(on&65535)*3266489909+(((on>>>16)*3266489909&65535)<<16)&4294967295,on^=on>>>16,on>>>0}const K=[(0,V.Z)({h:24,s:69,l:60}),(0,V.Z)({h:34,s:65,l:65}),(0,V.Z)({h:194,s:52,l:61}),(0,V.Z)({h:163,s:45,l:55}),(0,V.Z)({h:211,s:48,l:60}),(0,V.Z)({h:246,s:40,l:65}),(0,V.Z)({h:305,s:63,l:79}),(0,V.Z)({h:47,s:100,l:73}),(0,V.Z)({r:183,g:219,b:171}),(0,V.Z)({r:244,g:213,b:152}),(0,V.Z)({r:78,g:146,b:249}),(0,V.Z)({r:249,g:186,b:143}),(0,V.Z)({r:242,g:145,b:145}),(0,V.Z)({r:130,g:181,b:216}),(0,V.Z)({r:229,g:168,b:226}),(0,V.Z)({r:174,g:162,b:224}),(0,V.Z)({r:154,g:196,b:138}),(0,V.Z)({r:242,g:201,b:109}),(0,V.Z)({r:101,g:197,b:219}),(0,V.Z)({r:249,g:147,b:78}),(0,V.Z)({r:234,g:100,b:96}),(0,V.Z)({r:81,g:149,b:206}),(0,V.Z)({r:214,g:131,b:206}),(0,V.Z)({r:128,g:110,b:183})],Y=te(1,100,0,1),k=te(100,100,0,1),q=`linear-gradient(90deg, ${Y} 0%, ${k} 100%)`,X=`linear-gradient(90deg, ${K[0]} 0%, ${K[2]} 30%, ${K[6]} 50%, ${K[7]} 70%, ${K[8]} 100%)`;function te(Nt,en,rn,un){const on=Math.min(1,Nt/en/(un-rn)),In=50-50*on,Sn=65+7*on;return(0,V.Z)({h:In,s:100,l:Sn})}function se(Nt,en){const rn=me(Nt),on=z(rn||"",0)%K.length;let In=K[on].clone();return en.isLight&&(In=In.brighten(15)),In}const de=["rgb(0, 170, 0)","rgb(148, 142, 142)","rgb(200, 0, 0)"],re=`linear-gradient(90deg, ${de[0]} 0%, ${de[1]} 50%, ${de[2]} 100%)`,fe=["rgb(26, 133, 255)","rgb(148, 142, 142)","rgb(220, 50, 32)"],ie=`linear-gradient(90deg, ${fe[0]} 0%, ${fe[1]} 50%, ${fe[2]} 100%)`;function oe(Nt,en,rn,un,on){const In=on===_.cB.Default?de:fe,Sn=(0,H.scaleLinear)().domain([-100,0,100]).range(In),Ln=Nt-en,hn=rn-un;if(un===0||hn===0){const Pt=Sn(0);return(0,V.Z)(Pt)}const Gn=Math.round(1e4*Ln/hn)/100,Yn=(Math.round(1e4*en/un)/100-Gn)/Gn*100,Xn=Sn(Yn);return(0,V.Z)(Xn)}const ue=[["phpspy",/^(?<packageName>([^\/]*\/)*)(?<filename>.*\.php+)(?<line_info>.*)$/],["pyspy",/^(?<packageName>([^\/]*\/)*)(?<filename>.*\.py+)(?<line_info>.*)$/],["rbspy",/^(?<packageName>([^\/]*\/)*)(?<filename>.*\.rb+)(?<line_info>.*)$/],["nodespy",/^(\.\/node_modules\/)?(?<packageName>[^/]*)(?<filename>.*\.?(jsx?|tsx?)?):(?<functionName>.*):(?<line_info>.*)$/],["gospy",/^(?<packageName>.*?\/.*?\.|.*?\.|.+)(?<functionName>.*)$/],["javaspy",/^(?<packageName>.+\/)(?<filename>.+\.)(?<functionName>.+)$/],["dotnetspy",/^(?<packageName>.+)\.(.+)\.(.+)\(.*\)$/],["tracing",/^(?<packageName>.+?):.*$/],["pyroscope-rs",/^(?<packageName>[^::]+)/],["ebpfspy",/^(?<packageName>.+)$/],["unknown",/^(?<packageName>.+)$/]];function me(Nt){for(const[en,rn]of ue){const un=Nt.match(rn);if(un)return un.groups?.packageName||""}}function ge(Nt){const{canvasRef:en,data:rn,root:un,depth:on,direction:In,wrapperWidth:Sn,rangeMin:Ln,rangeMax:hn,matchedLabels:Gn,textAlign:Cn,totalViewTicks:Yn,totalColorTicks:Xn,totalTicksRight:Pt,colorScheme:Dt,focusedItemData:$t,collapsedMap:jt}=Nt,mn=Te(en,Sn,on),Dn=(0,R.l4)(),vn=(0,o.useMemo)(()=>{const La=(0,V.Z)(Dn.colors.background.secondary);return Dn.isLight?La.darken(10).toHexString():La.lighten(10).toHexString()},[Dn]),fa=ye(Xn,Pt,Dt,Dn,vn,Ln,hn,Gn,$t?$t.item.level:0),Pa=Ue(mn,rn,fa,Cn,jt);(0,o.useEffect)(()=>{if(!mn)return;mn.clearRect(0,0,mn.canvas.width,mn.canvas.height);const La=new Path2D;Pe(un,In,rn,Yn,Ln,hn,Sn,jt,(Ma,ts,ds,ys,ns,qa,Ss)=>{Ss?La.rect(ts,ds,ys,ns):Pa(Ma,ts,ds,ys,ns,qa)}),mn.fillStyle=vn,mn.fill(La)},[mn,rn,un,Sn,Ln,hn,Yn,In,Pa,jt,vn])}function Ue(Nt,en,rn,un,on){return(0,o.useMemo)(()=>Nt?(Sn,Ln,hn,Gn,Cn,Yn)=>{Nt.beginPath(),Nt.rect(Ln+d,hn,Gn,Cn),Nt.fillStyle=rn(Sn,Yn,!1),Nt.stroke(),Nt.fill();const Xn=on.get(Sn);let Pt=Yn;Xn&&Xn.collapsed&&(Pt=`(${Xn.items.length}) `+Yn),Gn>=c&&(Xn?(nt(Nt,en,Pt,Sn,Gn,un==="left"?Ln+h+p:Ln,hn,un),De(Nt,Ln,hn,Cn,Sn,Xn)):nt(Nt,en,Pt,Sn,Gn,Ln,hn,un))}:()=>{},[Nt,rn,un,en,on])}function De(Nt,en,rn,un,on,In){const Sn=en+h;Nt.beginPath(),Nt.rect(en,rn,Sn-en+E+v,un),Nt.fill(),Nt.beginPath(),In.collapsed?Nt.rect(Sn,rn+un/4,E,un/2):In.items[0]===on?Nt.rect(Sn,rn+un/2,E,un/2):In.items[In.items.length-1]===on?Nt.rect(Sn,rn,E,un/2):Nt.rect(Sn,rn,E,un),Nt.fillStyle="#666",Nt.fill()}function Pe(Nt,en,rn,un,on,In,Sn,Ln,hn){const Gn=[];Gn.push({item:Nt,levelOffset:0});const Cn=Sn*window.devicePixelRatio/un/(In-on);let Yn;for(;Gn.length>0;){const{item:Xn,levelOffset:Pt}=Gn.shift();let Dt=Xn.value;const $t=Dt*Cn<=l,jt=Dt*Cn-($t?0:d*2),mn=u;if(jt<m)continue;let Dn=0,vn=!1;const fa=Ln.get(Xn),Pa=fa&&fa.collapsed;if(Pa&&Yn===fa.items[0]?(Dn=en==="children"?-1:1,vn=!0):Yn=void 0,!vn){const Ma=ct(Xn.start,un,on,Cn),ts=(Xn.level+Pt)*u;let ds=rn.getLabel(Xn.itemIndexes[0]);Pa&&(Yn=Xn),hn(Xn,Ma,ts,jt,mn,ds,$t)}const La=en==="children"?Xn.children:Xn.parents;La&&Gn.unshift(...La.map(Ma=>({item:Ma,levelOffset:Pt+Dn})))}}function ye(Nt,en,rn,un,on,In,Sn,Ln,hn){return(0,o.useCallback)(function(Cn,Yn,Xn){if(Xn&&!Ln)return on;const Pt=Cn.valueRight!==void 0&&(rn===_.cB.Default||rn===_.cB.DiffColorBlind)?oe(Cn.value,Cn.valueRight,Nt,en,rn):rn===_.eL.ValueBased?te(Cn.value,Nt,In,Sn):se(Yn,un);return Ln?Ln.has(Yn)?Pt.toHslString():on:Cn.level>hn-1?Pt.toHslString():Pt.lighten(15).toHslString()},[Nt,en,rn,un,In,Sn,Ln,hn,on])}function Te(Nt,en,rn){const[un,on]=(0,o.useState)();return(0,o.useEffect)(()=>{if(!(rn&&Nt.current))return;const In=Nt.current.getContext("2d"),Sn=u*rn;Nt.current.width=Math.round(en*window.devicePixelRatio),Nt.current.height=Math.round(Sn),Nt.current.style.width=`${en}px`,Nt.current.style.height=`${Sn/window.devicePixelRatio}px`,In.textBaseline="middle",In.font=12*window.devicePixelRatio+"px monospace",In.strokeStyle="white",on(In)},[Nt,on,en,rn]),un}function nt(Nt,en,rn,un,on,In,Sn,Ln){Nt.save(),Nt.clip(),Nt.fillStyle="#222";const hn=en.valueDisplayProcessor(un.value),Gn=hn.suffix?hn.text+hn.suffix:hn.text,Cn=Nt.measureText(rn),Yn=on-f;let Xn=`${rn} (${Gn})`,Pt=Math.max(In,0)+f;Cn.width>Yn&&(Nt.textAlign=Ln,Ln==="right"&&(Xn=rn,Pt=In+on-f)),Nt.fillText(Xn,Pt,Sn+u/2+2),Nt.restore()}function ct(Nt,en,rn,un){return(Nt-en*rn)*un}const he=({data:Nt,rangeMin:en,rangeMax:rn,matchedLabels:un,setRangeMin:on,setRangeMax:In,onItemFocused:Sn,focusedItemData:Ln,textAlign:hn,onSandwich:Gn,colorScheme:Cn,totalProfileTicks:Yn,totalProfileTicksRight:Xn,totalViewTicks:Pt,root:Dt,direction:$t,depth:jt,showFlameGraphOnly:mn,collapsedMap:Dn,setCollapsedMap:vn,collapsing:fa})=>{const Pa=He(),[La,{width:Ma}]=(0,r.Z)(),ts=(0,o.useRef)(null),[ds,ys]=(0,o.useState)(),[ns,qa]=(0,o.useState)();ge({canvasRef:ts,colorScheme:Cn,data:Nt,focusedItemData:Ln,root:Dt,direction:$t,depth:jt,rangeMax:rn,rangeMin:en,matchedLabels:un,textAlign:hn,totalViewTicks:Pt,totalColorTicks:Nt.isDiffFlamegraph()?Yn:Pt,totalTicksRight:Xn,wrapperWidth:Ma,collapsedMap:Dn});const Ss=(0,o.useCallback)(es=>{ys(void 0);const za=ts.current.clientWidth/Pt/(rn-en),Ls=Ve({x:es.nativeEvent.offsetX,y:es.nativeEvent.offsetY},Dt,$t,jt,za,Pt,en,Dn);qa(Ls?{posY:es.clientY,posX:es.clientX,item:Ls,label:Nt.getLabel(Ls.itemIndexes[0])}:void 0)},[Nt,en,rn,Pt,Dt,$t,jt,Dn]),[wr,ls]=(0,o.useState)(),zs=(0,o.useCallback)(es=>{if(ns===void 0){ys(void 0),ls(void 0);const za=ts.current.clientWidth/Pt/(rn-en),Ls=Ve({x:es.nativeEvent.offsetX,y:es.nativeEvent.offsetY},Dt,$t,jt,za,Pt,en,Dn);Ls&&(ls({x:es.clientX,y:es.clientY}),ys(Ls))}},[en,rn,Pt,ns,ls,Dt,$t,jt,Dn]),ks=(0,o.useCallback)(()=>{ys(void 0)},[]);return(0,o.useEffect)(()=>{const es=za=>{za.target instanceof HTMLElement&&za.target.parentElement?.id!=="flameGraphCanvasContainer_clickOutsideCheck"&&qa(void 0)};return window.addEventListener("click",es),()=>window.removeEventListener("click",es)},[qa]),o.createElement("div",{className:Pa.graph},o.createElement("div",{className:Pa.canvasWrapper,id:"flameGraphCanvasContainer_clickOutsideCheck",ref:La},o.createElement("canvas",{ref:ts,"data-testid":"flameGraph",onClick:Ss,onMouseMove:zs,onMouseLeave:ks})),o.createElement(j,{position:wr,item:ds,data:Nt,totalTicks:Pt,collapseConfig:ds?Dn.get(ds):void 0}),!mn&&ns&&o.createElement(M,{itemData:ns,collapsing:fa,collapseConfig:Dn.get(ns.item),onMenuItemClick:()=>{qa(void 0)},onItemFocus:()=>{on(ns.item.start/Pt),In((ns.item.start+ns.item.value)/Pt),Sn(ns)},onSandwich:()=>{Gn(Nt.getLabel(ns.item.itemIndexes[0]))},onExpandGroup:()=>{vn(xe(Dn,ns.item,!1))},onCollapseGroup:()=>{vn(xe(Dn,ns.item,!0))},onExpandAllGroups:()=>{vn(Me(Dn,!1))},onCollapseAllGroups:()=>{vn(Me(Dn,!0))},allGroupsCollapsed:Array.from(Dn.values()).every(es=>es.collapsed),allGroupsExpanded:Array.from(Dn.values()).every(es=>!es.collapsed)}))};function xe(Nt,en,rn){const un=new Map(Nt),on=Nt.get(en),In={...on,collapsed:rn};for(const Sn of on.items)un.set(Sn,In);return un}function Me(Nt,en){const rn=new Map(Nt);for(const un of Nt.keys()){const In={...Nt.get(un),collapsed:en};rn.set(un,In)}return rn}const He=()=>({graph:(0,n.css)({label:"graph",overflow:"auto",flexGrow:1,flexBasis:"50%"}),canvasContainer:(0,n.css)({label:"canvasContainer",display:"flex"}),canvasWrapper:(0,n.css)({label:"canvasWrapper",cursor:"pointer",flex:1,overflow:"hidden"}),sandwichMarker:(0,n.css)({label:"sandwichMarker",writingMode:"vertical-lr",transform:"rotate(180deg)",overflow:"hidden",whiteSpace:"nowrap"}),sandwichMarkerIcon:(0,n.css)({label:"sandwichMarkerIcon",verticalAlign:"baseline"})}),Ve=(Nt,en,rn,un,on,In,Sn,Ln)=>{let hn=en,Gn=rn==="children"?0:un-1;const Cn=Math.floor(Nt.y/(u/window.devicePixelRatio));let Yn;for(;hn;){const Xn=hn;if(hn=void 0,Gn===Cn){Yn=Xn;break}const Pt=rn==="children"?Xn.children:Xn.parents||[];for(const Dt of Pt){const $t=ct(Dt.start,In,Sn,on),jt=ct(Dt.start+Dt.value,In,Sn,on);if($t<=Nt.x&&Nt.x<jt){hn=Dt;const mn=Ln.get(Dt);(!mn||!mn.collapsed||mn.items[0]===Dt)&&(Gn=Gn+(rn==="children"?1:-1));break}}}return Yn},Oe=he;var Ne=e(75064);const _e=o.memo(({data:Nt,focusedItem:en,totalTicks:rn,sandwichedLabel:un,onFocusPillClick:on,onSandwichPillClick:In})=>{const Sn=(0,R.wW)(qe),Ln=[],hn=(0,T.Cf)("short")(rn),Gn=Nt.valueDisplayProcessor(rn);let Cn=Gn.text+Gn.suffix;const Yn=Nt.getUnitTitle();if(Yn==="Count"&&(Gn.suffix||(Cn=Gn.text)),Ln.push(o.createElement("div",{className:Sn.metadataPill,key:"default"},Cn," | ",hn.text,hn.suffix," samples (",Yn,")")),un&&Ln.push(o.createElement("span",{key:"sandwich"},o.createElement(g.J,{size:"sm",name:"angle-right"}),o.createElement("div",{className:Sn.metadataPill},o.createElement(g.J,{size:"sm",name:"gf-show-context"})," ",o.createElement("span",{className:Sn.metadataPillName},un.substring(un.lastIndexOf("/")+1)),o.createElement(Ne.h,{className:Sn.pillCloseButton,name:"times",size:"sm",onClick:In,tooltip:"Remove sandwich view","aria-label":"Remove sandwich view"})))),en){const Xn=Math.round(1e4*(en.item.value/rn))/100;Ln.push(o.createElement("span",{key:"focus"},o.createElement(g.J,{size:"sm",name:"angle-right"}),o.createElement("div",{className:Sn.metadataPill},o.createElement(g.J,{size:"sm",name:"eye"})," ",Xn,"% of total",o.createElement(Ne.h,{className:Sn.pillCloseButton,name:"times",size:"sm",onClick:on,tooltip:"Remove focus","aria-label":"Remove focus"}))))}return o.createElement(o.Fragment,null,o.createElement("div",{className:Sn.metadata},Ln))});_e.displayName="FlameGraphMetadata";const qe=Nt=>({metadataPill:(0,n.css)`
    label: metadataPill;
    display: inline-flex;
    align-items: center;
    background: ${Nt.colors.background.secondary};
    border-radius: ${Nt.shape.borderRadius(8)};
    padding: ${Nt.spacing(.5,1)};
    font-size: ${Nt.typography.bodySmall.fontSize};
    font-weight: ${Nt.typography.fontWeightMedium};
    line-height: ${Nt.typography.bodySmall.lineHeight};
    color: ${Nt.colors.text.secondary};
  `,pillCloseButton:(0,n.css)`
    label: pillCloseButton;
    vertical-align: text-bottom;
    margin: ${Nt.spacing(0,.5)};
  `,metadata:(0,n.css)`
    margin: 8px 0;
    text-align: center;
  `,metadataPillName:(0,n.css)`
    label: metadataPillName;
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-left: ${Nt.spacing(.5)};
  `}),rt=_e,mt=({data:Nt,rangeMin:en,rangeMax:rn,matchedLabels:un,setRangeMin:on,setRangeMax:In,onItemFocused:Sn,focusedItemData:Ln,textAlign:hn,onSandwich:Gn,sandwichItem:Cn,onFocusPillClick:Yn,onSandwichPillClick:Xn,colorScheme:Pt,showFlameGraphOnly:Dt,collapsing:$t})=>{const jt=Je(),[mn,Dn]=(0,o.useState)(new Map),[vn,fa]=(0,o.useState)(),[Pa,La]=(0,o.useState)(),[Ma,ts]=(0,o.useState)(0),[ds,ys]=(0,o.useState)(),[ns,qa]=(0,o.useState)(0);if((0,o.useEffect)(()=>{if(Nt){Dn(Nt.getCollapsedMap());let ls=Nt.getLevels(),zs=ls.length?ls[0][0].value:0,ks=ls.length?ls[0][0].valueRight:void 0,es=zs,za;if(Cn){const[Ls,pr]=Nt.getSandwichLevels(Cn);ls=pr,za=Ls,es=pr[0]?.[0]?.value??0}fa(ls),La(za),ts(zs),ys(ks),qa(es)}},[Nt,Cn]),!vn)return null;const Ss={data:Nt,rangeMin:en,rangeMax:rn,matchedLabels:un,setRangeMin:on,setRangeMax:In,onItemFocused:Sn,focusedItemData:Ln,textAlign:hn,onSandwich:Gn,colorScheme:Pt,totalProfileTicks:Ma,totalProfileTicksRight:ds,totalViewTicks:ns,showFlameGraphOnly:Dt,collapsedMap:mn,setCollapsedMap:Dn,collapsing:$t},wr=Pa?o.createElement(o.Fragment,null,o.createElement("div",{className:jt.sandwichCanvasWrapper},o.createElement("div",{className:jt.sandwichMarker},"Callers",o.createElement(g.J,{className:jt.sandwichMarkerIcon,name:"arrow-down"})),o.createElement(Oe,{...Ss,root:Pa[Pa.length-1][0],depth:Pa.length,direction:"parents",collapsing:!1})),o.createElement("div",{className:jt.sandwichCanvasWrapper},o.createElement("div",{className:(0,n.cx)(jt.sandwichMarker,jt.sandwichMarkerCalees)},o.createElement(g.J,{className:jt.sandwichMarkerIcon,name:"arrow-up"}),"Callees"),o.createElement(Oe,{...Ss,root:vn[0][0],depth:vn.length,direction:"children",collapsing:!1}))):o.createElement(Oe,{...Ss,root:vn[0][0],depth:vn.length,direction:"children"});return o.createElement("div",{className:jt.graph},o.createElement(rt,{data:Nt,focusedItem:Ln,sandwichedLabel:Cn,totalTicks:ns,onFocusPillClick:Yn,onSandwichPillClick:Xn}),wr)},Je=()=>({graph:(0,n.css)`
    label: graph;
    overflow: auto;
    flex-grow: 1;
    flex-basis: 50%;
  `,sandwichCanvasWrapper:(0,n.css)`
    label: sandwichCanvasWrapper;
    display: flex;
    margin-bottom: ${u/window.devicePixelRatio}px;
  `,sandwichMarker:(0,n.css)`
    label: sandwichMarker;
    writing-mode: vertical-lr;
    transform: rotate(180deg);
    overflow: hidden;
    white-space: nowrap;
  `,sandwichMarkerCalees:(0,n.css)`
    label: sandwichMarkerCalees;
    text-align: right;
  `,sandwichMarkerIcon:(0,n.css)`
    label: sandwichMarkerIcon;
    vertical-align: baseline;
  `}),Ae=mt;var Ke=e(221),Xe=e(44158),ne=e(3517),Z=e(29165),ee=e(24956),ce=e(5106),be=e(54635),Ee=e(44839);const Be=({search:Nt,setSearch:en,selectedView:rn,setSelectedView:un,containerWidth:on,onReset:In,textAlign:Sn,onTextAlignChange:Ln,showResetButton:hn,colorScheme:Gn,onColorSchemeChange:Cn,stickyHeader:Yn,extraHeaderElements:Xn,vertical:Pt,isDiffMode:Dt})=>{const $t=(0,R.wW)(et,Yn),[jt,mn]=$e(Nt,en),Dn=jt!==""?o.createElement(Z.zx,{icon:"times",fill:"text",size:"sm",onClick:()=>{en(""),mn("")}},"Clear"):null;return o.createElement("div",{className:$t.header},o.createElement("div",{className:$t.inputContainer},o.createElement(ee.I,{value:jt||"",onChange:vn=>{mn(vn.currentTarget.value)},placeholder:"Search...",suffix:Dn})),o.createElement("div",{className:$t.rightContainer},hn&&o.createElement(Z.zx,{variant:"secondary",fill:"outline",size:"sm",icon:"history-alt",tooltip:"Reset focus and sandwich state",onClick:()=>{In()},className:$t.buttonSpacing,"aria-label":"Reset focus and sandwich state"}),o.createElement(Le,{value:Gn,onChange:Cn,isDiffMode:Dt}),o.createElement(ce.S,{size:"sm",disabled:rn===_.So.TopTable,options:ze,value:Sn,onChange:Ln,className:$t.buttonSpacing}),o.createElement(ce.S,{size:"sm",options:Fe(on,Pt),value:rn,onChange:un}),Xn&&o.createElement("div",{className:$t.extraElements},Xn)))};function Le(Nt){const en=(0,R.wW)(et,!1);let rn=o.createElement(be.v,null,o.createElement(be.v.Item,{label:"By package name",onClick:()=>Nt.onChange(_.eL.PackageBased)}),o.createElement(be.v.Item,{label:"By value",onClick:()=>Nt.onChange(_.eL.ValueBased)}));Nt.isDiffMode&&(rn=o.createElement(be.v,null,o.createElement(be.v.Item,{label:"Default (green to red)",onClick:()=>Nt.onChange(_.cB.Default)}),o.createElement(be.v.Item,{label:"Color blind (blue to red)",onClick:()=>Nt.onChange(_.cB.DiffColorBlind)})));const un={[_.eL.ValueBased]:en.colorDotByValue,[_.eL.PackageBased]:en.colorDotByPackage,[_.cB.DiffColorBlind]:en.colorDotDiffColorBlind,[_.cB.Default]:en.colorDotDiffDefault}[Nt.value]||en.colorDotByValue;return o.createElement(Ee.L,{overlay:rn},o.createElement(Z.zx,{variant:"secondary",fill:"outline",size:"sm",tooltip:"Change color scheme",onClick:()=>{},className:en.buttonSpacing,"aria-label":"Change color scheme"},o.createElement("span",{className:(0,n.cx)(en.colorDot,un)})))}const ze=[{value:"left",description:"Align text left",icon:"align-left"},{value:"right",description:"Align text right",icon:"align-right"}];function Fe(Nt,en){let rn=[{value:_.So.TopTable,label:"Top Table",description:"Only show top table"},{value:_.So.FlameGraph,label:"Flame Graph",description:"Only show flame graph"}];return(Nt>=s||en)&&rn.push({value:_.So.Both,label:"Both",description:"Show both the top table and flame graph"}),rn}function $e(Nt,en){const[rn,un]=(0,o.useState)(Nt),on=(0,ne.Z)(Nt);return(0,Xe.Z)(()=>{en(rn)},250,[rn]),(0,o.useEffect)(()=>{on!==Nt&&Nt!==rn&&un(Nt)},[Nt,on,rn]),[rn,un]}const et=(Nt,en)=>({header:(0,n.css)`
    label: header;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    width: 100%;
    top: 0;
    ${en?(0,n.css)`
          z-index: ${Nt.zIndex.navbarFixed};
          position: sticky;
          padding-bottom: ${Nt.spacing(1)};
          padding-top: ${Nt.spacing(1)};
          background: ${Nt.colors.background.primary};
        `:""};
  `,inputContainer:(0,n.css)`
    label: inputContainer;
    margin-right: 20px;
    flex-grow: 1;
    min-width: 150px;
    max-width: 350px;
  `,rightContainer:(0,n.css)`
    label: rightContainer;
    display: flex;
    align-items: flex-start;
    flex-wrap: wrap;
  `,buttonSpacing:(0,n.css)`
    label: buttonSpacing;
    margin-right: ${Nt.spacing(1)};
  `,resetButton:(0,n.css)`
    label: resetButton;
    display: flex;
    margin-right: ${Nt.spacing(2)};
  `,resetButtonIconWrapper:(0,n.css)`
    label: resetButtonIcon;
    padding: 0 5px;
    color: ${Nt.colors.text.disabled};
  `,colorDot:(0,n.css)`
    label: colorDot;
    display: inline-block;
    width: 10px;
    height: 10px;
    border-radius: 50%;
  `,colorDotByValue:(0,n.css)`
    label: colorDotByValue;
    background: ${q};
  `,colorDotByPackage:(0,n.css)`
    label: colorDotByPackage;
    background: ${X};
  `,colorDotDiffDefault:(0,n.css)`
    label: colorDotDiffDefault;
    background: ${re};
  `,colorDotDiffColorBlind:(0,n.css)`
    label: colorDotDiffColorBlind;
    background: ${ie};
  `,extraElements:(0,n.css)`
    label: extraElements;
    margin-left: ${Nt.spacing(1)};
  `}),tt=Be;var it=e(53565),vt=e(58309),yt=e(43626),Wt=e(17338),ut=e(63510),pt=e(1713);const we=o.memo(({data:Nt,onSymbolClick:en,search:rn,matchedLabels:un,onSearch:on,sandwichItem:In,onSandwich:Sn,onTableSort:Ln})=>{const hn=(0,o.useMemo)(()=>{let Pt={};for(let Dt=0;Dt<Nt.data.length;Dt++){const $t=Nt.getValue(Dt),jt=Nt.getValueRight(Dt),mn=Nt.getSelf(Dt),Dn=Nt.getLabel(Dt);(!un||un.has(Dn))&&(Pt[Dn]=Pt[Dn]||{},Pt[Dn].self=Pt[Dn].self?Pt[Dn].self+mn:mn,Pt[Dn].total=Pt[Dn].total?Pt[Dn].total+$t:$t,Pt[Dn].totalRight=Pt[Dn].totalRight?Pt[Dn].totalRight+jt:jt)}return Pt},[Nt,un]),Gn=(0,R.wW)(yn),Cn=(0,R.l4)(),[Yn,Xn]=(0,o.useState)([{displayName:"Self",desc:!0}]);return o.createElement("div",{className:Gn.topTableContainer,"data-testid":"topTable"},o.createElement(it.Z,{style:{width:"100%"}},({width:Pt,height:Dt})=>{if(Pt<3||Dt<3)return null;const $t=lt(Nt,hn,Pt,en,on,Sn,Cn,rn,In);return o.createElement(ut.i,{initialSortBy:Yn,onSortByChange:jt=>{jt&&jt.length&&Ln?.(jt[0].displayName+"_"+(jt[0].desc?"desc":"asc")),Xn(jt)},data:$t,width:Pt,height:Dt})}))});we.displayName="FlameGraphTopTableContainer";function lt(Nt,en,rn,un,on,In,Sn,Ln,hn){const Gn=It(In,on,Ln,hn),Cn={type:vt.fS.string,name:"Symbol",values:[],config:{custom:{width:rn-Kt-y*2},links:[{title:"Highlight symbol",url:"",onClick:Pt=>{const $t=Pt.origin.field.values[Pt.origin.rowIndex];un($t)}}]}};let Yn;if(Nt.isDiffFlamegraph()){Cn.config.custom.width=rn-Kt-y*3;const Pt=Bt("Baseline","percent"),Dt=Bt("Comparison","percent"),$t=Bt("Diff","percent");$t.config.custom.cellOptions.type=pt.h2.ColorText,$t.config.mappings=[{type:yt.H.ValueToText,options:{[1/0]:{text:"new",color:"red"}}},{type:yt.H.ValueToText,options:{[-100]:{text:"removed",color:"green"}}},{type:yt.H.RangeToText,options:{from:0,to:1/0,result:{color:"red"}}},{type:yt.H.RangeToText,options:{from:-1/0,to:0,result:{color:"green"}}}];const jt=Nt.getLevels(),mn=jt.length?jt[0][0].value:0,Dn=jt.length?jt[0][0].valueRight:void 0;for(let vn in en){Gn.values.push(null),Cn.values.push(vn);const fa=en[vn].total,Pa=en[vn].totalRight,La=mn-Dn,Ma=Math.round(1e4*fa/La)/100,ts=Math.round(1e4*Pa/Dn)/100,ds=(ts-Ma)/Ma*100;$t.values.push(ds),Pt.values.push(Ma),Dt.values.push(ts)}Yn={fields:[Gn,Cn,Pt,Dt,$t],length:Cn.values.length}}else{const Pt=Bt("Self",Nt.selfField.config.unit),Dt=Bt("Total",Nt.valueField.config.unit);for(let $t in en)Gn.values.push(null),Cn.values.push($t),Pt.values.push(en[$t].self),Dt.values.push(en[$t].total);Yn={fields:[Gn,Cn,Pt,Dt],length:Cn.values.length}}return(0,Wt.SM)({data:[Yn],fieldConfig:{defaults:{},overrides:[]},replaceVariables:Pt=>Pt,theme:Sn})[0]}function Bt(Nt,en){const rn={width:y,align:"auto",inspect:!1,cellOptions:{type:pt.h2.Auto}};return{type:vt.fS.number,name:Nt,values:[],config:{unit:en,custom:rn}}}const Kt=61;function It(Nt,en,rn,un){const on={type:pt.h2.Custom,cellComponent:Sn=>o.createElement(Zt,{frame:Sn.frame,onSandwich:Nt,onSearch:en,search:rn,sandwichItem:un,rowIndex:Sn.rowIndex})},In={filterable:!1,width:Kt,hideHeader:!0,inspect:!1,align:"auto",cellOptions:on};return{type:vt.fS.number,name:"actions",values:[],config:{custom:In}}}function Zt(Nt){const en=xn(),rn=Nt.frame.fields.find(In=>In.name==="Symbol")?.values[Nt.rowIndex],un=Nt.search===rn,on=Nt.sandwichItem===rn;return o.createElement("div",{className:en.actionCellWrapper},o.createElement(Ne.h,{className:en.actionCellButton,name:"search",variant:un?"primary":"secondary",tooltip:un?"Clear from search":"Search for symbol","aria-label":un?"Clear from search":"Search for symbol",onClick:()=>{Nt.onSearch(un?"":rn)}}),o.createElement(Ne.h,{className:en.actionCellButton,name:"gf-show-context",tooltip:on?"Remove from sandwich view":"Show in sandwich view",variant:on?"primary":"secondary","aria-label":on?"Remove from sandwich view":"Show in sandwich view",onClick:()=>{Nt.onSandwich(on?void 0:rn)}}))}const yn=Nt=>({topTableContainer:(0,n.css)({label:"topTableContainer",padding:Nt.spacing(1),backgroundColor:Nt.colors.background.secondary,height:"100%"})}),xn=()=>({actionCellWrapper:(0,n.css)`
      label: actionCellWrapper;
      display: flex;
      height: 24px;
    `,actionCellButton:(0,n.css)`
      label: actionCellButton;
      margin-right: 0;
      width: 24px;
    `}),An=we,qt=new a.Z,On=({data:Nt,onTableSymbolClick:en,onViewSelected:rn,onTextAlignSelected:un,onTableSort:on,getTheme:In,stickyHeader:Sn,extraHeaderElements:Ln,vertical:hn,showFlameGraphOnly:Gn,disableCollapsing:Cn})=>{const[Yn,Xn]=(0,o.useState)(),[Pt,Dt]=(0,o.useState)(0),[$t,jt]=(0,o.useState)(1),[mn,Dn]=(0,o.useState)(""),[vn,fa]=(0,o.useState)(_.So.Both),[Pa,{width:La}]=(0,r.Z)(),[Ma,ts]=(0,o.useState)("left"),[ds,ys]=(0,o.useState)(),ns=In(),qa=(0,o.useMemo)(()=>{if(Nt)return new Ke.Sg(Nt,{collapsing:!Cn},ns)},[Nt,ns,Cn]),[Ss,wr]=wn(qa),ls=Aa(ns),zs=Zn(mn,qa);(0,o.useEffect)(()=>{La>0&&La<s&&vn===_.So.Both&&!hn&&fa(_.So.FlameGraph)},[vn,fa,La,hn]);const ks=(0,o.useCallback)(()=>{Xn(void 0),Dt(0),jt(1)},[Xn,jt,Dt]);function es(){ys(void 0)}(0,o.useEffect)(()=>{ks(),es()},[Nt,ks]);const za=(0,o.useCallback)(Ns=>{mn===Ns?Dn(""):(en?.(Ns),Dn(Ns),ks())},[Dn,ks,en,mn]);if(!qa)return null;const Ls=o.createElement(Ae,{data:qa,rangeMin:Pt,rangeMax:$t,matchedLabels:zs,setRangeMin:Dt,setRangeMax:jt,onItemFocused:Ns=>Xn(Ns),focusedItemData:Yn,textAlign:Ma,sandwichItem:ds,onSandwich:Ns=>{ks(),ys(Ns)},onFocusPillClick:ks,onSandwichPillClick:es,colorScheme:Ss,showFlameGraphOnly:Gn,collapsing:!Cn}),pr=o.createElement(An,{data:qa,onSymbolClick:za,search:mn,matchedLabels:zs,sandwichItem:ds,onSandwich:ys,onSearch:Dn,onTableSort:on});let cr;return Gn||vn===_.So.FlameGraph?cr=Ls:vn===_.So.TopTable?cr=o.createElement("div",{className:ls.tableContainer},pr):vn===_.So.Both&&(hn?cr=o.createElement("div",null,o.createElement("div",{className:ls.verticalGraphContainer},Ls),o.createElement("div",{className:ls.verticalTableContainer},pr)):cr=o.createElement("div",{className:ls.horizontalContainer},o.createElement("div",{className:ls.horizontalTableContainer},pr),o.createElement("div",{className:ls.horizontalGraphContainer},Ls))),o.createElement(i.N.Provider,{value:ns},o.createElement("div",{ref:Pa,className:ls.container},!Gn&&o.createElement(tt,{search:mn,setSearch:Dn,selectedView:vn,setSelectedView:Ns=>{fa(Ns),rn?.(Ns)},containerWidth:La,onReset:()=>{ks(),es()},textAlign:Ma,onTextAlignChange:Ns=>{ts(Ns),un?.(Ns)},showResetButton:!!(Yn||ds),colorScheme:Ss,onColorSchemeChange:wr,stickyHeader:!!Sn,extraHeaderElements:Ln,vertical:hn,isDiffMode:!!qa.isDiffFlamegraph()}),o.createElement("div",{className:ls.body},cr)))};function wn(Nt){const en=Nt?.isDiffFlamegraph()?_.cB.Default:_.eL.PackageBased,[rn,un]=(0,o.useState)(en);return(0,o.useEffect)(()=>{un(en)},[en]),[rn,un]}function Zn(Nt,en){return(0,o.useMemo)(()=>{if(Nt&&en){const rn=new Set;let un=qt.filter(en.getUniqueLabels(),Nt);if(un)for(let on of un)rn.add(en.getUniqueLabels()[on]);return rn}},[Nt,en])}function Aa(Nt){return{container:(0,n.css)({label:"container",overflow:"auto",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0,gap:Nt.spacing(1)}),body:(0,n.css)({label:"body",flexGrow:1}),tableContainer:(0,n.css)({height:800}),horizontalContainer:(0,n.css)({label:"horizontalContainer",display:"flex",minHeight:0,flexDirection:"row",columnGap:Nt.spacing(1),width:"100%"}),horizontalGraphContainer:(0,n.css)({flexBasis:"50%"}),horizontalTableContainer:(0,n.css)({flexBasis:"50%",maxHeight:800}),verticalGraphContainer:(0,n.css)({marginBottom:Nt.spacing(1)}),verticalTableContainer:(0,n.css)({height:800})}}const Ea=On},4957:(G,A,e)=>{"use strict";e.d(A,{So:()=>a,_r:()=>n,cB:()=>r,eL:()=>o});var n=(i=>(i.Bytes="bytes",i.Short="short",i.Nanoseconds="ns",i))(n||{}),a=(i=>(i.TopTable="topTable",i.FlameGraph="flameGraph",i.Both="both",i))(a||{}),o=(i=>(i.ValueBased="valueBased",i.PackageBased="packageBased",i))(o||{}),r=(i=>(i.Default="default",i.DiffColorBlind="diffColorBlind",i))(r||{})},51490:(G,A,e)=>{"use strict";e.d(A,{I:()=>a,i:()=>o});var n=e(90857);function a(r){return{grafana_version:n.config.buildInfo.version,plugin_type:String(r.type),plugin_version:r.info.version,plugin_id:r.id,plugin_name:r.name}}function o(r){return{...a(r.meta),datasource_uid:r.uid}}},70568:(G,A,e)=>{"use strict";e.d(A,{Q:()=>u});var n=e(85960),a=e(23882),o=e(46707),r=e(43183),i=e(51490);const g="grafana_plugin_";function u(){const m=(0,a.gp)();return(0,n.useMemo)(()=>{const c=(0,o.v)(m)?(0,i.i)(m.instanceSettings):(0,i.I)(m.meta);return(d,f)=>{if(!l(d))throw new Error(`Interactions reported in plugins should start with: "${g}".`);return(0,r.ff)(d,{...f,...c})}},[m])}function l(m){return m.startsWith(g)&&m.length>g.length}},49641:(G,A,e)=>{"use strict";e.d(A,{Si:()=>a,ct:()=>n,fV:()=>o,mR:()=>r});var n=(i=>(i.DashboardView="dashboard-view",i.DataRequest="data-request",i))(n||{});const a=i=>!!i.payload.page,o=i=>!!i.payload.interactionName,r=i=>!!i.payload.experimentId},43183:(G,A,e)=>{"use strict";e.d(A,{SZ:()=>u,ff:()=>g,r_:()=>r,sm:()=>i});var n=e(90857),a=e(91),o=e(94961);const r=l=>{(0,o.RP)().addEvent({type:o.ee.MetaAnalytics,payload:l})},i=()=>{const l=a.E1.getLocation(),m=`${n.config.appSubUrl??""}${l.pathname}${l.search}${l.hash}`;(0,o.RP)().addEvent({type:o.ee.Pageview,payload:{page:m}})},g=(l,m)=>{(0,o.RP)().addEvent({type:o.ee.Interaction,payload:{interactionName:l,properties:m}})},u=(l,m,c)=>{(0,o.RP)().addEvent({type:o.ee.ExperimentView,payload:{experimentId:l,experimentGroup:m,experimentVariant:c}})}},36613:(G,A,e)=>{"use strict";e.d(A,{q:()=>c});var n=e(85960),a=e(52219),o=e(1058),r=e(92369),i=e(27436),g=e(74042),u=e(15343),l=e(81502),m=e(32063);class c extends n.PureComponent{constructor(f){super(f),this.dataSourceSrv=(0,l.F)(),this.state={},this.onChange=(E,v)=>{if(v.action==="clear"&&this.props.onClear){this.props.onClear();return}const h=this.dataSourceSrv.getInstanceSettings(E.value);h&&(this.props.onChange(h),this.setState({error:void 0}))}}componentDidMount(){const{current:f}=this.props;this.dataSourceSrv.getInstanceSettings(f)||this.setState({error:"Could not find data source "+f})}getCurrentValue(){const{current:f,hideTextValue:E,noDefault:v}=this.props;if(!f&&v)return;const h=this.dataSourceSrv.getInstanceSettings(f);if(h)return{label:h.name.slice(0,37),value:h.uid,imgUrl:h.meta.info.logos.small,hideText:E,meta:h.meta};const p=(0,a.BT)(f);return p===m.hr.uid||p===m.hr.name?{label:p,value:p,hideText:E}:{label:(p??"no name")+" - not found",value:p??void 0,imgUrl:"",hideText:E}}getDataSourceOptions(){const{alerting:f,tracing:E,metrics:v,mixed:h,dashboard:p,variables:s,annotations:y,pluginId:C,type:b,filter:S,logs:D}=this.props;return this.dataSourceSrv.getList({alerting:f,tracing:E,metrics:v,logs:D,dashboard:p,mixed:h,variables:s,annotations:y,pluginId:C,filter:S,type:b}).map(T=>({value:T.name,label:`${T.name}${T.isDefault?" (default)":""}`,imgUrl:T.meta.info.logos.small,meta:T.meta}))}render(){const{autoFocus:f,onBlur:E,onClear:v,openMenuOnFocus:h,placeholder:p,width:s,inputId:y,disabled:C=!1,isLoading:b=!1}=this.props,{error:S}=this.state,D=this.getDataSourceOptions(),M=this.getCurrentValue(),T=typeof v=="function";return n.createElement("div",{"aria-label":"Data source picker select container","data-testid":r.wl.components.DataSourcePicker.container},n.createElement(i.Ph,{isLoading:b,disabled:C,"aria-label":"Select a data source","data-testid":r.wl.components.DataSourcePicker.inputV2,inputId:y||"data-source-picker",className:"ds-picker select-container",isMulti:!1,isClearable:T,backspaceRemovesValue:!1,onChange:this.onChange,options:D,autoFocus:f,onBlur:E,width:s,openMenuOnFocus:h,maxMenuHeight:500,placeholder:p,noOptionsMessage:"No datasources found",value:M??null,invalid:!!S||!!this.props.invalid,getOptionLabel:R=>R.meta&&(0,o.x)(R.meta.signature)&&R!==M?n.createElement(g.Lh,{align:"center",justify:"space-between",height:"auto"},n.createElement("span",null,R.label)," ",n.createElement(u.o,{status:R.meta.signature})):R.label||""}))}}c.defaultProps={autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select data source"}},88912:(G,A,e)=>{"use strict";e.d(A,{$:()=>o,Z:()=>a});var n=e(85960);let a=({message:r})=>n.createElement("div",null,"Unable to render data: ",r,".");function o(r){a=r}},12593:(G,A,e)=>{"use strict";e.d(A,{$:()=>a,L:()=>o});var n=e(85960);let a=()=>n.createElement("div",null,"PanelRenderer can only be used after Grafana instance has been started.");function o(r){a=r}},30573:(G,A,e)=>{"use strict";e.d(A,{T:()=>a,t:()=>o});var n=e(85960);let a=({children:r})=>n.createElement("div",null,r);function o(r){a=r}},90857:(G,A,e)=>{"use strict";e.d(A,{O:()=>i,config:()=>c});var n=e(56375),a=e.n(n),o=e(70991),r=e(83105);class i{constructor(f){this.snapshotEnabled=!0,this.datasources={},this.panels={},this.apps={},this.auth={},this.minRefreshInterval="",this.appUrl="",this.appSubUrl="",this.namespace="default",this.windowTitlePrefix="",this.newPanelTitle="",this.externalUserMngLinkUrl="",this.externalUserMngLinkName="",this.externalUserMngInfo="",this.allowOrgCreate=!1,this.feedbackLinksEnabled=!0,this.disableLoginForm=!1,this.defaultDatasource="",this.alertingEnabled=!1,this.alertingErrorOrTimeout="",this.alertingNoDataOrNullValues="",this.alertingMinInterval=1,this.angularSupportEnabled=!1,this.authProxyEnabled=!1,this.exploreEnabled=!1,this.queryHistoryEnabled=!1,this.helpEnabled=!1,this.profileEnabled=!1,this.newsFeedEnabled=!0,this.ldapEnabled=!1,this.jwtHeaderName="",this.jwtUrlLogin=!1,this.sigV4AuthEnabled=!1,this.azureAuthEnabled=!1,this.secureSocksDSProxyEnabled=!1,this.samlEnabled=!1,this.samlName="",this.autoAssignOrg=!0,this.verifyEmailEnabled=!1,this.oauth={},this.rbacEnabled=!0,this.disableUserSignUp=!1,this.loginHint="",this.passwordHint="",this.loginError=void 0,this.viewersCanEdit=!1,this.editorsCanAdmin=!1,this.disableSanitizeHtml=!1,this.trustedTypesDefaultPolicyEnabled=!1,this.cspReportOnlyEnabled=!1,this.liveEnabled=!0,this.featureToggles={},this.anonymousEnabled=!1,this.licenseInfo={},this.rendererAvailable=!1,this.rendererVersion="",this.secretsManagerPluginEnabled=!1,this.supportBundlesEnabled=!1,this.http2Enabled=!1,this.grafanaJavascriptAgent={enabled:!1,customEndpoint:"",apiKey:"",errorInstrumentalizationEnabled:!0,consoleInstrumentalizationEnabled:!1,webVitalsInstrumentalizationEnabled:!1},this.pluginCatalogURL="https://grafana.com/grafana/plugins/",this.pluginAdminEnabled=!0,this.pluginAdminExternalManageEnabled=!1,this.pluginCatalogHiddenPlugins=[],this.pluginsCDNBaseURL="",this.expressionsEnabled=!1,this.awsAllowedAuthProviders=[],this.awsAssumeRoleEnabled=!1,this.azure={managedIdentityEnabled:!1,workloadIdentityEnabled:!1,userIdentityEnabled:!1},this.caching={enabled:!1},this.unifiedAlertingEnabled=!1,this.unifiedAlerting={minInterval:"",alertStateHistoryBackend:void 0,alertStateHistoryPrimary:void 0},this.recordedQueries={enabled:!0},this.featureHighlights={enabled:!1},this.reporting={enabled:!0},this.analytics={enabled:!0},this.googleAnalytics4SendManualPageViews=!1,this.sqlConnectionLimits={maxOpenConns:100,maxIdleConns:100,connMaxLifetime:14400},this.disableFrontendSandboxForPlugins=[],this.bootData=f.bootData;const E={datasources:{},windowTitlePrefix:"Grafana - ",panels:{},newPanelTitle:"Panel Title",playlist_timespan:"1m",unsaved_changes_warning:!0,appUrl:"",appSubUrl:"",buildInfo:{version:"1.0",commit:"1",env:"production"},viewersCanEdit:!1,editorsCanAdmin:!1,disableSanitizeHtml:!1};(0,n.merge)(this,E,f),this.buildInfo=f.buildInfo||E.buildInfo,this.dateFormats&&o.U6.update(this.dateFormats),this.buildInfo.env==="development"&&u(this),g(this),this.featureToggles.disableAngular&&(this.angularSupportEnabled=!1),this.theme2=(0,r.j)(this.bootData.user.theme),this.bootData.user.lightTheme=this.theme2.isLight,this.theme=this.theme2.v1}}function g(d){const f=d.featureToggles,E="grafana.featureToggles",v=window.localStorage.getItem(E);if(v){const h=v.split(",");for(const p of h){const[s,y]=p.split("="),C=y==="true"||y==="1";f[s]=C,console.log(`Setting feature toggle ${s} = ${C} via localstorage`)}}}function u(d){if(window.location.href.indexOf("__feature")===-1)return;new URLSearchParams(window.location.search).forEach((E,v)=>{if(v.startsWith("__feature.")){const h=d.featureToggles,p=v.substring(10),s=E==="true"||E==="";s!==h[v]&&(h[p]=s,console.log(`Setting feature toggle ${p} = ${s} via url`))}})}const l=window.grafanaBootData||{settings:{},user:{},navTree:[]},m=l.settings;m.bootData=l;const c=new i(m)},40620:(G,A,e)=>{"use strict";e.r(A),e.d(A,{CopyPanelEvent:()=>c.EK,DataSourcePicker:()=>O.q,DataSourceWithBackend:()=>C.CK,EchoEventType:()=>i.ee,FakeEchoSrv:()=>i.rX,GrafanaBootConfig:()=>E.O,HealthCheckError:()=>C.ZA,HealthStatus:()=>C.QO,HistoryWrapper:()=>m._i,MetaAnalyticsEventName:()=>v.ct,PanelDataErrorView:()=>D.Z,PanelRenderer:()=>S.$,PluginPage:()=>R.T,RefreshEvent:()=>c.U5,StreamingFrameAction:()=>l.T0,SystemJS:()=>h.i3,ThemeChangedEvent:()=>c.hD,TimeRangeUpdatedEvent:()=>c.md,config:()=>E.config,createDataSourcePluginEventProperties:()=>x.i,createPluginEventProperties:()=>x.I,createQueryRunner:()=>T.AQ,featureEnabled:()=>s.v,frameToMetricFindValue:()=>b.S9,getAngularLoader:()=>a.w,getAppEvents:()=>c.N$,getBackendSrv:()=>n.i,getDataSourceSrv:()=>o.F,getEchoSrv:()=>i.RP,getGrafanaLiveSrv:()=>l.gj,getLegacyAngularInjector:()=>u.V,getLocationSrv:()=>r.w,getPluginComponentExtensions:()=>d.QK,getPluginExtensions:()=>d.I4,getPluginImportUtils:()=>h.bP,getPluginLinkExtensions:()=>d.dj,getRunRequest:()=>T.Pl,getTemplateSrv:()=>g.J,isExperimentViewEvent:()=>v.mR,isFetchError:()=>n.kW,isInteractionEvent:()=>v.fV,isPageviewEvent:()=>v.Si,isPluginExtensionComponent:()=>f.M,isPluginExtensionLink:()=>f.c,loadPluginCss:()=>h.iS,locationSearchToObject:()=>m.Ox,locationService:()=>m.E1,logDebug:()=>y.o7,logError:()=>y.H,logInfo:()=>y.PN,logWarning:()=>y.KE,navigationLogger:()=>m.GQ,registerEchoBackend:()=>i.e6,reportExperimentView:()=>p.SZ,reportInteraction:()=>p.ff,reportMetaAnalytics:()=>p.r_,reportPageview:()=>p.sm,setAngularLoader:()=>a.W,setAppEvents:()=>c.Xw,setBackendSrv:()=>n.jW,setDataSourceSrv:()=>o.w,setEchoSrv:()=>i.tz,setGrafanaLiveSrv:()=>l.cA,setLegacyAngularInjector:()=>u.t,setLocationService:()=>m.ZG,setLocationSrv:()=>r.x,setPluginExtensionGetter:()=>d.oI,setPluginImportUtils:()=>h.Qf,setQueryRunnerFactory:()=>T.pD,setRunRequest:()=>T.Iw,setTemplateSrv:()=>g.l,toDataQueryError:()=>M.P,toDataQueryResponse:()=>b.z1,usePluginInteractionReporter:()=>I.Q});var n=e(85445),a=e(92289),o=e(81502),r=e(4259),i=e(94961),g=e(12399),u=e(18362),l=e(78942),m=e(91),c=e(2384),d=e(26141),f=e(19820),E=e(90857),v=e(49641),h=e(65362),p=e(43183),s=e(11855),y=e(45465),C=e(32063),b=e(43071),S=e(12593),D=e(88912),M=e(4479),T=e(55471),R=e(30573),O=e(36613),x=e(51490),I=e(70568)},92289:(G,A,e)=>{"use strict";e.d(A,{W:()=>a,w:()=>o});let n;function a(r){n=r}function o(){return n}},94961:(G,A,e)=>{"use strict";e.d(A,{RP:()=>r,e6:()=>i,ee:()=>n,rX:()=>g,tz:()=>o});var n=(u=>(u.Performance="performance",u.MetaAnalytics="meta-analytics",u.Pageview="pageview",u.Interaction="interaction",u.ExperimentView="experimentview",u.GrafanaJavascriptAgent="grafana-javascript-agent",u))(n||{});let a;function o(u){if(a instanceof g)for(const l of a.buffer)u.addEvent(l.event,l.meta);a=u}function r(){return a||(a=new g),a}const i=u=>{r().addBackend(u)};class g{constructor(){this.buffer=[]}flush(){this.buffer=[]}addBackend(l){}addEvent(l,m){this.buffer.push({event:l,meta:m})}}},91:(G,A,e)=>{"use strict";e.d(A,{E1:()=>m,GQ:()=>f,Ox:()=>l,ZG:()=>c,_i:()=>u});var n=e(72926),a=e(173),o=e(20440),r=e(95288),i=e(50284),g=e(90857);class u{constructor(v){this.history=v||n.lX({basename:g.config.appSubUrl??"/"}),this.partial=this.partial.bind(this),this.push=this.push.bind(this),this.replace=this.replace.bind(this),this.getSearch=this.getSearch.bind(this),this.getHistory=this.getHistory.bind(this),this.getLocation=this.getLocation.bind(this)}getHistory(){return this.history}getSearch(){return new URLSearchParams(this.history.location.search)}partial(v,h){const p=this.history.location,s=this.getSearchObject();for(const C of Object.keys(v))v[C]===null||v[C]===void 0?delete s[C]:s[C]=v[C];const y=a.Cj.renderUrl(p.pathname,s);h?this.history.replace(y,this.history.location.state):this.history.push(y,this.history.location.state)}push(v){this.history.push(v)}replace(v){this.history.replace(v)}reload(){const v=this.history.location.state?.routeReloadCounter;this.history.replace({...this.history.location,state:{routeReloadCounter:v?v+1:1}})}getLocation(){return this.history.location}getSearchObject(){return l(this.history.location.search)}update(v){if((0,o.d)("LocationSrv","update","partial, push or replace"),v.partial&&v.query)this.partial(v.query,v.partial);else{const h={pathname:v.path};v.query&&(h.search=a.Cj.toUrlParams(v.query)),v.replace?this.replace(h):this.push(h)}}}function l(E){let v=typeof E=="number"?String(E):E;return v.length>0?v.startsWith("?")?a.Cj.parseKeyValue(v.substring(1)):a.Cj.parseKeyValue(v):{}}let m=new u;const c=E=>{throw new Error("locationService can be only overriden in test environment")},d=(0,r.h)("Router"),f=d.logger;(0,i.x)("location",m,d)},4259:(G,A,e)=>{"use strict";e.d(A,{w:()=>o,x:()=>a});let n;function a(r){n=r}function o(){return n}},55471:(G,A,e)=>{"use strict";e.d(A,{AQ:()=>o,Iw:()=>i,Pl:()=>g,pD:()=>a});let n;const a=u=>{if(n)throw new Error("Runner should only be set when Grafana is starting.");n=u},o=()=>{if(!n)throw new Error("`createQueryRunner` can only be used after Grafana instance has started.");return n()};let r;function i(u){if(r)throw new Error("runRequest function should only be set once, when Grafana is starting.");r=u}function g(){if(!r)throw new Error("getRunRequest can only be used after Grafana instance has started.");return r}},2384:(G,A,e)=>{"use strict";e.d(A,{EK:()=>i,N$:()=>l,U5:()=>a,Xw:()=>u,hD:()=>o,md:()=>r});var n=e(74442);class a extends n.m{}a.type="refresh";class o extends n.R{}o.type="theme-changed";class r extends n.R{}r.type="time-range-updated";class i extends n.R{}i.type="copy-panel";let g;function u(m){g=m}function l(){return g}},85445:(G,A,e)=>{"use strict";e.d(A,{i:()=>r,jW:()=>o,kW:()=>n});function n(i){return typeof i=="object"&&i!==null&&"status"in i&&"data"in i}let a;const o=i=>{a=i},r=()=>a},81502:(G,A,e)=>{"use strict";e.d(A,{F:()=>o,w:()=>a});let n;function a(r){n=r}function o(){return n}},18362:(G,A,e)=>{"use strict";e.d(A,{V:()=>o,t:()=>a});let n;const a=r=>{n=r},o=()=>n},78942:(G,A,e)=>{"use strict";e.d(A,{T0:()=>n.T0,cA:()=>o,gj:()=>r});var n=e(28870);let a;const o=i=>{a=i},r=()=>a},26141:(G,A,e)=>{"use strict";e.d(A,{I4:()=>i,QK:()=>u,dj:()=>g,oI:()=>o});var n=e(19820);let a;function o(l){if(a)throw new Error("setPluginExtensionGetter() function should only be called once, when Grafana is starting.");a=l}function r(){if(!a)throw new Error("getPluginExtensionGetter() can only be used after the Grafana instance has started.");return a}const i=l=>r()(l),g=l=>{const{extensions:m}=i(l);return{extensions:m.filter(n.c)}},u=l=>{const{extensions:m}=i(l);return{extensions:m.filter(n.M)}}},19820:(G,A,e)=>{"use strict";e.d(A,{M:()=>o,c:()=>a});var n=e(73999);function a(r){return r?r.type===n.D.link&&("path"in r||"onClick"in r):!1}function o(r){return r?r.type===n.D.component&&"component"in r:!1}},12399:(G,A,e)=>{"use strict";e.d(A,{J:()=>o,l:()=>a});let n;const a=r=>{n=r},o=()=>n},32063:(G,A,e)=>{"use strict";e.d(A,{CK:()=>M,hr:()=>y,ZA:()=>b,QO:()=>S,Pr:()=>C,PI:()=>R,B9:()=>T});var n=e(21964),a=e(81838),o=e(59069),r=e(94290),i=e(85431),g=e(41466),u=e(52219),l=e(68898),m=e(79739),c=e(10066),d=e(90857),f=e(81502),E=e(78942),v=e(85445),h=e(28870),p=e(43071);function s(O){const{intervalMs:x,maxDataPoints:I,requestId:L,panelId:P,queryCachingTTL:N,range:{from:F,to:U}}=O;if(!O.targets.length)return(0,n.of)({data:[]});const j={intervalMs:x,maxDataPoints:I,queryCachingTTL:N,timeRange:{from:F.valueOf().toString(),to:U.valueOf().toString(),timezone:O.timezone}};return(0,v.i)().fetch({url:`/api/public/dashboards/${d.config.publicDashboardAccessToken}/panels/${P}/query`,method:"POST",data:j,requestId:L}).pipe((0,r.w)(V=>(0,n.of)((0,p.z1)(V,O.targets))),(0,i.K)(V=>(0,n.of)((0,p.z1)(V))))}const y=Object.freeze({type:"__expr__",uid:"__expr__",name:"Expression"});function C(O){if(!O)return!1;const x=typeof O=="string"?O:O.type;return x===y.type||x===y.name||x==="-100"}class b extends Error{constructor(x,I){super(x),this.details=I,this.name="HealthCheckError"}}var S=(O=>(O.Unknown="UNKNOWN",O.OK="OK",O.Error="ERROR",O))(S||{}),D=(O=>(O.PluginID="X-Plugin-Id",O.DatasourceUID="X-Datasource-Uid",O.DashboardUID="X-Dashboard-Uid",O.PanelID="X-Panel-Id",O.QueryGroupID="X-Query-Group-Id",O.FromExpression="X-Grafana-From-Expr",O.SkipQueryCache="X-Cache-Skip",O))(D||{});class M extends g.MF{constructor(x){super(x),this.streamOptionsProvider=R}query(x){if(d.config.publicDashboardAccessToken)return s(x);const{intervalMs:I,maxDataPoints:L,queryCachingTTL:P,range:N,requestId:F,hideFromInspector:U=!1}=x;let j=x.targets;this.filterQuery&&(j=j.filter(q=>this.filterQuery(q)));let V=!1;const _=new Set,H=new Set,z=j.map(q=>{let X=this.getRef(),te=this.id,se=!0;if(C(q.datasource))return V=!0,{...q,datasource:y};if(q.datasource){const de=(0,f.F)().getInstanceSettings(q.datasource,x.scopedVars);if(!de)throw new Error(`Unknown Datasource: ${JSON.stringify(q.datasource)}`);const re=de.rawRef??(0,u.iU)(de),fe=de.id;(re.uid!==X.uid||te!==fe)&&(X=re,te=fe,se=!1)}return X.type?.length&&_.add(X.type),X.uid?.length&&H.add(X.uid),{...se?this.applyTemplateVariables(q,x.scopedVars,x.filters):q,datasource:X,datasourceId:te,intervalMs:I,maxDataPoints:L,queryCachingTTL:P}});if(!z.length)return(0,n.of)({data:[]});const K={queries:z,from:N?.from.valueOf().toString(),to:N?.to.valueOf().toString()};if(d.config.featureToggles.queryOverLive)return(0,E.gj)().getQueryData({request:x,body:K});const Y={};Y["X-Plugin-Id"]=Array.from(_).join(", "),Y["X-Datasource-Uid"]=Array.from(H).join(", ");let k="/api/ds/query?ds_type="+this.type;return V&&(Y["X-Grafana-From-Expr"]="true",k+="&expression=true"),F&&(k+=`&requestId=${F}`),x.dashboardUID&&(Y["X-Dashboard-Uid"]=x.dashboardUID),x.panelId&&(Y["X-Panel-Id"]=`${x.panelId}`),x.queryGroupId&&(Y["X-Query-Group-Id"]=`${x.queryGroupId}`),x.skipQueryCache&&(Y["X-Cache-Skip"]="true"),(0,v.i)().fetch({url:k,method:"POST",data:K,requestId:F,hideFromInspector:U,headers:Y}).pipe((0,r.w)(q=>{const X=(0,p.z1)(q,z);return X.data?.length&&X.data.find(te=>te.meta?.channel)?T(X,x,this.streamOptionsProvider):(0,n.of)(X)}),(0,i.K)(q=>(0,n.of)((0,p.z1)(q))))}getRequestHeaders(){const x={};return x["X-Plugin-Id"]=this.type,x["X-Datasource-Uid"]=this.uid,x}interpolateVariablesInQueries(x,I,L){return x.map(P=>this.applyTemplateVariables(P,I,L))}applyTemplateVariables(x,I,L){return x}async getResource(x,I,L){const P=this.getRequestHeaders();return(await(0,a.n)((0,v.i)().fetch({...L,method:"GET",headers:L?.headers?{...L.headers,...P}:P,params:I??L?.params,url:`/api/datasources/uid/${this.uid}/resources/${x}`}))).data}async postResource(x,I,L){const P=this.getRequestHeaders();return(await(0,a.n)((0,v.i)().fetch({...L,method:"POST",headers:L?.headers?{...L.headers,...P}:P,data:I??{...I},url:`/api/datasources/uid/${this.uid}/resources/${x}`}))).data}async callHealthCheck(){return(0,a.n)((0,v.i)().fetch({method:"GET",url:`/api/datasources/uid/${this.uid}/health`,showErrorAlert:!1,headers:this.getRequestHeaders()})).then(x=>x.data).catch(x=>x.data)}async testDatasource(){return this.callHealthCheck().then(x=>x.status==="OK"?{status:"success",message:x.message}:Promise.reject({status:"error",message:x.message,error:new b(x.message,x.details)}))}}function T(O,x,I){const L=(0,E.gj)();if(!L)return(0,n.of)(O);const P=[],N=[];for(const F of O.data){const U=(0,l.H7)(F.meta?.channel);if(U){const j=F;N.push(L.getDataStream({addr:U,buffer:I(x,j),frame:(0,m.Y)(F)}))}else P.push(F)}return P.length&&N.push((0,n.of)({...O,data:P})),N.length===1?N[0]:(0,o.T)(...N)}const R=(O,x)=>{const I={maxLength:O.maxDataPoints??500,action:h.T0.Append};return O.rangeRaw?.to==="now"&&(I.maxDelta=O.range.to.valueOf()-O.range.from.valueOf()),I};M=(0,c.s)(M)},11855:(G,A,e)=>{"use strict";e.d(A,{v:()=>a});var n=e(90857);const a=o=>{const{enabledFeatures:r}=n.config.licenseInfo;return r&&r[o]}},45465:(G,A,e)=>{"use strict";e.d(A,{H:()=>u,KE:()=>i,PN:()=>r,o7:()=>g});var n=e(74091),a=e(54574),o=e(90857);function r(l,m){o.config.grafanaJavascriptAgent.enabled&&n.s.api.pushLog([l],{level:a.in.INFO,context:m})}function i(l,m){o.config.grafanaJavascriptAgent.enabled&&n.s.api.pushLog([l],{level:a.in.WARN,context:m})}function g(l,m){o.config.grafanaJavascriptAgent.enabled&&n.s.api.pushLog([l],{level:a.in.DEBUG,context:m})}function u(l,m){o.config.grafanaJavascriptAgent.enabled&&n.s.api.pushError(l)}},65362:(G,A,e)=>{"use strict";e.d(A,{Qf:()=>d,bP:()=>f,i3:()=>l,iS:()=>m});var n=e(84349),a=e.n(n),o=e(11374),r=e.n(o),i=e(70079),g=e.n(i),u=e(90857);const l=window.System;async function m(E){try{const v=u.config.bootData.user.theme==="light"?E.light:E.dark;return l.import(v)}catch(v){console.error(v)}}let c;function d(E){if(c)throw new Error("pluginImportUtils should only be set once, when Grafana is starting.");c=E}function f(){if(!c)throw new Error("pluginImportUtils can only be used after Grafana instance has started.");return c}window.__grafana_amd_define=window.define,window.define=void 0},43071:(G,A,e)=>{"use strict";e.d(A,{S9:()=>d,z1:()=>u});var n=e(23757),a=e(79739),o=e(45878),r=e(58309),i=e(4479);const g={severity:"info",text:"Cached response"};function u(f,E){const v={data:[],state:n.Gu.Done},h="traceId"in f?f.traceId:void 0;h!=null&&(v.traceIds=[h]);const p=f;if(p.data?.results){const s=p.data.results,y=E?.length?E.map(S=>S.refId):Object.keys(s),C=l(p),b=[];for(const S of y){const D=s[S];D&&(D.refId=S,b.push(D))}for(const S of b){if(S.error){const D={refId:S.refId,message:S.error,status:S.status};h!=null&&(D.traceId=h),v.error||(v.error={...D}),v.errors?v.errors.push({...D}):v.errors=[{...D}],v.state=n.Gu.Error}if(S.frames?.length){for(let D of S.frames){C&&(D=m(D));const M=(0,a.vP)(D);M.refId||(M.refId=S.refId),v.data.push(M)}continue}if(S.series?.length)for(const D of S.series)D.refId||(D.refId=S.refId),v.data.push((0,o.g0)(D));if(S.tables?.length)for(const D of S.tables)D.refId||(D.refId=S.refId),v.data.push((0,o.g0)(D))}}return p.status&&p.status!==200&&(v.state!==n.Gu.Error&&(v.state=n.Gu.Error),v.error||(v.error=(0,i.P)(f))),v}function l(f){const E=f?.headers;return!E||!E.get?!1:E.get("X-Cache")==="HIT"}function m(f){return{...f,schema:{...f.schema,fields:[...f.schema?.fields??[]],meta:{...f.schema?.meta,notices:[...f.schema?.meta?.notices??[],g],isCachedResponse:!0}}}}function c(f){const E=u(f);if(E.error?.data?.message)return{status:"error",message:E.error.data.message,details:E.error?.data?.error?{message:E.error.data.error}:void 0};if(E.error?.refId&&E.error?.message)return{status:"error",message:E.error.message};throw f}function d(f){if(!f||!f.length)return[];const E=[];let v=f.fields.find(h=>h.type===r.fS.string);if(v||(v=f.fields.find(h=>h.type!==r.fS.time)),v)for(let h=0;h<v.values.length;h++)E.push({text:""+v.values[h]});return E}},49199:(G,A,e)=>{"use strict";e.d(A,{b:()=>m});var n=e(66681),a=e(85960),o=e(92369),r=e(47257),i=e(29165),g=e(97666),u=e(61353),l=e(40377);const m=a.forwardRef(({title:f,onRemove:E,children:v,buttonContent:h,elevated:p,bottomSpacing:s,topSpacing:y,className:C,severity:b="error",...S},D)=>{const M=(0,r.l4)(),R=d(M,b,!!f,p,s,y),O={error:"alert",warning:"alert",info:"status",success:"status"},x=S.role||O[b],I=S["aria-label"]||f;return a.createElement("div",{ref:D,className:(0,n.cx)(R.wrapper,C),"data-testid":o.wl.components.Alert.alertV2(b),role:x,"aria-label":I,...S},a.createElement(u.x,{display:"flex",backgroundColor:b,borderRadius:"default",paddingY:1,paddingX:2,borderStyle:"solid",borderColor:b,alignItems:"stretch",boxShadow:p?"z3":void 0},a.createElement(u.x,{paddingTop:1,paddingRight:2},a.createElement("div",{className:R.icon},a.createElement(g.J,{size:"xl",name:c(b)}))),a.createElement(u.x,{paddingY:1,grow:1},a.createElement(l.x,{weight:"medium"},f),v&&a.createElement("div",{className:R.content},v)),E&&!h&&a.createElement("div",{className:R.close},a.createElement(i.zx,{"aria-label":"Close alert",icon:"times",onClick:E,type:"button",fill:"text",variant:"secondary"})),E&&h&&a.createElement(u.x,{marginLeft:1,display:"flex",alignItems:"center"},a.createElement(i.zx,{"aria-label":"Close alert",variant:"secondary",onClick:E,type:"button"},h))))});m.displayName="Alert";const c=f=>{switch(f){case"error":return"exclamation-circle";case"warning":return"exclamation-triangle";case"info":return"info-circle";case"success":return"check"}},d=(f,E,v,h,p,s)=>{const y=f.colors[E];return{wrapper:(0,n.css)({flexGrow:1,marginBottom:f.spacing(p??2),marginTop:f.spacing(s??0),position:"relative","&:before":{content:'""',position:"absolute",top:0,left:0,bottom:0,right:0,background:f.colors.background.primary,zIndex:-1}}),icon:(0,n.css)({color:y.text}),content:(0,n.css)({paddingTop:v?f.spacing(.5):0,maxHeight:"50vh",overflowY:"auto"}),close:(0,n.css)({position:"relative",color:f.colors.text.secondary,background:"none",display:"flex",top:"-6px",right:"-14px"})}}},99073:(G,A,e)=>{"use strict";e.d(A,{h:()=>E});var n=e(66681),a=e(56375),o=e(85960),r=e(47257),i=e(20519),g=e(78112);const u=o.memo(()=>{const h=(0,r.wW)(l);return o.createElement("div",{className:h.ellipsis},o.createElement("span",{className:h.firstDot},"."),o.createElement("span",{className:h.secondDot},"."),o.createElement("span",{className:h.thirdDot},"."))});u.displayName="EllipsisAnimated";const l=()=>({ellipsis:(0,n.css)({display:"inline"}),firstDot:(0,n.css)({animation:`${m} 2s linear infinite`}),secondDot:(0,n.css)({animation:`${c} 2s linear infinite`}),thirdDot:(0,n.css)({animation:`${d} 2s linear infinite`})}),m=(0,n.keyframes)`
  0% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,c=(0,n.keyframes)`
  0% {
    opacity: 0;
  }
  21% {
    opacity: 0.5;
  }
  22% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,d=(0,n.keyframes)`
  0% {
    opacity: 0;
  }
  43% {
    opacity: 0.5;
  }
  44% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,f=2*1e3;function E(h){const{invalid:p,loading:s,onFinishChange:y,saveErrorMessage:C="Error saving this value",error:b,children:S,disabled:D,...M}=h,[T,R]=o.useState({isLoading:!1,showSuccess:!1,showError:p}),O=(0,o.useRef)(null);o.useEffect(()=>{let N;if(T.showSuccess){const F=T.showError?0:f;N=setTimeout(()=>{R({...T,showSuccess:!1})},F)}return()=>{window.clearTimeout(N)}},[T]);const x=(0,o.useCallback)(N=>{p||(R({...T,isLoading:!0,showSuccess:!1}),y(N).then(()=>{R({isLoading:!1,showSuccess:!0,showError:!1})}).catch(()=>{R({...T,isLoading:!1,showError:!0})}))},[p,T,y]),I=(0,o.useMemo)(()=>(0,a.debounce)(x,600,{leading:!1}),[x]),L=p||T.showError||void 0,P=(0,r.wW)(v);return o.createElement(o.Fragment,null,o.createElement(i.g,{...M,loading:s||void 0,invalid:L,disabled:D,error:b||T.showError&&C,ref:O,className:P.widthFitContent},o.cloneElement(S(N=>{I(N)}))),T.isLoading&&o.createElement(g.K,{referenceElement:O.current,placement:"right",alternativePlacement:"bottom"},"Saving ",o.createElement(u,null)),T.showSuccess&&o.createElement(g.K,{suffixIcon:"check",referenceElement:O.current,placement:"right",alternativePlacement:"bottom"},"Saved!"))}E.displayName="AutoSaveField";const v=()=>({widthFitContent:(0,n.css)({width:"fit-content"})})},67192:(G,A,e)=>{"use strict";e.d(A,{C:()=>c});var n=e(66681),a=e(85960),o=e(34785),r=e(19737),i=e(47257),g=e(97666),u=e(14607);const l=a.memo(({icon:E,color:v,text:h,tooltip:p,className:s,...y})=>{const C=(0,i.wW)(f,v),b=a.createElement("div",{className:(0,n.cx)(C.wrapper,s),...y},E&&a.createElement(g.J,{name:E,size:"sm"}),h);return p?a.createElement(u.u,{content:p,placement:"auto"},b):b});l.displayName="Badge";const m=()=>{const E=(0,i.wW)(d);return a.createElement(o.Z,{width:60,height:22,containerClassName:E.container})},c=Object.assign(l,{Skeleton:m});c.Skeleton=m;const d=()=>({container:(0,n.css)({lineHeight:1})}),f=(E,v)=>{let h=E.visualization.getColorByName(v),p="",s="",y="";return E.isDark?(s=(0,r.Z)(h).setAlpha(.15).toString(),p=(0,r.Z)(h).setAlpha(.25).toString(),y=(0,r.Z)(h).lighten(15).toString()):(s=(0,r.Z)(h).setAlpha(.15).toString(),p=(0,r.Z)(h).setAlpha(.25).toString(),y=(0,r.Z)(h).darken(20).toString()),{wrapper:(0,n.css)({display:"inline-flex",padding:"1px 4px",borderRadius:E.shape.radius.default,background:s,border:`1px solid ${p}`,color:y,fontWeight:E.typography.fontWeightRegular,gap:"2px",fontSize:E.typography.bodySmall.fontSize,lineHeight:E.typography.bodySmall.lineHeight,alignItems:"center"})}}},70265:(G,A,e)=>{"use strict";e.d(A,{xf:()=>S});var n=e(66681),a=e(85960),o=e(19737),r=e(94864),i=e(11795),g=e(37634),u=e(1930),l=e(14345),m=e(73859),c=e(92369),d=e(1713),f=e(48461),E=e(29165),v=e(67297);const h=18,p=50,s=150,y=1.5,C=1,b=10;class S extends a.PureComponent{render(){const{onClick:U,className:j,theme:V}=this.props,{title:_}=this.props.value,H=T(this.props);return U?a.createElement("button",{type:"button",style:H.wrapper,onClick:U,className:(0,n.cx)((0,E.gN)(V),j)},a.createElement("div",{style:H.title},_),this.renderBarAndValue()):a.createElement("div",{style:H.wrapper,className:j},_&&a.createElement("div",{style:H.title},_),this.renderBarAndValue())}renderBarAndValue(){switch(this.props.displayMode){case"lcd":return this.renderRetroBars();case"basic":case"gradient":default:return this.renderBasicAndGradientBars()}}renderBasicAndGradientBars(){const{value:U,showUnfilled:j,valueDisplayMode:V}=this.props,_=I(this.props);return a.createElement("div",{style:_.wrapper},V!==d.M8.Hidden&&a.createElement(v.W,{"data-testid":c.wl.components.Panels.Visualization.BarGauge.valueV2,value:U,style:_.value}),j&&a.createElement("div",{style:_.emptyBar}),a.createElement("div",{style:_.bar}))}renderRetroBars(){const{display:U,field:j,value:V,itemSpacing:_,alignmentFactors:H,orientation:z,lcdCellWidth:K,text:Y,valueDisplayMode:k,theme:q}=this.props,{valueHeight:X,valueWidth:te,maxBarHeight:se,maxBarWidth:de,wrapperWidth:re,wrapperHeight:fe}=R(this.props),ie=j.min??r.Hx,oe=j.max??r.Z3,ue=D(z),me=oe-ie,ge=ue?se:de,Ue=_,De=Math.floor(ge/K),Pe=Math.floor((ge-Ue*De)/De),ye=P(this.props),nt=N(H||V,ye,te,X,z,Y),ct={width:`${re}px`,height:`${fe}px`,display:"flex"};ue?(ct.flexDirection="column-reverse",ct.alignItems="center"):(ct.flexDirection="row",ct.alignItems="center",nt.justifyContent="flex-end");const he=[];for(let xe=0;xe<De;xe++){const Me=ie+me/De*xe,He=O(Me,V,U),Ve={borderRadius:q.shape.radius.default};He.isLit?Ve.backgroundImage=`radial-gradient(${He.background} 10%, ${He.backgroundShade})`:Ve.backgroundColor=He.background,ue?(Ve.height=`${Pe}px`,Ve.width=`${de}px`,Ve.marginTop=`${Ue}px`):(Ve.width=`${Pe}px`,Ve.height=`${se}px`,Ve.marginRight=`${Ue}px`),he.push(a.createElement("div",{key:xe.toString(),style:Ve}))}return a.createElement("div",{style:ct},he,k!==d.M8.Hidden&&a.createElement(v.W,{"data-testid":c.wl.components.Panels.Visualization.BarGauge.valueV2,value:V,style:nt}))}}S.defaultProps={lcdCellWidth:12,value:{text:"100",numeric:100},displayMode:d.QH.Gradient,orientation:i.wm.Horizontal,field:{min:0,max:100,thresholds:{mode:g.H.Absolute,steps:[]}},itemSpacing:8,showUnfilled:!0};function D(F){return F===i.wm.Vertical}function M(F){const{height:U,width:j,alignmentFactors:V,orientation:_,text:H,namePlacement:z}=F,K=V?V.title:F.value.title;if(!K)return{fontSize:0,width:0,height:0,placement:"above"};if(D(_)){const de=H?.titleSize??14;return{fontSize:de,width:j,height:de*y,placement:"below"}}if(U>40&&z===d.L3.Auto||z===d.L3.Top){if(H?.titleSize)return{fontSize:H?.titleSize,width:0,height:H.titleSize*y,placement:"above"};const re=Math.max(Math.min(U*.45,p),17);return{fontSize:re/y,width:0,height:re,placement:"above"}}const X=Math.max(U*.6,h)/y,te=(0,f.X1)(K,X),se=Math.min(te.width+15,j*.4);return{fontSize:H?.titleSize??X,height:0,width:se,placement:"left"}}function T(F){const U={display:"flex",overflow:"hidden",width:"100%"},j=M(F),V={fontSize:`${j.fontSize}px`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",alignItems:"center",alignSelf:"center"};return D(F.orientation)?(U.flexDirection="column-reverse",V.textAlign="center"):j.placement==="above"?U.flexDirection="column":(U.flexDirection="row",V.width=`${j.width}px`,V.textAlign="right",V.paddingRight="10px"),{wrapper:U,title:V}}function R(F){const{height:U,width:j,orientation:V,text:_,alignmentFactors:H,valueDisplayMode:z}=F,K=M(F),Y=H??F.value,k=(0,u.zc)(Y);let q=0,X=0,te=0,se=0,de=0,re=0;const fe=_?.valueSize??Math.max(K.fontSize,12),oe=(0,f.X1)(k,fe).width+b*2;return D(V)?(_?.valueSize?te=_.valueSize*C:te=Math.min(Math.max(U*.1,h),p),se=j,z===d.M8.Hidden&&(te=0,se=0),q=U-(K.height+te),X=j,de=j,re=U-K.height):(z===d.M8.Hidden?(te=0,se=0):(te=U-K.height,se=Math.max(Math.min(j*.2,s),oe)),q=U-K.height,X=j-se-K.width,K.placement==="above"?(de=j,re=U-K.height):(de=j-K.width,re=U)),{valueWidth:se,valueHeight:te,maxBarWidth:X,maxBarHeight:q,wrapperHeight:re,wrapperWidth:de}}function O(F,U,j){if(F===null)return{background:l.R,border:l.R};const V=j?j(F).color:null;return V?U===null||isNaN(U.numeric)||F!==null&&F>U.numeric?{background:(0,o.Z)(V).setAlpha(.18).toRgbString(),border:"transparent",isLit:!1}:{background:(0,o.Z)(V).setAlpha(.95).toRgbString(),backgroundShade:(0,o.Z)(V).setAlpha(.55).toRgbString(),border:(0,o.Z)(V).setAlpha(.9).toRgbString(),isLit:!0}:{background:l.R,border:l.R}}function x(F,U,j){const V=Math.min((F-U)/(j-U),1);return isNaN(V)?0:V}function I(F){const{displayMode:U,field:j,value:V,alignmentFactors:_,orientation:H,theme:z,text:K}=F,{valueWidth:Y,valueHeight:k,maxBarHeight:q,maxBarWidth:X}=R(F),te=j.min??r.Hx,se=j.max??r.Z3,de=x(V.numeric,te,se),re=P(F),fe=V.color??l.R,oe=N(_||V,re,Y,k,H,K),ue=U==="basic",me={display:"flex",flexGrow:1},ge={borderRadius:z.shape.radius.default,position:"relative",zIndex:1},Ue={background:z.colors.background.secondary,flexGrow:1,display:"flex",borderRadius:z.shape.radius.default,position:"relative"};if(D(H)){const De=Math.max(de*q,1);me.flexDirection="column",me.justifyContent="flex-end",ge.transition="height 1s",ge.height=`${De}px`,ge.width=`${X}px`,Ue.bottom="-3px",Ue.width=`${Y}px`,ue?(ge.background=`${(0,o.Z)(fe).setAlpha(.35).toRgbString()}`,ge.borderTop=`2px solid ${fe}`):ge.background=L(F,q)}else{const De=Math.max(de*X,1);me.flexDirection="row-reverse",me.justifyContent="flex-end",me.alignItems="stretch",ge.transition="width 1s",ge.height=`${q}px`,ge.width=`${De}px`,Ue.left="-3px",Ue.height=`${k}px`,ue?(ge.background=`${(0,o.Z)(fe).setAlpha(.35).toRgbString()}`,ge.borderRight=`2px solid ${fe}`):ge.background=L(F,X)}return{wrapper:me,bar:ge,value:oe,emptyBar:Ue}}function L(F,U){const{field:j,value:V,orientation:_,theme:H}=F,z=D(_)?"0deg":"90deg",K=j.min,Y=j.max;let k="",q=0,X=(0,m.QY)(j.color?.mode);if(X.id===l.S.Thresholds){const te=j.thresholds;for(let se=0;se<te.steps.length;se++){const de=te.steps[se],re=F.theme.visualization.getColorByName(de.color),fe=te.mode===g.H.Percentage?de.value/100:x(de.value,K,Y),ie=fe*U,oe=Math.round(ie-(ie-q)/2),ue=te.mode===g.H.Percentage?K+(Y-K)*fe:de.value;if(k==="")k=`linear-gradient(${z}, ${re}, ${re}`;else{if(V.numeric<ue)break;q=ie,k+=` ${oe}px, ${re}`}}return k+")"}if(X.isContinuous&&X.getColors){const te=X.getColors(H);for(let se=0;se<te.length;se++){const de=te[se];if(k==="")k=`linear-gradient(${z}, ${de} 0px`;else{const fe=se/(te.length-1)*U;k+=`, ${de} ${fe}px`}}return k+")"}return V.color??l.R}function P(F){if(F.valueDisplayMode==="text")return F.theme.colors.text.primary;const{value:U}=F;return U.color?U.color:l.R}function N(F,U,j,V,_,H){const z={color:U,height:`${V}px`,width:`${j}px`,display:"flex",alignItems:"center",lineHeight:C};let K=j;const Y=(0,u.zc)(F);return D(_)?(z.fontSize=H?.valueSize??(0,f.MX)(Y,K,V,C),z.justifyContent="center"):(z.fontSize=H?.valueSize??(0,f.MX)(Y,K-b*2,V,C),z.justifyContent="flex-end",z.paddingLeft=`${b}px`,z.paddingRight=`${b}px`,K-=b),z}},72264:(G,A,e)=>{"use strict";e.d(A,{w6:()=>I,pc:()=>T,IG:()=>R,ap:()=>O,jG:()=>x});var n=e(66681),a=e(85960),o=e(29165),r=e(67297),i=e(19737),g=e(11795),u=e(58309),l=e(1930),m=e(1713),c=e(42309),d=e(48461),f=e(7881);const E=1.2,v=30,h=500;class p{constructor(P){this.props=P;const{width:N,height:F,value:U,text:j}=P;this.valueColor=U.color??"gray",this.panelPadding=F>100?12:8,this.textValues=M(P),this.justifyCenter=D(P.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=0,this.valueFontSize=0,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=N-this.panelPadding*2,this.maxTextHeight=F-this.panelPadding*2,j&&(j.titleSize&&(this.titleFontSize=j.titleSize,this.titleToAlignTo=void 0),j.valueSize&&(this.valueFontSize=j.valueSize,this.valueToAlignTo=""))}getTitleStyles(){const P={fontSize:`${this.titleFontSize}px`,lineHeight:E};return this.props.parentOrientation===g.wm.Horizontal&&this.justifyCenter&&(P.paddingRight="0.75ch"),(this.props.colorMode===T.Background||this.props.colorMode===T.BackgroundSolid)&&(P.color=(0,c.bM)(this.valueColor,this.props.theme.isDark)),P}getValueStyles(){const P={fontSize:this.valueFontSize,fontWeight:h,lineHeight:E,position:"relative",zIndex:1};switch(this.justifyCenter&&(P.textAlign="center"),this.props.colorMode){case T.Value:P.color=this.valueColor;break;case T.Background:case T.BackgroundSolid:P.color=(0,c.bM)(this.valueColor,this.props.theme.isDark);break;case T.None:P.color=this.props.theme.colors.text.primary;break}return P}getValueAndTitleContainerStyles(){const P={display:"flex"};return this.justifyCenter&&(P.alignItems="center",P.justifyContent="center",P.flexGrow=1),P}getPanelStyles(){const{width:P,height:N,theme:F,colorMode:U}=this.props,j={width:`${P}px`,height:`${N}px`,padding:`${this.panelPadding}px`,borderRadius:F.shape.radius.default,position:"relative",display:"flex"},V=F.isDark?1:-.7;switch(U){case T.Background:const _=(0,i.Z)(this.valueColor).darken(15*V).spin(8).toRgbString(),H=(0,i.Z)(this.valueColor).darken(5*V).spin(-8).toRgbString();j.background=`linear-gradient(120deg, ${_}, ${H})`;break;case T.BackgroundSolid:j.background=(0,i.Z)(this.valueColor).toString();break;case T.Value:j.background="transparent";break}return this.justifyCenter&&(j.alignItems="center",j.flexDirection="row"),j}renderChart(){const{sparkline:P,colorMode:N}=this.props;if(!P||P.y?.type!==u.fS.number)return null;let F,U;switch(N){case T.Background:case T.BackgroundSolid:F="rgba(255,255,255,0.4)",U=(0,i.Z)(this.valueColor).brighten(40).toRgbString();break;case T.None:case T.Value:default:U=this.valueColor,F=(0,i.Z)(this.valueColor).setAlpha(.2).toRgbString();break}const j={custom:{drawStyle:m.l8.Line,lineWidth:1,fillColor:F,lineColor:U}};return a.createElement("div",{style:this.getChartStyles()},a.createElement(f.b,{height:this.chartHeight,width:this.chartWidth,sparkline:P,config:j,theme:this.props.theme}))}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class s extends p{constructor(P){super(P);const N=this.titleToAlignTo?.length?.3:1;this.valueToAlignTo.length&&(this.valueFontSize=(0,d.MX)(this.valueToAlignTo,this.maxTextWidth*N,this.maxTextHeight,E,void 0,h)),this.titleToAlignTo?.length&&(this.titleFontSize=(0,d.MX)(this.titleToAlignTo,this.maxTextWidth*.6,this.maxTextHeight,E,v),this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const P=super.getValueAndTitleContainerStyles();return P.flexDirection="row",P.alignItems="center",P.flexGrow=1,this.justifyCenter||(P.justifyContent="space-between"),P}renderChart(){return null}getPanelStyles(){const P=super.getPanelStyles();return P.alignItems="center",P}}class y extends p{constructor(P){super(P);const{width:N,height:F}=P,U=.5,j=.6,V=1-j,_=.4;this.chartWidth=N,this.chartHeight=F*U,this.titleToAlignTo?.length&&(this.titleFontSize=(0,d.MX)(this.titleToAlignTo,this.maxTextWidth*j,this.maxTextHeight*_,E,v)),this.valueToAlignTo.length&&(this.valueFontSize=(0,d.MX)(this.valueToAlignTo,this.maxTextWidth*V,this.maxTextHeight*U,E,void 0,h))}getValueAndTitleContainerStyles(){const P=super.getValueAndTitleContainerStyles();return P.flexDirection="row",P.flexGrow=1,this.justifyCenter||(P.justifyContent="space-between"),P}getPanelStyles(){const P=super.getPanelStyles();return P.flexDirection="row",P.justifyContent="space-between",P}}class C extends p{constructor(P){super(P);const{width:N,height:F}=P,U=.15,j=.25;let V=0;this.chartHeight=F*j,this.chartWidth=N,this.titleToAlignTo?.length&&(this.titleFontSize=(0,d.MX)(this.titleToAlignTo,this.maxTextWidth,F*U,E,v),V=this.titleFontSize*E),this.valueToAlignTo.length&&(this.valueFontSize=(0,d.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-V,E,void 0,h)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize)),this.chartHeight=F-this.titleFontSize*E-this.valueFontSize*E}getValueAndTitleContainerStyles(){const P=super.getValueAndTitleContainerStyles();return P.flexDirection="column",P.justifyContent="center",P}getPanelStyles(){const P=super.getPanelStyles();return P.flexDirection="column",P}}class b extends p{constructor(P){super(P);const{height:N}=P,F=.15;let U=0;this.titleToAlignTo?.length&&(this.titleFontSize=(0,d.MX)(this.titleToAlignTo,this.maxTextWidth,N*F,E,v),U=this.titleFontSize*E),this.valueToAlignTo.length&&(this.valueFontSize=(0,d.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-U,E,void 0,h)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const P=super.getValueAndTitleContainerStyles();return P.flexDirection="column",P.flexGrow=1,P}renderChart(){return null}getPanelStyles(){const P=super.getPanelStyles();return P.alignItems="center",P}}function S(L){const{width:P,height:N,sparkline:F}=L;return P/N>2.5&&!L.disableWideLayout?N>50&&F&&F.y.values.length>1?new y(L):new s(L):N>100&&F&&F.y.values.length>1?new C(L):new b(L)}function D(L,P){return L===O.Center?!0:(P??"").length===0}function M(L){const{value:P,alignmentFactors:N,count:F}=L;let{textMode:U}=L;const j=N?N.title:P.title,V=(0,l.zc)(N||P);switch(U===x.Auto&&(F??1)===1&&(U=x.Value),U){case x.Name:return{...P,title:void 0,prefix:void 0,suffix:void 0,text:P.title||"",titleToAlignTo:void 0,valueToAlignTo:j??"",tooltip:(0,l.zc)(P)};case x.Value:return{...P,title:void 0,titleToAlignTo:void 0,valueToAlignTo:V,tooltip:P.title};case x.None:return{numeric:P.numeric,color:P.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${P.title}
Value: ${(0,l.zc)(P)}`};case x.ValueAndName:default:return{...P,titleToAlignTo:j,valueToAlignTo:V}}}var T=(L=>(L.Background="background",L.BackgroundSolid="background_solid",L.None="none",L.Value="value",L))(T||{}),R=(L=>(L.None="none",L.Line="line",L.Area="area",L))(R||{}),O=(L=>(L.Auto="auto",L.Center="center",L))(O||{}),x=(L=>(L.Auto="auto",L.Value="value",L.ValueAndName="value_and_name",L.Name="name",L.None="none",L))(x||{});class I extends a.PureComponent{render(){const{onClick:P,className:N,hasLinks:F,theme:U}=this.props,j=S(this.props),V=j.getPanelStyles(),_=j.getValueAndTitleContainerStyles(),H=j.getValueStyles(),z=j.getTitleStyles(),K=j.textValues,Y=F?void 0:K.tooltip;return P?a.createElement("button",{type:"button",className:(0,n.cx)((0,o.gN)(U),N),style:V,onClick:P,title:Y},a.createElement("div",{style:_},K.title&&a.createElement("div",{style:z},K.title),a.createElement(r.W,{value:K,style:H})),j.renderChart()):a.createElement("div",{className:N,style:V,title:Y},a.createElement("div",{style:_},K.title&&a.createElement("div",{style:z},K.title),a.createElement(r.W,{value:K,style:H})),j.renderChart())}}I.defaultProps={justifyMode:"auto"}},11389:(G,A,e)=>{"use strict";e.d(A,{_:()=>u});var n=e(66681),a=e(85960),o=e(83795),r=e.n(o),i=e(47257),g=e(61065);const u=(0,a.forwardRef)(({name:m,value:c,hidden:d,facets:f,onClick:E,className:v,loading:h,searchTerm:p,active:s,style:y,title:C,highlightParts:b,...S},D)=>{const M=(0,i.l4)(),T=l(M),R=p?[p]:[],O=(0,a.useCallback)(I=>{E&&!d&&E(m,c,I)},[E,m,d,c]);let x=c||m;return f&&(x=`${x} (${f})`),a.createElement("button",{key:x,ref:D,onClick:O,style:y,title:C||x,type:"button",role:"option","aria-selected":!!s,className:(0,n.cx)(T.base,s&&T.active,h&&T.loading,d&&T.hidden,v,E&&!d&&T.hover),...S},b!==void 0?a.createElement(g.H,{text:x,highlightClassName:T.matchHighLight,highlightParts:b}):a.createElement(r(),{textToHighlight:x,searchWords:R,autoEscape:!0,highlightClassName:T.matchHighLight}))});u.displayName="Label";const l=m=>({base:(0,n.css)({display:"inline-block",cursor:"pointer",fontSize:m.typography.size.sm,lineHeight:m.typography.bodySmall.lineHeight,backgroundColor:m.colors.background.secondary,color:m.colors.text.primary,whiteSpace:"nowrap",textShadow:"none",padding:m.spacing(.5),borderRadius:m.shape.radius.default,border:"none",marginRight:m.spacing(1),marginBottom:m.spacing(.5)}),loading:(0,n.css)({fontWeight:m.typography.fontWeightMedium,backgroundColor:m.colors.primary.shade,color:m.colors.text.primary,animation:"pulse 3s ease-out 0s infinite normal forwards","@keyframes pulse":{"0%":{color:m.colors.text.primary},"50%":{color:m.colors.text.secondary},"100%":{color:m.colors.text.disabled}}}),active:(0,n.css)({fontWeight:m.typography.fontWeightMedium,backgroundColor:m.colors.primary.main,color:m.colors.primary.contrastText}),matchHighLight:(0,n.css)({background:"inherit",color:m.components.textHighlight.text,backgroundColor:m.components.textHighlight.background}),hidden:(0,n.css)({opacity:.6,cursor:"default",border:"1px solid transparent"}),hover:(0,n.css)({["&:hover"]:{opacity:.85,cursor:"pointer"}})})},29165:(G,A,e)=>{"use strict";e.d(A,{Qj:()=>d,_7:()=>s,c9:()=>h,fW:()=>f,gN:()=>p,zx:()=>c});var n=e(66681),a=e(85960),o=e(47257),r=e(55182),i=e(18151),g=e(97666),u=e(14607);const l=null,m=null,c=a.forwardRef(({variant:y="primary",size:C="md",fill:b="solid",icon:S,fullWidth:D,children:M,className:T,type:R="button",tooltip:O,tooltipPlacement:x,...I},L)=>{const P=(0,o.l4)(),N=f({theme:P,size:C,variant:y,fill:b,fullWidth:D,iconOnly:!M}),F=a.createElement("button",{className:(0,n.cx)(N.button,T),type:R,...I,ref:O?void 0:L},S&&a.createElement(g.J,{name:S,size:C,className:N.icon}),M&&a.createElement("span",{className:N.content},M));return O?a.createElement(u.u,{ref:L,content:O,placement:x},F):F});c.displayName="Button";const d=a.forwardRef(({variant:y="primary",size:C="md",fill:b="solid",icon:S,fullWidth:D,children:M,className:T,onBlur:R,onFocus:O,disabled:x,tooltip:I,tooltipPlacement:L,...P},N)=>{const F=(0,o.l4)(),U=f({theme:F,fullWidth:D,size:C,variant:y,fill:b,iconOnly:!M}),j=(0,n.cx)(U.button,{[(0,n.css)(U.disabled,{pointerEvents:"none"})]:x},T),V=a.createElement("a",{className:j,...P,tabIndex:x?-1:0,"aria-disabled":x,ref:I?void 0:N},S&&a.createElement(g.J,{name:S,size:C,className:U.icon}),M&&a.createElement("span",{className:U.content},M));return I?a.createElement(u.u,{ref:N,content:I,placement:L},V):V});d.displayName="LinkButton";const f=y=>{const{theme:C,variant:b,fill:S="solid",size:D,iconOnly:M,fullWidth:T}=y,{height:R,padding:O,fontSize:x}=(0,i.iL)(D,C),I=h(C,b,S),L=v(C,b,S),P=(0,r.getFocusStyles)(C),N=C.spacing.gridSize*O-1;return{button:(0,n.css)({label:"button",display:"inline-flex",alignItems:"center",fontSize:x,fontWeight:C.typography.fontWeightMedium,fontFamily:C.typography.fontFamily,padding:`0 ${N}px`,height:C.spacing(R),lineHeight:`${C.spacing.gridSize*R-2}px`,verticalAlign:"middle",cursor:"pointer",borderRadius:C.shape.radius.default,"&:focus":P,"&:focus-visible":P,"&:focus:not(:focus-visible)":(0,r.getMouseFocusStyles)(C),...T&&{flexGrow:1,justifyContent:"center"},...I,":disabled":L,"&[disabled]":L}),disabled:(0,n.css)(L),img:(0,n.css)({width:"16px",height:"16px",margin:C.spacing(0,1,0,.5)}),icon:M?(0,n.css)({marginRight:C.spacing(-O/2),marginLeft:C.spacing(-O/2)}):(0,n.css)({marginRight:C.spacing(O/2)}),content:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"center",whiteSpace:"nowrap",overflow:"hidden",height:"100%"})}};function E(y,C,b){let S=C.border,D="transparent",M="transparent";return C.name==="secondary"&&(D=C.border,M=y.colors.emphasize(C.border,.25),S=y.colors.border.strong),b==="outline"?{background:"transparent",color:C.text,border:`1px solid ${S}`,transition:y.transitions.create(["background-color","border-color","color"],{duration:y.transitions.duration.short}),"&:hover":{background:C.transparent,borderColor:y.colors.emphasize(S,.25),color:C.text}}:b==="text"?{background:"transparent",color:C.text,border:"1px solid transparent",transition:y.transitions.create(["background-color","color"],{duration:y.transitions.duration.short}),"&:focus":{outline:"none",textDecoration:"none"},"&:hover":{background:C.transparent,textDecoration:"none"}}:{background:C.main,color:C.contrastText,border:`1px solid ${D}`,transition:y.transitions.create(["background-color","box-shadow","border-color","color"],{duration:y.transitions.duration.short}),"&:hover":{background:C.shade,color:C.contrastText,boxShadow:y.shadows.z1,borderColor:M}}}function v(y,C,b){const S={cursor:"not-allowed",boxShadow:"none",color:y.colors.text.disabled,transition:"none"};return b==="text"?{...S,background:"transparent",border:"1px solid transparent"}:b==="outline"?{...S,background:"transparent",border:`1px solid ${y.colors.border.weak}`}:{...S,background:y.colors.action.disabledBackground,border:"1px solid transparent"}}function h(y,C,b){switch(C){case"secondary":return E(y,y.colors.secondary,b);case"destructive":return E(y,y.colors.error,b);case"success":return E(y,y.colors.success,b);case"primary":default:return E(y,y.colors.primary,b)}}const p=y=>(0,n.css)({background:"transparent",color:y.colors.text.primary,border:"none",padding:0}),s=y=>(0,n.css)({background:"transparent",border:"none",padding:0,fontFamily:"inherit",color:"inherit",height:"100%","&:hover":{background:"transparent",color:"inherit"}})},82541:(G,A,e)=>{"use strict";e.d(A,{h:()=>r});var n=e(66681),a=e(85960),o=e(47257);const r=(0,a.forwardRef)(({className:g,children:u,...l},m)=>{const c=(0,o.wW)(i);return a.createElement("div",{ref:m,className:(0,n.cx)("button-group",c.wrapper,g),...l},u)});r.displayName="ButtonGroup";const i=g=>({wrapper:(0,n.css)({display:"flex","> .button-group:not(:first-child) > button, > button:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"> .button-group:not(:last-child) > button, > button:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0,borderRightWidth:0}})})},74591:(G,A,e)=>{"use strict";e.d(A,{f:()=>r});var n=e(66681),a=e(85960),o=e(47257);const r=({className:g,children:u})=>{const l=(0,o.wW)(i);return a.createElement("div",{className:(0,n.cx)(l,g)},u)},i=()=>(0,n.css)({display:"flex",button:{flexGrow:1,justifyContent:"center"},"> *":{flexGrow:1},label:{flexGrow:1,textAlign:"center"}})},46081:(G,A,e)=>{"use strict";e.d(A,{O:()=>l});var n=e(66681),a=e(451),o=e(85960),r=e(47257),i=e(29165),g=e(81743),u=e(97666);const l=c=>{const{onChange:d,className:f,loadData:E,icon:v,buttonProps:h,hideDownIcon:p,variant:s,disabled:y,...C}=c,b=(0,r.wW)(m);let S=c.children;return p||(S=[c.children,o.createElement(u.J,{key:"down-icon",name:"angle-down",className:b.icons.right})]),o.createElement(a.Z,{onChange:(0,g.K)(d),loadData:(0,g.p)(E),dropdownClassName:b.popup,...C,expandIcon:null},o.createElement(i.zx,{icon:v,disabled:y,variant:s,...h??{}},S))};l.displayName="ButtonCascader";const m=c=>({popup:(0,n.css)({label:"popup",zIndex:c.zIndex.dropdown}),icons:{right:(0,n.css)({margin:"1px 0 0 4px"}),left:(0,n.css)({margin:"-1px 4px 0 0"})}})},11318:(G,A,e)=>{"use strict";e.d(A,{_:()=>r});var n=e(66681),a=e(85960),o=e(47257);const r=({message:g,callToActionElement:u,footer:l,className:m})=>{const c=(0,o.wW)(i);return a.createElement("div",{className:(0,n.cx)([c.wrapper,m])},g&&a.createElement("div",{className:c.message},g),u,l&&a.createElement("div",{className:c.footer},l))},i=g=>({wrapper:(0,n.css)({label:"call-to-action-card",background:g.colors.background.secondary,borderRadius:g.shape.radius.default,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,padding:g.spacing(3),[g.breakpoints.down("sm")]:{padding:g.spacing(3,1)}}),message:(0,n.css)({marginBottom:g.spacing(3),fontStyle:"italic"}),footer:(0,n.css)({marginTop:g.spacing(3)})})},72435:(G,A,e)=>{"use strict";e.d(A,{L:()=>D,Z:()=>u});var n=e(66681),a=e(85960),o=e(47257),r=e(55182),i=e(3913);const g=a.createContext(null),u=({disabled:M,href:T,onClick:R,children:O,isSelected:x,className:I,...L})=>{const P=(0,a.useMemo)(()=>a.Children.toArray(O).some(j=>a.isValidElement(j)&&j.type===l),[O]),N=M||!R&&!T,F=R&&!M?R:void 0,U=(0,o.wW)(i.$,M,N,x);return a.createElement(i._,{disableEvents:M,disableHover:N,isSelected:x,className:(0,n.cx)(U.container,I),...L},a.createElement(g.Provider,{value:{href:T,onClick:F,disabled:M,isSelected:x}},!P&&a.createElement(l,null),O))},l=({children:M,className:T,"aria-label":R})=>{const O=(0,a.useContext)(g),x=(0,o.wW)(m),{href:I,onClick:L,isSelected:P}=O??{href:void 0,onClick:void 0,isSelected:void 0};return a.createElement("h2",{className:(0,n.cx)(x.heading,T)},I?a.createElement("a",{href:I,className:x.linkHack,"aria-label":R,onClick:L},M):L?a.createElement("button",{onClick:L,className:x.linkHack,"aria-label":R,type:"button"},M):a.createElement(a.Fragment,null,M),P!==void 0&&a.createElement("input",{"aria-label":"option",type:"radio",checked:P,readOnly:!0}))};l.displayName="Heading";const m=M=>({heading:(0,n.css)({gridArea:"Heading",justifySelf:"start",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:0,fontSize:M.typography.size.md,letterSpacing:"inherit",lineHeight:M.typography.body.lineHeight,color:M.colors.text.primary,fontWeight:M.typography.fontWeightMedium,"& input[readonly]":{cursor:"inherit"}}),linkHack:(0,n.css)({all:"unset","&::after":{position:"absolute",content:'""',top:0,bottom:0,left:0,right:0,borderRadius:M.shape.radius.default},"&:focus-visible":{outline:"none",outlineOffset:0,boxShadow:"none","&::after":{...(0,r.getFocusStyles)(M),zIndex:1}}})}),c=({children:M,className:T})=>{const R=(0,o.wW)(d);return a.createElement("div",{className:(0,n.cx)(R.tagList,T)},M)};c.displayName="Tags";const d=M=>({tagList:(0,n.css)({position:"relative",gridArea:"Tags",alignSelf:"center"})}),f=({children:M,className:T})=>{const R=(0,o.wW)(E);return a.createElement("p",{className:(0,n.cx)(R.description,T)},M)};f.displayName="Description";const E=M=>({description:(0,n.css)({width:"100%",gridArea:"Description",margin:M.spacing(1,0,0),color:M.colors.text.secondary,lineHeight:M.typography.body.lineHeight})}),v=({children:M,align:T="start",className:R})=>{const O=(0,o.wW)(h);return a.createElement("div",{className:(0,n.cx)(O.media,R,(0,n.css)({alignSelf:T}))},M)};v.displayName="Figure";const h=M=>({media:(0,n.css)({position:"relative",gridArea:"Figure",marginRight:M.spacing(2),width:"40px","> img":{width:"100%"},"&:empty":{display:"none"}})}),p=(0,a.memo)(({children:M,className:T,separator:R="|"})=>{const O=(0,o.wW)(s);let x=M;const I=a.Children.toArray(M).filter(Boolean);return I.length?(x=I.map((L,P)=>a.createElement("div",{key:`element_${P}`,className:O.metadataItem},L)),I.length>1&&R&&(x=I.reduce((L,P,N)=>[L,a.createElement("span",{key:`separator_${N}`,className:O.separator},R),P])),a.createElement("div",{className:(0,n.cx)(O.metadata,T)},x)):null});p.displayName="Meta";const s=M=>({metadata:(0,n.css)({gridArea:"Meta",display:"flex",alignItems:"center",width:"100%",fontSize:M.typography.size.sm,color:M.colors.text.secondary,margin:M.spacing(.5,0,0),lineHeight:M.typography.bodySmall.lineHeight,overflowWrap:"anywhere"}),metadataItem:(0,n.css)({zIndex:0}),separator:(0,n.css)({margin:`0 ${M.spacing(1)}`})}),y=({children:M,disabled:T,variant:R,className:O})=>{const x=(0,o.wW)(C),L=(0,a.useContext)(g)?.disabled||T,P=R==="primary"?x.actions:x.secondaryActions;return a.createElement("div",{className:(0,n.cx)(P,O)},a.Children.map(M,N=>a.isValidElement(N)?(0,a.cloneElement)(N,{disabled:L,...N.props}):null))},C=M=>({actions:(0,n.css)({display:"flex",flexDirection:"row",flexWrap:"wrap",gap:M.spacing(1),gridArea:"Actions",marginTop:M.spacing(2)}),secondaryActions:(0,n.css)({alignSelf:"center",color:M.colors.text.secondary,display:"flex",flexDirection:"row",flexWrap:"wrap",gap:M.spacing(1),gridArea:"Secondary",marginTop:M.spacing(2)})}),b=({children:M,disabled:T,className:R})=>a.createElement(y,{variant:"primary",disabled:T,className:R},M);b.displayName="Actions";const S=({children:M,disabled:T,className:R})=>a.createElement(y,{variant:"secondary",disabled:T,className:R},M);S.displayName="SecondaryActions";const D=M=>({inner:(0,n.css)({display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap"}),...m(M),...s(M),...E(M),...h(M),...C(M),...d(M)});u.Heading=l,u.Tags=c,u.Figure=v,u.Meta=p,u.Actions=b,u.SecondaryActions=S,u.Description=f},3913:(G,A,e)=>{"use strict";e.d(A,{$:()=>l,_:()=>u});var n=e(66681),a=e(85960),o=e(47257),r=e(55182);const i=({children:m,href:c})=>{const{inner:d}=(0,o.wW)(g);return c?a.createElement("a",{className:d,href:c},m):a.createElement(a.Fragment,null,m)},g=m=>({inner:(0,n.css)({display:"flex",width:"100%",padding:m.spacing(2)})}),u=({children:m,disableEvents:c,disableHover:d,isSelected:f,className:E,href:v,...h})=>{const{oldContainer:p}=(0,o.wW)(l,c,d,f);return a.createElement("div",{...h,className:(0,n.cx)(p,E)},a.createElement(i,{href:v},m))},l=(m,c=!1,d=!1,f)=>{const E=f!==void 0;return{container:(0,n.css)({display:"grid",position:"relative",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"auto auto 1fr auto",gridAutoColumns:"1fr",gridAutoFlow:"row",gridTemplateAreas:`
        "Figure Heading Tags"
        "Figure Meta Tags"
        "Figure Description Tags"
        "Figure Actions Secondary"`,width:"100%",padding:m.spacing(2),background:m.colors.background.secondary,borderRadius:m.shape.radius.default,marginBottom:"8px",pointerEvents:c?"none":"auto",transition:m.transitions.create(["background-color","box-shadow","border-color","color"],{duration:m.transitions.duration.short}),...!d&&{"&:hover":{background:m.colors.emphasize(m.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":r.getFocusStyles(m)},...E&&{cursor:"pointer"},...f&&{outline:`solid 2px ${m.colors.primary.border}`}}),oldContainer:(0,n.css)({display:"flex",width:"100%",background:m.colors.background.secondary,borderRadius:m.shape.radius.default,position:"relative",pointerEvents:c?"none":"auto",marginBottom:m.spacing(1),transition:m.transitions.create(["background-color","box-shadow","border-color","color"],{duration:m.transitions.duration.short}),...!d&&{"&:hover":{background:m.colors.emphasize(m.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":r.getFocusStyles(m)}})}}},30379:(G,A,e)=>{"use strict";e.d(A,{v:()=>f});var n=e(66681),a=e(63957),o=e.n(a),r=e(451),i=e(85960),g=e(97666),u=e(24956),l=e(27436),m=e(81743);const c=(0,n.css)({"&:focus":{outline:"none"}}),d=" / ";class f extends i.PureComponent{constructor(v){super(v),this.flattenOptions=(y,C=[])=>{let b=[];for(const S of y){const D=[...C];D.push(S),S.items?b=[...b,...this.flattenOptions(S.items,D)]:b.push({singleLabel:D[D.length-1].label,label:D.map(M=>M.label).join(this.props.separator||d),value:D.map(M=>M.value)})}return b},this.getSearchableOptions=o()(y=>this.flattenOptions(y)),this.onChange=(y,C)=>{const b=this.props.hideActiveLevelLabel?"":this.props.displayAllSelectedLevels?C.map(S=>S.label).join(this.props.separator||d):C[C.length-1].label;this.setState({rcValue:y,focusCascade:!0,activeLabel:b}),this.props.onSelect(C[C.length-1].value)},this.onSelect=y=>{const C=y.value||[];this.setState({activeLabel:this.props.displayAllSelectedLevels?y.label:y.singleLabel||"",rcValue:C,isSearching:!1}),this.props.onSelect(C[C.length-1])},this.onCreateOption=y=>{this.setState({activeLabel:y,rcValue:[],isSearching:!1}),this.props.onSelect(y)},this.onBlur=()=>{this.setState({isSearching:!1,focusCascade:!1}),this.state.activeLabel===""&&this.setState({rcValue:[]}),this.props.onBlur?.()},this.onBlurCascade=()=>{this.setState({focusCascade:!1}),this.props.onBlur?.()},this.onInputKeyDown=y=>{["ArrowDown","ArrowUp","Enter","ArrowLeft","ArrowRight","Backspace"].includes(y.key)||this.setState({focusCascade:!1,isSearching:!0})},this.onSelectInputChange=y=>{y===""&&this.setState({isSearching:!1})};const h=this.getSearchableOptions(v.options),{rcValue:p,activeLabel:s}=this.setInitialValue(h,v.initialValue);this.state={isSearching:!1,focusCascade:!1,rcValue:p,activeLabel:s}}setInitialValue(v,h){if(!h)return{rcValue:[],activeLabel:""};for(const p of v){const s=p.value||[];if(s[s.length-1]===h)return{rcValue:s,activeLabel:this.props.displayAllSelectedLevels?p.label:p.singleLabel||""}}return this.props.allowCustomValue?{rcValue:[],activeLabel:h}:{rcValue:[],activeLabel:""}}render(){const{allowCustomValue:v,formatCreateLabel:h,placeholder:p,width:s,changeOnSelect:y,options:C}=this.props,{focusCascade:b,isSearching:S,rcValue:D,activeLabel:M}=this.state,T=this.getSearchableOptions(C);return i.createElement("div",null,S?i.createElement(l.Ph,{allowCustomValue:v,placeholder:p,autoFocus:!b,onChange:this.onSelect,onBlur:this.onBlur,options:T,onCreateOption:this.onCreateOption,formatCreateLabel:h,width:s,onInputChange:this.onSelectInputChange}):i.createElement(r.Z,{onChange:(0,m.K)(this.onChange),options:C,changeOnSelect:y,value:D.value,fieldNames:{label:"label",value:"value",children:"items"},expandIcon:null,open:this.props.alwaysOpen},i.createElement("div",{className:c},i.createElement(u.I,{autoFocus:this.props.autoFocus,width:s,placeholder:p,onBlur:this.onBlurCascade,value:M,onKeyDown:this.onInputKeyDown,onChange:()=>{},suffix:b?i.createElement(g.J,{name:"angle-up"}):i.createElement(g.J,{name:"angle-down",style:{marginBottom:0,marginLeft:"4px"}})}))))}}f.defaultProps={changeOnSelect:!0}},81743:(G,A,e)=>{"use strict";e.d(A,{K:()=>n,p:()=>a});const n=i=>(g,u)=>{i&&i(g.map(l=>String(l)),o(u))},a=i=>g=>{i&&i(o(g))},o=i=>i.map(r),r=i=>({value:i.value??"",label:i.label})},18975:(G,A,e)=>{"use strict";e.d(A,{L:()=>a});var n=e(85960);class a extends n.PureComponent{constructor(){super(...arguments),this.myRef=(0,n.createRef)(),this.state={hasEventListener:!1},this.onOutsideClick=r=>{const i=this.myRef.current;(!i||r.target instanceof Node&&!i.contains(r.target))&&this.props.onClick()}}componentDidMount(){this.props.parent.addEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.addEventListener("keyup",this.onOutsideClick,this.props.useCapture)}componentWillUnmount(){this.props.parent.removeEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.removeEventListener("keyup",this.onOutsideClick,this.props.useCapture)}render(){return n.createElement("div",{ref:this.myRef},this.props.children)}}a.defaultProps={includeButtonPress:!0,parent:typeof window<"u"?window:void 0,useCapture:!1}},55855:(G,A,e)=>{"use strict";e.d(A,{m:()=>m});var n=e(66681),a=e(85960),o=e(64793),r=e(47257),i=e(29165),g=e(97666),u=e(78112);const l=2*1e3;function m({onClipboardCopy:f,onClipboardError:E,children:v,getText:h,icon:p,variant:s,...y}){const C=(0,r.wW)(d),[b,S]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let T;return b&&(T=setTimeout(()=>{S(!1)},l)),()=>{window.clearTimeout(T)}},[b]);const D=(0,a.useRef)(null),M=(0,a.useCallback)(async()=>{const T=h();try{await c(T,D),S(!0),f?.(T)}catch(R){E?.(T,R)}},[h,f,E]);return a.createElement(a.Fragment,null,b&&a.createElement(u.K,{placement:"top",referenceElement:D.current},a.createElement(o.c,{i18nKey:"clipboard-button.inline-toast.success"},"Copied")),a.createElement(i.zx,{onClick:M,icon:p,variant:b?"success":s,"aria-label":b?"Copied":void 0,...y,className:(0,n.cx)(C.button,b&&C.successButton,y.className),ref:D},v,b&&a.createElement("div",{className:C.successOverlay},a.createElement(g.J,{name:"check"}))))}const c=async(f,E)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(f);{const v=document.createElement("textarea");E.current?.appendChild(v),v.value=f,v.focus(),v.select(),document.execCommand("copy"),v.remove()}},d=f=>({button:(0,n.css)({position:"relative"}),successButton:(0,n.css)({"> *":(0,n.css)({visibility:"hidden"})}),successOverlay:(0,n.css)({position:"absolute",top:0,bottom:0,right:0,left:0,visibility:"visible"})})},96525:(G,A,e)=>{"use strict";e.d(A,{s:()=>m});var n=e(66681),a=e(56375),o=e.n(a),r=e(85960),i=e(47257),g=e(55182),u=e(97666),l=e(75682);const m=({label:d,isOpen:f,onToggle:E,className:v,contentClassName:h,children:p,labelId:s,loading:y=!1,headerDataTestId:C,contentDataTestId:b})=>{const[S,D]=(0,r.useState)(f),M=(0,i.wW)(c),T=x=>{x.target instanceof HTMLElement&&x.target.tagName==="A"||(x.preventDefault(),x.stopPropagation(),E?.(!S),D(!S))},{current:R}=(0,r.useRef)((0,a.uniqueId)()),O=s??`collapse-label-${R}`;return r.createElement(r.Fragment,null,r.createElement("div",{onClick:T,className:(0,n.cx)(M.header,v)},r.createElement("button",{type:"button",id:`collapse-button-${R}`,className:M.button,onClick:T,"aria-expanded":S&&!y,"aria-controls":`collapse-content-${R}`,"aria-labelledby":O},y?r.createElement(l.$,{className:M.spinner}):r.createElement(u.J,{name:S?"angle-up":"angle-down",className:M.icon})),r.createElement("div",{className:M.label,id:`collapse-label-${R}`,"data-testid":C},d)),S&&r.createElement("div",{id:`collapse-content-${R}`,className:(0,n.cx)(M.content,h),"data-testid":b},p))},c=d=>({header:(0,n.css)({display:"flex",cursor:"pointer",boxSizing:"border-box",flexDirection:"row-reverse",position:"relative",justifyContent:"space-between",fontSize:d.typography.size.lg,padding:`${d.spacing(.5)} 0`,"&:focus-within":(0,g.getFocusStyles)(d)}),button:(0,n.css)({all:"unset","&:focus-visible":{outline:"none",outlineOffset:"unset",transition:"none",boxShadow:"none"}}),icon:(0,n.css)({color:d.colors.text.secondary}),content:(0,n.css)({padding:`${d.spacing(2)} 0`}),spinner:(0,n.css)({display:"flex",alignItems:"center",width:d.spacing(2)}),label:(0,n.css)({display:"flex"})})},8655:(G,A,e)=>{"use strict";e.d(A,{U:()=>l,y:()=>u});var n=e(66681),a=e(85960),o=e(47257),r=e(29165),i=e(97666);const g=m=>({collapse:(0,n.css)({label:"collapse",marginBottom:m.spacing(1),backgroundColor:m.colors.background.primary,border:`1px solid ${m.colors.border.weak}`,position:"relative",borderRadius:m.shape.radius.default,width:"100%",display:"flex",flexDirection:"column",flex:"1 1 0"}),collapseBody:(0,n.css)({label:"collapse__body",padding:m.spacing(m.components.panel.padding),paddingTop:0,flex:1,overflow:"hidden",display:"flex",flexDirection:"column"}),bodyContentWrapper:(0,n.css)({label:"bodyContentWrapper",flex:1,overflow:"hidden"}),loader:(0,n.css)({label:"collapse__loader",height:"2px",position:"relative",overflow:"hidden",background:"none",margin:m.spacing(.5)}),loaderActive:(0,n.css)({label:"collapse__loader_active","&:after":{content:"' '",display:"block",width:"25%",top:0,height:"250%",position:"absolute",animation:"loader 2s cubic-bezier(0.17, 0.67, 0.83, 0.67) 500ms",animationIterationCount:100,left:"-25%",background:m.colors.primary.main},"@keyframes loader":{from:{left:"-25%",opacity:.1},to:{left:"100%",opacity:1}}}),header:(0,n.css)({label:"collapse__header",padding:m.spacing(1,2,1,2),display:"flex",transition:"all 0.1s linear"}),headerCollapsed:(0,n.css)({label:"collapse__header--collapsed",padding:m.spacing(1,2,1,2)}),headerLabel:(0,n.css)({label:"collapse__header-label",fontWeight:m.typography.fontWeightMedium,marginRight:m.spacing(1),fontSize:m.typography.size.md,display:"flex",flex:"0 0 100%"}),icon:(0,n.css)({label:"collapse__icon",margin:m.spacing(.25,1,0,-1)})}),u=({isOpen:m,onToggle:c,...d})=>{const[f,E]=(0,a.useState)(m);return a.createElement(l,{isOpen:f,collapsible:!0,...d,onToggle:()=>{E(!f),c&&c(!f)}})},l=({isOpen:m,label:c,loading:d,collapsible:f,onToggle:E,className:v,children:h})=>{const p=(0,o.wW)(r.gN),s=(0,o.wW)(g),y=()=>{E&&E(!m)},C=(0,n.cx)([s.collapse,v]),b=d?(0,n.cx)([s.loader,s.loaderActive]):(0,n.cx)([s.loader]),S=f?(0,n.cx)([s.header]):(0,n.cx)([s.headerCollapsed]);return a.createElement("div",{className:C},a.createElement("button",{type:"button",className:(0,n.cx)(p,S),onClick:y},f&&a.createElement(i.J,{className:s.icon,name:m?"angle-down":"angle-right"}),a.createElement("div",{className:(0,n.cx)([s.headerLabel])},c)),m&&a.createElement("div",{className:(0,n.cx)([s.collapseBody])},a.createElement("div",{className:b}),a.createElement("div",{className:s.bodyContentWrapper},h)))};l.displayName="Collapse"},67870:(G,A,e)=>{"use strict";e.d(A,{Z:()=>m});var n=e(66681),a=e(56375),o=e.n(a),r=e(85960),i=e(19737),g=e(47257),u=e(24956);const l=(0,r.forwardRef)(({color:f,onChange:E,isClearable:v=!1,onClick:h,onBlur:p,disabled:s,buttonAriaLabel:y,...C},b)=>{const[S,D]=(0,r.useState)(f),[M,T]=(0,r.useState)(f),R=(0,r.useMemo)(()=>(0,a.debounce)(E,100),[]);(0,r.useEffect)(()=>{const I=(0,i.Z)(f);I.isValid()&&f!==M&&(D(I.toString()),T(f))},[f,M]);const O=I=>{const{value:L}=I.currentTarget;if(D(L),L===""&&v){R(L);return}const P=(0,i.Z)(L);P.isValid()&&R(P.toString())},x=I=>{(0,i.Z)(S).isValid()||D(f),p?.(I)};return r.createElement(u.I,{...C,value:S,onChange:O,disabled:s,onClick:h,onBlur:x,addonBefore:r.createElement(c,{onClick:h,ariaLabel:y,disabled:s,color:f}),ref:b})});l.displayName="ColorInput";const m=l,c=({color:f,onClick:E,disabled:v,ariaLabel:h})=>{const p=(0,g.wW)(d);return r.createElement("button",{type:"button",onClick:E,"aria-label":h,disabled:v||!E,className:(0,n.cx)(p,(0,n.css)({backgroundColor:f}))})},d=f=>(0,n.css)({height:"100%",width:`${f.spacing.gridSize*4}px`,borderRadius:`${f.shape.radius.default} 0 0 ${f.shape.radius.default}`,border:`1px solid ${f.colors.border.medium}`})},38276:(G,A,e)=>{"use strict";e.d(A,{sp:()=>E,zH:()=>f});var n=e(66681),a=e(85960),o=e(47257),r=e(33808),i=e(73088),g=e(51928),u=e(55135),l=e(51631),m=e(51333),c=e(91610);const d=(h,p="ColorPicker")=>{var s;return s=class extends a.Component{constructor(){super(...arguments),this.pickerTriggerRef=(0,a.createRef)()}render(){const{theme:y,children:C,onChange:b,color:S}=this.props,D=v(y),M=a.createElement(h,{...this.props,children:null,onChange:b});return a.createElement(u.D,{content:M,hideAfter:300},(T,R,O)=>a.createElement(a.Fragment,null,this.pickerTriggerRef.current&&a.createElement(g.J,{...O,referenceElement:this.pickerTriggerRef.current,wrapperClassName:D.colorPicker,onMouseLeave:R,onMouseEnter:T,onKeyDown:x=>(0,i.i)(x,R)}),C?C({ref:this.pickerTriggerRef,showColorPicker:T,hideColorPicker:R}):a.createElement(m.b,{ref:this.pickerTriggerRef,onClick:T,onMouseLeave:R,color:y.visualization.getColorByName(S||"#000000"),"aria-label":S})))}},s.displayName=p,s},f=(0,o.HE)(d(l.h,"ColorPicker")),E=(0,o.HE)(d(c.j,"SeriesColorPicker")),v=(0,r.B)(h=>({colorPicker:(0,n.css)({position:"absolute",zIndex:h.zIndex.tooltip,color:h.colors.text.primary,maxWidth:"400px",fontSize:h.typography.size.sm,padding:"15px !important",'& [data-placement^="top"]':{paddingLeft:"0 !important",paddingRight:"0 !important"},'& [data-placement^="bottom"]':{paddingLeft:"0 !important",paddingRight:"0 !important"},'& [data-placement^="left"]':{paddingTop:"0 !important"},'& [data-placement^="right"]':{paddingTop:"0 !important"}})}))},58138:(G,A,e)=>{"use strict";e.d(A,{T:()=>c});var n=e(66681),a=e(85960),o=e(29972),r=e(18229),i=e(30887),g=e(47257),u=e(18975),l=e(67870),m=e(41021);const c=(0,a.forwardRef)(({value:f="",onChange:E,returnColorAs:v="rgb",...h},p)=>{const[s,y]=(0,a.useState)(f),[C,b]=(0,a.useState)(!1),S=(0,g.l4)(),D=(0,g.wW)(d),M=(0,g.wW)(m.W);return(0,r.Z)(T=>{if(T===f)return;if(!T){E("");return}const R=S.visualization.getColorByName(T);E(v==="rgb"?i.asRgbString(R):i.asHexString(R))},500,[s]),a.createElement(u.L,{onClick:()=>b(!1)},a.createElement("div",{className:D.wrapper},C&&!h.disabled&&a.createElement(o.ef,{"data-testid":"color-popover",color:s,onChange:y,className:(0,n.cx)(M.root,D.picker)}),a.createElement(l.Z,{...h,theme:S,color:s,onChange:y,buttonAriaLabel:"Open color picker",onClick:()=>b(!0),onBlur:()=>b(!1),ref:p,isClearable:!0})))});c.displayName="ColorPickerInput";const d=f=>({wrapper:(0,n.css)({position:"relative"}),picker:(0,n.css)({"&.react-colorful":{position:"absolute",width:"100%",zIndex:11,bottom:"36px"}}),inner:(0,n.css)({position:"absolute"})})},51631:(G,A,e)=>{"use strict";e.d(A,{h:()=>s});var n=e(66681),a=e(89344),o=e(85960),r=e(30887),i=e(47257),g=e(33808),u=e(51333),l=e(56375);function m(C,b){const S=new Array(C.length);for(let D=0;D<C.length;D++){const M=C.length-1-D;S[D]=b(C[M],M,C)}return S}const d=({hue:C,selectedColor:b,onColorSelect:S,...D})=>{const M=(0,l.upperFirst)(C.name),T=(0,i.wW)(f);return o.createElement("div",{className:T.colorRow},o.createElement("div",{className:T.colorLabel},M),o.createElement("div",{...D,className:T.swatchRow},m(C.shades,R=>o.createElement(u.b,{key:R.name,"aria-label":R.name,variant:R.primary?u.$.Large:u.$.Small,isSelected:R.name===b,color:R.color,onClick:()=>S(R.name)}))))},f=C=>({colorRow:(0,n.css)({display:"grid",gridTemplateColumns:"25% 1fr",gridColumnGap:C.spacing(2),padding:C.spacing(.5,0),"&:hover":{background:C.colors.background.secondary}}),colorLabel:(0,n.css)({paddingLeft:C.spacing(2),display:"flex",alignItems:"center"}),swatchRow:(0,n.css)({display:"flex",gap:C.spacing(1),alignItems:"center",justifyContent:"space-around",flexDirection:"row"})}),E=({color:C,onChange:b})=>{const S=(0,i.l4)(),D=(0,i.wW)(v),M=[];for(const T of S.visualization.hues)M.push(o.createElement(d,{key:T.name,selectedColor:C,hue:T,onColorSelect:b}));return o.createElement(o.Fragment,null,o.createElement("div",{className:D.swatches},M),o.createElement("div",{className:D.extraColors},o.createElement(u.b,{isSelected:C==="transparent",color:"rgba(0,0,0,0)",label:"Transparent",onClick:()=>b("transparent")}),o.createElement(u.b,{isSelected:C==="text",color:S.colors.text.primary,label:"Text color",onClick:()=>b("text")})))},v=C=>({container:(0,n.css)({display:"flex",flexDirection:"column"}),extraColors:(0,n.css)({display:"flex",alignItems:"center",justifyContent:"space-around",gap:C.spacing(1),padding:C.spacing(1,0)}),swatches:(0,n.css)({display:"grid",flexGrow:1})});var h=e(41021);class p extends o.Component{constructor(b){super(b),this.getTabClassName=S=>{const{activePicker:D}=this.state;return`ColorPickerPopover__tab ${D===S&&"ColorPickerPopover__tab--active"}`},this.handleChange=S=>{const{onChange:D,enableNamedColors:M,theme:T}=this.props;if(M)return D(S);D(r.asHexString(T.visualization.getColorByName(S)))},this.onTabChange=S=>()=>this.setState({activePicker:S}),this.renderPicker=()=>{const{activePicker:S}=this.state,{color:D}=this.props;switch(S){case"spectrum":return o.createElement(h.Z,{color:D,onChange:this.handleChange});case"palette":return o.createElement(E,{color:D,onChange:this.handleChange});default:return this.renderCustomPicker(S)}},this.renderCustomPicker=S=>{const{customPickers:D,color:M,theme:T}=this.props;return D?o.createElement(D[S].tabComponent,{color:M,theme:T,onChange:this.handleChange}):null},this.renderCustomPickerTabs=()=>{const{customPickers:S}=this.props;return S?o.createElement(o.Fragment,null,Object.keys(S).map(D=>o.createElement("button",{className:this.getTabClassName(D),onClick:this.onTabChange(D),key:D,type:"button"},S[D].name))):null},this.state={activePicker:"palette"}}render(){const{theme:b}=this.props,S=y(b);return o.createElement(a.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},o.createElement("div",{tabIndex:-1,className:S.colorPickerPopover},o.createElement("div",{className:S.colorPickerPopoverTabs},o.createElement("button",{className:this.getTabClassName("palette"),onClick:this.onTabChange("palette"),type:"button"},"Colors"),o.createElement("button",{className:this.getTabClassName("spectrum"),onClick:this.onTabChange("spectrum"),type:"button"},"Custom"),this.renderCustomPickerTabs()),o.createElement("div",{className:S.colorPickerPopoverContent},this.renderPicker())))}}const s=(0,i.HE)(p);s.displayName="ColorPickerPopover";const y=(0,g.B)(C=>({colorPickerPopover:(0,n.css)({borderRadius:C.shape.radius.default,boxShadow:C.shadows.z3,background:C.colors.background.primary,border:`1px solid ${C.colors.border.weak}`,".ColorPickerPopover__tab":{width:"50%",textAlign:"center",padding:C.spacing(1,0),background:C.colors.background.secondary,color:C.colors.text.secondary,fontSize:C.typography.bodySmall.fontSize,cursor:"pointer",border:"none","&:focus:not(:focus-visible)":{outline:"none",boxShadow:"none"},":focus-visible":{position:"relative"}},".ColorPickerPopover__tab--active":{color:C.colors.text.primary,fontWeight:C.typography.fontWeightMedium,background:C.colors.background.primary}}),colorPickerPopoverContent:(0,n.css)({width:"246px",fontSize:C.typography.bodySmall.fontSize,minHeight:"184px",padding:C.spacing(1),display:"flex",flexDirection:"column"}),colorPickerPopoverTabs:(0,n.css)({display:"flex",width:"100%",borderRadius:`${C.shape.radius.default} ${C.shape.radius.default} 0 0`})}))},51333:(G,A,e)=>{"use strict";e.d(A,{$:()=>u,b:()=>l});var n=e(66681),a=e(89344),o=e(85960),r=e(19737),i=e(92369),g=e(47257),u=(c=>(c.Small="small",c.Large="large",c))(u||{});const l=o.forwardRef(({color:c,label:d,variant:f="small",isSelected:E,"aria-label":v,...h},p)=>{const s=(0,g.l4)(),{isFocusVisible:y,focusProps:C}=(0,a.Fx)(),b=m(s,f,c,y,E),S=!!d,D=v||d;return o.createElement("div",{ref:p,className:b.wrapper,"data-testid":i.wl.components.ColorSwatch.name,...h},S&&o.createElement("span",{className:b.label},d),o.createElement("button",{className:b.swatch,...C,"aria-label":D?`${D} color`:"Pick a color",type:"button"}))}),m=(c,d,f,E,v)=>{const h=(0,r.Z)(f),s=d==="small"?"16px":"32px";let y="none";return h.getAlpha()<.1&&(y=`2px solid ${c.colors.border.medium}`),{wrapper:(0,n.css)({display:"flex",alignItems:"center",cursor:"pointer"}),label:(0,n.css)({marginRight:c.spacing(1)}),swatch:(0,n.css)({width:s,height:s,background:`${f}`,border:y,borderRadius:c.shape.radius.circle,outlineOffset:"1px",outline:E?`2px solid  ${c.colors.primary.main}`:"none",boxShadow:v?`inset 0 0 0 2px ${f}, inset 0 0 0 4px ${c.colors.getContrastText(f)}`:"none",transition:c.transitions.create(["transform"],{duration:c.transitions.duration.short}),"&:hover":{transform:"scale(1.1)"},"@media (forced-colors: active)":{forcedColorAdjust:"none"}})}};l.displayName="ColorSwatch"},91610:(G,A,e)=>{"use strict";e.d(A,{j:()=>g,q:()=>u});var n=e(66681),a=e(85960),o=e(47257),r=e(78694),i=e(51631);const g=m=>{const c=(0,o.wW)(l),{yaxis:d,onToggleAxis:f,color:E,...v}=m,h=f?{yaxis:{name:"Y-Axis",tabComponent(){return a.createElement(r.r,{key:"yaxisSwitch",label:"Use right y-axis",className:c.colorPickerAxisSwitch,labelClass:c.colorPickerAxisSwitchLabel,checked:d===2,onChange:()=>{f&&f()}})}}}:void 0;return a.createElement(i.h,{...v,color:E||"#000000",customPickers:h})},u=(0,o.HE)(g),l=()=>({colorPickerAxisSwitch:(0,n.css)({width:"100%"}),colorPickerAxisSwitchLabel:(0,n.css)({display:"flex",flexGrow:1})})},41021:(G,A,e)=>{"use strict";e.d(A,{W:()=>c,Z:()=>d});var n=e(66681),a=e(85960),o=e(29972),r=e(18229),i=e(19737),g=e(30887),u=e(47257),l=e(67870);const m=({color:f,onChange:E})=>{const[v,h]=(0,a.useState)(f);(0,r.Z)(C=>{E(g.asHexString(p.visualization.getColorByName(C)))},500,[v]);const p=(0,u.l4)(),s=(0,u.wW)(c),y=(0,a.useMemo)(()=>v.startsWith("rgba")?v:(0,i.Z)(p.visualization.getColorByName(f)).toRgbString(),[v,p,f]);return a.createElement("div",{className:s.wrapper},a.createElement(o.ef,{className:s.root,color:y,onChange:h}),a.createElement(l.Z,{theme:p,color:y,onChange:h,className:s.colorInput}))},c=f=>({wrapper:(0,n.css)({flexGrow:1}),root:(0,n.css)({"&.react-colorful":{width:"auto"},".react-colorful":{"&__saturation":{borderRadius:`${f.shape.radius.default} ${f.shape.radius.default} 0 0`},"&__alpha":{borderRadius:`0 0 ${f.shape.radius.default} ${f.shape.radius.default}`},"&__alpha, &__hue":{height:f.spacing(2),position:"relative"},"&__pointer":{height:f.spacing(2),width:f.spacing(2)}}}),colorInput:(0,n.css)({marginTop:f.spacing(2)})}),d=m},16783:(G,A,e)=>{"use strict";e.d(A,{p:()=>u});var n=e(66681),a=e(85960),o=e(47257),r=e(33808),i=e(29165);class g extends a.PureComponent{constructor(){super(...arguments),this.mainButtonRef=a.createRef(),this.confirmButtonRef=a.createRef(),this.state={showConfirm:!1},this.onClickButton=c=>{c&&c.preventDefault(),this.setState({showConfirm:!0},()=>{this.props.autoFocus&&this.confirmButtonRef.current&&this.confirmButtonRef.current.focus()}),this.props.onClick&&this.props.onClick()},this.onClickCancel=c=>{c&&c.preventDefault(),this.setState({showConfirm:!1},()=>{this.mainButtonRef.current?.focus()}),this.props.onCancel&&this.props.onCancel()},this.onConfirm=c=>{c&&c.preventDefault(),this.props.onConfirm(),this.props.closeOnConfirm&&this.setState({showConfirm:!1})}}render(){const{theme:c,className:d,size:f,disabled:E,confirmText:v,confirmVariant:h,children:p}=this.props,s=l(c),y=(0,n.cx)(d,this.state.showConfirm?s.buttonHide:s.buttonShow,E&&s.buttonDisabled),C=(0,n.cx)(s.confirmButton,this.state.showConfirm?s.confirmButtonShow:s.confirmButtonHide),b=E?()=>{}:this.onClickButton;return a.createElement("span",{className:s.buttonContainer},a.createElement("div",{className:(0,n.cx)(E&&s.disabled)},a.createElement("span",{className:y},typeof p=="string"?a.createElement(i.zx,{size:f,fill:"text",onClick:b,ref:this.mainButtonRef},p):a.cloneElement(p,{onClick:b,ref:this.mainButtonRef}))),a.createElement("span",{className:C},a.createElement(i.zx,{size:f,variant:h,onClick:this.onConfirm,ref:this.confirmButtonRef},v),a.createElement(i.zx,{size:f,fill:"text",onClick:this.onClickCancel},"Cancel")))}}const u=(0,o.HE)(g),l=(0,r.B)(m=>({buttonContainer:(0,n.css)({display:"flex",alignItems:"center",justifyContent:"flex-end"}),buttonDisabled:(0,n.css)({textDecoration:"none",color:m.colors.text.primary,opacity:.65,pointerEvents:"none"}),buttonShow:(0,n.css)({opacity:1,transition:"opacity 0.1s ease",zIndex:2}),buttonHide:(0,n.css)({opacity:0,transition:"opacity 0.1s ease, visibility 0 0.1s",visibility:"hidden",zIndex:0}),confirmButton:(0,n.css)({alignItems:"flex-start",background:m.colors.background.primary,display:"flex",position:"absolute",pointerEvents:"none"}),confirmButtonShow:(0,n.css)({zIndex:1,opacity:1,transition:"opacity 0.08s ease-out, transform 0.1s ease-out",transform:"translateX(0)",pointerEvents:"all"}),confirmButtonHide:(0,n.css)({opacity:0,visibility:"hidden",transition:"opacity 0.12s ease-in, transform 0.14s ease-in, visibility 0s 0.12s",transform:"translateX(100px)"}),disabled:(0,n.css)({cursor:"not-allowed"})}));u.defaultProps={size:"md",confirmText:"Save",disabled:!1,confirmVariant:"primary"},u.displayName="ConfirmButton"},81573:(G,A,e)=>{"use strict";e.d(A,{m:()=>r});var n=e(85960),a=e(29165),o=e(16783);const r=({size:i,disabled:g,onConfirm:u,"aria-label":l,closeOnConfirm:m})=>n.createElement(o.p,{confirmText:"Delete",confirmVariant:"destructive",size:i||"md",disabled:g,onConfirm:u,closeOnConfirm:m},n.createElement(a.zx,{"aria-label":l,variant:"destructive",icon:"times",size:i||"sm"}))},77980:(G,A,e)=>{"use strict";e.d(A,{s:()=>m});var n=e(66681),a=e(85960),o=e(92369),r=e(47257),i=e(29165),g=e(24956),u=e(74042),l=e(7288);const m=({isOpen:d,title:f,body:E,description:v,confirmText:h,confirmVariant:p="destructive",confirmationText:s,dismissText:y="Cancel",dismissVariant:C="secondary",alternativeText:b,modalClass:S,icon:D="exclamation-triangle",onConfirm:M,onDismiss:T,onAlternative:R,confirmButtonVariant:O="destructive"})=>{const[x,I]=(0,a.useState)(!!s),L=(0,r.wW)(c),P=(0,a.useRef)(null),N=U=>{I(s?.toLowerCase().localeCompare(U.currentTarget.value.toLowerCase())!==0)};(0,a.useEffect)(()=>{d&&P.current?.focus()},[d]),(0,a.useEffect)(()=>{d&&I(!!s)},[d,s]);const F=async()=>{I(!0);try{await M()}finally{I(!1)}};return a.createElement(l.u,{className:(0,n.cx)(L.modal,S),title:f,icon:D,isOpen:d,onDismiss:T},a.createElement("div",{className:L.modalText},E,v?a.createElement("div",{className:L.modalDescription},v):null,s?a.createElement("div",{className:L.modalConfirmationInput},a.createElement(u.Lh,null,a.createElement(g.I,{placeholder:`Type "${s}" to confirm`,onChange:N}))):null),a.createElement(l.u.ButtonRow,null,a.createElement(i.zx,{variant:C,onClick:T,fill:"outline"},y),a.createElement(i.zx,{variant:O,onClick:F,disabled:x,ref:P,"data-testid":o.wl.pages.ConfirmModal.delete},h),R?a.createElement(i.zx,{variant:"primary",onClick:R},b):null))},c=d=>({modal:(0,n.css)({width:"500px"}),modalText:(0,n.css)({fontSize:d.typography.h5.fontSize,color:d.colors.text.primary}),modalDescription:(0,n.css)({fontSize:d.typography.body.fontSize}),modalConfirmationInput:(0,n.css)({paddingTop:d.spacing(1)})})},19841:(G,A,e)=>{"use strict";e.d(A,{x:()=>g});var n=e(85960),a=e(43050),o=e(92369),r=e(54635),i=e(25142);const g=n.memo(({x:u,y:l,onClose:m,focusOnOpen:c=!0,renderMenuItems:d,renderHeader:f})=>{const E=(0,n.useRef)(null),[v,h]=(0,n.useState)({});(0,n.useLayoutEffect)(()=>{const b=E.current;if(b){const S=b.getBoundingClientRect(),D=5,M={right:window.innerWidth<u+S.width,bottom:window.innerHeight<l+S.height+D};h({position:"fixed",left:M.right?u-S.width-D:u-D,top:Math.max(0,M.bottom?l-S.height-D:l+D)})}},[u,l]),(0,a.Z)(E,()=>{m?.()});const p=f?.(),s=d?.(),y=b=>{c&&b(0)},C=b=>{b.key==="Escape"&&(b.preventDefault(),b.stopPropagation(),m?.())};return n.createElement(i.h_,null,n.createElement(r.v,{header:p,ref:E,style:v,ariaLabel:o.wl.components.Menu.MenuComponent("Context"),onOpen:y,onClick:m,onKeyDown:C},s))});g.displayName="ContextMenu"},59263:(G,A,e)=>{"use strict";e.d(A,{z:()=>o});var n=e(85960),a=e(19841);const o=({children:r,renderMenuItems:i,focusOnOpen:g=!0})=>{const[u,l]=(0,n.useState)(!1),[m,c]=(0,n.useState)({x:0,y:0});return n.createElement(n.Fragment,null,r({openMenu:d=>{l(!0),c({x:d.pageX,y:d.pageY})}}),u&&n.createElement(a.x,{onClose:()=>l(!1),x:m.x,y:m.y,renderMenuItems:i,focusOnOpen:g}))}},50263:(G,A,e)=>{"use strict";e.d(A,{$:()=>u,Z:()=>l});var n=e(66681),a=e(85960),o=e(13845),r=e(47257);const i=({children:c})=>{const[d,f]=(0,a.useState)(!1),[E,v]=(0,a.useState)(!1),h=(0,a.useRef)(null),p=(0,a.useRef)(null),s=(0,r.wW)(g);return(0,a.useEffect)(()=>{const y=new IntersectionObserver(C=>{C.forEach(b=>{b.target===h.current?f(!b.isIntersecting):b.target===p.current&&v(!b.isIntersecting)})});return[h,p].forEach(C=>{C.current&&y.observe(C.current)}),()=>y.disconnect()},[]),a.createElement(a.Fragment,null,a.createElement("div",{className:(0,n.cx)(s.scrollIndicator,s.scrollTopIndicator,{[s.scrollIndicatorVisible]:d})}),a.createElement("div",{className:s.scrollContent},a.createElement("div",{ref:h}),c,a.createElement("div",{ref:p})),a.createElement("div",{className:(0,n.cx)(s.scrollIndicator,s.scrollBottomIndicator,{[s.scrollIndicatorVisible]:E})}))},g=c=>({scrollContent:(0,n.css)({flex:1,position:"relative"}),scrollIndicator:(0,n.css)({height:c.spacing(6),left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,transition:c.transitions.create("opacity"),zIndex:1}),scrollTopIndicator:(0,n.css)({background:`linear-gradient(0deg, transparent, ${c.colors.background.canvas})`,top:0}),scrollBottomIndicator:(0,n.css)({background:`linear-gradient(180deg, transparent, ${c.colors.background.canvas})`,bottom:0}),scrollIndicatorVisible:(0,n.css)({opacity:1})}),u=({autoHide:c=!1,autoHideTimeout:d=200,setScrollTop:f,className:E,testId:v,autoHeightMin:h="0",autoHeightMax:p="100%",hideTracksWhenNotNeeded:s=!1,hideHorizontalTrack:y,hideVerticalTrack:C,scrollRefCallback:b,showScrollIndicators:S=!1,updateAfterMountMs:D,scrollTop:M,onScroll:T,children:R})=>{const O=(0,a.useRef)(null),x=(0,r.wW)(m);(0,a.useEffect)(()=>{O.current&&b&&b(O.current.view)},[O,b]),(0,a.useEffect)(()=>{O.current&&M!=null&&O.current.scrollTop(M)},[M]),(0,a.useEffect)(()=>{D&&setTimeout(()=>{const V=O.current;V?.update&&V.update()},D)},[D]);function I(V,_,H){return H.style&&_&&(H.style.display="none"),a.createElement("div",{...H,className:V})}const L=(0,a.useCallback)(V=>I("track-horizontal",y,V),[y]),P=(0,a.useCallback)(V=>I("track-vertical",C,V),[C]),N=(0,a.useCallback)(V=>a.createElement("div",{...V,className:"thumb-horizontal"}),[]),F=(0,a.useCallback)(V=>a.createElement("div",{...V,className:"thumb-vertical"}),[]),U=(0,a.useCallback)(V=>(V.style&&V.style.WebkitOverflowScrolling==="touch"&&(V.style.WebkitOverflowScrolling="auto"),a.createElement("div",{...V,className:"scrollbar-view"})),[]),j=(0,a.useCallback)(()=>{O.current&&f&&f(O.current.getValues())},[f]);return a.createElement(o.ZP,{"data-testid":v,ref:O,className:(0,n.cx)(x.customScrollbar,E,{[x.scrollbarWithScrollIndicators]:S}),onScrollStop:j,autoHeight:!0,autoHide:c,autoHideTimeout:d,hideTracksWhenNotNeeded:s,autoHeightMax:p,autoHeightMin:h,renderTrackHorizontal:L,renderTrackVertical:P,renderThumbHorizontal:N,renderThumbVertical:F,renderView:U,onScroll:T},S?a.createElement(i,null,R):R)},l=u,m=c=>({customScrollbar:(0,n.css)({display:"flex",flexGrow:1,".scrollbar-view":{display:"flex",flexGrow:1,flexDirection:"column"},".track-vertical":{borderRadius:c.shape.borderRadius(2),width:`${c.spacing(1)} !important`,right:0,bottom:c.spacing(.25),top:c.spacing(.25)},".track-horizontal":{borderRadius:c.shape.borderRadius(2),height:`${c.spacing(1)} !important`,right:c.spacing(.25),bottom:c.spacing(.25),left:c.spacing(.25)},".thumb-vertical":{background:c.colors.action.focus,borderRadius:c.shape.borderRadius(2),opacity:0},".thumb-horizontal":{background:c.colors.action.focus,borderRadius:c.shape.borderRadius(2),opacity:0},"&:hover":{".thumb-vertical, .thumb-horizontal":{opacity:1,transition:"opacity 0.3s ease-in-out"}}}),scrollbarWithScrollIndicators:(0,n.css)({".scrollbar-view":{position:"static !important"}})})},77937:(G,A,e)=>{"use strict";e.d(A,{k:()=>o});var n=e(85960),a=e(29165);function o({link:r,buttonProps:i}){return n.createElement("a",{href:r.href,target:r.target,rel:"noreferrer",onClick:r.onClick?g=>{!(g.ctrlKey||g.metaKey||g.shiftKey)&&r.onClick&&(g.preventDefault(),r.onClick(g))}:void 0},n.createElement(a.zx,{icon:r.target==="_blank"?"external-link-alt":void 0,variant:"primary",size:"sm",...i},r.title))}},91757:(G,A,e)=>{"use strict";e.d(A,{v:()=>M});var n=e(66681),a=e(19609),o=e.n(a),r=e(85960),i=e(59878),g=e(3517),u=e(10418),l=e(71650),m=e(89306),c=e(56582),d=e(93126),f=e(47257),E=e(1323),v=e(50263),h=e(24956),p=e(25142),s=e(82076);class y{getBoundingClientRect(){const O=window.getSelection(),x=O&&O.anchorNode;return x&&x.parentElement?x.parentElement.getBoundingClientRect():{top:0,left:0,bottom:0,right:0,width:0,height:0,x:0,y:0,toJSON:()=>{}}}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const C=(R,O)=>R-O*Math.floor(R/O),b={builtInVariable:{pattern:/(\${\S+?})/}},S=[(0,d.Z)({onlyIn:R=>"type"in R&&R.type==="code_block",getSyntax:()=>"links"},{...o().languages,links:b})],D=R=>({input:(0,h.H)({theme:R,invalid:!1}).input,editor:(0,n.css)({".token.builtInVariable":{color:R.colors.success.text},".token.variable":{color:R.colors.primary.text}}),suggestionsWrapper:(0,n.css)({boxShadow:R.shadows.z2}),wrapperOverrides:(0,n.css)({width:"100%","> .slate-query-field__wrapper":{padding:0,backgroundColor:"transparent",border:"none"}})}),M=(0,r.memo)(({value:R,onChange:O,suggestions:x,placeholder:I="http://your-grafana.com/d/000000010/annotations"})=>{const L=(0,r.useRef)(null),P=(0,f.wW)(D),[N,F]=(0,r.useState)(!1),[U,j]=(0,r.useState)(0),[V,_]=(0,r.useState)((0,E.l1)(R)),H=(0,g.Z)(V),[z,K]=(0,r.useState)(0),Y=(0,r.useRef)({showingSuggestions:N,suggestions:x,suggestionsIndex:U,linkUrl:V,onChange:O});Y.current={showingSuggestions:N,suggestions:x,suggestionsIndex:U,linkUrl:V,onChange:O};const k=(0,r.useRef)(null);(0,r.useEffect)(()=>{K(T(k.current,U))},[U]);const q=(0,r.useMemo)(()=>new y,[]),X=r.useCallback((re,fe)=>{if(!Y.current.showingSuggestions)return re.key==="="||re.key==="$"||re.keyCode===32&&re.ctrlKey?F(!0):fe();switch(re.key){case"Backspace":case"Escape":return F(!1),j(0);case"Enter":return re.preventDefault(),se(Y.current.suggestions[Y.current.suggestionsIndex]);case"ArrowDown":case"ArrowUp":re.preventDefault();const ie=re.key==="ArrowDown"?1:-1;return j(oe=>C(oe+ie,Y.current.suggestions.length));default:return fe()}},[]);(0,r.useEffect)(()=>{H&&H.selection.isFocused&&!V.selection.isFocused&&Y.current.onChange(u.Z.serialize(V))},[V,H]);const te=r.useCallback(({value:re})=>{_(re)},[]),se=(re,fe=L.current)=>{const oe=de()==="$";re.origin!==m.L8.Template||re.value===c.W.includeVars?fe.insertText(`${oe?"":"$"}{${re.value}}`):fe.insertText(`${oe?"":"$"}{${re.value}:queryparam}`),_(fe.value),F(!1),j(0),Y.current.onChange(u.Z.serialize(fe.value))},de=()=>{const re=document.getElementById("data-link-input");let fe="",ie,oe;return window.getSelection&&(ie=window.getSelection(),ie&&ie.rangeCount>0&&(oe=ie.getRangeAt(0).cloneRange(),oe.collapse(!0),oe.setStart(re,0),fe=oe.toString().slice(-1))),fe};return r.createElement("div",{className:P.wrapperOverrides},r.createElement("div",{className:"slate-query-field__wrapper"},r.createElement("div",{id:"data-link-input",className:"slate-query-field"},N&&r.createElement(p.h_,null,r.createElement(i.r,{referenceElement:q,placement:"bottom-end",modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"arrow",enabled:!1},{name:"offset",options:{offset:[250,0]}}]},({ref:re,style:fe,placement:ie})=>r.createElement("div",{ref:re,style:fe,"data-placement":ie,className:P.suggestionsWrapper},r.createElement(v.Z,{scrollTop:z,autoHeightMax:"300px",setScrollTop:({scrollTop:oe})=>K(oe)},r.createElement(s.T,{activeRef:k,suggestions:Y.current.suggestions,onSuggestionSelect:se,onClose:()=>F(!1),activeIndex:U}))))),r.createElement(l.ML,{schema:E.Yi,ref:L,placeholder:I,value:Y.current.linkUrl,onChange:te,onKeyDown:(re,fe,ie)=>X(re,ie),plugins:S,className:(0,n.cx)(P.editor,P.input,(0,n.css)({padding:"3px 8px"}))}))))});M.displayName="DataLinkInput";function T(R,O){return(R?.clientHeight??0)*O}},82076:(G,A,e)=>{"use strict";e.d(A,{T:()=>m});var n=e(66681),a=e(56375),o=e.n(a),r=e(85960),i=e(50883),g=e(47257),u=e(62102);const l=d=>({list:(0,n.css)({borderBottom:`1px solid ${d.colors.border.weak}`,"&:last-child":{border:"none"}}),wrapper:(0,n.css)({background:d.colors.background.primary,width:"250px"}),item:(0,n.css)({background:"none",padding:"2px 8px",userSelect:"none",color:d.colors.text.primary,cursor:"pointer","&:hover":{background:d.colors.action.hover}}),label:(0,n.css)({color:d.colors.text.secondary}),activeItem:(0,n.css)({background:d.colors.background.secondary,"&:hover":{background:d.colors.background.secondary}}),itemValue:(0,n.css)({fontFamily:d.typography.fontFamilyMonospace,fontSize:d.typography.size.sm})}),m=({suggestions:d,...f})=>{const E=(0,r.useRef)(null);(0,i.Z)(E,()=>{f.onClose&&f.onClose()});const v=(0,r.useMemo)(()=>(0,a.groupBy)(d,p=>p.origin),[d]),h=(0,g.wW)(l);return r.createElement("div",{role:"menu",ref:E,className:h.wrapper},Object.keys(v).map((p,s)=>{const y=s===0?0:Object.keys(v).reduce((C,b,S)=>S>=s?C:C+v[b].length,0);return r.createElement(c,{...f,suggestions:v[p],label:`${(0,a.capitalize)(p)}`,activeIndex:f.activeIndex,activeIndexOffset:y,key:p})}))};m.displayName="DataLinkSuggestions";const c=r.memo(({activeIndex:d,activeIndexOffset:f,label:E,onClose:v,onSuggestionSelect:h,suggestions:p,activeRef:s})=>{const y=(0,g.wW)(l);return r.createElement(r.Fragment,null,r.createElement(u.a,{className:y.list,items:p,renderItem:(C,b)=>{const S=b+f===d;return r.createElement("div",{role:"menuitem",tabIndex:0,className:(0,n.cx)(y.item,S&&y.activeItem),ref:S?s:void 0,onClick:()=>{h(C)},title:C.documentation},r.createElement("span",{className:y.itemValue},r.createElement("span",{className:y.label},E)," ",C.label))}}))});c.displayName="DataLinkSuggestionsList"},15324:(G,A,e)=>{"use strict";e.d(A,{V:()=>l});var n=e(66681),a=e(85960),o=e(92369),r=e(35326),i=e(59263),g=e(71862),u=e(69707);const l=({children:m,links:c,style:d})=>{const f=[{items:(0,r.R)(c),label:"Data links"}],E=f[0].items.length,v=()=>f.map((p,s)=>a.createElement(g.k,{key:`${p.label}${s}`,label:p.label},(p.items||[]).map((y,C)=>a.createElement(u.s,{key:`${p.label}-${s}-${C}}`,url:y.url,label:y.label,target:y.target,icon:y.icon,active:y.active,onClick:y.onClick})))),h=(0,n.css)({cursor:"context-menu"});if(E>1)return a.createElement(i.z,{renderMenuItems:v},({openMenu:p})=>m({openMenu:p,targetClassName:h}));{const p=c()[0];return a.createElement("a",{href:p.href,onClick:p.onClick,target:p.target,title:p.title,style:{...d,overflow:"hidden",display:"flex"},"aria-label":o.wl.components.DataLinksContextMenu.singleLink},m({}))}}},96394:(G,A,e)=>{"use strict";e.d(A,{d:()=>C});var n=e(66681),a=e(56375),o=e(85960),r=e(47257),i=e(29165),g=e(7288),u=e(35326),l=e(20519),m=e(24956),c=e(5999),d=e(91757);const f=S=>({listItem:(0,n.css)({marginBottom:S.spacing()}),infoText:(0,n.css)({paddingBottom:S.spacing(2),marginLeft:"66px",color:S.colors.text.secondary})}),E=o.memo(({index:S,value:D,onChange:M,suggestions:T,isLast:R})=>{const O=(0,r.wW)(f),x=(P,N)=>{M(S,{...D,url:P},N)},I=P=>{M(S,{...D,title:P.target.value})},L=()=>{M(S,{...D,targetBlank:!D.targetBlank})};return o.createElement("div",{className:O.listItem},o.createElement(l.g,{label:"Title"},o.createElement(m.I,{value:D.title,onChange:I,placeholder:"Show details"})),o.createElement(l.g,{label:"URL",invalid:(0,u.g)(D.url),error:"Data link is an Explore URL in a deprecated format. Please visit the URL to be redirected, and edit this data link to use that URL."},o.createElement(d.v,{value:D.url,onChange:x,suggestions:T})),o.createElement(l.g,{label:"Open in new tab"},o.createElement(c.r,{value:D.targetBlank||!1,onChange:L})),R&&o.createElement("div",{className:O.infoText},"With data links you can reference data variables like series name, labels and values. Type CMD+Space, CTRL+Space, or $ to open variable suggestions."))});E.displayName="DataLinkEditor";const v=({link:S,index:D,getSuggestions:M,onSave:T,onCancel:R})=>{const[O,x]=(0,o.useState)(S);return o.createElement(o.Fragment,null,o.createElement(E,{value:O,index:D,isLast:!1,suggestions:M(),onChange:(I,L)=>{x(L)}}),o.createElement(g.u.ButtonRow,null,o.createElement(i.zx,{variant:"secondary",onClick:()=>R(D),fill:"outline"},"Cancel"),o.createElement(i.zx,{onClick:()=>{T(D,O)}},"Save")))};var h=e(74321),p=e(75064);const s=({link:S,onEdit:D,onRemove:M})=>{const T=(0,r.wW)(y),{title:R="",url:O=""}=S,x=R.trim()!=="",I=O.trim()!=="",L=(0,u.g)(O);return o.createElement("div",{className:T.wrapper},o.createElement("div",{className:T.titleWrapper},o.createElement("div",{className:(0,n.cx)(T.url,!I&&T.notConfigured,L&&T.errored)},x?R:"Data link title not provided"),o.createElement("div",{className:T.actionButtons},o.createElement(p.h,{name:"pen",onClick:D,tooltip:"Edit data link title"}),o.createElement(p.h,{name:"times",onClick:M,tooltip:"Remove data link title"}))),o.createElement("div",{className:(0,n.cx)(T.url,!I&&T.notConfigured,L&&T.errored),title:O},I?O:"Data link url not provided"),L&&o.createElement(h.S,null,"Explore data link may not work in the future. Please edit."))},y=S=>({wrapper:(0,n.css)({marginBottom:S.spacing(2),width:"100%","&:last-child":{marginBottom:0},display:"flex",flexDirection:"column"}),titleWrapper:(0,n.css)({label:"data-links-list-item-title",justifyContent:"space-between",display:"flex",width:"100%",alignItems:"center"}),actionButtons:(0,n.css)({marginLeft:S.spacing(1),display:"flex"}),errored:(0,n.css)({color:S.colors.error.text,fontStyle:"italic"}),notConfigured:(0,n.css)({fontStyle:"italic"}),title:(0,n.css)({color:S.colors.text.primary,fontSize:S.typography.size.sm,fontWeight:S.typography.fontWeightMedium}),url:(0,n.css)({color:S.colors.text.secondary,fontSize:S.typography.size.sm,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"90%"})}),C=({links:S,onChange:D,getSuggestions:M,data:T})=>{const[R,O]=(0,o.useState)(null),[x,I]=(0,o.useState)(!1),L=(0,r.wW)(b),P=S??[],N=R!==null,F=(_,H)=>{if(x)if(H.title.trim()===""&&H.url.trim()===""){I(!1),O(null);return}else O(null),I(!1);const z=(0,a.cloneDeep)(P);z[_]=H,D(z),O(null)},U=()=>{let _=(0,a.cloneDeep)(P);O(_.length),I(!0)},j=_=>{x&&I(!1),O(null)},V=_=>{const H=(0,a.cloneDeep)(P);H.splice(_,1),D(H)};return o.createElement(o.Fragment,null,P.length>0&&o.createElement("div",{className:L.wrapper},P.map((_,H)=>o.createElement(s,{key:`${_.title}/${H}`,index:H,link:_,onChange:F,onEdit:()=>O(H),onRemove:()=>V(H),data:T}))),N&&R!==null&&o.createElement(g.u,{title:"Edit link",isOpen:!0,closeOnBackdropClick:!1,onDismiss:()=>{j(R)}},o.createElement(v,{index:R,link:x?{title:"",url:""}:P[R],data:T,onSave:F,onCancel:j,getSuggestions:M})),o.createElement(i.zx,{size:"sm",icon:"plus",onClick:U,variant:"secondary"},"Add link"))},b=S=>({wrapper:(0,n.css)({marginBottom:S.spacing(2)})})},18632:(G,A,e)=>{"use strict";e.d(A,{Z:()=>g});var n=e(66681),a=e(85960),o=e(47257),r=e(97666),i=e(77937);function g({links:l}){const m=(0,o.wW)(u);if(l.length===1)return a.createElement(i.k,{link:l[0]});const c=l.filter(f=>f.target==="_blank"),d=l.filter(f=>f.target==="_self");return a.createElement(a.Fragment,null,d.map((f,E)=>a.createElement(i.k,{key:E,link:f})),a.createElement("div",{className:m.wrapper},a.createElement("p",{className:m.externalLinksHeading},"External links"),c.map((f,E)=>a.createElement("a",{key:E,href:f.href,target:f.target,className:m.externalLink},a.createElement(r.J,{name:"external-link-alt"}),f.title))))}const u=l=>({wrapper:(0,n.css)({flexBasis:"150px",width:"100px",marginTop:l.spacing(1)}),externalLinksHeading:(0,n.css)({color:l.colors.text.secondary,fontWeight:l.typography.fontWeightRegular,fontSize:l.typography.size.sm,margin:0}),externalLink:(0,n.css)({color:l.colors.text.link,fontWeight:l.typography.fontWeightRegular,display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&:hover":{textDecoration:"underline"},div:{marginRight:l.spacing(1)}})})},86516:(G,A,e)=>{"use strict";e.d(A,{O:()=>r});var n=e(85960),a=e(5999),o=e(84933);function r({options:i,onOptionsChange:g}){return n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"Alerting"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(o._,{labelWidth:29,label:"Manage alert rules in Alerting UI",disabled:i.readOnly,tooltip:"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source."},n.createElement(a.x,{value:i.jsonData.manageAlerts!==!1,onChange:u=>g({...i,jsonData:{...i.jsonData,manageAlerts:u.currentTarget.checked}})}))))))}},28807:(G,A,e)=>{"use strict";e.d(A,{W:()=>u});var n=e(85960),a=e(29165),o=e(84933),r=e(81368),i=e(24956),g=e(7073);const u=({hasCert:l,label:m,onChange:c,onClick:d,placeholder:f})=>n.createElement(r.Z,null,n.createElement(o._,{label:m,labelWidth:14,disabled:l},l?n.createElement(i.I,{type:"text",value:"configured",width:24}):n.createElement(g.K,{rows:7,onChange:c,placeholder:f,required:!0})),l&&n.createElement(a.zx,{variant:"secondary",onClick:d,style:{marginLeft:4}},"Reset"))},62604:(G,A,e)=>{"use strict";e.d(A,{H:()=>f});var n=e(66681),a=e(56375),o=e.n(a),r=e(85960),i=e(47257),g=e(29165),u=e(51143),l=e(97666),m=e(14476);const c=()=>({layout:(0,n.css)({display:"flex",alignItems:"center",marginBottom:"4px","> *":{marginLeft:"4px",marginBottom:0,height:"100%","&:first-child, &:last-child":{marginLeft:0}}})}),d=({header:v,onBlur:h,onChange:p,onRemove:s,onReset:y})=>{const C=(0,i.wW)(c);return r.createElement("div",{className:C.layout},r.createElement(u.W,{label:"Header",name:"name",placeholder:"X-Custom-Header",labelWidth:5,value:v.name||"",onChange:b=>p({...v,name:b.target.value}),onBlur:h}),r.createElement(m.c,{label:"Value","aria-label":"Value",name:"value",isConfigured:v.configured,value:v.value,labelWidth:5,inputWidth:v.configured?11:12,placeholder:"Header Value",onReset:()=>y(v.id),onChange:b=>p({...v,value:b.target.value}),onBlur:h}),r.createElement(g.zx,{type:"button","aria-label":"Remove header",variant:"secondary",size:"xs",onClick:b=>s(v.id)},r.createElement(l.J,{name:"trash-alt"})))};d.displayName="CustomHeaderRow";class f extends r.PureComponent{constructor(h){super(h),this.state={headers:[]},this.updateSettings=()=>{const{headers:C}=this.state,b=Object.fromEntries(Object.entries(this.props.dataSourceConfig.jsonData).filter(([D,M])=>!D.startsWith("httpHeaderName"))),S=Object.fromEntries(Object.entries(this.props.dataSourceConfig.secureJsonData||{}).filter(([D,M])=>!D.startsWith("httpHeaderValue")));for(const[D,M]of C.entries())b[`httpHeaderName${D+1}`]=M.name,M.configured||(S[`httpHeaderValue${D+1}`]=M.value);this.props.onChange({...this.props.dataSourceConfig,jsonData:b,secureJsonData:S})},this.onHeaderAdd=()=>{this.setState(C=>({headers:[...C.headers,{id:(0,a.uniqueId)(),name:"",value:"",configured:!1}]}))},this.onHeaderChange=(C,b)=>{this.setState(({headers:S})=>({headers:S.map((D,M)=>C!==M?D:{...b})}))},this.onHeaderReset=C=>{this.setState(({headers:b})=>({headers:b.map((S,D)=>S.id!==C?S:{...S,value:"",configured:!1})}))},this.onHeaderRemove=C=>{this.setState(({headers:b})=>({headers:b.filter(S=>S.id!==C)}),this.updateSettings)};const{jsonData:p,secureJsonData:s,secureJsonFields:y}=this.props.dataSourceConfig;this.state={headers:Object.keys(p).sort().filter(C=>C.startsWith("httpHeaderName")).map((C,b)=>({id:(0,a.uniqueId)(),name:p[C],value:s!==void 0?s[C]:"",configured:y&&y[`httpHeaderValue${b+1}`]||!1}))}}render(){const{headers:h}=this.state,{dataSourceConfig:p}=this.props;return r.createElement("div",{className:"gf-form-group"},r.createElement("div",{className:"gf-form"},r.createElement("h6",null,"Custom HTTP Headers")),r.createElement("div",null,h.map((s,y)=>r.createElement(d,{key:s.id,header:s,onChange:C=>{this.onHeaderChange(y,C)},onBlur:this.updateSettings,onRemove:this.onHeaderRemove,onReset:this.onHeaderReset}))),!p.readOnly&&r.createElement("div",{className:"gf-form"},r.createElement(g.zx,{variant:"secondary",icon:"plus",type:"button",onClick:s=>{this.onHeaderAdd()}},"Add header")))}}var E=null},42337:(G,A,e)=>{"use strict";e.d(A,{E:()=>T});var n=e(66681),a=e(85960),o=e(92369),r=e(47257),i=e(51143),g=e(68921),u=e(84933),l=e(56152),m=e(97666),c=e(27436),d=e(5999),f=e(6089),E=e(14476);const v=({dataSourceConfig:R,onChange:O})=>{const x=R.secureJsonData?R.secureJsonData.basicAuthPassword:"",I=()=>{O({...R,secureJsonData:{...R.secureJsonData,basicAuthPassword:""},secureJsonFields:{...R.secureJsonFields,basicAuthPassword:!1}})},L=P=>{O({...R,secureJsonData:{...R.secureJsonData,basicAuthPassword:P.currentTarget.value}})};return a.createElement(a.Fragment,null,a.createElement(u._,{disabled:R.readOnly},a.createElement(i.W,{label:"User",labelWidth:10,inputWidth:18,placeholder:"user",value:R.basicAuthUser,onChange:P=>O({...R,basicAuthUser:P.currentTarget.value})})),a.createElement(u._,{disabled:R.readOnly},a.createElement(E.c,{isConfigured:!!(R.secureJsonFields&&R.secureJsonFields.basicAuthPassword),value:x||"",inputWidth:18,labelWidth:10,onReset:I,onChange:L})))};var h=e(62604);const p=26,s=({dataSourceConfig:R,onChange:O,showForwardOAuthIdentityOption:x=!0})=>a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-inline"},a.createElement(u._,{label:"TLS Client Auth",labelWidth:p,disabled:R.readOnly},a.createElement(d.x,{id:"http-settings-tls-client-auth",value:R.jsonData.tlsAuth||!1,onChange:I=>O({...R.jsonData,tlsAuth:I.currentTarget.checked})})),a.createElement(u._,{label:"With CA Cert",tooltip:"Needed for verifying self-signed TLS Certs",labelWidth:p,disabled:R.readOnly},a.createElement(d.x,{id:"http-settings-ca-cert",value:R.jsonData.tlsAuthWithCACert||!1,onChange:I=>O({...R.jsonData,tlsAuthWithCACert:I.currentTarget.checked})}))),a.createElement("div",{className:"gf-form-inline"},a.createElement(u._,{label:"Skip TLS Verify",labelWidth:p,disabled:R.readOnly},a.createElement(d.x,{id:"http-settings-skip-tls-verify",value:R.jsonData.tlsSkipVerify||!1,onChange:I=>O({...R.jsonData,tlsSkipVerify:I.currentTarget.checked})}))),x&&a.createElement("div",{className:"gf-form-inline"},a.createElement(u._,{label:"Forward OAuth Identity",tooltip:"Forward the user's upstream OAuth identity to the data source (Their access token gets passed along).",labelWidth:p,disabled:R.readOnly},a.createElement(d.x,{id:"http-settings-forward-oauth",value:R.jsonData.oauthPassThru||!1,onChange:I=>O({...R.jsonData,oauthPassThru:I.currentTarget.checked})}))));var y=e(9011),C=e(89135);const b=[{label:"Server (default)",value:"proxy"},{label:"Browser",value:"direct"}],S={label:"Server (default)",value:"proxy"},D=()=>a.createElement("div",{className:"grafana-info-box m-t-2"},a.createElement("p",null,"Access mode controls how requests to the data source will be handled.",a.createElement("strong",null,"\xA0",a.createElement("i",null,"Server"))," ","should be the preferred way if nothing else is stated."),a.createElement("div",{className:"alert-title"},"Server access mode (Default):"),a.createElement("p",null,"All requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source and by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the grafana backend/server if you select this access mode."),a.createElement("div",{className:"alert-title"},"Browser access mode:"),a.createElement("p",null,"All requests will be made from the browser directly to the data source and may be subject to Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this access mode.")),M=26,T=R=>{const{defaultUrl:O,dataSourceConfig:x,onChange:I,showAccessOptions:L,sigV4AuthToggleEnabled:P,showForwardOAuthIdentityOption:N,azureAuthSettings:F,renderSigV4Editor:U,secureSocksDSProxyEnabled:j,urlLabel:V,urlDocs:_}=R,[H,z]=(0,a.useState)(!1),[K,Y]=(0,a.useState)(!1),k=(0,r.l4)();let q;const X=(0,a.useCallback)(ie=>{const oe=F?.azureAuthSupported&&F.getAzureAuthEnabled(x)||!1;if(Y(oe),oe){const ue=x.jsonData.oauthPassThru!==void 0?x.jsonData.oauthPassThru:!1;ie={...ie,jsonData:{...x.jsonData,oauthPassThru:oe?!1:ue}}}I({...x,...ie})},[F,x,I]);switch(x.access){case"direct":q=a.createElement(a.Fragment,null,"Your access method is ",a.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.",_);break;case"proxy":q=a.createElement(a.Fragment,null,"Your access method is ",a.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.",_);break;default:q=a.createElement(a.Fragment,null,"Specify a complete HTTP URL (for example http://your_server:8080) ",_)}const te=a.createElement(c.Ph,{"aria-label":"Access",className:"width-20 gf-form-input",options:b,value:b.filter(ie=>ie.value===x.access)[0]||S,onChange:ie=>X({access:ie.value}),disabled:x.readOnly}),se=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(x.url),de=(0,n.css)({boxShadow:`inset 0 0px 5px ${k.v1.palette.red}`}),re=(0,n.cx)({["width-20"]:!0,[de]:!se}),fe=a.createElement(l.I,{className:re,placeholder:O,value:x.url,"aria-label":o.wl.components.DataSource.DataSourceHttpSettings.urlInput,onChange:ie=>X({url:ie.currentTarget.value}),disabled:x.readOnly});return a.createElement("div",{className:"gf-form-group"},a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"HTTP"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement(i.W,{interactive:!!_,label:V??"URL",labelWidth:13,tooltip:q,inputEl:fe})),L&&a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(i.W,{label:"Access",labelWidth:13,inputWidth:20,inputEl:te})),a.createElement("div",{className:"gf-form"},a.createElement("button",{type:"button",className:"gf-form-label query-keyword pointer",onClick:()=>z(ie=>!ie)},"Help\xA0",a.createElement(m.J,{name:H?"angle-down":"angle-right",style:{marginBottom:0}})))),H&&a.createElement(D,null)),x.access==="proxy"&&a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement(g.c,{width:13,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source."},"Allowed cookies"),a.createElement(f.B,{tags:x.jsonData.keepCookies,width:40,onChange:ie=>X({jsonData:{...x.jsonData,keepCookies:ie}}),disabled:x.readOnly})),a.createElement("div",{className:"gf-form"},a.createElement(i.W,{label:"Timeout",type:"number",labelWidth:13,inputWidth:20,tooltip:"HTTP request timeout in seconds",placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:x.jsonData.timeout,onChange:ie=>{X({jsonData:{...x.jsonData,timeout:parseInt(ie.currentTarget.value,10)}})},disabled:x.readOnly}))))),a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Auth"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form-inline"},a.createElement(u._,{label:"Basic auth",labelWidth:M,disabled:x.readOnly},a.createElement(d.x,{id:"http-settings-basic-auth",value:x.basicAuth,onChange:ie=>{X({basicAuth:ie.currentTarget.checked})}})),a.createElement(u._,{label:"With Credentials",tooltip:"Whether credentials such as cookies or auth headers should be sent with cross-site requests.",labelWidth:M,disabled:x.readOnly},a.createElement(d.x,{id:"http-settings-with-credentials",value:x.withCredentials,onChange:ie=>{X({withCredentials:ie.currentTarget.checked})}}))),F?.azureAuthSupported&&a.createElement("div",{className:"gf-form-inline"},a.createElement(u._,{label:"Azure Authentication",tooltip:"Use Azure authentication for Azure endpoint.",labelWidth:M,disabled:x.readOnly},a.createElement(d.x,{id:"http-settings-azure-auth",value:K,onChange:ie=>{X(F.setAzureAuthEnabled(x,ie.currentTarget.checked))}}))),P&&a.createElement("div",{className:"gf-form-inline"},a.createElement(u._,{label:"SigV4 auth",labelWidth:M,disabled:x.readOnly},a.createElement(d.x,{id:"http-settings-sigv4-auth",value:x.jsonData.sigV4Auth||!1,onChange:ie=>{X({jsonData:{...x.jsonData,sigV4Auth:ie.currentTarget.checked}})}}))),x.access==="proxy"&&a.createElement(s,{dataSourceConfig:x,onChange:ie=>X({jsonData:ie}),showForwardOAuthIdentityOption:K?!1:N})),x.basicAuth&&a.createElement(a.Fragment,null,a.createElement("h6",null,"Basic Auth Details"),a.createElement("div",{className:"gf-form-group"},a.createElement(v,{...R}))),F?.azureAuthSupported&&K&&F.azureSettingsUI&&a.createElement(F.azureSettingsUI,{dataSourceConfig:x,onChange:I}),x.jsonData.sigV4Auth&&P&&U,(x.jsonData.tlsAuth||x.jsonData.tlsAuthWithCACert)&&a.createElement(C.s,{dataSourceConfig:x,onChange:I}),x.access==="proxy"&&a.createElement(h.H,{dataSourceConfig:x,onChange:I})),j&&a.createElement(y.i,{options:x,onOptionsChange:I}))}},9011:(G,A,e)=>{"use strict";e.d(A,{i:()=>r});var n=e(85960),a=e(5999),o=e(84933);function r({options:i,onOptionsChange:g}){return n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"Secure Socks Proxy"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(o._,{labelWidth:26,label:"Enabled",tooltip:"Connect to this datasource via the secure socks proxy."},n.createElement(a.x,{value:i.jsonData.enableSecureSocksProxy??!1,onChange:u=>g({...i,jsonData:{...i.jsonData,enableSecureSocksProxy:u.currentTarget.checked}})}))))))}},89135:(G,A,e)=>{"use strict";e.d(A,{s:()=>u});var n=e(66681),a=e(85960),o=e(51143),r=e(97666),i=e(14607),g=e(28807);const u=({dataSourceConfig:l,onChange:m})=>{const c=l.secureJsonFields&&l.secureJsonFields.tlsCACert,d=l.secureJsonFields&&l.secureJsonFields.tlsClientCert,f=l.secureJsonFields&&l.secureJsonFields.tlsClientKey,E=l.jsonData&&l.jsonData.serverName,v=s=>y=>{y.preventDefault();const C={...l.secureJsonFields};C[s]=!1,m({...l,secureJsonFields:C})},h=s=>y=>{const C={...l.secureJsonData};C[s]=y.currentTarget.value,m({...l,secureJsonData:C})},p=s=>{const y={...l.jsonData,serverName:s.currentTarget.value};m({...l,jsonData:y})};return a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:(0,n.cx)("gf-form",(0,n.css)({alignItems:"baseline"}))},a.createElement("h6",null,"TLS/SSL Auth Details"),a.createElement(i.u,{placement:"right-end",content:"TLS/SSL Certs are encrypted and stored in the Grafana database.",theme:"info"},a.createElement(r.J,{name:"info-circle",size:"xs",style:{marginLeft:"10px"}}))),a.createElement("div",null,l.jsonData.tlsAuthWithCACert&&a.createElement(g.W,{hasCert:!!c,onChange:h("tlsCACert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",label:"CA Cert",onClick:v("tlsCACert")}),l.jsonData.tlsAuth&&a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form"},a.createElement(o.W,{label:"ServerName",labelWidth:7,inputWidth:30,placeholder:"domain.example.com",value:E&&l.jsonData.serverName,onChange:p})),a.createElement(g.W,{hasCert:!!d,label:"Client Cert",onChange:h("tlsClientCert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",onClick:v("tlsClientCert")}),a.createElement(g.W,{hasCert:!!f,label:"Client Key",placeholder:"Begins with -----BEGIN RSA PRIVATE KEY-----",onChange:h("tlsClientKey"),onClick:v("tlsClientKey")}))))}},58557:(G,A,e)=>{"use strict";e.d(A,{M:()=>l});var n=e(66681),a=e(85960),o=e(10058),r=e(47257),i=e(18975),g=e(97666),u=e(92729);const l=(0,a.memo)(d=>{const f=(0,r.wW)(c),{isOpen:E,onClose:v}=d;return E?a.createElement(i.L,{useCapture:!0,includeButtonPress:!1,onClick:v},a.createElement("div",{className:f.modal,"data-testid":"date-picker"},a.createElement(m,{...d}))):null});l.displayName="DatePicker";const m=(0,a.memo)(({value:d,minDate:f,maxDate:E,onChange:v})=>{const h=(0,r.wW)(u.mg);return a.createElement(o.ZP,{className:h.body,tileClassName:h.title,value:d||new Date,minDate:f,maxDate:E,nextLabel:a.createElement(g.J,{name:"angle-right"}),prevLabel:a.createElement(g.J,{name:"angle-left"}),onChange:p=>{p&&!Array.isArray(p)&&v(p)},locale:"en"})});m.displayName="Body";const c=d=>({modal:(0,n.css)({zIndex:d.zIndex.modal,position:"absolute",boxShadow:d.shadows.z3,backgroundColor:d.colors.background.primary,border:`1px solid ${d.colors.border.weak}`,borderTopLeftRadius:d.shape.radius.default,borderBottomLeftRadius:d.shape.radius.default,"button:disabled":{color:d.colors.text.disabled}})})},68594:(G,A,e)=>{"use strict";e.d(A,{d:()=>l});var n=e(66681),a=e(85960),o=e(85745),r=e(47257),i=e(24956),g=e(58557);const u=c=>(0,o.CQ)(c).format("L"),l=({value:c,minDate:d,maxDate:f,onChange:E,closeOnSelect:v,placeholder:h="Date",...p})=>{const[s,y]=a.useState(!1),C=(0,r.wW)(m);return a.createElement("div",{className:C.container},a.createElement(i.I,{type:"text",autoComplete:"off",placeholder:h,value:c&&u(c),onClick:()=>y(!0),onChange:b=>{b.target.value===""&&E("")},className:C.input,...p}),a.createElement(g.M,{isOpen:s,value:c&&typeof c!="string"?c:(0,o.CQ)().toDate(),minDate:d,maxDate:f,onChange:b=>{E(b),v&&y(!1)},onClose:()=>y(!1)}))},m=()=>({container:(0,n.css)({position:"relative"}),input:(0,n.css)({"input[type='date']::-webkit-inner-spin-button, input[type='date']::-webkit-calendar-picker-indicator":{display:"none",WebkitAppearance:"none"}})})},89280:(G,A,e)=>{"use strict";e.d(A,{x:()=>M});var n=e(66681),a=e(57529),o=e(89344),r=e(48925),i=e(85960),g=e(10058),u=e(39159),l=e(48459),m=e(12537),c=e(85745),d=e(25997),f=e(47257),E=e(29165),v=e(84933),h=e(97666),p=e(24956),s=e(74042),y=e(37262),C=e(25142),b=e(18300),S=e(92729),D=e(20282);const M=({date:x,maxDate:I,minDate:L,label:P,onChange:N,disabledHours:F,disabledMinutes:U,disabledSeconds:j,showSeconds:V=!0})=>{const[_,H]=(0,i.useState)(!1),z=(0,i.useRef)(null),{overlayProps:K,underlayProps:Y}=(0,r.Ir)({onClose:()=>H(!1),isDismissable:!0,isOpen:_,shouldCloseOnInteractOutside:ge=>{const Ue=document.getElementsByClassName(b.F)[0];return!(Ue&&Ue.contains(ge))}},z),{dialogProps:k}=(0,a.R)({},z),q=(0,f.l4)(),{modalBackdrop:X}=(0,f.wW)(y.J),te=(0,l.Z)(`(min-width: ${q.breakpoints.values.lg}px)`),se=(0,f.wW)(O),[de,re]=(0,i.useState)(),[fe,ie]=(0,i.useState)(),oe=(0,u.D)(de,fe,{placement:"bottom-start"}),ue=(0,i.useCallback)(ge=>{H(!1),N(ge)},[N]),me=(0,i.useCallback)(ge=>{ge.preventDefault(),H(!0)},[H]);return i.createElement("div",{"data-testid":"date-time-picker",style:{position:"relative"}},i.createElement(T,{date:x,onChange:N,isFullscreen:te,onOpen:me,label:P,ref:re,showSeconds:V}),_?te?i.createElement(C.h_,null,i.createElement(o.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("div",{ref:z,...K,...k},i.createElement(R,{date:x,onChange:ue,isFullscreen:!0,onClose:()=>H(!1),maxDate:I,minDate:L,ref:ie,style:oe.styles.popper,showSeconds:V,disabledHours:F,disabledMinutes:U,disabledSeconds:j})))):i.createElement(C.h_,null,i.createElement("div",{className:X,...Y}),i.createElement(o.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("div",{ref:z,...K,...k},i.createElement("div",{className:se.modal},i.createElement(R,{date:x,maxDate:I,minDate:L,onChange:ue,isFullscreen:!1,onClose:()=>H(!1),showSeconds:V,disabledHours:F,disabledMinutes:U,disabledSeconds:j}))))):null)},T=i.forwardRef(({date:x,label:I,onChange:L,onOpen:P,showSeconds:N=!0},F)=>{const U=N?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm",[j,V]=(0,i.useState)(()=>({value:x?(0,m.dq)(x):(0,m.dq)((0,c.CQ)()),invalid:!1}));(0,i.useEffect)(()=>{x&&V({invalid:!(0,D.J)((0,m.dq)(x,{format:U})),value:(0,c.v9)(x)?(0,m.dq)(x,{format:U}):x})},[x,U]);const _=(0,i.useCallback)(K=>{const Y=!(0,D.J)(K.currentTarget.value);V({value:K.currentTarget.value,invalid:Y})},[]),H=(0,i.useCallback)(()=>{if(!j.invalid){const K=(0,c.CQ)(j.value);L(K)}},[j,L]),z=i.createElement(E.zx,{"aria-label":"Time picker",icon:"calendar-alt",variant:"secondary",onClick:P});return i.createElement(v._,{label:I,invalid:!!(j.value&&j.invalid),className:(0,n.css)({marginBottom:0})},i.createElement(p.I,{onChange:_,addonAfter:z,value:j.value,onBlur:H,"data-testid":d.z.DateTimePicker.input,placeholder:"Select date/time",ref:F}))});T.displayName="DateTimeInput";const R=i.forwardRef(({date:x,onClose:I,onChange:L,isFullscreen:P,maxDate:N,minDate:F,style:U,showSeconds:j=!0,disabledHours:V,disabledMinutes:_,disabledSeconds:H},z)=>{const K=(0,f.wW)(S.mg),Y=(0,f.wW)(O),[k,q]=(0,i.useState)(()=>x&&x.isValid()?x.toDate():new Date),X=(0,i.useCallback)(se=>{se&&!Array.isArray(se)&&q(de=>(se.setHours(de.getHours()),se.setMinutes(de.getMinutes()),se.setSeconds(de.getSeconds()),se))},[]),te=(0,i.useCallback)(se=>{q(se.toDate())},[]);return i.createElement("div",{className:(0,n.cx)(Y.container,{[Y.fullScreen]:P}),style:U,ref:z},i.createElement(g.ZP,{next2Label:null,prev2Label:null,value:k,nextLabel:i.createElement(h.J,{name:"angle-right"}),nextAriaLabel:"Next month",prevLabel:i.createElement(h.J,{name:"angle-left"}),prevAriaLabel:"Previous month",onChange:X,locale:"en",className:K.body,tileClassName:K.title,maxDate:N,minDate:F}),i.createElement("div",{className:Y.time},i.createElement(b.y,{showSeconds:j,onChange:te,value:(0,c.CQ)(k),disabledHours:V,disabledMinutes:_,disabledSeconds:H})),i.createElement(s.Lh,null,i.createElement(E.zx,{type:"button",onClick:()=>L((0,c.CQ)(k))},"Apply"),i.createElement(E.zx,{variant:"secondary",type:"button",onClick:I},"Cancel")))});R.displayName="DateTimeCalendar";const O=x=>({container:(0,n.css)({padding:x.spacing(1),border:`1px ${x.colors.border.weak} solid`,borderRadius:x.shape.radius.default,backgroundColor:x.colors.background.primary,zIndex:x.zIndex.modal}),fullScreen:(0,n.css)({position:"absolute"}),time:(0,n.css)({marginBottom:x.spacing(2)}),modal:(0,n.css)({position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:x.zIndex.modal,maxWidth:"280px"})})},78136:(G,A,e)=>{"use strict";e.d(A,{x:()=>b});var n=e(66681),a=e(57529),o=e(89344),r=e(48925),i=e(85960),g=e(39159),u=e(47257),l=e(64793),m=e(29165),c=e(50263),d=e(20519),f=e(97666),E=e(24956),v=e(14607),h=e(55285),p=e(56642),s=e(62083),y=e(84673);const C=s.r.filter(R=>(0,y.jD)(R.from));function b(R){const{timeRange:O,onChange:x}=R,[I,L]=(0,i.useState)(!1),P=(0,i.useCallback)(()=>L(!1),[]),N=(0,y.C_)(O),[F,U]=(0,i.useState)({value:N.from,validation:(0,y.x5)(N.from)}),[j,V]=(0,i.useState)({value:N.to,validation:(0,y.x5)(N.to)}),_=(0,i.useRef)(null),{overlayProps:H,underlayProps:z}=(0,r.Ir)({onClose:()=>L(!1),isDismissable:!0,isOpen:I},_),{dialogProps:K}=(0,a.R)({},_),[Y,k]=(0,i.useState)(null),[q,X]=(0,i.useState)(null),te=(0,g.D)(Y,q,{placement:"auto-start"}),se=(0,u.wW)(M(F.validation.errorMessage,j.validation.errorMessage)),de=ie=>{const oe=(0,y.aw)(ie);oe&&(P(),U({...F,value:ie.from}),V({...j,value:ie.to}),x(oe))},re=(0,i.useCallback)(ie=>{ie.stopPropagation(),ie.preventDefault(),L(!I)},[I]),fe=ie=>{if(ie.preventDefault(),!j.validation.isValid||!F.validation.isValid)return;const oe=(0,y.aw)({from:F.value,to:j.value,display:""});oe&&(x(oe),L(!1))};return i.createElement("div",{className:se.container,ref:k},i.createElement("button",{className:se.pickerInput,type:"button",onClick:re},i.createElement("span",{className:se.clockIcon},i.createElement(f.J,{name:"clock-nine"})),i.createElement("span",null,N.from," to ",N.to),i.createElement("span",{className:se.caretIcon},i.createElement(f.J,{name:I?"angle-up":"angle-down",size:"lg"}))),I&&i.createElement("div",null,i.createElement("div",{role:"presentation",className:se.backdrop,...z}),i.createElement(o.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("div",{ref:_,...H,...K},i.createElement("div",{className:se.content,ref:X,style:te.styles.popper,...te.attributes},i.createElement("div",{className:se.body},i.createElement(c.Z,{className:se.leftSide,hideHorizontalTrack:!0},i.createElement(p.V,{title:(0,l.t)("time-picker.time-range.example-title","Example time ranges"),options:C,onChange:de,value:N})),i.createElement("div",{className:se.rightSide},i.createElement("div",{className:se.title},i.createElement(h.r,null,i.createElement(v.u,{content:i.createElement(S,null),placement:"bottom",theme:"info"},i.createElement("div",null,i.createElement(l.c,{i18nKey:"time-picker.time-range.specify"},"Specify time range ",i.createElement(f.J,{name:"info-circle"})))))),i.createElement(d.g,{label:"From",invalid:!F.validation.isValid,error:F.validation.errorMessage},i.createElement(E.I,{onClick:ie=>ie.stopPropagation(),onBlur:()=>U({...F,validation:(0,y.x5)(F.value)}),onChange:ie=>U({...F,value:ie.currentTarget.value}),value:F.value})),i.createElement(d.g,{label:"To",invalid:!j.validation.isValid,error:j.validation.errorMessage},i.createElement(E.I,{onClick:ie=>ie.stopPropagation(),onBlur:()=>V({...j,validation:(0,y.x5)(j.value)}),onChange:ie=>V({...j,value:ie.currentTarget.value}),value:j.value})),i.createElement(m.zx,{"aria-label":"TimePicker submit button",onClick:fe},"Apply time range"))))))))}const S=()=>{const R=(0,u.wW)(D);return i.createElement(i.Fragment,null,i.createElement("div",{className:R.supported},"Supported formats: ",i.createElement("code",{className:R.tooltip},"now-[digit]s/m/h/d/w")),i.createElement("div",null,"Example: to select a time range from 10 minutes ago to now"),i.createElement("code",{className:R.tooltip},"From: now-10m To: now"),i.createElement("div",{className:R.link},"For more information see"," ",i.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/"},"docs ",i.createElement(f.J,{name:"external-link-alt"})),"."))},D=R=>({supported:(0,n.css)({marginBottom:R.spacing(1)}),tooltip:(0,n.css)({margin:0}),link:(0,n.css)({marginTop:R.spacing(1)})}),M=(R,O)=>x=>{const I=(0,E.H)({theme:x,invalid:!1}),P=250+T(x,R)+T(x,O);return{backdrop:(0,n.css)({position:"fixed",zIndex:x.zIndex.modalBackdrop,top:0,right:0,bottom:0,left:0}),container:(0,n.css)({display:"flex",position:"relative"}),pickerInput:(0,n.cx)(I.input,I.wrapper,(0,n.css)({display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",paddingRight:0,paddingLeft:0,lineHeight:`${x.spacing.gridSize*x.components.height.md-2}px`})),caretIcon:(0,n.cx)(I.suffix,(0,n.css)({position:"relative",marginLeft:x.spacing(.5)})),clockIcon:(0,n.cx)(I.prefix,(0,n.css)({position:"relative",marginRight:x.spacing(.5)})),content:(0,n.css)({background:x.colors.background.primary,boxShadow:x.shadows.z3,position:"absolute",zIndex:x.zIndex.modal,width:"500px",top:"100%",borderRadius:x.shape.radius.default,border:`1px solid ${x.colors.border.weak}`,left:0,whiteSpace:"normal"}),body:(0,n.css)({display:"flex",height:`${P}px`}),description:(0,n.css)({color:x.colors.text.secondary,fontSize:x.typography.size.sm}),leftSide:(0,n.css)({width:"50% !important",borderRight:`1px solid ${x.colors.border.medium}`}),rightSide:(0,n.css)({width:"50%",padding:x.spacing(1)}),title:(0,n.css)({marginBottom:x.spacing(1)})}};function T(R,O){return O?O.length>34?R.spacing.gridSize*6.5:R.spacing.gridSize*4:0}},84673:(G,A,e)=>{"use strict";e.d(A,{C_:()=>o,aw:()=>a,jD:()=>i,x5:()=>r});const n=/^now$|^now\-(\d{1,10})([wdhms])$/,a=m=>({from:g(m.from),to:g(m.to)}),o=m=>{const c=l(m.from),d=l(m.to);return{from:c,to:d,display:`${c} to ${d}`}},r=(m,c=Date.now())=>i(m)?g(m)>Math.ceil(c/1e3)?{isValid:!1,errorMessage:"Can not enter value prior to January 1, 1970."}:{isValid:!0}:{isValid:!1,errorMessage:"Value not in relative time format."},i=m=>n.test(m),g=m=>{const c=n.exec(m);if(!c||c.length!==3)return 0;const[,d,f]=c,E=parseInt(d,10);return isNaN(E)?0:E*u[f]},u={w:604800,d:86400,h:3600,m:60,s:1},l=m=>m<=0?"now":m>=u.w&&m%u.w===0?`now-${m/u.w}w`:m>=u.d&&m%u.d===0?`now-${m/u.d}d`:m>=u.h&&m%u.h===0?`now-${m/u.h}h`:m>=u.m&&m%u.m===0?`now-${m/u.m}m`:`now-${m}s`},18300:(G,A,e)=>{"use strict";e.d(A,{F:()=>m,y:()=>c});var n=e(66681),a=e(14063),o=e(85960),r=e(85745),i=e(47257),g=e(55182),u=e(18151),l=e(97666);const m="time-of-day-picker-panel",c=({minuteStep:E=1,showHour:v=!0,showSeconds:h=!1,onChange:p,value:s,size:y="auto",disabled:C,disabledHours:b,disabledMinutes:S,disabledSeconds:D})=>{const M=(0,i.wW)(f);return o.createElement(a.Z,{className:(0,n.cx)((0,u.ht)()[y],M.input),popupClassName:(0,n.cx)(M.picker,m),defaultValue:(0,r.C_)(),onChange:T=>{if((0,r.D2)(T))return p((0,r.CQ)(T))},allowEmpty:!1,showSecond:h,value:(0,r.C_)(s),showHour:v,minuteStep:E,inputIcon:o.createElement(d,{wrapperStyle:M.caretWrapper}),disabled:C,disabledHours:b,disabledMinutes:S,disabledSeconds:D})},d=({wrapperStyle:E=""})=>o.createElement("div",{className:E},o.createElement(l.J,{name:"angle-down"})),f=E=>{const v=E.components.input.background,h=E.v1.palette.black,p=E.colors.background.secondary,s=E.shape.radius.default,y=E.components.input.borderColor;return{caretWrapper:(0,n.css)({position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",display:"inline-block",textAlign:"right",color:E.colors.text.secondary}),picker:(0,n.css)({".rc-time-picker-panel-select":{fontSize:"14px",backgroundColor:v,borderColor:y,li:{outlineWidth:"2px","&.rc-time-picker-panel-select-option-selected":{backgroundColor:"inherit",border:`1px solid ${E.v1.palette.orange}`,borderRadius:s},"&:hover":{background:p},"&.rc-time-picker-panel-select-option-disabled":{color:E.colors.action.disabledText}}},".rc-time-picker-panel-inner":{boxShadow:`0px 4px 4px ${h}`,backgroundColor:v,borderColor:y,borderRadius:s,marginTop:"3px",".rc-time-picker-panel-input-wrap":{marginRight:"2px","&, .rc-time-picker-panel-input":{backgroundColor:v,paddingTop:"2px"}},".rc-time-picker-panel-combobox":{display:"flex"}}}),input:(0,n.css)({".rc-time-picker-input":{backgroundColor:v,borderRadius:s,borderColor:y,height:E.spacing(4),"&:focus":(0,g.getFocusStyles)(E),"&:disabled":{backgroundColor:E.colors.action.disabledBackground,color:E.colors.action.disabledText,border:`1px solid ${E.colors.action.disabledBackground}`,"&:focus":{boxShadow:"none"}}}})}}},76275:(G,A,e)=>{"use strict";e.d(A,{K:()=>h});var n=e(66681),a=e(85960),o=e(85745),r=e(9833),i=e(92369),g=e(47257),u=e(18975),l=e(97666),m=e(24956),c=e(90690),d=e(93738),f=e(62083),E=e(20282);const v=()=>{},h=({value:s,onChange:y,onChangeTimeZone:C=v,clearable:b,hideTimeZone:S=!0,timeZone:D="browser",placeholder:M="Select time range",isReversed:T=!0,hideQuickRanges:R=!1,disabled:O=!1,showIcon:x=!1})=>{const[I,L]=(0,a.useState)(!1),P=(0,g.wW)(p,O),N=V=>{V.stopPropagation(),V.preventDefault(),!O&&L(!I)},F=()=>{L(!1)},U=V=>{F(),y(V)},j=V=>{V.stopPropagation();const _=(0,o.CQ)(null),H=(0,o.CQ)(null);y({from:_,to:H,raw:{from:_,to:H}})};return a.createElement("div",{className:P.container},a.createElement("button",{type:"button",className:P.pickerInput,"aria-label":i.wl.components.TimePicker.openButton,onClick:N},x&&a.createElement(l.J,{name:"clock-nine",size:"sm",className:P.icon}),a.createElement(d.q,{value:s,timeZone:D,placeholder:M}),!O&&a.createElement("span",{className:P.caretIcon},(0,E.v)(s)&&b&&a.createElement(l.J,{className:P.clearIcon,name:"times",size:"lg",onClick:j}),a.createElement(l.J,{name:I?"angle-up":"angle-down",size:"lg"}))),I&&a.createElement(u.L,{includeButtonPress:!1,onClick:F},a.createElement(c.x,{timeZone:D,value:(0,E.v)(s)?s:(0,r.JK)(),onChange:U,quickOptions:f.r,onChangeTimeZone:C,className:P.content,hideTimeZone:S,isReversed:T,hideQuickRanges:R})))},p=(s,y=!1)=>{const C=(0,m.H)({theme:s,invalid:!1});return{container:(0,n.css)({display:"flex",position:"relative"}),content:(0,n.css)({marginLeft:0,position:"absolute",top:"116%",zIndex:s.zIndex.dropdown}),pickerInput:(0,n.cx)(C.input,y&&C.inputDisabled,C.wrapper,(0,n.css)({display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",paddingRight:0,lineHeight:`${s.spacing.gridSize*4-2}px`})),caretIcon:(0,n.cx)(C.suffix,(0,n.css)({position:"relative",top:"-1px",marginLeft:s.spacing(.5)})),clearIcon:(0,n.css)({marginRight:s.spacing(.5),"&:hover":{color:s.colors.text.maxContrast}}),placeholder:(0,n.css)({color:s.colors.text.disabled,opacity:1}),icon:(0,n.css)({marginRight:s.spacing(.5)})}}},56399:(G,A,e)=>{"use strict";e.d(A,{IF:()=>S,Xc:()=>C,sU:()=>D});var n=e(66681),a=e(57529),o=e(89344),r=e(48925),i=e(85960),g=e(71244),u=e(12537),l=e(72623),m=e(13446),c=e(92369),d=e(47257),f=e(64793),E=e(82541),v=e(37262),h=e(40235),p=e(14607),s=e(90690),y=e(62083);function C(O){const[x,I]=(0,i.useState)(!1),{value:L,onMoveBackward:P,onMoveForward:N,onZoom:F,timeZone:U,fiscalYearStartMonth:j,timeSyncButton:V,isSynced:_,history:H,onChangeTimeZone:z,onChangeFiscalYearStartMonth:K,hideQuickRanges:Y,widthOverride:k,isOnCanvas:q,onToolbarTimePickerClick:X}=O,te=ye=>{O.onChange(ye),I(!1)};(0,i.useEffect)(()=>{x&&X&&X()},[x,X]);const se=()=>{I(ye=>!ye)},de=()=>{I(!1)},re=(0,i.createRef)(),fe=(0,i.createRef)(),{overlayProps:ie,underlayProps:oe}=(0,r.Ir)({onClose:de,isDismissable:!0,isOpen:x,shouldCloseOnInteractOutside:ye=>!fe.current?.contains(ye)},re),{dialogProps:ue}=(0,a.R)({},re),me=(0,d.wW)(T),{modalBackdrop:ge}=(0,d.wW)(v.J),Ue=!g.isRelativeTime(L.raw.from)||!g.isRelativeTime(L.raw.to),De=_?"active":q?"canvas":"default",Pe=M(L,U);return i.createElement(E.h,{className:me.container},Ue&&i.createElement(h.h,{"aria-label":(0,f.t)("time-picker.range-picker.backwards-time-aria-label","Move time range backwards"),variant:De,onClick:P,icon:"angle-left",narrow:!0}),i.createElement(p.u,{ref:fe,content:i.createElement(S,{timeRange:L,timeZone:U}),placement:"bottom",interactive:!0},i.createElement(h.h,{"data-testid":c.wl.components.TimePicker.openButton,"aria-label":(0,f.t)("time-picker.range-picker.current-time-selected","Time range selected: {{currentTimeRange}}",{currentTimeRange:Pe}),"aria-controls":"TimePickerContent",onClick:se,icon:"clock-nine",isOpen:x,variant:De},i.createElement(D,{...O}))),x&&i.createElement("div",{"data-testid":c.wl.components.TimePicker.overlayContent},i.createElement("div",{role:"presentation",className:(0,n.cx)(ge,me.backdrop),...oe}),i.createElement(o.MT,{contain:!0,autoFocus:!0},i.createElement("section",{className:me.content,ref:re,...ie,...ue},i.createElement(s.x,{timeZone:U,fiscalYearStartMonth:j,value:L,onChange:te,quickOptions:y.r,history:H,showHistory:!0,widthOverride:k,onChangeTimeZone:z,onChangeFiscalYearStartMonth:K,hideQuickRanges:Y})))),V,Ue&&i.createElement(h.h,{"aria-label":(0,f.t)("time-picker.range-picker.forwards-time-aria-label","Move time range forwards"),onClick:N,icon:"angle-right",narrow:!0,variant:De}),i.createElement(p.u,{content:b,placement:"bottom"},i.createElement(h.h,{"aria-label":(0,f.t)("time-picker.range-picker.zoom-out-button","Zoom out time range"),onClick:F,icon:"search-minus",variant:De})))}C.displayName="TimeRangePicker";const b=()=>i.createElement(i.Fragment,null,i.createElement(f.c,{i18nKey:"time-picker.range-picker.zoom-out-tooltip"},"Time range zoom out ",i.createElement("br",null)," CTRL+Z")),S=({timeRange:O,timeZone:x})=>{const I=(0,d.wW)(R);return i.createElement(i.Fragment,null,(0,u.dq)(O.from,{timeZone:x}),i.createElement("div",{className:"text-center"},i.createElement(f.c,{i18nKey:"time-picker.range-picker.to"},"to")),(0,u.dq)(O.to,{timeZone:x}),i.createElement("div",{className:"text-center"},i.createElement("span",{className:I.utc},(0,l.Vs)(x))))},D=(0,i.memo)(({hideText:O,value:x,timeZone:I})=>{const L=(0,d.wW)(R);return O?null:i.createElement("span",{className:L.container},i.createElement("span",null,M(x,I)),i.createElement("span",{className:L.utc},g.describeTimeRangeAbbreviation(x,I)))});D.displayName="TimePickerButtonLabel";const M=(O,x)=>{const I={to:m.isMathString(O.raw.to)?O.raw.to:O.to,from:m.isMathString(O.raw.from)?O.raw.from:O.from};return g.describeTimeRange(I,x)},T=O=>({container:(0,n.css)({position:"relative",display:"flex",verticalAlign:"middle"}),backdrop:(0,n.css)({display:"none",[O.breakpoints.down("sm")]:{display:"block"}}),content:(0,n.css)({position:"absolute",right:0,top:"116%",zIndex:O.zIndex.dropdown,[O.breakpoints.down("sm")]:{position:"fixed",right:"50%",top:"50%",transform:"translate(50%, -50%)",zIndex:O.zIndex.modal}})}),R=O=>({container:(0,n.css)({display:"flex",alignItems:"center",whiteSpace:"nowrap"}),utc:(0,n.css)({color:O.v1.palette.orange,fontSize:O.typography.size.sm,paddingLeft:"6px",lineHeight:"28px",verticalAlign:"bottom",fontWeight:O.typography.fontWeightMedium})})},92729:(G,A,e)=>{"use strict";e.d(A,{mg:()=>E,uT:()=>l});var n=e(66681),a=e(85960),o=e(10058),r=e(72623),i=e(61385),g=e(47257),u=e(97666);function l({onChange:v,from:h,to:p,timeZone:s}){const y=m(h,p,new Date,s),C=d(v,s),b=(0,g.wW)(E);return a.createElement(o.ZP,{selectRange:!0,next2Label:null,prev2Label:null,className:b.body,tileClassName:b.title,value:y,nextLabel:a.createElement(u.J,{name:"angle-right"}),prevLabel:a.createElement(u.J,{name:"angle-left"}),onChange:C,locale:"en"})}l.displayName="Body";function m(v,h,p=new Date,s){let y=v.isValid()?v.toDate():p,C=h.isValid()?h.toDate():p;return s&&([y,C]=c(y,C,s)),y>C?[C,y]:[y,C]}function c(v,h,p){const s=(0,r.nA)(p);if(!s)return[v,h];const y=s.utcOffset(v.getTime()),C=s.utcOffset(h.getTime()),b=v.getTimezoneOffset(),S=h.getTimezoneOffset(),D=y-b,M=C-S,T=new Date(v.getTime()-D*1e3*60),R=new Date(h.getTime()-M*1e3*60);return[T,R]}function d(v,h){return(0,a.useCallback)(p=>{if(!Array.isArray(p))return console.error("onCalendarChange: should be run in selectRange={true}");if(p[0]&&p[1]){const s=(0,i.J)(f(p[0]),{timeZone:h}),y=(0,i.J)(f(p[1]),{timeZone:h});v(s,y)}},[v,h])}function f(v){return[v.getFullYear(),v.getMonth(),v.getDate(),v.getHours(),v.getMinutes(),v.getSeconds()]}const E=v=>{const h=".react-calendar__tile--hasActive:not(.react-calendar__tile--range)";return{title:(0,n.css)({color:v.colors.text.primary,backgroundColor:v.colors.background.primary,fontSize:v.typography.size.md,border:"1px solid transparent","&:hover":{position:"relative"},"&:disabled":{color:v.colors.action.disabledText}}),body:(0,n.css)({zIndex:v.zIndex.modal,backgroundColor:v.colors.background.primary,width:"268px",".react-calendar__navigation":{display:"flex"},".react-calendar__navigation__label, .react-calendar__navigation__arrow, .react-calendar__navigation":{paddingTop:"4px",backgroundColor:"inherit",color:v.colors.text.primary,border:0,fontWeight:v.typography.fontWeightMedium},".react-calendar__month-view__weekdays":{backgroundColor:"inherit",textAlign:"center",color:v.colors.primary.text,abbr:{border:0,textDecoration:"none",cursor:"default",display:"block",padding:"4px 0 4px 0"}},".react-calendar__month-view__days":{backgroundColor:"inherit"},".react-calendar__tile, .react-calendar__tile--now":{marginBottom:"4px",backgroundColor:"inherit",height:"26px"},".react-calendar__navigation__label, .react-calendar__navigation > button:focus, .time-picker-calendar-tile:focus":{outline:0},[`${h}, .react-calendar__tile--active, .react-calendar__tile--active:hover`]:{color:v.colors.primary.contrastText,fontWeight:v.typography.fontWeightMedium,background:v.colors.primary.main,boxShadow:"none",border:"0px"},".react-calendar__tile--rangeEnd, .react-calendar__tile--rangeStart":{padding:0,border:"0px",color:v.colors.primary.contrastText,fontWeight:v.typography.fontWeightMedium,background:v.colors.primary.main,abbr:{backgroundColor:v.colors.primary.main,borderRadius:"100px",display:"block",paddingTop:"2px",height:"26px"}},[`${h}, .react-calendar__tile--rangeStart`]:{borderTopLeftRadius:"20px",borderBottomLeftRadius:"20px"},[`${h}, .react-calendar__tile--rangeEnd`]:{borderTopRightRadius:"20px",borderBottomRightRadius:"20px"}})}}},90690:(G,A,e)=>{"use strict";e.d(A,{x:()=>ge});var n=e(66681),a=e(85960),o=e(85745),r=e(71244),i=e(92369),g=e(47257),u=e(55182),l=e(64793),m=e(50263),c=e(96535),d=e(97666),f=e(56375),E=e(72623),v=e(29165),h=e(20519),p=e(5106),s=e(27436),y=e(76310),C=e(35753),b=e(95642),S=e(28269),D=e(62083);const M=Me=>{const{timeZone:He,fiscalYearStartMonth:Ve,timestamp:Oe=Date.now(),onChangeTimeZone:Ne,onChangeFiscalYearStartMonth:_e}=Me,[qe,rt]=(0,a.useState)(!1),[mt,Je]=(0,a.useState)("tz"),Ae=(0,a.useCallback)(ne=>{ne&&ne.stopPropagation(),rt(!qe)},[qe,rt]),Ke=(0,g.wW)(T);if(!(0,f.isString)(He))return null;const Xe=(0,E.Pr)(He,Oe);return Xe?a.createElement("div",null,a.createElement("section",{"aria-label":(0,l.t)("time-picker.footer.time-zone-selection","Time zone selection"),className:Ke.container},a.createElement("div",{className:Ke.timeZoneContainer},a.createElement("div",{className:Ke.timeZone},a.createElement(S.d,{title:Xe.name}),a.createElement("div",{className:Ke.spacer}),a.createElement(C.K,{info:Xe})),a.createElement(b.v,{timeZone:He,timestamp:Oe})),a.createElement("div",{className:Ke.spacer}),a.createElement(v.zx,{variant:"secondary",onClick:Ae,size:"sm"},a.createElement(l.c,{i18nKey:"time-picker.footer.change-settings-button"},"Change time settings"))),qe?a.createElement("div",{className:Ke.editContainer},a.createElement("div",null,a.createElement(p.S,{value:mt,options:[{label:(0,l.t)("time-picker.footer.time-zone-option","Time zone"),value:"tz"},{label:(0,l.t)("time-picker.footer.fiscal-year-option","Fiscal year"),value:"fy"}],onChange:Je})),mt==="tz"?a.createElement("section",{"data-testid":i.wl.components.TimeZonePicker.containerV2,className:(0,n.cx)(Ke.timeZoneContainer,Ke.timeSettingContainer)},a.createElement(y.O,{includeInternal:!0,onChange:ne=>{Ae(),(0,f.isString)(ne)&&Ne(ne)},onBlur:Ae,menuShouldPortal:!1})):a.createElement("section",{"data-testid":i.wl.components.TimeZonePicker.containerV2,className:(0,n.cx)(Ke.timeZoneContainer,Ke.timeSettingContainer)},a.createElement(h.g,{className:Ke.fiscalYearField,label:(0,l.t)("time-picker.footer.fiscal-year-start","Fiscal year start month")},a.createElement(s.Ph,{value:Ve,menuShouldPortal:!1,options:D.E,onChange:ne=>{_e&&_e(ne.value??0)}})))):null):null},T=Me=>({container:(0,n.css)({borderTop:`1px solid ${Me.colors.border.weak}`,padding:"11px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}),editContainer:(0,n.css)({borderTop:`1px solid ${Me.colors.border.weak}`,padding:"11px",justifyContent:"space-between",alignItems:"center"}),spacer:(0,n.css)({marginLeft:"7px"}),timeSettingContainer:(0,n.css)({paddingTop:Me.spacing(1)}),fiscalYearField:(0,n.css)({marginBottom:0}),timeZoneContainer:(0,n.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",flexGrow:1}),timeZone:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"baseline",flexGrow:1})});var R=e(55285),O=e(61385),x=e(12537),I=e(24956),L=e(14607),P=e(20282),N=e(57529),F=e(89344),U=e(48925),j=e(37262),V=e(92729),_=e(13086);function H({onClose:Me,onApply:He}){return a.createElement(_.K,{gap:2,justifyContent:"space-between"},a.createElement(v.zx,{variant:"secondary",onClick:Me},a.createElement(l.c,{i18nKey:"time-picker.calendar.cancel-button"},"Cancel")),a.createElement(v.zx,{onClick:He},a.createElement(l.c,{i18nKey:"time-picker.calendar.apply-button"},"Apply time range")))}H.displayName="Footer";var z=e(75064);function K({onClose:Me}){return a.createElement(_.K,{justifyContent:"space-between"},a.createElement(R.r,null,a.createElement(l.c,{i18nKey:"time-picker.calendar.select-time"},"Select a time range")),a.createElement(z.h,{"data-testid":i.wl.components.TimePicker.calendar.closeButton,tooltip:(0,l.t)("time-picker.calendar.close","Close calendar"),name:"times",variant:"secondary",onClick:Me}))}K.displayName="Header";const Y=(Me,He=!1)=>({container:(0,n.css)({top:0,position:"absolute",[`${He?"left":"right"}`]:"546px"}),modalContainer:(0,n.css)({label:"modalContainer",margin:"0 auto"}),calendar:(0,n.css)({display:"flex",flexDirection:"column",gap:Me.spacing(1),padding:Me.spacing(1),label:"calendar",boxShadow:Me.shadows.z3,backgroundColor:Me.colors.background.primary,border:`1px solid ${Me.colors.border.weak}`,borderRadius:Me.shape.radius.default}),modal:(0,n.css)({label:"modal",boxShadow:Me.shadows.z3,left:"50%",position:"fixed",top:"50%",transform:"translate(-50%, -50%)",zIndex:Me.zIndex.modal})});function k(Me){const He=(0,g.l4)(),{modalBackdrop:Ve}=(0,g.wW)(j.J),Oe=Y(He,Me.isReversed),{isOpen:Ne,isFullscreen:_e,onClose:qe}=Me,rt=a.createRef(),{dialogProps:mt}=(0,N.R)({"aria-label":i.wl.components.TimePicker.calendar.label},rt),{overlayProps:Je}=(0,U.Ir)({isDismissable:!0,isOpen:Ne,onClose:qe},rt),Ae=!_e;if(!Ne)return null;const Ke=a.createElement("section",{className:Oe.calendar,ref:rt,...Je,...mt,"data-testid":i.wl.components.TimePicker.calendar.label},a.createElement(K,{...Me}),a.createElement(V.uT,{...Me}),Ae&&a.createElement(H,{...Me}));return Ae?a.createElement(U.Xj,null,a.createElement("div",{className:Ve}),a.createElement(F.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},a.createElement("div",{className:Oe.modal},a.createElement("div",{className:Oe.modalContainer},Ke)))):a.createElement(F.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},a.createElement("div",{className:Oe.container},Ke))}const q=(0,a.memo)(k);k.displayName="TimePickerCalendar";const X={default:()=>(0,l.t)("time-picker.range-content.default-error",'Please enter a past date or "now"'),range:()=>(0,l.t)("time-picker.range-content.range-error",`"From" can't be after "To"`)},te=Me=>{const{value:He,isFullscreen:Ve=!1,timeZone:Oe,onApply:Ne,isReversed:_e,fiscalYearStartMonth:qe}=Me,[rt,mt]=de(He.raw.from,He.raw.to,Oe),Je=(0,g.wW)(fe),[Ae,Ke]=(0,a.useState)(rt),[Xe,ne]=(0,a.useState)(mt),[Z,ee]=(0,a.useState)(!1),ce=(0,a.useId)(),be=(0,a.useId)();(0,a.useEffect)(()=>{const[it,vt]=de(He.raw.from,He.raw.to,Oe);Ke(it),ne(vt)},[He.raw.from,He.raw.to,Oe]);const Ee=(0,a.useCallback)(it=>{it.preventDefault(),ee(!0)},[ee]),Be=(0,a.useCallback)(()=>{if(Xe.invalid||Ae.invalid)return;const it={from:Ae.value,to:Xe.value},vt=r.convertRawToRange(it,Oe,qe);Ne(vt)},[Ae.invalid,Ae.value,Ne,Oe,Xe.invalid,Xe.value,qe]),Le=(0,a.useCallback)((it,vt)=>{const[yt,Wt]=de(it,vt,Oe);Ke(yt),ne(Wt)},[Oe]),ze=it=>{it.key==="Enter"&&Be()},Fe=r.convertRawToRange({from:"now/fy",to:"now/fy"},Oe,qe),$e=(0,l.t)("time-picker.range-content.fiscal-year","Fiscal year"),et=a.createElement("div",{className:Je.tooltip},r.isFiscal(He)?a.createElement(L.u,{content:`${$e}: ${Fe.from.format("MMM-DD")} - ${Fe.to.format("MMM-DD")}`},a.createElement(d.J,{name:"info-circle"})):null),tt=a.createElement(v.zx,{"aria-label":(0,l.t)("time-picker.range-content.open-input-calendar","Open calendar"),"data-testid":i.wl.components.TimePicker.calendar.openButton,icon:"calendar-alt",variant:"secondary",type:"button",onClick:Ee});return a.createElement("div",null,a.createElement("div",{className:Je.fieldContainer},a.createElement(h.g,{label:(0,l.t)("time-picker.range-content.from-input","From"),invalid:Ae.invalid,error:Ae.errorMessage},a.createElement(I.I,{id:ce,onClick:it=>it.stopPropagation(),onChange:it=>Le(it.currentTarget.value,Xe.value),addonAfter:tt,onKeyDown:ze,"data-testid":i.wl.components.TimePicker.fromField,value:Ae.value})),et),a.createElement("div",{className:Je.fieldContainer},a.createElement(h.g,{label:(0,l.t)("time-picker.range-content.to-input","To"),invalid:Xe.invalid,error:Xe.errorMessage},a.createElement(I.I,{id:be,onClick:it=>it.stopPropagation(),onChange:it=>Le(Ae.value,it.currentTarget.value),addonAfter:tt,onKeyDown:ze,"data-testid":i.wl.components.TimePicker.toField,value:Xe.value})),et),a.createElement(v.zx,{"data-testid":i.wl.components.TimePicker.applyTimeRange,type:"button",onClick:Be},a.createElement(l.c,{i18nKey:"time-picker.range-content.apply-button"},"Apply time range")),a.createElement(q,{isFullscreen:Ve,isOpen:Z,from:(0,O.J)(Ae.value,{timeZone:Oe}),to:(0,O.J)(Xe.value,{timeZone:Oe}),onApply:Be,onClose:()=>ee(!1),onChange:Le,timeZone:Oe,isReversed:_e}))};function se(Me,He,Ve){const Oe={from:Me,to:He},Ne=r.convertRawToRange(Oe,Ve);return!(Ne.from.isSame(Ne.to)||Ne.from.isBefore(Ne.to))}function de(Me,He,Ve){const Oe=re(Me,Ve),Ne=re(He,Ve),_e=!(0,P.J)(Oe,!1,Ve),qe=!(0,P.J)(Ne,!0,Ve),rt=se(Oe,Ne,Ve)&&!qe;return[{value:Oe,invalid:_e||rt,errorMessage:rt&&!_e?X.range():X.default()},{value:Ne,invalid:qe,errorMessage:X.default()}]}function re(Me,He){return(0,o.v9)(Me)?(0,x.dq)(Me,{timeZone:He}):Me}function fe(Me){return{fieldContainer:(0,n.css)({display:"flex"}),tooltip:(0,n.css)({paddingLeft:Me.spacing(1),paddingTop:Me.spacing(3)})}}var ie=e(56642);const oe=(Me,He)=>r.convertRawToRange({from:Me.from,to:Me.to},He),ue=(Me,He)=>{const Ve=(0,x.dq)(Me.from,{timeZone:He}),Oe=(0,x.dq)(Me.to,{timeZone:He});return{from:Ve,to:Oe,display:`${Ve} to ${Oe}`}},me=Me=>{const{quickOptions:He=[],isReversed:Ve,isFullscreen:Oe,hideQuickRanges:Ne,timeZone:_e,fiscalYearStartMonth:qe,value:rt,onChange:mt,history:Je,showHistory:Ae,className:Ke,hideTimeZone:Xe,onChangeTimeZone:ne,onChangeFiscalYearStartMonth:Z}=Me,ee=!Je?.length,ce=Oe&&Ae||!Oe&&(Ae&&!ee||!Ne),be=(0,g.wW)(nt,Ve,Ne,ce,Oe),Ee=ye(Je,_e),Be=Te(rt.raw,He),[Le,ze]=(0,a.useState)(""),Fe=He.filter(et=>et.display.toLowerCase().includes(Le.toLowerCase())),$e=et=>mt(oe(et));return a.createElement("div",{id:"TimePickerContent",className:(0,n.cx)(be.container,Ke)},a.createElement("div",{className:be.body},(!Oe||!Ne)&&a.createElement("div",{className:be.rightSide},a.createElement("div",{className:be.timeRangeFilter},a.createElement(c.H,{width:0,autoFocus:!0,value:Le,onChange:ze,placeholder:(0,l.t)("time-picker.content.filter-placeholder","Search quick ranges")})),a.createElement(m.$,null,!Oe&&a.createElement(Ue,{...Me,historyOptions:Ee}),!Ne&&a.createElement(ie.V,{options:Fe,onChange:$e,value:Be}))),Oe&&a.createElement("div",{className:be.leftSide},a.createElement(De,{...Me,historyOptions:Ee}))),!Xe&&Oe&&a.createElement(M,{timeZone:_e,fiscalYearStartMonth:qe,onChangeTimeZone:ne,onChangeFiscalYearStartMonth:Z}))},ge=Me=>{const{widthOverride:He}=Me,Ve=(0,g.l4)(),Oe=(He||window.innerWidth)>=Ve.breakpoints.values.lg;return a.createElement(me,{...Me,isFullscreen:Oe})},Ue=Me=>{const{value:He,hideQuickRanges:Ve,onChange:Oe,timeZone:Ne,historyOptions:_e=[],showHistory:qe}=Me,rt=(0,g.wW)(ct),mt=(0,o.v9)(He.raw.from)||(0,o.v9)(He.raw.to),[Je,Ae]=(0,a.useState)(!mt),Ke=Ve?!1:Je,Xe=ne=>Oe(oe(ne,Ne));return a.createElement("fieldset",null,a.createElement("div",{className:rt.header},a.createElement("button",{type:"button",className:rt.expandButton,onClick:()=>{Ve||Ae(!Ke)},"data-testid":i.wl.components.TimePicker.absoluteTimeRangeTitle,"aria-expanded":!Ke,"aria-controls":"expanded-timerange"},a.createElement(R.r,null,a.createElement(l.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range")),!Ve&&a.createElement(d.J,{name:Ke?"angle-down":"angle-up"}))),!Ke&&a.createElement("div",{className:rt.body,id:"expanded-timerange"},a.createElement("div",{className:rt.form},a.createElement(te,{value:He,onApply:Oe,timeZone:Ne,isFullscreen:!1})),qe&&a.createElement(ie.V,{title:(0,l.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:_e,onChange:Xe,placeholderEmpty:null})))},De=Me=>{const{onChange:He,value:Ve,timeZone:Oe,fiscalYearStartMonth:Ne,isReversed:_e,historyOptions:qe}=Me,rt=(0,g.wW)(he,Me.hideQuickRanges),mt=Je=>He(oe(Je,Oe));return a.createElement(a.Fragment,null,a.createElement("div",{className:rt.container},a.createElement("div",{className:rt.title,"data-testid":i.wl.components.TimePicker.absoluteTimeRangeTitle},a.createElement(R.r,null,a.createElement(l.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range"))),a.createElement(te,{value:Ve,timeZone:Oe,fiscalYearStartMonth:Ne,onApply:He,isFullscreen:!0,isReversed:_e})),Me.showHistory&&a.createElement("div",{className:rt.recent},a.createElement(ie.V,{title:(0,l.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:qe||[],onChange:mt,placeholderEmpty:a.createElement(Pe,null)})))},Pe=(0,a.memo)(()=>{const Me=(0,g.wW)(xe),He=(0,l.t)("time-picker.content.empty-recent-list-info","It looks like you haven't used this time picker before. As soon as you enter some time intervals, recently used intervals will appear here.");return a.createElement("div",{className:Me.container},a.createElement("div",null,a.createElement("span",null,He)),a.createElement(l.c,{i18nKey:"time-picker.content.empty-recent-list-docs"},a.createElement("div",null,a.createElement("a",{className:Me.link,href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls",target:"_new"},"Read the documentation"),a.createElement("span",null," to find out more about how to enter custom time ranges."))))});function ye(Me,He){return!Array.isArray(Me)||Me.length===0?[]:Me.map(Ve=>ue(Ve,He))}Pe.displayName="EmptyRecentList";const Te=(Me,He)=>(0,a.useMemo)(()=>{if(r.isRelativeTimeRange(Me))return He.find(Ve=>Ve.from===Me.from&&Ve.to===Me.to)},[Me,He]),nt=(Me,He,Ve,Oe,Ne)=>({container:(0,n.css)({background:Me.colors.background.primary,boxShadow:Me.shadows.z3,width:`${Ne?"546px":"262px"}`,borderRadius:Me.shape.radius.default,border:`1px solid ${Me.colors.border.weak}`,[`${He?"left":"right"}`]:0}),body:(0,n.css)({display:"flex",flexDirection:"row-reverse",height:`${Oe?"381px":"217px"}`,maxHeight:"100vh"}),leftSide:(0,n.css)({display:"flex",flexDirection:"column",borderRight:`${He?"none":`1px solid ${Me.colors.border.weak}`}`,width:`${Ve?"100%":"60%"}`,overflow:"hidden",order:He?1:0}),rightSide:(0,n.css)({width:`${Ne?"40%":"100%"}; !important`,borderRight:He?`1px solid ${Me.colors.border.weak}`:"none",display:"flex",flexDirection:"column"}),timeRangeFilter:(0,n.css)({padding:Me.spacing(1)}),spacing:(0,n.css)({marginTop:"16px"})}),ct=Me=>({header:(0,n.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${Me.colors.border.weak}`,padding:"7px 9px 7px 9px"}),expandButton:(0,n.css)({backgroundColor:"transparent",border:"none",display:"flex",width:"100%","&:focus-visible":(0,u.getFocusStyles)(Me)}),body:(0,n.css)({borderBottom:`1px solid ${Me.colors.border.weak}`}),form:(0,n.css)({padding:"7px 9px 7px 9px"})}),he=(Me,He)=>({container:(0,n.css)({paddingTop:"9px",paddingLeft:"11px",paddingRight:He?"11px":"20%"}),title:(0,n.css)({marginBottom:"11px"}),recent:(0,n.css)({flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"flex-end",paddingTop:Me.spacing(1)})}),xe=Me=>({container:(0,n.css)({padding:"12px",margin:"12px","a, span":{fontSize:"13px"}}),link:(0,n.css)({color:Me.colors.text.link})})},55285:(G,A,e)=>{"use strict";e.d(A,{r:()=>i});var n=e(66681),a=e(85960),o=e(47257);const r=g=>({text:(0,n.css)({fontSize:g.typography.size.md,fontWeight:g.typography.fontWeightMedium,color:g.colors.text.primary,margin:0,display:"flex"})}),i=(0,a.memo)(({children:g})=>{const u=(0,o.wW)(r);return a.createElement("h3",{className:u.text},g)});i.displayName="TimePickerTitle"},93738:(G,A,e)=>{"use strict";e.d(A,{q:()=>g});var n=e(66681),a=e(85960),o=e(47257),r=e(56399),i=e(20282);const g=(0,a.memo)(function({hideText:m,value:c,timeZone:d="browser",placeholder:f="No time range selected",className:E}){const v=(0,o.wW)(u);return m?null:a.createElement("span",{className:E},(0,i.v)(c)?a.createElement(r.sU,{value:c,timeZone:d}):a.createElement("span",{className:v.placeholder},f))}),u=l=>({placeholder:(0,n.css)({color:l.colors.text.disabled,opacity:1})})},56642:(G,A,e)=>{"use strict";e.d(A,{V:()=>c});var n=e(66681),a=e(85960),o=e(47257),r=e(64793),i=e(55285),g=e(90308),u=e(55182);const l=p=>({container:(0,n.css)({display:"flex",alignItems:"center",flexDirection:"row-reverse",justifyContent:"space-between"}),selected:(0,n.css)({background:p.colors.action.selected,fontWeight:p.typography.fontWeightMedium}),radio:(0,n.css)({opacity:0,width:"0 !important","&:focus-visible + label":(0,u.getFocusStyles)(p)}),label:(0,n.css)({cursor:"pointer",flex:1,padding:"7px 9px 7px 9px","&:hover":{background:p.colors.action.hover,cursor:"pointer"}})}),m=(0,a.memo)(({value:p,onSelect:s,selected:y=!1,name:C})=>{const b=(0,o.wW)(l),S=(0,g.Z)();return a.createElement("li",{className:(0,n.cx)(b.container,y&&b.selected)},a.createElement("input",{className:b.radio,checked:y,name:C,type:"checkbox",id:S,onChange:()=>s(p)}),a.createElement("label",{className:b.label,htmlFor:S},p.display))});m.displayName="TimeRangeOption";const c=p=>{const s=(0,o.wW)(v),{title:y,options:C,placeholderEmpty:b}=p;return typeof b<"u"&&C.length<=0?a.createElement(a.Fragment,null,b):y?a.createElement("section",{"aria-label":y},a.createElement("fieldset",null,a.createElement("div",{className:s.title},a.createElement(i.r,null,y)),a.createElement(d,{...p}))):a.createElement(d,{...p})},d=({options:p,value:s,onChange:y,title:C})=>{const b=(0,o.wW)(h);return a.createElement(a.Fragment,null,a.createElement("ul",{"aria-roledescription":(0,r.t)("time-picker.time-range.aria-role","Time range selection")},p.map((S,D)=>a.createElement(m,{key:f(S,D),value:S,selected:E(S,s),onSelect:y,name:C??(0,r.t)("time-picker.time-range.default-title","Time ranges")}))),a.createElement("div",{className:b.grow}))};function f(p,s){return`${p.from}-${p.to}-${s}`}function E(p,s){return!s||!p?!1:s.from===p.from&&s.to===p.to}const v=()=>({title:(0,n.css)({display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 16px 5px 9px"})}),h=()=>({grow:(0,n.css)({flexGrow:1,alignItems:"flex-start"})})},76310:(G,A,e)=>{"use strict";e.d(A,{O:()=>y});var n=e(56375),a=e(85960),o=e(72623),r=e(64793),i=e(27436),g=e(66681),u=e(47257);const l=T=>{const{children:R,label:O}=T,x=(0,u.wW)(m);return O?a.createElement("div",null,a.createElement("div",{className:x.header},a.createElement("span",{className:x.label},O)),R):a.createElement("div",null,R)},m=T=>({header:(0,g.css)({padding:"7px 10px",width:"100%",borderTop:`1px solid ${T.colors.border.weak}`,textTransform:"capitalize"}),label:(0,g.css)({fontSize:T.typography.size.sm,color:T.colors.text.secondary,fontWeight:T.typography.fontWeightMedium})});var c=e(95642),d=e(97666),f=e(35753),E=e(28269);const v="tz-utc-offset",h=T=>{const{children:R,innerProps:O,innerRef:x,data:I,isSelected:L,isFocused:P}=T,N=(0,u.wW)(s),F=Date.now(),U=(0,g.cx)(N.container,P&&N.containerFocused);if(!(0,n.isString)(I.value))return null;const j=(0,o.Pr)(I.value,F);return a.createElement("div",{className:U,...O,ref:x,"aria-label":"Select option"},a.createElement("div",{className:(0,g.cx)(N.leftColumn,N.row)},a.createElement("div",{className:(0,g.cx)(N.leftColumn,N.wideRow)},a.createElement(E.d,{title:R}),a.createElement("div",{className:N.spacer}),a.createElement(f.K,{info:j})),a.createElement("div",{className:N.rightColumn},a.createElement(c.v,{timeZone:j?.ianaName||I.value,timestamp:F,className:v}),L&&a.createElement("span",null,a.createElement(d.J,{name:"check"})))))},p=T=>{const{children:R,innerProps:O,innerRef:x,data:I,isSelected:L,isFocused:P}=T,N=(0,u.wW)(s),F=Date.now(),U=(0,g.cx)(N.container,P&&N.containerFocused);if(!(0,n.isString)(I.value))return null;const j=(0,o.Pr)(I.value,F);return a.createElement("div",{className:U,...O,ref:x,"aria-label":"Select option"},a.createElement("div",{className:N.body},a.createElement("div",{className:N.row},a.createElement("div",{className:N.leftColumn},a.createElement(E.d,{title:R})),a.createElement("div",{className:N.rightColumn},L&&a.createElement("span",null,a.createElement(d.J,{name:"check"})))),a.createElement("div",{className:N.row},a.createElement("div",{className:N.leftColumn},a.createElement(f.K,{info:j})),a.createElement("div",{className:N.rightColumn},a.createElement(c.v,{timestamp:F,timeZone:j?.ianaName||I.value,className:v})))))},s=T=>({container:(0,g.css)({display:"flex",alignItems:"center",flexDirection:"row",flexShrink:0,whiteSpace:"nowrap",cursor:"pointer",padding:"6px 8px 4px","&:hover":{background:T.colors.action.hover}}),containerFocused:(0,g.css)({background:T.colors.action.hover}),body:(0,g.css)({display:"flex",fontWeight:T.typography.fontWeightMedium,flexDirection:"column",flexGrow:1}),row:(0,g.css)({display:"flex",flexDirection:"row"}),leftColumn:(0,g.css)({flexGrow:1,textOverflow:"ellipsis"}),rightColumn:(0,g.css)({justifyContent:"flex-end",alignItems:"center"}),wideRow:(0,g.css)({display:"flex",flexDirection:"row",alignItems:"baseline"}),spacer:(0,g.css)({marginLeft:"6px"})}),y=T=>{const{onChange:R,width:O,autoFocus:x=!1,onBlur:I,value:L,includeInternal:P=!1,disabled:N=!1,inputId:F,menuShouldPortal:U=!0,openMenuOnFocus:j=!0}=T,V=C(P),_=b(V,L),H=D(),z=O&&O<=45?p:h,K=(0,a.useCallback)(Y=>{if(!Y||!(0,n.isString)(Y.value))return R(L);R(Y.value)},[R,L]);return a.createElement(i.Ph,{inputId:F,value:_,placeholder:(0,r.t)("time-picker.zone.select-search-input","Type to search (country, city, abbreviation)"),autoFocus:x,menuShouldPortal:U,openMenuOnFocus:j,width:O,filterOption:H,options:V,onChange:K,onBlur:I,components:{Option:z,Group:l},disabled:N,"aria-label":(0,r.t)("time-picker.zone.select-aria-label","Time zone picker")})},C=T=>{const R=Date.now();return(0,o.$8)(T).map(x=>{const I=x.zones.reduce((L,P)=>{const N=(0,o.Pr)(P,R);return N&&L.push({label:N.name,value:N.zone,searchIndex:M(N,R)}),L},[]);return{label:x.name,options:I}})},b=(T,R)=>(0,a.useMemo)(()=>{if(R===void 0)return;const O=(0,n.toLower)(R);return T.find(I=>I.label?O.startsWith((0,n.toLower)(I.label)):S(O))?.options.find(I=>(0,n.isEmpty)(O)?I.value===o.RQ.default:(0,n.toLower)(I.value)===O)},[T,R]),S=T=>{switch(T){case o.RQ.default:case o.RQ.localBrowserTime:case o.RQ.utc:return!0;default:return!1}},D=()=>(0,a.useCallback)((T,R)=>!R||!T.data||!T.data.searchIndex?!0:T.data.searchIndex.indexOf((0,n.toLower)(R))>-1,[]),M=(T,R)=>{const O=[(0,n.toLower)(T.name),(0,n.toLower)(T.abbreviation),(0,n.toLower)((0,c.k)(R,T.zone))];for(const x of T.countries)O.push((0,n.toLower)(x.name)),O.push((0,n.toLower)(x.code));return O.join("|")}},35753:(G,A,e)=>{"use strict";e.d(A,{K:()=>r});var n=e(66681),a=e(85960),o=e(47257);const r=({info:u})=>{const l=(0,o.wW)(g),m=i(u);return u?a.createElement("div",{className:l.description},m):null},i=u=>(0,a.useMemo)(()=>{const l=[];if(!u)return"";if(u.name==="Europe/Simferopol")return"Ukraine, EEST";if(u.countries.length>0){const m=u.countries[0];l.push(m.name)}return u.abbreviation&&l.push(u.abbreviation),l.join(", ")},[u]),g=u=>({description:(0,n.css)({fontWeight:"normal",fontSize:u.typography.size.sm,color:u.colors.text.secondary,whiteSpace:"normal",textOverflow:"ellipsis"})})},95642:(G,A,e)=>{"use strict";e.d(A,{k:()=>l,v:()=>u});var n=e(66681),a=e(56375),o=e.n(a),r=e(85960),i=e(12537),g=e(47257);const u=c=>{const{timestamp:d,timeZone:f,className:E}=c,v=(0,g.wW)(m);return(0,a.isString)(f)?r.createElement(r.Fragment,null,r.createElement("span",{className:(0,n.cx)(v.offset,E)},l(d,f))):null},l=(c,d)=>{const f=(0,i.dq)(c,{timeZone:d,format:"Z"});return f==="+00:00"?"UTC":`UTC${f}`},m=c=>{const d=(0,n.css)({fontWeight:"normal",fontSize:c.typography.size.sm,color:c.colors.text.secondary,whiteSpace:"normal"});return{offset:(0,n.css)(d,{color:c.colors.text.primary,background:c.colors.background.secondary,padding:"2px 5px",borderRadius:c.shape.radius.default,marginLeft:"4px"})}}},28269:(G,A,e)=>{"use strict";e.d(A,{d:()=>r});var n=e(66681),a=e(85960),o=e(47257);const r=({title:g})=>{const u=(0,o.wW)(i);return g?a.createElement("span",{className:u.title},g):null},i=g=>({title:(0,n.css)({fontWeight:g.typography.fontWeightRegular,textOverflow:"ellipsis"})})},38797:(G,A,e)=>{"use strict";e.d(A,{z:()=>i});var n=e(85960),a=e(92369),o=e(27436);const r=[{value:"",label:"Default"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"}],i=g=>{const{onChange:u,width:l,autoFocus:m=!1,onBlur:c,value:d,disabled:f=!1,inputId:E}=g,v=(0,n.useCallback)(h=>{h.value!==void 0&&u(h.value)},[u]);return n.createElement(o.Ph,{inputId:E,value:r.find(h=>h.value===d)?.value,placeholder:a.wl.components.WeekStartPicker.placeholder,autoFocus:m,openMenuOnFocus:!0,width:l,options:r,onChange:v,onBlur:c,disabled:f})}},62083:(G,A,e)=>{"use strict";e.d(A,{E:()=>a,r:()=>n});const n=[{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],a=[{label:"January",value:0},{label:"February",value:1},{label:"March",value:2},{label:"April",value:3},{label:"May",value:4},{label:"June",value:5},{label:"July",value:6},{label:"August",value:7},{label:"September",value:8},{label:"October",value:9},{label:"November",value:10},{label:"December",value:11}]},20282:(G,A,e)=>{"use strict";e.d(A,{J:()=>r,v:()=>i});var n=e(85745),a=e(13446),o=e(61385);function r(g,u,l){return(0,n.v9)(g)?g.isValid():a.isMathString(g)?a.isValid(g):(0,o.J)(g,{roundUp:u,timeZone:l}).isValid()}function i(g){return a.isValid(g.from)&&a.isValid(g.to)}},45635:(G,A,e)=>{"use strict";e.d(A,{i:()=>r});var n=e(66681),a=e(85960),o=e(47257);const r=({direction:g="horizontal",spacing:u=2})=>{const l=(0,o.wW)(i,u);return g==="vertical"?a.createElement("div",{className:l.verticalDivider}):a.createElement("hr",{className:l.horizontalDivider})};r.displayName="Divider";const i=(g,u)=>({horizontalDivider:(0,n.css)({borderTop:`1px solid ${g.colors.border.weak}`,margin:g.spacing(u,0),width:"100%"}),verticalDivider:(0,n.css)({borderRight:`1px solid ${g.colors.border.weak}`,margin:g.spacing(0,u),height:"100%"})})},63153:(G,A,e)=>{"use strict";e.d(A,{d:()=>f});var n=e(66681),a=e(57529),o=e(89344),r=e(48925),i=e(41894),g=e(85960),u=e(92369),l=e(47257),m=e(29165),c=e(50263),d=e(40377);function f({children:h,onClose:p,closeOnMaskClick:s=!0,scrollableContent:y=!0,title:C,subtitle:b,width:S,size:D="md",tabs:M}){const T=(0,l.wW)(v),R=g.useRef(null),{dialogProps:O,titleProps:x}=(0,a.R)({},R),{overlayProps:I}=(0,r.Ir)({isDismissable:!1,isOpen:!0,onClose:p},R);E();const L=(0,n.cx)(T.drawer,!S&&T.sizes[D]),P=g.createElement("div",{className:T.content},h);return g.createElement(i.Z,{open:!0,onClose:p,placement:"right",width:S??"",getContainer:".main-view",className:T.drawerContent,rootClassName:L,motion:{motionAppear:!0,motionName:T.drawerMotion},maskClassName:T.mask,maskClosable:s,maskMotion:{motionAppear:!0,motionName:T.maskMotion}},g.createElement(o.MT,{restoreFocus:!0,contain:!0,autoFocus:!0},g.createElement("div",{"aria-label":typeof C=="string"?u.wl.components.Drawer.General.title(C):u.wl.components.Drawer.General.title("no title"),className:T.container,...I,...O,ref:R},typeof C=="string"&&g.createElement("div",{className:(0,n.cx)(T.header,!!M&&T.headerWithTabs)},g.createElement("div",{className:T.actions},g.createElement(m.zx,{icon:"times",variant:"secondary",fill:"text",onClick:p,"aria-label":u.wl.components.Drawer.General.close})),g.createElement("div",{className:T.titleWrapper},g.createElement(d.x,{element:"h3",...x},C),b&&g.createElement("div",{className:T.subtitle},b),M&&g.createElement("div",{className:T.tabsWrapper},M))),typeof C!="string"&&C,y?g.createElement(c.$,null,P):P)))}function E(){(0,g.useEffect)(()=>{if(document.body)return document.body.classList.add("body-drawer-open"),()=>{document.body.classList.remove("body-drawer-open")}},[])}const v=h=>({container:(0,n.css)({display:"flex",flexDirection:"column",height:"100%",flex:"1 1 0",minHeight:"100%"}),drawer:(0,n.css)({".main-view &":{top:81},".main-view--search-bar-hidden &":{top:41},".main-view--chrome-hidden &":{top:0},".rc-drawer-content-wrapper":{boxShadow:h.shadows.z3,[h.breakpoints.down("sm")]:{width:`calc(100% - ${h.spacing(2)}) !important`,minWidth:"0 !important"}}}),sizes:{sm:(0,n.css)({".rc-drawer-content-wrapper":{label:"drawer-sm",width:"25vw",minWidth:h.spacing(48)}}),md:(0,n.css)({".rc-drawer-content-wrapper":{label:"drawer-md",width:"50vw",minWidth:h.spacing(60)}}),lg:(0,n.css)({".rc-drawer-content-wrapper":{label:"drawer-lg",width:"85vw",minWidth:h.spacing(93),[h.breakpoints.down("md")]:{width:`calc(100% - ${h.spacing(2)}) !important`,minWidth:0}}})},drawerContent:(0,n.css)({backgroundColor:`${h.colors.background.primary} !important`,display:"flex",flexDirection:"column",overflow:"hidden",zIndex:h.zIndex.dropdown}),drawerMotion:(0,n.css)({"&-appear":{transform:"translateX(100%)",transition:"none !important","&-active":{transition:`${h.transitions.create("transform")} !important`,transform:"translateX(0)"}}}),mask:(0,n.css)({backgroundColor:"transparent",position:"fixed","&:before":{backgroundColor:`${h.components.overlay.background} !important`,backdropFilter:"blur(1px)",bottom:0,content:'""',left:0,position:"fixed",right:0,".main-view &":{top:81},".main-view--search-bar-hidden &":{top:41},".main-view--chrome-hidden &":{top:0}}}),maskMotion:(0,n.css)({"&-appear":{opacity:0,"&-active":{opacity:1,transition:h.transitions.create("opacity")}}}),header:(0,n.css)({label:"drawer-header",flexGrow:0,padding:h.spacing(2,2,3),borderBottom:`1px solid ${h.colors.border.weak}`}),headerWithTabs:(0,n.css)({borderBottom:"none"}),actions:(0,n.css)({position:"absolute",right:h.spacing(1),top:h.spacing(1)}),titleWrapper:(0,n.css)({label:"drawer-title",overflowWrap:"break-word"}),subtitle:(0,n.css)({label:"drawer-subtitle",color:h.colors.text.secondary,paddingTop:h.spacing(1)}),content:(0,n.css)({padding:h.spacing(2),height:"100%",flexGrow:1}),tabsWrapper:(0,n.css)({label:"drawer-tabs",paddingLeft:h.spacing(2),margin:h.spacing(1,-1,-3,-3)})})},85722:(G,A,e)=>{"use strict";e.d(A,{d:()=>E});var n=e(66681),a=e(64413),o=e(89344),r=e(94689),i=e(13088),g=e(85960),u=e(47257),l=e(18975),m=e(54635),c=e(69707),d=e(40235);const f=h=>{const{className:p,options:s,value:y,onChange:C,narrow:b,variant:S,...D}=h,M=(0,u.wW)(v),T=(0,i.W)({}),R=g.useRef(null),{menuTriggerProps:O,menuProps:x}=(0,r.u4)({},T,R),{buttonProps:I}=(0,a.U)(O,R),L=P=>{C(P),T.close()};return g.createElement("div",{className:M.wrapper},g.createElement(d.h,{className:p,isOpen:T.isOpen,narrow:b,variant:S,ref:R,...I,...D},y?.label||(y?.value!=null?String(y?.value):null)),T.isOpen&&g.createElement("div",{className:M.menuWrapper},g.createElement(l.L,{onClick:T.close,parent:document,includeButtonPress:!1},g.createElement(o.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},g.createElement(m.v,{tabIndex:-1,onClose:T.close,...x,autoFocus:!!x.autoFocus},s.map(P=>g.createElement(c.s,{key:`${P.value}`,label:P.label??String(P.value),onClick:()=>L(P),active:P.value===y?.value,ariaChecked:P.value===y?.value,ariaLabel:P.ariaLabel||P.label,role:"menuitemradio"})))))))};f.displayName="ButtonSelect";const E=g.memo(f),v=h=>({wrapper:(0,n.css)({position:"relative",display:"inline-flex"}),menuWrapper:(0,n.css)({position:"absolute",zIndex:h.zIndex.dropdown,top:h.spacing(4),right:0})})},44839:(G,A,e)=>{"use strict";e.d(A,{L:()=>l});var n=e(66681),a=e(89344),o=e(85960),r=e(30142),i=e(54278),g=e(99053),u=e(25142);const l=o.memo(({children:c,overlay:d,placement:f,offset:E,onVisibleChange:v})=>{const[h,p]=(0,o.useState)(!1),s=(0,o.useRef)(null);(0,o.useEffect)(()=>{v?.(h)},[v,h]);const{getArrowProps:y,getTooltipProps:C,setTooltipRef:b,setTriggerRef:S,visible:D}=(0,r.O)({visible:h,placement:f,onVisibleChange:p,interactive:!0,delayHide:0,delayShow:0,offset:E??[0,8],trigger:["click"]}),M=150,T=m(M),R=()=>{p(!1)},O=x=>{(x.key==="Escape"||x.key==="Tab")&&p(!1)};return o.createElement(o.Fragment,null,o.cloneElement(c,{ref:S}),D&&o.createElement(u.h_,null,o.createElement(a.MT,{autoFocus:!0,restoreFocus:!0,contain:!0},o.createElement("div",{ref:b,...C(),onClick:R,onKeyDown:O},o.createElement("div",{...y({className:"tooltip-arrow"})}),o.createElement(i.Z,{nodeRef:s,appear:!0,in:!0,timeout:{appear:M,exit:0,enter:0},classNames:T},o.createElement("div",{ref:s},g.renderOrCallToRender(d,{})))))))});l.displayName="Dropdown";const m=c=>({appear:(0,n.css)({opacity:"0",position:"relative",transform:"scaleY(0.5)",transformOrigin:"top"}),appearActive:(0,n.css)({opacity:"1",transform:"scaleY(1)",transition:`transform ${c}ms cubic-bezier(0.2, 0, 0.2, 1), opacity ${c}ms cubic-bezier(0.2, 0, 0.2, 1)`})})},4211:(G,A,e)=>{"use strict";e.d(A,{K:()=>r});var n=e(66681),a=e(85960),o=e(47257);const r=({children:g})=>{const u=(0,o.wW)(i);return a.createElement("div",{className:u.container},g)},i=g=>({container:(0,n.css)({borderLeft:`3px solid ${g.colors.info.main}`,backgroundColor:`${g.colors.background.secondary}`,padding:g.spacing(2),minWidth:"350px",borderRadius:g.shape.radius.default,marginBottom:g.spacing(4)})})},8958:(G,A,e)=>{"use strict";e.d(A,{Pf:()=>u,SV:()=>i,z4:()=>g});var n=e(85960),a=e(74091),o=e(49199),r=e(2855);class i extends n.PureComponent{constructor(){super(...arguments),this.state={error:null,errorInfo:null}}componentDidCatch(m,c){a.s?.api?.pushError(m),this.setState({error:m,errorInfo:c}),this.props.onError&&this.props.onError(m)}componentDidUpdate(m){const{dependencies:c,onRecover:d}=this.props;if(this.state.error&&c&&m.dependencies){for(let f=0;f<c.length;f++)if(c[f]!==m.dependencies[f]){this.setState({error:null,errorInfo:null}),d&&d();break}}}render(){const{children:m}=this.props,{error:c,errorInfo:d}=this.state;return m({error:c,errorInfo:d})}}class g extends n.PureComponent{render(){const{title:m,children:c,style:d,dependencies:f}=this.props;return n.createElement(i,{dependencies:f},({error:E,errorInfo:v})=>v?d==="alertbox"?n.createElement(o.b,{title:m||""},n.createElement("details",{style:{whiteSpace:"pre-wrap"}},E&&E.toString(),n.createElement("br",null),v.componentStack)):n.createElement(r.X,{title:m||"",error:E,errorInfo:v}):c)}}g.defaultProps={title:"An unexpected error happened",style:"alertbox"};function u(l,m={}){const c=d=>n.createElement(g,{...m},n.createElement(l,{...d}));return c.displayName="WithErrorBoundary",c}},2855:(G,A,e)=>{"use strict";e.d(A,{X:()=>r});var n=e(66681),a=e(85960),o=e(47257);const r=({error:g,errorInfo:u,title:l})=>{const m=(0,o.wW)(i);return a.createElement("div",{className:m},a.createElement("h2",null,l),a.createElement("details",{style:{whiteSpace:"pre-wrap"}},g&&g.toString(),a.createElement("br",null),u&&u.componentStack))};r.displayName="ErrorWithStack";const i=()=>(0,n.css)({width:"500px",margin:"64px auto"})},85447:(G,A,e)=>{"use strict";e.d(A,{A_:()=>h,Yo:()=>f});var n=e(66681),a=e(56375),o=e.n(a),r=e(85960),i=e(74613),g=e(36769),u=e(1930),l=e(47257),m=e(49199),c=e(97666),d=e(54941);function f({options:b,children:S,readAs:D,onLoad:M,fileListRenderer:T,onFileRemove:R}){const[O,x]=(0,r.useState)([]),[I,L]=(0,r.useState)([]),P=(0,u.Cf)("decbytes")(b?.maxSize?b?.maxSize:0),N=(0,r.useCallback)((X,te)=>{x(se=>se.map(de=>(de.id===X.id&&te(de),de)))},[]),F=(0,r.useCallback)((X,te,se)=>{let de=X.map(y);if(b?.multiple===!1?x(de):x(re=>[...re,...de]),Y(te),b?.onDrop)b.onDrop(X,te,se);else for(const re of de){const fe=new FileReader,ie=()=>{D?fe[D](re.file):fe.readAsText(re.file)};N(re,oe=>{oe.abortUpload=()=>{fe.abort()},oe.retryUpload=()=>{N(re,ue=>{ue.error=null,ue.progress=void 0}),ie()}}),fe.onabort=()=>{N(re,oe=>{oe.error=new DOMException("Aborted")})},fe.onprogress=oe=>{N(re,ue=>{ue.progress=oe.loaded})},fe.onload=()=>{M?.(fe.result)},fe.onerror=()=>{N(re,oe=>{oe.error=fe.error})},ie()}},[M,b,D,N]),U=X=>{const te=O.filter(se=>X.id!==se.id);x(te),R?.(X)},{getRootProps:j,getInputProps:V,isDragActive:_}=(0,i.uI)({...b,useFsAccessApi:!1,onDrop:F,accept:v(b?.accept)}),H=(0,l.l4)(),z=C(H,_),K=O.map(X=>T?T(X,U):r.createElement(d.K,{key:X.id,file:X,removeFile:U})),Y=X=>{let te=[];X.map(se=>{se.errors.map(de=>{te.findIndex(re=>re.code===de.code&&re.message===de.message)===-1&&te.push(de)})}),L(te)},k=X=>r.createElement("div",{className:z.errorAlert},r.createElement(m.b,{title:"Upload failed",severity:"error",onRemove:q},X.map(te=>{switch(te.code){case g.jK.FileTooLarge:return r.createElement("div",{key:te.message+te.code},"File is larger than ",(0,u.zc)(P));default:return r.createElement("div",{key:te.message+te.code},te.message)}}))),q=()=>{L([])};return r.createElement("div",{className:z.container},r.createElement("div",{"data-testid":"dropzone",...j({className:z.dropzone})},r.createElement("input",{...V()}),S??r.createElement(h,{primaryText:p(O,b)})),I.length>0&&k(I),r.createElement("small",{className:(0,n.cx)(z.small,z.acceptContainer)},b?.maxSize&&`Max file size: ${(0,u.zc)(P)}`,b?.maxSize&&b?.accept&&r.createElement("span",{className:z.acceptSeparator},"|"),b?.accept&&s(b.accept)),K)}function E(b){return["txt","json","csv","xls","yml"].some(S=>b.match(S))?"text/plain":"application/octet-stream"}function v(b){return(0,a.isString)(b)?{[E(b)]:[b]}:Array.isArray(b)?b.reduce((S,D)=>{const M=E(D);return S[M]=S[M]?[...S[M],D]:[D],S},{}):b}function h({primaryText:b="Drop file here or click to upload",secondaryText:S=""}){const D=(0,l.l4)(),M=C(D);return r.createElement("div",{className:(0,n.cx)(M.defaultDropZone),"data-testid":"file-drop-zone-default-children"},r.createElement(c.J,{className:(0,n.cx)(M.icon),name:"upload",size:"xl"}),r.createElement("h6",{className:(0,n.cx)(M.primaryText)},b),r.createElement("small",{className:M.small},S))}function p(b,S){return S?.multiple===void 0||S?.multiple?"Upload file":b.length?"Replace file":"Upload file"}function s(b){return(0,a.isString)(b)?`Accepted file type: ${b}`:Array.isArray(b)?`Accepted file types: ${b.join(", ")}`:`Accepted file types: ${Object.values(b).flat().join(", ")}`}function y(b){return{id:(0,a.uniqueId)("file"),file:b,error:null}}function C(b,S){return{container:(0,n.css)({display:"flex",flexDirection:"column",width:"100%",padding:b.spacing(2),borderRadius:b.shape.radius.default,border:`1px dashed ${b.colors.border.strong}`,backgroundColor:S?b.colors.background.secondary:b.colors.background.primary,cursor:"pointer",alignItems:"center",justifyContent:"center"}),dropzone:(0,n.css)({height:"100%",width:"100%",display:"flex",flexDirection:"column"}),defaultDropZone:(0,n.css)({textAlign:"center"}),icon:(0,n.css)({marginBottom:b.spacing(1)}),primaryText:(0,n.css)({marginBottom:b.spacing(1)}),acceptContainer:(0,n.css)({textAlign:"center",margin:0}),acceptSeparator:(0,n.css)({margin:`0 ${b.spacing(1)}`}),small:(0,n.css)({color:b.colors.text.secondary}),errorAlert:(0,n.css)({paddingTop:"10px"})}}},54941:(G,A,e)=>{"use strict";e.d(A,{K:()=>c});var n=e(66681),a=e(85960),o=e(1930),r=e(47257),i=e(1458),g=e(29165),u=e(97666),l=e(75064);const m="Remove file";function c({file:f,removeFile:E}){const v=(0,r.wW)(d),{file:h,progress:p,error:s,abortUpload:y,retryUpload:C}=f,b=()=>s?a.createElement(a.Fragment,null,a.createElement("span",{className:v.error},s.message),C&&a.createElement(l.h,{name:"sync",tooltip:"Retry",tooltipPlacement:"top",onClick:C}),E&&a.createElement(l.h,{className:C?v.marginLeft:"",name:"trash-alt",onClick:()=>E(f),tooltip:m})):p&&h.size>p?a.createElement(a.Fragment,null,a.createElement("progress",{className:v.progressBar,max:h.size,value:p}),a.createElement("span",{className:v.paddingLeft},Math.round(p/h.size*100),"%"),y&&a.createElement(g.zx,{variant:"secondary",type:"button",fill:"text",onClick:y},"Cancel upload")):E&&a.createElement(l.h,{name:"trash-alt",onClick:()=>E(f),tooltip:m,tooltipPlacement:"top"}),S=(0,o.Cf)("decbytes")(h.size);return a.createElement("div",{className:v.fileListContainer},a.createElement("span",{className:v.fileNameWrapper},a.createElement(u.J,{name:"file-blank",size:"lg","aria-hidden":!0}),a.createElement("span",{className:v.padding},(0,i.O)(h.name)),a.createElement("span",null,(0,o.zc)(S))),a.createElement("div",{className:v.fileNameWrapper},b()))}function d(f){return{fileListContainer:(0,n.css)({width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:f.spacing(2),border:`1px dashed ${f.colors.border.medium}`,backgroundColor:`${f.colors.background.secondary}`,marginTop:f.spacing(1)}),fileNameWrapper:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"center"}),padding:(0,n.css)({padding:f.spacing(0,1)}),paddingLeft:(0,n.css)({paddingLeft:f.spacing(2)}),marginLeft:(0,n.css)({marginLeft:f.spacing(1)}),error:(0,n.css)({paddingRight:f.spacing(2),color:f.colors.error.text}),progressBar:(0,n.css)({borderRadius:f.shape.radius.default,height:"4px","::-webkit-progress-bar":{backgroundColor:f.colors.border.weak,borderRadius:f.shape.radius.default},"::-webkit-progress-value":{backgroundColor:f.colors.primary.main,borderRadius:f.shape.radius.default}})}}},76823:(G,A,e)=>{"use strict";e.d(A,{A_:()=>n.A_,K$:()=>a.K,Yo:()=>n.Yo});var n=e(85447),a=e(54941)},20018:(G,A,e)=>{"use strict";e.d(A,{p:()=>c});var n=e(66681),a=e(85960),o=e(90308),r=e(92369),i=e(47257),g=e(55182),u=e(1458),l=e(29165),m=e(97666);const c=({onFileUpload:f,className:E,children:v="Upload file",accept:h="*",size:p="md",showFileName:s})=>{const y=(0,i.wW)(d(p)),[C,b]=(0,a.useState)(""),S=(0,o.Z)(),D=(0,a.useCallback)(M=>{const T=M.currentTarget?.files?.[0];T&&b(T.name??""),f(M)},[f]);return a.createElement(a.Fragment,null,a.createElement("input",{type:"file",id:S,className:y.fileUpload,onChange:D,multiple:!1,accept:h,"data-testid":r.wl.components.FileUpload.inputField}),a.createElement("label",{htmlFor:S,className:(0,n.cx)(y.labelWrapper,E)},a.createElement(m.J,{name:"upload",className:y.icon}),v),s&&C&&a.createElement("span",{"aria-label":"File name",className:y.fileName,"data-testid":r.wl.components.FileUpload.fileNameSpan},(0,u.O)(C)))},d=f=>E=>{const v=(0,l.fW)({theme:E,variant:"primary",size:f,iconOnly:!1}),h=(0,g.getFocusStyles)(E);return{fileUpload:(0,n.css)({height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute",width:"0.1px",zIndex:-1,"&:focus + label":h,"&:focus-visible + label":h}),labelWrapper:v.button,icon:v.icon,fileName:(0,n.css)({marginLeft:E.spacing(.5)})}}},96535:(G,A,e)=>{"use strict";e.d(A,{H:()=>u});var n=e(85960),a=e(49531);function o(...l){const m=n.useRef(null);return n.useEffect(()=>{l.forEach(c=>{c&&(typeof c=="function"?c(m.current):c.current=m.current)})},[l]),m}var r=e(29165),i=e(97666),g=e(24956);const u=n.forwardRef(({value:l,width:m,onChange:c,escapeRegex:d=!0,...f},E)=>{const v=n.useRef(null),h=o(E,v),p=l!==""?n.createElement(r.zx,{icon:"times",fill:"text",size:"sm",onClick:s=>{v.current?.focus(),c(""),s.stopPropagation()}},"Clear"):null;return n.createElement(g.I,{prefix:n.createElement(i.J,{name:"search"}),suffix:p,width:m,type:"text",value:d?(0,a.x6)(l??""):l,onChange:s=>c(d?(0,a.GE)(s.currentTarget.value):s.currentTarget.value),...f,ref:h})});u.displayName="FilterInput"},45564:(G,A,e)=>{"use strict";e.d(A,{B:()=>g});var n=e(66681),a=e(85960),o=e(47257),r=e(29165),i=e(97666);const g=({label:l,selected:m,onClick:c,icon:d="check"})=>{const f=(0,o.wW)(u),E=(0,o.wW)(r.gN);return a.createElement("button",{type:"button",className:(0,n.cx)(E,f.wrapper,m&&f.selected),onClick:c},a.createElement("span",null,l),m&&a.createElement(i.J,{name:d,className:f.icon}))},u=l=>({wrapper:(0,n.css)({background:l.colors.background.secondary,borderRadius:l.shape.radius.pill,padding:l.spacing(0,2),fontSize:l.typography.bodySmall.fontSize,fontWeight:l.typography.fontWeightMedium,lineHeight:l.typography.bodySmall.lineHeight,color:l.colors.text.secondary,display:"flex",alignItems:"center",height:"32px",position:"relative",border:`1px solid ${l.colors.background.secondary}`,whiteSpace:"nowrap","&:hover":{background:l.colors.action.hover,color:l.colors.text.primary}}),selected:(0,n.css)({color:l.colors.text.primary,background:l.colors.action.selected,"&:hover":{background:l.colors.action.focus}}),icon:(0,n.css)({marginLeft:l.spacing(.5)})})},51143:(G,A,e)=>{"use strict";e.d(A,{W:()=>i});var n=e(66681),a=e(85960),o=e(68921);const r={labelWidth:6,inputWidth:12},i=({label:u,tooltip:l,labelWidth:m,inputWidth:c,inputEl:d,className:f,interactive:E,...v})=>{const h=g();return a.createElement("div",{className:(0,n.cx)(h.formField,f)},a.createElement(o.c,{width:m,tooltip:l,interactive:E},u),d||a.createElement("input",{type:"text",className:`gf-form-input ${c?`width-${c}`:""}`,...v,disabled:v.disabled}))};i.displayName="FormField",i.defaultProps=r;const g=()=>({formField:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative"})})},68921:(G,A,e)=>{"use strict";e.d(A,{c:()=>u});var n=e(70318),a=e.n(n),o=e(85960),r=e(97666),i=e(14607);const u=({children:l,isFocused:m,isInvalid:c,className:d,htmlFor:f,tooltip:E,width:v,interactive:h,...p})=>{const s=a()(d,`gf-form-label width-${v||"10"}`,{"gf-form-label--is-focused":m,"gf-form-label--is-invalid":c});return o.createElement("label",{className:s,...p,htmlFor:f},l,E&&o.createElement(i.u,{placement:"top",content:E,theme:"info",interactive:h},o.createElement(r.J,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))}},67297:(G,A,e)=>{"use strict";e.d(A,{W:()=>o});var n=e(85960);function a(r){return r<20?.9:r<26?.8:.6}const o=({value:r,className:i,style:g,...u})=>{const l=(r.prefix??"").length>0,m=(r.suffix??"").length>0;let c;if(g&&g.fontSize&&typeof g.fontSize=="number"){const d=g.fontSize,f=a(d);c={fontSize:d*f}}return n.createElement("div",{className:i,style:g,...u},n.createElement("div",null,l&&n.createElement("span",null,r.prefix),n.createElement("span",null,r.text),m&&n.createElement("span",{style:c},r.suffix)))};o.displayName="FormattedDisplayValue"},55973:(G,A,e)=>{"use strict";e.d(A,{X:()=>g});var n=e(66681),a=e(85960),o=e(47257),r=e(55182),i=e(57445);const g=a.forwardRef(({label:l,description:m,value:c,htmlValue:d,onChange:f,disabled:E,className:v,indeterminate:h,invalid:p,...s},y)=>{const C=(0,a.useCallback)(D=>{f&&f(D)},[f]),b=(0,o.wW)(u,p),S=h?"mixed":void 0;return a.createElement("label",{className:(0,n.cx)(b.wrapper,v)},a.createElement("div",{className:b.checkboxWrapper},a.createElement("input",{type:"checkbox",className:(0,n.cx)(b.input,h&&b.inputIndeterminate),checked:c,disabled:E,onChange:C,value:d,"aria-checked":S,...s,ref:y}),a.createElement("span",{className:b.checkmark})),l&&a.createElement("span",{className:b.label},l),m&&a.createElement("span",{className:b.description},m))}),u=(l,m=!1)=>{const c=(0,i.F)(l),d=2,f=1,E=v=>m?l.colors.error.border:v;return{wrapper:(0,n.css)({display:"inline-grid",alignItems:"center",columnGap:l.spacing(f),gridAutoRows:"max-content",position:"relative",verticalAlign:"middle"}),input:(0,n.css)({position:"absolute",zIndex:1,top:0,left:0,width:"100% !important",height:"100%",opacity:0,"&:focus + span, &:focus-visible + span":(0,r.getFocusStyles)(l),"&:focus:not(:focus-visible) + span":(0,r.getMouseFocusStyles)(l),"&:checked + span":{background:l.colors.primary.main,border:`1px solid ${E(l.colors.primary.main)}`,"&:hover":{background:l.colors.primary.shade},"&:after":{content:'""',position:"absolute",zIndex:2,left:"4px",top:0,width:"6px",height:"12px",border:`solid ${l.colors.primary.contrastText}`,borderWidth:"0 3px 3px 0",transform:"rotate(45deg)"}},"&:disabled + span":{backgroundColor:l.colors.action.disabledBackground,cursor:"not-allowed",border:`1px solid ${E(l.colors.action.disabledBackground)}`,"&:hover":{backgroundColor:l.colors.action.disabledBackground},"&:after":{borderColor:l.colors.action.disabledText}}}),inputIndeterminate:(0,n.css)({"&[aria-checked='mixed'] + span":{border:`1px solid ${E(l.colors.primary.main)}`,background:l.colors.primary.main,"&:hover":{background:l.colors.primary.shade},"&:after":{content:'""',position:"absolute",zIndex:2,left:"2px",right:"2px",top:"calc(50% - 1.5px)",height:"3px",border:`1.5px solid ${l.colors.primary.contrastText}`,backgroundColor:l.colors.primary.contrastText,width:"auto",transform:"none"}},"&:disabled[aria-checked='mixed'] + span":{backgroundColor:l.colors.action.disabledBackground,border:`1px solid ${E(l.colors.error.transparent)}`,"&:after":{borderColor:l.colors.action.disabledText}}}),checkboxWrapper:(0,n.css)({display:"flex",alignItems:"center",gridColumnStart:1,gridRowStart:1}),checkmark:(0,n.css)({position:"relative",zIndex:2,display:"inline-block",width:l.spacing(d),height:l.spacing(d),borderRadius:l.shape.radius.default,background:l.components.input.background,border:`1px solid ${E(l.components.input.borderColor)}`,"&:hover":{cursor:"pointer",borderColor:E(l.components.input.borderHover)}}),label:(0,n.cx)(c.label,(0,n.css)({gridColumnStart:2,gridRowStart:1,position:"relative",zIndex:2,cursor:"pointer",maxWidth:"fit-content",lineHeight:l.typography.bodySmall.lineHeight,marginBottom:0})),description:(0,n.cx)(c.description,(0,n.css)({gridColumnStart:2,gridRowStart:2,lineHeight:l.typography.bodySmall.lineHeight,marginTop:0}))}};g.displayName="Checkbox"},20519:(G,A,e)=>{"use strict";e.d(A,{g:()=>u});var n=e(66681),a=e(85960),o=e(47257),r=e(99053),i=e(74321),g=e(57445);const u=a.forwardRef(({label:c,description:d,horizontal:f,invalid:E,loading:v,disabled:h,required:p,error:s,children:y,className:C,validationMessageHorizontalOverflow:b,htmlFor:S,...D},M)=>{const T=(0,o.wW)(m),R=S??(0,r.getChildId)(y),O=typeof c=="string"?a.createElement(g._,{htmlFor:R,description:d},`${c}${p?" *":""}`):c,x=l({invalid:E,disabled:h,loading:v});return a.createElement("div",{className:(0,n.cx)(T.field,f&&T.fieldHorizontal,C),...D},O,a.createElement("div",null,a.createElement("div",{ref:M},a.cloneElement(y,x)),E&&s&&!f&&a.createElement("div",{className:(0,n.cx)(T.fieldValidationWrapper,{[T.validationMessageHorizontalOverflow]:!!b})},a.createElement(i.S,null,s))),E&&s&&f&&a.createElement("div",{className:(0,n.cx)(T.fieldValidationWrapper,T.fieldValidationWrapperHorizontal,{[T.validationMessageHorizontalOverflow]:!!b})},a.createElement(i.S,null,s)))});u.displayName="Field";function l(c){for(const d in c)c[d]===void 0&&delete c[d];return c}const m=c=>({field:(0,n.css)({display:"flex",flexDirection:"column",marginBottom:c.spacing(2)}),fieldHorizontal:(0,n.css)({flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap"}),fieldValidationWrapper:(0,n.css)({marginTop:c.spacing(.5)}),fieldValidationWrapperHorizontal:(0,n.css)({flex:"1 1 100%"}),validationMessageHorizontalOverflow:(0,n.css)({width:0,overflowX:"visible","& > *":{whiteSpace:"nowrap"}})})},59885:(G,A,e)=>{"use strict";e.d(A,{F:()=>a});var n=e(10476);const a=({name:o,control:r,children:i,...g})=>{const{fields:u,append:l,prepend:m,remove:c,swap:d,move:f,insert:E}=(0,n.Dq)({control:r,name:o,...g});return i({fields:u,append:l,prepend:m,remove:c,swap:d,move:f,insert:E})}},51637:(G,A,e)=>{"use strict";e.d(A,{C:()=>i});var n=e(66681),a=e(85960),o=e(47257),r=e(50086);const i=({label:u,children:l,className:m,...c})=>{const d=(0,o.wW)(g);return a.createElement("fieldset",{className:(0,n.cx)(d.wrapper,m),...c},u&&a.createElement(r.D,null,u),l)},g=u=>({wrapper:(0,n.css)({marginBottom:u.spacing(4),"&:last-child":{marginBottom:0}})})},74321:(G,A,e)=>{"use strict";e.d(A,{S:()=>i});var n=e(66681),a=e(85960),o=e(47257),r=e(97666);const i=({children:u,horizontal:l,className:m})=>{const c=(0,o.wW)(g),d=(0,n.cx)(l?c.horizontal:c.vertical,m);return a.createElement("div",{role:"alert",className:d},a.createElement(r.J,{className:c.fieldValidationMessageIcon,name:"exclamation-triangle"}),u)},g=u=>{const l=`
      font-size: ${u.typography.size.sm};
      font-weight: ${u.typography.fontWeightMedium};
      padding: ${u.spacing(.5,1)};
      color: ${u.colors.error.contrastText};
      background: ${u.colors.error.main};
      border-radius: ${u.shape.radius.default};
      position: relative;
      display: inline-block;
      align-self: flex-start;

      a {
        color: ${u.colors.error.contrastText};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `;return{vertical:(0,n.css)(l,{margin:u.spacing(.5,0,0,0),"&:before":{content:'""',position:"absolute",left:"9px",top:"-5px",width:0,height:0,borderWidth:"0 4px 5px 4px",borderColor:`transparent transparent ${u.colors.error.main} transparent`,borderStyle:"solid"}}),horizontal:(0,n.css)(l,{marginLeft:"10px","&:before":{content:'""',position:"absolute",left:"-5px",top:"9px",width:0,height:0,borderWidth:"4px 5px 4px 0",borderColor:"transparent #e02f44 transparent transparent",borderStyle:"solid"}}),fieldValidationMessageIcon:(0,n.css)({marginRight:u.spacing()})}}},66596:(G,A,e)=>{"use strict";e.d(A,{l:()=>r});var n=e(66681),a=e(85960),o=e(10476);function r({defaultValues:i,onSubmit:g,validateOnMount:u=!1,validateFieldsOnMount:l,children:m,validateOn:c="onSubmit",maxWidth:d=600,...f}){const{handleSubmit:E,trigger:v,formState:h,...p}=(0,o.cI)({mode:c,defaultValues:i});return(0,a.useEffect)(()=>{u&&v(l)},[v,l,u]),a.createElement("form",{className:(0,n.css)({maxWidth:d!=="none"?d+"px":d,width:"100%"}),onSubmit:E(g),...f},m({errors:h.errors,formState:h,trigger:v,...p}))}},84933:(G,A,e)=>{"use strict";e.d(A,{_:()=>u});var n=e(66681),a=e(85960),o=e(47257),r=e(99053),i=e(74321),g=e(114);const u=({children:m,label:c,tooltip:d,labelWidth:f="auto",invalid:E,loading:v,disabled:h,required:p,className:s,htmlFor:y,grow:C,shrink:b,error:S,transparent:D,interactive:M,...T})=>{const R=(0,o.l4)(),O=l(R,C,b),x=y??(0,r.getChildId)(m),I=typeof c=="string"?a.createElement(g.W,{interactive:M,width:f,tooltip:d,htmlFor:x,transparent:D},`${c}${p?" *":""}`):c;return a.createElement("div",{className:(0,n.cx)(O.container,s),...T},I,a.createElement("div",{className:O.childContainer},a.cloneElement(m,{invalid:E,disabled:h,loading:v}),E&&S&&a.createElement("div",{className:(0,n.cx)(O.fieldValidationWrapper)},a.createElement(i.S,null,S))))};u.displayName="InlineField";const l=(m,c,d)=>({container:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative",flex:`${c?1:0} ${d?1:0} auto`,margin:`0 ${m.spacing(.5)} ${m.spacing(.5)} 0`}),childContainer:(0,n.css)({flex:`${c?1:0} ${d?1:0} auto`}),fieldValidationWrapper:(0,n.css)({marginTop:m.spacing(.5)})})},81368:(G,A,e)=>{"use strict";e.d(A,{Z:()=>r});var n=e(66681),a=e(85960),o=e(47257);const r=({children:g,className:u,...l})=>{const m=(0,o.wW)(i);return a.createElement("div",{className:(0,n.cx)(m.container,u),...l},g)},i=g=>({container:(0,n.css)({label:"InlineFieldRow",display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",rowGap:g.spacing(.5)})})},114:(G,A,e)=>{"use strict";e.d(A,{W:()=>g});var n=e(66681),a=e(85960),o=e(47257),r=e(97666),i=e(14607);const g=({children:l,className:m,tooltip:c,width:d,transparent:f,interactive:E,as:v="label",...h})=>{const p=(0,o.wW)(u,f,d);return a.createElement(v,{className:(0,n.cx)(p.label,m),...h},l,c&&a.createElement(i.u,{interactive:E,placement:"top",content:c,theme:"info"},a.createElement(r.J,{tabIndex:0,name:"info-circle",size:"sm",className:p.icon})))},u=(l,m=!1,c)=>({label:(0,n.css)({display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0,padding:l.spacing(0,1),fontWeight:l.typography.fontWeightMedium,fontSize:l.typography.size.sm,backgroundColor:m?"transparent":l.colors.background.secondary,height:l.spacing(l.components.height.md),lineHeight:l.spacing(l.components.height.md),marginRight:l.spacing(.5),borderRadius:l.shape.radius.default,border:"none",width:c?c!=="auto"?`${8*c}px`:c:"100%",color:l.colors.text.primary}),icon:(0,n.css)({color:l.colors.text.secondary,marginLeft:"10px",":hover":{color:l.colors.text.primary}})})},35201:(G,A,e)=>{"use strict";e.d(A,{m:()=>r});var n=e(66681),a=e(85960),o=e(47257);const r=({children:g,className:u,grow:l,...m})=>{const c=(0,o.wW)(i,l);return a.createElement("div",{className:(0,n.cx)(c.container,u),...m},g)};r.displayName="InlineSegmentGroup";const i=(g,u)=>({container:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative",flex:`${u?1:0} 0 auto`,marginBottom:g.spacing(.5)})})},57445:(G,A,e)=>{"use strict";e.d(A,{F:()=>g,_:()=>i});var n=e(66681),a=e(85960),o=e(47257),r=e(97666);const i=({children:u,description:l,className:m,category:c,...d})=>{const f=(0,o.wW)(g),E=c?.map((v,h)=>a.createElement("span",{className:f.categories,key:`${v}/${h}`},a.createElement("span",null,v),a.createElement(r.J,{name:"angle-right",className:f.chevron})));return a.createElement("div",{className:(0,n.cx)(f.label,m)},a.createElement("label",{...d},a.createElement("div",{className:f.labelContent},E,u),l&&a.createElement("span",{className:f.description},l)))},g=u=>({label:(0,n.css)({label:"Label",fontSize:u.typography.size.sm,fontWeight:u.typography.fontWeightMedium,lineHeight:1.25,marginBottom:u.spacing(.5),color:u.colors.text.primary,maxWidth:"480px"}),labelContent:(0,n.css)({display:"flex",alignItems:"center"}),description:(0,n.css)({label:"Label-description",color:u.colors.text.secondary,fontSize:u.typography.size.sm,fontWeight:u.typography.fontWeightRegular,marginTop:u.spacing(.25),display:"block"}),categories:(0,n.css)({label:"Label-categories",display:"inline-flex",alignItems:"center"}),chevron:(0,n.css)({margin:u.spacing(0,.25)})})},56152:(G,A,e)=>{"use strict";e.d(A,{G:()=>i,I:()=>g});var n=e(70318),a=e.n(n),o=e(85960),r=e(42664),i=(u=>(u.Invalid="invalid",u.Valid="valid",u))(i||{});class g extends o.PureComponent{constructor(){super(...arguments),this.state={error:null},this.validatorAsync=l=>m=>{const c=(0,r.Gu)(m.target.value,l);this.setState(d=>({...d,error:c?c[0]:null}))},this.populateEventPropsWithStatus=(l,m)=>{const c={...l};return m&&Object.keys(r.JU).forEach(d=>{((0,r.z3)(d,m)||l[d])&&(c[d]=async f=>{f.persist(),(0,r.z3)(d,m)&&await this.validatorAsync(m[d]).apply(this,[f]),l[d]&&l[d].apply(null,[f,this.status])})}),c}}get status(){return this.state.error?"invalid":"valid"}get isInvalid(){return this.status==="invalid"}render(){const{validationEvents:l,className:m,hideErrorMessage:c,inputRef:d,...f}=this.props,{error:E}=this.state,v=a()("gf-form-input",{invalid:this.isInvalid},m),h=this.populateEventPropsWithStatus(f,l);return o.createElement("div",{style:{flexGrow:1}},o.createElement("input",{...h,ref:d,className:v}),E&&!c&&o.createElement("span",null,E))}}g.defaultProps={className:""}},39468:(G,A,e)=>{"use strict";e.d(A,{B:()=>r,Z:()=>i});var n=e(85960),a=e(16693),o=e(97666);const r=g=>{const u=g.selectProps.menuIsOpen;return n.createElement(a.c.IndicatorsContainer,{...g},n.createElement(o.J,{name:u?"angle-up":"angle-down",style:{marginTop:"7px"}}))},i=r},63174:(G,A,e)=>{"use strict";e.d(A,{P:()=>o,Z:()=>r});var n=e(85960),a=e(16693);const o=i=>{const{children:g}=i;return n.createElement(a.c.NoOptionsMessage,{...i},n.createElement("div",{className:"gf-form-select-box__desc-option"},n.createElement("div",{className:"gf-form-select-box__desc-option__body"},g)))},r=o},21069:(G,A,e)=>{"use strict";e.d(A,{qb:()=>D,Ph:()=>S});var n=e(70318),a=e.n(n),o=e(85960),r=e(16693),i=e(81152),g=e(48618),u=e(41554),l=e(76176),m=e(50263),c=e(50081),d=e(45887),f=e(13234),E=e(14607),v=e(39468),h=e(63174),p=e(97666);const s=R=>{const{children:O,isSelected:x,data:I}=R;return o.createElement(r.c.Option,{...R},o.createElement("div",{className:"gf-form-select-box__desc-option"},I.imgUrl&&o.createElement("img",{className:"gf-form-select-box__desc-option__img",src:I.imgUrl,alt:""}),o.createElement("div",{className:"gf-form-select-box__desc-option__body"},o.createElement("div",null,O),I.description&&o.createElement("div",{className:"gf-form-select-box__desc-option__desc"},I.description)),x&&o.createElement(p.J,{name:"check","aria-hidden":"true"})))},y=null,C=R=>o.createElement(r.c.MenuList,{...R},o.createElement(m.$,{autoHide:!1,autoHeightMax:"inherit"},R.children)),b=class extends o.PureComponent{render(){const{defaultValue:R,getOptionLabel:O,getOptionValue:x,onChange:I,options:L,placeholder:P,width:N,value:F,className:U,isDisabled:j,isLoading:V,isSearchable:_,isClearable:H,backspaceRemovesValue:z,isMulti:K,autoFocus:Y,openMenuOnFocus:k,onBlur:q,maxMenuHeight:X,noOptionsMessage:te,isOpen:se,components:de,tooltipContent:re,tabSelectsValue:fe,onCloseMenu:ie,onOpenMenu:oe,allowCustomValue:ue,formatCreateLabel:me,"aria-label":ge}=this.props;let Ue="";N&&(Ue="width-"+N);let De=i.ZP;const Pe={};ue&&(De=u.Z,Pe.formatCreateLabel=me??(nt=>nt));const ye=a()("gf-form-input","gf-form-input--form-dropdown",Ue,U),Te={...b.defaultProps.components,...de};return o.createElement(M,{onCloseMenu:ie,onOpenMenu:oe,tooltipContent:re,isOpen:se},(nt,ct)=>o.createElement(De,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:ye,components:Te,defaultValue:R,value:F,getOptionLabel:O,getOptionValue:x,menuShouldScrollIntoView:!1,isSearchable:_,onChange:I,options:L,placeholder:P||"Choose",styles:(0,f.Z)(this.context),isDisabled:j,isLoading:V,isClearable:H,autoFocus:Y,onBlur:q,openMenuOnFocus:k,maxMenuHeight:X,noOptionsMessage:te,isMulti:K,backspaceRemovesValue:z,menuIsOpen:se,onMenuOpen:nt,onMenuClose:ct,tabSelectsValue:fe,"aria-label":ge,...Pe}))}};let S=b;S.contextType=l.N,S.defaultProps={className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300,tabSelectsValue:!0,allowCustomValue:!1,components:{Option:s,SingleValue:d.P,IndicatorsContainer:v.Z,MenuList:C,Group:c.n}};class D extends o.PureComponent{render(){const{defaultValue:O,getOptionLabel:x,getOptionValue:I,onChange:L,placeholder:P,width:N,value:F,className:U,loadOptions:j,defaultOptions:V,isLoading:_,loadingMessage:H,noOptionsMessage:z,isDisabled:K,isSearchable:Y,isClearable:k,backspaceRemovesValue:q,autoFocus:X,onBlur:te,openMenuOnFocus:se,maxMenuHeight:de,isMulti:re,tooltipContent:fe,onCloseMenu:ie,onOpenMenu:oe,isOpen:ue}=this.props;let me="";N&&(me="width-"+N);const ge=a()("gf-form-input","gf-form-input--form-dropdown",me,U);return o.createElement(M,{onCloseMenu:ie,onOpenMenu:oe,tooltipContent:fe,isOpen:ue},(Ue,De)=>o.createElement(g.Z,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:ge,components:{Option:s,SingleValue:d.P,IndicatorsContainer:v.Z,NoOptionsMessage:h.Z},defaultValue:O,value:F,getOptionLabel:x,getOptionValue:I,menuShouldScrollIntoView:!1,onChange:L,loadOptions:j,isLoading:_,defaultOptions:V,placeholder:P||"Choose",styles:(0,f.Z)(this.context),loadingMessage:H,noOptionsMessage:z,isDisabled:K,isSearchable:Y,isClearable:k,autoFocus:X,onBlur:te,openMenuOnFocus:se,maxMenuHeight:de,isMulti:re,backspaceRemovesValue:q}))}}D.contextType=l.N,D.defaultProps={className:"",components:{},loadingMessage:()=>"Loading...",isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300};class M extends o.PureComponent{constructor(){super(...arguments),this.state={isOpenInternal:!1},this.onOpenMenu=()=>{const{onOpenMenu:O}=this.props;O&&O(),this.setState({isOpenInternal:!0})},this.onCloseMenu=()=>{const{onCloseMenu:O}=this.props;O&&O(),this.setState({isOpenInternal:!1})}}render(){const{children:O,isOpen:x,tooltipContent:I}=this.props,{isOpenInternal:L}=this.state;let P;return(L||x)&&(P=!1),I?o.createElement(E.u,{show:P,content:I,placement:"bottom"},o.createElement("div",null,O(this.onOpenMenu,this.onCloseMenu))):o.createElement("div",null,O(this.onOpenMenu,this.onCloseMenu))}}const T=null},78694:(G,A,e)=>{"use strict";e.d(A,{r:()=>g});var n=e(56375),a=e.n(n),o=e(85960),r=e(97666),i=e(14607);class g extends o.PureComponent{constructor(){super(...arguments),this.state={id:(0,n.uniqueId)()},this.internalOnChange=l=>{l.stopPropagation(),this.props.onChange(l)}}render(){const{labelClass:l="",switchClass:m="",label:c,checked:d,disabled:f,transparent:E,className:v,tooltip:h,tooltipPlacement:p}=this.props,s=this.state.id,y=`gf-form-label ${l} ${E?"gf-form-label--transparent":""} pointer`,C=`gf-form-switch ${m} ${E?"gf-form-switch--transparent":""}`;return o.createElement("div",{className:"gf-form-switch-container-react"},o.createElement("label",{htmlFor:s,className:`gf-form gf-form-switch-container ${v||""}`},c&&o.createElement("div",{className:y},c,h&&o.createElement(i.u,{placement:p||"auto",content:h,theme:"info"},o.createElement(r.J,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}}))),o.createElement("div",{className:C},o.createElement("input",{disabled:f,id:s,type:"checkbox",checked:d,onChange:this.internalOnChange}),o.createElement("span",{className:"gf-form-switch__slider"}))))}}},50086:(G,A,e)=>{"use strict";e.d(A,{D:()=>i});var n=e(66681),a=e(85960),o=e(47257);const r=g=>({legend:(0,n.css)({fontSize:g.typography.h3.fontSize,fontWeight:g.typography.fontWeightRegular,margin:g.spacing(0,0,2,0)})}),i=({children:g,className:u,...l})=>{const m=(0,o.wW)(r);return a.createElement("legend",{className:(0,n.cx)(m.legend,u),...l},g)}},5106:(G,A,e)=>{"use strict";e.d(A,{S:()=>E});var n=e(66681),a=e(56375),o=e(85960),r=e(6556),i=e(47257),g=e(97666),u=e(92369),l=e(55182),m=e(14607),c=e(18151);const d=o.forwardRef(({children:h,active:p=!1,disabled:s=!1,size:y="md",onChange:C,onClick:b,id:S,name:D=void 0,description:M,fullWidth:T,"aria-label":R},O)=>{const x=(0,i.wW)(f,y,T),I=o.createElement("input",{type:"radio",className:x.radio,onChange:C,onClick:b,disabled:s,id:S,checked:p,name:D,"aria-label":R,ref:O});return M?o.createElement("div",{className:x.radioOption,"data-testid":u.wl.components.RadioButton.container},o.createElement(m.u,{content:M,placement:"bottom"},I),o.createElement("label",{className:x.radioLabel,htmlFor:S,title:M||R},h)):o.createElement("div",{className:x.radioOption,"data-testid":u.wl.components.RadioButton.container},I,o.createElement("label",{className:x.radioLabel,htmlFor:S,title:M||R},h))});d.displayName="RadioButton";const f=(h,p,s)=>{const{fontSize:y,height:C,padding:b}=(0,c.iL)(p,h),S=h.colors.text.secondary,D=h.colors.text.primary,M=C*h.spacing.gridSize-4-2;return{radioOption:(0,n.css)({display:"flex",justifyContent:"space-between",position:"relative",flex:s?"1 0 0":"none",textAlign:"center"}),radio:(0,n.css)({position:"absolute",opacity:0,zIndex:2,width:"100% !important",height:"100%",cursor:"pointer","&:checked + label":{color:h.colors.text.primary,fontWeight:h.typography.fontWeightMedium,background:h.colors.action.selected,zIndex:1},"&:focus + label, &:focus-visible + label":(0,l.getFocusStyles)(h),"&:focus:not(:focus-visible) + label":(0,l.getMouseFocusStyles)(h),"&:disabled + label":{color:h.colors.text.disabled,cursor:"not-allowed"}}),radioLabel:(0,n.css)({display:"flex",alignItems:"center",justifyContent:"center",fontSize:y,height:`${M}px`,lineHeight:`${M}px`,color:S,padding:h.spacing(0,b),borderRadius:h.shape.radius.default,background:h.colors.background.primary,cursor:"pointer",userSelect:"none",whiteSpace:"nowrap",flexGrow:1,"&:hover":{color:D}})}};function E({options:h,value:p,onChange:s,onClick:y,disabled:C,disabledOptions:b,size:S="md",id:D,className:M,fullWidth:T=!1,autoFocus:R=!1,"aria-label":O,invalid:x=!1}){const I=(0,o.useCallback)(j=>()=>{s&&s(j.value)},[s]),L=(0,o.useCallback)(j=>()=>{y&&y(j.value)},[y]),P=D??(0,a.uniqueId)("radiogroup-"),N=(0,o.useRef)(P),F=(0,i.wW)(v),U=(0,o.useRef)(null);return(0,o.useEffect)(()=>{R&&U.current&&U.current.focus()},[R]),o.createElement("div",{role:"radiogroup","aria-label":O,className:(0,n.cx)(F.radioGroup,T&&F.fullWidth,x&&F.invalid,M)},h.map((j,V)=>{const _=b&&j.value&&b.includes(j.value),H=j.icon?(0,r.iJ)(j.icon):void 0,z=!!(j.imgUrl||j.label||j.component);return o.createElement(d,{size:S,disabled:_||C,active:p===j.value,key:`o.label-${V}`,"aria-label":j.ariaLabel,onChange:I(j),onClick:L(j),id:`option-${j.value}-${P}`,name:N.current,description:j.description,fullWidth:T,ref:p===j.value?U:void 0},H&&o.createElement(g.J,{name:H,className:(0,n.cx)(z&&F.icon)}),j.imgUrl&&o.createElement("img",{src:j.imgUrl,alt:j.label,className:F.img}),j.label," ",j.component?o.createElement(j.component,null):null)}))}E.displayName="RadioButtonGroup";const v=h=>({radioGroup:(0,n.css)({display:"inline-flex",flexDirection:"row",flexWrap:"nowrap",border:`1px solid ${h.components.input.borderColor}`,borderRadius:h.shape.radius.default,padding:"2px"}),fullWidth:(0,n.css)({display:"flex"}),icon:(0,n.css)({marginRight:"6px"}),img:(0,n.css)({width:h.spacing(2),height:h.spacing(2),marginRight:h.spacing(1)}),invalid:(0,n.css)({border:`1px solid ${h.colors.error.border}`})})},23351:(G,A,e)=>{"use strict";e.d(A,{x:()=>u});var n=e(66681),a=e(56375),o=e(85960),r=e(47257);const i=({id:m,name:c,label:d,checked:f,value:E,disabled:v,description:h,onChange:p})=>{const s=(0,r.wW)(g);return o.createElement("label",{title:h,className:s.label},o.createElement("input",{id:m,name:c,type:"radio",checked:f,value:E,disabled:v,className:s.input,onChange:()=>p&&p(m)}),o.createElement("div",null,d,h&&o.createElement("div",{className:s.description},h)))},g=m=>({input:(0,n.css)({position:"relative",appearance:"none",outline:"none",backgroundColor:m.colors.background.canvas,width:`${m.spacing(2)} !important`,height:m.spacing(2),border:`1px solid ${m.colors.border.medium}`,borderRadius:m.shape.radius.circle,margin:"3px 0",":checked":{backgroundColor:m.v1.palette.white,border:`5px solid ${m.colors.primary.main}`},":disabled":{backgroundColor:`${m.colors.action.disabledBackground} !important`,borderColor:m.colors.border.weak},":disabled:checked":{border:`1px solid ${m.colors.border.weak}`},":disabled:checked::after":{content:'""',width:"6px",height:"6px",backgroundColor:m.colors.text.disabled,borderRadius:m.shape.radius.circle,display:"inline-block",position:"absolute",top:"4px",left:"4px"},":focus":{outline:"none !important",boxShadow:`0 0 0 1px ${m.colors.background.canvas}, 0 0 0 3px ${m.colors.primary.main}`}}),label:(0,n.css)({fontSize:m.typography.fontSize,lineHeight:"22px",display:"grid",gridTemplateColumns:`${m.spacing(2)} auto`,gap:m.spacing(1)}),description:(0,n.css)({fontSize:m.typography.size.sm,color:m.colors.text.secondary})});function u({name:m,id:c,options:d,value:f,onChange:E,className:v,disabled:h,disabledOptions:p=[]}){const s=(0,r.wW)(l),y=c??(0,a.uniqueId)("radiogroup-list-");return o.createElement("div",{id:c,className:(0,n.cx)(s.container,v),role:"radiogroup"},d.map((C,b)=>{const S=`${y}-${b}`,D=f&&f===C.value,M=h||p.some(R=>R===C.value),T=()=>E&&C.value&&E(C.value);return o.createElement(i,{key:b,id:S,name:m,label:C.label,description:C.description,checked:D,value:C.value,disabled:M,onChange:T})}))}const l=m=>({container:(0,n.css)({display:"grid",gap:m.spacing(1)})})},18151:(G,A,e)=>{"use strict";e.d(A,{GL:()=>o,RK:()=>r,ht:()=>g,iL:()=>l,nf:()=>i});var n=e(66681),a=e(55182);const o=m=>(0,n.css)({"&:focus":(0,a.getFocusStyles)(m)}),r=(m,c=!1)=>{const d=c?m.colors.error.border:m.components.input.borderColor,f=c?m.colors.error.shade:m.components.input.borderHover,E=m.components.input.background,v=m.components.input.text,h=m.isDark?"#2e2f35":"#bab4ca";return(0,n.cx)(i(m),(0,n.css)({background:E,lineHeight:m.typography.body.lineHeight,fontSize:m.typography.size.md,color:v,border:`1px solid ${d}`,"&:-webkit-autofill, &:-webkit-autofill:hover":{boxShadow:`inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${E}!important`,WebkitTextFillColor:`${v} !important`,borderColor:h},"&:-webkit-autofill:focus":{boxShadow:`0 0 0 2px ${m.colors.background.primary}, 0 0 0px 4px ${m.colors.primary.main}, inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${E}!important`,WebkitTextFillColor:`${v} !important`},"&:hover":{borderColor:f},"&:focus":{outline:"none"},"&:disabled":{backgroundColor:m.colors.action.disabledBackground,color:m.colors.action.disabledText,border:`1px solid ${m.colors.action.disabledBackground}`,"&:hover":{borderColor:d}},"&::placeholder":{color:m.colors.text.disabled,opacity:1}}))},i=m=>(0,n.css)({padding:m.spacing(0,1,0,1)}),g=()=>({sm:(0,n.css)({width:u("sm")}),md:(0,n.css)({width:u("md")}),lg:(0,n.css)({width:u("lg")}),auto:(0,n.css)({width:u("auto")})}),u=m=>{switch(m){case"sm":return"200px";case"md":return"320px";case"lg":return"580px";case"auto":default:return"auto"}};function l(m,c){switch(m){case"sm":return{padding:1,fontSize:c.typography.size.sm,height:c.components.height.sm};case"lg":return{padding:3,fontSize:c.typography.size.lg,height:c.components.height.lg};case"md":default:return{padding:2,fontSize:c.typography.size.md,height:c.components.height.md}}}},45002:(G,A,e)=>{"use strict";e.d(A,{a:()=>h});var n=e(29175),a=e.n(n),o=e(85960),r=e(1930),i=e(94864),g=e(37634),u=e(1713),l=e(48461),m=e(29165),c=e(14345),d=e(76784);const f={mode:g.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]};function E(p,s,y,C){const b=y!=null,S=C===u.wm.Vertical?s:p,D=Math.min(S*.15/1.5,20),M=D*1.5,T=b?s-M:s,R=Math.min(T,p);return{showLabel:b,gaugeHeight:R,titleFontSize:D}}function v(p,s,y,C){if(s.color?.mode!==c.S.Thresholds)return[{value:s.min??i.Hx,color:y.color??c.R}];const b=s.thresholds??f,S=b.mode===g.H.Percentage,D=b.steps;let M=s.min??i.Hx,T=s.max??i.Z3;S&&(M=0,T=100);const R=(0,d.m1)(M,D),O=(0,d.m1)(T,D),x=[{value:+M.toFixed(p),color:C.visualization.getColorByName(R.color)}];let I=!0;for(let L=0;L<D.length;L++){const P=D[L];if(I){R===P&&(I=!1);continue}const N=D[L-1];if(x.push({value:P.value,color:C.visualization.getColorByName(N.color)}),P===O)break}return x.push({value:+T.toFixed(p),color:C.visualization.getColorByName(O.color)}),x}class h extends o.PureComponent{constructor(){super(...arguments),this.canvasElement=null,this.renderVisualization=()=>{const{width:s,value:y,height:C,onClick:b,text:S,theme:D,orientation:M}=this.props,T=E(s,C,y.title,M),R=M===u.wm.Vertical?`${T.gaugeHeight}px`:"100%",O=o.createElement("div",{style:{height:`${T.gaugeHeight}px`,width:R},ref:x=>this.canvasElement=x});return o.createElement(o.Fragment,null,b?o.createElement("button",{className:(0,m.gN)(D),type:"button",onClick:b},O):O,T.showLabel&&o.createElement("div",{style:{textAlign:"center",fontSize:S?.titleSize??T.titleFontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",width:R,top:"-4px",cursor:"default"}},y.title))}}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}draw(){const{field:s,showThresholdLabels:y,showThresholdMarkers:C,width:b,height:S,theme:D,value:M,orientation:T}=this.props,R=E(b,S,M.title),O=T===u.wm.Vertical?R.gaugeHeight:b,x=Math.min(O,R.gaugeHeight),I=D.colors.background.secondary,L=y?1.5:1,P=Math.min(x/5.5,40)/L,N=P/5,F=(0,r.zc)(M),j=Math.min(O,x*1.3)*.9-((P+(C?N:0)+(y?10:0))*2+10),V=this.props.text?.valueSize??(0,l.MX)(F,j,x,1,P*1.7),_=Math.max(V/2.5,12);let H=s.min??i.Hx,z=s.max??i.Z3,K=M.numeric;s.thresholds?.mode===g.H.Percentage&&(H=0,z=100,M.percent===void 0?K=(K-H)/(z-H)*100:K=M.percent*100);const Y=s.decimals===void 0?2:s.decimals;C&&(H=+H.toFixed(Y),z=+z.toFixed(Y));const k={series:{gauges:{gauge:{min:H,max:z,neutralValue:s.custom?.neutral,background:{color:I},border:{color:null},shadow:{show:!1},width:P},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0,vMargin:0},cell:{border:{width:0}},threshold:{values:v(Y,s,M,D),label:{show:y,margin:N+1,font:{size:_}},show:C,width:N},value:{color:M.color,formatter:()=>F,font:{size:V,family:D.typography.fontFamily}},show:!0}}},q={data:[[0,K]],label:M.title};try{this.canvasElement&&a().plot(this.canvasElement,[q],k)}catch(X){console.error("Gauge rendering error",X,k,M)}}render(){return o.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},className:this.props.className},this.renderVisualization())}}h.defaultProps={showThresholdMarkers:!0,showThresholdLabels:!1,field:{min:0,max:100,thresholds:f}}},97666:(G,A,e)=>{"use strict";e.d(A,{J:()=>l});var n=e(66681),a=e(85960),o=e(88960),r=e(6556),i=e(47257),g=e(53193);const u=m=>({icon:(0,n.css)({display:"inline-block",fill:"currentColor",flexShrink:0,label:"Icon",lineHeight:0,verticalAlign:"middle"}),orange:(0,n.css)({fill:m.v1.palette.orange})}),l=a.forwardRef(({size:m="md",type:c="default",name:d,className:f,style:E,title:v="",...h},p)=>{const s=(0,i.wW)(u);(0,r.Mo)(d)||console.warn("Icon component passed an invalid icon name",d);const y=d==="fa fa-spinner"?"spinner":d,C=(0,g.lK)(),b=(0,g.Bm)(m),S=b,D=d.startsWith("gf-bar-align")?16:d.startsWith("gf-interp")?30:b,M=(0,g.y_)(y,c),T=`${C}${M}/${y}.svg`,R=(0,n.cx)(s.icon,f,c==="mono"?{[s.orange]:d==="favorite"}:"",y==="spinner"&&"fa-spin");return a.createElement(o.default,{innerRef:p,src:T,width:D,height:S,title:v,className:R,style:E,...h})});l.displayName="Icon"},53193:(G,A,e)=>{"use strict";e.d(A,{Bm:()=>o,lK:()=>i,y_:()=>a});const n=["grafana","favorite","heart-break","heart","panel-add","library-panel","circle-mono"];function a(g,u){return g?.startsWith("gf-")?"custom":n.includes(g)?"mono":u==="default"?"unicons":u==="solid"?"solid":"mono"}function o(g){switch(g){case"xs":return 12;case"sm":return 14;case"md":return 16;case"lg":return 18;case"xl":return 24;case"xxl":return 36;case"xxxl":return 48}}let r;function i(){if(r)return r;const g=typeof window<"u"&&window.__grafana_public_path__;return g?r=g+"img/icons/":r="public/img/icons/",r}},75064:(G,A,e)=>{"use strict";e.d(A,{h:()=>c});var n=e(66681),a=e(85960),o=e(20440),r=e(30887),i=e(47257),g=e(55182),u=e(97666),l=e(53193),m=e(14607);const c=a.forwardRef((f,E)=>{const{size:v="md",variant:h="secondary"}=f;let p;v==="xxl"||v==="xxxl"?((0,o.d)("IconButton",'size="xxl" and size="xxxl"','size="xl"'),p="xl"):p=v;const s=(0,i.wW)(d,p,h);let y,C;if("tooltip"in f){const{tooltip:b}=f;y=typeof b=="string"?b:void 0}else if("ariaLabel"in f||"aria-label"in f){const{ariaLabel:b,["aria-label"]:S}=f;y=S||b,C=E}if("tooltip"in f){const{name:b,iconType:S,className:D,tooltip:M,tooltipPlacement:T,...R}=f;return a.createElement(m.u,{ref:E,content:M,placement:T},a.createElement("button",{...R,ref:C,"aria-label":y,className:(0,n.cx)(s.button,D),type:"button"},a.createElement(u.J,{name:b,size:p,className:s.icon,type:S})))}else{const{name:b,iconType:S,className:D,...M}=f;return a.createElement("button",{...M,ref:C,"aria-label":y,className:(0,n.cx)(s.button,D),type:"button"},a.createElement(u.J,{name:b,size:p,className:s.icon,type:S}))}});c.displayName="IconButton";const d=(f,E,v)=>{const h=(0,l.Bm)(E)+f.spacing.gridSize;let p=f.colors.text.primary;return v==="primary"?p=f.colors.primary.text:v==="destructive"&&(p=f.colors.error.text),{button:(0,n.css)({zIndex:0,position:"relative",margin:`0 ${f.spacing.x0_5} 0 0`,boxShadow:"none",border:"none",display:"inline-flex",background:"transparent",justifyContent:"center",alignItems:"center",padding:0,color:p,"&[disabled], &:disabled":{cursor:"not-allowed",color:f.colors.action.disabledText,opacity:.65},"&:before":{zIndex:-1,position:"absolute",opacity:0,width:`${h}px`,height:`${h}px`,borderRadius:f.shape.radius.default,content:'""',transitionDuration:"0.2s",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionProperty:"opacity"},"&:focus, &:focus-visible":(0,g.getFocusStyles)(f),"&:focus:not(:focus-visible)":(0,g.getMouseFocusStyles)(f),"&:hover":{"&:before":{backgroundColor:v==="secondary"?f.colors.action.hover:r.alpha(p,.12),opacity:1}}}),icon:(0,n.css)({verticalAlign:"baseline"})}}},34364:(G,A,e)=>{"use strict";e.d(A,{Z:()=>u,a:()=>m});var n=e(66681),a=e(85960),o=e(81223),r=e(47257),i=e(67192),g=e(94335);const u=a.memo(a.forwardRef(({title:d,featureState:f,...E},v)=>{const h=(0,r.wW)(l),p=f?a.createElement(a.Fragment,null,a.createElement("div",{className:h.badge},a.createElement(m,{featureState:f})),a.createElement("h3",null,d)):a.createElement("h3",null,d);return a.createElement(g.v,{branded:!0,title:p,urlTitle:"Read documentation",ref:v,...E})}));u.displayName="FeatureInfoBox";const l=d=>({badge:(0,n.css)({marginBottom:d.spacing(1)})}),m=({featureState:d,tooltip:f})=>{const E=c(d);return a.createElement(i.C,{text:E.text,color:E.color,icon:E.icon,tooltip:f})};function c(d){switch(d){case o.CQ.alpha:return{text:"Alpha",icon:"exclamation-triangle",color:"orange"}}return{text:"Beta",icon:"rocket",color:"blue"}}},94335:(G,A,e)=>{"use strict";e.d(A,{v:()=>g});var n=e(66681),a=e(85960),o=e(47257),r=e(49199),i=e(97666);const g=a.memo(a.forwardRef(({title:l,className:m,children:c,branded:d,url:f,urlTitle:E,onDismiss:v,severity:h="info",...p},s)=>{const y=(0,o.wW)(u);return a.createElement(r.b,{severity:h,className:m,...p,ref:s,title:l},a.createElement("div",null,c),f&&a.createElement("a",{href:f,className:(0,n.cx)("external-link",y.docsLink),target:"_blank",rel:"noreferrer"},a.createElement(i.J,{name:"book"})," ",E||"Read more"))}));g.displayName="InfoBox";const u=l=>({docsLink:(0,n.css)({display:"inline-block",marginTop:l.spacing(2)})})},78112:(G,A,e)=>{"use strict";e.d(A,{K:()=>u});var n=e(66681),a=e(85960),o=e(39159),r=e(47257),i=e(97666),g=e(25142);function u({referenceElement:f,children:E,suffixIcon:v,placement:h,alternativePlacement:p}){const[s,y]=(0,a.useState)(null),[C,b]=(0,a.useState)(h),S=(0,o.D)(f,s,{placement:C}),D=(0,r.wW)(l),M=(0,r.wW)(d);return a.useEffect(()=>{p&&m(h,s,f)&&b(p)},[p,h,s,f]),a.createElement(g.h_,null,a.createElement("div",{style:{display:"inline-block",...S.styles.popper},...S.attributes.popper,ref:y,"aria-live":"polite"},a.createElement("span",{className:(0,n.cx)(D.root,M[C])},E&&a.createElement("span",null,E),v&&a.createElement(i.J,{name:v}))))}const l=f=>({root:(0,n.css)({...f.typography.bodySmall,willChange:"transform",background:f.components.tooltip.background,color:f.components.tooltip.text,padding:f.spacing(.5,1.5),borderRadius:f.shape.radius.pill,display:"inline-flex",gap:f.spacing(.5),alignItems:"center"})}),m=(f,E,v)=>{const h=E?.getBoundingClientRect(),p=v?.getBoundingClientRect();if(!h||!p)return!1;switch(f){case"right":return h.width+p.right>window.innerWidth;case"bottom":return h.height+p.bottom>window.innerHeight;case"left":return p.left-h.width<0;case"top":return p.top-h.height<0;default:return!1}},c=(f,E)=>(0,n.keyframes)({from:{opacity:0,transform:`translate(${f}, ${E})`},to:{opacity:1,transform:"translate(0, 0px)"}}),d=f=>{const v=c(0,f.spacing(1)),h=c(0,f.spacing(1*-1)),p=c(f.spacing(1),0),s=c(f.spacing(1*-1),0);return{top:(0,n.css)({marginBottom:f.spacing(1),animation:`${v} ease-out 100ms`}),bottom:(0,n.css)({marginTop:f.spacing(1),animation:`${h} ease-out 100ms`}),left:(0,n.css)({marginRight:f.spacing(1),animation:`${p} ease-out 100ms`}),right:(0,n.css)({marginLeft:f.spacing(1),animation:`${s} ease-out 100ms`})}}},15910:(G,A,e)=>{"use strict";e.d(A,{H:()=>r});var n=e(85960),a=e(48461),o=e(24956);const r=n.forwardRef((g,u)=>{const{defaultValue:l="",minWidth:m=10,maxWidth:c,onCommitChange:d,onKeyDown:f,onBlur:E,...v}=g,[h,p]=n.useState(l),[s,y]=n.useState(m);return(0,n.useEffect)(()=>{y(i(h.toString(),m,c))},[h,c,m]),n.createElement(o.I,{...v,ref:u,value:h.toString(),onChange:C=>{p(C.currentTarget.value)},width:s,onBlur:C=>{E?E(C):d&&d(C)},onKeyDown:C=>{f?f(C):C.key==="Enter"&&d&&d(C)},"data-testid":"autosize-input"})});function i(g,u,l){if(!g)return u;const m=3,c=(0,a.X1)(g.toString(),14).width/8+m;return u&&c<u?u:l&&c>l?l:c}r.displayName="AutoSizeInput"},24956:(G,A,e)=>{"use strict";e.d(A,{H:()=>m,I:()=>l});var n=e(66681),a=e(85960),o=e(60339),r=e(47257),i=e(33808),g=e(18151),u=e(75682);const l=a.forwardRef((c,d)=>{const{className:f,addonAfter:E,addonBefore:v,prefix:h,suffix:p,invalid:s,loading:y,width:C=0,...b}=c,[S,D]=(0,o.Z)(),[M,T]=(0,o.Z)(),R=(0,r.l4)(),O=m({theme:R,invalid:!!s,width:C});return a.createElement("div",{className:(0,n.cx)(O.wrapper,f),"data-testid":"input-wrapper"},!!v&&a.createElement("div",{className:O.addon},v),a.createElement("div",{className:O.inputWrapper},h&&a.createElement("div",{className:O.prefix,ref:S},h),a.createElement("input",{ref:d,className:O.input,...b,style:{paddingLeft:h?D.width+12:void 0,paddingRight:p||y?T.width+12:void 0}}),(p||y)&&a.createElement("div",{className:O.suffix,ref:M},y&&a.createElement(u.$,{className:O.loadingIndicator,inline:!0}),p)),!!E&&a.createElement("div",{className:O.addon},E))});l.displayName="Input";const m=(0,i.B)(({theme:c,invalid:d=!1,width:f})=>{const E="28px",v=(0,n.css)({position:"absolute",top:0,zIndex:1,display:"flex",alignItems:"center",justifyContent:"center",flexGrow:0,flexShrink:0,fontSize:c.typography.size.md,height:"100%",minWidth:E,color:c.colors.text.secondary});return{wrapper:(0,n.cx)((0,n.css)({label:"input-wrapper",display:"flex",width:f?c.spacing(f):"100%",height:c.spacing(c.components.height.md),borderRadius:c.shape.radius.default,"&:hover":{"> .prefix, .suffix, .input":{borderColor:d?c.colors.error.border:c.colors.primary.border},"input[type='number']":{appearance:"textfield"},"input[type='number']::-webkit-inner-spin-button, input[type='number']::-webkit-outer-spin-button":{WebkitAppearance:"inner-spin-button !important",opacity:1}}})),inputWrapper:(0,n.css)({label:"input-inputWrapper",position:"relative",flexGrow:1,zIndex:1,"&:not(:first-child):last-child":{"> input":{borderLeft:"none",borderTopLeftRadius:0,borderBottomLeftRadius:0}},"&:first-child:not(:last-child)":{"> input":{borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0}},"&:not(:first-child):not(:last-child)":{"> input":{borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:0,borderBottomLeftRadius:0}},input:{"&:not(:first-child)":{paddingLeft:E},"&:not(:last-child)":{paddingRight:E},"&[readonly]":{cursor:"default"}}}),input:(0,n.cx)((0,g.GL)(c),(0,g.RK)(c,d),(0,n.css)({label:"input-input",position:"relative",zIndex:0,flexGrow:1,borderRadius:c.shape.radius.default,height:"100%",width:"100%"})),inputDisabled:(0,n.css)({backgroundColor:c.colors.action.disabledBackground,color:c.colors.action.disabledText,border:`1px solid ${c.colors.action.disabledBackground}`,"&:focus":{boxShadow:"none"}}),addon:(0,n.css)({label:"input-addon",display:"flex",justifyContent:"center",alignItems:"center",flexGrow:0,flexShrink:0,position:"relative","&:first-child":{borderTopRightRadius:0,borderBottomRightRadius:0,"> :last-child":{borderTopRightRadius:0,borderBottomRightRadius:0}},"&:last-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0,"> :first-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0}},"> *:focus":{zIndex:2}}),prefix:(0,n.cx)(v,(0,n.css)({label:"input-prefix",paddingLeft:c.spacing(1),paddingRight:c.spacing(.5),borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0})),suffix:(0,n.cx)(v,(0,n.css)({label:"input-suffix",paddingLeft:c.spacing(1),paddingRight:c.spacing(1),marginBottom:"-2px",borderLeft:"none",borderTopLeftRadius:0,borderBottomLeftRadius:0,right:0})),loadingIndicator:(0,n.css)({"& + *":{marginLeft:c.spacing(.5)}})}})},96130:(G,A,e)=>{"use strict";e.d(A,{g:()=>a});var n=e(10476);const a=n.Qr},23940:(G,A,e)=>{"use strict";e.d(A,{e:()=>p});var n=e(66681),a=e(56375),o=e(85960),r=e(36226),i=e(23757),g=e(47257),u=e(97666),l=e(44574),m=e(14607),c=e(75064);const d=(0,n.css)({display:"flex",alignItems:"center",height:"100%"});function f({row:b,__rowID:S}){return o.createElement("div",{className:d},o.createElement(c.h,{tooltip:"toggle row expanded","aria-controls":S,name:b.isExpanded?"angle-down":"angle-right","aria-expanded":b.isExpanded,...b.getToggleRowExpandedProps(),size:"lg"}))}const E="__expander";function v(b){return[{id:E,Cell:f,disableSortBy:!0,width:0},...b.map(S=>({id:S.id,accessor:S.id,Header:S.header||(()=>null),sortType:S.sortType||"alphanumeric",disableSortBy:!S.sortType,width:S.disableGrow?0:void 0,visible:S.visible,...S.cell&&{Cell:S.cell}}))]}const h=b=>{const S=b.colors.emphasize(b.colors.background.primary,.03);return{container:(0,n.css)({display:"flex",gap:b.spacing(2),flexDirection:"column",width:"100%",overflowX:"auto"}),table:(0,n.css)({borderRadius:b.shape.radius.default,width:"100%",td:{padding:b.spacing(1)},"td, th":{minWidth:b.spacing(3)}}),disableGrow:(0,n.css)({width:0}),header:(0,n.css)({borderBottom:`1px solid ${b.colors.border.weak}`,"&, & > button":{position:"relative",whiteSpace:"nowrap",padding:b.spacing(1)},"& > button":{"&:after":{content:'"\\00a0"'},width:"100%",height:"100%",background:"none",border:"none",paddingRight:b.spacing(2.5),textAlign:"left",fontWeight:b.typography.fontWeightMedium}}),row:(0,n.css)({label:"row",borderBottom:`1px solid ${b.colors.border.weak}`,"&:hover":{backgroundColor:S},"&:last-child":{borderBottom:0}}),expandedRow:(0,n.css)({label:"expanded-row-content",borderBottom:"none"}),expandedContentRow:(0,n.css)({label:"expanded-row-content",td:{borderBottom:`1px solid ${b.colors.border.weak}`,position:"relative",padding:b.spacing(2,2,2,5),"&:before":{content:'""',position:"absolute",width:"1px",top:0,left:"16px",bottom:b.spacing(2),background:b.colors.border.medium}}}),sortableHeader:(0,n.css)({"&&":{padding:0}})}};function p({className:b,columns:S,data:D,getRowId:M,headerTooltips:T,pageSize:R=0,renderExpandedRow:O,fetchData:x}){const I=(0,g.wW)(h),L=(0,o.useMemo)(()=>v(S),[S]),P=s(),N=(0,o.useCallback)(Y=>`${P}-${Y.id}`.replace(/\s/g,""),[P]),F=[r.useSortBy,r.useExpanded],U=R>0;U&&F.push(r.usePagination);const j=(0,r.useTable)({columns:L,data:D,autoResetExpanded:!1,autoResetSortBy:!1,disableMultiSort:!0,manualSortBy:!!x,getRowId:M,initialState:{hiddenColumns:[!O&&E,...L.filter(Y=>!(!Y.visible||Y.visible(D))).map(Y=>Y.id).filter(i.fQ)].filter(i.fQ)}},...F),{getTableProps:V,getTableBodyProps:_,headerGroups:H,prepareRow:z}=j,{sortBy:K}=j.state;return(0,o.useEffect)(()=>{x&&x({sortBy:K})},[K,x]),(0,o.useEffect)(()=>{U&&j.setPageSize(R)},[U,R,j.setPageSize,j]),o.createElement("div",{className:I.container},o.createElement("table",{...V(),className:(0,n.cx)(I.table,b)},o.createElement("thead",null,H.map(Y=>{const{key:k,...q}=Y.getHeaderGroupProps();return o.createElement("tr",{key:k,...q},Y.headers.map(X=>{const{key:te,...se}=X.getHeaderProps(),de=T?.[X.id];return o.createElement("th",{key:te,className:(0,n.cx)(I.header,{[I.disableGrow]:X.width===0,[I.sortableHeader]:X.canSort}),...se,...X.isSorted&&{"aria-sort":X.isSortedDesc?"descending":"ascending"}},o.createElement(C,{column:X,headerTooltip:de}))}))})),o.createElement("tbody",{..._()},(U?j.page:j.rows).map(Y=>{z(Y);const{key:k,...q}=Y.getRowProps(),X=N(Y),te=Y.isExpanded;return o.createElement(o.Fragment,{key:k},o.createElement("tr",{...q,className:(0,n.cx)(I.row,te&&I.expandedRow)},Y.cells.map(se=>{const{key:de,...re}=se.getCellProps();return o.createElement("td",{key:de,...re},se.render("Cell",{__rowID:X}))})),te&&O&&o.createElement("tr",{...q,id:X,className:I.expandedContentRow},o.createElement("td",{colSpan:Y.cells.length},O(Y.original))))}))),U&&o.createElement("span",null,o.createElement(l.t,{currentPage:j.state.pageIndex+1,numberOfPages:j.pageOptions.length,onNavigate:Y=>j.gotoPage(Y-1)})))}const s=()=>(0,o.useMemo)(()=>(0,a.uniqueId)("InteractiveTable"),[]),y=b=>({sortIcon:(0,n.css)({position:"absolute",top:b.spacing(1)}),headerTooltipIcon:(0,n.css)({marginLeft:b.spacing(.5)})});function C({column:{canSort:b,render:S,isSorted:D,isSortedDesc:M,getSortByToggleProps:T},headerTooltip:R}){const O=(0,g.wW)(y),{onClick:x}=T(),I=o.createElement(o.Fragment,null,S("Header"),R&&o.createElement(m.u,{theme:"info-alt",content:R.content,placement:"top-end"},o.createElement(u.J,{className:O.headerTooltipIcon,name:R.iconName||"info-circle","data-testid":"header-tooltip-icon"})),D&&o.createElement("span",{"aria-hidden":"true",className:O.sortIcon},o.createElement(u.J,{name:M?"angle-down":"angle-up"})));return b?o.createElement("button",{type:"button",onClick:x},I):I}},92904:(G,A,e)=>{"use strict";e.d(A,{g:()=>o});var n=e(85960),a=e(21552);class o extends n.PureComponent{constructor(){super(...arguments),this.wrapperRef=(0,n.createRef)(),this.renderJson=()=>{const{json:i,config:g,open:u,onDidRender:l}=this.props,m=this.wrapperRef.current,c=new a.u(i,u,g);m.hasChildNodes()?m.replaceChild(c.render(),m.lastChild):m.appendChild(c.render()),l&&l(c.json)}}componentDidMount(){this.renderJson()}componentDidUpdate(){this.renderJson()}render(){const{className:i}=this.props;return n.createElement("div",{className:i,ref:this.wrapperRef})}}o.defaultProps={open:3,config:{animateOpen:!0}}},21552:(G,A,e)=>{"use strict";e.d(A,{u:()=>s});var n=e(56375);function a(y){return y.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function o(y){return!!y&&typeof y==="object"}function r(y){if(y===void 0)return"";if(y===null||typeof y=="object"&&!y.constructor)return"Object";const b=/function ([^(]*)/.exec(y.constructor.toString());return b&&b.length>1?b[1]:""}function i(y){return y===null?"null":typeof y}function g(y,C){const b=i(y);return b==="null"||b==="undefined"?b:(b==="string"&&(C='"'+a(C)+'"'),b==="function"?y.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{\u2026}":C)}let u="";function l(y){return o(y)?(u=r(y),Array.isArray(y)&&(u+="["+y.length+"]")):u=g(y,y.toString()),u}function m(y){return`json-formatter-${y}`}function c(y,C,b){const S=document.createElement(y);return C&&S.classList.add(m(C)),b!==void 0&&(b instanceof Node?S.appendChild(b):S.appendChild(document.createTextNode(String(b)))),S}const d=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,f=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,E=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,v=10,h=typeof window<"u"&&window.requestAnimationFrame||(y=>(y(),0)),p={animateOpen:!0,animateClose:!0};class s{constructor(C,b=1,S=p,D){this.json=C,this.open=b,this.config=S,this.key=D,this._isOpen=null,this.element=null,this.skipChildren=!1}get isOpen(){return this._isOpen!==null?this._isOpen:this.open>0}set isOpen(C){this._isOpen=C}get isDate(){return this.type==="string"&&(d.test(this.json)||E.test(this.json)||f.test(this.json))}get isUrl(){return this.type==="string"&&this.json.indexOf("http")===0}get isArray(){return Array.isArray(this.json)}get isObject(){return o(this.json)}get isEmptyObject(){return!this.keys.length&&!this.isArray}get isEmpty(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray}get hasKey(){return typeof this.key<"u"}get constructorName(){return r(this.json)}get type(){return i(this.json)}get keys(){return this.isObject?Object.keys(this.json).map(C=>C||'""'):[]}toggleOpen(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(m("open")))}openAtDepth(C=1){C<0||(this.open=C,this.isOpen=C!==0,this.element&&(this.removeChildren(!1),C===0?this.element.classList.remove(m("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(m("open")))))}isNumberArray(){return this.json.length>0&&this.json.length<4&&((0,n.isNumber)(this.json[0])||(0,n.isNumber)(this.json[1]))}renderArray(){const C=c("span");return C.appendChild(c("span","bracket","[")),this.isNumberArray()?(this.json.forEach((b,S)=>{S>0&&C.appendChild(c("span","array-comma",",")),C.appendChild(c("span","number",b))}),this.skipChildren=!0):C.appendChild(c("span","number",this.json.length)),C.appendChild(c("span","bracket","]")),C}render(C=!1){this.element=c("div","row");const b=c("a","toggler-link"),S=c("span","toggler");if(this.isObject&&b.appendChild(S),this.hasKey&&b.appendChild(c("span","key",`${this.key}:`)),this.isObject){const M=c("span","value"),T=c("span"),R=c("span","constructor-name",this.constructorName);if(T.appendChild(R),this.isArray){const O=this.renderArray();T.appendChild(O)}M.appendChild(T),b.appendChild(M)}else{const M=this.isUrl?c("a"):c("span");M.classList.add(m(this.type)),this.isDate&&M.classList.add(m("date")),this.isUrl&&(M.classList.add(m("url")),M.setAttribute("href",this.json));const T=g(this.json,this.json);M.appendChild(document.createTextNode(T)),b.appendChild(M)}const D=c("div","children");return this.isObject&&D.classList.add(m("object")),this.isArray&&D.classList.add(m("array")),this.isEmpty&&D.classList.add(m("empty")),this.config&&this.config.theme&&this.element.classList.add(m(this.config.theme)),this.isOpen&&this.element.classList.add(m("open")),C||this.element.appendChild(b),this.skipChildren?b.removeChild(S):this.element.appendChild(D),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&b.addEventListener("click",this.toggleOpen.bind(this)),this.element}appendChildren(C=!1){const b=this.element&&this.element.querySelector(`div.${m("children")}`);if(!(!b||this.isEmpty))if(C){let S=0;const D=()=>{const M=this.keys[S],T=new s(this.json[M],this.open-1,this.config,M);b.appendChild(T.render()),S+=1,S<this.keys.length&&(S>v?D():h(D))};h(D)}else this.keys.forEach(S=>{const D=new s(this.json[S],this.open-1,this.config,S);b.appendChild(D.render())})}removeChildren(C=!1){const b=this.element&&this.element.querySelector(`div.${m("children")}`);if(C){let S=0;const D=()=>{b&&b.children.length&&(b.removeChild(b.children[0]),S+=1,S>v?D():h(D))};h(D)}else b&&(b.innerHTML="")}}},61353:(G,A,e)=>{"use strict";e.d(A,{x:()=>i});var n=e(66681),a=e(85960),o=e(47257),r=e(79918);const i=(0,a.forwardRef)((m,c)=>{const{children:d,margin:f,marginX:E,marginY:v,marginTop:h,marginBottom:p,marginLeft:s,marginRight:y,padding:C,paddingX:b,paddingY:S,paddingTop:D,paddingBottom:M,paddingLeft:T,paddingRight:R,display:O,backgroundColor:x,grow:I,shrink:L,basis:P,flex:N,borderColor:F,borderStyle:U,borderRadius:j,justifyContent:V,alignItems:_,boxShadow:H,element:z,gap:K,...Y}=m,k=(0,o.wW)(l,f,E,v,h,p,s,y,C,b,S,D,M,T,R,O,x,I,L,P,N,F,U,j,V,_,H,K),q=z??"div";return a.createElement(q,{ref:c,className:k.root,...Y},d)});i.displayName="Box";const g=(m,c)=>{switch(m){case"error":case"success":case"info":case"warning":return c.colors[m].borderTransparent;default:return m?c.colors.border[m]:void 0}},u=(m,c)=>{switch(m){case"error":case"success":case"info":case"warning":return c.colors[m].transparent;default:return m?c.colors.background[m]:void 0}},l=(m,c,d,f,E,v,h,p,s,y,C,b,S,D,M,T,R,O,x,I,L,P,N,F,U,j,V,_)=>({root:(0,n.css)([(0,r.U)(m,c,H=>({margin:m.spacing(H)})),(0,r.U)(m,d,H=>({marginLeft:m.spacing(H),marginRight:m.spacing(H)})),(0,r.U)(m,f,H=>({marginTop:m.spacing(H),marginBottom:m.spacing(H)})),(0,r.U)(m,E,H=>({marginTop:m.spacing(H)})),(0,r.U)(m,v,H=>({marginBottom:m.spacing(H)})),(0,r.U)(m,h,H=>({marginLeft:m.spacing(H)})),(0,r.U)(m,p,H=>({marginRight:m.spacing(H)})),(0,r.U)(m,s,H=>({padding:m.spacing(H)})),(0,r.U)(m,y,H=>({paddingLeft:m.spacing(H),paddingRight:m.spacing(H)})),(0,r.U)(m,C,H=>({paddingTop:m.spacing(H),paddingBottom:m.spacing(H)})),(0,r.U)(m,b,H=>({paddingTop:m.spacing(H)})),(0,r.U)(m,S,H=>({paddingBottom:m.spacing(H)})),(0,r.U)(m,D,H=>({paddingLeft:m.spacing(H)})),(0,r.U)(m,M,H=>({paddingRight:m.spacing(H)})),(0,r.U)(m,T,H=>({display:H})),(0,r.U)(m,R,H=>({backgroundColor:u(H,m)})),(0,r.U)(m,O,H=>({flexGrow:H})),(0,r.U)(m,x,H=>({flexShrink:H})),(0,r.U)(m,I,H=>({flexBasis:H})),(0,r.U)(m,L,H=>({flex:H})),(0,r.U)(m,N,H=>({borderStyle:H})),(0,r.U)(m,P,H=>({borderColor:g(H,m)})),(N||P)&&{borderWidth:"1px"},(0,r.U)(m,U,H=>({justifyContent:H})),(0,r.U)(m,j,H=>({alignItems:H})),(0,r.U)(m,F,H=>({borderRadius:m.shape.radius[H]})),(0,r.U)(m,V,H=>({boxShadow:m.shadows[H]})),(0,r.U)(m,_,H=>({gap:m.spacing(H)}))])})},14559:(G,A,e)=>{"use strict";e.d(A,{r:()=>i});var n=e(66681),a=e(85960),o=e(47257),r=e(79918);const i=(0,a.forwardRef)((u,l)=>{const{children:m,gap:c,columns:d,minColumnWidth:f,...E}=u,v=(0,o.wW)(g,c,d,f);return a.createElement("div",{ref:l,...E,className:v.grid},m)});i.displayName="Grid";const g=(u,l,m,c)=>({grid:(0,n.css)([{display:"grid"},(0,r.U)(u,l,d=>({gap:u.spacing(d)})),c&&(0,r.U)(u,c,d=>({gridTemplateColumns:`repeat(auto-fill, minmax(${u.spacing(d)}, 1fr))`})),m&&(0,r.U)(u,m,d=>({gridTemplateColumns:`repeat(${d}, 1fr)`}))])})},74042:(G,A,e)=>{"use strict";e.d(A,{Ar:()=>i,Lh:()=>g,W2:()=>l,wc:()=>u});var n=e(66681),a=e(85960),o=e(47257),r=(f=>(f[f.Horizontal=0]="Horizontal",f[f.Vertical=1]="Vertical",f))(r||{});const i=({children:f,orientation:E=0,spacing:v="sm",justify:h="flex-start",align:p="normal",wrap:s=!1,width:y="100%",height:C="100%",...b})=>{const S=(0,o.wW)(m,E,v,h,p,s);return a.createElement("div",{className:S.layout,style:{width:y,height:C},...b},a.Children.toArray(f).filter(Boolean).map((D,M)=>a.createElement("div",{className:S.childWrapper,key:M},D)))},g=({children:f,spacing:E,justify:v,align:h="center",wrap:p,width:s,height:y})=>a.createElement(i,{spacing:E,justify:v,orientation:0,align:h,width:s,height:y,wrap:p},f),u=({children:f,spacing:E,justify:v,align:h,width:p,height:s})=>a.createElement(i,{spacing:E,justify:v,orientation:1,align:h,width:p,height:s},f),l=({children:f,padding:E,margin:v,grow:h,shrink:p})=>{const s=(0,o.wW)(d,E,v);return a.createElement("div",{className:(0,n.cx)(s.wrapper,h!==void 0&&(0,n.css)({flexGrow:h}),p!==void 0&&(0,n.css)({flexShrink:p}))},f)},m=(f,E,v,h,p,s)=>{const y=v!=="none"?f.spacing(c[v]):0,C=E===0&&!s||E===1?0:`-${y}`,b=E===1?"vertical-group":"horizontal-group";return{layout:(0,n.css)({label:b,display:"flex",flexDirection:E===1?"column":"row",flexWrap:s?"wrap":"nowrap",justifyContent:h,alignItems:p,height:"100%",maxWidth:"100%",marginBottom:C}),childWrapper:(0,n.css)({label:"layoutChildrenWrapper",marginBottom:E===0&&!s?0:y,marginRight:E===0?y:0,display:"flex",alignItems:p,"&:last-child":{marginBottom:E===1?0:void 0,marginRight:E===0?0:void 0}})}},c={none:0,xs:.5,sm:1,md:2,lg:3},d=(f,E,v)=>{const h=E&&E!=="none"&&f.spacing(c[E])||0,p=v&&v!=="none"&&f.spacing(c[v])||0;return{wrapper:(0,n.css)({label:"container",margin:p,padding:h})}}},13086:(G,A,e)=>{"use strict";e.d(A,{K:()=>i});var n=e(66681),a=e(85960),o=e(47257),r=e(79918);const i=a.forwardRef((u,l)=>{const{gap:m=1,alignItems:c,justifyContent:d,direction:f,wrap:E,children:v,grow:h,shrink:p,basis:s,flex:y,...C}=u,b=(0,o.wW)(g,m,c,d,f,E,h,p,s,y);return a.createElement("div",{ref:l,className:b.flex,...C},v)});i.displayName="Stack";const g=(u,l,m,c,d,f,E,v,h,p)=>({flex:(0,n.css)([{display:"flex"},(0,r.U)(u,d,s=>({flexDirection:s})),(0,r.U)(u,f,s=>({flexWrap:s})),(0,r.U)(u,m,s=>({alignItems:s})),(0,r.U)(u,c,s=>({justifyContent:s})),(0,r.U)(u,l,s=>({gap:u.spacing(s)})),(0,r.U)(u,E,s=>({flexGrow:s})),(0,r.U)(u,v,s=>({flexShrink:s})),(0,r.U)(u,h,s=>({flexBasis:s})),(0,r.U)(u,p,s=>({flex:s}))])})},79918:(G,A,e)=>{"use strict";e.d(A,{U:()=>a});function n(o,r,i,g){const u=r[g];if(u!=null)return{[o.breakpoints.up(g)]:i(u)}}function a(o,r,i){return r==null?null:typeof r!="object"||!("xs"in r)?i(r):[n(o,r,i,"xs"),n(o,r,i,"sm"),n(o,r,i,"md"),n(o,r,i,"lg"),n(o,r,i,"xl"),n(o,r,i,"xxl")]}},59672:(G,A,e)=>{"use strict";e.d(A,{r:()=>i});var n=e(85960),a=e(16088),o=e(12693),r=e(86734);const i=(0,n.forwardRef)(({href:g,children:u,...l},m)=>{const c=o.u.stripBaseFromUrl(r.QX.sanitizeUrl(g??""));return n.createElement(a.Link,{ref:m,to:c,...l},u)});i.displayName="Link"},79055:(G,A,e)=>{"use strict";e.d(A,{h:()=>c});var n=e(66681),a=e(85960),o=e(12693),r=e(86734),i=e(47257),g=e(97666),u=e(85296),l=e(59672);const m={h1:"xl",h2:"xl",h3:"lg",h4:"lg",h5:"md",h6:"md",body:"md",bodySmall:"xs"},c=(0,a.forwardRef)(({href:f,color:E="link",external:v=!1,inline:h=!0,variant:p="body",weight:s,icon:y,children:C,...b},S)=>{const D=o.u.stripBaseFromUrl(r.QX.sanitizeUrl(f??"")),M=(0,i.l4)(),T=d(M,h,p,s,E),R=y||"external-link-alt";return v?a.createElement("a",{href:D,ref:S,...b,target:"_blank",rel:"noreferrer",className:T},C,a.createElement(g.J,{size:m[p]||"md",name:R})):a.createElement(l.r,{ref:S,href:D,...b,className:T},C,y&&a.createElement(g.J,{name:y,size:m[p]||"md"}))});c.displayName="TextLink";const d=(f,E,v,h,p)=>(0,n.css)([v&&{...f.typography[v]},h&&{fontWeight:(0,u.RC)(h,f)},p&&{color:f.colors.text[p]},{alignItems:"center",gap:"0.25em",display:"inline-flex",textDecoration:"none","&:hover":{textDecoration:"underline",color:f.colors.text.link}},E&&{textDecoration:"underline","&:hover":{textDecoration:"none"}}])},74045:(G,A,e)=>{"use strict";e.d(A,{L:()=>i});var n=e(66681),a=e(85960),o=e(33808);const r=(0,o.B)((g=!1)=>({list:(0,n.css)({listStyleType:"none",margin:0,padding:0}),item:(0,n.css)({display:g&&"inline-block"||"block"})}));class i extends a.PureComponent{constructor(u){super(u)}render(){const{items:u,renderItem:l,getItemKey:m,className:c,inline:d}=this.props,f=r(d);return a.createElement("ul",{className:(0,n.cx)(f.list,c)},u.map((E,v)=>a.createElement("li",{className:f.item,key:m?m(E):v},l(E,v))))}}},47024:(G,A,e)=>{"use strict";e.d(A,{Y:()=>o});var n=e(85960),a=e(74045);class o extends n.PureComponent{render(){return n.createElement(a.L,{inline:!0,...this.props})}}},62102:(G,A,e)=>{"use strict";e.d(A,{a:()=>o});var n=e(85960),a=e(74045);class o extends n.PureComponent{render(){return n.createElement(a.L,{...this.props})}}},23615:(G,A,e)=>{"use strict";e.d(A,{F:()=>c});var n=e(66681),a=e(85960),o=e(47257);const r=28,i=2.4,g=500,u=4e3,l=300,m=100/r*100;function c({width:f,delay:E=l,ariaLabel:v="Loading bar"}){const h=Math.min(Math.max(Math.round(f*i),g),u),p=(0,o.wW)(d,E,h),s={overflow:"hidden"};return a.createElement("div",{style:s},a.createElement("div",{"aria-label":v,className:p.bar}))}const d=(f,E,v)=>{const h=(0,n.keyframes)({"0%":{transform:"translateX(-100%)"},"85%, 100%":{transform:`translateX(${m}%)`}});return{bar:(0,n.css)({width:r+"%",height:1,background:"linear-gradient(90deg, rgba(110, 159, 255, 0) 0%, #6E9FFF 80.75%, rgba(110, 159, 255, 0) 100%)",transform:"translateX(-100%)",animationName:h,animationDelay:`${E}ms`,animationDuration:`${v}ms`,animationTimingFunction:"linear",animationIterationCount:"infinite",willChange:"transform"})}}},79468:(G,A,e)=>{"use strict";e.d(A,{u:()=>i});var n=e(66681),a=e(85960),o=e(47257),r=e(75682);const i=({text:u,className:l,...m})=>{const c=(0,o.wW)(g);return a.createElement("div",{className:(0,n.cx)(c.container,l),...m},u," ",a.createElement(r.$,{inline:!0}))},g=u=>({container:(0,n.css)({marginBottom:u.spacing(4)})})},53231:(G,A,e)=>{"use strict";e.d(A,{b:()=>r});var n=e(85960),a=e(27436),o=e(60190);const r=({value:i,onChange:g,context:u,item:l})=>{const m=l.settings??{},c=(0,o.IX)(u.data,m?.filter),d=(0,o.nw)(c,i),f=(0,n.useCallback)(v=>{if(!(v&&!(0,o.w3)(v.value,c)))return g(v?.value)},[c,g]),E=d.find(v=>v.value===i);return n.createElement(n.Fragment,null,n.createElement(a.Ph,{value:E,placeholder:m.placeholderText??"Select field",options:d,onChange:f,noOptionsMessage:m.noFieldsMessage,width:m.width,isClearable:m.isClearable!==!1}))}},9176:(G,A,e)=>{"use strict";e.d(A,{$w:()=>d,OL:()=>l});var n=e(85960),a=e(58309),o=e(70274),r=e(34103),i=e(42305),g=e(27436);const u=(0,n.memo)(f=>{const{data:E,options:v,onChange:h,id:p}=f,s=m(E),y=c(s,v),C=(0,n.useCallback)(S=>h(S.value),[h]),b=y.find(S=>S.value===v);return n.createElement(g.Ph,{inputId:p,value:b,options:y,onChange:C})});u.displayName="FieldTypeMatcherEditor";const l=[{value:a.fS.number,label:"Number",icon:(0,i.WZ)(a.fS.number)},{value:a.fS.string,label:"String",icon:(0,i.WZ)(a.fS.string)},{value:a.fS.time,label:"Time",icon:(0,i.WZ)(a.fS.time)},{value:a.fS.boolean,label:"Boolean",icon:(0,i.WZ)(a.fS.boolean)},{value:a.fS.trace,label:"Traces",icon:(0,i.WZ)(a.fS.trace)},{value:a.fS.enum,label:"Enum",icon:(0,i.WZ)(a.fS.enum)},{value:a.fS.other,label:"Other",icon:(0,i.WZ)(a.fS.other)}],m=f=>(0,n.useMemo)(()=>{const E=new Map;for(const v of l)E.set(v.value,0);for(const v of f)for(const h of v.fields){const p=h.type||a.fS.other;let s=E.get(p);s||(s=0),E.set(p,s+1)}return E},[f]),c=(f,E)=>(0,n.useMemo)(()=>{let v=!1;const h=[];for(const p of l){const s=f.get(p.value),y=E===p.value;(s||y)&&h.push({...p,label:`${p.label} (${f.get(p.value)})`}),y&&(v=!0)}return E&&!v&&h.push({value:E,label:`${E} (No matches)`}),h},[f,E]),d={id:o.mi.byType,component:u,matcher:r.Ls.get(o.mi.byType),name:"Fields with type",description:"Set properties for fields of a specific type (number, string, boolean)",optionsToLabel:f=>f}},97021:(G,A,e)=>{"use strict";e.d(A,{J8:()=>c,fN:()=>v});var n=e(66681),a=e(85960),o=e(16515),r=e(70274),i=e(34103),g=e(1713),u=e(47257),l=e(24956),m=e(27436);const c=[{label:"==",value:g.Bd.EQ},{label:"!=",value:g.Bd.NEQ},{label:">",value:g.Bd.GT},{label:">=",value:g.Bd.GTE},{label:"<",value:g.Bd.LT},{label:"<=",value:g.Bd.LTE}];function d(h){return h===o.gz.allIsNull||h===o.gz.allIsZero}const f=({options:h,onChange:p})=>{const s=(0,u.wW)(E),y=(0,a.useMemo)(()=>o.TB.selectOptions([h?.reducer]),[h?.reducer]),C=(0,a.useCallback)(T=>p({...h,reducer:T.value}),[h,p]),b=(0,a.useCallback)(T=>p({...h,op:T.value}),[h,p]),S=(0,a.useCallback)(T=>{const R=T.currentTarget.valueAsNumber;return p({...h,value:R})},[h,p]),D=h??{},M=d(h.reducer);return a.createElement("div",{className:s.spot},a.createElement(m.Ph,{value:y.current,options:y.options,onChange:C,placeholder:"Select field reducer"}),D.reducer&&!M&&a.createElement(a.Fragment,null,a.createElement(m.Ph,{value:c.find(T=>T.value===D.op),options:c,onChange:b,"aria-label":"Comparison operator",width:19}),a.createElement(l.I,{type:"number",value:D.value,onChange:S})))},E=h=>({spot:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"center",alignContent:"flex-end",gap:"4px"})}),v={id:r.mi.byValue,component:f,matcher:i.Ls.get(r.mi.byValue),name:"Fields with values",description:"Set properties for fields with reducer condition",optionsToLabel:h=>`${h?.reducer} ${h?.op} ${h?.value}`}},63964:(G,A,e)=>{"use strict";e.d(A,{O:()=>u,S:()=>c});var n=e(85960),a=e(94372),o=e(70274),r=e(34103),i=e(27436);const g=(d,f,E)=>{if(!E)return;let v=d.find(h=>!f.some(p=>h===p));if(v)return v};function u({value:d,data:f,onChange:E,placeholder:v}){const h=(0,n.useMemo)(()=>l(f),[f]),[p,s]=(0,n.useState)({refIds:[],value:void 0}),y=(0,n.useMemo)(()=>h.find(b=>b.value===d)??g(h,p.refIds,p.value),[d,h,p]),C=(0,n.useCallback)(b=>{E(b?.value)},[E]);return(h!==p.refIds||y?.value!==p.value)&&s({refIds:h,value:y?.value}),n.createElement(i.Ph,{options:h,onChange:C,isClearable:!0,placeholder:v??"Select query refId",value:y})}function l(d){const f=new Map;for(const v of d){const h=v.refId??"",p=f.get(h)??[];p.length===0&&f.set(h,p),p.push(v)}const E=[];for(const[v,h]of f.entries())E.push({value:v,label:`Query: ${v??"(missing refId)"}`,description:m(h)});return E}function m(d){return`Frames (${d.length}):
    ${d.slice(0,Math.min(3,d.length)).map(f=>(0,a.nf)(f)).join(", ")} ${d.length>3?"...":""}`}const c={id:o.mi.byFrameRefID,component:d=>n.createElement(u,{value:d.options,data:d.data,onChange:d.onChange}),matcher:r.Ls.get(o.mi.byFrameRefID),name:"Fields returned by query",description:"Set properties for fields from a specific query",optionsToLabel:d=>d}},83741:(G,A,e)=>{"use strict";e.d(A,{i:()=>s});var n=e(73039),a=e(85960),o=e(70274),r=e(34103),i=e(24956);const g=(0,a.memo)(y=>{const{options:C,onChange:b}=y,S=(0,a.useCallback)(D=>b(D.target.value),[b]);return a.createElement(i.I,{placeholder:"Enter regular expression",defaultValue:C,onBlur:S})});g.displayName="FieldNameByRegexMatcherEditor";const u={id:o.mi.byRegexp,component:g,matcher:r.Ls.get(o.mi.byRegexp),name:"Fields with name matching regex",description:"Set properties for fields with names matching a regex",optionsToLabel:y=>y};var l=e(27436),m=e(60190);const c=(0,a.memo)(y=>{const{data:C,options:b,onChange:S,id:D}=y,M=(0,m.IX)(C),T=(0,m.nw)(M,b),R=(0,a.useCallback)(x=>{if((0,m.w3)(x.value,M))return S(x.value)},[M,S]),O=T.find(x=>x.value===b);return a.createElement(l.Ph,{value:O,options:T,onChange:R,inputId:D})});c.displayName="FieldNameMatcherEditor";const d={id:o.mi.byName,component:c,matcher:r.Ls.get(o.mi.byName),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:y=>y},f=(0,a.memo)(y=>{const{data:C,options:b,onChange:S}=y,{readOnly:D,prefix:M}=b,T=(0,m.IX)(C),R=(0,m.nw)(T,void 0),O=(0,a.useCallback)(x=>{if(Array.isArray(x))return S({...b,names:x.reduce((I,L)=>((0,m.w3)(L.value,T)&&I.push(L.value),I),[])})},[T,S,b]);if(D){const x=(b.names??[]).join(", ");return a.createElement(i.I,{value:x,readOnly:!0,disabled:!0,prefix:M})}return a.createElement(l.NU,{value:b.names,options:R,onChange:O})});f.displayName="FieldNameMatcherEditor";const E={id:o.mi.byNames,component:f,matcher:r.Ls.get(o.mi.byNames),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:y=>(y.names??[]).join(", "),excludeFromPicker:!0};var v=e(9176),h=e(97021),p=e(63964);const s=new n.B(()=>[d,u,v.$w,p.S,E,h.fN])},60190:(G,A,e)=>{"use strict";e.d(A,{IX:()=>g,g2:()=>i,nw:()=>u,w3:()=>r});var n=e(85960),a=e(94372),o=e(42305);function r(l,m){return l?m.display.has(l)||m.raw.has(l):!1}function i(l,m){const c={display:new Set,raw:new Set,fields:new Map};for(const d of l)for(const f of d.fields){if(m&&!m(f))continue;const E=(0,a.CZ)(f,d,l);c.display.add(E),c.fields.set(E,f),f.name&&E!==f.name&&(c.raw.add(f.name),c.fields.set(f.name,f))}return c}function g(l,m){return(0,n.useMemo)(()=>i(l,m),[l,m])}function u(l,m,c,d){return(0,n.useMemo)(()=>{let f=!1;const E=[];c&&E.push(c);for(const v of l.display){!f&&v===m&&(f=!0);const h=l.fields.get(v);(!d||d===h?.type)&&E.push({value:v,label:v,icon:h?(0,o.e7)(h):void 0})}for(const v of l.raw)l.display.has(v)||(!f&&v===m&&(f=!0),E.push({value:v,label:`${v} (base field name)`}));return m&&!f&&E.push({value:m,label:`${m} (not found)`}),E},[l,m,c,d])}},54635:(G,A,e)=>{"use strict";e.d(A,{v:()=>m});var n=e(66681),a=e(85960),o=e(47257),r=e(50427),i=e(71862),g=e(69707),u=e(14718);const l=a.forwardRef(({header:d,children:f,ariaLabel:E,onOpen:v,onClose:h,onKeyDown:p,...s},y)=>{const C=(0,o.wW)(c),b=(0,a.useRef)(null);(0,a.useImperativeHandle)(y,()=>b.current);const[S]=(0,u.d)({localRef:b,onOpen:v,onClose:h,onKeyDown:p});return a.createElement("div",{...s,tabIndex:-1,ref:b,className:C.wrapper,role:"menu","aria-label":E,onKeyDown:S},d&&a.createElement("div",{className:(0,n.cx)(C.header,!!f&&a.Children.toArray(f).length>0&&C.headerBorder)},d),f)});l.displayName="Menu";const m=Object.assign(l,{Item:g.s,Divider:r.R,Group:i.k}),c=d=>({header:(0,n.css)({padding:`${d.spacing(.5,1,1,1)}`}),headerBorder:(0,n.css)({borderBottom:`1px solid ${d.colors.border.weak}`}),wrapper:(0,n.css)({background:`${d.colors.background.primary}`,boxShadow:`${d.shadows.z3}`,display:"inline-block",borderRadius:`${d.shape.radius.default}`,padding:`${d.spacing(.5,0)}`})})},50427:(G,A,e)=>{"use strict";e.d(A,{R:()=>r});var n=e(66681),a=e(85960),o=e(47257);function r(){const g=(0,o.wW)(i);return a.createElement("div",{className:g.divider})}const i=g=>({divider:(0,n.css)({height:1,backgroundColor:g.colors.border.weak,margin:g.spacing(.5,0)})})},71862:(G,A,e)=>{"use strict";e.d(A,{k:()=>g});var n=e(66681),a=e(56375),o=e.n(a),r=e(85960),i=e(47257);const g=({label:l,ariaLabel:m,children:c})=>{const d=(0,i.wW)(u),f=`group-label-${(0,a.uniqueId)()}`;return r.createElement("div",{role:"group","aria-labelledby":!m&&l?f:void 0,"aria-label":m},l&&r.createElement("label",{id:f,className:d.groupLabel,"aria-hidden":!0},l),c)};g.displayName="MenuGroup";const u=l=>({groupLabel:(0,n.css)({color:l.colors.text.secondary,fontSize:l.typography.size.sm,padding:l.spacing(.5,1)})})},69707:(G,A,e)=>{"use strict";e.d(A,{s:()=>f});var n=e(66681),a=e(85960),o=e(47257),r=e(55182),i=e(97666),g=e(13086),u=e(92369),l=e(14718);const m=v=>{if(!v)return!1;const h=v.parentElement.getBoundingClientRect(),p=v.getBoundingClientRect();return p.width!==0&&h.right+p.width+10>window.innerWidth},c=a.memo(({items:v,isOpen:h,openedWithArrow:p,setOpenedWithArrow:s,close:y,customStyle:C})=>{const b=(0,o.wW)(d),S=(0,a.useRef)(null),[D]=(0,l.d)({localRef:S,isMenuOpen:h,openedWithArrow:p,setOpenedWithArrow:s,close:y}),[M,T]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{h&&S.current&&T(m(S.current))},[h]),a.createElement(a.Fragment,null,a.createElement("div",{className:b.iconWrapper,"aria-hidden":!0,"aria-label":u.wl.components.Menu.SubMenu.icon},a.createElement(i.J,{name:"angle-right",className:b.icon})),h&&a.createElement("div",{ref:S,className:(0,n.cx)(b.subMenu,{[b.pushLeft]:M}),"aria-label":u.wl.components.Menu.SubMenu.container,style:C},a.createElement("div",{tabIndex:-1,className:b.itemsWrapper,role:"menu",onKeyDown:D},v)))});c.displayName="SubMenu";const d=v=>({iconWrapper:(0,n.css)({display:"flex",flex:1,justifyContent:"end"}),icon:(0,n.css)({opacity:.7,marginLeft:v.spacing(1),color:v.colors.text.secondary}),itemsWrapper:(0,n.css)({background:v.colors.background.primary,boxShadow:v.shadows.z3,display:"inline-block",borderRadius:v.shape.radius.default}),pushLeft:(0,n.css)({right:"100%",left:"unset"}),subMenu:(0,n.css)({position:"absolute",top:0,left:"100%",zIndex:v.zIndex.dropdown})}),f=a.memo(a.forwardRef((v,h)=>{const{url:p,icon:s,label:y,description:C,ariaLabel:b,ariaChecked:S,target:D,onClick:M,className:T,active:R,disabled:O,destructive:x,childItems:I,role:L="menuitem",tabIndex:P=-1,customSubMenuContainerStyles:N,shortcut:F,testId:U}=v,j=(0,o.wW)(E),[V,_]=(0,a.useState)(R),[H,z]=(0,a.useState)(!1),[K,Y]=(0,a.useState)(!1),k=(0,a.useCallback)(()=>{O||(z(!0),_(!0))},[O]),q=(0,a.useCallback)(()=>{O||(z(!1),_(!1))},[O]),X=I&&I.length>0,te=X?"div":p===void 0?"button":"a",se=(0,n.cx)({[j.item]:!0,[j.active]:V,[j.disabled]:O,[j.destructive]:x&&!O},T),de={[te==="button"?"disabled":"aria-disabled"]:O,...te==="a"&&O&&{href:void 0,onClick:void 0},...O&&{tabIndex:-1,["data-disabled"]:O}},re=(0,a.useRef)(null);(0,a.useImperativeHandle)(h,()=>re.current);const fe=ue=>{switch(ue.key){case"ArrowRight":ue.preventDefault(),ue.stopPropagation(),X&&(z(!0),Y(!0),_(!0));break;default:break}},ie=()=>{z(!1),_(!1),re?.current?.focus()},oe=!!(F&&F.length>0);return a.createElement(te,{target:D,className:se,rel:D==="_blank"?"noopener noreferrer":void 0,href:p,onClick:M,onMouseEnter:k,onMouseLeave:q,onKeyDown:fe,role:p===void 0?L:void 0,"data-role":"menuitem",ref:re,"data-testid":U,"aria-label":b,"aria-checked":S,tabIndex:P,...de},a.createElement(g.K,{direction:"row",justifyContent:"flex-start",alignItems:"center"},s&&a.createElement(i.J,{name:s,className:j.icon,"aria-hidden":!0}),a.createElement("span",{className:j.ellipsis},y),a.createElement("div",{className:(0,n.cx)(j.rightWrapper,{[j.withShortcut]:oe})},oe&&a.createElement("div",{className:j.shortcut},a.createElement(i.J,{name:"keyboard",title:"keyboard shortcut"}),F),X&&a.createElement(c,{items:I,isOpen:H,openedWithArrow:K,setOpenedWithArrow:Y,close:ie,customStyle:N}))),C&&a.createElement("div",{className:(0,n.cx)(j.description,j.ellipsis,{[j.descriptionWithIcon]:s!==void 0})},C))}));f.displayName="MenuItem";const E=v=>({item:(0,n.css)({background:"none",cursor:"pointer",whiteSpace:"nowrap",color:v.colors.text.primary,display:"flex",flexDirection:"column",alignItems:"stretch",padding:v.spacing(.5,2),minHeight:v.spacing(4),margin:0,border:"none",width:"100%",position:"relative","&:hover, &:focus, &:focus-visible":{background:v.colors.action.hover,color:v.colors.text.primary,textDecoration:"none"},"&:focus-visible":(0,r.getFocusStyles)(v)}),active:(0,n.css)({background:v.colors.action.hover}),destructive:(0,n.css)({color:v.colors.error.text,svg:{color:v.colors.error.text},"&:hover, &:focus, &:focus-visible":{background:v.colors.error.main,color:v.colors.error.contrastText,svg:{color:v.colors.error.contrastText}}}),disabled:(0,n.css)({color:v.colors.action.disabledText,label:"menu-item-disabled","&:hover, &:focus, &:focus-visible":{cursor:"not-allowed",background:"none",color:v.colors.action.disabledText}}),icon:(0,n.css)({opacity:.7,color:v.colors.text.secondary}),rightWrapper:(0,n.css)({display:"flex",alignItems:"center",marginLeft:"auto"}),withShortcut:(0,n.css)({minWidth:v.spacing(10.5)}),shortcut:(0,n.css)({display:"flex",alignItems:"center",gap:v.spacing(1),marginLeft:v.spacing(2),color:v.colors.text.secondary,opacity:.7}),description:(0,n.css)({...v.typography.bodySmall,color:v.colors.text.secondary,textAlign:"start"}),descriptionWithIcon:(0,n.css)({marginLeft:v.spacing(3)}),ellipsis:(0,n.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})})},14718:(G,A,e)=>{"use strict";e.d(A,{d:()=>i});var n=e(85960),a=e(33067);const o=(g,u)=>(g%u+u)%u,r=-1,i=({localRef:g,isMenuOpen:u,openedWithArrow:l,setOpenedWithArrow:m,close:c,onOpen:d,onClose:f,onKeyDown:E})=>{const[v,h]=(0,n.useState)(r);return(0,n.useEffect)(()=>{u&&l&&(h(0),m?.(!1))},[u,l,m]),(0,n.useEffect)(()=>{const s=g?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])');s?.[v]?.focus(),s?.forEach((y,C)=>{y.tabIndex=C===v?0:-1})},[g,v]),(0,a.Z)(()=>{d?.(h)}),[s=>{const y=g?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])'),C=y?.length??0;switch(s.key){case"ArrowUp":s.preventDefault(),s.stopPropagation(),h(o(v-1,C));break;case"ArrowDown":s.preventDefault(),s.stopPropagation(),h(o(v+1,C));break;case"ArrowLeft":s.preventDefault(),s.stopPropagation(),h(r),c?.();break;case"Home":s.preventDefault(),s.stopPropagation(),h(0);break;case"End":s.preventDefault(),s.stopPropagation(),h(C-1);break;case"Enter":s.preventDefault(),s.stopPropagation(),y?.[v]?.click();break;case"Escape":f?.();break;case"Tab":s.preventDefault(),f?.();break;default:break}E?.(s)}]}},7288:(G,A,e)=>{"use strict";e.d(A,{u:()=>f});var n=e(66681),a=e(57529),o=e(89344),r=e(48925),i=e(85960),g=e(47257),u=e(64793),l=e(75064),m=e(74042),c=e(42994),d=e(37262);function f(h){const{title:p,children:s,isOpen:y=!1,closeOnEscape:C=!0,closeOnBackdropClick:b=!0,className:S,contentClassName:D,onDismiss:M,onClickBackdrop:T,trapFocus:R=!0}=h,O=(0,g.wW)(d.J),x=(0,i.useRef)(null),{overlayProps:I,underlayProps:L}=(0,r.Ir)({isKeyboardDismissDisabled:!C,isOpen:y,onClose:M},x),{dialogProps:P,titleProps:N}=(0,a.R)({},x);if(!y)return null;const F=(0,n.cx)(O.modalHeader,typeof p!="string"&&O.modalHeaderWithTabs);return i.createElement(r.Xj,null,i.createElement("div",{role:"presentation",className:O.modalBackdrop,onClick:T||(b?M:void 0),...L}),i.createElement(o.MT,{contain:R,autoFocus:!0,restoreFocus:!0},i.createElement("div",{className:(0,n.cx)(O.modal,S),ref:x,...I,...P},i.createElement("div",{className:F},typeof p=="string"&&i.createElement(v,{...h,title:p,id:N.id}),typeof p!="string"&&p,i.createElement("div",{className:O.modalHeaderClose},i.createElement(l.h,{name:"times",size:"xl",onClick:M,tooltip:(0,u.t)("grafana-ui.modal.close-tooltip","Close")}))),i.createElement("div",{className:(0,n.cx)(O.modalContent,D)},s))))}function E({leftItems:h,children:p}){const s=(0,g.wW)(d.J);return h?i.createElement("div",{className:s.modalButtonRow},i.createElement(m.Lh,{justify:"space-between"},i.createElement(m.Lh,{justify:"flex-start",spacing:"md"},h),i.createElement(m.Lh,{justify:"flex-end",spacing:"md"},p))):i.createElement("div",{className:s.modalButtonRow},i.createElement(m.Lh,{justify:"flex-end",spacing:"md",wrap:!0},p))}f.ButtonRow=E;function v({icon:h,iconTooltip:p,title:s,id:y}){return i.createElement(c.x,{icon:h,iconTooltip:p,title:s,id:y})}},42994:(G,A,e)=>{"use strict";e.d(A,{x:()=>r});var n=e(85960),a=e(47257),o=e(37262);const r=({icon:i,iconTooltip:g,title:u,children:l,id:m})=>{const c=(0,a.wW)(o.J);return n.createElement(n.Fragment,null,n.createElement("h2",{className:c.modalHeaderTitle,id:m},u),l)}},13010:(G,A,e)=>{"use strict";e.d(A,{Q:()=>a});var n=e(85960);const a=({children:o})=>n.createElement("div",{className:"share-modal-body"},n.createElement("div",{className:"share-modal-header"},n.createElement("div",{className:"share-modal-content"},o)))},87501:(G,A,e)=>{"use strict";e.d(A,{H:()=>i});var n=e(85960),a=e(94439),o=e(70523),r=e(42994);const i=({icon:g,title:u,tabs:l,activeTab:m,onChangeTab:c})=>n.createElement(r.x,{icon:g,title:u},n.createElement(o.J,{hideBorder:!0},l.map((d,f)=>n.createElement(a.O,{key:`${d.value}-${f}`,label:d.label,icon:d.icon,suffix:d.tabSuffix,active:d.value===m,onChangeTab:()=>c(d)}))))},93349:(G,A,e)=>{"use strict";e.d(A,{$i:()=>o,JY:()=>i,Y0:()=>r,kr:()=>a});var n=e(85960);const a=n.createContext({component:null,props:{},showModal:()=>{},hideModal:()=>{}});class o extends n.Component{constructor(u){super(u),this.showModal=(l,m)=>{this.setState({component:l,props:m})},this.hideModal=()=>{this.setState({component:null,props:{}})},this.state={component:u.component||null,props:u.props||{},showModal:this.showModal,hideModal:this.hideModal}}render(){return n.createElement(a.Provider,{value:this.state},this.props.children)}}const r=()=>n.createElement(a.Consumer,null,({component:g,props:u})=>g?n.createElement(g,{...u}):null),i=a.Consumer},37262:(G,A,e)=>{"use strict";e.d(A,{J:()=>a});var n=e(66681);const a=o=>{const r=o.shape.radius.default;return{modal:(0,n.css)({position:"fixed",zIndex:o.zIndex.modal,background:o.colors.background.primary,boxShadow:o.shadows.z3,borderRadius:r,border:`1px solid ${o.colors.border.weak}`,backgroundClip:"padding-box",outline:"none",width:"750px",maxWidth:"100%",left:0,right:0,marginLeft:"auto",marginRight:"auto",top:"10%",maxHeight:"80%",display:"flex",flexDirection:"column"}),modalBackdrop:(0,n.css)({position:"fixed",zIndex:o.zIndex.modalBackdrop,top:0,right:0,bottom:0,left:0,backgroundColor:o.components.overlay.background,backdropFilter:"blur(1px)"}),modalHeader:(0,n.css)({label:"modalHeader",display:"flex",alignItems:"center",minHeight:"42px",margin:o.spacing(1,2,0,2)}),modalHeaderWithTabs:(0,n.css)({borderBottom:`1px solid ${o.colors.border.weak}`}),modalHeaderTitle:(0,n.css)({fontSize:o.typography.size.lg,margin:o.spacing(0,4,0,1),display:"flex",alignItems:"center",position:"relative",top:"2px"}),modalHeaderIcon:(0,n.css)({marginRight:o.spacing(2),fontSize:"inherit","&:before":{verticalAlign:"baseline"}}),modalHeaderClose:(0,n.css)({height:"100%",display:"flex",alignItems:"center",color:o.colors.text.secondary,flexGrow:1,justifyContent:"flex-end"}),modalContent:(0,n.css)({overflow:"auto",padding:o.spacing(3),width:"100%"}),modalButtonRow:(0,n.css)({paddingTop:o.spacing(3)})}}},62577:(G,A,e)=>{"use strict";e.d(A,{p:()=>E});var n=e(66681),a=e(85960),o=e(35853),r=e(92369),i=e(47257),g=e(26927),u=e(42206);function l(h){for(let p=h.length-1;p>0;p--){const s=h.charAt(p);if(s==="$")return{index:p,prefix:h.substring(p)};if(s===" "||s==="	"||s==='"'||s==="'")return{index:p+1,prefix:h.substring(p+1)}}return{index:0,prefix:h}}function m(h,p,s,y){const C=[];for(const b of s)p&&!b.label.startsWith(p)||C.push({...b,kind:c(h,b.kind),range:y,insertText:b.insertText??b.label});return C}function c(h,p){switch(p){case u.k.Method:return h.languages.CompletionItemKind.Method;case u.k.Field:return h.languages.CompletionItemKind.Field;case u.k.Property:return h.languages.CompletionItemKind.Property;case u.k.Constant:return h.languages.CompletionItemKind.Constant;case u.k.Text:return h.languages.CompletionItemKind.Text}return h.languages.CompletionItemKind.Text}function d(h,p,s,y){if(!(!p||!s))return h.languages.registerCompletionItemProvider(p,{triggerCharacters:["$"],provideCompletionItems:(C,b,S)=>{if(C.id!==y)return;const D={startLineNumber:b.lineNumber,endLineNumber:b.lineNumber,startColumn:b.column,endColumn:b.column};if(S.triggerCharacter==="$")return D.startColumn=b.column-1,{suggestions:m(h,"$",s(),D)};const M=C.getValueInRange({startLineNumber:b.lineNumber,startColumn:1,endLineNumber:b.lineNumber,endColumn:b.column}),{index:T,prefix:R}=l(M);D.startColumn=T+1;const O=m(h,R,s(),D);if(O.length)return{suggestions:O}}})}class f extends a.PureComponent{constructor(p){super(p),this.loadCustomLanguage=()=>{const{language:s}=this.props,y=o.F.getIfExists(s);return y?y.init():Promise.resolve()},this.getEditorValue=()=>"",this.onBlur=()=>{const{onBlur:s}=this.props;s&&s(this.getEditorValue())},this.onFocus=()=>{const{onFocus:s}=this.props;s&&s(this.getEditorValue())},this.onSave=()=>{const{onSave:s}=this.props;s&&s(this.getEditorValue())},this.handleBeforeMount=s=>{this.monaco=s;const{onBeforeEditorMount:y}=this.props;y?.(s)},this.handleOnMount=(s,y)=>{const{getSuggestions:C,language:b,onChange:S,onEditorDidMount:D}=this.props;this.modelId=s.getModel()?.id,this.getEditorValue=()=>s.getValue(),C&&this.modelId&&(this.completionCancel=d(y,b,C,this.modelId)),s.onKeyDown(T=>{T.keyCode===y.KeyCode.KeyS&&(T.ctrlKey||T.metaKey)&&(T.preventDefault(),this.onSave())});const M=this.loadCustomLanguage();S&&s.getModel()?.onDidChangeContent(()=>S(s.getValue())),D&&M.then(()=>D(s,y))}}componentWillUnmount(){this.completionCancel&&this.completionCancel.dispose(),this.props.onEditorWillUnmount?.()}componentDidUpdate(p){const{getSuggestions:s,language:y}=this.props,C=p.language!==y;if(p.getSuggestions!==s||C){if(this.completionCancel&&this.completionCancel.dispose(),!this.monaco){console.warn("Monaco instance not loaded yet");return}s&&this.modelId&&(this.completionCancel=d(this.monaco,y,s,this.modelId))}C&&this.loadCustomLanguage()}render(){const{theme:p,language:s,width:y,height:C,showMiniMap:b,showLineNumbers:S,readOnly:D,monacoOptions:M}=this.props,{alwaysConsumeMouseWheel:T,...R}=M??{},O=this.props.value??"",x=O.length>100,I=this.props.containerStyles??v(p).container,L={wordWrap:"off",tabSize:2,codeLens:!1,contextmenu:!1,minimap:{enabled:x&&b,renderCharacters:!1},readOnly:D,lineNumbersMinChars:4,lineDecorationsWidth:1*p.spacing.gridSize,overviewRulerBorder:!1,automaticLayout:!0,padding:{top:.5*p.spacing.gridSize,bottom:.5*p.spacing.gridSize},fixedOverflowWidgets:!0,scrollbar:{alwaysConsumeMouseWheel:T??!1}};return S||(L.glyphMargin=!1,L.folding=!1,L.lineNumbers="off",L.lineNumbersMinChars=0),a.createElement("div",{className:I,onFocus:this.onFocus,onBlur:this.onBlur,"data-testid":r.wl.components.CodeEditor.container},a.createElement(g.o,{width:y,height:C,language:s,value:O,options:{...L,...R??{}},beforeMount:this.handleBeforeMount,onMount:this.handleOnMount,keepCurrentModel:!0}))}}const E=(0,i.HE)(f),v=h=>({container:(0,n.css)({borderRadius:h.shape.radius.default,border:`1px solid ${h.components.input.borderColor}`})})},26927:(G,A,e)=>{"use strict";e.d(A,{o:()=>g});var n=e(85960),a=e(81445);const o=u=>{const l=(0,a.Z)(async()=>await u);return{...l,dependency:l.value}};var r=e(2855),i=e(79468);const g=u=>{const{loading:l,error:m,dependency:c}=o(e.e(2462).then(e.bind(e,19203)));if(l)return n.createElement(i.u,{text:""});if(m)return n.createElement(r.X,{title:"React Monaco Editor failed to load",error:m,errorInfo:{componentStack:m?.stack||""}});const d=c.ReactMonacoEditor;return n.createElement(d,{...u})}},42206:(G,A,e)=>{"use strict";e.d(A,{k:()=>n});var n=(a=>(a.Method="method",a.Field="field",a.Property="property",a.Constant="constant",a.Text="text",a))(n||{})},47691:(G,A,e)=>{"use strict";e.d(A,{T:()=>a});var n=e(42206);function a(o){const r="${"+o.value+"}",i=o.value===o.label?o.origin:`${o.label} / ${o.origin}`;return{label:r,kind:n.k.Property,detail:i,documentation:o.documentation}}},2598:(G,A,e)=>{"use strict";e.d(A,{X:()=>c});var n=e(66681),a=e(85960),o=e(92369),r=e(47257),i=e(55182),g=e(97666),u=e(75064),l=e(59672),m=e(19424);const c=a.memo(({title:f,section:E,parent:v,pageIcon:h,onGoBack:p,children:s,titleHref:y,parentHref:C,leftItems:b,isFullscreen:S,className:D,"aria-label":M,buttonOverflowAlignment:T="right",forceShowLeftItems:R=!1})=>{const O=(0,r.wW)(d),x=(0,n.cx)("page-toolbar",O.toolbar,{["page-toolbar--fullscreen"]:S,[O.noPageIcon]:!h},D),I=a.createElement(a.Fragment,null,a.createElement("span",{className:O.truncateText},f),E&&a.createElement("span",{className:O.pre}," / ",E));return a.createElement("nav",{className:x,"aria-label":M},a.createElement("div",{className:O.leftWrapper},h&&!p&&a.createElement("div",{className:O.pageIcon},a.createElement(g.J,{name:h,size:"lg","aria-hidden":!0})),p&&a.createElement("div",{className:O.pageIcon},a.createElement(u.h,{name:"arrow-left",tooltip:"Go back (Esc)",tooltipPlacement:"bottom",size:"xxl","aria-label":o.wl.components.BackButton.backArrow,onClick:p})),a.createElement("nav",{"aria-label":"Search links",className:O.navElement},v&&C&&a.createElement(a.Fragment,null,a.createElement(l.r,{"aria-label":`Search dashboard in the ${v} folder`,className:(0,n.cx)(O.titleText,O.parentLink,O.titleLink,O.truncateText),href:C},v," ",a.createElement("span",{className:O.parentIcon})),y&&a.createElement("span",{className:(0,n.cx)(O.titleText,O.titleDivider),"aria-hidden":!0},"/")),(f||!!b?.length)&&a.createElement("div",{className:O.titleWrapper},f&&a.createElement("h1",{className:O.h1Styles},y?a.createElement(l.r,{"aria-label":"Search dashboard by name",className:(0,n.cx)(O.titleText,O.titleLink),href:y},I):a.createElement("div",{className:O.titleText},I)),b?.map((L,P)=>a.createElement("div",{className:(0,n.cx)(O.leftActionItem,{[O.forceShowLeftActionItems]:R}),key:P},L))))),a.createElement(m.R,{alignment:T},a.Children.toArray(s).filter(Boolean)))});c.displayName="PageToolbar";const d=f=>{const{spacing:E,typography:v}=f,h=(0,i.getFocusStyles)(f);return{pre:(0,n.css)({whiteSpace:"pre"}),toolbar:(0,n.css)({alignItems:"center",background:f.colors.background.canvas,display:"flex",gap:f.spacing(2),justifyContent:"space-between",padding:f.spacing(1.5,2),[f.breakpoints.down("md")]:{paddingLeft:"53px"}}),noPageIcon:(0,n.css)({[f.breakpoints.down("md")]:{paddingLeft:f.spacing(2)}}),leftWrapper:(0,n.css)({display:"flex",flexWrap:"nowrap",maxWidth:"70%"}),pageIcon:(0,n.css)({display:"none",[f.breakpoints.up("sm")]:{display:"flex",paddingRight:f.spacing(1),alignItems:"center"}}),truncateText:(0,n.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),titleWrapper:(0,n.css)({display:"flex",margin:0,minWidth:0}),navElement:(0,n.css)({display:"flex",alignItems:"center",minWidth:0}),h1Styles:(0,n.css)({margin:E(0,1,0,0),lineHeight:"inherit",flexGrow:1,minWidth:0}),parentIcon:(0,n.css)({marginLeft:f.spacing(.5)}),titleText:(0,n.css)({display:"flex",fontSize:v.size.lg,margin:0,borderRadius:f.shape.radius.default}),titleLink:(0,n.css)({"&:focus-visible":h}),titleDivider:(0,n.css)({padding:E(0,.5,0,.5),display:"none",[f.breakpoints.up("md")]:{display:"unset"}}),parentLink:(0,n.css)({display:"none",[f.breakpoints.up("md")]:{display:"unset",flex:1}}),leftActionItem:(0,n.css)({display:"none",alignItems:"center",paddingRight:E(.5),[f.breakpoints.up("md")]:{display:"flex"}}),forceShowLeftActionItems:(0,n.css)({display:"flex"})}}},44574:(G,A,e)=>{"use strict";e.d(A,{t:()=>g});var n=e(66681),a=e(85960),o=e(47257),r=e(29165),i=e(97666);const g=({currentPage:l,numberOfPages:m,onNavigate:c,hideWhenSinglePage:d,showSmallVersion:f,className:E})=>{const v=(0,o.wW)(u),h=f?1:8,p=(0,a.useMemo)(()=>{const s=[...new Array(m).keys()],y=m>h,C=(b,S)=>a.createElement("li",{key:b,className:v.item},a.createElement(r.zx,{size:"sm",variant:S,onClick:()=>c(b)},b));return s.reduce((b,S)=>{const D=S+1,M=D===l?"primary":"secondary",T=h,R=m-h+1,O=R-T,x=D===1||D===m,I=O>-1&&l>=T&&l<=R,L=f?1:3,P=f?0:2;return y?x||l<T&&D<T||O>=0&&l>R&&D>R||O<0&&l>=T&&D>R||I&&D>=l-P&&D<=l+P?b.push(C(D,M)):(D===T&&l<T||D===R&&l>R||I&&(D===l-L||D===l+L))&&b.push(a.createElement("li",{key:D,className:v.item},a.createElement(i.J,{className:v.ellipsis,name:"ellipsis-v"}))):b.push(C(D,M)),b},[])},[l,m,c,h,f,v.ellipsis,v.item]);return d&&m<=1?null:a.createElement("div",{className:(0,n.cx)(v.container,E)},a.createElement("ol",null,a.createElement("li",{className:v.item},a.createElement(r.zx,{"aria-label":"previous page",size:"sm",variant:"secondary",onClick:()=>c(l-1),disabled:l===1},a.createElement(i.J,{name:"angle-left"}))),p,a.createElement("li",{className:v.item},a.createElement(r.zx,{"aria-label":"next page",size:"sm",variant:"secondary",onClick:()=>c(l+1),disabled:l===m},a.createElement(i.J,{name:"angle-right"})))))},u=()=>({container:(0,n.css)({float:"right"}),item:(0,n.css)({display:"inline-block",paddingLeft:"10px",marginBottom:"5px"}),ellipsis:(0,n.css)({transform:"rotate(90deg)"})})},3446:(G,A,e)=>{"use strict";e.d(A,{T:()=>u});var n=e(66681),a=e(85960),o=e(92369),r=e(47257),i=e(97666),g=e(14607);const u=({onCancel:m,loading:c})=>{const d=(0,r.wW)(l);return c?a.createElement(g.u,{content:"Cancel query"},a.createElement(i.J,{className:(0,n.cx)("spin-clockwise",{[d.clickable]:!!m}),name:"sync",size:"sm",onClick:m,"aria-label":o.wl.components.LoadingIndicator.icon})):null},l=()=>({clickable:(0,n.css)({cursor:"pointer"})})},61117:(G,A,e)=>{"use strict";e.d(A,{f:()=>M});var n=e(66681),a=e(85960),o=e(45220),r=e(66137),i=e(23757),g=e(92369),u=e(47257),l=e(55182);function m({children:I,delay:L}){const[P,N]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{window.setTimeout(()=>{N(!0)},L)},[I,L]),a.createElement(a.Fragment,null,P?I:null)}var c=e(97666),d=e(23615),f=e(14607),E=e(44839),v=e(40235);function h({menu:I,title:L,placement:P="bottom",offset:N,dragClassCancel:F,menuButtonClass:U,onOpenMenu:j}){const V=L?g.wl.components.Panels.Panel.menu(L):"panel-menu-button",_=(0,a.useCallback)(H=>{H&&j&&j()},[j]);return a.createElement(E.L,{overlay:I,placement:P,offset:N,onVisibleChange:_},a.createElement(v.h,{"aria-label":`Menu for panel with ${L?`title ${L}`:"no title"}`,title:"Menu",icon:"ellipsis-v",iconSize:"md",narrow:!0,"data-testid":V,className:(0,n.cx)(U,F)}))}function p({menu:I,title:L,dragClass:P,children:N,offset:F=-32,onOpenMenu:U}){const j=(0,u.wW)(s),V=(0,a.useRef)(null),_=g.wl.components.Panels.Panel.HoverWidget,H=(0,a.useCallback)(K=>{V.current?.setPointerCapture(K.pointerId)},[]),z=(0,a.useCallback)(K=>{V.current?.releasePointerCapture(K.pointerId)},[]);return N===void 0||a.Children.count(N)===0?null:a.createElement("div",{className:(0,n.cx)(j.container,"show-on-hover"),style:{top:F},"data-testid":_.container},P&&a.createElement("div",{className:(0,n.cx)(j.square,j.draggable,P),onPointerDown:H,onPointerUp:z,ref:V,"data-testid":_.dragIcon},a.createElement(c.J,{name:"expand-arrows",className:j.draggableIcon})),N,I&&a.createElement(h,{menu:I,title:L,placement:"bottom",menuButtonClass:j.menuButton,onOpenMenu:U}))}function s(I){return{container:(0,n.css)({label:"hover-container-widget",transition:"all .1s linear",display:"flex",position:"absolute",zIndex:1,right:0,boxSizing:"content-box",alignItems:"center",background:I.colors.background.secondary,color:I.colors.text.primary,border:`1px solid ${I.colors.border.weak}`,borderRadius:I.shape.radius.default,height:I.spacing(4),boxShadow:I.shadows.z1}),square:(0,n.css)({display:"flex",justifyContent:"center",alignItems:"center",width:I.spacing(4),height:"100%"}),draggable:(0,n.css)({cursor:"move",[I.breakpoints.down("md")]:{display:"none"}}),menuButton:(0,n.css)({background:"inherit",border:"none","&:hover":{background:I.colors.secondary.main}}),draggableIcon:(0,n.css)({transform:"rotate(45deg)",color:I.colors.text.secondary,"&:hover":{color:I.colors.text.primary}})}}var y=e(70969);function C({description:I,className:L}){const P=(0,u.wW)(b),N=()=>{const F=typeof I=="function"?I():I;return a.createElement("div",{className:"panel-info-content markdown-html"},a.createElement("div",{dangerouslySetInnerHTML:{__html:F}}))};return I!==""?a.createElement(f.u,{interactive:!0,content:N},a.createElement(y.a,{className:(0,n.cx)(L,P.description)},a.createElement(c.J,{name:"info-circle",size:"md"}))):null}const b=I=>({description:(0,n.css)({code:{whiteSpace:"normal",wordWrap:"break-word"},"pre > code":{display:"block"}})});function S({message:I,onClick:L,ariaLabel:P="status"}){const N=(0,u.wW)(D);return a.createElement(v.h,{className:N.buttonStyles,onClick:L,variant:"destructive",icon:"exclamation-triangle",iconSize:"md",tooltip:I||"","aria-label":P,"data-testid":g.wl.components.Panels.Panel.status("error")})}const D=I=>{const{headerHeight:L,padding:P}=I.components.panel;return{buttonStyles:(0,n.css)({label:"panel-header-state-button",display:"flex",alignItems:"center",justifyContent:"center",padding:I.spacing(P),width:I.spacing(L),height:I.spacing(L),borderRadius:I.shape.radius.default})}};function M({width:I,height:L,children:P,padding:N="md",title:F="",description:U="",displayMode:j="default",titleItems:V,menu:_,dragClass:H,dragClassCancel:z,hoverHeader:K=!1,hoverHeaderOffset:Y,loadingState:k,statusMessage:q,statusMessageOnClick:X,leftItems:te,actions:se,onCancelQuery:de,onOpenMenu:re,collapsible:fe=!1,collapsed:ie,onToggleCollapse:oe}){const ue=(0,u.l4)(),me=(0,u.wW)(x),ge=(0,a.useId)(),Ue=!K,[De,Pe]=(0,o.Z)(!0);ie===void 0&&(ie=!De);const ye="show-on-hover",Te=j==="transparent",nt=R(ue,Ue),{contentStyle:ct,innerWidth:he,innerHeight:xe}=O(N,ue,nt,ie,L,I),Me={height:nt,cursor:H?"move":"auto"},He={width:I,height:ie?void 0:L},[Ve,{width:Oe}]=(0,r.Z)();te&&(se=te);const Ne=F?g.wl.components.Panels.Panel.title(F):"Panel",_e=a.createElement(a.Fragment,null,!fe&&F&&a.createElement("h6",{title:F,className:me.title},F),fe&&a.createElement("h6",{className:me.title},a.createElement("button",{type:"button",className:me.clearButtonStyles,onClick:()=>{Pe(),oe&&oe(!ie)},"aria-expanded":!ie,"aria-controls":ie?void 0:ge},a.createElement(c.J,{name:ie?"angle-right":"angle-down","aria-hidden":!!F,"aria-label":F?void 0:"toggle collapse panel"}),F)),a.createElement("div",{className:(0,n.cx)(me.titleItems,z),"data-testid":"title-items-container"},a.createElement(C,{description:U,className:z}),V),k===i.Gu.Streaming&&a.createElement(f.u,{content:de?"Stop streaming":"Streaming"},a.createElement(y.a,{className:z,"data-testid":"panel-streaming",onClick:de},a.createElement(c.J,{name:"circle-mono",size:"md",className:me.streaming}))),k===i.Gu.Loading&&de&&a.createElement(m,{delay:2e3},a.createElement(f.u,{content:"Cancel query"},a.createElement(y.a,{className:(0,n.cx)(z,me.pointer),"data-testid":"panel-cancel-query",onClick:de},a.createElement(c.J,{name:"sync-slash",size:"md"})))),a.createElement("div",{className:me.rightAligned},se&&a.createElement("div",{className:me.rightActions},T(se,qe=>qe))));return a.createElement("div",{className:(0,n.cx)(me.container,{[me.transparentContainer]:Te}),style:He,"data-testid":Ne,tabIndex:0,ref:Ve},a.createElement("div",{className:me.loadingBarContainer},k===i.Gu.Loading?a.createElement(d.F,{width:Oe,ariaLabel:"Panel loading bar"}):null),K&&a.createElement(a.Fragment,null,a.createElement(p,{menu:_,title:F,offset:Y,dragClass:H,onOpenMenu:re},_e),q&&a.createElement("div",{className:me.errorContainerFloating},a.createElement(S,{message:q,onClick:X,ariaLabel:"Panel status"}))),Ue&&a.createElement("div",{className:(0,n.cx)(me.headerContainer,H),style:Me,"data-testid":"header-container"},q&&a.createElement("div",{className:z},a.createElement(S,{message:q,onClick:X,ariaLabel:"Panel status"})),_e,_&&a.createElement(h,{menu:_,title:F,placement:"bottom-end",menuButtonClass:(0,n.cx)(me.menuItem,z,ye),onOpenMenu:re})),!ie&&a.createElement("div",{id:ge,className:(0,n.cx)(me.content,L===void 0&&me.containNone),style:ct},typeof P=="function"?P(he,xe):P))}const T=(I,L)=>{const P=a.Children.toArray(I).filter(Boolean);return P.length>0?L(P):null},R=(I,L)=>L?I.spacing.gridSize*I.components.panel.headerHeight:0,O=(I,L,P,N,F,U)=>{const j=(I==="md"?L.components.panel.padding:0)*L.spacing.gridSize,V=j*2,_=1*2;let H=0;U&&(H=U-V-_);let z=0;return F&&(z=F-P-V-_),N&&(z=P),{contentStyle:{padding:j},innerWidth:H,innerHeight:z}},x=I=>{const{background:L,borderColor:P,padding:N}=I.components.panel;return{container:(0,n.css)({label:"panel-container",backgroundColor:L,border:`1px solid ${P}`,position:"relative",borderRadius:I.shape.radius.default,height:"100%",display:"flex",flexDirection:"column","> *":{zIndex:0},"&:hover, &:active, &:focus":{zIndex:I.zIndex.activePanel},".show-on-hover":{opacity:"0",visibility:"hidden"},"&:focus-visible, &:hover":{".show-on-hover":{opacity:"1",visibility:"visible"}},"&:focus-visible":(0,l.getFocusStyles)(I),"&:focus-within:not(:focus)":{".show-on-hover":{visibility:"visible",opacity:"1"}}}),transparentContainer:(0,n.css)({label:"panel-transparent-container",backgroundColor:"transparent",border:"1px solid transparent",boxSizing:"border-box","&:hover":{border:`1px solid ${P}`}}),loadingBarContainer:(0,n.css)({label:"panel-loading-bar-container",position:"absolute",top:0,width:"100%"}),containNone:(0,n.css)({contain:"none"}),content:(0,n.css)({label:"panel-content",flexGrow:1,contain:"size layout"}),headerContainer:(0,n.css)({label:"panel-header",display:"flex",alignItems:"center"}),pointer:(0,n.css)({cursor:"pointer"}),streaming:(0,n.css)({label:"panel-streaming",marginRight:0,color:I.colors.success.text,"&:hover":{color:I.colors.success.text}}),title:(0,n.css)({label:"panel-title",display:"flex",marginBottom:0,padding:I.spacing(0,N),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:I.typography.h6.fontSize,fontWeight:I.typography.h6.fontWeight}),items:(0,n.css)({display:"flex"}),item:(0,n.css)({display:"flex",justifyContent:"center",alignItems:"center"}),hiddenMenu:(0,n.css)({visibility:"hidden"}),menuItem:(0,n.css)({label:"panel-menu",border:"none",background:I.colors.secondary.main,"&:hover":{background:I.colors.secondary.shade}}),errorContainerFloating:(0,n.css)({label:"error-container",position:"absolute",left:0,top:0,zIndex:1}),rightActions:(0,n.css)({display:"flex",padding:I.spacing(0,N),gap:I.spacing(1)}),rightAligned:(0,n.css)({label:"right-aligned-container",marginLeft:"auto",display:"flex",alignItems:"center"}),titleItems:(0,n.css)({display:"flex",height:"100%"}),clearButtonStyles:(0,n.css)({alignItems:"center",display:"flex",gap:I.spacing(.5),background:"transparent",color:I.colors.text.primary,border:"none",padding:0,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:I.typography.h6.fontSize,fontWeight:I.typography.h6.fontWeight})}}},76738:(G,A,e)=>{"use strict";e.d(A,{R9:()=>i,_w:()=>r,bb:()=>o});var n=e(85960),a=e(16293);const o=n.createContext({eventsScope:"global",eventBus:new a.F}),r=o.Provider,i=()=>n.useContext(o)},70969:(G,A,e)=>{"use strict";e.d(A,{a:()=>g});var n=e(66681),a=e(85960),o=e(47257),r=e(55182),i=e(29165);const g=(0,a.forwardRef)(({className:l,children:m,href:c,onClick:d,target:f,title:E,...v},h)=>{const p=(0,o.wW)(u);return c?a.createElement("a",{ref:h,href:c,onClick:d,target:f,title:E,className:(0,n.cx)(p.linkItem,l),...v},m):d?a.createElement(i.zx,{ref:h,className:(0,n.cx)(p.item,l),variant:"secondary",fill:"text",onClick:d},m):a.createElement("span",{ref:h,className:(0,n.cx)(p.item,l),...v},m)});g.displayName="TitleItem";const u=l=>{const m=(0,n.css)({color:`${l.colors.text.secondary}`,label:"panel-header-item",cursor:"auto",border:"none",borderRadius:`${l.shape.radius.default}`,padding:`${l.spacing(0,1)}`,height:`${l.spacing(l.components.panel.headerHeight)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,r.getFocusStyles)(l),zIndex:1},"&: focus:not(:focus-visible)":(0,r.getMouseFocusStyles)(l),"&:hover ":{boxShadow:`${l.shadows.z1}`,background:`${l.colors.background.secondary}`,color:`${l.colors.text.primary}`}});return{item:m,linkItem:(0,n.cx)(m,(0,n.css)({cursor:"pointer"}))}}},58861:(G,A,e)=>{"use strict";e.d(A,{fm:()=>r});var n=e(3446),a=e(61117),o=e(70969);const r=a.f;r.LoadingIndicator=n.T,r.TitleItem=o.a},59637:(G,A,e)=>{"use strict";e.d(A,{R:()=>n});var n=(a=>(a.ToggleSelection="select",a.AppendToSelection="append",a))(n||{})},73503:(G,A,e)=>{"use strict";e.d(A,{l:()=>r});var n=e(66681),a=e(85960),o=e(47257);const r=({children:g,className:u,...l})=>{const m=(0,o.wW)(i);return a.createElement("div",{className:(0,n.cx)(m,u),...l},g)},i=g=>(0,n.css)({backgroundColor:g.components.panel.background,border:`1px solid ${g.components.panel.borderColor}`,borderRadius:g.shape.radius.default})},15343:(G,A,e)=>{"use strict";e.d(A,{o:()=>r});var n=e(85960),a=e(73667),o=e(67192);const r=({status:g,color:u,...l})=>{const m=i(g);return n.createElement(o.C,{text:m.text,color:m.color,icon:m.icon,tooltip:m.tooltip,...l})};r.displayName="PluginSignatureBadge";function i(g){switch(g||(g=a.Xy.invalid),g){case a.Xy.internal:return{text:"Core",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case a.Xy.valid:return{text:"Signed",icon:"lock",color:"green",tooltip:"Signed and verified plugin"};case a.Xy.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case a.Xy.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case a.Xy.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"};default:return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}}},25142:(G,A,e)=>{"use strict";e.d(A,{RN:()=>i,h_:()=>r,lO:()=>g});var n=e(85960),a=e(79873),o=e(47257);function r(l){const{children:m,className:c,root:d,forwardedRef:f}=l,E=(0,o.l4)(),v=(0,n.useRef)(null),h=d??i();return v.current||(v.current=document.createElement("div"),c&&(v.current.className=c),v.current.style.position="relative",v.current.style.zIndex=`${E.zIndex.portal}`),(0,n.useLayoutEffect)(()=>(v.current&&h.appendChild(v.current),()=>{v.current&&h.removeChild(v.current)}),[h]),a.createPortal(n.createElement("div",{ref:f},m),v.current)}function i(){return window.document.getElementById("grafana-portal-container")??document.body}function g(){return n.createElement("div",{id:"grafana-portal-container"})}const u=n.forwardRef((l,m)=>n.createElement(r,{...l,forwardedRef:m}));u.displayName="RefForwardingPortal"},29470:(G,A,e)=>{"use strict";e.d(A,{q:()=>S});var n=e(66681),a=e(70318),o=e.n(a),r=e(56375),i=e.n(r),g=e(85960),u=e(10418),l=e(71650),m=e(92369),c=e(45944),d=e(34351),f=e(17481),E=e(88582),v=e(81011),h=e(55044),p=e(99050),s=e(47257),y=e(55182),C=e(1323);class b extends g.PureComponent{constructor(T){super(T),this.lastExecutedValue=null,this.mounted=!1,this.editor=null,this.onChange=(L,P)=>{const N=L.document!==this.state.value.document,F=this.state.value;this.props.onRichValueChange&&this.props.onRichValueChange(L),this.setState({value:L},()=>{if(N){const U=u.Z.serialize(F)!==u.Z.serialize(L);U&&P&&this.runOnChangeAndRunQuery(),U&&!P&&this.runOnChangeDebounced()}})},this.runOnChange=()=>{const{onChange:L}=this.props,P=u.Z.serialize(this.state.value);L&&L(this.cleanText(P))},this.runOnRunQuery=()=>{const{onRunQuery:L}=this.props;L&&(L(),this.lastExecutedValue=this.state.value)},this.runOnChangeAndRunQuery=()=>{this.runOnChange(),this.runOnRunQuery()},this.handleBlur=(L,P,N)=>{const{onBlur:F}=this.props;if(F)F();else{const U=this.lastExecutedValue?u.Z.serialize(this.lastExecutedValue):"",j=u.Z.serialize(P.value);U!==j&&this.runOnChangeAndRunQuery()}return N()},this.runOnChangeDebounced=(0,r.debounce)(this.runOnChange,500);const{onTypeahead:R,cleanText:O,portalOrigin:x,onWillApplySuggestion:I}=T;this.plugins=[(0,c.b)({onTypeahead:R,cleanText:O,portalOrigin:x,onWillApplySuggestion:I}),(0,d.d)({handler:this.runOnChangeAndRunQuery}),(0,f.z)(),(0,E.G)(),(0,v.$)(),(0,h.R)(),(0,p.w)(),...T.additionalPlugins||[]].filter(L=>L),this.state={suggestions:[],typeaheadContext:null,typeaheadPrefix:"",typeaheadText:"",value:(0,C.l1)(T.query||"",T.syntax)}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(T,R){const{query:O,syntax:x,syntaxLoaded:I}=this.props;if(!T.syntaxLoaded&&I&&this.editor){const P=this.editor.insertText(" ").deleteBackward(1);this.onChange(P.value,!0)}const{value:L}=this.state;O!==T.query&&O!==u.Z.serialize(L)&&this.setState({value:(0,C.l1)(O||"",x)})}cleanText(T){return T.replace(/[\r]/g,"")}render(){const{disabled:T,theme:R}=this.props,O=o()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":T}),x=D(R);return g.createElement("div",{className:(0,n.cx)(O,x.wrapper)},g.createElement("div",{className:"slate-query-field","aria-label":m.wl.components.QueryField.container},g.createElement(l.ML,{ref:I=>this.editor=I,schema:C.Yi,autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onClick:this.props.onClick,onChange:I=>{this.onChange(I.value,!1)},placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})))}}const S=(0,s.HE)(b);S.defaultProps={onBlur:()=>{}};const D=M=>{const T=(0,y.getFocusStyles)(M);return{wrapper:(0,n.css)({"&:focus-within":T})}}},15867:(G,A,e)=>{"use strict";e.d(A,{dP:()=>d,o5:()=>m});var n=e(47266),a=e(85960),o=e(18678),r=e(92369),i=e(64793),g=e(82541),u=e(85722),l=e(40235);const m=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],c=class extends a.PureComponent{constructor(v){super(v),this.onChangeSelect=h=>{const{onIntervalChanged:p}=this.props;p&&h.value!=null&&p(h.value)}}getVariant(){return this.props.isLive?"primary":this.props.isLoading?"destructive":this.props.primary?"primary":this.props.isOnCanvas?"canvas":"default"}render(){const{onRefresh:v,intervals:h,tooltip:p,value:s,text:y,isLoading:C,noIntervalPicker:b,width:S,showAutoInterval:D}=this.props,M=s||"",T=this.getVariant(),R=E({intervals:h,showAutoInterval:D}),O=R.find(({value:_})=>_===M),x=f(c.offOption.value);let I=O||x;I.label===x.label&&(I={value:""});const L=I.ariaLabel,P=(0,i.t)("refresh-picker.aria-label.duration-selected","Choose refresh time interval with current interval {{durationAriaLabel}} selected",{durationAriaLabel:L}),N=(0,i.t)("refresh-picker.aria-label.choose-interval","Auto refresh turned off. Choose refresh time interval"),F=I.value===""?N:P,U=(0,i.t)("refresh-picker.tooltip.interval-selected","Set auto refresh interval"),j=(0,i.t)("refresh-picker.tooltip.turned-off","Auto refresh off"),V=I.value===""?j:U;return a.createElement(g.h,{className:"refresh-picker"},a.createElement(l.h,{"aria-label":y,tooltip:p,onClick:v,variant:T,icon:C?"spinner":"sync",style:S?{width:S}:void 0,"data-testid":r.wl.components.RefreshPicker.runButtonV2},y),!b&&a.createElement(u.d,{value:I,options:R,onChange:this.onChangeSelect,variant:T,"data-testid":r.wl.components.RefreshPicker.intervalButtonV2,"aria-label":F,tooltip:V}))}};let d=c;d.offOption={label:"Off",value:"",ariaLabel:"Turn off auto refresh"},d.liveOption={label:"Live",value:"LIVE",ariaLabel:"Turn on live streaming"},d.autoOption={label:"Auto",value:"auto",ariaLabel:"Select refresh from the query range"},d.isLive=v=>v===c.liveOption.value;function f(v){switch(v){case d.liveOption.value:return{label:(0,i.t)("refresh-picker.live-option.label","Live"),value:v,ariaLabel:(0,i.t)("refresh-picker.live-option.aria-label","Turn on live streaming")};case d.offOption.value:return{label:(0,i.t)("refresh-picker.off-option.label","Off"),value:v,ariaLabel:(0,i.t)("refresh-picker.off-option.aria-label","Turn off auto refresh")};case d.autoOption.value:return{label:(0,i.t)("refresh-picker.auto-option.label",d.autoOption.label),value:v,ariaLabel:(0,i.t)("refresh-picker.auto-option.aria-label",d.autoOption.ariaLabel)}}return{label:v,value:v}}function E({intervals:v=m,showAutoInterval:h=!1}={}){const p=v.map(s=>{const y=(0,o.RA)(s),C=(0,n.Z)(y);return{label:s,value:s,ariaLabel:C}});return h&&p.unshift(f(d.autoOption.value)),p.unshift(f(d.offOption.value)),p}},51787:(G,A,e)=>{"use strict";e.d(A,{D:()=>o});var n=e(85960),a=e(86734);function o({component:r,content:i,...g}){return n.createElement(r||"span",{dangerouslySetInnerHTML:{__html:a.QX.sanitize(i)},...g})}},14476:(G,A,e)=>{"use strict";e.d(A,{c:()=>l});var n=e(66681),a=e(56375),o=e.n(a),r=e(85960),i=e(29165),g=e(51143);const u=()=>({noRadiusInput:(0,n.css)({borderBottomRightRadius:"0 !important",borderTopRightRadius:"0 !important"}),noRadiusButton:(0,n.css)({borderBottomLeftRadius:"0 !important",borderTopLeftRadius:"0 !important"})}),l=({label:m="Password",labelWidth:c,inputWidth:d=12,onReset:f,isConfigured:E,tooltip:v,placeholder:h="Password",interactive:p,...s})=>{const y=u();return r.createElement(g.W,{label:m,tooltip:v,interactive:p,labelWidth:c,inputEl:E?r.createElement(r.Fragment,null,r.createElement("input",{type:"text",className:(0,n.cx)(`gf-form-input width-${d}`,y.noRadiusInput),disabled:!0,value:"configured",...(0,a.omit)(s,"value")}),r.createElement(i.zx,{onClick:f,variant:"secondary",type:"button"},"Reset")):r.createElement("input",{type:"password",className:`gf-form-input width-${d}`,placeholder:h,...s})})};l.displayName="SecretFormField"},44706:(G,A,e)=>{"use strict";e.d(A,{m4:()=>u});var n=e(85960),a=e(29165),o=e(24956),r=e(74042);const i="configured",g="Reset",u=({isConfigured:l,onReset:m,...c})=>n.createElement(r.Lh,null,!l&&n.createElement(o.I,{...c,type:"password"}),l&&n.createElement(o.I,{...c,type:"text",disabled:!0,value:i}),l&&n.createElement(a.zx,{onClick:m,variant:"secondary"},g))},87412:(G,A,e)=>{"use strict";e.d(A,{m:()=>n.m4});var n=e(44706)},61225:(G,A,e)=>{"use strict";e.d(A,{Zk:()=>c});var n=e(66681),a=e(85960),o=e(47257),r=e(29165),i=e(74042),g=e(7073);const u="configured",l="Reset",m=d=>({configuredStyle:(0,n.css)({minHeight:d.spacing(d.components.height.md),paddingTop:d.spacing(.5),resize:"none"})}),c=({isConfigured:d,onReset:f,...E})=>{const v=(0,o.wW)(m);return a.createElement(i.Lh,null,!d&&a.createElement(g.K,{...E}),d&&a.createElement(g.K,{...E,rows:1,disabled:!0,value:u,className:(0,n.cx)(v.configuredStyle)}),d&&a.createElement(r.zx,{onClick:f,variant:"secondary"},l))}},6267:(G,A,e)=>{"use strict";e.d(A,{Z:()=>n.Zk});var n=e(61225)},89703:(G,A,e)=>{"use strict";e.d(A,{X:()=>c});var n=e(66681),a=e(56375),o=e.n(a),r=e(85960),i=e(47257),g=e(114),u=e(18750),l=e(36661),m=e(77270);function c({options:d,value:f,onChange:E,Component:v,className:h,allowCustomValue:p,allowEmptyValue:s,placeholder:y,disabled:C,inputMinWidth:b,inputPlaceholder:S,onExpandedChange:D,autofocus:M=!1,...T}){const[R,O,x,I]=(0,m._)(M,D),L=b?Math.max(b,O):O,P=(0,i.wW)(l.N);if(!x){const N=(0,a.isObject)(f)?f.label:f,F=N!=null?String(N):void 0;return r.createElement(R,{disabled:C,Component:v||r.createElement(g.W,{className:(0,n.cx)(P.segment,{[P.queryPlaceholder]:y!==void 0&&!f,[P.disabled]:C},h)},F||y)})}return r.createElement(u.V,{...T,value:f&&!(0,a.isObject)(f)?{value:f}:f,placeholder:S,options:d,width:L,onClickOutside:()=>I(!1),allowCustomValue:p,allowEmptyValue:s,onChange:N=>{I(!1),E(N)}})}},32615:(G,A,e)=>{"use strict";e.d(A,{V:()=>f});var n=e(66681),a=e(56375),o=e.n(a),r=e(85960),i=e(85954),g=e(47257),u=e(64793),l=e(114),m=e(18750),c=e(36661),d=e(77270);function f({value:v,onChange:h,loadOptions:p,reloadOptionsOnChange:s=!1,Component:y,className:C,allowCustomValue:b,allowEmptyValue:S,disabled:D,placeholder:M,inputMinWidth:T,inputPlaceholder:R,autofocus:O=!1,onExpandedChange:x,noOptionMessageHandler:I=E,...L}){const[P,N]=(0,i.Z)(p,[p]),[F,U,j,V]=(0,d._)(O,x),_=T?Math.max(T,U):U,H=(0,g.wW)(c.N);if(!j){const z=(0,a.isObject)(v)?v.label:v,K=z!=null?String(z):void 0;return r.createElement(F,{onClick:s?void 0:N,disabled:D,Component:y||r.createElement(l.W,{className:(0,n.cx)(H.segment,{[H.queryPlaceholder]:M!==void 0&&!v,[H.disabled]:D},C)},K||M)})}return r.createElement(m.V,{...L,value:v&&!(0,a.isObject)(v)?{value:v}:v,placeholder:R,options:P.value??[],loadOptions:s?N:void 0,width:_,noOptionsMessage:I(P),allowCustomValue:b,allowEmptyValue:S,onClickOutside:()=>{V(!1)},onChange:z=>{V(!1),h(z)}})}function E(v){return v.loading?(0,u.t)("grafana-ui.segment-async.loading","Loading options..."):v.error?(0,u.t)("grafana-ui.segment-async.error","Failed to load options"):(0,u.t)("grafana-ui.segment-async.no-options","No options found")}},51965:(G,A,e)=>{"use strict";e.d(A,{X:()=>c});var n=e(66681),a=e(85960),o=e(50883),r=e(47257),i=e(48461),g=e(114),u=e(36661),l=e(77270);const m=14;function c({value:d,onChange:f,Component:E,className:v,placeholder:h,inputPlaceholder:p,disabled:s,autofocus:y=!1,onExpandedChange:C,...b}){const S=(0,a.useRef)(null),[D,M]=(0,a.useState)(d),[T,R]=(0,a.useState)((0,i.X1)((d||"").toString(),m).width),[O,,x,I]=(0,l._)(y,C),L=(0,r.wW)(u.N);if((0,o.Z)(S,()=>{I(!1),f(D)}),!x)return a.createElement(O,{disabled:s,Component:E||a.createElement(g.W,{className:(0,n.cx)(L.segment,{[L.queryPlaceholder]:h!==void 0&&!D,[L.disabled]:s},v)},d||h)});const P=(0,n.css)({width:`${Math.max(T+20,32)}px`});return a.createElement("input",{...b,ref:S,autoFocus:!0,className:(0,n.cx)("gf-form gf-form-input",P),value:D,placeholder:p,onChange:N=>{const{width:F}=(0,i.X1)(N.target.value,m);R(F),M(N.target.value)},onBlur:()=>{I(!1),f(D)},onKeyDown:N=>{[13,27].includes(N.keyCode)&&(I(!1),f(D))}})}},77197:(G,A,e)=>{"use strict";e.d(A,{f:()=>g});var n=e(66681),a=e(85960),o=e(47257),r=e(81368),i=e(114);const g=({label:l,htmlFor:m,children:c,fill:d})=>{const f=(0,o.wW)(u);return a.createElement(a.Fragment,null,a.createElement(r.Z,null,a.createElement(i.W,{htmlFor:m,width:12,className:f.label},l),c,d&&a.createElement("div",{className:f.fill},a.createElement(i.W,null,""))))},u=l=>({label:(0,n.css)({color:l.colors.primary.text}),fill:(0,n.css)({flexGrow:1,marginBottom:l.spacing(.5)})})},18750:(G,A,e)=>{"use strict";e.d(A,{V:()=>r});var n=e(85960),a=e(47257),o=e(27436);function r({value:i,placeholder:g="",options:u=[],onChange:l,onClickOutside:m,loadOptions:c=void 0,width:d,noOptionsMessage:f="",allowCustomValue:E=!1,allowEmptyValue:v=!1,...h}){const p=(0,n.useRef)(null),s=(0,a.l4)();let y=d>0?d/s.spacing.gridSize:void 0,C,b={};return c?(C=o.qb,b={loadOptions:c,defaultOptions:!0}):C=o.Ph,n.createElement("div",{...h,ref:p},n.createElement(C,{width:y,noOptionsMessage:f,placeholder:g,autoFocus:!0,isOpen:!0,onChange:l,options:u,value:i,closeMenuOnSelect:!1,onCloseMenu:()=>{if(p&&p.current){const S=p.current.querySelector('input[id^="react-select-"]');S&&(S.value||v)?l({value:S.value,label:S.value}):m()}},allowCustomValue:E,...b}))}},36661:(G,A,e)=>{"use strict";e.d(A,{N:()=>a});var n=e(66681);const a=o=>{const r="v1"in o?o.v1.palette:o.palette;return{segment:(0,n.css)({cursor:"pointer",width:"auto"}),queryPlaceholder:(0,n.css)({color:r.gray2}),disabled:(0,n.css)({cursor:"not-allowed",opacity:.65,boxShadow:"none"})}}},77270:(G,A,e)=>{"use strict";e.d(A,{_:()=>r});var n=e(85960),a=e(47257),o=e(29165);const r=(i,g)=>{const u=(0,n.useRef)(null),l=(0,a.wW)(o.gN),[m,c]=(0,n.useState)(i),[d,f]=(0,n.useState)(0),E=h=>{c(h),g&&g(h)};return[({Component:h,onClick:p,disabled:s})=>n.createElement("button",{type:"button",className:l,ref:u,disabled:s,onClick:()=>{E(!0),u&&u.current&&f(u.current.clientWidth*1.25),p?.()}},h),d,m,E]}},27436:(G,A,e)=>{"use strict";e.d(A,{M8:()=>q,qb:()=>K,gY:()=>k,NU:()=>z,Ph:()=>H,eI:()=>D.e,LT:()=>Y});var n=e(85960),a=e(18863),o=e(81152),r=e(48618),i=e(85890),g=e(41554),u=e(11248),l=e(47257),m=e(97666),c=e(75682);function d({selectProps:X}){const te=X.menuIsOpen,se=te?"search":"angle-down",de=te?"sm":"md";return n.createElement(m.J,{name:se,size:de})}var f=e(66681),E=e(24956);const v=n.forwardRef((X,te)=>{const{children:se}=X,de=(0,l.l4)(),re=(0,E.H)({theme:de,invalid:!1});return n.createElement("div",{className:(0,f.cx)(re.suffix,(0,f.css)({position:"relative"})),ref:te},se)});v.displayName="IndicatorsContainer";var h=e(18151);const p=n.forwardRef(function({focused:te,invalid:se,disabled:de,children:re,innerProps:fe,prefix:ie,...oe},ue){const me=(0,l.wW)(s,se,!!ie);return n.createElement("div",{className:me.input,...fe,ref:ue},ie&&n.createElement("div",{className:(0,f.cx)(me.prefix)},ie),re)}),s=(X,te,se)=>{const de=(0,E.H)({theme:X,invalid:te});return{input:(0,f.cx)((0,h.nf)(X),(0,f.css)({width:"100%",maxWidth:"100%",display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"wrap",justifyContent:"space-between",paddingRight:0,position:"relative",boxSizing:"border-box"}),se&&(0,f.css)({paddingLeft:0})),prefix:(0,f.cx)(de.prefix,(0,f.css)({position:"relative"}))}};var y=e(75064),C=e(12260);const b=({innerProps:X,children:te})=>{const se=(0,l.l4)(),de=(0,C.D)(se);return n.createElement("div",{...X,className:de.multiValueContainer},te)},S=({children:X,innerProps:te})=>{const se=(0,l.l4)(),de=(0,C.D)(se);return n.createElement(y.h,{...te,name:"times",size:"sm",className:de.multiValueRemove,tooltip:"Remove"})};var D=e(39445),M=e(70484),T=e(50081),R=e(45887);class O extends n.Component{render(){const{children:te}=this.props,{selectProps:se}=this.props;if(se&&Array.isArray(te)&&Array.isArray(te[0])&&se.maxVisibleValues!==void 0&&!(se.showAllSelectedWhenOpen&&se.menuIsOpen)){const[de,...re]=te,fe=de.slice(0,se.maxVisibleValues);return this.renderContainer([fe,...re])}return this.renderContainer(te)}renderContainer(te){const{isMulti:se,theme:de}=this.props,re=this.props.selectProps?.noMultiValueWrap&&!this.props.selectProps?.menuIsOpen,fe=(0,C.D)(de),ie=(0,f.cx)(fe.valueContainer,se&&fe.valueContainerMulti,re&&fe.valueContainerMultiNoWrap);return n.createElement("div",{className:ie},te)}}const x=(0,l.HE)(O);var I=e(13234);const L=(X,te)=>{if(Array.isArray(X)){const se=X.filter(Boolean);return se?.length?se:void 0}if(typeof X=="object")return[X];if(typeof X=="string"||typeof X=="number"){const se=P(X,te);if(se)return[se]}},P=(X,te)=>{for(const se of te)if("options"in se){let de=P(X,se.options);if(de)return de}else if("value"in se&&se.value===X)return se;return null},N=X=>X.map(({description:te,...se})=>se),F=X=>{const{children:te,innerProps:se,selectProps:{menuIsOpen:de,onMenuClose:re,onMenuOpen:fe},isFocused:ie,isMulti:oe,getValue:ue,innerRef:me}=X,ge=X.selectProps;return ge.renderControl?n.createElement(ge.renderControl,{isOpen:de,value:oe?ue():ue()[0],ref:me,onClick:de?re:fe,onBlur:re,disabled:!!ge.disabled,invalid:!!ge.invalid}):n.createElement(p,{ref:me,innerProps:se,prefix:ge.prefix,focused:ie,invalid:!!ge.invalid,disabled:!!ge.disabled},te)};function U({allowCustomValue:X=!1,allowCreateWhileLoading:te=!1,"aria-label":se,autoFocus:de=!1,backspaceRemovesValue:re=!0,blurInputOnSelect:fe,cacheOptions:ie,className:oe,closeMenuOnSelect:ue=!0,components:me,createOptionPosition:ge="last",defaultOptions:Ue,defaultValue:De,disabled:Pe=!1,filterOption:ye,formatCreateLabel:Te,getOptionLabel:nt,getOptionValue:ct,inputValue:he,invalid:xe,isClearable:Me=!1,id:He,isLoading:Ve=!1,isMulti:Oe=!1,inputId:Ne,isOpen:_e,isOptionDisabled:qe,isSearchable:rt=!0,loadOptions:mt,loadingMessage:Je="Loading options...",maxMenuHeight:Ae=300,minMenuHeight:Ke,maxVisibleValues:Xe,menuPlacement:ne="auto",menuPosition:Z,menuShouldPortal:ee=!0,noOptionsMessage:ce=(0,a.t)("grafana-ui.select.no-options-label","No options found"),onBlur:be,onChange:Ee,onCloseMenu:Be,onCreateOption:Le,onInputChange:ze,onKeyDown:Fe,onMenuScrollToBottom:$e,onMenuScrollToTop:et,onOpenMenu:tt,onFocus:it,openMenuOnFocus:vt=!1,options:yt=[],placeholder:Wt=(0,a.t)("grafana-ui.select.placeholder","Choose"),prefix:ut,renderControl:pt,showAllSelectedWhenOpen:we=!0,tabSelectsValue:lt=!0,value:Bt,virtualized:Kt=!1,noMultiValueWrap:It,width:Zt,isValidNewOption:yn,formatOptionLabel:xn,hideSelectedOptions:An,...qt}){const On=(0,l.l4)(),wn=(0,C.D)(On),Zn=(0,n.useRef)(null),[Aa,Ea]=(0,n.useState)(!1),Nt=(0,I.O)(On,Zt),[en,rn]=(0,n.useState)(!!he);(0,n.useEffect)(()=>{if(mt&&_e&&Zn.current&&Zn.current.controlRef&&ne==="auto"){const Cn=window.innerHeight-Zn.current.controlRef.getBoundingClientRect().bottom;Ea(Cn<Ae)}},[Ae,ne,mt,_e]);const un=(0,n.useCallback)((Cn,Yn)=>{if(Oe&&Cn==null)return Ee([],Yn);Ee(Cn,Yn)},[Oe,Ee]);let on=o.ZP;const In={};let Sn={},Ln;if(Oe&&mt)Ln=Bt;else if(Oe&&Bt&&Array.isArray(Bt)&&!mt)Ln=Bt.map(Cn=>{const Yn=P(Cn.value??Cn,yt);return!X||Yn?Yn:typeof Cn=="string"?(0,u.E)(Cn):Cn});else if(mt){const Cn=De||Bt;Ln=Cn?[Cn]:[]}else Ln=L(Bt,yt);const hn={"aria-label":se,autoFocus:de,backspaceRemovesValue:re,blurInputOnSelect:fe,captureMenuScroll:$e||et,closeMenuOnSelect:ue,defaultValue:De,disabled:Pe,filterOption:en?ye:null,getOptionLabel:nt,getOptionValue:ct,hideSelectedOptions:An,inputValue:he,invalid:xe,isClearable:Me,id:He,isDisabled:Pe,isLoading:Ve,isMulti:Oe,inputId:Ne,isOptionDisabled:qe,isSearchable:rt,maxMenuHeight:Ae,minMenuHeight:Ke,maxVisibleValues:Xe,menuIsOpen:_e,menuPlacement:ne==="auto"&&Aa?"top":ne,menuPosition:Z,menuShouldBlockScroll:!0,menuPortalTarget:ee&&typeof document<"u"?document.body:void 0,menuShouldScrollIntoView:!1,onBlur:be,onChange:un,onInputChange:(Cn,Yn)=>{rn(!!Cn),ze?.(Cn,Yn)},onKeyDown:Fe,onMenuClose:Be,onMenuOpen:tt,onMenuScrollToBottom:$e,onMenuScrollToTop:et,onFocus:it,formatOptionLabel:xn,openMenuOnFocus:vt,options:Kt?N(yt):yt,placeholder:Wt,prefix:ut,renderControl:pt,showAllSelectedWhenOpen:we,tabSelectsValue:lt,value:Oe?Ln:Ln?.[0],noMultiValueWrap:It};X&&(on=g.Z,In.allowCreateWhileLoading=te,In.formatCreateLabel=Te??j,In.onCreateOption=Le,In.createOptionPosition=ge,In.isValidNewOption=yn),mt&&(on=X?i.Z:r.Z,Sn={loadOptions:mt,cacheOptions:ie,defaultOptions:Ue});const Gn=Kt?M.r4:M.SA;return n.createElement(n.Fragment,null,n.createElement(on,{ref:Zn,components:{MenuList:Gn,Group:T.n,ValueContainer:x,IndicatorsContainer:V,IndicatorSeparator:_,Control:F,Option:M.Qn,ClearIndicator(Cn){const{clearValue:Yn}=Cn;return n.createElement(m.J,{name:"times",role:"button","aria-label":"select-clear-value",className:wn.singleValueRemove,onMouseDown:Xn=>{Xn.preventDefault(),Xn.stopPropagation(),Yn()}})},LoadingIndicator(){return n.createElement(c.$,{inline:!0})},LoadingMessage(){return n.createElement("div",{className:wn.loadingMessage},Je)},NoOptionsMessage(){return n.createElement("div",{className:wn.loadingMessage,"aria-label":"No options provided"},ce)},DropdownIndicator:d,SingleValue(Cn){return n.createElement(R.P,{...Cn,isDisabled:Pe})},SelectContainer:D.e,MultiValueContainer:b,MultiValueRemove:Pe?()=>null:S,...me},styles:Nt,className:oe,...hn,...In,...Sn,...qt}))}function j(X){return n.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center"}},n.createElement("div",null,X),n.createElement("div",{style:{flexGrow:1}}),n.createElement("div",{className:"muted small",style:{display:"flex",gap:"8px",alignItems:"center"}},"Hit enter to add"))}function V(X){const{showAllSelectedWhenOpen:te,maxVisibleValues:se,menuIsOpen:de}=X.selectProps,re=X.getValue();if(se!==void 0&&Array.isArray(X.children)){const fe=re.length;if(fe>se&&!(te&&de)){const ie=[...X.children];return ie.splice(-1,0,n.createElement("span",{key:"excess-values",id:"excess-values"},"(+",fe-se,")")),n.createElement(v,{...X},ie)}}return n.createElement(v,{...X})}function _(){return n.createElement(n.Fragment,null)}function H(X){return n.createElement(U,{...X})}function z(X){return n.createElement(U,{...X,isMulti:!0})}function K(X){return n.createElement(U,{...X})}function Y(X){return n.createElement(U,{virtualized:!0,...X})}function k(X){return n.createElement(U,{virtualized:!0,...X})}function q(X){return n.createElement(U,{...X,isMulti:!0})}},39445:(G,A,e)=>{"use strict";e.d(A,{e:()=>l});var n=e(66681),a=e(85960),o=e(16693),r=e(47257),i=e(55182),g=e(18151),u=e(24956);const l=c=>{const{isDisabled:d,isFocused:f,children:E,selectProps:{invalid:v=!1}}=c,h=(0,r.wW)(m,f,d,v);return a.createElement(o.c.SelectContainer,{...c,className:(0,n.cx)(h.wrapper,c.className)},E)},m=(c,d,f,E)=>{const v=(0,u.H)({theme:c,invalid:E});return{wrapper:(0,n.cx)(v.wrapper,(0,g.RK)(c,E),d&&(0,n.css)((0,i.getFocusStyles)(c)),f&&v.inputDisabled,(0,n.css)({position:"relative",boxSizing:"border-box",flexDirection:"row",flexWrap:"wrap",alignItems:"stretch",justifyContent:"space-between",minHeight:"32px",height:"auto",maxWidth:"100%",padding:0,cursor:f?"not-allowed":"pointer"}))}}},70484:(G,A,e)=>{"use strict";e.d(A,{Qn:()=>h,SA:()=>d,r4:()=>v});var n=e(66681),a=e(56375),o=e.n(a),r=e(85960),i=e(403),g=e(6556),u=e(47257),l=e(50263),m=e(97666),c=e(12260);const d=({children:p,maxHeight:s,innerRef:y,innerProps:C})=>{const b=(0,u.l4)(),S=(0,c.D)(b);return r.createElement("div",{...C,className:S.menu,style:{maxHeight:s},"aria-label":"Select options menu"},r.createElement(l.$,{scrollRefCallback:y,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},p))};d.displayName="SelectMenu";const f=37,E=7,v=({children:p,maxHeight:s,options:y,getValue:C})=>{const b=(0,u.l4)(),S=(0,c.D)(b),[D]=C(),T=(D?y.findIndex(I=>I.value===D.value):0)*f;if(!Array.isArray(p))return null;const O=((0,a.max)(y.map(I=>I.label?.length))??0)*E,x=Math.min(y.length*f,s);return r.createElement(i.t7,{className:S.menu,height:x,width:O,"aria-label":"Select options menu",itemCount:p.length,itemSize:f,initialScrollOffset:T},({index:I,style:L})=>r.createElement("div",{style:{...L,overflow:"hidden"}},p[I]))};v.displayName="VirtualizedSelectMenu";const h=({children:p,data:s,innerProps:y,innerRef:C,isFocused:b,isSelected:S,renderOptionLabel:D})=>{const M=(0,u.l4)(),T=(0,c.D)(M),R=s.icon?(0,g.iJ)(s.icon):void 0,{onMouseMove:O,onMouseOver:x,...I}=y;return r.createElement("div",{ref:C,className:(0,n.cx)(T.option,b&&T.optionFocused,S&&T.optionSelected,s.isDisabled&&T.optionDisabled),...I,"aria-label":"Select option",title:s.title},R&&r.createElement(m.J,{name:R,className:T.optionIcon}),s.imgUrl&&r.createElement("img",{className:T.optionImage,src:s.imgUrl,alt:s.label||String(s.value)}),r.createElement("div",{className:T.optionBody},r.createElement("span",null,D?D(s):p),s.description&&r.createElement("div",{className:T.optionDescription},s.description),s.component&&r.createElement(s.component,null)))};h.displayName="SelectMenuOptions"},50081:(G,A,e)=>{"use strict";e.d(A,{n:()=>l});var n=e(66681),a=e(85960),o=e(33808),r=e(47257),i=e(97666);const g=(0,o.B)(m=>({header:(0,n.css)({display:"flex",alignItems:"center",justifyContent:"flex-start",justifyItems:"center",cursor:"pointer",padding:"7px 10px",width:"100%",borderBottom:`1px solid ${m.colors.background.secondary}`,"&:hover":{color:m.colors.text.maxContrast}}),label:(0,n.css)({flexGrow:1}),icon:(0,n.css)({paddingRight:"2px"})}));class u extends a.PureComponent{constructor(){super(...arguments),this.state={expanded:!1},this.onToggleChildren=()=>{this.setState(c=>({expanded:!c.expanded}))}}componentDidMount(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){const{value:c}=this.props.selectProps.value;c&&this.props.options.some(d=>d.value===c)&&this.setState({expanded:!0})}}componentDidUpdate(c){c.selectProps.inputValue!==""&&this.setState({expanded:!0})}render(){const{children:c,label:d,theme:f}=this.props,{expanded:E}=this.state,v=g(f);return a.createElement("div",null,a.createElement("div",{className:v.header,onClick:this.onToggleChildren,role:"presentation"},a.createElement("span",{className:v.label},d),a.createElement(i.J,{className:v.icon,name:E?"angle-up":"angle-down"})),E&&c)}}const l=(0,r.HE)(u)},45887:(G,A,e)=>{"use strict";e.d(A,{P:()=>f});var n=e(66681),a=e(85960),o=e(16693),r=e(6556),i=e(47257);function g(v,h={}){const{duration:p=250,delay:s=250}=h,[y,C]=(0,a.useState)(v),b=(0,a.useRef)();return(0,a.useEffect)(()=>{let S;if(v)S=setTimeout(()=>{b.current=new Date,C(v)},s);else{const D=b.current?Date.now()-b.current.valueOf():0,M=()=>{b.current=void 0,C(v)};D>=p?M():S=setTimeout(M,p-D)}return()=>{S&&(clearTimeout(S),S=void 0)}},[v,p,s]),y}var u=e(97666),l=e(75682),m=e(73215),c=e(9148);const d=v=>({singleValue:(0,n.css)({label:"singleValue",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxSizing:"border-box",maxWidth:"100%",gridArea:"1 / 1 / 2 / 3"}),spinnerWrapper:(0,n.css)({width:"16px",height:"16px",display:"inline-block",marginRight:"10px",position:"relative",verticalAlign:"middle",overflow:"hidden"}),spinnerIcon:(0,n.css)({width:"100%",height:"100%",position:"absolute"}),optionIcon:(0,n.css)({marginRight:v.spacing(1),color:v.colors.text.secondary}),disabled:(0,n.css)({color:v.colors.text.disabled}),isOpen:(0,n.css)({color:v.colors.text.disabled})}),f=v=>{const{children:h,data:p,isDisabled:s}=v,y=(0,i.wW)(d),C=g(p.loading||!1,{delay:250,duration:750}),b=p.icon?(0,r.iJ)(p.icon):void 0;return a.createElement(o.c.SingleValue,{...v,className:(0,n.cx)(y.singleValue,s&&y.disabled,v.selectProps.menuIsOpen&&y.isOpen)},p.imgUrl?a.createElement(E,{loading:C,imgUrl:p.imgUrl,styles:y,alt:String(p.label??p.value)}):a.createElement(a.Fragment,null,a.createElement(c.R,{horizontal:!0,size:16,visible:C,duration:150},a.createElement("div",{className:y.spinnerWrapper},a.createElement(l.$,{className:y.spinnerIcon,inline:!0}))),b&&a.createElement(u.J,{name:b,role:"img",className:y.optionIcon})),!p.hideText&&h)},E=v=>a.createElement("div",{className:v.styles.spinnerWrapper},a.createElement(m.n,{duration:150,visible:v.loading},a.createElement(l.$,{className:v.styles.spinnerIcon,inline:!0})),a.createElement(m.n,{duration:150,visible:!v.loading},a.createElement("img",{className:v.styles.spinnerIcon,src:v.imgUrl,alt:v.alt})))},12260:(G,A,e)=>{"use strict";e.d(A,{D:()=>o});var n=e(66681),a=e(33808);const o=(0,a.B)(r=>({menu:(0,n.css)({label:"grafana-select-menu",background:r.components.dropdown.background,boxShadow:r.shadows.z3,position:"relative",minWidth:"100%",zIndex:1}),option:(0,n.css)({label:"grafana-select-option",padding:"8px",display:"flex",alignItems:"center",flexDirection:"row",flexShrink:0,whiteSpace:"nowrap",cursor:"pointer",borderLeft:"2px solid transparent","&:hover":{background:r.colors.action.hover,"@media (forced-colors: active), (prefers-contrast: more)":{border:`1px solid ${r.colors.primary.border}`}}}),optionIcon:(0,n.css)({marginRight:r.spacing(1)}),optionImage:(0,n.css)({label:"grafana-select-option-image",width:"16px",marginRight:"10px"}),optionDescription:(0,n.css)({label:"grafana-select-option-description",fontWeight:"normal",fontSize:r.typography.size.sm,color:r.colors.text.secondary,whiteSpace:"normal",lineHeight:r.typography.body.lineHeight}),optionBody:(0,n.css)({label:"grafana-select-option-body",display:"flex",fontWeight:r.typography.fontWeightMedium,flexDirection:"column",flexGrow:1}),optionFocused:(0,n.css)({label:"grafana-select-option-focused",background:r.colors.action.focus,"@media (forced-colors: active), (prefers-contrast: more)":{border:`1px solid ${r.colors.primary.border}`}}),optionSelected:(0,n.css)({background:r.colors.action.selected}),optionDisabled:(0,n.css)({label:"grafana-select-option-disabled",backgroundColor:r.colors.action.disabledBackground,color:r.colors.action.disabledText,cursor:"not-allowed"}),singleValue:(0,n.css)({label:"grafana-select-single-value",color:r.components.input.text,gridArea:"1 / 1 / 2 / 3",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxSizing:"border-box",maxWidth:"100%"}),valueContainer:(0,n.css)({label:"grafana-select-value-container",alignItems:"center",display:"grid",position:"relative",boxSizing:"border-box",flex:"1 1 0%",outline:"none",overflow:"hidden"}),valueContainerMulti:(0,n.css)({label:"grafana-select-value-container-multi",flexWrap:"wrap",display:"flex"}),valueContainerMultiNoWrap:(0,n.css)({flexWrap:"nowrap"}),loadingMessage:(0,n.css)({label:"grafana-select-loading-message",padding:r.spacing(1),textAlign:"center",width:"100%"}),multiValueContainer:(0,n.css)({label:"grafana-select-multi-value-container",display:"flex",alignItems:"center",lineHeight:1,background:r.colors.background.secondary,borderRadius:r.shape.radius.default,margin:r.spacing(.25,1,.25,0),padding:r.spacing(.25,0,.25,1),color:r.colors.text.primary,fontSize:r.typography.size.sm,overflow:"hidden",whiteSpace:"nowrap","&:hover":{background:r.colors.emphasize(r.colors.background.secondary)}}),multiValueRemove:(0,n.css)({label:"grafana-select-multi-value-remove",margin:r.spacing(0,.5),cursor:"pointer",svg:{marginBottom:0}}),singleValueRemove:(0,n.css)({cursor:"pointer","&:hover":{color:r.colors.text.primary}})}))},13234:(G,A,e)=>{"use strict";e.d(A,{O:()=>o,Z:()=>a});var n=e(85960);function a(r){return{clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:function(i){return{...i,color:"inherit",margin:0,padding:0,zIndex:1}},loadingIndicator:()=>({}),loadingMessage:()=>({}),menu:()=>({}),menuList:({maxHeight:i})=>({maxHeight:i}),multiValue:()=>({}),multiValueLabel:()=>({overflow:"hidden",textOverflow:"ellipsis"}),multiValueRemove:()=>({}),noOptionsMessage:()=>({}),option:()=>({}),placeholder:i=>({...i,color:r.colors.text.secondary}),singleValue:()=>({}),valueContainer:()=>({})}}function o(r,i){return(0,n.useMemo)(()=>({...a(r),menuPortal:g=>({...g,zIndex:r.zIndex.portal}),menu:({top:g,bottom:u,position:l})=>({top:g,bottom:u,position:l,minWidth:"100%",zIndex:r.zIndex.dropdown}),container:()=>({width:i?r.spacing(i):"100%",display:i==="auto"?"inline-flex":"flex"}),option:(g,u)=>({...g,opacity:u.isDisabled?.5:1})}),[r,i])}},13746:()=>{},57100:(G,A,e)=>{"use strict";e.d(A,{F:()=>E});var n=e(56375),a=e.n(n),o=e(85960),r=e(64365),i=e(21964),g=e(80490),u=e(40748),l=e(94290),m=e(42958),c=e(49531),d=e(15867);function f(v){return{label:v,value:stringToMs(v)}}class E extends o.PureComponent{constructor(h){super(h),this.propsSubject=new r.x,this.subscription=null}componentDidMount(){this.subscription=this.propsSubject.pipe((0,l.w)(h=>d.dP.isLive(h.interval)?(0,i.of)({}):h.loading?g.C:(0,u.F)((0,c.e0)(h.interval))),(0,m.b)(()=>this.props.func())).subscribe(),this.propsSubject.next(this.props)}componentDidUpdate(h){d.dP.isLive(h.interval)&&d.dP.isLive(this.props.interval)||(0,n.isEqual)(h,this.props)||this.propsSubject.next(this.props)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),this.propsSubject.unsubscribe()}render(){return null}}},16090:(G,A,e)=>{"use strict";e.d(A,{PR:()=>s,ZH:()=>d,rD:()=>E});var n=e(56375),a=e.n(n),o=e(16515),r=e(11795),i=e(37634),g=e(49433),u=e(14345),l=e(17338),m=e(76784);const c=["reduceOptions","orientation"];function d(y,C,b){let S=y.options;if(y.fieldConfig=y.fieldConfig||{defaults:{},overrides:[]},C==="singlestat"&&b.angular)return f(y,b);for(const D of c)b.hasOwnProperty(D)&&(S[D]=(0,n.cloneDeep)(b[D]));return S}function f(y,C){const b=C.angular,S=o.TB.getIfExists(b.valueName),D={reduceOptions:{calcs:[S?S.id:o.gz.mean]},orientation:r.wm.Horizontal},M={};if(b.format&&(M.unit=b.format),b.tableColumn&&(D.reduceOptions.fields=`/^${b.tableColumn}$/`),b.nullPointMode&&(M.nullValueMode=b.nullPointMode),b.nullText&&(M.noValue=b.nullText),(b.decimals||b.decimals===0)&&(M.decimals=b.decimals),b.thresholds&&b.colors){const R=b.thresholds.split(",").map(x=>Number(x.trim())),O=[];for(const x of b.colors){const I=O.length-1;I>=0?O.push({value:R[I],color:x}):O.push({value:-1/0,color:x})}M.thresholds={mode:i.H.Absolute,steps:O}}const T=(0,g.Jb)(b,M.thresholds);return T&&T.length&&(M.mappings=T),b.gauge&&b.gauge.show&&(M.min=b.gauge.minValue,M.max=b.gauge.maxValue),y.fieldConfig.defaults=M,D}function E(y){if(!y.options)return{};const C=parseFloat(y.pluginVersion||"6.1");let b=y.options;C<6.2&&(b=h(b)),C<6.3&&(b=v(b));const{fieldOptions:S}=b;if(C<6.6&&S){if(S&&S.override){const{override:T,...R}=b.fieldOptions;b={...b,fieldOptions:{...R,overrides:[]}}}let D=S?.defaults?.thresholds;D?delete S.defaults.thresholds:(D=S?.thresholds,delete S.thresholds),D&&(S.defaults.thresholds={mode:i.H.Absolute,steps:D});const{defaults:M}=S;M.color&&typeof M.color=="string"&&(M.color={mode:u.S.Fixed,fixedColor:M.color}),(0,l.gb)(M)}if(C<7&&(y.fieldConfig=y.fieldConfig||{defaults:{},overrides:[]},y.fieldConfig={defaults:S&&S.defaults?{...y.fieldConfig.defaults,...S.defaults}:y.fieldConfig.defaults,overrides:S&&S.overrides?[...y.fieldConfig.overrides,...S.overrides]:y.fieldConfig.overrides},S&&(b.reduceOptions={values:S.values,limit:S.limit,calcs:S.calcs}),delete b.fieldOptions),C<7.1){const D=y.fieldConfig.defaults.title;D!=null&&(y.fieldConfig.defaults.displayName=D,delete y.fieldConfig.defaults.title)}if(C<8){const D=y.fieldConfig?.defaults;let M=D?.unit;M==="percent"?((0,n.isNumber)(D.min)||(D.min=0),(0,n.isNumber)(D.max)||(D.max=100)):M==="percentunit"&&((0,n.isNumber)(D.min)||(D.min=0),(0,n.isNumber)(D.max)||(D.max=1))}return b}function v(y){const{fieldOptions:C}=y;if(!C)return y;const{mappings:b,...S}=y.fieldOptions;let D;return y.thresholds&&(D={mode:i.H.Absolute,steps:p(y.thresholds)}),{...y,fieldOptions:{...S,defaults:{...C.defaults,mappings:b,thresholds:D}}}}function h(y){const{valueOptions:C}=y;if(!C)return y;const b={},S={};if(b.mappings=y.valueMappings,b.thresholds=y.thresholds,b.defaults=S,S.unit=C.unit,S.decimals=C.decimals,C.stat){const M=o.TB.get(C.stat);M&&(b.calcs=[M.id])}S.min=y.minValue,S.max=y.maxValue;const D={...y,fieldOptions:b};return(0,n.omit)(D,"valueMappings","thresholds","valueOptions","minValue","maxValue")}function p(y){if(!y||!y.length)return;const C=y.map(b=>({value:b.value===null?-1/0:b.value,color:b.color}));return(0,m.bP)(C),C[0].value=-1/0,C}function s(y){return(0,g.Jb)(y)}},11615:(G,A,e)=>{"use strict";e.d(A,{PR:()=>n.PR,ZH:()=>n.ZH,rD:()=>n.rD});var n=e(16090)},34407:(G,A,e)=>{"use strict";e.d(A,{U:()=>d});var n=e(66681),a=e(85362),o=e(1425),r=e(85960),i=e(47257),g=e(27594);const u=f=>{const{value:E,children:v,visible:h,placement:p,tipFormatter:s,...y}=f,C=(0,r.useRef)(null),b=(0,r.useRef)(null),S=(0,i.wW)(l);function D(){b.current!==null&&cancelAnimationFrame(b.current)}function M(){b.current=requestAnimationFrame(()=>{C.current?.forceAlign()})}return(0,r.useEffect)(()=>(h?M():D(),D),[E,h]),r.createElement(g.Z,{overlayClassName:S.tooltip,placement:p,overlay:s??E,overlayInnerStyle:{minHeight:"auto"},ref:C,visible:h,...y},v)},l=f=>({tooltip:(0,n.css)({position:"absolute",display:"block",visibility:"visible",fontSize:f.typography.bodySmall.fontSize,opacity:.9,padding:3,zIndex:f.zIndex.tooltip})}),m=u;var c=e(20628);const d=({min:f,max:E,onChange:v,onAfterChange:h,orientation:p="horizontal",reverse:s,step:y,formatTooltipResult:C,value:b,tooltipAlwaysVisible:S=!0})=>{const D=(0,r.useCallback)(x=>{v?.(typeof x=="number"?[x,x]:x)},[v]),M=(0,r.useCallback)(x=>{h?.(typeof x=="number"?[x,x]:x)},[h]),T=p==="horizontal",R=(0,i.wW)(c.W,T),O=(x,I)=>r.createElement(m,{value:I.value,visible:S||I.dragging,tipFormatter:C?()=>C(I.value):void 0,placement:T?"top":"right"},x);return r.createElement("div",{className:(0,n.cx)(R.container,R.slider)},r.createElement(a.Global,{styles:R.tooltip}),r.createElement(o.Z,{min:f,max:E,step:y,defaultValue:b,range:!0,onChange:D,onAfterChange:M,vertical:!T,reverse:s,handleRender:O}))};d.displayName="RangeSlider"},60540:(G,A,e)=>{"use strict";e.d(A,{i:()=>l});var n=e(66681),a=e(85362),o=e(1425),r=e(85960),i=e(47257),g=e(24956),u=e(20628);const l=({min:m,max:c,onChange:d,onAfterChange:f,orientation:E="horizontal",reverse:v,step:h,value:p,ariaLabelForHandle:s,marks:y,included:C})=>{const b=E==="horizontal",S=(0,i.wW)(u.W,b,!!y),D=o.Z,[M,T]=(0,r.useState)(p??m),R=(0,r.useCallback)(N=>{const F=typeof N=="number"?N:N[0];T(F),d?.(F)},[T,d]),O=(0,r.useCallback)(N=>{let F=+N.target.value;Number.isNaN(F)&&(F=0),T(F),d&&d(F),f&&f(F)},[d,f]),x=(0,r.useCallback)(N=>{const F=+N.target.value;F>c?T(c):F<m&&T(m)},[c,m]),I=(0,r.useCallback)(N=>{const F=typeof N=="number"?N:N[0];f?.(F)},[f]),L=b?[]:[S.sliderInputVertical],P=b?[]:[S.sliderInputFieldVertical];return r.createElement("div",{className:(0,n.cx)(S.container,S.slider)},r.createElement(a.Global,{styles:S.tooltip}),r.createElement("div",{className:(0,n.cx)(S.sliderInput,...L)},r.createElement(D,{min:m,max:c,step:h,defaultValue:p,value:M,onChange:R,onAfterChange:I,vertical:!b,reverse:v,ariaLabelForHandle:s,marks:y,included:C}),r.createElement(g.I,{type:"text",className:(0,n.cx)(S.sliderInputField,...P),value:M,onChange:O,onBlur:x,min:m,max:c})))};l.displayName="Slider"},20628:(G,A,e)=>{"use strict";e.d(A,{W:()=>o});var n=e(66681),a=e(85362);const o=(r,i,g=!1)=>{const{spacing:u}=r,l=r.colors.border.strong,m=r.colors.primary.main,c=r.colors.primary.main,f=`box-shadow: 0px 0px 0px 6px ${r.colors.primary.transparent}`;return{container:(0,n.css)({width:"100%",margin:i?"inherit":u(1,3,1,1),paddingBottom:i&&g?r.spacing(1):"inherit",height:i?"auto":"100%"}),slider:(0,n.css)`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-mark {
        top: ${r.spacing(1.75)};
      }
      .rc-slider-mark-text {
        color: ${r.colors.text.disabled};
        font-size: ${r.typography.bodySmall.fontSize};
      }
      .rc-slider-mark-text-active {
        color: ${r.colors.text.primary};
      }
      .rc-slider-handle {
        border: none;
        background-color: ${c};
        box-shadow: ${r.shadows.z1};
        cursor: pointer;
        opacity: 1;
      }

      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle-click-focused:focus {
        ${f};
      }

      // The triple class names is needed because that's the specificity used in the source css :(
      .rc-slider-handle-dragging.rc-slider-handle-dragging.rc-slider-handle-dragging,
      .rc-slider-handle:focus-visible {
        box-shadow: 0 0 0 5px ${r.colors.text.primary};
      }

      .rc-slider-dot,
      .rc-slider-dot-active {
        background-color: ${r.colors.text.primary};
        border-color: ${r.colors.text.primary};
      }

      .rc-slider-track {
        background-color: ${m};
      }
      .rc-slider-rail {
        background-color: ${l};
        cursor: pointer;
      }
    `,tooltip:(0,a.css)`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${r.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${r.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"center",width:"100%"}),sliderInputVertical:(0,n.css)({flexDirection:"column",height:"100%",".rc-slider":{margin:0,order:2}}),sliderInputField:(0,n.css)({marginLeft:r.spacing(3),width:"60px",input:{textAlign:"center"}}),sliderInputFieldVertical:(0,n.css)({margin:`0 0 ${r.spacing(3)} 0`,order:1})}}},7881:(G,A,e)=>{"use strict";e.d(A,{b:()=>h});var n=e(56375),a=e(85960),o=e(73722),r=e(58309),i=e(73859),g=e(1713),u=e(34305),l=e(65277),m=e(79474),c=e(85334),d=e(45878),f=e(84231);function E(p,s){const y=p.y.values.length,C={...p.y.config,...s},b=p.x??{name:"",values:[...Array(y).keys()],type:r.fS.number,config:{}};let S={refId:"sparkline",fields:[b,{...p.y,config:C}],length:y};return(0,c.lP)(b.values)||(S=(0,d.aK)(S,0)),(0,f.w)({frame:S,refFieldPseudoMin:p.timeRange?.from.valueOf(),refFieldPseudoMax:p.timeRange?.to.valueOf()})}const v={drawStyle:g.l8.Line,showPoints:g.Jp.Auto,axisPlacement:g.LB.Hidden,pointSize:2};class h extends a.PureComponent{constructor(s){super(s);const y=E(s.sparkline,s.config);this.state={data:(0,m.Bj)(y,(0,m.i7)(y)),alignedDataFrame:y,configBuilder:this.prepareConfig(y)}}static getDerivedStateFromProps(s,y){const C=E(s.sparkline,s.config);return C?{...y,data:(0,m.Bj)(C,(0,m.i7)(C)),alignedDataFrame:C}:{...y}}componentDidUpdate(s,y){const{alignedDataFrame:C}=this.state;if(!C)return;let b=!1;s.sparkline!==this.props.sparkline?b=!(0,o.Ch)(this.state.alignedDataFrame,y.alignedDataFrame):b=!(0,n.isEqual)(s.config,this.props.config),b&&this.setState({configBuilder:this.prepareConfig(C)})}getYRange(s){let{min:y,max:C}=this.state.alignedDataFrame.fields[1].state?.range;return y===C?(y===0?C=100:(y=0,C*=2),[y,C]):[Math.max(y,s.config.min??-1/0),Math.min(C,s.config.max??1/0)]}prepareConfig(s){const{theme:y}=this.props,C=new l.U;C.setCursor({show:!1,x:!1,y:!1});const b=s.fields[0];C.addScale({scaleKey:"x",orientation:g.wN.Horizontal,direction:g.bQ.Right,isTime:!1,range:()=>{const{sparkline:S}=this.props;if(S.x){if(S.timeRange&&S.x.type===r.fS.time)return[S.timeRange.from.valueOf(),S.timeRange.to.valueOf()];const D=S.x.values;return[D[0],D[D.length-1]]}return[0,S.y.values.length-1]}}),C.addAxis({scaleKey:"x",theme:y,placement:g.LB.Hidden});for(let S=0;S<s.fields.length;S++){const D=s.fields[S],M=D.config,T={...v,...M.custom};if(D===b||D.type!==r.fS.number)continue;const R=M.unit||"__fixed";C.addScale({scaleKey:R,orientation:g.wN.Vertical,direction:g.bQ.Up,range:()=>this.getYRange(D)}),C.addAxis({scaleKey:R,theme:y,placement:g.LB.Hidden});const O=(0,i.fD)(D),x=O.getCalculator(D,y)(0,0),I=T.drawStyle===g.l8.Points?g.Jp.Always:T.showPoints;C.addSeries({pxAlign:!1,scaleKey:R,theme:y,colorMode:O,thresholds:M.thresholds,drawStyle:T.drawStyle,lineColor:T.lineColor??x,lineWidth:T.lineWidth,lineInterpolation:T.lineInterpolation,showPoints:I,pointSize:T.pointSize,fillOpacity:T.fillOpacity,fillColor:T.fillColor,lineStyle:T.lineStyle,gradientMode:T.gradientMode})}return C}render(){const{data:s,configBuilder:y}=this.state,{width:C,height:b}=this.props;return a.createElement(u.N,{data:s,config:y,width:C,height:b})}}},75682:(G,A,e)=>{"use strict";e.d(A,{$:()=>l});var n=e(66681),a=e(85960),o=e(88960),r=e(47257),i=e(42305),g=e(97666),u=e(53193);const l=({className:d,inline:f=!1,iconClassName:E,style:v,size:h="md"})=>{const p=(0,r.wW)(m),s=(0,r.wW)(c,h);if(typeof h!="string"||!(0,i.D)(h)){const y=(0,u.lK)(),C="spinner",b=(0,u.y_)(C,"default"),S=`${y}${b}/${C}.svg`;return a.createElement("div",{"data-testid":"Spinner",style:v,className:(0,n.cx)({[p.inline]:f},s.wrapper,d)},a.createElement(o.default,{src:S,width:h,height:h,className:(0,n.cx)("fa-spin",s.icon,d),style:v}))}return a.createElement("div",{"data-testid":"Spinner",style:v,className:(0,n.cx)({[p.inline]:f},d)},a.createElement(g.J,{className:(0,n.cx)("fa-spin",E),name:"spinner",size:h,"aria-label":"loading spinner"}))},m=d=>({inline:(0,n.css)({display:"inline-block"})}),c=(d,f)=>({wrapper:(0,n.css)({fontSize:typeof f=="string"?f:`${f}px`}),icon:(0,n.css)({display:"inline-block",fill:"currentColor",flexShrink:0,label:"Icon",lineHeight:0,verticalAlign:"middle"})})},63326:(G,A,e)=>{"use strict";e.d(A,{m:()=>g});var n=e(56375),a=e.n(n),o=e(85960),r=e(16515),i=e(27436);class g extends o.PureComponent{constructor(){super(...arguments),this.checkInput=()=>{const{stats:l,allowMultiple:m,defaultStat:c,onChange:d}=this.props,f=r.TB.list(l);if(f.length!==l.length){const E=f.map(h=>h.id),v=(0,n.difference)(l,E);console.warn("Unknown stats",v,l),d(f.map(h=>h.id))}!m&&l.length>1&&(console.warn("Removing extra stat",l),d([l[0]])),c&&l.length<1&&d([c])},this.onSelectionChange=l=>{const{onChange:m}=this.props;Array.isArray(l)?m(l.map(c=>c.value)):m(l&&l.value?[l.value]:[])}}componentDidMount(){this.checkInput()}componentDidUpdate(l){this.checkInput()}render(){const{stats:l,allowMultiple:m,defaultStat:c,placeholder:d,className:f,menuPlacement:E,width:v,inputId:h,filterOptions:p}=this.props,s=r.TB.selectOptions(l,p);return o.createElement(i.Ph,{value:s.current,className:f,isClearable:!c,isMulti:m,width:v,isSearchable:!0,options:s.options,placeholder:d,onChange:this.onSelectionChange,menuPlacement:E,inputId:h})}}g.defaultProps={allowMultiple:!1}},5999:(G,A,e)=>{"use strict";e.d(A,{r:()=>l,x:()=>m});var n=e(66681),a=e(56375),o=e.n(a),r=e(85960),i=e(20440),g=e(47257),u=e(55182);const l=r.forwardRef(({value:d,checked:f,onChange:E,id:v,label:h,disabled:p,invalid:s=!1,...y},C)=>{f&&(0,i.d)("Switch","checked prop","value");const b=(0,g.wW)(c),S=(0,r.useRef)(v||(0,a.uniqueId)("switch-"));return r.createElement("div",{className:(0,n.cx)(b.switch,s&&b.invalid)},r.createElement("input",{type:"checkbox",disabled:p,checked:d,onChange:D=>{!p&&E?.(D)},id:S.current,...y,ref:C}),r.createElement("label",{htmlFor:S.current,"aria-label":h??"Toggle switch"}))});l.displayName="Switch";const m=r.forwardRef(({transparent:d,className:f,showLabel:E,label:v,value:h,id:p,invalid:s,...y},C)=>{const b=(0,g.wW)(c,d);return r.createElement("div",{className:(0,n.cx)(b.inlineContainer,f,y.disabled&&b.disabled,s&&b.invalid)},E&&r.createElement("label",{htmlFor:p,className:(0,n.cx)(b.inlineLabel,h&&b.inlineLabelEnabled,"inline-switch-label")},v),r.createElement(l,{...y,id:p,label:v,ref:C,value:h}))});m.displayName="Switch";const c=(d,f)=>({switch:(0,n.css)({width:"32px",height:"16px",position:"relative",input:{opacity:0,left:"-100vw",zIndex:-1e3,position:"absolute","&:disabled + label":{background:d.colors.action.disabledBackground,cursor:"not-allowed"},"&:checked + label":{background:d.colors.primary.main,borderColor:d.colors.primary.main,"&:hover":{background:d.colors.primary.shade},"&::after":{transform:"translate3d(18px, -50%, 0)",background:d.colors.primary.contrastText}},"&:focus + label, &:focus-visible + label":(0,u.getFocusStyles)(d),"&:focus:not(:focus-visible) + label":(0,u.getMouseFocusStyles)(d)},label:{width:"100%",height:"100%",cursor:"pointer",borderRadius:d.shape.radius.pill,background:d.components.input.background,border:`1px solid ${d.components.input.borderColor}`,transition:"all 0.3s ease","&:hover":{borderColor:d.components.input.borderHover},"&::after":{position:"absolute",display:"block",content:'""',width:"12px",height:"12px",borderRadius:d.shape.radius.circle,background:d.colors.text.secondary,boxShadow:d.shadows.z1,top:"50%",transform:"translate3d(2px, -50%, 0)",transition:"transform 0.2s cubic-bezier(0.19, 1, 0.22, 1)","@media (forced-colors: active)":{border:"1px solid transparent"}}}}),inlineContainer:(0,n.css)({padding:d.spacing(0,1),height:d.spacing(d.components.height.md),display:"inline-flex",alignItems:"center",background:f?"transparent":d.components.input.background,border:`1px solid ${f?"transparent":d.components.input.borderColor}`,borderRadius:d.shape.radius.default,"&:hover":{border:`1px solid ${f?"transparent":d.components.input.borderHover}`,".inline-switch-label":{color:d.colors.text.primary}}}),disabled:(0,n.css)({backgroundColor:"rgba(204, 204, 220, 0.04)",color:"rgba(204, 204, 220, 0.6)",border:"1px solid rgba(204, 204, 220, 0.04)"}),inlineLabel:(0,n.css)({cursor:"pointer",paddingRight:d.spacing(1),color:d.colors.text.secondary,whiteSpace:"nowrap"}),inlineLabelEnabled:(0,n.css)({color:d.colors.text.primary}),invalid:(0,n.css)({"input + label, input:checked + label, input:hover + label":{border:`1px solid ${d.colors.error.border}`}})})},23494:(G,A,e)=>{"use strict";e.d(A,{W:()=>m});var n=e(66681),a=e(85960),o=e(75064),r=e(70523),i=e(94439),g=e(10305),u=e(47257),l=e(50263);function m({tabs:d,defaultTab:f,closeIconTooltip:E,onClose:v}){const[h,p]=(0,a.useState)(d.some(C=>C.value===f)?f:d[0].value),s=C=>{p(C.value)},y=(0,u.wW)(c);return a.createElement("div",{className:y.container},a.createElement(r.J,{className:y.tabs},d.map(C=>a.createElement(i.O,{key:C.value,label:C.label,active:C.value===h,onChangeTab:()=>s(C),icon:C.icon})),a.createElement(o.h,{className:y.close,onClick:v,name:"times",tooltip:E??"Close"})),a.createElement(l.$,{autoHeightMin:"100%"},a.createElement(g.I,{className:y.tabContent},d.find(C=>C.value===h)?.content)))}const c=d=>({container:(0,n.css)({height:"100%"}),tabContent:(0,n.css)({padding:d.spacing(2),backgroundColor:d.colors.background.primary,height:`calc(100% - ${d.components.menuTabs.height}px)`}),close:(0,n.css)({position:"absolute",right:"16px",top:"5px",cursor:"pointer",fontSize:d.typography.size.lg}),tabs:(0,n.css)({paddingTop:d.spacing(1),borderColor:d.colors.border.weak,ul:{marginLeft:d.spacing(2)}})})},43014:(G,A,e)=>{"use strict";e.d(A,{i:()=>u,c:()=>m});var n=e(85960),a=e(16515),o=e(92369),r=e(66681);const i=c=>{const d=(0,r.css)({width:"100%",listStyle:"none"}),f=(0,r.css)({width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"});return c.value&&!Array.isArray(c.value)?n.createElement("span",null,c.value):c.value&&Array.isArray(c.value)&&c.value.length>0?n.createElement("ul",{className:d},c.value.map((E,v)=>{const h=Object.keys(E)[0];return n.createElement("li",{className:f,key:v},n.createElement("span",null,h),n.createElement("span",null,E[h]))})):g},g=()=>n.createElement("span",null,"\xA0");function u(c){const{totalColumnsWidth:d,footerGroups:f,isPaginationVisible:E,tableStyles:v}=c,h=o.wl.components.Panels.Visualization.Table;return n.createElement("div",{style:{position:E?"relative":"absolute",width:d?`${d}px`:"100%",bottom:"0px"}},f.map(p=>{const{key:s,...y}=p.getFooterGroupProps();return n.createElement("div",{className:v.tfoot,...y,key:s,"data-testid":h.footer},p.headers.map(C=>l(C,v)))}))}function l(c,d){const f=c.getHeaderProps();return f?(f.style=f.style??{},f.style.position="absolute",f.style.justifyContent=c.justifyContent,n.createElement("div",{className:d.headerCell,...f},c.render("Footer"))):null}function m(c,d,f){if(d===void 0)return g;if(f){if(d[c]===void 0)return g;const E=a.TB.get(a.gz.count).name;return i({value:[{[E]:String(d[c])}]})}return i({value:d[c]})}},75561:(G,A,e)=>{"use strict";e.d(A,{A:()=>f,U:()=>d});var n=e(85960),a=e(72211),o=e(45878),r=e(58309),i=e(1713),g=e(47257),u=e(48461),l=e(67297),m=e(7881),c=e(71336);const d={type:i.h2.Sparkline,drawStyle:i.l8.Line,lineInterpolation:i.KC.Smooth,lineWidth:1,fillOpacity:17,gradientMode:i.FI.Hue,pointSize:2,barAlignment:i.pu.Center,showPoints:i.Jp.Never,hideValue:!1},f=h=>{const{field:p,innerWidth:s,tableStyles:y,cell:C,cellProps:b,timeRange:S}=h,D=E(C.value),M=(0,g.l4)();if(!D)return n.createElement("div",{...b,className:y.cellContainer},p.config.noValue||"no data");D.x&&!D.x.config.interval&&D.x.values.length>1&&(D.x.config.interval=D.x.values[1]-D.x.values[0]),D.y.values=D.y.values.map(P=>Number.isFinite(P)?P:null);const T=(0,a.dz)(D.y);D.y.config.min=T.min,D.y.config.max=T.max,D.y.state={range:T},D.timeRange=S;const R=v(p),O={color:p.config.color,custom:{...d,...R}},x=p.config.custom?.cellOptions?.hideValue;let I=0,L=null;if(!x){const P=(0,o.z4)(C.value)?C.value.value:null,N=p.display(P),F=(0,c.f2)(p,N,C.row.index);I=(0,u.X1)(`${F.prefix??""}${F.text}${F.suffix??""}`,16).width+M.spacing.gridSize,L=n.createElement(l.W,{style:{width:`${I-M.spacing.gridSize}px`,textAlign:"right",marginRight:M.spacing(1)},value:N})}return n.createElement("div",{...b,className:y.cellContainer},L,n.createElement("div",null,n.createElement(m.b,{width:s-I,height:y.cellHeightInner,sparkline:D,config:O,theme:y.theme})))};function E(h){if(Array.isArray(h))return{y:{name:"test",type:r.fS.number,values:h,config:{}}};if((0,o.aY)(h)){const p=h.fields.find(y=>y.type===r.fS.time),s=h.fields.find(y=>y.type===r.fS.number);if(p&&s)return{x:p,y:s}}}function v(h){let p=(0,c.S_)(h);if(p.type===i.h2.Auto&&(p={...p,type:i.h2.Sparkline}),p.type===i.h2.Sparkline)return p;throw new Error(`Expected options type ${i.h2.Sparkline} but got ${p.type}`)}},63510:(G,A,e)=>{"use strict";e.d(A,{i:()=>re});var n=e(66681),a=e(85960),o=e(36226),r=e(403),i=e(16515),g=e(58309),u=e(92369),l=e(1713),m=e(47257),c=e(50263),d=e(44574),f=e(71336);function E({tableStyles:fe,nestedData:ie,rowIndex:oe,width:ue,cellHeight:me}){const ge=ie.values,Ue=[],De=(0,m.l4)(),Pe=(0,m.wW)(v);let ye=fe.rowHeight+De.spacing.gridSize;return ge[oe].forEach((Te,nt)=>{const ct=!!Te.meta?.custom?.noHeader,he=fe.rowHeight*(Te.length+(ct?0:1)),xe={height:he,paddingLeft:f.bc,position:"absolute",top:ye};ye+=he+De.spacing.gridSize,Ue.push(a.createElement("div",{style:xe,key:`subTable_${oe}_${nt}`},a.createElement(re,{data:Te,width:ue-f.bc,height:fe.rowHeight*(Te.length+1),noHeader:ct,cellHeight:me})))}),a.createElement("div",{className:Pe.subTables},Ue)}const v=fe=>({subTables:(0,n.css)({"&:before":{content:'""',position:"absolute",width:"1px",top:fe.spacing(5),left:fe.spacing(1),bottom:fe.spacing(2),background:fe.colors.border.medium}})});function h(fe,ie,oe){return fe.values[ie].reduce((ge,Ue)=>{if(Ue.length){const De=!!Ue.meta?.custom?.noHeader;return ge+oe.rowHeight*(Ue.length+(De?0:1))+8}return ge},oe.rowHeight)??oe.rowHeight}var p=e(43014),s=e(42305),y=e(97666),C=e(51928),b=e(18975),S=e(74042),D=e(57445),M=e(75064),T=e(29165),R=e(96535),O=e(55973);const x=28,I=x*5,L=({options:fe,values:ie,caseSensitive:oe,onChange:ue})=>{const[me,ge]=(0,a.useState)(""),Ue=(0,a.useMemo)(()=>new RegExp(me,oe?void 0:"i"),[me,oe]),De=(0,a.useMemo)(()=>fe.filter(he=>he.label===void 0?!1:Ue.test(he.label)),[fe,Ue]),Pe=(0,m.wW)(P),Te=(0,m.l4)().spacing.gridSize,nt=(0,a.useMemo)(()=>Math.min(De.length*x,I)+Te,[Te,De.length]),ct=(0,a.useCallback)(he=>xe=>{const Me=xe.currentTarget.checked?ie.concat(he):ie.filter(He=>He.value!==he.value);ue(Me)},[ue,ie]);return a.createElement(S.wc,{spacing:"md"},a.createElement(R.H,{placeholder:"Filter values",onChange:ge,value:me}),!De.length&&a.createElement(D._,null,"No values"),De.length&&a.createElement(r.t7,{height:nt,itemCount:De.length,itemSize:x,width:"100%",className:Pe.filterList},({index:he,style:xe})=>{const Me=De[he],{value:He,label:Ve}=Me,Oe=ie.find(Ne=>Ne.value===He)!==void 0;return a.createElement("div",{className:Pe.filterListRow,style:xe,title:Ve},a.createElement(O.X,{value:Oe,label:Ve,onChange:ct(Me)}))}))},P=fe=>({filterList:(0,n.css)({label:"filterList"}),filterListRow:(0,n.css)({label:"filterListRow",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:fe.spacing(.5),":hover":{backgroundColor:fe.colors.action.hover}})}),N=({column:{preFilteredRows:fe,filterValue:ie,setFilter:oe},onClose:ue,field:me})=>{const ge=(0,m.l4)(),Ue=(0,a.useMemo)(()=>(0,f.AF)(fe,me),[fe,me]),De=(0,a.useMemo)(()=>(0,f.mP)(Ue),[Ue]),Pe=(0,a.useMemo)(()=>(0,f.n0)(De,ie),[De,ie]),[ye,Te]=(0,a.useState)(Pe),[nt,ct]=(0,a.useState)(!1),he=(0,a.useCallback)(Oe=>ue(),[ue]),xe=(0,a.useCallback)(Oe=>{const Ne=ye.length?ye:void 0;oe(Ne),ue()},[oe,ye,ue]),Me=(0,a.useCallback)(Oe=>{oe(void 0),ue()},[oe,ue]),He=(0,a.useMemo)(()=>ie!==void 0,[ie]),Ve=(0,m.wW)(F);return a.createElement(b.L,{onClick:he,useCapture:!0},a.createElement("div",{className:(0,n.cx)(Ve.filterContainer),onClick:U},a.createElement(S.wc,{spacing:"lg"},a.createElement(S.wc,{spacing:"xs"},a.createElement(S.Lh,{justify:"space-between",align:"center"},a.createElement(D._,{className:Ve.label},"Filter by values:"),a.createElement(M.h,{name:"text-fields",tooltip:"Match case",style:{color:nt?ge.colors.text.link:ge.colors.text.disabled},onClick:()=>{ct(Oe=>!Oe)}})),a.createElement("div",{className:(0,n.cx)(Ve.listDivider)}),a.createElement(L,{onChange:Te,values:ye,options:De,caseSensitive:nt})),a.createElement(S.Lh,{spacing:"lg"},a.createElement(S.Lh,null,a.createElement(T.zx,{size:"sm",onClick:xe},"Ok"),a.createElement(T.zx,{size:"sm",variant:"secondary",onClick:he},"Cancel")),He&&a.createElement(S.Lh,null,a.createElement(T.zx,{fill:"text",size:"sm",onClick:Me},"Clear filter"))))))},F=fe=>({filterContainer:(0,n.css)({label:"filterContainer",width:"100%",minWidth:"250px",height:"100%",maxHeight:"400px",backgroundColor:fe.colors.background.primary,border:`1px solid ${fe.colors.border.weak}`,padding:fe.spacing(2),margin:fe.spacing(1,0),boxShadow:fe.shadows.z3,borderRadius:fe.shape.radius.default}),listDivider:(0,n.css)({label:"listDivider",width:"100%",borderTop:`1px solid ${fe.colors.border.medium}`,padding:fe.spacing(.5,2)}),label:(0,n.css)({marginBottom:0})}),U=fe=>{fe.stopPropagation()},j=({column:fe,field:ie,tableStyles:oe})=>{const ue=(0,a.useRef)(null),[me,ge]=(0,a.useState)(!1),Ue=(0,m.wW)(V),De=(0,a.useMemo)(()=>!!fe.filterValue,[fe.filterValue]),Pe=(0,a.useCallback)(()=>ge(!0),[ge]),ye=(0,a.useCallback)(()=>ge(!1),[ge]);return!ie||!ie.config.custom?.filterable?null:a.createElement("button",{className:(0,n.cx)(oe.headerFilter,De?Ue.filterIconEnabled:Ue.filterIconDisabled),ref:ue,type:"button",onClick:Pe},a.createElement(y.J,{name:"filter"}),me&&ue.current&&a.createElement(C.J,{content:a.createElement(N,{column:fe,tableStyles:oe,field:ie,onClose:ye}),placement:"bottom-start",referenceElement:ue.current,show:!0}))},V=fe=>({filterIconEnabled:(0,n.css)({label:"filterIconEnabled",color:fe.colors.primary.text}),filterIconDisabled:(0,n.css)({label:"filterIconDisabled",color:fe.colors.text.disabled})}),_=fe=>{const{headerGroups:ie,showTypeIcons:oe,tableStyles:ue}=fe,me=u.wl.components.Panels.Visualization.Table;return a.createElement("div",{role:"rowgroup",className:ue.headerRow},ie.map(ge=>{const{key:Ue,...De}=ge.getHeaderGroupProps();return a.createElement("div",{className:ue.thead,...De,key:Ue,"aria-label":me.header,role:"row"},ge.headers.map((Pe,ye)=>H(Pe,ue,oe)))}))};function H(fe,ie,oe){const ue=fe.getHeaderProps(),me=fe.field??null;return fe.canResize&&(ue.style.userSelect=fe.isResizing?"none":"auto"),ue.style.position="absolute",ue.style.justifyContent=fe.justifyContent,a.createElement("div",{className:ie.headerCell,...ue,role:"columnheader"},fe.canSort&&a.createElement(a.Fragment,null,a.createElement("button",{...fe.getSortByToggleProps(),className:ie.headerCellLabel},oe&&a.createElement(y.J,{name:(0,s.e7)(me),title:me?.type,size:"sm",className:ie.typeIcon}),a.createElement("div",null,fe.render("Header")),fe.isSorted&&(fe.isSortedDesc?a.createElement(y.J,{size:"lg",name:"arrow-down",className:ie.sortIcon}):a.createElement(y.J,{name:"arrow-up",size:"lg",className:ie.sortIcon}))),fe.canFilter&&a.createElement(j,{column:fe,tableStyles:ie,field:me})),!fe.canSort&&fe.render("Header"),!fe.canSort&&fe.canFilter&&a.createElement(j,{column:fe,tableStyles:ie,field:me}),fe.canResize&&a.createElement("div",{...fe.getResizerProps(),className:ie.resizeHandle}))}var z=e(41027);function K(fe,ie){(0,a.useEffect)(()=>{if(fe.current&&ie.current){const oe=fe.current.querySelector(".track-vertical"),ue=ie.current.firstChild;ue&&oe&&(oe.remove(),ue instanceof HTMLElement&&(ue.querySelector(":scope > .track-vertical")?.remove(),ue.append(oe)))}})}function Y(fe,ie,oe){(0,a.useEffect)(()=>{if(fe.lastExpandedIndex!==void 0){let ue=fe.lastExpandedIndex;const me=Object.keys(fe.expanded);if(me.length>0){const Ue=parseInt(me[0],10);isNaN(Ue)||(ue=Math.min(ue,Ue))}const ge=fe.pageIndex===0?ue-1:ue-fe.pageIndex-fe.pageIndex*fe.pageSize;ie.current?.resetAfterIndex(Math.max(ge,0));return}},[fe.lastExpandedIndex,fe.toggleRowExpandedCounter,fe.pageIndex,fe.pageSize,ie,oe,fe.expanded])}var k=e(94372);function q({onColumnResize:fe,onSortByChange:ie,data:oe}){return(0,a.useCallback)((ue,me)=>{switch(me.type){case"columnDoneResizing":if(fe){const Ue=ue.columnResizing.headerIdWidths[0][0],De=parseInt(Ue,10),Pe=Math.round(ue.columnResizing.columnWidths[Ue]),ye=oe.fields[De];if(!ye)return ue;const Te=(0,k.CZ)(ye,oe);fe(Te,Pe)}case"toggleSortBy":if(ie){const ge=[];for(const Ue of ue.sortBy){const De=oe.fields[parseInt(Ue.id,10)];De&&ge.push({displayName:(0,k.CZ)(De,oe),desc:Ue.desc})}ie(ge)}case"toggleRowExpanded":if(me.id)return{...ue,lastExpandedIndex:parseInt(me.id,10),toggleRowExpandedCounter:ue.toggleRowExpandedCounter+1}}return ue},[oe,fe,ie])}function X(fe,ie){const oe={toggleRowExpandedCounter:0};if(fe){oe.sortBy=[];for(const ue of fe)for(const me of ie)me.Header===ue.displayName&&oe.sortBy.push({id:me.id,desc:ue.desc})}return oe}var te=e(45913);const se=150,de=36,re=(0,a.memo)(fe=>{const{ariaLabel:ie,data:oe,height:ue,onCellFilterAdded:me,width:ge,columnMinWidth:Ue=se,noHeader:De,resizable:Pe=!0,initialSortBy:ye,footerOptions:Te,showTypeIcons:nt,footerValues:ct,enablePagination:he,cellHeight:xe=l.Ss.Sm,timeRange:Me}=fe,He=(0,a.useRef)(null),Ve=(0,a.useRef)(null),Oe=(0,a.useRef)(null),Ne=(0,m.l4)(),_e=(0,te.p)(Ne,xe),qe=De?0:_e.rowHeight,[rt,mt]=(0,a.useState)(ct),Je=(0,a.useMemo)(()=>{const qt=de;let On=0;if(!rt)return 0;for(const wn of rt)Array.isArray(wn)&&wn.length>On&&(On=wn.length);return On>1?qt*On:qt},[rt]),Ae=(0,a.useMemo)(()=>oe.fields.length?Array(oe.length).fill(0):[],[oe]),Ke=!!(Te?.countRows&&Te.reducer&&Te.reducer.length&&Te.reducer[0]===i.gz.count),Xe=oe.fields.find(qt=>qt.type===g.fS.nestedFrames),ne=Xe!==void 0,Z=(0,a.useMemo)(()=>(0,f.Pu)(oe,ge,Ue,ne,rt,Ke),[oe,ge,Ue,rt,ne,Ke]),ee=(0,a.useRef)(),ce=q({...fe,onSortByChange:qt=>{ee.current(!1),fe.onSortByChange&&fe.onSortByChange(qt)}}),be=(0,a.useMemo)(()=>({columns:Z,data:Ae,disableResizing:!Pe,stateReducer:ce,autoResetPage:!1,initialState:X(ye,Z),autoResetFilters:!1,sortTypes:{number:f.QT,"alphanumeric-insensitive":f.nl}}),[ye,Z,Ae,Pe,ce]),{getTableProps:Ee,headerGroups:Be,footerGroups:Le,rows:ze,prepareRow:Fe,totalColumnsWidth:$e,page:et,state:tt,gotoPage:it,setPageSize:vt,pageOptions:yt,toggleAllRowsExpanded:Wt}=(0,o.useTable)(be,o.useFilters,o.useSortBy,o.useAbsoluteLayout,o.useResizeColumns,o.useExpanded,o.usePagination),ut=tt;ee.current=Wt;const pt=JSON.stringify(Object.keys(tt.expanded));(0,a.useEffect)(()=>{He.current?.resetAfterIndex(0)},[pt]),(0,a.useEffect)(()=>{Te||mt(ct)},[ct,Te]),(0,a.useEffect)(()=>{if(!Te)return;if(!Te.show){mt(void 0);return}if(Ke){const On=[];On[0]=Be[0]?.headers[0]?.filteredRows.length.toString()??oe.length.toString(),mt(On);return}const qt=(0,f.jB)(Be[0].headers,(0,f.KF)(ze),Te,Ne);mt(qt)},[Te,Ne,tt.filters,oe]);let we=ue-(qe+Je);he&&(we-=_e.cellHeight);const lt=Math.round(we/_e.rowHeight)-1;(0,a.useEffect)(()=>{lt<=0||vt(lt)},[lt,vt]),Y(ut,He,oe),K(Oe,Ve);const Bt=(0,a.useCallback)(qt=>tt.pageIndex*tt.pageSize+qt,[tt.pageIndex,tt.pageSize]),Kt=(0,a.useCallback)(({index:qt,style:On})=>{const wn=Bt(qt),Zn=ze[wn];Fe(Zn);const Aa=tt.expanded[Zn.index]?(0,n.css)({"&:hover":{background:"inherit"}}):{};return a.createElement("div",{...Zn.getRowProps({style:On}),className:(0,n.cx)(_e.row,Aa)},Xe&&tt.expanded[Zn.index]&&a.createElement(E,{nestedData:Xe,tableStyles:_e,rowIndex:qt,width:ge,cellHeight:xe}),Zn.cells.map((Ea,Nt)=>a.createElement(z.p,{key:Nt,tableStyles:_e,cell:Ea,onCellFilterAdded:me,columnIndex:Nt,columnCount:Zn.cells.length,timeRange:Me,frame:oe})))},[Bt,ze,Fe,tt.expanded,_e,Xe,ge,xe,me,Me,oe]),It=(0,a.useCallback)(qt=>{it(qt-1)},[it]),Zt=he?et.length:ze.length;let yn=null;if(he){const qt=tt.pageIndex*tt.pageSize+1;let On=qt+tt.pageSize-1;const wn=ge<550;On>oe.length&&(On=oe.length),yn=a.createElement("div",{className:_e.paginationWrapper},a.createElement(d.t,{currentPage:tt.pageIndex+1,numberOfPages:yt.length,showSmallVersion:wn,onNavigate:It}),wn?null:a.createElement("div",{className:_e.paginationSummary},qt," - ",On," of ",oe.length," rows"))}const xn=qt=>{const On=Bt(qt),wn=ze[On];return tt.expanded[wn.index]&&Xe?h(Xe,qt,_e):_e.rowHeight},An=qt=>{const{scrollTop:On}=qt.currentTarget;He.current!==null&&He.current.scrollTo(On)};return a.createElement("div",{...Ee(),className:_e.table,"aria-label":ie,role:"table",ref:Ve,style:{width:ge,height:ue}},a.createElement(c.$,{hideVerticalTrack:!0},a.createElement("div",{className:_e.tableContentWrapper($e)},!De&&a.createElement(_,{headerGroups:Be,showTypeIcons:nt,tableStyles:_e}),Zt>0?a.createElement("div",{"data-testid":u.wl.components.Panels.Visualization.Table.body,ref:Oe},a.createElement(c.$,{onScroll:An,hideHorizontalTrack:!0},a.createElement(r.S_,{key:_e.rowHeight+tt.pageIndex,height:we,itemCount:Zt,itemSize:xn,width:"100%",ref:He,style:{overflow:void 0}},Kt))):a.createElement("div",{style:{height:ue-qe,width:ge},className:_e.noData},"No data"),rt&&a.createElement(p.i,{isPaginationVisible:!!he,footerValues:rt,footerGroups:Le,totalColumnsWidth:$e,tableStyles:_e}))),yn)});re.displayName="Table"},41027:(G,A,e)=>{"use strict";e.d(A,{p:()=>a});var n=e(85960);const a=({cell:o,tableStyles:r,onCellFilterAdded:i,timeRange:g,userProps:u,frame:l})=>{const m=o.getCellProps(),c=o.column.field;if(!c?.display)return null;m.style&&(m.style.minWidth=m.style.width,m.style.justifyContent=o.column.justifyContent);let d=(typeof o.column.width=="number"?o.column.width:24)-r.cellPadding*2;return n.createElement(n.Fragment,null,o.render("Cell",{field:c,tableStyles:r,onCellFilterAdded:i,cellProps:m,innerWidth:d,timeRange:g,userProps:u,frame:l}))}},45913:(G,A,e)=>{"use strict";e.d(A,{p:()=>a});var n=e(66681);function a(r,i){const g=r.colors.border.weak,u=r.colors.primary.border,l=6,m=o(r,i,l),c=m+2,d=28,f=(E,v,h,p)=>(0,n.css)({label:h?"cellContainerOverflow":"cellContainerNoOverflow",padding:`${l}px`,width:"100%",height:`${c-1}px`,display:p?"block":"flex",...p?{overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap"}:{},alignItems:"center",borderRight:`1px solid ${g}`,color:E??void 0,background:v??void 0,backgroundClip:"padding-box","&:last-child:not(:only-child)":{borderRight:"none"},"&:hover":{overflow:h?"visible":void 0,width:h?"auto !important":void 0,boxShadow:h?`0 0 2px ${r.colors.primary.main}`:void 0,background:h?v??r.components.table.rowHoverBackground:void 0,zIndex:h?1:void 0,".cellActions":{visibility:"visible",opacity:1,width:"auto"}},a:{color:"inherit"},".cellActions":{display:"flex",position:h?void 0:"absolute",top:h?void 0:0,right:h?void 0:0,margin:h?r.spacing(0,-.5,0,.5):"auto",visibility:"hidden",opacity:0,width:0,alignItems:"center",height:"100%",padding:r.spacing(1,.5,1,.5),background:v?"none":r.colors.emphasize(r.colors.background.primary,.03),svg:{color:E}},".cellActionsLeft":{right:"auto !important",left:0},".cellActionsTransparent":{background:"none"}});return{theme:r,cellHeight:m,buildCellContainerStyle:f,cellPadding:l,cellHeightInner:m-l*2,rowHeight:c,table:(0,n.css)({height:"100%",width:"100%",overflow:"auto",display:"flex",flexDirection:"column"}),thead:(0,n.css)({label:"thead",height:`${d}px`,overflowY:"auto",overflowX:"hidden",position:"relative"}),tfoot:(0,n.css)({label:"tfoot",height:`${d}px`,borderTop:`1px solid ${g}`,overflowY:"auto",overflowX:"hidden",position:"relative"}),headerRow:(0,n.css)({label:"row",borderBottom:`1px solid ${g}`}),headerCell:(0,n.css)({height:"100%",padding:`0 ${l}px`,overflow:"hidden",whiteSpace:"nowrap",display:"flex",alignItems:"center",fontWeight:r.typography.fontWeightMedium,"&:last-child":{borderRight:"none"}}),headerCellLabel:(0,n.css)({border:"none",padding:0,background:"inherit",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:r.typography.fontWeightMedium,display:"flex",alignItems:"center",marginRight:r.spacing(.5),"&:hover":{textDecoration:"underline",color:r.colors.text.link}}),cellContainerText:f(void 0,void 0,!0,!0),cellContainerTextNoOverflow:f(void 0,void 0,!1,!0),cellContainer:f(void 0,void 0,!0,!1),cellContainerNoOverflow:f(void 0,void 0,!1,!1),cellText:(0,n.css)({overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap"}),sortIcon:(0,n.css)({marginLeft:r.spacing(.5)}),cellLink:(0,n.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",color:r.colors.text.link,fontWeight:r.typography.fontWeightMedium,"&:hover":{textDecoration:"underline",color:r.colors.text.link}}),cellLinkForColoredCell:(0,n.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",fontWeight:r.typography.fontWeightMedium,textDecoration:"underline"}),imageCellLink:(0,n.css)({cursor:"pointer",overflow:"hidden",height:"100%"}),headerFilter:(0,n.css)({background:"transparent",border:"none",label:"headerFilter",padding:0}),paginationWrapper:(0,n.css)({display:"flex",height:`${m}px`,justifyContent:"center",alignItems:"center",width:"100%",li:{marginBottom:0}}),paginationSummary:(0,n.css)({color:r.colors.text.secondary,fontSize:r.typography.bodySmall.fontSize,display:"flex",justifyContent:"flex-end",padding:r.spacing(0,1,0,2)}),tableContentWrapper:E=>{const v=E!==void 0?`${E}px`:"100%";return(0,n.css)({label:"tableContentWrapper",width:v,display:"flex",flexDirection:"column"})},row:(0,n.css)({label:"row",borderBottom:`1px solid ${g}`,"&:hover":{backgroundColor:r.components.table.rowHoverBackground},"&:last-child":{borderBottom:0}}),imageCell:(0,n.css)({height:"100%"}),resizeHandle:(0,n.css)({label:"resizeHandle",cursor:"col-resize !important",display:"inline-block",background:u,opacity:0,transition:"opacity 0.2s ease-in-out",width:"8px",height:"100%",position:"absolute",right:"-4px",borderRadius:r.shape.radius.default,top:0,touchAction:"none","&:hover":{opacity:1}}),typeIcon:(0,n.css)({marginRight:r.spacing(1),color:r.colors.text.secondary}),noData:(0,n.css)({alignItems:"center",display:"flex",height:"100%",justifyContent:"center",width:"100%"}),expanderCell:(0,n.css)({display:"flex",flexDirection:"column",justifyContent:"center",height:`${c}px`,cursor:"pointer"})}}function o(r,i,g){const u=r.typography.fontSize,l=r.typography.body.lineHeight;switch(i){case"md":return 42;case"lg":return 48;case"sm":default:return g*2+u*l}}},67131:(G,A,e)=>{"use strict";e.d(A,{PT:()=>n,tE:()=>a});const n="=",a="!="},71336:(G,A,e)=>{"use strict";e.d(A,{bc:()=>de,AF:()=>ue,KF:()=>he,f2:()=>Oe,S_:()=>Me,Pu:()=>fe,n0:()=>De,jB:()=>nt,E4:()=>re,q7:()=>He,nl:()=>Pe,QT:()=>ye,mP:()=>ge});var n=e(56375),a=e(63957),o=e.n(a),r=e(58309),i=e(94372),g=e(45878),u=e(24677),l=e(1930),m=e(16515),c=e(64282),d=e(1713),f=e(85960),E=e(37634),v=e(72211),h=e(11795),p=e(70265),s=e(15324);const y={mode:E.H.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},C=Ne=>{const{field:_e,innerWidth:qe,tableStyles:rt,cell:mt,cellProps:Je,row:Ae}=Ne,Ke=_e.display(mt.value),Xe=Me(_e);let ne=(0,v.xD)(_e,!1);ne.thresholds||(ne={...ne,thresholds:y});let Z=d.QH.Gradient,ee;Xe.type===d.h2.Gauge&&(Z=Xe.mode??d.QH.Gradient,ee=Xe.valueDisplayMode!==void 0?Xe.valueDisplayMode:d.M8.Text);const ce=()=>(0,n.isFunction)(_e.getLinks)?_e.getLinks({valueRowIndex:Ae.index}):[],be=!!ce().length,Ee=Oe(_e,Ke,mt.row.index),Be=Le=>{const{openMenu:ze,targetClassName:Fe}=Le;return f.createElement(p.xf,{width:qe,height:rt.cellHeightInner,field:ne,display:_e.display,text:{valueSize:14},value:Ke,orientation:h.wm.Horizontal,theme:rt.theme,alignmentFactors:Ee,onClick:ze,className:Fe,itemSpacing:1,lcdCellWidth:8,displayMode:Z,valueDisplayMode:ee})};return f.createElement("div",{...Je,className:rt.cellContainer},be&&f.createElement(s.V,{links:ce,style:{display:"flex",width:"100%"}},Le=>Be(Le)),!be&&Be({}))};var b=e(66681),S=e(19737),D=e(47257),M=e(44230),T=e(42309),R=e(29165),O=e(75064),x=e(74042),I=e(55855),L=e(7288),P=e(62577);function N({value:Ne,onDismiss:_e,mode:qe}){let rt=Ne;if((0,n.isString)(Ne))try{Ne=JSON.parse(Ne)}catch{}else rt=JSON.stringify(Ne,null," ");let mt=rt;return qe==="code"&&(mt=JSON.stringify(Ne,null," ")),f.createElement(L.u,{onDismiss:_e,isOpen:!0,title:"Inspect value"},qe==="code"?f.createElement(P.p,{width:"100%",height:500,language:"json",showLineNumbers:!0,showMiniMap:(mt&&mt.length)>100,value:mt,readOnly:!0}):f.createElement("pre",null,mt),f.createElement(L.u.ButtonRow,null,f.createElement(I.m,{icon:"copy",getText:()=>mt},"Copy to Clipboard")))}var F=e(67131);function U({field:Ne,cell:_e,previewMode:qe,showFilters:rt,onCellFilterAdded:mt}){const[Je,Ae]=(0,f.useState)(!1),Ke=re(Ne)==="flex-end",Xe=!!Ne.config.custom?.inspect,ne={size:"sm",tooltipPlacement:"top"},Z=(0,f.useCallback)(ce=>{mt&&mt({key:Ne.name,operator:F.PT,value:_e.value})},[_e,Ne,mt]),ee=(0,f.useCallback)(ce=>{mt&&mt({key:Ne.name,operator:F.tE,value:_e.value})},[_e,Ne,mt]);return f.createElement(f.Fragment,null,f.createElement("div",{className:`cellActions ${Ke?"cellActionsLeft":""}`},f.createElement(x.Lh,{spacing:"xs"},Xe&&f.createElement(O.h,{name:"eye",tooltip:"Inspect value",onClick:()=>{Ae(!0)},...ne}),rt&&f.createElement(O.h,{name:"search-plus",onClick:Z,tooltip:"Filter for value",...ne}),rt&&f.createElement(O.h,{name:"search-minus",onClick:ee,tooltip:"Filter out value",...ne}))),Je&&f.createElement(N,{mode:qe,value:_e.value,onDismiss:()=>{Ae(!1)}}))}const j=Ne=>{const{field:_e,cell:qe,tableStyles:rt,row:mt,cellProps:Je,frame:Ae}=Ne,Ke=!!_e.config.custom?.inspect,Xe=_e.display(qe.value),ne=Ne.onCellFilterAdded&&_e.config.filterable,Z=ne&&qe.value!==void 0||Ke,ee=Me(_e),ce=!!(0,M.i)(_e,mt)?.length,be=(0,D.wW)(R._7),[Ee,Be]=(0,f.useState)(!1);let Le;const ze=()=>{Be(!1)},Fe=()=>{Be(!0)};if(ee.type===d.h2.Custom){const tt=ee.cellComponent;Le=f.createElement(tt,{field:_e,value:qe.value,rowIndex:mt.index,frame:Ae})}else f.isValidElement(qe.value)?Le=qe.value:Le=(0,l.zc)(Xe);const $e=typeof Le=="string",et=V(rt,ee,Xe,Ke,$e);if($e){let tt=Je.style?.justifyContent;tt==="flex-end"?Je.style={...Je.style,textAlign:"right"}:tt==="center"&&(Je.style={...Je.style,textAlign:"center"})}return f.createElement("div",{...Je,onMouseEnter:Z?Fe:void 0,onMouseLeave:Z?ze:void 0,className:et},!ce&&($e?`${Le}`:f.createElement("div",{className:rt.cellText},Le)),ce&&f.createElement(s.V,{links:()=>(0,M.i)(_e,mt)||[]},tt=>tt.openMenu?f.createElement("button",{className:(0,b.cx)(be,_(rt,ee,tt.targetClassName)),onClick:tt.openMenu},Le):f.createElement("div",{className:_(rt,ee,tt.targetClassName)},Le)),Ee&&Z&&f.createElement(U,{...Ne,previewMode:"text",showFilters:ne}))};function V(Ne,_e,qe,rt=!1,mt=!1){const Je=Ne.theme.isDark?1:-.7;let Ae,Ke;if(_e.type===d.h2.ColorText)Ae=qe.color;else if(_e.type===d.h2.ColorBackground){const Xe=_e.mode??d.v7.Gradient;if(Xe===d.v7.Basic)Ae=(0,T.bM)(qe.color,Ne.theme.isDark),Ke=(0,S.Z)(qe.color).toRgbString();else if(Xe===d.v7.Gradient){const ne=(0,S.Z)(qe.color).darken(10*Je).spin(5);Ae=(0,T.bM)(qe.color,Ne.theme.isDark),Ke=`linear-gradient(120deg, ${ne.toRgbString()}, ${qe.color})`}}return Ae!==void 0||Ke!==void 0?Ne.buildCellContainerStyle(Ae,Ke,!rt,mt):mt?rt?Ne.cellContainerTextNoOverflow:Ne.cellContainerText:rt?Ne.cellContainerNoOverflow:Ne.cellContainer}function _(Ne,_e,qe){return _e.type===d.h2.Auto?(0,b.cx)(Ne.cellLink,qe):(0,b.cx)(Ne.cellLinkForColoredCell,qe)}var H=e(43014),z=e(76554),K=e(81171);function Y(Ne){const{cell:_e,tableStyles:qe,cellProps:rt}=Ne;let mt="";return _e.value instanceof K.Z?mt=new z.Z().writeGeometry(_e.value,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}):_e.value!=null&&(mt=`${_e.value}`),f.createElement("div",{...rt,className:qe.cellContainer},f.createElement("div",{className:qe.cellText,style:{fontFamily:"monospace"}},mt))}const k=Ne=>{const{field:_e,cell:qe,tableStyles:rt,row:mt,cellProps:Je}=Ne,Ae=_e.display(qe.value),Ke=!!(0,M.i)(_e,mt)?.length,Xe=(0,D.wW)(R._7);return f.createElement("div",{...Je,className:rt.cellContainer},!Ke&&f.createElement("img",{src:Ae.text,className:rt.imageCell,alt:""}),Ke&&f.createElement(s.V,{style:{height:"100%"},links:()=>(0,M.i)(_e,mt)||[]},ne=>{const Z=f.createElement("img",{src:Ae.text,className:rt.imageCell,alt:""});return ne.openMenu?f.createElement(R.zx,{className:(0,b.cx)(Xe),onClick:ne.openMenu},Z):Z}))};function q(Ne){const{cell:_e,tableStyles:qe,cellProps:rt,field:mt,row:Je}=Ne,Ae=!!mt.config.custom?.inspect,Ke=(0,b.css)({cursor:"pointer",fontFamily:"monospace"});let Xe=_e.value,ne=Xe;if((0,n.isString)(Xe))try{Xe=JSON.parse(Xe)}catch{}else ne=JSON.stringify(Xe,null," ");const Z=!!(0,M.i)(mt,Je)?.length,ee=(0,D.wW)(R._7);return f.createElement("div",{...rt,className:Ae?qe.cellContainerNoOverflow:qe.cellContainer},f.createElement("div",{className:(0,b.cx)(qe.cellText,Ke)},!Z&&f.createElement("div",{className:qe.cellText},ne),Z&&f.createElement(s.V,{links:()=>(0,M.i)(mt,Je)||[]},ce=>ce.openMenu?f.createElement(R.zx,{className:(0,b.cx)(ee),onClick:ce.openMenu},ne):f.createElement(f.Fragment,null,ne))),Ae&&f.createElement(U,{...Ne,previewMode:"code"}))}var X=e(97666);function te({row:Ne,tableStyles:_e}){return f.createElement("div",{className:_e.expanderCell,...Ne.getToggleRowExpandedProps()},f.createElement(X.J,{"aria-label":Ne.isExpanded?"Collapse row":"Expand row",name:Ne.isExpanded?"angle-down":"angle-right",size:"lg"}))}var se=e(75561);const de=50;function re(Ne){if(!Ne)return"flex-start";if(Ne.config.custom)switch(Ne.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}return Ne.type===r.fS.number?"flex-end":"flex-start"}function fe(Ne,_e,qe,rt,mt,Je){const Ae=[];let Ke=0;rt&&(Ae.push({Header:()=>null,id:"expander",Cell:te,width:de,minWidth:de,filter:(ne,Z,ee)=>[],justifyContent:"left",field:Ne.fields[0],sortType:"basic"}),_e-=de);for(const[ne,Z]of Ne.fields.entries()){const ee=Z.config.custom||{};if(ee.hidden||Z.type===r.fS.nestedFrames)continue;ee.width?_e-=ee.width:Ke++;const ce=Ee=>{switch(Ee){case r.fS.number:case r.fS.frame:return"number";case r.fS.time:return"basic";default:return"alphanumeric-insensitive"}},be=ie(ee.cellOptions?.type,Z);Ae.push({Cell:be,id:ne.toString(),field:Z,Header:ee.hideHeader?"":(0,i.CZ)(Z,Ne),accessor:(Ee,Be)=>Z.values[Be],sortType:ce(Z.type),width:ee.width,minWidth:ee.minWidth??qe,filter:o()(oe(Z)),justifyContent:re(Z),Footer:(0,H.c)(ne,mt,Je)})}let Xe=_e/Ke;for(let ne=Ke;ne>0;ne--)for(const Z of Ae)!Z.width&&Z.minWidth>Xe&&(Z.width=Z.minWidth,_e-=Z.width,Ke-=1,Xe=_e/Ke);for(const ne of Ae)ne.width||(ne.width=Xe),ne.minWidth=50;return Ae}function ie(Ne,_e){switch(Ne){case d.h2.Custom:case d.h2.ColorText:case d.h2.ColorBackground:return j;case d.h2.Image:return k;case d.h2.Gauge:return C;case d.h2.Sparkline:return se.A;case d.h2.JSONView:return q}if(_e.type===r.fS.geo)return Y;if(_e.type===r.fS.frame){const qe=_e.values[0];return(0,g.aY)(qe)&&(0,u.pP)(qe)?se.A:q}return _e.type===r.fS.other?q:j}function oe(Ne){return function(_e,qe,rt){return _e.length===0||!rt||!Ne?_e:_e.filter(mt=>{if(!mt.values.hasOwnProperty(qe))return!1;const Je=me(mt,Ne);return rt.find(Ae=>Ae.value===Je)!==void 0})}}function ue(Ne,_e){if(!_e||Ne.length===0)return{};const qe={};for(let rt=0;rt<Ne.length;rt++){const mt=me(Ne[rt],_e);qe[mt||"(Blanks)"]=mt}return qe}function me(Ne,_e){if(!_e||!Ne)return"";const qe=_e.values[Ne.index],rt=_e.display?_e.display(qe):qe;return _e.display?(0,l.zc)(rt):rt}function ge(Ne){return Object.keys(Ne).reduce((_e,qe)=>_e.concat({value:Ne[qe],label:qe}),[]).sort(Ue)}function Ue(Ne,_e){return Ne.label===void 0&&_e.label===void 0?0:Ne.label===void 0&&_e.label!==void 0?-1:Ne.label!==void 0&&_e.label===void 0?1:Ne.label<_e.label?-1:Ne.label>_e.label?1:0}function De(Ne,_e){return _e?Ne.filter(qe=>_e.some(rt=>rt.value===qe.value)):[]}function Pe(Ne,_e,qe){return String(Ne.values[qe]).localeCompare(String(_e.values[qe]),void 0,{sensitivity:"base"})}function ye(Ne,_e,qe){const rt=Te(Ne.values[qe]),mt=Te(_e.values[qe]);return rt===mt?0:rt>mt?1:-1}function Te(Ne){return(0,g.z4)(Ne)?Ne.value??Number.NEGATIVE_INFINITY:Ne==null||Ne===""||isNaN(Ne)?Number.NEGATIVE_INFINITY:typeof Ne=="number"?Ne:Number(Ne)}function nt(Ne,_e,qe,rt){return Ve(Ne),Ne.map((mt,Je)=>{if(mt?.field?.type!==r.fS.number)return Je===0&&qe.reducer&&qe.reducer.length>0?m.TB.get(qe.reducer[0]).name:void 0;let Ae=(0,n.clone)(mt.field);return Ae.values=_e[mt.id],Ae.state=void 0,mt.field=Ae,qe.fields&&qe.fields.length>0?qe.fields.find(Xe=>Xe===mt?.field?.name)?ct(mt.field,qe.reducer,rt):void 0:ct(mt.field,qe.reducer||[],rt)})}function ct(Ne,_e,qe){const rt=Ne.display??(0,c.U)({field:Ne,theme:qe}),mt=_e[0],Je=(0,m.Kx)({field:Ne,reducers:_e})[mt];return(0,l.zc)(rt(Je))}function he(Ne){const _e=[];for(const qe in Ne)for(const[rt,mt]of Object.entries(Ne[qe].values))_e[rt]===void 0&&(_e[rt]=[]),_e[rt].push(mt);return _e}const xe={type:d.h2.Auto};function Me(Ne){return Ne.config.custom?.displayMode?He(Ne.config.custom?.displayMode):Ne.config.custom?.cellOptions?Ne.config.custom.cellOptions:xe}function He(Ne){switch(Ne){case"basic":case"gradient-gauge":case"lcd-gauge":let _e=d.QH.Basic;return Ne==="gradient-gauge"?_e=d.QH.Gradient:Ne==="lcd-gauge"&&(_e=d.QH.Lcd),{type:d.h2.Gauge,mode:_e};case"color-background":case"color-background-solid":let qe=d.v7.Basic;return Ne==="color-background"&&(qe=d.v7.Gradient),{type:d.h2.ColorBackground,mode:qe};default:return{type:Ne}}}function Ve(Ne){const _e=Ne.findIndex((qe,rt)=>qe?.id!==String(rt));_e===-1||Ne[_e]?.id==="expander"||(Ne.splice(_e,0,{id:String(_e)}),Ve(Ne))}function Oe(Ne,_e,qe){let rt=Ne.state?.alignmentFactors;if(rt)return rt.text.length<_e.text.length&&(rt.text=_e.text),rt;{rt={..._e};const mt=Math.min(Ne.values.length,qe+1e3);for(let Je=qe+1;Je<mt;Je++)Ne.display(Ne.values[Je]).text.length>rt.text.length&&(rt.text=_e.text);return Ne.state?Ne.state.alignmentFactors=rt:Ne.state={alignmentFactors:rt},rt}}},88433:(G,A,e)=>{"use strict";e.d(A,{w:()=>d});var n=e(66681),a=e(56375),o=e.n(a),r=e(85960),i=e(86346),g=e(47257),u=e(33808),l=e(97666),m=e(7073);class c extends r.PureComponent{constructor(v){super(v),this.readCSV=(0,a.debounce)(()=>{const{config:s}=this.props,{text:y}=this.state;this.setState({data:(0,i.uP)(y,{config:s})})},150),this.onTextChange=s=>{this.setState({text:s.target.value})};const{text:h,config:p}=v;this.state={text:h,data:(0,i.uP)(h,{config:p})}}componentDidUpdate(v,h){const{text:p}=this.state;(p!==h.text||this.props.config!==v.config)&&this.readCSV(),this.props.text!==v.text&&this.props.text!==p&&this.setState({text:this.props.text}),this.state.data!==h.data&&this.props.onSeriesParsed(this.state.data,this.state.text)}render(){const{width:v,height:h,theme:p}=this.props,{data:s}=this.state,y=f(p);return r.createElement("div",{className:y.tableInputCsv},r.createElement(m.K,{style:{width:v,height:h},placeholder:"Enter CSV here...",value:this.state.text,onChange:this.onTextChange,className:y.textarea}),s&&r.createElement("footer",{className:y.footer},s.map((C,b)=>r.createElement("span",{key:b},"Rows:",C.length,", Columns:",C.fields.length," \xA0",r.createElement(l.J,{name:"check-circle"})))))}}const d=(0,g.HE)(c);d.displayName="TableInputCSV";const f=(0,u.B)(E=>({tableInputCsv:(0,n.css)({position:"relative"}),textarea:(0,n.css)({height:"100%",width:"100%"}),footer:(0,n.css)({position:"absolute",bottom:"15px",right:"15px",border:"1px solid #222",background:E.colors.success.main,padding:`1px ${E.spacing(.5)}`,fontSize:"80%"})}))},66600:(G,A,e)=>{"use strict";e.d(A,{A:()=>i});var n=e(66681),a=e(85960),o=e(1930),r=e(47257);const i=({value:u})=>{const l=(0,r.wW)(g);return a.createElement("span",{className:l.counter},(0,o.SP)(u,0).text)},g=u=>({counter:(0,n.css)({label:"counter",marginLeft:u.spacing(1),borderRadius:u.spacing(3),backgroundColor:u.colors.action.hover,padding:u.spacing(.25,1),color:u.colors.text.secondary,fontWeight:u.typography.fontWeightMedium,fontSize:u.typography.size.sm})})},94439:(G,A,e)=>{"use strict";e.d(A,{O:()=>m});var n=e(66681),a=e(85960),o=e(92369),r=e(47257),i=e(55182),g=e(29165),u=e(97666),l=e(66600);const m=a.forwardRef(({label:d,active:f,icon:E,onChangeTab:v,counter:h,suffix:p,className:s,href:y,...C},b)=>{const S=(0,r.wW)(c),D=(0,r.wW)(g.gN),M=()=>a.createElement(a.Fragment,null,E&&a.createElement(u.J,{name:E}),d,typeof h=="number"&&a.createElement(l.A,{value:h}),p&&a.createElement(p,{className:S.suffix})),R={className:(0,n.cx)(D,S.link,f?S.activeStyle:S.notActive),...C,onClick:v,"aria-label":C["aria-label"]||o.wl.components.Tab.title(d),role:"tab","aria-selected":f};return y?a.createElement("div",{className:S.item},a.createElement("a",{...R,href:y,ref:b},M())):a.createElement("div",{className:S.item},a.createElement("button",{...R,type:"button",ref:b},M()))});m.displayName="Tab";const c=d=>({item:(0,n.css)({listStyle:"none",position:"relative",display:"flex",whiteSpace:"nowrap",padding:d.spacing(.5)}),link:(0,n.css)({color:d.colors.text.secondary,padding:d.spacing(1,1.5,.5),borderRadius:d.shape.radius.default,display:"block",height:"100%",svg:{marginRight:d.spacing(1)},"&:focus-visible":(0,i.getFocusStyles)(d),"&::before":{display:"block",content:'" "',position:"absolute",left:0,right:0,height:"4px",borderRadius:d.shape.radius.default,bottom:0}}),notActive:(0,n.css)({"a:hover, &:hover, &:focus":{color:d.colors.text.primary,"&::before":{backgroundColor:d.colors.action.hover}}}),activeStyle:(0,n.css)({label:"activeTabStyle",color:d.colors.text.primary,overflow:"hidden","&::before":{backgroundImage:d.colors.gradients.brandHorizontal}}),suffix:(0,n.css)({marginLeft:d.spacing(1)})})},10305:(G,A,e)=>{"use strict";e.d(A,{I:()=>r});var n=e(66681),a=e(85960),o=e(47257);const r=({children:g,className:u,...l})=>{const m=(0,o.wW)(i);return a.createElement("div",{...l,className:(0,n.cx)(m.tabContent,u)},g)},i=g=>({tabContent:(0,n.css)({background:g.colors.background.primary})})},70523:(G,A,e)=>{"use strict";e.d(A,{J:()=>r});var n=e(66681),a=e(85960),o=e(47257);const r=a.forwardRef(({children:g,className:u,hideBorder:l=!1},m)=>{const c=(0,o.wW)(i);return a.createElement("div",{className:(0,n.cx)(c.tabsWrapper,l&&c.noBorder,u),ref:m},a.createElement("div",{className:c.tabs,role:"tablist"},g))}),i=g=>({tabsWrapper:(0,n.css)({borderBottom:`1px solid ${g.colors.border.weak}`,overflowX:"auto"}),noBorder:(0,n.css)({borderBottom:0}),tabs:(0,n.css)({position:"relative",display:"flex",height:`${g.components.menuTabs.height}px`,alignItems:"center"})});r.displayName="TabsBar"},66566:(G,A,e)=>{"use strict";e.d(A,{L:()=>u});var n=e(66681),a=e(85960),o=e(92369),r=e(47257),i=e(97666),g=e(66600);const u=a.forwardRef(({label:m,active:c,icon:d,counter:f,className:E,suffix:v,onChangeTab:h,href:p,...s},y)=>{const C=(0,r.wW)(l),b=()=>a.createElement(a.Fragment,null,d&&a.createElement(i.J,{name:d}),m,typeof f=="number"&&a.createElement(g.A,{value:f}),v&&a.createElement(v,{className:C.suffix})),S=(0,n.cx)(C.link,c&&C.activeStyle);return a.createElement("a",{href:p,className:S,...s,onClick:h,"aria-label":s["aria-label"]||o.wl.components.Tab.title(m),role:"tab","aria-selected":c,ref:y},b())});u.displayName="Tab";const l=m=>({link:(0,n.css)({padding:"6px 12px",display:"block",height:"100%",cursor:"pointer",position:"relative",color:m.colors.text.primary,svg:{marginRight:m.spacing(1)},"&:hover, &:focus":{textDecoration:"underline"}}),activeStyle:(0,n.css)({label:"activeTabStyle",color:m.colors.text.maxContrast,overflow:"hidden","&::before":{display:"block",content:'" "',position:"absolute",left:0,width:"4px",bottom:"2px",top:"2px",borderRadius:m.shape.radius.default,backgroundImage:"linear-gradient(0deg, #f05a28 30%, #fbca0a 99%)"}}),suffix:(0,n.css)({marginLeft:m.spacing(1)})})},69977:(G,A,e)=>{"use strict";e.d(A,{V:()=>m});var n=e(66681),a=e(85960),o=e(34785),r=e(47257),i=e(97096),g=e(97666);const u=(0,a.forwardRef)(({name:f,onClick:E,icon:v,className:h,colorIndex:p,...s},y)=>{const C=(0,r.l4)(),b=d(C,f,p),S=M=>{M.preventDefault(),M.stopPropagation(),E?.(f,M)},D=(0,n.cx)(b.wrapper,h,{[b.hover]:E!==void 0});return E?a.createElement("button",{...s,className:D,onClick:S,ref:y},v&&a.createElement(g.J,{name:v}),f):a.createElement("span",{...s,className:D,ref:y},v&&a.createElement(g.J,{name:v}),f)});u.displayName="Tag";const m=Object.assign(u,{Skeleton:()=>{const f=(0,r.wW)(c);return a.createElement(o.Z,{width:60,height:22,containerClassName:f.container})}}),c=()=>({container:(0,n.css)({lineHeight:1})}),d=(f,E,v)=>{let h;return v===void 0?h=(0,i.Bx)(E):h=(0,i.vm)(v),{wrapper:(0,n.css)({appearance:"none",borderStyle:"none",fontWeight:f.typography.fontWeightMedium,fontSize:f.typography.size.sm,lineHeight:f.typography.bodySmall.lineHeight,verticalAlign:"baseline",backgroundColor:h.color,color:f.v1.palette.gray98,whiteSpace:"nowrap",textShadow:"none",padding:"3px 6px",borderRadius:f.shape.radius.default}),hover:(0,n.css)({"&:hover":{opacity:.85,cursor:"pointer"}})}}},7042:(G,A,e)=>{"use strict";e.d(A,{P:()=>u});var n=e(66681),a=e(85960),o=e(47257),r=e(69977);const i=(0,a.memo)((0,a.forwardRef)(({displayMax:c,tags:d,icon:f,onClick:E,className:v,getAriaLabel:h,getColorIndex:p},s)=>{const y=(0,o.l4)(),C=m(y,!!(c&&c>0)),b=d.length,S=c?d.slice(0,c):d;return a.createElement("ul",{className:(0,n.cx)(C.wrapper,v),"aria-label":"Tags",ref:s},S.map((D,M)=>a.createElement("li",{className:C.li,key:D},a.createElement(r.V,{name:D,icon:f,onClick:E,"aria-label":h?.(D,M),"data-tag-id":M,colorIndex:p?.(D,M)}))),c&&c>0&&b-c>0&&a.createElement("span",{className:C.moreTagsLabel},"+ ",b-c))}));i.displayName="TagList";const u=Object.assign(i,{Skeleton:()=>{const c=(0,o.wW)(l);return a.createElement("div",{className:c.container},a.createElement(r.V.Skeleton,null),a.createElement(r.V.Skeleton,null))}}),l=c=>({container:(0,n.css)({display:"flex",gap:c.spacing(1)})}),m=(c,d)=>({wrapper:(0,n.css)({position:"relative",alignItems:d?"center":"unset",display:"flex",flex:"1 1 auto",flexWrap:"wrap",flexShrink:d?0:1,justifyContent:"flex-end",gap:"6px"}),moreTagsLabel:(0,n.css)({color:c.colors.text.secondary,fontSize:c.typography.size.sm}),li:(0,n.css)({listStyle:"none"})})},6089:(G,A,e)=>{"use strict";e.d(A,{B:()=>c});var n=e(66681),a=e(85960),o=e(47257),r=e(29165),i=e(24956),g=e(97096),u=e(75064);const l=({name:f,disabled:E,onRemove:v})=>{const{color:h,borderColor:p}=(0,a.useMemo)(()=>(0,g.Bx)(f),[f]),s=(0,o.wW)(m);return a.createElement("li",{className:s.itemStyle,style:{backgroundColor:h,borderColor:p}},a.createElement("span",{className:s.nameStyle},f),a.createElement(u.h,{name:"times",size:"lg",disabled:E,tooltip:`Remove "${f}" tag`,onClick:()=>v(f),className:s.buttonStyles}))},m=f=>{const E=f.spacing.gridSize*3;return{itemStyle:(0,n.css)({display:"flex",gap:"3px",alignItems:"center",height:`${E}px`,lineHeight:`${E-2}px`,color:"#fff",borderWidth:"1px",borderStyle:"solid",borderRadius:f.shape.radius.default,padding:`0 ${f.spacing(.5)}`,whiteSpace:"nowrap",textShadow:"none",fontWeight:500,fontSize:f.typography.size.sm}),nameStyle:(0,n.css)({maxWidth:"25ch",textOverflow:"ellipsis",overflow:"hidden"}),buttonStyles:(0,n.css)({margin:0,"&:hover::before":{display:"none"}})}},c=({placeholder:f="New tag (enter key to add)",tags:E=[],onChange:v,width:h,className:p,disabled:s,addOnBlur:y,invalid:C,id:b})=>{const[S,D]=(0,a.useState)(""),M=(0,o.wW)(d),T=(0,o.l4)(),R=(0,a.useCallback)(P=>{D(P.target.value)},[]),O=P=>{v(E.filter(N=>N!==P))},x=P=>{P?.preventDefault(),E.includes(S)||v(E.concat(S)),D("")},I=()=>{y&&S&&x()},L=P=>{P.key==="Enter"&&S!==""&&x(P)};return a.createElement("div",{className:(0,n.cx)(M.wrapper,p,h?(0,n.css)({width:T.spacing(h)}):"")},a.createElement(i.I,{id:b,disabled:s,placeholder:f,onChange:R,value:S,onKeyDown:L,onBlur:I,invalid:C,suffix:a.createElement(r.zx,{fill:"text",className:M.addButtonStyle,onClick:x,size:"md",disabled:S.length<=0},"Add")}),E?.length>0&&a.createElement("ul",{className:M.tags},E.map(P=>a.createElement(l,{key:P,name:P,onRemove:O,disabled:s}))))},d=f=>({wrapper:(0,n.css)({minHeight:f.spacing(4),display:"flex",flexDirection:"column",gap:f.spacing(1),flexWrap:"wrap"}),tags:(0,n.css)({display:"flex",justifyContent:"flex-start",flexWrap:"wrap",gap:f.spacing(.5)}),addButtonStyle:(0,n.css)({margin:`0 -${f.spacing(1)}`})})},40377:(G,A,e)=>{"use strict";e.d(A,{x:()=>l});var n=e(66681),a=e(85960),o=e(47257),r=e(16925),i=e(14607);const g=a.forwardRef(({childElement:c,children:d},f)=>{const[E,v]=(0,a.useState)(!1),h=(0,a.useRef)(null);(0,a.useImperativeHandle)(f,()=>h.current);const p=(0,a.useMemo)(()=>new ResizeObserver(y=>{for(const C of y)C.target.clientWidth&&C.target.scrollWidth&&(C.target.scrollWidth>C.target.clientWidth&&v(!0),C.target.scrollWidth<=C.target.clientWidth&&v(!1))}),[]);(0,a.useEffect)(()=>{const{current:y}=h;return y&&p.observe(y),()=>{p.disconnect()}},[v,p]);const s=y=>typeof y=="string"?y:r.renderToStaticMarkup(a.createElement(a.Fragment,null,y)).replace(/(<([^>]+)>)/gi,"");return E?a.createElement(i.u,{ref:h,content:s(d)},c(void 0)):c(h)});g.displayName="TruncatedText";var u=e(85296);const l=a.forwardRef(({element:c="span",variant:d,weight:f,color:E,truncate:v,italic:h,textAlignment:p,children:s,...y},C)=>{const b=(0,o.wW)(m,c,d,E,f,v,h,p),S=D=>(0,a.createElement)(c,{...y,style:void 0,className:b,ref:D},s);return!v||c==="span"?S(void 0):a.createElement(g,{childElement:S,children:s,ref:C})});l.displayName="Text";const m=(c,d,f,E,v,h,p,s)=>(0,n.css)([{margin:0,padding:0,...(0,u.jt)(c,d,f)},f&&{...c.typography[f]},E&&{color:(0,u.Jx)(E,c)},v&&{fontWeight:(0,u.RC)(v,c)},h&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},p&&{fontStyle:"italic"},s&&{textAlign:s}])},85296:(G,A,e)=>{"use strict";e.d(A,{Jx:()=>a,RC:()=>n,jt:()=>o});const n=(r,i)=>{switch(r){case"bold":return i.typography.fontWeightBold;case"medium":return i.typography.fontWeightMedium;case"light":return i.typography.fontWeightLight;case"regular":case void 0:return i.typography.fontWeightRegular}},a=(r,i)=>{switch(r){case"error":return i.colors.error.text;case"success":return i.colors.success.text;case"info":return i.colors.info.text;case"warning":return i.colors.warning.text;default:return r?i.colors.text[r]:void 0}},o=(r,i,g)=>{if(g)return r.typography[g];switch(i){case"span":return;case"h1":return r.typography.h1;case"h2":return r.typography.h2;case"h3":return r.typography.h3;case"h4":return r.typography.h4;case"h5":return r.typography.h5;case"h6":return r.typography.h6;default:return r.typography.body}}},7073:(G,A,e)=>{"use strict";e.d(A,{K:()=>i});var n=e(66681),a=e(85960),o=e(47257),r=e(18151);const i=a.forwardRef(({invalid:u,className:l,...m},c)=>{const d=(0,o.wW)(g,u);return a.createElement("textarea",{...m,className:(0,n.cx)(d.textarea,l),ref:c})}),g=(u,l=!1)=>({textarea:(0,n.cx)((0,r.RK)(u),(0,r.GL)(u),(0,n.css)({display:"block",borderRadius:u.shape.radius.default,padding:`${u.spacing.gridSize/4}px ${u.spacing.gridSize}px`,width:"100%",borderColor:l?u.colors.error.border:u.components.input.borderColor}))});i.displayName="TextArea"},57652:(G,A,e)=>{"use strict";e.d(A,{P:()=>u});var n=e(66681),a=e(85960),o=e(30142),r=e(47257),i=e(18213),g=e(75064);const u=a.memo(({children:m,theme:c="info",placement:d="auto",content:f,title:E,closeButton:v=!0,onClose:h,footer:p,fitContent:s=!1,onOpen:y,show:C})=>{const b=(0,r.wW)(l),S=b[c],D=(0,a.useRef)(null),[M,T]=a.useState(C),{getArrowProps:R,getTooltipProps:O,setTooltipRef:x,setTriggerRef:I,visible:L,update:P,tooltipRef:N,triggerRef:F}=(0,o.O)({visible:C??M,placement:d,interactive:!0,offset:[0,8],trigger:"click",onVisibleChange:j=>{C===void 0&&T(j),j?y?.():h?.()}},{strategy:"fixed"}),U=(0,a.useCallback)(j=>{T(!1),h?.(),j.target instanceof Node&&N?.contains(j.target)&&F?.focus()},[h,N,F]);return(0,a.useEffect)(()=>{if(M){const j=V=>{V.key==="Escape"&&U(V)};return document.addEventListener("keydown",j),()=>{document.removeEventListener("keydown",j)}}},[M,U]),a.createElement(a.Fragment,null,a.cloneElement(m,{ref:I,tabIndex:0,"aria-expanded":L}),L&&a.createElement("div",{"data-testid":"toggletip-content",ref:x,...O({className:(0,n.cx)(S.container,s&&b.fitContent)})},!!E&&a.createElement("div",{className:S.header},E),v&&a.createElement("div",{className:S.headerClose},a.createElement(g.h,{tooltip:"Close",name:"times","data-testid":"toggletip-header-close",onClick:U})),a.createElement("div",{ref:D,...R({className:S.arrow})}),a.createElement("div",{className:S.body},(typeof f=="string"||a.isValidElement(f))&&f,typeof f=="function"&&P&&f({update:P})),!!p&&a.createElement("div",{className:S.footer},p)))});u.displayName="Toggletip";const l=m=>{const c=(0,i.k)(m,m.colors.background.primary,m.colors.border.weak,m.components.tooltip.text,{topBottom:2,rightLeft:2}),d=(0,i.k)(m,m.colors.error.main,m.colors.error.main,m.colors.error.contrastText,{topBottom:2,rightLeft:2});return{info:c,error:d,fitContent:(0,n.css)({maxWidth:"fit-content"})}}},40235:(G,A,e)=>{"use strict";e.d(A,{h:()=>c});var n=e(66681),a=e(85960),o=e(6556),r=e(92369),i=e(47257),g=e(55182),u=e(29165),l=e(97666),m=e(14607);const c=(0,a.forwardRef)(({tooltip:v,icon:h,iconSize:p,className:s,children:y,imgSrc:C,imgAlt:b,fullWidth:S,isOpen:D,narrow:M,variant:T="default",iconOnly:R,"aria-label":O,isHighlighted:x,...I},L)=>{const P=(0,i.wW)(E),N=(0,n.cx)({[P.button]:!0,[P.buttonFullWidth]:S,[P.narrow]:M},P[T],s),F=(0,n.cx)({[P.content]:!0,[P.contentWithIcon]:!!h,[P.contentWithRightIcon]:D!==void 0}),U=a.createElement("button",{ref:L,className:N,"aria-label":d(O,v),"aria-expanded":D,...I},f(h,p),C&&a.createElement("img",{className:P.img,src:C,alt:b??""}),y&&!R&&a.createElement("div",{className:F},y),D===!1&&a.createElement(l.J,{name:"angle-down"}),D===!0&&a.createElement(l.J,{name:"angle-up"}),x&&a.createElement("div",{className:P.highlight}));return v?a.createElement(m.u,{content:v,placement:"bottom"},U):U});c.displayName="ToolbarButton";function d(v,h){return v||(h?r.wl.components.PageToolbar.item(h):void 0)}function f(v,h){return v?(0,o.Mo)(v)?a.createElement(l.J,{name:v,size:`${h||"lg"}`}):v:null}const E=v=>{const h=(0,u.c9)(v,"primary","solid"),p=(0,u.c9)(v,"destructive","solid"),s=(0,n.css)({color:v.colors.text.primary,background:v.colors.secondary.main,"&:hover":{color:v.colors.text.primary,background:v.colors.secondary.shade,border:`1px solid ${v.colors.border.medium}`}});return{button:(0,n.css)({label:"toolbar-button",position:"relative",display:"flex",alignItems:"center",height:v.spacing(v.components.height.md),padding:v.spacing(0,1),borderRadius:v.shape.radius.default,lineHeight:`${v.components.height.md*v.spacing.gridSize-2}px`,fontWeight:v.typography.fontWeightMedium,border:`1px solid ${v.colors.secondary.border}`,whiteSpace:"nowrap",transition:v.transitions.create(["background","box-shadow","border-color","color"],{duration:v.transitions.duration.short}),"&:focus, &:focus-visible":{...(0,g.getFocusStyles)(v),zIndex:1},"&:focus:not(:focus-visible)":(0,g.getMouseFocusStyles)(v),"&:hover":{boxShadow:v.shadows.z1},"&[disabled], &:disabled":{cursor:"not-allowed",opacity:v.colors.action.disabledOpacity,background:v.colors.action.disabledBackground,boxShadow:"none","&:hover":{color:v.colors.text.disabled,background:v.colors.action.disabledBackground,boxShadow:"none"}}}),default:(0,n.css)({color:v.colors.text.secondary,background:"transparent",border:"1px solid transparent","&:hover":{color:v.colors.text.primary,background:v.colors.background.secondary}}),canvas:s,active:(0,n.cx)(s,(0,n.css)({"&::before":{display:"block",content:'" "',position:"absolute",left:0,right:0,height:"2px",bottom:0,borderRadius:v.shape.radius.default,backgroundImage:v.colors.gradients.brandHorizontal}})),primary:(0,n.css)(h),destructive:(0,n.css)(p),narrow:(0,n.css)({padding:v.spacing(0,.5)}),img:(0,n.css)({width:"16px",height:"16px",marginRight:v.spacing(1)}),buttonFullWidth:(0,n.css)({flexGrow:1}),content:(0,n.css)({flexGrow:1}),contentWithIcon:(0,n.css)({display:"none",paddingLeft:v.spacing(1),[`@media ${g.mediaUp(v.v1.breakpoints.md)}`]:{display:"block"}}),contentWithRightIcon:(0,n.css)({paddingRight:v.spacing(.5)}),highlight:(0,n.css)({backgroundColor:v.colors.success.main,borderRadius:v.shape.radius.circle,width:"6px",height:"6px",position:"absolute",top:"-3px",right:"-3px",zIndex:1})}}},19424:(G,A,e)=>{"use strict";e.d(A,{R:()=>m});var n=e(66681),a=e(57529),o=e(89344),r=e(48925),i=e(85960),g=e(47257),u=e(25142),l=e(40235);const m=(0,i.forwardRef)(({alignment:d="left",className:f,children:E,...v},h)=>{const p=i.Children.toArray(E).filter(L=>L!=null),[s,y]=(0,i.useState)(Array(p.length).fill(!1)),C=(0,i.useRef)(null),[b,S]=(0,i.useState)(!1),D=(0,i.useRef)(null),M=(0,i.createRef)(),{overlayProps:T}=(0,r.Ir)({onClose:()=>S(!1),isDismissable:!0,isOpen:b,shouldCloseOnInteractOutside:L=>{const P=(0,u.RN)();return!D.current?.contains(L)&&!P.contains(L)}},M),{dialogProps:R}=(0,a.R)({},M),O=(0,g.l4)(),x=d==="left"?s.indexOf(!1)-1:s.length,I=c(O,x,d);return(0,i.useLayoutEffect)(()=>{const L=new IntersectionObserver(P=>{P.forEach(N=>{if(N.target instanceof HTMLElement&&N.target.parentNode){const F=Array.prototype.indexOf.call(N.target.parentNode.children,N.target);y(U=>{const j=[...U];return j[F]=N.isIntersecting,j})}})},{threshold:1,root:C.current});return C.current&&Array.from(C.current.children).forEach(P=>{P instanceof HTMLElement&&P!==D.current&&L.observe(P)}),()=>L.disconnect()},[E]),i.createElement("div",{ref:C,className:(0,n.cx)(I.container,f),...v},p.map((L,P)=>i.createElement("div",{key:P,style:{order:P,visibility:s[P]?"visible":"hidden"},className:I.childWrapper},L)),s.includes(!1)&&i.createElement("div",{ref:D,className:I.overflowButton},i.createElement(l.h,{variant:b?"active":"default",tooltip:"Show more items",onClick:()=>S(!b),icon:"ellipsis-v",iconOnly:!0,narrow:!0}),b&&i.createElement(o.MT,{contain:!0,autoFocus:!0},i.createElement("div",{className:I.overflowItems,ref:M,...T,...R},p.map((L,P)=>!s[P]&&L)))))});m.displayName="ToolbarButtonRow";const c=(d,f,E)=>({overflowButton:(0,n.css)({order:f}),overflowItems:(0,n.css)({alignItems:"center",backgroundColor:d.colors.background.primary,borderRadius:d.shape.radius.default,boxShadow:d.shadows.z3,display:"flex",flexWrap:"wrap",gap:d.spacing(1),marginTop:d.spacing(1),maxWidth:"80vw",padding:d.spacing(.5,1),position:"absolute",right:0,top:"100%",width:"max-content",zIndex:d.zIndex.sidemenu}),container:(0,n.css)({alignItems:"center",display:"flex",gap:d.spacing(1),justifyContent:E==="left"?"flex-start":"flex-end",minWidth:0,position:"relative"}),childWrapper:(0,n.css)({alignItems:"center",display:"flex",gap:d.spacing(1)})})},51928:(G,A,e)=>{"use strict";e.d(A,{J:()=>l});var n=e(85960),a=e(95354),o=e(59878),r=e(19547),i=e(25142);const g={transitionProperty:"opacity",transitionDuration:"200ms",transitionTimingFunction:"linear",opacity:0},u={exited:{opacity:0},entering:{opacity:0},entered:{opacity:1,transitionDelay:"0s"},exiting:{opacity:0,transitionDelay:"500ms"}};class l extends n.PureComponent{render(){const{content:c,show:d,placement:f,className:E,wrapperClassName:v,renderArrow:h,referenceElement:p,...s}=this.props;return n.createElement(a.dK,null,n.createElement(r.ZP,{in:d,timeout:100,mountOnEnter:!0,unmountOnExit:!0},y=>n.createElement(i.h_,null,n.createElement(o.r,{placement:f,referenceElement:p,modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"eventListeners",options:{scroll:!0,resize:!0}}]},({ref:C,style:b,placement:S,arrowProps:D,update:M})=>n.createElement("div",{ref:C,style:{...b,...g,...u[y]},"data-placement":S,className:`${v}`,...s},n.createElement("div",{className:E},typeof c=="string"&&c,n.isValidElement(c)&&n.cloneElement(c),typeof c=="function"&&c({updatePopperPosition:M}),h&&h({arrowProps:D,placement:S})))))))}}},55135:(G,A,e)=>{"use strict";e.d(A,{D:()=>a});var n=e(85960);class a extends n.Component{constructor(){super(...arguments),this.hideTimeout=null,this.state={show:!1},this.showPopper=()=>{this.hideTimeout&&clearTimeout(this.hideTimeout),this.setState({show:!0})},this.hidePopper=()=>{this.hideTimeout=setTimeout(()=>{this.setState({show:!1})},this.props.hideAfter)}}render(){const{children:r,content:i,placement:g="auto"}=this.props,{show:u}=this.state;return r(this.showPopper,this.hidePopper,{show:u,placement:g,content:i})}}},14607:(G,A,e)=>{"use strict";e.d(A,{u:()=>u});var n=e(85960),a=e(30142),o=e(92369),r=e(47257),i=e(18213),g=e(25142);const u=n.forwardRef(({children:m,theme:c,interactive:d,show:f,placement:E,content:v},h)=>{const[p,s]=(0,n.useState)(f),y=(0,n.useId)();(0,n.useEffect)(()=>{if(p!==!1){const L=P=>{P.key==="Escape"&&s(!1)};return document.addEventListener("keydown",L),()=>{document.removeEventListener("keydown",L)}}else return},[p]);const{getArrowProps:C,getTooltipProps:b,setTooltipRef:S,setTriggerRef:D,visible:M,update:T}=(0,a.O)({visible:f??p,placement:E,interactive:d,delayHide:d?100:0,offset:[0,8],trigger:["hover","focus"],onVisibleChange:s}),R=typeof v=="function";(0,n.useEffect)(()=>{T&&R&&T()},[M,T,R]);const x=(0,r.wW)(l)[c??"info"],I=(0,n.useCallback)(L=>{D(L),typeof h=="function"?h(L):h&&(h.current=L)},[h,D]);return n.createElement(n.Fragment,null,n.cloneElement(m,{ref:I,tabIndex:0,"aria-describedby":M?y:void 0}),M&&n.createElement(g.h_,null,n.createElement("div",{"data-testid":o.wl.components.Tooltip.container,ref:S,id:y,role:"tooltip",...b({className:x.container})},n.createElement("div",{...C({className:x.arrow})}),typeof v=="string"&&v,n.isValidElement(v)&&n.cloneElement(v),R&&T&&v({updatePopperPosition:T}))))});u.displayName="Tooltip";const l=m=>{const c=(0,i.k)(m,m.components.tooltip.background,m.components.tooltip.background,m.components.tooltip.text,{topBottom:.5,rightLeft:1}),d=(0,i.k)(m,m.colors.error.main,m.colors.error.main,m.colors.error.contrastText,{topBottom:.5,rightLeft:1});return{info:c,["info-alt"]:c,error:d}}},61065:(G,A,e)=>{"use strict";e.d(A,{H:()=>o});var n=e(85960);function a(r,i){const g=[];return r.forEach(u=>{g.push(u.start,u.end+1)}),g[0]!==0&&g.unshift(0),g[g.length-1]!==i&&g.push(i),g}const o=r=>{let{highlightParts:i,text:g,highlightClassName:u}=r;if(!i?.length)return null;let l=[],m=a(i,g.length),c=i[0].start===0;for(let d=1;d<m.length;d++){let f=m[d-1],E=m[d];l.push((0,n.createElement)(c?"mark":"span",{key:d-1,className:c?u:void 0},g.substring(f,E))),c=!c}return n.createElement("div",null,l)}},29500:(G,A,e)=>{"use strict";e.d(A,{n:()=>i});var n=e(85960),a=e(1930),o=e(30379);function r(g){return`Custom unit: ${g}`}class i extends n.PureComponent{constructor(){super(...arguments),this.onChange=u=>{this.props.onChange(u.value)}}render(){const{value:u,width:l}=this.props;let m;const d=(0,a.QW)().map(f=>{const E=f.submenu.map(v=>{const h={label:v.text,value:v.value};return v.value===u&&(m=h),h});return{label:f.text,value:f.text,items:E}});return u&&!m&&(m={value:u,label:u}),n.createElement(o.v,{width:l,initialValue:m&&m.label,allowCustomValue:!0,changeOnSelect:!1,formatCreateLabel:r,options:d,placeholder:"Choose",onSelect:this.props.onChange})}}},71679:(G,A,e)=>{"use strict";e.d(A,{q:()=>i});var n=e(66681),a=e(85960),o=e(47257),r=e(79918);const i=({src:u,alt:l,width:m,height:c})=>{const d=(0,o.wW)(g,m,c);return a.createElement("img",{className:d.image,src:u,alt:l})},g=(u,l=3,m=3)=>({image:(0,n.css)([(0,r.U)(u,l,c=>({width:u.spacing(c)})),(0,r.U)(u,m,c=>({height:u.spacing(c)})),{borderRadius:u.shape.radius.circle}])})},30002:(G,A,e)=>{"use strict";e.d(A,{t:()=>l});var n=e(66681),a=e(85960),o=e(85745),r=e(47257),i=e(14607);const g=d=>{const E=(0,o.CQ)(d).diff((0,o.CQ)(),"hours",!1);return`Active last ${(Math.floor(-E/24)+1)*24}h`},u=d=>{if(!d)return"";const[f,E]=d.split(" ");return`${f?.[0]??""}${E?.[0]??""}`.toUpperCase()},l=({userView:d,className:f,children:E,onClick:v,showTooltip:h=!0})=>{const{user:p,lastActiveAt:s}=d,y=(0,o.CQ)(s).diff((0,o.CQ)(),"minutes",!0)>=-15,C=(0,r.l4)(),b=(0,a.useMemo)(()=>c(C,y),[C,y]),S=a.createElement("button",{type:"button",onClick:v,className:(0,n.cx)(b.container,v&&b.pointer,f),"aria-label":`${p.name} icon`},E?a.createElement("div",{className:(0,n.cx)(b.content,b.textContent)},E):p.avatarUrl?a.createElement("img",{className:b.content,src:p.avatarUrl,alt:`${p.name} avatar`}):a.createElement("div",{className:(0,n.cx)(b.content,b.textContent)},u(p.name)));if(h){const D=a.createElement("div",{className:b.tooltipContainer},a.createElement("div",{className:b.tooltipName},p.name),a.createElement("div",{className:b.tooltipDate},y?a.createElement("div",{className:b.dotContainer},a.createElement("span",null,"Active last 15m"),a.createElement("span",{className:b.dot})):g(s)));return a.createElement(i.u,{content:D},S)}else return S},m=d=>`0 0 0 1px ${d}`,c=(d,f)=>{const E=f?d.colors.primary.main:d.colors.border.medium,v=f?d.colors.primary.text:d.colors.border.strong;return{container:(0,n.css)({padding:0,width:"30px",height:"30px",background:"none",border:"none",borderRadius:d.shape.radius.circle,"& > *":{borderRadius:d.shape.radius.circle}}),content:(0,n.css)({lineHeight:"24px",maxWidth:"100%",border:`3px ${d.colors.background.primary} solid`,boxShadow:m(E),backgroundClip:"padding-box","&:hover":{boxShadow:m(v)}}),textContent:(0,n.css)({background:d.colors.background.primary,padding:0,color:d.colors.text.secondary,textAlign:"center",fontSize:d.typography.size.sm,"&:focus":{boxShadow:m(E)}}),tooltipContainer:(0,n.css)({textAlign:"center",padding:d.spacing(0,1)}),tooltipName:(0,n.css)({fontWeight:d.typography.fontWeightBold}),tooltipDate:(0,n.css)({fontWeight:d.typography.fontWeightRegular}),dotContainer:(0,n.css)({display:"flex",alignItems:"center"}),dot:(0,n.css)({height:"6px",width:"6px",backgroundColor:d.colors.primary.main,borderRadius:d.shape.radius.circle,display:"inline-block",marginLeft:d.spacing(1)}),pointer:(0,n.css)({cursor:"pointer"})}}},66008:(G,A,e)=>{"use strict";e.d(A,{b:()=>g});var n=e(85960),a=e(92369),o=e(47257),r=e(29165),i=e(27436);function g({"aria-label":u,label:l,icon:m,options:c,onChange:d,variant:f,minWidth:E=16,size:v="sm",isFullWidth:h=!0,menuPlacement:p,fill:s,buttonCss:y}){const[C,b]=(0,n.useState)(!1),S=(0,o.l4)();return n.createElement(n.Fragment,null,!C&&n.createElement(r.zx,{size:v||"sm",className:y,icon:m||"plus",onClick:()=>b(!0),variant:f,fill:s,fullWidth:h,"aria-label":a.wl.components.ValuePicker.button(u??l)},l),C&&n.createElement("span",{style:{minWidth:S.spacing(E),flexGrow:h?1:void 0}},n.createElement(i.Ph,{placeholder:l,options:c,"aria-label":a.wl.components.ValuePicker.select(u??l),isOpen:!0,onCloseMenu:()=>b(!1),autoFocus:!0,onChange:D=>{b(!1),d(D)},menuPlacement:p})))}},29627:(G,A,e)=>{"use strict";e.d(A,{AY:()=>u});var n=e(66681),a=e(85960),o=e(66137),r=e(47257),i=e(55182),g=e(50263);const u=({width:c,height:d,legend:f,children:E})=>{const v=(0,r.l4)(),h=(0,r.wW)(l),p={display:"flex",width:`${c}px`,height:`${d}px`},[s,y]=(0,o.Z)();if(!f)return a.createElement(a.Fragment,null,a.createElement("div",{style:p,className:h.viz},E(c,d)));let{placement:C,maxHeight:b="35%",maxWidth:S="60%"}=f.props;document.body.clientWidth<v.breakpoints.values.lg&&(C="bottom");let D=null;const M={};switch(C){case"bottom":p.flexDirection="column",M.maxHeight=b,y.height&&(D={width:c,height:d-y.height});break;case"right":p.flexDirection="row",M.maxWidth=S,y.width&&(D={width:c-y.width,height:d}),f.props.width&&(M.width=f.props.width,D={width:c-f.props.width,height:d});break}return D?.width===0&&(D.width=c),D?.height===0&&(D.height=d),a.createElement("div",{style:p},a.createElement("div",{className:h.viz},D&&E(D.width,D.height)),a.createElement("div",{style:M,ref:s},a.createElement(g.$,{hideHorizontalTrack:!0},f)))},l=c=>({viz:(0,n.css)({flexGrow:2,borderRadius:c.shape.radius.default,"&:focus-visible":(0,i.getFocusStyles)(c)})}),m=({children:c})=>a.createElement(a.Fragment,null,c);u.Legend=m},54467:(G,A,e)=>{"use strict";e.d(A,{F:()=>i});var n=e(66681),a=e(85960),o=e(73859),r=e(47257);const i=a.memo(a.forwardRef(({color:u,className:l,gradient:m,...c},d)=>{const f=(0,r.l4)(),E=(0,r.wW)(g);let v;if(m){const p=o.WO.get(m).getColors?.(f);p?.length?v=`linear-gradient(90deg, ${p.join(", ")})`:v=f.visualization.getColorByName("")}else v=u;const h={background:v,width:"14px",height:"4px",borderRadius:f.shape.radius.pill,display:"inline-block",marginRight:"8px"};return a.createElement("div",{"data-testid":"series-icon",ref:d,className:(0,n.cx)(l,E.forcedColors),style:h,...c})})),g=()=>({forcedColors:(0,n.css)({"@media (forced-colors: active)":{forcedColorAdjust:"none"}})});i.displayName="SeriesIcon"},33012:(G,A,e)=>{"use strict";e.d(A,{l:()=>R});var n=e(85960),a=e(43471),o=e(1713),r=e(76738),i=e(59637),g=e(66681),u=e(47257),l=e(47024),m=e(62102),c=e(81283);const d=({items:O,itemRenderer:x,onLabelMouseOver:I,onLabelMouseOut:L,onLabelClick:P,placement:N,className:F,readonly:U})=>{const j=(0,u.wW)(f);x||(x=_=>n.createElement(c.e,{item:_,onLabelClick:P,onLabelMouseOver:I,onLabelMouseOut:L,readonly:U}));const V=_=>`${_.getItemKey?_.getItemKey():_.label}`;switch(N){case"right":{const _=(H,z)=>n.createElement("span",{className:j.itemRight},x(H,z));return n.createElement("div",{className:(0,g.cx)(j.rightWrapper,F)},n.createElement(m.a,{items:O,renderItem:_,getItemKey:V}))}case"bottom":default:{const _=O.filter(K=>K.yAxis===1),H=O.filter(K=>K.yAxis!==1),z=(K,Y)=>n.createElement("span",{className:j.itemBottom},x(K,Y));return n.createElement("div",{className:(0,g.cx)(j.bottomWrapper,F)},_.length>0&&n.createElement("div",{className:j.section},n.createElement(l.Y,{items:_,renderItem:z,getItemKey:V})),H.length>0&&n.createElement("div",{className:(0,g.cx)(j.section,j.sectionRight)},n.createElement(l.Y,{items:H,renderItem:z,getItemKey:V})))}}};d.displayName="VizLegendList";const f=O=>{const x=(0,g.css)({paddingRight:"10px",display:"flex",fontSize:O.typography.bodySmall.fontSize,whiteSpace:"nowrap"});return{itemBottom:x,itemRight:(0,g.cx)(x,(0,g.css)({marginBottom:O.spacing(.5)})),rightWrapper:(0,g.css)({paddingLeft:O.spacing(.5)}),bottomWrapper:(0,g.css)({display:"flex",flexWrap:"wrap",justifyContent:"space-between",width:"100%",paddingLeft:O.spacing(.5),gap:"15px 25px"}),section:(0,g.css)({display:"flex"}),sectionRight:(0,g.css)({justifyContent:"flex-end",flexGrow:1,flexBasis:"50%"})}};var E=e(97666),v=e(1930),h=e(55182),p=e(4758);const s=({item:O,onLabelClick:x,onLabelMouseOver:I,onLabelMouseOut:L,className:P,readonly:N})=>{const F=(0,u.wW)(y),U=(0,n.useCallback)(_=>{I&&I(O,_)},[O,I]),j=(0,n.useCallback)(_=>{L&&L(O,_)},[O,L]),V=(0,n.useCallback)(_=>{x&&x(O,_)},[O,x]);return n.createElement("tr",{className:(0,g.cx)(F.row,P)},n.createElement("td",null,n.createElement("span",{className:F.itemWrapper},n.createElement(p.i,{color:O.color,seriesName:O.label,readonly:N}),n.createElement("button",{disabled:N,type:"button",title:O.label,onBlur:j,onFocus:U,onMouseOver:U,onMouseOut:j,onClick:N?void 0:V,className:(0,g.cx)(F.label,O.disabled&&F.labelDisabled)},O.label," ",O.yAxis===2&&n.createElement("span",{className:F.yAxisLabel},"(right y-axis)")))),O.getDisplayValues&&O.getDisplayValues().map((_,H)=>n.createElement("td",{className:F.value,key:`${_.title}-${H}`},(0,v.zc)(_))))};s.displayName="LegendTableItem";const y=O=>{const x=h.hoverColor(O.colors.background.primary,O);return{row:(0,g.css)({label:"LegendRow",fontSize:O.v1.typography.size.sm,borderBottom:`1px solid ${O.colors.border.weak}`,td:{padding:O.spacing(.25,1),whiteSpace:"nowrap"},"&:hover":{background:x}}),label:(0,g.css)({label:"LegendLabel",whiteSpace:"nowrap",background:"none",border:"none",fontSize:"inherit",padding:0,maxWidth:"600px",textOverflow:"ellipsis",overflow:"hidden"}),labelDisabled:(0,g.css)({label:"LegendLabelDisabled",color:O.colors.text.disabled}),itemWrapper:(0,g.css)({display:"flex",whiteSpace:"nowrap",alignItems:"center"}),value:(0,g.css)({textAlign:"right"}),yAxisLabel:(0,g.css)({color:O.colors.text.secondary})}},C="Name",b=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}).compare,S=({items:O,sortBy:x,sortDesc:I,itemRenderer:L,className:P,onToggleSort:N,onLabelClick:F,onLabelMouseOver:U,onLabelMouseOut:j,readonly:V,isSortable:_})=>{const H=(0,u.wW)(D),z={};_&&(z[C]="");for(const K of O)if(K.getDisplayValues)for(const Y of K.getDisplayValues())z[Y.title??"?"]=Y.description??"";if(x!=null){let K=new Map;O.forEach(k=>{if(x!==C&&k.getDisplayValues){const q=k.getDisplayValues().find(te=>te.title===x),X=q==null||Number.isNaN(q.numeric)?-1/0:q.numeric;K.set(k,X)}});let Y=I?-1:1;x===C?O.sort((k,q)=>Y*b(k.label,q.label)):O.sort((k,q)=>{const X=K.get(k)??0,te=K.get(q)??0;return Y*(X-te)})}return L||(L=(K,Y)=>n.createElement(s,{key:`${K.label}-${Y}`,item:K,onLabelClick:F,onLabelMouseOver:U,onLabelMouseOut:j,readonly:V})),n.createElement("table",{className:(0,g.cx)(H.table,P)},n.createElement("thead",null,n.createElement("tr",null,!_&&n.createElement("th",null),Object.keys(z).map(K=>n.createElement("th",{title:z[K],key:K,className:(0,g.cx)(H.header,N&&H.headerSortable,_&&H.nameHeader,{[H.withIcon]:x===K}),onClick:()=>{N&&N(K)}},K,x===K&&n.createElement(E.J,{size:"xs",name:I?"angle-down":"angle-up"}))))),n.createElement("tbody",null,O.map(L)))},D=O=>({table:(0,g.css)({width:"100%","th:first-child":{width:"100%",borderBottom:`1px solid ${O.colors.border.weak}`}}),header:(0,g.css)({color:O.colors.primary.text,fontWeight:O.typography.fontWeightMedium,borderBottom:`1px solid ${O.colors.border.weak}`,padding:O.spacing(.25,1,.25,1),fontSize:O.typography.bodySmall.fontSize,textAlign:"right",whiteSpace:"nowrap"}),nameHeader:(0,g.css)({textAlign:"left",paddingLeft:"30px"}),withIcon:(0,g.css)({paddingRight:"4px"}),headerSortable:(0,g.css)({cursor:"pointer"})});var M=e(39836);function T(O){return O.ctrlKey||O.metaKey||O.shiftKey?i.R.AppendToSelection:i.R.ToggleSelection}function R({items:O,displayMode:x,sortBy:I,seriesVisibilityChangeBehavior:L=M.Y.Isolate,sortDesc:P,onLabelClick:N,onToggleSort:F,placement:U,className:j,itemRenderer:V,readonly:_,isSortable:H}){const{eventBus:z,onToggleSeriesVisibility:K,onToggleLegendSort:Y}=(0,r.R9)(),k=(0,n.useCallback)((te,se)=>{z?.publish({type:a.es.type,payload:{raw:se,x:0,y:0,dataId:te.label}})},[z]),q=(0,n.useCallback)((te,se)=>{z?.publish({type:a.xH.type,payload:{raw:se,x:0,y:0,dataId:te.label}})},[z]),X=(0,n.useCallback)((te,se)=>{N&&N(te,se),K&&K(te.label,L===M.Y.Hide?i.R.AppendToSelection:T(se))},[K,N,L]);switch(x){case o.jK.Table:return n.createElement(S,{className:j,items:O,placement:U,sortBy:I,sortDesc:P,onLabelClick:X,onToggleSort:F||Y,onLabelMouseOver:k,onLabelMouseOut:q,itemRenderer:V,readonly:_,isSortable:H});case o.jK.List:return n.createElement(d,{className:j,items:O,placement:U,onLabelMouseOver:k,onLabelMouseOut:q,onLabelClick:X,itemRenderer:V,readonly:_});default:return null}}R.displayName="VizLegend"},81283:(G,A,e)=>{"use strict";e.d(A,{e:()=>d});var n=e(66681),a=e(85960),o=e(92369),r=e(47257),i=e(4758),g=e(56375),u=e(1930),l=e(47024);const m=({stats:E})=>{const v=(0,r.wW)(c);return E.length===0?null:a.createElement(l.Y,{className:v.list,items:E,renderItem:h=>a.createElement("div",{className:v.item,title:h.description},h.title&&`${(0,g.capitalize)(h.title)}:`," ",(0,u.zc)(h))})},c=()=>({list:(0,n.css)({flexGrow:1,textAlign:"right"}),item:(0,n.css)({marginLeft:"8px"})});m.displayName="VizLegendStatsList";const d=({item:E,onLabelClick:v,onLabelMouseOver:h,onLabelMouseOut:p,className:s,readonly:y})=>{const C=(0,r.wW)(f),b=(0,a.useCallback)(M=>{h&&h(E,M)},[E,h]),S=(0,a.useCallback)(M=>{p&&p(E,M)},[E,p]),D=(0,a.useCallback)(M=>{v&&v(E,M)},[E,v]);return a.createElement("div",{className:(0,n.cx)(C.itemWrapper,E.disabled&&C.itemDisabled,s),"aria-label":o.wl.components.VizLegend.seriesName(E.label)},a.createElement(i.i,{seriesName:E.label,color:E.color,gradient:E.gradient,readonly:y}),a.createElement("button",{disabled:y,type:"button",onBlur:S,onFocus:b,onMouseOver:b,onMouseOut:S,onClick:D,className:C.label},E.label),E.getDisplayValues&&a.createElement(m,{stats:E.getDisplayValues()}))};d.displayName="VizLegendListItem";const f=E=>({label:(0,n.css)({label:"LegendLabel",whiteSpace:"nowrap",background:"none",border:"none",fontSize:"inherit",padding:0,userSelect:"text"}),itemDisabled:(0,n.css)({label:"LegendLabelDisabled",color:E.colors.text.disabled}),itemWrapper:(0,n.css)({label:"LegendItemWrapper",display:"flex",whiteSpace:"nowrap",alignItems:"center",flexGrow:1}),value:(0,n.css)({textAlign:"right"}),yAxisLabel:(0,n.css)({color:E.v1.palette.gray2})})},4758:(G,A,e)=>{"use strict";e.d(A,{i:()=>i});var n=e(85960),a=e(38276),o=e(76738),r=e(54467);const i=n.memo(({seriesName:g,color:u,gradient:l,readonly:m})=>{const{onSeriesColorChange:c}=(0,o.R9)(),d=(0,n.useCallback)(f=>c(g,f),[g,c]);return g&&c&&u&&!m?n.createElement(a.sp,{color:u,onChange:d,enableNamedColors:!0},({ref:f,showColorPicker:E,hideColorPicker:v})=>n.createElement(r.F,{color:u,className:"pointer",ref:f,onClick:E,onMouseLeave:v})):n.createElement(r.F,{color:u,gradient:l})});i.displayName="VizLegendSeriesIcon"},39836:(G,A,e)=>{"use strict";e.d(A,{Y:()=>n});var n=(a=>(a[a.Isolate=0]="Isolate",a[a.Hide=1]="Hide",a))(n||{})},42273:(G,A,e)=>{"use strict";e.d(A,{Q:()=>g});var n=e(56375),a=e(85960),o=e(11795);const r=(l,m,c,d)=>{const f=i(l,m,d),E=i(m,l,d),v=Math.max(f,E);let h=Math.floor(l/v),p=Math.ceil(d/h);h=Math.ceil(d/p);const s=h-(h*p-d),y=l/s-c+c/s;return{width:l/h-c+c/h,height:m/p-c+c/p,widthOnLastRow:y,xCount:h,yCount:p}};function i(l,m,c){const d=Math.ceil(Math.sqrt(c*l/m));return Math.floor(d*m/l)*d<c?m/Math.ceil(d*m/l):l/d}class g extends a.PureComponent{constructor(m){super(m),this.state={values:m.getValues()}}componentDidUpdate(m){const{renderCounter:c,source:d}=this.props;(c!==m.renderCounter||d!==m.source)&&this.setState({values:this.props.getValues()})}getOrientation(){const{orientation:m,width:c,height:d}=this.props;return m===o.wm.Auto?c>d?o.wm.Vertical:o.wm.Horizontal:m}renderGrid(){const{renderValue:m,height:c,width:d,itemSpacing:f,getAlignmentFactors:E,orientation:v}=this.props,{values:h}=this.state,p=r(d,c,f,h.length),s=E?E(h,p.width,p.height):{};let y=0,C=0,b=[];for(let S=0;S<h.length;S++){const D=h[S],T=C===p.yCount-1?p.widthOnLastRow:p.width,R=p.height,O=y*T+f*y,x=C*R+f*C,I={position:"absolute",left:O,top:x,width:`${T}px`,height:`${R}px`};b.push(a.createElement("div",{key:S,style:I},m({value:D,width:T,height:R,alignmentFactors:s,orientation:v,count:h.length}))),y++,y===p.xCount&&(y=0,C++)}return a.createElement("div",{style:{position:"relative"}},b)}render(){const{renderValue:m,height:c,width:d,itemSpacing:f,getAlignmentFactors:E,autoGrid:v,orientation:h,maxVizHeight:p,minVizWidth:s,minVizHeight:y}=this.props,{values:C}=this.state;if(v&&h===o.wm.Auto)return this.renderGrid();const b={display:"flex"},S={display:"flex",overflow:`${s?"auto":"hidden"} ${y?"auto":"hidden"}`};let D=c,M=d;const T=this.getOrientation();switch(T){case o.wm.Horizontal:const O=(c+f)/C.length-f;S.flexDirection="column",S.height=`${c}px`,b.marginBottom=`${f}px`,M=d,D=(0,n.clamp)(O,y??0,p??O);break;case o.wm.Vertical:S.flexDirection="row",S.justifyContent="space-between",b.marginRight=`${f}px`,D=c,M=Math.max(d/C.length-f+f/C.length,s??0)}b.width=`${M}px`,b.height=`${D}px`;const R=E?E(C,M,D):{};return a.createElement("div",{style:S},C.map((O,x)=>a.createElement("div",{key:x,style:u(b,x,C.length)},m({value:O,width:M,height:D,alignmentFactors:R,orientation:T,count:C.length}))))}}g.defaultProps={itemSpacing:8};function u(l,m,c){return m===c-1?{...l,marginRight:0,marginBottom:0}:l}},68847:(G,A,e)=>{"use strict";e.d(A,{V:()=>g,c:()=>u});var n=e(66681),a=e(85960),o=e(47257),r=e(54467);const i=l=>({icon:(0,n.css)({marginRight:l.spacing(1),verticalAlign:"middle"}),seriesTable:(0,n.css)({display:"table"}),seriesTableRow:(0,n.css)({display:"table-row",fontSize:l.typography.bodySmall.fontSize}),seriesTableCell:(0,n.css)({display:"table-cell"}),label:(0,n.css)({wordBreak:"break-all"}),value:(0,n.css)({paddingLeft:l.spacing(2),textAlign:"right"}),activeSeries:(0,n.css)({fontWeight:l.typography.fontWeightBold,color:l.colors.text.maxContrast}),timestamp:(0,n.css)({fontWeight:l.typography.fontWeightBold,fontSize:l.typography.bodySmall.fontSize})}),g=({color:l,label:m,value:c,isActive:d})=>{const f=(0,o.wW)(i);return a.createElement("div",{"data-testid":"SeriesTableRow",className:(0,n.cx)(f.seriesTableRow,d&&f.activeSeries)},l&&a.createElement("div",{className:f.seriesTableCell},a.createElement(r.F,{color:l,className:f.icon})),m&&a.createElement("div",{className:(0,n.cx)(f.seriesTableCell,f.label)},m),c&&a.createElement("div",{className:(0,n.cx)(f.seriesTableCell,f.value)},c))},u=({timestamp:l,series:m})=>{const c=(0,o.wW)(i);return a.createElement(a.Fragment,null,l&&a.createElement("div",{className:c.timestamp,"aria-label":"Timestamp"},l),m.map((d,f)=>a.createElement(g,{isActive:d.isActive,label:d.label,color:d.color,value:d.value,key:`${d.label}-${f}`})))}},67317:(G,A,e)=>{"use strict";e.d(A,{I:()=>g});var n=e(66681),a=e(85960),o=e(47257),r=e(25142),i=e(10642);const g=({content:l,position:m,offset:c})=>{const d=(0,o.wW)(u);return m?a.createElement(r.h_,{className:d.portal},a.createElement(i.S,{position:m,offset:c||{x:0,y:0}},l)):null};g.displayName="VizTooltip";const u=()=>({portal:(0,n.css)({position:"absolute",top:0,left:0,pointerEvents:"none",width:"100%",height:"100%"})})},10642:(G,A,e)=>{"use strict";e.d(A,{S:()=>u});var n=e(66681),a=e(85960),o=e(62223),r=e(47257),i=e(55182),g=e(60726);const u=({position:{x:m,y:c},offset:{x:d,y:f},children:E,allowPointerEvents:v=!1,className:h,...p})=>{const s=(0,a.useRef)(null),[y,C]=(0,a.useState)({width:0,height:0}),{width:b,height:S}=(0,o.Z)(),[D,M]=(0,a.useState)({x:m+d,y:c+f}),T=(0,a.useMemo)(()=>new ResizeObserver(O=>{for(let x of O){const I=Math.floor(x.contentRect.width+16),L=Math.floor(x.contentRect.height+2*8);(y.width!==I||y.height!==L)&&C({width:Math.min(I,b),height:Math.min(L,S)})}}),[y,b,S]);(0,a.useLayoutEffect)(()=>(s.current&&T.observe(s.current),()=>{T.disconnect()}),[T]),(0,a.useLayoutEffect)(()=>{if(s&&s.current){const{x:O,y:x}=(0,g.H)(m,c,y.width,y.height,d,f,b,S);M({x:O,y:x})}},[b,S,m,d,c,f,y]);const R=(0,r.wW)(l);return a.createElement("div",{ref:s,style:{position:"fixed",left:0,pointerEvents:v?"auto":"none",top:0,transform:`translate(${D.x}px, ${D.y}px)`,transition:"transform ease-out 0.1s"},"aria-live":"polite","aria-atomic":"true",...p,className:(0,n.cx)(R.wrapper,h)},E)};u.displayName="VizTooltipContainer";const l=m=>({wrapper:(0,n.css)((0,i.getTooltipContainerStyles)(m))})},27110:(G,A,e)=>{"use strict";e.d(A,{X:()=>i});var n=e(66681),a=e(85960),o=e(47257),r=e(62184);const i=({contentLabelValue:u,customContent:l})=>{const m=(0,o.wW)(g);return a.createElement("div",{className:m.wrapper},a.createElement("div",null,u?.map((c,d)=>{const{label:f,value:E,color:v,colorIndicator:h,colorPlacement:p,isActive:s}=c;return a.createElement(r.F,{key:d,label:f,value:E,color:v,colorIndicator:h,colorPlacement:p,colorFirst:!1,isActive:s,justify:"space-between"})})),l&&a.createElement("div",{className:m.customContentPadding},l))},g=u=>({wrapper:(0,n.css)({display:"flex",flexDirection:"column",flex:1,gap:4,borderTop:`1px solid ${u.colors.border.medium}`,padding:u.spacing(1)}),customContentPadding:(0,n.css)({padding:`${u.spacing(1)} 0`})})},1164:(G,A,e)=>{"use strict";e.d(A,{c:()=>l});var n=e(66681),a=e(85960),o=e(74042),r=e(77937),i=e(29165),g=e(47257);const u="add-annotation-button",l=({dataLinks:c,canAnnotate:d})=>{const f=(0,g.wW)(m),E=()=>{const v={variant:"secondary"};return a.createElement(o.Lh,null,c.map((h,p)=>a.createElement(r.k,{key:p,link:h,buttonProps:v})))};return a.createElement("div",{className:f.wrapper},c.length>0&&a.createElement("div",{className:f.dataLinks},E()),d&&a.createElement("div",{className:f.addAnnotations},a.createElement(i.zx,{icon:"comment-alt",variant:"secondary",size:"sm",id:u},"Add annotation")))},m=c=>({wrapper:(0,n.css)({display:"flex",flexDirection:"column",flex:1,padding:c.spacing(0)}),dataLinks:(0,n.css)({overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",maskImage:"linear-gradient(90deg, rgba(0, 0, 0, 1) 80%, transparent)",borderTop:`1px solid ${c.colors.border.medium}`,padding:c.spacing(1)}),addAnnotations:(0,n.css)({borderTop:`1px solid ${c.colors.border.medium}`,padding:c.spacing(1)})})},49404:(G,A,e)=>{"use strict";e.d(A,{r:()=>u});var n=e(66681),a=e(85960),o=e(47257),r=e(62184);const i=({headerLabel:m})=>{const{label:c,value:d,color:f,colorIndicator:E}=m;return a.createElement(r.F,{label:c,value:d,color:f,colorIndicator:E,marginRight:"22px"})},g=({keyValuePairs:m})=>a.createElement(a.Fragment,null,m?.map((c,d)=>a.createElement(r.F,{key:d,label:c.label,value:c.value,color:c.color,colorIndicator:c.colorIndicator,colorFirst:!1,justify:"space-between"}))),u=({headerLabel:m,keyValuePairs:c,customValueDisplay:d})=>{const f=(0,o.wW)(l);return a.createElement("div",{className:f.wrapper},a.createElement(i,{headerLabel:m}),d||a.createElement(g,{keyValuePairs:c}))},l=m=>({wrapper:(0,n.css)({display:"flex",flexDirection:"column",flex:1,padding:m.spacing(1)})})},62184:(G,A,e)=>{"use strict";e.d(A,{F:()=>m});var n=e(66681),a=e(85960),o=e(47257),r=e(14607),i=e(1122),g=e(60726);const u=({color:d,colorIndicator:f=i.F.value})=>{const E=(0,o.wW)(l);return a.createElement("span",{style:{backgroundColor:d},className:(0,n.cx)(E.colorIndicator,(0,g.L)(f,E))})},l=d=>({colorIndicator:(0,n.css)({marginRight:d.spacing(.5)}),series:(0,n.css)({width:"14px",height:"4px",borderRadius:d.shape.radius.pill,minWidth:"14px"}),value:(0,n.css)({width:"12px",height:"12px",borderRadius:d.shape.radius.default,fontWeight:500,minWidth:"12px"}),hexagon:(0,n.css)({}),pie_1_4:(0,n.css)({}),pie_2_4:(0,n.css)({}),pie_3_4:(0,n.css)({}),marker_sm:(0,n.css)({width:"4px",height:"4px",borderRadius:d.shape.radius.circle,minWidth:"4px"}),marker_md:(0,n.css)({width:"8px",height:"8px",borderRadius:d.shape.radius.circle,minWidth:"8px"}),marker_lg:(0,n.css)({width:"12px",height:"12px",borderRadius:d.shape.radius.circle,minWidth:"12px"})}),m=({label:d,value:f,color:E,colorIndicator:v,colorPlacement:h=i.Z.leading,justify:p="flex-start",colorFirst:s=!0,isActive:y=!1,marginRight:C="0px"})=>{const b=(0,o.wW)(c,p,C),[S,D]=(0,a.useState)(!1),[M,T]=(0,a.useState)(!1),R=L=>{L.currentTarget.offsetWidth<L.currentTarget.scrollWidth&&D(!0)},O=()=>D(!1),x=L=>{L.currentTarget.offsetWidth<L.currentTarget.scrollWidth&&T(!0)},I=()=>T(!1);return a.createElement("div",{className:b.contentWrapper},(E||d)&&a.createElement("div",{className:b.valueWrapper},E&&s&&a.createElement(u,{color:E,colorIndicator:v}),a.createElement(r.u,{content:d,interactive:!1,show:S},a.createElement("div",{className:(0,n.cx)(b.label,y&&b.activeSeries),onMouseEnter:R,onMouseLeave:O},d))),a.createElement("div",{className:b.valueWrapper},E&&!s&&h===i.Z.leading&&a.createElement(u,{color:E,colorIndicator:v}),a.createElement(r.u,{content:f?f.toString():"",interactive:!1,show:M},a.createElement("div",{className:(0,n.cx)(b.value,y),onMouseEnter:x,onMouseLeave:I},f)),E&&!s&&h===i.Z.trailing&&a.createElement(a.Fragment,null,"\xA0",a.createElement(u,{color:E,colorIndicator:v}))))},c=(d,f,E)=>({wrapper:(0,n.css)({display:"flex",flexDirection:"column",flex:1,gap:4,borderTop:`1px solid ${d.colors.border.medium}`,padding:d.spacing(1)}),contentWrapper:(0,n.css)({display:"flex",alignItems:"center",justifyContent:f,flexWrap:"wrap",marginRight:E}),customContentPadding:(0,n.css)({padding:`${d.spacing(1)} 0`}),label:(0,n.css)({color:d.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:d.spacing(.5)}),value:(0,n.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),valueWrapper:(0,n.css)({display:"flex",alignItems:"center",minWidth:0}),activeSeries:(0,n.css)({fontWeight:d.typography.fontWeightBold,color:d.colors.text.maxContrast})})},1122:(G,A,e)=>{"use strict";e.d(A,{F:()=>n,Z:()=>a});var n=(o=>(o.series="series",o.value="value",o.hexagon="hexagon",o.pie_1_4="pie_1_4",o.pie_2_4="pie_2_4",o.pie_3_4="pie_3_4",o.marker_sm="marker_sm",o.marker_md="marker_md",o.marker_lg="marker_lg",o))(n||{}),a=(o=>(o.hidden="hidden",o.leading="leading",o.trailing="trailing",o))(a||{})},60726:(G,A,e)=>{"use strict";e.d(A,{H:()=>a,L:()=>o});var n=e(1122);const a=(r=0,i=0,g=0,u=0,l=0,m=0,c=0,d=0)=>{let f=r,E=i;const v=Math.max(r+l+g-(c-l),0),h=Math.abs(Math.min(r-l-g-l,0)),p=v>0,s=h>0,y=Math.max(i+m+u-(d-m),0),C=Math.abs(Math.min(i-m-u-m,0)),b=y>0,S=C>0;return p&&s?f=v>h?l:c-l-g:p?f=r-l-g:f=r+l,b&&S?E=y>C?m:d-m-u:b?E=i-m-u:E=i+m,{x:f,y:E}},o=(r,i)=>{switch(r){case n.F.value:return i.value;case n.F.series:return i.series;case n.F.hexagon:return i.hexagon;case n.F.pie_1_4:return i.pie_1_4;case n.F.pie_2_4:return i.pie_2_4;case n.F.pie_3_4:return i.pie_3_4;case n.F.marker_sm:return i.marker_sm;case n.F.marker_md:return i.marker_md;case n.F.marker_lg:return i.marker_lg;default:return i.value}}},85810:(G,A,e)=>{"use strict";e.r(A),e.d(A,{Alert:()=>ze.b,AlertingSettings:()=>en.O,AsyncMultiSelect:()=>sr.M8,AsyncSelect:()=>sr.qb,AsyncVirtualizedSelect:()=>sr.gY,AutoSaveField:()=>X.h,AutoSizeInput:()=>is.H,Avatar:()=>sn.q,Badge:()=>oo.C,BarGauge:()=>Je.xf,BarGaugeDisplayMode:()=>jn.QH,BigValue:()=>qe.w6,BigValueColorMode:()=>qe.pc,BigValueGraphMode:()=>qe.IG,BigValueJustifyMode:()=>qe.ap,BigValueTextMode:()=>qe.jG,Box:()=>qa.x,BrowserLabel:()=>cs._,Button:()=>vn.zx,ButtonCascader:()=>S.O,ButtonGroup:()=>fa.h,ButtonSelect:()=>xt.d,CallToActionCard:()=>ut._,Card:()=>io.Z,CardContainer:()=>Uo._,Cascader:()=>b.v,CertificationKey:()=>on.W,Checkbox:()=>Mt.X,ClickOutsideWrapper:()=>yt.L,ClipboardButton:()=>C.m,CodeEditor:()=>oe.p,CodeEditorSuggestionItemKind:()=>me.k,CollapsableSection:()=>et.s,Collapse:()=>$e.U,ColorPicker:()=>R.zH,ColorPickerInput:()=>O.T,ConfirmButton:()=>c.p,ConfirmModal:()=>fe.s,Container:()=>Do.W2,ContextMenu:()=>pt.x,ControlledCollapse:()=>$e.y,Counter:()=>Ne.A,CustomHeadersSettings:()=>Nt.H,CustomScrollbar:()=>s.$,DataLinkButton:()=>tt.k,DataLinkInput:()=>Zt.v,DataLinksContextMenu:()=>yn.V,DataLinksInlineEditor:()=>It.d,DataSourceHttpSettings:()=>Ea.E,DatePicker:()=>H.M,DatePickerWithInput:()=>z.d,DateTimePicker:()=>K.x,DeleteButton:()=>d.m,Divider:()=>Bn.i,Drawer:()=>Pt.d,Dropdown:()=>St.L,EmptySearchResult:()=>I.K,ErrorBoundary:()=>Zn.SV,ErrorBoundaryAlert:()=>Zn.z4,ErrorWithStack:()=>Aa.X,EventsCanvas:()=>Ts.TZ,FIXED_UNIT:()=>Ks.j,FadeTransition:()=>Sn.n,FeatureBadge:()=>qt.a,FeatureInfoBox:()=>qt.Z,Field:()=>zs.g,FieldArray:()=>Ur.F,FieldLinkList:()=>it.Z,FieldSet:()=>es.C,FieldValidationMessage:()=>za.S,FileDropzone:()=>dr.Yo,FileDropzoneDefaultChildren:()=>dr.A_,FileListItem:()=>dr.K$,FileUpload:()=>wo.p,FilterInput:()=>ao.H,FilterPill:()=>re.B,Form:()=>jt.l,FormattedValueDisplay:()=>lo.W,FullWidthButtonContainer:()=>vt.f,Gauge:()=>mt.a,Graph:()=>Fr.k,GraphContextMenu:()=>Ia.w,GraphContextMenuHeader:()=>Ia.b,GraphNG:()=>mr.d,GraphSeriesToggler:()=>Fe.U,GraphWithLegend:()=>hs.U,Grid:()=>wr.r,HorizontalGroup:()=>Do.Lh,Icon:()=>l.J,IconButton:()=>m.h,InfoBox:()=>An.v,InlineField:()=>Ls._,InlineFieldRow:()=>Ns.Z,InlineFormLabel:()=>bn.c,InlineLabel:()=>cr.W,InlineSegmentGroup:()=>pr.m,InlineSwitch:()=>zn.x,InlineToast:()=>D.K,Input:()=>Ms.I,InputControl:()=>Dn.g,InteractiveTable:()=>k.e,JSONFormatter:()=>On.g,JsonExplorer:()=>wn.u,KeyboardPlugin:()=>Ja.Cm,Label:()=>ls._,LegacyForms:()=>Zr,LegacyInputStatus:()=>a.G,Legend:()=>ks.D,Link:()=>ds.r,LinkButton:()=>vn.Qj,List:()=>Y.a,LoadingBar:()=>T.F,LoadingPlaceholder:()=>M.u,Marker:()=>Ts.Jx,Menu:()=>we.v,MenuGroup:()=>lt.k,MenuItem:()=>Bt.s,Modal:()=>Ue.u,ModalHeader:()=>De.x,ModalRoot:()=>Te.Y0,ModalTabContent:()=>ye.Q,ModalTabsHeader:()=>Pe.H,ModalsContext:()=>Te.kr,ModalsController:()=>Te.JY,ModalsProvider:()=>Te.$i,MultiSelect:()=>sr.NU,PageToolbar:()=>nt.X,Pagination:()=>te.t,PanelChrome:()=>Z.fm,PanelChromeLoadingIndicator:()=>ee.T,PanelContainer:()=>Bs.l,PanelContextProvider:()=>ce._w,PanelContextRoot:()=>ce.bb,PlotLegend:()=>Oa.l,PluginSignatureBadge:()=>Xt.o,Popover:()=>v.J,PopoverController:()=>E.D,Portal:()=>p.h_,PortalContainer:()=>p.lO,QueryField:()=>ie.q,RadioButtonGroup:()=>vr.S,RadioButtonList:()=>Bo.x,RangeSlider:()=>$t.U,ReactMonacoEditor:()=>ue.o,RefreshPicker:()=>N.dP,RelativeTimeRangePicker:()=>ur.x,RenderUserContentAsHTML:()=>_e.D,ScaleDistribution:()=>jn.wf,SecretInput:()=>Na.m,SecretTextArea:()=>Wa.Z,SecureSocksProxySettings:()=>rn.i,Segment:()=>hn.X,SegmentAsync:()=>Gn.V,SegmentInput:()=>Cn.X,SegmentSection:()=>Xn.f,SegmentSelect:()=>Yn.V,Select:()=>sr.Ph,SelectContainer:()=>sr.eI,SeriesColorPicker:()=>R.sp,SeriesColorPickerPopover:()=>x.j,SeriesColorPickerPopoverWithTheme:()=>x.q,SeriesIcon:()=>xn.F,SeriesTable:()=>Xe.c,SeriesTableRow:()=>Xe.V,SeriesVisibilityChangeBehavior:()=>Ee.Y,SeriesVisibilityChangeMode:()=>us.R,SetInterval:()=>ct.F,SlideOutTransition:()=>Ln.R,Slider:()=>Dt.i,Sparkline:()=>rt.b,Spinner:()=>In.$,Stack:()=>Ss.K,StatsPicker:()=>P.m,Switch:()=>zn.r,TLSAuthSettings:()=>un.s,Tab:()=>He.O,TabContent:()=>Oe.I,TabbedContainer:()=>y.W,Table:()=>he.i,TableInputCSV:()=>xe.w,TabsBar:()=>Me.J,Tag:()=>se.V,TagList:()=>de.P,TagsInput:()=>q.B,Text:()=>ns.x,TextArea:()=>xr.K,TextLink:()=>ys.h,TimeOfDayPicker:()=>j.y,TimePickerTooltip:()=>F.IF,TimeRangeInput:()=>Wr.K,TimeRangeLabel:()=>U.q,TimeRangePicker:()=>F.Xc,TimeSeries:()=>Ta.p,TimeZonePicker:()=>V.O,Toggletip:()=>h.P,ToolbarButton:()=>Pa.h,ToolbarButtonRow:()=>La.R,Tooltip:()=>f.u,TooltipPlugin:()=>Ja.ii,TooltipPlugin2:()=>Ja.x2,UPLOT_AXIS_FONT_SIZE:()=>ta.gD,UPlotChart:()=>ra.N,UPlotConfigBuilder:()=>Sa.U,UnitPicker:()=>L.n,UserIcon:()=>Qt.t,ValuePicker:()=>Ma.b,VerticalGroup:()=>Do.wc,VerticalTab:()=>Ve.L,VirtualizedSelect:()=>sr.LT,VizLayout:()=>be.AY,VizLegend:()=>Be.l,VizLegendListItem:()=>Le.e,VizRepeater:()=>ne.Q,VizTooltip:()=>Ae.I,VizTooltipContainer:()=>Ke.S,WeekStartPicker:()=>_.z,WithContextMenu:()=>Kt.z,XYCanvas:()=>Ts.K2,ZoomPlugin:()=>Ja.Rb,buildScaleKey:()=>Yr.z1,clearButtonStyles:()=>vn.gN,convertOldAngularValueMapping:()=>Wt.PR,defaultIntervals:()=>N.o5,fieldMatchersUI:()=>ts.i,getCardStyles:()=>io.L,getInputStyles:()=>Ms.H,getPortalContainer:()=>p.RN,getSelectStyles:()=>Qr.D,graphFieldOptions:()=>_n.q,graphTickFormatter:()=>ms.sV,graphTimeFormat:()=>ms.mc,preparePlotFrame:()=>Yr.Rn,resetSelectStyles:()=>Go.Z,sharedInputStyle:()=>mn.RK,sharedSingleStatMigrationHandler:()=>Wt.rD,sharedSingleStatPanelChangedHandler:()=>Wt.ZH,useGraphNGContext:()=>fr.z,usePanelContext:()=>ce.R9,variableSuggestionToCodeEditorSuggestion:()=>ge.T,withErrorBoundary:()=>Zn.Pf});var n=e(51143),a=e(56152),o=e(39468),r=e(63174),i=e(21069),g=e(78694),u=e(14476),l=e(97666),m=e(75064),c=e(16783),d=e(81573),f=e(14607),E=e(55135),v=e(51928),h=e(57652),p=e(25142),s=e(50263),y=e(23494),C=e(55855),b=e(30379),S=e(46081),D=e(78112),M=e(79468),T=e(23615),R=e(38276),O=e(58138),x=e(91610),I=e(4211),L=e(29500),P=e(63326),N=e(15867),F=e(56399),U=e(93738),j=e(18300),V=e(76310),_=e(38797),H=e(58557),z=e(68594),K=e(89280),Y=e(62102),k=e(23940),q=e(6089),X=e(99073),te=e(44574),se=e(69977),de=e(7042),re=e(45564),fe=e(77980),ie=e(29470),oe=e(62577),ue=e(26927),me=e(42206),ge=e(47691),Ue=e(7288),De=e(42994),Pe=e(87501),ye=e(13010),Te=e(93349),nt=e(2598),ct=e(57100),he=e(63510),xe=e(88433),Me=e(70523),He=e(94439),Ve=e(66566),Oe=e(10305),Ne=e(66600),_e=e(51787),qe=e(72264),rt=e(7881),mt=e(45002),Je=e(70265),Ae=e(67317),Ke=e(10642),Xe=e(68847),ne=e(42273),Z=e(58861),ee=e(3446),ce=e(76738),be=e(29627),Ee=e(39836),Be=e(33012),Le=e(81283),ze=e(49199),Fe=e(81774),$e=e(8655),et=e(96525),tt=e(77937),it=e(18632),vt=e(74591),yt=e(18975),Wt=e(11615),ut=e(11318),pt=e(19841),we=e(54635),lt=e(71862),Bt=e(69707),Kt=e(59263),It=e(96394),Zt=e(91757),yn=e(15324),xn=e(54467),An=e(94335),qt=e(34364),On=e(92904),wn=e(21552),Zn=e(8958),Aa=e(2855),Ea=e(42337),Nt=e(62604),en=e(86516),rn=e(9011),un=e(89135),on=e(28807),In=e(75682),Sn=e(73215),Ln=e(9148),hn=e(89703),Gn=e(32615),Cn=e(51965),Yn=e(18750),Xn=e(77197),Pt=e(63153),Dt=e(60540),$t=e(34407),jt=e(66596),mn=e(18151),Dn=e(96130),vn=e(29165),fa=e(82541),Pa=e(40235),La=e(19424),Ma=e(66008),ts=e(83741),ds=e(59672),ys=e(79055),ns=e(40377),qa=e(61353),Ss=e(13086),wr=e(14559),ls=e(57445),zs=e(20519),ks=e(50086),es=e(51637),za=e(74321),Ls=e(84933),pr=e(35201),cr=e(114),Ns=e(81368),Ur=e(59885),Go=e(13234),sr=e(27436),Qr=e(12260),ka=e(13746),Nr=e.n(ka),Hs={};for(const co in ka)["default","Icon","IconButton","ConfirmButton","DeleteButton","Tooltip","PopoverController","Popover","Toggletip","Portal","getPortalContainer","PortalContainer","CustomScrollbar","TabbedContainer","ClipboardButton","Cascader","ButtonCascader","InlineToast","LoadingPlaceholder","LoadingBar","ColorPicker","SeriesColorPicker","ColorPickerInput","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","EmptySearchResult","UnitPicker","StatsPicker","RefreshPicker","defaultIntervals","TimeRangePicker","TimePickerTooltip","TimeRangeLabel","TimeOfDayPicker","TimeZonePicker","WeekStartPicker","DatePicker","DatePickerWithInput","DateTimePicker","List","InteractiveTable","TagsInput","AutoSaveField","Pagination","Tag","TagList","FilterPill","ConfirmModal","QueryField","CodeEditor","ReactMonacoEditor","CodeEditorSuggestionItemKind","variableSuggestionToCodeEditorSuggestion","Modal","ModalHeader","ModalTabsHeader","ModalTabContent","ModalsProvider","ModalRoot","ModalsController","ModalsContext","PageToolbar","SetInterval","Table","TableInputCSV","TabsBar","Tab","VerticalTab","TabContent","Counter","RenderUserContentAsHTML","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","Sparkline","Gauge","BarGauge","VizTooltip","VizTooltipContainer","SeriesTable","SeriesTableRow","VizRepeater","PanelChrome","PanelChromeLoadingIndicator","PanelContextProvider","PanelContextRoot","usePanelContext","VizLayout","SeriesVisibilityChangeBehavior","VizLegend","VizLegendListItem","Alert","GraphSeriesToggler","Collapse","ControlledCollapse","CollapsableSection","DataLinkButton","FieldLinkList","FullWidthButtonContainer","ClickOutsideWrapper","CallToActionCard","ContextMenu","Menu","MenuGroup","MenuItem","WithContextMenu","DataLinksInlineEditor","DataLinkInput","DataLinksContextMenu","SeriesIcon","InfoBox","FeatureBadge","FeatureInfoBox","JSONFormatter","JsonExplorer","ErrorBoundary","ErrorBoundaryAlert","withErrorBoundary","ErrorWithStack","DataSourceHttpSettings","CustomHeadersSettings","AlertingSettings","SecureSocksProxySettings","TLSAuthSettings","CertificationKey","Spinner","FadeTransition","SlideOutTransition","Segment","SegmentAsync","SegmentInput","SegmentSelect","SegmentSection","Drawer","Slider","RangeSlider","Form","sharedInputStyle","InputControl","Button","LinkButton","ButtonGroup","clearButtonStyles","ToolbarButton","ToolbarButtonRow","ValuePicker","fieldMatchersUI","Link","TextLink","Text","Box","Stack","Grid","Label","Field","Legend","FieldSet","FieldValidationMessage","InlineField","InlineSegmentGroup","InlineLabel","InlineFieldRow","FieldArray","resetSelectStyles","getSelectStyles","HorizontalGroup","VerticalGroup","Container","Badge","RadioButtonGroup","RadioButtonList","Input","getInputStyles","AutoSizeInput","FilterInput","Switch","InlineSwitch","Checkbox","TextArea","FileUpload","TimeRangeInput","RelativeTimeRangePicker","Card","getCardStyles","CardContainer","FormattedValueDisplay","ButtonSelect","Dropdown","PluginSignatureBadge","UserIcon","Avatar","InlineFormLabel","Divider","LegacyForms","LegacyInputStatus","ScaleDistribution","BarGaugeDisplayMode","UPlotConfigBuilder","UPLOT_AXIS_FONT_SIZE","UPlotChart","PlotLegend","FIXED_UNIT","BrowserLabel","PanelContainer","Graph","GraphWithLegend","GraphContextMenu","GraphContextMenuHeader","graphTimeFormat","graphTickFormatter","GraphNG","TimeSeries","useGraphNGContext","preparePlotFrame","buildScaleKey","convertOldAngularValueMapping","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","MultiSelect","Select","SelectContainer","VirtualizedSelect"].indexOf(co)<0&&(Hs[co]=()=>ka[co]);e.d(A,Hs);var Do=e(74042),oo=e(67192),vr=e(5106),Bo=e(23351),Ms=e(24956),is=e(15910),ao=e(96535),Na=e(87412),Wa=e(6267),zn=e(5999),Mt=e(55973),xr=e(7073),wo=e(20018),dr=e(76823),Wr=e(76275),ur=e(78136),io=e(72435),Uo=e(3913),lo=e(67297),xt=e(85722),St=e(44839),Xt=e(15343),Qt=e(30002),sn=e(71679),bn=e(68921),Bn=e(45635),_n=e(90646),jn=e(1713),Sa=e(65277),ta=e(2925),ra=e(34305),Oa=e(21813),Ts=e(28479),Ja=e(20870),Ks=e(18288),us=e(59637),cs=e(11389),Bs=e(73503),Fr=e(19225),hs=e(16223),Ia=e(8441),ms=e(4371),mr=e(18371),Ta=e(72171),fr=e(79164),Yr=e(39585);const Zr={SecretFormField:u.c,FormField:n.W,Select:i.Ph,AsyncSelect:i.qb,IndicatorsContainer:o.B,NoOptionsMessage:r.P,Input:a.I,Switch:g.r}},73215:(G,A,e)=>{"use strict";e.d(A,{n:()=>i});var n=e(66681),a=e(85960),o=e(54278),r=e(47257);function i(u){const{visible:l,children:m,duration:c=250}=u,d=(0,r.wW)(g,c);return a.createElement(o.Z,{in:l,mountOnEnter:!0,unmountOnExit:!0,timeout:c,classNames:d},m)}const g=(u,l)=>({enter:(0,n.css)({label:"enter",opacity:0}),enterActive:(0,n.css)({label:"enterActive",opacity:1,transition:`opacity ${l}ms ease-out`}),exit:(0,n.css)({label:"exit",opacity:1}),exitActive:(0,n.css)({label:"exitActive",opacity:0,transition:`opacity ${l}ms ease-out`})})},9148:(G,A,e)=>{"use strict";e.d(A,{R:()=>i});var n=e(66681),a=e(85960),o=e(54278),r=e(47257);function i(u){const{visible:l,children:m,duration:c=250,horizontal:d,size:f}=u,E=(0,r.wW)(g,c,d?"width":"height",f);return a.createElement(o.Z,{in:l,mountOnEnter:!0,unmountOnExit:!0,timeout:c,classNames:E},m)}const g=(u,l,m,c)=>({enter:(0,n.css)({label:"enter",[`${m}`]:0,opacity:0}),enterActive:(0,n.css)({label:"enterActive",[`${m}`]:`${c}px`,opacity:1,transition:`opacity ${l}ms ease-out, ${m} ${l}ms ease-out`}),exit:(0,n.css)({label:"exit",[`${m}`]:`${c}px`,opacity:1}),exitActive:(0,n.css)({label:"exitActive",opacity:0,[`${m}`]:0,transition:`opacity ${l}ms ease-out, ${m} ${l}ms ease-out`})})},34305:(G,A,e)=>{"use strict";e.d(A,{N:()=>u});var n=e(85960),a=e(56871),o=e(79474);function r(l,m){return m.width===l.width&&m.height===l.height}function i(l,m){return m.data===l.data}function g(l,m){return m.config===l.config}class u extends n.Component{constructor(m){super(m),this.plotContainer=(0,n.createRef)(),this.plotCanvasBBox=(0,n.createRef)(),this.state={plot:null}}reinitPlot(){let{width:m,height:c,plotRef:d}=this.props;if(this.state.plot?.destroy(),m===0&&c===0)return;this.props.config.addHook("setSize",v=>{v.over});const f={width:Math.floor(this.props.width),height:Math.floor(this.props.height),...this.props.config.getConfig()};(0,o.Zp)("UPlot",!1,"Reinitializing plot",f);const E=new a.Z(f,this.props.data,this.plotContainer.current);d&&d(E),this.setState({plot:E})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){this.state.plot?.destroy()}componentDidUpdate(m){let{plot:c}=this.state;r(m,this.props)?g(m,this.props)?i(m,this.props)||c?.setData(this.props.data):this.reinitPlot():c?.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)})}render(){return n.createElement("div",{style:{position:"relative"}},n.createElement("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children)}}},21813:(G,A,e)=>{"use strict";e.d(A,{l:()=>f,o:()=>d});var n=e(85960),a=e(94372),o=e(73859),r=e(16515),i=e(64282),g=e(1713),u=e(47257),l=e(29627),m=e(33012);const c=E=>E==null?"-":E.toFixed(1);function d(E,v){return E.getSeries().some(h=>{const p=h.props.dataFrameFieldIndex;if(!p)return!1;const s=v[p.frameIndex]?.fields[p.fieldIndex];return!(!s||s.config.custom?.hideFrom?.legend)})}const f=n.memo(({data:E,config:v,placement:h,calcs:p,displayMode:s,...y})=>{const C=(0,u.l4)(),b=v.getSeries().map(S=>{const D=S.props,M=D.dataFrameFieldIndex,T=v.getAxisPlacement(S.props.scaleKey);if(!M)return;const R=E[M.frameIndex]?.fields[M.fieldIndex];if(!R||R.config.custom?.hideFrom?.legend)return;const O=(0,a.CZ)(R,E[M.frameIndex],E),I=(0,o.YO)(R,C).color;return{disabled:!(D.show??!0),fieldIndex:M,color:I,label:O,yAxis:T===g.LB.Left||T===g.LB.Bottom?1:2,getDisplayValues:()=>{if(!p?.length)return[];const L=R.display??c;let P=null;const N=(0,r.Kx)({field:R,reducers:p});return p.map(F=>{const U=r.TB.get(F);let j=L;return U.id===r.gz.diffperc&&(j=(0,i.U)({field:{...R,config:{...R.config,unit:"percentunit"}},theme:C})),(U.id===r.gz.count||U.id===r.gz.changeCount||U.id===r.gz.distinctCount)&&(P||(P=(0,i.U)({field:{...R,config:{...R.config,unit:"none"}},theme:C})),j=P),{...j(N[F]),title:U.name,description:U.description}})},getItemKey:()=>`${O}-${M.frameIndex}-${M.fieldIndex}`}}).filter(S=>S!==void 0);return n.createElement(l.AY.Legend,{placement:h,...y},n.createElement(m.l,{placement:h,items:b,displayMode:s,sortBy:y.sortBy,sortDesc:y.sortDesc,isSortable:!0}))});f.displayName="PlotLegend"},90646:(G,A,e)=>{"use strict";e.d(A,{q:()=>a});var n=e(1713);const a={drawStyle:[{label:"Lines",value:n.l8.Line},{label:"Bars",value:n.l8.Bars},{label:"Points",value:n.l8.Points}],lineInterpolation:[{description:"Linear",value:n.KC.Linear,icon:"gf-interpolation-linear"},{description:"Smooth",value:n.KC.Smooth,icon:"gf-interpolation-smooth"},{description:"Step before",value:n.KC.StepBefore,icon:"gf-interpolation-step-before"},{description:"Step after",value:n.KC.StepAfter,icon:"gf-interpolation-step-after"}],barAlignment:[{description:"Before",value:n.pu.Before,icon:"gf-bar-alignment-before"},{description:"Center",value:n.pu.Center,icon:"gf-bar-alignment-center"},{description:"After",value:n.pu.After,icon:"gf-bar-alignment-after"}],showPoints:[{label:"Auto",value:n.Jp.Auto,description:"Show points when the density is low"},{label:"Always",value:n.Jp.Always},{label:"Never",value:n.Jp.Never}],axisPlacement:[{label:"Auto",value:n.LB.Auto,description:"First field on the left, everything else on the right"},{label:"Left",value:n.LB.Left},{label:"Right",value:n.LB.Right},{label:"Hidden",value:n.LB.Hidden}],fillGradient:[{label:"None",value:n.FI.None},{label:"Opacity",value:n.FI.Opacity,description:"Enable fill opacity gradient"},{label:"Hue",value:n.FI.Hue,description:"Small color hue gradient"},{label:"Scheme",value:n.FI.Scheme,description:"Use color scheme to define gradient"}],stacking:[{label:"Off",value:n.o0.None},{label:"Normal",value:n.o0.Normal},{label:"100%",value:n.o0.Percent}],thresholdsDisplayModes:[{label:"Off",value:n.i3.Off},{label:"As lines",value:n.i3.Line},{label:"As lines (dashed)",value:n.i3.Dashed},{label:"As filled regions",value:n.i3.Area},{label:"As filled regions and lines",value:n.i3.LineAndArea},{label:"As filled regions and lines (dashed)",value:n.i3.DashedAndArea}]}},2925:(G,A,e)=>{"use strict";e.d(A,{ff:()=>d,gD:()=>m,mr:()=>E});var n=e(1930),a=e(63352),o=e(70991),r=e(12537),i=e(1713),g=e(48461),u=e(18288),l=e(77727);const m=12,c=8;class d extends u.L{merge(p){this.props.size=(0,l.V)("max",this.props.size,p.size),this.props.label||(this.props.label=p.label),this.props.placement===i.LB.Auto&&(this.props.placement=p.placement)}calculateSpace(p,s,y,C,b){const S=p.axes[s],D=p.scales[S.scale];if(S.side!==2||!D)return 30;const M=40;if(D.time){const T=b/M,R=(C-y)/T,O=E(p,[y],s,M,R);return(0,g.X1)(O[0],m).width+18}return M}calculateAxisSize(p,s,y){const C=p.axes[y];let b=C.ticks.size;if(C.side===2)b+=C.gap+m;else if(s?.length){let S=s.reduce((M,T)=>Math.max(M,(0,g.X1)(T,m).width),0);const D=Math.min(p.width*.4,S);b+=C.gap+C.labelGap+D}return Math.ceil(b)}getConfig(){let{scaleKey:p,label:s,show:y=!0,placement:C=i.LB.Auto,grid:b={show:!0},ticks:S,space:D,filter:M,gap:T=5,formatValue:R,splits:O,values:x,incrs:I,isTime:L,timeZone:P,theme:N,tickLabelRotation:F,size:U,color:j,border:V,decimals:_,distr:H=i.wf.Linear}=this.props;const z=`${m}px ${N.typography.fontFamily}`,K=N.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,n.br)(p)&&(O=[0,1]),_===0&&H===i.wf.Linear&&(M=(k,q)=>q.map(X=>Number.isInteger(X)?X:null));let Y={scale:p,show:y,stroke:j??N.colors.text.primary,side:v(C),font:z,size:U??((k,q,X)=>this.calculateAxisSize(k,q,X)),rotate:F,gap:T,labelGap:0,grid:{show:b.show,stroke:K,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:V?.show?j??N.colors.text.primary:K,width:1/devicePixelRatio,size:4},S),splits:O,values:x,space:D??((k,q,X,te,se)=>this.calculateSpace(k,q,X,te,se)),filter:M,incrs:I};return V?.show&&(Y.border={stroke:j??N.colors.text.primary,width:1/devicePixelRatio,...V}),s!=null&&s.length>0&&(Y.label=s,Y.labelSize=m+c,Y.labelFont=z,Y.labelGap=c),x?Y.values=x:L?Y.values=E:R&&(Y.values=(k,q,X,te,se)=>{let de=(0,a.d)((0,a.O)(se,6));return q.map(re=>R(re,de>0?de:void 0))}),Y.timeZone=P,Y}}const f={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:28*24*60*60*1e3,year:365*24*60*60*1e3};function E(h,p,s,y,C){const b=h.axes[s].timeZone,S=h.scales.x,D=(S?.max??0)-(S?.min??0),M=Math.round(f.year/f.day)*f.day,T=Math.round(C/f.day)*f.day;let R=o.U6.interval.year;return C<f.second?R=o.U6.interval.millisecond:C<=f.minute?R=o.U6.interval.second:D<=f.day?R=o.U6.interval.minute:C<=f.day?R=o.U6.interval.hour:D<f.year?R=o.U6.interval.day:T===M?R=o.U6.interval.year:C<=f.year&&(R=o.U6.interval.month),p.map(O=>O==null?"":(0,r.dq)(O,{format:R,timeZone:b}))}function v(h){switch(h){case i.LB.Top:return 0;case i.LB.Right:return 1;case i.LB.Bottom:return 2;case i.LB.Left:}return 3}},65277:(G,A,e)=>{"use strict";e.d(A,{U:()=>b});var n=e(56375),a=e(56871),o=e(9833),r=e(72623),i=e(1713),g=e(79474),u=e(2925),l=e(77727),m=e(14345),c=e(30887),d=e(18288),f=e(70741);class E extends d.L{getConfig(){const{facets:D,drawStyle:M,pathBuilder:T,pointsBuilder:R,pointsFilter:O,lineInterpolation:x,lineWidth:I,lineStyle:L,barAlignment:P,barWidthFactor:N,barMaxWidth:F,showPoints:U,pointSize:j,scaleKey:V,pxAlign:_,spanNulls:H,show:z=!0}=this.props;let K={},Y=this.getLineColor();K.stroke=Y,K.width=I,L&&L.fill!=="solid"&&(L.fill==="dot"&&(K.cap="round"),K.dash=L.dash??[10,10]),T!=null?K.paths=T:M===i.l8.Points?K.paths=()=>null:M!=null&&(K.paths=(X,te,se,de)=>h(M,x,P,N,F)(X,te,se,de));const k=typeof Y=="string"?Y:(X,te)=>X.series[te]._stroke,q={points:{stroke:k,fill:k,size:!j||j<I?void 0:j,filter:O}};return R!=null?q.points.show=R:M===i.l8.Points?q.points.show=!0:U===i.Jp.Auto?M===i.l8.Bars&&(q.points.show=!1):U===i.Jp.Never?q.points.show=!1:U===i.Jp.Always&&(q.points.show=!0),{scale:V,facets:D,spanGaps:typeof H=="number"?!1:H,value:()=>"",pxAlign:_,show:z,fill:this.getFill(),...K,...q}}getLineColor(){const{lineColor:D,gradientMode:M,colorMode:T,thresholds:R,theme:O,hardMin:x,hardMax:I,softMin:L,softMax:P,dynamicSeriesColor:N}=this.props;return M===i.FI.None&&N?(F,U)=>N(U)??D??m.R:M===i.FI.Scheme&&T?.id!==m.S.Fixed?(0,f.P2)(1,O,T,R,x,I,L,P):D??m.R}getFill(){const{lineColor:D,fillColor:M,gradientMode:T,fillOpacity:R,colorMode:O,thresholds:x,theme:I,hardMin:L,hardMax:P,softMin:N,softMax:F,dynamicSeriesColor:U}=this.props;if(M)return M;const j=T??i.FI.None,V=(R??0)/100;if(j===i.FI.None&&U&&V>0)return(_,H)=>{let z=_.series[H]._stroke;return c.alpha(z??"",V)};switch(j){case i.FI.Opacity:return(0,f.DT)(M??D,V);case i.FI.Hue:return(0,f.oN)(M??D,V,I);case i.FI.Scheme:if(O?.id!==m.S.Fixed)return(0,f.P2)(V,I,O,x,L,P,N,F);default:if(V>0)return c.alpha(D??"",V)}}}let v;function h(S,D,M=i.pu.Center,T=.6,R=200){const O=a.Z.paths;if(v||(v={linear:O.linear(),smooth:O.spline(),stepBefore:O.stepped({align:-1}),stepAfter:O.stepped({align:1})}),S===i.l8.Bars){let x=`bars|${M}|${T}|${R}`;return v[x]||(v[x]=O.bars({size:[T,R],align:M})),v[x]}else if(S===i.l8.Line){if(D===i.KC.StepBefore)return v.stepBefore;if(D===i.KC.StepAfter)return v.stepAfter;if(D===i.KC.Smooth)return v.smooth}return v.linear}var p=e(19737),s=e(37634);function y(S){const D=S.config.mode===i.i3.Dashed||S.config.mode===i.i3.DashedAndArea?[10,10]:null;function M(U,j,V,_){let H=U.ctx,z=0;for(let K=0;K<V.length;K++)if(V[K].color==="transparent"){z=K;break}H.lineWidth=2,D&&H.setLineDash(D);for(let K=1;K<V.length;K++){const Y=V[K];let k;z>=K&&K>0?k=(0,p.Z)(_.visualization.getColorByName(V[K-1].color)):k=(0,p.Z)(_.visualization.getColorByName(Y.color)),k.getAlpha()===1&&k.setAlpha(.7);let q=Math.round(U.bbox.left),X=Math.round(U.valToPos(Y.value,j,!0)),te=Math.round(U.bbox.left+U.bbox.width),se=Math.round(U.valToPos(Y.value,j,!0));H.beginPath(),H.moveTo(q,X),H.lineTo(te,se),H.strokeStyle=k.toString(),H.stroke()}}function T(U,j,V,_){let H=U.ctx,z=(0,f.KV)(U,j,V.map(K=>{let Y=(0,p.Z)(_.visualization.getColorByName(K.color));return Y.getAlpha()===1&&Y.setAlpha(.15),[K.value,Y.toString()]}),!0);H.fillStyle=z,H.fillRect(U.bbox.left,U.bbox.top,U.bbox.width,U.bbox.height)}const{scaleKey:R,thresholds:O,theme:x,config:I,hardMin:L,hardMax:P,softMin:N,softMax:F}=S;return U=>{const j=U.ctx,{min:V,max:_}=U.scales.x,{min:H,max:z}=U.scales[R];if(V==null||_==null||H==null||z==null)return;let{steps:K,mode:Y}=O;if(Y===s.H.Percentage){let[k,q]=(0,f.A9)(U,R,L,P,N,F),X=q-k;K=K.map(te=>({...te,value:k+X*(te.value/100)}))}switch(j.save(),I.mode){case i.i3.Line:case i.i3.Dashed:M(U,R,K,x);break;case i.i3.Area:T(U,R,K,x);break;case i.i3.LineAndArea:case i.i3.DashedAndArea:T(U,R,K,x),M(U,R,K,x)}j.restore()}}const C={drag:{setScale:!1},points:{size:(S,D)=>S.series[D].points.size*2,width:(S,D,M)=>M/4},focus:{prox:30}};class b{constructor(D=o.Ys){this.series=[],this.axes={},this.scales=[],this.bands=[],this.stackingGroups=[],this.hasLeftAxis=!1,this.hooks={},this.tz=void 0,this.sync=!1,this.mode=1,this.frames=void 0,this.thresholds={},this.tooltipInterpolator=void 0,this.padding=void 0,this.prepData=void 0,this.scaleKeys=["",""],this.tzDate=M=>{let T=new Date(M);return this.tz?a.Z.tzDate(T,this.tz):T},this.tz=(0,r.Pr)(D,Date.now())?.ianaName}addHook(D,M){(0,g.Zp)("UPlotConfigBuilder",!1,"addHook",D),this.hooks[D]||(this.hooks[D]=[]),this.hooks[D].push(M)}addThresholds(D){this.thresholds[D.scaleKey]||(this.thresholds[D.scaleKey]=D,this.addHook("drawClear",y(D)))}addAxis(D){D.placement=D.placement??i.LB.Auto,D.grid=D.grid??{};let M=D.scaleKey;if(M==="x"&&(M+=D.timeZone??""),this.axes[M]){this.axes[M].merge(D);return}D.placement===i.LB.Auto&&(D.placement=this.hasLeftAxis?i.LB.Right:i.LB.Left),D.placement===i.LB.Left&&(this.hasLeftAxis=!0),D.placement===i.LB.Hidden&&(D.grid.show=!1,D.size=0),this.axes[M]=new u.ff(D)}getAxisPlacement(D){return this.axes[D]?.props.placement??i.LB.Left}setCursor(D){this.cursor=(0,n.merge)({},this.cursor,D)}setMode(D){this.mode=D}setSelect(D){this.select=D}addSeries(D){this.series.push(new E(D))}getSeries(){return this.series}addScale(D){const M=this.scales.find(T=>T.props.scaleKey===D.scaleKey);if(M){M.merge(D);return}this.scales.push(new l.I(D))}addBand(D){this.bands.push(D)}setStackingGroups(D){this.stackingGroups=D}getStackingGroups(){return this.stackingGroups}setTooltipInterpolator(D){this.tooltipInterpolator=D}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(D){this.prepData=M=>(this.frames=M,D(M,this.getStackingGroups()))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(D){this.padding=D}getConfig(){const D={...g.qt,mode:this.mode,series:[this.mode===2?null:{value:()=>""}]};D.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map(T=>T.getConfig()),D.series=[...D.series,...this.series.map(T=>T.getConfig())],D.scales=this.scales.reduce((T,R)=>({...T,...R.getConfig()}),{}),D.hooks=this.hooks,D.select=this.select;const M=(T="")=>(R,O)=>{let x=R.series[O].points._stroke;if(typeof x!="string"){let I=this.frames[0].fields[O];x=I.display(I.values[R.cursor.idxs[O]]).color}return x+T};return D.cursor=(0,n.merge)({},C,{points:{stroke:M("80"),fill:M()}},this.cursor),D.tzDate=this.tzDate,Array.isArray(this.padding)&&(D.padding=this.padding),this.stackingGroups.length&&this.stackingGroups.forEach(T=>{(0,g.Kq)(T).forEach(R=>{this.addBand(R)})}),this.bands.length&&(D.bands=this.bands),D}ensureNonOverlappingAxes(D){const M=D.find(O=>O.props.scaleKey==="x"),T=D.filter(O=>O.props.grid?.show===void 0),R=T.findIndex(O=>O.props.placement===i.LB.Left||O.props.placement===i.LB.Right||O.props.placement===i.LB.Bottom&&O!==M);for(let O=0;O<T.length;O++)T[O]===M||O===R?T[O].props.grid.show=!0:T[O].props.grid.show=!1;return D}}},77727:(G,A,e)=>{"use strict";e.d(A,{I:()=>g,V:()=>u});var n=e(56871),a=e(87500),o=e(1930),r=e(1713),i=e(18288);class g extends i.L{merge(m){this.props.min=u("min",this.props.min,m.min),this.props.max=u("max",this.props.max,m.max)}getConfig(){let{isTime:m,scaleKey:c,min:d,max:f,softMin:E,softMax:v,range:h,direction:p,orientation:s,centeredZero:y,decimals:C}=this.props;const b=this.props.distribution,S=m?{}:{distr:b===r.wf.Symlog?4:b===r.wf.Log?3:b===r.wf.Ordinal?2:1,log:b===r.wf.Log||b===r.wf.Symlog?this.props.log??2:void 0,asinh:b===r.wf.Symlog?this.props.linearThreshold??1:void 0};if(b===r.wf.Log){let P=this.props.log,N=P===2?Math.log2:Math.log10;d!=null&&(d<=0?d=null:d=P**Math.floor(N(d))),f!=null&&(f<=0?f=null:f=P**Math.ceil(N(f))),E!=null&&(E<=0?E=null:E=P**Math.floor(N(E))),v!=null&&(v<=0?v=null:v=P**Math.ceil(N(v)))}let D=E==null?3:1,M=v==null?3:1;const T={min:{pad:.1,hard:d??-1/0,soft:E||0,mode:D},max:{pad:.1,hard:f??1/0,soft:v||0,mode:M}};let R=E==null&&d!=null,O=v==null&&f!=null,x=R&&O;const I=(P,N,F,U)=>{const j=P.scales[U];let V=[N,F];if(U==="x"&&!m&&b===r.wf.Linear||!x&&N==null&&F==null)return V;let _=j.log??10;if(j.distr===1||j.distr===2||j.distr===4){if(y){let H=Math.abs(N),z=Math.abs(F),K=Math.max(H,z);K===0&&(K=80),N=-K,F=K}j.distr===4?V=n.Z.rangeAsinh(N,F,_,!0):V=n.Z.rangeNum(R?d:N,O?f:F,T)}else j.distr===3&&(V=n.Z.rangeLog(d??N,f??F,_,!0));if(C===0)if(j.distr===1||j.distr===2)V[0]=(0,a.mB)(V[0],1),V[1]=(0,a.UO)(V[1],1);else if(j.distr===3){let H=j.log===2?Math.log2:Math.log10;if(V[0]<=1)V[0]=1;else{let K=Math.floor(H(V[0]));V[0]=_**K}let z=Math.ceil(H(V[1]));V[1]=_**z,V[0]===V[1]&&(V[1]*=_)}else j.distr===4&&(V[0]=(0,a.mB)(V[0],1),V[1]=(0,a.UO)(V[1],1));return(j.distr===1||j.distr===4)&&(R&&(V[0]=d),O&&(V[1]=f)),V[0]>=V[1]&&(V[0]=j.distr===3?1:0,V[1]=100),V};let L=!m&&!x;return(0,o.br)(c)&&(L=!1,h=[0,1]),{[c]:{time:m,auto:L,range:h??I,dir:p,ori:s,...S}}}}function u(l,m,c){const d=m!=null,f=c!=null;return d?f?l==="min"?m<c?m:c:m>c?m:c:m:c}},70741:(G,A,e)=>{"use strict";e.d(A,{A9:()=>E,DT:()=>l,KV:()=>d,P2:()=>h,oN:()=>m});var n=e(19737),a=e(30887),o=e(14345),r=e(37634),i=e(1713),g=e(48461);function u(p,s,y){let C=0,b=0,S=0,D=0;return p===3?(b=s.top,D=s.top+s.height):p===2?(C=s.left+s.width,S=s.left):p===1?(b=s.top+s.height,D=s.top):p===0&&(C=s.left,S=s.left+s.width),y.createLinearGradient(C,b,S,D)}function l(p,s){return(y,C)=>{const b=(0,g.AE)(),S=u(y.scales.x.ori===i.wN.Horizontal?3:2,y.bbox,b);return S.addColorStop(0,a.alpha(p,s)),S.addColorStop(1,a.alpha(p,0)),S}}function m(p,s,y){return(C,b)=>{const S=(0,g.AE)(),D=u(C.scales.x.ori===i.wN.Horizontal?3:2,C.bbox,S),M=(0,n.Z)(p).spin(-15),T=(0,n.Z)(p).spin(15);return y.isDark?(D.addColorStop(0,T.lighten(10).setAlpha(s).toString()),D.addColorStop(1,M.darken(10).setAlpha(s).toString())):(D.addColorStop(0,T.lighten(10).setAlpha(s).toString()),D.addColorStop(1,M.setAlpha(s).toString())),D}}var c=(p=>(p[p.Right=0]="Right",p[p.Up=1]="Up",p[p.Left=2]="Left",p[p.Down=3]="Down",p))(c||{});function d(p,s,y,C=!1){let b=p.scales[s],S=null,D=null;for(let V=0;V<y.length;V++){let _=y[V][0];if((_<=b.min||S==null)&&(S=V),D=V,_>=b.max)break}if(S===D)return y[S][1];let M=y[S][0],T=y[D][0];M===-1/0&&(M=b.min),T===1/0&&(T=b.max);let R=Math.round(p.valToPos(M,s,!0)),O=Math.round(p.valToPos(T,s,!0)),x=R-O;if(x===0)return y[D][1];let I,L,P,N;p.scales.x.ori===i.wN.Horizontal?(I=P=0,L=R,N=O):(L=N=0,I=R,P=O);let U=(0,g.AE)().createLinearGradient(I,L,P,N),j;for(let V=S;V<=D;V++){let _=y[V],H=V===S?R:V===D?O:Math.round(p.valToPos(_[0],s,!0)),z=(R-H)/x;C&&V>S&&U.addColorStop(z,j),U.addColorStop(z,j=_[1])}return U}function f(p,s){let y=p.scales[s],C=1/0,b=-1/0;return p.series.forEach((S,D)=>{if(S.show&&S.scale===s)if(S.min==null){let M=p.data[D];for(let T=0;T<M.length;T++)M[T]!=null&&(C=Math.min(C,M[T]),b=Math.max(b,M[T]))}else C=Math.min(C,S.min),b=Math.max(b,S.max)}),b===C&&(C=y.min,b=y.max),[C,b]}function E(p,s,y,C,b,S){let D=y??b??null,M=C??S??null;if(D==null||M==null){let[T,R]=f(p,s);D=D??T??0,M=M??R??100}return[D,M]}function v(p){return p==="transparent"||p[0]==="#"&&p.slice(-2)==="00"}function h(p,s,y,C,b,S,D,M){if(!y)throw Error("Missing colorMode required for color scheme gradients");if(!C)throw Error("Missing thresholds required for color scheme gradients");return(T,R)=>{let O=T.series[R].scale,x="";if(y.id===o.S.Thresholds)if(C.mode===r.H.Absolute){const I=C.steps.map(L=>[L.value,v(L.color)?"#0000":a.alpha(s.visualization.getColorByName(L.color),p)]);x=d(T,O,I,!0)}else{const[I,L]=E(T,O,b,S,D,M),P=L-I,N=C.steps.map(F=>[I+P*(F.value/100),a.alpha(s.visualization.getColorByName(F.color),p)]);x=d(T,O,N,!0)}else if(y.getColors){const I=y.getColors(s),[L,P]=E(T,O,b,S,D,M),N=P-L,F=I.map((U,j)=>[L+N*(j/(I.length-1)),a.alpha(s.visualization.getColorByName(U),p)]);x=d(T,O,F,!1)}return x}}},17325:(G,A,e)=>{"use strict";e.d(A,{T:()=>i});var n=e(85960),a=e(79088),o=e(38923),r=e(85538);function i({id:g,events:u,renderEventMarker:l,mapEventToXYCoords:m,config:c}){const d=(0,n.useRef)(),[f,E]=(0,n.useState)(0),v=(0,a.Z)();(0,n.useLayoutEffect)(()=>{c.addHook("init",p=>{d.current=p}),c.addHook("draw",()=>{v()&&E(p=>p+1)})},[c,E]);const h=(0,n.useMemo)(()=>{const p=[];if(!d.current||u.length===0)return p;for(let s=0;s<u.length;s++){const y=u[s];for(let C=0;C<y.length;C++){const b=m(y,{fieldIndex:C,frameIndex:s});b&&p.push(n.createElement(o.J,{...b,key:`${g}-marker-${s}-${C}`},l(y,{fieldIndex:C,frameIndex:s})))}}return n.createElement(n.Fragment,null,p)},[u,l,f]);return d.current?n.createElement(r.K,{left:d.current.bbox.left/window.devicePixelRatio,top:d.current.bbox.top/window.devicePixelRatio},h):null}},38923:(G,A,e)=>{"use strict";e.d(A,{J:()=>a});var n=e(85960);const a=({x:o,y:r,children:i})=>n.createElement("div",{style:{position:"absolute",top:`${r}px`,left:`${o}px`}},i)},85538:(G,A,e)=>{"use strict";e.d(A,{K:()=>o});var n=e(66681),a=e(85960);const o=({children:r,left:i,top:g})=>{const u=(0,a.useMemo)(()=>(0,n.css)({position:"absolute",overflow:"visible",left:`${i}px`,top:`${g}px`}),[i,g]);return a.createElement("div",{className:u},r)}},28479:(G,A,e)=>{"use strict";e.d(A,{Jx:()=>a.J,K2:()=>o.K,TZ:()=>n.T});var n=e(17325),a=e(38923),o=e(85538)},45192:(G,A,e)=>{"use strict";e.d(A,{z:()=>o});var n=e(1713),a=e(18288);function o(i,g){const u="na",l=`${i.min!==void 0?i.min:u}-${i.max!==void 0?i.max:u}`,m=`${i.custom?.axisSoftMin!==void 0?i.custom.axisSoftMin:u}-${i.custom?.axisSoftMax!==void 0?i.custom.axisSoftMax:u}`,c=`${i.custom?.axisPlacement!==void 0?i.custom?.axisPlacement:n.LB.Auto}`,d=i.unit??a.j,f=i.custom?.scaleDistribution?r(i.custom.scaleDistribution):n.wf.Linear,E=i.custom?.axisLabel?i.custom.axisLabel:u;return`${d}/${l}/${m}/${c}/${f}/${E}/${g}`}function r(i){return i.type===n.wf.Log?`${i.type}${i.log}`:i.type}},6579:(G,A,e)=>{"use strict";e.d(A,{C:()=>l});var n=e(56375),a=e.n(n),o=e(85960);const r=.1,i=2,g=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Shift"," "]),u=m=>{let c=m.root.closest("[tabindex]"),d=new Set,f=null,E=null;if(!c)return;const v=(S,D)=>{const{cursor:M}=m;if(M.left===void 0||M.top===void 0)return;const{width:T,height:R}=m.over.style,[O,x]=[Math.floor(parseFloat(T)),Math.floor(parseFloat(R))];m.setCursor({left:(0,n.clamp)(M.left+S,0,O),top:(0,n.clamp)(M.top+D,0,x)})},h=S=>{if(d.size===0||!m){E=null;return}const T=(S-(E??S))*r;let R=0,O=0;d.has("ArrowUp")&&(O-=T),d.has("ArrowDown")&&(O+=T),d.has("ArrowLeft")&&(R-=T),d.has("ArrowRight")&&(R+=T),d.has("Shift")&&(R*=i,O*=i),v(R,O);const{cursor:x}=m;if(d.has(" ")&&x){const I=Number(m.over.style.height.slice(0,-2));m.setSelect({left:x.left<f?x.left:f,top:0,width:Math.abs(x.left-(f??x.left)),height:I},!1)}E=S,window.requestAnimationFrame(h)},p=S=>{if(S.key==="Tab"){m.setCursor({left:-5,top:-5});return}if(!g.has(S.key))return;if(S.preventDefault(),S.stopPropagation(),!d.has(S.key)){const M=d.size===0;d.add(S.key),f=S.key===" "&&f===null?m.cursor.left:f,M&&window.requestAnimationFrame(h)}},s=S=>{g.has(S.key)&&(d.delete(S.key),S.key===" "&&(S.preventDefault(),S.stopPropagation(),m.setSelect(m.select),f=null))},y=()=>{if(!c?.matches(":focus-visible"))return;const S=parseFloat(m.over.style.width),D=parseFloat(m.over.style.height);m.setCursor({left:S/2,top:D/2})},C=()=>{E=null,f=null,d.clear(),m.setSelect({left:0,top:0,width:0,height:0},!1)};c.addEventListener("keydown",p),c.addEventListener("keyup",s),c.addEventListener("focus",y),c.addEventListener("blur",C);const b=()=>{c?.removeEventListener("keydown",p),c?.removeEventListener("keyup",s),c?.removeEventListener("focus",y),c?.removeEventListener("blur",C),c=null};(m.hooks.destroy??=[]).push(b)},l=({config:m})=>((0,o.useLayoutEffect)(()=>m.addHook("init",u),[m]),null)},42929:(G,A,e)=>{"use strict";e.d(A,{_:()=>b,i:()=>y});var n=e(66681),a=e(85960),o=e(79088),r=e(62610),i=e(64282),g=e(14345),u=e(94372),l=e(1930),m=e(58309),c=e(8898),d=e(1713),f=e(47257),E=e(25142),v=e(68847),h=e(10642),p=e(79474);const s=10,y=({mode:D=d.f3.Single,sortOrder:M=d.As.None,sync:T,timeZone:R,config:O,renderTooltip:x,...I})=>{const L=(0,a.useRef)(),P=(0,f.l4)(),[N,F]=(0,a.useState)(null),[U,j]=(0,a.useState)(null),[V,_]=(0,a.useState)([]),[H,z]=(0,a.useState)(null),[K,Y]=(0,a.useState)(!1),k=(0,o.Z)();let q=null;const X="TooltipPlugin",te=(0,f.wW)(S);if((0,a.useEffect)(()=>{(0,p.Zp)(X,!0,`Focused series: ${N}, focused point: ${U}`)},[U,N]),(0,a.useLayoutEffect)(()=>{let ie;const oe=()=>{k()&&(Y(!0),L.current?.root.classList.add("plot-active"))},ue=()=>{k()&&(z(null),Y(!1),L.current?.root.classList.remove("plot-active"))};O.addHook("syncRect",(ge,Ue)=>ie=Ue),O.addHook("init",ge=>{L.current=ge,ge.over.addEventListener("mouseenter",oe),ge.over.addEventListener("mouseleave",ue),q=ge.root.closest("[tabindex]"),q&&(q.addEventListener("focus",oe),q.addEventListener("blur",ue)),T&&T()===r.m.Crosshair&&ge.root.classList.add("shared-crosshair")});const me=O.getTooltipInterpolator();return me?O.addHook("setCursor",ge=>{me(F,j,Ue=>{if(Ue){z(null);return}if(!ie)return;const{x:De,y:Pe}=b(ge,ie);De!==void 0&&Pe!==void 0&&z({x:De,y:Pe})},ge)}):(O.addHook("setLegend",ge=>{k()&&(j(ge.legend.idx),_(ge.legend.idxs.slice()))}),O.addHook("setCursor",ge=>{if(!ie||!k())return;const{x:Ue,y:De}=b(ge,ie);z(Ue!==void 0&&De!==void 0?{x:Ue,y:De}:null)}),O.addHook("setSeries",(ge,Ue)=>{k()&&F(Ue)})),()=>{z(null),L.current&&(L.current.over.removeEventListener("mouseleave",ue),L.current.over.removeEventListener("mouseenter",oe),q&&(q.removeEventListener("focus",oe),q.removeEventListener("blur",ue)))}},[O,z,Y,j,_]),U===null||!K&&T&&T()===r.m.Crosshair)return null;let se=I.data.fields[0];if(!se)return null;const de=se.display||(0,i.U)({field:se,timeZone:R,theme:P});let re=null,fe=de(se.values[U]).text;if(x)re=x(I.data,N,U);else{if(D===d.f3.Single&&N!==null){const ie=I.data.fields[N];if(!ie)return null;const oe=V?.[N]??U;fe=de(se.values[oe]).text;const me=(ie.display||(0,i.U)({field:ie,timeZone:R,theme:P}))(ie.values[oe]);re=a.createElement(v.c,{series:[{color:me.color||g.R,label:(0,u.CZ)(ie,I.data,I.frames),value:me?(0,l.zc)(me):null}],timestamp:fe})}if(D===d.f3.Multi){let ie=[];const oe=I.data,ue=oe.fields,me=[];for(let ge=0;ge<ue.length;ge++){const Ue=oe.fields[ge];if(!Ue||Ue===se||Ue.type===m.fS.time||Ue.type!==m.fS.number||Ue.config.custom?.hideFrom?.tooltip||Ue.config.custom?.hideFrom?.viz)continue;const De=I.data.fields[ge].values[V[ge]],Pe=Ue.display(De);me.push(De),ie.push({color:Pe.color||g.R,label:(0,u.CZ)(Ue,oe,I.frames),value:Pe?(0,l.zc)(Pe):null,isActive:N===ge})}if(M!==d.As.None){const ge=[...ie],Ue=c.sortValues(M);ie.sort((De,Pe)=>{const ye=ge.indexOf(De),Te=ge.indexOf(Pe);return Ue(me[ye],me[Te])})}re=a.createElement(v.c,{series:ie,timestamp:fe})}}return a.createElement(E.h_,{className:K?te.tooltipWrapper:void 0},re&&H&&a.createElement(h.S,{position:{x:H.x,y:H.y},offset:{x:s,y:s}},re))};function C({left:D,top:M},T){return D===void 0||M===void 0?!1:D<0||D>T.width||M<0||M>T.height}function b(D,M){let T,R;const O=D.cursor.left||0,x=D.cursor.top||0;if(C(D.cursor,M)){const I=D.posToIdx(O);if(x<0||x>M.height){let L=(0,p.ah)(D,I);L&&(R=M.top+L,O>=0&&O<=M.width&&(T=M.left+D.valToPos(D.data[0][D.posToIdx(O)],D.series[0].scale)))}}else T=M.left+O,R=M.top+x;return{x:T,y:R}}const S=D=>({tooltipWrapper:(0,n.css)({"z-index":D.zIndex.portal+1+" !important"})})},25690:(G,A,e)=>{"use strict";e.d(A,{c:()=>l,x:()=>E});var n=e(66681),a=e(85960),o=e(79873),r=e(47257),i=e(75064);const g=({onClick:h,"aria-label":p,style:s})=>{const y=(0,r.wW)(u);return a.createElement(i.h,{"aria-label":p??"Close",className:y,name:"times",onClick:h,style:s})},u=h=>(0,n.css)({position:"absolute",margin:"0px",right:h.spacing(1),top:h.spacing(1.25)});var l=(h=>(h[h.xOne=0]="xOne",h[h.xAll=1]="xAll",h[h.xyOne=2]="xyOne",h))(l||{});function m(h,p){return{...h,...p,style:{...h.style,...p.style}}}const c={style:{transform:"",pointerEvents:"none"},isHovering:!1,isPinned:!1,contents:null,plot:null,dismiss:()=>{}},d=5,f=h=>h!=null&&!h.ctrlKey&&!h.metaKey,E=({config:h,hoverMode:p,render:s,clientZoom:y=!1,queryZoom:C})=>{const b=(0,a.useRef)(null),[{plot:S,isHovering:D,isPinned:M,contents:T,style:R,dismiss:O},x]=(0,a.useReducer)(m,c),I=(0,a.useRef)(),L=(0,r.wW)(v),P=(0,a.useRef)(s);return P.current=s,(0,a.useLayoutEffect)(()=>{I.current={width:0,height:0,observer:new ResizeObserver(ie=>{let oe=I.current;for(const ue of ie)ue.borderBoxSize?.length>0?(oe.width=ue.borderBoxSize[0].inlineSize,oe.height=ue.borderBoxSize[0].blockSize):(oe.width=ue.contentRect.width,oe.height=ue.contentRect.height)})};let N=!1,F=!1,U=S,j=D,V=M,_=R,H=0,z=0,K=document.documentElement,Y=K.clientWidth-16,k=K.clientHeight-16;window.addEventListener("resize",ie=>{Y=K.clientWidth-5,k=K.clientHeight-5});let q=null,X=!1,te=!1;const se=(ie=!1)=>{X||(j?queueMicrotask(re):setTimeout(re,100),X=!0),ie&&(te=!0)},de=ie=>{ie.target.closest(`.${L.tooltipWrapper}`)!==b.current&&fe()},re=()=>{X=!1,te&&(_={pointerEvents:V?"all":"none"},b.current.closest(".react-grid-item")?.classList.toggle("context-menu-open",V),U.cursor._lock=V,V?(document.addEventListener("mousedown",de,!0),document.addEventListener("keydown",de,!0)):(document.removeEventListener("mousedown",de,!0),document.removeEventListener("keydown",de,!0)),te=!1);let ie={style:_,isPinned:V,isHovering:j,contents:j?P.current(U,U.cursor.idxs,q,V,fe):null,dismiss:fe};x(ie)},fe=()=>{V=!1,j=!1,U.setCursor({left:-10,top:-10}),se(!0)};h.addHook("init",ie=>{x({plot:U=ie}),y&&ie.over.addEventListener("mousedown",oe=>{if(f(oe)&&oe.button===0&&oe.shiftKey){F=!0,ie.cursor.drag.x=!1,ie.cursor.drag.y=!0;let ue=me=>{ie.cursor.drag.x=!0,ie.cursor.drag.y=!1,document.removeEventListener("mouseup",ue,!0)};document.addEventListener("mouseup",ue,!0)}},!0),ie.over.addEventListener("click",oe=>{j&&q!=null&&!V&&oe.target===ie.over&&(V=!0,se(!0))})}),h.addHook("setSelect",ie=>{if((y||C!=null)&&f(ie.cursor.event)){if(y&&F){if(ie.select.height>=d){for(let oe in ie.scales)if(oe!=="x"){const ue=ie.posToVal(ie.select.top,oe),me=ie.posToVal(ie.select.top+ie.select.height,oe);ie.setScale(oe,{min:me,max:ue})}N=!0}F=!1}else if(C!=null&&ie.select.width>=d){const oe=ie.posToVal(ie.select.left,"x"),ue=ie.posToVal(ie.select.left+ie.select.width,"x");C({from:oe,to:ue}),N=!1}}ie.setSelect({left:0,width:0,top:0,height:0},!1)}),(y||C!=null)&&h.setCursor({bind:{dblclick:ie=>()=>{if(!f(ie.cursor.event))return null;if(y&&N){for(let oe in ie.scales)oe!=="x"&&ie.setScale(oe,{min:null,max:null});N=!1}else if(C!=null){let oe=ie.scales.x;const ue=oe.min,me=oe.max,ge=(me-ue)/2;C({from:ue-ge,to:me+ge})}return null}}}),h.addHook("setData",ie=>{N=!1,F=!1}),h.addHook("setLegend",ie=>{let oe=U.cursor.idxs.findIndex((me,ge)=>ge>0&&me!=null),ue=oe!==-1;p===2&&(q=oe),ue?j||(j=!0):j&&(j=!1),se()}),h.addHook("setSeries",(ie,oe)=>{q=oe,se()}),h.addHook("setCursor",ie=>{let{left:oe=-10,top:ue=-10}=ie.cursor;if(oe>=0||ue>=0){let{width:me,height:ge}=I.current,Ue=ie.rect.left+oe,De=ie.rect.top+ue;z?De+ge<k||De-ge<0?z=0:z!==-ge&&(z=-ge):De+ge>k&&De-ge>=0&&(z=-ge),H?Ue+me<Y||Ue-me<0?H=0:H!==-me&&(H=-me):Ue+me>Y&&Ue-me>=0&&(H=-me);const Te=`${H!==0?"translateX(-100%)":""} translateX(${oe}px) ${z!==0?"translateY(-100%)":""} translateY(${ue}px)`;j&&(b.current!=null?b.current.style.transform=Te:(_.transform=Te,se()))}})},[h]),(0,a.useLayoutEffect)(()=>{const N=I.current;b.current!=null&&N.observer.observe(b.current)},[b.current]),S&&D?(0,o.createPortal)(a.createElement("div",{className:L.tooltipWrapper,style:R,ref:b},M&&a.createElement(g,{onClick:O}),T),S.over):null},v=h=>({tooltipWrapper:(0,n.css)({top:0,left:0,zIndex:h.zIndex.tooltip,whiteSpace:"pre",borderRadius:h.shape.radius.default,position:"absolute",background:h.colors.background.primary,border:`1px solid ${h.colors.border.weak}`,boxShadow:`0 4px 8px ${h.colors.background.primary}`,userSelect:"text"})})},80995:(G,A,e)=>{"use strict";e.d(A,{R:()=>r});var n=e(85960);const a=5,o=i=>i!=null&&!i.ctrlKey&&!i.metaKey,r=({onZoom:i,config:g,withZoomY:u=!1})=>((0,n.useLayoutEffect)(()=>{let l=!1,m=!1;u&&g.addHook("init",c=>{c.over.addEventListener("mousedown",d=>{if(o(d)&&d.button===0&&d.shiftKey){m=!0,c.cursor.drag.x=!1,c.cursor.drag.y=!0;let f=E=>{c.cursor.drag.x=!0,c.cursor.drag.y=!1,document.removeEventListener("mouseup",f,!0)};document.addEventListener("mouseup",f,!0)}},!0)}),g.addHook("setSelect",c=>{if(o(c.cursor.event)){if(u&&m){if(c.select.height>=a){for(let d in c.scales)if(d!=="x"){const f=c.posToVal(c.select.top,d),E=c.posToVal(c.select.top+c.select.height,d);c.setScale(d,{min:E,max:f})}l=!0}m=!1}else if(c.select.width>=a){const d=c.posToVal(c.select.left,"x"),f=c.posToVal(c.select.left+c.select.width,"x");i({from:d,to:f}),l=!1}}c.setSelect({left:0,width:0,top:0,height:0},!1)}),g.setCursor({bind:{dblclick:c=>()=>{if(!o(c.cursor.event))return null;if(u&&l){for(let d in c.scales)d!=="x"&&c.setScale(d,{min:null,max:null});l=!1}else{let d=c.scales.x;const f=d.min,E=d.max,v=(E-f)/2;i({from:f-v,to:E+v})}return null}}})},[g]),null)},20870:(G,A,e)=>{"use strict";e.d(A,{Cm:()=>r.C,Rb:()=>n.R,ii:()=>a.i,x2:()=>o.x});var n=e(80995),a=e(42929),o=e(25690),r=e(6579)},18288:(G,A,e)=>{"use strict";e.d(A,{L:()=>a,j:()=>n});const n="__fixed";class a{constructor(r){this.props=r}}},79474:(G,A,e)=>{"use strict";e.d(A,{Bj:()=>v,Kq:()=>f,Zp:()=>C,ah:()=>h,i7:()=>E,qt:()=>c});var n=e(58309),a=e(8499),o=e(1713),r=e(50284),i=e(95288),g=e(45192);const u=/\b(YYYY|YY|MMMM|MMM|MM|M|DD|D|WWWW|WWW|HH|H|h|AA|aa|a|mm|m|ss|s|fff)\b/g;function l(b){return b.replace(u,S=>`{${S}}`)}const m=(b,S,D)=>{let M=S%2?D[0]||D[2]:D[1]||D[3];return D[S]||!M?0:8},c={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[m,m,m,m],series:[],hooks:{}};var d=(b=>(b[b.Pos=1]="Pos",b[b.Neg=-1]="Neg",b))(d||{});function f(b){let S=[],{series:D,dir:M}=b,T=D.length-1,R=D.slice().reverse();return R.forEach((O,x)=>{if(x!==T){let I=R[x+1];S.push({series:[O,I],dir:-1*M})}}),S}function E(b){let S=new Map;return b.fields.forEach(({config:D,values:M,type:T},R)=>{if(R===0)return;let{custom:O}=D;if(O==null||O.hideFrom?.viz)return;let{stacking:x}=O;if(x==null)return;let{mode:I,group:L}=x;if(I===o.o0.None)return;let P=O.transform,N=p(P,M),F=O.drawStyle,U=F===o.l8.Bars?O.barAlignment:F===o.l8.Line?O.lineInterpolation:null,j=`${N}|${I}|${L}|${(0,g.z)(D,T)}|${F}|${U}`,V=S.get(j);V==null&&(V={series:[],dir:N},S.set(j,V)),V.series.push(R)}),[...S.values()]}function v(b,S,D){let M=Array(b.fields.length),T=S.length,R=b.length,O=T>0?Array(R).fill(0):[],x=T>0?Array(R).fill(!1):[],I=Array.from({length:T},()=>O.slice()),L=Array.from({length:T},()=>x.slice());if(S.forEach((P,N)=>{let F=L[N];P.series.forEach(U=>{let j=b.fields[U];if(j.config.custom?.hideFrom?.viz)return;let V=j.values;for(let _=0;_<R;_++)V[_]!=null&&(F[_]=!0)})}),b.fields.forEach((P,N)=>{let F=P.values;if(N===0){P.type===n.fS.time?M[N]=(0,a.J_)(P).values:M[N]=F;return}let{custom:U}=P.config;if(!U||U.hideFrom?.viz){M[N]=F;return}if(U.transform===o.pR.Constant){let V=F.findIndex(H=>H!=null),_=F[V];F=Array(F.length).fill(void 0),F[V]=_}else if(F=F.slice(),U.transform===o.pR.NegativeY)for(let V=0;V<F.length;V++)F[V]!=null&&(F[V]*=-1);let j=U.stacking?.mode;if(!j||j===o.o0.None)M[N]=F;else{let V=S.findIndex(K=>K.series.indexOf(N)>-1),_=I[V],H=L[V],z=M[N]=Array(R);for(let K=0;K<R;K++){let Y=F[K];Y!=null?z[K]=_[K]+=Y:z[K]=H[K]?_[K]:Y}}}),D){let P=M.map((N,F)=>{let U=S.findIndex(j=>j.series.indexOf(F)>-1);return U!==-1?I[U]:N});D({totals:P})}return b.fields.forEach((P,N)=>{if(N===0||P.config.custom?.hideFrom?.viz)return;if(P.config.custom?.stacking?.mode===o.o0.Percent){let U=S.findIndex(H=>H.series.indexOf(N)>-1),j=I[U],V=S[U],_=M[N];for(let H=0;H<R;H++){let z=_[H];z!=null&&(_[H]=j[H]===0?0:V.dir*(z/j[H]))}}}),M}function h(b,S){let D,M=1,T=1,R=b.data[1][S],O=b.data[1][S];for(let x=1;x<b.data.length;x++){const L=b.data[x][S];L!=null&&(R==null?R=L:L>R&&(R=b.data[x][S],M=x),O==null?O=L:L<O&&(O=b.data[x][S],T=x))}return O==null&&R==null?D=void 0:O!=null&&R!=null?D=(b.valToPos(O,b.series[T].scale)+b.valToPos(R,b.series[M].scale))/2:D=b.valToPos(O||R,b.series[M||T].scale),D!==void 0&&D<0&&(D=b.bbox.height/devicePixelRatio),D}function p(b,S){const D=s(S);return b===o.pR.NegativeY?D?1:-1:D?-1:1}function s(b,S=100){const D=b.length;if(D===0)return!1;let M=0,T=D-1;for(;M<=T&&b[M]==null;)M++;for(;T>=M&&b[T]==null;)T--;let R=0,O=0;if(T>=M){const x=Math.max(1,Math.floor((T-M+1)/S));for(let I=M;I<=T;I+=x){const L=b[I];L!=null&&typeof L=="number"&&(L<0||Object.is(L,-0)?R++:L>0&&O++)}if(R>O)return!0}return!1}const y=(0,i.h)("uPlot"),C=y.logger;(0,r.x)("graphng",void 0,y)},19225:(G,A,e)=>{"use strict";e.d(A,{k:()=>p});var n=e(29175),a=e.n(n),o=e(56375),r=e(85960),i=e(74409),g=e(1713),u=e(67317),l=e(8441),m=e(68847),c=e(4371);const d=({dimensions:y,activeDimensions:C,pos:b,timeZone:S})=>{let D=null;if(C.xAxis===null)return null;C.yAxis&&(D=C.yAxis[0]);const M=C.xAxis[1]?(0,i.jC)(y.xAxis,C.xAxis[0],C.xAxis[1]):b.x,T=(0,c.wu)(y.yAxis.columns,y.xAxis.columns,M,S),R=T.time,O=T.results.map((x,I)=>({color:x.color,label:x.label,value:x.value,isActive:D===I}));return r.createElement(m.c,{series:O,timestamp:R})};d.displayName="MultiModeGraphTooltip";var f=e(1930),E=e(94372);const v=({dimensions:y,activeDimensions:C,timeZone:b})=>{if(C.yAxis===null||C.yAxis[1]===void 0||C.xAxis===null||C.xAxis[1]===void 0)return null;const S=(0,i.jC)(y.xAxis,C.xAxis[0],C.xAxis[1]),D=(0,i.$q)(y.xAxis,C.xAxis[0]),M=D.display?(0,f.zc)(D.display(S)):S,T=(0,i.$q)(y.yAxis,C.yAxis[0]),R=(0,i.jC)(y.yAxis,C.yAxis[0],C.yAxis[1]),O=T.display,x=O(R);return r.createElement(m.c,{series:[{color:x.color,label:(0,E.CZ)(T),value:(0,f.zc)(x)}],timestamp:M})};v.displayName="SingleModeGraphTooltip";const h=({mode:y=g.f3.Single,dimensions:C,activeDimensions:b,pos:S,timeZone:D})=>!b||!b.xAxis?null:y==="single"?r.createElement(v,{dimensions:C,activeDimensions:b,timeZone:D}):r.createElement(d,{dimensions:C,activeDimensions:b,pos:S,timeZone:D});h.displayName="GraphTooltip";class p extends r.PureComponent{constructor(){super(...arguments),this.state={isTooltipVisible:!1,isContextVisible:!1},this.element=null,this.$element=null,this.onPlotSelected=(C,b)=>{const{onHorizontalRegionSelected:S}=this.props;S&&S(b.xaxis.from,b.xaxis.to)},this.onPlotHover=(C,b,S)=>{this.setState({isTooltipVisible:!0,activeItem:S,pos:b})},this.onPlotClick=(C,b,S)=>{this.setState({isContextVisible:!0,isTooltipVisible:!1,contextItem:S,contextPos:b})},this.renderTooltip=()=>{const{children:C,series:b,timeZone:S}=this.props,{pos:D,activeItem:M,isTooltipVisible:T}=this.state;let R;if(!T||!D||b.length===0||(r.Children.forEach(C,j=>{if(R)return;(j&&j.type&&(j.type.displayName||j.type.name))===u.I.displayName&&(R=j)}),!R))return null;const O=R.props,x=O.mode||"single";if(!M&&x==="single")return null;const I=O.tooltipComponent||h,L=M?M.series.seriesIndex:0,P=M?M.dataIndex:void 0,N={xAxis:[L,P],yAxis:M?[M.series.seriesIndex,M.dataIndex]:null},F={dimensions:{xAxis:(0,i.q2)("xAxis",b.map(j=>j.timeField)),yAxis:(0,i.q2)("yAxis",b.map(j=>j.valueField))},activeDimensions:N,pos:D,mode:O.mode||g.f3.Single,timeZone:S},U=r.createElement(I,{...F});return r.cloneElement(R,{content:U,position:{x:D.pageX,y:D.pageY},offset:{x:10,y:10}})},this.renderContextMenu=()=>{const{series:C}=this.props,{contextPos:b,contextItem:S,isContextVisible:D}=this.state;if(!D||!b||!S||C.length===0)return null;const M=S?S.series.seriesIndex:0,T=S?S.dataIndex:void 0,R={xAxis:[M,T],yAxis:S?[S.series.seriesIndex,S.dataIndex]:null},O={xAxis:(0,i.q2)("xAxis",C.map(P=>P.timeField)),yAxis:(0,i.q2)("yAxis",C.map(P=>P.valueField))},x=()=>this.setState({isContextVisible:!1}),I=()=>({datapoint:S.datapoint,dataIndex:S.dataIndex,series:S.series,seriesIndex:S.series.seriesIndex,pageX:b.pageX,pageY:b.pageY}),L={x:b.pageX,y:b.pageY,onClose:x,getContextMenuSource:I,timeZone:this.props.timeZone,dimensions:O,contextDimensions:R};return r.createElement(l.w,{...L})},this.getBarWidth=()=>{const{series:C}=this.props;return Math.min(...C.map(b=>b.timeStep))}}componentDidUpdate(C,b){C!==this.props&&this.draw()}componentDidMount(){this.draw(),this.element&&(this.$element=a()(this.element),this.$element.bind("plotselected",this.onPlotSelected),this.$element.bind("plothover",this.onPlotHover),this.$element.bind("plotclick",this.onPlotClick))}componentWillUnmount(){this.$element&&this.$element.unbind("plotselected",this.onPlotSelected)}getYAxes(C){return C.length===0?[{show:!0,min:-1,max:1}]:(0,o.uniqBy)(C.map(b=>{const S=b.yAxis?b.yAxis.index:1,D=b.yAxis&&b.yAxis.min&&!isNaN(b.yAxis.min)?b.yAxis.min:null,M=b.yAxis&&b.yAxis.tickDecimals&&!isNaN(b.yAxis.tickDecimals)?b.yAxis.tickDecimals:null;return{show:!0,index:S,position:S===1?"left":"right",min:D,tickDecimals:M}}),b=>b.index)}draw(){if(this.element===null)return;const{width:C,series:b,timeRange:S,showLines:D,showBars:M,showPoints:T,isStacked:R,lineWidth:O,timeZone:x,onHorizontalRegionSelected:I}=this.props;if(!C)return;const L=C/100,P=S.from.valueOf(),N=S.to.valueOf(),F=this.getYAxes(b),U={legend:{show:!1},series:{stack:R,lines:{show:D,lineWidth:O,zero:!1},points:{show:T,fill:1,fillColor:!1,radius:2},bars:{show:M,fill:1,barWidth:M?this.getBarWidth()/1.5:1,zero:!1,lineWidth:O},shadowSize:0},xaxis:{timezone:x,show:!0,mode:"time",min:P,max:N,label:"Datetime",ticks:L,timeformat:(0,c.mc)(L,P,N),tickFormatter:c.sV},yaxes:F,grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:I?"x":null,color:"#666"},crosshair:{mode:"x"}};try{a().plot(this.element,b.filter(j=>j.isVisible),U)}catch(j){throw console.error("Graph rendering error",j,U,b),new Error("Error rendering panel")}}render(){const{ariaLabel:C,height:b,width:S,series:D}=this.props,M=D.length===0,T=this.renderTooltip(),R=this.renderContextMenu();return r.createElement("div",{className:"graph-panel","aria-label":C},r.createElement("div",{className:"graph-panel__chart",ref:O=>this.element=O,style:{height:b,width:S},onMouseLeave:()=>{this.setState({isTooltipVisible:!1})}}),M&&r.createElement("div",{className:"datapoints-warning"},"No data"),T,R)}}p.defaultProps={showLines:!0,showPoints:!1,showBars:!1,isStacked:!1,lineWidth:1};const s=null},8441:(G,A,e)=>{"use strict";e.d(A,{b:()=>E,w:()=>f});var n=e(66681),a=e(85960),o=e(74409),r=e(12537),i=e(19841),g=e(67297),u=e(74042),l=e(71862),m=e(69707),c=e(54467),d=e(47257);const f=({getContextMenuSource:h,timeZone:p,itemsGroup:s,dimensions:y,contextDimensions:C,...b})=>{const S=h(),D=s?s.map(R=>({...R,items:R.items?.filter(O=>O.label)})):[],M=()=>{if(!S)return null;let R;if(y?.yAxis&&C?.yAxis?.[1]){const x=(0,o.jC)(y.yAxis,C.yAxis[0],C.yAxis[1]),I=S.series.valueField.display;R=I(x)}const O=(0,r.dq)(S.datapoint[0],{defaultWithMS:S.series.hasMsResolution,timeZone:p});return a.createElement(E,{timestamp:O,seriesColor:S.series.color,displayName:S.series.alias||S.series.label,displayValue:R})},T=()=>D?.map((R,O)=>a.createElement(l.k,{key:`${R.label}${O}`,label:R.label},(R.items||[]).map(x=>a.createElement(m.s,{key:`${x.label}`,url:x.url,label:x.label,target:x.target,icon:x.icon,active:x.active,onClick:x.onClick}))));return a.createElement(i.x,{...b,renderMenuItems:T,renderHeader:M})},E=({timestamp:h,seriesColor:p,displayName:s,displayValue:y})=>{const C=(0,d.wW)(v);return a.createElement("div",{className:C.wrapper},a.createElement("strong",null,h),a.createElement(u.Lh,null,a.createElement("div",null,a.createElement(c.F,{color:p}),a.createElement("span",{className:C.displayName},s)),y&&a.createElement(g.W,{value:y})))};function v(h){return{wrapper:(0,n.css)({padding:h.spacing(.5,1),fontSize:h.typography.size.sm,zIndex:h.zIndex.tooltip}),displayName:(0,n.css)({whiteSpace:"nowrap",paddingLeft:h.spacing(.5)})}}},81774:(G,A,e)=>{"use strict";e.d(A,{U:()=>r});var n=e(56375),a=e.n(n),o=e(85960);class r extends o.Component{constructor(g){super(g),this.onSeriesToggle=this.onSeriesToggle.bind(this),this.state={hiddenSeries:[],toggledSeries:g.series}}componentDidUpdate(g){const{series:u}=this.props;(0,n.isEqual)(g.series,u)||this.setState({hiddenSeries:[],toggledSeries:u})}onSeriesToggle(g,u){const{series:l,onHiddenSeriesChanged:m}=this.props,{hiddenSeries:c}=this.state;if(u.ctrlKey||u.metaKey||u.shiftKey){const v=c.indexOf(g)>-1?c.filter(p=>p!==g):c.concat([g]),h=l.map(p=>({...p,isVisible:v.indexOf(p.label)===-1}));this.setState({hiddenSeries:v,toggledSeries:h},()=>m?m(v):void 0);return}const d=l.map(v=>v.label),f=c.length+1===d.length?[]:(0,n.difference)(d,[g]),E=l.map(v=>({...v,isVisible:f.indexOf(v.label)===-1}));this.setState({hiddenSeries:f,toggledSeries:E},()=>m?m(f):void 0)}render(){const{children:g}=this.props,{toggledSeries:u}=this.state;return g({onSeriesToggle:this.onSeriesToggle,toggledSeries:u})}}},16223:(G,A,e)=>{"use strict";e.d(A,{U:()=>l});var n=e(66681),a=e(85960),o=e(50263),r=e(33012),i=e(47257),g=e(19225);const u=(c,d=!1,f=!1)=>{const E=c.reduce((h,p)=>h+(p[1]||0),0)===0,v=!c.reduce((h,p)=>h&&p[1]!==null,!0);return d&&v||f&&E},l=c=>{const{series:d,timeRange:f,width:E,height:v,showBars:h,showLines:p,showPoints:s,sortLegendBy:y,sortLegendDesc:C,legendDisplayMode:b,legendVisibility:S,placement:D,onSeriesToggle:M,onToggleSort:T,hideEmpty:R,hideZero:O,isStacked:x,lineWidth:I,onHorizontalRegionSelected:L,timeZone:P,children:N,ariaLabel:F}=c,{graphContainer:U,wrapper:j,legendContainer:V}=(0,i.wW)(m,c.placement),_=d.reduce((H,z)=>u(z.data,R,O)?H:H.concat([{label:z.label,color:z.color||"",disabled:!z.isVisible,yAxis:z.yAxis.index,getDisplayValues:()=>z.info||[]}]),[]);return a.createElement("div",{className:j,"aria-label":F},a.createElement("div",{className:U},a.createElement(g.k,{series:d,timeRange:f,timeZone:P,showLines:p,showPoints:s,showBars:h,width:E,height:v,isStacked:x,lineWidth:I,onHorizontalRegionSelected:L},N)),S&&a.createElement("div",{className:V},a.createElement(o.$,{hideHorizontalTrack:!0},a.createElement(r.l,{items:_,displayMode:b,placement:D,sortBy:y,sortDesc:C,onLabelClick:(H,z)=>{M&&M(H.label,z)},onToggleSort:T}))))},m=(c,d)=>({wrapper:(0,n.css)({display:"flex",flexDirection:d==="bottom"?"column":"row"}),graphContainer:(0,n.css)({minHeight:"65%",flexGrow:1}),legendContainer:(0,n.css)({padding:"10px 0",maxHeight:d==="bottom"?"35%":"none"})})},4371:(G,A,e)=>{"use strict";e.d(A,{mc:()=>l,sV:()=>u,wu:()=>g});var n=e(1930),a=e(94372),o=e(12537),r=e(70991);const i=(m,c)=>{let d=0,f=m.values.length-1,E;for(;;){if(d>f)return Math.max(f,0);E=Math.floor((d+f)/2);const v=m.values[E];if(v===c)return E;v&&v<c?d=E+1:f=E-1}},g=(m,c,d,f)=>{let E,v,h,p,s;const y=[];let C,b;for(E=0;E<m.length;E++){v=m[E];const S=c[E];h=i(S,d),p=d-S.values[h],s=S.values[h],(C===void 0||p>=0&&(p<C||C<0)||p<0&&p>C)&&(C=p,b=S.display?(0,n.zc)(S.display(s)):s);const D=v.display(v.values[h]);y.push({value:(0,n.zc)(D),datapointIndex:h,seriesIndex:E,color:D.color,label:(0,a.CZ)(v),time:S.display?(0,n.zc)(S.display(s)):s})}return{results:y,time:b}},u=(m,c)=>(0,o.dq)(m,{format:c?.options?.timeformat,timeZone:c?.options?.timezone}),l=(m,c,d)=>{if(c&&d&&m){const f=d-c,E=f/m/1e3,v=86400010,h=31536e6;return E<=10?r.U6.interval.millisecond:E<=45?r.U6.interval.second:f<=v?r.U6.interval.minute:E<=8e4?r.U6.interval.hour:f<=h?r.U6.interval.day:E<=31536e3?r.U6.interval.month:r.U6.interval.year}return r.U6.interval.minute}},18371:(G,A,e)=>{"use strict";e.d(A,{d:()=>h});var n=e(85960),a=e(34269),o=e(45691),r=e(34103),i=e(70274),g=e(58309),u=e(43471),l=e(47475),m=e(76738),c=e(29627),d=e(34305),f=e(79474),E=e(39585);function v(p,s,y=[]){for(const C of y)if(typeof C=="function"){if(!C(p,s))return!1}else if(s[C]!==p[C])return!1;return!0}class h extends n.Component{constructor(s){super(s),this.panelContext={},this.subscription=new a.w0,this.getTimeRange=()=>this.props.timeRange;let y=this.prepState(s);y.alignedData=y.config.prepData([y.alignedFrame]),this.state=y,this.plotInstance=n.createRef()}prepState(s,y=!0){let C=null;const{frames:b,fields:S,preparePlotFrame:D}=s,T=(D||E.Rn)(b,S||{x:r.Ls.get(i.mi.firstTimeField).get({}),y:r.Ls.get(i.mi.byTypes).get(new Set([g.fS.number,g.fS.enum]))},s.timeRange);if((0,f.Zp)("GraphNG",!1,"data aligned",T),T){let R=this.state?.config;y&&(R=s.prepConfig(T,this.props.frames,this.getTimeRange),(0,f.Zp)("GraphNG",!1,"config prepared",R)),C={alignedFrame:T,config:R},(0,f.Zp)("GraphNG",!1,"data prepared",C.alignedData)}return C}handleCursorUpdate(s){const y=s.payload?.point?.time,C=this.plotInstance.current;if(C&&y){const b=C.valToPos(y,"x");let S;if(b&&(S=(0,f.ah)(C,C.posToIdx(b))),!S||!b)return;C.setCursor({left:b,top:S})}}componentDidMount(){this.panelContext=this.context;const{eventBus:s}=this.panelContext;this.subscription.add(s.getStream(u.es).pipe((0,o.p)(50)).subscribe({next:y=>{s!==y.origin&&this.handleCursorUpdate(y)}})),this.subscription.add(s.getStream(l.IA).pipe((0,o.p)(50)).subscribe({next:y=>this.handleCursorUpdate(y)})),this.subscription.add(s.getStream(u.xH).pipe((0,o.p)(50)).subscribe({next:()=>{const y=this.plotInstance?.current;y&&!y.cursor._lock&&y.setCursor({left:-10,top:-10})}}))}componentDidUpdate(s){const{frames:y,structureRev:C,timeZone:b,propsToDiff:S}=this.props,D=!v(s,this.props,S);if(y!==s.frames||D||b!==s.timeZone){let M=this.prepState(this.props,!1);M&&((this.state.config===void 0||b!==s.timeZone||C!==s.structureRev||!C||D)&&(M.config=this.props.prepConfig(M.alignedFrame,this.props.frames,this.getTimeRange),(0,f.Zp)("GraphNG",!1,"config recreated",M.config)),M.alignedData=M.config.prepData([M.alignedFrame]),this.setState(M))}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:s,height:y,children:C,renderLegend:b}=this.props,{config:S,alignedFrame:D,alignedData:M}=this.state;return S?n.createElement(c.AY,{width:s,height:y,legend:b(S)},(T,R)=>n.createElement(d.N,{config:S,data:M,width:T,height:R,plotRef:O=>this.plotInstance.current=O},C?C(S,D):null)):null}}h.contextType=m.bb},79164:(G,A,e)=>{"use strict";e.d(A,{z:()=>o});var n=e(85960);const a=n.createContext({}),o=()=>{const{data:r,dimFields:i,mapSeriesIndexToDataFrameFieldIndex:g}=(0,n.useContext)(a),u=(0,n.useCallback)(()=>{const l=i.x;let m=null;for(let c=0;c<r.fields.length;c++)if(l(r.fields[c],r,[r])){m=r.fields[c];break}return m},[r,i]);return{dimFields:i,mapSeriesIndexToDataFrameFieldIndex:g,getXAxisField:u,alignedData:r}}},39585:(G,A,e)=>{"use strict";e.d(A,{z1:()=>E,N$:()=>c,Rn:()=>f});var n=e(58309),a=e(85334),o=e(1713),r=e(18288);const i={threshold:(h,p,s)=>h+s,midpoint:(h,p,s)=>(h+p)/2,plusone:(h,p,s)=>h+1};function g(h){if(h.frame.length===0)return h.frame;let p=!0,{frame:s,refFieldName:y,refFieldPseudoMax:C,refFieldPseudoMin:b,insertMode:S}=h;S||(S=i.threshold);const D=c(s,y);if(D==null)return s;D.state={...D.state,nullThresholdApplied:!0};const M=s.fields.map(R=>R.config.custom?.insertNulls||D.config.interval||null),T=new Set(M);if(T.delete(null),T.size===0)return s;if(T.size===1){const R=T.values().next().value;if(R<=0)return s;const O=D.values,x=s.fields.map(L=>L.values),I=u(O,x,R,b,C,S,p);return I===x?s:{...s,length:I[0].length,fields:s.fields.map((L,P)=>({...L,values:I[P]}))}}return s}function u(h,p,s,y=null,C=null,b,S){const D=h.length,M=[];if(y!=null&&y<h[0]){let x=Math.ceil((h[0]-y)/s),I=h[0]-x*s;for(;I<h[0];)M.push(b(I-s,I,s)),I+=s}M.push(h[0]);let T=h[0];for(let x=1;x<D;x++){const I=h[x];for(;I-T>s&&(M.push(b(T,I,s)),T+=s,!!S););M.push(I),T=I}if(C!=null&&C>T)for(;T+s<C;)M.push(b(T,C,s)),T+=s;const R=M.length;if(R===D)return p;const O=[];for(let x of p){let I;if(x!==h){I=Array(R);for(let L=0,P=0;L<R;L++)I[L]=h[P]===M[L]?x[P++]:null}else I=M;O.push(I)}return O}function l(h,p,s){let y,C;for(let b=0;b<p.length;b++)if(p[b]==null)C==null&&y!=null&&(C=b);else{if(C!=null){if(h[b]-y<s)for(;C<b;)p[C++]=void 0;C=null}y=h[b]}return p}function m(h){return h.type===n.fS.number&&h.config.custom?.drawStyle===o.l8.Bars&&!h.config.custom?.hideFrom?.viz}function c(h,p){return h.fields.find(s=>p!=null?s.name===p:s.type===n.fS.time)}function d(h,p){const s=c(h,p);let y=s?.values;for(let C=0;C<h.fields.length;C++){let b=h.fields[C];if(b===s||m(b))continue;let S=b.config.custom?.spanNulls;typeof S=="number"&&S!==-1&&y&&(b.values=l(y,b.values,S))}return h}function f(h,p,s){let y;e:for(let D of h)for(let M of D.fields)if(p.x(M,D,h)){y=M;break e}h=h.map(D=>y?.state?.nullThresholdApplied?D:g({frame:D,refFieldName:y.name,refFieldPseudoMin:s?.from.valueOf(),refFieldPseudoMax:s?.to.valueOf()}));let C=0;h.forEach(D=>{D.fields.forEach(M=>{m(M)&&(M.config.custom={...M.config.custom,spanNulls:-1},C++)})});let b=1/0;C>1&&h.forEach(D=>{if(!D.fields.some(m))return;const M=y.values;for(let T=0;T<M.length;T++)T>0&&(b=Math.min(b,M[T]-M[T-1]))});let S=(0,a._9)({frames:h,joinBy:p.x,keep:p.y,keepOriginIndices:!0});return S?(S=d(S,y.name),b!==1/0&&(S.fields.forEach((D,M)=>{let T=D.values;if(M===0){let R=T[T.length-1];T.push(R+b,R+2*b)}else m(D)?T.push(null,null):T.push(void 0,void 0)}),S.length+=2),S):null}function E(h,p){const s="na",y=`${h.min!==void 0?h.min:s}-${h.max!==void 0?h.max:s}`,C=`${h.custom?.axisSoftMin!==void 0?h.custom.axisSoftMin:s}-${h.custom?.axisSoftMax!==void 0?h.custom.axisSoftMax:s}`,b=`${h.custom?.axisPlacement!==void 0?h.custom?.axisPlacement:o.LB.Auto}`,S=h.unit??r.j,D=h.custom?.scaleDistribution?v(h.custom.scaleDistribution):o.wf.Linear,M=h.custom?.axisLabel?h.custom.axisLabel:s;return`${S}/${y}/${C}/${b}/${D}/${M}/${p}`}function v(h){return h.type===o.wf.Log?`${h.type}${h.log}`:h.type}},72171:(G,A,e)=>{"use strict";e.d(A,{p:()=>L});var n=e(85960),a=e(76738),o=e(21813),r=e(47257),i=e(18371),g=e(56375),u=e(56871),l=e(58309),m=e(1930),c=e(64282),d=e(73859),f=e(14345),E=e(94372),v=e(62610),h=e(43471),p=e(1713),s=e(65277),y=e(70741),C=e(79474),b=e(39585);const S=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),D=Array(53);for(let P=0;P<D.length;P++)D[P]=2**P;const M=(P,N=1)=>P==null?"-":P.toFixed(N),T={drawStyle:p.l8.Line,showPoints:p.Jp.Auto,axisPlacement:p.LB.Auto},R=({frame:P,theme:N,timeZones:F,getTimeRange:U,eventBus:j,sync:V,allFrames:_,renderers:H,tweakScale:z=k=>k,tweakAxis:K=k=>k,eventsScope:Y="__global_"})=>{const k=new s.U(F[0]);let q;k.setPrepData(Ue=>(q=Ue[0],(0,C.Bj)(Ue[0],k.getStackingGroups())));const X=P.fields[0];if(!X)return k;const te="x";let se="_x",de="";const re=X.config.custom?.axisPlacement!==p.LB.Hidden?p.LB.Bottom:p.LB.Hidden,fe=X.config.custom?.axisPlacement!==p.LB.Hidden;if(X.type===l.fS.time){se="time",k.addScale({scaleKey:te,orientation:p.wN.Horizontal,direction:p.bQ.Right,isTime:!0,range:()=>{const De=U();return[De.from.valueOf(),De.to.valueOf()]}});const Ue=F.length>1?(De,Pe)=>Pe.map((ye,Te)=>Te<2?null:ye):void 0;for(let De=0;De<F.length;De++){const Pe=F[De];k.addAxis({scaleKey:te,isTime:!0,placement:re,show:fe,label:X.config.custom?.axisLabel,timeZone:Pe,theme:N,grid:{show:De===0&&X.config.custom?.axisGridShow},filter:Ue})}F.length>1&&k.addHook("drawAxes",De=>{De.ctx.save(),De.ctx.fillStyle=N.colors.text.primary,De.ctx.textAlign="left",De.ctx.textBaseline="bottom";let Pe=0;De.axes.forEach(ye=>{if(ye.side===2){let Te=ye._pos+ye._size;De.ctx.fillText(F[Pe],De.bbox.left,Te*u.Z.pxRatio),Pe++}}),De.ctx.restore()})}else X.config.unit&&(se=X.config.unit),k.addScale({scaleKey:te,orientation:p.wN.Horizontal,direction:p.bQ.Right,range:(Ue,De,Pe)=>[X.config.min??De,X.config.max??Pe]}),k.addAxis({scaleKey:te,placement:re,show:fe,label:X.config.custom?.axisLabel,theme:N,grid:{show:X.config.custom?.axisGridShow},formatValue:(Ue,De)=>(0,m.zc)(X.display(Ue,De))});let ie=H?.flatMap(Ue=>Object.values(Ue.fieldMap).filter(De=>Ue.indicesOnly.indexOf(De)===-1))??[],oe;for(let Ue=1;Ue<P.fields.length;Ue++){const De=P.fields[Ue],Pe={...De.config,custom:{...T,...De.config.custom}},ye=Pe.custom;if(De===X||De.type!==l.fS.number&&De.type!==l.fS.enum)continue;let Te=De.display??M;De.config.custom?.stacking?.mode===p.o0.Percent&&(Te=(0,c.U)({field:{...De,config:{...De.config,unit:"percentunit"}},theme:N}));const nt=(0,b.z1)(Pe,De.type),ct=(0,d.fD)(De),xe=(0,d.YO)(De,N).color;if(k.addScale(z({scaleKey:nt,orientation:p.wN.Vertical,direction:p.bQ.Up,distribution:ye.scaleDistribution?.type,log:ye.scaleDistribution?.log,linearThreshold:ye.scaleDistribution?.linearThreshold,min:De.config.min,max:De.config.max,softMin:ye.axisSoftMin,softMax:ye.axisSoftMax,centeredZero:ye.axisCenteredZero,range:ye.stacking?.mode===p.o0.Percent?(qe,rt,mt)=>(rt=rt<0?-1:0,mt=mt>0?1:0,[rt,mt]):De.type===l.fS.enum?(qe,rt,mt)=>[-1,De.config.type.enum.text.length]:void 0,decimals:De.config.decimals},De)),de||(de=nt),ye.axisPlacement!==p.LB.Hidden){let qe;ye.axisColorMode===p.yK.Series&&(ct.isByValue&&De.config.custom?.gradientMode===p.FI.Scheme&&ct.id===f.S.Thresholds?qe=(0,y.P2)(1,N,ct,De.config.thresholds):qe=xe);const rt={border:{show:ye.axisBorderShow||!1,width:1/devicePixelRatio,stroke:qe||N.colors.text.primary},ticks:{show:ye.axisBorderShow||!1,stroke:qe||N.colors.text.primary},color:qe||N.colors.text.primary};let mt,Je,Ae;if(S.has(Pe.unit))mt=D;else if(De.type===l.fS.enum){let Ke=De.config.type.enum.text;Ae=Ke.map((Xe,ne)=>ne),Je=Ke}k.addAxis(K({scaleKey:nt,label:ye.axisLabel,size:ye.axisWidth,placement:ye.axisPlacement??p.LB.Auto,formatValue:(Ke,Xe)=>(0,m.zc)(Te(Ke,Xe)),theme:N,grid:{show:ye.axisGridShow},decimals:De.config.decimals,distr:ye.scaleDistribution?.type,splits:Ae,values:Je,incrs:mt,...rt},De))}const Me=ye.drawStyle===p.l8.Points?p.Jp.Always:ye.showPoints;let He=()=>null;ye.spanNulls!==!0&&(He=(qe,rt,mt,Je)=>{let Ae=[],Ke=qe.series[rt];if(!mt&&Je&&Je.length){const[Xe,ne]=Ke.idxs,Z=qe.data[0],ee=qe.data[rt],ce=Math.round(qe.valToPos(Z[Xe],"x",!0)),be=Math.round(qe.valToPos(Z[ne],"x",!0));Je[0][0]===ce&&Ae.push(Xe);for(let Ee=0;Ee<Je.length;Ee++){let Be=Je[Ee],Le=Je[Ee+1];if(Le&&Be[1]===Le[0]){let ze=qe.posToIdx(Be[1],!0);if(ee[ze]==null)for(let Fe=1;Fe<100;Fe++){if(ee[ze+Fe]!=null){ze+=Fe;break}if(ee[ze-Fe]!=null){ze-=Fe;break}}Ae.push(ze)}}Je[Je.length-1][1]===be&&Ae.push(ne)}return Ae.length?Ae:null});let{fillOpacity:Ve}=ye,Oe=null,Ne=null;if(De.state?.origin){oe||(oe=O(P,_));const qe=_[De.state.origin.frameIndex],rt=qe?.fields[De.state.origin.fieldIndex],mt=(0,E.CZ)(rt??De,qe,_);if(ie.indexOf(mt)>=0)Oe=()=>null,Ne=()=>{};else if(ye.transform===p.pR.Constant){const Je=u.Z.paths.linear();Oe=(Ae,Ke)=>{const Xe=Ae._data,ne=U();let Z=[ne.from.valueOf(),ne.to.valueOf()],ee=Xe[Ke].find(Ee=>Ee!=null),ce=[ee,ee],be=Xe.slice();return be[0]=Z,be[Ke]=ce,Je({...Ae,_data:be},Ke,0,1)}}if(ye.fillBelowTo){const Je=P.fields.find(ne=>ye.fillBelowTo===ne.name||ye.fillBelowTo===ne.config?.displayNameFromDS||ye.fillBelowTo===(0,E.CZ)(ne,P,_)),Ae=Je?(0,E.CZ)(Je,P,_):ye.fillBelowTo,Ke=oe.get(mt),Xe=oe.get(Ae);(0,g.isNumber)(Xe)&&(0,g.isNumber)(Ke)?(k.addBand({series:[Ke,Xe],fill:void 0}),Ve||(Ve=35)):Ve=0}}let _e;ct.id===f.S.Thresholds&&(_e=qe=>(0,d.YO)(q.fields[qe],N).color),k.addSeries({pathBuilder:Oe,pointsBuilder:Ne,scaleKey:nt,showPoints:Me,pointsFilter:He,colorMode:ct,fillOpacity:Ve,theme:N,dynamicSeriesColor:_e,drawStyle:ye.drawStyle,lineColor:ye.lineColor??xe,lineWidth:ye.lineWidth,lineInterpolation:ye.lineInterpolation,lineStyle:ye.lineStyle,barAlignment:ye.barAlignment,barWidthFactor:ye.barWidthFactor,barMaxWidth:ye.barMaxWidth,pointSize:ye.pointSize,spanNulls:ye.spanNulls||!1,show:!ye.hideFrom?.viz,gradientMode:ye.gradientMode,thresholds:Pe.thresholds,hardMin:De.config.min,hardMax:De.config.max,softMin:ye.axisSoftMin,softMax:ye.axisSoftMax,dataFrameFieldIndex:De.state?.origin}),ye.thresholdsStyle&&Pe.thresholds&&(ye.thresholdsStyle.mode??p.i3.Off)!==p.i3.Off&&k.addThresholds({config:ye.thresholdsStyle,thresholds:Pe.thresholds,scaleKey:nt,theme:N,hardMin:De.config.min,hardMax:De.config.max,softMin:ye.axisSoftMin,softMax:ye.axisSoftMax})}let ue=(0,C.i7)(P);k.setStackingGroups(ue),H?.forEach(Ue=>{oe||(oe=O(P,_));let De={};for(let Pe in Ue.fieldMap){let ye=Ue.fieldMap[Pe];De[Pe]=oe.get(ye)}Ue.init(k,De)}),k.scaleKeys=[te,de];const me=15;let ge={dataIdx:(Ue,De,Pe,ye)=>{let Te=Ue.data[De];if(Te[Pe]==null){let nt=null,ct=null,he;for(he=Pe;nt==null&&he-- >0;)Te[he]!=null&&(nt=he);for(he=Pe;ct==null&&he++<Te.length;)Te[he]!=null&&(ct=he);let xe=Ue.data[0],Me=Ue.valToPos(ye,"x"),He=ct==null?1/0:Ue.valToPos(xe[ct],"x"),Ve=nt==null?-1/0:Ue.valToPos(xe[nt],"x"),Oe=Me-Ve,Ne=He-Me;Oe<=Ne?Oe<=me&&(Pe=nt):Ne<=me&&(Pe=ct)}return Pe}};if(V&&V()!==v.m.Off){const Ue={point:{[te]:null,[de]:null},data:P},De=new h.es(Ue);ge.sync={key:Y,filters:{pub:(Pe,ye,Te,nt,ct,he,xe)=>V&&V()===v.m.Off?!1:(Ue.rowIndex=xe,Te<0&&nt<0?(Ue.point[se]=null,Ue.point[de]=null,j.publish(new h.xH)):(Ue.point[se]=ye.posToVal(Te,te),Ue.point[de]=ye.posToVal(nt,de),Ue.point.panelRelY=nt>0?nt/he:1,j.publish(De),De.payload.down=void 0),!0)},scales:[te,de]}}return k.setSync(),k.setCursor(ge),k};function O(P,N){const F=new Map;return P.fields.forEach((U,j)=>{const V=U.state?.origin;if(V){const _=N[V.frameIndex]?.fields[V.fieldIndex];_&&F.set((0,E.CZ)(_,N[V.frameIndex],N),j)}}),F}const x=["legend","options","theme"];class I extends n.Component{constructor(){super(...arguments),this.prepConfig=(N,F,U)=>{const{eventBus:j,eventsScope:V,sync:_}=this.context,{theme:H,timeZone:z,renderers:K,tweakAxis:Y,tweakScale:k}=this.props;return R({frame:N,theme:H,timeZones:Array.isArray(z)?z:[z],getTimeRange:U,eventBus:j,sync:_,allFrames:F,renderers:K,tweakScale:k,tweakAxis:Y,eventsScope:V})},this.renderLegend=N=>{const{legend:F,frames:U}=this.props;return!N||F&&!F.showLegend||!(0,o.o)(N,U)?null:n.createElement(o.l,{data:U,config:N,...F})}}render(){return n.createElement(i.d,{...this.props,prepConfig:this.prepConfig,propsToDiff:x,renderLegend:this.renderLegend})}}I.contextType=a.bb;const L=(0,r.HE)(I);L.displayName="TimeSeries"},42202:(G,A,e)=>{"use strict";e.r(A),e.d(A,{ALERTING_COLOR:()=>r.ns,AxisPlacement:()=>l.LB,BarAlignment:()=>l.pu,BarValueVisibility:()=>l.eU,BracesPlugin:()=>u.hP,ClearPlugin:()=>u.Gp,ClipboardPlugin:()=>u.wl,DEFAULT_ANNOTATION_COLOR:()=>r.Jx,DOMUtil:()=>r.Qi,DrawStyle:()=>l.$6,EventsWithValidation:()=>r.JU,GlobalStyles:()=>i.nz,GraphGradientMode:()=>l.FI,GraphTresholdsStyleMode:()=>l.i3,IndentationPlugin:()=>u.Rc,LegendDisplayMode:()=>l.jK,LineInterpolation:()=>l.KC,NO_DATA_COLOR:()=>r._V,NewlinePlugin:()=>u.z2,NodeGraphDataFrameFieldNames:()=>r.zG,OK_COLOR:()=>r.te,PENDING_COLOR:()=>r.f7,PointVisibility:()=>l.mv,REGION_FILL_ALPHA:()=>r.iV,ReactUtils:()=>r.Ot,RunnerPlugin:()=>u.dv,SCHEMA:()=>r.Yi,ScaleDirection:()=>l.bQ,ScaleOrientation:()=>l.wN,SearchFunctionType:()=>r.nu,SelectionShortcutsPlugin:()=>u.$L,SlatePrism:()=>u.Ze,StackingMode:()=>l.o0,SuggestionsPlugin:()=>u.bm,TableCellDisplayMode:()=>l.h2,ThemeContext:()=>i.Ni,TooltipDisplayMode:()=>l.f3,ansicolor:()=>r._J,attachDebugger:()=>r.xq,calculateFontSize:()=>r.MX,colors:()=>r.O9,commonOptionsBuilder:()=>g.q,createLogger:()=>r.hu,fuzzyMatch:()=>r.C6,getCanvasContext:()=>r.AE,getCellLinks:()=>r.iu,getScrollbarWidth:()=>r.np,getTagColor:()=>r.vm,getTagColorIndexFromName:()=>r.tu,getTagColorsFromName:()=>r.Bx,getTextColorForAlphaBackground:()=>r.bM,getTextColorForBackground:()=>r.Gc,getTheme:()=>i.gh,hasValidationEvent:()=>r.z3,isCompactUrl:()=>r.go,linkModelToContextMenuItems:()=>r.Rc,makeFragment:()=>r.xl,makeValue:()=>r.l1,measureText:()=>r.X1,mockTheme:()=>i.Zu,mockThemeContext:()=>i.sJ,regexValidation:()=>r.FE,sortedColors:()=>r.Wm,styleMixins:()=>i.GU,stylesFactory:()=>i.Bb,useForceUpdate:()=>r.NW,useStyles:()=>i.yK,useStyles2:()=>i.wW,useTheme:()=>i.Fg,useTheme2:()=>i.l4,validate:()=>r.Gu,withTheme:()=>i.Zz,withTheme2:()=>i.HE});var n=e(85810),o={};for(const m in n)m!=="default"&&(o[m]=()=>n[m]);e.d(A,o);var a=e(96878),o={};for(const m in a)["default","Icon","IconButton","ConfirmButton","DeleteButton","Tooltip","PopoverController","Popover","Toggletip","Portal","getPortalContainer","PortalContainer","CustomScrollbar","TabbedContainer","ClipboardButton","Cascader","ButtonCascader","InlineToast","LoadingPlaceholder","LoadingBar","ColorPicker","SeriesColorPicker","ColorPickerInput","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","EmptySearchResult","UnitPicker","StatsPicker","RefreshPicker","defaultIntervals","TimeRangePicker","TimePickerTooltip","TimeRangeLabel","TimeOfDayPicker","TimeZonePicker","WeekStartPicker","DatePicker","DatePickerWithInput","DateTimePicker","List","InteractiveTable","TagsInput","AutoSaveField","Pagination","Tag","TagList","FilterPill","ConfirmModal","QueryField","CodeEditor","ReactMonacoEditor","CodeEditorSuggestionItemKind","variableSuggestionToCodeEditorSuggestion","Modal","ModalHeader","ModalTabsHeader","ModalTabContent","ModalsProvider","ModalRoot","ModalsController","ModalsContext","PageToolbar","SetInterval","Table","TableInputCSV","TabsBar","Tab","VerticalTab","TabContent","Counter","RenderUserContentAsHTML","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","Sparkline","Gauge","BarGauge","VizTooltip","VizTooltipContainer","SeriesTable","SeriesTableRow","VizRepeater","PanelChrome","PanelChromeLoadingIndicator","PanelContextProvider","PanelContextRoot","usePanelContext","VizLayout","SeriesVisibilityChangeBehavior","VizLegend","VizLegendListItem","Alert","GraphSeriesToggler","Collapse","ControlledCollapse","CollapsableSection","DataLinkButton","FieldLinkList","FullWidthButtonContainer","ClickOutsideWrapper","CallToActionCard","ContextMenu","Menu","MenuGroup","MenuItem","WithContextMenu","DataLinksInlineEditor","DataLinkInput","DataLinksContextMenu","SeriesIcon","InfoBox","FeatureBadge","FeatureInfoBox","JSONFormatter","JsonExplorer","ErrorBoundary","ErrorBoundaryAlert","withErrorBoundary","ErrorWithStack","DataSourceHttpSettings","CustomHeadersSettings","AlertingSettings","SecureSocksProxySettings","TLSAuthSettings","CertificationKey","Spinner","FadeTransition","SlideOutTransition","Segment","SegmentAsync","SegmentInput","SegmentSelect","SegmentSection","Drawer","Slider","RangeSlider","Form","sharedInputStyle","InputControl","Button","LinkButton","ButtonGroup","clearButtonStyles","ToolbarButton","ToolbarButtonRow","ValuePicker","fieldMatchersUI","Link","TextLink","Text","Box","Stack","Grid","Label","Field","Legend","FieldSet","FieldValidationMessage","InlineField","InlineSegmentGroup","InlineLabel","InlineFieldRow","FieldArray","resetSelectStyles","getSelectStyles","HorizontalGroup","VerticalGroup","Container","Badge","RadioButtonGroup","RadioButtonList","Input","getInputStyles","AutoSizeInput","FilterInput","Switch","InlineSwitch","Checkbox","TextArea","FileUpload","TimeRangeInput","RelativeTimeRangePicker","Card","getCardStyles","CardContainer","FormattedValueDisplay","ButtonSelect","Dropdown","PluginSignatureBadge","UserIcon","Avatar","InlineFormLabel","Divider","LegacyForms","LegacyInputStatus","ScaleDistribution","BarGaugeDisplayMode","UPlotConfigBuilder","UPLOT_AXIS_FONT_SIZE","UPlotChart","PlotLegend","FIXED_UNIT","BrowserLabel","PanelContainer","Graph","GraphWithLegend","GraphContextMenu","GraphContextMenuHeader","graphTimeFormat","graphTickFormatter","GraphNG","TimeSeries","useGraphNGContext","preparePlotFrame","buildScaleKey","convertOldAngularValueMapping","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","MultiSelect","Select","SelectContainer","VirtualizedSelect","SecretInput","SecretTextArea","FileDropzone","FileDropzoneDefaultChildren","FileListItem","graphFieldOptions","EventsCanvas","Marker","XYCanvas","KeyboardPlugin","TooltipPlugin","TooltipPlugin2","ZoomPlugin","SeriesVisibilityChangeMode"].indexOf(m)<0&&(o[m]=()=>a[m]);e.d(A,o);var r=e(33173),i=e(97099),g=e(11239),u=e(13173),l=e(39021)},59864:(G,A,e)=>{"use strict";e.d(A,{Y:()=>E,r:()=>c});var n=e(85960),a=e(58309),o=e(17945),r=e(1713),i=e(20519),g=e(5106),u=e(24956),l=e(27436),m=e(90646);function c(v,h,p){const s=["Axis"];v.addRadio({path:"axisPlacement",name:"Placement",category:s,defaultValue:m.q.axisPlacement[0].value,settings:{options:m.q.axisPlacement}}).addTextInput({path:"axisLabel",name:"Label",category:s,defaultValue:"",settings:{placeholder:"Optional text",expandTemplateVars:!0},showIf:y=>y.axisPlacement!==r.LB.Hidden,shouldApply:y=>y.type!==a.fS.time&&y.type!==a.fS.string}).addNumberInput({path:"axisWidth",name:"Width",category:s,settings:{placeholder:"Auto"},showIf:y=>y.axisPlacement!==r.LB.Hidden}).addRadio({path:"axisGridShow",name:"Show grid lines",category:s,defaultValue:void 0,settings:{options:[{value:void 0,label:"Auto"},{value:!0,label:"On"},{value:!1,label:"Off"}]},showIf:y=>y.axisPlacement!==r.LB.Hidden}).addRadio({path:"axisColorMode",name:"Color",category:s,defaultValue:r.yK.Text,settings:{options:[{value:r.yK.Text,label:"Text"},{value:r.yK.Series,label:"Series"}]},showIf:y=>y.axisPlacement!==r.LB.Hidden}).addBooleanSwitch({path:"axisBorderShow",name:"Show border",category:s,defaultValue:!1,showIf:y=>y.axisPlacement!==r.LB.Hidden}),v.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Scale",category:s,editor:E,override:E,defaultValue:{type:r.wf.Linear},shouldApply:y=>y.type===a.fS.number,process:o.kG}).addBooleanSwitch({path:"axisCenteredZero",name:"Centered zero",category:s,defaultValue:!1,showIf:y=>y.scaleDistribution?.type!==r.wf.Log}).addNumberInput({path:"axisSoftMin",name:"Soft min",defaultValue:h.axisSoftMin,category:s,settings:{placeholder:"See: Standard options > Min"}}).addNumberInput({path:"axisSoftMax",name:"Soft max",defaultValue:h.axisSoftMax,category:s,settings:{placeholder:"See: Standard options > Max"}})}const d=[{label:"Linear",value:r.wf.Linear},{label:"Logarithmic",value:r.wf.Log},{label:"Symlog",value:r.wf.Symlog}],f=[{label:"2",value:2},{label:"10",value:10}],E=({value:v,onChange:h})=>{const p=v?.type??r.wf.Linear,s=v?.log??2;return n.createElement(n.Fragment,null,n.createElement("div",{style:{marginBottom:16}},n.createElement(g.S,{value:p,options:d,onChange:y=>{h({...v,type:y,log:y===r.wf.Linear?void 0:s})}})),(p===r.wf.Log||p===r.wf.Symlog)&&n.createElement(i.g,{label:"Log base"},n.createElement(l.Ph,{options:f,value:s,onChange:y=>{h({...v,log:y.value})}})),p===r.wf.Symlog&&n.createElement(i.g,{label:"Linear threshold"},n.createElement(u.I,{placeholder:"1",value:v?.linearThreshold,onChange:y=>{h({...v,linearThreshold:Number(y.currentTarget.value)})}})))}},36438:(G,A,e)=>{"use strict";e.d(A,{B:()=>u});var n=e(56375),a=e.n(n),o=e(85960),r=e(45564),i=e(74042);const g=({value:l,onChange:m})=>{const c=(0,o.useCallback)(d=>{m({...l,[d]:!l[d]})},[l,m]);return o.createElement(i.Lh,{spacing:"xs"},Object.keys(l).map(d=>{const f=d;return o.createElement(r.B,{icon:l[f]?"eye-slash":"eye",onClick:()=>c(f),key:f,label:(0,n.startCase)(f),selected:l[f]})}))};function u(l){l.addCustomEditor({id:"hideFrom",name:"Hide in area",category:["Series"],path:"hideFrom",defaultValue:{tooltip:!1,viz:!1,legend:!1},editor:g,override:g,shouldApply:()=>!0,hideFromDefaults:!0,process:m=>m})}},58029:(G,A,e)=>{"use strict";e.d(A,{J:()=>o});var n=e(88008),a=e(1713);function o(r,i=!0){r.addBooleanSwitch({path:"legend.showLegend",name:"Visibility",category:["Legend"],description:"",defaultValue:!0}).addRadio({path:"legend.displayMode",name:"Mode",category:["Legend"],description:"",defaultValue:a.jK.List,settings:{options:[{value:a.jK.List,label:"List"},{value:a.jK.Table,label:"Table"}]},showIf:g=>g.legend.showLegend}).addRadio({path:"legend.placement",name:"Placement",category:["Legend"],description:"",defaultValue:"bottom",settings:{options:[{value:"bottom",label:"Bottom"},{value:"right",label:"Right"}]},showIf:g=>g.legend.showLegend}).addNumberInput({path:"legend.width",name:"Width",category:["Legend"],settings:{placeholder:"Auto"},showIf:g=>g.legend.showLegend&&g.legend.placement==="right"}),i&&r.addCustomEditor({id:"legend.calcs",path:"legend.calcs",name:"Values",category:["Legend"],description:"Select values or calculations to show in legend",editor:n.S.get("stats-picker").editor,defaultValue:[],settings:{allowMultiple:!0},showIf:g=>g.legend.showLegend!==!1})}},73427:(G,A,e)=>{"use strict";e.d(A,{V:()=>d,n:()=>c});var n=e(85960),a=e(17945),o=e(58309),r=e(1713),i=e(5106),g=e(75064),u=e(24956),l=e(74042),m=e(90646);const c=({value:f,context:E,onChange:v,item:h})=>n.createElement(l.Lh,null,n.createElement(i.S,{value:f?.mode||r.o0.None,options:h.settings?.options??[],onChange:p=>{v({...f,mode:p})}}),E.isOverride&&f?.mode&&f?.mode!==r.o0.None&&n.createElement(u.I,{type:"text",placeholder:"Group",suffix:n.createElement(g.h,{name:"question-circle",tooltip:"Name of the stacking group",tooltipPlacement:"top"}),defaultValue:f?.group,onChange:p=>{v({...f,group:p.currentTarget.value.trim()})}}));function d(f,E,v=["Graph styles"]){f.addCustomEditor({id:"stacking",path:"stacking",name:"Stack series",category:v,defaultValue:E,editor:c,override:c,settings:{options:m.q.stacking},process:a.kG,shouldApply:h=>h.type===o.fS.number})}},58541:(G,A,e)=>{"use strict";e.d(A,{Z:()=>n});function n(a,o=!0){o&&a.addNumberInput({path:"text.titleSize",category:["Text size"],name:"Title",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0}),a.addNumberInput({path:"text.valueSize",category:["Text size"],name:"Value",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0})}},92283:(G,A,e)=>{"use strict";e.d(A,{L:()=>a});var n=e(1713);function a(o,r=!1){const i=["Tooltip"],g=r?[{value:n.f3.Single,label:"Single"},{value:n.f3.None,label:"Hidden"}]:[{value:n.f3.Single,label:"Single"},{value:n.f3.Multi,label:"All"},{value:n.f3.None,label:"Hidden"}],u=[{value:n.As.None,label:"None"},{value:n.As.Ascending,label:"Ascending"},{value:n.As.Descending,label:"Descending"}];o.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:i,defaultValue:"single",settings:{options:g}}).addRadio({path:"tooltip.sort",name:"Values sort order",category:i,defaultValue:n.As.None,showIf:l=>l.tooltip?.mode===n.f3.Multi,settings:{options:u}})}},11239:(G,A,e)=>{"use strict";e.d(A,{q:()=>n});var n={};e.r(n),e.d(n,{ScaleDistributionEditor:()=>a.Y,StackingEditor:()=>u.n,addAxisConfig:()=>a.r,addHideFrom:()=>o.B,addLegendOptions:()=>r.J,addStackingConfig:()=>u.V,addTextSizeOptions:()=>g.Z,addTooltipOptions:()=>i.L});var a=e(59864),o=e(36438),r=e(58029),i=e(92283),g=e(58541),u=e(73427)},39021:(G,A,e)=>{"use strict";e.d(A,{$6:()=>n.l8,FI:()=>n.FI,KC:()=>n.KC,LB:()=>n.LB,bQ:()=>n.bQ,eU:()=>n.Jp,f3:()=>n.f3,h2:()=>n.h2,i3:()=>n.i3,jK:()=>n.jK,mv:()=>n.Jp,o0:()=>n.o0,pu:()=>n.pu,wN:()=>n.wN});var n=e(1713)},81832:(G,A,e)=>{"use strict";e.d(A,{h:()=>r});var n=e(90308);const a={"[":"]","{":"}","(":")"},o="brace_match";function r(){return{onKeyDown(i,g,u){const{value:l}=g;switch(i.key){case"(":case"{":case"[":{const{start:{offset:m,key:c},end:{offset:d,key:f},focus:{offset:E}}=l.selection,v=l.focusText.text;if(l.selection.isExpanded)return i.preventDefault(),g.insertTextByKey(c,m,i.key).insertTextByKey(f,d+1,a[i.key]).moveEndBackward(1),!0;if(E===v.length||v[E]===" "||Object.values(a).includes(v[E])){i.preventDefault();const h=a[i.key],p={key:`${o}-${(0,n.Z)()}`,type:`${o}-${h}`,anchor:{key:c,offset:m,object:"point"},focus:{key:f,offset:d+1,object:"point"},object:"annotation"};return g.insertText(i.key).insertText(h).addAnnotation(p).moveBackward(1),!0}break}case")":case"}":case"]":{const m=l.anchorText.text,c=l.selection.anchor.offset,d=m[c],f=i.key,E=`${o}-${f}`,v=l.annotations.find(h=>h?.type===E&&h.anchor.key===l.anchorText.key);if(v&&d===f&&!l.selection.isExpanded)return i.preventDefault(),g.moveFocusForward(1).removeAnnotation(v).moveAnchorForward(1),!0;break}case"Backspace":{const m=l.anchorText.text,c=l.selection.anchor.offset,d=m[c-1],f=m[c];if(a[d]&&a[d]===f)return i.preventDefault(),g.deleteBackward(1).deleteForward(1).focus(),!0}default:break}return u()}}}},88582:(G,A,e)=>{"use strict";e.d(A,{G:()=>n});function n(){return{onKeyDown(a,o,r){const i=o.value;if(i.selection.isExpanded)return r();if(a.key==="k"&&a.ctrlKey){a.preventDefault();const g=i.anchorText.text,u=i.selection.anchor.offset,m=g.length-u;return o.deleteForward(m),!0}return r()}}}},99050:(G,A,e)=>{"use strict";e.d(A,{w:()=>o});const n=(r,i,g)=>{if(!r.length)return;const u=r.slice(0,-1).join("").length+r.length-1;return r.join(`
`).slice(i,u+g)},a=r=>r?.replace(/[\uFEFF]/g,"");function o(){const r={onCopy(i,g,u){i.preventDefault();const{document:l,selection:m}=g.value,{start:{offset:c},end:{offset:d}}=m,f=l.getLeafBlocksAtRange(m).toArray().map(v=>v.text),E=a(n(f,c,d));return E&&i.clipboardData&&i.clipboardData.setData("Text",E),!0},onPaste(i,g,u){if(i.preventDefault(),i.clipboardData){const m=a(i.clipboardData.getData("Text"))?.split(`
`);if(m&&m.length){g.insertText(m[0]);for(const c of m.slice(1))g.splitBlock().insertText(c)}}return!0}};return{...r,onCut(i,g,u){return r.onCopy(i,g,u),g.deleteAtRange(g.value.selection),!0}}}},55044:(G,A,e)=>{"use strict";e.d(A,{R:()=>c});var n=e(80078),a=e(53737),o=e(10418);const r=(0,n.TB)("mod+["),i=(0,n.TB)("shift+tab"),g=(0,n.TB)("mod+]"),u="  ",l=(d,f,E)=>{const{startBlock:v,endBlock:h,selection:{start:{offset:p,key:s},end:{offset:y,key:C}}}=f.value;if(o.Z.serialize(f.value)==="")return;d.preventDefault();const b=v.getFirstText();b&&p===0&&s===b.key&&y===b.text.length&&C===b.key||!v.equals(h)?m(f,"right"):f.insertText(u)},m=(d,f)=>{const E=d.value.selection,v=d.value.document.getLeafBlocksAtRange(E).toArray();if(f==="left")for(const h of v){const p=h.text.length-h.text.trimLeft().length,s=h.getFirstText().key,y={anchor:{key:s,offset:p,path:[]},focus:{key:s,offset:p,path:[]}};d.deleteBackwardAtRange(a.e6.create(y),Math.min(u.length,p))}else{const{startText:h}=d.value,p=h.text.slice(0,E.start.offset),s=/^\s*$/.test(p);for(const y of v)d.insertTextByKey(y.getFirstText().key,0,u);s&&d.moveStartBackward(u.length)}};function c(){return{onKeyDown(d,f,E){if(r(d)||i(d))d.preventDefault(),m(f,"left");else if(g(d))d.preventDefault(),m(f,"right");else if(d.key==="Tab")l(d,f,E);else return E();return!0}}}},13173:(G,A,e)=>{"use strict";e.d(A,{$L:()=>u.$,Gp:()=>a.G,Rc:()=>r.R,Ze:()=>l.Z,bm:()=>m.b,dv:()=>g.d,hP:()=>n.h,wl:()=>o.w,z2:()=>i.z});var n=e(81832),a=e(88582),o=e(99050),r=e(55044),i=e(17481),g=e(34351),u=e(81011),l=e(93126),m=e(45944)},17481:(G,A,e)=>{"use strict";e.d(A,{z:()=>a});function n(o){let r=o.length-o.trimLeft().length;if(r){let i=o[0];for(;--r;)i+=o[0];return i}return""}function a(){return{onKeyDown(o,r,i){const g=r.value;if(g.selection.isExpanded)return i();if(o.key==="Enter"){o.preventDefault();const{startBlock:u}=g,l=u.text,m=n(l);return r.splitBlock().insertText(m).focus()}return i()}}}},34351:(G,A,e)=>{"use strict";e.d(A,{d:()=>n});function n({handler:a}){return{onKeyDown(o,r,i){return a&&o.key==="Enter"&&(o.shiftKey||o.ctrlKey)?(o.preventDefault(),a(o),r):i()}}}},81011:(G,A,e)=>{"use strict";e.d(A,{$:()=>o});var n=e(80078);const a=(0,n.TB)("mod+l");function o(){return{onKeyDown(r,i,g){if(a(r)){r.preventDefault();const{focusBlock:u,document:l}=i.value;i.moveAnchorToStartOfBlock(),l.getNextBlock(u.key)?i.moveFocusToStartOfNextBlock():i.moveFocusToEndOfText()}else return g();return!0}}}},7988:(G,A,e)=>{"use strict";e.d(A,{Z:()=>a});const a="prism-token"},93126:(G,A,e)=>{"use strict";e.d(A,{Z:()=>f,a:()=>p});var n=e(19609),a=e.n(n),o=e(53737),r=e(7988),i=e(80298),g=e(85960);function u(s){return s.object==="block"&&s.type==="code_block"}function l(s){return"javascript"}function m(s,y,C){const{decoration:b}=s;if(b.type!==r.Z)return C();const S=b.data.get("className");return g.createElement("span",{className:S},s.children)}class c extends(0,i.Record)({onlyIn:u,getSyntax:l,renderDecoration:m}){constructor(y){super(y)}}const d=c;function f(s={},y=a().languages){const C=new d(s);return{decorateNode:(b,S,D)=>{if(!C.onlyIn(b))return D();const M=o.gO.create(b),T=C.getSyntax(M),R=y[T];if(!R)return[];const x=M.getTexts().map(N=>N&&N.getText()).join(`
`),I=a().tokenize(x,R),L=p(I),P=S.value.data.set("tokens",L);return S.setData(P),E(C,I,M)},renderDecoration:(b,S,D)=>C.renderDecoration({children:b.children,decoration:b.decoration},S,D)}}function E(s,y,C){const b=C.getTexts(),S=[];let D=0,M=0;return b.forEach(T=>{M=D+T.getText().length;let R=0;function O(x,I){if(typeof x=="string"){if(I){const L=v({text:T,textStart:D,textEnd:M,start:R,end:R+x.length,className:`prism-token token ${I}`,block:C});L&&S.push(L)}R+=x.length}else if(I=`${I} ${x.type}`,x.alias&&(I+=" "+x.alias),typeof x.content=="string"){const L=v({text:T,textStart:D,textEnd:M,start:R,end:R+x.content.length,className:`prism-token token ${I}`,block:C});L&&S.push(L),R+=x.content.length}else for(let L=0;L<x.content.length;L+=1)O(x.content[L],I)}y.forEach(O),D=M+1}),S}function v({text:s,textStart:y,textEnd:C,start:b,end:S,className:D,block:M}){return b>=C||S<=y?null:(b=Math.max(b,y),S=Math.min(S,C),b-=y,S-=y,M.createDecoration({object:"decoration",anchor:{key:s.key,offset:b,object:"point"},focus:{key:s.key,offset:S,object:"point"},type:r.Z,data:{className:D}}))}function h(s){return typeof s=="string"?[{content:s,types:[],aliases:[]}]:Array.isArray(s)?s.flatMap(y=>h(y)):s instanceof a().Token?h(s.content).flatMap(y=>{let C=[];return typeof s.alias=="string"?C=[s.alias]:C=s.alias??[],{content:y.content,types:[s.type,...y.types],aliases:[...C,...y.aliases]}}):[]}function p(s){const y=h(s);if(!y.length)return[];const C=y[0];C.prev=null,C.next=y.length>=2?y[1]:null,C.offsets={start:0,end:C.content.length};for(let S=1;S<y.length-1;S++)y[S].prev=y[S-1],y[S].next=y[S+1],y[S].offsets={start:y[S-1].offsets.end,end:y[S-1].offsets.end+y[S].content.length};const b=y[y.length-1];return b.prev=y.length>=2?y[y.length-2]:null,b.next=null,b.offsets={start:y.length>=2?y[y.length-2].offsets.end:0,end:y.length>=2?y[y.length-2].offsets.end+b.content.length:b.content.length},y}},45944:(G,A,e)=>{"use strict";e.d(A,{b:()=>N});var n=e(56375),a=e(85960),o=e(79873),r=e(403),i=e(76176),g=e(43597),u=e(60494);const l=U=>U.reduce((j,{items:V,label:_})=>(j.push({label:_,kind:g.c.GroupTitle}),V.reduce((H,z)=>(H.push(z),H),j)),[]),m=U=>U.reduce((j,V)=>j.length<V.label.length?V.label:j,""),c=(U,j,V)=>{const _=(0,u.Z)(V,{font:U.typography.fontFamilyMonospace,fontSize:U.typography.bodySmall.fontSize,fontWeight:"normal"}),H=f(_.width,U),z=d(_.height,U),K=E(z,j);return{listWidth:H,listHeight:K,itemHeight:z}},d=(U,j)=>{const V=j.spacing.gridSize*2;return U+V},f=(U,j)=>{const V=j.spacing.gridSize*3,_=800;return Math.min(Math.max(U+V,200),_)},E=(U,j)=>{const V=Math.min(j.length,10),_=100,H=V*U;return Math.max(H,_)};var v=e(66681),h=e(55583),p=e(47257);const s=(U,j,V)=>({typeaheadItem:(0,v.css)({label:"type-ahead-item",zIndex:11,padding:U.spacing(1,1,1,2),border:U.colors.border.medium,overflowY:"scroll",overflowX:"hidden",outline:"none",background:U.colors.background.secondary,color:U.colors.text.secondary,boxShadow:`0 0 20px ${U.v1.colors.dropdownShadow}`,visibility:V===!0?"visible":"hidden",width:"250px",minHeight:`${j+parseInt(U.spacing(.25),10)}px`,position:"relative",wordBreak:"break-word"})}),y=({item:U,height:j})=>{const V=U&&!!U.documentation,_=U?U.label:"",H=(0,h.a)(U?.documentation),z=(0,p.l4)(),K=s(z,j,V);return a.createElement("div",{className:(0,v.cx)([K.typeaheadItem])},a.createElement("b",null,_),a.createElement("hr",null),a.createElement("div",{dangerouslySetInnerHTML:{__html:H}}))};var C=e(83795),b=e.n(C),S=e(61065);const D=U=>({typeaheadItem:(0,v.css)({border:"none",background:"none",textAlign:"left",label:"type-ahead-item",height:"auto",fontFamily:U.typography.fontFamilyMonospace,padding:U.spacing(1,1,1,2),fontSize:U.typography.bodySmall.fontSize,textOverflow:"ellipsis",overflow:"hidden",zIndex:11,display:"block",whiteSpace:"nowrap",cursor:"pointer",transition:"color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1)"}),typeaheadItemSelected:(0,v.css)({label:"type-ahead-item-selected",backgroundColor:U.colors.background.secondary}),typeaheadItemMatch:(0,v.css)({label:"type-ahead-item-match",color:U.v1.palette.yellow,borderBottom:`1px solid ${U.v1.palette.yellow}`,padding:"inherit",background:"inherit"}),typeaheadItemGroupTitle:(0,v.css)({label:"type-ahead-item-group-title",color:U.colors.text.secondary,fontSize:U.typography.bodySmall.fontSize,lineHeight:U.typography.body.lineHeight,padding:U.spacing(1)})}),M=U=>{const j=(0,p.wW)(D),{isSelected:V,item:_,prefix:H,style:z,onMouseEnter:K,onMouseLeave:Y,onClickItem:k}=U,q=V?(0,v.cx)([j.typeaheadItem,j.typeaheadItemSelected]):(0,v.cx)([j.typeaheadItem]),X=(0,v.cx)([j.typeaheadItemMatch]),te=(0,v.cx)([j.typeaheadItemGroupTitle]),se=_.label||"";return _.kind===g.c.GroupTitle?a.createElement("li",{className:te,style:z},a.createElement("span",null,se)):a.createElement("li",{role:"none"},a.createElement("button",{role:"menuitem",className:q,style:z,onMouseDown:k,onMouseEnter:K,onMouseLeave:Y,type:"button"},_.highlightParts!==void 0?a.createElement(S.H,{text:se,highlightClassName:X,highlightParts:_.highlightParts}):a.createElement(b(),{textToHighlight:se,searchWords:[H??""],autoEscape:!0,highlightClassName:X})))},T=(U,j)=>U-j*Math.floor(U/j);class R extends a.PureComponent{constructor(){super(...arguments),this.listRef=(0,a.createRef)(),this.state={hoveredItem:null,typeaheadIndex:null,allItems:[],listWidth:-1,listHeight:-1,itemHeight:-1},this.componentDidMount=()=>{this.props.menuRef&&this.props.menuRef(this),document.addEventListener("selectionchange",this.handleSelectionChange);const j=l(this.props.groupedItems),V=m(j),{listWidth:_,listHeight:H,itemHeight:z}=c(this.context,j,V);this.setState({listWidth:_,listHeight:H,itemHeight:z,allItems:j})},this.componentWillUnmount=()=>{document.removeEventListener("selectionchange",this.handleSelectionChange)},this.handleSelectionChange=()=>{this.forceUpdate()},this.componentDidUpdate=(j,V)=>{if(this.state.typeaheadIndex!==null&&V.typeaheadIndex!==this.state.typeaheadIndex&&this.listRef&&this.listRef.current){if(this.state.typeaheadIndex===1){this.listRef.current.scrollToItem(0);return}this.listRef.current.scrollToItem(this.state.typeaheadIndex)}if((0,n.isEqual)(j.groupedItems,this.props.groupedItems)===!1){const _=l(this.props.groupedItems),H=m(_),{listWidth:z,listHeight:K,itemHeight:Y}=c(this.context,_,H);this.setState({listWidth:z,listHeight:K,itemHeight:Y,allItems:_,typeaheadIndex:null})}},this.onMouseEnter=j=>{this.setState({hoveredItem:j})},this.onMouseLeave=()=>{this.setState({hoveredItem:null})},this.moveMenuIndex=j=>{const V=this.state.allItems.length;if(V){const _=this.state.typeaheadIndex||0;let H=T(_+j,V);this.state.allItems[H].kind===g.c.GroupTitle&&(H=T(H+j,V)),this.setState({typeaheadIndex:H});return}},this.insertSuggestion=()=>{this.props.onSelectSuggestion&&this.state.typeaheadIndex!==null&&this.props.onSelectSuggestion(this.state.allItems[this.state.typeaheadIndex])}}get menuPosition(){if(!window.getSelection)return"";const j=window.getSelection(),V=j&&j.anchorNode;if(V&&V.parentElement){const _=V.parentElement.getBoundingClientRect(),H=window.scrollX,z=window.scrollY;return`position: absolute; display: flex; top: ${_.top+z+_.height+6}px; left: ${_.left+H-2}px`}return""}render(){const{prefix:j,isOpen:V=!1,origin:_}=this.props,{allItems:H,listWidth:z,listHeight:K,itemHeight:Y,hoveredItem:k,typeaheadIndex:q}=this.state,X=k||q,te=H[k||q||0];return a.createElement(O,{origin:_,isOpen:V,style:this.menuPosition},a.createElement("ul",{role:"menu",className:"typeahead","data-testid":"typeahead"},a.createElement(r.t7,{ref:this.listRef,itemCount:H.length,itemSize:Y,itemKey:se=>{const de=H&&H[se];return de?`${se}-${de.label}`:`${se}`},width:z,height:K},({index:se,style:de})=>{const re=H&&H[se];return re?a.createElement(M,{onClickItem:()=>this.props.onSelectSuggestion?this.props.onSelectSuggestion(re):{},isSelected:q===null?!1:H[q]===re,item:re,prefix:j,style:de,onMouseEnter:()=>this.onMouseEnter(se),onMouseLeave:this.onMouseLeave}):null})),X&&a.createElement(y,{height:K,item:te}))}}R.contextType=i.N;class O extends a.PureComponent{constructor(j){super(j);const{index:V=0,origin:_="query",style:H}=j;this.node=document.createElement("div"),this.node.setAttribute("style",H),this.node.classList.add("slate-typeahead",`slate-typeahead-${_}-${V}`),document.body.appendChild(this.node)}componentWillUnmount(){document.body.removeChild(this.node)}render(){return this.props.isOpen?(this.node.setAttribute("style",this.props.style),this.node.classList.add("slate-typeahead--open"),o.createPortal(this.props.children,this.node)):(this.node.classList.remove("slate-typeahead--open"),null)}}var x=e(1323),I=e(25728),L=e(7988);const P=250;function N({onTypeahead:U,cleanText:j,onWillApplySuggestion:V,portalOrigin:_}){let H,z={groupedItems:[],typeaheadPrefix:"",typeaheadContext:"",typeaheadText:""};const K=(0,n.debounce)(F,P),Y=k=>{z={...z,...k}};return{onBlur:(k,q,X)=>(z={...z,groupedItems:[]},X()),onClick:(k,q,X)=>(z={...z,groupedItems:[]},X()),onKeyDown:(k,q,X)=>{const se=z.groupedItems.length;switch(k.key){case"Escape":{if(se)return k.preventDefault(),z={...z,groupedItems:[]},q.insertText("");break}case"ArrowDown":case"ArrowUp":if(se){k.preventDefault(),H.moveMenuIndex(k.key==="ArrowDown"?1:-1);return}break;case"Enter":{if(!(k.shiftKey||k.ctrlKey)&&se)return k.preventDefault(),H.insertSuggestion();break}case"Tab":{if(se)return k.preventDefault(),H.insertSuggestion();break}default:{k.key.length===1&&K(q,Y,U,j);break}}return X()},commands:{selectSuggestion:(k,q)=>{const X=z.groupedItems;if(!X||!X.length)return k;const te=k.applyTypeahead(q);return K(k,Y,U,j),te},applyTypeahead:(k,q)=>{let X=q.insertText||q.label;const te=q.kind==="function",se=q.move||0,de=se>0?se:0,re=se<0?-se:0,{typeaheadPrefix:fe,typeaheadText:ie,typeaheadContext:oe}=z;V&&(X=V(X,{groupedItems:z.groupedItems,typeaheadContext:oe,typeaheadPrefix:fe,typeaheadText:ie}));const ue=q.deleteBackwards||fe.length,ge=(j?j(ie):ie).length-fe.length,Ue=ie.indexOf(fe),Pe=fe&&(ge>0&&Ue>-1||X===ie)&&!te?ge+Ue:0;if(X.match(/\n/)){const ye=(0,x.xl)(X);return k.deleteBackward(ue).deleteForward(Pe).insertFragment(ye).focus(),k}return z={...z,groupedItems:[]},k.snapshotSelection().deleteBackward(ue).deleteForward(Pe).insertText(X).moveForward(de).moveBackward(re).focus(),k}},renderEditor(k,q,X){if(q.value.selection.isExpanded)return X();const te=X();return a.createElement(a.Fragment,null,te,a.createElement(R,{menuRef:se=>H=se,origin:_,prefix:z.typeaheadPrefix,isOpen:!!z.groupedItems.length,groupedItems:z.groupedItems,onSelectSuggestion:q.selectSuggestion}))}}}const F=async(U,j,V,_)=>{if(!V)return;const{value:H}=U,{selection:z}=H,K=H.document.getClosestBlock(H.focusBlock.key),Y=H.selection.start.offset-1,k=K&&K.getDecorations(U),q=k?k.filter(me=>me.start.offset<=Y&&me.end.offset>Y&&me.type===L.Z).toArray():[],X=k&&k.filter(me=>me.end.offset<=Y&&me.type===L.Z&&me.data.get("className").includes("label-key")).last(),te=X&&H.focusText.text.slice(X.start.offset,X.end.offset),se=q.map(me=>me.data.get("className")).join(" ").split(" ").filter(me=>me.length);let de=H.focusText.text,re=de.slice(0,z.focus.offset);q.length&&(de=H.focusText.text.slice(q[0].start.offset,q[0].end.offset),re=H.focusText.text.slice(q[0].start.offset,z.focus.offset));const fe=re.match(/(?:!?=~?"?|")(.*)/);fe?re=fe[1]:_&&(re=_(re));const{suggestions:ie,context:oe}=await V({prefix:re,text:de,value:H,wrapperClasses:se,labelKey:te||void 0,editor:U}),ue=ie.map(me=>{if(!me.items)return me;const ge=me.searchFunctionType||(me.prefixMatch?I.Z.Prefix:I.Z.Word),Ue=I.n[ge];let De={...me};return re&&(me.skipFilter||(De.items=De.items.filter(Pe=>(Pe.filterText||Pe.label).length>=re.length),De.items=Ue(De.items,re)),De.items=De.items.filter(Pe=>!(Pe.insertText===re||(Pe.filterText??Pe.label)===re))),me.skipSort||(De.items=(0,n.sortBy)(De.items,Pe=>Pe.sortText===void 0?Pe.sortValue!==void 0?Pe.sortValue:Pe.label:Pe.sortText||Pe.label)),De}).filter(me=>me.items&&me.items.length);j({groupedItems:ue,typeaheadPrefix:re,typeaheadContext:oe,typeaheadText:de}),U.blur().focus()}},81237:(G,A,e)=>{"use strict";e.d(A,{n:()=>E});var n=e(85362),a=e(85960),o=e(47257);function r(v){return(0,n.css)({".panel-options-group":{borderBottom:`1px solid ${v.colors.border.weak}`},".panel-options-group__header":{padding:v.spacing(1,2,1,1),position:"relative",display:"flex",alignItems:"center",cursor:"pointer",fontWeight:500,color:v.colors.text.primary,"&:hover":{background:v.colors.emphasize(v.colors.background.primary,.03)}},".panel-options-group__icon":{color:v.colors.text.secondary,marginRight:v.spacing(1),padding:v.spacing(0,.9,0,.6)},".panel-options-group__title":{position:"relative"},".panel-options-group__body":{padding:v.spacing(1,2,1,4)}})}function i(v){return(0,n.css)({".card-section":{marginBottom:v.spacing(4)},".card-list":{display:"flex",flexDirection:"row",flexWrap:"wrap",listStyleType:"none"},".card-item":{display:"block",height:"100%",background:v.colors.background.secondary,boxShadow:"none",padding:v.spacing(2),borderRadius:"4px","&:hover":{background:v.colors.emphasize(v.colors.background.secondary,.03)},".label-tag":{marginLeft:v.spacing(1),fontSize:"11px",padding:"2px 6px"}},".card-item-body":{display:"flex",overflow:"hidden"},".card-item-details":{overflow:"hidden"},".card-item-header":{marginBottom:v.spacing(2)},".card-item-type":{color:v.colors.text.secondary,textTransform:"uppercase",fontSize:v.typography.size.sm,fontWeight:v.typography.fontWeightMedium},".card-item-badge":{margin:"6px 0"},".card-item-notice":{fontSize:v.typography.size.sm},".card-item-name":{color:v.colors.text.primary,overflow:"hidden",textOverflow:"ellipsis",width:"100%"},".card-item-label":{marginLeft:v.spacing(1)},".card-item-sub-name":{color:v.colors.text.secondary,overflow:"hidden",textOverflow:"ellipsis",width:"100%"},".card-item-sub-name--header":{color:v.colors.text.secondary,textTransform:"uppercase",marginBottom:v.spacing(2),fontSize:v.typography.size.sm,fontWeight:"bold"},".card-list-layout-grid":{".card-item-type":{display:"inline-block"},".card-item-notice":{fontSize:v.typography.size.sm,display:"inline-block",marginLeft:v.spacing(2)},".card-item-header-action":{float:"right"},".card-item-wrapper":{width:"100%",padding:v.spacing(0,2,2,0)},".card-item-wrapper--clickable":{cursor:"pointer"},".card-item-figure":{margin:v.spacing(0,2,2,0),height:"80px",img:{width:"80px"}},".card-item-name":{fontSize:v.typography.h3.fontSize},[v.breakpoints.up("md")]:{".card-item-wrapper":{width:"50%"}},[v.breakpoints.up("lg")]:{".card-item-wrapper":{width:"33.333333%"}},"&.card-list-layout-grid--max-2-col":{[v.breakpoints.up("lg")]:{".card-item-wrapper":{width:"50%"}}}},".card-list-layout-list":{".card-item-wrapper":{padding:0,width:"100%",marginBottom:v.spacing(1)},".card-item-wrapper--clickable":{cursor:"pointer"},".card-item":{borderRadius:"2px"},".card-item-header":{float:"right",textAlign:"right"},".card-item-figure":{margin:v.spacing(0,2,0,0),img:{width:"48px"}},".card-item-name":{fontSize:v.typography.h4.fontSize},".card-item-sub-name":{fontSize:v.typography.size.sm},".layout-selector":{marginRight:0}}})}var g=e(55182);function u(v){return(0,n.css)({html:{MsOverflowStyle:"scrollbar",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",height:"100%",fontSize:`${v.typography.htmlFontSize}px`,fontFamily:v.typography.fontFamily,lineHeight:v.typography.body.lineHeight,fontKerning:"normal"},":root":{colorScheme:v.colors.mode},body:{height:"100%",width:"100%",position:"absolute",color:v.colors.text.primary,backgroundColor:v.colors.background.canvas,...l(v.typography.body)},"h1, .h1":l(v.typography.h1),"h2, .h2":l(v.typography.h2),"h3, .h3":l(v.typography.h3),"h4, .h4":l(v.typography.h4),"h5, .h5":l(v.typography.h5),"h6, .h6":l(v.typography.h6),p:{margin:v.spacing(0,0,2)},button:{letterSpacing:v.typography.body.letterSpacing,"&:focus-visible":(0,g.getFocusStyles)(v),"&:focus":{outline:"none"}},small:{fontSize:v.typography.bodySmall.fontSize},"b, strong":{fontWeight:v.typography.fontWeightMedium},em:{fontStyle:"italic",color:v.colors.text.primary},cite:{fontStyle:"normal"},".muted":{color:v.colors.text.secondary},"a.muted:hover, a.muted:focus":{color:v.colors.text.primary},".text-warning":{color:v.colors.warning.text,"&:hover, &:focus":{color:v.colors.emphasize(v.colors.warning.text,.15)}},".text-error":{color:v.colors.error.text,"&:hover, &:focus":{color:v.colors.emphasize(v.colors.error.text,.15)}},".text-success":{color:"$success-text-color","&:hover, &:focus":{color:v.colors.emphasize(v.colors.success.text,.15)}},a:{cursor:"pointer",color:v.colors.text.primary,textDecoration:"none","&:focus":{outline:"none"},"&:focus-visible":(0,g.getFocusStyles)(v),"&:[disabled]":{cursor:"default",pointerEvents:"none !important"}},".text-link":{textDecoration:"underline"},".text-left":{textAlign:"left"},".text-right":{textAlign:"right"},".text-center":{textAlign:"center"},".highlight-search-match":{background:v.components.textHighlight.background,color:v.components.textHighlight.text,padding:0}})}function l(v){return{margin:0,fontSize:v.fontSize,lineHeight:v.lineHeight,fontWeight:v.fontWeight,letterSpacing:v.letterSpacing,fontFamily:v.fontFamily,marginBottom:"0.45em"}}function m(v){return(0,n.css)({"iframe.intercom-borderless-frame":{colorScheme:v.colors.mode}})}function c(v){return(0,n.css)({"input, button, select, textarea":{fontFamily:v.typography.body.fontFamily,fontSize:v.typography.body.fontSize,fontWeight:v.typography.body.fontWeight,lineHeight:v.typography.body.lineHeight},"input, select":{backgroundColor:v.components.input.background,color:v.components.input.text,border:"none",boxShadow:"none"},textarea:{height:"auto"},"input[type='file'], input[type='image'], input[type='submit'], input[type='reset'], input[type='button'], input[type='radio'], input[type='checkbox']":{width:"auto"}})}function d(v){return(0,n.css)({})}function f(v){const h=v.breakpoints.values.xxl+v.spacing.gridSize*2+v.components.sidemenu.width;return(0,n.css)({".grafana-app":{display:"flex",alignItems:"stretch",position:"absolute",width:"100%",height:"100%",top:0,left:0},".main-view":{position:"relative",display:"flex",flexDirection:"column",flexGrow:1,height:"100%",flex:"1 1 0",minWidth:0},".page-scrollbar-content":{display:"flex",minHeight:"100%",flexDirection:"column",width:"100%",height:"100%"},".page-container":{flexGrow:1,flexBasis:"100%",paddingLeft:v.spacing(2),paddingRight:v.spacing(2),[v.breakpoints.up("sm")]:{margin:v.spacing(0,1)},[v.breakpoints.up("md")]:{margin:v.spacing(0,2)},[`@media (min-width: ${h}px)`]:{maxWidth:`${v.breakpoints.values.xxl}px`,marginLeft:"auto",marginRight:"auto",width:"100%"}},".page-full":{marginLeft:v.spacing(2),paddingLeft:v.spacing(2),paddingRight:v.spacing(2)},".page-body":{padding:v.spacing(1),background:v.components.panel.background,border:`1px solid ${v.components.panel.borderColor}`,marginBottom:"32px",[v.breakpoints.up("md")]:{padding:v.spacing(2)},[v.breakpoints.up("lg")]:{padding:v.spacing(3)}},".page-heading":{fontSize:v.typography.h4.fontSize,marginTop:0,marginBottom:v.spacing(2)},".page-action-bar":{marginBottom:v.spacing(2),display:"flex",alignItems:"flex-start",gap:v.spacing(2)},".page-action-bar--narrow":{marginBottom:0},".page-action-bar__spacer":{width:v.spacing(2),flexGrow:1},".page-sub-heading":{marginBottom:v.spacing(2)},".page-sub-heading-icon":{marginLeft:v.spacing(1),marginTop:v.spacing(.5)},".page-hidden":{display:"none"}})}function E(){const v=(0,o.l4)();return a.createElement(n.Global,{styles:[u(v),m(v),c(v),f(v),i(v),r(v),d(v)]})}},47257:(G,A,e)=>{"use strict";e.d(A,{Fg:()=>f,HE:()=>d,Zz:()=>c,l4:()=>E,sJ:()=>p,wW:()=>h,yK:()=>v});var n=e(42913),a=e.n(n),o=e(63957),r=e.n(o),i=e(85960),g=e(76176),u=e(33808);let l=null;const m=new WeakMap,c=s=>{const y=C=>{const b=l||g.N;return i.createElement(b.Consumer,null,S=>i.createElement(s,{...C,theme:S.v1}))};return y.displayName=`WithTheme(${s.displayName})`,a()(y,s),y},d=s=>{const y=C=>{const b=l||g.N;return i.createElement(b.Consumer,null,S=>i.createElement(s,{...C,theme:S}))};return y.displayName=`WithTheme(${s.displayName})`,a()(y,s),y};function f(){return(0,i.useContext)(l||g.N).v1}function E(){return(0,i.useContext)(l||g.N)}function v(s){const y=f();let C=m.get(s);return C||(C=(0,u.B)(s),m.set(s,C)),C(y)}function h(s,...y){const C=E();let b=m.get(s);return b||(b=r()(s,{maxSize:10}),m.set(s,b)),b(C,...y)}const p=s=>(l=i.createContext(s),()=>{l=null})},97099:(G,A,e)=>{"use strict";e.d(A,{nz:()=>l.n,Ni:()=>n.N,gh:()=>i,Zu:()=>g,sJ:()=>a.sJ,GU:()=>m,Bb:()=>u.B,yK:()=>a.yK,wW:()=>a.wW,Fg:()=>a.Fg,l4:()=>a.l4,Zz:()=>a.Zz,HE:()=>a.HE});var n=e(76176),a=e(47257),o=e(40354);let r;const i=(c="dark")=>r?r(c):(0,o.j)({colors:{mode:c}}).v1,g=c=>(r=c,()=>{r=null});var u=e(33808),l=e(81237),m=e(55182)},55182:(G,A,e)=>{"use strict";e.r(A),e.d(A,{cardChrome:()=>a,focusCss:()=>l,getFocusStyles:()=>c,getMouseFocusStyles:()=>m,getTooltipContainerStyles:()=>d,hoverColor:()=>o,listItem:()=>r,listItemSelected:()=>i,mediaUp:()=>g});var n=e(19737);function a(f){return`
    background: ${f.colors.background.secondary};
    &:hover {
      background: ${o(f.colors.background.secondary,f)};
    }
    box-shadow: ${f.components.panel.boxShadow};
    border-radius: ${f.shape.radius.default};
`}function o(f,E){return E.isDark?(0,n.Z)(f).brighten(2).toString():(0,n.Z)(f).darken(2).toString()}function r(f){return`
  background: ${f.colors.background.secondary};
  &:hover {
    background: ${o(f.colors.background.secondary,f)};
  }
  box-shadow: ${f.components.panel.boxShadow};
  border-radius: ${f.shape.radius.default};
`}function i(f){return`
    background: ${o(f.colors.background.secondary,f)};
    color: ${f.colors.text.maxContrast};
`}function g(f){return`only screen and (min-width: ${f})`}const u=f=>f.hasOwnProperty("v1"),l=f=>{const E=u(f),v=E?f.colors.background.canvas:f.colors.bodyBg,h=E?f.colors.primary.main:f.colors.formFocusOutline;return`
  outline: 2px dotted transparent;
  outline-offset: 2px;
  box-shadow: 0 0 0 2px ${v}, 0 0 0px 4px ${h};
  transition-property: outline, outline-offset, box-shadow;
  transition-duration: 0.2s;
  transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);`};function m(f){return{outline:"none",boxShadow:"none"}}function c(f){return{outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:`0 0 0 2px ${f.colors.background.canvas}, 0 0 0px 4px ${f.colors.primary.main}`,transitionTimingFunction:"cubic-bezier(0.19, 1, 0.22, 1)",transitionDuration:"0.2s",transitionProperty:"outline, outline-offset, box-shadow"}}const d=f=>({overflow:"hidden",background:f.colors.background.secondary,boxShadow:f.shadows.z2,maxWidth:"800px",padding:f.spacing(1),borderRadius:f.shape.radius.default,zIndex:f.zIndex.tooltip})},33808:(G,A,e)=>{"use strict";e.d(A,{B:()=>o});var n=e(63957),a=e.n(n);function o(r){return a()(r)}},43597:(G,A,e)=>{"use strict";e.d(A,{c:()=>n});var n=(a=>(a.GroupTitle="GroupTitle",a))(n||{})},87337:()=>{},42305:(G,A,e)=>{"use strict";e.d(A,{BI:()=>r,D:()=>o,WZ:()=>g,e7:()=>i,iJ:()=>n.iJ});var n=e(6556),a=e(58309);const o=u=>["xs","sm","md","lg","xl","xxl","xxxl"].includes(u),r=()=>Object.keys(n._S);function i(u){return g(u?.type)}function g(u){if(u)switch(u){case a.fS.time:return"clock-nine";case a.fS.string:return"font";case a.fS.number:return"calculator-alt";case a.fS.boolean:return"toggle-on";case a.fS.trace:return"info-circle";case a.fS.enum:return"list-ol";case a.fS.geo:return"map-marker";case a.fS.other:return"brackets-curly"}return"question-circle"}},96878:(G,A,e)=>{"use strict";e.r(A),e.d(A,{CompletionItemKind:()=>i.c,getAvailableIcons:()=>l.BI,getFieldTypeIcon:()=>l.e7,getFieldTypeIconName:()=>l.WZ,isIconSize:()=>l.D,toIconName:()=>l.iJ});var n=e(77295),a=e.n(n),h={};for(const p in n)p!=="default"&&(h[p]=()=>n[p]);e.d(A,h);var o=e(24376),r=e.n(o),h={};for(const p in o)p!=="default"&&(h[p]=()=>o[p]);e.d(A,h);var i=e(43597),g=e(87337),u=e.n(g),h={};for(const p in g)["default","CompletionItemKind"].indexOf(p)<0&&(h[p]=()=>g[p]);e.d(A,h);var l=e(42305),m=e(54331),c=e.n(m),h={};for(const p in m)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","isIconSize","toIconName"].indexOf(p)<0&&(h[p]=()=>m[p]);e.d(A,h);var d=e(20792),f=e.n(d),h={};for(const p in d)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","isIconSize","toIconName"].indexOf(p)<0&&(h[p]=()=>d[p]);e.d(A,h);var E=e(81384),v=e.n(E),h={};for(const p in E)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","isIconSize","toIconName"].indexOf(p)<0&&(h[p]=()=>E[p]);e.d(A,h)},24376:()=>{},81384:()=>{},54331:()=>{},20792:()=>{},77295:()=>{},73088:(G,A,e)=>{"use strict";e.d(A,{i:()=>n});const n=(a,o)=>{a.key==="Tab"||a.altKey||a.ctrlKey||a.metaKey||(a.stopPropagation(),a.key==="Escape"&&o())}},42309:(G,A,e)=>{"use strict";e.d(A,{Gc:()=>h,Jx:()=>i,O9:()=>d,Wm:()=>s,_V:()=>l,bM:()=>p,f7:()=>m,iV:()=>c,ns:()=>u,te:()=>g});var n=e(56375),a=e.n(n),o=e(19737);const r=4,i="rgba(0, 211, 255, 1)",g="rgba(11, 237, 50, 1)",u="rgba(237, 46, 24, 1)",l="rgba(150, 150, 150, 1)",m="rgba(247, 149, 32, 1)",c=.09,d=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function f(y){const C=(0,n.map)(y,E),b=(0,n.sortBy)(C,["h"]),S=(0,n.chunk)(b,r),D=(0,n.map)(S,T=>(0,n.sortBy)(T,"l")),M=(0,n.flattenDeep)((0,n.zip)(...D));return(0,n.map)(M,v)}function E(y){return(0,o.Z)(y).toHsl()}function v(y){return(0,o.Z)(y).toHexString()}function h(y){return(0,o.Z)(y).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function p(y,C){const b=(0,o.Z)(y),S=b.getBrightness();return b.getAlpha()<.3?C?"rgb(247, 248, 250)":"rgb(32, 34, 38)":S>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let s=f(d)},35326:(G,A,e)=>{"use strict";e.d(A,{R:()=>n,g:()=>a});const n=o=>o().map(r=>({label:r.title,ariaLabel:r.title,url:r.href,target:r.target,icon:`${r.target==="_blank"?"external-link-alt":"link"}`,onClick:r.onClick})),a=o=>/\/explore\?.*&(left|right)=\[(.*\,){2,}(.*){1}\]/.test(o)},50284:(G,A,e)=>{"use strict";e.d(A,{x:()=>n});function n(a,o,r){}},1458:(G,A,e)=>{"use strict";e.d(A,{O:()=>n});function n(a){const r=a.lastIndexOf("."),i=a.substring(r),g=a.substring(0,r);return g.length<16?a:`${g.substring(0,16)}...${i}`}},15820:(G,A,e)=>{"use strict";e.d(A,{C:()=>o});var n=e(56375),a=e.n(n);function o(r,i){let g=0,u=r.indexOf(i);i=i.replace(/\s/g,"");const l=[];if(u!==-1)return{distance:0,found:!0,ranges:[{start:u,end:u+i.length-1}]};for(const m of i){const c=r.indexOf(m,u);if(c===-1)return{distance:1/0,ranges:[],found:!1};if(u!==-1&&(g+=c-u),u=c+1,l.length===0)l.push({start:c,end:c});else{const d=(0,n.last)(l);c===d.end+1?d.end++:l.push({start:c,end:c})}}return{distance:g,ranges:l,found:!0}}},64793:(G,A,e)=>{"use strict";e.d(A,{c:()=>g,t:()=>l});var n=e(18863),a=e(85960),o=e(15108),r=e(16568);function i(){typeof n.default.options.resources!="object"&&n.default.use(o.Db).init({resources:{},returnEmptyString:!1,lng:"en-US"})}const g=m=>(i(),a.createElement(r.c,{...m})),u=n.default.t,l=(m,c,d)=>(i(),u(m,c,d))},33173:(G,A,e)=>{"use strict";e.d(A,{ns:()=>i.ns,Jx:()=>i.Jx,Qi:()=>n,JU:()=>g.JU,_V:()=>i._V,zG:()=>y,te:()=>i.te,f7:()=>i.f7,iV:()=>i.iV,Ot:()=>r,Yi:()=>u.Yi,nu:()=>v.Z,_J:()=>h._J,xq:()=>s.x,MX:()=>f.MX,O9:()=>i.O9,hu:()=>p.h,C6:()=>C.C,AE:()=>f.AE,iu:()=>d.i,np:()=>c.n,vm:()=>m.vm,tu:()=>m.tu,Bx:()=>m.Bx,bM:()=>i.bM,Gc:()=>i.Gc,z3:()=>g.z3,go:()=>l.g,Rc:()=>l.R,xl:()=>u.xl,l1:()=>u.l1,X1:()=>f.X1,FE:()=>g.FE,Wm:()=>i.Wm,NW:()=>E.N,Gu:()=>g.Gu});var n={};e.r(n),e.d(n,{getNextCharacter:()=>o,getPreviousCousin:()=>a}),typeof window<"u"&&"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(b){const S=(this.document||this.ownerDocument).querySelectorAll(b);let D=this,M;do{for(M=S.length;--M>=0&&S.item(M)!==D;);D=D.parentElement}while(M<0&&D);return D});function a(b,S){let D=b.parentElement.previousSibling,M;for(;D;){if(M=D.querySelector(S),M)return M;D=D.previousSibling}}function o(b){const S=(b||window).getSelection();if(!S||!S.anchorNode)return null;const D=S.getRangeAt(0),M=S.anchorNode.textContent,T=D.startOffset;return M.slice(T,T+1)}var r=e(99053),i=e(42309),g=e(42664),u=e(1323),l=e(35326),m=e(97096),c=e(72987),d=e(44230),f=e(48461),E=e(87173),v=e(25728),h=e(45033),p=e(95288),s=e(50284),y=(b=>(b.id="id",b.title="title",b.subTitle="subTitle",b.mainStat="mainStat",b.secondaryStat="secondaryStat",b.source="source",b.target="target",b.detail="detail__",b.arc="arc__",b.color="color",b))(y||{}),C=e(15820)},95288:(G,A,e)=>{"use strict";e.d(A,{h:()=>r});var n=e(56375),a=e.n(n);const o=(0,n.throttle)((...i)=>{console.log(...i)},500),r=i=>{let g=!1;return typeof window<"u"&&(g=window.localStorage.getItem("grafana.debug")==="true"),{logger:(u,l=!1,...m)=>{},enable:()=>g=!0,disable:()=>g=!1,isEnabled:()=>g}}},48461:(G,A,e)=>{"use strict";e.d(A,{AE:()=>i,MX:()=>u,X1:()=>g});let n;const a=new Map,o=500;let r="";function i(){return n||(n=document.createElement("canvas").getContext("2d")),n}function g(l,m,c=400){const d=`${c} ${m}px 'Inter'`,f=l+d,E=a.get(f);if(E)return E;const v=i();r!==d&&(v.font=r=d);const h=v.measureText(l);return a.size===o&&a.clear(),a.set(f,h),h}function u(l,m,c,d,f,E){const v=g(l,14,E),h=m/(v.width+2)*14,p=c/d,s=Math.min(p,h);return Math.min(s,f??s)}},99053:(G,A,e)=>{"use strict";e.r(A),e.d(A,{getChildId:()=>a,renderOrCallToRender:()=>o});var n=e(85960);function a(r){let i;const g=n.Children.only(r);return"id"in g?.props?i=g.props.id:"inputId"in g.props&&(i=g?.props.inputId),typeof i=="string"?i:void 0}function o(r,i){if(n.isValidElement(r)||typeof r=="string"||typeof r=="number")return r;if(typeof r=="function"&&i)return r(i);throw new Error(`${r} is not a React element nor a function that returns React element`)}},72987:(G,A,e)=>{"use strict";e.d(A,{n:()=>a});let n=null;function a(){if(n!==null)return n;if(typeof document<"u"){const o=document.createElement("div"),r={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(r).map(i=>{o.style[i]=r[i]}),document.body.appendChild(o),n=o.offsetWidth-o.clientWidth,document.body.removeChild(o)}else n=0;return n||0}},25728:(G,A,e)=>{"use strict";e.d(A,{Z:()=>a,n:()=>g});var n=e(15820),a=(u=>(u.Word="Word",u.Prefix="Prefix",u.Fuzzy="Fuzzy",u))(a||{});const g={Word:(u,l)=>u.filter(m=>(m.filterText||m.label).includes(l)),Prefix:(u,l)=>u.filter(m=>(m.filterText||m.label).startsWith(l)),Fuzzy:(u,l)=>(l=l.toLowerCase(),u.filter(m=>{const{distance:c,ranges:d,found:f}=(0,n.C)(m.label.toLowerCase(),l);return f?(m.sortValue=c,m.highlightParts=d,!0):!1}))}},1323:(G,A,e)=>{"use strict";e.d(A,{Yi:()=>a,l1:()=>r,xl:()=>o});var n=e(53737);const a={document:{nodes:[{match:[{type:"paragraph"},{type:"code_block"},{type:"code_line"}]}]},inlines:{}},o=(i,g)=>{const u=i.split(`
`).map(m=>n.gO.create({type:"code_line",nodes:[n.xv.create(m)]})),l=n.gO.create({data:{syntax:g},type:"code_block",nodes:u});return n.BB.create({nodes:[l]})},r=(i,g)=>{const u=o(i,g);return n.B4.create({document:u})}},44230:(G,A,e)=>{"use strict";e.d(A,{i:()=>n});const n=(a,o)=>{let r;if(a.getLinks&&(r=a.getLinks({valueRowIndex:o.index})),!!r){for(let i=0;i<r?.length;i++)if(r[i].onClick){const g=r[i].onClick;r[i].onClick=u=>{u.ctrlKey||u.metaKey||u.shiftKey||(u.preventDefault(),g(u,{field:a,rowIndex:o.index}))}}return r}}},97096:(G,A,e)=>{"use strict";e.d(A,{Bx:()=>r,tu:()=>o,vm:()=>i});const n=["#D32D20","#1E72B8","#B240A2","#705DA0","#466803","#497A3C","#3D71AA","#B15415","#890F02","#6E6E6E","#0A437C","#6D1F62","#584477","#4C7A3F","#2F4F4F","#BF1B00","#7662B1","#8A2EB8","#517A00","#000000","#3F6833","#2F575E","#99440A","#AE561A","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],a=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];function o(l=""){const m=g(l.toLowerCase());return Math.abs(m%n.length)}function r(l=""){const m=o(l);return i(m)}function i(l){return{color:n[l],borderColor:a[l]}}function g(l){let m=5381;for(let c=0;c<l.length;c++)m=(m<<5)+m+l.charCodeAt(c);return m}var u={getTagColorsFromName:r}},18213:(G,A,e)=>{"use strict";e.d(A,{k:()=>o});var n=e(66681),a=e(30887);function o(r,i,g,u,l){return{arrow:(0,n.css)({height:"1rem",width:"1rem",position:"absolute",pointerEvents:"none","&::before":{borderStyle:"solid",content:'""',display:"block",height:0,margin:"auto",width:0},"&::after":{borderStyle:"solid",content:'""',display:"block",height:0,margin:"auto",position:"absolute",width:0}}),container:(0,n.css)({backgroundColor:i,borderRadius:r.shape.radius.default,border:`1px solid ${g}`,boxShadow:r.shadows.z2,color:u,fontSize:r.typography.bodySmall.fontSize,padding:r.spacing(l.topBottom,l.rightLeft),transition:"opacity 0.3s",zIndex:r.zIndex.tooltip,maxWidth:"400px",overflowWrap:"break-word","&[data-popper-interactive='false']":{pointerEvents:"none"},"&[data-popper-placement*='bottom'] > div[data-popper-arrow='true']":{left:0,marginTop:"-7px",top:0,"&::before":{borderColor:`transparent transparent ${g} transparent`,borderWidth:"0 8px 7px 8px",position:"absolute",top:"-1px"},"&::after":{borderColor:`transparent transparent ${i} transparent`,borderWidth:"0 8px 7px 8px"}},"&[data-popper-placement*='top'] > div[data-popper-arrow='true']":{bottom:0,left:0,marginBottom:"-14px","&::before":{borderColor:`${g} transparent transparent transparent`,borderWidth:"7px 8px 0 7px",position:"absolute",top:"1px"},"&::after":{borderColor:`${i} transparent transparent transparent`,borderWidth:"7px 8px 0 7px"}},"&[data-popper-placement*='right'] > div[data-popper-arrow='true']":{left:0,marginLeft:"-10px","&::before":{borderColor:`transparent ${g} transparent transparent`,borderWidth:"7px 6px 7px 0"},"&::after":{borderColor:`transparent ${i} transparent transparent`,borderWidth:"6px 7px 7px 0",left:"2px",top:"1px"}},"&[data-popper-placement*='left'] > div[data-popper-arrow='true']":{marginRight:"-11px",right:0,"&::before":{borderColor:`transparent transparent transparent ${g}`,borderWidth:"7px 0 6px 7px"},"&::after":{borderColor:`transparent transparent transparent ${i}`,borderWidth:"6px 0 5px 5px",left:"1px",top:"1px"}},code:{border:"none",display:"inline",background:a.darken(i,.1),color:u},pre:{background:a.darken(i,.1),color:u},a:{color:u,textDecoration:"underline"},"a:hover":{textDecoration:"none"}}),headerClose:(0,n.css)({color:r.colors.text.secondary,position:"absolute",right:r.spacing(1),top:r.spacing(1.5),backgroundColor:"transparent",border:0}),header:(0,n.css)({paddingTop:r.spacing(1),paddingBottom:r.spacing(2)}),body:(0,n.css)({paddingTop:r.spacing(1),paddingBottom:r.spacing(1)}),footer:(0,n.css)({paddingTop:r.spacing(2),paddingBottom:r.spacing(1)})}}},87173:(G,A,e)=>{"use strict";e.d(A,{N:()=>a});var n=e(85960);function a(){const[o,r]=(0,n.useState)(0);return()=>r(i=>i+1)}},42664:(G,A,e)=>{"use strict";e.d(A,{FE:()=>r,Gu:()=>a,JU:()=>n,z3:()=>o});var n=(i=>(i.onBlur="onBlur",i.onFocus="onFocus",i.onChange="onChange",i))(n||{});const a=(i,g)=>{const u=g.reduce((l,m)=>m.rule(i)?l:l.concat(m.errorMessage),[]);return u.length>0?u:null},o=(i,g)=>g&&g[i],r=(i,g)=>({rule:u=>!!u.match(i),errorMessage:g||"Value is not valid"})},25997:(G,A,e)=>{"use strict";e.d(A,{z:()=>n});const n={RadioButton:{container:"data-testid radio-button"},Breadcrumbs:{breadcrumb:a=>`data-testid ${a} breadcrumb`},TimePicker:{openButton:"data-testid TimePicker Open Button",overlayContent:"data-testid TimePicker Overlay Content",fromField:"data-testid Time Range from field",toField:"data-testid Time Range to field",applyTimeRange:"data-testid TimePicker submit button",calendar:{label:"data-testid Time Range calendar",openButton:"data-testid Open time range calendar",closeButton:"data-testid Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSourcePermissions:{form:()=>'form[name="addPermission"]',roleType:"Role to add new permission to",rolePicker:"Built-in role picker",permissionLevel:"Permission Level"},DateTimePicker:{input:"data-testid date-time-input"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{connectionSettings:"Data source connection URL",exemplarsAddButton:"Add exemplar config button",internalLinkSwitch:"Internal link switch"},exemplarMarker:"Exemplar marker"}},Menu:{MenuComponent:a=>`${a} menu`,MenuGroup:a=>`${a} menu group`,MenuItem:a=>`${a} menu item`,SubMenu:{container:"SubMenu container",icon:"SubMenu icon"}},Panels:{Panel:{title:a=>`data-testid Panel header ${a}`,headerItems:a=>`data-testid Panel header item ${a}`,menuItems:a=>`data-testid Panel menu item ${a}`,menu:a=>`data-testid Panel menu ${a}`,containerByTitle:a=>`${a} panel`,headerCornerInfo:a=>`Panel header ${a}`,status:a=>`data-testid Panel status ${a}`,loadingBar:()=>"Panel loading bar",HoverWidget:{container:"data-testid hover-header-container",dragIcon:"data-testid drag-icon"}},Visualization:{Graph:{container:"Graph container",VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:a=>`gpl alias ${a}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer",body:"data-testid table body"}}},VizLegend:{seriesName:a=>`VizLegend series ${a}`},Drawer:{General:{title:a=>`Drawer title ${a}`,expand:"Drawer expand",contract:"Drawer contract",close:"Drawer close",rcContentWrapper:()=>".rc-drawer-content-wrapper"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:a=>`${a} field property editor`},DataPane:{content:"Panel editor data pane content"},applyButton:"data-testid Apply changes and go back to dashboard",toggleVizPicker:"data-testid toggle-viz-picker",toggleVizOptions:"data-testid toggle-viz-options",toggleTableView:"toggle-table-view",showZoomField:"Map controls Show zoom control field property editor",showAttributionField:"Map controls Show attribution field property editor",showScaleField:"Map controls Show scale field property editor",showMeasureField:"Map controls Show measure tools field property editor",showDebugField:"Map controls Show debug field property editor",measureButton:"show measure tools"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:a=>`Tab ${a}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"data-testid query-history-button",addQuery:"data-testid query-tab-add-query"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:a=>`${a}`,title:a=>`Query editor row title ${a}`,container:a=>`Query editor row ${a}`},AlertTab:{content:"data-testid Alert editor tab content"},Alert:{alert:a=>`Alert ${a}`,alertV2:a=>`data-testid Alert ${a}`},TransformTab:{content:"data-testid Transform editor tab content",newTransform:a=>`data-testid New transform ${a}`,transformationEditor:a=>`data-testid Transformation editor ${a}`,transformationEditorDebugger:a=>`data-testid Transformation editor debugger ${a}`},Transforms:{card:a=>`data-testid New transform ${a}`,Reduce:{modeLabel:"data-testid Transform mode label",calculationsLabel:"data-testid Transform calculations label"},SpatialOperations:{actionLabel:"root Action field property editor",locationLabel:"root Location Mode field property editor",location:{autoOption:"Auto location option",coords:{option:"Coords location option",latitudeFieldLabel:"root Latitude field field property editor",longitudeFieldLabel:"root Longitude field field property editor"},geohash:{option:"Geohash location option",geohashFieldLabel:"root Geohash field field property editor"},lookup:{option:"Lookup location option",lookupFieldLabel:"root Lookup field field property editor",gazetteerFieldLabel:"root Gazetteer field property editor"}}},searchInput:"data-testid search transformations",noTransformationsMessage:"data-testid no transformations message",addTransformationButton:"data-testid add transformation button"},NavBar:{Configuration:{button:"Configuration"},Toggle:{button:"data-testid Toggle menu"},Reporting:{button:"Reporting"}},NavMenu:{Menu:"data-testid navigation mega-menu",item:"data-testid Nav menu item"},NavToolbar:{container:"data-testid Nav toolbar"},PageToolbar:{container:()=>".page-toolbar",item:a=>`${a}`,itemButton:a=>`data-testid ${a}`},QueryEditorToolbarItem:{button:a=>`QueryEditor toolbar item button ${a}`},BackButton:{backArrow:"Go Back"},OptionsGroup:{group:a=>a?`Options group ${a}`:"Options group",toggle:a=>a?`Options group ${a} toggle`:"Options group toggle"},PluginVisualization:{item:a=>`Plugin visualization item ${a}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"Select a folder"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"data-testid Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"data-testid Select a data source"},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"Query field"},QueryBuilder:{queryPatterns:"Query patterns",labelSelect:"Select label",valueSelect:"Select value",matchOperatorSelect:"Select match operator"},ValuePicker:{button:a=>`Value picker button ${a}`,select:a=>`Value picker select ${a}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:a=>`data-testid Collapse folder ${a}`,expandFolder:a=>`data-testid Expand folder ${a}`,dashboardItem:a=>`${n.Search.dashboardItems} ${a}`,dashboardCard:a=>`data-testid Search card ${a}`,folderHeader:a=>`data-testid Folder header ${a}`,folderContent:a=>`data-testid Folder content ${a}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"Loading indicator"},CallToActionCard:{button:a=>`Call to action button ${a}`,buttonV2:a=>`data-testid Call to action button ${a}`},DataLinksContextMenu:{singleLink:"Data link"},CodeEditor:{container:"data-testid Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"data-testid Unified alert editor tab content"},VisualizationPreview:{card:a=>`data-testid suggestion-${a}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:a=>`data-testid dashboard-row-title-${a}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table",extensionPointTabs:"data-testid-extension-point-tabs",extensionPointTab:a=>`data-testid-extension-point-tab-${a}`},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"},DebugOverlay:{wrapper:"debug-overlay"},OrgRolePicker:{input:"Role"},AnalyticsToolbarButton:{button:"Dashboard insights"},Variables:{variableOption:"data-testid variable-option"},Annotations:{annotationsTypeInput:"annotations-type-input",annotationsChoosePanelInput:"choose-panels-input"},Tooltip:{container:"data-testid tooltip"}}},92369:(G,A,e)=>{"use strict";e.d(A,{wl:()=>o});var n=e(25997);const o={pages:{Login:{url:"/login",username:"data-testid Username input field",password:"data-testid Password input field",submit:"data-testid Login button",skip:"data-testid Skip change password button"},Home:{url:"/"},DataSource:{name:"Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"Data source settings page read only message",saveAndTest:"data-testid Data source settings page Save and Test button",alert:"Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:r=>`Data source list item ${r}`},EditDataSource:{url:r=>`/datasources/edit/${r}`,settings:"Datasource settings page basic settings"},AddDataSource:{url:"/datasources/new",dataSourcePlugins:r=>`Data source plugin item ${r}`,dataSourcePluginsV2:r=>`Add new data source ${r}`},ConfirmModal:{delete:"data-testid Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",itemButton:r=>`data-testid ${r}`,addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:r=>`/d/${r}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag"},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:r=>`data-testid Dashboard template variables submenu Label ${r}`,submenuItemValueDropDownValueLinkTexts:r=>`data-testid Dashboard template variables Variable Value DropDown value link text ${r}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:r=>`data-testid Dashboard template variables Variable Value DropDown option text ${r}`,Annotations:{annotationsWrapper:"data-testid annotation-wrapper",annotationLabel:r=>`data-testid Dashboard annotations submenu Label ${r}`,annotationToggle:r=>`data-testid Dashboard annotations submenu Toggle ${r}`}},Settings:{Actions:{close:"data-testid dashboard-settings-close"},General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:r=>`Dashboard settings section item ${r}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Tab General"},Annotations:{List:{addAnnotationCTA:n.z.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:n.z.CallToActionCard.buttonV2("Add annotation query")},Settings:{name:"Annotations settings name input"},NewAnnotation:{panelFilterSelect:"data-testid annotations-panel-filter",showInLabel:"show-in-label",previewInDashboard:"data-testid annotations-preview"}},Variables:{List:{addVariableCTA:n.z.CallToActionCard.button("Add variable"),addVariableCTAV2:n.z.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:r=>`Variable editor Table Name field ${r}`,tableRowDefinitionFields:r=>`Variable editor Table Definition field ${r}`,tableRowArrowUpButtons:r=>`Variable editor Table ArrowUp button ${r}`,tableRowArrowDownButtons:r=>`Variable editor Table ArrowDown button ${r}`,tableRowDuplicateButtons:r=>`Variable editor Table Duplicate button ${r}`,tableRowRemoveButtons:r=>`Variable editor Table Remove button ${r}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"Variable editor Form IncludeAll field",selectionOptionsCustomAllInputV2:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"Variable editor Preview of Values option",submitButton:"Variable editor Submit button",applyButton:"data-testid Variable editor Apply button"},QueryVariable:{queryOptionsDataSourceSelect:n.z.DataSourcePicker.container,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input"}}}},Annotations:{marker:"data-testid annotation-marker"},Rows:{Repeated:{ConfigSection:{warningMessage:"data-testid Repeated rows warning message"}}}},Dashboards:{url:"/dashboards",dashboards:r=>`Dashboard search item ${r}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{shareButton:"Share dashboard",PublicDashboard:{Tab:"Tab Public dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",PauseSwitch:"data-testid public dashboard pause switch",EnableAnnotationsSwitch:"data-testid public dashboard on off switch for annotations",CreateButton:"data-testid public dashboard create button",DeleteButton:"data-testid public dashboard delete button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",SettingsDropdown:"data-testid public dashboard settings dropdown",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert",UnsupportedDataSourcesWarningAlert:"data-testid public dashboard unsupported data sources alert",NoUpsertPermissionsWarningAlert:"data-testid public dashboard no upsert permissions alert",EnableTimeRangeSwitch:"data-testid public dashboard on off switch for time range",EmailSharingConfiguration:{Container:"data-testid email sharing config container",ShareType:"data-testid public dashboard share type",EmailSharingInput:"data-testid public dashboard email sharing input",EmailSharingInviteButton:"data-testid public dashboard email sharing invite button",EmailSharingList:"data-testid public dashboard email sharing list",DeleteEmail:"data-testid public dashboard delete email button",ReshareLink:"data-testid public dashboard reshare link button"}}},PublicDashboard:{page:"public-dashboard-page",NotAvailable:{container:"public-dashboard-not-available",title:"public-dashboard-title",pausedDescription:"public-dashboard-paused-description"}},RequestViewAccess:{form:"request-view-access-form",recipientInput:"request-view-access-recipient-input",submitButton:"request-view-access-submit-button"},PublicDashboardConfirmAccess:{submitButton:"data-testid confirm-access-submit-button"},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:r=>`/d-solo/${r}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"Plugin signature info",disabledInfo:"Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemDelete:"data-testid playlist-form-delete-item"},BrowseDashboards:{table:{body:"data-testid browse-dashboards-table",row:r=>`data-testid browse dashboards row ${r}`,checkbox:r=>`data-testid ${r} checkbox`},NewFolderForm:{form:"data-testid new folder form",nameInput:"data-testid new-folder-name-input",createButton:"data-testid new-folder-create-button"}},Search:{url:"/?search=openn",FolderView:{url:"/?search=open&layout=folders"}},PublicDashboards:{ListItem:{linkButton:"public-dashboard-link-button",configButton:"public-dashboard-configuration-button",trashcanButton:"public-dashboard-remove-button",pauseSwitch:"data-testid public dashboard pause switch"}},UserListPage:{tabs:{allUsers:"data-testid all-users-tab",orgUsers:"data-testid org-users-tab",anonUserDevices:"data-testid anon-user-devices-tab",publicDashboardsUsers:"data-testid public-dashboards-users-tab",users:"data-testid users-tab"},org:{url:"/org/users"},admin:{url:"/admin/users"},publicDashboards:{container:"data-testid public-dashboards-users-list"},UserListAdminPage:{container:"data-testid user-list-admin-page"},UsersListPage:{container:"data-testid users-list-page"},UsersListPublicDashboardsPage:{container:"data-testid users-list-public-dashboards-page",DashboardsListModal:{listItem:r=>`data-testid dashboards-list-item-${r}`}}},ProfilePage:{url:"/profile"}},components:n.z}},1713:(G,A,e)=>{"use strict";e.d(A,{As:()=>F,B5:()=>n,Bd:()=>te,FI:()=>p,IG:()=>I,Jp:()=>d,KC:()=>v,L3:()=>_,LB:()=>m,M8:()=>V,Q8:()=>r,QH:()=>j,Ss:()=>k,UV:()=>l,Y4:()=>X,ap:()=>L,b8:()=>q,bQ:()=>b,eK:()=>a,f3:()=>N,h2:()=>z,i3:()=>D,iT:()=>de,jG:()=>P,jK:()=>M,kW:()=>g,kv:()=>u,l8:()=>f,o:()=>H,o0:()=>s,pR:()=>E,pc:()=>x,pu:()=>y,q1:()=>i,v7:()=>K,wN:()=>C,wf:()=>h,wm:()=>R,xy:()=>o,yK:()=>c});var n=(re=>(re.Linear="linear",re.Quad="quad",re))(n||{}),a=(re=>(re.Clamped="clamped",re.Mod="mod",re))(a||{}),o=(re=>(re.Field="field",re.Fixed="fixed",re.Template="template",re))(o||{}),r=(re=>(re.Field="field",re.Fixed="fixed",re.Mapping="mapping",re))(r||{}),i=(re=>(re.Auto="auto",re.Coords="coords",re.Geohash="geohash",re.Lookup="lookup",re))(i||{}),g=(re=>(re.Count="count",re.Size="size",re))(g||{}),u=(re=>(re.auto="auto",re.ge="ge",re.le="le",re.unknown="unknown",re))(u||{}),l=(re=>(re.Ascending="Ascending",re.Descending="Descending",re))(l||{}),m=(re=>(re.Auto="auto",re.Bottom="bottom",re.Hidden="hidden",re.Left="left",re.Right="right",re.Top="top",re))(m||{}),c=(re=>(re.Series="series",re.Text="text",re))(c||{}),d=(re=>(re.Always="always",re.Auto="auto",re.Never="never",re))(d||{}),f=(re=>(re.Bars="bars",re.Line="line",re.Points="points",re))(f||{}),E=(re=>(re.Constant="constant",re.NegativeY="negative-Y",re))(E||{}),v=(re=>(re.Linear="linear",re.Smooth="smooth",re.StepAfter="stepAfter",re.StepBefore="stepBefore",re))(v||{}),h=(re=>(re.Linear="linear",re.Log="log",re.Ordinal="ordinal",re.Symlog="symlog",re))(h||{}),p=(re=>(re.Hue="hue",re.None="none",re.Opacity="opacity",re.Scheme="scheme",re))(p||{}),s=(re=>(re.None="none",re.Normal="normal",re.Percent="percent",re))(s||{}),y=(re=>(re[re.After=1]="After",re[re.Before=-1]="Before",re[re.Center=0]="Center",re))(y||{}),C=(re=>(re[re.Horizontal=0]="Horizontal",re[re.Vertical=1]="Vertical",re))(C||{}),b=(re=>(re[re.Down=-1]="Down",re[re.Left=-1]="Left",re[re.Right=1]="Right",re[re.Up=1]="Up",re))(b||{});const S={dash:[]};var D=(re=>(re.Area="area",re.Dashed="dashed",re.DashedAndArea="dashed+area",re.Line="line",re.LineAndArea="line+area",re.Off="off",re.Series="series",re))(D||{}),M=(re=>(re.Hidden="hidden",re.List="list",re.Table="table",re))(M||{});const T={calcs:[]};var R=(re=>(re.Auto="auto",re.Horizontal="horizontal",re.Vertical="vertical",re))(R||{});const O={timezone:[]};var x=(re=>(re.Background="background",re.BackgroundSolid="background_solid",re.None="none",re.Value="value",re))(x||{}),I=(re=>(re.Area="area",re.Line="line",re.None="none",re))(I||{}),L=(re=>(re.Auto="auto",re.Center="center",re))(L||{}),P=(re=>(re.Auto="auto",re.Name="name",re.None="none",re.Value="value",re.ValueAndName="value_and_name",re))(P||{}),N=(re=>(re.Multi="multi",re.None="none",re.Single="single",re))(N||{}),F=(re=>(re.Ascending="asc",re.Descending="desc",re.None="none",re))(F||{});const U={calcs:[]};var j=(re=>(re.Basic="basic",re.Gradient="gradient",re.Lcd="lcd",re))(j||{}),V=(re=>(re.Color="color",re.Hidden="hidden",re.Text="text",re))(V||{}),_=(re=>(re.Auto="auto",re.Left="left",re.Top="top",re))(_||{}),H=(re=>(re.Auto="auto",re.Manual="manual",re))(H||{}),z=(re=>(re.Auto="auto",re.BasicGauge="basic",re.ColorBackground="color-background",re.ColorBackgroundSolid="color-background-solid",re.ColorText="color-text",re.Custom="custom",re.Gauge="gauge",re.GradientGauge="gradient-gauge",re.Image="image",re.JSONView="json-view",re.LcdGauge="lcd-gauge",re.Sparkline="sparkline",re))(z||{}),K=(re=>(re.Basic="basic",re.Gradient="gradient",re))(K||{});const Y={fields:[],reducer:[]};var k=(re=>(re.Lg="lg",re.Md="md",re.Sm="sm",re))(k||{}),q=(re=>(re.CSV="csv",re.Date="date",re.Distributed="distributed",re.DoubleQuote="doublequote",re.Glob="glob",re.HTML="html",re.JSON="json",re.Lucene="lucene",re.PercentEncode="percentencode",re.Pipe="pipe",re.QueryParam="queryparam",re.Raw="raw",re.Regex="regex",re.SQLString="sqlstring",re.SingleQuote="singlequote",re.Text="text",re.UriEncode="uriencode",re))(q||{}),X=(re=>(re.exact="exact",re.none="none",re.numbers="numbers",re.signature="signature",re))(X||{}),te=(re=>(re.EQ="eq",re.GT="gt",re.GTE="gte",re.LT="lt",re.LTE="lte",re.NEQ="neq",re))(te||{});const se={align:"auto",inspect:!1},de="browser"},6152:(G,A,e)=>{"use strict";e.d(A,{AU:()=>r,vC:()=>o});var n=e(1713);const a="10.2.3",o={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:n.wm.Auto,showValue:n.Jp.Auto,stacking:n.o0.None,xTickLabelRotation:0,xTickLabelSpacing:0},r={fillOpacity:80,gradientMode:n.FI.None,lineWidth:1}},34792:(G,A,e)=>{"use strict";e.d(A,{v:()=>o});var n=e(1713);const a="10.2.3",o={displayMode:n.QH.Gradient,maxVizHeight:300,minVizHeight:75,minVizWidth:75,namePlacement:n.L3.Auto,showUnfilled:!0,sizing:n.o.Auto,valueMode:n.M8.Color}},45199:(G,A,e)=>{"use strict";e.d(A,{v:()=>a});const n="10.2.3",a={selectedSeries:0}},97767:(G,A,e)=>{"use strict";e.d(A,{v:()=>o});var n=e(1713);const a="10.2.3",o={minVizHeight:200,minVizWidth:200,showThresholdLabels:!1,showThresholdMarkers:!0,sizing:n.o.Auto}},65333:(G,A,e)=>{"use strict";e.d(A,{vC:()=>a});const n="10.2.3",a={layers:[]},o={allLayers:!0,id:"zero",lat:0,lon:0,zoom:1};var r=(g=>(g.Details="details",g.None="none",g))(r||{}),i=(g=>(g.Coords="coords",g.Fit="fit",g.Zero="zero",g))(i||{})},74035:(G,A,e)=>{"use strict";e.d(A,{vC:()=>i});var n=e(1713);const a="10.2.3";var o=(g=>(g.Opacity="opacity",g.Scheme="scheme",g))(o||{}),r=(g=>(g.Exponential="exponential",g.Linear="linear",g))(r||{});const i={calculate:!1,cellGap:1,cellValues:{},color:{scheme:"Oranges",fill:"dark-orange",reverse:!1,exponent:.5,steps:64},exemplars:{color:"rgba(255,0,255,0.7)"},filterValues:{le:1e-9},legend:{show:!0},showValue:n.Jp.Auto,tooltip:{show:!0,yHistogram:!1,showColorScale:!1}}},41766:(G,A,e)=>{"use strict";e.d(A,{AU:()=>r,vC:()=>o});var n=e(1713);const a="10.2.3",o={bucketOffset:0},r={fillOpacity:80,gradientMode:n.FI.None,lineWidth:1}},10220:(G,A,e)=>{"use strict";e.d(A,{v:()=>a});const n="10.2.3",a={showImage:!0}},91656:(G,A,e)=>{"use strict";e.d(A,{vC:()=>g});const n="10.2.3";var a=(u=>(u.Donut="donut",u.Pie="pie",u))(a||{}),o=(u=>(u.Name="name",u.Percent="percent",u.Value="value",u))(o||{}),r=(u=>(u.Percent="percent",u.Value="value",u))(r||{});const i={values:[]},g={displayLabels:[]}},96165:(G,A,e)=>{"use strict";e.d(A,{v:()=>o});var n=e(1713);const a="10.2.3",o={colorMode:n.pc.Value,graphMode:n.IG.Area,justifyMode:n.ap.Auto,textMode:n.jG.Auto,wideLayout:!0}},53899:(G,A,e)=>{"use strict";e.d(A,{AU:()=>r,vC:()=>o});var n=e(1713);const a="10.2.3",o={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:n.Jp.Auto},r={fillOpacity:70,lineWidth:0}},19301:(G,A,e)=>{"use strict";e.d(A,{AU:()=>r,vC:()=>o});var n=e(1713);const a="10.2.3",o={colWidth:.9,rowHeight:.9,showValue:n.Jp.Auto},r={fillOpacity:70,lineWidth:1}},2546:(G,A,e)=>{"use strict";e.d(A,{v:()=>o});var n=e(1713);const a="10.2.3",o={cellHeight:n.Ss.Sm,footer:{show:!1,countRows:!1,reducer:[]},frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]}},27873:(G,A,e)=>{"use strict";e.d(A,{vC:()=>g});const n="10.2.3";var a=(u=>(u.Code="code",u.HTML="html",u.Markdown="markdown",u))(a||{}),o=(u=>(u.Go="go",u.Html="html",u.Json="json",u.Markdown="markdown",u.Plaintext="plaintext",u.Sql="sql",u.Typescript="typescript",u.Xml="xml",u.Yaml="yaml",u))(o||{});const r="plaintext",i={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},g={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"}},32263:(G,A,e)=>{"use strict";e.d(A,{vC:()=>u});var n=e(1713);const a="10.2.3";var o=(l=>(l.Auto="auto",l.Manual="manual",l))(o||{}),r=(l=>(l.Lines="lines",l.Points="points",l.PointsAndLines="points+lines",l))(r||{});const i={exclude:[]},g={label:n.Jp.Auto,show:"points"},u={series:[]}},91470:(G,A,e)=>{"use strict";e.d(A,{$U:()=>l,AU:()=>D,Bd:()=>g,G_:()=>r,H3:()=>f,Hi:()=>v,NU:()=>C,Ql:()=>T,SJ:()=>M,Vb:()=>b,ZM:()=>S,bn:()=>o,gW:()=>i,ic:()=>p,mQ:()=>s});const n={tags:[]},a={exclude:!1,ids:[]},o={list:[]},r={builtIn:0,enable:!0,hide:!1},i={multi:!1,options:[],skipUrlSync:!1};var g=(R=>(R[R.never=0]="never",R[R.onDashboardLoad=1]="onDashboardLoad",R[R.onTimeRangeChanged=2]="onTimeRangeChanged",R))(g||{}),u=(R=>(R[R.dontHide=0]="dontHide",R[R.hideLabel=1]="hideLabel",R[R.hideVariable=2]="hideVariable",R))(u||{}),l=(R=>(R[R.alphabeticalAsc=1]="alphabeticalAsc",R[R.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",R[R.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",R[R.alphabeticalDesc=2]="alphabeticalDesc",R[R.disabled=0]="disabled",R[R.naturalAsc=7]="naturalAsc",R[R.naturalDesc=8]="naturalDesc",R[R.numericalAsc=3]="numericalAsc",R[R.numericalDesc=4]="numericalDesc",R))(l||{});const m={asDropdown:!1,includeVars:!1,keepTime:!1,tags:[],targetBlank:!1};var c=(R=>(R.ContinuousBlPu="continuous-BlPu",R.ContinuousBlYlRd="continuous-BlYlRd",R.ContinuousBlues="continuous-blues",R.ContinuousGrYlRd="continuous-GrYlRd",R.ContinuousGreens="continuous-greens",R.ContinuousPurples="continuous-purples",R.ContinuousRdYlGr="continuous-RdYlGr",R.ContinuousReds="continuous-reds",R.ContinuousYlBl="continuous-YlBl",R.ContinuousYlRd="continuous-YlRd",R.Fixed="fixed",R.PaletteClassic="palette-classic",R.PaletteClassicByName="palette-classic-by-name",R.Shades="shades",R.Thresholds="thresholds",R))(c||{});const d={h:9,w:12,x:0,y:0};var f=(R=>(R.Absolute="absolute",R.Percentage="percentage",R))(f||{});const E={steps:[]};var v=(R=>(R.RangeToText="range",R.RegexToText="regex",R.SpecialValue="special",R.ValueToText="value",R))(v||{}),h=(R=>(R.Empty="empty",R.False="false",R.NaN="nan",R.Null="null",R.NullAndNan="null+nan",R.True="true",R))(h||{});const p={hidden:!1,refresh_intervals:["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],time_options:["5m","15m","1h","6h","12h","24h","2d","7d","30d"]};var s=(R=>(R[R.Crosshair=1]="Crosshair",R[R.Off=0]="Off",R[R.Tooltip=2]="Tooltip",R))(s||{});const y=0,C={links:[],repeatDirection:"h",tags:[],targets:[],transformations:[],transparent:!1},b={overrides:[]},S={id:""},D={links:[],mappings:[]},M={collapsed:!1,panels:[]},T={editable:!0,fiscalYearStartMonth:0,graphTooltip:0,links:[],panels:[],schemaVersion:36,tags:[],timezone:"browser"}},54881:(G,A,e)=>{"use strict";e.d(A,{Gu:()=>o,OA:()=>a});var n=e(1713);const a={align:"auto",inspect:!1,cellOptions:{type:n.h2.Auto}};var o=(r=>(r.NotStarted="NotStarted",r.Loading="Loading",r.Streaming="Streaming",r.Done="Done",r.Error="Error",r))(o||{})},34166:(G,A,e)=>{"use strict";e.d(A,{Ql:()=>o,bU:()=>a,ic:()=>i});var n=e(91470),a=(E=>(E[E.dontHide=0]="dontHide",E[E.hideLabel=1]="hideLabel",E[E.hideVariable=2]="hideVariable",E))(a||{});const o=n.Ql,r={...n.gW},i=n.ic,g=n.NU,u=n.SJ,l=n.AU,m=n.Vb,c=n.ZM,d=n.G_,f=n.bn},32610:(G,A,e)=>{"use strict";e.d(A,{M:()=>i,Z:()=>o});var n=e(56375),a=e.n(n);class o{constructor(u){if(this.columns=[],this.columnMap={},this.rows=[],this.type="table",u){if(u.columns)for(const l of u.columns)this.addColumn(l);if(u.rows)for(const l of u.rows)this.addRow(l)}}sort(u){u.col===null||u.col===void 0||this.columns.length<=u.col||(this.rows.sort((l,m)=>(l=l[u.col],m=m[u.col],+(l==null)-+(m==null)||+(l>m)||-(l<m))),u.desc&&this.rows.reverse(),this.columns[u.col].sort=!0,this.columns[u.col].desc=u.desc)}addColumn(u){this.columnMap[u.text]||(this.columns.push(u),this.columnMap[u.text]=u)}addRow(u){this.rows.push(u)}}function r(g,u,l){let m=!1;for(let c=0;c<g.length;c++)if(u[c]!==void 0&&l[c]!==void 0){if(u[c]!==l[c])return!1}else(u[c]===void 0||l[c]===void 0)&&(m=!0);return m}function i(g,...u){const l=g||new o;if(arguments.length===1)return l;if(arguments.length===2)return l.columns=u[0].hasOwnProperty("columns")?[...u[0].columns]:[],l.rows=u[0].hasOwnProperty("rows")?[...u[0].rows]:[],l;const m=u.filter(p=>!!p.columns),c={},d=m.slice().reduce((p,s)=>(s.columns.forEach(y=>{const{text:C}=y;c[C]===void 0&&(c[C]=p.length,p.push(y))}),p),[]),f=m.map(p=>p.columns.map(s=>c[s.text])),E=m.reduce((p,s,y)=>{const C=f[y];return s.rows.forEach(b=>{const S=[];C.forEach((D,M)=>{S[D]=b[M]}),p.push(S)}),p},[]),v={},h=E.reduce((p,s,y)=>{if(!v[y]){let C=y+1;for(;C<E.length;){const b=(0,n.findIndex)(E,S=>r(d,s,S),C);if(b>-1){const S=E[b];for(let D=0;D<d.length;D++)s[D]===void 0&&S[D]!==void 0&&(s[D]=S[D]);v[b]=S,C=b+1}else break}p.push(s)}return p},[]);return l.columns=d,l.rows=h,l}},1992:(G,A,e)=>{"use strict";e.d(A,{e:()=>a});var n=e(20079);const a=(0,n.PH)("core/cleanUpState")},88492:(G,A,e)=>{"use strict";e.d(A,{$l:()=>n.$l,H7:()=>a.H7,RL:()=>a.RL,ad:()=>n.ad});var n=e(12263),a=e(24344)},60484:(G,A,e)=>{"use strict";e.d(A,{Z:()=>o,h:()=>a});var n=e(16293);const a=new n.F,o=a},88879:(G,A,e)=>{"use strict";e.d(A,{P:()=>F});var n=e(66681),a=e(56375),o=e(85960),r=e(98181),i=e(47257),g=e(29165),u=e(21674),l=e(95329),m=e(46783),c=e(46569),d=e(66596),f=e(13086),E=e(27436),v=e(88940),h=e(85445);class p extends o.Component{constructor(k){super(k),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,a.debounce)(this.search,300,{leading:!0,trailing:!0})}search(k){return this.setState({isLoading:!0}),(0,a.isNil)(k)&&(k=""),(0,h.i)().get("/api/serviceaccounts/search").then(q=>q.serviceAccounts.map(X=>({id:X.id,value:X.id,label:X.login,imgUrl:X.avatarUrl,login:X.login}))).finally(()=>{this.setState({isLoading:!1})})}render(){const{className:k,onSelected:q,inputId:X}=this.props,{isLoading:te}=this.state;return o.createElement("div",{className:"service-account-picker","data-testid":"serviceAccountPicker"},o.createElement(E.qb,{isClearable:!0,className:k,inputId:X,isLoading:te,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:q,placeholder:"Start typing to search for service accounts",noOptionsMessage:"No service accounts found","aria-label":"Service Account picker"}))}}class s extends o.Component{constructor(k){super(k),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,a.debounce)(this.search,300,{leading:!0,trailing:!0})}componentDidMount(){const{teamId:k}=this.props;k&&(0,h.i)().get(`/api/teams/${k}`).then(q=>{this.setState({value:{value:q,label:q.name,imgUrl:q.avatarUrl}})})}search(k){return this.setState({isLoading:!0}),(0,a.isNil)(k)&&(k=""),(0,h.i)().get(`/api/teams/search?perpage=100&page=1&query=${k}`).then(q=>{const X=q.teams.map(te=>({value:te,label:te.name,imgUrl:te.avatarUrl}));return this.setState({isLoading:!1}),X})}render(){const{onSelected:k,className:q}=this.props,{isLoading:X,value:te}=this.state;return o.createElement("div",{className:"user-picker","data-testid":"teamPicker"},o.createElement(E.qb,{isLoading:X,defaultOptions:!0,loadOptions:this.debouncedSearch,value:te,onChange:k,className:q,placeholder:"Select a team",noOptionsMessage:"No teams found","aria-label":"Team picker"}))}}class y extends o.Component{constructor(k){super(k),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,a.debounce)(this.search,300,{leading:!0,trailing:!0})}search(k){return this.setState({isLoading:!0}),(0,a.isNil)(k)&&(k=""),(0,h.i)().get(`/api/org/users/lookup?query=${k}&limit=100`).then(q=>q.map(X=>({id:X.userId,value:X.userId,label:X.login,imgUrl:X.avatarUrl,login:X.login}))).finally(()=>{this.setState({isLoading:!1})})}render(){const{className:k,onSelected:q,inputId:X}=this.props,{isLoading:te}=this.state;return o.createElement("div",{className:"user-picker","data-testid":"userPicker"},o.createElement(E.qb,{isClearable:!0,className:k,inputId:X,isLoading:te,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:q,placeholder:"Start typing to search for user",noOptionsMessage:"No users found","aria-label":"User picker"}))}}var C=e(84337),b=(Y=>(Y.None="None",Y.Team="Team",Y.User="User",Y.ServiceAccount="ServiceAccount",Y.BuiltInRole="builtInRole",Y))(b||{});const S=({title:Y=(0,l.t)("access-control.add-permission.title","Add permission for"),permissions:k,assignments:q,onAdd:X,onCancel:te})=>{const[se,de]=(0,o.useState)(b.None),[re,fe]=(0,o.useState)(0),[ie,oe]=(0,o.useState)(0),[ue,me]=(0,o.useState)(""),[ge,Ue]=(0,o.useState)(""),De=(0,o.useMemo)(()=>{const ye=[];return q.users&&ye.push({value:b.User,label:(0,l.t)("access-control.add-permission.user-label","User")}),q.serviceAccounts&&ye.push({value:b.ServiceAccount,label:(0,l.t)("access-control.add-permission.serviceaccount-label","Service Account")}),q.teams&&ye.push({value:b.Team,label:(0,l.t)("access-control.add-permission.team-label","Team")}),q.builtInRoles&&ye.push({value:b.BuiltInRole,label:(0,l.t)("access-control.add-permission.role-label","Role")}),ye},[q]);(0,o.useEffect)(()=>{k.length>0&&Ue(k[0])},[k]);const Pe=()=>se===b.Team&&re>0||se===b.User&&ie>0||se===b.ServiceAccount&&ie>0||b.BuiltInRole&&C.B5.hasOwnProperty(ue);return o.createElement("div",{className:"cta-form","aria-label":"Permissions slider"},o.createElement(v.P,{onClick:te}),o.createElement("h5",null,Y),o.createElement(d.l,{name:"addPermission",maxWidth:"none",onSubmit:()=>X({userId:ie,teamId:re,builtInRole:ue,permission:ge,target:se})},()=>o.createElement(f.K,{gap:1,direction:"row"},o.createElement(E.Ph,{"aria-label":"Role to add new permission to",value:se,options:De,onChange:ye=>de(ye.value),disabled:De.length===0,width:"auto"}),se===b.User&&o.createElement(y,{onSelected:ye=>oe(ye?.value||0)}),se===b.ServiceAccount&&o.createElement(p,{onSelected:ye=>oe(ye?.value||0)}),se===b.Team&&o.createElement(s,{onSelected:ye=>fe(ye.value?.id||0)}),se===b.BuiltInRole&&o.createElement(E.Ph,{"aria-label":"Built-in role picker",options:Object.values(C.B5).filter(ye=>ye!==C.B5.None).map(ye=>({value:ye,label:ye})),onChange:ye=>me(ye.value||""),width:"auto"}),o.createElement(E.Ph,{"aria-label":"Permission Level",width:"auto",value:k.find(ye=>ye===ge),options:k.map(ye=>({label:ye,value:ye})),onChange:ye=>Ue(ye.value||"")}),o.createElement(g.zx,{type:"submit",disabled:!Pe()},o.createElement(l.cC,{i18nKey:"access-control.add-permissions.save"},"Save")))))};var D=e(14607),M=e(97666);const T=({item:Y,permissionLevels:k,canSet:q,onRemove:X,onChange:te})=>o.createElement("tr",null,o.createElement("td",null,R(Y)),o.createElement("td",null,x(Y)),o.createElement("td",null,Y.isInherited&&o.createElement("em",{className:"muted no-wrap"},"Inherited from folder")),o.createElement("td",null,o.createElement(E.Ph,{disabled:!q||!Y.isManaged,onChange:se=>te(Y,se.value),value:k.find(se=>se===Y.permission),options:k.map(se=>({value:se,label:se}))})),o.createElement("td",null,o.createElement(D.u,{content:I(Y)},o.createElement(M.J,{name:"info-circle"}))),o.createElement("td",null,Y.isManaged?o.createElement(g.zx,{size:"sm",icon:"times",variant:"destructive",disabled:!q,onClick:()=>X(Y),"aria-label":`Remove permission for ${O(Y)}`}):o.createElement(D.u,{content:Y.isInherited?"Inherited Permission":"Provisioned Permission"},o.createElement(g.zx,{size:"sm",icon:"lock"})))),R=Y=>Y.teamId?o.createElement("img",{className:"filter-table__avatar",src:Y.teamAvatarUrl,alt:`Avatar for team ${Y.teamId}`}):Y.userId?o.createElement("img",{className:"filter-table__avatar",src:Y.userAvatarUrl,alt:`Avatar for user ${Y.userId}`}):o.createElement(M.J,{size:"xl",name:"shield"}),O=Y=>Y.userId?Y.userLogin:Y.teamId?Y.team:Y.builtInRole,x=Y=>Y.userId?o.createElement("span",{key:"name"},Y.userLogin," "):Y.teamId?o.createElement("span",{key:"name"},Y.team," "):Y.builtInRole?o.createElement("span",{key:"name"},Y.builtInRole," "):o.createElement("span",{key:"name"}),I=Y=>`Actions: ${[...new Set(Y.actions)].sort().join(" ")}`,L=({title:Y,items:k,compareKey:q,permissionLevels:X,canSet:te,onRemove:se,onChange:de})=>{const re=(0,o.useMemo)(()=>{const fe={};for(let ie of k){const oe=ie[q];if(!fe[oe]){fe[oe]=ie;continue}ie.actions.length>fe[oe].actions.length&&(fe[oe]=ie)}return Object.keys(fe).map(ie=>fe[ie])},[k,q]);return re.length===0?null:o.createElement("div",null,o.createElement("table",{className:"filter-table gf-form-group"},o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",{style:{width:"1%"}}),o.createElement("th",null,Y),o.createElement("th",{style:{width:"1%"}}),o.createElement("th",{style:{width:"40%"}},o.createElement(l.cC,{i18nKey:"access-control.permission-list.permission"},"Permission")),o.createElement("th",{style:{width:"1%"}}),o.createElement("th",{style:{width:"1%"}}))),o.createElement("tbody",null,re.map((fe,ie)=>o.createElement(T,{item:fe,onRemove:se,onChange:de,canSet:te,key:`${ie}-${fe.userId}`,permissionLevels:X})))))},P="",N={permissions:[],assignments:{teams:!1,users:!1,serviceAccounts:!1,builtInRoles:!1}},F=({title:Y=(0,l.t)("access-control.permissions.title","Permissions"),buttonLabel:k=(0,l.t)("access-control.permissions.add-label","Add a permission"),emptyLabel:q=(0,l.t)("access-control.permissions.no-permissions","There are no permissions"),resource:X,resourceId:te,canSetPermissions:se,addPermissionTitle:de})=>{const re=(0,i.wW)(K),[fe,ie]=(0,o.useState)(!1),[oe,ue]=(0,o.useState)([]),[me,ge]=(0,o.useState)(N),Ue=(0,o.useCallback)(()=>j(X,te).then(Oe=>ue(Oe)),[X,te]);(0,o.useEffect)(()=>{U(X).then(Oe=>(ge(Oe),Ue()))},[X,te,Ue]);const De=Oe=>{let Ne=null;Oe.target===b.User||Oe.target===b.ServiceAccount?Ne=V(X,te,Oe.userId,Oe.permission):Oe.target===b.Team?Ne=_(X,te,Oe.teamId,Oe.permission):Oe.target===b.BuiltInRole&&(Ne=H(X,te,Oe.builtInRole,Oe.permission)),Ne!==null&&Ne.then(Ue)},Pe=Oe=>{let Ne=null;Oe.userId?Ne=V(X,te,Oe.userId,P):Oe.teamId?Ne=_(X,te,Oe.teamId,P):Oe.isServiceAccount&&Oe.userId?Ne=V(X,te,Oe.userId,P):Oe.builtInRole&&(Ne=H(X,te,Oe.builtInRole,P)),Ne!==null&&Ne.then(Ue)},ye=(Oe,Ne)=>{Oe.permission!==Ne&&(Oe.userId?De({permission:Ne,userId:Oe.userId,target:b.User}):Oe.isServiceAccount?De({permission:Ne,userId:Oe.userId,target:b.User}):Oe.teamId?De({permission:Ne,teamId:Oe.teamId,target:b.Team}):Oe.builtInRole&&De({permission:Ne,builtInRole:Oe.builtInRole,target:b.BuiltInRole}))},Te=(0,o.useMemo)(()=>(0,a.sortBy)(oe.filter(Oe=>Oe.teamId),["team","isManaged"]),[oe]),nt=(0,o.useMemo)(()=>(0,a.sortBy)(oe.filter(Oe=>Oe.userId&&!Oe.isServiceAccount),["userLogin","isManaged"]),[oe]),ct=(0,o.useMemo)(()=>(0,a.sortBy)(oe.filter(Oe=>Oe.userId&&Oe.isServiceAccount),["userLogin","isManaged"]),[oe]),he=(0,o.useMemo)(()=>(0,a.sortBy)(oe.filter(Oe=>Oe.builtInRole),["builtInRole","isManaged"]),[oe]),xe=(0,l.t)("access-control.permissions.role","Role"),Me=(0,l.t)("access-control.permissions.user","User"),He=(0,l.t)("access-control.permissions.serviceaccount","Service Account"),Ve=(0,l.t)("access-control.permissions.team","Team");return o.createElement("div",null,se&&o.createElement(o.Fragment,null,X==="folders"&&o.createElement(o.Fragment,null,o.createElement(l.cC,{i18nKey:"access-control.permissions.permissions-change-warning"},"This will change permissions for this folder and all its descendants. In total, this will affect:"),o.createElement(c.X,{selectedItems:{folder:{[te]:!0},dashboard:{},panel:{},$all:!1}}),o.createElement(r.T,{v:2})),o.createElement(g.zx,{className:re.addPermissionButton,variant:"primary",key:"add-permission",onClick:()=>ie(!0)},k),o.createElement(u.s,{in:fe},o.createElement(S,{title:de,onAdd:De,permissions:me.permissions,assignments:me.assignments,onCancel:()=>ie(!1)}))),oe.length===0&&o.createElement("table",{className:"filter-table gf-form-group"},o.createElement("tbody",null,o.createElement("tr",null,o.createElement("th",null,q)))),o.createElement(L,{title:xe,items:he,compareKey:"builtInRole",permissionLevels:me.permissions,onChange:ye,onRemove:Pe,canSet:se}),o.createElement(L,{title:Me,items:nt,compareKey:"userLogin",permissionLevels:me.permissions,onChange:ye,onRemove:Pe,canSet:se}),o.createElement(L,{title:He,items:ct,compareKey:"userLogin",permissionLevels:me.permissions,onChange:ye,onRemove:Pe,canSet:se}),o.createElement(L,{title:Ve,items:Te,compareKey:"team",permissionLevels:me.permissions,onChange:ye,onRemove:Pe,canSet:se}))},U=async Y=>{try{return await(0,m.i)().get(`/api/access-control/${Y}/description`)}catch(k){return console.error("failed to load resource description: ",k),N}},j=(Y,k)=>(0,m.i)().get(`/api/access-control/${Y}/${k}`),V=(Y,k,q,X)=>z(Y,k,"users",q,X),_=(Y,k,q,X)=>z(Y,k,"teams",q,X),H=(Y,k,q,X)=>z(Y,k,"builtInRoles",q,X),z=(Y,k,q,X,te)=>(0,m.i)().post(`/api/access-control/${Y}/${k}/${q}/${X}`,{permission:te}),K=Y=>({breakdown:(0,n.css)({...Y.typography.bodySmall,color:Y.colors.text.secondary,marginBottom:Y.spacing(2)}),addPermissionButton:(0,n.css)({marginBottom:Y.spacing(2)})})},21674:(G,A,e)=>{"use strict";e.d(A,{s:()=>g});var n=e(85960),a=e(19547);const o="200px",r=200,i={transition:`max-height ${r}ms ease-in-out`,overflow:"hidden"},g=({children:u,in:l,maxHeight:m=o,style:c=i})=>{const d={exited:{maxHeight:0},entering:{maxHeight:m},entered:{maxHeight:"unset",overflow:"visible"},exiting:{maxHeight:0}};return n.createElement(a.ZP,{in:l,timeout:r},f=>n.createElement("div",{style:{...c,...d[f]}},u))}},37870:(G,A,e)=>{"use strict";e.d(A,{A:()=>o});var n=e(85960),a=e(6005);const o=n.memo(({actions:r})=>{const{chrome:i}=(0,a.p)();return(0,n.useLayoutEffect)(()=>{i.update({actions:r})}),null});o.displayName="TopNavUpdate"},35304:(G,A,e)=>{"use strict";e.d(A,{M:()=>r});var n=e(66681),a=e(85960),o=e(47257);function r({className:g,leftActionsSeparator:u}){const l=(0,o.wW)(i);return u?a.createElement("div",{className:(0,n.cx)(g,l.leftActionsSeparator)}):a.createElement("div",{className:(0,n.cx)(g,l.line)})}const i=g=>({leftActionsSeparator:(0,n.css)({display:"flex",flexGrow:1}),line:(0,n.css)({width:1,backgroundColor:g.colors.border.medium,height:24})})},27737:(G,A,e)=>{"use strict";e.d(A,{$:()=>n});const n=40},95454:(G,A,e)=>{"use strict";e.d(A,{c:()=>m});var n=e(66681),a=e(85960),o=e(30887),r=e(47257);const i=({className:c,logo:d})=>a.createElement("img",{className:c,src:`${d||"public/img/grafana_icon.svg"}`,alt:"Grafana"}),g=({className:c,children:d})=>{const f=(0,r.l4)(),E=(0,n.css)({"&:before":{content:'""',position:"fixed",left:0,right:0,bottom:0,top:0,background:`url(public/img/g8_login_${f.isDark?"dark":"light"}.svg)`,backgroundPosition:"top center",backgroundSize:"auto",backgroundRepeat:"no-repeat",opacity:0,transition:"opacity 3s ease-in-out",[f.breakpoints.up("md")]:{backgroundPosition:"center",backgroundSize:"cover"}}});return a.createElement("div",{className:(0,n.cx)(E,c)},d)},u=({className:c})=>a.createElement("img",{className:c,src:"public/img/grafana_icon.svg",alt:"Grafana"}),l=()=>{const c=(0,r.l4)();return(0,n.css)({background:o.alpha(c.colors.background.primary,.7),backgroundSize:"cover"})};class m{}m.LoginLogo=i,m.LoginBackground=g,m.MenuLogo=u,m.LoginBoxBackground=l,m.AppTitle="Grafana",m.LoginTitle="Welcome to Grafana",m.HideEdition=!1,m.GetLoginSubTitle=()=>null},65946:(G,A,e)=>{"use strict";e.d(A,{t:()=>a});var n=e(90857);function a(o,r,i){const g=[];let u=!1,l;function m(c,d=!1){if(u)return;const f=c.url?.split("?")??["",""];let E=f[0];if(n.config.featureToggles.dockedMegaMenu){const p=new URLSearchParams(f[1]);p.has("editview")&&(E+=`?editview=${p.get("editview")}`)}if(i&&E===i.url){g.unshift({text:i.text,href:c.url??""}),u=!0;return}const v=E.length>0&&l===E;l=E,!c.hideFromBreadcrumbs&&!(d&&v)&&g.unshift({text:c.text,href:c.url??""}),c.parentItem&&m(c.parentItem)}return r&&m(r),m(o,!0),g}},20249:(G,A,e)=>{"use strict";e.d(A,{x:()=>i});var n=e(66681),a=e(85960),o=e(47257),r=e(97666);const i=a.forwardRef(({icon:u,children:l,onClick:m,...c},d)=>{const f=(0,o.wW)(g);return a.createElement("button",{...c,className:f.action,onClick:m},a.createElement(r.J,{name:u,size:"xl"}),l)});i.displayName="CardButton";const g=u=>({action:(0,n.css)({display:"flex",flexDirection:"column",height:"100%",justifySelf:"center",cursor:"pointer",background:u.colors.background.secondary,borderRadius:u.shape.radius.default,color:u.colors.text.primary,border:"unset",width:"100%",justifyContent:"center",alignItems:"center",textAlign:"center","&:hover":{background:u.colors.emphasize(u.colors.background.secondary)}})})},88940:(G,A,e)=>{"use strict";e.d(A,{P:()=>i});var n=e(66681),a=e(85960),o=e(47257),r=e(75064);const i=({onClick:u,"aria-label":l,style:m})=>{const c=(0,o.wW)(g);return a.createElement(r.h,{"aria-label":l??"Close",className:c,name:"times",onClick:u,style:m,tooltip:"Close"})},g=u=>(0,n.css)({position:"absolute",right:u.spacing(.5),top:u.spacing(1)})},7033:(G,A,e)=>{"use strict";e.d(A,{W:()=>r});var n=e(66681),a=e(85960),o=e(47257);function r(g){const{description:u,suffix:l,feature:m}=g,c=`Learn more about ${m}`,d=(0,o.wW)(i);return a.createElement("span",{className:d.container},u,a.createElement("a",{"aria-label":c,href:`https://grafana.com/docs/grafana/next/datasources/${l}`,rel:"noreferrer",target:"_blank"},c))}const i=g=>({container:(0,n.css)({color:g.colors.text.secondary,a:(0,n.css)({color:g.colors.text.link,textDecoration:"underline",marginLeft:"5px","&:hover":{textDecoration:"none"}})})})},3693:(G,A,e)=>{"use strict";e.d(A,{Q:()=>a});var n=e(85960);const a=o=>n.lazy(o)},64409:(G,A,e)=>{"use strict";e.d(A,{Z:()=>c});var n=e(66681),a=e(85960),o=e(92369),r=e(97666),i=e(29165),g=e(11318);const u=(0,n.css)({textAlign:"center"}),l=(0,n.css)({maxWidth:"700px",margin:"0 auto"}),c=({title:d,buttonIcon:f,buttonLink:E,buttonTitle:v,buttonDisabled:h,onClick:p,proTip:s,proTipLink:y,proTipLinkTitle:C,proTipTarget:b,infoBox:S,infoBoxTitle:D})=>{const M=()=>a.createElement(a.Fragment,null,s?a.createElement("span",{key:"proTipFooter"},a.createElement(r.J,{name:"rocket"}),a.createElement(a.Fragment,null," ProTip: ",s," "),y&&a.createElement("a",{href:y,target:b,className:"text-link"},C)):"",S?a.createElement("div",{key:"infoBoxHtml",className:`grafana-info-box ${l}`},D&&a.createElement("h5",null,D),a.createElement("div",{dangerouslySetInnerHTML:S})):""),T=M()?"":(0,n.css)({marginBottom:"20px"}),R=E?i.Qj:i.zx,O=a.createElement(R,{size:"lg",onClick:p,href:E,icon:f,className:T,"data-testid":o.wl.components.CallToActionCard.buttonV2(v),disabled:h},v);return a.createElement(g._,{className:u,message:d,footer:M(),callToActionElement:O})}},53479:(G,A,e)=>{"use strict";e.d(A,{$_:()=>m,dP:()=>i});var n=e(85960),a=e(90857),o=e(97666),r=e(95329);let i=()=>[{target:"_blank",id:"documentation",text:(0,r.t)("nav.help/documentation","Documentation"),icon:"document-info",url:"https://grafana.com/docs/grafana/latest/?utm_source=grafana_footer"},{target:"_blank",id:"support",text:(0,r.t)("nav.help/support","Support"),icon:"question-circle",url:"https://grafana.com/products/enterprise/?utm_source=grafana_footer"},{target:"_blank",id:"community",text:(0,r.t)("nav.help/community","Community"),icon:"comments-alt",url:"https://community.grafana.com/?utm_source=grafana_footer"}];function g(d){return{hasReleaseNotes:!0,isBeta:d.includes("-beta")}}function u(d){const{buildInfo:f,licenseInfo:E}=a.config,v=[],h=E.stateInfo?` (${E.stateInfo})`:"";if(d||v.push({target:"_blank",id:"license",text:`${f.edition}${h}`,url:E.licenseUrl}),f.hideVersion)return v;const{hasReleaseNotes:p}=g(f.version);return v.push({target:"_blank",id:"version",text:`v${f.version} (${f.commit})`,url:p?"https://github.com/grafana/grafana/blob/main/CHANGELOG.md":void 0}),f.hasUpdate&&v.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),v}function l(d){i=d}const m=n.memo(({customLinks:d,hideEdition:f})=>{const E=(d||i()).concat(u(f));return n.createElement("footer",{className:"footer"},n.createElement("div",{className:"text-center"},n.createElement("ul",null,E.map(v=>n.createElement("li",{key:v.text},n.createElement(c,{item:v}))))))});m.displayName="Footer";function c({item:d}){const f=d.url?n.createElement("a",{href:d.url,target:d.target,rel:"noopener noreferrer",id:d.id},d.text):d.text;return n.createElement(n.Fragment,null,d.icon&&n.createElement(o.J,{name:d.icon})," ",f)}},82426:(G,A,e)=>{"use strict";e.d(A,{G:()=>f});var n=e(85960),a=e(92369),o=e(47257),r=e(66596),i=e(49199),g=e(20519),u=e(74042),l=e(29165),m=e(14607),c=e(12043),d=e(81795);const f=({onSubmit:E,onSkip:v,showDefaultPasswordWarning:h})=>{const p=(0,o.wW)(c.W),s=y=>{E(y.newPassword)};return n.createElement(r.l,{onSubmit:s},({errors:y,register:C,getValues:b})=>n.createElement(n.Fragment,null,h&&n.createElement(i.b,{severity:"info",title:"Continuing to use the default password exposes you to security risks."}),n.createElement(g.g,{label:"New password",invalid:!!y.newPassword,error:y?.newPassword?.message},n.createElement(d.Z,{...C("newPassword",{required:"New Password is required"}),id:"new-password",autoFocus:!0,autoComplete:"new-password"})),n.createElement(g.g,{label:"Confirm new password",invalid:!!y.confirmNew,error:y?.confirmNew?.message},n.createElement(d.Z,{...C("confirmNew",{required:"Confirmed Password is required",validate:S=>S===b().newPassword||"Passwords must match!"}),id:"confirm-new-password",autoComplete:"new-password"})),n.createElement(u.wc,null,n.createElement(l.zx,{type:"submit",className:p.submitButton},"Submit"),v&&n.createElement(m.u,{content:"If you skip you will be prompted to change password next time you log in.",placement:"bottom"},n.createElement(l.zx,{fill:"text",onClick:v,type:"button","data-testid":a.wl.pages.Login.skip},"Skip")))))}},74210:(G,A,e)=>{"use strict";e.d(A,{d:()=>h});var n=e(85960),a=e(34269),o=e(45691),r=e(34103),i=e(70274),g=e(58309),u=e(43471),l=e(47475),m=e(29627),c=e(76738),d=e(34305),f=e(79474),E=e(18581);function v(p,s,y=[]){for(const C of y)if(typeof C=="function"){if(!C(p,s))return!1}else if(s[C]!==p[C])return!1;return!0}class h extends n.Component{constructor(s){super(s),this.panelContext={},this.subscription=new a.w0,this.getTimeRange=()=>this.props.timeRange;let y=this.prepState(s);y.alignedData=y.config.prepData([y.alignedFrame]),this.state=y,this.plotInstance=n.createRef()}prepState(s,y=!0){let C=null;const{frames:b,fields:S,preparePlotFrame:D}=s,T=(D||E.R)(b,S||{x:r.Ls.get(i.mi.firstTimeField).get({}),y:r.Ls.get(i.mi.byTypes).get(new Set([g.fS.number,g.fS.enum]))},s.timeRange);if((0,f.Zp)("GraphNG",!1,"data aligned",T),T){let R=this.state?.config;y&&(R=s.prepConfig(T,this.props.frames,this.getTimeRange),(0,f.Zp)("GraphNG",!1,"config prepared",R)),C={alignedFrame:T,config:R},(0,f.Zp)("GraphNG",!1,"data prepared",C.alignedData)}return C}handleCursorUpdate(s){const y=s.payload?.point?.time,C=this.plotInstance.current;if(C&&y){const b=C.valToPos(y,"x");let S;if(b&&(S=(0,f.ah)(C,C.posToIdx(b))),!S||!b)return;C.setCursor({left:b,top:S})}}componentDidMount(){this.panelContext=this.context;const{eventBus:s}=this.panelContext;this.subscription.add(s.getStream(u.es).pipe((0,o.p)(50)).subscribe({next:y=>{s!==y.origin&&this.handleCursorUpdate(y)}})),this.subscription.add(s.getStream(l.IA).pipe((0,o.p)(50)).subscribe({next:y=>this.handleCursorUpdate(y)})),this.subscription.add(s.getStream(u.xH).pipe((0,o.p)(50)).subscribe({next:()=>{const y=this.plotInstance?.current;y&&!y.cursor._lock&&y.setCursor({left:-10,top:-10})}}))}componentDidUpdate(s){const{frames:y,structureRev:C,timeZone:b,propsToDiff:S}=this.props,D=!v(s,this.props,S);if(y!==s.frames||D||b!==s.timeZone){let M=this.prepState(this.props,!1);M&&((this.state.config===void 0||b!==s.timeZone||C!==s.structureRev||!C||D)&&(M.config=this.props.prepConfig(M.alignedFrame,this.props.frames,this.getTimeRange),(0,f.Zp)("GraphNG",!1,"config recreated",M.config)),M.alignedData=M.config.prepData([M.alignedFrame]),this.setState(M))}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:s,height:y,children:C,renderLegend:b}=this.props,{config:S,alignedFrame:D,alignedData:M}=this.state;return S?n.createElement(m.AY,{width:s,height:y,legend:b(S)},(T,R)=>n.createElement(d.N,{config:S,data:M,width:T,height:R,plotRef:O=>this.plotInstance.current=O},C?C(S,D):null)):null}}h.contextType=c.bb},18581:(G,A,e)=>{"use strict";e.d(A,{R:()=>m});var n=e(58309),a=e(85334),o=e(84231);function r(c,d,f){let E,v;for(let h=0;h<d.length;h++)if(d[h]==null)v==null&&E!=null&&(v=h);else{if(v!=null&&E!=null){if(c[h]-E<f)for(;v<h;)d[v++]=void 0;v=null}E=c[h]}return d}var i=e(1713);function g(c){return c.type===n.fS.number&&c.config.custom?.drawStyle===i.l8.Bars&&!c.config.custom?.hideFrom?.viz}function u(c,d){return c.fields.find(f=>d!=null?f.name===d:f.type===n.fS.time)}function l(c,d){const f=u(c,d);let E=f?.values;for(let v=0;v<c.fields.length;v++){let h=c.fields[v];if(h===f||g(h))continue;let p=h.config.custom?.spanNulls;typeof p=="number"&&p!==-1&&E&&(h.values=r(E,h.values,p))}return c}function m(c,d,f){let E;e:for(let s of c)for(let y of s.fields)if(d.x(y,s,c)){E=y;break e}c=c.map(s=>E?.state?.nullThresholdApplied?s:(0,o.w)({frame:s,refFieldName:E.name,refFieldPseudoMin:f?.from.valueOf(),refFieldPseudoMax:f?.to.valueOf()}));let v=0;c.forEach(s=>{s.fields.forEach(y=>{g(y)&&(y.config.custom={...y.config.custom,spanNulls:-1},v++)})});let h=1/0;v>1&&c.forEach(s=>{if(!s.fields.some(g))return;const y=E.values;for(let C=0;C<y.length;C++)C>0&&(h=Math.min(h,y[C]-y[C-1]))});let p=(0,a._9)({frames:c,joinBy:d.x,keep:d.y,keepOriginIndices:!0});return p?(p=l(p,E.name),h!==1/0&&(p.fields.forEach((s,y)=>{let C=s.values;if(y===0){let b=C[C.length-1];C.push(b+h,b+2*h)}else g(s)?C.push(null,null):C.push(void 0,void 0)}),p.length+=2),p):null}},40604:(G,A,e)=>{"use strict";e.d(A,{A:()=>i});var n=e(66681),a=e(85960),o=e(47257),r=e(79918);function i({children:u,spacing:l,level:m}){const c=(0,o.wW)(g,l,m);return a.createElement("span",{className:(0,n.css)(c.indentor)},u)}const g=(u,l,m)=>({indentor:(0,n.css)((0,r.U)(u,l,c=>({paddingLeft:u.spacing(c*m)})))})},42177:(G,A,e)=>{"use strict";e.d(A,{w:()=>u});var n=e(85960),a=e(27160),o=e(84933),r=e(24956);const i=/^(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])$/,g=(l,m)=>!(l.match(m)||!l),u=l=>{const m=l.validationRegex||i,[c,d]=(0,n.useState)(()=>l.value?g(l.value,m):!1);(0,a.Z)(()=>{d(g(l.value,m))},500,[l.value]);const f={labelWidth:26,disabled:l.disabled??!1,invalid:c,error:l.isInvalidError};return l.label&&(f.label=l.label,f.tooltip=l.tooltip||""),n.createElement(o._,{...f},n.createElement(r.I,{type:"text",placeholder:l.placeholder||"0",width:l.width||40,onChange:E=>{l.onChange(E.currentTarget.value)},value:l.value,"aria-label":l.ariaLabel||"interval input"}))}},63791:(G,A,e)=>{"use strict";e.d(A,{X:()=>u});var n=e(66681),a=e(85960),o=e(47257),r=e(97666),i=e(24956),g=e(74321);const u=({name:m,onChange:c,verifyLayerNameUniqueness:d,overrideStyles:f})=>{const E=(0,o.wW)(l),[v,h]=(0,a.useState)(!1),[p,s]=(0,a.useState)(null),y=T=>{h(!0)},C=T=>{if(h(!1),p){s(null);return}m!==T&&c(T)},b=T=>{const R=T.currentTarget.value.trim();if(R.length===0){s("An empty layer name is not allowed");return}if(d&&!d(R)&&R!==m){s("Layer name already exists");return}p&&s(null)},S=T=>{C(T.currentTarget.value.trim())},D=T=>{T.key==="Enter"&&C(T.currentTarget.value)},M=T=>{T.target.select()};return a.createElement(a.Fragment,null,a.createElement("div",{className:E.wrapper},!v&&a.createElement("button",{className:E.layerNameWrapper,title:"Edit layer name",onClick:y,"data-testid":"layer-name-div"},a.createElement("span",{className:f?"":E.layerName},m),a.createElement(r.J,{name:"pen",className:E.layerEditIcon,size:"sm"})),v&&a.createElement(a.Fragment,null,a.createElement(i.I,{type:"text",defaultValue:m,onBlur:S,autoFocus:!0,onKeyDown:D,onFocus:M,invalid:p!==null,onChange:b,className:E.layerNameInput,"data-testid":"layer-name-input"}),p&&a.createElement(g.S,{horizontal:!0},p))))},l=m=>({wrapper:(0,n.css)({label:"Wrapper",display:"flex",alignItems:"center",marginLeft:m.spacing(.5)}),layerNameWrapper:(0,n.css)({display:"flex",cursor:"pointer",border:"1px solid transparent",borderRadius:m.shape.radius.default,alignItems:"center",padding:`0 0 0 ${m.spacing(.5)}`,margin:0,background:"transparent","&:hover":{background:m.colors.action.hover,border:`1px dashed ${m.colors.border.strong}`},"&:focus":{border:`2px solid ${m.colors.primary.border}`},"&:hover, &:focus":{".query-name-edit-icon":{visibility:"visible"}}}),layerName:(0,n.css)({fontWeight:m.typography.fontWeightMedium,color:m.colors.primary.text,cursor:"pointer",overflow:"hidden",marginLeft:m.spacing(.5)}),layerEditIcon:(0,n.cx)((0,n.css)({marginLeft:m.spacing(2),visibility:"hidden"}),"query-name-edit-icon"),layerNameInput:(0,n.css)({maxWidth:"300px",margin:"-4px 0"})})},52248:(G,A,e)=>{"use strict";e.d(A,{G:()=>o});var n=e(85960),a=e(20994);const o=r=>{const{children:i,storageKey:g,defaultValue:u}=r,[l,m]=(0,n.useState)({value:a.Z.getObject(r.storageKey,r.defaultValue)});(0,n.useEffect)(()=>{const f=E=>{E.key===g&&m({value:a.Z.getObject(r.storageKey,r.defaultValue)})};return window.addEventListener("storage",f),()=>{window.removeEventListener("storage",f)}});const c=f=>{try{a.Z.setObject(g,f)}catch(E){console.error(E)}m({value:f})},d=()=>{try{a.Z.delete(g)}catch(f){console.log(f)}m({value:u})};return n.createElement(n.Fragment,null,i(l.value,c,d))}},19630:(G,A,e)=>{"use strict";e.d(A,{Z:()=>u});var n=e(85960),a=e(85445),o=e(67954),r=e(95329);const i=()=>!!o.default.oauth&&Object.keys(o.default.oauth).length>0;class g extends n.PureComponent{constructor(c){super(c),this.changePassword=d=>{const f={newPassword:d,confirmNew:d,oldPassword:"admin"};if(this.props.resetCode){const E={code:this.props.resetCode,newPassword:d,confirmPassword:d};(0,a.i)().post("/api/user/password/reset",E).then(()=>{this.toGrafana()})}else(0,a.i)().put("/api/user/password",f).then(()=>{this.toGrafana()}).catch(E=>console.error(E))},this.login=d=>{this.setState({loginErrorMessage:void 0,isLoggingIn:!0}),(0,a.i)().post("/login",d,{showErrorAlert:!1}).then(f=>{if(this.result=f,d.password!=="admin"||o.default.ldapEnabled||o.default.authProxyEnabled){this.toGrafana();return}else this.changeView(d.password==="admin")}).catch(f=>{const E=(0,a.kW)(f)?l(f):void 0;this.setState({isLoggingIn:!1,loginErrorMessage:E||(0,r.t)("login.error.unknown","Unknown error occurred")})})},this.changeView=d=>{this.setState({isChangingPassword:!0,showDefaultPasswordWarning:d})},this.toGrafana=()=>{this.result?.redirectUrl?o.default.appSubUrl!==""&&!this.result.redirectUrl.startsWith(o.default.appSubUrl)?window.location.assign(o.default.appSubUrl+this.result.redirectUrl):window.location.assign(this.result.redirectUrl):window.location.assign(o.default.appSubUrl+"/")},this.state={isLoggingIn:!1,isChangingPassword:!1,showDefaultPasswordWarning:!1,loginErrorMessage:o.default.loginError}}render(){const{children:c}=this.props,{isLoggingIn:d,isChangingPassword:f,showDefaultPasswordWarning:E,loginErrorMessage:v}=this.state,{login:h,toGrafana:p,changePassword:s}=this,{loginHint:y,passwordHint:C,disableLoginForm:b,disableUserSignUp:S}=o.default;return n.createElement(n.Fragment,null,c({isOauthEnabled:i(),loginHint:y,passwordHint:C,disableLoginForm:b,disableUserSignUp:S,login:h,isLoggingIn:d,changePassword:s,skipPasswordChange:p,isChangingPassword:f,showDefaultPasswordWarning:E,loginErrorMessage:v}))}}const u=g;function l(m){switch(m.data?.messageId){case"password-auth.empty":case"password-auth.failed":case"password-auth.invalid":return(0,r.t)("login.error.invalid-user-or-password","Invalid username or password");case"login-attempt.blocked":return(0,r.t)("login.error.blocked","You have exceeded the number of login attempts for this user. Please try again later.");default:return m.data?.message}}},12043:(G,A,e)=>{"use strict";e.d(A,{U:()=>c,W:()=>d});var n=e(66681),a=e(85960),o=e(92369),r=e(47257),i=e(66596),g=e(20519),u=e(24956),l=e(29165),m=e(81795);const c=({children:f,onSubmit:E,isLoggingIn:v,passwordHint:h,loginHint:p})=>{const s=(0,r.wW)(d),y=(0,a.useId)(),C=(0,a.useId)();return a.createElement("div",{className:s.wrapper},a.createElement(i.l,{onSubmit:E,validateOn:"onChange"},({register:b,errors:S})=>a.createElement(a.Fragment,null,a.createElement(g.g,{label:"Email or username",invalid:!!S.user,error:S.user?.message},a.createElement(u.I,{...b("user",{required:"Email or username is required"}),id:y,autoFocus:!0,autoCapitalize:"none",placeholder:p,"data-testid":o.wl.pages.Login.username})),a.createElement(g.g,{label:"Password",invalid:!!S.password,error:S.password?.message},a.createElement(m.Z,{...b("password",{required:"Password is required"}),id:C,autoComplete:"current-password",placeholder:h})),a.createElement(l.zx,{type:"submit","data-testid":o.wl.pages.Login.submit,className:s.submitButton,disabled:v},v?"Logging in...":"Log in"),f)))},d=f=>({wrapper:(0,n.css)({width:"100%",paddingBottom:f.spacing(2)}),submitButton:(0,n.css)({justifyContent:"center",width:"100%"})})},60049:(G,A,e)=>{"use strict";e.d(A,{$s:()=>g,dd:()=>u,pJ:()=>m});var n=e(66681),a=e(85960),o=e(47257),r=e(95454),i=e(53479);const g=({children:c,enterAnimation:d=!0})=>{const f=(0,o.wW)(m);return a.createElement("div",{className:(0,n.cx)(f.loginInnerBox,d&&f.enterAnimation)},c)},u=({children:c,branding:d,isChangingPassword:f})=>{const E=(0,o.wW)(m),[v,h]=(0,a.useState)(!1),p=d?.loginSubtitle??r.c.GetLoginSubTitle(),s=d?.loginTitle??r.c.LoginTitle,y=d?.loginBoxBackground||r.c.LoginBoxBackground(),C=d?.loginLogo,b=d?.hideEdition??r.c.HideEdition;return(0,a.useEffect)(()=>h(!0),[]),a.createElement(r.c.LoginBackground,{className:(0,n.cx)(E.container,v&&E.loginAnim,d?.loginBackground)},a.createElement("div",{className:E.loginMain},a.createElement("div",{className:(0,n.cx)(E.loginContent,y,"login-content-box")},a.createElement("div",{className:E.loginLogoWrapper},a.createElement(r.c.LoginLogo,{className:E.loginLogo,logo:C}),a.createElement("div",{className:E.titleWrapper},f?a.createElement("h1",{className:E.mainTitle},"Update your password"):a.createElement(a.Fragment,null,a.createElement("h1",{className:E.mainTitle},s),p&&a.createElement("h3",{className:E.subTitle},p)))),a.createElement("div",{className:E.loginOuterBox},c))),d?.hideFooter?a.createElement(a.Fragment,null):a.createElement(i.$_,{hideEdition:b,customLinks:d?.footerLinks}))},l=(0,n.keyframes)`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,m=c=>({loginMain:(0,n.css)({flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:"100%"}),container:(0,n.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:(0,n.css)({["&:before"]:{opacity:1},[".login-content-box"]:{opacity:1}}),submitButton:(0,n.css)({justifyContent:"center",width:"100%"}),loginLogo:(0,n.css)({width:"100%",maxWidth:60,marginBottom:c.spacing(2),[c.breakpoints.up("sm")]:{maxWidth:100}}),loginLogoWrapper:(0,n.css)({display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:c.spacing(3)}),titleWrapper:(0,n.css)({textAlign:"center"}),mainTitle:(0,n.css)({fontSize:22,[c.breakpoints.up("sm")]:{fontSize:32}}),subTitle:(0,n.css)({fontSize:c.typography.size.md,color:c.colors.text.secondary}),loginContent:(0,n.css)({maxWidth:478,width:"calc(100% - 2rem)",display:"flex",alignItems:"stretch",flexDirection:"column",position:"relative",justifyContent:"flex-start",zIndex:1,minHeight:320,borderRadius:c.shape.radius.default,padding:c.spacing(2,0),opacity:0,transition:"opacity 0.5s ease-in-out",[c.breakpoints.up("sm")]:{minHeight:c.spacing(40),justifyContent:"center"}}),loginOuterBox:(0,n.css)({display:"flex",overflowY:"hidden",alignItems:"center",justifyContent:"center"}),loginInnerBox:(0,n.css)({padding:c.spacing(0,2,2,2),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,maxWidth:415,width:"100%",transform:"translate(0px, 0px)",transition:"0.25s ease"}),enterAnimation:(0,n.css)({animation:`${l} ease-out 0.2s`})})},98050:(G,A,e)=>{"use strict";e.d(A,{Y:()=>g});var n=e(56375),a=e.n(n),o=e(85960),r=e(24956),i=e(20519);class g extends o.PureComponent{constructor(){super(...arguments),this.state={text:"",inputCorrected:!1},this.inputRef=o.createRef(),this.updateValue=()=>{const l=this.inputRef.current?.value;let m=!1,c="";const d=this.props.min,f=this.props.max;let E=l!==""?Number(l):void 0;E&&!Number.isNaN(E)&&(d!=null&&E<d?(c=d.toString(),m=!0):f!=null&&E>f?(c=f.toString(),m=!0):c=l??"",this.setState({text:c,inputCorrected:m})),m&&this.updateValueDebounced(),!Number.isNaN(E)&&E!==this.props.value&&this.props.onChange(E)},this.updateValueDebounced=(0,n.debounce)(this.updateValue,500),this.onChange=l=>{this.setState({text:l.currentTarget.value}),this.updateValueDebounced()},this.onKeyPress=l=>{l.key==="Enter"&&this.updateValue()}}componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(l){if(this.props.value!==l.value){const m=isNaN(this.props.value)?"":`${this.props.value}`;m!==this.state.text&&this.setState({text:m})}}renderInput(){return o.createElement(r.I,{type:"number",ref:this.inputRef,min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:this.state.text,onChange:this.onChange,onBlur:this.updateValue,onKeyPress:this.onKeyPress,placeholder:this.props.placeholder,disabled:this.props.fieldDisabled,width:this.props.width,suffix:this.props.suffix})}render(){const{inputCorrected:l}=this.state;if(l){let m="",{min:c,max:d}=this.props;return d==null?c!=null&&(m=`< ${c}`):c!=null?m=`${c} < > ${d}`:m=`> ${d}`,o.createElement(i.g,{invalid:l,error:`Out of range ${m}`,validationMessageHorizontalOverflow:!0,style:{direction:"rtl"}},this.renderInput())}return this.renderInput()}}},82724:(G,A,e)=>{"use strict";e.d(A,{B:()=>u});var n=e(66681),a=e(85960),o=e(47257),r=e(38276),i=e(75064),g=e(51333);const u=({value:m,settings:c,onChange:d,details:f})=>{const E=(0,o.l4)(),v=(0,o.wW)(l);return a.createElement(r.zH,{color:m??"",onChange:d,enableNamedColors:c?.enableNamedColors!==!1},({ref:h,showColorPicker:p,hideColorPicker:s})=>a.createElement("div",{className:v.spot},a.createElement("div",{className:v.colorPicker},a.createElement(g.b,{ref:h,onClick:p,onMouseLeave:s,color:m?E.visualization.getColorByName(m):E.components.input.borderColor})),f&&a.createElement(a.Fragment,null,m?a.createElement("span",{className:v.colorText,onClick:p},m):a.createElement("span",{className:v.placeholderText,onClick:p},c?.placeholder??"Select color"),c?.isClearable&&m&&a.createElement(i.h,{name:"times",onClick:()=>d(void 0),tooltip:"Clear settings"}))))},l=m=>({spot:(0,n.css)({cursor:"pointer",color:m.colors.text.primary,background:m.components.input.background,padding:"3px",height:m.v1.spacing.formInputHeight,border:`1px solid ${m.components.input.borderColor}`,display:"flex",flexDirection:"row",alignItems:"center",alignContent:"flex-end","&:hover":{border:`1px solid ${m.components.input.borderHover}`}}),colorPicker:(0,n.css)({padding:`0 ${m.spacing(1)}`}),colorText:(0,n.css)({flexGrow:2}),placeholderText:(0,n.css)({flexGrow:2,color:m.colors.text.secondary})})},13508:(G,A,e)=>{"use strict";e.d(A,{w:()=>o});var n=e(85960),a=e(98050);const o=({value:r,onChange:i,item:g})=>{const{settings:u}=g,l=(0,n.useCallback)(m=>{i(u?.integer&&m!==void 0?Math.floor(m):m)},[i,u?.integer]);return n.createElement(a.Y,{value:r,min:u?.min,max:u?.max,step:u?.step,placeholder:u?.placeholder,onChange:l})}},72933:(G,A,e)=>{"use strict";e.d(A,{u:()=>Ke,l:()=>Xe});var n=e(85960),a=e(88008),o=e(17945),r=e(58309),i=e(37634),g=e(5999),u=e(5106),l=e(76310),m=e(53231),c=e(66681),d=e(56375),f=e(76784),E=e(76176),v=e(42309),h=e(24956),p=e(38276),s=e(75064),y=e(29165),C=e(57445),b=e(33808);const S=[{value:i.H.Absolute,label:"Absolute",description:"Pick thresholds based on the absolute values"},{value:i.H.Percentage,label:"Percentage",description:"Pick threshold based on the percent between min/max"}];class D extends n.PureComponent{constructor(Z){super(Z),this.onAddThreshold=()=>{const{steps:ce}=this.state;let be=0;ce.length>1&&(be=ce[ce.length-1].value+10);let Ee=v.O9.filter(ze=>!ce.some(Fe=>Fe.color===ze))[1];Ee||(Ee="#CCCCCC");const Be={value:be,color:Ee,key:M++},Le=[...ce,Be];(0,f.bP)(Le),this.setState({steps:Le},()=>{this.latestThresholdInputRef.current&&this.latestThresholdInputRef.current.focus(),this.onChange()})},this.onRemoveThreshold=ce=>{const{steps:be}=this.state;be.length&&ce.key!==be[0].key&&this.setState({steps:be.filter(Ee=>Ee.key!==ce.key)},this.onChange)},this.onChangeThresholdValue=(ce,be)=>{const Ee=ce.target.value.replace(/,/g,"."),Be=parseFloat(Ee),Le=isNaN(Be)?"":Be,ze=this.state.steps.map(Fe=>(Fe.key===be.key&&(Fe={...Fe,value:Le}),Fe));ze.length&&(ze[0].value=-1/0),(0,f.bP)(ze),this.setState({steps:ze})},this.onChangeThresholdColor=(ce,be)=>{const{steps:Ee}=this.state,Be=Ee.map(Le=>(Le.key===ce.key&&(Le={...Le,color:be}),Le));this.setState({steps:Be},this.onChange)},this.onBlur=()=>{const ce=[...this.state.steps];(0,f.bP)(ce),this.setState({steps:ce},this.onChange)},this.onChange=()=>{this.props.onChange(R(this.props.thresholds,this.state.steps))},this.onModeChanged=ce=>{this.props.onChange({...this.props.thresholds,mode:ce})};const ee=T(Z.thresholds.steps);ee[0].value=-1/0,this.state={steps:ee},this.latestThresholdInputRef=n.createRef()}renderInput(Z,ee,ce){const be=this.props.thresholds.mode===i.H.Percentage,Ee=`Threshold ${ce+1}`;return isFinite(Z.value)?n.createElement(h.I,{type:"number",step:"0.0001",key:be.toString(),onChange:Be=>this.onChangeThresholdValue(Be,Z),value:Z.value,"aria-label":Ee,ref:ce===0?this.latestThresholdInputRef:null,onBlur:this.onBlur,prefix:n.createElement("div",{className:ee.inputPrefix},n.createElement("div",{className:ee.colorPicker},n.createElement(p.zH,{color:Z.color,onChange:Be=>this.onChangeThresholdColor(Z,Be),enableNamedColors:!0})),be&&n.createElement("div",{className:ee.percentIcon},"%")),suffix:n.createElement(s.h,{className:ee.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveThreshold(Z),tooltip:`Remove ${Ee}`})}):n.createElement(h.I,{type:"text",value:"Base","aria-label":Ee,disabled:!0,prefix:n.createElement("div",{className:ee.colorPicker},n.createElement(p.zH,{color:Z.color,onChange:Be=>this.onChangeThresholdColor(Z,Be),enableNamedColors:!0}))})}render(){const{thresholds:Z}=this.props,{steps:ee}=this.state;return n.createElement(E.N.Consumer,null,ce=>{const be=O(ce);return n.createElement("div",{className:be.wrapper},n.createElement(y.zx,{size:"sm",icon:"plus",onClick:()=>this.onAddThreshold(),variant:"secondary",className:be.addButton,fullWidth:!0},"Add threshold"),n.createElement("div",{className:be.thresholds},ee.slice(0).reverse().map((Ee,Be)=>n.createElement("div",{className:be.item,key:`${Ee.key}`},this.renderInput(Ee,be,Be)))),n.createElement("div",null,n.createElement(C._,{description:"Percentage means thresholds relative to min & max"},"Thresholds mode"),n.createElement(u.S,{options:S,onChange:this.onModeChanged,value:Z.mode})))})}}let M=100;function T(ne){return(!ne||ne.length===0)&&(ne=[{value:-1/0,color:"green"}]),ne.filter((Z,ee)=>(0,d.isNumber)(Z.value)||ee===0).map(Z=>({color:Z.color,value:Z.value===null?-1/0:Z.value,key:M++}))}function R(ne,Z){return{mode:ne.mode??i.H.Absolute,steps:Z.map(ce=>{const{key:be,...Ee}=ce;return Ee})}}const O=(0,b.B)(ne=>({wrapper:(0,c.css)`
      display: flex;
      flex-direction: column;
    `,thresholds:(0,c.css)`
      display: flex;
      flex-direction: column;
      margin-bottom: ${ne.spacing(2)};
    `,item:(0,c.css)`
      margin-bottom: ${ne.spacing(1)};

      &:last-child {
        margin-bottom: 0;
      }
    `,colorPicker:(0,c.css)`
      padding: 0 ${ne.spacing(1)};
    `,addButton:(0,c.css)`
      margin-bottom: ${ne.spacing(1)};
    `,percentIcon:(0,c.css)`
      font-size: ${ne.typography.bodySmall.fontSize};
      color: ${ne.colors.text.secondary};
    `,inputPrefix:(0,c.css)`
      display: flex;
      align-items: center;
    `,trashIcon:(0,c.css)`
      color: ${ne.colors.text.secondary};
      cursor: pointer;
      margin-right: 0;

      &:hover {
        color: ${ne.colors.text};
      }
    `}));class x extends n.PureComponent{constructor(Z){super(Z)}render(){const{onChange:Z}=this.props;let ee=this.props.value;return ee||(ee={mode:i.H.Percentage,steps:[]}),n.createElement(D,{thresholds:ee,onChange:Z})}}var I=e(43626),L=e(47257),P=e(74042),N=e(97666),F=e(7288),U=e(55351),j=e(36647),V=e(31173),_=e(66008),H=e(27436);function z({mapping:ne,index:Z,onChange:ee,onRemove:ce,onDuplicate:be,showIconPicker:Ee}){const{key:Be,result:Le,id:ze}=ne,Fe=(0,L.wW)(K),$e=(0,n.useRef)(null),et=(0,n.useCallback)(It=>{const Zt={...ne,result:{...ne.result}};It(Zt),ee(Z,Zt)},[ne,Z,ee]);(0,n.useEffect)(()=>{$e.current&&ne.isNew&&($e.current.focus(),et(It=>{It.isNew=!1}))},[ne,$e,et]);const tt=It=>{et(Zt=>{Zt.result.color=It})},it=()=>{et(It=>{It.result.color=void 0})},vt=It=>{et(Zt=>{Zt.result.icon=It})},yt=()=>{et(It=>{It.result.icon=void 0})},Wt=It=>{et(Zt=>{Zt.key=It.currentTarget.value})},ut=It=>{et(Zt=>{Zt.result.text=It.currentTarget.value})},pt=It=>{et(Zt=>{Zt.from=parseFloat(It.currentTarget.value)})},we=It=>{et(Zt=>{Zt.to=parseFloat(It.currentTarget.value)})},lt=It=>{et(Zt=>{Zt.pattern=It.currentTarget.value})},Bt=It=>{et(Zt=>{Zt.specialMatch=It.value})},Kt=[{label:"Null",value:I.e.Null,description:"Matches null and undefined values"},{label:"NaN",value:I.e.NaN,description:"Matches against Number.NaN (not a number)"},{label:"Null + NaN",value:I.e.NullAndNaN,description:"Matches null, undefined and NaN"},{label:"True",value:I.e.True,description:"Boolean true values"},{label:"False",value:I.e.False,description:"Boolean false values"},{label:"Empty",value:I.e.Empty,description:"Empty string"}];return n.createElement(V._l,{key:ze,draggableId:ze,index:Z},It=>n.createElement("tr",{className:Fe.dragRow,ref:It.innerRef,...It.draggableProps},n.createElement("td",null,n.createElement("div",{className:Fe.dragHandle,...It.dragHandleProps},n.createElement(N.J,{name:"draggabledots",size:"lg"}))),n.createElement("td",{className:Fe.typeColumn},ne.type),n.createElement("td",null,ne.type===I.H.ValueToText&&n.createElement(h.I,{ref:$e,type:"text",value:Be??"",onChange:Wt,placeholder:"Exact value to match"}),ne.type===I.H.RangeToText&&n.createElement("div",{className:Fe.rangeInputWrapper},n.createElement(h.I,{type:"number",value:ne.from??"",placeholder:"Range start",onChange:pt,prefix:"From"}),n.createElement(h.I,{type:"number",value:ne.to??"",placeholder:"Range end",onChange:we,prefix:"To"})),ne.type===I.H.RegexToText&&n.createElement(h.I,{type:"text",value:ne.pattern??"",placeholder:"Regular expression",onChange:lt}),ne.type===I.H.SpecialValue&&n.createElement(H.Ph,{value:Kt.find(Zt=>Zt.value===ne.specialMatch),options:Kt,onChange:Bt})),n.createElement("td",null,n.createElement(h.I,{type:"text",value:Le.text??"",onChange:ut,placeholder:"Optional display text"})),n.createElement("td",{className:Fe.textAlignCenter},Le.color&&n.createElement(P.Lh,{spacing:"sm",justify:"center"},n.createElement(p.zH,{color:Le.color,onChange:tt,enableNamedColors:!0}),n.createElement(s.h,{name:"times",onClick:it,tooltip:"Remove color",tooltipPlacement:"top"})),!Le.color&&n.createElement(p.zH,{color:"gray",onChange:tt,enableNamedColors:!0},Zt=>n.createElement(y.zx,{variant:"primary",fill:"text",onClick:Zt.showColorPicker,ref:Zt.ref,size:"sm"},"Set color"))),Ee&&n.createElement("td",{className:Fe.textAlignCenter},n.createElement(P.Lh,{spacing:"sm",justify:"center"},n.createElement(j.E,{onChange:vt,onClear:yt,value:Le.icon,size:U.zc.SMALL,folderName:U.QS.Icon,mediaType:U.DD.Icon,color:Le.color}),Le.icon&&n.createElement(s.h,{name:"times",onClick:yt,tooltip:"Remove icon",tooltipPlacement:"top"}))),n.createElement("td",{className:Fe.textAlignCenter},n.createElement(P.Lh,{spacing:"sm"},n.createElement(s.h,{name:"copy",onClick:()=>be(Z),"data-testid":"duplicate-value-mapping","aria-label":"Duplicate value mapping",tooltip:"Duplicate"}),n.createElement(s.h,{name:"trash-alt",onClick:()=>ce(Z),"data-testid":"remove-value-mapping","aria-label":"Delete value mapping",tooltip:"Delete"})))))}const K=ne=>({dragRow:(0,c.css)({position:"relative"}),dragHandle:(0,c.css)({cursor:"grab","&:focus-visible&:after":{bottom:0,content:'""',left:0,position:"absolute",right:0,top:0,outline:`2px solid ${ne.colors.primary.main}`,outlineOffset:"-2px"}}),rangeInputWrapper:(0,c.css)({display:"flex","> div:first-child":{marginRight:ne.spacing(2)}}),regexInputWrapper:(0,c.css)({display:"flex","> div:first-child":{marginRight:ne.spacing(2)}}),typeColumn:(0,c.css)({textTransform:"capitalize",textAlign:"center",width:"1%"}),textAlignCenter:(0,c.css)({textAlign:"center"})});function Y({value:ne,onChange:Z,onClose:ee,showIconPicker:ce}){const be=(0,L.wW)(k),[Ee,Be]=(0,n.useState)([]);(0,n.useEffect)(()=>{Be(de(ne))},[ne]);const Le=vt=>{if(!ne||!vt.destination)return;const yt=[...Ee],Wt=yt[vt.source.index];yt.splice(vt.source.index,1),yt.splice(vt.destination.index,0,Wt),Be(yt)},ze=(vt,yt)=>{const Wt=[...Ee];Wt.splice(vt,1,yt),Be(Wt)},Fe=vt=>{const yt=[...Ee];yt.splice(vt,1),Be(yt)},$e=[{label:"Value",value:I.H.ValueToText,description:"Match a specific text value"},{label:"Range",value:I.H.RangeToText,description:"Match a numerical range of values"},{label:"Regex",value:I.H.RegexToText,description:"Match a regular expression with replacement"},{label:"Special",value:I.H.SpecialValue,description:"Match on null, NaN, boolean and empty values"}],et=vt=>{Be([...Ee,X({type:vt.value,result:{},isNew:!0})])},tt=vt=>{const yt=te(Ee[vt]),Wt=[...Ee];Wt.splice(vt,0,{...yt});for(let ut=vt;ut<Ee.length;ut++)Wt[ut].result.index=ut;Be(Wt)},it=()=>{Z(se(Ee)),ee()};return(0,n.useEffect)(()=>{ne?.length||et({value:I.H.ValueToText})},[]),n.createElement(n.Fragment,null,n.createElement("div",{className:be.tableWrap},n.createElement("table",{className:be.editTable},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{style:{width:"1%"}}),n.createElement("th",{style:{width:"40%",textAlign:"left"},colSpan:2},"Condition"),n.createElement("th",{style:{textAlign:"left"}},"Display text"),n.createElement("th",{style:{width:"10%"}},"Color"),ce&&n.createElement("th",{style:{width:"10%"}},"Icon"),n.createElement("th",{style:{width:"1%"}}))),n.createElement(V.Z5,{onDragEnd:Le},n.createElement(V.bK,{droppableId:"sortable-field-mappings",direction:"vertical"},vt=>n.createElement("tbody",{ref:vt.innerRef,...vt.droppableProps},Ee.map((yt,Wt)=>n.createElement(z,{key:yt.id,mapping:yt,index:Wt,onChange:ze,onRemove:Fe,onDuplicate:tt,showIconPicker:ce})),vt.placeholder))))),n.createElement(F.u.ButtonRow,{leftItems:n.createElement(_.b,{label:"Add a new mapping",variant:"secondary",size:"md",icon:"plus",menuPlacement:"auto",minWidth:40,options:$e,onChange:et})},n.createElement(y.zx,{variant:"secondary",fill:"outline",onClick:ee},"Cancel"),n.createElement(y.zx,{variant:"primary",onClick:it},"Update")))}const k=ne=>({tableWrap:(0,c.css)`
    max-height: calc(80vh - 170px);
    min-height: 40px;
    overflow: auto;
  `,editTable:(0,c.css)({width:"100%",marginBottom:ne.spacing(2),"thead th":{textAlign:"center"},"tbody tr:hover":{background:ne.colors.action.hover}," th, td":{padding:ne.spacing(1)}})});function q(){return(0,d.uniqueId)("mapping-")}function X(ne){return{type:I.H.ValueToText,result:{},id:q(),...ne}}function te(ne){return{...X(ne),id:q()}}function se(ne){const Z=[],ee={type:I.H.ValueToText,options:{}};return ne.forEach((ce,be)=>{const Ee={...ce.result,index:be};switch((!Ee.text||Ee.text.trim().length===0)&&(Ee.text=void 0),ce.type){case I.H.ValueToText:ce.key!=null&&(ee.options[ce.key]=Ee);break;case I.H.RangeToText:ce.from!=null&&ce.to!=null&&Z.push({type:ce.type,options:{from:ce.from,to:ce.to,result:Ee}});break;case I.H.RegexToText:ce.pattern!=null&&Z.push({type:ce.type,options:{pattern:ce.pattern,result:Ee}});break;case I.H.SpecialValue:Z.push({type:ce.type,options:{match:ce.specialMatch,result:Ee}})}}),Object.keys(ee.options).length>0&&Z.unshift(ee),Z}function de(ne){const Z=[];if(ne)for(const ee of ne)switch(ee.type){case I.H.ValueToText:for(const ce of Object.keys(ee.options))Z.push(X({type:ee.type,result:ee.options[ce],key:ce}));break;case I.H.RangeToText:Z.push(X({type:ee.type,result:ee.options.result,from:ee.options.from??0,to:ee.options.to??0}));break;case I.H.RegexToText:Z.push(X({type:ee.type,result:ee.options.result,pattern:ee.options.pattern}));break;case I.H.SpecialValue:Z.push(X({type:ee.type,result:ee.options.result,specialMatch:ee.options.match??I.e.Null}))}return Z.sort((ee,ce)=>(ee.result.index??0)>(ce.result.index??0)?1:-1),Z}const re=n.memo(ne=>{const{value:Z,onChange:ee,item:ce}=ne,be=(0,L.wW)(fe),Ee=ce.settings?.icon,[Be,Le]=(0,n.useState)(!1),ze=(0,n.useCallback)(()=>{Le(!1)},[Le]),Fe=(0,n.useMemo)(()=>de(Z),[Z]),$e=(0,n.useCallback)((tt,it)=>{Fe[it].result.color=tt,ee(se(Fe))},[Fe,ee]),et=(0,n.useCallback)((tt,it)=>{Fe[it].result.icon=tt,ee(se(Fe))},[Fe,ee]);return n.createElement(P.wc,null,n.createElement("table",{className:be.compactTable},n.createElement("tbody",null,Fe.map((tt,it)=>n.createElement("tr",{key:it.toString()},n.createElement("td",null,tt.type===I.H.ValueToText&&tt.key,tt.type===I.H.RangeToText&&n.createElement("span",null,"[",tt.from," - ",tt.to,"]"),tt.type===I.H.RegexToText&&tt.pattern,tt.type===I.H.SpecialValue&&tt.specialMatch),n.createElement("td",null,n.createElement(N.J,{name:"arrow-right"})),n.createElement("td",null,tt.result.text),tt.result.color&&n.createElement("td",null,n.createElement(p.zH,{color:tt.result.color,onChange:vt=>$e(vt,it),enableNamedColors:!0})),Ee&&tt.result.icon&&n.createElement("td",{"data-testid":"iconPicker"},n.createElement(j.E,{onChange:vt=>et(vt,it),value:tt.result.icon,size:U.zc.SMALL,folderName:U.QS.Icon,mediaType:U.DD.Icon,color:tt.result.color})))))),n.createElement(y.zx,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>Le(!0)},Fe.length>0&&n.createElement("span",null,"Edit value mappings"),Fe.length===0&&n.createElement("span",null,"Add value mappings")),n.createElement(F.u,{isOpen:Be,title:"Value mappings",onDismiss:ze,className:be.modal,closeOnBackdropClick:!1},n.createElement(Y,{value:Z,onChange:ee,onClose:ze,showIconPicker:Ee})))});re.displayName="ValueMappingsEditor";const fe=ne=>({modal:(0,c.css)({width:"980px"}),compactTable:(0,c.css)({width:"100%","tbody td":{padding:ne.spacing(.5)}})});var ie=e(66399);const oe=({value:ne,onChange:Z,item:ee})=>{const{placeholder:ce,isClearable:be}=ee?.settings??{},Ee=(0,n.useCallback)(Be=>{Z(Be?.value?.uid)},[Z]);return n.createElement(ie.o,{isClearable:be,defaultOptions:!0,onChange:Ee,placeholder:ce,value:ne})};var ue=e(82724),me=e(73859),ge=e(14345),Ue=e(20519);const De=({value:ne,onChange:Z,item:ee,id:ce})=>{const be=(0,L.l4)(),Ee=(0,L.wW)(ye),Be=(0,me.QY)(ne?.mode),ze=(ee.settings?.byValueSupport?me.WO.list():me.WO.list().filter(it=>!it.isByValue)).map(it=>{let vt=it.isByValue?" (by value)":"";return{value:it.id,label:`${it.name}${vt}`,description:it.description,isContinuous:it.isContinuous,isByValue:it.isByValue,component(){return n.createElement(Pe,{mode:it,theme:be})}}}),Fe=it=>{Z({...ne,mode:it.value})},$e=it=>{Z({...ne,mode:tt,fixedColor:it})},et=it=>{Z({...ne,mode:tt,seriesBy:it})},tt=ne?.mode??ge.S.Thresholds;if(tt===ge.S.Fixed||tt===ge.S.Shades)return n.createElement("div",{className:Ee.group},n.createElement(H.Ph,{minMenuHeight:200,options:ze,value:tt,onChange:Fe,className:Ee.select,inputId:ce}),n.createElement(ue.B,{value:ne?.fixedColor,onChange:$e}));if(ee.settings?.bySeriesSupport&&Be.isByValue){const it=[{label:"Last",value:"last"},{label:"Min",value:"min"},{label:"Max",value:"max"}];return n.createElement(n.Fragment,null,n.createElement("div",{style:{marginBottom:be.spacing(2)}},n.createElement(H.Ph,{minMenuHeight:200,options:ze,value:tt,onChange:Fe,inputId:ce})),n.createElement(Ue.g,{label:"Color series by"},n.createElement(u.S,{value:ne?.seriesBy??"last",options:it,onChange:et})))}return n.createElement(H.Ph,{minMenuHeight:200,options:ze,value:tt,onChange:Fe,inputId:ce})},Pe=({mode:ne,theme:Z})=>{if(!ne.getColors)return null;const ee=ne.getColors(Z).map(Z.visualization.getColorByName),ce={height:"8px",width:"100%",margin:"2px 0",borderRadius:"3px",opacity:1};if(ne.isContinuous)ce.background=`linear-gradient(90deg, ${ee.join(",")})`;else{let be="",Ee="";for(let Be=0;Be<ee.length;Be++){const Le=ee[Be];if(be==="")be=`linear-gradient(90deg, ${Le} 0%`;else{const Fe=Be/(ee.length-1)*100;be+=`, ${Ee} ${Fe}%, ${Le} ${Fe}%`}Ee=Le}ce.background=be}return n.createElement("div",{style:ce})},ye=ne=>({group:(0,c.css)({display:"flex"}),select:(0,c.css)({marginRight:ne.spacing(1),flexGrow:1})});var Te=e(89306),nt=e(96394);const ct=({value:ne,onChange:Z,context:ee})=>n.createElement(nt.d,{links:ne,onChange:Z,data:ee.data,getSuggestions:()=>ee.getSuggestions?ee.getSuggestions(Te.o3.Values):[]});class he extends n.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:Z}=this.props,{settings:ee}=Z;let ce=Z.settings?.options||[];ee?.getOptions&&(ce=await ee.getOptions(this.props.context)),this.state.options!==ce&&this.setState({isLoading:!1,options:ce})}}componentDidMount(){this.updateOptions()}componentDidUpdate(Z){const ee=Z.item?.settings,ce=this.props.item?.settings;if(ee!==ce)this.updateOptions();else if(ce?.getOptions){const be=Z.context?.data,Ee=this.props.context?.data;be!==Ee&&this.updateOptions()}}render(){const{options:Z,isLoading:ee}=this.state,{value:ce,onChange:be,item:Ee}=this.props,{settings:Be}=Ee;return n.createElement(H.NU,{isLoading:ee,value:ce,defaultValue:ce,allowCustomValue:Be?.allowCustomValue,onChange:Le=>{be(Le.map(ze=>ze.value).flatMap(ze=>ze!==void 0?[ze]:[]))},options:Z})}}var xe=e(13508);class Me extends n.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:Z}=this.props,{settings:ee}=Z;let ce=Z.settings?.options||[];ee?.getOptions&&(ce=await ee.getOptions(this.props.context)),this.state.options!==ce&&this.setState({isLoading:!1,options:ce})}}componentDidMount(){this.updateOptions()}componentDidUpdate(Z){const ee=Z.item?.settings,ce=this.props.item?.settings;if(ee!==ce)this.updateOptions();else if(ce?.getOptions){const be=Z.context?.data,Ee=this.props.context?.data;be!==Ee&&this.updateOptions()}}render(){const{options:Z,isLoading:ee}=this.state,{value:ce,onChange:be,item:Ee}=this.props,{settings:Be}=Ee;let Le=Z.find(ze=>ze.value===ce);return!Le&&ce&&(Le={label:`${ce}`,value:ce}),n.createElement(H.Ph,{isLoading:ee,value:Le,defaultValue:ce,allowCustomValue:Be?.allowCustomValue,isClearable:Be?.isClearable,onChange:ze=>be(ze?.value),options:Z})}}var He=e(14438),Ve=e(63326);const Oe=({value:ne,onChange:Z,item:ee,id:ce})=>n.createElement(Ve.m,{stats:ne,onChange:Z,allowMultiple:!!ee.settings?.allowMultiple,defaultStat:ee.settings?.defaultStat,inputId:ce});var Ne=e(13094),_e=e(90857);class qe extends n.PureComponent{constructor(){super(...arguments),this.state={showAdd:!1},this.onRemoveString=Z=>{const{value:ee,onChange:ce}=this.props,be=[...ee];be.splice(Z,1),ce(be)},this.onValueChange=(Z,ee)=>{if("key"in Z&&Z.key!=="Enter")return;const{value:ce,onChange:be}=this.props,Ee=Z.currentTarget.value.trim();if(ee<0){Ee&&(Z.currentTarget.value="",be([...ce,Ee])),this.setState({showAdd:!1});return}if(!Ee)return this.onRemoveString(ee);const Be=[...ce];Be[ee]=Ee,be(Be)}}render(){const{value:Z,item:ee}=this.props,{showAdd:ce}=this.state,be=rt(_e.config.theme2),Ee=ee.settings?.placeholder||"Add text";return n.createElement("div",null,Z.map((Be,Le)=>n.createElement(h.I,{className:be.textInput,key:`${Le}/${Be}`,defaultValue:Be||"",onBlur:ze=>this.onValueChange(ze,Le),onKeyDown:ze=>this.onValueChange(ze,Le),suffix:n.createElement(N.J,{className:be.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveString(Le)})})),ce?n.createElement(h.I,{autoFocus:!0,className:be.textInput,placeholder:Ee,defaultValue:"",onBlur:Be=>this.onValueChange(Be,-1),onKeyDown:Be=>this.onValueChange(Be,-1),suffix:n.createElement(N.J,{name:"plus-circle"})}):n.createElement(y.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:()=>this.setState({showAdd:!0})},Ee))}}const rt=(0,b.B)(ne=>({textInput:(0,c.css)({marginBottom:"5px","&:hover":{border:`1px solid ${ne.components.input.borderHover}`}}),trashIcon:(0,c.css)({color:ne.colors.text.secondary,cursor:"pointer","&:hover":{color:ne.colors.text.primary}})}));var mt=e(29500);function Je({value:ne,onChange:Z,item:ee}){const ce=(0,L.wW)(Ae);return ee?.settings?.isClearable&&ne!=null?n.createElement("div",{className:ce.wrapper},n.createElement("span",{className:ce.first},n.createElement(mt.n,{value:ne,onChange:Z})),n.createElement(s.h,{name:"times",onClick:()=>Z(void 0),tooltip:"Clear unit selection"})):n.createElement(mt.n,{value:ne,onChange:Z})}const Ae=ne=>({wrapper:(0,c.css)({width:"100%",display:"flex",flexDirection:"row",alignItems:"center"}),first:(0,c.css)({marginRight:ne.spacing(1),flexGrow:2})}),Ke=()=>{const ne={id:"number",name:"Number",description:"Allows numeric values input",editor:xe.w},Z={id:"slider",name:"Slider",description:"Allows numeric values input",editor:He.p},ee={id:"text",name:"Text",description:"Allows string values input",editor:Ne.A},ce={id:"strings",name:"String array",description:"An array of strings",editor:qe},be={id:"boolean",name:"Boolean",description:"Allows boolean values input",editor(pt){const{id:we,...lt}=pt;return n.createElement(g.r,{...lt,onChange:Bt=>pt.onChange(Bt.currentTarget.checked)})}},Ee={id:"select",name:"Select",description:"Allows option selection",editor:Me},Be={id:"multi-select",name:"Multi select",description:"Allows for multiple option selection",editor:he},Le={id:"radio",name:"Radio",description:"Allows option selection",editor(pt){return n.createElement(u.S,{...pt,options:pt.item.settings?.options})}},ze={id:"unit",name:"Unit",description:"Allows unit input",editor:Je},Fe={id:"color",name:"Color",description:"Allows color selection",editor(pt){return n.createElement(ue.B,{value:pt.value,onChange:pt.onChange,settings:pt.item.settings,details:!0})}},$e={id:"fieldColor",name:"Field Color",description:"Field color selection",editor:De},et={id:"links",name:"Links",description:"Allows defining data links",editor:ct},tt={id:"stats-picker",name:"Stats Picker",editor:Oe,description:""},it={id:"timezone",name:"Time zone",description:"Time zone selection",editor:l.O},vt={id:"field-name",name:"Field name",description:"Allows selecting a field name from a data frame",editor:m.b};return[ee,ne,Z,be,Le,Ee,ze,et,tt,ce,it,$e,Fe,Be,vt,{id:"dashboard-uid",name:"Dashboard",description:"Select dashboard",editor:oe},{id:"mappings",name:"Mappings",description:"Allows defining value mappings",editor:re},{id:"thresholds",name:"Thresholds",description:"Allows defining thresholds",editor:x}]},Xe=()=>{const ne=["Standard options"],Z={id:"displayName",path:"displayName",name:"Display name",description:"Change the field or series name",editor:a.S.get("text").editor,override:a.S.get("text").editor,process:o.W0,settings:{placeholder:"none",expandTemplateVars:!0},shouldApply:()=>!0,category:ne},ee={id:"unit",path:"unit",name:"Unit",description:"",editor:a.S.get("unit").editor,override:a.S.get("unit").editor,process:o.op,settings:{placeholder:"none"},shouldApply:()=>!0,category:ne},ce={id:"fieldMinMax",path:"fieldMinMax",name:"Field min/max",description:"Calculate min max per field",editor:a.S.get("boolean").editor,override:a.S.get("boolean").editor,process:o.W4,shouldApply:it=>it.type===r.fS.number,showIf:it=>it.min===void 0||it.max===void 0,category:ne},be={id:"min",path:"min",name:"Min",description:"Leave empty to calculate based on all values",editor:a.S.get("number").editor,override:a.S.get("number").editor,process:o.Oh,settings:{placeholder:"auto"},shouldApply:it=>it.type===r.fS.number,category:ne},Ee={id:"max",path:"max",name:"Max",description:"Leave empty to calculate based on all values",editor:a.S.get("number").editor,override:a.S.get("number").editor,process:o.Oh,settings:{placeholder:"auto"},shouldApply:it=>it.type===r.fS.number,category:ne},Be={id:"decimals",path:"decimals",name:"Decimals",editor:a.S.get("number").editor,override:a.S.get("number").editor,process:o.Oh,settings:{placeholder:"auto",min:0,max:15,integer:!0},shouldApply:it=>it.type===r.fS.number,category:ne},Le={id:"noValue",path:"noValue",name:"No value",description:"What to show when there is no value",editor:a.S.get("text").editor,override:a.S.get("text").editor,process:o.op,settings:{placeholder:"-"},shouldApply:()=>!0,category:ne},ze={id:"links",path:"links",name:"Data links",editor:a.S.get("links").editor,override:a.S.get("links").editor,process:o.NN,settings:{placeholder:"-"},shouldApply:()=>!0,category:["Data links"],getItemsCount:it=>it?it.length:0},Fe={id:"color",path:"color",name:"Color scheme",editor:a.S.get("fieldColor").editor,override:a.S.get("fieldColor").editor,process:o.kG,shouldApply:()=>!0,settings:{byValueSupport:!0,preferThresholdsMode:!0},category:ne},$e={id:"mappings",path:"mappings",name:"Value mappings",description:"Modify the display text based on input value",editor:a.S.get("mappings").editor,override:a.S.get("mappings").editor,process:o.uj,settings:{},defaultValue:[],shouldApply:it=>it.type!==r.fS.time,category:["Value mappings"],getItemsCount:it=>it?it.length:0},et={id:"thresholds",path:"thresholds",name:"Thresholds",editor:a.S.get("thresholds").editor,override:a.S.get("thresholds").editor,process:o.ZN,settings:{},defaultValue:{mode:i.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]},shouldApply:()=>!0,category:["Thresholds"],getItemsCount:it=>it?it.steps.length:0},tt={id:"filterable",path:"filterable",name:"Ad-hoc filterable",hideFromDefaults:!0,editor:a.S.get("boolean").editor,override:a.S.get("boolean").editor,process:o.W4,shouldApply:()=>!0,settings:{},category:ne};return[ee,be,Ee,ce,Be,Z,Fe,Le,ze,$e,et,tt]}},14438:(G,A,e)=>{"use strict";e.d(A,{p:()=>l});var n=e(66681),a=e(85362),o=e(1425),r=e(85960),i=e(47257),g=e(20628),u=e(98050);const l=({value:d,onChange:f,item:E})=>{const v=(0,r.useRef)(null),{settings:h}=E,p=h?.min||0,s=h?.max||100,y=h?.step,C=h?.marks||{[p]:p,[s]:s},b=h?.included,S=h?.ariaLabelForHandle,D=75,M=!0,T=(0,i.l4)(),[R,O]=(0,r.useState)(d??p),[x,I]=(0,r.useState)(D);(0,r.useEffect)(()=>{d!=null&&d!==R&&O(d)},[d,R]),(0,r.useEffect)(()=>{const j=getComputedStyle(v.current),V=j.getPropertyValue("font-weight")||"normal",_=j.getPropertyValue("font-size")||"16px",H=j.getPropertyValue("font-family")||"Arial",z="0",K=4,Y=8,k=Math.max((s+(y||0)).toString().length,(s-(y||0)).toString().length)+K,q=z.repeat(k),X=m(q,`${V} ${_} ${H}`);X&&I(X+Y*2)},[s,y]);const L=(0,r.useCallback)(j=>{const V=typeof j=="number"?j:j[0];O(V),f&&f(V)},[O,f]),P=(0,r.useCallback)(j=>{let V=j;(Number.isNaN(V)||!V)&&(V=0),O(V),f&&f(V)},[f]),N=(0,g.W)(T,M,!!C),F=c(T,x),U=M?[]:[N.sliderInputVertical];return r.createElement("div",{className:(0,n.cx)(N.container,N.slider)},r.createElement(a.Global,{styles:N.slider}),r.createElement("label",{className:(0,n.cx)(N.sliderInput,...U)},r.createElement(o.Z,{min:p,max:s,step:y,defaultValue:d,value:R,onChange:L,vertical:!M,reverse:!1,ariaLabelForHandle:S,marks:C,included:b}),r.createElement("span",{className:F.numberInputWrapper,ref:v},r.createElement(u.Y,{value:R,onChange:P,max:s,min:p,step:y}))))};function m(d,f){const v=document.createElement("canvas").getContext("2d");return v?(v.font=f,v.measureText(d).width):null}const c=(d,f)=>({numberInputWrapper:(0,n.css)({marginLeft:d.spacing(3),maxHeight:"32px",maxWidth:f,minWidth:f,overflow:"visible",width:"100%"})})},13094:(G,A,e)=>{"use strict";e.d(A,{A:()=>r});var n=e(85960),a=e(7073),o=e(24956);const r=({value:i,onChange:g,item:u,suffix:l})=>{const m=u.settings?.useTextarea?a.K:o.I,c=(0,n.useCallback)(d=>{let f=i??"";"key"in d?d.key==="Enter"&&!u.settings?.useTextarea&&(f=d.currentTarget.value.trim()):f=d.currentTarget.value.trim(),f!==i&&g(f===""?void 0:f)},[i,u.settings?.useTextarea,g]);return n.createElement(m,{placeholder:u.settings?.placeholder,defaultValue:i||"",rows:u.settings?.useTextarea&&u.settings.rows||5,onBlur:c,onKeyDown:c,suffix:l})}},20989:(G,A,e)=>{"use strict";e.d(A,{T:()=>N});var n=e(66681),a=e(85960),o=e(5836),r=e(90857),i=e(47257),g=e(50263),u=e(6005),l=e(55415);const m=({isLoading:U,children:j,className:V})=>{let _=V?a.createElement("div",{className:V},j):j;return a.createElement(a.Fragment,null,U?a.createElement(l.Z,null):_)};var c=e(44143),d=e(85445),f=e(40377),E=e(75064),v=e(20519),h=e(24956);const p=({value:U,onEdit:j})=>{const V=(0,i.wW)(s),[_,H]=(0,a.useState)(U),[z,K]=(0,a.useState)(!1),[Y,k]=(0,a.useState)(!1),[q,X]=(0,a.useState)();(0,a.useEffect)(()=>{H(U)},[U]);const te=(0,a.useCallback)(async se=>{const de=se.currentTarget.value;if(!de)X("Please enter a title");else if(de===U)X(void 0),K(!1);else{k(!0);try{await j(de),X(void 0),K(!1)}catch(re){(0,d.kW)(re)?X(re.data.message):re instanceof Error&&X(re.message)}k(!1)}},[j,U]);return z?a.createElement("div",{className:V.inputContainer},a.createElement(v.g,{className:V.field,loading:Y,invalid:!!q,error:q},a.createElement(h.I,{className:V.input,defaultValue:_,onKeyDown:se=>{se.key==="Enter"&&te(se)},autoFocus:!0,onBlur:te,onChange:se=>H(se.currentTarget.value),onFocus:()=>K(!0)}))):a.createElement("div",{className:V.textContainer},a.createElement("div",{className:V.textWrapper},a.createElement(f.x,{element:"h1",truncate:!0},_),a.createElement(E.h,{name:"pen",size:"lg",tooltip:"Edit title",onClick:()=>K(!0)})))};p.displayName="EditableTitle";const s=U=>({textContainer:(0,n.css)({minWidth:0}),field:(0,n.css)({flex:1,left:`calc(-${U.spacing(1)} - 1px)`,position:"relative",marginBottom:0}),input:(0,n.css)({input:{...U.typography.h1}}),inputContainer:(0,n.css)({display:"flex",flex:1}),textWrapper:(0,n.css)({alignItems:"center",display:"flex",gap:U.spacing(1)})});function y({navItem:U,renderTitle:j,actions:V,info:_,subTitle:H,onEditTitle:z}){const K=(0,i.wW)(C),Y=H??U.subTitle,k=z?a.createElement(p,{value:U.text,onEdit:z}):a.createElement("div",{className:K.title},U.img&&a.createElement("img",{className:K.img,src:U.img,alt:`logo for ${U.text}`}),j?j(U.text):a.createElement("h1",null,U.text));return a.createElement("div",{className:K.pageHeader},a.createElement("div",{className:K.topRow},a.createElement("div",{className:K.titleInfoContainer},k,_&&a.createElement(c.S,{info:_})),a.createElement("div",{className:K.actions},V)),Y&&a.createElement("div",{className:K.subTitle},Y))}const C=U=>({topRow:(0,n.css)({alignItems:"flex-start",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:U.spacing(1,3)}),title:(0,n.css)({display:"flex",flexDirection:"row",h1:{display:"flex",marginBottom:0}}),actions:(0,n.css)({display:"flex",flexDirection:"row",gap:U.spacing(1)}),titleInfoContainer:(0,n.css)({display:"flex",label:"title-info-container",flex:1,flexWrap:"wrap",gap:U.spacing(1,4),justifyContent:"space-between",maxWidth:"100%",minWidth:"200px"}),pageHeader:(0,n.css)({label:"page-header",display:"flex",flexDirection:"column",gap:U.spacing(1),marginBottom:U.spacing(2)}),subTitle:(0,n.css)({position:"relative",color:U.colors.text.secondary}),img:(0,n.css)({width:"32px",height:"32px",marginRight:U.spacing(2)})});var b=e(70523),S=e(42202),D=e(94439);function M({navItem:U}){const j=(0,i.wW)(T);return a.createElement("div",{className:j.tabsWrapper},a.createElement(b.J,null,U.children.map((V,_)=>{const H=V.icon?(0,S.toIconName)(V.icon):void 0;return!V.hideFromTabs&&a.createElement(D.O,{label:V.text,active:V.active,key:`${V.url}-${_}`,icon:H,counter:V.tabCounter,href:V.url,suffix:V.tabSuffix})})))}const T=U=>({tabsWrapper:(0,n.css)({paddingBottom:U.spacing(3)})});var R=e(9106),O=e(24344),x=e(95162),I=e(95454),L=e(65946);function P(U,j){const V=(0,x.useSelector)(_=>_.navIndex)?.[O.Qz];(0,a.useEffect)(()=>{const _=(U?.node!==U?.main?U?.node:U?.main)??{text:"Grafana"},H=(0,L.t)(_,j,V).map(z=>z.text).reverse();H[H.length-1]=I.c.AppTitle,document.title=H.join(" - ")},[V,U,j])}const N=({navId:U,navModel:j,pageNav:V,renderTitle:_,onEditTitle:H,actions:z,subTitle:K,children:Y,className:k,info:q,layout:X=o.Q.Standard,scrollTop:te,scrollRef:se,...de})=>{const re=(0,i.wW)(F),fe=(0,R.P)(U,j),{chrome:ie}=(0,u.p)();P(fe,V);const oe=V??fe?.node;return(0,a.useLayoutEffect)(()=>{fe&&ie.update({sectionNav:fe,pageNav:V,layout:X})},[fe,V,ie,X]),a.createElement("div",{className:(0,n.cx)(re.wrapper,k),...de},X===o.Q.Standard&&a.createElement(g.$,{autoHeightMin:"100%",scrollTop:te,scrollRefCallback:se},a.createElement("div",{className:re.pageInner},oe&&a.createElement(y,{actions:z,onEditTitle:H,navItem:oe,renderTitle:_,info:q,subTitle:K}),V&&V.children&&a.createElement(M,{navItem:V}),a.createElement("div",{className:re.pageContent},Y))),X===o.Q.Canvas&&a.createElement(g.$,{autoHeightMin:"100%",scrollTop:te,scrollRefCallback:se},a.createElement("div",{className:re.canvasContent},Y)),X===o.Q.Custom&&Y)};N.Contents=m;const F=U=>({wrapper:(0,n.css)({label:"page-wrapper",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),pageContent:(0,n.css)({label:"page-content",flexGrow:1}),pageInner:(0,n.css)({label:"page-inner",padding:U.spacing(2),borderBottom:"none",background:U.colors.background.primary,display:"flex",flexDirection:"column",flexGrow:1,margin:U.spacing(0,0,0,0)},r.config.featureToggles.dockedMegaMenu?{[U.breakpoints.up("md")]:{padding:U.spacing(4)}}:{borderRadius:U.shape.radius.default,border:`1px solid ${U.colors.border.weak}`,[U.breakpoints.up("md")]:{margin:U.spacing(2,2,0,1),padding:U.spacing(3)}}),canvasContent:(0,n.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:U.spacing(2),flexBasis:"100%",flexGrow:1})})},9106:(G,A,e)=>{"use strict";e.d(A,{P:()=>i});var n=e(8111),a=e(87947),o=e(59767),r=e(95162);function i(u,l){if(l)return l;if(u&&o.h)return(0,r.useSelector)((0,n.P1)(g,m=>(0,a.ht)(m,u??"home")))}function g(u){return u.navIndex}},44143:(G,A,e)=>{"use strict";e.d(A,{S:()=>r});var n=e(66681),a=e(85960),o=e(47257);function r({info:g}){const u=(0,o.wW)(i);return a.createElement("div",{className:u.container},g.map((l,m)=>a.createElement(a.Fragment,{key:m},a.createElement("div",{className:u.infoItem},a.createElement("div",{className:u.label},l.label),l.value),m+1<g.length&&a.createElement("div",{"data-testid":"page-info-separator",className:u.separator}))))}const i=g=>({container:(0,n.css)({display:"flex",flexDirection:"row",gap:g.spacing(1.5),overflow:"auto"}),infoItem:(0,n.css)({...g.typography.bodySmall,display:"flex",flexDirection:"column",gap:g.spacing(.5)}),label:(0,n.css)({color:g.colors.text.secondary}),separator:(0,n.css)({borderLeft:`1px solid ${g.colors.border.weak}`})})},55415:(G,A,e)=>{"use strict";e.d(A,{Z:()=>r});var n=e(85960),a=e(79468);const r=({pageName:i=""})=>{const g=`Loading ${i}...`;return n.createElement("div",{className:"page-loader-wrapper"},n.createElement(a.u,{text:g}))}},1225:(G,A,e)=>{"use strict";e.d(A,{j:()=>r});var n=e(66681),a=e(85960),o=e(47257);function r({entity:g="Page"}){const u=(0,o.wW)(i),l=(0,o.l4)();return a.createElement("div",{className:u.container},a.createElement("h1",null,g," not found"),a.createElement("div",{className:u.subtitle},"We're looking but can't seem to find this ",g.toLowerCase(),". Try returning"," ",a.createElement("a",{href:"/",className:"external-link"},"home")," ","or seeking help on the"," ",a.createElement("a",{href:"https://community.grafana.com",target:"_blank",rel:"noreferrer",className:"external-link"},"community site.")),a.createElement("div",{className:u.grot},a.createElement("img",{src:`public/img/grot-404-${l.isDark?"dark":"light"}.svg`,width:"100%",alt:"grot"})))}function i(g){return{container:(0,n.css)({display:"flex",flexDirection:"column",padding:g.spacing(8,2,2,2),h1:{textAlign:"center"}}),subtitle:(0,n.css)({color:g.colors.text.secondary,fontSize:g.typography.h5.fontSize,padding:g.spacing(2,0),textAlign:"center"}),grot:(0,n.css)({maxWidth:"450px",paddingTop:g.spacing(8),margin:"0 auto"})}}},81795:(G,A,e)=>{"use strict";e.d(A,{Z:()=>i});var n=e(85960),a=e(92369),o=e(24956),r=e(75064);const i=n.forwardRef((g,u)=>{const[l,m]=(0,n.useState)(!1);return n.createElement(o.I,{...g,type:l?"text":"password","data-testid":a.wl.pages.Login.password,ref:u,suffix:n.createElement(r.h,{name:l?"eye-slash":"eye","aria-controls":g.id,role:"switch","aria-checked":l,onClick:()=>{m(!l)},tooltip:l?"Hide password":"Show password"})})});i.displayName="PasswordField"},67983:(G,A,e)=>{"use strict";e.d(A,{h:()=>i});var n=e(66681),a=e(85960),o=e(55583),r=e(47257);const i=a.memo(a.forwardRef(({className:l,children:m,markdown:c,styleOverrides:d,onRemove:f,...E},v)=>{const h=(0,r.wW)(p=>u(p,d?.borderTop));return a.createElement("div",{className:(0,n.cx)(h.wrapper,l),...E,ref:v},c&&g(c),m)}));function g(l){const m=(0,o.a)(l);return a.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:m}})}i.displayName="OperationRowHelp";const u=(l,m)=>{const c=l.shape.radius.default,d=l.colors.background.secondary;return{wrapper:(0,n.css)`
      padding: ${l.spacing(2)};
      border: 2px solid ${d};
      border-top: ${m?m+d:"none"};
      border-radius: 0 0 ${c} ${c};
      position: relative;
      top: -4px;
    `}}},8907:(G,A,e)=>{"use strict";e.d(A,{V:()=>l,y:()=>u});var n=e(66681),a=e(85960),o=e(92369),r=e(47257),i=e(75064);function g(c){const d=(0,r.wW)(m);return a.createElement("div",{className:(0,n.cx)(d.icon,"active"in c&&c.active&&d.active)},a.createElement(i.h,{name:c.icon,tooltip:c.title,className:d.icon,disabled:!!c.disabled,onClick:c.onClick,type:"button","aria-label":o.wl.components.QueryEditorRow.actionButton(c.title),..."active"in c&&{"aria-pressed":c.active}}))}function u(c){return a.createElement(g,{...c})}const l=c=>a.createElement(g,{...c}),m=c=>({icon:(0,n.css)`
      display: flex;
      position: relative;
      color: ${c.colors.text.secondary};
    `,active:(0,n.css)`
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: -1px;
        right: 2px;
        height: 3px;
        border-radius: ${c.shape.radius.default};
        bottom: -8px;
        background-image: ${c.colors.gradients.brandHorizontal} !important;
      }
    `})},61387:(G,A,e)=>{"use strict";e.d(A,{t:()=>v});var n=e(66681),a=e(85960),o=e(31173),r=e(20055),i=e(43183),g=e(47257),u=e(99053),l=e(75064),m=e(13086),c=e(97666),d=e(95329);const f=({actionsElement:p,disabled:s,draggable:y,collapsable:C=!0,dragHandleProps:b,headerElement:S,isContentVisible:D,onRowToggle:M,reportDragMousePosition:T,title:R,id:O,expanderMessages:x})=>{const I=(0,g.wW)(E);let L=D?(0,d.t)("query-operation.header.collapse-row","Collapse query row"):(0,d.t)("query-operation.header.expand-row","Expand query row");x!==void 0&&D?L=x.close:x!==void 0&&(L=x?.open);const P=(0,d.t)("query-operation.header.drag-and-drop","Drag and drop to reorder");return a.createElement("div",{className:I.header},a.createElement("div",{className:I.column},C&&a.createElement(l.h,{name:D?"angle-down":"angle-right",tooltip:L,className:I.collapseIcon,onClick:M,"aria-expanded":D,"aria-controls":O}),R&&a.createElement("div",{className:I.titleWrapper,onClick:M,"aria-label":"Query operation row title"},a.createElement("div",{className:(0,n.cx)(I.title,s&&I.disabled)},R)),S),a.createElement(m.K,{gap:1,alignItems:"center"},p,y&&a.createElement("div",{onMouseMove:T,...b},a.createElement(c.J,{title:P,name:"draggabledots",size:"lg",className:I.dragIcon}))))},E=p=>({header:(0,n.css)`
    label: Header;
    padding: ${p.spacing(.5,.5)};
    border-radius: ${p.shape.radius.default};
    background: ${p.colors.background.secondary};
    min-height: ${p.spacing(4)};
    display: grid;
    grid-template-columns: minmax(100px, max-content) min-content;
    align-items: center;
    justify-content: space-between;
    white-space: nowrap;

    &:focus {
      outline: none;
    }
  `,column:(0,n.css)`
    label: Column;
    display: flex;
    align-items: center;
  `,dragIcon:(0,n.css)`
    cursor: grab;
    color: ${p.colors.text.disabled};
    margin: ${p.spacing(0,.5)};
    &:hover {
      color: ${p.colors.text};
    }
  `,collapseIcon:(0,n.css)`
    margin-left: ${p.spacing(.5)};
    color: ${p.colors.text.disabled};
    }
  `,titleWrapper:(0,n.css)`
    display: flex;
    align-items: center;
    flex-grow: 1;
    cursor: pointer;
    overflow: hidden;
    margin-right: ${p.spacing(.5)};
  `,title:(0,n.css)`
    font-weight: ${p.typography.fontWeightBold};
    color: ${p.colors.text.link};
    margin-left: ${p.spacing(.5)};
    overflow: hidden;
    text-overflow: ellipsis;
  `,disabled:(0,n.css)`
    color: ${p.colors.text.disabled};
  `});f.displayName="QueryOperationRowHeader";function v({children:p,actions:s,title:y,headerElement:C,onClose:b,onOpen:S,isOpen:D,disabled:M,draggable:T,collapsable:R,index:O,id:x,expanderMessages:I}){const[L,P]=(0,a.useState)(D!==void 0?D:!0),N=(0,g.wW)(h),F=(0,a.useCallback)(()=>{P(!L)},[L,P]);(0,a.useEffect)(()=>{typeof D=="boolean"&&P(D)},[D]);const U=(0,a.useCallback)(H=>{if(H.defaultPrevented){const z=H.currentTarget.getBoundingClientRect(),K=H.clientX-z.left,Y=H.clientY-z.top;(0,i.ff)("query_row_reorder_drag_position",{x:K/z.width,y:Y/z.height,width:z.width,height:z.height})}},[]);(0,r.Z)(()=>{L?S&&S():b&&b()},[L]);const j={isOpen:L,onOpen:()=>{P(!0)},onClose:()=>{P(!1)}},V=s&&u.renderOrCallToRender(s,j),_=C&&u.renderOrCallToRender(C,j);return T?a.createElement(o._l,{draggableId:x,index:O},H=>a.createElement(a.Fragment,null,a.createElement("div",{ref:H.innerRef,className:N.wrapper,...H.draggableProps},a.createElement("div",null,a.createElement(f,{id:x,actionsElement:V,disabled:M,draggable:!0,collapsable:R,dragHandleProps:H.dragHandleProps,headerElement:_,isContentVisible:L,onRowToggle:F,reportDragMousePosition:U,title:y,expanderMessages:I})),L&&a.createElement("div",{className:N.content},p)))):a.createElement("div",{className:N.wrapper},a.createElement(f,{id:x,actionsElement:V,disabled:M,draggable:!1,collapsable:R,headerElement:_,isContentVisible:L,onRowToggle:F,reportDragMousePosition:U,title:y,expanderMessages:I}),L&&a.createElement("div",{className:N.content},p))}const h=p=>({wrapper:(0,n.css)`
      margin-bottom: ${p.spacing(2)};
    `,content:(0,n.css)`
      margin-top: ${p.spacing(.5)};
      margin-left: ${p.spacing(3)};
    `});v.displayName="QueryOperationRow"},477:(G,A,e)=>{"use strict";e.d(A,{I:()=>De});var n=e(85960),a=e(47257),o=e(18975),r=e(25142),i=e(66681),g=e(75682),u=e(97666),l=e(14607),m=e(24956),c=e(18151),d=e(55182),f=e(12260);const E=(0,n.forwardRef)(({children:Pe,iconName:ye},Te)=>{const nt=(0,a.wW)(v);return n.createElement("div",{className:nt.container,ref:Te},ye&&n.createElement(u.J,{name:ye,size:"xs"}),Pe)});E.displayName="ValueContainer";const v=Pe=>{const{prefix:ye}=(0,m.H)({theme:Pe}),{multiValueContainer:Te}=(0,f.D)(Pe);return{container:(0,i.cx)(ye,Te,(0,i.css)`
        position: relative;
        padding: ${Pe.spacing(.5,1,.5,1)};

        svg {
          margin-right: ${Pe.spacing(.5)};
        }
      `)}},h=360,p=300,s=320,y=360,C=320,b=360,S=y+b,D=Pe=>Pe.stopPropagation(),M=({appliedRoles:Pe,basicRole:ye,disabled:Te,isFocused:nt,query:ct,showBasicRole:he,width:xe,isLoading:Me,onOpen:He,onClose:Ve,onQueryChange:Oe,...Ne})=>{const _e=(0,a.wW)(R,!1,!!nt,!!Te,!1,xe),qe=(0,n.useRef)(null);(0,n.useEffect)(()=>{nt&&qe.current?.focus()});const rt=Je=>{const Ae=Je.target?.value;Oe(Ae)},mt=he&&ye!=="None";return nt?n.createElement("div",{className:_e.wrapper},mt&&n.createElement(E,null,ye),Pe.map(Je=>n.createElement(E,{key:Je.uid},Je.displayName||Je.name)),!Te&&n.createElement("input",{...Ne,className:_e.input,ref:qe,onMouseDown:D,onChange:rt,"data-testid":"role-picker-input",placeholder:nt?"Select role":"",value:ct}),n.createElement("div",{className:_e.suffix},n.createElement(u.J,{name:"angle-up",className:_e.dropdownIndicator,onMouseDown:Ve}))):n.createElement("div",{className:(0,i.cx)(_e.wrapper,_e.selectedRoles),onMouseDown:He},mt&&n.createElement(E,null,ye),n.createElement(T,{appliedRoles:Pe,numberOfRoles:Pe.length,showBuiltInRole:mt}),Me&&n.createElement("div",{className:_e.spinner},n.createElement(g.$,{size:16,inline:!0})))};M.displayName="RolePickerInput";const T=({showBuiltInRole:Pe,numberOfRoles:ye,appliedRoles:Te})=>{const nt=(0,a.wW)(ct=>O(ct));return n.createElement(n.Fragment,null,ye?n.createElement(l.u,{content:n.createElement("div",{className:nt.tooltip},Te?.map(ct=>n.createElement("p",{key:ct.uid},ct.displayName)))},n.createElement(E,null,`${Pe?"+":""}${ye} role${ye>1?"s":""}`)):!Pe&&n.createElement(E,null,"No roles assigned"))},R=(Pe,ye,Te,nt,ct,he)=>{const xe=(0,m.H)({theme:Pe,invalid:ye});return{wrapper:(0,i.cx)(xe.wrapper,(0,c.RK)(Pe,ye),Te&&(0,i.css)`
          ${d.focusCss(Pe.v1)}
        `,nt&&xe.inputDisabled,(0,i.css)({minWidth:he||h+"px",width:he,minHeight:"32px",height:"auto",flexDirection:"row",paddingRight:Pe.spacing(1),maxWidth:"100%",alignItems:"center",display:"flex",flexWrap:"wrap",justifyContent:"flex-start",position:"relative",boxSizing:"border-box",cursor:"default"}),ct&&(0,i.css)`
          padding-left: 0;
        `),input:(0,i.cx)((0,c.RK)(Pe,ye),(0,i.css)`
        max-width: 120px;
        border: none;
        cursor: ${Te?"default":"pointer"};
      `),suffix:xe.suffix,dropdownIndicator:(0,i.css)`
      cursor: pointer;
    `,selectedRoles:(0,i.css)`
      display: flex;
      align-items: center;
      cursor: ${nt?"not-allowed":"pointer"};
    `,tooltip:(0,i.css)`
      p {
        margin-bottom: ${Pe.spacing(.5)};
      }
    `,spinner:(0,i.css)({display:"flex",flexGrow:1,justifyContent:"flex-end"})}},O=Pe=>({tooltip:(0,i.css)`
    p {
      margin-bottom: ${Pe.spacing(.5)};
    }
  `});var x=e(79055),I=e(50263),L=e(74042),P=e(29165),N=e(23351),F=e(95162);const U=Pe=>({hideScrollBar:(0,i.css)({".scrollbar-view":{"&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"}}),menuWrapper:(0,i.css)({display:"flex",maxHeight:"650px",position:"absolute",zIndex:Pe.zIndex.dropdown,overflow:"hidden",minWidth:"auto"}),menu:(0,i.css)({minWidth:`${s}px`,maxWidth:`${y}px`,"& > div":{paddingTop:Pe.spacing(1)}}),menuLeft:(0,i.css)({flexDirection:"row-reverse"}),subMenu:(0,i.css)({height:"100%",minWidth:`${C}px`,maxWidth:`${b}px`,display:"flex",flexDirection:"column",borderLeft:`1px solid ${Pe.components.input.borderColor}`,"& > div":{paddingTop:Pe.spacing(1)}}),subMenuLeft:(0,i.css)({borderRight:`1px solid ${Pe.components.input.borderColor}`,borderLeft:"unset"}),groupHeader:(0,i.css)({padding:Pe.spacing(0,4.5),display:"flex",alignItems:"center",color:Pe.colors.text.primary,fontWeight:Pe.typography.fontWeightBold}),container:(0,i.css)({padding:Pe.spacing(1),border:`1px ${Pe.colors.border.weak} solid`,borderRadius:Pe.shape.radius.default,backgroundColor:Pe.colors.background.primary,zIndex:Pe.zIndex.modal}),menuSection:(0,i.css)({marginBottom:Pe.spacing(2)}),menuOptionCheckbox:(0,i.css)({display:"flex",margin:Pe.spacing(0,1,0,.25)}),menuButtonRow:(0,i.css)({backgroundColor:Pe.colors.background.primary,padding:Pe.spacing(1)}),menuOptionBody:(0,i.css)({fontWeight:Pe.typography.fontWeightRegular,padding:Pe.spacing(0,1.5,0,0)}),menuOptionDisabled:(0,i.css)({color:Pe.colors.text.disabled,cursor:"not-allowed"}),menuOptionExpand:(0,i.css)({position:"absolute",right:Pe.spacing(1.25),color:Pe.colors.text.disabled,"&:after":{content:'">"'}}),menuOptionInfoSign:(0,i.css)({color:Pe.colors.text.disabled}),basicRoleSelector:(0,i.css)({margin:Pe.spacing(1,1.25,1,1.5)}),subMenuPortal:(0,i.css)({height:"100%","> div":{height:"100%"}}),subMenuButtonRow:(0,i.css)({backgroundColor:Pe.colors.background.primary,padding:Pe.spacing(1)}),checkboxPartiallyChecked:(0,i.css)({input:{"&:checked + span":{"&:after":{borderWidth:"0 3px 0px 0",transform:"rotate(90deg)"}}}}),loadingSpinner:(0,i.css)({marginLeft:Pe.spacing(1)})}),j=Object.values(F.OrgRole).map(Pe=>({label:Pe===F.OrgRole.None?"No basic role":Pe,value:Pe})),V=({value:Pe,onChange:ye,disabled:Te,disabledMesssage:nt,tooltipMessage:ct})=>{const he=(0,a.wW)(U),xe=(0,a.l4)();return n.createElement(n.Fragment,null,n.createElement("div",{className:he.groupHeader},n.createElement("span",{style:{marginRight:xe.spacing(1)}},"Basic roles"),Te&&nt&&n.createElement(l.u,{placement:"right-end",interactive:!0,content:n.createElement("div",null,nt)},n.createElement(u.J,{name:"question-circle"})),!Te&&ct&&n.createElement(l.u,{placement:"right-end",interactive:!0,content:ct},n.createElement(u.J,{name:"info-circle",size:"xs"}))),n.createElement(N.x,{name:"Basic Role Selector",className:he.basicRoleSelector,options:j,value:Pe,onChange:ye,disabled:Te}))};var _=e(55973);const H=(0,n.memo)(n.forwardRef(({name:Pe,value:ye,isFocused:Te,isSelected:nt,partiallySelected:ct,disabled:he,onChange:xe,onClick:Me,onOpenSubMenu:He,onCloseSubMenu:Ve,children:Oe,root:Ne},_e)=>{const qe=(0,a.l4)(),rt=(0,f.D)(qe),mt=(0,a.wW)(U),Je=(0,i.cx)(rt.option,Te&&rt.optionFocused,he&&mt.menuOptionDisabled),Ae=Z=>{he||ye&&xe(ye)},Ke=Z=>{Me&&Me(ye)},Xe=()=>{He&&He(ye)},ne=()=>{Ve&&Ve()};return n.createElement("div",{onMouseEnter:Xe,onMouseLeave:ne},n.createElement("div",{ref:_e,className:Je,"aria-label":"Role picker option",onClick:Ke},n.createElement(_.X,{value:nt,className:(0,i.cx)(mt.menuOptionCheckbox,{[mt.checkboxPartiallyChecked]:ct}),onChange:Ae,disabled:he}),n.createElement("div",{className:(0,i.cx)(rt.optionBody,mt.menuOptionBody)},n.createElement("span",null,Pe),n.createElement("span",{className:mt.menuOptionExpand})),Ne&&Oe&&n.createElement(r.h_,{className:mt.subMenuPortal,root:Ne},Oe)))}));H.displayName="RoleMenuGroupOption";const z=n.forwardRef(({data:Pe,isFocused:ye,isSelected:Te,disabled:nt,onChange:ct,hideDescription:he},xe)=>{const Me=(0,a.l4)(),He=(0,f.D)(Me),Ve=(0,a.wW)(U),Oe=(0,i.cx)(He.option,ye&&He.optionFocused,nt&&Ve.menuOptionDisabled),Ne=_e=>{nt||(_e.preventDefault(),_e.stopPropagation(),ct(Pe))};return n.createElement("div",{ref:xe,className:Oe,"aria-label":"Role picker option",onClick:Ne},n.createElement(_.X,{value:Te,className:Ve.menuOptionCheckbox,onChange:Ne,disabled:nt}),n.createElement("div",{className:(0,i.cx)(He.optionBody,Ve.menuOptionBody)},n.createElement("span",null,Pe.displayName||Pe.name),!he&&Pe.description&&n.createElement("div",{className:He.optionDescription},Pe.description)),Pe.description&&n.createElement(l.u,{content:Pe.description},n.createElement(u.J,{name:"info-circle",className:Ve.menuOptionInfoSign})))});z.displayName="RoleMenuOption";var K=e(19974);const Y=({options:Pe,selectedOptions:ye,disabledOptions:Te,onSelect:nt,onClear:ct,showOnLeft:he})=>{const xe=(0,a.l4)(),Me=(0,f.D)(xe),He=(0,a.wW)(U),Ve=async()=>{ct&&ct()};return n.createElement("div",{className:(0,i.cx)(He.subMenu,{[He.subMenuLeft]:he}),"aria-label":"Role picker submenu"},n.createElement(I.$,{autoHide:!1,autoHeightMax:`${p}px`,hideHorizontalTrack:!0},n.createElement("div",{className:Me.optionBody},Pe.map((Oe,Ne)=>n.createElement(z,{data:Oe,key:Ne,isSelected:!!(Oe.uid&&(ye.find(_e=>_e.uid===Oe.uid)||Te?.find(_e=>_e.uid===Oe.uid))),disabled:!!(Oe.uid&&Te?.find(_e=>_e.uid===Oe.uid))||(0,K.r)(Oe),onChange:nt,hideDescription:!0})))),n.createElement("div",{className:He.subMenuButtonRow},n.createElement(L.Lh,{justify:"flex-end"},n.createElement(P.zx,{size:"sm",fill:"text",onClick:Ve},"Clear"))))},k=n.forwardRef(({roles:Pe,renderedName:ye,showGroups:Te,optionGroups:nt,onGroupChange:ct,groupSelected:he,groupPartiallySelected:xe,subMenuNode:Me,selectedOptions:He,onRoleChange:Ve,onClearSubMenu:Oe,showOnLeftSubMenu:Ne},_e)=>{const[qe,rt]=(0,n.useState)(!1),[mt,Je]=(0,n.useState)(""),Ae=(0,a.l4)(),Ke=(0,f.D)(Ae),Xe=(0,a.wW)(U),ne=(0,n.useCallback)(ee=>{Je(ee),rt(!0)},[]),Z=(0,n.useCallback)(()=>{rt(!1),Je("")},[]);return n.createElement("div",null,Pe.length>0&&n.createElement("div",{className:Xe.menuSection},n.createElement("div",{className:Xe.groupHeader},ye),n.createElement("div",{className:Ke.optionBody}),Te&&nt?.length?nt.map(ee=>n.createElement(H,{key:ee.value,name:ee.name,value:ee.value,isSelected:he(ee.value)||xe(ee.value),partiallySelected:xe(ee.value),disabled:ee.options?.every(K.r),onChange:ct,onOpenSubMenu:ne,onCloseSubMenu:Z,root:Me,isFocused:qe&&mt===ee.value},qe&&mt===ee.value&&n.createElement(Y,{options:ee.options,selectedOptions:He,onSelect:Ve,onClear:()=>Oe(mt),showOnLeft:Ne}))):Pe.map(ee=>n.createElement(z,{data:ee,key:ee.uid,isSelected:!!(ee.uid&&He.find(ce=>ce.uid===ee.uid)),disabled:(0,K.r)(ee),onChange:Ve,hideDescription:!0}))))});k.displayName="RoleMenuGroupsSection";var q=(Pe=>(Pe.fixed="fixed",Pe.custom="custom",Pe.plugin="plugin",Pe))(q||{});const X={ldap:"LDAP",current:"Current org"},te=n.createElement(n.Fragment,null,'You can now select the "No basic role" option and add permissions to your custom needs. You can find more information in\xA0',n.createElement(x.h,{href:"https://grafana.com/docs/grafana/latest/administration/roles-and-permissions/#organization-roles",variant:"bodySmall",external:!0},"our documentation"),"."),se=({basicRole:Pe,options:ye,appliedRoles:Te,showGroups:nt,basicRoleDisabled:ct,disabledMessage:he,showBasicRole:xe,onSelect:Me,onBasicRoleSelect:He,onUpdate:Ve,updateDisabled:Oe,offset:Ne,menuLeft:_e,apply:qe})=>{const[rt,mt]=(0,n.useState)(Te),[Je,Ae]=(0,n.useState)(Pe),[Ke,Xe]=(0,n.useState)({}),ne=(0,n.useRef)(null),Z=(0,a.l4)(),ee=(0,f.D)(Z),ce=(0,a.wW)(U);(0,n.useEffect)(()=>{Me(rt)},[rt,Me]),(0,n.useEffect)(()=>{He&&Je&&He(Je)},[Je,He]),(0,n.useEffect)(()=>{const it=ye.filter(de).sort(ge),vt=ye.filter(re).sort(ge),yt=ye.filter(fe).sort(ge),Wt={fixed:ie(vt).sort((ut,pt)=>ut.name.localeCompare(pt.name)),custom:ie(it).sort((ut,pt)=>ut.name.localeCompare(pt.name)),plugin:ie(yt).sort((ut,pt)=>ut.name.localeCompare(pt.name))};Xe({fixed:{groupType:"fixed",optionGroup:Wt.fixed,renderedName:"Fixed roles",roles:vt},custom:{groupType:"custom",optionGroup:Wt.custom,renderedName:"Custom roles",roles:it},plugin:{groupType:"plugin",optionGroup:Wt.plugin,renderedName:"Plugin roles",roles:yt}})},[ye]);const be=it=>{const vt=[];for(const yt of rt)oe(yt)===it&&vt.push(yt);return vt},Ee=(it,vt)=>{const yt=be(vt),Wt=Ke[it]?.optionGroup.find(ut=>ut.value===vt);return yt.length>0&&yt.length>=Wt.options.length},Be=(it,vt)=>{const yt=be(vt),Wt=Ke[it]?.optionGroup.find(ut=>ut.value===vt);return yt.length>0&&yt.length<Wt.options.length},Le=it=>{rt.find(vt=>vt.uid===it.uid)?mt(rt.filter(vt=>vt.uid!==it.uid)):mt([...rt,it])},ze=(it,vt)=>{const yt=Ke[it]?.optionGroup.find(Wt=>Wt.value===vt);if(yt)if(Ee(it,vt)||Be(it,vt))mt(rt.filter(Wt=>!yt.options.find(ut=>Wt.uid===ut.uid)));else{const Wt=yt.options.filter(pt=>pt.delegatable),ut=rt.filter(pt=>!yt.options.find(we=>pt.uid===we.uid));mt([...ut,...Wt])}},Fe=it=>{Ae(it)},$e=async()=>{mt([])},et=it=>{const vt=rt.filter(yt=>oe(yt)!==it);mt(vt)},tt=()=>{Ve(rt,Je)};return n.createElement("div",{className:(0,i.cx)(ee.menu,ce.menuWrapper,{[ce.menuLeft]:_e},(0,i.css)({top:`${Ne.vertical}px`,left:_e?"unset":`${Ne.horizontal}px`,right:_e?`${Ne.horizontal}px`:"unset"}))},n.createElement("div",{className:ce.menu,"aria-label":"Role picker menu"},n.createElement(I.$,{autoHide:!1,autoHeightMax:`${p}px`,hideHorizontalTrack:!0,hideVerticalTrack:!0,className:(0,i.cx)(ce.hideScrollBar)},xe&&n.createElement("div",{className:ce.menuSection},n.createElement(V,{value:Je,onChange:Fe,disabled:ct,disabledMesssage:he,tooltipMessage:te})),Object.entries(Ke).map(([it,vt])=>n.createElement(k,{key:it,roles:vt.roles,renderedName:vt.renderedName,showGroups:nt,optionGroups:vt.optionGroup,groupSelected:yt=>Ee(vt.groupType,yt),groupPartiallySelected:yt=>Be(vt.groupType,yt),onGroupChange:yt=>ze(vt.groupType,yt),subMenuNode:ne?.current,selectedOptions:rt,onRoleChange:Le,onClearSubMenu:et,showOnLeftSubMenu:_e}))),n.createElement("div",{className:ce.menuButtonRow},n.createElement(L.Lh,{justify:"flex-end"},n.createElement(P.zx,{size:"sm",fill:"text",onClick:$e,disabled:Oe},"Clear all"),n.createElement(P.zx,{size:"sm",onClick:tt,disabled:Oe},qe?"Apply":"Update")))),n.createElement("div",{ref:ne}))},de=Pe=>!Pe.name?.startsWith("fixed:")&&!Pe.name.startsWith("plugins:"),re=Pe=>Pe.name?.startsWith("fixed:"),fe=Pe=>Pe.name?.startsWith("plugins:"),ie=Pe=>{const ye={};return Pe.forEach(nt=>{const ct=oe(nt),he=ue(nt);ye[ct]||(ye[ct]={name:he,roles:[]}),ye[ct].roles.push(nt)}),Object.entries(ye).map(([nt,ct])=>({name:X[nt]||Ue(ct.name),value:nt,options:ct.roles.sort(ge)}))},oe=Pe=>{const ye=me(Pe),Te=ue(Pe);return`${ye}:${Te}`},ue=Pe=>Pe.group||"Other",me=Pe=>{const ye=Pe.name.indexOf(":");return ye<0?"unknown":Pe.name.substring(0,ye)},ge=(Pe,ye)=>Pe.name.localeCompare(ye.name),Ue=Pe=>Pe.slice(0,1).toUpperCase()+Pe.slice(1),De=({basicRole:Pe,appliedRoles:ye,roleOptions:Te,disabled:nt,isLoading:ct,basicRoleDisabled:he,basicRoleDisabledMessage:xe,showBasicRole:Me,onRolesChange:He,onBasicRoleChange:Ve,canUpdateRoles:Oe=!0,apply:Ne=!1,maxWidth:_e=h,width:qe})=>{const[rt,mt]=(0,n.useState)(!1),[Je,Ae]=(0,n.useState)(ye),[Ke,Xe]=(0,n.useState)(Pe),[ne,Z]=(0,n.useState)(""),[ee,ce]=(0,n.useState)({vertical:0,horizontal:0}),[be,Ee]=(0,n.useState)(!1),Be=(0,n.useRef)(null),Le=(0,a.l4)(),ze=typeof qe=="number"?Le.spacing(qe):qe;(0,n.useEffect)(()=>{Xe(Pe),Ae(ye)},[ye,Pe,Ve]);const Fe=(0,n.useCallback)(()=>{const{horizontal:we,vertical:lt,menuToLeft:Bt}=$e();we&&lt&&(ce({horizontal:we,vertical:lt}),Ee(Bt))},[]);(0,n.useEffect)(()=>{rt&&Fe()},[rt,Je,Fe]);const $e=()=>{const we=Be?.current?.getBoundingClientRect();if(!we)return{};const{bottom:lt,top:Bt,left:Kt,right:It}=we;let Zt=Kt,yn=lt+10,xn=!1;return window.innerHeight-lt<p+20&&(yn=Bt-p-50),Kt+S>window.innerWidth&&(Zt=window.innerWidth-It,xn=!0),{horizontal:Zt,vertical:yn,menuToLeft:xn}},et=(0,n.useCallback)(we=>{nt||(we.preventDefault(),we.stopPropagation(),Fe(),mt(!0))},[nt,Fe]),tt=(0,n.useCallback)(()=>{mt(!1),Z(""),Ae(ye),Xe(Pe)},[ye,Pe]),it=()=>rt&&tt(),vt=we=>{Z(we||"")},yt=we=>{Ae(we)},Wt=we=>{Xe(we)},ut=(we,lt)=>{Ve&&lt&&lt!==Pe&&Ve(lt),Oe&&He(we),Z(""),mt(!1)},pt=()=>{const we=Te.map(lt=>({...lt,delegatable:Oe&&lt.delegatable}));return ne&&ne.trim()!==""?we.filter(lt=>lt.name?.toLowerCase().includes(ne.toLowerCase())):we};return n.createElement("div",{"data-testid":"role-picker",style:{position:"relative",maxWidth:ze||_e,width:ze},ref:Be},n.createElement(o.L,{onClick:it,useCapture:!1},n.createElement(M,{basicRole:Ke,appliedRoles:Je,query:ne,onQueryChange:vt,onOpen:et,onClose:tt,isFocused:rt,disabled:nt,showBasicRole:Me,width:ze,isLoading:ct}),rt&&n.createElement(r.h_,null,n.createElement("div",{onClick:we=>we.stopPropagation()},n.createElement(se,{options:pt(),basicRole:Ke,appliedRoles:ye,onBasicRoleSelect:Wt,onSelect:yt,onUpdate:ut,showGroups:ne.length===0||ne.trim()==="",basicRoleDisabled:he,disabledMessage:xe,showBasicRole:Me,updateDisabled:he&&!Oe,apply:Ne,offset:ee,menuLeft:be})))))}},84184:(G,A,e)=>{"use strict";e.d(A,{R:()=>u});var n=e(85960),a=e(85954),o=e(49683),r=e(95162),i=e(477),g=e(80932);const u=({basicRole:l,roles:m,userId:c,orgId:d,onBasicRoleChange:f,roleOptions:E,disabled:v,basicRoleDisabled:h,basicRoleDisabledMessage:p,apply:s=!1,onApplyRoles:y,pendingRoles:C,maxWidth:b,width:S,isLoading:D})=>{const[{loading:M,value:T=m||[]},R]=(0,a.Z)(async()=>{try{if(m)return m;if(s&&C?.length)return C;if(o.Vt.hasPermission(r.AccessControlAction.ActionUserRolesList))return await(0,g.kt)(c,d)}catch{console.error("Error loading options")}return[]},[d,c,C,m]);(0,n.useEffect)(()=>{d&&R()},[R,d]);const O=async I=>{s?y&&y(I,c,d):(await(0,g.hB)(I,c,d),await R())},x=o.Vt.hasPermission(r.AccessControlAction.ActionUserRolesAdd)&&o.Vt.hasPermission(r.AccessControlAction.ActionUserRolesRemove);return n.createElement(i.I,{appliedRoles:T,basicRole:l,onRolesChange:O,onBasicRoleChange:f,roleOptions:E,isLoading:M||D,disabled:v,basicRoleDisabled:h,basicRoleDisabledMessage:p,showBasicRole:!0,apply:s,canUpdateRoles:x,maxWidth:b,width:S})}},80932:(G,A,e)=>{"use strict";e.d(A,{_C:()=>g,hB:()=>i,kt:()=>r,u7:()=>u,ul:()=>o});var n=e(85445),a=e(19974);const o=async(l,m)=>{let c="/api/access-control/roles?delegatable=true";l&&(c+=`&targetOrgId=${l}`);const d=await(0,n.i)().get(c);return!d||!d.length?[]:d.map(a.w)},r=async(l,m)=>{let c=`/api/access-control/users/${l}/roles`;m&&(c+=`?targetOrgId=${m}`);try{const d=await(0,n.i)().get(c);return!d||!d.length?[]:d.map(a.w)}catch(d){return(0,n.kW)(d)&&(d.isHandled=!0),[]}},i=(l,m,c)=>{let d=`/api/access-control/users/${m}/roles`;c&&(d+=`?targetOrgId=${c}`);const f=l.flatMap(E=>E.uid);return(0,n.i)().put(d,{orgId:c,roleUids:f})},g=async(l,m)=>{let c=`/api/access-control/teams/${l}/roles`;m&&(c+=`?targetOrgId=${m}`);try{const d=await(0,n.i)().get(c);return!d||!d.length?[]:d.map(a.w)}catch(d){return(0,n.kW)(d)&&(d.isHandled=!0),[]}},u=(l,m,c)=>{let d=`/api/access-control/teams/${m}/roles`;c&&(d+=`?targetOrgId=${c}`);const f=l.flatMap(E=>E.uid);return(0,n.i)().put(d,{orgId:c,roleUids:f})}},19974:(G,A,e)=>{"use strict";e.d(A,{r:()=>n,w:()=>a});const n=o=>o.delegatable!==void 0&&!o.delegatable,a=o=>{const r="fixed:";if(!o.displayName&&o.name.startsWith(r)){let i="";i=o.name.replace(r,"").replace(/:/g," "),o.displayName=i}return o}},91861:(G,A,e)=>{"use strict";e.d(A,{V:()=>c});var n=e(85960),a=e(88960),o=e(86734),r=e(90308);const i=2,g=5,u=v=>{const h=v.match(new RegExp('<style type="text/css">([\\s\\S]*?)<\\/style>'));return h?h[0]:null},l=v=>v.match(new RegExp(`<svg.*id\\s*=\\s*(['"])(.*?)\\1`))?.[i],m=v=>{let h=l(v);if(!h){h=`x${(0,r.Z)()}`;const s=v.indexOf("<svg")+g;v=v.substring(0,s)+`id="${h}" `+v.substring(s)}let p=u(v);if(p){let s=p.replace(/(#(.*?))?\./g,`#${h} .`);v=v.replace(p,s)}return v},c=v=>{const{cleanStyle:h,...p}=v;return n.createElement(a.default,{...p,cacheRequests:!0,preProcessor:h?E:f})};let d=new Map;function f(v){let h=d.get(v);return h||(h=o.QX.sanitizeSVGContent(v),d.set(v,h)),h}function E(v){let h=d.get(v);return h||(h=o.QX.sanitizeSVGContent(v),h.indexOf('<style type="text/css">')>-1&&(h=m(h)),d.set(v,h)),h}},66399:(G,A,e)=>{"use strict";e.d(A,{o:()=>m});var n=e(97812),a=e.n(n),o=e(85960),r=e(27436),i=e(46783);const g=(c="General",d)=>`${c}/${d}`;async function u(c=""){return i.ae.search({type:"dash-db",query:c,limit:100}).then(d=>d.map(f=>({value:{uid:f.uid,title:f.title,folderTitle:f.folderTitle,folderUid:f.folderUid},label:g(f?.folderTitle,f.title)})))}const l=a()(u,250,{leading:!0}),m=({value:c,onChange:d,placeholder:f="Select dashboard",noOptionsMessage:E="No dashboards found",...v})=>{const[h,p]=(0,o.useState)();(0,o.useEffect)(()=>{!c||c===h?.value?.uid||(async()=>{const y=await i.ae.getDashboardByUid(c);y.dashboard&&p({value:{uid:y.dashboard.uid,title:y.dashboard.title,folderTitle:y.meta.folderTitle,folderUid:y.meta.folderUid},label:g(y.meta?.folderTitle,y.dashboard.title)})})()},[c]);const s=(0,o.useCallback)(y=>{p(y),d?.(y?.value)},[d,p]);return o.createElement(r.qb,{loadOptions:l,onChange:s,placeholder:f,noOptionsMessage:E,value:h,defaultOptions:!0,...v})}},19461:(G,A,e)=>{"use strict";e.d(A,{E:()=>X});var n=e(85960),a=e(90857),o=e(66681),r=e(30142),i=e(81445),g=e(47257),u=e(24956),l=e(97666),m=e(49199),c=e(23615),d=e(95329),f=e(42321),E=e(76910),v=e(65970),h=e(76236),p=e(30824),s=e(75169),y=e(21128),C=e(34785),b=e(403),S=e(54563),D=e(75064),M=e(53193),T=e(40377),R=e(40604),O=e(95162);const x=40,I="md",L=(se,de)=>`${se}-${de||"root"}`;function P({items:se,focusedItemIndex:de,foldersAreOpenable:re,idPrefix:fe,selectedFolder:ie,onFolderExpand:oe,onFolderSelect:ue,isItemLoaded:me,requestLoadMore:ge}){const Ue=(0,n.useRef)(null),De=(0,g.wW)(U),Pe=(0,n.useMemo)(()=>({items:se,focusedItemIndex:de,foldersAreOpenable:re,selectedFolder:ie,onFolderExpand:oe,onFolderSelect:ue,idPrefix:fe}),[se,de,re,ie,oe,ue,fe]),ye=(0,n.useCallback)(nt=>me(nt),[me]),Te=(0,n.useCallback)((nt,ct)=>{const{parentUID:he}=se[nt];ge(he)},[ge,se]);return n.createElement("div",{className:De.table,role:"tree"},se.length>0?n.createElement(S.Z,{ref:Ue,itemCount:se.length,isItemLoaded:ye,loadMoreItems:Te},({onItemsRendered:nt,ref:ct})=>n.createElement(b.t7,{ref:ct,height:x*Math.min(6.5,se.length),width:"100%",itemData:Pe,itemSize:x,itemCount:se.length,onItemsRendered:nt},F)):n.createElement("div",{className:De.emptyMessage},n.createElement(d.cC,{i18nKey:"browse-dashboards.folder-picker.empty-message"},"No folders found")))}const N=[100,200,130,160,150];function F({index:se,style:de,data:re}){const{items:fe,focusedItemIndex:ie,foldersAreOpenable:oe,selectedFolder:ue,onFolderExpand:me,onFolderSelect:ge,idPrefix:Ue}=re,{item:De,isOpen:Pe,level:ye,parentUID:Te}=fe[se],nt=(0,n.useRef)(null),ct=(0,n.useId)(),he=(0,O.useSelector)(v.hO),xe=(0,O.useSelector)(v.MH),Me=(De.uid?xe[De.uid]:he)?.items??[];let He=[];De.uid&&(He=(Te?xe[Te]:he)?.items??[]);const Ve=(0,g.wW)(U),Oe=(0,n.useCallback)(_e=>{_e.preventDefault(),_e.stopPropagation(),De.uid&&me(De.uid,!Pe)},[De.uid,Pe,me]),Ne=(0,n.useCallback)(()=>{De.kind==="folder"&&ge(De)},[De,ge]);return De.kind==="ui"&&De.uiKind==="pagination-placeholder"?n.createElement("span",{style:de,className:Ve.row},n.createElement(R.A,{level:ye,spacing:2}),n.createElement(C.Z,{width:N[se%N.length]})):De.kind!=="folder"?null:n.createElement("div",{ref:nt,style:de,className:(0,o.cx)(Ve.row,{[Ve.rowFocused]:se===ie,[Ve.rowSelected]:De.uid===ue}),tabIndex:-1,onClick:Ne,"aria-expanded":Pe,"aria-selected":De.uid===ue,"aria-labelledby":ct,"aria-level":ye+1,role:"treeitem","aria-owns":Me.length>0?Me.map(_e=>L(Ue,_e.uid)).join(" "):void 0,"aria-setsize":Me.length,"aria-posinset":He.findIndex(_e=>_e.uid===De.uid)+1,id:L(Ue,De.uid)},n.createElement("div",{className:Ve.rowBody},n.createElement(R.A,{level:ye,spacing:2}),oe?n.createElement(D.h,{size:I,onMouseDown:Oe,tabIndex:-1,"aria-label":Pe?`Collapse folder ${De.title}`:`Expand folder ${De.title}`,name:Pe?"angle-down":"angle-right"}):n.createElement("span",{className:Ve.folderButtonSpacer}),n.createElement("label",{className:Ve.label,id:ct},n.createElement(T.x,{truncate:!0},De.title))))}const U=se=>{const de=(0,o.css)({height:x,display:"flex",position:"relative",alignItems:"center",flexGrow:1,gap:se.spacing(.5),overflow:"hidden",padding:se.spacing(0,1)});return{table:(0,o.css)({background:se.components.input.background}),emptyMessage:(0,o.css)({padding:se.spacing(1),textAlign:"center",width:"100%"}),folderButtonSpacer:(0,o.css)({paddingLeft:`calc(${(0,M.Bm)(I)}px + ${se.spacing(.5)})`}),row:(0,o.css)({display:"flex",position:"relative",alignItems:"center",[":not(:first-child)"]:{borderTop:`solid 1px ${se.colors.border.weak}`}}),rowFocused:(0,o.css)({backgroundColor:se.colors.background.secondary}),rowSelected:(0,o.css)({"&::before":{display:"block",content:'""',position:"absolute",left:0,bottom:0,top:0,width:4,borderRadius:se.shape.radius.default,backgroundImage:se.colors.gradients.brandVertical}}),rowBody:de,label:(0,o.css)({lineHeight:x+"px",flexGrow:1,minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","&:hover":{textDecoration:"underline",cursor:"pointer"}})}};var j=e(55182);function V({isLoading:se,invalid:de,label:re,...fe},ie){const oe=(0,g.l4)(),ue=H(oe,de);return n.createElement("div",{className:ue.wrapper},n.createElement("div",{className:ue.inputWrapper},re?n.createElement("div",{className:ue.prefix},n.createElement(l.J,{name:"folder"})):void 0,n.createElement("button",{type:"button",className:(0,o.cx)(ue.fakeInput,re?ue.hasPrefix:void 0),...fe,ref:ie},se?n.createElement(C.Z,{width:100}):re?n.createElement(T.x,{truncate:!0},re):n.createElement(T.x,{truncate:!0,color:"secondary"},n.createElement(d.cC,{i18nKey:"browse-dashboards.folder-picker.button-label"},"Select folder"))),n.createElement("div",{className:ue.suffix},n.createElement(l.J,{name:"angle-down"}))))}const _=(0,n.forwardRef)(V),H=(se,de=!1)=>{const re=(0,u.H)({theme:se,invalid:de});return{wrapper:re.wrapper,inputWrapper:re.inputWrapper,prefix:(0,o.css)([re.prefix,{pointerEvents:"none",color:se.colors.text.primary}]),suffix:(0,o.css)([re.suffix,{pointerEvents:"none"}]),fakeInput:(0,o.css)([re.input,{textAlign:"left",letterSpacing:"normal","&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":(0,o.css)`
          ${(0,j.focusCss)(se)}
        `}]),hasPrefix:(0,o.css)({paddingLeft:28})}};function z({tree:se,handleCloseOverlay:de,handleFolderSelect:re,handleFolderExpand:fe,idPrefix:ie,search:oe,visible:ue}){const[me,ge]=(0,n.useState)(-1);(0,n.useEffect)(()=>{ue&&ge(-1)},[ue]),(0,n.useEffect)(()=>{ge(0)},[oe]),(0,n.useEffect)(()=>{document.getElementById(L(ie,se[me]?.item.uid))?.scrollIntoView({block:"nearest",inline:"nearest"})},[me,ie,se]);const Ue=(0,n.useCallback)(De=>{const Pe=!oe;switch(De.key){case"ArrowRight":case"ArrowLeft":Pe&&(De.preventDefault(),fe(se[me].item.uid,De.key==="ArrowRight"));break;case"ArrowUp":me>0&&(De.preventDefault(),ge(me-1));break;case"ArrowDown":me<se.length-1&&(De.preventDefault(),ge(me+1));break;case"Enter":De.preventDefault();const ye=se[me].item;ye.kind==="folder"&&re(ye);break;case"Tab":De.stopPropagation(),de();break;case"Escape":De.stopPropagation(),De.preventDefault(),de();break}},[me,de,fe,re,oe,se]);return{focusedItemIndex:me,handleKeyDown:Ue}}const K=["empty-folder","dashboard"];function Y({value:se,invalid:de,showRootFolder:re=!0,excludeUIDs:fe,onChange:ie}){const oe=(0,g.wW)(k),ue=(0,y.I0)(),me=(0,f.t4)(se||f.CN),ge=(0,v.zw)(void 0),[Ue,De]=(0,n.useState)(""),[Pe,ye]=(0,n.useState)(!1),[Te,nt]=(0,n.useState)(!1),[ct,he]=(0,n.useState)({}),xe=(0,n.useId)(),[Me]=(0,n.useState)(void 0),He=(0,i.Z)(async()=>{if(!Ue)return;const ze=await(0,p.getGrafanaSearcher)().search({query:Ue,kind:["folder"],limit:100}),Fe=ze.view.map($e=>(0,s.f9)($e,ze.view));return{...ze,items:Fe}},[Ue]),Ve=(0,y.v9)(v.hO),Oe=(0,y.v9)(v.MH),{getTooltipProps:Ne,setTooltipRef:_e,setTriggerRef:qe,visible:rt,triggerRef:mt}=(0,r.O)({visible:Te,placement:"bottom",interactive:!0,offset:[0,0],trigger:"click",onVisibleChange:Le=>{Le&&(De(""),ye(!0)),nt(Le)}}),Je=(0,n.useCallback)(async(Le,ze)=>{he(Fe=>({...Fe,[Le]:ze})),ze&&!ct[Le]&&ue((0,v.si)({parentUID:Le,pageSize:E.IV,excludeKinds:K}))},[ue,ct]),Ae=(0,n.useCallback)(Le=>{ie&&ie(Le.uid,Le.title),nt(!1)},[ie]),Ke=(0,n.useCallback)(()=>nt(!1),[nt]),Xe=(0,v.D$)(K),ne=(0,n.useCallback)(Le=>{Ue||Xe(Le)},[Ue,Xe]),Z=(0,n.useMemo)(()=>{const Le=Ue&&He.value;if(Le){const Fe={isFullyLoaded:!0,lastKindHasMoreItems:!1,lastFetchedKind:"folder",lastFetchedPage:1,items:Le.items??[]};return(0,v.qO)(void 0,Fe,Oe,{},0,K,fe)}let ze=(0,v.qO)(void 0,Ve,Oe,ct,0,K,fe);if(re){for(const Fe of ze)Fe.level+=1;ze.unshift({isOpen:!0,level:0,item:{kind:"folder",title:"Dashboards",uid:""}})}return Ve||(ze=ze.concat((0,h.k)(E.IV,void 0,0))),ze},[Ue,He.value,Ve,Oe,ct,fe,re]),ee=(0,n.useCallback)(Le=>{const ze=Z[Le];if(!ze)return!1;const Fe=ze.item;return!(Fe.kind==="ui"&&Fe.uiKind==="pagination-placeholder")},[Z]),ce=ge==="pending"||He.loading,{focusedItemIndex:be,handleKeyDown:Ee}=z({tree:Z,handleCloseOverlay:Ke,handleFolderSelect:Ae,handleFolderExpand:Je,idPrefix:xe,search:Ue,visible:rt});let Be=me.data?.title;return se===""&&(Be="Dashboards"),rt?n.createElement(n.Fragment,null,n.createElement(u.I,{ref:qe,autoFocus:!0,prefix:Be?n.createElement(l.J,{name:"folder"}):null,placeholder:Be??(0,d.t)("browse-dashboards.folder-picker.search-placeholder","Search folders"),value:Ue,invalid:de,className:oe.search,onKeyDown:Ee,onChange:Le=>De(Le.currentTarget.value),"aria-autocomplete":"list","aria-expanded":!0,"aria-haspopup":!0,"aria-controls":xe,"aria-owns":xe,"aria-activedescendant":L(xe,Z[be]?.item.uid),role:"combobox",suffix:n.createElement(l.J,{name:"search"})}),n.createElement("fieldset",{ref:_e,id:xe,...Ne({className:oe.tableWrapper,style:{width:mt?.clientWidth}})},Me?n.createElement(m.b,{className:oe.error,severity:"warning",title:(0,d.t)("browse-dashboards.folder-picker.error-title","Error loading folders")},Me.message||Me.toString?.()||(0,d.t)("browse-dashboards.folder-picker.unknown-error","Unknown error")):n.createElement("div",null,ce&&n.createElement("div",{className:oe.loader},n.createElement(c.F,{width:600})),n.createElement(P,{items:Z,selectedFolder:se,focusedItemIndex:be,onFolderExpand:Je,onFolderSelect:Ae,idPrefix:xe,foldersAreOpenable:!(Ue&&He.value),isItemLoaded:ee,requestLoadMore:ne})))):n.createElement(_,{label:Be,invalid:de,isLoading:me.isLoading,autoFocus:Pe,ref:qe,"aria-label":Be?(0,d.t)("browse-dashboards.folder-picker.accessible-label","Select folder: {{ label }} currently selected",{label:Be}):void 0})}const k=se=>({button:(0,o.css)({maxWidth:"100%"}),error:(0,o.css)({marginBottom:0}),tableWrapper:(0,o.css)({boxShadow:se.shadows.z3,position:"relative",zIndex:se.zIndex.portal}),loader:(0,o.css)({position:"absolute",top:0,left:0,right:0,zIndex:se.zIndex.portal+1,overflow:"hidden"}),search:(0,o.css)({input:{cursor:"default"}})});var q=e(9561);function X(se){const de=a.config.featureToggles.nestedFolders&&a.config.featureToggles.nestedFolderPicker,{initialTitle:re,dashboardId:fe,enableCreateNew:ie,...oe}=se;return de?n.createElement(Y,{...oe}):n.createElement(te,{...se})}function te({value:se,showRootFolder:de,onChange:re,initialTitle:fe,dashboardId:ie,enableCreateNew:oe,inputId:ue,skipInitialLoad:me}){const ge=(0,n.useCallback)(Ue=>{re&&re(Ue.uid,Ue.title)},[re]);return n.createElement(q.Fz,{onChange:ge,showRoot:de,initialFolderUid:se,initialTitle:fe,inputId:ue,skipInitialLoad:me,dashboardId:ie,enableCreateNew:oe})}},9561:(G,A,e)=>{"use strict";e.d(A,{Fz:()=>C});var n=e(66681),a=e(97812),o=e.n(a),r=e(85960),i=e(81445),g=e(47475),u=e(92369),l=e(43183),m=e(47257),c=e(24956),d=e(27436),f=e(60484),E=e(95329),v=e(41879),h=e(32737),p=e(95162);const s="+ Add new",y="-10";function C(M){const{dashboardId:T,allowEmpty:R,onChange:O,filter:x,enableCreateNew:I,inputId:L,onClear:P,enableReset:N,initialFolderUid:F,initialTitle:U="",permissionLevel:j=p.PermissionLevelString.Edit,rootName:V,showRoot:_=!0,skipInitialLoad:H,searchQueryType:z,customAdd:K,folderWarning:Y}=M,k=V??"Dashboards",[q,X]=(0,r.useState)(null),[te,se]=(0,r.useState)(!1),[de,re]=(0,r.useState)(""),[fe,ie]=(0,r.useState)(q?.title??""),oe=(0,m.wW)(D),ue=typeof P=="function",me=(0,r.useCallback)(async Me=>{const He=await(0,h.ZL)(Me,j,z),Oe=b(He,x);return(0,l.ff)("grafana_folder_picker_results_loaded",{results:Oe.length,searchTermLength:Me.length,enableCreateNew:!!I}),(v.contextSrv.hasPermission(p.AccessControlAction.DashboardsWrite)||v.contextSrv.hasPermission(p.AccessControlAction.DashboardsCreate))&&k?.toLowerCase().startsWith(Me.toLowerCase())&&_&&Oe.unshift({label:k,value:""}),N&&Me===""&&U!==""&&!Oe.find(_e=>_e.label===U)&&Oe.unshift({label:U,value:F}),I&&K?[...Oe,{value:y,label:s,title:Me}]:Oe},[N,F,U,j,k,_,z,x,I,K]),ge=(0,r.useMemo)(()=>o()(me,300,{leading:!0}),[me]),Ue=async()=>{const Me={label:U,value:void 0},He={label:k,value:""},Ve=await me("");let Oe=null;F!=null?Oe=Ve.find(Ne=>Ne.value===F)||null:N&&U?Oe=Me:F&&(Oe=Ve.find(Ne=>Ne.id===F)||null),!Oe&&!R&&(v.contextSrv.isEditor?Oe=He:!!T?Oe=Me:Oe=Ve.length>0?Ve[0]:Me),!te&&X(Oe)};(0,r.useEffect)(()=>{q&&q.value!==F&&!te&&q.value&&q.label&&O({uid:q.value,title:q.label})},[q,F]),(0,i.Z)(async()=>{if(H){const Me=await S({getFolder:h.Pb,folderUid:F,folderName:U});X(Me)}await Ue()},[H,F,U]),(0,r.useEffect)(()=>{q&&q.id===y&&se(!0)},[q]);const De=(0,r.useCallback)((Me,He)=>{if(Me?.value===y)X({id:y,title:de}),ie(de);else{if(Me||(Me={value:"",label:k}),He.action==="clear"&&P){P();return}X(Me),O({uid:Me.value,title:Me.label})}},[O,P,k,de]),Pe=(0,r.useCallback)(async Me=>{if(Y?.warningCondition(Me))return(0,l.ff)("grafana_folder_picker_folder_created",{status:"failed_condition"}),!1;const He=await(0,h.L6)({title:Me});let Ve={value:"",label:"Not created"};return He.uid?((0,l.ff)("grafana_folder_picker_folder_created",{status:"success"}),f.Z.emit(g.SI.alertSuccess,["Folder Created","OK"]),Ve={value:He.uid,label:He.title},X(He),De(Ve,{action:"create-option",option:Ve})):((0,l.ff)("grafana_folder_picker_folder_created",{status:"failed"}),f.Z.emit(g.SI.alertError,["Folder could not be created"])),Ve},[Y,De]),ye=(0,r.useCallback)(Me=>{const He=!!K?.disallowValues;if(Me.key==="Enter"&&He&&!K?.isAllowedValue(fe)){Me.preventDefault();return}switch(Me.key){case"Enter":{Pe(q?.title),se(!1);break}case"Escape":X({value:"",label:k}),se(!1)}},[K?.disallowValues,K?.isAllowedValue,fe,Pe,q?.title,k]),Te=Me=>{const He=Me.currentTarget.value;ie(He),X({id:void 0,title:He})},nt=()=>{X({value:"",label:k}),se(!1)},ct=(Me,{action:He})=>{He==="input-change"&&re(Ve=>Me),He==="menu-close"&&re(Ve=>Me)},he=()=>Y?.warningCondition(fe)?r.createElement(Y.warningComponent,null):null,xe=()=>Y?.warningCondition(de)?r.createElement(Y.warningComponent,null):null;return te?r.createElement(r.Fragment,null,r.createElement(he,null),r.createElement("div",{className:oe.newFolder},"Press enter to create the new folder."),r.createElement(c.I,{width:30,autoFocus:!0,value:fe,onChange:Te,onKeyDown:ye,placeholder:"Press enter to confirm new folder.",onBlur:nt})):r.createElement("div",{"data-testid":u.wl.components.FolderPicker.containerV2},r.createElement(xe,null),r.createElement(d.gY,{inputId:L,"aria-label":u.wl.components.FolderPicker.input,loadingMessage:(0,E.t)("folder-picker.loading","Loading folders..."),defaultOptions:!0,defaultValue:q,inputValue:de,onInputChange:ct,value:q,allowCustomValue:I&&!K,loadOptions:ge,onChange:De,onCreateOption:Pe,isClearable:ue}))}function b(M,T){return(T?T(M):M).map(O=>({label:O.title,value:O.uid}))}async function S({folderName:M,folderUid:T,getFolder:R}){if(T==null)throw new Error("folderUid is not found.");return M?{label:M,value:T}:{label:(await R(T)).title,value:T}}const D=M=>({newFolder:(0,n.css)`
    color: ${M.colors.warning.main};
    font-size: ${M.typography.bodySmall.fontSize};
    padding-bottom: ${M.spacing(1)};
  `})},35511:(G,A,e)=>{"use strict";e.d(A,{e:()=>r});var n=e(85960),a=e(97096),o=e(97666);class r extends n.Component{constructor(g){super(g)}render(){const{label:g,removeIcon:u,count:l,onClick:m}=this.props,{color:c}=(0,a.Bx)(g),d={backgroundColor:c},f=l!==0&&n.createElement("span",{className:"tag-count-label"},`(${l})`);return n.createElement("span",{className:"label label-tag",style:d},u&&n.createElement(o.J,{onClick:m,name:"times"}),g," ",f)}}},82894:(G,A,e)=>{"use strict";e.d(A,{D:()=>E});var n=e(66681),a=e(85960),o=e(16693),r=e(49531),i=e(47257),g=e(27436),u=e(97666),l=e(95329),m=e(35511);const c=({data:h,className:p,label:s,isFocused:y,innerProps:C})=>{const b=(0,i.wW)(d);return a.createElement("div",{className:(0,n.cx)(b.option,y&&b.optionFocused),"aria-label":"Tag option",...C},a.createElement("div",{className:`tag-filter-option ${p||""}`},typeof s=="string"?a.createElement(m.e,{label:s,removeIcon:!1,count:h.count??0}):s))},d=h=>({option:(0,n.css)`
      padding: 8px;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;
      &:hover {
        background: ${h.colors.background.secondary};
      }
    `,optionFocused:(0,n.css)`
      background: ${h.colors.background.secondary};
      border-style: solid;
      border-top: 0;
      border-right: 0;
      border-bottom: 0;
      border-left-width: 2px;
    `}),f=(h,p)=>RegExp((0,r.GE)(p),"i").test(h.value),E=({allowCustomValue:h=!1,formatCreateLabel:p,hideValues:s,inputId:y,isClearable:C,onChange:b,placeholder:S,tagOptions:D,tags:M,width:T})=>{const R=(0,i.wW)(v),O=M.map(Y=>({value:Y,label:Y,count:0})),[x,I]=(0,a.useState)(O),[L,P]=(0,a.useState)(!1),[N,F]=(0,a.useState)(M),[U,j]=(0,a.useState)(O),V=(0,a.useMemo)(()=>M.join(),[M]),_=(0,a.useCallback)(async()=>(await D()).map(k=>M.includes(k.term)?{value:k.term,label:k.term,count:0}:{value:k.term,label:k.term,count:k.count}),[D,M]),H=(0,a.useCallback)(async()=>{P(!0);const Y=await _();h&&U.forEach(k=>Y.push(k)),I(Y),P(!1)},[h,U,_]);(0,a.useEffect)(()=>{M.length>0&&x.length===0&&H()},[H,x.length,M.length]),(0,a.useEffect)(()=>{M!==N&&(F(M),H())},[H,N,M]);const z=Y=>{Y.forEach(k=>k.count=0),b((Y||[]).map(k=>k.value)),h&&j(Y.filter(k=>!M.includes(k)))},K={key:V,onFocus:H,isLoading:L,options:x,allowCreateWhileLoading:!0,allowCustomValue:h,formatCreateLabel:p,defaultOptions:!0,filterOption:f,getOptionLabel:Y=>Y.label,getOptionValue:Y=>Y.value,inputId:y,isMulti:!0,onChange:z,loadingMessage:(0,l.t)("tag-filter.loading","Loading..."),noOptionsMessage:(0,l.t)("tag-filter.no-tags","No tags found"),placeholder:S||(0,l.t)("tag-filter.placeholder","Filter by tag"),value:O,width:T,components:{Option:c,MultiValueLabel:()=>null,MultiValueRemove(Y){const{data:k}=Y;return a.createElement(o.c.MultiValueRemove,{...Y},a.createElement(m.e,{key:k.label,label:k.label,removeIcon:!0,count:k.count}))},MultiValueContainer:s?()=>null:o.c.MultiValueContainer}};return a.createElement("div",{className:R.tagFilter},C&&M.length>0&&a.createElement("button",{className:R.clear,onClick:()=>z([])},"Clear tags"),a.createElement(g.NU,{...K,prefix:a.createElement(u.J,{name:"tag-alt"}),"aria-label":"Tag filter"}))};E.displayName="TagFilter";const v=h=>({tagFilter:(0,n.css)`
    position: relative;
    min-width: 180px;
    flex-grow: 1;

    .label-tag {
      margin-left: 6px;
      cursor: pointer;
    }
  `,clear:(0,n.css)`
    background: none;
    border: none;
    text-decoration: underline;
    font-size: 12px;
    padding: none;
    position: absolute;
    top: -17px;
    right: 0;
    cursor: pointer;
    color: ${h.colors.text.secondary};

    &:hover {
      color: ${h.colors.text.primary};
    }
  `})},38483:(G,A,e)=>{"use strict";e.d(A,{a:()=>m});var n=e(56375),a=e.n(n),o=e(85960),r=e(71244),i=e(85745),g=e(56399),u=e(52248);const l="grafana.dashboard.timepicker.history",m=h=>o.createElement(u.G,{storageKey:l,defaultValue:[]},(p,s)=>{const y=d(p),C=c(y);return o.createElement(g.Xc,{...h,history:C,onChange:b=>{f(b,y,s),h.onChange(b)}})});function c(h){return h.map(p=>r.convertRawToRange(p,"utc",void 0,"YYYY-MM-DD HH:mm:ss"))}function d(h){return h.map(p=>{const s=typeof p.from=="string"?p.from:p.from.toISOString(),y=typeof p.to=="string"?p.to:p.to.toISOString();return{from:s,to:y}})}function f(h,p,s){if(!E(h))return;const y={from:typeof h.raw.from=="string"?h.raw.from:h.raw.from.toISOString(),to:typeof h.raw.to=="string"?h.raw.to:h.raw.to.toISOString()},C=v([y,...p]);s(C)}function E(h){return(0,i.v9)(h.raw.from)||(0,i.v9)(h.raw.to)}function v(h){return(0,n.uniqBy)(h,p=>p.from+p.to).slice(0,4)}},99532:(G,A,e)=>{"use strict";e.d(A,{K:()=>c});var n=e(85960),a=e(14345),o=e(58309),r=e(29627),i=e(33012),g=e(76738),u=e(74210),l=e(7012);const m=["rowHeight","colWidth","showValue","mergeValues","alignValue","tooltip"];class c extends n.Component{constructor(){super(...arguments),this.getValueColor=(f,E,v)=>{const h=this.props.frames[f].fields[E];if(h.display){const p=h.display(v);if(p.color)return p.color}return a.R},this.prepConfig=(f,E,v)=>{this.panelContext=this.context;const{eventBus:h,sync:p}=this.panelContext;return(0,l.Nj)({frame:f,getTimeRange:v,eventBus:h,sync:p,allFrames:this.props.frames,...this.props,timeZones:Array.isArray(this.props.timeZone)?this.props.timeZone:[this.props.timeZone],rowHeight:f.fields.length>2?this.props.rowHeight:1,getValueColor:this.getValueColor})},this.renderLegend=f=>{const{legend:E,legendItems:v}=this.props;return!f||!v||!E||E.showLegend===!1?null:n.createElement(r.AY.Legend,{placement:E.placement},n.createElement(i.l,{placement:E.placement,items:v,displayMode:E.displayMode,readonly:!0}))}}render(){return n.createElement(u.d,{...this.props,fields:{x:f=>f.type===o.fS.time,y:f=>f.type===o.fS.number||f.type===o.fS.boolean||f.type===o.fS.string||f.type===o.fS.enum},prepConfig:this.prepConfig,propsToDiff:m,renderLegend:this.renderLegend})}}c.contextType=g.bb},7012:(G,A,e)=>{"use strict";e.d(A,{KN:()=>N,iK:()=>te,Y:()=>se,$m:()=>q,Ur:()=>Y,Nj:()=>j,AR:()=>K,SA:()=>k});var n=e(14345),a=e(94372),o=e(1930),r=e(62610),i=e(43471),g=e(58309),u=e(37634),l=e(72211),m=e(76784),c=e(85334),d=e(84231),f=e(44558),E=e(91470),v=e(1713),h=e(65277),p=e(18288),s=e(79474),y=e(56871),C=e(30887),b=e(31639),S=e(36148);const{round:D,min:M,ceil:T}=Math,R=2;let O=6;const x=b.Gj;function I(de,re,fe,ie,oe){(0,b.Qm)(fe,de,x,re,(ue,me,ge)=>{let Ue=ie*me,De=ie*ge;oe(ue,Ue,De)})}function L(de){const{mode:re,numSeries:fe,isDiscrete:ie,hasMappedNull:oe,rowHeight:ue=0,colWidth:me=0,showValue:ge,mergeValues:Ue=!1,theme:De,label:Pe,formatValue:ye,alignValue:Te="left",getTimeRange:nt,getValueColor:ct,getFieldConfig:he,onHover:xe,onLeave:Me}=de;let He,Ve;const Oe=et=>{Ve=Array(fe).fill(null).map(tt=>Array(et).fill(null))},Ne=`500 ${Math.round(12*devicePixelRatio)}px ${De.typography.fontFamily}`,_e=Array(fe).fill(null);let qe=null;const rt=[me,1/0],mt=1-rt[0],Je=(rt[1]??1/0)*y.Z.pxRatio,Ae=new Map,Ke=new Map;function Xe(et){Ae.forEach((tt,it)=>{et.fillStyle=it,et.fill(tt)}),Ke.forEach((tt,it)=>{et.strokeStyle=it,et.stroke(tt)}),Ae.clear(),Ke.clear()}function ne(et,tt,it,vt,yt,Wt,ut,pt,we,lt,Bt,Kt,It){if(ut<1)return;const Zt=ct(lt+1,Kt),yn=he(lt),xn=P(yn,Zt);if(Ve[lt][Bt]={x:D(yt-it),y:D(Wt-vt),w:ut,h:pt,sidx:lt+1,didx:Bt,fillColor:xn},It){let An=xn,qt=Ae.get(An);if(qt==null&&Ae.set(An,qt=new Path2D),tt(qt,yt,Wt,ut,pt),we){let On=Zt,wn=Ke.get(On);wn==null&&Ke.set(On,wn=new Path2D),tt(wn,yt+we/2,Wt+we/2,ut-we,pt-we)}}else et.beginPath(),tt(et,yt,Wt,ut,pt),et.fillStyle=xn,et.fill(),we&&(et.beginPath(),tt(et,yt+we/2,Wt+we/2,ut-we,pt-we),et.strokeStyle=Zt,et.lineWidth=we,et.stroke())}const Z=(et,tt,it,vt)=>(y.Z.orient(et,tt,(yt,Wt,ut,pt,we,lt,Bt,Kt,It,Zt,yn,xn,An,qt)=>{let On=D((yt.width||0)*y.Z.pxRatio),wn=ie(tt),Zn=wn&&oe(tt);et.ctx.save(),qt(et.ctx,et.bbox.left,et.bbox.top,et.bbox.width,et.bbox.height),et.ctx.clip(),I(ue,tt-1,fe,yn,(Aa,Ea,Nt)=>{if(re===N.Changes)for(let en=0;en<ut.length;en++){let rn=ut[en];if(rn!=null||Zn){let un=Math.round(lt(Wt[en],pt,Zt,Kt)),on=en;for(;++on<ut.length&&(ut[on]===void 0||Ue&&ut[on]===rn););let In=on===ut.length?Kt+Zt+On:Math.round(lt(Wt[on],pt,Zt,Kt));ne(et.ctx,qt,Kt,It,un,D(It+Ea),In-un,D(Nt),On,Aa,en,rn,wn),en=on-1}}else if(re===N.Samples){let en=lt(Wt[1],pt,Zt,Kt)-lt(Wt[0],pt,Zt,Kt),rn=en*mt,un=D(M(Je,en-rn)-On),on=un/2;for(let In=it;In<=vt;In++){let Sn=ut[In];if(Sn!=null||Zn){let Ln=lt(Wt[In],pt,Zt,Kt);ne(et.ctx,qt,Kt,It,D(Ln-on),D(It+Ea),un,D(Nt),On,Aa,In,Sn,wn)}}}}),wn&&(et.ctx.lineWidth=On,Xe(et.ctx)),et.ctx.restore()}),null),ee=ye==null||ge===v.Jp.Never?!1:(et,tt,it,vt)=>(et.ctx.save(),et.ctx.rect(et.bbox.left,et.bbox.top,et.bbox.width,et.bbox.height),et.ctx.clip(),et.ctx.font=Ne,et.ctx.textAlign=re===N.Changes?Te:"center",et.ctx.textBaseline="middle",y.Z.orient(et,tt,(yt,Wt,ut,pt,we,lt,Bt,Kt,It,Zt,yn)=>{let xn=D((yt.width||0)*y.Z.pxRatio),qt=ie(tt)&&oe(tt),On=D(It+ze[tt-1]);for(let wn=0;wn<ut.length;wn++)if(ut[wn]!=null||qt){const Zn=Ve[tt-1][wn];if(!Zn||Zn.x>=Zt)continue;let Aa=Math.floor(Zn?.w/O);if(ge===v.Jp.Auto&&Aa<2)continue;let Ea=ye(tt,ut[wn]),Nt=D(Zn.x+Kt+Zn.w/2);re===N.Changes&&(Te==="left"?Nt=D(Zn.x+Kt+xn+R):Te==="right"&&(Nt=D(Zn.x+Kt+Zn.w-xn-R))),et.ctx.fillStyle=De.colors.getContrastText(Zn.fillColor,3),et.ctx.fillText(Ea.slice(0,Aa),Nt,On)}}),et.ctx.restore(),!1),ce=et=>{let tt="";for(let it=32;it<=126;it++)tt+=String.fromCharCode(it);O=Math.ceil(et.ctx.measureText(tt).width/tt.length*y.Z.pxRatio),O+=2.5,et.root.querySelectorAll(".u-cursor-pt").forEach(it=>{it.style.borderRadius="0"})},be=et=>{He=He||new S.lW(0,0,et.bbox.width,et.bbox.height),He.clear(),Oe(et.data[0].length),et.series.forEach(tt=>{tt._paths=null})};function Ee(et,tt,it){if(_e.fill(null),qe=null,!(et<0))for(let vt=0;vt<it.length;vt++){let yt=it[vt];He.get(et,yt,1,1,Wt=>{(0,S.Pn)(et,yt,Wt.x,Wt.y,Wt.x+Wt.w,Wt.y+Wt.h)&&(_e[Wt.sidx]=Wt,Math.abs(tt-yt)<=Wt.h/2&&(qe=Wt))})}}const Be=re===N.Changes,Le={x:re===N.Changes,y:!1,dataIdx:(et,tt)=>{if(tt===1){if(He.o.length===0&&He.q==null)for(const Wt of Ve)for(const ut of Wt)ut&&He.add(ut);let it=et.cursor.left*y.Z.pxRatio,vt=et.cursor.top*y.Z.pxRatio,yt=qe;Ee(it,vt,Be?ze:[vt]),qe!=null?qe!==yt&&xe(qe.sidx,qe.didx,qe):yt!=null&&Me()}return _e[tt]?.didx},points:{fill:"rgba(255,255,255,0.2)",bbox:(et,tt)=>{let it=_e[tt],vt=it!=null;return{left:vt?it.x/y.Z.pxRatio:-10,top:vt?it.y/y.Z.pxRatio:-10,width:vt?it.w/y.Z.pxRatio:0,height:vt?it.h/y.Z.pxRatio:0}}}},ze=Array(fe).fill(0),Fe=Array(fe).fill(0),$e=[0,1];return{cursor:Le,xSplits:re===N.Samples?(et,tt,it,vt,yt,Wt)=>{let ut=[],pt=et.data[0][1]-et.data[0][0],we=T(yt/pt);for(let lt=0;lt<et.data[0].length;lt+=we){let Bt=et.data[0][lt];Bt>=it&&Bt<=vt&&ut.push(Bt)}return ut}:null,xRange:et=>{const tt=nt();let it=tt.from.valueOf(),vt=tt.to.valueOf();if(re===N.Samples){let ut=(et.data[0][1]-et.data[0][0])/2;it<=et.data[0][0]&&(it=et.data[0][0]-ut);let pt=et.data[0].length-1;vt>=et.data[0][pt]&&(vt=et.data[0][pt]+ut)}return[it,vt]},ySplits:et=>(I(ue,null,fe,et.bbox.height,(tt,it,vt)=>{ze[tt]=D(it+vt/2),Fe[tt]=et.posToVal(ze[tt]/y.Z.pxRatio,p.j)}),Fe),yValues:(et,tt)=>tt.map((it,vt)=>Pe(vt+1)),yRange:$e,drawPaths:Z,drawPoints:ee,init:ce,drawClear:be}}function P(de,re){if(re[0]==="#"&&re.length===9)return re;const fe=(de.fillOpacity??100)/100;return(0,C.alpha)(re,fe)}var N=(de=>(de.Changes="changes",de.Samples="samples",de))(N||{});const F={lineWidth:0,fillOpacity:80};function U(de){return de.ctrlKey||de.metaKey||de.shiftKey?SeriesVisibilityChangeMode.AppendToSelection:SeriesVisibilityChangeMode.ToggleSelection}const j=({frame:de,theme:re,timeZones:fe,getTimeRange:ie,mode:oe,eventBus:ue,sync:me,rowHeight:ge,colWidth:Ue,showValue:De,alignValue:Pe,mergeValues:ye,getValueColor:Te,eventsScope:nt="__global_"})=>{const ct=new h.U(fe[0]),he="time",xe="x",Me=Ke=>{const Xe=Ke.config?.color?.mode;return!(Xe&&Ke.display&&Xe.startsWith("continuous-"))},He=Ke=>Ke.config.mappings?.some(Xe=>Xe.type===E.Hi.SpecialValue&&Xe.options.match==="null")||!1,Ve=(Ke,Xe)=>{const ne=de.fields[Ke];return ne.state?.origin?.fieldIndex!==void 0&&ne.state?.origin?.frameIndex!==void 0&&Te?Te(ne.state?.origin?.frameIndex,ne.state?.origin?.fieldIndex,Xe):n.R},Oe={mode:oe,numSeries:de.fields.length-1,isDiscrete:Ke=>Me(de.fields[Ke]),hasMappedNull:Ke=>He(de.fields[Ke]),mergeValues:ye,rowHeight:ge,colWidth:Ue,showValue:De,alignValue:Pe,theme:re,label:Ke=>(0,a.CZ)(de.fields[Ke],de),getFieldConfig:Ke=>de.fields[Ke].config.custom,getValueColor:Ve,getTimeRange:ie,formatValue:(Ke,Xe)=>(0,o.zc)(de.fields[Ke].display(Xe)),onHover:(Ke,Xe)=>{_e=Ke,qe=Xe,Ne=!0},onLeave:()=>{_e=null,qe=null,Ne=!0}};let Ne=!1,_e=null,qe=null;const rt=L(Oe),mt={point:{[he]:null,[p.j]:null},data:de};ct.addHook("init",rt.init),ct.addHook("drawClear",rt.drawClear);const Je=(Ke,Xe,ne)=>{Ne&&(_e!=null&&(Ke(_e),Xe(qe)),Ne=!1),ne(_e==null)};ct.setTooltipInterpolator(Je),ct.setPrepData(Ke=>(0,s.Bj)(Ke[0],(0,s.i7)(Ke[0]))),ct.setCursor(rt.cursor),ct.addScale({scaleKey:xe,isTime:!0,orientation:v.wN.Horizontal,direction:v.bQ.Right,range:rt.xRange}),ct.addScale({scaleKey:p.j,isTime:!1,orientation:v.wN.Vertical,direction:v.bQ.Up,range:rt.yRange}),ct.addAxis({scaleKey:xe,isTime:!0,splits:rt.xSplits,placement:v.LB.Bottom,timeZone:fe[0],theme:re,grid:{show:!0}}),ct.addAxis({scaleKey:p.j,isTime:!1,placement:v.LB.Left,splits:rt.ySplits,values:rt.yValues,grid:{show:!1},ticks:{show:!1},gap:16,theme:re});let Ae=0;for(let Ke=0;Ke<de.fields.length;Ke++){if(Ke===0)continue;const Xe=de.fields[Ke],ne=Xe.config,Z={...F,...ne.custom};Xe.state.seriesIndex=Ae++,ct.addSeries({scaleKey:p.j,pathBuilder:rt.drawPaths,pointsBuilder:rt.drawPoints,lineWidth:Z.lineWidth,fillOpacity:Z.fillOpacity,theme:re,show:!Z.hideFrom?.viz,thresholds:ne.thresholds,dataFrameFieldIndex:Xe.state?.origin})}if(me&&me()!==r.m.Off){let Ke={};Ke.sync={key:nt,filters:{pub:(Xe,ne,Z,ee,ce,be,Ee)=>me&&me()===r.m.Off?!1:(mt.rowIndex=Ee,Z<0&&ee<0?(mt.point[he]=null,mt.point[p.j]=null,ue.publish(new i.xH)):(mt.point[he]=ne.posToVal(Z,xe),mt.point.panelRelY=ee>0?ee/be:1,mt.down=void 0,ue.publish(new i.es(mt))),!0)},scales:[xe,null]},ct.setSync(),ct.setCursor(Ke)}return ct};function V(de){const re=new Map;for(let fe=0;fe<de.fields.length;fe++)re.set(getFieldDisplayName(de.fields[fe],de),fe);return re}function _(de){let re=de[0],fe;for(let ie=1;ie<de.length;ie++){let oe=de[ie];oe===null?re=null:oe===re?(fe||(fe=[...de]),fe[ie]=void 0):oe!=null&&(re=oe)}return fe}function H(de){let re=de.config.custom?.spanNulls;return re?re===!0?1/0:re:-1}function z(de,re){const fe=de.config.thresholds;if(de.type!==g.fS.number||!fe||!fe.steps.length)return;const ie=Y(de.config,re);if(ie.length!==fe.steps.length)return;const oe=new Map,ue=new Map;for(let Ue=0;Ue<ie.length;Ue++)oe.set(fe.steps[Ue],ie[Ue].label),ue.set(ie[Ue].label,ie[Ue].color);let me=de.values;const ge=new Array(de.values.length);if(fe.mode===u.H.Percentage){const{min:Ue,max:De}=(0,l.xD)(de),Pe=De-Ue;me=me.map(ye=>ye==null?ye:(ye-Ue)/Pe*100)}for(let Ue=0;Ue<ge.length;Ue++){const De=me[Ue];De==null?ge[Ue]=De:ge[Ue]=oe.get((0,m.m1)(De,fe.steps))}return{...de,config:{...de.config,custom:{...de.config.custom,spanNulls:H(de)}},type:g.fS.string,values:ge,display:Ue=>({text:String(Ue),color:ue.get(String(Ue)),numeric:NaN})}}function K(de,re,fe,ie){if(!de?.length)return{warn:"No data in response"};let oe=!1;const ue=[];for(let me of de){let ge=!1,Ue=!1,De=(0,c.Y3)(me,me.fields.findIndex(Te=>Te.type===g.fS.time)),Pe=(0,d.w)({frame:De,refFieldPseudoMin:fe.from.valueOf(),refFieldPseudoMax:fe.to.valueOf()});Pe!==me&&(Ue=!0);const ye=[];for(let Te of(0,f.I)(Pe).fields)if(!Te.config.custom?.hideFrom?.viz)switch(Te.type){case g.fS.time:ge=!0,oe=!0,ye.push(Te);break;case g.fS.enum:case g.fS.number:if(re&&Te.config.color?.mode===n.S.Thresholds){const nt=z(Te,ie);if(nt){ye.push(nt),Ue=!0;continue}}case g.fS.boolean:case g.fS.string:Te={...Te,config:{...Te.config,custom:{...Te.config.custom,spanNulls:H(Te)}}},ye.push(Te);break;default:Ue=!0}ge&&ye.length>1&&(oe=!0,Ue?ue.push({...De,fields:ye}):ue.push(De))}return oe?ue.length?{frames:ue}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}function Y(de,re){const fe=[],ie=de.thresholds;if(!ie||!ie.steps.length)return fe;const oe=ie.steps,ue=(0,o.Cf)(ie.mode===u.H.Percentage?"percent":de.unit??""),me=ge=>(0,o.zc)(ue(ge,de.decimals??void 0));for(let ge=0;ge<oe.length;ge++){let Ue=oe[ge],De=Ue.value,Pe="",ye="";De===-1/0&&ge<oe.length-1?(De=oe[ge+1].value,Pe="< "):ye="+",fe.push({label:`${Pe}${me(De)}${ye}`,color:re.visualization.getColorByName(Ue.color),yAxis:1})}return fe}function k(de,re,fe){if(!(!de||re.showLegend===!1))return q(X(de),fe)}function q(de,re){if(!de.length)return;const fe=[],ie=de[0].config,oe=ie.color?.mode??n.S.Fixed,ue=ie.thresholds;if(oe===n.S.Thresholds&&ue?.steps&&ue.steps.length>1)return Y(ie,re);if(oe.startsWith("continuous"))return;const me=new Map;return de.forEach(ge=>{ge.config.custom?.hideFrom?.legend||ge.values.forEach(Ue=>{let De=ge.display(Ue);De.color&&me.set(De.text,De.color)})}),me.forEach((ge,Ue)=>{Ue.length>0&&fe.push({label:Ue,color:re.visualization.getColorByName(ge??n.R),yAxis:1})}),fe}function X(de){const re=[];for(const fe of de)for(const ie of fe.fields)ie.type!==g.fS.time&&re.push(ie);return re}function te(de,re){let fe,ie=re+1;if(ie>=de.values.length)return null;const oe=de.values[re];for(;fe===void 0;){if(ie>=de.values.length)return null;const ue=de.values[ie];ue===void 0||ue===oe?ie++:fe=ie}return fe}function se(de){if(de<0||Number.isNaN(de))return"";let re,fe,ie,oe,ue,me,ge,Ue;return ge=Math.floor(de/1e3),me=Math.floor(ge/60),ge=ge%60,ue=Math.floor(me/60),me=me%60,oe=Math.floor(ue/24),ue=ue%24,re=Math.floor(oe/365),re>0&&(oe=oe%365),fe=Math.floor(oe/30),fe>0&&(oe=oe%30),ie=Math.floor(oe/7),ie>0&&(oe=oe%7),Ue=Math.round(de%1e3*1e3)/1e3,(re>0?re+"y "+(fe>0?fe+"mo ":"")+(ie>0?ie+"w ":"")+(oe>0?oe+"d ":""):fe>0?fe+"mo "+(ie>0?ie+"w ":"")+(oe>0?oe+"d ":""):ie>0?ie+"w "+(oe>0?oe+"d ":""):oe>0?oe+"d "+(ue>0?ue+"h ":""):ue>0?ue+"h "+(me>0?me+"m ":""):me>0?me+"m "+(ge>0?ge+"s ":""):ge>0?ge+"s "+(Ue>0?Ue+"ms ":""):Ue>0?Ue+"ms ":"0").trim()}},7734:(G,A,e)=>{"use strict";e.d(A,{a:()=>l});var n=e(66681),a=e(85960),o=e(47257),r=e(51965),i=e(114),g=e(40235);const u="none",l=({values:c,onChange:d,id:f})=>{const E=(0,o.wW)(m);return a.createElement("div",{className:E.wrapper},c.length?c.map((v,h)=>a.createElement("div",{className:E.pair,key:h},a.createElement(r.X,{id:`${f}-key-${h}`,placeholder:"Tag name",value:v.key,onChange:p=>{d(c.map((s,y)=>y===h?{...s,key:String(p)}:s))}}),a.createElement(i.W,{"aria-label":"equals",className:E.operator},"as"),a.createElement(r.X,{id:`${f}-value-${h}`,placeholder:"New name (optional)",value:v.value||"",onChange:p=>{d(c.map((s,y)=>y===h?{...s,value:String(p)}:s))}}),a.createElement(g.h,{onClick:()=>d([...c.slice(0,h),...c.slice(h+1)]),className:(0,n.cx)(E.removeTag,"query-part"),"aria-label":"Remove tag",variant:u,type:"button",icon:"times"}),h===c.length-1?a.createElement(g.h,{onClick:()=>d([...c,{key:"",value:""}]),className:"query-part","aria-label":"Add tag",type:"button",variant:u,icon:"plus"}):null)):a.createElement(g.h,{icon:"plus",onClick:()=>d([...c,{key:"",value:""}]),className:"query-part","aria-label":"Add tag",type:"button",variant:u}))},m=c=>({wrapper:(0,n.css)({display:"flex",flexDirection:"column",gap:`${c.spacing(.5)} 0`}),pair:(0,n.css)({display:"flex",justifyContent:"start",alignItems:"center"}),operator:(0,n.css)({color:c.v1.palette.orange,width:"auto"}),removeTag:(0,n.css)({marginRight:c.spacing(.5)})})},29724:(G,A,e)=>{"use strict";e.d(A,{Ny:()=>s,dw:()=>y,mH:()=>h,p1:()=>f,rr:()=>p});var n=e(66681),a=e(85960),o=e(57773),r=e(81368),i=e(84933),g=e(5999),u=e(24956),l=e(7033),m=e(40715),c=e(42177),d=e(7734);function f(C){if(C?.tracesToLogsV2)return C.tracesToLogsV2;if(!C?.tracesToLogs)return;const b={customQuery:!1};return b.datasourceUid=C.tracesToLogs.datasourceUid,b.tags=C.tracesToLogs.mapTagNamesEnabled?C.tracesToLogs.mappedTags:C.tracesToLogs.tags?.map(S=>({key:S})),b.filterByTraceID=C.tracesToLogs.filterByTraceID,b.filterBySpanID=C.tracesToLogs.filterBySpanID,b.spanStartTimeShift=C.tracesToLogs.spanStartTimeShift,b.spanEndTimeShift=C.tracesToLogs.spanEndTimeShift,b}function E({options:C,onOptionsChange:b}){const S=["loki","elasticsearch","grafana-splunk-datasource","grafana-opensearch-datasource","grafana-falconlogscale-datasource","googlecloud-logging-datasource"],D=(0,a.useMemo)(()=>f(C.jsonData)||{customQuery:!1},[C.jsonData]),{query:M="",tags:T,customQuery:R}=D,O=(0,a.useCallback)(x=>{b({...C,jsonData:{...C.jsonData,tracesToLogsV2:{...D,...x},tracesToLogs:void 0}})},[b,C,D]);return a.createElement("div",{className:(0,n.css)({width:"100%"})},a.createElement(r.Z,null,a.createElement(i._,{tooltip:"The logs data source the trace is going to navigate to",label:"Data source",labelWidth:26},a.createElement(m.q,{inputId:"trace-to-logs-data-source-picker",filter:x=>S.includes(x.type),current:D.datasourceUid,noDefault:!0,width:40,onChange:x=>O({datasourceUid:x.uid})}))),a.createElement(r.Z,null,a.createElement(c.w,{label:h("start"),tooltip:p("start","0"),value:D.spanStartTimeShift||"",onChange:x=>{O({spanStartTimeShift:x})},isInvalidError:s})),a.createElement(r.Z,null,a.createElement(c.w,{label:h("end"),tooltip:p("end","0"),value:D.spanEndTimeShift||"",onChange:x=>{O({spanEndTimeShift:x})},isInvalidError:s})),a.createElement(r.Z,null,a.createElement(i._,{tooltip:"Tags that will be used in the query. Default tags: 'cluster', 'hostname', 'namespace', 'pod', 'service.name', 'service.namespace'",label:"Tags",labelWidth:26},a.createElement(d.a,{values:T??[],onChange:x=>O({tags:x})}))),a.createElement(v,{disabled:R,type:"trace",id:"filterByTraceID",value:!!D.filterByTraceID,onChange:x=>O({filterByTraceID:x})}),a.createElement(v,{disabled:R,type:"span",id:"filterBySpanID",value:!!D.filterBySpanID,onChange:x=>O({filterBySpanID:x})}),a.createElement(r.Z,null,a.createElement(i._,{tooltip:"Use a custom query with the possibility to interpolate variables from the trace or span",label:"Use custom query",labelWidth:26},a.createElement(g.x,{id:"customQuerySwitch",value:R,onChange:x=>O({customQuery:x.currentTarget.checked})}))),R&&a.createElement(i._,{label:"Query",labelWidth:26,tooltip:"The query that will run when navigating from a trace to logs data source. Interpolate tags using the `$__tags` keyword",grow:!0},a.createElement(u.I,{label:"Query",type:"text",allowFullScreen:!0,value:M,onChange:x=>O({query:x.currentTarget.value})})))}function v(C){return a.createElement(r.Z,null,a.createElement(i._,{disabled:C.disabled,label:`Filter by ${C.type} ID`,labelWidth:26,grow:!0,tooltip:`Filters logs by ${C.type} ID`},a.createElement(g.x,{id:C.id,value:C.value,onChange:b=>C.onChange(b.currentTarget.checked)})))}const h=C=>`Span ${C} time shift`,p=(C,b)=>`Shifts the ${C} time of the span. Default: ${b} (Time units can be used here, for example: 5s, -1m, 3h)`,s="Invalid time shift. See tooltip for examples.",y=({options:C,onOptionsChange:b})=>{let S=C.type;return S+=C.type==="tempo"?"/configure-tempo-data-source/#trace-to-logs":"/#trace-to-logs",a.createElement(o.K,{title:"Trace to logs",description:a.createElement(l.W,{description:"Navigate from a trace span to the selected data source's logs.",suffix:S,feature:"trace to logs"}),isCollapsible:!0,isInitiallyOpen:!0},a.createElement(E,{options:C,onOptionsChange:b}))}},64582:(G,A,e)=>{"use strict";e.d(A,{Z:()=>i});var n=e(66681),a=e(85960),o=e(43183),r=e(47257);const i=({text:u="PRO",className:l,experimentId:m,eventVariant:c="",...d})=>{const f=(0,r.wW)(g);return(0,a.useEffect)(()=>{m&&(0,o.SZ)(m,"test",c)},[m,c]),a.createElement("span",{className:(0,n.cx)(f.badge,l),...d},u)},g=u=>({badge:(0,n.css)`
      margin-left: ${u.spacing(1.25)};
      border-radius: ${u.shape.borderRadius(5)};
      background-color: ${u.colors.success.main};
      padding: ${u.spacing(.25,.75)};
      color: white; // use the same color for both themes
      font-weight: ${u.typography.fontWeightMedium};
      font-size: ${u.typography.pxToRem(10)};
    `})},45969:(G,A,e)=>{"use strict";e.d(A,{B:()=>l});var n=e(66681),a=e(85960),o=e(47257),r=e(7288),i=e(95329),g=e(55953);const u=c=>[{category:(0,i.t)("help-modal.shortcuts-category.global","Global"),shortcuts:[{keys:["g","h"],description:(0,i.t)("help-modal.shortcuts-description.go-to-home-dashboard","Go to Home Dashboard")},{keys:["g","d"],description:(0,i.t)("help-modal.shortcuts-description.go-to-dashboards","Go to Dashboards")},{keys:["g","e"],description:(0,i.t)("help-modal.shortcuts-description.go-to-explore","Go to Explore")},{keys:["g","p"],description:(0,i.t)("help-modal.shortcuts-description.go-to-profile","Go to Profile")},{keys:[`${c} + k`],description:(0,i.t)("help-modal.shortcuts-description.open-search","Open search")},{keys:["esc"],description:(0,i.t)("help-modal.shortcuts-description.exit-edit/setting-views","Exit edit/setting views")},{keys:["h"],description:(0,i.t)("help-modal.shortcuts-description.show-all-shortcuts","Show all keyboard shortcuts")},{keys:["c","t"],description:(0,i.t)("help-modal.shortcuts-description.change-theme","Change theme")}]},{category:(0,i.t)("help-modal.shortcuts-category.dashboard","Dashboard"),shortcuts:[{keys:[`${c}+s`],description:(0,i.t)("help-modal.shortcuts-description.save-dashboard","Save dashboard")},{keys:["d","r"],description:(0,i.t)("help-modal.shortcuts-description.refresh-all-panels","Refresh all panels")},{keys:["d","s"],description:(0,i.t)("help-modal.shortcuts-description.dashboard-settings","Dashboard settings")},{keys:["d","v"],description:(0,i.t)("help-modal.shortcuts-description.toggle-active-mode","Toggle in-active / view mode")},{keys:["d","k"],description:(0,i.t)("help-modal.shortcuts-description.toggle-kiosk","Toggle kiosk mode (hides top nav)")},{keys:["d","E"],description:(0,i.t)("help-modal.shortcuts-description.expand-all-rows","Expand all rows")},{keys:["d","C"],description:(0,i.t)("help-modal.shortcuts-description.collapse-all-rows","Collapse all rows")},{keys:["d","a"],description:(0,i.t)("help-modal.shortcuts-description.toggle-auto-fit","Toggle auto fit panels (experimental feature)")},{keys:[`${c} + o`],description:(0,i.t)("help-modal.shortcuts-description.toggle-graph-crosshair","Toggle shared graph crosshair")},{keys:["d","l"],description:(0,i.t)("help-modal.shortcuts-description.toggle-all-panel-legends","Toggle all panel legends")},{keys:["d","x"],description:(0,i.t)("help-modal.shortcuts-description.toggle-exemplars","Toggle exemplars in all panel")}]},{category:(0,i.t)("help-modal.shortcuts-category.focused-panel","Focused Panel"),shortcuts:[{keys:["e"],description:(0,i.t)("help-modal.shortcuts-description.toggle-panel-edit","Toggle panel edit view")},{keys:["v"],description:(0,i.t)("help-modal.shortcuts-description.toggle-panel-fullscreen","Toggle panel fullscreen view")},{keys:["p","s"],description:(0,i.t)("help-modal.shortcuts-description.open-shared-modal","Open Panel Share Modal")},{keys:["p","d"],description:(0,i.t)("help-modal.shortcuts-description.duplicate-panel","Duplicate Panel")},{keys:["p","r"],description:(0,i.t)("help-modal.shortcuts-description.remove-panel","Remove Panel")},{keys:["p","l"],description:(0,i.t)("help-modal.shortcuts-description.toggle-panel-legend","Toggle panel legend")}]},{category:(0,i.t)("help-modal.shortcuts-category.time-range","Time Range"),shortcuts:[{keys:["t","z"],description:(0,i.t)("help-modal.shortcuts-description.zoom-out-time-range","Zoom out time range")},{keys:["t","\u2190"],description:(0,i.t)("help-modal.shortcuts-description.move-time-range-back","Move time range back")},{keys:["t","\u2192"],description:(0,i.t)("help-modal.shortcuts-description.move-time-range-forward","Move time range forward")},{keys:["t","a"],description:(0,i.t)("help-modal.shortcuts-description.make-time-range-permanent","Make time range absolute/permanent")}]}],l=({onDismiss:c})=>{const d=(0,o.wW)(m),f=(0,a.useMemo)(()=>(0,g.vl)(),[]),E=(0,a.useMemo)(()=>u(f),[f]);return a.createElement(r.u,{title:(0,i.t)("help-modal.title","Shortcuts"),isOpen:!0,onDismiss:c,onClickBackdrop:c},a.createElement("div",{className:d.categories},Object.values(E).map(({category:v,shortcuts:h},p)=>a.createElement("div",{className:d.shortcutCategory,key:p},a.createElement("table",{className:d.shortcutTable},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("th",{className:d.shortcutTableCategoryHeader,colSpan:2},v)),h.map((s,y)=>a.createElement("tr",{key:`${p}-${y}`},a.createElement("td",{className:d.shortcutTableKeys},s.keys.map((C,b)=>a.createElement("span",{className:d.shortcutTableKey,key:`${p}-${y}-${b}`},C))),a.createElement("td",{className:d.shortcutTableDescription},s.description)))))))))};function m(c){return{titleDescription:(0,n.css)`
      font-size: ${c.typography.bodySmall.fontSize};
      font-weight: ${c.typography.bodySmall.fontWeight};
      color: ${c.colors.text.disabled};
      padding-bottom: ${c.spacing(2)};
    `,categories:(0,n.css)`
      font-size: ${c.typography.bodySmall.fontSize};
      display: flex;
      flex-flow: row wrap;
      justify-content: space-between;
      align-items: flex-start;
    `,shortcutCategory:(0,n.css)`
      width: 50%;
      font-size: ${c.typography.bodySmall.fontSize};
    `,shortcutTable:(0,n.css)`
      margin-bottom: ${c.spacing(2)};
    `,shortcutTableCategoryHeader:(0,n.css)`
      font-weight: normal;
      font-size: ${c.typography.h6.fontSize};
      text-align: left;
    `,shortcutTableDescription:(0,n.css)`
      text-align: left;
      color: ${c.colors.text.disabled};
      width: 99%;
      padding: ${c.spacing(1,2)};
    `,shortcutTableKeys:(0,n.css)`
      white-space: nowrap;
      width: 1%;
      text-align: right;
      color: ${c.colors.text.primary};
    `,shortcutTableKey:(0,n.css)`
      display: inline-block;
      text-align: center;
      margin-right: ${c.spacing(.5)};
      padding: 3px 5px;
      font:
        11px Consolas,
        'Liberation Mono',
        Menlo,
        Courier,
        monospace;
      line-height: 10px;
      vertical-align: middle;
      border: solid 1px ${c.colors.border.medium};
      border-radius: ${c.shape.borderRadius(3)};
      color: ${c.colors.text.primary};
      background-color: ${c.colors.background.secondary};
    `}}},67954:(G,A,e)=>{"use strict";e.d(A,{Oh:()=>u,config:()=>a.config,default:()=>r,iE:()=>i});var n=e(73667),a=e(90857);let o=a.config;const r=o,i=()=>o,g=l=>{o={...o,...l}},u=a.config.panels?.debug?.state===n.BV.alpha},89248:(G,A,e)=>{"use strict";e.d(A,{AV:()=>l,FL:()=>E,Hk:()=>v,K3:()=>n,OA:()=>r,QO:()=>c,b0:()=>u,cz:()=>o,gN:()=>f,hD:()=>a,kh:()=>g,yM:()=>i,zF:()=>m});const n=30,a=8,o=24,r="v",i="h",g=4,u=250,l=n*3,m="panel-copy",c=2,d=23763571993,f=40,E="VisualizationSelectPane.ListMode",v="WidgetSelectPane.ListMode"},6005:(G,A,e)=>{"use strict";e.d(A,{h:()=>a,p:()=>o});var n=e(85960);const a=n.createContext(void 0);function o(){const r=(0,n.useContext)(a);if(!r)throw new Error("No GrafanaContext found");return r}},93991:(G,A,e)=>{"use strict";e.d(A,{AT:()=>m,ZR:()=>d,iG:()=>f,t_:()=>c});var n=e(85960),a=e(90308),o=e(50596),r=e(95162),i=e(88492);const g={title:"",text:"",severity:r.AppNotificationSeverity.Success,icon:"check"},u={title:"",text:"",severity:r.AppNotificationSeverity.Warning,icon:"exclamation-triangle"},l={title:"",text:"",severity:r.AppNotificationSeverity.Error,icon:"exclamation-triangle"},m=(E,v="",h)=>({...g,title:E,text:v,id:(0,a.Z)(),timestamp:Date.now(),showing:!0}),c=(E,v="",h,p)=>({...l,text:(0,o.i)(v),title:E,id:(0,a.Z)(),traceId:h,component:p,timestamp:Date.now(),showing:!0}),d=(E,v="",h)=>({...u,title:E,text:v,traceId:h,id:(0,a.Z)(),timestamp:Date.now(),showing:!0});function f(){const E=(0,r.useDispatch)();return(0,n.useMemo)(()=>({success:(v,h="")=>{E((0,i.$l)(m(v,h)))},warning:(v,h="",p)=>{E((0,i.$l)(d(v,h,p)))},error:(v,h="",p)=>{E((0,i.$l)(c(v,h,p)))}}),[E])}},49683:(G,A,e)=>{"use strict";e.d(A,{Vt:()=>o.contextSrv,Wz:()=>r.W,h$:()=>n.Z,rv:()=>a.r});var n=e(60484),a=e(63619),o=e(41879),r=e(95633)},14551:(G,A,e)=>{"use strict";e.d(A,{H6:()=>p,ZP:()=>s});var n=e(56375),a=e(20994),o=e(77784),r=e(81502);const i=O=>{const x=(0,r.F)().getInstanceSettings(O.datasourceName);return{id:O.ts.toString(),createdAt:O.ts,datasourceName:O.datasourceName,datasourceUid:x?.uid||"",starred:O.starred,comment:O.comment,queries:O.queries}},g=O=>{if(!(0,r.F)().getInstanceSettings({uid:O.datasourceUid}))throw new Error("Datasource not found.");return{ts:O.createdAt,datasourceName:O.datasourceName,starred:O.starred,comment:O.comment,queries:O.queries}};var u=e(73423);function l(O,x,I,L,P){const N=d(O,I),F=f(N,L),U=P?c(F,P):F;return E(U,x)}const m=(O,x)=>{const I=new Date,L=new Date(I.setDate(I.getDate()-O));return x?L.setHours(24,0,0,0):L.setHours(0,0,0,0)};function c(O,x){const I=m(x[0],!0),L=m(x[1],!1);return O.filter(P=>P.createdAt<I&&P.createdAt>L)}function d(O,x){return x.length>0?O.filter(I=>x.includes(I.datasourceName)):O}function f(O,x){return O.filter(I=>I.comment.includes(x)?!0:I.queries.filter(P=>Object.values((0,n.omit)(P,["datasource","key","refId","hide","queryType"])).some(N=>N?.toString().includes(x))).length>0)}const E=(O,x)=>{let I;return x===u.A.Ascending&&(I=(L,P)=>L.createdAt<P.createdAt?-1:L.createdAt>P.createdAt?1:0),x===u.A.Descending&&(I=(L,P)=>L.createdAt<P.createdAt?1:L.createdAt>P.createdAt?-1:0),x===u.A.DatasourceZA&&(I=(L,P)=>L.datasourceName<P.datasourceName?-1:L.datasourceName>P.datasourceName?1:0),x===u.A.DatasourceAZ&&(I=(L,P)=>L.datasourceName<P.datasourceName?1:L.datasourceName>P.datasourceName?-1:0),O.sort(I)},v={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",activeDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters"},h="grafana.explore.richHistory",p=1e4;class s{async getRichHistory(x){const I=S().map(i),L=x.starred?I.filter(N=>N.starred===!0):I,P=l(L,x.sortOrder,x.datasourceFilters,x.search,[x.from,x.to]);return{richHistory:P,total:P.length}}async addToRichHistory(x){const I=Date.now(),L={id:I.toString(),createdAt:I,...x},P=g(L),N=C(S()),F=P.queries.map(H=>(0,n.omit)(H,["key","refId"])),U=N.length>0&&N[0].queries.map(H=>(0,n.omit)(H,["key","refId"]));if((0,n.isEqual)(F,U)){const H=new Error("Entry already exists");throw H.name=o.j.DuplicatedEntry,H}const{queriesToKeep:j,limitExceeded:V}=b(N),_=[P,...j];try{a.Z.setObject(h,_)}catch(H){if(H instanceof Error&&H.name==="QuotaExceededError")R(o.j.StorageFull,`Saving rich history failed: ${H.message}`);else throw H}return V?{warning:{type:o.V.LimitExceeded,message:`Query history reached the limit of ${p}. Old, not-starred items have been removed.`},richHistoryQuery:L}:{richHistoryQuery:L}}async deleteAll(){a.Z.delete(h)}async deleteRichHistory(x){const I=parseInt(x,10),P=a.Z.getObject(h,[]).filter(N=>N.ts!==I);a.Z.setObject(h,P)}async updateStarred(x,I){return y(x,L=>L.starred=I)}async updateComment(x,I){return y(x,L=>L.comment=I)}async getSettings(){return{activeDatasourceOnly:a.Z.getObject(v.activeDatasourceOnly,!1),retentionPeriod:a.Z.getObject(v.retentionPeriod,7),starredTabAsFirstTab:a.Z.getBool(v.starredTabAsFirstTab,!1),lastUsedDatasourceFilters:a.Z.getObject(v.datasourceFilters,[]).map(x=>x.value)}}async updateSettings(x){a.Z.set(v.activeDatasourceOnly,x.activeDatasourceOnly),a.Z.set(v.retentionPeriod,x.retentionPeriod),a.Z.set(v.starredTabAsFirstTab,x.starredTabAsFirstTab),a.Z.setObject(v.datasourceFilters,(x.lastUsedDatasourceFilters||[]).map(I=>({value:I})))}}function y(O,x){const I=parseInt(O,10),L=a.Z.getObject(h,[]),P=(0,n.find)(L,{ts:I});if(!P)throw new Error("Rich history item not found.");return x(P),a.Z.setObject(h,L),i(P)}function C(O){const x=a.Z.getObject(v.retentionPeriod,7),I=m(x,!1);return O.filter(L=>L.ts>I||L.starred===!0)||[]}function b(O){let x=!1,I=O.length-1;for(;I>=0&&O.length>=p;)O[I].starred||(O.splice(I,1),x=!0),I--;return{queriesToKeep:O,limitExceeded:x}}function S(){const O=a.Z.getObject(h,[]);return D(O)}function D(O){return O.map(I=>{const L=I.queries.map((P,N)=>M(I,P,N));return{...I,queries:L}})}function M(O,x,I){const L="ABCDEFGHIJKLMNOPQRSTUVXYZ";return typeof x=="object"?x:T(x)?JSON.parse(x):{expr:x,refId:L[I]}}function T(O){try{JSON.parse(O)}catch{return!1}return!0}function R(O,x){const I=new Error(x);throw I.name=O,I}},77784:(G,A,e)=>{"use strict";e.d(A,{V:()=>a,j:()=>n});var n=(o=>(o.StorageFull="StorageFull",o.DuplicatedEntry="DuplicatedEntry",o))(n||{}),a=(o=>(o.LimitExceeded="LimitExceeded",o))(a||{})},78e3:(G,A,e)=>{"use strict";e.d(A,{b:()=>h,X:()=>p});var n=e(90857),a=e(49683),o=e(73423),r=e(14551),i=e(81838),g=e(85445),u=e(81502),l=e(76831);const m=s=>{const y=(0,u.F)().getInstanceSettings({uid:s.datasourceUid});return{id:s.uid,createdAt:s.createdAt*1e3,datasourceName:y?.name||"",datasourceUid:s.datasourceUid,starred:s.starred,comment:s.comment,queries:s.queries}},c=s=>({uid:s.id,createdAt:Math.floor(s.createdAt/1e3),datasourceUid:s.datasourceUid,starred:s.starred,comment:s.comment,queries:s.queries});class d{constructor(){this.preferenceService=new l.y("user")}async addToRichHistory(y){const{result:C}=await(0,g.i)().post("/api/query-history",{dataSourceUid:y.datasourceUid,queries:y.queries});return{richHistoryQuery:m(C)}}async deleteAll(){throw new Error("not supported")}async deleteRichHistory(y){(0,g.i)().delete(`/api/query-history/${y}`)}async getRichHistory(y){const C=f(y);let b="query-history-get-all";y.starred&&(b="query-history-get-starred");const D=(await(0,i.n)((0,g.i)().fetch({method:"GET",url:`/api/query-history?${C}`,requestId:b}))).data,M=(D.result.queryHistory||[]).map(m),T=D.result.totalCount||0;return{richHistory:M,total:T}}async getSettings(){return{activeDatasourceOnly:!1,lastUsedDatasourceFilters:void 0,retentionPeriod:14,starredTabAsFirstTab:(await this.preferenceService.load()).queryHistory?.homeTab==="starred"}}async updateComment(y,C){const b=await(0,g.i)().patch(`/api/query-history/${y}`,{comment:C});return m(b.result)}updateSettings(y){return this.preferenceService.patch({queryHistory:{homeTab:y.starredTabAsFirstTab?"starred":"query"}})}async updateStarred(y,C){let b;return C?b=await(0,g.i)().post(`/api/query-history/star/${y}`):b=await(0,g.i)().delete(`/api/query-history/star/${y}`),m(b.result)}}function f(s){let y=`${s.datasourceFilters.map(C=>{const b=(0,u.F)().getInstanceSettings(C).uid;return`datasourceUid=${encodeURIComponent(b)}`}).join("&")}`;if(s.search&&(y=y+`&searchString=${s.search}`),s.sortOrder&&(y=y+`&sort=${s.sortOrder===o.A.Ascending?"time-asc":"time-desc"}`),!s.starred){const C=s.from===0?"now":`now-${s.from}d`,b=s.to===0?"now":`now-${s.to}d`;y=y+`&to=${C}`,y=y+`&from=${b}`}return y=y+"&limit=100",y=y+`&page=${s.page||1}`,s.starred&&(y=y+`&onlyStarred=${s.starred}`),y}const E=new r.ZP,v=new d,h=()=>n.config.queryHistoryEnabled?v:E,p=()=>n.config.queryHistoryEnabled?{availableFilters:[o.A.Descending,o.A.Ascending],lastUsedDataSourcesAvailable:!1,clearHistory:!1,onlyActiveDataSource:!1,changeRetention:!1,queryHistoryAvailable:a.Vt.isSignedIn}:{availableFilters:[o.A.Descending,o.A.Ascending,o.A.DatasourceAZ,o.A.DatasourceZA],lastUsedDataSourcesAvailable:!0,clearHistory:!0,onlyActiveDataSource:!0,changeRetention:!0,queryHistoryAvailable:!0}},69671:(G,A,e)=>{"use strict";e.d(A,{r:()=>a});var n=e(85960);function a(o,r){const[i,g]=(0,n.useState)();return(0,n.useEffect)(()=>{const u=o.subscribe(r,g);return()=>u.unsubscribe()},[o,r]),i}},6119:(G,A,e)=>{"use strict";e.d(A,{q:()=>o});var n=e(95162),a=e(87947);const o=r=>{const i=(0,n.useSelector)(g=>g.navIndex);return(0,a.ht)(i,r)}},763:(G,A,e)=>{"use strict";e.d(A,{K:()=>r});var n=e(85960),a=e(30694),o=e(91);function r(){const{search:i}=(0,a.TH)(),g=(0,n.useMemo)(()=>(0,o.Ox)(i||""),[i]),u=(0,n.useCallback)((l,m)=>o.E1.partial(l,m),[]);return[g,u]}},9675:(G,A,e)=>{"use strict";e.d(A,{D_:()=>m,a2:()=>l});const n="en-US",a="fr-FR",o="es-ES",r="de-DE",i="zh-Hans",g="pseudo-LOCALE",u=null,l=[{code:n,name:"English",loader:()=>e.e(7424).then(e.t.bind(e,67424,19))},{code:a,name:"Fran\xE7ais",loader:()=>e.e(6419).then(e.t.bind(e,66419,19))},{code:o,name:"Espa\xF1ol",loader:()=>e.e(4253).then(e.t.bind(e,4253,19))},{code:r,name:"Deutsch",loader:()=>e.e(810).then(e.t.bind(e,90810,19))},{code:i,name:"\u4E2D\u6587\uFF08\u7B80\u4F53\uFF09",loader:()=>e.e(5001).then(e.t.bind(e,35001,19))}],m=l.map(c=>c.code)},95329:(G,A,e)=>{"use strict";e.d(A,{$q:()=>v,cC:()=>d,t:()=>E,uC:()=>m});var n=e(18863),a=e(43238),o=e(85960),r=e(15108),i=e(16568),g=e(9675);const u=h=>h.split("-")[0].toLowerCase(),l={type:"backend",init(){},async read(h,p,s){let y=g.a2.find(b=>b.code===h);if(y||(y=g.a2.find(b=>u(b.code)===u(h))),!y)return s(new Error("No message loader available for "+h),null);const C=await y.loader();s(null,C)}};function m(h){const p={partialBundledLanguages:!0,resources:{},returnEmptyString:!1};let s=n.default;if(h==="detect"){s=s.use(a.Z);const y={order:["navigator"],caches:[]};p.detection=y}else p.lng=g.D_.includes(h)?h:void 0;return s.use(l).use(r.Db).init(p)}function c(h){const p=VALID_LANGUAGES.includes(h)?h:void 0;return i18n.changeLanguage(p)}const d=h=>o.createElement(i.c,{...h}),f=n.default.t,E=(h,p,s)=>f(h,p,s),v=(h,p={})=>typeof h=="string"?v(new Date(h),p):new Intl.DateTimeFormat(n.default.language,p).format(h)},63619:(G,A,e)=>{"use strict";e.d(A,{r:()=>a});class n{constructor(){this.panelsRendered=0,this.enabled=void 0}renderingCompleted(){this.panelsRendered+=1,window.panelsRendered=this.panelsRendered}}const a=new n},12263:(G,A,e)=>{"use strict";e.d(A,{$l:()=>m,Av:()=>h,F6:()=>f,Jk:()=>E,VW:()=>v,ad:()=>c,hS:()=>d,mE:()=>y,vo:()=>C});var n=e(20079),a=e(8111),o=e(95162);const r=25,i="notifications",g=`${i}/lastRead`,u={byId:M(),lastRead:Number.parseInt(window.localStorage.getItem(g)??`${Date.now()}`,10)},l=(0,n.oM)({name:"appNotifications",initialState:u,reducers:{notifyApp:(R,{payload:O})=>{Object.values(R.byId).some(x=>b(O,x)&&x.showing)||(R.byId[O.id]=O,T(R.byId))},hideAppNotification:(R,{payload:O})=>{O in R.byId&&(R.byId[O].showing=!1,T(R.byId))},clearNotification:(R,{payload:O})=>{delete R.byId[O],T(R.byId)},clearAllNotifications:R=>{R.byId={},T(R.byId)},readAllNotifications:(R,{payload:O})=>{R.lastRead=O}}}),{notifyApp:m,hideAppNotification:c,clearNotification:d,clearAllNotifications:f,readAllNotifications:E}=l.actions,v=l.reducer,h=R=>R.lastRead,p=R=>R.byId,s=(0,a.P1)(p,R=>Object.values(R).sort((O,x)=>x.timestamp-O.timestamp)),y=(0,a.P1)(s,R=>R.filter(S)),C=(0,a.P1)(p,R=>Object.values(R).filter(O=>O.showing));function b(R,O){return R.icon===O.icon&&R.severity===O.severity&&R.text===O.text&&R.title===O.title}function S(R){return R.severity===o.AppNotificationSeverity.Warning||R.severity===o.AppNotificationSeverity.Error}function D(R){return typeof R=="object"&&R!==null&&"id"in R&&"icon"in R&&"title"in R&&"text"in R}function M(){const R=window.localStorage.getItem(i);if(!R)return{};const O=JSON.parse(R);return Object.values(O).every(x=>D(x))?O:{}}function T(R){const O=Object.values(R).filter(S).sort((x,I)=>I.timestamp-x.timestamp).slice(0,r).reduce((x,I)=>(x[I.id]={id:I.id,severity:I.severity,icon:I.icon,title:I.title,text:I.text,traceId:I.traceId,timestamp:I.timestamp,showing:!1},x),{});try{window.localStorage.setItem(i,JSON.stringify(O))}catch(x){console.error("Unable to persist notifications to local storage"),console.error(x)}}},62293:(G,A,e)=>{"use strict";e.d(A,{Lk:()=>m,OQ:()=>l,V4:()=>d,gd:()=>c});var n=e(20079),a=e(90857),o=e(98936);const r=a.config.bootData?.navTree??[];function i(f){return f.map(E=>{const v=E.children&&i(E.children);return{...E,children:v,text:(0,o.Y)(E.id)??E.text,subTitle:(0,o.L)(E.id)??E.subTitle,emptyMessage:(0,o.Y)(E.emptyMessageId)}})}const g="starred/",u=(0,n.oM)({name:"navBarTree",initialState:()=>i(a.config.bootData?.navTree??[]),reducers:{setStarred:(f,E)=>{const v=f.find(C=>C.id==="starred"),{id:h,title:p,url:s,isStarred:y}=E.payload;if(v)if(y){v.children||(v.children=[]);const C={id:g+h,text:p,url:s};v.children.push(C),v.children.sort((b,S)=>b.text.localeCompare(S.text))}else{const C=v.children?.findIndex(b=>b.id===g+h)??-1;C>-1&&v?.children?.splice(C,1)}},updateDashboardName:(f,E)=>{const{id:v,title:h,url:p}=E.payload,s=f.find(y=>y.id==="starred");if(s){const y=s.children?.find(C=>C.id===v);y&&(y.text=h,y.url=p,s.children?.sort((C,b)=>C.text.localeCompare(b.text)))}},removePluginFromNavTree:(f,E)=>{const v="plugin-page-"+E.payload.pluginID,h=f.findIndex(p=>p.id===v);h>-1&&f.splice(h,1)}}}),{setStarred:l,removePluginFromNavTree:m,updateDashboardName:c}=u.actions,d=u.reducer},24344:(G,A,e)=>{"use strict";e.d(A,{Cu:()=>u,G4:()=>v,H7:()=>f,Qz:()=>g,RL:()=>d});var n=e(20079),a=e(56375),o=e.n(a),r=e(67954),i=e(98936);const g="home";function u(){const h={},p=(0,a.cloneDeep)(r.default.bootData.navTree),s=p.find(C=>C.id===g),y=p.filter(C=>C.id!==g);return s&&l(h,[s]),l(h,y,h[g]),h}function l(h,p,s){const y=[];for(const C of p){const b={...C,text:(0,i.Y)(C.id)??C.text,subTitle:(0,i.L)(C.id)??C.subTitle,emptyMessage:(0,i.Y)(C.emptyMessageId),parentItem:s};b.id&&(h[b.id]=b),b.children&&l(h,b.children,b),y.push(b)}s&&(s.children=y),h["not-found"]={...m("Page not found","404 Error").node},h.error={...m("Page error","An unexpected error").node}}function m(h,p){const s={text:h,subTitle:p,icon:"exclamation-triangle"};return{node:s,main:s}}const c={},d=(0,n.PH)("navIndex/updateNavIndex"),f=(0,n.PH)("navIndex/updateConfigurationSubtitle"),E=(h,p)=>({...h,parentItem:{...h.parentItem,text:h.parentItem?.text??"",subTitle:p}}),v=(h=c,p)=>{if(d.match(p)){let y=function(S){if(S.children)for(const D of S.children)C[D.id]={...D,parentItem:S};S.parentItem&&y(S.parentItem)};var s=y;const C={},b=p.payload;return y(b),{...h,...C}}else if(f.match(p)){const y=`Organization: ${p.payload}`;return{...h,cfg:{...h.cfg,subTitle:y},datasources:E(h.datasources,y),correlations:E(h.correlations,y),users:E(h.users,y),teams:E(h.teams,y),plugins:E(h.plugins,y),"org-settings":E(h["org-settings"],y),apikeys:E(h.apikeys,y)}}return h}},87947:(G,A,e)=>{"use strict";e.d(A,{ht:()=>i,vw:()=>g});var n=e(84513),a=e(55539),o=e(24344);const r=()=>{const m={id:"not-found",text:"Page not found",icon:"exclamation-triangle",subTitle:"404 Error",url:"not-found"};return{node:m,main:m}},i=(0,n.Z)((m,c,d,f=!1)=>{if(m[c]){const E=m[c],v=f?E:g(E),h=u(v,c);return{node:E,main:h}}return d||r()});function g(m){return m.id===a.y3?m:m.parentItem&&m.parentItem.id!==o.Qz?g(m.parentItem):m}function u(m,c){return m.id===c?{...m,active:!0}:m.children&&m.children.length>0?{...m,children:m.children.map(d=>u(d,c))}:m}const l=m=>`${m.main.text}${m.node.text?": "+m.node.text:""}`},76831:(G,A,e)=>{"use strict";e.d(A,{y:()=>a});var n=e(46783);class a{constructor(r){this.resourceUri=r}update(r){return n.ae.put(`/api/${this.resourceUri}/preferences`,r)}patch(r){return n.ae.patch(`/api/${this.resourceUri}/preferences`,r)}load(){return n.ae.get(`/api/${this.resourceUri}/preferences`)}}},36387:(G,A,e)=>{"use strict";e.d(A,{b:()=>r});var n=e(85960),a=e(64365),o=e(87173);class r{constructor(u){this._subject=new a.x,this._state=u}useState(){return i(this)}get state(){return this._state}setState(u){this._state={...this._state,...u},this._subject.next(this._state)}subscribeToState(u){return this._subject.subscribe(u)}}function i(g){const u=(0,o.N)();return(0,n.useEffect)(()=>{const l=g.subscribeToState({next:u});return()=>l.unsubscribe()},[g,u]),g.state}},46783:(G,A,e)=>{"use strict";e.d(A,{y$:()=>xe,ae:()=>Me,i:()=>He});var n=e(69258),a=e(64365),o=e(81838),r=e(1050),i=e(34269),g=e(9360),u=e(16226),l=e(27728),m=e(98231),c=e(25066),d=e(42958),f=e(48325),E=e(85431),v=e(23136),h=e(18719),p=e(67538),s=e(87550),y=e(95135),C=e(90308),b=e(47475),S=e(41466),D=e(90857),M=e(60484),T=e(67954),R=e(42694),O=e(49766),x=e(66681),I=e(85960),L=e(47257),P=e(25142),N=e(94335),F=e(29165),U=e(37262);const j=Ve=>{const Oe=(0,L.wW)(V),Ne=(0,L.l4)(),_e=(0,U.J)(Ne),qe=!!Ve.maxConcurrentSessions,rt=()=>{window.location.reload()};return I.createElement(P.h_,null,I.createElement("div",{className:_e.modal},I.createElement(N.v,{title:"You have been automatically signed out",severity:"warning",className:Oe.infobox},I.createElement("div",{className:Oe.text},I.createElement("p",null,"Your session token was automatically revoked because you have reached",I.createElement("strong",null,` the maximum number of ${qe?Ve.maxConcurrentSessions:""} concurrent sessions `),"for your account."),I.createElement("p",null,I.createElement("strong",null,"To resume your session, sign in again."),"Contact your administrator or visit the license page to review your quota if you are repeatedly signed out automatically.")),I.createElement(F.zx,{size:"md",variant:"primary",onClick:rt},"Sign in"))),I.createElement("div",{className:(0,x.cx)(_e.modalBackdrop,Oe.backdrop)}))},V=Ve=>({infobox:(0,x.css)`
    margin-bottom: 0;
  `,text:(0,x.css)`
    margin: ${Ve.spacing(1,0,2)};
  `,backdrop:(0,x.css)`
    background-color: ${Ve.colors.background.canvas};
    opacity: 0.8;
  `});var _=e(14914),H=e(56375),z=e(20440);const K=Ve=>{const Oe=Ve.method,Ne=de(Ve),_e=re(Ne),qe=fe(Ve,_e),rt=me(Ve);return{method:Oe,headers:Ne,body:qe,credentials:rt}},Y={canParse:()=>!0,parse:Ve=>(Ve.get("accept")||Ve.set("accept","application/json, text/plain, */*"),Ve)},k=Ve=>({canParse:Oe=>(Oe?.method?Oe?.method.toLowerCase():"")===Ve,parse:Oe=>(Oe.get("content-type")||Oe.set("content-type","application/json"),Oe)}),q=k("post"),X=k("put"),te=k("patch"),se=[q,X,te,Y],de=Ve=>{const Oe=Ve?.headers?new Headers(Ve.headers):new Headers;return se.filter(qe=>qe.canParse(Ve)).reduce((qe,rt)=>rt.parse(qe),Oe)},re=Ve=>{if(!Ve)return!1;const Oe=Ve.get("content-type");return!!(Oe&&Oe.toLowerCase()==="application/json")},fe=(Ve,Oe)=>Ve&&(!Ve.data||typeof Ve.data=="string"||Ve.data instanceof Blob?Ve.data:Oe?JSON.stringify(Ve.data):new URLSearchParams(Ve.data));async function ie(Ve,Oe){if(Oe)switch(Oe){case"arraybuffer":return Ve.arrayBuffer();case"blob":return Ve.blob();case"json":return Ve.headers.get("Content-Length")==="0"?(console.warn(`${Ve.url} returned an invalid JSON`),{}):await Ve.json();case"text":return Ve.text()}const Ne=await Ve.text();try{return JSON.parse(Ne)}catch{}return Ne}function oe(Ve){return Object.keys(Ve).map(Oe=>{const Ne=Ve[Oe];return Array.isArray(Ne)?Ne.map(_e=>`${encodeURIComponent(Oe)}=${encodeURIComponent(_e)}`).join("&"):`${encodeURIComponent(Oe)}=${encodeURIComponent(Ne)}`}).join("&")}const ue=Ve=>{const Oe=(0,H.omitBy)(Ve.params,_e=>_e===void 0||_e&&_e.length===0),Ne=oe(Oe);return Ve.params&&Ne.length?`${Ve.url}?${Ne}`:Ve.url},me=Ve=>Ve&&(Ve.credentials?Ve.credentials:Ve.withCredentials?((0,z.d)("BackendSrvRequest","withCredentials","credentials"),"include"):"same-origin");var ge=e(21871),Ue=(Ve=>(Ve[Ve.Pending=0]="Pending",Ve[Ve.InProgress=1]="InProgress",Ve[Ve.Done=2]="Done",Ve))(Ue||{});class De{constructor(Oe=!1){this.state={},this.queue=new a.x,this.updates=new a.x,this.add=(Ne,_e)=>this.queue.next({id:Ne,options:_e,state:0}),this.setInProgress=Ne=>this.queue.next({id:Ne,state:1}),this.setDone=Ne=>this.queue.next({id:Ne,state:2}),this.getUpdates=()=>this.updates.asObservable(),this.getUpdate=Ne=>{const _e=Object.keys(Ne).filter(rt=>Ne[rt].state===1).length;return{noOfPending:Object.keys(Ne).filter(rt=>Ne[rt].state===0).length,noOfInProgress:_e,state:Ne}},this.publishUpdate=(Ne,_e)=>{this.printState(Ne,_e),this.updates.next(Ne)},this.printState=(Ne,_e)=>{if(!_e)return;const qe=Object.keys(Ne.state).reduce((rt,mt)=>{const Je={id:mt,state:Ne.state[mt].state};return rt.push(Je),rt},[]);console.log("FetchQueue noOfStarted",Ne.noOfInProgress),console.log("FetchQueue noOfNotStarted",Ne.noOfPending),console.log("FetchQueue state",qe)},this.queue.subscribe(Ne=>{const{id:_e,state:qe,options:rt}=Ne;if(this.state[_e]||(this.state[_e]={state:0,options:{url:""}}),qe===2){delete this.state[_e];const Je=this.getUpdate(this.state);this.publishUpdate(Je,Oe);return}this.state[_e].state=qe,rt&&(this.state[_e].options=rt);const mt=this.getUpdate(this.state);this.publishUpdate(mt,Oe)})}}var Pe=e(83286);class ye{constructor(Oe,Ne,_e){const qe=_e?.http2Enabled?1e3:5;Oe.getUpdates().pipe((0,h.h)(({noOfPending:rt})=>rt>0),(0,Pe.b)(({state:rt,noOfInProgress:mt})=>{const Je=Object.keys(rt).filter(ne=>rt[ne].state===Ue.Pending&&!(0,ge.mu)(rt[ne].options.url)).reduce((ne,Z)=>{const ee={id:Z,options:rt[Z].options};return ne.push(ee),ne},[]),Ae=Object.keys(rt).filter(ne=>rt[ne].state===Ue.Pending&&(0,ge.mu)(rt[ne].options.url)).reduce((ne,Z)=>{const ee={id:Z,options:rt[Z].options};return ne.push(ee),ne},[]),Ke=Math.max(qe-mt-Je.length,0),Xe=Ae.slice(0,Ke);return Je.concat(Xe)})).subscribe(({id:rt,options:mt})=>{Ne.add(rt,mt)})}}class Te{constructor(Oe,Ne){this.queue=new a.x,this.responses=new a.x,this.add=(_e,qe)=>{this.queue.next({id:_e,options:qe})},this.getResponses=_e=>this.responses.asObservable().pipe((0,h.h)(qe=>qe.id===_e)),this.queue.subscribe(_e=>{const{id:qe,options:rt}=_e;Oe.setInProgress(qe),this.responses.next({id:qe,observable:Ne(rt)})})}}var nt=e(41879);const ct="cancel_all_requests_request_id",he="grafana-trace-id";class xe{constructor(Oe){this.inFlightRequests=new a.x,this.HTTP_REQUEST_CANCELED=-1,this.inspectorStream=new a.x,this._tokenRotationInProgress=null,this.deviceID=null,this.dependencies={fromFetch:l.U,appEvents:M.Z,contextSrv:nt.contextSrv,logout:()=>{nt.contextSrv.setLoggedOut()}},Oe&&(this.dependencies={...this.dependencies,...Oe}),this.noBackendCache=!1,this.internalFetch=this.internalFetch.bind(this),this.fetchQueue=new De,this.responseQueue=new Te(this.fetchQueue,this.internalFetch),this.initGrafanaDeviceID(),new ye(this.fetchQueue,this.responseQueue,(0,T.iE)())}async initGrafanaDeviceID(){try{const Ne=await(await n.ZP.load()).get();this.deviceID=Ne.visitorId}catch(Oe){console.error(Oe)}}async request(Oe){return await(0,o.n)(this.fetch(Oe).pipe((0,m.U)(Ne=>Ne.data)))}fetch(Oe){const Ne=(0,C.Z)(),_e=this.fetchQueue;return new r.y(qe=>{const rt=new i.w0;return rt.add(this.responseQueue.getResponses(Ne).subscribe(mt=>{rt.add(mt.observable.subscribe(qe))})),this.fetchQueue.add(Ne,Oe),function(){_e.setDone(Ne),rt.unsubscribe()}})}internalFetch(Oe){Oe.requestId&&this.inFlightRequests.next(Oe.requestId),Oe=this.parseRequestOptions(Oe);const Ne=(0,O.v)();return Ne!==null&&Ne!==""&&D.config.jwtUrlLogin&&D.config.jwtHeaderName&&(Oe.headers=Oe.headers??{},Oe.headers[D.config.jwtHeaderName]=`${Ne}`),this.deviceID&&(Oe.headers=Oe.headers??{},Oe.headers["X-Grafana-Device-Id"]=`${this.deviceID}`),this.getFromFetchStream(Oe).pipe(this.handleStreamResponse(Oe),this.handleStreamError(Oe),this.handleStreamCancellation(Oe))}resolveCancelerIfExists(Oe){this.inFlightRequests.next(Oe)}cancelAllInFlightRequests(){this.inFlightRequests.next(ct)}async datasourceRequest(Oe){return(0,o.n)(this.fetch(Oe))}parseRequestOptions(Oe){const Ne=this.dependencies.contextSrv.user?.orgId;return Oe.retry=Oe.retry??0,(0,ge.R8)(Oe.url)&&(Ne&&(Oe.headers=Oe.headers??{},Oe.headers["X-Grafana-Org-Id"]=Ne),Oe.url.startsWith("/")&&(Oe.url=Oe.url.substring(1)),Oe.headers?.Authorization&&(Oe.headers["X-DS-Authorization"]=Oe.headers.Authorization,delete Oe.headers.Authorization),this.noBackendCache&&(Oe.headers=Oe.headers??{},Oe.headers["X-Grafana-NoCache"]="true")),Oe.hideFromInspector===void 0&&(Oe.hideFromInspector=(0,ge.R8)(Oe.url)&&!(0,ge.mu)(Oe.url)),Oe}getFromFetchStream(Oe){const Ne=ue(Oe),_e=K(Oe);return this.dependencies.fromFetch(Ne,_e).pipe((0,c.z)(async qe=>{const{status:rt,statusText:mt,ok:Je,headers:Ae,url:Ke,type:Xe,redirected:ne}=qe,Z=Oe.responseType??(re(Ae)?"json":void 0),ee=await ie(qe,Z);return{status:rt,statusText:mt,ok:Je,data:ee,headers:Ae,url:Ke,type:Xe,redirected:ne,config:Oe,traceId:qe.headers.get(he)??void 0}}))}showApplicationErrorAlert(Oe){}showSuccessAlert(Oe){const{config:Ne}=Oe;if(Ne.showSuccessAlert===!1||Ne.showSuccessAlert===void 0&&(Ne.method==="GET"||(0,ge.mu)(Ne.url)||!(0,ge.R8)(Ne.url)))return;const _e=Oe.data;_e?.message&&this.dependencies.appEvents.emit(b.SI.alertSuccess,[_e.message])}showErrorAlert(Oe,Ne){if(Oe.showErrorAlert===!1||Oe.showErrorAlert===void 0&&((0,ge.mu)(Oe.url)||!(0,ge.R8)(Oe.url)))return;let _e="",qe=Ne.data.message;qe==="Unexpected error"&&Ne.message&&(qe=Ne.message),qe.length>80&&(_e=qe,qe="Error"),Ne.status===422&&(_e=Ne.data.message,qe="Validation failed"),this.dependencies.appEvents.emit(Ne.status<500?b.SI.alertWarning:b.SI.alertError,[qe,_e,Ne.data.traceID])}processRequestError(Oe,Ne){return Ne.data=Ne.data??{message:"Unexpected error"},typeof Ne.data=="string"&&(Ne.data={message:Ne.data,error:Ne.statusText,response:Ne.data}),Ne.data&&!Ne.data.message&&typeof Ne.data.error=="string"&&(Ne.data.message=Ne.data.error),Ne.data.message&&setTimeout(()=>{Ne.isHandled||this.showErrorAlert(Oe,Ne)},50),this.inspectorStream.next(Ne),Ne}handleStreamResponse(Oe){return Ne=>Ne.pipe((0,m.U)(_e=>{if(!_e.ok){const{status:qe,statusText:rt,data:mt}=_e;throw{status:qe,statusText:rt,data:mt,config:Oe,traceId:_e.headers.get(he)??void 0}}return _e}),(0,d.b)(_e=>{this.showSuccessAlert(_e),this.inspectorStream.next(_e)}))}handleStreamError(Oe){const{isSignedIn:Ne}=this.dependencies.contextSrv.user;return _e=>_e.pipe((0,f.a)(qe=>qe.pipe((0,c.z)((rt,mt)=>{const Je=mt===0&&Oe.retry===0;if(rt.status===401&&(0,ge.R8)(Oe.url)&&Je&&Ne){if(rt.data?.error?.id==="ERR_TOKEN_REVOKED")return this.dependencies.appEvents.publish(new _.Dn({component:j,props:{maxConcurrentSessions:rt.data?.error?.maxConcurrentSessions}})),(0,g._)(()=>rt);let Ae=this.loginPing();const Ke=(0,R.D)()*1e3<Date.now();return D.config.featureToggles.clientTokenRotation&&Ke&&(Ae=this.rotateToken()),(0,u.D)(Ae).pipe((0,E.K)(Xe=>(Xe.status===401&&this.dependencies.logout(),(0,g._)(Xe))))}return(0,g._)(rt)}))),(0,E.K)(qe=>(0,g._)(()=>this.processRequestError(Oe,qe))))}handleStreamCancellation(Oe){return Ne=>Ne.pipe((0,v.R)(this.inFlightRequests.pipe((0,h.h)(_e=>{let qe=!1;return Oe&&Oe.requestId&&Oe.requestId===_e&&(qe=!0),_e===ct&&(qe=!0),qe}))),(0,p.T)(()=>({type:S.eA.Cancelled,cancelled:!0,data:null,status:this.HTTP_REQUEST_CANCELED,statusText:"Request was aborted",config:Oe})))}getInspectorStream(){return this.inspectorStream}async get(Oe,Ne,_e,qe){return this.request({...qe,method:"GET",url:Oe,params:Ne,requestId:_e})}async delete(Oe,Ne,_e){return this.request({..._e,method:"DELETE",url:Oe,data:Ne})}async post(Oe,Ne,_e){return this.request({..._e,method:"POST",url:Oe,data:Ne})}async patch(Oe,Ne,_e){return this.request({..._e,method:"PATCH",url:Oe,data:Ne})}async put(Oe,Ne,_e){return this.request({..._e,method:"PUT",url:Oe,data:Ne})}withNoBackendCache(Oe){return this.noBackendCache=!0,Oe().finally(()=>{this.noBackendCache=!1})}rotateToken(){return this._tokenRotationInProgress?this._tokenRotationInProgress:(this._tokenRotationInProgress=this.fetch({url:"/api/user/auth-tokens/rotate",method:"POST",retry:1}).pipe((0,s.x)(()=>{this._tokenRotationInProgress=null}),(0,y.B)()),this._tokenRotationInProgress)}loginPing(){return this.fetch({url:"/api/login/ping",method:"GET",retry:1})}search(Oe){return this.get("/api/search",Oe)}getDashboardByUid(Oe){return this.get(`/api/dashboards/uid/${Oe}`)}validateDashboard(Oe){return Promise.resolve({isValid:!1,message:"dashboard validation is supported"})}getPublicDashboardByUid(Oe){return this.get(`/api/public/dashboards/${Oe}`)}getFolderByUid(Oe,Ne={}){const _e=new URLSearchParams;return Ne.withAccessControl&&_e.set("accesscontrol","true"),this.get(`/api/folders/${Oe}?${_e.toString()}`,void 0,void 0,{showErrorAlert:!1})}}const Me=new xe,He=()=>Me},41879:(G,A,e)=>{"use strict";e.d(A,{Wg:()=>m,contextSrv:()=>f});var n=e(56375),a=e.n(n),o=e(71244),r=e(85445),i=e(11855),g=e(42694),u=e(95162),l=e(67954);const m="auto";class c{constructor(){this.id=0,this.isGrafanaAdmin=!1,this.isSignedIn=!1,this.orgRole="",this.orgId=0,this.orgName="",this.login="",this.externalUserId="",this.orgCount=0,this.timezone="",this.fiscalYearStartMonth=0,this.helpFlags1=0,this.theme="dark",this.hasEditPermissionInFolders=!1,this.email="",this.name="",this.locale="",this.language="",this.weekStart="",this.gravatarUrl="",this.analytics={identifier:""},this.authenticatedBy="",l.default.bootData.user&&(0,n.extend)(this,l.default.bootData.user)}}class d{constructor(){this.sidemenuSmallBreakpoint=!1,this.tokenRotationJobId=0,l.default.bootData||(l.default.bootData={user:{},settings:{},navTree:[]}),this.user=new c,this.isSignedIn=this.user.isSignedIn,this.isGrafanaAdmin=this.user.isGrafanaAdmin,this.isEditor=this.hasRole("Editor")||this.hasRole("Admin"),this.hasEditPermissionInFolders=this.user.hasEditPermissionInFolders,this.minRefreshInterval=l.default.minRefreshInterval,this.scheduleTokenRotationJob()}async fetchUserPermissions(){try{this.user.permissions=await(0,r.i)().get("/api/access-control/user/actions",{reloadcache:!0})}catch(h){console.error(h)}}setLoggedOut(){this.cancelTokenRotationJob(),this.user.isSignedIn=!1,this.isSignedIn=!1,window.location.reload()}hasRole(h){return h==="ServerAdmin"?this.isGrafanaAdmin:this.user.orgRole===h}licensedAccessControlEnabled(){return(0,i.v)("accesscontrol")}hasPermissionInMetadata(h,p){return!!p.accessControl?.[h]}hasPermission(h){return!!this.user.permissions?.[h]}isGrafanaVisible(){return document.visibilityState===void 0||document.visibilityState==="visible"}isAllowedInterval(h){return!l.default.minRefreshInterval||h===m?!0:o.intervalToMs(h)>=o.intervalToMs(l.default.minRefreshInterval)}getValidInterval(h){return this.isAllowedInterval(h)?h:l.default.minRefreshInterval}getValidIntervals(h){return this.minRefreshInterval?h.filter(p=>p!=="").filter(this.isAllowedInterval):h}hasAccessToExplore(){return this.hasPermission(u.AccessControlAction.DataSourcesExplore)&&l.default.exploreEnabled}evaluatePermission(h){return h.some(p=>this.hasPermission(p))?[]:["Reject"]}scheduleTokenRotationJob(){if(this.canScheduleRotation()){let h=(0,g.D)(),s=(h-Math.floor(Math.random()*(20-1)+1))*1e3-Date.now();this.tokenRotationJobId=setTimeout(()=>{if((0,g.D)()>h){this.scheduleTokenRotationJob();return}this.rotateToken().then()},s)}}canScheduleRotation(){return!(!this.isSignedIn||!l.default.featureToggles.clientTokenRotation||(0,g.D)()===0)}cancelTokenRotationJob(){l.default.featureToggles.clientTokenRotation&&this.tokenRotationJobId>0&&clearTimeout(this.tokenRotationJobId)}rotateToken(){return fetch(l.default.appSubUrl+"/api/user/auth-tokens/rotate",{method:"POST"}).then(h=>{if(h.status===200){this.scheduleTokenRotationJob();return}if(h.status===401){this.setLoggedOut();return}}).catch(h=>{console.error(h)})}}let f=new d;const E=v=>{throw new Error("contextSrv can be only overridden in test environment")}},81182:(G,A,e)=>{"use strict";e.d(A,{Z:()=>l});var n=e(56375),a=e.n(n),o=e(85445),r=e(67954),i=e(20994);class g{constructor(){}addDashboardImpression(c){const d=this.impressionKey();let f=[];i.Z.exists(d)&&(f=JSON.parse(i.Z.get(d)),(0,n.isArray)(f)||(f=[])),f=f.filter(E=>c!==E),f.unshift(c),f.length>50&&f.pop(),i.Z.set(d,JSON.stringify(f))}async convertToUIDs(){let c=this.getImpressions();const d=(0,n.filter)(c,E=>(0,n.isNumber)(E));if(!d.length)return;const f=await(0,o.i)().get(`/api/dashboards/ids/${d.join(",")}`);i.Z.set(this.impressionKey(),JSON.stringify([...(0,n.filter)(c,E=>(0,n.isString)(E)),...f]))}getImpressions(){const c=i.Z.get(this.impressionKey())||"[]";return JSON.parse(c)}async getDashboardOpened(){try{await this.convertToUIDs()}catch{}return(0,n.filter)(this.getImpressions(),d=>(0,n.isString)(d))}impressionKey(){return"dashboard_impressions-"+r.default.bootData.user.orgId}}const l=new g},25199:(G,A,e)=>{"use strict";e.d(A,{L:()=>u,X:()=>l});var n=e(83105),a=e(2384),o=e(60484),r=e(67954),i=e(49683),g=e(76831);async function u(m,c){const d=r.config.theme2,f=(0,n.j)(m);if(o.Z.publish(new a.hD(f)),d.colors.mode!==f.colors.mode){const h=document.createElement("link");h.rel="stylesheet",h.href=r.config.bootData.themePaths[f.colors.mode],h.onload=()=>{const p=document.getElementsByTagName("link");for(let s=0;s<p.length;s++){const y=p[s];y.href&&y.href.includes(`build/grafana.${d.colors.mode}`)&&y.remove()}},document.head.insertBefore(h,document.head.firstChild)}if(c||!i.Vt.isSignedIn)return;const E=new g.y("user"),v=await E.load();await E.update({...v,theme:f.colors.mode})}async function l(m){const c=r.config.theme2;u(c.isDark?"light":"dark",m)}},20994:(G,A,e)=>{"use strict";e.d(A,{Z:()=>o});class n{get(i){return window.localStorage[i]}set(i,g){window.localStorage[i]=g}getBool(i,g){return g!==void 0&&!this.exists(i)?g:window.localStorage[i]==="true"}getObject(i,g){let u=g;if(this.exists(i)){const l=window.localStorage[i];try{u=JSON.parse(l)}catch(m){console.error(`Error parsing store object: ${i}. Returning default: ${g}. [${m}]`)}}return u}setObject(i,g){let u;try{u=JSON.stringify(g)}catch(l){throw new Error(`Could not stringify object: ${i}. [${l}]`)}try{this.set(i,u)}catch(l){const m=new Error(`Could not save item in localStorage: ${i}. [${l}]`);throw l instanceof Error&&(m.name=l.name),m}return!0}exists(i){return window.localStorage[i]!==void 0}delete(i){window.localStorage.removeItem(i)}}const o=new n},95633:(G,A,e)=>{"use strict";e.d(A,{W:()=>l,Z:()=>m});var n=e(56375),a=e.n(n),o=e(49531),r=e(1930);function i(c,d){if(!c)return!1;if(c[0]==="/"){const f=(0,o.jO)(c);return d.match(f)!=null}return c===d}function g(c){return c===0?.001:c/10}function u(c){return c?{colors:[{opacity:0},{opacity:c/10}]}:null}function l(c,d,f){for(let E=0;E<c.length;E++){const v=c[E],h=d.yaxes,p=v.yaxis||1,s=h[p-1],y=(0,r.Cf)(s.format);(0,n.isNumber)(d.decimals)?v.updateLegendValues(y,d.decimals):(0,n.isNumber)(s.decimals)?v.updateLegendValues(y,s.decimals+1):v.updateLegendValues(y,null)}}class m{constructor(d){this.datapoints=d.datapoints,this.label=d.alias,this.id=d.alias,this.alias=d.alias,this.aliasEscaped=(0,n.escape)(d.alias),this.color=d.color,this.bars={fillColor:d.color},this.valueFormater=(0,r.Cf)("none"),this.stats={},this.legend=!0,this.unit=d.unit,this.dataFrameIndex=d.dataFrameIndex,this.fieldIndex=d.fieldIndex,this.hasMsResolution=this.isMsResolutionNeeded()}applySeriesOverrides(d){this.lines={},this.dashes={dashLength:[]},this.points={},this.yaxis=1,this.zindex=0,this.nullPointMode=null,delete this.stack,delete this.bars.show;for(let f=0;f<d.length;f++){const E=d[f];i(E.alias,this.alias)&&(E.lines!==void 0&&(this.lines.show=E.lines),E.dashes!==void 0&&(this.dashes.show=E.dashes,this.lines.lineWidth=0),E.points!==void 0&&(this.points.show=E.points),E.bars!==void 0&&(this.bars.show=E.bars),E.fill!==void 0&&(this.lines.fill=g(E.fill)),E.fillGradient!==void 0&&(this.lines.fillColor=u(E.fillGradient)),E.stack!==void 0&&(this.stack=E.stack),E.linewidth!==void 0&&(this.lines.lineWidth=this.dashes.show?0:E.linewidth,this.dashes.lineWidth=E.linewidth),E.dashLength!==void 0&&(this.dashes.dashLength[0]=E.dashLength),E.spaceLength!==void 0&&(this.dashes.dashLength[1]=E.spaceLength),E.nullPointMode!==void 0&&(this.nullPointMode=E.nullPointMode),E.pointradius!==void 0&&(this.points.radius=E.pointradius),E.steppedLine!==void 0&&(this.lines.steps=E.steppedLine),E.zindex!==void 0&&(this.zindex=E.zindex),E.fillBelowTo!==void 0&&(this.fillBelowTo=E.fillBelowTo),E.color!==void 0&&this.setColor(E.color),E.transform!==void 0&&(this.transform=E.transform),E.legend!==void 0&&(this.legend=E.legend),E.hideTooltip!==void 0&&(this.hideTooltip=E.hideTooltip),E.yaxis!==void 0&&(this.yaxis=E.yaxis),E.hiddenSeries!==void 0&&(this.hiddenSeries=E.hiddenSeries))}}getFlotPairs(d){const f=[];this.stats.total=0,this.stats.max=-Number.MAX_VALUE,this.stats.min=Number.MAX_VALUE,this.stats.logmin=Number.MAX_VALUE,this.stats.avg=null,this.stats.current=null,this.stats.first=null,this.stats.delta=0,this.stats.diff=null,this.stats.diffperc=0,this.stats.range=null,this.stats.timeStep=Number.MAX_VALUE,this.allIsNull=!0,this.allIsZero=!0;const E=d==="connected",v=d==="null as zero";let h,p,s=0,y,C=0,b=!0;for(let S=0;S<this.datapoints.length;S++){if(p=this.datapoints[S][0],h=this.datapoints[S][1],y!==void 0){const D=h-y;D<this.stats.timeStep&&(this.stats.timeStep=D)}if(y=h,p===null){if(E)continue;v&&(p=0)}p!==null&&((0,n.isNumber)(p)&&(this.stats.total+=p,this.allIsNull=!1,s++),p>this.stats.max&&(this.stats.max=p),p<this.stats.min&&(this.stats.min=p),this.stats.first===null?this.stats.first=p:C>p?(b=!1,S===this.datapoints.length-1&&(this.stats.delta+=p)):(b?this.stats.delta+=p-C:this.stats.delta+=p,b=!0),C=p,p<this.stats.logmin&&p>0&&(this.stats.logmin=p),p!==0&&(this.allIsZero=!1)),f.push([h,p])}return this.stats.max===-Number.MAX_VALUE&&(this.stats.max=null),this.stats.min===Number.MAX_VALUE&&(this.stats.min=null),f.length&&!this.allIsNull&&(this.stats.avg=this.stats.total/s,this.stats.current=f[f.length-1][1],this.stats.current===null&&f.length>1&&(this.stats.current=f[f.length-2][1])),this.stats.max!==null&&this.stats.min!==null&&(this.stats.range=this.stats.max-this.stats.min),this.stats.current!==null&&this.stats.first!==null&&(this.stats.diff=this.stats.current-this.stats.first,this.stats.diffperc=this.stats.diff/this.stats.first),this.stats.count=f.length,f}updateLegendValues(d,f){this.valueFormater=d,this.decimals=f}formatValue(d){return(0,n.isFinite)(d)||(d=null),(0,r.zc)(this.valueFormater(d,this.decimals))}isMsResolutionNeeded(){for(let d=0;d<this.datapoints.length;d++)if(this.datapoints[d][1]!==null&&this.datapoints[d][1]!==void 0){const f=this.datapoints[d][1].toString();if(f.length===13&&f%1e3!==0)return!0}return!1}hideFromLegend(d){return!!(d.hideEmpty&&this.allIsNull||!this.legend||d.hideZero&&this.allIsZero)}setColor(d){this.color=d,this.bars.fillColor=d}}},22654:(G,A,e)=>{"use strict";e.d(A,{k:()=>r});var n=e(86734),a=e(90857);const o=a.config.bootData.settings.cspReportOnlyEnabled,r={createHTML:(i,g,u)=>o?(console.error("[HTML not sanitized with Trusted Types]",i,g,u),i):i.replace(/<script/gi,"&lt;script"),createScript:i=>i,createScriptURL:(i,g,u)=>o?(console.error("[ScriptURL not sanitized with Trusted Types]",i,g,u),i):n.QX.sanitizeUrl(i)};a.config.bootData.settings.trustedTypesDefaultPolicyEnabled&&window.trustedTypes&&window.trustedTypes.createPolicy&&window.trustedTypes.createPolicy("default",r)},50805:(G,A,e)=>{"use strict";e.d(A,{E:()=>m,f:()=>l});var n=e(85960),a=e(34785),o=e(76176),r=e(2384),i=e(90857),g=e(49683),u=e(68655);const l=({children:c,value:d})=>{const[f,E]=(0,n.useState)(d);return(0,n.useEffect)(()=>{const v=g.h$.subscribe(r.hD,h=>{i.config.theme2=h.payload,E(h.payload)});return()=>v.unsubscribe()},[]),n.createElement(o.N.Provider,{value:f},n.createElement(a.y,{baseColor:f.colors.emphasize(f.colors.background.secondary),highlightColor:f.colors.emphasize(f.colors.background.secondary,.1),borderRadius:f.shape.radius.default},c))},m=(c,d)=>function(E){return n.createElement(l,{value:d},n.createElement(c,{...E}))}},34834:(G,A,e)=>{"use strict";e.d(A,{q:()=>n});class n extends window.Worker{constructor(o,r){const i=o.toString(),g=i.split("/");g.pop();const u=`${g.join("/")}/`,l=`importScripts('${i}');`,m=URL.createObjectURL(new Blob([`__webpack_worker_public_path__ = '${u}'; ${l}`],{type:"application/javascript"}));super(m,r),URL.revokeObjectURL(m)}}},78105:(G,A,e)=>{"use strict";e.d(A,{y:()=>n});function n(a={}){return{...a,accesscontrol:!0}}},12513:(G,A,e)=>{"use strict";e.d(A,{R:()=>n});const n=(a,o,r)=>(a.splice(r,0,a.splice(o,1)[0]),a)},42694:(G,A,e)=>{"use strict";e.d(A,{D:()=>n});function n(){const a=document.cookie.split("; ").find(r=>r.startsWith("grafana_session_expiry="));if(!a)return 0;let o=a.split("=").at(1);return o?parseInt(o,10):0}},55953:(G,A,e)=>{"use strict";e.d(A,{vl:()=>o});function n(){const r=navigator.userAgent.indexOf("MSIE")>-1,i=navigator.userAgent.indexOf("Edge/")>-1||navigator.userAgent.indexOf("Edg/")>-1,g=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,u=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),l=/Edge\/([0-9.]+)/.exec(navigator.userAgent);return r&&parseFloat(/Trident\/([0-9.]+)/.exec(navigator.userAgent)[1])<=7||i&&(l&&parseFloat(l[1])<=16||parseFloat(/Edg\/([0-9.]+)/.exec(navigator.userAgent)[1])<=16)||g&&parseFloat(/Firefox\/([0-9.]+)/.exec(navigator.userAgent)[1])<=64?!1:!(u&&parseFloat(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1])<=54)}function a(){return/(iPhone|iPad|Mac)/.test(navigator.platform)}function o(){return a()?"cmd":"ctrl"}},18745:(G,A,e)=>{"use strict";e.d(A,{kJ:()=>o});class n{_linkTo(u,l){l<=0&&u.inputEdges.push(this),l>=0&&u.outputEdges.push(this),u.edges.push(this)}link(u,l){if(!u)throw Error("inputNode is required");if(!l)throw Error("outputNode is required");return this.unlink(),this.inputNode=u,this.outputNode=l,this._linkTo(u,1),this._linkTo(l,-1),this}unlink(){let u;const l=this.inputNode,m=this.outputNode;l&&m&&(u=l.edges.indexOf(this),u>-1&&l.edges.splice(u,1),u=m.edges.indexOf(this),u>-1&&m.edges.splice(u,1),u=l.outputEdges.indexOf(this),u>-1&&l.outputEdges.splice(u,1),u=m.inputEdges.indexOf(this),u>-1&&m.inputEdges.splice(u,1))}}class a{constructor(u){this.name=u,this.edges=[],this.inputEdges=[],this.outputEdges=[]}getEdgeFrom(u){return u?typeof u=="object"?this.inputEdges.find(l=>l.inputNode?.name===u.name):this.inputEdges.find(l=>l.inputNode?.name===u):null}getEdgeTo(u){return u?typeof u=="object"?this.outputEdges.find(l=>l.outputNode?.name===u.name):this.outputEdges.find(l=>l.outputNode?.name===u):null}getOptimizedInputEdges(){const u=[];return this.inputEdges.forEach(l=>{l.inputNode?.inputEdges.map(c=>c.inputNode)?.forEach(c=>{const d=c?.getEdgeTo(this.name);d&&u.push(d)})}),this.inputEdges.filter(l=>u.indexOf(l)===-1)}}class o{constructor(){this.nodes={}}createNode(u){const l=new a(u);return this.nodes[u]=l,l}createNodes(u){const l=[];return u.forEach(m=>{l.push(this.createNode(m))}),l}link(u,l){let m=[],c=[];const d=[],f=[];u instanceof Array?m=u:m=[u],l instanceof Array?c=l:c=[l];for(let v=0;v<m.length;v++){const h=m[v];if(typeof h=="string"){const p=this.getNode(h);if(!p)throw Error(`cannot link input node named ${h} since it doesn't exist in graph`);d.push(p)}else d.push(h)}for(let v=0;v<c.length;v++){const h=c[v];if(typeof h=="string"){const p=this.getNode(h);if(!p)throw Error(`cannot link output node named ${h} since it doesn't exist in graph`);f.push(p)}else f.push(h)}const E=[];return d.forEach(v=>{f.forEach(h=>{E.push(this.createEdge().link(v,h))})}),E}descendants(u){if(!u.length)return new Set;const l=new Set(i(u)?u.map(m=>this.nodes[m]).filter(m=>m!==void 0):u);return this.descendantsRecursive(l)}descendantsRecursive(u,l=new Set){for(const m of u){const c=new Set;for(const{inputNode:d}of m.inputEdges)d&&!l.has(d)&&(l.add(d),c.add(d));this.descendantsRecursive(c,l)}return l}createEdge(){return new n}getNode(u){return this.nodes[u]}}const r=g=>{Object.keys(g.nodes).forEach(u=>{const l=g.nodes[u];let m=l.outputEdges.map(d=>d.outputNode?.name).join(", ");m||(m="<none>");let c=l.inputEdges.map(d=>d.inputNode?.name).join(", ");c||(c="<none>"),console.log(`${l.name}:
 - links to:   ${m}
 - links from: ${c}`)})};function i(g){return g.length>0&&typeof g[0]=="string"}},50596:(G,A,e)=>{"use strict";e.d(A,{i:()=>a});var n=e(85445);function a(o){if(typeof o=="string")return o;if(o){if(o instanceof Error)return o.message;if((0,n.kW)(o)){if(o.data&&o.data.message)return o.data.message;if(o.statusText)return o.statusText}}return JSON.stringify(o)}},18815:(G,A,e)=>{"use strict";e.d(A,{$$:()=>N,ET:()=>y,H6:()=>b,OQ:()=>F,Oy:()=>U,RZ:()=>j,Xh:()=>M,Xk:()=>R,Z8:()=>x,Zf:()=>S,_Q:()=>P,fR:()=>O,n9:()=>_,uC:()=>D,y_:()=>s,z0:()=>C,z_:()=>L});var n=e(20079),a=e(90308),o=e(1713),r=e(173),i=e(81223),g=e(9833),u=e(71244),l=e(81502),m=e(15867),c=e(20994),d=e(36530),f=e(21871);const E={dedupStrategy:o.Y4.none},v=100,h="grafana.explore.datasource",p=H=>`${h}.${H}`,s=H=>c.Z.getObject(p(H)),y=(H,z)=>c.Z.setObject(p(H),z);function C(){return(0,n.x0)(3)}async function b(H){const{queries:z,dsRef:K,timeRange:Y,scopedVars:k,adhocFilters:q}=H,X=(await Promise.allSettled(z.filter(se=>se.datasource?.uid!==d.Yq).map(async se=>{const de=await(0,l.F)().get(se.datasource||K);return{...de.interpolateVariablesInQueries?.([se],k??{},q)[0]||se,...!de.meta.mixed&&{datasource:de.getRef()}}}))).filter(se=>se.status==="fulfilled").map(se=>se.value),te=JSON.stringify({[C()]:{range:(0,r.R_)(Y.raw),queries:X,datasource:K?.uid}});return r.Cj.renderUrl("/explore",{panes:te,schemaVersion:1})}function S(H,z,K,Y,k,q,X){const te=z.reduce((ie,oe)=>(ie+=oe.key,ie),""),{interval:se,intervalMs:de}=V(Y,K.minInterval,K.maxDataPoints),re=`${te}`,fe={app:i.zj.Explore,timezone:q||g.Ys,startTime:Date.now(),interval:se,intervalMs:de,panelId:re,targets:z,range:Y,requestId:"explore_"+H,rangeRaw:Y.raw,scopedVars:{__interval:{text:se,value:se},__interval_ms:{text:de,value:de},...X},maxDataPoints:K.maxDataPoints,liveStreaming:K.liveStreaming};return{queries:z,request:fe,scanning:k,id:T(),done:!1}}const D=({key:H,...z})=>z,M=(H,z)=>{if(H==null)return"";try{return JSON.stringify(H,null,z)}catch(K){console.error(K)}return""};function T(H=0){return`Q-${(0,a.Z)()}-${H}`}async function R(H,z=0,K){let Y,k,q;return K?k=K:H.length>0&&H[H.length-1].datasource?k=H[H.length-1].datasource:(Y=await(0,l.F)().get(),q=Y.getDefaultQuery?.(i.zj.Explore),k=Y.getRef()),Y||(Y=await(0,l.F)().get(k),q=Y.getDefaultQuery?.(i.zj.Explore)),{...q,refId:(0,f.Hs)(H),key:T(z),datasource:k}}const O=(H,z,K=0)=>{const Y=T(K),k=H.refId||(0,f.Hs)(z);return{...H,refId:k,key:Y}};async function x(H,z){if(H&&typeof H=="object"&&H.length>0){const K=[];for(let Y=0;Y<H.length;Y++){const k=H[Y],q=T(Y);let X=k.refId;X||(X=(0,f.Hs)(K));let te=!0;if(k.datasource)try{await(0,l.F)().get(k.datasource.uid)}catch{console.error("One of the queries has a datasource that is no longer available and was removed."),te=!1}te&&K.push({...k,refId:X,key:q})}return K}try{const K=z??(await(0,l.F)().get()).getRef();return[await R(H??[],void 0,K)]}catch{return[]}}const I=["refId","key","context","datasource"];function L(H){return H&&H.some(z=>Object.keys(z).filter(Y=>I.indexOf(Y)===-1).map(Y=>z[Y]).filter(Y=>Y).length>0)}function P(H,z,K){const Y=Date.now();let k=H;K.forEach(X=>{k=[{query:X,ts:Y},...k]}),k.length>v&&(k=k.slice(0,v));const q=`grafana.explore.history.${z}`;try{return c.Z.setObject(q,k),k}catch(X){return console.error(X),H}}const N=H=>H.reduce((K,Y,k)=>{const q=Y.datasource?.uid||Y.key;return K.concat(`${q}-${k}`)},[]),F=(H,z,K)=>{let Y=u.convertRawToRange(z,H,K);return Y.to.isBefore(Y.from)&&(Y=u.convertRawToRange({from:Y.raw.to,to:Y.raw.from},H,K)),Y},U=H=>m.dP.isLive(H)?o.UV.Ascending:o.UV.Descending,j=H=>{H&&H.unsubscribe()};function V(H,z,K){return K?u.calculateInterval(H,K,z):{interval:"1s",intervalMs:1e3}}const _=H=>{const z=document.createElement("textarea");z.value=H,document.body.appendChild(z),z.select(),document.execCommand("copy"),document.body.removeChild(z)}},12421:(G,A,e)=>{"use strict";e.r(A),e.d(A,{default:()=>n});function n(a,o){o=o||{};const r=o.delimiter||".";let i=o.maxDepth||3,g=1;const u={};function l(m,c){Object.keys(m).forEach(d=>{const f=m[d],E=o?.safe&&Array.isArray(f),h=Object.prototype.toString.call(f)==="[object Object]",p=c?c+r+d:d;if(o?.maxDepth||(i=g+1),!E&&h&&Object.keys(f).length&&g<i)return++g,l(f,p);u[p]=f})}return l(a,null),u}},33986:(G,A,e)=>{"use strict";e.d(A,{Z:()=>u});var n=e(20440),a=e(49531),o=e(71244),r=e(1930);const g={valueFormats:{},intervalRegex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervalsInSeconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},regexEscape:l=>((0,n.d)("kbn.ts","kbn.regexEscape()","escapeRegex from @grafana/data"),(0,a.yI)(l)),roundInterval:l=>((0,n.d)("kbn.ts","kbn.roundInterval()","@grafana/data"),o.roundInterval(l)),secondsToHms:l=>((0,n.d)("kbn.ts","kbn.secondsToHms()","@grafana/data"),o.secondsToHms(l)),secondsToHhmmss:l=>{const m=[],c=Math.floor(l/3600),d=Math.floor(l%3600/60),f=Math.floor(l%3600%60);return c>9?m.push(""+c):m.push("0"+c),d>9?m.push(""+d):m.push("0"+d),f>9?m.push(""+f):m.push("0"+f),m.join(":")},toPercent:(l,m)=>Math.floor(l/m*1e4)/100+"%",addSlashes:l=>l.replace(/[\'\"\\0]/g,"\\$&"),describeInterval:l=>((0,n.d)("kbn.ts","kbn.describeInterval()","@grafana/data"),o.describeInterval(l)),intervalToSeconds:l=>((0,n.d)("kbn.ts","rangeUtil.intervalToSeconds()","@grafana/data"),o.intervalToSeconds(l)),intervalToMs:l=>((0,n.d)("kbn.ts","rangeUtil.intervalToMs()","@grafana/data"),o.intervalToMs(l)),calculateInterval:(l,m,c)=>((0,n.d)("kbn.ts","kbn.calculateInterval()","@grafana/data"),o.calculateInterval(l,m,c)),queryColorDot:(l,m)=>'<div class="icon-circle" style="'+["display:inline-block","color:"+l,"font-size:"+m+"px"].join(";")+'"></div>',slugifyForUrl:l=>l.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),stringToJsRegex:l=>((0,n.d)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),(0,a.jO)(l)),toFixed:(l,m)=>{if(l===null)return"";const c=m?Math.pow(10,Math.max(0,m)):1,d=String(Math.round(l*c)/c);if(d.indexOf("e")!==-1||l===0)return d;if(m!=null){const f=d.indexOf("."),E=f===-1?0:d.length-f-1;if(E<m)return(E?d:d+".")+String(c).slice(1,m-E+1)}return d},toFixedScaled:(l,m,c,d,f)=>c===null?g.toFixed(l,m)+f:g.toFixed(l,c+d)+f,roundValue:(l,m)=>{if(l===null)return null;const c=Math.pow(10,m),d=(c*l).toFixed(m);return Math.round(parseFloat(d))/c},getUnitFormats:r.QW};typeof Proxy<"u"?g.valueFormats=new Proxy(g.valueFormats,{get(l,m,c){if(typeof m!="string")throw{message:`Value format ${String(m)} is not a string`};const d=(0,r.Cf)(m);return d?(f,E,v,h)=>(0,r.zc)(d(f,E,v,h?"utc":"browser")):Reflect.get(l,m,c)}}):g.valueFormats=(0,r.Td)();const u=g},98936:(G,A,e)=>{"use strict";e.d(A,{L:()=>o,Y:()=>a});var n=e(95329);function a(r){switch(r){case"home":return(0,n.t)("nav.home.title","Home");case"new":return(0,n.t)("nav.new.title","New");case"create":return(0,n.t)("nav.create.title","Create");case"create-dashboard":return(0,n.t)("nav.create-dashboard.title","Dashboard");case"folder":return(0,n.t)("nav.create-folder.title","Folder");case"import":return(0,n.t)("nav.create-import.title","Import dashboard");case"alert":return(0,n.t)("nav.create-alert.title","New alert rule");case"starred":return(0,n.t)("nav.starred.title","Starred");case"starred-empty":return(0,n.t)("nav.starred-empty.title","Your starred dashboards will appear here");case"dashboards":return(0,n.t)("nav.dashboards.title","Dashboards");case"dashboards/browse":return(0,n.t)("nav.dashboards.title","Dashboards");case"dashboards/playlists":return(0,n.t)("nav.playlists.title","Playlists");case"dashboards/snapshots":return(0,n.t)("nav.snapshots.title","Snapshots");case"dashboards/library-panels":return(0,n.t)("nav.library-panels.title","Library panels");case"reports":return(0,n.t)("nav.reporting.title","Reporting");case"dashboards/public":return(0,n.t)("nav.public.title","Public dashboards");case"dashboards/new":return(0,n.t)("nav.new-dashboard.title","New dashboard");case"dashboards/folder/new":return(0,n.t)("nav.new-folder.title","New folder");case"dashboards/import":return(0,n.t)("nav.create-import.title","Import dashboard");case"scenes":return(0,n.t)("nav.scenes.title","Scenes");case"explore":return(0,n.t)("nav.explore.title","Explore");case"alerting":return(0,n.t)("nav.alerting.title","Alerting");case"plugin-page-grafana-oncall-app":return(0,n.t)("nav.oncall.title","OnCall");case"alerting-legacy":return(0,n.t)("nav.alerting-legacy.title","Alerting (legacy)");case"alert-home":return(0,n.t)("nav.alerting-home.title","Home");case"alert-list":return(0,n.t)("nav.alerting-list.title","Alert rules");case"receivers":return(0,n.t)("nav.alerting-receivers.title","Contact points");case"am-routes":return(0,n.t)("nav.alerting-am-routes.title","Notification policies");case"channels":return(0,n.t)("nav.alerting-channels.title","Notification channels");case"silences":return(0,n.t)("nav.alerting-silences.title","Silences");case"groups":return(0,n.t)("nav.alerting-groups.title","Groups");case"alerting-admin":return(0,n.t)("nav.alerting-admin.title","Admin");case"cfg":return(0,n.t)("nav.config.title","Administration");case"cfg/general":return(0,n.t)("nav.config-general.title","General");case"cfg/plugins":return(0,n.t)("nav.config-plugins.title","Plugins and data");case"cfg/access":return(0,n.t)("nav.config-access.title","Users and access");case"datasources":return(0,n.t)("nav.datasources.title","Data sources");case"authentication":return(0,n.t)("nav.authentication.title","Authentication");case"licensing":return(0,n.t)("nav.statistics-and-licensing.title","Statistics and licensing");case"recordedQueries":return(0,n.t)("nav.recorded-queries.title","Recorded queries");case"correlations":return(0,n.t)("nav.correlations.title","Correlations");case"users":return(0,n.t)("nav.users.title","Users");case"teams":return(0,n.t)("nav.teams.title","Teams");case"plugins":return(0,n.t)("nav.plugins.title","Plugins");case"org-settings":return(0,n.t)("nav.org-settings.title","Default preferences");case"apikeys":return(0,n.t)("nav.api-keys.title","API keys");case"serviceaccounts":return(0,n.t)("nav.service-accounts.title","Service accounts");case"admin":return(0,n.t)("nav.admin.title","Server admin");case"support-bundles":return(0,n.t)("nav.support-bundles.title","Support bundles");case"global-users":return(0,n.t)("nav.global-users.title","Users");case"global-orgs":return(0,n.t)("nav.global-orgs.title","Organizations");case"server-settings":return(0,n.t)("nav.server-settings.title","Settings");case"storage":return(0,n.t)("nav.storage.title","Storage");case"upgrading":return(0,n.t)("nav.upgrading.title","Stats and license");case"monitoring":return(0,n.t)("nav.monitoring.title","Observability");case"infrastructure":return(0,n.t)("nav.infrastructure.title","Infrastructure");case"frontend":return(0,n.t)("nav.frontend.title","Frontend");case"apps":return(0,n.t)("nav.apps.title","Apps");case"alerts-and-incidents":return(0,n.t)("nav.alerts-and-incidents.title","Alerts & IRM");case"plugin-page-grafana-incident-app":return(0,n.t)("nav.incidents.title","Incidents");case"plugin-page-grafana-ml-app":return(0,n.t)("nav.machine-learning.title","Machine learning");case"plugin-page-grafana-slo-app":return(0,n.t)("nav.slo.title","SLO");case"plugin-page-k6-app":return(0,n.t)("nav.performance-testing.title","Performance testing");case"monitoring":return(0,n.t)("nav.observability.title","Observability");case"plugin-page-grafana-k8s-app":return(0,n.t)("nav.kubernetes.title","Kubernetes");case"plugin-page-grafana-app-observability-app":return(0,n.t)("nav.application.title","Application");case"plugin-page-grafana-pyroscope-app":return(0,n.t)("nav.profiles.title","Profiles");case"plugin-page-grafana-kowalski-app":return(0,n.t)("nav.frontend-app.title","Frontend");case"plugin-page-grafana-synthetic-monitoring-app":return(0,n.t)("nav.synthetics.title","Synthetics");case"help":return(0,n.t)("nav.help.title","Help");case"profile/settings":return(0,n.t)("nav.profile/settings.title","Profile");case"profile/notifications":return(0,n.t)("nav.profile/notifications.title","Notification history");case"profile/password":return(0,n.t)("nav.profile/password.title","Change password");case"sign-out":return(0,n.t)("nav.sign-out.title","Sign out");case"search":return(0,n.t)("nav.search-dashboards.title","Search dashboards");case"connections":return(0,n.t)("nav.connections.title","Connections");case"connections-add-new-connection":return(0,n.t)("nav.add-new-connections.title","Add new connection");case"connections-datasources":return(0,n.t)("nav.data-sources.title","Data sources");case"standalone-plugin-page-/connections/infrastructure":return(0,n.t)("nav.integrations.title","Integrations");case"standalone-plugin-page-/connections/connect-data":return(0,n.t)("nav.connect-data.title","Connect data");case"plugin-page-grafana-detect-app":return(0,n.t)("nav.detect.title","Detect");case"plugin-page-grafana-quaderno-app":return(0,n.t)("nav.grafana-quaderno.title","Grafana Quaderno");default:return}}function o(r){switch(r){case"dashboards":return(0,n.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"dashboards/browse":return(0,n.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"manage-folder":return(0,n.t)("nav.manage-folder.subtitle","Manage folder dashboards and permissions");case"dashboards/playlists":return(0,n.t)("nav.playlists.subtitle","Groups of dashboards that are displayed in a sequence");case"dashboards/snapshots":return(0,n.t)("nav.snapshots.subtitle","Interactive, publically available, point-in-time representations of dashboards");case"dashboards/library-panels":return(0,n.t)("nav.library-panels.subtitle","Reusable panels that can be added to multiple dashboards");case"alerting":return(0,n.t)("nav.alerting.subtitle","Learn about problems in your systems moments after they occur");case"alert-list":return(0,n.t)("nav.alerting-list.subtitle","Rules that determine whether an alert will fire");case"receivers":return(0,n.t)("nav.alerting-receivers.subtitle","Choose how to notify your contact points when an alert instance fires");case"am-routes":return(0,n.t)("nav.alerting-am-routes.subtitle","Determine how alerts are routed to contact points");case"silences":return(0,n.t)("nav.alerting-silences.subtitle","Stop notifications from one or more alerting rules");case"groups":return(0,n.t)("nav.alerting-groups.subtitle","See grouped alerts from an Alertmanager instance");case"datasources":return(0,n.t)("nav.datasources.subtitle","Add and configure data sources");case"correlations":return(0,n.t)("nav.correlations.subtitle","Add and configure correlations");case"users":return(0,n.t)("nav.users.subtitle","Invite and assign roles to users");case"teams":return(0,n.t)("nav.teams.subtitle","Groups of users that have common dashboard and permission needs");case"plugins":return(0,n.t)("nav.plugins.subtitle","Extend the Grafana experience with plugins");case"org-settings":return(0,n.t)("nav.org-settings.subtitle","Manage preferences across an organization");case"apikeys":return(0,n.t)("nav.api-keys.subtitle","Manage and create API keys that are used to interact with Grafana HTTP APIs");case"serviceaccounts":return(0,n.t)("nav.service-accounts.subtitle","Use service accounts to run automated workloads in Grafana");case"global-users":return(0,n.t)("nav.global-users.subtitle","Manage users in Grafana");case"global-orgs":return(0,n.t)("nav.global-orgs.subtitle","Isolated instances of Grafana running on the same server");case"server-settings":return(0,n.t)("nav.server-settings.subtitle","View the settings defined in your Grafana config");case"storage":return(0,n.t)("nav.storage.subtitle","Manage file storage");case"support-bundles":return(0,n.t)("nav.support-bundles.subtitle","Download support bundles");case"admin":return(0,n.t)("nav.admin.subtitle","Manage server-wide settings and access to resources such as organizations, users, and licenses");case"cfg/general":return(0,n.t)("nav.config-general.subtitle","Manage default preferences and settings across Grafana");case"cfg/plugins":return(0,n.t)("nav.config-plugins.subtitle","Install plugins and define the relationships between data");case"cfg/access":return(0,n.t)("nav.config-access.subtitle","Configure access for individual users, teams, and service accounts");case"apps":return(0,n.t)("nav.apps.subtitle","App plugins that extend the Grafana experience");case"monitoring":return(0,n.t)("nav.monitoring.subtitle","Out-of-the-box observability solutions");case"infrastructure":return(0,n.t)("nav.infrastructure.subtitle","Understand your infrastructure's health");case"frontend":return(0,n.t)("nav.frontend.subtitle","Gain real user monitoring insights");case"alerts-and-incidents":return(0,n.t)("nav.alerts-and-incidents.subtitle","Alerting and incident management apps");case"connections-add-new-connection":return(0,n.t)("nav.connections.subtitle","Browse and create new connections");case"connections-datasources":return(0,n.t)("nav.data-sources.subtitle","View and manage your connected data source connections");default:return}}},3201:(G,A,e)=>{"use strict";e.d(A,{M:()=>o});var n=e(56375),a=e.n(n);function o(r){return(0,n.isArray)(r)?r.map(o):(0,n.isPlainObject)(r)?Object.keys(r).sort().reduce((i,g)=>{const u=r[g];return u!=null&&(i[g]=o(u)),i},{}):r}},21871:(G,A,e)=>{"use strict";e.d(A,{DI:()=>o,Hs:()=>n,R8:()=>i,mu:()=>r,sB:()=>u,vH:()=>a});const n=l=>{for(let m=0;;m++){const c=g(m);if(!l.some(d=>d.refId===c))return c}};function a(l){const m=["refId","hide","key","queryType","datasource"];for(const c in l)if(c!=="label"&&!m.includes(c))return!1;return!0}function o(l,m,c){const d={...m,refId:n(l),hide:!1};return!d.datasource&&c&&(d.datasource=c),[...l,d]}function r(l){return l.indexOf("api/datasources/proxy")!==-1||l.indexOf("api/ds/query")!==-1}function i(l){return!l.match(/^http/)}function g(l){const m="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return l<m.length?m[l]:g(Math.floor(l/m.length)-1)+m[l%m.length]}function u(l){return l||void 0}},85563:(G,A,e)=>{"use strict";e.d(A,{As:()=>f.A,DR:()=>I,HK:()=>s,OH:()=>O,VI:()=>y,au:()=>E,bQ:()=>D,di:()=>p,gt:()=>C,k4:()=>x,kg:()=>h,t2:()=>S,ub:()=>v,y9:()=>b});var n=e(56375),a=e.n(n),o=e(173),r=e(12537),i=e(81502),g=e(88492),u=e(93991),l=e(95329),m=e(59767),c=e(77784),d=e(78e3),f=e(73423);async function E(P,N,F,U,j,V,_){const H=F&&F.filter(z=>L(z));if(H.length>0){let z=!1,K=!1,Y;try{Y=(await(0,d.b)().addToRichHistory({datasourceUid:P,datasourceName:N??"",queries:H,starred:U,comment:j??""})).warning}catch(k){return k instanceof Error&&(k.name===c.j.StorageFull?(z=!0,V&&(0,m.WI)((0,g.$l)((0,u.t_)(k.message)))):k.name!==c.j.DuplicatedEntry&&(0,m.WI)((0,g.$l)((0,u.t_)((0,l.t)("explore.rich-history-utils-notification.update-failed","Rich History update failed"),k.message)))),{richHistoryStorageFull:z,limitExceeded:K}}return Y&&Y.type===c.V.LimitExceeded&&(K=!0,_&&(0,m.WI)((0,g.$l)((0,u.ZR)(Y.message)))),{richHistoryStorageFull:z,limitExceeded:K}}return{}}async function v(P){return await(0,d.b)().getRichHistory(P)}async function h(P){await(0,d.b)().updateSettings(P)}async function p(){return await(0,d.b)().getSettings()}async function s(){return(0,d.b)().deleteAll()}async function y(P,N){try{return await(0,d.b)().updateStarred(P,N)}catch(F){F instanceof Error&&(0,m.WI)((0,g.$l)((0,u.t_)((0,l.t)("explore.rich-history-utils-notification.saving-failed","Saving rich history failed"),F.message)));return}}async function C(P,N){try{return await(0,d.b)().updateComment(P,N)}catch(F){F instanceof Error&&(0,m.WI)((0,g.$l)((0,u.t_)((0,l.t)("explore.rich-history-utils-notification.saving-failed","Saving rich history failed"),F.message)));return}}async function b(P){try{return await(0,d.b)().deleteRichHistory(P),P}catch(N){N instanceof Error&&(0,m.WI)((0,g.$l)((0,u.t_)((0,l.t)("explore.rich-history-utils-notification.saving-failed","Saving rich history failed"),N.message)));return}}const S=P=>{const N={range:{from:(0,l.t)("explore.rich-history-utils.default-from","now-1h"),to:(0,l.t)("explore.rich-history-utils.default-to","now")},datasource:P.datasourceName,queries:P.queries},F=(0,o.S)(N),U=/.*(?=\/explore)/.exec(`${window.location.href}`)[0];return o.Cj.renderUrl(`${U}/explore`,{left:F})},D=P=>{let N;switch(P){case 0:N=(0,l.t)("explore.rich-history-utils.today","today");break;case 1:N=(0,l.t)("explore.rich-history-utils.yesterday","yesterday");break;case 7:N=(0,l.t)("explore.rich-history-utils.a-week-ago","a week ago");break;case 14:N=(0,l.t)("explore.rich-history-utils.two-weeks-ago","two weeks ago");break;default:N=(0,l.t)("explore.rich-history-utils.days-ago","{{num}} days ago",{num:`${P}`})}return N};function M(P){return(0,r.dq)(P,{format:"MMMM D"})}function T(P){const N=(0,n.omit)(P,["key","refId","datasource"]);return JSON.stringify(N)}function R(P,N){let F="";return N===f.A.DatasourceAZ||N===f.A.DatasourceZA?F=P.datasourceName:F=M(P.createdAt),F}function O(P,N){return N?.getQueryDisplayText?N.getQueryDisplayText(P):T(P)}function x(P,N){let F={};return P.forEach(U=>{let j=R(U,N);j in F?F[j]=[...F[j],U]:F[j]=[U]}),F}function I(){return(0,i.F)().getList({mixed:!0}).map(P=>({name:P.name,uid:P.uid}))}function L(P){const N=(0,n.omit)(P,["key","refId","datasource"]);return Object.keys(N).length>0}},73423:(G,A,e)=>{"use strict";e.d(A,{A:()=>n});var n=(a=>(a.Descending="Descending",a.Ascending="Ascending",a.DatasourceAZ="Datasource A-Z",a.DatasourceZA="Datasource Z-A",a))(n||{})},28878:(G,A,e)=>{"use strict";e.d(A,{D:()=>c,L:()=>d});var n=e(84513),a=e(90857),o=e(85445),r=e(88492),i=e(93991),g=e(59767),u=e(18815);function l(){return`${window.location.protocol}//${window.location.host}${a.config.appSubUrl}`}function m(f){let E=f.replace(l(),"");return E.startsWith("/")?E.substring(1,E.length):E}const c=(0,n.Z)(async function(f){try{return(await(0,o.i)().post("/api/short-urls",{path:m(f)})).url}catch(E){console.error("Error when creating shortened link: ",E),(0,g.WI)((0,r.$l)((0,i.t_)("Error generating shortened link")))}}),d=async f=>{const E=await c(f);E?((0,u.n9)(E),(0,g.WI)((0,r.$l)((0,i.AT)("Shortened link copied to clipboard")))):(0,g.WI)((0,r.$l)((0,i.t_)("Error generating shortened link")))}},73126:(G,A,e)=>{"use strict";e.r(A),e.d(A,{getFlotRange:()=>r,getFlotTickDecimals:()=>i,getFlotTickSize:()=>o,getPrecision:()=>l,getScaledDecimals:()=>a,getStringPrecision:()=>m,grafanaTimeFormat:()=>g,logp:()=>u,tickStep:()=>n});function n(c,d,f){const E=Math.sqrt(50),v=Math.sqrt(10),h=Math.sqrt(2),p=Math.abs(d-c)/Math.max(0,f);let s=Math.pow(10,Math.floor(Math.log(p)/Math.LN10));const y=p/s;return y>=E?s*=10:y>=v?s*=5:y>=h&&(s*=2),d<c?-s:s}function a(c,d){return c-Math.floor(Math.log(d)/Math.LN10)}function o(c,d,f,E){const v=(d-c)/f;let h=-Math.floor(Math.log(v)/Math.LN10);const p=E,s=Math.pow(10,-h),y=v/s;let C;return y<1.5?C=1:y<3?(C=2,y>2.25&&(p==null||h+1<=p)&&(C=2.5,++h)):y<7.5?C=5:C=10,C*=s,C}function r(c,d,f,E){let h=+(c??f),p=+(d??E);const s=p-h;if(s===0){const C=Math.abs(p===0?1:p*.25);c===null&&(h-=C),(d==null||c!=null)&&(p+=C)}else c==null&&(h-=s*.02,h<0&&f!=null&&f>=0&&(h=0)),d==null&&(p+=s*.02,p>0&&E!=null&&E<=0&&(p=0));return{min:h,max:p}}function i(c,d,f,E){const{min:v,max:h}=r(f.min,f.max,c,d),p=.3*Math.sqrt(E),s=(h-v)/p,y=-Math.floor(Math.log(s)/Math.LN10),C=Math.pow(10,-y),b=s/C;let S;b<1.5?S=1:b<3?(S=2,b>2.25&&(S=2.5)):b<7.5?S=5:S=10,S*=C;const D=Math.max(0,-Math.floor(Math.log(s)/Math.LN10)+1),M=D-Math.floor(Math.log(S)/Math.LN10);return{tickDecimals:D,scaledDecimals:M}}function g(c,d,f){if(d&&f&&c){const E=f-d,v=E/c/1e3,h=864e5,p=31536e6;return v<=45?"HH:mm:ss":v<=7200||E<=h?"HH:mm":v<=8e4?"MM/DD HH:mm":v<=2419200||E<=p?"MM/DD":"YYYY-MM"}return"HH:mm"}function u(c,d){return Math.log(c)/Math.log(d)}function l(c){const d=c.toString();return m(d)}function m(c){if(isNaN(c))return 0;const d=c.indexOf(".");return d===-1?0:c.length-d-1}},52152:(G,A,e)=>{"use strict";e.d(A,{e:()=>a,h:()=>o});var n=e(85745);const a=(r,i)=>{const g={from:(0,n.zh)(i.from),to:(0,n.zh)(i.to)},u=(g.to.valueOf()-g.from.valueOf())/2;let l,m;return r===-1?(l=g.to.valueOf()-u,m=g.from.valueOf()-u):r===1?(l=g.to.valueOf()+u,m=g.from.valueOf()+u,l>Date.now()&&g.to.valueOf()<Date.now()&&(l=Date.now(),m=g.from.valueOf())):(l=g.to.valueOf(),m=g.from.valueOf()),{from:m,to:l}},o=(r,i)=>{const g=r.to.valueOf()-r.from.valueOf(),u=r.to.valueOf()-g/2,l=g===0?3e4:g*i,m=u+l/2;return{from:u-l/2,to:m}}},60517:(G,A,e)=>{"use strict";e.d(A,{q7:()=>a});var n=e(85745);function a(i,g){if(!(i.fromDayOfWeek||i.from)&&!(i.toDayOfWeek||i.to))return[];const u={...i};u.from&&!u.to&&(u.to=u.from),!u.from&&u.to&&(u.from=u.to);const l={from:o(u.from),to:o(u.to)};if(!u.fromDayOfWeek&&u.toDayOfWeek&&(u.fromDayOfWeek=u.toDayOfWeek),!u.toDayOfWeek&&u.fromDayOfWeek&&(u.toDayOfWeek=u.fromDayOfWeek),u.fromDayOfWeek&&(l.from.dayOfWeek=Number(u.fromDayOfWeek)),u.toDayOfWeek&&(l.to.dayOfWeek=Number(u.toDayOfWeek)),l.from.dayOfWeek&&l.from.h==null&&l.from.m==null&&(l.from.h=0,l.from.m=0,l.from.s=0),l.to.dayOfWeek&&l.to.h==null&&l.to.m==null&&(l.to.h=23,l.to.m=59,l.to.s=59),!l.from||!l.to)return[];l.from.h==null&&(l.from.h=0),l.to.h==null&&(l.to.h=23);const m=[],c=(0,n.CQ)(g.from).utc();for(c.set("hour",0),c.set("minute",0),c.set("second",0),c.set("millisecond",0),c.add(l.from.h,"hours"),c.add(l.from.m,"minutes"),c.add(l.from.s,"seconds");c.unix()<=g.to.unix();){for(;l.from.dayOfWeek&&l.from.dayOfWeek!==c.isoWeekday();)c.add(24,"hours");if(c.unix()>g.to.unix())break;const d=(0,n.CQ)(c).utc();if(d.hour)if(l.from.h<=l.to.h)d.add(l.to.h-l.from.h,"hours");else if(l.from.h>l.to.h)for(;d.hour()!==l.to.h;)d.add(1,"hours");else for(d.add(24-l.from.h,"hours");d.hour()!==l.to.h;)d.add(1,"hours");for(d.set("minute",l.to.m??0),d.set("second",l.to.s??0);l.to.dayOfWeek&&l.to.dayOfWeek!==d.isoWeekday();)d.add(24,"hours");c.unix()<g.from.unix()&&d.unix()<g.from.unix()||c.unix()>g.to.unix()&&d.unix()>g.to.unix()||m.push({from:c.valueOf(),to:d.valueOf()}),c.add(24,"hours")}return m}function o(i){const g={};if(!i?.length)return g;const u=i.split(":");return u?.length&&(g.h=Math.min(23,Math.max(0,Number(u[0]))),u.length>1&&(g.m=Math.min(60,Math.max(0,Number(u[1]))),u.length>2&&(g.s=Math.min(60,Math.max(0,Number(u[2])))))),g}function r(i){if(!i||i.h==null&&i.m==null&&i.s==null)return"";let g=String(i.h??0).padStart(2,"0")+":"+String(i.m??0).padStart(2,"0");return i.s!=null&&(g+=String(i.s??0).padStart(2,"0")),g}},98149:(G,A,e)=>{"use strict";e.d(A,{et:()=>r,fy:()=>g,nO:()=>i,np:()=>l});var n=e(38070),a=e(68619),o=e(58309);function r(m){return m.sort((d,f)=>d[0]-f[0]),m.reduce((d,f)=>{if(!d.length)return[f];const E=d.slice(-1)[0],[v,h]=E,[p,s]=f;return s<h?d:p>h?[...d,f]:[...d.slice(0,-1),[v,s]]},[]).reduce((d,f)=>d+(f[1]-f[0]),0)}function i(m){const c={};let d;for(let f=0;d=m(f),!!d;f++){c[d.id]?c[d.id].span=d.span:c[d.id]={span:d.span,children:[]};for(const E of d.parentIds)E&&(c[E]?c[E].children.push(d.id):c[E]={span:void 0,children:[d.id]})}return c}function g(m,c,d){return{main:`${u(m)}ms (${u(m/c*100)}%)`,secondary:`${u(d)}ms (${u(d/m*100)}%)`}}function u(m){return parseFloat(m.toFixed(2))}function l(){const m=new n.v({fields:[{name:a.z.id,type:o.fS.string},{name:a.z.title,type:o.fS.string},{name:a.z.subTitle,type:o.fS.string},{name:a.z.mainStat,type:o.fS.string,config:{displayName:"Total time (% of trace)"}},{name:a.z.secondaryStat,type:o.fS.string,config:{displayName:"Self time (% of total)"}},{name:a.z.color,type:o.fS.number,config:{color:{mode:"continuous-GrYlRd"},displayName:"Self time / Trace duration"}}],meta:{preferredVisualisationType:"nodeGraph"}}),c=new n.v({fields:[{name:a.z.id,type:o.fS.string},{name:a.z.target,type:o.fS.string},{name:a.z.source,type:o.fS.string}],meta:{preferredVisualisationType:"nodeGraph"}});return[m,c]}},49766:(G,A,e)=>{"use strict";e.d(A,{v:()=>a});let n="";const a=()=>{const r=new URLSearchParams(window.location.search).get("auth_token");return r!==null&&r!==""?(n=r,r):n}},95918:(G,A,e)=>{"use strict";e.d(A,{ep:()=>i,f$:()=>l,sF:()=>g,xW:()=>u});var n=e(15995),a=e(81838),o=e(85445);const r=({baseUrl:m})=>async({url:c,method:d="GET",body:f})=>{try{const{data:E}=await(0,a.n)((0,o.i)().fetch({url:m+c,method:d,data:f}));return{data:E}}catch(E){return{error:E}}},i=(0,n.LC)({reducerPath:"togglesApi",baseQuery:r({baseUrl:"/api"}),endpoints:m=>({getManagerState:m.query({query:()=>({url:"/featuremgmt/state"})}),getFeatureToggles:m.query({query:()=>({url:"/featuremgmt"})}),updateFeatureToggles:m.mutation({query:c=>({url:"/featuremgmt",method:"POST",body:{featureToggles:c}})})})}),{useGetManagerStateQuery:g,useGetFeatureTogglesQuery:u,useUpdateFeatureTogglesMutation:l}=i},95831:(G,A,e)=>{"use strict";e.d(A,{A:()=>g});var n=e(85960),a=e(98521),o=e(27436);const i=Object.values(a.B).filter(u=>u!==a.B.None).map(u=>({label:u,value:u}));function g({value:u,onChange:l,"aria-label":m,inputId:c,autoFocus:d,...f}){return n.createElement(o.Ph,{inputId:c,value:u,options:i,onChange:E=>l(E.value),placeholder:"Choose role...","aria-label":m,autoFocus:d,...f})}},72634:(G,A,e)=>{"use strict";e.d(A,{B9:()=>p,CP:()=>I,Dx:()=>s,Fm:()=>O,IS:()=>F,Jk:()=>D,M6:()=>H,Nq:()=>v,PK:()=>f,R5:()=>_,V0:()=>N,Xx:()=>C,Y3:()=>L,_1:()=>R,bN:()=>S,b_:()=>P,h8:()=>y,j4:()=>x,nt:()=>K,oO:()=>z,tQ:()=>h,uV:()=>M,uh:()=>j,xP:()=>Y});var n=e(56375),a=e.n(n),o=e(12537),r=e(11855),i=e(85445),g=e(91),u=e(67954),l=e(49683),m=e(78105),c=e(95162),d=e(44064);function f(k){return async q=>{try{q((0,d.UA)(!1)),await q(E(k)),await q(b(k)),await q(T(k)),u.default.ldapEnabled&&(0,r.v)("ldapsync")&&await q(x()),q((0,d.UA)(!0))}catch(X){if(console.error(X),(0,i.kW)(X)){const te={title:X.data.message,body:X.data.error};q((0,d.sL)(te))}}}}function E(k){return async q=>{const X=await(0,i.i)().get(`/api/users/${k}`,(0,m.y)());q((0,d.pm)(X))}}function v(k){return async q=>{await(0,i.i)().put(`/api/users/${k.id}`,k),q(f(k.id))}}function h(k,q){return async X=>{const te={password:q};await(0,i.i)().put(`/api/admin/users/${k}/password`,te),X(f(k))}}function p(k){return async q=>{await(0,i.i)().post(`/api/admin/users/${k}/disable`),g.E1.push("/admin/users")}}function s(k){return async q=>{await(0,i.i)().post(`/api/admin/users/${k}/enable`),q(f(k))}}function y(k){return async q=>{await(0,i.i)().delete(`/api/admin/users/${k}`),g.E1.push("/admin/users")}}function C(k,q){return async X=>{const te={isGrafanaAdmin:q};await(0,i.i)().put(`/api/admin/users/${k}/permissions`,te),X(f(k))}}function b(k){return async q=>{const X=await(0,i.i)().get(`/api/users/${k}/orgs`);q((0,d.fm)(X))}}function S(k,q,X){return async te=>{const se={loginOrEmail:k.login,role:X};await(0,i.i)().post(`/api/orgs/${q}/users/`,se),te(f(k.id))}}function D(k,q,X){return async te=>{const se={role:X};await(0,i.i)().patch(`/api/orgs/${q}/users/${k}`,se),te(f(k))}}function M(k,q){return async X=>{await(0,i.i)().delete(`/api/orgs/${q}/users/${k}`),X(f(k))}}function T(k){return async q=>{if(!l.Vt.hasPermission(c.AccessControlAction.UsersAuthTokenList))return;const X=await(0,i.i)().get(`/api/admin/users/${k}/auth-tokens`);X.reverse();const te=X.map(se=>({id:se.id,isActive:se.isActive,seenAt:(0,o.E8)(se.seenAt),createdAt:se.createdAt,clientIp:se.clientIp,browser:se.browser,browserVersion:se.browserVersion,os:se.os,osVersion:se.osVersion,device:se.device}));q((0,d.RC)(te))}}function R(k,q){return async X=>{const te={authTokenId:k};await(0,i.i)().post(`/api/admin/users/${q}/revoke-auth-token`,te),X(T(q))}}function O(k){return async q=>{await(0,i.i)().post(`/api/admin/users/${k}/logout`),q(T(k))}}function x(){return async k=>{const q=l.Vt.hasPermission(c.AccessControlAction.LDAPStatusRead);if((0,r.v)("ldapsync")&&q){const X=await(0,i.i)().get("/api/admin/ldap-sync-status");k((0,d.CY)(X))}}}function I(k){return async q=>{await(0,i.i)().post(`/api/admin/ldap/sync/${k}`),q(f(k))}}function L(){return async k=>{if(l.Vt.hasPermission(c.AccessControlAction.LDAPStatusRead))try{const q=await(0,i.i)().get("/api/admin/ldap/status");k((0,d.Ls)(q))}catch(q){if((0,i.kW)(q)){q.isHandled=!0;const X={title:q.data.message,body:q.data.error};k((0,d.y3)(X))}}}}function P(k){return async q=>{try{const X=await(0,i.i)().get(`/api/admin/ldap/${encodeURIComponent(k)}`),{name:te,surname:se,email:de,login:re,isGrafanaAdmin:fe,isDisabled:ie,roles:oe,teams:ue}=X,me={info:{name:te,surname:se,email:de,login:re},permissions:{isGrafanaAdmin:fe,isDisabled:ie},roles:oe,teams:ue};q((0,d.sJ)(me))}catch(X){if((0,i.kW)(X)){X.isHandled=!0;const te={title:X.data.message,body:X.data.error};q((0,d.eq)()),q((0,d.VB)(te))}}}}function N(){return k=>{k((0,d.WO)())}}function F(){return k=>{k((0,d.WO)()),k((0,d.eq)())}}const U=k=>k.map(q=>Array.isArray(q.value)?q.value.map(X=>`${q.name}=${X.value}`).join("&"):`${q.name}=${q.value}`).join("&");function j(){return async(k,q)=>{try{const{perPage:X,page:te,query:se,filters:de,sort:re}=q().userListAdmin;let fe=`/api/users/search?perpage=${X}&page=${te}&query=${se}&${U(de)}`;re&&(fe+=`&sort=${re}`);const ie=await(0,i.i)().get(fe);k((0,d.xh)(ie))}catch(X){(0,d.k7)(),console.error(X)}}}const V=(0,n.debounce)(k=>k(j()),500);function _(k){return async q=>{q((0,d.tZ)()),q((0,d.aj)(k)),V(q)}}function H(k){return async q=>{q((0,d.tZ)()),q((0,d.qz)(k)),V(q)}}function z(k){return async q=>{q((0,d.tZ)()),q((0,d.PJ)(k)),q(j())}}function K({sortBy:k}){const q=k.length?`${k[0].id}-${k[0].desc?"desc":"asc"}`:void 0;return async(X,te)=>{te().userListAdmin.sort!==q&&(X((0,d.tZ)()),X((0,d.UL)(q)),X(j()))}}function Y(){return async(k,q)=>{try{let X="/api/anonymous/devices";const te=await(0,i.i)().get(X);k((0,d.QO)({devices:te}))}catch(X){(0,d.k7)(),console.error(X)}}}},44064:(G,A,e)=>{"use strict";e.d(A,{CY:()=>l,Ls:()=>g,PJ:()=>O,QO:()=>F,RC:()=>p,UA:()=>s,UL:()=>I,VB:()=>m,WO:()=>r,ZP:()=>j,aj:()=>R,eq:()=>i,fm:()=>h,k7:()=>T,pm:()=>v,qz:()=>x,sJ:()=>c,sL:()=>y,tZ:()=>M,xh:()=>D,y3:()=>u});var n=e(20079);const a={connectionInfo:[],syncInfo:void 0,user:void 0,connectionError:void 0,userError:void 0},o=(0,n.oM)({name:"ldap",initialState:a,reducers:{ldapConnectionInfoLoadedAction:(V,_)=>({...V,ldapError:void 0,connectionInfo:_.payload}),ldapFailedAction:(V,_)=>({...V,ldapError:_.payload}),ldapSyncStatusLoadedAction:(V,_)=>({...V,syncInfo:_.payload}),userMappingInfoLoadedAction:(V,_)=>({...V,user:_.payload,userError:void 0}),userMappingInfoFailedAction:(V,_)=>({...V,user:void 0,userError:_.payload}),clearUserMappingInfoAction:(V,_)=>({...V,user:void 0}),clearUserErrorAction:(V,_)=>({...V,userError:void 0})}}),{clearUserErrorAction:r,clearUserMappingInfoAction:i,ldapConnectionInfoLoadedAction:g,ldapFailedAction:u,ldapSyncStatusLoadedAction:l,userMappingInfoFailedAction:m,userMappingInfoLoadedAction:c}=o.actions,d=o.reducer,f={user:void 0,sessions:[],orgs:[],isLoading:!0,error:void 0},E=(0,n.oM)({name:"userAdmin",initialState:f,reducers:{userProfileLoadedAction:(V,_)=>({...V,user:_.payload}),userOrgsLoadedAction:(V,_)=>({...V,orgs:_.payload}),userSessionsLoadedAction:(V,_)=>({...V,sessions:_.payload}),userAdminPageLoadedAction:(V,_)=>({...V,isLoading:!_.payload}),userAdminPageFailedAction:(V,_)=>({...V,error:_.payload,isLoading:!1})}}),{userProfileLoadedAction:v,userOrgsLoadedAction:h,userSessionsLoadedAction:p,userAdminPageLoadedAction:s,userAdminPageFailedAction:y}=E.actions,C=E.reducer,b={users:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!1}],isLoading:!0},S=(0,n.oM)({name:"userListAdmin",initialState:b,reducers:{usersFetched:(V,_)=>{const{totalCount:H,perPage:z,...K}=_.payload,Y=Math.ceil(H/z);return{...V,...K,totalPages:Y,perPage:z,showPaging:Y>1,isLoading:!1}},usersFetchBegin:V=>({...V,isLoading:!0}),usersFetchEnd:V=>({...V,isLoading:!1}),queryChanged:(V,_)=>({...V,query:_.payload,page:0}),pageChanged:(V,_)=>({...V,page:_.payload}),sortChanged:(V,_)=>({...V,page:0,sort:_.payload}),filterChanged:(V,_)=>{const{name:H,value:z}=_.payload;return V.filters.some(K=>K.name===H)?{...V,page:0,filters:V.filters.map(K=>K.name===H?{...K,value:z}:K)}:{...V,page:0,filters:[...V.filters,_.payload]}}}}),{usersFetched:D,usersFetchBegin:M,usersFetchEnd:T,queryChanged:R,pageChanged:O,filterChanged:x,sortChanged:I}=S.actions,L=S.reducer,P={devices:[]},N=(0,n.oM)({name:"userListAnonymousDevices",initialState:P,reducers:{usersAnonymousDevicesFetched:(V,_)=>{const{devices:H}=_.payload;return{...V,devices:H,isLoading:!1}}}}),{usersAnonymousDevicesFetched:F}=N.actions,U=N.reducer,j={ldap:d,userAdmin:C,userListAdmin:L,userListAnonymousDevices:U}},3016:(G,A,e)=>{"use strict";e.d(A,{Yb:()=>a,d5:()=>r});var n=e(90857);const a=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function o(){const i=n.config.licenseInfo?.trialExpiry;return!!(i&&i>0)}const r=()=>o()&&n.config.featureToggles.featureHighlights},34524:(G,A,e)=>{"use strict";e.d(A,{$:()=>u,Z:()=>y});var n=e(56375),a=e.n(n),o=e(69482);const r=new o.zU({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","2h","6h","12h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]}),i=[{text:"Query",value:"query"}],g={alerting:1,firing:1,no_data:2,pending:3,ok:4,paused:5,inactive:5};var u=(C=>(C.IsAbove="gt",C.IsBelow="lt",C.IsOutsideRange="outside_range",C.IsWithinRange="within_range",C.HasNoValue="no_value",C))(u||{});const l=[{value:"gt",text:"IS ABOVE"},{value:"lt",text:"IS BELOW"},{value:"outside_range",text:"IS OUTSIDE RANGE"},{value:"within_range",text:"IS WITHIN RANGE"},{value:"no_value",text:"HAS NO VALUE"}],m=[{text:"OR",value:"or"},{text:"AND",value:"and"}],c=[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"diff_abs()",value:"diff_abs"},{text:"percent_diff()",value:"percent_diff"},{text:"percent_diff_abs()",value:"percent_diff_abs"},{text:"count_non_null()",value:"count_non_null"}],d=[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],f=[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}];function E(C){const b=new o.zU({type:C.type,defaultParams:[]});return new o.XN(C,b)}function v(C){return C.toLowerCase().replace(/_/g,"").split(" ")[0]}function h(C){switch(v(C)){case"normal":case"ok":return{text:"OK",iconClass:"heart",stateClass:"alert-state-ok"};case"alerting":return{text:"ALERTING",iconClass:"heart-break",stateClass:"alert-state-critical"};case"nodata":return{text:"NO DATA",iconClass:"question-circle",stateClass:"alert-state-warning"};case"paused":return{text:"PAUSED",iconClass:"pause",stateClass:"alert-state-paused"};case"pending":return{text:"PENDING",iconClass:"hourglass",stateClass:"alert-state-warning"};case"firing":return{text:"FIRING",iconClass:"fire",stateClass:""};case"inactive":return{text:"INACTIVE",iconClass:"check",stateClass:""};case"error":return{text:"ERROR",iconClass:"heart-break",stateClass:"alert-state-critical"};case"unknown":default:return{text:"UNKNOWN",iconClass:"question-circle",stateClass:".alert-state-paused"}}}function p(C,b){return(0,n.reduce)(C,(S,D)=>(D.metric!==void 0&&D.value!==void 0&&S.push(D.metric+"="+D.value),D.Metric!==void 0&&D.Value!==void 0&&S.push(D.Metric+"="+D.Value),S),[]).join(b)}function s(C){return(0,n.isArray)(C.data)?p(C.data,", "):(0,n.isArray)(C.data.evalMatches)?p(C.data.evalMatches,", "):C.data.error?"Error: "+C.data.error:""}const y={alertQueryDef:r,getStateDisplayModel:h,conditionTypes:i,evalFunctions:l,evalOperators:m,noDataModes:d,executionErrorModes:f,reducerTypes:c,createReducerPart:E,getAlertAnnotationInfo:s,alertStateSortScore:g}},69482:(G,A,e)=>{"use strict";e.d(A,{C7:()=>g,D:()=>i,XN:()=>r,zU:()=>o});var n=e(56375),a=e.n(n);class o{constructor(c){this.type=c.type,this.params=c.params,this.defaultParams=c.defaultParams,this.renderer=c.renderer,this.category=c.category,this.addStrategy=c.addStrategy}}class r{constructor(c,d){if(this.part=c,this.def=d,!this.def)throw{message:"Could not find query part "+c.type};c.params=c.params||(0,n.clone)(this.def.defaultParams),this.params=c.params,this.text="",this.updateText()}render(c){return this.def.renderer(this,c)}hasMultipleParamsInString(c,d){return c.indexOf(",")===-1?!1:this.def.params[d+1]&&this.def.params[d+1].optional}updateParam(c,d){if(this.hasMultipleParamsInString(c,d)){(0,n.each)(c.split(","),(f,E)=>{this.updateParam(f.trim(),E)});return}c===""&&this.def.params[d].optional?this.params.splice(d,1):this.params[d]=c,this.part.params=this.params,this.updateText()}updateText(){if(this.params.length===0){this.text=this.def.type+"()";return}let c=this.def.type+"(";c+=this.params.join(", "),c+=")",this.text=c}}function i(m,c){const d=m.def.type+"(",f=(0,n.map)(m.params,(E,v)=>{const h=m.def.params[v];return h.type==="time"&&E==="auto"&&(E="$__interval"),h.quote==="single"?"'"+E+"'":h.quote==="double"?'"'+E+'"':E});return c&&f.unshift(c),d+f.join(", ")+")"}function g(m,c){return c+" "+m.params[0]}function u(m,c){return m.params[0]}function l(m,c){return'"'+m.params[0]+'"'}},76151:(G,A,e)=>{"use strict";e.d(A,{ZP:()=>D,Gr:()=>c,gz:()=>v,Oc:()=>h,K:()=>y,J0:()=>C,T2:()=>s,ql:()=>p});var n=e(20079),a=e(85745),o=e(83205),r=e(30422),i=e(5970);const u=(0,o.combineReducers)({dataSources:(0,r.jK)("dataSources",i.nw,({rulesSourceName:R})=>R).reducer,promRules:(0,r.jK)("promRules",i.y6,({rulesSourceName:R})=>R).reducer,rulerRules:(0,r.jK)("rulerRules",i.UR,({rulesSourceName:R})=>R).reducer,silences:(0,r.jK)("silences",i.je,R=>R).reducer,ruleForm:(0,o.combineReducers)({saveRule:(0,r.i6)("saveRule",i.wy).reducer,existingRule:(0,r.i6)("existingRule",i.on).reducer}),grafanaNotifiers:(0,r.i6)("grafanaNotifiers",i.Vj).reducer,saveAMConfig:(0,r.i6)("saveAMConfig",i.mM).reducer,deleteAMConfig:(0,r.i6)("deleteAMConfig",i.Nc).reducer,updateSilence:(0,r.i6)("updateSilence",i.QY).reducer,amAlerts:(0,r.jK)("amAlerts",i.dB,R=>R).reducer,folders:(0,r.jK)("folders",i.vL,R=>R).reducer,amAlertGroups:(0,r.jK)("amAlertGroups",i.mS,R=>R).reducer,testReceivers:(0,r.i6)("testReceivers",i.D8).reducer,updateLotexNamespaceAndGroup:(0,r.i6)("updateLotexNamespaceAndGroup",i.hv).reducer,externalAlertmanagers:(0,o.combineReducers)({alertmanagerConfig:(0,r.i6)("alertmanagerConfig",i.wE).reducer,discoveredAlertmanagers:(0,r.i6)("discoveredAlertmanagers",i.zy).reducer}),managedAlertStateHistory:(0,r.i6)("managedAlertStateHistory",i.Ms).reducer});var l=e(34524);const m={items:[],searchQuery:"",isLoading:!1},c={notificationChannelTypes:[],notificationChannel:{},notifiers:[]};function d(R,O){const x=l.Z.getStateDisplayModel(O),I={...R,stateText:x.text,stateIcon:x.iconClass,stateClass:x.stateClass,stateAge:(0,a.CQ)(R.newStateDate).fromNow(!0)};return I.state!=="paused"&&(I.executionError&&(I.info="Execution Error: "+I.executionError),I.evalData&&I.evalData.noData&&(I.info="Query returned no data")),I}const f=(0,n.oM)({name:"alertRules",initialState:m,reducers:{loadAlertRules:R=>({...R,isLoading:!0}),loadedAlertRules:(R,O)=>{const I=O.payload.map(L=>d(L,L.state));return{...R,items:I,isLoading:!1}},setSearchQuery:(R,O)=>({...R,searchQuery:O.payload})}}),E=(0,n.oM)({name:"notificationChannel",initialState:c,reducers:{setNotificationChannels:(R,O)=>({...R,notificationChannelTypes:T(O.payload),notifiers:O.payload}),notificationChannelLoaded:(R,O)=>{const x=O.payload,L=R.notifiers.find(P=>P.type===x.type).options.filter(P=>P.secure);return L.length>0&&L.some(P=>x.settings[P.propertyName]!=="")?M(R,O.payload,L):{...R,notificationChannel:x}},resetSecureField:(R,O)=>({...R,notificationChannel:{...R.notificationChannel,secureFields:{...R.notificationChannel.secureFields,[O.payload]:!1}}})}}),{loadAlertRules:v,loadedAlertRules:h,setSearchQuery:p}=f.actions,{setNotificationChannels:s,notificationChannelLoaded:y,resetSecureField:C}=E.actions,b=f.reducer,S=E.reducer,D={alertRules:b,notificationChannel:S,unifiedAlerting:u};function M(R,O,x){const I={},L={};return x.forEach(P=>{L[P.propertyName]=O.settings[P.propertyName],I[P.propertyName]=""}),{...R,notificationChannel:{...O,settings:{...O.settings,...I},secureSettings:{...L}}}}function T(R){return R.map(O=>({value:O.type,label:O.name,...O,typeName:O.type})).sort((O,x)=>O.name>x.name?1:-1)}},34456:(G,A,e)=>{"use strict";e.d(A,{$I:()=>C,Ej:()=>M,Io:()=>f,PN:()=>d,Z0:()=>D,bA:()=>v,pM:()=>E,yT:()=>p,z7:()=>c});var n=e(85745),a=e(74091),o=e(54574),r=e(45465),i=e(85445),g=e(90857),u=e(43183),l=e(49683);const m=7,c={filterByLabel:"filtering alert instances by label",loadedList:"loaded Alert Rules list",leavingRuleGroupEdit:"leaving rule group edit without saving",alertRuleFromPanel:"creating alert rule from panel",alertRuleFromScratch:"creating alert rule from scratch",recordingRuleFromScratch:"creating recording rule from scratch",clickingAlertStateFilters:"clicking alert state filters",cancelSavingAlertRule:"user canceled alert rule creation",successSavingAlertRule:"alert rule saved successfully",unknownMessageFromError:"unknown messageFromError"};function d(T,R={}){g.config.grafanaJavascriptAgent.enabled&&a.s.api.pushLog([T],{level:o.in.INFO,context:{...R,module:"Alerting"}})}function f(T,R={}){(0,r.H)(T,{...R,module:"Alerting"})}function E(T,R,O){return async function(...x){const I=performance.now(),L=await T(...x);return d(R,{loadTimeMs:(performance.now()-I).toFixed(0),...O}),L}}function v(T,R,O){return async(...x)=>{const I=performance.now(),L=await T(...x),{namespacesCount:P,groupsCount:N,rulesCount:F}=h(L);return d(R,{loadTimeMs:(performance.now()-I).toFixed(0),namespacesCount:P,groupsCount:N,rulesCount:F,...O}),L}}function h(T){const R=T.length,O=T.flatMap(L=>L.groups).length,x=T.flatMap(L=>L.groups).flatMap(L=>L.rules).length;return{namespacesCount:R.toFixed(0),groupsCount:O.toFixed(0),rulesCount:x.toFixed(0)}}function p(T,R,O){return async(...x)=>{const I=performance.now(),L=await T(...x),{namespacesCount:P,groupsCount:N,rulesCount:F}=s(L);return d(R,{loadTimeMs:(performance.now()-I).toFixed(0),namespacesCount:P,groupsCount:N,rulesCount:F,...O}),L}}function s(T){const R=Object.keys(T).length,O=Object.values(T).flatMap(I=>I),x=O.flatMap(I=>I.rules);return{namespacesCount:R.toFixed(0),groupsCount:O.length.toFixed(0),rulesCount:x.length.toFixed(0)}}async function y(){try{const{createdAt:T}=await(0,i.i)().get("/api/user"),R=(0,n.CQ)().subtract(m,"days"),O=(0,n.CQ)(T);return R.isBefore(O)}catch{return!0}}const C=async(T={grafana_version:g.config.buildInfo.version,org_id:l.Vt.user.orgId,user_id:l.Vt.user.id})=>{await y()||(0,u.ff)("grafana_alerting_navigation",T)},b=async T=>{await y()||reportInteraction("grafana_alerting_rule_creation",T)},S=async T=>{await y()||reportInteraction("grafana_alerting_rule_aborted",T)},D=async T=>{await y()||(0,u.ff)("grafana_alerting_rule_form_error",T)},M=async T=>{const R={grafana_version:g.config.buildInfo.version,org_id:l.Vt.user.orgId,user_id:l.Vt.user.id};(0,u.ff)("grafana_alerting_insights",{...R,...T})}},14411:(G,A,e)=>{"use strict";e.d(A,{alertRuleApi:()=>m});var n=e(76679),a=e(658),o=e(9001),r=e(58712),i=e(65107),g=e(30264);const u="/api/v1/rule/test/grafana",l="api/prometheus/grafana/api/v1/rules",m=r.C.injectEndpoints({endpoints:c=>({preview:c.mutation({query:({alertQueries:d,condition:f,customLabels:E,folder:v,alertName:h,alertUid:p})=>({url:u,data:{rule:{grafana_alert:{data:d,condition:f,no_data_state:"Alerting",title:h,uid:p??"N/A"},for:"0s",labels:(0,a.bR)(E),annotations:{}},folderUid:v.uid,folderTitle:v.title},method:"POST"})}),prometheusRulesByNamespace:c.query({query:({limitAlerts:d,identifier:f,filter:E,state:v,matcher:h})=>{const p=new URLSearchParams;d&&p.set("limit_alerts",String(d)),f&&((0,o.qE)(f)||(0,o.E4)(f))&&(p.set("file",f.namespace),p.set("rule_group",f.groupName));const s=(0,i.hd)(p,E);return{url:l,params:(0,i.Tb)(s,v,h)}},transformResponse:d=>(0,i.lL)(d.data.groups,n.GC)}),prometheusRuleNamespaces:c.query({query:({ruleSourceName:d,namespace:f,groupName:E,ruleName:v})=>{const h={};return h.file=f,h.rule_group=E,h.rule_name=v,{url:`api/prometheus/${(0,n.gt)(d)}/api/v1/rules`,params:h}},transformResponse:(d,f,E)=>(0,i.lL)(d.data.groups,E.ruleSourceName)}),rulerRules:c.query({query:({rulerConfig:d,filter:f})=>{const{path:E,params:v}=(0,g.IN)(d).rules(f);return{url:E,params:v}}}),rulerRuleGroup:c.query({query:({rulerConfig:d,namespace:f,group:E})=>{const{path:v,params:h}=(0,g.IN)(d).namespaceGroup(f,E);return{url:v,params:h}}}),exportRules:c.query({query:({format:d,folderUid:f,group:E,ruleUid:v})=>({url:"/api/ruler/grafana/api/v1/export/rules",params:{format:d,folderUid:f,group:E,ruleUid:v},responseType:"text"}),keepUnusedDataFor:0}),exportReceiver:c.query({query:({receiverName:d,decrypt:f,format:E})=>({url:"/api/v1/provisioning/contact-points/export/",params:{format:E,decrypt:f,name:d},responseType:"text"}),keepUnusedDataFor:0}),exportReceivers:c.query({query:({decrypt:d,format:f})=>({url:"/api/v1/provisioning/contact-points/export/",params:{format:f,decrypt:d},responseType:"text"}),keepUnusedDataFor:0}),exportPolicies:c.query({query:({format:d})=>({url:"/api/v1/provisioning/policies/export/",params:{format:d},responseType:"text"}),keepUnusedDataFor:0}),exportModifiedRuleGroup:c.mutation({query:({payload:d,format:f,nameSpace:E})=>({url:`/api/ruler/grafana/api/v1/rules/${E}/export/`,params:{format:f},responseType:"text",data:d,method:"POST"})})})})},58712:(G,A,e)=>{"use strict";e.d(A,{C:()=>g});var n=e(15995),a=e(81838),o=e(85445),r=e(34456);const i=()=>async u=>{try{const l=performance.now(),{data:m,...c}=await(0,a.n)((0,o.i)().fetch(u));return(0,r.PN)("Request finished",{loadTimeMs:(performance.now()-l).toFixed(0),url:u.url,method:u.method??"",responseStatus:c.statusText}),{data:m,meta:c}}catch(l){return{error:l}}},g=(0,n.LC)({reducerPath:"alertingApi",baseQuery:i(),tagTypes:["AlertmanagerChoice","AlertmanagerConfiguration","OnCallIntegrations"],endpoints:()=>({})})},49805:(G,A,e)=>{"use strict";e.d(A,{$l:()=>S,Bp:()=>h,CN:()=>l,Ch:()=>g,QK:()=>f,U7:()=>m,UK:()=>v,XK:()=>E,Zo:()=>D,dx:()=>c,iT:()=>d,oy:()=>u,tK:()=>b});var n=e(81838),a=e(173),o=e(23757),r=e(85445),i=e(76679);async function g(T){try{const R=await(0,n.n)((0,r.i)().fetch({url:`/api/alertmanager/${(0,i.gt)(T)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}));return{template_files:R.data.template_files??{},template_file_provenances:R.data.template_file_provenances??{},alertmanager_config:R.data.alertmanager_config??{},last_applied:R.data.last_applied,id:R.data.id}}catch(R){if(T===i.GC&&(0,r.kW)(R)&&R.data?.message?.includes("could not find an Alertmanager configuration"))return{template_files:{},alertmanager_config:{}};throw R}}async function u(T,R){await(0,n.n)((0,r.i)().fetch({method:"POST",url:`/api/alertmanager/${(0,i.gt)(T)}/config/api/v1/alerts`,data:R,showErrorAlert:!1,showSuccessAlert:!1}))}async function l(T){await(0,n.n)((0,r.i)().fetch({method:"DELETE",url:`/api/alertmanager/${(0,i.gt)(T)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}))}async function m(T){return(await(0,n.n)((0,r.i)().fetch({url:`/api/alertmanager/${(0,i.gt)(T)}/api/v2/silences`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function c(T,R){return(await(0,n.n)((0,r.i)().fetch({url:`/api/alertmanager/${(0,i.gt)(T)}/api/v2/silences`,data:R,showErrorAlert:!1,showSuccessAlert:!1,method:"POST"}))).data}async function d(T,R){await(0,r.i)().delete(`/api/alertmanager/${(0,i.gt)(T)}/api/v2/silence/${encodeURIComponent(R)}`)}async function f(T,R,O=!0,x=!0,I=!0){const L=a.Cj.toUrlParams({silenced:O,active:x,inhibited:I})+R?.map(N=>`filter=${encodeURIComponent(`${M(N.name)}=${N.isRegex?"~":""}"${M(N.value)}"`)}`).join("&")||"";return(await(0,n.n)((0,r.i)().fetch({url:`/api/alertmanager/${(0,i.gt)(T)}/api/v2/alerts`+(L?"?"+L:""),showErrorAlert:!1,showSuccessAlert:!1}))).data}async function E(T){return(await(0,n.n)((0,r.i)().fetch({url:`/api/alertmanager/${(0,i.gt)(T)}/api/v2/alerts/groups`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function v(T){return(await(0,n.n)((0,r.i)().fetch({url:`/api/alertmanager/${(0,i.gt)(T)}/api/v2/status`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function h(T,R,O){const x={receivers:R,alert:O};try{const I=await(0,n.n)((0,r.i)().fetch({method:"POST",data:x,url:`/api/alertmanager/${(0,i.gt)(T)}/config/api/v1/receivers/test`,showErrorAlert:!1,showSuccessAlert:!1}));if(p(I.data))throw new Error(C(I.data))}catch(I){throw(0,r.kW)(I)&&s(I.data)&&p(I.data)?new Error(C(I.data)):I}}function p(T){return T.receivers.some(R=>R.grafana_managed_receiver_configs.some(O=>O.status==="failed"))}function s(T){return(0,o.Kn)(T)&&"receivers"in T&&Array.isArray(T.receivers)?T.receivers.every(y):!1}function y(T){return(0,o.Kn)(T)&&"name"in T&&typeof T.name=="string"&&"grafana_managed_receiver_configs"in T&&Array.isArray(T.grafana_managed_receiver_configs)}function C(T){return T.receivers.flatMap(R=>R.grafana_managed_receiver_configs.filter(O=>O.status==="failed").map(O=>O.error??"Unknown error.")).join("; ")}async function b(T){await(0,n.n)((0,r.i)().fetch({method:"POST",data:T,url:"/api/v1/ngalert/admin_config",showErrorAlert:!1,showSuccessAlert:!1})).then(()=>{D()})}async function S(){return(await(0,n.n)((0,r.i)().fetch({method:"GET",url:"/api/v1/ngalert/alertmanagers"}))).data}async function D(){return(await(0,n.n)((0,r.i)().fetch({method:"GET",url:"/api/v1/ngalert/admin_config",showErrorAlert:!1}))).data}function M(T){return T.replace(/"/g,'\\"')}},81828:(G,A,e)=>{"use strict";e.d(A,{alertmanagerApi:()=>v});var n=e(56375),a=e.n(n),o=e(59767),r=e(34456),i=e(98724),g=e(76679),u=e(77294),l=e(30422),m=e(58712),c=e(49805),d=e(80679);const f=10,E=30*1e3,v=m.C.injectEndpoints({endpoints:h=>({getAlertmanagerAlerts:h.query({query:({amSourceName:p,filter:s})=>{const y=s?.matchers?.filter(R=>R.name&&R.value).map(R=>`${R.name}${(0,i.zy)(R)}${(0,u.sM)(R.value)}`),{silenced:C,inhibited:b,unprocessed:S,active:D}=s||{},M=Object.fromEntries(Object.entries({silenced:C,active:D,inhibited:b,unprocessed:S}).filter(([R,O])=>O!==void 0)),T={filter:y};return M&&Object.keys(M).forEach(R=>{T[R]=M[R]}),{url:`/api/alertmanager/${(0,g.gt)(p)}/api/v2/alerts`,params:T}}}),getAlertmanagerAlertGroups:h.query({query:({amSourceName:p})=>({url:`/api/alertmanager/${(0,g.gt)(p)}/api/v2/alerts/groups`})}),grafanaNotifiers:h.query({query:()=>({url:"/api/alert-notifiers"})}),getAlertmanagerChoiceStatus:h.query({query:()=>({url:"/api/v1/ngalert"}),providesTags:["AlertmanagerChoice"]}),getExternalAlertmanagerConfig:h.query({query:()=>({url:"/api/v1/ngalert/admin_config"}),providesTags:["AlertmanagerChoice"]}),getExternalAlertmanagers:h.query({query:()=>({url:"/api/v1/ngalert/alertmanagers"}),transformResponse:p=>p.data}),saveExternalAlertmanagersConfig:h.mutation({query:p=>({url:"/api/v1/ngalert/admin_config",method:"POST",data:p}),invalidatesTags:["AlertmanagerChoice"]}),getValidAlertManagersConfig:h.query({query:()=>({url:`/api/alertmanager/${(0,g.gt)(g.GC)}/config/history?limit=${f}`})}),resetAlertManagerConfigToOldVersion:h.mutation({query:p=>({url:`/api/alertmanager/${(0,g.gt)(g.GC)}/config/history/${p.id}/_activate`,method:"POST"})}),getAlertmanagerConfiguration:h.query({queryFn:async p=>{const s=p===g.GC;if((0,g.RY)(p))return(0,l.$b)((0,c.UK)(p).then(T=>({data:{alertmanager_config:T.config,template_files:{}}})));const{data:C}=await(0,o.WI)(d.T.endpoints.discoverAmFeatures.initiate({amSourceName:p})),b={alertmanager_config:{},template_files:{},template_file_provenances:{}},S=C?.lazyConfigInit??!1,D=(0,r.pM)(c.Ch,`[${p}] Alertmanager config loaded`,{dataSourceName:p,thunk:"unifiedalerting/fetchAmConfig"}),M=(0,u.fm)(()=>D(p),T=>!!(0,l.kk)(T)?.includes("alertmanager storage object not found")&&!S,E).then(T=>s?T:(0,n.isEmpty)(T.alertmanager_config)&&(0,n.isEmpty)(T.template_files)?(0,c.UK)(p).then(O=>({alertmanager_config:O.config,template_files:{},template_file_provenances:T.template_file_provenances,last_applied:T.last_applied,id:T.id})):T).then(T=>T??b).then(T=>({data:T})).catch(T=>{if(S&&(0,l.kk)(T)?.includes("alertmanager storage object not found"))return{data:b};throw T});return(0,l.$b)(M).catch(T=>({error:T,data:void 0}))},providesTags:["AlertmanagerConfiguration"]}),updateAlertmanagerConfiguration:h.mutation({query:({selectedAlertmanager:p,config:s,...y})=>({url:`/api/alertmanager/${(0,g.gt)(p)}/config/api/v1/alerts`,method:"POST",data:s,...y}),invalidatesTags:["AlertmanagerConfiguration"]}),getContactPointsStatus:h.query({query:()=>({url:`/api/alertmanager/${(0,g.gt)(g.GC)}/config/api/v1/receivers`}),transformResponse:p=>{const s=y=>y.startsWith("0001-01-01");return p.map(y=>({...y,integrations:y.integrations.map(C=>{const b=s(C.lastNotifyAttempt);return{...C,lastNotifyAttempt:b?"":C.lastNotifyAttempt,lastNotifyAttemptDuration:b?"":C.lastNotifyAttemptDuration}})}))}})})})},17536:(G,A,e)=>{"use strict";e.d(A,{C$:()=>l,SJ:()=>d,Zy:()=>c});var n=e(81838),a=e(85445),o=e(25119),r=e(46002),i=e(76679),g=e(65107),u=e(30264);async function l(s){if(s===i.GC)return{features:{rulerApiEnabled:!0}};const y=(0,i.c$)(s);if(!y)throw new Error(`Cannot find data source configuration for ${s}`);const{url:C,name:b,type:S}=y;if(!C)throw new Error("The data source url cannot be empty.");if(S!=="prometheus"&&S!=="loki")throw new Error(`The build info request is not available for ${S}. Only 'prometheus' and 'loki' are supported`);return m({name:b,url:C,type:S})}async function m(s){const{url:y,name:C,type:b}=s,S=b==="loki"?void 0:await E(y);if(!(S!==void 0)){if(!await v(C))throw new Error(`Unable to fetch alert rules. Is the ${C} data source properly configured?`);const R=await h(C);return{application:o.T8.Cortex,features:{rulerApiEnabled:R}}}const{features:M}=S.data;return M?{application:o.T8.Mimir,features:{rulerApiEnabled:M?.ruler_config_api==="true"}}:{application:o.T8.Prometheus,features:{rulerApiEnabled:!1}}}async function c(s){if(s===i.GC)return{lazyConfigInit:!1};const y=f(s),{url:C,type:b}=y;if(!C)throw new Error("The data source url cannot be empty.");if(b!=="alertmanager")throw new Error(`Alertmanager feature discovery is not available for ${b}. Only 'alertmanager' type is supported`);return await d(C)}async function d(s){try{return{lazyConfigInit:(await E(s))?.data?.application==="Grafana Mimir"}}catch{return{lazyConfigInit:!1}}}function f(s){const y=(0,i.c$)(s);if(!y)throw new Error(`Cannot find data source configuration for ${s}`);return y}async function E(s){return(await(0,n.n)((0,a.i)().fetch({url:`${s}/api/v1/status/buildinfo`,showErrorAlert:!1,showSuccessAlert:!1})).catch(C=>{if(!("status"in C&&C.status===404))throw C}))?.data}async function v(s){try{return await(0,g.j)(s),!0}catch{return!1}}async function h(s){try{return await(0,u.jw)(s),!0}catch(y){if(p(y))return!1;throw y}}function p(s){return(0,a.kW)(s)?s.data.message?.includes("GetRuleGroup unsupported in rule local store")||s.data.message?.includes("page not found")||s.data.message?.includes(r.jZ):s instanceof Error&&s.message?.includes("404 from rules config endpoint")}},80679:(G,A,e)=>{"use strict";e.d(A,{T:()=>g});var n=e(25119),a=e(34456),o=e(76679),r=e(58712),i=e(17536);const g=r.C.injectEndpoints({endpoints:u=>({discoverAmFeatures:u.query({queryFn:async({amSourceName:l})=>{try{return{data:await(0,i.Zy)(l)}}catch(m){return{error:m}}}}),discoverDsFeatures:u.query({queryFn:async({rulesSourceName:l})=>{const m=(0,o.VX)(l);if(!m)return{error:new Error(`Missing data source configuration for ${l}`)};const d=await(0,a.pM)(i.C$,`[${l}] Rules source features discovered`,{dataSourceName:l,endpoint:"unifiedalerting/featureDiscoveryApi/discoverDsFeatures"})(m.name);return{data:{rulerConfig:d.features.rulerApiEnabled?{dataSourceName:m.name,apiVersion:d.application===n.T8.Cortex?"legacy":"config"}:void 0}}}})})})},20741:(G,A,e)=>{"use strict";e.d(A,{QE:()=>l,i9:()=>r});var n=e(81838),a=e(85445),o=e(76679);function r(){return(0,a.i)().get("/api/alert-notifiers")}const i=m=>{const c=m.match(/^(\w+)(\[\d+\])?$/);return c?{type:c[1],index:c[2]}:{type:m,index:void 0}},g=m=>{const c={receivers:{},errorCount:0};m.forEach(f=>{c.receivers[f.name]={active:f.active,notifiers:{},errorCount:0};const E=c.receivers[f.name];f.integrations.forEach(v=>{!!v?.lastNotifyAttemptError&&(E.errorCount+=1);const p=u(v.name);p&&(E.notifiers[p]||(E.notifiers[p]=[]),E.notifiers[p].push(v))})});const d=Object.values(c.receivers).reduce((f,E)=>f+E.errorCount,0);return{...c,errorCount:d}},u=m=>i(m)?.type;async function l(m){try{const c=await(0,n.n)((0,a.i)().fetch({url:`/api/alertmanager/${(0,o.gt)(m)}/config/api/v1/receivers`,showErrorAlert:!1,showSuccessAlert:!1}));return g(c.data)}catch{return g([])}}},65107:(G,A,e)=>{"use strict";e.d(A,{Tb:()=>u,hd:()=>g,j:()=>m,lL:()=>l});var n=e(81838),a=e(85445),o=e(76679),r=e(9001);function i(c){const{dataSourceName:d,limitAlerts:f,identifier:E}=c;return{rules:(v,h,p)=>{const s=new URLSearchParams;d===o.GC&&f&&s.set("limit_alerts",String(f)),E&&((0,r.qE)(E)||(0,r.E4)(E))&&(s.set("file",E.namespace),s.set("rule_group",E.groupName));const y=g(s,v);return{url:`/api/prometheus/${(0,o.gt)(d)}/api/v1/rules`,params:u(y,h,p)}}}}function g(c,d){return d?.dashboardUID&&(c.set("dashboard_uid",d.dashboardUID),d?.panelId&&c.set("panel_id",String(d.panelId))),Object.fromEntries(c)}function u(c,d,f){let E={...c};if(d?.length&&(E={...E,state:d}),f?.length){const v=f.map(h=>JSON.stringify(h));E={...E,matcher:v}}return E}const l=(c,d)=>{const f={};return c.forEach(E=>{E.rules.forEach(v=>{v.query=v.query||""}),f[E.file]?f[E.file].groups.push(E):f[E.file]={dataSourceName:d,name:E.file,groups:[E]}}),Object.values(f)};async function m(c,d,f,E,v,h){if(d?.dashboardUID&&c!==o.GC)throw new Error("Filtering by dashboard UID is only supported for Grafana Managed rules.");const{url:p,params:s}=i({dataSourceName:c,limitAlerts:f,identifier:h}).rules(d,v,E),y=await(0,n.n)((0,a.i)().fetch({url:p,params:s,showErrorAlert:!1,showSuccessAlert:!1})).catch(C=>{throw"status"in C&&C.status===404?new Error("404 from rule state endpoint. Perhaps ruler API is not enabled?"):C});return l(y.data.data.groups,c)}},30264:(G,A,e)=>{"use strict";e.d(A,{BC:()=>E,IN:()=>u,P4:()=>l,jJ:()=>f,jw:()=>d,m6:()=>m,sz:()=>y});var n=e(81838),a=e(23757),o=e(85445),r=e(46002),i=e(76679),g=e(65107);function u(C){const S=`${`/api/ruler/${(0,i.gt)(C.dataSourceName)}`}/api/v1/rules`,D=new URLSearchParams;return D.set("subtype",C.apiVersion==="legacy"?"cortex":"mimir"),{rules:M=>{const T=(0,g.hd)(D,M);return{path:`${S}`,params:T}},namespace:M=>({path:`${S}/${encodeURIComponent(M)}`,params:Object.fromEntries(D)}),namespaceGroup:(M,T)=>({path:`${S}/${encodeURIComponent(M)}/${encodeURIComponent(T)}`,params:Object.fromEntries(D)})}}async function l(C,b,S){const{path:D,params:M}=u(C).namespace(b);await(0,n.n)((0,o.i)().fetch({method:"POST",url:D,data:S,showErrorAlert:!1,showSuccessAlert:!1,params:M}))}async function m(C,b){if(b?.dashboardUID&&C.dataSourceName!==i.GC)throw new Error("Filtering by dashboard UID is only supported by Grafana.");const{path:S,params:D}=u(C).rules(b);return v(S,{},D)}async function c(C,b){const{path:S,params:D}=u(C).namespace(b);return(await v(S,{},D))[b]||[]}async function d(C){return v(`/api/ruler/${(0,i.gt)(C)}/api/v1/rules/test/test`,null)}async function f(C,b,S){const{path:D,params:M}=u(C).namespaceGroup(b,S);return v(D,null,M)}async function E(C,b,S){const{path:D,params:M}=u(C).namespaceGroup(b,S);await(0,n.n)((0,o.i)().fetch({url:D,method:"DELETE",showSuccessAlert:!1,showErrorAlert:!1,params:M}))}async function v(C,b,S){try{return(await(0,n.n)((0,o.i)().fetch({url:C,showErrorAlert:!1,showSuccessAlert:!1,params:S}))).data}catch(D){if(!h(D))throw D;if(s(D))return b;throw p(D)?{...D,data:{...D.data,message:r.jZ}}:D}}function h(C){if(!(0,a.Kn)(C))return!1;const b="data"in C&&C.data!==null&&C.data!==void 0;return"status"in C&&Number.isFinite(C.status)&&b}function p(C){return C.status===404||C.status===500&&C.data.message?.includes("unexpected content type from upstream. expected YAML, got text/html")}function s(C){return C.status===404&&(C.data.message?.includes("group does not exist")||C.data.message?.includes("no rule groups found"))}async function y(C,b){const{path:S,params:D}=u(C).namespace(b);await(0,n.n)((0,o.i)().fetch({method:"DELETE",url:S,showErrorAlert:!1,showSuccessAlert:!1,params:D}))}},62570:(G,A,e)=>{"use strict";e.d(A,{i:()=>i});var n=e(66681),a=e(85960),o=e(47257),r=e(75064);const i=({labelKey:u,value:l,operator:m="=",onRemoveLabel:c})=>{const d=(0,o.wW)(g);return a.createElement("div",{className:d.wrapper},u,m,l,!!c&&a.createElement(r.h,{name:"times",size:"xs",onClick:c,tooltip:"Remove label"}))},g=u=>({wrapper:(0,n.css)`
    padding: ${u.spacing(.5,1)};
    border-radius: ${u.shape.radius.default};
    border: solid 1px ${u.colors.border.medium};
    font-size: ${u.typography.bodySmall.fontSize};
    background-color: ${u.colors.background.secondary};
    font-weight: ${u.typography.fontWeightBold};
    color: ${u.colors.text.primary};
    display: inline-block;
    line-height: 1.2;
  `})},2698:(G,A,e)=>{"use strict";e.d(A,{s:()=>d});var n=e(66681),a=e(56375),o=e.n(a),r=e(53136),i=e.n(r),g=e(85960),u=e(47257),l=e(29165),m=e(97096),c=e(34340);const d=({labels:h,commonLabels:p={},size:s})=>{const y=(0,u.wW)(v,s),[C,b]=(0,g.useState)(!1),S=(0,a.chain)(h).toPairs().reject(E).reject(([T])=>C?!1:T in p).value(),D=Object.keys(p).length,M=D>0;return g.createElement("div",{className:y.wrapper,role:"list","aria-label":"Labels"},S.map(([T,R])=>g.createElement(c._,{key:T+R,size:s,label:T,value:R,color:f(T)})),!C&&M&&g.createElement(l.zx,{variant:"secondary",fill:"text",onClick:()=>b(!0),tooltip:"Show common labels",tooltipPlacement:"top",size:"sm"},"+",D," common ",i()("label",D)),C&&M&&g.createElement(l.zx,{variant:"secondary",fill:"text",onClick:()=>b(!1),tooltipPlacement:"top",size:"sm"},"Hide common labels"))};function f(h){return(0,m.Bx)(h).color}const E=([h,p])=>h.startsWith("__")&&h.endsWith("__"),v=(h,p)=>({wrapper:(0,n.css)`
    display: flex;
    flex-wrap: wrap;
    align-items: center;

    gap: ${p==="md"?h.spacing():h.spacing(.5)};
  `})},87921:(G,A,e)=>{"use strict";e.d(A,{a:()=>d});var n=e(66681),a=e(85960),o=e(86734),r=e(14607),i=e(47257),g=e(46002),u=e(48633),l=e(13202),m=e(69040);const c=["message","description"],d=({annotationKey:v,value:h,valueLink:p})=>{const s=g.vY[v]?a.createElement(r.u,{content:v,placement:"top",theme:"info"},a.createElement("span",null,g.vY[v])):v;return a.createElement(u.C,{label:s,horizontal:!0},a.createElement(f,{annotationKey:v,value:h,valueLink:p}))},f=({annotationKey:v,value:h,valueLink:p})=>{const s=(0,i.wW)(E),y=c.includes(v),C=h&&h.startsWith("http"),b=a.createElement(l.Z,{input:h,delimiter:["{{","}}"]});return p?a.createElement("a",{href:o.QX.sanitizeUrl(p),className:s.link},h):y?a.createElement(m.t,{className:s.well},b):C?a.createElement("a",{href:o.QX.sanitizeUrl(h),target:"__blank",className:s.link},h):a.createElement(a.Fragment,null,b)},E=v=>({well:(0,n.css)`
    word-break: break-word;
  `,link:(0,n.css)`
    word-break: break-all;
    color: ${v.colors.primary.text};
  `})},44211:(G,A,e)=>{"use strict";e.d(A,{U:()=>o});var n=e(85960),a=e(29165);const o=({isCollapsed:r,onToggle:i,idControlled:g,className:u,text:l,size:m="xl",...c})=>n.createElement(a.zx,{type:"button",fill:"text",variant:"secondary","aria-expanded":!r,"aria-controls":g,className:u,icon:r?"angle-right":"angle-down",onClick:()=>i(!r),...c},l)},48633:(G,A,e)=>{"use strict";e.d(A,{C:()=>r});var n=e(66681),a=e(85960),o=e(47257);const r=({className:g,label:u,horizontal:l,children:m,childrenWrapperClassName:c})=>{const d=(0,o.wW)(i);return a.createElement("div",{className:(0,n.cx)(d.field,l?d.fieldHorizontal:d.fieldVertical,g)},a.createElement("div",null,u),a.createElement("div",{className:c},m))},i=g=>({fieldHorizontal:(0,n.css)`
    flex-direction: row;
    ${g.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,fieldVertical:(0,n.css)`
    flex-direction: column;
  `,field:(0,n.css)`
    display: flex;
    margin: ${g.spacing(2)} 0;

    & > div:first-child {
      width: 110px;
      padding-right: ${g.spacing(1)};
      font-size: ${g.typography.size.sm};
      font-weight: ${g.typography.fontWeightBold};
      line-height: 1.8;
    }
    & > div:nth-child(2) {
      flex: 1;
      color: ${g.colors.text.secondary};
    }
  `})},79253:(G,A,e)=>{"use strict";e.d(A,{t:()=>l});var n=e(66681),a=e(85960),o=e(47257),r=e(75064),i=e(44574),g=e(37310),u=e(52912);const l=({cols:c,items:d,isExpandable:f=!1,onCollapse:E,onExpand:v,isExpanded:h,renderExpandedContent:p,testIdGenerator:s,pagination:y,paginationStyles:C,renderPrefixCell:b,renderPrefixHeader:S,footerRow:D,dataTestId:M})=>{const T=(0,o.wW)(u.Z);if((E||v||h)&&!(E&&v&&h))throw new Error("either all of onCollapse, onExpand, isExpanded must be provided, or none");if((f||p)&&!(f&&p))throw new Error("either both isExpanded and renderExpandedContent must be provided, or neither");const R=(0,o.wW)(m(c,f,!!S)),[O,x]=(0,a.useState)([]),I=j=>{h&&E&&v?h(j)?E(j):v(j):x(O.includes(j.id)?O.filter(V=>V!==j.id):[...O,j.id])},L=y?.itemsPerPage??d.length,{page:P,numberOfPages:N,onPageChange:F,pageItems:U}=(0,g.h)(d,1,L);return a.createElement(a.Fragment,null,a.createElement("div",{className:R.container,"data-testid":M??"dynamic-table"},a.createElement("div",{className:R.row,"data-testid":"header"},S&&S(),f&&a.createElement("div",{className:R.cell}),c.map(j=>a.createElement("div",{className:R.cell,key:j.id},j.label))),U.map((j,V)=>{const _=h?h(j):O.includes(j.id);return a.createElement("div",{className:R.row,key:`${j.id}-${V}`,"data-testid":s?.(j,V)??"row"},b&&b(j,V,d),f&&a.createElement("div",{className:(0,n.cx)(R.cell,R.expandCell)},a.createElement(r.h,{tooltip:`${_?"Collapse":"Expand"} row`,"data-testid":"collapse-toggle",name:_?"angle-down":"angle-right",onClick:()=>I(j)})),c.map(H=>a.createElement("div",{className:(0,n.cx)(R.cell,R.bodyCell,H.className),"data-column":H.label,key:`${j.id}-${H.id}`},H.renderCell(j,V))),_&&p&&a.createElement("div",{className:R.expandedContentRow,"data-testid":"expanded-content"},p(j,V,d)))}),D&&a.createElement("div",{className:(0,n.cx)(R.row,R.footerRow)},D)),y&&a.createElement(i.t,{className:(0,n.cx)(T,C),currentPage:P,numberOfPages:N,onNavigate:F,hideWhenSinglePage:!0}))},m=(c,d,f)=>{const E=c.map(v=>v.size?typeof v.size=="number"?`${v.size}fr`:v.size:"auto");return d&&E.unshift("calc(1em + 16px)"),f&&E.unshift("0"),v=>({container:(0,n.css)`
      border: 1px solid ${v.colors.border.weak};
      border-radius: ${v.shape.radius.default};
      color: ${v.colors.text.secondary};
    `,row:(0,n.css)`
      display: grid;
      grid-template-columns: ${E.join(" ")};
      grid-template-rows: 1fr auto;

      &:nth-child(2n + 1) {
        background-color: ${v.colors.background.secondary};
      }

      &:nth-child(2n) {
        background-color: ${v.colors.background.primary};
      }

      ${v.breakpoints.down("sm")} {
        grid-template-columns: auto 1fr;
        grid-template-areas: 'left right';
        padding: 0 ${v.spacing(.5)};

        &:first-child {
          display: none;
        }

        ${f?`
            & > *:first-child {
              display: none;
            }
          `:""}
      }
    `,footerRow:(0,n.css)`
      display: flex;
      padding: ${v.spacing(1)};
    `,cell:(0,n.css)`
      display: flex;
      align-items: center;
      padding: ${v.spacing(1)};

      ${v.breakpoints.down("sm")} {
        padding: ${v.spacing(1)} 0;
        grid-template-columns: 1fr;
      }
    `,bodyCell:(0,n.css)`
      overflow: hidden;

      ${v.breakpoints.down("sm")} {
        grid-column-end: right;
        grid-column-start: right;

        &::before {
          content: attr(data-column);
          display: block;
          color: ${v.colors.text.primary};
        }
      }
    `,expandCell:(0,n.css)`
      justify-content: center;

      ${v.breakpoints.down("sm")} {
        align-items: start;
        grid-area: left;
      }
    `,expandedContentRow:(0,n.css)`
      grid-column-end: ${E.length+1};
      grid-column-start: ${f?3:2};
      grid-row: 2;
      padding: 0 ${v.spacing(3)} 0 ${v.spacing(1)};
      position: relative;

      ${v.breakpoints.down("sm")} {
        grid-column-start: 2;
        border-top: 1px solid ${v.colors.border.strong};
        grid-row: auto;
        padding: ${v.spacing(1)} 0 0 0;
      }
    `})}},23595:(G,A,e)=>{"use strict";e.d(A,{z:()=>m});var n=e(66681),a=e(70318),o=e.n(a),r=e(85960),i=e(47257),g=e(13086),u=e(55135),l=e(51928);const m=({children:d,header:f,content:E,footer:v,arrow:h,showAfter:p=300,wrapperClassName:s,disabled:y=!1,...C})=>{const b=(0,r.useRef)(null),S=(0,i.wW)(c);if(y)return d;const D=r.createElement(g.K,{direction:"column",gap:0},f&&r.createElement("div",{className:S.card.header},f),r.createElement("div",{className:S.card.body},E),v&&r.createElement("div",{className:S.card.footer},v));return r.createElement(u.D,{content:D,hideAfter:100},(M,T,R)=>r.createElement(r.Fragment,null,b.current&&r.createElement(l.J,{...R,...C,wrapperClassName:o()(S.popover(h?1.25:0),s),onMouseLeave:T,onMouseEnter:M,onFocus:M,onBlur:T,referenceElement:b.current,renderArrow:h?({arrowProps:O,placement:x})=>r.createElement("div",{className:S.arrow(x),...O}):()=>r.createElement(r.Fragment,null)}),r.cloneElement(d,{ref:b,onMouseEnter:M,onMouseLeave:T,onFocus:M,onBlur:T})))},c=d=>({popover:f=>(0,n.css)`
    border-radius: ${d.shape.radius.default};
    box-shadow: ${d.shadows.z3};
    background: ${d.colors.background.primary};
    border: 1px solid ${d.colors.border.medium};

    margin-bottom: ${d.spacing(f)};
  `,card:{body:(0,n.css)`
      padding: ${d.spacing(1)};
    `,header:(0,n.css)`
      padding: ${d.spacing(1)};
      background: ${d.colors.background.secondary};
      border-bottom: solid 1px ${d.colors.border.medium};
    `,footer:(0,n.css)`
      padding: ${d.spacing(.5)} ${d.spacing(1)};
      background: ${d.colors.background.secondary};
      border-top: solid 1px ${d.colors.border.medium};
    `},arrow:f=>{const E="9px";return(0,n.css)`
      width: 0;
      height: 0;

      border-left: ${E} solid transparent;
      border-right: ${E} solid transparent;
      /* using hex colors here because the border colors use alpha transparency */
      border-top: ${E} solid ${d.isLight?"#d2d3d4":"#2d3037"};

      &:after {
        content: '';
        position: absolute;

        border: ${E} solid ${d.colors.background.primary};
        border-bottom: 0;
        border-left-color: transparent;
        border-right-color: transparent;

        margin-top: 1px;
        bottom: 1px;
        left: -${E};
      }
    `}})},34340:(G,A,e)=>{"use strict";e.d(A,{_:()=>u});var n=e(66681),a=e(85960),o=e(19737),r=e(47257),i=e(13086),g=e(97666);const u=({label:m,value:c,icon:d,color:f,size:E="md"})=>{const v=(0,r.wW)(l,f,E);return a.createElement("div",{className:v.wrapper,role:"listitem"},a.createElement(i.K,{direction:"row",gap:0,alignItems:"stretch"},a.createElement("div",{className:v.label},a.createElement(i.K,{direction:"row",gap:.5,alignItems:"center"},d&&a.createElement(g.J,{name:d})," ",m??"")),a.createElement("div",{className:v.value},c)))},l=(m,c,d)=>{const f=c??m.colors.secondary.main,E=m.isDark?(0,o.Z)(f).lighten(5).toString():(0,o.Z)(f).darken(5).toString(),v=m.isDark?(0,o.Z)(f).darken(5).toString():(0,o.Z)(f).lighten(5).toString(),h=c?o.Z.mostReadable(f,["#000","#fff"]).toString():m.colors.text.primary,p=d==="md"?`${m.spacing(.33)} ${m.spacing(1)}`:`${m.spacing(.2)} ${m.spacing(.6)}`;return{wrapper:(0,n.css)`
      color: ${h};
      font-size: ${m.typography.bodySmall.fontSize};

      border-radius: ${m.shape.borderRadius(2)};
    `,label:(0,n.css)`
      display: flex;
      align-items: center;
      color: inherit;

      padding: ${p};
      background: ${f};

      border: solid 1px ${E};
      border-top-left-radius: ${m.shape.borderRadius(2)};
      border-bottom-left-radius: ${m.shape.borderRadius(2)};
    `,value:(0,n.css)`
      color: inherit;
      padding: ${p};
      background: ${v};

      border: solid 1px ${E};
      border-left: none;
      border-top-right-radius: ${m.shape.borderRadius(2)};
      border-bottom-right-radius: ${m.shape.borderRadius(2)};
    `}}},32722:(G,A,e)=>{"use strict";e.d(A,{d:()=>r});var n=e(85960),a=e(84639);const o=({children:i,plugin:g,loadingComponent:u,notInstalledFallback:l})=>{const{loading:m,installed:c}=usePluginBridge(g);return m?u??null:c?React.createElement(React.Fragment,null,i):l??null};function r(i,g,u){const l=new URLSearchParams(u).toString();return`/a/${i}${g}`+(l?"?"+l:"")}},99586:(G,A,e)=>{"use strict";e.d(A,{L:()=>o});var n=e(66681),a=e(85960);const o=()=>a.createElement("span",{className:(0,n.css)`
      flex: 1;
    `})},65825:(G,A,e)=>{"use strict";e.d(A,{i:()=>r});var n=e(66681),a=e(85960),o=e(47257);const r=({children:g,state:u,size:l="md",muted:m=!1})=>{const c=(0,o.wW)(i);return a.createElement("span",{className:(0,n.cx)(c.common,c[u],c[l],{[c.muted]:m})},g||u)},i=g=>({common:(0,n.css)`
    display: inline-block;
    color: white;
    border-radius: ${g.shape.radius.default};
    font-size: ${g.typography.size.sm};
    text-transform: capitalize;
    line-height: 1.2;
    text-align: center;
    font-weight: ${g.typography.fontWeightBold};
  `,good:(0,n.css)`
    background-color: ${g.colors.success.main};
    border: solid 1px ${g.colors.success.main};
    color: ${g.colors.success.contrastText};
  `,warning:(0,n.css)`
    background-color: ${g.colors.warning.main};
    border: solid 1px ${g.colors.warning.main};
    color: ${g.colors.warning.contrastText};
  `,bad:(0,n.css)`
    background-color: ${g.colors.error.main};
    border: solid 1px ${g.colors.error.main};
    color: ${g.colors.error.contrastText};
  `,neutral:(0,n.css)`
    background-color: ${g.colors.secondary.main};
    border: solid 1px ${g.colors.secondary.main};
    color: ${g.colors.secondary.contrastText};
  `,info:(0,n.css)`
    background-color: ${g.colors.primary.main};
    border: solid 1px ${g.colors.primary.main};
    color: ${g.colors.primary.contrastText};
  `,md:(0,n.css)`
    padding: ${g.spacing(.5,1)};
    min-width: ${g.spacing(8)};
  `,sm:(0,n.css)`
    padding: ${g.spacing(.3,.5)};
    min-width: 52px;
  `,muted:(0,n.css)`
    opacity: 0.5;
  `})},13202:(G,A,e)=>{"use strict";e.d(A,{Z:()=>l});var n=e(66681),a=e(85960),o=e(47257),r=e(67192),i=e(23595),g=e(19050);const u=["$",".",'"'];function l({input:p,delimiter:s=["{{","}}"]}){const y=(0,o.wW)(h),[C,b]=s,S=new RegExp(`(?<before>.*?)(${C}(?<token>.*?)${b}|$)`,"gm"),D=p.split(`
`),M=[];return D.forEach((T,R)=>{Array.from(T.matchAll(S)).forEach((x,I)=>{const L=x.groups?.before,P=x.groups?.token?.trim();if(L&&M.push(a.createElement("span",{key:`${R}-${I}-before`},L)),P){const N=v(P),F=N==="variable"?P:"",U=`${C} ${P} ${b}`;M.push(a.createElement(c,{key:`${R}-${I}-token`,content:U,type:N,description:F}))}}),M.push(a.createElement("br",{key:`${R}-newline`}))}),a.createElement("span",{className:y.wrapper},M)}var m=(p=>(p.Variable="variable",p.Function="function",p.Keyword="keyword",p.Unknown="unknown",p))(m||{});function c({content:p,description:s,type:y}){const C=(0,o.wW)(h),b=!y;return a.createElement(i.z,{placement:"top-start",disabled:b,content:a.createElement("div",{className:C.hoverTokenItem},a.createElement(r.C,{tabIndex:0,text:a.createElement(a.Fragment,null,y),color:"blue"})," ",s&&a.createElement("code",null,s))},a.createElement("span",null,a.createElement(r.C,{tabIndex:0,className:C.token,text:p,color:"blue"})))}function d(p){return u.some(s=>p.startsWith(s))}function f(p){return g.keywords.some(s=>p.startsWith(s))}function E(p){return g.builtinFunctions.some(s=>p.startsWith(s))}function v(p){let s;return d(p)?s="variable":f(p)?s="keyword":E(p)?s="function":s="unknown",s}const h=p=>({wrapper:(0,n.css)`
    white-space: pre-wrap;
  `,token:(0,n.css)`
    cursor: default;
    font-family: ${p.typography.fontFamilyMonospace};
  `,popover:(0,n.css)`
    border-radius: ${p.shape.radius.default};
    box-shadow: ${p.shadows.z3};
    background: ${p.colors.background.primary};
    border: 1px solid ${p.colors.border.medium};

    padding: ${p.spacing(1)};
  `,hoverTokenItem:(0,n.css)`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${p.spacing(1)};
  `})},69040:(G,A,e)=>{"use strict";e.d(A,{t:()=>r});var n=e(66681),a=e(85960),o=e(47257);const r=({children:g,className:u})=>{const l=(0,o.wW)(i);return a.createElement("div",{className:(0,n.cx)(l.wrapper,u)},g)},i=g=>({wrapper:(0,n.css)`
    background-color: ${g.components.panel.background};
    border: solid 1px ${g.components.input.borderColor};
    border-radius: ${g.shape.radius.default};
    padding: ${g.spacing(.5,1)};
    font-family: ${g.typography.fontFamilyMonospace};
  `})},44412:(G,A,e)=>{"use strict";e.d(A,{Z:()=>g});var n=e(53136),a=e.n(n),o=e(85960),r=e(47257),i=e(5626);const g=({group:u})=>{const l=(0,r.wW)(i.r),m=u.alerts.length,c=u.alerts.reduce((d,f)=>(d[f.status.state]?d[f.status.state]+=1:d[f.status.state]=1,d),{});return o.createElement("div",null,`${m} ${a()("alert",m)}: `,Object.entries(c).map(([d,f],E)=>o.createElement("span",{key:`${JSON.stringify(u.labels)}-notifications-${E}`,className:l[d]},E>0&&", ",`${f} ${d}`)))}},69737:(G,A,e)=>{"use strict";e.d(A,{F:()=>f});var n=e(66681),a=e(56375),o=e.n(a),r=e(85960),i=e(47257),g=e(97666),u=e(57445),l=e(13086),m=e(14607),c=e(24956),d=e(34456);const f=({className:v,onFilterChange:h,defaultQueryString:p})=>{const s=(0,i.wW)(E),y=(0,r.useMemo)(()=>(0,a.debounce)(b=>{(0,d.PN)(d.z7.filterByLabel);const S=b.currentTarget;h(S.value)},600),[h]);(0,r.useEffect)(()=>y.cancel(),[y]);const C=r.createElement(g.J,{name:"search"});return r.createElement("div",{className:v},r.createElement(u._,null,r.createElement(l.K,{gap:.5},r.createElement("span",null,"Search by label"),r.createElement(m.u,{content:r.createElement("div",null,"Filter alerts using label querying, ex:",r.createElement("pre",null,'{severity="critical", instance=~"cluster-us-.+"}'))},r.createElement(g.J,{className:s.icon,name:"info-circle",size:"sm"})))),r.createElement(c.I,{placeholder:"Search",defaultValue:p,onChange:y,"data-testid":"search-query-input",prefix:C,className:s.inputWidth}))},E=v=>({icon:(0,n.css)`
    margin-right: ${v.spacing(.5)};
  `,inputWidth:(0,n.css)`
    width: 340px;
    flex-grow: 0;
  `})},19050:(G,A,e)=>{"use strict";e.r(A),e.d(A,{AlertmanagerTemplateFunction:()=>a,availableAlertManagerFunctions:()=>o,builtinFunctions:()=>i,conf:()=>l,keywords:()=>g,language:()=>u});var n=(m=>(m.Delimiter="delimiter",m.Keyword="keyword",m.Function="type.identifier",m.String="string",m.Variable="variable.name",m.Number="number",m.Comment="comment",m.Operator="operator",m.Identifier="idenfifier",m))(n||{}),a=(m=>(m.toUpper="toUpper",m.toLower="toLower",m.title="title",m.join="join",m.match="match",m.safeHtml="safeHtml",m.reReplaceAll="reReplaceAll",m.stringSlice="stringSlice",m))(a||{});const o=Object.values(a),i=["and","call","html","index","slice","js","len","not","or","print","printf","println","urlquery",...["eq","ne","lt","le","gt","ge"]],g=["define","if","else","end","range","break","continue","template","block","with"],u={defaultToken:"",keywords:g,functions:[...i,...o],operators:["|"],tokenizer:{root:[[/"/,"string","@string"],[/`/,"string","@rawstring"],[/\d*\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F]/,"number.hex"],[/0[0-7']*[0-7]/,"number.octal"],[/0[bB][0-1']*[0-1]/,"number.binary"],[/\d[\d']*/,"number"],[/\d/,"number"],[/[;,.]/,"delimiter"],[/{{-?/,"delimiter"],[/-?}}/,"delimiter"],[/\.([A-Za-z]+)?/,"variable.name"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":{token:"keyword"},"@functions":{token:"type.identifier"},"@default":"idenfifier"}}],[/\/\*.*\*\//,"comment"]],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],rawstring:[[/[^\`]/,"string"],[/`/,"string","@pop"]]}},l={comments:{blockComment:["/*","*/"]},brackets:[["{{","}}"],["(",")"]],autoClosingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}]}},6469:(G,A,e)=>{"use strict";e.d(A,{o:()=>b});var n=e(85960),a=e(5e4),o=e(85745),r=e(73999),i=e(9001),g=e(2698),u=e(79253),l=e(26141),m=e(44839),c=e(75064),d=e(89601),f=e(63353);const E=({rule:D,instance:M,extensionPointId:T})=>{const[R,O]=(0,n.useState)(),I=v({instance:M,rule:D},T);if(I.length===0)return null;const L=n.createElement(f.G,{extensions:I,onSelect:O});return n.createElement(n.Fragment,null,n.createElement(m.L,{placement:"bottom-start",overlay:L},n.createElement(c.h,{name:"ellipsis-v","aria-label":"Actions",variant:"secondary"})),!!R&&!!R.path&&n.createElement(d.F,{path:R.path,title:R.title,onDismiss:()=>O(void 0)}))};function v(D,M){return(0,n.useMemo)(()=>{const{extensions:T}=(0,l.dj)({extensionPointId:M,context:D,limitPerPlugin:3});return T},[D,M])}var h=e(83507),p=e(87921),s=e(48633);const y=({instance:D})=>{const M=(0,h.$9)(D.annotations),T=(0,h.XW)(M);return n.createElement("div",null,D.value&&n.createElement(s.C,{label:"Value",horizontal:!0},D.value),M.map(([R,O])=>n.createElement(p.a,{key:R,annotationKey:R,value:O,valueLink:T.get(R)})))};var C=e(14591);const b=({rule:D,instances:M,pagination:T,footerRow:R})=>{const O=(0,n.useMemo)(()=>M.length>1?(0,a.FT)(M.map(I=>I.labels)):{},[M]),x=(0,n.useMemo)(()=>M.map(I=>({data:{rule:D,alert:{...I,commonLabels:O}},id:(0,i.pB)(I)})),[O,M,D]);return n.createElement(u.t,{cols:S,isExpandable:!0,items:x,renderExpandedContent:({data:I})=>n.createElement(y,{instance:I.alert}),pagination:T,footerRow:R})},S=[{id:"state",label:"State",renderCell:({data:{alert:{state:D}}})=>n.createElement(C.l,{state:D}),size:"80px"},{id:"labels",label:"Labels",renderCell:({data:{alert:{labels:D,commonLabels:M}}})=>n.createElement(g.s,{labels:D,commonLabels:M,size:"sm"})},{id:"created",label:"Created",renderCell:({data:{alert:{activeAt:D}}})=>n.createElement(n.Fragment,null,D.startsWith("0001")?"-":(0,o.CQ)(D).format("YYYY-MM-DD HH:mm:ss")),size:"150px"},{id:"actions",label:"",renderCell:({data:{alert:D,rule:M}})=>n.createElement(E,{rule:M,instance:D,extensionPointId:r.y.AlertInstanceAction,key:"alert-instance-extension-point"}),size:"40px"}]},14591:(G,A,e)=>{"use strict";e.d(A,{l:()=>r});var n=e(85960),a=e(9001),o=e(65825);const r=n.memo(({state:i,isPaused:g=!1,size:u="md",muted:l=!1})=>n.createElement(o.i,{state:(0,a.Aq)(i),size:u,muted:l},(0,a.SS)(i)," ",g?" (Paused)":""));r.displayName="AlertStateTag"},5279:(G,A,e)=>{"use strict";e.d(A,{_:()=>l});var n=e(66681),a=e(85960),o=e(30694),r=e(47257),i=e(77980),g=e(29165),u=e(60956);function l({identifier:d,isProvisioned:f,onDismiss:E}){const v=(0,r.wW)(c),[h,p]=(0,a.useState)(f?"confirm":"redirect");if(h==="redirect"){const s=`/alerting/new?copyFrom=${encodeURIComponent(u.$V(d))}`;return a.createElement(o.l_,{to:s,push:!0})}return a.createElement(i.s,{isOpen:h==="confirm",title:"Copy provisioned alert rule",body:a.createElement("div",null,a.createElement("p",null,"The new rule will ",a.createElement("span",{className:v.bold},"NOT")," be marked as a provisioned rule."),a.createElement("p",null,"You will need to set a new evaluation group for the copied rule because the original one has been provisioned and cannot be used for rules created in the UI.")),confirmText:"Copy",onConfirm:()=>p("redirect"),onDismiss:E})}const m=a.forwardRef(({text:d,ruleIdentifier:f,isProvisioned:E,className:v},h)=>{const[p,s]=(0,a.useState)(!1);return a.createElement(a.Fragment,null,a.createElement(g.zx,{title:"Copy",className:v,size:"sm",key:"clone",variant:"secondary",icon:"copy",onClick:()=>s(!0),ref:h},d),p&&a.createElement(l,{identifier:f,isProvisioned:E,onDismiss:()=>s(!1)}))});m.displayName="CloneRuleButton";const c=d=>({bold:(0,n.css)`
    font-weight: ${d.typography.fontWeightBold};
  `})},60808:(G,A,e)=>{"use strict";e.d(A,{Ii:()=>C,gr:()=>y});var n=e(66681),a=e(85960),o=e(12537),r=e(85745),i=e(47257),g=e(14607),u=e(54287),l=e(83507),m=e(9001),c=e(47689),d=e(2698),f=e(48633),E=e(65959),v=e(73509),h=e(47262),p=e(65732),s=e(3438);const y=15,C=({rule:D})=>{const M=(0,i.wW)(S),{namespace:{rulesSource:T}}=D,R=(0,l.$9)(D.annotations);return a.createElement("div",null,a.createElement(E.f,{rule:D,rulesSource:T,isViewMode:!1}),a.createElement("div",{className:M.wrapper},a.createElement("div",{className:M.leftSide},a.createElement(b,{rule:D}),!!D.labels&&!!Object.keys(D.labels).length&&a.createElement(f.C,{label:"Labels",horizontal:!0},a.createElement(d.s,{labels:D.labels})),a.createElement(p.C,{rulesSource:T,rule:D,annotations:R}),a.createElement(v.J,{annotations:R})),a.createElement("div",{className:M.rightSide},a.createElement(h.C,{rulesSource:T,rule:D}))),a.createElement(s.M,{rule:D,itemsDisplayLimit:y}))},b=({rule:D})=>{let M,T=D.group.interval,R=D.promRule?.lastEvaluation,O=D.promRule?.evaluationTime;return(0,m.yF)(D.rulerRule)||(M=D.rulerRule?.for),a.createElement(a.Fragment,null,T&&a.createElement(f.C,{label:"Evaluate",horizontal:!0},"Every ",T),M&&a.createElement(f.C,{label:"For",horizontal:!0},M),R&&!(0,c.gV)(R)&&a.createElement(f.C,{label:"Last evaluation",horizontal:!0},a.createElement(g.u,{placement:"top",content:`${(0,o.dq)(R,{format:"YYYY-MM-DD HH:mm:ss"})}`,theme:"info"},a.createElement("span",null,`${(0,r.CQ)(R).locale("en").fromNow(!0)} ago`))),R&&!(0,c.gV)(R)&&O!==void 0&&a.createElement(f.C,{label:"Evaluation time",horizontal:!0},a.createElement(g.u,{placement:"top",content:`${O}s`,theme:"info"},a.createElement("span",null,(0,u.q)({timeInMs:O*1e3,humanize:!0})))))},S=D=>({wrapper:(0,n.css)`
    display: flex;
    flex-direction: row;

    ${D.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,leftSide:(0,n.css)`
    flex: 1;
  `,rightSide:(0,n.css)`
    ${D.breakpoints.up("md")} {
      padding-left: 90px;
      width: 300px;
    }
  `})},65959:(G,A,e)=>{"use strict";e.d(A,{f:()=>Y});var n=e(66681),a=e(56375),o=e(85960),r=e(30694),i=e(86734),g=e(173),u=e(90857),l=e(47257),m=e(29165),c=e(55855),d=e(54635),f=e(74042),E=e(44839),v=e(97666),h=e(77980),p=e(93991),s=e(95162),y=e(25119),C=e(57297),b=e(7288);const S=(0,o.lazy)(()=>e.e(990).then(e.bind(e,60990))),D=(0,o.lazy)(()=>e.e(3862).then(e.bind(e,63862)));var M=(X=>(X.Loki="loki",X.Annotations="annotations",X))(M||{});function T(){const[X,te]=(0,o.useState)(!1),[se,de]=(0,o.useState)(),re=(0,l.wW)(R),fe=u.config.unifiedAlerting.alertStateHistoryBackend,ie=u.config.unifiedAlerting.alertStateHistoryPrimary,ue=[fe,ie].some(De=>De==="loki")?"loki":"annotations",me=(0,o.useCallback)(()=>{de(void 0),te(!1)},[]),ge=(0,o.useCallback)(De=>{de(De),te(!0)},[]);return{StateHistoryModal:(0,o.useMemo)(()=>se?o.createElement(b.u,{isOpen:X,onDismiss:me,closeOnBackdropClick:!0,closeOnEscape:!0,title:"State history",className:re.modal,contentClassName:re.modalContent},o.createElement(o.Suspense,{fallback:"Loading..."},ue==="loki"&&o.createElement(D,{ruleUID:se.grafana_alert.uid}),ue==="annotations"&&o.createElement(S,{alertId:se.grafana_alert.id??""}))):null,[se,X,me,ue,re]),showStateHistoryModal:ge,hideStateHistoryModal:me}}const R=X=>({modal:(0,n.css)`
    width: 80%;
    height: 80%;
    min-width: 800px;
  `,modalContent:(0,n.css)`
    height: 100%;
    width: 100%;
    padding: ${X.spacing(2)};
  `});var O=e(5970),x=e(98724),I=e(46002),L=e(76679),P=e(77294),N=e(60956),F=e(9001),U=e(87873),j=e(14607),V=e(84639),_=e(58533),H=e(32722);const z=({title:X="",severity:te="",url:se=""})=>{const de=(0,H.d)(_.W.Incident,"/incidents/declare",{title:X,severity:te,url:se}),{loading:re,installed:fe,settings:ie}=(0,V.n)(_.W.Incident);return o.createElement(o.Fragment,null,re===!0&&o.createElement(m.zx,{icon:"fire",size:"sm",type:"button",disabled:!0},"Declare Incident"),fe===!1&&o.createElement(j.u,{content:"Grafana Incident is not installed or is not configured correctly"},o.createElement(m.zx,{icon:"fire",size:"sm",type:"button",disabled:!0},"Declare Incident")),ie&&o.createElement(m.Qj,{icon:"fire",size:"sm",type:"button",href:de},"Declare Incident"))};var K=e(5279);const Y=({rule:X,rulesSource:te,isViewMode:se})=>{const de=(0,l.wW)(q),{namespace:re,group:fe,rulerRule:ie}=X,{StateHistoryModal:oe,showStateHistoryModal:ue}=T(),me=(0,s.useDispatch)(),ge=(0,r.TH)(),Ue=(0,p.iG)(),[De,Pe]=(0,o.useState)(),[ye,Te]=(0,o.useState)(void 0),nt=(0,L.HY)(te)?te:(0,x.Xy)(te.jsonData.alertmanagerUid)?.name,[ct,he]=(0,C.wp)(X,C.iY.Duplicate),[xe,Me]=(0,C.wp)(X,C.iY.Silence),[He,Ve]=(0,C.wp)(X,C.iY.Explore),[Oe,Ne]=(0,C.wp)(X,C.iY.Delete),[_e,qe]=(0,C.wp)(X,C.iY.Update),rt=[],mt=[],Je=[],Ae=()=>{if(De&&De.rulerRule){const Le=N.Zk((0,L.EG)(De.namespace.rulesSource),De.namespace.name,De.group.name,De.rulerRule);me((0,O.hS)(Le,{navigateTo:se?"/alerting/list":void 0})),Pe(void 0)}},Ke=(0,F.Jq)(fe),Xe=(0,F.Pc)(X.rulerRule)&&!!X.rulerRule.grafana_alert.provenance,ne=(0,F.x_)(X.promRule)&&X.promRule.state===y.x_.Firing,Z=Oe&&Ne,ee=_e&&qe,ce=xe&&Me&&nt,be=ct&&he&&!Ke,Ee=()=>(0,P.t6)(te,X),Be=ge.pathname+ge.search;if((0,L.jq)(te)&&He&&Ve&&!Ke&&rt.push(o.createElement(m.Qj,{size:"sm",key:"explore",variant:"primary",icon:"chart-line",target:"__blank",href:(0,P.mH)(te,X.query)},"See graph")),X.annotations[I.q6.runbookURL]&&rt.push(o.createElement(m.Qj,{size:"sm",key:"runbook",variant:"primary",icon:"book",target:"__blank",href:i.QX.sanitizeUrl(X.annotations[I.q6.runbookURL])},"View runbook")),X.annotations[I.q6.dashboardUID]){const Le=X.annotations[I.q6.dashboardUID];if(Le){rt.push(o.createElement(m.Qj,{size:"sm",key:"dashboard",variant:"primary",icon:"apps",target:"__blank",href:`d/${encodeURIComponent(Le)}`},"Go to dashboard"));const ze=X.annotations[I.q6.panelID];ze&&rt.push(o.createElement(m.Qj,{size:"sm",key:"panel",variant:"primary",icon:"apps",target:"__blank",href:`d/${encodeURIComponent(Le)}?viewPanel=${encodeURIComponent(ze)}`},"Go to panel"))}}if(ce&&rt.push(o.createElement(m.Qj,{size:"sm",key:"silence",icon:"bell-slash",target:"__blank",href:(0,P.Vv)(nt,X)},"Silence")),(0,F.Pc)(X.rulerRule)&&rt.push(o.createElement(o.Fragment,{key:"history"},o.createElement(m.zx,{size:"sm",icon:"history",onClick:()=>(0,F.Pc)(X.rulerRule)&&ue(X.rulerRule)},"Show state history"),oe)),ne&&k()&&rt.push(o.createElement(o.Fragment,{key:"declare-incident"},o.createElement(z,{title:X.name,url:Ee()}))),se&&ie){const Le=(0,L.EG)(te),ze=N.Zk(Le,re.name,fe.name,ie);if(ee&&(mt.push(o.createElement(c.m,{key:"copy",icon:"copy",onClipboardError:Fe=>{Ue.error("Error while copying URL",Fe)},size:"sm",getText:Ee},"Copy link to rule")),!Xe)){const Fe=g.Cj.renderUrl(`${u.config.appSubUrl}/alerting/${encodeURIComponent(N.$V(ze))}/edit`,{returnTo:Be});mt.push(o.createElement(m.Qj,{size:"sm",key:"edit",variant:"secondary",icon:"pen",href:Fe},"Edit"))}if((0,F.Pc)(ie)){const Fe=(0,U.u)(`/alerting/${encodeURIComponent(N.$V(ze))}/modify-export`);Je.push(o.createElement(d.v.Item,{label:"Modify export",icon:"edit",url:Fe}))}be&&Je.push(o.createElement(d.v.Item,{label:"Duplicate",icon:"copy",onClick:()=>Te({identifier:ze,isProvisioned:Xe})})),Z&&(Je.push(o.createElement(d.v.Divider,null)),Je.push(o.createElement(d.v.Item,{key:"delete",label:"Delete",icon:"trash-alt",onClick:()=>Pe(X)})))}return rt.length||mt.length||Je.length?o.createElement(o.Fragment,null,o.createElement("div",{className:de.wrapper},o.createElement(f.Lh,{width:"auto"},rt.length?rt:o.createElement("div",null)),o.createElement(f.Lh,{width:"auto"},mt.length&&mt,Je.length&&o.createElement(E.L,{overlay:o.createElement(d.v,null,Je.map(Le=>o.createElement(o.Fragment,{key:(0,a.uniqueId)("action_")},Le)))},o.createElement(m.zx,{variant:"secondary",size:"sm"},"More",o.createElement(v.J,{name:"angle-down"}))))),!!De&&o.createElement(h.s,{isOpen:!0,title:"Delete rule",body:"Deleting this rule will permanently remove it from your alert rule list. Are you sure you want to delete this rule?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:Ae,onDismiss:()=>Pe(void 0)}),ye&&o.createElement(K._,{identifier:ye.identifier,isProvisioned:ye.isProvisioned,onDismiss:()=>Te(void 0)})):null};function k(){return!(0,P.Vj)()||(0,P.mt)()}const q=X=>({wrapper:(0,n.css)`
    padding: ${X.spacing(2)} 0;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    flex-wrap: wrap;
    border-bottom: solid 1px ${X.colors.border.medium};
  `})},73509:(G,A,e)=>{"use strict";e.d(A,{J:()=>g});var n=e(66681),a=e(85960),o=e(47257),r=e(83507),i=e(87921);function g(l){const m=(0,o.wW)(u),{annotations:c}=l,d=(0,r.XW)(c);return c.length===0?null:a.createElement("div",{className:m.annotations},c.map(([f,E])=>a.createElement(i.a,{key:f,annotationKey:f,value:E,valueLink:d.get(f)})))}const u=()=>({annotations:(0,n.css)`
    margin-top: 46px;
  `})},47262:(G,A,e)=>{"use strict";e.d(A,{C:()=>m});var n=e(66681),a=e(85960),o=e(81502),r=e(47257),i=e(36530),g=e(76679),u=e(9001),l=e(48633);function m(d){const{rulesSource:f,rule:E}=d,v=(0,r.wW)(c),h=(0,a.useMemo)(()=>{if((0,g.jq)(f))return[{name:f.name,icon:f.meta.info.logos.small}];if((0,u.Pc)(E.rulerRule)){const{data:p}=E.rulerRule.grafana_alert,s=p.reduce((y,C)=>{const b=(0,o.F)().getInstanceSettings(C.datasourceUid);return!b||b.uid===i.Yq||(y[b.name]={name:b.name,icon:b.meta.info.logos.small}),y},{});return Object.values(s)}return[]},[E,f]);return h.length===0?null:a.createElement(l.C,{label:"Data source"},h.map(({name:p,icon:s},y)=>a.createElement("div",{key:p},s&&a.createElement(a.Fragment,null,a.createElement("img",{alt:`${p} datasource logo`,className:v.dataSourceIcon,src:s})," "),p)))}function c(d){const f=d.spacing(2);return{dataSourceIcon:(0,n.css)`
      width: ${f};
      height: ${f};
    `}}},65732:(G,A,e)=>{"use strict";e.d(A,{C:()=>p});var n=e(66681),a=e(85960),o=e(76679),r=e(48633),i=e(19609),g=e(71650),u=e(93126),l=e(1323),m=e(47257),c=e(35055),d=e(87438),f=e(69040);const E=({language:y,expr:C})=>{const b=(0,a.useMemo)(()=>[(0,u.Z)({onlyIn:D=>"type"in D&&D.type==="code_block",getSyntax:()=>y},{...i.languages,[y]:y==="logql"?c.ZP:d.ZP})],[y]),S=(0,a.useMemo)(()=>(0,l.l1)(C),[C]);return a.createElement(g.ML,{"data-testid":"expression-editor",plugins:b,value:S})},v=({expression:y,rulesSource:C})=>{const b=(0,m.wW)(h);return a.createElement(f.t,{className:(0,n.cx)(b.well,"slate-query-field")},(0,o.jq)(C)?a.createElement(E,{expr:y,language:C.type===o.ye.Loki?"logql":"promql"}):y)},h=y=>({well:(0,n.css)`
    font-family: ${y.typography.fontFamilyMonospace};
  `});function p(y){const{annotations:C,rulesSource:b,rule:S}=y,D=s();return(0,o.jq)(b)?a.createElement(r.C,{label:"Expression",horizontal:!0,className:(0,n.cx)({[D.exprRow]:!!C.length})},a.createElement(v,{expression:S.query,rulesSource:b})):null}const s=()=>({exprRow:(0,n.css)`
    margin-bottom: 46px;
  `})},3438:(G,A,e)=>{"use strict";e.d(A,{M:()=>M});var n=e(66681),a=e(56375),o=e(85960),r=e(30694),i=e(47257),g=e(29165),u=e(69737),l=e(69977),m=e(57445),c=e(5106),d=e(25119);const f=({className:O,onStateFilterChange:x,stateFilter:I,filterType:L,itemPerStateStats:P})=>{const N=(0,i.wW)(E),F=H=>function(){return P&&P[H]?o.createElement(l.V,{name:P[H].toFixed(0),colorIndex:9,className:N.tag}):null},U=Object.values(d.bj).map(H=>({label:H,value:H,component:F(H)})),V=[d.x_.Firing,d.x_.Pending].map(H=>({label:(0,a.capitalize)(H),value:H,component:F(H)})),_=L==="grafana"?U:V;return o.createElement("div",{className:O,"data-testid":"alert-instance-state-filter"},o.createElement(m._,null,"State"),o.createElement(c.S,{options:_,value:I,onChange:x,onClick:H=>{H===I&&x(void 0)}}))};function E(O){return{tag:(0,n.css)`
      font-size: 11px;
      font-weight: normal;
      padding: ${O.spacing(.25,.5)};
      vertical-align: middle;
      margin-left: ${O.spacing(.5)};
    `}}var v=e(98724),h=e(77294),p=e(62567),s=e(76679),y=e(9001),C=e(48633),b=e(6469),S=e(85701);function D(O){const x=(0,i.wW)(R),{onClick:I,stats:L}=O;return o.createElement("div",{className:x.footerRow},o.createElement("div",null,"Showing ",L.visibleItemsCount," out of ",L.totalItemsCount," instances"),o.createElement(g.zx,{size:"sm",variant:"secondary","data-testid":"show-all",onClick:I},"Show all ",L.totalItemsCount," alert instances"))}function M(O){const x=(0,r.k6)(),{rule:I,itemsDisplayLimit:L=Number.POSITIVE_INFINITY,pagination:P,enableFiltering:N=!1}=O,{promRule:F,namespace:U,instanceTotals:j}=I,[V,_]=(0,o.useState)(),[H,z]=(0,o.useState)(),[K]=(0,o.useState)(Math.floor(Math.random()*100)),Y=`queryString-${K}`,k=(0,i.wW)(R),q=(0,s.HY)(U.rulesSource)?s.GC:"prometheus",X=(0,o.useMemo)(()=>(0,y.x_)(F)&&F.alerts?.length?T(V,H,(0,h.Zl)(p.As.Importance,F.alerts)):[],[F,H,V]);if(!(0,y.x_)(F))return null;const te=X.slice(0,L),se=(0,a.countBy)(F.alerts,De=>(0,d.ED)(De.state)),de=(0,a.sum)(Object.values(j)),re=de-te.length,fe={totalItemsCount:de,visibleItemsCount:te.length},ie=(0,h.V2)(U.rulesSource,O.rule,location.pathname+location.search),oe=(0,S.r0)(j),ge=N?()=>z(void 0):()=>x.push(ie),Ue=re?o.createElement(D,{stats:fe,onClick:ge}):void 0;return o.createElement(C.C,{label:"Matching instances",horizontal:!0},N&&o.createElement("div",{className:(0,n.cx)(k.flexRow,k.spaceBetween)},o.createElement("div",{className:k.flexRow},o.createElement(u.F,{className:k.rowChild,key:Y,defaultQueryString:V,onFilterChange:De=>_(De)}),o.createElement(f,{className:k.rowChild,filterType:q,stateFilter:H,onStateFilterChange:z,itemPerStateStats:se}))),!N&&o.createElement("div",{className:k.stats},oe),o.createElement(b.o,{rule:I,instances:te,pagination:P,footerRow:Ue}))}function T(O,x,I){let L=[...I];if(O){const P=(0,v.Zh)(O||"");L=L.filter(({labels:N})=>(0,v.eD)(N,P))}return x&&(L=L.filter(P=>(0,d.ED)(P.state)===x)),L}const R=O=>({flexRow:(0,n.css)`
      display: flex;
      flex-direction: row;
      align-items: flex-end;
      width: 100%;
      flex-wrap: wrap;
      margin-bottom: ${O.spacing(1)};
    `,spaceBetween:(0,n.css)`
      justify-content: space-between;
    `,rowChild:(0,n.css)`
      margin-right: ${O.spacing(1)};
    `,footerRow:(0,n.css)`
      display: flex;
      flex-direction: column;
      gap: ${O.spacing(1)};
      justify-content: space-between;
      align-items: center;
      width: 100%;
    `,instancesContainer:(0,n.css)`
      margin-bottom: ${O.spacing(2)};
    `,stats:(0,n.css)`
      display: flex;
      gap: ${O.spacing(1)};
      padding: ${O.spacing(1,0)};
    `})},85701:(G,A,e)=>{"use strict";e.d(A,{Pb:()=>f,WN:()=>d,r0:()=>E});var n=e(56375),a=e.n(n),o=e(53136),r=e.n(o),i=e(85960),g=e(13086),u=e(67192),l=e(10178),m=e(25119);const c={recording:0,alerting:0,[m.x_.Pending]:0,[m.x_.Inactive]:0,paused:0,error:0,nodata:0},d=({namespaces:v})=>{const h={...c};v.forEach(({groups:C})=>{C.forEach(b=>{const S=(0,n.omitBy)(b.totals,n.isUndefined);for(let D in S)h[D]+=S[D]})});const p=E(h),s=!!p.length,y=(0,n.sum)(Object.values(h));return p.unshift(i.createElement(i.Fragment,{key:"total"},y," ",r()("rule",y))),i.createElement(g.K,{direction:"row"},s&&i.createElement("div",null,i.createElement(g.K,{gap:.5},p)))},f=({group:v})=>{const h=v.totals,p=v?.interval,s=E(h),y=!!s.length;return i.createElement(g.K,{direction:"row"},y&&i.createElement("div",null,i.createElement(g.K,{gap:.5},s)),p&&i.createElement(i.Fragment,null,i.createElement("div",null,"|"),i.createElement(u.C,{text:p,icon:"clock-nine",color:"blue"})))};function E(v){const h=[];return v[l.P.Alerting]&&h.push(i.createElement(u.C,{color:"red",key:"firing",text:`${v[l.P.Alerting]} firing`})),v.error&&h.push(i.createElement(u.C,{color:"red",key:"errors",text:`${v.error} errors`})),v.nodata&&h.push(i.createElement(u.C,{color:"blue",key:"nodata",text:`${v.nodata} no data`})),v[l.P.Pending]&&h.push(i.createElement(u.C,{color:"orange",key:"pending",text:`${v[l.P.Pending]} pending`})),v[l.P.Normal]&&v.paused&&h.push(i.createElement(u.C,{color:"green",key:"paused",text:`${v[l.P.Normal]} normal (${v.paused} paused)`})),v[l.P.Normal]&&!v.paused&&h.push(i.createElement(u.C,{color:"green",key:"inactive",text:`${v[l.P.Normal]} normal`})),v.recording&&h.push(i.createElement(u.C,{color:"purple",key:"recording",text:`${v.recording} recording`})),h}},57297:(G,A,e)=>{"use strict";e.d(A,{E$:()=>s,K_:()=>p,Mz:()=>S,RA:()=>D,iY:()=>f,jU:()=>E,o2:()=>M,oI:()=>d,wp:()=>y});var n=e(85960),a=e(41879),o=e(16901),r=e(95162),i=e(81828),g=e(84954),u=e(5907),l=e(76679),m=e(9001),c=e(49627),d=(O=>(O.ViewExternalConfiguration="view-external-configuration",O.UpdateExternalConfiguration="update-external-configuration",O.CreateContactPoint="create-contact-point",O.ViewContactPoint="view-contact-point",O.UpdateContactPoint="edit-contact-points",O.DeleteContactPoint="delete-contact-point",O.ExportContactPoint="export-contact-point",O.CreateNotificationTemplate="create-notification-template",O.ViewNotificationTemplate="view-notification-template",O.UpdateNotificationTemplate="edit-notification-template",O.DeleteNotificationTemplate="delete-notification-template",O.DecryptSecrets="decrypt-secrets",O.CreateNotificationPolicy="create-notification-policy",O.ViewNotificationPolicyTree="view-notification-policy-tree",O.UpdateNotificationPolicyTree="update-notification-policy-tree",O.DeleteNotificationPolicy="delete-notification-policy",O.ExportNotificationPolicies="export-notification-policies",O.CreateSilence="create-silence",O.ViewSilence="view-silence",O.UpdateSilence="update-silence",O.ViewMuteTiming="view-mute-timing",O.CreateMuteTiming="create-mute-timing",O.UpdateMuteTiming="update-mute-timing",O.DeleteMuteTiming="delete-mute-timing",O))(d||{}),f=(O=>(O.Duplicate="duplicate-alert-rule",O.View="view-alert-rule",O.Update="update-alert-rule",O.Delete="delete-alert-rule",O.Explore="explore-alert-rule",O.Silence="silence-alert-rule",O.ModifyExport="modify-export-rule",O))(f||{}),E=(O=>(O.CreateAlertRule="create-alert-rule",O.ViewAlertRule="view-alert-rule",O.UpdateAlertRule="update-alert-rule",O.DeleteAlertRule="delete-alert-rule",O.ExportGrafanaManagedRules="export-grafana-managed-rules",O.CreateExternalAlertRule="create-external-alert-rule",O.ViewExternalAlertRule="view-external-alert-rule",O.UpdateExternalAlertRule="update-external-alert-rule",O.DeleteExternalAlertRule="delete-external-alert-rule",O))(E||{});const v=!0,h=!1,p=()=>({["create-alert-rule"]:R(v,r.AccessControlAction.AlertingRuleCreate),["view-alert-rule"]:R(v,r.AccessControlAction.AlertingRuleRead),["update-alert-rule"]:R(v,r.AccessControlAction.AlertingRuleUpdate),["delete-alert-rule"]:R(v,r.AccessControlAction.AlertingRuleDelete),["export-grafana-managed-rules"]:R(v,r.AccessControlAction.AlertingRuleRead),["create-external-alert-rule"]:R(v,r.AccessControlAction.AlertingRuleExternalWrite),["view-external-alert-rule"]:R(v,r.AccessControlAction.AlertingRuleExternalRead),["update-external-alert-rule"]:R(v,r.AccessControlAction.AlertingRuleExternalWrite),["delete-external-alert-rule"]:R(v,r.AccessControlAction.AlertingRuleExternalWrite)}),s=O=>p()[O];function y(O,x){const I=b(O);return(0,n.useMemo)(()=>I[x],[I,x])}function C(O,x){const I=b(O);return useMemo(()=>x.map(L=>I[L]),[I,x])}function b(O){const x=O.namespace.rulesSource,I=typeof x=="string"?x:x.name,L=(0,m.Pc)(O.rulerRule)&&!!O.rulerRule.grafana_alert.provenance,P=(0,m.Jq)(O.group),N=L||P,{isEditable:F,isRemovable:U,isRulerAvailable:j=!1,loading:V}=(0,c.M)(I,O.rulerRule),[_,H]=s("export-grafana-managed-rules"),z=V?h:j,K=N?h:z,Y=(0,u.Bz)(I),k=T(x);return{["duplicate-alert-rule"]:R(z,Y.create),["view-alert-rule"]:R(v,Y.read),["update-alert-rule"]:[K,F??!1],["delete-alert-rule"]:[K,U??!1],["explore-alert-rule"]:R(v,r.AccessControlAction.DataSourcesExplore),["silence-alert-rule"]:k,["modify-export-rule"]:[z,H]}}function S(){const{selectedAlertmanager:O,hasConfigurationAPI:x,isGrafanaAlertmanager:I}=(0,g.ZA)(),L=(0,u.Ko)(O),P=(0,u.QX)(O);return{["view-external-configuration"]:R(v,r.AccessControlAction.AlertingNotificationsExternalRead),["update-external-configuration"]:R(x,r.AccessControlAction.AlertingNotificationsExternalWrite),["create-contact-point"]:R(x,L.create),["view-contact-point"]:R(v,L.read),["edit-contact-points"]:R(x,L.update),["delete-contact-point"]:R(x,L.delete),["export-contact-point"]:R(I,L.read),["create-notification-template"]:R(x,L.create),["view-notification-template"]:R(v,L.read),["edit-notification-template"]:R(x,L.update),["delete-notification-template"]:R(x,L.delete),["create-notification-policy"]:R(x,L.create),["view-notification-policy-tree"]:R(v,L.read),["update-notification-policy-tree"]:R(x,L.update),["delete-notification-policy"]:R(x,L.delete),["export-notification-policies"]:R(I,L.read),["decrypt-secrets"]:R(I,L.provisioning.readSecrets),["create-silence"]:R(v,P.create),["view-silence"]:R(v,P.read),["update-silence"]:R(v,P.update),["create-mute-timing"]:R(x,L.create),["view-mute-timing"]:R(v,L.read),["update-mute-timing"]:R(x,L.update),["delete-mute-timing"]:R(x,L.delete)}}function D(O){const x=S();return(0,n.useMemo)(()=>x[O],[x,O])}function M(O){const x=S();return(0,n.useMemo)(()=>O.map(I=>x[I]),[x,O])}function T(O){const x=O===l.GC,{useGetAlertmanagerChoiceStatusQuery:I}=i.alertmanagerApi,{currentData:L,isLoading:P}=I(void 0,{skip:!x});if(!x||P)return[!1,!1];const N=L?.alertmanagersChoice===o.TE.External,F=L?.alertmanagersChoice===o.TE.All;return R(!N||F,r.AccessControlAction.AlertingInstanceCreate)}const R=(O,x)=>[O,a.contextSrv.hasPermission(x)]},49807:(G,A,e)=>{"use strict";e.d(A,{k:()=>o});var n=e(85960),a=e(76679);function o(r){return(0,n.useMemo)(()=>(0,a.LE)(r),[r])}},68700:(G,A,e)=>{"use strict";e.d(A,{DD:()=>C,Fm:()=>s,K$:()=>d,Kd:()=>E,ZP:()=>y,Zo:()=>m,bU:()=>c});var n=e(56375),a=e.n(n),o=e(85960),r=e(10178),i=e(25119),g=e(76679),u=e(9001),l=e(92746);function m(O,x){const I=(0,l._)(F=>F.promRules),L=(0,l._)(F=>F.rulerRules),P=(0,o.useRef)({}),N=(0,o.useMemo)(()=>{if(O){const F=(0,g.o_)(O);if(!F)throw new Error(`Unknown rules source: ${O}`);return[F]}return(0,g.h_)()},[O]);return(0,o.useMemo)(()=>N.map(F=>{const U=(0,g.jq)(F)?F.name:F,j=L[U]?.result;let V=I[U]?.result;U===g.GC&&x&&(V=x);const _=P.current[U];if(_&&_.promRules===V&&_.rulerRules===j)return _.result;const H={};Object.entries(j||{}).forEach(([K,Y])=>{const k={rulesSource:F,name:K,groups:[]};H[K]=k,h(k,Y)}),V?.forEach(({name:K,groups:Y})=>{const k=H[K]=H[K]||{rulesSource:F,name:K,groups:[]};p(k,Y)});const z=Object.values(H);return P.current[U]={promRules:V,rulerRules:j,result:z},z}).flat(),[I,L,N,x])}function c(O,x,I){const L={};return Object.entries(I||{}).forEach(([P,N])=>{const F={rulesSource:O,name:P,groups:[]};L[P]=F,h(F,N)}),x?.forEach(({name:P,groups:N})=>{const F=L[P]=L[P]||{rulesSource:O,name:P,groups:[]};p(F,N)}),Object.values(L)}function d(O,x,I){const L={rulesSource:O,name:x.name,groups:[]};return h(L,I),p(L,x.groups),L.groups.forEach(P=>{P.rules=P.rules.filter(N=>N.promRule)}),L}function f(O,x,I){return h(O,I),p(O,x),O}function E(O){return O.map(x=>{const I={...x,groups:[]};return I.groups.push({name:"default",rules:v(x.groups.flatMap(L=>L.rules)),totals:b(x.groups)}),I})}function v(O){return O.sort((x,I)=>x.name.localeCompare(I.name))}function h(O,x=[]){O.groups=x.map(I=>{const L=I.rules.filter(F=>(0,u.yF)(F)).length,P=I.rules.filter(F=>(0,u.Pc)(F)&&F.grafana_alert.is_paused).length,N={name:I.name,interval:I.interval,source_tenants:I.source_tenants,rules:[],totals:{paused:P,recording:L}};return N.rules=I.rules.map(F=>D(F,O,N)),N})}function p(O,x){const I=new Map;O.groups.forEach(L=>I.set(L.name,L)),x.forEach(L=>{let P=I.get(L.name);P||(P={name:L.name,rules:[],totals:C(L)},O.groups.push(P),I.set(L.name,P)),P.totals={...P.totals,...C(L)};const N=new Map;P.rules.forEach(F=>{const U=N.get(F.name);U?U.push(F):N.set(F.name,[F])}),(L.rules??[]).forEach(F=>{const U=M(F,N,O.rulesSource);U?(U.promRule=F,U.instanceTotals=(0,u.x_)(F)?s(F):{},U.filteredInstanceTotals=(0,u.x_)(F)?y(F):{}):P.rules.push(S(F,O,P))})})}function s(O){const x=(0,n.countBy)(O.alerts,"state");if(O.totals){const{normal:I,...L}=O.totals;return{...L,inactive:I}}return{alerting:x[r.P.Alerting],pending:x[r.P.Pending],inactive:x[r.P.Normal],nodata:x[r.P.NoData],error:x[r.P.Error]+x.err}}function y(O){if(O.totalsFiltered){const{normal:x,...I}=O.totalsFiltered;return{...I,inactive:x}}return{}}function C(O){if(O.totals){const{firing:P,...N}=O.totals;return{...N,alerting:P}}const x=(0,n.countBy)(O.rules,P=>(0,u.x_)(P)&&P.state),I=(0,n.countBy)(O.rules,P=>P.health),L=O.rules.filter(P=>(0,u.OP)(P)).length;return{alerting:x[i.x_.Firing],error:I.error,nodata:I.nodata,inactive:x[i.x_.Inactive],pending:x[i.x_.Pending],recording:L}}function b(O){const x={};return O.forEach(I=>{const L=I.totals;Object.entries(L).forEach(([P,N])=>{x[P]||(x[P]=0),x[P]+=N})}),x}function S(O,x,I){return{name:O.name,query:O.query,labels:O.labels||{},annotations:(0,u.x_)(O)?O.annotations||{}:{},promRule:O,namespace:x,group:I,instanceTotals:(0,u.x_)(O)?s(O):{},filteredInstanceTotals:(0,u.x_)(O)?y(O):{}}}function D(O,x,I){return(0,u.cG)(O)?{name:O.alert,query:O.expr,labels:O.labels||{},annotations:O.annotations||{},rulerRule:O,namespace:x,group:I,instanceTotals:{},filteredInstanceTotals:{}}:(0,u.yF)(O)?{name:O.record,query:O.expr,labels:O.labels||{},annotations:{},rulerRule:O,namespace:x,group:I,instanceTotals:{},filteredInstanceTotals:{}}:{name:O.grafana_alert.title,query:"",labels:O.labels||{},annotations:O.annotations||{},rulerRule:O,namespace:x,group:I,instanceTotals:{},filteredInstanceTotals:{}}}function M(O,x,I){const L=x.get(O.name);if(!L)return;if((0,g.HY)(I))return L[0];const P=L.find(F=>!F.promRule&&T(F,O,!0));if(P)return P;const N=L.find(F=>!F.promRule&&T(F,O,!1));if(N)return N}function T(O,x,I=!0){return O.name===x.name?(0,n.isEqual)([I?R(O.query):"",O.labels,O.annotations],[I?R(x.query):"",x.labels||{},(0,u.x_)(x)?x.annotations||{}:{}]):!1}function R(O){return O.length>1&&O[0]==="("&&O[O.length-1]===")"&&(O=O.slice(1,-1)),O=O.replace(/\s|\n/g,""),O.split("").sort().join("")}},20420:(G,A,e)=>{"use strict";e.d(A,{W:()=>g});var n=e(85960),a=e(95162),o=e(5970),r=e(30422),i=e(92746);function g(u){const l=(0,a.useDispatch)(),m=(0,i._)(c=>c.folders);if((0,n.useEffect)(()=>{u&&l((0,o.sw)(u))},[l,u]),u){const c=m[u]||r.oq;return{folder:c.result,loading:c.loading}}return{loading:!1}}},49627:(G,A,e)=>{"use strict";e.d(A,{M:()=>u});var n=e(41879),a=e(80679),o=e(5907),r=e(9001),i=e(20420),g=e(92746);function u(l,m){const c=(0,g._)(b=>b.dataSources),{currentData:d,isLoading:f}=a.T.endpoints.discoverDsFeatures.useQuery({rulesSourceName:l}),E=m&&(0,r.Pc)(m)?m.grafana_alert.namespace_uid:void 0,v=(0,o.Bz)(l),{folder:h,loading:p}=(0,i.W)(E);if(!m)return{isEditable:!1,isRemovable:!1,loading:!1};if((0,r.Pc)(m)){if(!E)throw new Error(`Rule ${m.grafana_alert.title} does not have a folder uid, cannot determine if it is editable.`);if(!h)return{isRulerAvailable:!0,isEditable:!1,isRemovable:!1,loading:p};const b=n.contextSrv.hasPermissionInMetadata(v.update,h),S=n.contextSrv.hasPermissionInMetadata(v.delete,h);return{isRulerAvailable:!0,isEditable:b,isRemovable:S,loading:p||f}}const s=!!c[l]?.result?.rulerConfig||!!d?.rulerConfig,y=n.contextSrv.hasPermission(v.update),C=n.contextSrv.hasPermission(v.delete);return{isRulerAvailable:s,isEditable:y&&s,isRemovable:C&&s,loading:f||c[l]?.loading}}},37310:(G,A,e)=>{"use strict";e.d(A,{h:()=>r});var n=e(56375),a=e.n(n),o=e(85960);function r(i,g=1,u){const[l,m]=(0,o.useState)(g),c=(0,o.useMemo)(()=>(0,n.chunk)(i,u),[i,u]),d=c.length,f=c[l-1]??[],E=(l-1)*u+1,v=(0,n.clamp)(l*u,i.length),h=(0,o.useCallback)(y=>{m((0,n.clamp)(y,1,c.length))},[m,c]),p=(0,o.useCallback)(()=>h(l+1),[l,h]),s=(0,o.useCallback)(()=>h(l-1),[l,h]);return(0,o.useEffect)(()=>m(1),[d]),{page:l,onPageChange:h,numberOfPages:d,pageItems:f,pageStart:E,pageEnd:v,nextPage:p,previousPage:s}}},84639:(G,A,e)=>{"use strict";e.d(A,{n:()=>o});var n=e(81445),a=e(67552);function o(r){const{loading:i,error:g,value:u}=(0,n.Z)(()=>(0,a.a)(r,{showErrorAlert:!1})),l=u&&!g&&!i,m=u?.enabled;return i&&!u?{loading:!0}:!l||!m?{loading:!1,installed:!1}:{loading:i,installed:!0,settings:u}}},92746:(G,A,e)=>{"use strict";e.d(A,{_:()=>o});var n=e(8111),a=e(95162);function o(r,i){return(0,a.useSelector)((0,n.P1)(g=>g.unifiedAlerting,g=>r(g)),i)}},35782:(G,A,e)=>{"use strict";e.d(A,{VG:()=>V,HY:()=>H,ug:()=>_});var n=e(25119),a=e(9001);const o=1,r=2,i=3,g=4,u=5,l=6,m=7,c=8,d=9,f=10,E=11,v=12,h=0,p=1,s=2,y=3,C=4,b=5,S=6,D=7;var M=e(56375),T=e(45098);const R=T.WQ.deserialize({version:14,states:"!vOQOPOOOrOPO'#ChOOOO'#Ch'#ChOQOPO'#ClOOOO'#Ci'#CiQQOPOOO!gOQO'#C^O!lOPO'#CjO!qOPO,59SOOOO,59W,59WOOOO-E6g-E6gOOOO,58x,58xOOOO,59U,59UOOOO-E6h-E6h",stateData:"$O~ORUOTUOUUOVUOWUOXUOYUOZUOaPOcQO~ObVOR[XT[XU[XV[XW[XX[XY[XZ[Xa[Xc[X~OSZO~Oa[O~ObVOR[aT[aU[aV[aW[aX[aY[aZ[aa[ac[a~OR~T~U~V~W~Y~Z~RZYXWVUTa~",goto:"zaPPbPPPPPPPPPbgmPsVRORTQTORYTQWPR]WSSOTRXR",nodeNames:"\u26A0 AlertRuleSearch FilterExpression DataSourceToken FilterValue NameSpaceToken LabelToken GroupToken RuleToken StateToken TypeToken HealthToken FreeFormExpression",maxTerm:19,skippedNodes:[0],repeatNodeCount:2,tokenData:"#$QRRqqr#Yrs&fst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]+h!]#W#Y#W#X,z#X#Z#Y#Z#[=b#[#]F[#]#`#Y#`#a!!n#a#b#Y#b#c!+h#c#f#Y#f#g!:f#g#h!Av#h#i!Jp#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#acSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YQ$qcSQqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lQ&PP;=`<%l$lQ&VP;=`;NQ$lR&]P;=`<%l#YR&cP;=`;NQ#YR&irX^(spq(sqr(sst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR(vsX^(spq(sqr(srs+Tst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR+[OSQcPR+_P;=`<%l(sR+eP;=`;NQ(sR+ocSQbPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR-ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U.d#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR.keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i/|#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR0TeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U1f#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR1meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h3O#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR3VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d4h#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR4oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j6Q#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR6XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g7j#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR7qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W9S#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR9ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y:l#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR:scSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]<O!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR<VcSQRPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR=ieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g>z#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR?ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d@d#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR@keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#jA|#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRBTeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#eCf#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRCmcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]Dx!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YREPcSQVPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lRFceSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#YGt#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRG{eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#UI^#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRIeeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#aJv#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRJ}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#iL`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRLgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#[#Y#[#]Mx#]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRNPcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]! [!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR! ccSQZPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!!ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!$W#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!$_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#U#Y#U#V!%p#V$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!%weSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!'Y#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!'aeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!(r#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!(ycSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!*U!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!*]cSQUPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!+oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!-Q#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!-XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#a#Y#a#b!.j#b$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!.qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!0S#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!0ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h!1l#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!1seSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!3U#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!3]eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!4n#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!4ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W!6W#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!6_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!7p#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!7wcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!9S!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!9ZcSQTPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!:meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j!<O#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!<VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!=h#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!=oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!?Q#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!?XcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!@d!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!@kcSQWPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!A}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!C`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!CgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!Dx#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!EPeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!Fb#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!FieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!Gz#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!HRcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!I^!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!IecSQXPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!JweSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#m#Y#m#n!LY#n$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!LaeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!Mr#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!MyeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y# [#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR# ccSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]#!n!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#!ucSQYPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$l",tokenizers:[0,1],topRules:{AlertRuleSearch:[0,1]},dialects:{dataSourceFilter:114,nameSpaceFilter:116,labelFilter:118,groupFilter:120,ruleFilter:122,stateFilter:66,typeFilter:124,healthFilter:126},tokenPrec:128}),O={[i]:"datasource",[u]:"namespace",[l]:"label",[c]:"rule",[m]:"group",[d]:"state",[f]:"type",[E]:"health"};var x=(K=>(K.dataSource="dataSourceFilter",K.nameSpace="nameSpaceFilter",K.label="labelFilter",K.group="groupFilter",K.rule="ruleFilter",K.state="stateFilter",K.type="typeFilter",K.health="healthFilter",K))(x||{});function I(K,Y,k){F(K,Y,q=>{if(q.type.id===r){const X=L(K,q);if(X.type&&X.value){const te=k[X.type];te&&te(X.value)}}else if(q.type.id===v){const X=k[v];X&&X(P(K,q))}})}function L(K,Y){if(Y.type.id!==r)throw new Error("Invalid node provided. Only FilterExpression nodes are supported");const k=Y.firstChild;if(!k)return{type:void 0,value:void 0};const q=Y.getChild(g),X=q?(0,M.trim)(P(K,q),'"'):void 0;return{type:k.type.id,value:X}}function P(K,Y){return K.slice(Y.from,Y.to).trim().replace(/\"/g,"")}function N(K,Y,k){const q=[];F(K,Y,te=>{te.type.id===r&&te.firstChild&&q.push(te.firstChild),te.type.id===v&&q.push(te)});let X=[];return q.forEach(te=>{const se=k.findIndex(de=>de.type===te.type.id);if(se!==-1){if(te.parent?.type.is(r)){const de=O[te.type.id],re=k.splice(se,1)[0];X.push(`${de}:${U(re.value)}`)}if(te.type.is(v)){const de=k.splice(se,1)[0];X.push(de.value)}}}),k.forEach(te=>{te.type===v?X.push(te.value):X.push(`${O[te.type]}:${U(te.value)}`)}),X.join(" ")}function F(K,Y,k){const q=Y.join(" ");let te=R.configure({dialect:q}).parse(K).cursor();do k(te.node);while(te.next())}function U(K){return/\s/.test(K)?`"${K}"`:K}const j=[x.dataSource,x.nameSpace,x.label,x.group,x.rule,x.state,x.type,x.health];var V=(K=>(K.Ok="ok",K.Error="error",K.NoData="nodata",K.Unknown="unknown",K))(V||{});function _(K){const Y={labels:[],freeFormWords:[],dataSourceNames:[]},k={[i]:q=>Y.dataSourceNames.push(q),[u]:q=>Y.namespace=q,[m]:q=>Y.groupName=q,[c]:q=>Y.ruleName=q,[l]:q=>Y.labels.push(q),[d]:q=>Y.ruleState=z(q),[f]:q=>(0,a.Wd)(q)?Y.ruleType=q:void 0,[E]:q=>Y.ruleHealth=(0,a.vU)(q),[v]:q=>Y.freeFormWords.push(q)};return I(K,j,k),Y}function H(K,Y){const k=[];return Y.dataSourceNames&&k.push(...Y.dataSourceNames.map(q=>({type:i,value:q}))),Y.namespace&&k.push({type:u,value:Y.namespace}),Y.groupName&&k.push({type:m,value:Y.groupName}),Y.ruleName&&k.push({type:c,value:Y.ruleName}),Y.ruleState&&k.push({type:d,value:Y.ruleState}),Y.ruleType&&k.push({type:f,value:Y.ruleType}),Y.ruleHealth&&k.push({type:E,value:Y.ruleHealth}),Y.labels&&k.push(...Y.labels.map(q=>({type:l,value:q}))),Y.freeFormWords&&k.push(...Y.freeFormWords.map(q=>({type:v,value:q}))),N(K,j,k)}function z(K){if(K==="normal")return n.x_.Inactive;if((0,n.I9)(K))return K}},84954:(G,A,e)=>{"use strict";e.d(A,{ZA:()=>c,h5:()=>m,k0:()=>E});var n=e(85960),a=e(763),o=e(20994),r=e(16901),i=e(49807),g=e(46002),u=e(76679);const l=n.createContext(void 0),m=({children:v,accessType:h,alertmanagerSourceName:p})=>{const[s,y]=(0,a.K)(),C=(0,i.k)(h),b=C.availableInternalDataSources.concat(C.availableExternalDataSources),S=n.useCallback(F=>{d(b,F)&&(F===u.GC?(o.Z.delete(g.de),y({[g.c4]:null})):(o.Z.set(g.de,F),y({[g.c4]:F})))},[b,y]),D=s[g.c4],M=o.Z.get(g.de),T=u.GC,R=p??D??M??T,O=d(b,R)?R:void 0,x=(0,u.EQ)(O)?.jsonData,I=O===u.GC,L=x?E(x):!1,N={selectedAlertmanager:O,hasConfigurationAPI:I||L,isGrafanaAlertmanager:I,selectedAlertmanagerConfig:x,availableAlertManagers:b,setSelectedAlertmanager:S};return n.createElement(l.Provider,{value:N},v)};function c(){const v=n.useContext(l);if(v===void 0)throw new Error("useAlertmanager must be used within a AlertmanagerContext");return v}function d(v,h){return v.map(s=>s.name).includes(h)}const f=[r.sK.mimir,r.sK.cortex,void 0];function E(v){return f.includes(v.implementation)}},5970:(G,A,e)=>{"use strict";e.d(A,{QY:()=>ie,Nc:()=>De,r0:()=>Pe,hS:()=>q,oE:()=>k,S6:()=>ue,yO:()=>fe,mS:()=>Ue,ei:()=>z,dV:()=>_,lB:()=>K,dB:()=>re,on:()=>Y,zy:()=>P,wE:()=>N,vL:()=>me,sw:()=>ge,Ms:()=>se,Vj:()=>te,dn:()=>U,y6:()=>L,UR:()=>F,IA:()=>V,nw:()=>H,je:()=>j,iH:()=>Te,wy:()=>X,D8:()=>ye,mM:()=>de,hv:()=>nt,tg:()=>ct});var n=e(20079),a=e(56375),o=e(91),r=e(25119),i=e(46783),g=e(34456),u=e(49805),l=e(81828),m=e(85445);function c(xe){return(0,m.i)().get("/api/annotations",{alertId:xe}).then(Me=>Me?.sort(d))}function d(xe,Me){const He=(Ne,_e)=>Ne>_e?-1:_e>Ne?1:0,Ve=He(xe.timeEnd,Me.timeEnd);if(Ve)return Ve;const Oe=He(xe.time,Me.time);return Oe||He(xe.id,Me.id)}var f=e(17536),E=e(20741),v=e(65107),h=e(30264),p=e(20304),s=e(98724),y=e(76679),C=e(77294),b=e(30422),S=e(60956),D=e(38884),M=e(9001);function T(xe){const Me=async rt=>{if((0,M.Kl)(rt)){const mt=await(0,h.m6)(xe);for(const[Je,Ae]of Object.entries(mt))for(const Ke of Ae){const Xe=Ke.rules.find(ne=>(0,M.Pc)(ne)&&ne.grafana_alert?.uid===rt.uid);if(Xe)return{group:Ke,ruleSourceName:y.GC,namespace:Je,rule:Xe}}}if((0,M.E4)(rt)){const{ruleSourceName:mt,namespace:Je,groupName:Ae}=rt,Ke=await(0,h.jJ)(xe,Je,Ae);if(!Ke)return null;const Xe=Ke.rules.find(ne=>{const Z=S.Zk(mt,Je,Ke.name,ne);return S.Dg(Z,rt)});return Xe?{group:Ke,ruleSourceName:mt,namespace:Je,rule:Xe}:null}if((0,M.qE)(rt))throw new Error("Native prometheus rules can not be edited in grafana.");return null},He=async rt=>{const{namespace:mt,group:Je,rule:Ae}=rt;if(Je.rules.length===1){await(0,h.BC)(xe,mt,Je.name);return}await(0,h.P4)(xe,mt,{...Je,rules:Je.rules.filter(Ke=>Ke!==Ae)})},Ve=async(rt,mt,Je)=>{const{dataSourceName:Ae,group:Ke,namespace:Xe}=rt,ne=(0,D.yh)(rt);if(Ae&&Ke&&Xe){if(Je){const ce=await Me(S.CK(Je));if(!ce)throw new Error("Rule not found.");if(ce.namespace!==Xe||ce.group.name!==Ke)await He(ce);else{const be={...ce.group,rules:ce.group.rules.map(Ee=>Ee===ce.rule?ne:Ee),evaluateEvery:mt};return await(0,h.P4)(xe,Xe,be),S.Zk(Ae,Xe,Ke,ne)}}const Z=await(0,h.jJ)(xe,Xe,Ke),ee=Z?{...Z,rules:[...Z.rules,ne]}:{name:Ke,rules:[ne]};return await(0,h.P4)(xe,Xe,ee),S.Zk(Ae,Xe,Ke,ne)}else throw new Error("Data source and location must be specified")},Oe=async(rt,mt,Je)=>{const{folder:Ae,group:Ke}=rt;if(!Ae)throw new Error("Folder must be specified");const Xe=(0,D.mI)(rt),ne=Ae.title,Z={name:Ke,interval:mt};if(!Je)return Ne(ne,Z,Xe);const ee=await Me(S.CK(Je));if(!ee)throw new Error("Rule not found.");const ce=ee.namespace===ne,be=ee.group.name===rt.group;return ce&&be?qe(ee,Xe,mt):_e(ne,Z,ee,Xe)},Ne=async(rt,mt,Je)=>{const Ae=await(0,h.jJ)(xe,rt,mt.name);if(!Ae)throw new Error(`No group found with name "${mt.name}"`);const Ke={name:mt.name,interval:mt.interval,rules:(Ae.rules??[]).concat(Je)};return await(0,h.P4)(xe,rt,Ke),{uid:Je.grafana_alert.uid??"",ruleSourceName:y.GC}},_e=async(rt,mt,Je,Ae)=>(R(Je,Ae),await Ne(rt,mt,Ae)),qe=async(rt,mt,Je)=>{R(rt,mt);const Ae=rt.group.rules.map(Ke=>(0,M.Pc)(Ke)&&Ke.grafana_alert.uid===rt.rule.grafana_alert.uid?mt:Ke);return await(0,h.P4)(xe,rt.namespace,{name:rt.group.name,interval:Je,rules:Ae}),{uid:rt.rule.grafana_alert.uid,ruleSourceName:y.GC}};return{findEditableRule:Me,deleteRule:He,saveLotexRule:Ve,saveGrafanaRule:Oe}}function R(xe,Me){if(!(0,M.Pc)(xe.rule))throw new Error("The rule is not a Grafana managed rule");const He=xe.rule.grafana_alert.uid;Me.grafana_alert.uid=He}var O=e(47689);function x(xe,Me){const Ve=xe().unifiedAlerting.dataSources[Me]?.result;if(!Ve)throw new Error(`Data source configuration is not available for "${Me}" data source`);return Ve}function I(xe,Me){const He=x(xe,Me);if(!He.rulerConfig)throw new Error(`Ruler API is not available for ${Me}`);return He.rulerConfig}const L=(0,n.hg)("unifiedalerting/fetchPromRules",async({rulesSourceName:xe,filter:Me,limitAlerts:He,matcher:Ve,state:Oe,identifier:Ne},_e)=>{await _e.dispatch(H({rulesSourceName:xe}));const qe=(0,g.bA)(v.j,`[${xe}] Prometheus rules loaded`,{dataSourceName:xe,thunk:"unifiedalerting/fetchPromRules"});return await(0,b.$b)(qe(xe,Me,He,Ve,Oe,Ne))}),P=(0,n.hg)("unifiedAlerting/fetchExternalAlertmanagers",()=>(0,b.$b)((0,u.$l)())),N=(0,n.hg)("unifiedAlerting/fetchExternAlertmanagersConfig",()=>(0,b.$b)((0,u.Zo)())),F=(0,n.hg)("unifiedalerting/fetchRulerRules",async({rulesSourceName:xe,filter:Me},{dispatch:He,getState:Ve})=>{await He(H({rulesSourceName:xe}));const Oe=I(Ve,xe),Ne=(0,g.yT)(h.m6,`[${xe}] Ruler rules loaded`,{dataSourceName:xe,thunk:"unifiedalerting/fetchRulerRules"});return await(0,b.$b)(Ne(Oe,Me))});function U({rulesSourceName:xe,identifier:Me,filter:He,limitAlerts:Ve,matcher:Oe,state:Ne}){return async(_e,qe)=>{await _e(H({rulesSourceName:xe}));const rt=x(qe,xe);await _e(L({rulesSourceName:xe,identifier:Me,filter:He,limitAlerts:Ve,matcher:Oe,state:Ne})),rt.rulerConfig&&await _e(F({rulesSourceName:xe}))}}const j=(0,n.hg)("unifiedalerting/fetchSilences",xe=>{const Me=(0,g.pM)(u.U7,`[${xe}] Silences loaded`,{dataSourceName:xe,thunk:"unifiedalerting/fetchSilences"});return(0,b.$b)(Me(xe))});function V(xe){return(Me,He)=>{const{rulerRules:Ve}=He().unifiedAlerting,Oe=Ve[xe];(0,a.isEmpty)(Oe?.result)&&!(Oe&&(0,M.m$)(Oe))&&!Oe?.loading&&Me(F({rulesSourceName:xe}))}}function _(){return async xe=>{const Me=(0,y.mA)().map(He=>xe(H({rulesSourceName:He})));await Promise.allSettled(Me)}}const H=(0,n.hg)("unifiedalerting/fetchPromBuildinfo",async({rulesSourceName:xe})=>(0,b.$b)((async()=>{if(xe===y.GC)return{name:y.GC,id:y.GC,rulerConfig:{dataSourceName:y.GC,apiVersion:"legacy"}};const Me=(0,y.VX)(xe);if(!Me)throw new Error(`Missing data source configuration for ${xe}`);const{id:He,name:Ve}=Me,Ne=await(0,g.pM)(f.C$,`[${xe}] Rules source features discovered`,{dataSourceName:xe,thunk:"unifiedalerting/fetchPromBuildinfo"})(Ve),_e=Ne.features.rulerApiEnabled?{dataSourceName:Ve,apiVersion:Ne.application===r.T8.Cortex?"legacy":"config"}:void 0;return{name:Ve,id:He,rulerConfig:_e}})()),{condition:({rulesSourceName:xe},{getState:Me})=>{const He=Me().unifiedAlerting.dataSources,Ve=!!He[xe]?.result,Oe=!!He[xe]?.error;return!(Ve||Oe)}});function z(xe=!1,Me={}){return async(He,Ve)=>{const Oe=performance.now();await Promise.allSettled((0,y.mA)().map(async Ne=>{await He(H({rulesSourceName:Ne}));const{promRules:_e,rulerRules:qe,dataSources:rt}=Ve().unifiedAlerting,mt=rt[Ne].result;if(!mt)return;const Je=xe||!_e[Ne]?.loading,Ae=(xe||!qe[Ne]?.loading)&&!!mt.rulerConfig;await Promise.allSettled([Je&&He(L({rulesSourceName:Ne,...Me})),Ae&&He(F({rulesSourceName:Ne}))])})),(0,g.PN)("All Prom and Ruler rules loaded",{loadTimeMs:(performance.now()-Oe).toFixed(0)})}}function K(xe=!1){return async(Me,He)=>{const{promRules:Ve}=He().unifiedAlerting;(0,y.mA)().map(Oe=>{(xe||!Ve[Oe]?.loading)&&Me(L({rulesSourceName:Oe}))})}}const Y=(0,n.hg)("unifiedalerting/fetchEditableRule",(xe,Me)=>{const He=I(Me.getState,xe.ruleSourceName);return(0,b.$b)(T(He).findEditableRule(xe))});function k(xe,Me){return async(He,Ve)=>{(0,b.Ez)((async()=>{const Oe=(0,y.EG)(xe.rulesSource),Ne=I(Ve,Oe);await(0,h.BC)(Ne,xe.name,Me.name),await He(U({rulesSourceName:Oe}))})(),{successMessage:"Group deleted"})}}function q(xe,Me={}){return async(He,Ve)=>{await He(H({rulesSourceName:xe.ruleSourceName})),(0,b.Ez)((async()=>{const Oe=I(Ve,xe.ruleSourceName),Ne=T(Oe),_e=await Ne.findEditableRule(xe);if(!_e)throw new Error("Rule not found.");await Ne.deleteRule(_e),await He(U({rulesSourceName:_e.ruleSourceName})),Me.navigateTo&&o.E1.replace(Me.navigateTo)})(),{successMessage:"Rule deleted."})}}const X=(0,n.hg)("unifiedalerting/saveRuleForm",({values:xe,existing:Me,redirectOnSave:He,evaluateEvery:Ve},Oe)=>(0,b.Ez)((0,b.$b)((async()=>{const{type:Ne}=xe;let _e;if(Ne===p.$.cloudAlerting||Ne===p.$.cloudRecording){if(!xe.dataSourceName)throw new Error("The Data source has not been defined.");const qe=I(Oe.getState,xe.dataSourceName);_e=await T(qe).saveLotexRule(xe,Ve,Me),await Oe.dispatch(F({rulesSourceName:xe.dataSourceName}))}else if(Ne===p.$.grafana){const qe=I(Oe.getState,y.GC);_e=await T(qe).saveGrafanaRule(xe,Ve,Me),await Oe.dispatch(F({rulesSourceName:y.GC}))}else throw new Error("Unexpected rule form type");if((0,g.PN)(g.z7.successSavingAlertRule,{type:Ne,isNew:(!Me).toString()}),He)o.E1.push(He);else{const qe=S.$V(_e);if(!qe){o.E1.push("/alerting/list");return}const rt=`/alerting/${encodeURIComponent(qe)}/edit`;o.E1.getLocation().pathname!==rt?o.E1.replace(rt):Oe.dispatch(Y(_e))}})()),{successMessage:Me?`Rule "${xe.name}" updated.`:`Rule "${xe.name}" saved.`,errorMessage:"Failed to save rule"})),te=(0,n.hg)("unifiedalerting/fetchGrafanaNotifiers",()=>(0,b.$b)((0,E.i9)())),se=(0,n.hg)("unifiedalerting/fetchGrafanaAnnotations",xe=>(0,b.$b)(c(xe))),de=(0,n.hg)("unifiedalerting/updateAMConfig",({alertManagerSourceName:xe,oldConfig:Me,newConfig:He,successMessage:Ve,redirectPath:Oe,redirectSearch:Ne},_e)=>(0,b.Ez)((0,b.$b)((async()=>{const qe=await _e.dispatch(l.alertmanagerApi.endpoints.getAlertmanagerConfiguration.initiate(xe)).unwrap(),rt=(0,a.isEmpty)(qe.alertmanager_config)&&(0,a.isEmpty)(qe.template_files),mt=JSON.stringify(qe)!==JSON.stringify(Me);if(!rt&&mt)throw new Error("A newer Alertmanager configuration is available. Please reload the page and try again to not overwrite recent changes.");if(await(0,u.oy)(xe,(0,s.X4)(He)),_e.dispatch(l.alertmanagerApi.util.invalidateTags(["AlertmanagerConfiguration"])),Oe){const Je=new URLSearchParams(Ne??"");o.E1.push((0,C.eQ)(Oe,xe,Je))}})()),{successMessage:Ve})),re=(0,n.hg)("unifiedalerting/fetchAmAlerts",xe=>(0,b.$b)((0,u.QK)(xe,[],!0,!0,!0))),fe=(xe,Me)=>async He=>{await(0,b.Ez)((0,u.iT)(xe,Me),{successMessage:"Silence expired."}),He(j(xe)),He(re(xe))},ie=(0,n.hg)("unifiedalerting/updateSilence",({alertManagerSourceName:xe,payload:Me,exitOnSave:He,successMessage:Ve})=>(0,b.Ez)((0,b.$b)((async()=>{await(0,u.dx)(xe,Me),He&&o.E1.push("/alerting/silences")})()),{successMessage:Ve})),oe=(xe,Me)=>async He=>{const Ve=await He(alertmanagerApi.endpoints.getAlertmanagerConfiguration.initiate(Me)).unwrap();if(!Ve)throw new Error(`Config for ${Me} not found`);if(!Ve.alertmanager_config.receivers?.find(Ne=>Ne.name===xe))throw new Error(`Cannot delete receiver ${xe}: not found in config.`);const Oe={...Ve,alertmanager_config:{...Ve.alertmanager_config,receivers:Ve.alertmanager_config.receivers.filter(Ne=>Ne.name!==xe)}};return He(de({newConfig:Oe,oldConfig:Ve,alertManagerSourceName:Me,successMessage:"Contact point deleted."}))},ue=(xe,Me)=>async He=>{const Ve=await He(l.alertmanagerApi.endpoints.getAlertmanagerConfiguration.initiate(Me)).unwrap();if(!Ve)throw new Error(`Config for ${Me} not found`);if(typeof Ve.template_files?.[xe]!="string")throw new Error(`Cannot delete template ${xe}: not found in config.`);const Oe={...Ve.template_files};delete Oe[xe];const Ne={...Ve,alertmanager_config:{...Ve.alertmanager_config,templates:Ve.alertmanager_config.templates?.filter(_e=>_e!==xe)},template_files:Oe};return He(de({newConfig:Ne,oldConfig:Ve,alertManagerSourceName:Me,successMessage:"Template deleted."}))},me=(0,n.hg)("unifiedalerting/fetchFolder",xe=>(0,b.$b)(i.ae.getFolderByUid(xe,{withAccessControl:!0}))),ge=xe=>(Me,He)=>{He().unifiedAlerting.folders[xe]?.dispatched||Me(me(xe))},Ue=(0,n.hg)("unifiedalerting/fetchAlertGroups",xe=>(0,b.$b)((0,u.XK)(xe))),De=(0,n.hg)("unifiedalerting/deleteAlertManagerConfig",async(xe,Me)=>(0,b.Ez)((0,b.$b)((async()=>{await(0,u.CN)(xe),await Me.dispatch(l.alertmanagerApi.util.invalidateTags(["AlertmanagerConfiguration"]))})()),{errorMessage:"Failed to reset Alertmanager configuration",successMessage:"Alertmanager configuration reset."})),Pe=(xe,Me)=>async He=>{const Ve=await He(l.alertmanagerApi.endpoints.getAlertmanagerConfiguration.initiate(xe)).unwrap(),Oe=Ve?.alertmanager_config?.mute_time_intervals?.filter(({name:Ne})=>Ne!==Me)??[];Ve&&(0,b.Ez)(He(de({alertManagerSourceName:xe,oldConfig:Ve,newConfig:{...Ve,alertmanager_config:{...Ve.alertmanager_config,route:Ve.alertmanager_config.route?(0,s.rU)(Me,Ve.alertmanager_config?.route):void 0,mute_time_intervals:Oe}}})),{successMessage:`Deleted "${Me}" from Alertmanager configuration`,errorMessage:"Failed to delete mute timing"})},ye=(0,n.hg)("unifiedalerting/testReceivers",({alertManagerSourceName:xe,receivers:Me,alert:He})=>(0,b.Ez)((0,b.$b)((0,u.Bp)(xe,Me,He)),{errorMessage:"Failed to send test alert.",successMessage:"Test alert sent."})),Te=(xe,Me)=>xe.filter(He=>{const{forDuration:Ve}=(0,M.qd)(He,Me),Oe=(0,O.Bg)(Ve),Ne=(0,O.Bg)(Me);return Oe!==0&&Oe<Ne}),nt=(0,n.hg)("unifiedalerting/updateLotexNamespaceAndGroup",async(xe,Me)=>(0,b.Ez)((0,b.$b)((async()=>{const{rulesSourceName:He,namespaceName:Ve,groupName:Oe,newNamespaceName:Ne,newGroupName:_e,groupInterval:qe}=xe,rt=I(Me.getState,He),mt=await(0,h.m6)(rt);if(!!!mt[Ve])throw new Error(`Namespace "${Ve}" not found.`);const Ae=mt[Ve].find(ne=>ne.name===Oe);if(!Ae)throw new Error(`Group "${Oe}" not found.`);const Ke=!!mt[Ve].find(ne=>ne.name===_e);if(_e!==Oe&&Ke)throw new Error(`Group "${_e}" already exists in namespace "${Ve}".`);const Xe=!!mt[Ne];if(Ne!==Ve&&Xe)throw new Error(`Namespace "${Ne}" already exists.`);if(Ne===Ve&&Oe===_e&&qe===Ae.interval)throw new Error("Nothing changed.");if(qe!==Ae.interval){const ne=Te(Ae.rules,qe??"1m");if(ne.length>0)throw new Error(`These alerts belonging to this group will have an invalid 'For' value: ${ne.map(Z=>{const{alertName:ee}=(0,M.qd)(Z,qe??"");return ee}).join(",")}`)}if(Ne!==Ve){for(const ne of mt[Ve])await(0,h.P4)(rt,Ne,ne.name===Oe?{...ne,name:_e,interval:qe}:ne);await(0,h.sz)(rt,Ve)}else await(0,h.P4)(rt,Ve,{...Ae,name:_e,interval:qe}),_e!==Oe&&await(0,h.BC)(rt,Ve,Oe);await Me.dispatch(F({rulesSourceName:He}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),ct=(0,n.hg)("unifiedalerting/updateRulesOrderForGroup",async(xe,Me)=>(0,b.Ez)((0,b.$b)((async()=>{const{rulesSourceName:He,namespaceName:Ve,groupName:Oe,newRules:Ne}=xe,_e=I(Me.getState,He),rt=(await(0,h.m6)(_e))[Ve].find(Je=>Je.name===Oe);if(!rt)throw new Error(`Group "${Oe}" not found.`);const mt={name:rt.name,interval:rt.interval,rules:Ne};await(0,h.P4)(_e,Ve,mt),await Me.dispatch(F({rulesSourceName:He}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),he=(0,n.hg)("unifiedAlerting/addExternalAlertmanagers",async(xe,Me)=>(0,b.Ez)((0,b.$b)((async()=>{await(0,u.tK)(xe),Me.dispatch(N())})()),{errorMessage:"Failed adding alertmanagers",successMessage:"Alertmanagers updated"}))},5626:(G,A,e)=>{"use strict";e.d(A,{r:()=>o});var n=e(66681),a=e(16901);const o=r=>({[a.Z9.Active]:(0,n.css)`
    color: ${r.colors.error.text};
  `,[a.Z9.Suppressed]:(0,n.css)`
    color: ${r.colors.primary.text};
  `,[a.Z9.Unprocessed]:(0,n.css)`
    color: ${r.colors.secondary.text};
  `})},52912:(G,A,e)=>{"use strict";e.d(A,{Z:()=>a});var n=e(66681);const a=o=>(0,n.css)`
    float: none;
    display: flex;
    justify-content: flex-start;
    margin: ${o.spacing(2,0)};
  `},58533:(G,A,e)=>{"use strict";e.d(A,{W:()=>n});var n=(a=>(a.Incident="grafana-incident-app",a.OnCall="grafana-oncall-app",a.MachineLearning="grafana-ml-app",a))(n||{})},20304:(G,A,e)=>{"use strict";e.d(A,{$:()=>n});var n=(a=>(a.grafana="grafana",a.cloudAlerting="cloud-alerting",a.cloudRecording="cloud-recording",a))(n||{})},36860:(G,A,e)=>{"use strict";e.d(A,{t:()=>n});var n=(a=>(a.seconds="s",a.minutes="m",a.hours="h",a.days="d",a.weeks="w",a))(n||{})},5907:(G,A,e)=>{"use strict";e.d(A,{Bz:()=>f,Fo:()=>u,Ko:()=>d,Ob:()=>g,QX:()=>c,Rv:()=>v,iE:()=>h,ql:()=>E});var n=e(67954),a=e(41879),o=e(95162),r=e(76679);function i(p){return(0,r.HY)(p)?"grafana":"external"}const g={read:{grafana:o.AccessControlAction.AlertingInstanceRead,external:o.AccessControlAction.AlertingInstancesExternalRead},create:{grafana:o.AccessControlAction.AlertingInstanceCreate,external:o.AccessControlAction.AlertingInstancesExternalWrite},update:{grafana:o.AccessControlAction.AlertingInstanceUpdate,external:o.AccessControlAction.AlertingInstancesExternalWrite},delete:{grafana:o.AccessControlAction.AlertingInstanceUpdate,external:o.AccessControlAction.AlertingInstancesExternalWrite}},u={read:{grafana:o.AccessControlAction.AlertingNotificationsRead,external:o.AccessControlAction.AlertingNotificationsExternalRead},create:{grafana:o.AccessControlAction.AlertingNotificationsWrite,external:o.AccessControlAction.AlertingNotificationsExternalWrite},update:{grafana:o.AccessControlAction.AlertingNotificationsWrite,external:o.AccessControlAction.AlertingNotificationsExternalWrite},delete:{grafana:o.AccessControlAction.AlertingNotificationsWrite,external:o.AccessControlAction.AlertingNotificationsExternalWrite}},l={read:o.AccessControlAction.AlertingProvisioningRead,readSecrets:o.AccessControlAction.AlertingProvisioningReadSecrets,write:o.AccessControlAction.AlertingProvisioningWrite},m={read:{grafana:o.AccessControlAction.AlertingRuleRead,external:o.AccessControlAction.AlertingRuleExternalRead},create:{grafana:o.AccessControlAction.AlertingRuleCreate,external:o.AccessControlAction.AlertingRuleExternalWrite},update:{grafana:o.AccessControlAction.AlertingRuleUpdate,external:o.AccessControlAction.AlertingRuleExternalWrite},delete:{grafana:o.AccessControlAction.AlertingRuleDelete,external:o.AccessControlAction.AlertingRuleExternalWrite}};function c(p){const s=i(p);return{read:g.read[s],create:g.create[s],update:g.update[s],delete:g.delete[s]}}function d(p){const s=i(p);return{read:u.read[s],create:u.create[s],update:u.update[s],delete:u.delete[s],provisioning:l}}function f(p){const s=i(p);return{read:m.read[s],create:m.create[s],update:m.update[s],delete:m.delete[s]}}function E(p){return()=>a.contextSrv.evaluatePermission(p)}function v(){return{canCreateGrafanaRules:a.contextSrv.hasPermission(o.AccessControlAction.FoldersRead)&&a.contextSrv.hasPermission(m.create.grafana),canCreateCloudRules:a.contextSrv.hasPermission(o.AccessControlAction.DataSourcesRead)&&a.contextSrv.hasPermission(m.create.external),canEditRules:p=>a.contextSrv.hasPermission(f(p).update)}}function h(){const{unifiedAlertingEnabled:p}=(0,n.iE)(),s=a.contextSrv.hasPermission(f(r.GC).read),y=a.contextSrv.hasPermission(f(r.GC).update);return p&&s&&y}},98724:(G,A,e)=>{"use strict";e.d(A,{FM:()=>l,J8:()=>R,X4:()=>g,Xy:()=>S,Zh:()=>p,_J:()=>f,cm:()=>d,eD:()=>y,m8:()=>O,qw:()=>x,rU:()=>u,tA:()=>v,u6:()=>M,uK:()=>D,v7:()=>T,vB:()=>C,xz:()=>h,zy:()=>m});var n=e(56375),a=e.n(n),o=e(16901),r=e(39374),i=e(76679);function g(I){return I.alertmanager_config.receivers||(I.alertmanager_config.receivers=[{name:"default "}]),I.alertmanager_config.route||(I.alertmanager_config.route={receiver:I.alertmanager_config.receivers[0].name}),I.template_files||(I.template_files={}),I}function u(I,L){return{...L,mute_time_intervals:L.mute_time_intervals?.filter(N=>N!==I)??[],routes:L.routes?.map(N=>u(I,N))}}function l(I,L,P){return{...P,mute_time_intervals:P.mute_time_intervals?.map(N=>N===L?I:N),routes:P.routes?.map(N=>l(I,L,N))}}function m(I){return I.isEqual?I.isRegex?o._M.regex:o._M.equal:I.isRegex?o._M.notRegex:o._M.notEqual}function c(I){switch(I){case o._M.equal:return{isEqual:!0,isRegex:!1};case o._M.notEqual:return{isEqual:!1,isRegex:!1};case o._M.regex:return{isEqual:!0,isRegex:!0};case o._M.notRegex:return{isEqual:!1,isRegex:!0}}}function d(I){return{name:I.name,value:I.value,operator:m(I)}}function f(I){return{name:I.name,value:I.value,...c(I.operator)}}function E(I){return`{${I.map(d).reduce((N,F)=>{const U=`${F.name}${F.operator}"${F.value}"`;return N?`${N},${U}`:U},"")}}`}const v=[{label:o._M.equal,description:"Equals",value:o._M.equal},{label:o._M.notEqual,description:"Does not equal",value:o._M.notEqual},{label:o._M.regex,description:"Matches regex",value:o._M.regex},{label:o._M.notRegex,description:"Does not match regex",value:o._M.notRegex}];function h(I){const L=m(I);return[I.name,L,I.value]}function p(I){const L=/\b([\w.-]+)(=~|!=|!~|=(?="?\w))"?([^"\n,}]*)"?/g,P=[];return I.replace(L,(N,F,U,j)=>{const V=U===o._M.equal||U===o._M.regex,_=U===o._M.regex||U===o._M.notRegex;return P.push({name:F,value:_?s(j.trim()):j.trim(),isEqual:V,isRegex:_}),""}),P}function s(I){try{return new RegExp(I),I}catch{return""}}function y(I,L){return L.every(({name:P,value:N,isRegex:F,isEqual:U})=>Object.entries(I).some(([j,V])=>{const _=P===j;let H;return U&&!F&&(H=N===V),!U&&!F&&(H=N!==V),U&&F&&(H=new RegExp(N).test(V)),!U&&F&&(H=!new RegExp(N).test(V)),_&&H}))}function C(...I){const L=I.map(p).flat(),P=(0,n.uniqWith)(L,n.isEqual);return E(P)}function b(){return(0,r.x)().filter(I=>I.type===i.ye.Alertmanager)}function S(I){return b().find(L=>I===L.uid)}function D(I){const{times:L,weekdays:P,days_of_month:N,months:F,years:U,location:j}=I,V=M(L,j),_=T(P),H=R(N),z=O(F),K=x(U);return[V,_,H,z,K].join(", ")}function M(I,L){return"Times: "+(I?I?.map(({start_time:P,end_time:N})=>`${P} - ${N} [${L??"UTC"}]`).join(" and "):"All")}function T(I){return"Weekdays: "+(I?.map(L=>{if(L.includes(":"))return L.split(":").map(P=>{const N=P.slice(0,3);return N[0].toLocaleUpperCase()+N.slice(1)}).join("-");{const P=L.slice(0,3);return P[0].toLocaleUpperCase()+P.slice(1)}}).join(", ")??"All")}function R(I){return"Days of the month: "+(I?.join(", ")??"All")}function O(I){return"Months: "+(I?.join(", ")??"All")}function x(I){return"Years: "+(I?.join(", ")??"All")}},83507:(G,A,e)=>{"use strict";e.d(A,{$9:()=>i,XW:()=>g});var n=e(85960),a=e(46002),o=e(77294);function r(u){return{dashboardUID:u.find(([l])=>l===a.q6.dashboardUID)?.[1],panelId:u.find(([l])=>l===a.q6.panelID)?.[1]}}function i(u){return(0,n.useMemo)(()=>Object.entries(u||{}).filter(([l,m])=>!!m.trim()),[u])}function g(u){const l=new Map,{panelId:m,dashboardUID:c}=r(u);return c&&l.set(a.q6.dashboardUID,(0,o.RQ)(c)),c&&m&&l.set(a.q6.panelID,(0,o.yM)(c,m)),l}},39374:(G,A,e)=>{"use strict";e.d(A,{f:()=>r,x:()=>o});var n=e(90857),a=e(47689);function o(){return Object.values(n.config.datasources)}function r(i){if(!(0,a.wd)(n.config.unifiedAlerting.minInterval))return{globalLimit:0,exceedsLimit:!1};const g=(0,a.nd)(n.config.unifiedAlerting.minInterval);if(!i||!(0,a.wd)(i))return{globalLimit:g,exceedsLimit:!1};const u=(0,a.nd)(i),l=g>u&&u>0;return{globalLimit:g,exceedsLimit:l}}},46002:(G,A,e)=>{"use strict";e.d(A,{_y:()=>E,c4:()=>o,cm:()=>i,de:()=>r,eY:()=>v,iF:()=>g,jZ:()=>n,m4:()=>u,p4:()=>a,q6:()=>d,vY:()=>f});const n="ruler not supported",a=2e4,o="alertmanager",r="alerting-alertmanager",i=2e4,g=2e4,u=2e4,l="timeseries",m="table",c="stat";var d=(h=>(h.description="description",h.summary="summary",h.runbookURL="runbook_url",h.alertId="__alertId__",h.dashboardUID="__dashboardUid__",h.panelID="__panelId__",h))(d||{});const f={description:"Description",summary:"Summary",runbook_url:"Runbook URL",__dashboardUid__:"Dashboard UID",__panelId__:"Panel ID",__alertId__:"Alert ID"},E={description:"Description of what the alert rule does.",summary:"Short summary of what happened and why.",runbook_url:"Webpage where you keep your runbook for the alert.",__dashboardUid__:"",__panelId__:"",__alertId__:""},v=[{key:"summary",value:""},{key:"description",value:""},{key:"runbook_url",value:""}]},76679:(G,A,e)=>{"use strict";e.d(A,{$$:()=>b,EG:()=>R,EQ:()=>N,Eu:()=>v,GC:()=>c,G_:()=>H,HY:()=>L,JY:()=>d,LE:()=>S,P:()=>_,RY:()=>I,VX:()=>h,aM:()=>p,c$:()=>P,gt:()=>j,h_:()=>T,jq:()=>x,mA:()=>M,o_:()=>F,v_:()=>O,ye:()=>f,z3:()=>C});var n=e(81502),a=e(41879),o=e(16901),r=e(95162),i=e(81828),g=e(49807),u=e(84954),l=e(5907),m=e(39374);const c="grafana",d="-- Grafana --";var f=(z=>(z.Alertmanager="alertmanager",z.Loki="loki",z.Prometheus="prometheus",z))(f||{});const E=["loki","prometheus"];function v(){return a.contextSrv.hasPermission(r.AccessControlAction.AlertingRuleExternalRead)?(0,m.x)().filter(z=>E.includes(z.type)&&z.jsonData.manageAlerts!==!1).sort((z,K)=>z.name.localeCompare(K.name)):[]}function h(z){return v().find(K=>K.name===z)}function p(){return(0,m.x)().filter(z=>z.type==="alertmanager").sort((z,K)=>z.name.localeCompare(K.name))}function s(){return p().filter(z=>z.jsonData.handleGrafanaManagedAlerts)}const y={name:c,imgUrl:"public/img/grafana_icon.svg",hasConfigurationAPI:!0};function C(){return[y,...p().map(z=>({name:z.name,displayName:z.name,imgUrl:z.meta.info.logos.small,meta:z.meta}))]}function b(z){const K=(0,g.k)(z),Y=K.availableExternalDataSources.filter(te=>te.handleGrafanaManagedAlerts),k=K.availableInternalDataSources,{currentData:q}=i.alertmanagerApi.useGetAlertmanagerChoiceStatusQuery(void 0);switch(q?.alertmanagersChoice){case o.TE.Internal:return k;case o.TE.External:return Y;default:return[...k,...Y]}}function S(z){const K=[],Y=[],k={instance:l.Ob.read,notification:l.Fo.read};if(a.contextSrv.hasPermission(k[z].grafana)&&K.push(y),a.contextSrv.hasPermission(k[z].external)){const q=p().map(X=>({name:X.name,displayName:X.name,imgUrl:X.meta.info.logos.small,meta:X.meta,hasConfigurationAPI:(0,u.k0)(X.jsonData),handleGrafanaManagedAlerts:X.jsonData.handleGrafanaManagedAlerts}));Y.push(...q)}return{availableInternalDataSources:K,availableExternalDataSources:Y}}function D(z){const K=P(z);if(!K)throw new Error(`Data source ${z} not found`);if(K.type!=="loki"&&K.type!=="prometheus")throw new Error(`Unexpected data source type ${K.type}`);return K}function M(){const z=v().map(K=>K.name);return a.contextSrv.hasPermission(r.AccessControlAction.AlertingRuleRead)&&z.push(c),z}function T(){const z=v();return a.contextSrv.hasPermission(r.AccessControlAction.AlertingRuleRead)&&z.push(c),z}function R(z){return x(z)?z.name:z}function O(z){return x(z)?z.uid:c}function x(z){return z!==c}function I(z){return z!==c&&N(z)?.jsonData?.implementation===o.sK.prometheus}function L(z){return z===c}function P(z){return(0,m.x)().find(K=>K.name===z)}function N(z){return(0,m.x)().find(K=>K.name===z&&K.type==="alertmanager")}function F(z){return z===c?c:P(z)}function U(z){if(z===c)return c;const K=P(z);if(!K)throw new Error(`Datasource "${z}" not found`);return String(K.id)}function j(z){if(z===c)return c;const K=P(z);if(!K)throw new Error(`Datasource "${z}" not found`);return K.uid}function V(){return(0,n.F)().getList({alerting:!0})[0]}function _(){const z=(0,n.F)().getInstanceSettings("default");return z?.meta.alerting??!1?z:V()}function H(z){return z.jsonData.manageAlerts!==!1}},658:(G,A,e)=>{"use strict";e.d(A,{P3:()=>n,bR:()=>r,cH:()=>a,nW:()=>o});function n(i){return Object.entries(i).map(([g,u])=>`${g}=${u}`).sort()}function a(i){return Object.entries(i).map(([g,u])=>[g,u])}function o(i){const g={};return i.forEach(u=>{g[u[0]]=u[1]}),g}function r(i){const g={};return i.forEach(u=>{u.key&&(g[u.key]=u.value)}),g}},41460:(G,A,e)=>{"use strict";e.d(A,{QO:()=>l,RT:()=>g,rz:()=>u,tC:()=>i});var n=e(56375),a=e.n(n),o=e(16901);const r=[o._M.regex,o._M.notRegex,o._M.notEqual,o._M.equal];function i(m){if(m.startsWith("{")&&m.endsWith("}"))throw new Error(`PromQL matchers not supported yet, sorry! PromQL matcher found: ${m}`);const c=r.map(h=>[h,m.indexOf(h)]).filter(([h,p])=>p>-1).sort((h,p)=>h[1]-p[1]);if(!c.length)throw new Error(`Invalid matcher: ${m}`);const[d,f]=c[0],E=m.slice(0,f).trim(),v=m.slice(f+d.length);if(!E)throw new Error(`Invalid matcher: ${m}`);return{name:E,value:v,isRegex:d===o._M.regex||d===o._M.notRegex,isEqual:d===o._M.equal||d===o._M.regex}}function g(m){const c=m.filter(d=>!!d.trim()).map(d=>i(d));return(0,n.uniqBy)(c,d=>d.name)}const u=m=>{const c=Object.entries(m).filter(([f])=>!(f.startsWith("__")&&f.endsWith("__"))),d=new URLSearchParams;return c.forEach(([f,E])=>d.append("matcher",`${f}=${E}`)),d},l=m=>{const c=[];return m.matchers&&m.matchers.forEach(d=>{const{name:f,value:E,isEqual:v,isRegex:h}=i(d);let p=o._M.equal;v&&h&&(p=o._M.regex),!v&&h&&(p=o._M.notRegex),v&&!h&&(p=o._M.equal),!v&&!h&&(p=o._M.notEqual),c.push([f,p,E])}),m.object_matchers&&c.push(...m.object_matchers),m.match_re&&Object.entries(m.match_re).forEach(([d,f])=>{c.push([d,o._M.regex,f])}),m.match&&Object.entries(m.match).forEach(([d,f])=>{c.push([d,o._M.equal,f])}),c}},77294:(G,A,e)=>{"use strict";e.d(A,{ET:()=>p,GV:()=>h,HV:()=>L,J8:()=>D,RQ:()=>N,S0:()=>y,V2:()=>E,VN:()=>x,Vj:()=>_,Vv:()=>O,Zl:()=>V,__:()=>I,aH:()=>P,eQ:()=>M,fm:()=>U,lC:()=>C,mH:()=>v,mt:()=>H,pF:()=>S,sM:()=>R,t6:()=>s,yM:()=>F});var n=e(56375),a=e.n(n),o=e(92380),r=e(90857),i=e(60956),g=e(9001),u=e(62567),l=e(25119),m=e(46002),c=e(76679),d=e(41460),f=e(87873);function E(z,K,Y){const k=(0,c.EG)(z),q=i.Yd(k,K),X=encodeURIComponent(i.$V(q)),te=encodeURIComponent(k);return(0,f.u)(`/alerting/${te}/${X}/view`,{returnTo:Y})}function v(z,K){const{uid:Y,type:k}=z;return(0,f.u)("/explore",{left:JSON.stringify({datasource:z.uid,queries:[{refId:"A",datasource:{uid:Y,type:k},expr:K}],range:{from:"now-1h",to:"now"}})})}function h(z,K=""){return(0,f.u)(`/alerting/notifications/receivers/${encodeURIComponent(z)}/edit`,{alertmanager:K})}function p(z,K=""){return(0,f.u)("/alerting/routes/mute-timing/edit",{muteName:z,alertmanager:K})}function s(z,K){return(0,c.jq)(z)?(0,f._)(`/alerting/${encodeURIComponent(z.name)}/${encodeURIComponent((0,i.GV)(K.name))}/find`):window.location.href.split("?")[0]}function y(z){return z.reduce((K,{key:Y,value:k})=>(K[Y]=k,K),{})}const C=z=>{const K=z.queryString===void 0?void 0:String(z.queryString),Y=z.alertState===void 0?void 0:String(z.alertState),k=z.dataSource===void 0?void 0:String(z.dataSource),q=z.ruleType===void 0?void 0:String(z.ruleType),X=z.groupBy===void 0?void 0:String(z.groupBy).split(",");return{queryString:K,alertState:Y,dataSource:k,groupBy:X,ruleType:q}},b=z=>({queryString:z.get("queryString")??void 0,contactPoint:z.get("contactPoint")??void 0}),S=z=>{const K=z.queryString===void 0?void 0:String(z.queryString),Y=z.silenceState===void 0?void 0:String(z.silenceState);return{queryString:K,silenceState:Y}};function D(z){return Object.entries(z).map(([K,Y])=>({key:K,value:Y}))}function M(z,K,Y){const k=new URLSearchParams(Y);return K&&k.append(m.c4,K),`${z}?${k.toString()}`}const T=z=>z.replace(/\"/g,'\\"');function R(z){return z.startsWith('"')&&z.endsWith('"')?T(z):`"${T(z)}"`}function O(z,K){const Y={alertname:K.name,...K.labels};return x(z,Y)}function x(z,K){const Y=new URLSearchParams;return Y.append("alertmanager",z),(0,d.rz)(K).forEach((q,X)=>Y.append(X,q)),(0,f.u)("/alerting/silence/new",Y)}function I(z){return(0,f.u)(`/datasources/edit/${z.uid}`)}function L(z){return(0,f.u)(`/dashboards/f/${z}`)}function P(z){return(0,f.u)(`/dashboards/f/${z.uid}/${z.title}/settings`)}function N(z){return(0,f.u)(`/d/${encodeURIComponent(z)}`)}function F(z,K){return(0,f.u)(`/d/${encodeURIComponent(z)}`,{viewPanel:K})}function U(z,K,Y,k=1e3){const q=new Date().getTime(),X=()=>z().catch(te=>{if(K(te)&&new Date().getTime()-q<Y)return new Promise(se=>setTimeout(se,k)).then(X);throw te});return X()}const j={[l.bj.Alerting]:1,[l.x_.Firing]:1,[l.bj.Error]:1,[l.bj.Pending]:2,[l.x_.Pending]:2,[l.x_.Inactive]:2,[l.bj.NoData]:3,[l.bj.Normal]:4};function V(z,K){if(z===u.As.Importance)return(0,n.sortBy)(K,k=>[j[(0,l.ED)(k.state)],(0,g.pB)(k).toLocaleLowerCase()]);if(z===u.As.TimeAsc)return(0,n.sortBy)(K,k=>[new Date(k.activeAt)||new Date,(0,g.pB)(k).toLocaleLowerCase()]);if(z===u.As.TimeDesc)return(0,n.sortBy)(K,k=>[new Date(k.activeAt)||new Date,(0,g.pB)(k).toLocaleLowerCase()]).reverse();const Y=(0,n.sortBy)(K,k=>(0,g.pB)(k).toLocaleLowerCase());return z===u.As.AlphaDesc&&Y.reverse(),Y}function _(){return r.config.buildInfo.edition===o.e.OpenSource}function H(){return r.config.buildInfo.env==="development"}},30422:(G,A,e)=>{"use strict";e.d(A,{$b:()=>c,Ez:()=>d,I7:()=>b,PE:()=>v,i6:()=>l,jK:()=>m,kk:()=>E,op:()=>S,oq:()=>g,wt:()=>C,yR:()=>y});var n=e(20079),a=e(47475),o=e(85445),r=e(49683),i=e(34456);const g=Object.freeze({loading:!1,result:void 0,error:void 0,dispatched:!1});function u(D,M=g,T){if(D.pending.match(T))return{result:M.result,loading:!0,error:M.error,dispatched:!0,requestId:T.meta.requestId};if(D.fulfilled.match(T)){if(M.requestId===void 0||M.requestId===T.meta.requestId)return{...M,result:T.payload,loading:!1,error:void 0}}else if(D.rejected.match(T)&&M.requestId===T.meta.requestId)return{...M,loading:!1,error:T.error};return M}function l(D,M){return(0,n.oM)({name:D,initialState:g,reducers:{},extraReducers:T=>T.addDefaultCase((R,O)=>u(M,R,O))})}function m(D,M,T){return(0,n.oM)({name:D,initialState:{},reducers:{},extraReducers:R=>R.addDefaultCase((O,x)=>{if((0,n.Gx)(M)(x)){const I=x,L=T(I.meta.arg);return{...O,[L]:u(M,O[L],I)}}return O})})}function c(D){return D.catch(M=>{throw{message:E(M),code:M.statusCode}})}function d(D,M){return D.then(T=>(M.successMessage&&r.h$.emit(a.SI.alertSuccess,[M.successMessage]),T)).catch(T=>{const R=E(T);throw r.h$.emit(a.SI.alertError,[`${M.errorMessage??"Error"}: ${R}`]),T})}const f="Unknown Error";function E(D){if((0,o.kW)(D))if(D.data?.message){let T=D.data?.message;return typeof D.data?.error=="string"&&(T+=`; ${D.data.error}`),T}else{if(Array.isArray(D.data)&&D.data.length&&D.data[0]?.message)return D.data.map(T=>T?.message).filter(T=>!!T).join(" ");if(D.statusText)return D.statusText}const M=D?.message;return M||((0,i.PN)(i.z7.unknownMessageFromError,{error:JSON.stringify(D)}),f)}function v(D){return Object.values(D).every(h)}function h(D){return D.dispatched&&!D.loading}function p(D){return Object.values(D).every(s)}function s(D){return D.dispatched&&!D.loading&&!D.error}function y(D){return Object.values(D).some(S)}function C(D){return Object.values(D).some(M=>M.dispatched)}function b(D){return Object.values(D).some(s)}function S(D){return D?D.dispatched&&D.loading:!1}},38884:(G,A,e)=>{"use strict";e.d(A,{DQ:()=>T,EB:()=>y,QN:()=>_,TN:()=>D,WL:()=>R,aR:()=>N,eZ:()=>H,lN:()=>O,mI:()=>M,s0:()=>x,tO:()=>V,uZ:()=>C,yh:()=>b});var n=e(56375),a=e.n(n),o=e(9833),r=e(71244),i=e(81502),g=e(32063),u=e(21871),l=e(36530),m=e(25119),c=e(34524),d=e(20304),f=e(5907),E=e(46002),v=e(76679),h=e(77294),p=e(9001),s=e(47689);const y="1m",C=()=>{const{canCreateGrafanaRules:z,canCreateCloudRules:K}=(0,f.Rv)();return Object.freeze({name:"",uid:"",labels:[{key:"",value:""}],annotations:E.eY,dataSourceName:null,type:z?d.$.grafana:K?d.$.cloudAlerting:void 0,group:"",folder:null,queries:[],recordingRulesQueries:[],condition:"",noDataState:m.g0.NoData,execErrState:m.g0.Error,evaluateFor:"5m",evaluateEvery:y,manualRouting:!1,contactPoints:[],namespace:"",expression:"",forTime:1,forTimeUnit:"m"})};function b(z){const{name:K,expression:Y,forTime:k,forTimeUnit:q,keepFiringForTime:X,keepFiringForTimeUnit:te,type:se}=z;if(se===d.$.cloudAlerting){let de;return X&&te&&(de=`${X}${te}`),{alert:K,for:`${k}${q}`,keep_firing_for:de,annotations:(0,h.S0)(z.annotations||[]),labels:(0,h.S0)(z.labels||[]),expr:Y}}else if(se===d.$.cloudRecording)return{record:K,labels:(0,h.S0)(z.labels||[]),expr:Y};throw new Error(`unexpected rule type: ${se}`)}function S(z,K){const Y=[...(0,h.J8)(z||{})];return K&&Y.push({key:"",value:""}),Y}function D(z){const K=[...z];return E.eY.map(k=>k.key).forEach((k,q)=>{const X=K.findIndex(te=>te.key===k);if(X===-1){const te={key:k,value:""};K.splice(q,0,te)}else X!==q&&K.splice(q,0,K.splice(X,1)[0])}),K}function M(z){const{name:K,condition:Y,noDataState:k,execErrState:q,evaluateFor:X,queries:te,isPaused:se}=z;if(Y)return{grafana_alert:{title:K,condition:Y,no_data_state:k,exec_err_state:q,data:te.map(U),is_paused:!!se},for:X,annotations:(0,h.S0)(z.annotations||[]),labels:(0,h.S0)(z.labels||[])};throw new Error("Cannot create rule without specifying alert condition")}function T(z){const{ruleSourceName:K,namespace:Y,group:k,rule:q}=z,X=C();if((0,v.HY)(K))if((0,p.Pc)(q)){const te=q.grafana_alert;return{...X,name:te.title,type:d.$.grafana,group:k.name,evaluateEvery:k.interval||X.evaluateEvery,evaluateFor:q.for||"0",noDataState:te.no_data_state,execErrState:te.exec_err_state,queries:te.data,condition:te.condition,annotations:D(S(q.annotations,!1)),labels:S(q.labels,!0),folder:{title:Y,uid:te.namespace_uid},isPaused:te.is_paused}}else throw new Error("Unexpected type of rule for grafana rules source");else if((0,p.cG)(q)){const se={refId:"A",datasourceUid:(0,i.F)().getInstanceSettings(K)?.uid??"",queryType:"",relativeTimeRange:(0,o.Rr)(),expr:q.expr,model:{refId:"A",hide:!1,expr:q.expr}},de=R(q);return{...X,...de,queries:[se],annotations:D(S(q.annotations,!1)),type:d.$.cloudAlerting,dataSourceName:K,namespace:Y,group:k.name}}else if((0,p.yF)(q)){const te=O(q);return{...X,...te,type:d.$.cloudRecording,dataSourceName:K,namespace:Y,group:k.name}}else throw new Error("Unexpected type of rule for cloud rules source")}function R(z){const K=C(),[Y,k]=z.for?(0,s.bG)(z.for):[K.forTime,K.forTimeUnit],[q,X]=z.keep_firing_for?(0,s.bG)(z.keep_firing_for):[K.keepFiringForTime,K.keepFiringForTimeUnit];return{name:z.alert,expression:z.expr,forTime:Y,forTimeUnit:k,keepFiringForTime:q,keepFiringForTimeUnit:X,annotations:S(z.annotations,!1),labels:S(z.labels,!0)}}function O(z){return{name:z.record,expression:z.expr,labels:S(z.labels,!0)}}const x=()=>{const z=(0,v.P)();if(!z)return[...L("A","B")];const K=(0,o.Rr)();return[{refId:"A",datasourceUid:z.uid,queryType:"",relativeTimeRange:K,model:{refId:"A"}},...L("B","C")]},I=z=>{const K=getDefaultRelativeTimeRange();return[{refId:"A",datasourceUid:z[0]?.uid||"",queryType:"",relativeTimeRange:K,model:{refId:"A"}}]},L=(...z)=>{const K=z[0],Y=z[1],k={refId:z[0],type:l.Us.reduce,datasource:{uid:l.Yq,type:g.hr.type},conditions:[{type:"query",evaluator:{params:[],type:c.$.IsAbove},operator:{type:"and"},query:{params:[K]},reducer:{params:[],type:"last"}}],reducer:"last",expression:"A"},q={refId:Y,type:l.Us.threshold,datasource:{uid:l.Yq,type:g.hr.type},conditions:[{type:"query",evaluator:{params:[0],type:c.$.IsAbove},operator:{type:"and"},query:{params:[Y]},reducer:{params:[],type:"last"}}],expression:K};return[{refId:K,datasourceUid:l.Yq,queryType:"",model:k},{refId:Y,datasourceUid:l.Yq,queryType:"",model:q}]},P=async(z,K,Y,k,q,X)=>{const te=[];for(const se of z){const de=await(0,i.F)().get(se.datasource?.uid?se.datasource:k),re={uid:de.uid,type:de.type},fe=r.relativeToTimeRange(K),{interval:ie,intervalMs:oe}=F(fe,X??de.interval,q),ue={__interval:{text:ie,value:ie},__interval_ms:{text:oe,value:oe},...Y},me=de.interpolateVariablesInQueries?await de.interpolateVariablesInQueries([se],ue)[0]:se;if(re.uid===l.Yq){const ge={refId:me.refId,queryType:"",relativeTimeRange:K,datasourceUid:l.Yq,model:me};te.push(ge)}else{const ge=(0,i.F)().getInstanceSettings(re);if(ge&&ge.meta.alerting){const Ue={refId:me.refId,queryType:me.queryType??"",relativeTimeRange:K,datasourceUid:ge.uid,model:{...me,maxDataPoints:q,intervalMs:oe}};te.push(Ue)}}}return te},N=async(z,K)=>{const{targets:Y}=z;if(!z.id||!K.uid)return;const k=r.timeRangeToRelative(r.convertRawToRange(K.time)),q=await P(Y,k,z.scopedVars||{},z.datasource??void 0,z.maxDataPoints??void 0,z.interval??void 0);if(!q.length||!q.find(de=>de.datasourceUid!==l.Yq))return;if(!q.find(de=>de.datasourceUid===l.Yq)){const[de,re]=L((0,u.Hs)(q),"-");q.push(de);const[fe,ie]=L(de.refId,(0,u.Hs)(q));q.push(ie)}const{folderTitle:X,folderUid:te}=K.meta;return{type:d.$.grafana,folder:te&&X?{uid:te,title:X}:void 0,queries:q,name:z.title,condition:q[q.length-1].refId,annotations:[{key:E.q6.dashboardUID,value:K.uid},{key:E.q6.panelID,value:String(z.id)}]}};function F(z,K,Y){return Y?r.calculateInterval(z,Y,K):K&&r.intervalToMs(K)>1e3?{interval:K,intervalMs:r.intervalToMs(K)}:{interval:"1s",intervalMs:1e3}}function U(z){const K=z.model;return j(K)&&K.instant&&K.range?{...z,model:{...K,range:!0,instant:!1}}:z}function j(z){return"expr"in z&&"instant"in z&&"range"in z}function V(z){return"expr"in z}const _=z=>({...z,queries:z.queries?.map(K=>(0,n.omit)(K,"model.hide"))});function H(z){return _(T(z))}},60956:(G,A,e)=>{"use strict";e.d(A,{$V:()=>C,CK:()=>m,Dg:()=>c,GV:()=>h,OA:()=>y,Om:()=>S,Qc:()=>s,Yd:()=>l,Zk:()=>g,d3:()=>p,s0:()=>T,s4:()=>R});var n=e(56375),a=e.n(n),o=e(91),r=e(76679),i=e(9001);function g(O,x,I,L){return(0,i.Pc)(L)?{uid:L.grafana_alert.uid,ruleSourceName:"grafana"}:{ruleSourceName:O,namespace:x,groupName:I,ruleName:(0,i.cG)(L)?L.alert:L.record,rulerRuleHash:S(L)}}function u(O,x,I,L){return{ruleSourceName:O,namespace:x,groupName:I,ruleName:L.name,ruleHash:D(L)}}function l(O,x){const I=x.namespace.name,L=x.group.name;if(x.rulerRule)return g(O,I,L,x.rulerRule);if(x.promRule)return u(O,I,L,x.promRule);throw new Error("Could not create an id for a rule that is missing both `rulerRule` and `promRule`.")}function m(O){return g(O.ruleSourceName,O.namespace,O.group.name,O.rule)}function c(O,x){return(0,i.Kl)(O)&&(0,i.Kl)(x)?O.uid===x.uid:(0,i.E4)(O)&&(0,i.E4)(x)?O.groupName===x.groupName&&O.namespace===x.namespace&&O.ruleName===x.ruleName&&O.rulerRuleHash===x.rulerRuleHash&&O.ruleSourceName===x.ruleSourceName:(0,i.qE)(O)&&(0,i.qE)(x)?O.groupName===x.groupName&&O.namespace===x.namespace&&O.ruleName===x.ruleName&&O.ruleHash===x.ruleHash&&O.ruleSourceName===x.ruleSourceName:!1}const d="cri",f="pri";function E(O){return O.replace(/\$/g,"_DOLLAR_")}function v(O){return O.replace(/\_DOLLAR\_/g,"$")}function h(O){return O.replace(/\//g,"").replace(/\\/g,"")}function p(O){return O.replace(/\x1f/g,"/").replace(/\x1e/g,"\\")}function s(O,x=!1){const L=(x?decodeURIComponent(O):O).split("$");if(L.length===1)return{uid:O,ruleSourceName:"grafana"};if(L.length===6){const[P,N,F,U,j,V]=L.map(v).map(p);if(P===d)return{ruleSourceName:N,namespace:F,groupName:U,ruleName:j,rulerRuleHash:V};if(P===f)return{ruleSourceName:N,namespace:F,groupName:U,ruleName:j,ruleHash:V}}throw new Error(`Failed to parse rule location: ${O}`)}function y(O,x=!1){if(O)try{return s(O,x)}catch{return}}function C(O){return(0,i.Kl)(O)?O.uid:(0,i.E4)(O)?[d,O.ruleSourceName,O.namespace,O.groupName,O.ruleName,O.rulerRuleHash].map(String).map(E).map(h).join("$"):[f,O.ruleSourceName,O.namespace,O.groupName,O.ruleName,O.ruleHash].map(String).map(E).map(h).join("$")}function b(O){let x=0;if(O.length===0)return x;for(let I=0;I<O.length;I++){const L=O.charCodeAt(I);x=(x<<5)-x+L,x=x&x}return x}function S(O){if((0,i.yF)(O))return b(JSON.stringify([O.record,O.expr,M(O.labels)])).toString();if((0,i.cG)(O))return b(JSON.stringify([O.alert,O.expr,M(O.annotations),M(O.labels)])).toString();if((0,i.Pc)(O))return O.grafana_alert.uid;throw new Error("only recording and alerting ruler rules can be hashed")}function D(O){if((0,i.OP)(O))return b(JSON.stringify([O.type,O.query,M(O.labels)])).toString();if((0,i.x_)(O))return b(JSON.stringify([O.type,O.query,M(O.annotations),M(O.labels)])).toString();throw new Error("only recording and alerting rules can be hashed")}function M(O){return JSON.stringify(Object.entries(O||{}).sort((x,I)=>x[0].localeCompare(I[0])))}function T(O){return(0,i.Kl)(O)?r.GC:O.ruleSourceName}function R(O){const{pathname:x=""}=o.E1.getLocation(),{id:I}=O;return I?(0,n.nth)(x.split("/"),-2):void 0}},9001:(G,A,e)=>{"use strict";e.d(A,{Aq:()=>O,C7:()=>R,E:()=>v,E4:()=>y,Jq:()=>L,Kl:()=>s,OP:()=>c,PW:()=>P,Pc:()=>E,Re:()=>T,SS:()=>D,Wd:()=>C,cG:()=>d,m$:()=>p,pB:()=>h,qE:()=>b,qd:()=>N,ub:()=>I,vU:()=>S,x_:()=>m,yF:()=>f});var n=e(56375),a=e.n(n),o=e(5108),r=e(25119),i=e(35782),g=e(46002),u=e(76679),l=e(47689);function m(U){return typeof U=="object"&&U.type===r.pz.Alerting}function c(U){return typeof U=="object"&&U.type===r.pz.Recording}function d(U){return typeof U=="object"&&"alert"in U}function f(U){return typeof U=="object"&&"record"in U}function E(U){return typeof U=="object"&&"grafana_alert"in U}function v(U){return U.rulerRule&&E(U.rulerRule)&&!!U.rulerRule.grafana_alert.is_paused}function h(U){return JSON.stringify(U.labels)}function p(U){return U.error&&U.error?.message?.includes(g.jZ)}function s(U){return"uid"in U}function y(U){return"rulerRuleHash"in U}function C(U){return Object.values(r.pz).includes(U)}function b(U){return"ruleHash"in U}function S(U){switch(U){case"ok":return i.VG.Ok;case"nodata":return i.VG.NoData;case"error":case"err":return i.VG.Error;case"unknown":return i.VG.Unknown;default:return}}function D(U){return U===r.x_.Inactive?"Normal":(0,n.capitalize)(U)}const M=U=>U.reduce((j,{dataSourceName:V,name:_,groups:H})=>(H.forEach(({name:z,rules:K})=>{K.forEach(Y=>{m(Y)&&j.push({dataSourceName:V,namespaceName:_,groupName:z,rule:Y})})}),j),[]),T=U=>m(U.promRule)?U.promRule:null,R=U=>U.reduce((j,{rulesSource:V,name:_,groups:H})=>(H.forEach(({name:z,rules:K})=>{K.forEach(Y=>{Y.promRule&&m(Y.promRule)&&j.push({dataSourceName:(0,u.EG)(V),namespaceName:_,groupName:z,...Y})})}),j),[]);function O(U){let j;return Object.values(o.Z).includes(U)?j=U:j=(0,r.ED)(U),x[j]}const x={[r.x_.Inactive]:"good",[r.x_.Firing]:"bad",[r.x_.Pending]:"warning",[r.bj.Alerting]:"bad",[r.bj.Error]:"bad",[r.bj.NoData]:"info",[r.bj.Normal]:"good",[r.bj.Pending]:"warning",[o.Z.NoData]:"info",[o.Z.Paused]:"warning",[o.Z.Alerting]:"bad",[o.Z.OK]:"good",[o.Z.Unknown]:"info"};function I(U){return U?.alerts?U.alerts.reduce((j,V)=>{const _=(0,r.ED)(V.state)!==r.bj.Normal;if(V.activeAt&&_){const H=new Date(V.activeAt);if(j===null||j.getTime()>H.getTime())return H}return j},null):null}function L(U){return Array.isArray(U.source_tenants)}function P(U){return E(U)?U.grafana_alert.title:d(U)?U.alert:f(U)?U.record:""}const N=(U,j)=>{const V={alertName:"",forDuration:"0s",evaluationsToFire:0};return E(U)?{alertName:U.grafana_alert.title,forDuration:U.for,evaluationsToFire:F(U.for,j)}:d(U)?{alertName:U.alert,forDuration:U.for??"1m",evaluationsToFire:F(U.for??"1m",j)}:V},F=(U,j)=>{const V=(0,l.Bg)(j),_=(0,l.Bg)(U);return _===0&&V!==0?1:V===0||_/V<1?0:Math.ceil(_/V)+1}},47689:(G,A,e)=>{"use strict";e.d(A,{Bg:()=>c,bG:()=>a,gS:()=>f,gV:()=>d,nd:()=>m,qr:()=>r,wd:()=>i});var n=e(36860);function a(E){const v=E.match(/(\d+)(\w+)/);if(v)return[Number(v[1]),v[2]];throw new Error(`Invalid interval description: ${E}`)}function o(E){const{sec:v,count:h}=describeInterval(E);return v*h}const r=Object.entries(n.t).map(([E,v])=>({label:E[0].toUpperCase()+E.slice(1),value:v}));function i(E){try{return m(E),!0}catch{return!1}}const g={ms:1,s:1e3,m:60*1e3,h:60*60*1e3,d:24*60*60*1e3,w:7*24*60*60*1e3,y:365*24*60*60*1e3},u=new RegExp(/^(?:(?<value>\d+)(?<type>ms|s|m|h|d|w|y))|0$/),l=new Error(`Must be of format "(number)(unit)", for example "1m", or just "0". Available units: ${Object.values(n.t).join(", ")}`);function m(E){let v=E,h=[];function p(y){const C=u.exec(y),b=C?.groups?.value&&C?.groups?.type;if(!C||!b)throw l;C&&C.groups?.value&&C.groups?.type&&(v=v.replace(C[0],""),h.push([Number(C.groups.value),C.groups.type])),v&&p(v)}if(p(E),!h.length)throw l;return h.reduce((y,[C,b])=>{const S=C*g[b];return y+S},0)}const c=E=>{try{return m(E)}catch{return 0}},d=E=>E.includes("0001-01-01T00");function f(E){return E%(1e3*60*60)===0?E/(1e3*60*60)+"h":E%(1e3*60)===0?E/(1e3*60)+"m":E%1e3===0?E/1e3+"s":E.toFixed()+"ms"}},87873:(G,A,e)=>{"use strict";e.d(A,{_:()=>o,u:()=>a});var n=e(90857);function a(r,i){const u=new URLSearchParams(i).toString();return`${n.config.appSubUrl}${r}${u?`?${u}`:""}`}function o(r,i){const u=new URLSearchParams(i).toString();try{const l=new URL(n.config.appSubUrl,n.config.appUrl);return l.pathname=r,`${l.href}${u?`?${u}`:""}`}catch{return a(r,i)}}},71785:(G,A,e)=>{"use strict";e.d(A,{Dl:()=>r,_E:()=>o,lK:()=>i,xD:()=>a});var n=e(85445);function a(g){return(0,n.i)().post("/api/annotations",g)}function o(g){return(0,n.i)().put(`/api/annotations/${g.id}`,g)}function r(g){return(0,n.i)().delete(`/api/annotations/${g.id}`)}async function i(){return(await(0,n.i)().get("/api/annotations/tags")).result.tags.map(({tag:u,count:l})=>({term:u,count:l}))}},1283:(G,A,e)=>{"use strict";e.d(A,{r:()=>c});var n=e(21964),a=e(25066),o=e(98231),r=e(71244),i=e(81223),g=e(98659),u=e(76863);let l=100;function m(){return"AQ"+l++}function c(d,f,E){const v={...u.yA,...f.annotations},h={...v.getDefaultQuery?.(),...E},p=v.prepareAnnotation(h);if(!p)return(0,n.of)({});const s=v.prepareQuery(p);if(!s)return(0,n.of)({});const y=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,C=r.calculateInterval(d.range,y,f.interval),b={__interval:{text:C.interval,value:C.interval},__interval_ms:{text:C.intervalMs.toString(),value:C.intervalMs},__annotation:{text:p.name,value:p}},S={startTime:Date.now(),requestId:m(),range:d.range,maxDataPoints:y,scopedVars:b,...C,app:i.zj.Dashboard,timezone:d.dashboard.timezone,targets:[{...s,refId:"Anno"}]};return(0,g.v7)(f,S).pipe((0,a.z)(D=>{const M=D?.series.length?D.series:D.annotations;return M?.length?v.processEvents(p,M).pipe((0,o.U)(T=>({panelData:D,events:T}))):(0,n.of)({panelData:D,events:[]})}))}},76863:(G,A,e)=>{"use strict";e.d(A,{$w:()=>y,r0:()=>E,yA:()=>d,yr:()=>C});var n=e(56375),a=e.n(n),o=e(21964),r=e(25066),i=e(98231),g=e(53615),u=e(58309),l=e(94372),m=e(16949),c=e(67954);const d={prepareAnnotation:b=>{if((0,n.isString)(b?.query)){const{query:S,...D}=b;return{...D,target:{refId:"annotation_query",query:S},mappings:{}}}return b},prepareQuery:b=>b.target,processEvents:(b,S)=>p(S,b.mappings)};function f(){return b=>b.pipe((0,r.z)(S=>{if(!S?.length)return(0,o.of)(void 0);if(S.length===1)return(0,o.of)(S[0]);const D={interpolate:M=>M};return(0,o.of)(S).pipe(g.Y.mergeTransformer.operator({},D),(0,i.U)(M=>M[0]))}))}const E=[{key:"time",field:b=>b.fields.find(S=>S.type===u.fS.time),placeholder:"time, or the first time field"},{key:"timeEnd",label:"end time",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:b=>b.fields.find(S=>S.type===u.fS.string),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],v=[{key:"color"},{key:"isRegion"},{key:"source"}],h=[...c.config.publicDashboardAccessToken?v:[],...E,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}];function p(b,S){return(0,o.of)(b).pipe(f(),(0,i.U)(D=>{if(!D?.length)return[];let M=!1,T=!1;const R={};for(const I of D.fields){const L=(0,l.CZ)(I,D);R[L.toLowerCase()]=I}S||(S={});const O=[];for(const I of h){const L=S[I.key]||{};if(L.source===m.L.Skip)continue;const P={key:I.key,split:I.split};if(L.source===m.L.Text)P.text=L.value;else{const N=(L.value||I.key).toLowerCase();P.field=R[N],!P.field&&I.field&&(P.field=I.field(D))}(P.field||P.text)&&(O.push(P),P.key==="time"?M=!0:P.key==="text"&&(T=!0))}if(!M||!T)return console.error("Cannot process annotation fields. No time or text present."),[];const x=[];for(let I=0;I<D.length;I++){const L={type:"default",color:"red"};for(const P of O){let N;if(P.text)N=P.text;else if(P.field&&(N=P.field.values[I],N!==void 0&&P.regex)){const F=P.regex.exec(N);F&&(N=F[1]?F[1]:F[0])}N!=null&&(P.split&&typeof N=="string"&&(N=N.split(",")),L[P.key]=N)}x.push(L)}return x}))}const s=["prometheus","loki","elasticsearch","grafana-opensearch-datasource"];function y(b){const{type:S}=b;return!(S==="datasource"||s.includes(S))}function C(b){const{type:S}=b;return s.includes(S)}},27849:(G,A,e)=>{"use strict";e.d(A,{ZP:()=>c,dF:()=>g,iK:()=>r,j4:()=>i,nQ:()=>l,ql:()=>u});var n=e(20079);const a={hasFetched:!1,includeExpired:!1,keys:[],keysIncludingExpired:[],searchQuery:"",migrationResult:{total:0,migrated:0,failed:0,failedApikeyIDs:[0],failedDetails:[]}},o=(0,n.oM)({name:"apiKeys",initialState:a,reducers:{apiKeysLoaded:(d,f)=>{const{keys:E,keysIncludingExpired:v}=f.payload,h=f.payload.keys.length===0&&f.payload.keysIncludingExpired.length>0?!0:d.includeExpired;return{...d,hasFetched:!0,keys:E,keysIncludingExpired:v,includeExpired:h}},setSearchQuery:(d,f)=>({...d,searchQuery:f.payload}),includeExpiredToggled:d=>({...d,includeExpired:!d.includeExpired}),isFetching:d=>({...d,hasFetched:!1}),setMigrationResult:(d,f)=>({...d,migrationResult:f.payload})}}),{apiKeysLoaded:r,includeExpiredToggled:i,isFetching:g,setSearchQuery:u,setMigrationResult:l}=o.actions,c={apiKeys:o.reducer}},67368:(G,A,e)=>{"use strict";e.d(A,{getAuthProviderStatus:()=>c,getRegisteredAuthProviders:()=>u,initAuthConfig:()=>d});var n=e(49683),a=e(46783),o=e(95162);const r=[],i={};function g(E,v){r.find(h=>h.id===E.id)||(r.push(E),v&&(i[E.id]=v))}function u(){return r}function l(E){return r.find(v=>v.id===E)}function m(E){const v=[];for(const[h,p]of Object.entries(E)){const s=r.find(y=>`auth.${y.id}`===h);if(s){const y={...p,providerId:s.id,displayName:p.name||s.displayName};v.push(y)}}return v}async function c(E){if(i[E]){const v=i[E];return v()}return{configured:!1,enabled:!1}}function d(){g({id:"ldap",type:"LDAP",protocol:"LDAP",displayName:"LDAP",configPath:"ldap"},f)}async function f(){if(n.Vt.hasPermission(o.AccessControlAction.SettingsRead)){const v=(await(0,a.i)().get("/api/admin/settings"))["auth.ldap"]||{};return{configured:v.enabled==="true",enabled:v.enabled==="true",hide:v.enabled!=="true"}}return{configured:!1,enabled:!1}}},99848:(G,A,e)=>{"use strict";e.d(A,{AB:()=>i,AW:()=>r,ZP:()=>v,_E:()=>u,sg:()=>f,uX:()=>g});var n=e(20079);const a={settings:{},providerStatuses:{},isLoading:!1,providers:[]},o=(0,n.oM)({name:"authConfig",initialState:a,reducers:{settingsUpdated:(h,p)=>({...h,settings:p.payload}),providerStatusesLoaded:(h,p)=>({...h,providerStatuses:p.payload}),loadingBegin:h=>({...h,isLoading:!0}),loadingEnd:h=>({...h,isLoading:!1}),setError:(h,p)=>({...h,updateError:p.payload}),resetError:h=>({...h,updateError:void 0}),setWarning:(h,p)=>({...h,warning:p.payload}),resetWarning:h=>({...h,warning:void 0}),providersLoaded:(h,p)=>({...h,providers:p.payload})}}),{settingsUpdated:r,providerStatusesLoaded:i,loadingBegin:g,loadingEnd:u,setError:l,resetError:m,setWarning:c,resetWarning:d,providersLoaded:f}=o.actions,v={authConfig:o.reducer}},42321:(G,A,e)=>{"use strict";e.d(A,{CN:()=>E.CN,Hv:()=>p,OH:()=>S,Zi:()=>h,jL:()=>D,t4:()=>b,vN:()=>R,wo:()=>M,yC:()=>s,yF:()=>T,zs:()=>C,zu:()=>y});var n=e(15995),a=e(81838),o=e(12693),r=e(23757),i=e(85445),g=e(91),u=e(88492),l=e(93991),m=e(49683),c=e(60829),d=e(65970),f=e(76910),E=e(51980);function v({baseURL:O}){async function x(I){try{const{data:L,...P}=await(0,a.n)((0,i.i)().fetch({...I,url:O+I.url,showErrorAlert:I.showErrorAlert}));return{data:L,meta:P}}catch(L){return I.manageError?I.manageError(L):{error:L}}}return x}const h=(0,n.LC)({tagTypes:["getFolder"],reducerPath:"browseDashboardsAPI",baseQuery:v({baseURL:"/api"}),endpoints:O=>({getFolder:O.query({providesTags:(x,I,L)=>[{type:"getFolder",id:L}],query:x=>({url:`/folders/${x}`,params:{accesscontrol:!0}})}),newFolder:O.mutation({query:({title:x,parentUid:I})=>({method:"POST",url:"/folders",data:{title:x,parentUid:I}}),onQueryStarted:({parentUid:x},{queryFulfilled:I,dispatch:L})=>{I.then(async({data:P})=>{await m.Vt.fetchUserPermissions(),L((0,u.$l)((0,l.AT)("Folder created"))),L((0,d.it)({parentUID:x,pageSize:f.IV})),g.E1.push(o.u.stripBaseFromUrl(P.url))})}}),saveFolder:O.mutation({invalidatesTags:["getFolder"],query:({uid:x,title:I,version:L})=>({method:"PUT",url:`/folders/${x}`,data:{title:I,version:L}}),onQueryStarted:({parentUid:x},{queryFulfilled:I,dispatch:L})=>{I.then(()=>{L((0,d.it)({parentUID:x,pageSize:f.IV}))})}}),moveFolder:O.mutation({invalidatesTags:["getFolder"],query:({folder:x,destinationUID:I})=>({url:`/folders/${x.uid}/move`,method:"POST",data:{parentUID:I}}),onQueryStarted:({folder:x,destinationUID:I},{queryFulfilled:L,dispatch:P})=>{const{parentUid:N}=x;L.then(()=>{P((0,d.it)({parentUID:N,pageSize:f.IV})),P((0,d.it)({parentUID:I,pageSize:f.IV}))})}}),deleteFolder:O.mutation({query:({uid:x})=>({url:`/folders/${x}`,method:"DELETE",params:{forceDeleteRules:!1}}),onQueryStarted:({parentUid:x},{queryFulfilled:I,dispatch:L})=>{I.then(()=>{L((0,d.it)({parentUID:x,pageSize:f.IV}))})}}),getAffectedItems:O.query({queryFn:async x=>{const L=Object.keys(x.folder).filter(F=>x.folder[F]).map(F=>(0,i.i)().get(`/api/folders/${F}/counts`)),P=await Promise.all(L),N={folder:Object.values(x.folder).filter(r.fQ).length,dashboard:Object.values(x.dashboard).filter(r.fQ).length,libraryPanel:0,alertRule:0};for(const F of P)N.folder+=F.folder??0,N.dashboard+=F.dashboard,N.alertRule+=F.alertrule,N.libraryPanel+=F.librarypanel;return{data:N}}}),moveItems:O.mutation({invalidatesTags:["getFolder"],queryFn:async({selectedItems:x,destinationUID:I},L,P,N)=>{const F=Object.keys(x.dashboard).filter(j=>x.dashboard[j]),U=Object.keys(x.folder).filter(j=>x.folder[j]);for(const j of U)await N({url:`/folders/${j}/move`,method:"POST",data:{parentUID:I}});for(const j of F){const _={dashboard:(await(0,i.i)().get(`/api/dashboards/uid/${j}`)).dashboard,folderUid:I,overwrite:!1,message:""};await N({url:"/dashboards/db",method:"POST",data:_})}return{data:void 0}},onQueryStarted:({destinationUID:x,selectedItems:I},{queryFulfilled:L,dispatch:P})=>{const N=Object.keys(I.dashboard).filter(U=>I.dashboard[U]),F=Object.keys(I.folder).filter(U=>I.folder[U]);L.then(()=>{P((0,d.it)({parentUID:x,pageSize:f.IV})),P((0,d.Nc)([...F,...N]))})}}),deleteItems:O.mutation({queryFn:async({selectedItems:x},I,L,P)=>{const N=Object.keys(x.dashboard).filter(U=>x.dashboard[U]),F=Object.keys(x.folder).filter(U=>x.folder[U]);for(const U of F)await P({url:`/folders/${U}`,method:"DELETE",params:{forceDeleteRules:!1}});for(const U of N)await P({url:`/dashboards/uid/${U}`,method:"DELETE"});return{data:void 0}},onQueryStarted:({selectedItems:x},{queryFulfilled:I,dispatch:L})=>{const P=Object.keys(x.dashboard).filter(F=>x.dashboard[F]),N=Object.keys(x.folder).filter(F=>x.folder[F]);I.then(()=>{L((0,d.Nc)([...N,...P]))})}}),saveDashboard:O.mutation({query:({dashboard:x,folderUid:I,message:L,overwrite:P})=>({url:"/dashboards/db",method:"POST",data:{dashboard:x,folderUid:I,message:L??"",overwrite:!!P}}),onQueryStarted:({folderUid:x},{queryFulfilled:I,dispatch:L})=>{c.H.ignoreNextSave(),I.then(async()=>{await m.Vt.fetchUserPermissions(),L((0,d.it)({parentUID:x,pageSize:f.IV}))})}})})}),{endpoints:p,useDeleteFolderMutation:s,useDeleteItemsMutation:y,useGetAffectedItemsQuery:C,useGetFolderQuery:b,useMoveFolderMutation:S,useMoveItemsMutation:D,useNewFolderMutation:M,useSaveDashboardMutation:T,useSaveFolderMutation:R}=h},76910:(G,A,e)=>{"use strict";e.d(A,{IV:()=>l,ry:()=>m,xH:()=>c});var n=e(90857),a=e(85445),o=e(19252),r=e(30824),i=e(75169),g=e(49683),u=e(95162);const l=50;async function m(d,f,E=1,v=l){if(d&&!n.config.featureToggles.nestedFolders)return[];const h=(0,a.i)();let p=[];return g.Vt.hasPermission(u.AccessControlAction.FoldersRead)&&(p=await h.get("/api/folders",{parentUid:d,page:E,limit:v})),p.map(s=>({kind:"folder",uid:s.uid,title:s.title,parentTitle:f,parentUID:d,url:`/dashboards/f/${s.uid}/`}))}async function c(d,f=1,E=l){const h=await(0,r.getGrafanaSearcher)().search({kind:["dashboard"],query:"*",location:d||"general",from:(f-1)*E,limit:E});return h.view.map(p=>{const s=(0,i.f9)(p,h.view);return s.parentUID===o.YQ&&(s.parentUID=void 0),s})}},46569:(G,A,e)=>{"use strict";e.d(A,{X:()=>l});var n=e(85960),a=e(34785),o=e(40377),r=e(49199),i=e(42321),g=e(95329);function u(m,c,d,f){const E=m+c+d+f,v=[];m&&v.push((0,g.t)("browse-dashboards.counts.folder","{{count}} folder",{count:m})),c&&v.push((0,g.t)("browse-dashboards.counts.dashboard","{{count}} dashboard",{count:c})),d&&v.push((0,g.t)("browse-dashboards.counts.libraryPanel","{{count}} library panel",{count:d})),f&&v.push((0,g.t)("browse-dashboards.counts.alertRule","{{count}} alert rule",{count:f}));let h=(0,g.t)("browse-dashboards.counts.total","{{count}} item",{count:E});return v.length>0&&(h+=`: ${v.join(", ")}`),h}const l=({selectedItems:m})=>{const{data:c,isFetching:d,isLoading:f,error:E}=(0,i.zs)(m);return n.createElement(n.Fragment,null,n.createElement(o.x,{element:"p",color:"secondary"},c&&u(c.folder,c.dashboard,c.libraryPanel,c.alertRule),(d||f)&&n.createElement(a.Z,{width:200})),E&&n.createElement(r.b,{severity:"error",title:"Unable to retrieve descendant information"}))}},3069:(G,A,e)=>{"use strict";e.d(A,{Nc:()=>i,it:()=>g,si:()=>u});var n=e(19252),a=e(95162),o=e(76910),r=e(76236);const i=(0,a.createAsyncThunk)("browseDashboards/refreshParents",async(l,{getState:m,dispatch:c})=>{const{browseDashboards:d}=m(),{rootItems:f,childrenByParentUID:E}=d,v=new Set;for(const h of l){const p=(0,r.i)(f?.items??[],E,h);v.add(p?.parentUID)}for(const h of v)c(g({parentUID:h,pageSize:o.IV}))}),g=(0,a.createAsyncThunk)("browseDashboards/refetchChildren",async({parentUID:l,pageSize:m})=>{const c=l===n.YQ?void 0:l;let d=1,f="folder",E=await(0,o.ry)(c,void 0,d,m),v=E.length<m;if(f==="folder"&&v){f="dashboard",d=1;const h=await(0,o.xH)(c,d,m);v=h.length<m,E=E.concat(h)}return{children:E,lastPageOfKind:v,page:d,kind:f}}),u=(0,a.createAsyncThunk)("browseDashboards/fetchNextChildrenPage",async({parentUID:l,excludeKinds:m=[],pageSize:c},d)=>{const f=!m.includes("dashboard"),E=l===n.YQ?void 0:l,v=d.getState().browseDashboards,h=E?v.childrenByParentUID[E]:v.rootItems;let p=1,s;if(h?h.lastFetchedKind==="dashboard"&&!h.lastKindHasMoreItems?console.warn(`fetchNextChildrenPage called for ${E} but that collection is fully loaded`):h.lastFetchedKind==="folder"&&h.lastKindHasMoreItems?(p=h.lastFetchedPage+1,s="folder"):f&&(p=h.lastFetchedKind==="folder"?1:h.lastFetchedPage+1,s="dashboard"):(p=1,s="folder"),!s)return;let y=s==="folder"?await(0,o.ry)(E,void 0,p,c):await(0,o.xH)(E,p,c),C=y.length<c;if(s==="folder"&&C&&f){s="dashboard",p=1;const b=await(0,o.xH)(E,p,c);C=b.length<c,y=y.concat(b)}return{children:y,lastPageOfKind:C,page:p,kind:s}})},65970:(G,A,e)=>{"use strict";e.d(A,{MH:()=>m,qO:()=>D,si:()=>a.si,it:()=>a.it,Nc:()=>a.Nc,hO:()=>l,u6:()=>n.u6,xm:()=>n.xm,wk:()=>n.wk,m2:()=>b,zw:()=>h,aw:()=>y,$H:()=>C,Sk:()=>p,QD:()=>s,D$:()=>S});var n=e(21992),a=e(3069),o=e(85960),r=e(8111),i=e(95162),g=e(76910),u=e(76236);const l=M=>M.browseDashboards.rootItems,m=M=>M.browseDashboards.childrenByParentUID,c=M=>M.browseDashboards.openFolders,d=M=>M.browseDashboards.selectedItems,f=(0,r.P1)(l,m,c,(M,T)=>T,(M,T,R,O)=>D(O,M,T,R)),E=(0,r.P1)(d,M=>Object.values(M).some(T=>Object.values(T).some(R=>R))),v=(0,r.P1)(d,m,(M,T)=>{const R={dashboard:{...M.dashboard},folder:{...M.folder}};for(const O of Object.keys(M.folder))if(M.folder[O]){const I=T[O];if(I)for(const L of I.items)L.kind==="dashboard"&&(R.dashboard[L.uid]=!1),L.kind==="folder"&&(R.folder[L.uid]=!1)}return R});function h(M){return(0,i.useSelector)(T=>(M?T.browseDashboards.childrenByParentUID[M]:T.browseDashboards.rootItems)?"fulfilled":"pending")}function p(M){return(0,i.useSelector)(T=>f(T,M))}function s(){return(0,i.useSelector)(M=>E(M))}function y(){return(0,i.useSelector)(d)}function C(){return(0,i.useSelector)(M=>M.browseDashboards.childrenByParentUID)}function b(){return(0,i.useSelector)(M=>v(M))}function S(M=[]){const T=(0,i.useDispatch)(),R=(0,o.useRef)(!1);return(0,o.useCallback)(x=>{if(R.current)return Promise.resolve();R.current=!0;const I=T((0,a.si)({parentUID:x,excludeKinds:M,pageSize:g.IV}));return I.finally(()=>R.current=!1),I},[T,M])}function D(M,T,R,O,x=0,I=[],L=[]){function P(H,z,K){if(I.includes(H.kind)||L.includes(H.uid))return[];const Y=D(H.uid,T,R,O,K+1,I,L),k=!!O[H.uid],q=R[H.uid]?.items.length===0;return k&&q&&!I.includes("empty-folder")&&Y.push({isOpen:!1,level:K+1,item:{kind:"ui",uiKind:"empty-folder",uid:H.uid+"empty-folder"},parentUID:z}),[{item:H,parentUID:z,level:K,isOpen:k},...Y]}const N=M&&O[M]||x===0,F=M?R[M]:T;let j=((M?N&&F?.items:F?.items)||[]).flatMap(H=>P(H,M,x));const V=I.includes("dashboard")&&F?.lastFetchedKind==="dashboard";return(x===0&&!F||N&&F&&!(F.isFullyLoaded||V))&&(j=j.concat((0,u.k)(g.IV,M,x))),j}},21992:(G,A,e)=>{"use strict";e.d(A,{ZP:()=>C,u6:()=>y,xm:()=>p,wk:()=>s});var n={};e.r(n),e.d(n,{fetchNextChildrenPageFulfilled:()=>g,refetchChildrenFulfilled:()=>i,setAllSelection:()=>m,setFolderOpenState:()=>u,setItemSelectionState:()=>l});var a=e(20079),o=e(3069),r=e(76236);function i(b,S){const{children:D,page:M,kind:T,lastPageOfKind:R}=S.payload,{parentUID:O}=S.meta.arg,x={items:D,lastFetchedKind:T,lastFetchedPage:M,lastKindHasMoreItems:!R,isFullyLoaded:T==="dashboard"&&R};O?b.childrenByParentUID[O]=x:b.rootItems=x}function g(b,S){const D=S.payload;if(!D)return;const{children:M,page:T,kind:R,lastPageOfKind:O}=D,{parentUID:x,excludeKinds:I=[]}=S.meta.arg,N={items:((x?b.childrenByParentUID[x]:b.rootItems)?.items??[]).concat(M),lastFetchedKind:R,lastFetchedPage:T,lastKindHasMoreItems:!O,isFullyLoaded:(I.includes("dashboard")||R==="dashboard")&&O};if(!x){b.rootItems=N;return}if(b.childrenByParentUID[x]=N,b.selectedItems.folder[x])for(const U of M)b.selectedItems[U.kind][U.uid]=!0}function u(b,S){const{folderUID:D,isOpen:M}=S.payload;b.openFolders[D]=M}function l(b,S){const{item:D,isSelected:M}=S.payload;function T(O,x){if(b.selectedItems[O][x]=M,O!=="folder")return;let I=b.childrenByParentUID[x];for(const L of I?.items??[])T(L.kind,L.uid)}T(D.kind,D.uid);let R=D.parentUID;for(;R;){const O=(0,r.i)(b.rootItems?.items??[],b.childrenByParentUID,R);if(!O)break;M||(b.selectedItems[O.kind][O.uid]=!1),R=O.parentUID}b.selectedItems.$all=b.rootItems?.items?.every(O=>b.selectedItems[O.kind][O.uid])??!1}function m(b,S){const{isSelected:D,folderUID:M}=S.payload;if(b.selectedItems.$all=D,D){let R=function(O){const x=O?b.childrenByParentUID[O]:b.rootItems;if(x)for(const I of x.items)b.selectedItems[I.kind][I.uid]=D,I.kind==="folder"&&R(I.uid)};var T=R;R(M)}else for(const R in b.selectedItems){if(!(R==="dashboard"||R==="panel"||R==="folder"))continue;const O=b.selectedItems[R];for(const x in O)O[x]=D}}const{fetchNextChildrenPageFulfilled:c,refetchChildrenFulfilled:d,...f}=n,E={rootItems:void 0,childrenByParentUID:{},openFolders:{},selectedItems:{dashboard:{},folder:{},panel:{},$all:!1}},v=(0,a.oM)({name:"browseDashboards",initialState:E,reducers:f,extraReducers:b=>{b.addCase(o.si.fulfilled,c),b.addCase(o.it.fulfilled,d)}}),h=v.reducer,{setFolderOpenState:p,setItemSelectionState:s,setAllSelection:y}=v.actions,C={browseDashboards:h}},76236:(G,A,e)=>{"use strict";e.d(A,{i:()=>n,k:()=>a});function n(o,r,i){for(const g of o)if(g.uid===i)return g;for(const g in r){const u=r[g];if(u){for(const l of u.items)if(l.uid===i)return l}}}function a(o,r,i){return new Array(o).fill(null).map((g,u)=>({parentUID:r,level:i,isOpen:!1,item:{kind:"ui",uiKind:"pagination-placeholder",uid:`${r}-pagination-${u}`}}))}},82955:(G,A,e)=>{"use strict";e.d(A,{D:()=>n,Z:()=>a});const n="connections",a={Base:`/${n}`,DataSources:`/${n}/datasources`,DataSourcesNew:`/${n}/datasources/new`,DataSourcesEdit:`/${n}/datasources/edit/:uid`,DataSourcesDashboards:`/${n}/datasources/edit/:uid/dashboards`,AddNewConnection:`/${n}/add-new-connection`,DataSourcesDetails:`/${n}/datasources/:id`,ConnectDataOutdated:`/${n}/connect-data`,YourConnectionsOutdated:`/${n}/your-connections`}},81259:(G,A,e)=>{"use strict";e.d(A,{Y:()=>i});var n=e(47670),a=e.n(n),o=e(89306),r=e(18815);const i=(g,u,l)=>{let m={},c={};if(g.type===o.sN.Regex&&g.expression){const d=new RegExp(g.expression,"gi"),E=(typeof u=="string"?u:(0,r.Xh)(u)).matchAll(d);for(const v of E)v.groups?c=v.groups:c[g.mapValue||l]=v[1]||v[0]}else g.type===o.sN.Logfmt&&(c=a().parse(u));return Object.keys(c).forEach(d=>{const f=typeof c[d]=="string"?c[d]:(0,r.Xh)(c[d]);m[d]={value:f}}),m}},26394:(G,A,e)=>{"use strict";e.d(A,{I0:()=>l,K:()=>c,Yu:()=>m});var n=e(85954),a=e(81838),o=e(81502),r=e(45465),i=e(6005);const g=({sourceUID:d,targetUID:f,...E})=>{const v=(0,o.F)().getInstanceSettings(d),h=(0,o.F)().getInstanceSettings(f);if((E?.orgId===void 0||E?.orgId===null||E?.orgId===0)&&(0,r.KE)("Invalid correlation config: Missing org id.",{module:"Explore"}),v&&v?.uid!==void 0&&h&&h.uid!==void 0)return{...E,source:v,target:h};(0,r.KE)("Invalid correlation config: Missing source or target.",{module:"Explore",source:JSON.stringify(v),target:JSON.stringify(h)})},u=d=>!!d,l=d=>({...d,correlations:d.correlations.map(g).filter(u)});function m(d){return d.data}const c=()=>{const{backend:d}=(0,i.p)(),[f,E]=(0,n.Z)(b=>(0,a.n)(d.fetch({url:"/api/datasources/correlations",params:{page:b.page},method:"GET",showErrorAlert:!1})).then(m).then(l),[d]),[v,h]=(0,n.Z)(({sourceUID:b,...S})=>d.post(`/api/datasources/uid/${b}/correlations`,S).then(D=>{const M=g(D.result);if(M!==void 0)return M;throw new Error("invalid sourceUID")}),[d]),[p,s]=(0,n.Z)(({sourceUID:b,uid:S})=>d.delete(`/api/datasources/uid/${b}/correlations/${S}`),[d]),[y,C]=(0,n.Z)(({sourceUID:b,uid:S,...D})=>d.patch(`/api/datasources/uid/${b}/correlations/${S}`,D).then(M=>{const T=g(M.result);if(T!==void 0)return T;throw new Error("invalid sourceUID")}),[d]);return{create:{execute:h,...v},update:{execute:C,...y},get:{execute:E,...f},remove:{execute:s,...p}}}},15925:(G,A,e)=>{"use strict";e.d(A,{NO:()=>c,eo:()=>f,nh:()=>u,r_:()=>m});var n=e(81838),a=e(89306),o=e(85445),r=e(81502),i=e(17683),g=e(26394);const u=(E,v,h)=>(E.forEach(p=>{const s=p.refId;if(!s)return;let y=h[s];if(y===void 0&&p.meta?.preferredVisualisationType==="rawPrometheus"){const b=(0,i.a)(s);y=h[b]}const C=v.filter(b=>b.source.uid===y);l(p,C)}),E),l=(E,v)=>{E.fields.forEach(h=>{h.config.links=h.config.links?.filter(p=>p.origin!==a.n1.Correlations)||[],v.map(p=>{if(p.config?.field===h.name){const s=p.config?.target||{};h.config.links.push({internal:{query:{...s,datasource:{uid:p.target.uid}},datasourceUid:p.target.uid,datasourceName:p.target.name,transformations:p.config?.transformations},url:"",title:p.label||p.target.name,origin:a.n1.Correlations})}})})},m=async E=>(0,n.n)((0,o.i)().fetch({url:"/api/datasources/correlations",method:"GET",showErrorAlert:!1,params:{sourceUID:E}})).then(g.Yu).then(g.I0),c=async(E,v)=>(0,o.i)().post(`/api/datasources/uid/${E}/correlations`,v),d=async E=>E.datasourceInstance?.meta.mixed?await(0,r.F)().get(E.queries[0].datasource):E.datasourceInstance,f=async(E,v)=>Promise.all([d(E),d(v)]).then(h=>h[0]?.name!==void 0&&h[1]?.name!==void 0?`${h[0]?.name} to ${h[1]?.name}`:"")},51012:(G,A,e)=>{"use strict";e.d(A,{wc:()=>y});var n=e(12693),a=e(85445),o=e(91),r=e(88492),i=e(36387),g=e(46783),u=e(6211),l=e(93657),m=e(55539),c=e(59767),d=e(95162),f=e(47935),E=e(47390),v=e(39972);const h=2e3;class p extends i.b{constructor(){super(...arguments),this.cache={},this.dashboardCache=new Map}async fetchDashboard(S){const D=this.getFromCache(S);if(D)return D;let M;try{if(S===d.DashboardRoutes.Home){if(M=await(0,a.i)().get("/api/dashboards/home"),M?.redirectUri){const T=n.u.stripBaseFromUrl(M.redirectUri);return o.E1.replace(T),null}M?.meta&&(M.meta.canSave=!1,M.meta.canShare=!1,M.meta.canStar=!1)}else M=await u.pD.loadDashboard("db","",S);if(M){const T=this.initDashboardMeta(M);await this.initNavModel(T),this.dashboardCache.set(S,{dashboard:T,ts:Date.now()})}}catch(T){if((0,a.kW)(T)&&T.cancelled)return null;throw console.error(T),T}return M}async loadDashboard(S){try{const D=await this.loadScene(S);D.startUrlSync(),this.setState({dashboard:D,isLoading:!1})}catch(D){this.setState({isLoading:!1,loadError:String(D)})}}async loadPanelEdit(S,D){try{const M=await this.loadScene(S),T=(0,v.ds)(M,(0,v.Rv)(parseInt(D,10)));if(!T){this.setState({isLoading:!1,loadError:"Panel not found"});return}const R=(0,f.I)(M,T);R.startUrlSync(),this.setState({isLoading:!1,panelEditor:R})}catch(M){this.setState({isLoading:!1,loadError:String(M)})}}async loadScene(S){const D=this.cache[S];if(D)return D;this.setState({isLoading:!0});const M=await this.fetchDashboard(S);if(M?.dashboard){const T=(0,E.Td)(M);return this.cache[S]=T,T}throw new Error("Dashboard not found")}getFromCache(S){const D=this.dashboardCache.get(S);return D&&!this.hasExpired(D)?D.dashboard:null}hasExpired(S){return Date.now()-S.ts>h}initDashboardMeta(S){return{...S,meta:C(S.meta,!!S.dashboard?.editable)}}async initNavModel(S){if(S.meta.folderUid)try{const D=await g.ae.getFolderByUid(S.meta.folderUid);c.h.dispatch((0,r.RL)((0,m.B1)(D)))}catch(D){console.warn("Error fetching parent folder",S.meta.folderUid,"for dashboard",D)}}clearState(){(0,l.h4)().setCurrent(void 0),this.setState({dashboard:void 0,loadError:void 0,isLoading:!1,panelEditor:void 0})}setDashboardCache(S,D){this.dashboardCache.set(S,{dashboard:D,ts:Date.now()})}}let s=null;function y(){return s||(s=new p({})),s}function C(b,S){const D=b?{...b}:{};return D.canShare=b.canShare!==!1,D.canSave=b.canSave!==!1,D.canStar=b.canStar!==!1,D.canEdit=b.canEdit!==!1,D.canDelete=b.canDelete!==!1,D.showSettings=b.canEdit,D.canMakeEditable=b.canSave&&!S,D.hasUnsavedFolderChange=!1,S||(D.canEdit=!1,D.canDelete=!1,D.canSave=!1),D}},47935:(G,A,e)=>{"use strict";e.d(A,{Y:()=>k,I:()=>q});var n=e(91),a=e(57474),o=e(75530),r=e(85960),i=e(70523),g=e(94439),u=e(10305),l=e(98746);class m extends a.wx{constructor(){super(...arguments),this.tabId="alert",this.icon="bell"}getTabLabel(){return"Alert"}}m.Component=c;function c(X){return r.createElement("div",null,"TODO Alerting")}class d extends a.wx{constructor(){super(...arguments),this.tabId="queries",this.icon="database"}getTabLabel(){return"Queries"}}d.Component=f;function f(X){return r.createElement("div",null,"TODO Queries")}class E extends a.wx{constructor(){super(...arguments),this.tabId="transformations",this.icon="process"}getTabLabel(){return"Transformations"}}E.Component=v;function v(X){return r.createElement("div",null,"TODO Transformations")}class h extends a.wx{constructor(te){super({tab:"queries",...te}),this._urlSync=new a.oU(this,{keys:["tab"]}),this.onChangeTab=re=>{this.setState({tab:re.tabId})};const{panelRef:se}=this.state,de=se.resolve();de&&this._subs.add(de.subscribeToState((re,fe)=>{(re.pluginVersion||fe.pluginId!==re.pluginId)&&this.buildTabs()})),this.addActivationHandler(()=>this.buildTabs())}getUrlState(){return{tab:this.state.tab}}updateFromUrl(te){te.tab&&typeof te.tab=="string"&&this.setState({tab:te.tab})}buildTabs(){const{panelRef:te}=this.state,se=[];if(te){const de=te.resolve().getPlugin();if(!de){this.setState({tabs:se});return}if(de.meta.skipDataQuery){this.setState({tabs:se});return}else se.push(new d({})),se.push(new E({})),(0,l.X)(de)&&se.push(new m({}))}this.setState({tabs:se})}}h.Component=p;function p({model:X}){const{tab:te,tabs:se}=X.useState();if(!se)return;const de=se.find(re=>re.tabId===te);return r.createElement("div",null,r.createElement(i.J,{hideBorder:!0},se.map((re,fe)=>r.createElement(g.O,{key:`${re.getTabLabel()}-${fe}`,label:re.getTabLabel(),icon:re.icon,active:re.tabId===te,onChangeTab:()=>X.onChangeTab(re)}))),r.createElement(u.I,null,de&&r.createElement(de.Component,{model:de})))}var s=e(66681),y=e(30694),C=e(5836),b=e(47257),S=e(29165),D=e(37870),M=e(35304),T=e(20989),R=e(21128);function O({model:X}){const{body:te,controls:se,drawer:de}=X.useState(),re=(0,b.wW)(I),fe=(0,y.TH)(),ie=(0,R.v9)(ue=>ue.navIndex),oe=X.getPageNav(fe,ie);return r.createElement(T.T,{navId:"scenes",pageNav:oe,layout:C.Q.Custom},r.createElement(D.A,{actions:x(X)}),r.createElement("div",{className:re.canvasContent},se&&r.createElement("div",{className:re.controls},se.map(ue=>r.createElement(ue.Component,{key:ue.state.key,model:ue}))),r.createElement("div",{className:re.body},r.createElement(te.Component,{model:te}))),de&&r.createElement(de.Component,{model:de}))}function x(X){return r.createElement(r.Fragment,null,r.createElement(M.M,{leftActionsSeparator:!0,key:"separator"}),r.createElement(S.zx,{onClick:X.onDiscard,tooltip:"",key:"panel-edit-discard",variant:"destructive",fill:"outline",size:"sm"},"Discard"),r.createElement(S.zx,{onClick:X.onApply,tooltip:"",key:"panel-edit-apply",variant:"primary",size:"sm"},"Apply"))}function I(X){return{canvasContent:(0,s.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:X.spacing(0,2),flexBasis:"100%",flexGrow:1,minHeight:0,width:"100%"}),body:(0,s.css)({label:"body",flexGrow:1,display:"flex",position:"relative",minHeight:0,gap:"8px",marginBottom:X.spacing(2)}),controls:(0,s.css)({display:"flex",flexWrap:"wrap",alignItems:"center",gap:X.spacing(1),padding:X.spacing(2,0)})}}var L=e(20519),P=e(24956);class N extends a.wx{constructor(te){super({}),this.panelManager=te}}N.Component=({model:X})=>{const{panelManager:te}=X,{panel:se}=te.state,{title:de}=se.useState(),re=(0,b.wW)(F);return r.createElement("div",{className:re.box},r.createElement(L.g,{label:"Title"},r.createElement(P.I,{value:de,onChange:fe=>se.setState({title:fe.currentTarget.value})})))};function F(X){return{box:(0,s.css)({display:"flex",flexDirection:"column",padding:X.spacing(2)})}}var U=e(50263),j=e(96535),V=e(66372);class _ extends a.wx{constructor(te){super({}),this.panelManager=te}}_.Component=({model:X})=>{const{panelManager:te}=X,{panel:se}=te.useState(),de=(0,b.wW)(H),[re,fe]=(0,r.useState)("");return r.createElement(U.$,{autoHeightMin:"100%"},r.createElement("div",{className:de.wrapper},r.createElement(j.H,{value:re,onChange:fe,autoFocus:!0,placeholder:"Search for..."}),r.createElement(V.G,{pluginId:se.state.pluginId,searchQuery:re,onChange:ie=>{te.changePluginType(ie.pluginId)}})))};const H=X=>({wrapper:(0,s.css)({display:"flex",flexDirection:"column",gap:X.spacing(1)})});var z=e(24372),K=e(68460);class Y extends a.wx{constructor(te){super({panel:te}),this._cachedPluginOptions={}}changePluginType(te){const{options:se,fieldConfig:de,pluginId:re,...fe}=a.vp.cloneSceneObjectState(this.state.panel.state);let ie={...de};ie.defaults={...ie.defaults,custom:{}},ie.overrides=(0,z.aS)(ie.overrides,z._k),this._cachedPluginOptions[re]={options:se,fieldConfig:de};const oe=this._cachedPluginOptions[te]?.options,ue=this._cachedPluginOptions[te]?.fieldConfig;ue&&(ie=(0,z.__)(ie,ue));const me=new a.Z({options:oe??{},fieldConfig:ie,pluginId:te,...fe}),ge=me.getPlugin(),Ue={title:me.state.title,options:me.state.options,fieldConfig:me.state.fieldConfig,id:1,type:te},De=ge?.onPanelTypeChanged?.(Ue,re,se,de);De&&me.onOptionsChange(De,!0),ge?.onPanelMigration&&me.setState({pluginVersion:(0,K.hb)(ge)}),this.setState({panel:me})}}Y.Component=({model:X})=>{const{panel:te}=X.useState();return r.createElement(te.Component,{model:te})};class k extends a.wx{constructor(te){super(te),this.onDiscard=()=>{this._navigateBackToDashboard()},this.onApply=()=>{this._commitChanges(),this._navigateBackToDashboard()},this.onSave=()=>{this._commitChanges()},this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){return()=>{(0,a.oo)().cleanUp(this)}}startUrlSync(){(0,a.oo)().initSync(this)}getPageNav(te,se){return{text:"Edit panel",parentItem:this.state.dashboardRef.resolve().getPageNav(te,se)}}_commitChanges(){const te=this.state.dashboardRef.resolve(),se=this.state.sourcePanelRef.resolve(),de=this.state.panelRef.resolve();te.state.isEditing||te.onEnterEditMode();const re=a.vp.cloneSceneObjectState(de.state);se.setState(re),te.setState({$timeRange:this.state.$timeRange?.clone(),$variables:this.state.$variables?.clone(),isDirty:!0})}_navigateBackToDashboard(){n.E1.push((0,o.$9)({uid:this.state.dashboardRef.resolve().state.uid,currentQueryParams:n.E1.getLocation().search}))}}k.Component=O;function q(X,te){const se=te.clone(),de=new Y(se),re=a.vp.cloneSceneObjectState(X.state);return new k({dashboardRef:X.getRef(),sourcePanelRef:te.getRef(),panelRef:de.getRef(),controls:re.controls,$variables:re.$variables,$timeRange:re.$timeRange,body:new a.KH({direction:"row",primary:new a.KH({direction:"column",primary:new a.QY({direction:"column",children:[se]}),secondary:new a.fy({body:new h({panelRef:se.getRef()})})}),secondary:new a.QY({direction:"column",children:[new N(de),new _(de)]})})})}},11735:(G,A,e)=>{"use strict";e.d(A,{n:()=>S,u:()=>b});var n=e(16226),a=e(98231),o=e(34921),r=e(5108),i=e(23757),g=e(45878),u=e(85445),l=e(90857),m=e(57474),c=e(88492),d=e(93991),f=e(49683),E=e(50596),v=e(46002),h=e(9001),p=e(59767),s=e(95162),y=e(25119),C=e(39972);class b extends m.Ix{constructor(M){super({isEnabled:!0,...M,isHidden:!0}),this.hasAlertRules=!0,this.topic=o.w5.AlertStates,this.handleError=T=>{const R=(0,d.t_)("AlertStatesDataLayer",(0,E.i)(T));(0,p.WI)((0,c.$l)(R))}}onEnable(){const M=m.ep.getTimeRange(this);this._timeRangeSub=M.subscribeToState(()=>{this.runWithTimeRange(M)})}onDisable(){this._timeRangeSub?.unsubscribe()}runLayer(){const M=m.ep.getTimeRange(this);this.runWithTimeRange(M)}async runWithTimeRange(M){const T=(0,C.Pm)(this),{uid:R,id:O}=T.state;if(this.querySub&&this.querySub.unsubscribe(),!this.canWork(M))return;let x;this.isUsingLegacyAlerting()?x=(0,n.D)((0,u.i)().get("/api/alerts/states-for-dashboard",{dashboardId:O},`dashboard-query-runner-alert-states-${O}`)).pipe((0,a.U)(I=>I)):x=(0,n.D)((0,u.i)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:R},`dashboard-query-runner-unified-alert-states-${O}`)).pipe((0,a.U)(I=>{if(I.status==="success"){this.hasAlertRules=!1;const L={};return I.data.groups.forEach(P=>P.rules.forEach(N=>{if((0,h.x_)(N)&&N.annotations&&N.annotations[v.q6.panelID]){this.hasAlertRules=!0;const F=Number(N.annotations[v.q6.panelID]),U=S(N.state);L[F]?U===r.Z.Alerting&&L[F].state!==r.Z.Alerting?L[F].state=r.Z.Alerting:U===r.Z.Pending&&L[F].state!==r.Z.Alerting&&L[F].state!==r.Z.Pending&&(L[F].state=r.Z.Pending):L[F]={state:U,id:Object.keys(L).length,panelId:F,dashboardId:O}}})),Object.values(L)}throw new Error("Unexpected alert rules response.")})),this.querySub=x.subscribe({next:I=>{this.publishResults({state:i.Gu.Done,series:[(0,g.g0)(I)],timeRange:M.state.value},o.w5.AlertStates)},error:I=>{this.handleError(I),this.publishResults({state:i.Gu.Error,series:[],errors:[{message:(0,E.i)(I)}],timeRange:M.state.value},o.w5.AlertStates)}})}canWork(M){const T=(0,C.Pm)(this),{uid:R,id:O}=T.state;return this.isUsingLegacyAlerting()?!(!O||M.state.value.raw.to!=="now"):!(!R||l.config.publicDashboardAccessToken||M.state.value.raw.to!=="now"||this.hasAlertRules===!1||!(f.Vt.hasPermission(s.AccessControlAction.AlertingRuleRead)&&f.Vt.hasPermission(s.AccessControlAction.AlertingRuleExternalRead)))}isUsingLegacyAlerting(){return!l.config.unifiedAlertingEnabled}}function S(D){return D===y.x_.Firing?r.Z.Alerting:D===y.x_.Pending?r.Z.Pending:r.Z.OK}},60495:(G,A,e)=>{"use strict";e.d(A,{n:()=>u});var n=e(85960),a=e(57474),o=e(13086),r=e(61353),i=e(40235),g=e(39972);class u extends a.wx{}u.Component=l;function l({model:m}){const c=(0,g.Pm)(m),{variableControls:d,linkControls:f,timeControls:E}=m.useState(),{isEditing:v}=c.useState();return n.createElement(o.K,{grow:1,direction:{md:"row",xs:"column"}},n.createElement(o.K,{grow:1,wrap:"wrap"},d.map(h=>n.createElement(h.Component,{model:h,key:h.state.key})),n.createElement(r.x,{grow:1}),n.createElement(f.Component,{model:f})),n.createElement(o.K,{justifyContent:"flex-end"},v&&n.createElement(i.h,{variant:"canvas",icon:"cog",tooltip:"Dashboard settings",onClick:c.onOpenSettings}),E.map(h=>n.createElement(h.Component,{model:h,key:h.state.key}))))}},14798:(G,A,e)=>{"use strict";e.d(A,{WI:()=>Yn});var n=e(81223),a=e(91),o=e(90857),r=e(57474),i=e(60484),g=e(87947),u=e(93657),l=e(81990),m=e(66681),c=e(85960),d=e(30694),f=e(5836),E=e(47257),v=e(50263),h=e(20989),p=e(95162),s=e(29165),y=e(37870),C=e(35304),b=e(95329),S=e(10632),D=e(7572),M=e(80268);const T=c.memo(({dashboard:Pt})=>{const{actions:Dt=[],isEditing:$t,viewPanelScene:jt,isDirty:mn,uid:Dn,meta:vn,editview:fa}=Pt.useState(),Pa=(Dt??[]).map(La=>c.createElement(La.Component,{key:La.state.key,model:La}));if(Dn&&!fa){if(vn.canStar){let La=vn.isStarred?(0,b.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,b.t)("dashboard.toolbar.mark-favorite","Mark as favorite");Pa.push(c.createElement(S.u,{key:"star-dashboard-button",tooltip:La,icon:vn.isStarred?"favorite":"star",iconType:vn.isStarred?"mono":"default",iconSize:"lg",onClick:()=>{M.a.toolbarFavoritesClick(),Pt.onStarDashboard()}}))}Pa.push(c.createElement(S.u,{key:"share-dashboard-button",tooltip:(0,b.t)("dashboard.toolbar.share","Share dashboard"),icon:"share-alt",iconSize:"lg",onClick:()=>{M.a.toolbarShareClick(),Pt.showModal(new D.V({dashboardRef:Pt.getRef()}))}})),Pa.push(c.createElement(S.u,{key:"view-in-old-dashboard-button",tooltip:"View as dashboard",icon:"apps",onClick:()=>a.E1.push(`/d/${Dn}`)}))}return Pa.push(c.createElement(C.M,{leftActionsSeparator:!0,key:"separator"})),jt?(Pa.push(c.createElement(s.zx,{onClick:()=>{a.E1.partial({viewPanel:null})},tooltip:"",key:"back",variant:"primary",fill:"text"},"Back to dashboard")),c.createElement(y.A,{actions:Pa})):($t?Pt.canEditDashboard()&&(Pa.push(c.createElement(s.zx,{onClick:()=>{Pt.onSave()},tooltip:"Save as copy",fill:"text",key:"save-as"},"Save as")),Pa.push(c.createElement(s.zx,{onClick:()=>{Pt.onDiscard()},tooltip:"Discard changes",fill:"text",key:"discard",variant:"destructive"},"Discard")),Pa.push(c.createElement(s.zx,{onClick:()=>{M.a.toolbarSaveClick(),Pt.onSave()},tooltip:"Save changes",key:"save",disabled:!mn},"Save"))):Pt.canEditDashboard()&&Pa.push(c.createElement(s.zx,{onClick:()=>{Pt.onEnterEditMode()},tooltip:"Enter edit mode",key:"edit",variant:"primary",icon:"pen",fill:"text"},"Edit")),c.createElement(y.A,{actions:Pa}))});T.displayName="NavToolbarActions";function R({model:Pt}){const{controls:Dt,overlay:$t,editview:jt}=Pt.useState(),mn=(0,E.wW)(O),Dn=(0,d.TH)(),vn=(0,p.useSelector)(Ma=>Ma.navIndex),fa=Pt.getPageNav(Dn,vn),Pa=Pt.getBodyToRender(),La=(0,g.ht)(vn,"dashboards/browse");return jt?c.createElement(jt.Component,{model:jt}):c.createElement(h.T,{navModel:La,pageNav:fa,layout:f.Q.Custom},c.createElement(v.$,{autoHeightMin:"100%"},c.createElement("div",{className:mn.canvasContent},c.createElement(T,{dashboard:Pt}),Dt&&c.createElement("div",{className:mn.controls},Dt.map(Ma=>c.createElement(Ma.Component,{key:Ma.state.key,model:Ma})),c.createElement(r.iu,{scene:Pt,key:"scene-debugger"})),c.createElement("div",{className:(0,m.cx)(mn.body)},c.createElement(Pa.Component,{model:Pa})))),$t&&c.createElement($t.Component,{model:$t}))}function O(Pt){return{canvasContent:(0,m.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:Pt.spacing(0,2),flexBasis:"100%",flexGrow:1}),body:(0,m.css)({label:"body",flexGrow:1,display:"flex",gap:"8px",marginBottom:Pt.spacing(2)}),controls:(0,m.css)({display:"flex",flexWrap:"wrap",alignItems:"center",gap:Pt.spacing(1),position:"sticky",top:0,background:Pt.colors.background.canvas,zIndex:Pt.zIndex.navbarFixed,padding:Pt.spacing(2,0)})}}var x=e(63153),I=e(15915),L=e(55803),P=e(13150);class N extends r.wx{constructor(){super(...arguments),this.onClose=()=>{this.state.dashboardRef.resolve().setState({overlay:void 0})}}}N.Component=({model:Pt})=>{const Dt=Pt.state.dashboardRef.resolve(),$t=Dt.getInitialState(),jt=new Yn($t),mn=(0,P.EU)(jt),Dn=(0,P.EU)(Dt),vn=(0,L.Q$)(mn,Dn);return c.createElement(x.d,{title:"Save dashboard",subtitle:Dt.state.title,onClose:Pt.onClose},c.createElement(I._,{diff:vn,oldValue:mn,newValue:Dn}))};var F=e(34269),U=e(16293),j=e(62610),V=e(12537),_=e(2384),H=e(60495);function z(Pt){const Dt=Pt.state.controls;if(Dt&&Dt[0]instanceof H.n){const jt=Dt[0].state.timeControls.find(mn=>mn instanceof r.n7);if(jt&&jt instanceof r.n7)return jt}return null}function K(Pt){if(Pt.state.controls?.[0]instanceof H.n){for(const Dt of Pt.state.controls[0].state.timeControls)if(Dt instanceof r.vf)return Dt}return null}const Y={getTimePicker:z,getRefreshPicker:K};var k=e(39972);class q{constructor(Dt){this._scene=Dt,this.events=new U.F,this._subs=new F.w0;const $t=r.ep.getTimeRange(Dt);this._subs.add($t.subscribeToState((jt,mn)=>{jt.value!==mn.value&&this.events.publish(new _.md(jt.value))}))}get id(){return this._scene.state.id??null}get uid(){return this._scene.state.uid??null}get title(){return this._scene.state.title}get description(){return this._scene.state.description}get editable(){return this._scene.state.editable}get graphTooltip(){return this._getSyncMode()}get timepicker(){return{refresh_intervals:Y.getRefreshPicker(this._scene)?.state.intervals}}get timezone(){return this.getTimezone()}get weekStart(){return r.ep.getTimeRange(this._scene).state.weekStart}get tags(){return this._scene.state.tags}get meta(){return this._scene.state.meta}get time(){const Dt=r.ep.getTimeRange(this._scene);return{from:Dt.state.from,to:Dt.state.to}}get annotations(){return console.error("Scenes DashboardModelCompatibilityWrapper.annotations not implemented (yet)"),{list:[]}}getTimezone(){return r.ep.getTimeRange(this._scene).getTimeZone()}sharedTooltipModeEnabled(){return this._getSyncMode()>0}sharedCrosshairModeOnly(){return this._getSyncMode()===1}_getSyncMode(){if(this._scene.state.$behaviors){for(const Dt of this._scene.state.$behaviors)if(Dt instanceof r.U1.Y)return Dt.state.sync}return j.m.Off}otherPanelInFullscreen(Dt){return!1}formatDate(Dt,$t){return(0,V.dq)(Dt,{format:$t,timeZone:this.getTimezone()})}getPanelById(Dt){const $t=(0,k.ds)(this._scene,(0,k.Rv)(Dt));return $t?new X($t):null}removePanel(Dt){const $t=(0,k.ds)(this._scene,(0,k.Rv)(Dt.id));if(!$t){console.error("Trying to remove a panel that was not found in scene",Dt);return}const jt=$t.parent;if(!(jt instanceof r.bO)){console.error("Trying to remove a panel that is not wrapped in SceneGridItem");return}const mn=r.ep.getLayout($t);if(!(mn instanceof r.Qh)){console.error("Trying to remove a panel in a layout that is not SceneGridLayout ");return}if(mn===jt.parent&&mn.setState({children:mn.state.children.filter(Dn=>Dn!==jt)}),jt.parent instanceof r.I_){const Dn=mn.clone({children:mn.state.children.filter(vn=>vn!==jt)});mn.parent instanceof r.Qh&&mn.parent.setState({children:mn.parent.state.children.map(vn=>vn===mn?Dn:vn)})}}canEditAnnotations(Dt){return!1}panelInitialized(){}destroy(){this.events.removeAllListeners(),this._subs.unsubscribe()}}class X{constructor(Dt){this._vizPanel=Dt}get id(){const Dt=(0,k.Jb)(this._vizPanel);return isNaN(Dt)?(console.error("VizPanel key could not be translated to a legacy numeric panel id",this._vizPanel),0):Dt}get type(){return this._vizPanel.state.pluginId}get title(){return this._vizPanel.state.title}get transformations(){return this._vizPanel.state.$data instanceof r.bM?this._vizPanel.state.$data.state.transformations:[]}refresh(){console.error("Scenes PanelCompatibilityWrapper.refresh no implemented (yet)")}render(){console.error("Scenes PanelCompatibilityWrapper.render no implemented (yet)")}getQueryRunner(){console.error("Scenes PanelCompatibilityWrapper.getQueryRunner no implemented (yet)")}}function te(Pt){let Dt=5381;for(let $t=0;$t<Pt.length;$t++)Dt=Dt*33^Pt.charCodeAt($t);return Dt>>>0}var se=e(75530),de=e(47475),re=e(12693),fe=e(70523),ie=e(94439),oe=e(49199),ue=e(10798),me=e(38685),ge=e(23757),Ue=e(48116),De=e(16826);class Pe extends r.wx{constructor(Dt){super({...Dt,options:{withTransforms:!0,withFieldConfig:!0}}),this.onOptionsChange=$t=>{this.setState({options:$t})}}getTabLabel(){return(0,b.t)("dashboard.inspect.data-tab","Data")}getTabValue(){return Ue.q.Data}}Pe.Component=({model:Pt})=>{const{options:Dt}=Pt.useState(),$t=Pt.state.panelRef.resolve(),jt=r.ep.getData($t),{data:mn}=Te(jt,Dt.withTransforms).useState(),Dn=r.ep.getTimeRange($t);return c.createElement(De.E,{isLoading:mn?.state===ge.Gu.Loading,data:mn?.series,options:Dt,hasTransformations:ye(jt),timeZone:Dn.getTimeZone(),panelPluginId:$t.state.pluginId,dataName:$t.state.title,fieldConfig:$t.state.fieldConfig,onOptionsChange:Pt.onOptionsChange})};function ye(Pt){return Pt instanceof r.bM?Pt.state.transformations.length>0:!1}function Te(Pt,Dt){return Dt&&Pt instanceof r.bM?Pt.state.$data:Pt}var nt=e(56375),ct=e(53565),he=e(92369),xe=e(20519),Me=e(27436),He=e(62577),Ve=e(71851),Oe=e(27008),Ne=e(27644),_e=e(29410),qe=e(87129),rt=e(31326),mt=e(47390);class Je extends r.wx{constructor(Dt){super({...Dt,source:"panel-json",jsonText:Ae("panel-json",Dt.panelRef.resolve())}),this.onChangeSource=$t=>{this.setState({source:$t.value,jsonText:Ae($t.value,this.state.panelRef.resolve())})},this.onApplyChange=()=>{const $t=this.state.panelRef.resolve(),jt=(0,k.Pm)($t),mn=JSON.parse(this.state.jsonText),Dn=new Oe.r(mn),vn=(0,mt.Ee)(Dn),fa=r.vp.cloneSceneObjectState(vn.state);if(!($t.parent instanceof r.bO)||!(vn instanceof r.bO)){console.error("Cannot update state of panel",$t,vn);return}this.state.onClose(),jt.state.isEditing||jt.onEnterEditMode(),$t.parent.setState(fa),(0,qe.Nw)(Ue.q.JSON,"apply",{panel_type_changed:$t.state.pluginId!==Dn.type,panel_id_changed:(0,k.Jb)($t)!==Dn.id,panel_grid_pos_changed:Ke($t.parent.state,fa),panel_targets_changed:Xe((0,k.R)($t),(0,k.R)(fa.$data))})},this.onCodeEditorBlur=$t=>{this.setState({jsonText:$t})}}getTabLabel(){return(0,b.t)("dashboard.inspect.json-tab","JSON")}getTabValue(){return Ue.q.JSON}getOptions(){const $t=this.state.panelRef.resolve().state.$data,jt=[{label:(0,b.t)("dashboard.inspect-json.panel-json-label","Panel JSON"),description:(0,b.t)("dashboard.inspect-json.panel-json-description","The model saved in the dashboard JSON that configures how everything works."),value:"panel-json"}];return $t&&(jt.push({label:(0,b.t)("dashboard.inspect-json.panel-data-label","Panel data"),description:(0,b.t)("dashboard.inspect-json.panel-data-description","The raw model passed to the panel visualization"),value:"panel-data"}),jt.push({label:(0,b.t)("dashboard.inspect-json.dataframe-label","DataFrame JSON (from Query)"),description:(0,b.t)("dashboard.inspect-json.dataframe-description","Raw data without transformations and field config applied. "),value:"data-frames"})),jt}isEditable(){if(this.state.source!=="panel-json")return!1;const Dt=this.state.panelRef.resolve();return Dt.parent instanceof r.bO?(0,k.Pm)(Dt).state.meta.canEdit:!1}}Je.Component=({model:Pt})=>{const{source:Dt,jsonText:$t}=Pt.useState(),jt=(0,E.wW)(Ne.i),mn=Pt.getOptions();return c.createElement("div",{className:jt.wrap},c.createElement("div",{className:jt.toolbar,"aria-label":he.wl.components.PanelInspector.Json.content},c.createElement(xe.g,{label:(0,b.t)("dashboard.inspect-json.select-source","Select source"),className:"flex-grow-1"},c.createElement(Me.Ph,{inputId:"select-source-dropdown",options:mn,value:mn.find(Dn=>Dn.value===Dt)??mn[0].value,onChange:Pt.onChangeSource})),Pt.isEditable()&&c.createElement(s.zx,{className:jt.toolbarItem,onClick:Pt.onApplyChange},"Apply")),c.createElement("div",{className:jt.content},c.createElement(ct.Z,{disableWidth:!0},({height:Dn})=>c.createElement(He.p,{width:"100%",height:Dn,language:"json",showLineNumbers:!0,showMiniMap:$t.length>100,value:$t,readOnly:!Pt.isEditable(),onBlur:Pt.onCodeEditorBlur}))))};function Ae(Pt,Dt){let $t={};switch(Pt){case"panel-json":{(0,qe.Nw)(Ue.q.JSON,"panelData"),(Dt.parent instanceof r.bO||Dt.parent instanceof rt.o)&&($t=(0,P.vi)(Dt.parent));break}case"panel-data":{(0,qe.Nw)(Ue.q.JSON,"panelJSON");const jt=r.ep.getData(Dt);jt.state.data&&($t=Dt.applyFieldConfig(jt.state.data));break}case"data-frames":{(0,qe.Nw)(Ue.q.JSON,"dataFrame");const jt=r.ep.getData(Dt);jt.state.data&&(jt instanceof r.bM&&jt.state.$data?.state.data?$t=(0,Ve.XJ)(jt.state.$data.state.data):$t=(0,Ve.XJ)(jt.state.data))}}return(0,_e.w)($t)}function Ke(Pt,Dt){return Pt.x!==Dt.x||Pt.y!==Dt.y||Pt.width!==Dt.width||Pt.height!==Dt.height}function Xe(Pt,Dt){return Pt===void 0||Dt===void 0?!1:!(0,nt.isEqual)(Pt.state.queries,Dt.state.queries)}class ne extends r.wx{getTabLabel(){return(0,b.t)("dashboard.inspect.meta-tab","Meta data")}getTabValue(){return Ue.q.Meta}}ne.Component=({model:Pt})=>{const{panelRef:Dt,dataSource:$t}=Pt.state,jt=r.ep.getData(Dt.resolve()),mn=$t.components?.MetadataInspector;return!jt.state.data||!mn?null:c.createElement(mn,{datasource:$t,data:jt.state.data.series})};var Z=e(97577);class ee extends r.wx{constructor(){super(...arguments),this.onRefreshQuery=()=>{const Dt=(0,k.R)(this.state.panelRef.resolve());Dt&&Dt.runQueries()}}getTabLabel(){return(0,b.t)("dashboard.inspect.query-tab","Query")}getTabValue(){return Ue.q.Query}}ee.Component=({model:Pt})=>{const Dt=r.ep.getData(Pt.state.panelRef.resolve()).useState();return Dt.data?c.createElement(Z.D,{data:Dt.data,onRefreshQuery:Pt.onRefreshQuery}):null};var ce=e(73536);class be extends r.wx{getTabLabel(){return(0,b.t)("dashboard.inspect.stats-tab","Stats")}getTabValue(){return Ue.q.Stats}}be.Component=({model:Pt})=>{const Dt=r.ep.getData(Pt.state.panelRef.resolve()).useState(),$t=r.ep.getTimeRange(Pt.state.panelRef.resolve());return Dt.data?c.createElement(ce.f,{data:Dt.data,timeZone:$t.getTimeZone()}):null};class Ee extends r.wx{constructor(Dt){super(Dt),this.onClose=()=>{a.E1.partial({inspect:null,inspectTab:null})},this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){this.buildTabs(0)}async buildTabs(Dt){const $t=this.state.panelRef,jt=$t.resolve(),mn=jt.getPlugin(),Dn=[];if(mn||(Dt<2e3?setTimeout(()=>this.buildTabs(Dt+100),100):this.setState({pluginNotLoaded:!0})),(0,me.sY)(mn)){const vn=r.ep.getData(jt);Dn.push(new Pe({panelRef:$t})),Dn.push(new be({panelRef:$t})),Dn.push(new ee({panelRef:$t}));const fa=await(0,ue.L1)(vn.state.data);fa&&Dn.push(new ne({panelRef:$t,dataSource:fa}))}Dn.push(new Je({panelRef:$t,onClose:this.onClose})),this.setState({tabs:Dn})}getDrawerTitle(){const Dt=this.state.panelRef.resolve();return r.ep.interpolate(Dt,`Inspect: ${Dt.state.title}`)}}Ee.Component=Be;function Be({model:Pt}){const{tabs:Dt,pluginNotLoaded:$t}=Pt.useState(),jt=(0,d.TH)(),mn=new URLSearchParams(jt.search);if(!Dt)return null;const Dn=mn.get("inspectTab"),vn=Dt.find(fa=>fa.getTabValue()===Dn)??Dt[0];return c.createElement(x.d,{title:Pt.getDrawerTitle(),onClose:Pt.onClose,size:"md",tabs:c.createElement(fe.J,null,Dt.map(fa=>c.createElement(ie.O,{key:fa.state.key,label:fa.getTabLabel(),active:fa===vn,href:re.u.getUrlForPartial(jt,{inspectTab:fa.getTabValue()})})))},$t&&c.createElement(oe.b,{title:"Panel plugin not loaded"},"Make sure the panel you want to inspect is visible and has been displayed before opening inspect."),vn&&vn.Component&&c.createElement(vn.Component,{model:vn}))}class Le extends r.wx{getUrlKey(){return"annotations"}}Le.Component=({model:Pt})=>{const Dt=(0,k.Pm)(Pt),{navModel:$t,pageNav:jt}=qt(Dt,Pt.getUrlKey());return c.createElement(h.T,{navModel:$t,pageNav:jt,layout:f.Q.Standard},c.createElement(T,{dashboard:Dt}),c.createElement("div",null,"Annotations todo"))};var ze=e(59672);class Fe{constructor(Dt){this._scene=Dt}getKeys(){return["editIndex"]}getUrlState(){const Dt=this._scene.state;return{editIndex:Dt.editIndex!==void 0?String(Dt.editIndex):void 0}}updateFromUrl(Dt){let $t={};typeof Dt.editIndex=="string"?$t={editIndex:Number(Dt.editIndex)}:$t={editIndex:void 0},Object.keys($t).length>0&&this._scene.setState($t)}}class $e extends r.wx{constructor(){super(...arguments),this._urlSync=new Fe(this)}getUrlKey(){return"links"}}$e.Component=et;function et({model:Pt}){const{dashboardRef:Dt,editIndex:$t}=Pt.useState(),jt=Dt.resolve(),mn=jt.state.links||[],{navModel:Dn,pageNav:vn}=qt(jt,Pt.getUrlKey());if($t!==void 0){const fa=mn[$t];if(fa)return c.createElement(tt,{pageNav:vn,navModel:Dn,link:fa,dashboard:jt})}return c.createElement(h.T,{navModel:Dn,pageNav:vn,layout:f.Q.Standard},c.createElement(T,{dashboard:jt}),mn.map((fa,Pa)=>c.createElement(ze.r,{key:`${fa.title}-${Pa}`,onClick:La=>{La.preventDefault(),a.E1.partial({editIndex:Pa})}},fa.title)))}function tt({pageNav:Pt,link:Dt,navModel:$t,dashboard:jt}){const mn=Pt.children.find(vn=>vn.active);mn.parentItem=Pt;const Dn={text:"Edit link",parentItem:mn};return c.createElement(h.T,{navModel:$t,pageNav:Dn,layout:f.Q.Standard},c.createElement(T,{dashboard:jt}),JSON.stringify(Dt))}var it=e(61353),vt=e(74042),yt=e(57445),Wt=e(24956),ut=e(7073),pt=e(6089),we=e(5106),lt=e(96525),Bt=e(19461),Kt=e(89296),It=e(66643);const Zt=[{label:"Editable",value:!0},{label:"Read-only",value:!1}],yn=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];class xn extends r.wx{constructor(){super(...arguments),this.onTitleChange=Dt=>{this._dashboard.setState({title:Dt})},this.onDescriptionChange=Dt=>{this._dashboard.setState({description:Dt})},this.onTagsChange=Dt=>{this._dashboard.setState({tags:Dt})},this.onFolderChange=(Dt,$t)=>{const jt={...this._dashboard.state.meta,folderUid:Dt||this._dashboard.state.meta.folderUid,folderTitle:$t||this._dashboard.state.meta.folderTitle,hasUnsavedFolderChange:!0};this._dashboard.setState({meta:jt})},this.onEditableChange=Dt=>{this._dashboard.setState({editable:Dt})},this.onTimeZoneChange=Dt=>{this.getTimeRange().setState({timeZone:Dt})},this.onWeekStartChange=Dt=>{this.getTimeRange().setState({weekStart:Dt})},this.onRefreshIntervalChange=Dt=>{this.getRefreshPicker()?.setState({intervals:Dt})},this.onNowDelayChange=Dt=>{},this.onHideTimePickerChange=Dt=>{if(this._dashboard.state.controls instanceof H.n)for(const $t of this._dashboard.state.controls.state.timeControls)$t instanceof r.n7&&$t.setState({})},this.onLiveNowChange=Dt=>{},this.onTooltipChange=Dt=>{this.getCursorSync()?.setState({sync:Dt})}}get _dashboard(){return this.state.dashboardRef.resolve()}getUrlKey(){return"settings"}getDashboard(){return this._dashboard}getTimeRange(){return r.ep.getTimeRange(this._dashboard)}getRefreshPicker(){return Y.getRefreshPicker(this._dashboard)}getCursorSync(){const Dt=this._dashboard.state.$behaviors?.find($t=>$t instanceof r.U1.Y);if(Dt instanceof r.U1.Y)return Dt}}xn.Component=({model:Pt})=>{const{navModel:Dt,pageNav:$t}=qt(Pt.getDashboard(),Pt.getUrlKey()),{title:jt,description:mn,tags:Dn,meta:vn,editable:fa,overlay:Pa}=Pt.getDashboard().useState(),{sync:La}=Pt.getCursorSync()?.useState()||{},{timeZone:Ma,weekStart:ts}=Pt.getTimeRange().useState(),{intervals:ds}=Pt.getRefreshPicker()?.useState()||{};return c.createElement(h.T,{navModel:Dt,pageNav:$t,layout:f.Q.Standard},c.createElement(T,{dashboard:Pt.getDashboard()}),c.createElement("div",{style:{maxWidth:"600px"}},c.createElement(it.x,{marginBottom:5},c.createElement(xe.g,{label:c.createElement(vt.Lh,{justify:"space-between"},c.createElement(yt._,{htmlFor:"title-input"},c.createElement(b.cC,{i18nKey:"dashboard-settings.general.title-label"},"Title")))},c.createElement(Wt.I,{id:"title-input",name:"title",defaultValue:jt,onBlur:ys=>Pt.onTitleChange(ys.target.value)})),c.createElement(xe.g,{label:c.createElement(vt.Lh,{justify:"space-between"},c.createElement(yt._,{htmlFor:"description-input"},(0,b.t)("dashboard-settings.general.description-label","Description")))},c.createElement(ut.K,{id:"description-input",name:"description",defaultValue:mn,onBlur:ys=>Pt.onDescriptionChange(ys.target.value)})),c.createElement(xe.g,{label:(0,b.t)("dashboard-settings.general.tags-label","Tags")},c.createElement(pt.B,{id:"tags-input",tags:Dn,onChange:Pt.onTagsChange,width:40})),c.createElement(xe.g,{label:(0,b.t)("dashboard-settings.general.folder-label","Folder")},c.createElement(Bt.E,{value:vn.folderUid,onChange:Pt.onFolderChange,initialTitle:vn.folderTitle,inputId:"dashboard-folder-input",enableCreateNew:!0,skipInitialLoad:!0})),c.createElement(xe.g,{label:(0,b.t)("dashboard-settings.general.editable-label","Editable"),description:(0,b.t)("dashboard-settings.general.editable-description","Set to read-only to disable all editing. Reload the dashboard for changes to take effect")},c.createElement(we.S,{value:fa,options:Zt,onChange:Pt.onEditableChange}))),c.createElement(Kt.P,{onTimeZoneChange:Pt.onTimeZoneChange,onWeekStartChange:Pt.onWeekStartChange,onRefreshIntervalChange:Pt.onRefreshIntervalChange,onNowDelayChange:Pt.onNowDelayChange,onHideTimePickerChange:Pt.onHideTimePickerChange,onLiveNowChange:Pt.onLiveNowChange,refreshIntervals:ds,liveNow:!1,timezone:Ma||"",weekStart:ts||""}),c.createElement(lt.s,{label:(0,b.t)("dashboard-settings.general.panel-options-label","Panel options"),isOpen:!0},c.createElement(xe.g,{label:(0,b.t)("dashboard-settings.general.panel-options-graph-tooltip-label","Graph tooltip"),description:(0,b.t)("dashboard-settings.general.panel-options-graph-tooltip-description","Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect")},c.createElement(we.S,{onChange:Pt.onTooltipChange,options:yn,value:La}))),c.createElement(it.x,{marginTop:3},vn.canDelete&&c.createElement(It.b,null))),Pa&&c.createElement(Pa.Component,{model:Pa}))};class An extends r.wx{getUrlKey(){return"variables"}}An.Component=({model:Pt})=>{const Dt=(0,k.Pm)(Pt),{navModel:$t,pageNav:jt}=qt(Dt,Pt.getUrlKey());return c.createElement(h.T,{navModel:$t,pageNav:jt,layout:f.Q.Standard},c.createElement(T,{dashboard:Dt}),c.createElement("div",null,"variables todo"))};function qt(Pt,Dt){const $t=(0,d.TH)(),jt=(0,p.useSelector)(fa=>fa.navIndex),mn=(0,g.ht)(jt,"dashboards/browse"),Dn=Pt.getPageNav($t,jt),vn={text:"Settings",url:re.u.getUrlForPartial($t,{editview:"settings",editIndex:null}),children:[{text:(0,b.t)("dashboard-settings.general.title","General"),url:re.u.getUrlForPartial($t,{editview:"settings",editIndex:null}),active:Dt==="settings"},{text:(0,b.t)("dashboard-settings.annotations.title","Annotations"),url:re.u.getUrlForPartial($t,{editview:"annotations",editIndex:null}),active:Dt==="annotations"},{text:(0,b.t)("dashboard-settings.variables.title","Variables"),url:re.u.getUrlForPartial($t,{editview:"variables",editIndex:null}),active:Dt==="variables"},{text:(0,b.t)("dashboard-settings.links.title","Links"),url:re.u.getUrlForPartial($t,{editview:"links",editIndex:null}),active:Dt==="links"}],parentItem:Dn};return{navModel:mn,pageNav:vn}}function On(Pt,Dt){switch(Pt){case"annotations":return new Le({dashboardRef:Dt});case"variables":return new An({dashboardRef:Dt});case"links":return new $e({dashboardRef:Dt});case"settings":default:return new xn({dashboardRef:Dt})}}class wn extends r.wx{constructor(Dt){super(Dt),this.addActivationHandler(this._activationHandler.bind(this))}_activationHandler(){const Dt=this.state.panelRef.resolve(),$t=r.vp.cloneSceneObjectState(Dt.state,{key:Dt.state.key+"-view",$variables:this.getScopedVariables(Dt)}),jt=new r.Z($t);return this.setState({body:jt}),()=>{jt.state.$data&&Dt.setState({$data:jt.state.$data.clone()})}}getScopedVariables(Dt){const $t=Zn(Dt),jt=[];if($t&&$t.state.$variables)for(const mn of $t.state.$variables.state.variables)jt.push(mn.clone());if(Dt.state.$variables)for(const mn of Dt.state.$variables.state.variables)jt.push(mn.clone());if(jt.length>0)return new r.hT({variables:jt})}getUrlKey(){return this.state.panelRef.resolve().state.key}}wn.Component=({model:Pt})=>{const{body:Dt}=Pt.useState();return Dt?c.createElement(Dt.Component,{model:Dt}):null};function Zn(Pt){try{return r.ep.getAncestor(Pt,r.I_)}catch{return}}var Aa=e(55450);class Ea{constructor(Dt){this._scene=Dt}getKeys(){return["inspect","viewPanel","editview"]}getUrlState(){const Dt=this._scene.state;return{inspect:Dt.inspectPanelKey,viewPanel:Dt.viewPanelScene?.getUrlKey(),editview:Dt.editview?.getUrlKey()}}updateFromUrl(Dt){const{inspectPanelKey:$t,viewPanelScene:jt,meta:mn,isEditing:Dn}=this._scene.state,vn={};if(typeof Dt.editview=="string"&&mn.canEdit?(vn.editview=On(Dt.editview,this._scene.getRef()),Dn||setTimeout(()=>this._scene.onEnterEditMode())):Dt.hasOwnProperty("editview")&&(vn.editview=void 0),typeof Dt.inspect=="string"){const fa=(0,k.ds)(this._scene,Dt.inspect);if(!fa){i.Z.emit(de.SI.alertError,["Panel not found"]),a.E1.partial({inspect:null});return}vn.inspectPanelKey=Dt.inspect,vn.overlay=new Ee({panelRef:fa.getRef()})}else $t&&(vn.inspectPanelKey=void 0,vn.overlay=void 0);if(typeof Dt.viewPanel=="string"){const fa=(0,k.ds)(this._scene,Dt.viewPanel);if(!fa){if((0,k.RB)(Dt.viewPanel)){this._handleViewRepeatClone(Dt.viewPanel);return}i.Z.emit(de.SI.alertError,["Panel not found"]),a.E1.partial({viewPanel:null});return}vn.viewPanelScene=new wn({panelRef:fa.getRef()})}else jt&&(vn.viewPanelScene=void 0);Object.keys(vn).length>0&&this._scene.setState(vn)}_handleViewRepeatClone(Dt){this._eventSub||(this._eventSub=this._scene.subscribeToEvent(Aa.P,()=>{const $t=(0,k.ds)(this._scene,Dt);$t&&(this._eventSub?.unsubscribe(),this._scene.setState({viewPanelScene:new wn({panelRef:$t.getRef()})}))}))}}var Nt=e(37517),en=e.n(Nt);class rn{constructor(){this._binds=[]}addBinding(Dt){en().bind(Dt.key,$t=>{$t.preventDefault(),$t.stopPropagation(),$t.returnValue=!1,Dt.onTrigger()},"keydown"),this._binds.push(Dt)}removeAll(){this._binds.forEach(Dt=>{en().unbind(Dt.key,Dt.type)}),this._binds=[]}}function un(Pt){const Dt=new rn;return Dt.addBinding({key:"v",onTrigger:on(Pt,$t=>{Pt.state.viewPanelScene||a.E1.push((0,se.uO)($t))})}),Dt.addBinding({key:"e",onTrigger:on(Pt,async $t=>{const jt=$t.getRoot();if(jt instanceof Yn){const mn=(0,k.Jb)($t);a.E1.push((0,se.$9)({uid:jt.state.uid,subPath:`/panel-edit/${mn}`,currentQueryParams:location.search}))}})}),Dt.addBinding({key:"p s",onTrigger:on(Pt,async $t=>{Pt.showModal(new D.V({panelRef:$t.getRef(),dashboardRef:Pt.getRef()}))})}),Dt.addBinding({key:"i",onTrigger:on(Pt,async $t=>{a.E1.push((0,se.qx)($t))})}),Dt.addBinding({key:"p x",onTrigger:on(Pt,async $t=>{const jt=await(0,se.el)($t);jt&&a.E1.push(jt)})}),Dt.addBinding({key:"p l",onTrigger:on(Pt,In)}),Dt.addBinding({key:"d r",onTrigger:()=>r.ep.getTimeRange(Pt).onRefresh()}),Dt.addBinding({key:"t z",onTrigger:()=>{Ln(Pt)}}),Dt.addBinding({key:"ctrl+z",onTrigger:()=>{Ln(Pt)}}),Dt.addBinding({key:"t left",onTrigger:()=>{hn(Pt,"left")}}),Dt.addBinding({key:"t right",onTrigger:()=>{hn(Pt,"right")}}),Dt.addBinding({key:"d s",onTrigger:Pt.onOpenSettings}),()=>Dt.removeAll}function on(Pt,Dt){return()=>{const $t=document.querySelectorAll(":hover");for(let jt=$t.length-1;jt>0;jt--){const mn=$t[jt];if(mn instanceof HTMLElement&&mn.dataset?.vizPanelKey){const Dn=mn.dataset?.vizPanelKey,vn=r.ep.findObject(Pt,fa=>fa.state.key===Dn);if(vn&&vn instanceof r.Z){Dt(vn);return}}}}}function In(Pt){const Dt=Pt.state.options;Sn(Dt)&&typeof Dt.legend.showLegend=="boolean"&&Pt.onOptionsChange({legend:{showLegend:!Dt.legend.showLegend}})}function Sn(Pt){return Pt!=null&&typeof Pt=="object"&&"legend"in Pt}function Ln(Pt){Y.getTimePicker(Pt)?.onZoom()}function hn(Pt,Dt){const $t=Y.getTimePicker(Pt);$t&&(Dt==="left"&&$t.onMoveBackward(),Dt==="right"&&$t.onMoveForward())}const Gn=["title","description","tags","editable","graphTooltip"],Cn=class extends r.wx{constructor(Pt){super({title:"Dashboard",meta:{},editable:!0,body:Pt.body??new r.QY({children:[]}),...Pt}),this._urlSync=new Ea(this),this._variableDependency=new Xn,this.onEnterEditMode=()=>{this._initialState=r.vp.cloneSceneObjectState(this.state),this._initialUrlState=a.E1.getLocation(),this.setState({isEditing:!0}),this.state.body instanceof r.Qh&&(this.state.body.setState({isDraggable:!0,isResizable:!0}),(0,k.pi)(this.state.body,!0)),this.startTrackingChanges()},this.onDiscard=()=>{this.stopTrackingChanges(),this.stopUrlSync(),a.E1.replace({pathname:this._initialUrlState?.pathname,search:this._initialUrlState?.search}),this.setState({...this._initialState,isEditing:!1}),this.startUrlSync(),this.state.body instanceof r.Qh&&(this.state.body.setState({isDraggable:!1,isResizable:!1}),(0,k.pi)(this.state.body,!0))},this.onSave=()=>{this.setState({overlay:new N({dashboardRef:this.getRef()})})},this.onOpenSettings=()=>{a.E1.partial({editview:"settings"})},this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){window.__grafanaSceneContext=this,this.state.isEditing&&this.startTrackingChanges();const Pt=un(this),Dt=new q(this);return(0,u.h4)().setCurrent(Dt),()=>{window.__grafanaSceneContext=void 0,Pt(),this.stopTrackingChanges(),this.stopUrlSync(),Dt.destroy()}}startUrlSync(){(0,r.oo)().initSync(this)}stopUrlSync(){(0,r.oo)().cleanUp(this)}getPageNav(Pt,Dt){const{meta:$t,viewPanelScene:jt}=this.state;let mn={text:this.state.title,url:(0,se.$9)({uid:this.state.uid,currentQueryParams:Pt.search,updateQuery:{viewPanel:null,inspect:null,editview:null},useExperimentalURL:!!(o.config.featureToggles.dashboardSceneForViewers&&$t.canEdit)})};const{folderUid:Dn}=$t;if(Dn){const vn=(0,g.ht)(Dt,`folder-dashboards-${Dn}`).main;vn.id!=="not-found"&&(mn={...mn,parentItem:vn})}return jt&&(mn={text:"View panel",parentItem:mn}),mn}getBodyToRender(){return this.state.viewPanelScene??this.state.body}startTrackingChanges(){this._changeTrackerSub=this.subscribeToEvent(r.QI,Pt=>{Pt.payload.changedObject instanceof r.vf&&Object.prototype.hasOwnProperty.call(Pt.payload.partialUpdate,"intervals")&&this.setIsDirty(),Pt.payload.changedObject instanceof r.bO&&this.setIsDirty(),Pt.payload.changedObject instanceof Cn&&Object.keys(Pt.payload.partialUpdate).some(Dt=>Gn.includes(Dt))&&this.setIsDirty(),Pt.payload.changedObject instanceof r.gg&&this.setIsDirty()})}setIsDirty(){this.state.isDirty||this.setState({isDirty:!0})}stopTrackingChanges(){this._changeTrackerSub?.unsubscribe()}getInitialState(){return this._initialState}showModal(Pt){this.setState({overlay:Pt})}closeModal(){this.setState({overlay:void 0})}async onStarDashboard(){const{meta:Pt,uid:Dt}=this.state;if(Dt)try{const $t=await(0,u.h4)().starDashboard(Dt,!!Pt.isStarred);this.setState({meta:{...Pt,isStarred:$t}})}catch($t){console.error("Failed to star dashboard",$t)}}enrichDataRequest(Pt){const Dt=(0,k.Qx)(Pt);let $t=0;return Dt&&Dt.state.key&&((0,k.RB)(Dt.state.key)?$t=te(Dt?.state.key):$t=(0,k.Jb)(Dt)),{app:n.zj.Dashboard,dashboardUID:this.state.uid,panelId:$t}}canEditDashboard(){const{meta:Pt}=this.state;return!!(Pt.canEdit||Pt.canMakeEditable)}};let Yn=Cn;Yn.listenToChangesInProps=Gn,Yn.Component=R;class Xn{constructor(){this._emptySet=new Set}getNames(){return this._emptySet}hasDependencyOn(){return!1}variableUpdatesCompleted(Dt){Dt.size>0&&i.Z.publish(new l.x9({refreshAll:!0,panelIds:[]}))}}},81110:(G,A,e)=>{"use strict";e.d(A,{X:()=>u});var n=e(85960),a=e(57474),o=e(27008),r=e(1706),i=e(99386),g=e(62197);class u extends a.wx{constructor({uid:c,title:d,key:f,name:E}){super({uid:c,title:d,key:f,name:E,panel:new a.Z({title:d,menu:new a.e0({$behaviors:[g.F]})})}),this._onActivate=()=>{this.loadLibraryPanelFromPanelModel()},this.addActivationHandler(this._onActivate)}async loadLibraryPanelFromPanelModel(){const c=this.state.panel;try{const d=await(0,r.Mh)(this.state.uid,!0),f=new o.r(d.model);c.setState({options:f.options??{},fieldConfig:f.fieldConfig,pluginVersion:f.pluginVersion,displayMode:f.transparent?"transparent":void 0,description:f.description,$data:(0,i.R)(f)})}catch{c.setState({_pluginLoadError:"Unable to load library panel: "+this.state.uid})}this.setState({panel:c})}}u.Component=l;function l({model:m}){const{panel:c}=m.useState();return c?n.createElement(c.Component,{model:c}):null}},62197:(G,A,e)=>{"use strict";e.d(A,{S:()=>P,F:()=>L});var n=e(73999),a=e(58715),o=e(91),r=e(90857),i=e(26141),g=e(57474),u=e(95329),l=e(48116),m=e(44985),c=e(23280),d=e(81502),f=e(98100),E=e(39972),v=e(85960),h=e(63153),p=e(6467),s=e(55126),y=e(49355);class C extends g.wx{constructor(U){super(U),this.onOpenTrail=()=>{(0,s.n)().goToUrlForTrail(this.trail.clone({embedded:!1}))},this.onClose=()=>{(0,E.Pm)(this).closeModal()},this.trail=S(U),this.trail.addActivationHandler(()=>{this.trail.subscribeToEvent(y.od,this.onOpenTrail)})}}C.Component=b;function b({model:F}){return v.createElement(h.d,{title:"Data trail",onClose:F.onClose,size:"lg"},v.createElement("div",{style:{display:"flex",height:"100%"}},v.createElement(F.trail.Component,{model:F.trail})))}function S({query:F,dsRef:U,timeRange:j}){const V=F.labels.map(H=>({key:H.label,value:H.value,operator:H.op})),_=(0,d.F)().getInstanceSettings(U);return new p.j({$timeRange:j,metric:F.metric,initialDS:_?.name,initialFilters:V,embedded:!0})}function D(F,U,j){const V=(0,E.R)(U);if(!V)return;const _=(0,d.F)().getInstanceSettings(V.state.datasource);if(!_||_.meta.id!=="prometheus"||V.state.queries.length>1)return;const H=V.state.queries[0],z=(0,f._)(H.expr);z.errors.length>0||j.push({text:"Data trail",iconClassName:"code-branch",onClick:()=>{F.showModal(new C({query:z.query,dsRef:_,timeRange:F.state.$timeRange.clone()}))},shortcut:"p s"})}var M=e(7572),T=e(80268),R=e(75530),O=e(14798),x=e(81110),I=e(91170);function L(F){(async()=>{const j=F.parent,V=j.getPlugin(),_=o.E1.getLocation(),H=[],z=[],K=[],Y=(0,E.Jb)(j),k=j.getRoot();k instanceof O.WI&&(H.push({text:(0,u.t)("panel.header-menu.view","View"),iconClassName:"eye",shortcut:"v",onClick:()=>T.a.panelMenuItemClicked("view"),href:(0,R.uO)(j)}),k.canEditDashboard()&&H.push({text:(0,u.t)("panel.header-menu.edit","Edit"),iconClassName:"eye",shortcut:"e",onClick:()=>()=>T.a.panelMenuItemClicked("edit"),href:(0,R.$9)({uid:k.state.uid,subPath:`/panel-edit/${Y}`,currentQueryParams:_.search,useExperimentalURL:!0})}),H.push({text:(0,u.t)("panel.header-menu.share","Share"),iconClassName:"share-alt",onClick:()=>{T.a.panelMenuItemClicked("share"),k.showModal(new M.V({panelRef:j.getRef(),dashboardRef:k.getRef()}))},shortcut:"p s"}),j.parent instanceof x.X||z.push({text:(0,u.t)("panel.header-menu.create-library-panel","Create library panel"),iconClassName:"share-alt",onClick:()=>{T.a.panelMenuItemClicked("createLibraryPanel"),k.showModal(new M.V({panelRef:j.getRef(),dashboardRef:k.getRef(),activeTab:"Library panel"}))}}),r.config.featureToggles.datatrails&&D(k,j,H));const q=await(0,R.el)(j);if(q&&H.push({text:(0,u.t)("panel.header-menu.explore","Explore"),iconClassName:"compass",shortcut:"p x",onClick:()=>T.a.panelMenuItemClicked("explore"),href:q}),V&&!V.meta.skipDataQuery&&(K.push({text:(0,u.t)("panel.header-menu.inspect-data","Data"),href:(0,R.qx)(j,l.q.Data),onClick:X=>{X.preventDefault(),o.E1.partial({inspect:j.state.key,inspectTab:l.q.Data}),T.a.panelMenuInspectClicked(l.q.Data)}}),k instanceof O.WI&&k.state.meta.canEdit&&K.push({text:(0,u.t)("panel.header-menu.query","Query"),href:(0,R.qx)(j,l.q.Query),onClick:X=>{X.preventDefault(),o.E1.partial({inspect:j.state.key,inspectTab:l.q.Query}),T.a.panelMenuInspectClicked(l.q.Query)}})),K.push({text:(0,u.t)("panel.header-menu.inspect-json","Panel JSON"),href:(0,R.qx)(j,l.q.JSON),onClick:X=>{X.preventDefault(),o.E1.partial({inspect:j.state.key,inspectTab:l.q.JSON}),T.a.panelMenuInspectClicked(l.q.JSON)}}),H.push({text:(0,u.t)("panel.header-menu.inspect","Inspect"),iconClassName:"info-circle",shortcut:"i",href:(0,R.qx)(j),onClick:X=>{X.isDefaultPrevented()||(o.E1.partial({inspect:j.state.key,inspectTab:l.q.Data}),T.a.panelMenuInspectClicked(l.q.Data))},subMenu:K.length>0?K:void 0}),k instanceof O.WI){const{extensions:X}=(0,i.dj)({extensionPointId:n.y.DashboardPanelMenu,context:N(j,k),limitPerPlugin:3});X.length>0&&!k.state.isEditing&&H.push({text:"Extensions",iconClassName:"plug",type:"submenu",subMenu:(0,c.cS)(X)})}z.length&&H.push({type:"submenu",text:(0,u.t)("panel.header-menu.more","More..."),iconClassName:"cube",subMenu:z,onClick:X=>{X.preventDefault()}}),F.setState({items:H})})()}function P(F){return U=>{const j=(z,K)=>g.ep.interpolate(U,z,K),V=(0,m.H)(F,j);if(!V)return;const _=V&&V.getLinks(j),H=_.map(z=>({...z,onClick:(K,Y)=>{T.a.panelLinkClicked({has_multiple_links:_.length>1}),z.onClick?.(K,Y)}}));U.setState({links:H})}}function N(F,U){const j=g.ep.getTimeRange(F);let V=F.state.$data,_=[];const H=(0,E.Jb)(F);V instanceof g.bM&&(V=V.state.$data),V instanceof g.uq&&(_=V.state.queries),V instanceof I.K&&(_=[V.state.query]);let z={};if(F.state.$variables&&F.state.$variables.state.variables.forEach(K=>{K instanceof g.I2&&(z={...z,[K.state.name]:{value:K.getValue(),text:K.getValueText()}})}),F.parent?.parent instanceof g.I_){const K=F.parent.parent;K.state.$variables&&K.state.$variables.state.variables.forEach(Y=>{Y instanceof g.I2&&(z={...z,[Y.state.name]:{value:Y.getValue(),text:Y.getValueText()}})})}return{id:H,pluginId:F.state.pluginId,title:F.state.title,timeRange:j.state.value.raw,timeZone:(0,a.Z)({timeZone:j.getTimeZone()}),dashboard:{uid:U.state.uid,title:U.state.title,tags:U.state.tags||[]},targets:_,scopedVars:z,data:V?.state.data}}},31326:(G,A,e)=>{"use strict";e.d(A,{o:()=>l});var n=e(66681),a=e(85960),o=e(90857),r=e(57474),i=e(89248),g=e(39972),u=e(55450);class l extends r.wx{constructor(f){super(f),this._variableDependency=new r.JY(this,{variableNames:[this.state.variableName],onVariableUpdatesCompleted:this._onVariableChanged.bind(this)}),this._isWaitingForVariables=!1,this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){this._subs.add(this.subscribeToState((f,E)=>this._handleGridResize(f,E))),r.ep.hasVariableDependencyInLoadingState(this)?this._isWaitingForVariables=!0:this._performRepeat()}_onVariableChanged(f,E){if(E){this._performRepeat();return}this._isWaitingForVariables&&!r.ep.hasVariableDependencyInLoadingState(this)&&(this._isWaitingForVariables=!1,this._performRepeat())}_handleGridResize(f,E){const v=this.state.repeatedPanels?.length??1,h={};if(f.height!==E.height){if(this.getRepeatDirection()==="v"){const p=Math.ceil(f.height/v);h.itemHeight=p}else{const p=Math.ceil(v/this.getMaxPerRow());h.itemHeight=Math.ceil(f.height/p)}h.itemHeight!==this.state.itemHeight&&this.setState(h)}}_performRepeat(){const f=r.ep.lookupVariable(this.state.variableName,this);if(!f){console.error("SceneGridItemRepeater: Variable not found");return}if(!(f instanceof r.mW)){console.error("PanelRepeaterGridItem: Variable is not a MultiValueVariable");return}const E=this.state.source,{values:v,texts:h}=(0,g.CR)(f),p=[];for(let D=0;D<v.length;D++){const M=E.clone({$variables:new r.hT({variables:[new r.I2({name:f.state.name,value:v[D],text:String(h[D])})]}),key:`${E.state.key}-clone-${D}`});p.push(M)}const s=this.getRepeatDirection(),y={repeatedPanels:p},C=this.state.itemHeight??10,b=this.state.height,S=this.getMaxPerRow();if(s==="h"){const D=Math.ceil(p.length/S);y.height=D*C}else y.height=p.length*C;if(this.setState(y),b!==this.state.height){const D=r.ep.getLayout(this);D instanceof r.Qh&&D.forceRender()}this.publishEvent(new u.P({source:this}),!0)}getMaxPerRow(){return this.state.maxPerRow??4}getRepeatDirection(){return this.state.repeatDirection==="v"?"v":"h"}getClassName(){return"panel-repeater-grid-item"}}l.Component=({model:d})=>{const{repeatedPanels:f,itemHeight:E}=d.useState(),v=f?.length??0,h=m(d.getRepeatDirection(),v,d.getMaxPerRow(),E??10);return f?a.createElement("div",{className:h},f.map(p=>a.createElement("div",{className:c,key:p.state.key},a.createElement(p.Component,{model:p,key:p.state.key})))):null};function m(d,f,E,v){return(0,a.useMemo)(()=>{const h=o.config.theme2,p=v*i.K3*f+(f-1)*i.hD;if(d==="h"){const s=Math.ceil(f/E),y=Math.ceil(f/s);return(0,n.css)({display:"grid",height:"100%",width:"100%",gridTemplateColumns:`repeat(${y}, 1fr)`,gridTemplateRows:`repeat(${s}, 1fr)`,gridColumnGap:h.spacing(1),gridRowGap:h.spacing(1),[h.breakpoints.down("md")]:{display:"flex",flexDirection:"column",height:p}})}return(0,n.css)({display:"flex",height:"100%",width:"100%",flexDirection:"column",gap:h.spacing(1),[h.breakpoints.down("md")]:{height:p}})},[d,f,E,v])}const c=(0,n.css)({display:"flex",flexGrow:1,position:"relative"})},91338:(G,A,e)=>{"use strict";e.d(A,{r:()=>f});var n=e(66681),a=e(85960),o=e(9833),r=e(71244),i=e(13446),g=e(57474),u=e(47257),l=e(14607),m=e(56399),c=e(58861),d=e(97666);class f extends g.qC{constructor(p={}){super({...p,from:"now-6h",to:"now",value:(0,o.JK)()})}ancestorTimeRangeChanged(p){const s=this.getTimeOverride(p.value);this.setState({value:s.timeRange,timeInfo:s.timeInfo})}getTimeOverride(p){const{timeFrom:s,timeShift:y}=this.state,C={timeInfo:"",timeRange:p};if(s){const b=g.ep.interpolate(this,this.state.timeFrom),S=r.describeTextRange(b);if(S.invalid)return C.timeInfo="invalid time override",C;r.isRelativeTimeRange(p.raw)&&(C.timeInfo=S.display,C.timeRange={from:i.parse(S.from),to:i.parse(S.to),raw:{from:S.from,to:S.to}})}if(y){const b=g.ep.interpolate(this,this.state.timeShift);if(r.describeTextRange(b).invalid)return C.timeInfo="invalid timeshift",C;const D="-"+b;C.timeInfo+=" timeshift "+D;const M=i.parseDateMath(D,C.timeRange.from,!1),T=i.parseDateMath(D,C.timeRange.to,!0);C.timeRange={from:M,to:T,raw:{from:M,to:T}}}return C}}f.Component=E;function E({model:h}){const{timeInfo:p,hideTimeOverride:s}=h.useState(),y=(0,u.wW)(v);return!p||s?null:a.createElement(l.u,{content:a.createElement(m.IF,{timeRange:h.state.value,timeZone:h.getTimeZone()})},a.createElement(c.fm.TitleItem,{className:y.timeshift},a.createElement(d.J,{name:"clock-nine",size:"sm"})," ",p))}const v=h=>({timeshift:(0,n.css)({color:h.colors.text.link,gap:h.spacing(.5),whiteSpace:"nowrap"})})},17067:(G,A,e)=>{"use strict";e.d(A,{a:()=>r});var n=e(57474),a=e(39972),o=e(55450);class r extends n.wx{constructor(c){super(c),this._variableDependency=new n.JY(this,{variableNames:[this.state.variableName],onVariableUpdatesCompleted:this._onVariableChanged.bind(this)}),this._isWaitingForVariables=!1,this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){n.ep.hasVariableDependencyInLoadingState(this)?this._isWaitingForVariables=!0:this._performRepeat()}_onVariableChanged(c,d){if(d){this._performRepeat();return}this._isWaitingForVariables&&!n.ep.hasVariableDependencyInLoadingState(this)&&(this._isWaitingForVariables=!1,this._performRepeat())}_performRepeat(){const c=n.ep.lookupVariable(this.state.variableName,this.parent?.parent);if(!c){console.error("RepeatedRowBehavior: Variable not found");return}if(!(c instanceof n.mW)){console.error("RepeatedRowBehavior: Variable is not a MultiValueVariable");return}if(!(this.parent instanceof n.I_)){console.error("RepeatedRowBehavior: Parent is not a SceneGridRow");return}const d=n.ep.getLayout(this);if(!(d instanceof n.Qh)){console.error("RepeatedRowBehavior: Layout is not a SceneGridLayout");return}const f=this.parent,{values:E,texts:v}=(0,a.CR)(c),h=[],p=i(this.state.sources);let s=0;for(let y=0;y<E.length;y++){const C=[];for(const S of this.state.sources){const M=(S.state.y??0)+(p+1)*y,T=S.clone({key:`${S.state.key}-clone-${y}`,y:M});l(T,y),C.push(T),s<M+T.state.height&&(s=M+T.state.height)}const b=this.getRowClone(f,y,E[y],v[y],p,C);h.push(b)}g(d,h,s,f),this.publishEvent(new o.P({source:this}),!0)}getRowClone(c,d,f,E,v,h){if(d===0)return c.setState({$variables:new n.hT({variables:[new n.I2({name:this.state.variableName,value:f,text:String(E)})]}),children:h}),c;const p=c.state.y??0;return c.clone({key:`${c.state.key}-clone-${d}`,$variables:new n.hT({variables:[new n.I2({name:this.state.variableName,value:f,text:String(E)})]}),$behaviors:[],children:h,y:p+v*d+d})}}function i(m){let c=0,d=Number.MAX_VALUE;for(const f of m)f.state.y+f.state.height>c&&(c=f.state.y+f.state.height),f.state.y<d&&(d=f.state.y);return c-d}function g(m,c,d,f){const E=u(m,f),v=E.indexOf(f);if(v===-1)throw new Error("RowRepeaterBehavior: Parent row not found in layout children");const h=[...E.slice(0,v),...c,...E.slice(v+1)];if(E.length>v+1){const p=E.slice(v+1),s=p[0].state.y,y=d-s;for(const C of p)C.state.y<d&&C.setState({y:C.state.y+y})}m.setState({children:h})}function u(m,c){return m.state.children.filter(d=>!d.state.key?.startsWith(`${c.state.key}-clone-`))}function l(m,c){m.forEachChild(d=>{d.setState({key:`${d.state.key}-row-${c}`}),l(d,c)})}},91170:(G,A,e)=>{"use strict";e.d(A,{K:()=>g});var n=e(93231),a=e(23757),o=e(9833),r=e(57474),i=e(39972);class g extends r.wx{constructor(m){super(m),this._results=new n.t,this._passContainerWidth=!1,this.addActivationHandler(()=>(this._subscribeToSource(),()=>{this._querySub&&this._querySub.unsubscribe(),this._sourceDataDeactivationHandler&&this._sourceDataDeactivationHandler()}))}getResultsStream(){return this._results}_subscribeToSource(){const{query:m}=this.state;if(this._querySub&&this._querySub.unsubscribe(),!m.panelId)return;const c=(0,i.Rv)(m.panelId),d=u(this.getRoot(),f=>f.state.key===c);if(!d){console.log("Shared dashboard query refers to a panel that does not exist in the scene");return}if(this._sourceProvider=d.state.$data,!this._sourceProvider){console.log("No source data found for shared dashboard query");return}if(this._sourceProvider.isActive||(this._passContainerWidth=!0),this._sourceDataDeactivationHandler=this._sourceProvider.activate(),this._sourceProvider instanceof r.bM&&!m.withTransforms){if(!this._sourceProvider.state.$data)throw new Error("No source inner query runner found in data transformer");this._sourceProvider=this._sourceProvider.state.$data}this._querySub=this._sourceProvider.subscribeToState(f=>{this._results.next({origin:this,data:f.data||{state:a.Gu.Done,series:[],timeRange:(0,o.JK)()}}),this.setState({data:f.data})}),this.setState({data:this._sourceProvider.state.data})}setContainerWidth(m){this._passContainerWidth&&this._sourceProvider&&this._sourceProvider.setContainerWidth?.(m)}isDataReadyToDisplay(){return this._sourceProvider&&this._sourceProvider.isDataReadyToDisplay?this._sourceProvider.isDataReadyToDisplay():!1}}function u(l,m){if(m(l))return l;let c=null;return l.forEachChild(d=>{let f=u(d,m);f&&(c=f)}),c}},55450:(G,A,e)=>{"use strict";e.d(A,{P:()=>a});var n=e(74442);class a extends n.R{}a.type="dashboard-repeats-processed"},81221:(G,A,e)=>{"use strict";e.d(A,{q:()=>i});var n=e(57474),a=e(34166),o=e(91470),r=e(39972);function i(g){const u=[];for(const l of g.state.variables){const m={name:l.state.name,label:l.state.label,description:l.state.description??void 0,skipUrlSync:!!l.state.skipUrlSync,hide:l.state.hide||a.bU.dontHide,type:l.state.type};if(n.vp.isQueryVariable(l))u.push({...m,current:{value:l.state.value,text:l.state.text},options:[],query:l.state.query,definition:l.state.definition,datasource:l.state.datasource,sort:l.state.sort,refresh:l.state.refresh,regex:l.state.regex,allValue:l.state.allValue,includeAll:l.state.includeAll,multi:l.state.isMulti,skipUrlSync:l.state.skipUrlSync,hide:l.state.hide||a.bU.dontHide});else if(n.vp.isCustomVariable(l))u.push({...m,current:{text:l.state.value,value:l.state.value},options:[],query:l.state.query,multi:l.state.isMulti,allValue:l.state.allValue,includeAll:l.state.includeAll});else if(n.vp.isDataSourceVariable(l))u.push({...m,current:{value:l.state.value,text:l.state.text},options:[],regex:l.state.regex,refresh:o.Bd.onDashboardLoad,query:l.state.pluginId,multi:l.state.isMulti,allValue:l.state.allValue,includeAll:l.state.includeAll});else if(n.vp.isConstantVariable(l))u.push({...m,current:{value:l.state.value,text:l.state.value},query:l.state.value,hide:a.bU.hideVariable});else if(n.vp.isIntervalVariable(l)){const c=(0,r.U)(l.state.intervals);u.push({...m,current:{text:l.state.value,value:l.state.value},query:c,hide:a.bU.hideVariable,refresh:l.state.refresh,auto:l.state.autoEnabled,auto_min:l.state.autoMinInterval,auto_count:l.state.autoStepCount})}else if(n.vp.isTextBoxVariable(l))u.push({...m,current:{text:l.state.value,value:l.state.value},query:l.state.value,hide:a.bU.hideVariable});else throw new Error("Unsupported variable type")}for(const l of u)l.hide===a.bU.dontHide&&delete l.hide,l.skipUrlSync||delete l.skipUrlSync,l.label===""&&delete l.label,l.multi||delete l.multi,l.sort===o.$U.disabled&&delete l.sort;return u}},47390:(G,A,e)=>{"use strict";e.d(A,{Ee:()=>ye,Yz:()=>Ue,Td:()=>ue});var n=e(90857),a=e(57474),o=e(27008),r=e(11735),i=e(9833),g=e(18100),u=e(34921),l=e(63835);class m extends a.o6.y{async resolveDataSource(xe){return n.config.publicDashboardAccessToken?new l.k:super.resolveDataSource(xe)}processEvents(xe,Me){if(n.config.publicDashboardAccessToken){const He={series:[],timeRange:(0,i.JK)(),state:Me.state},Ve=(0,g.P)(Me.events);return Ve.meta={...Ve.meta,dataTopic:u.w5.Annotations},He.annotations=[Ve],He}else return super.processEvents(xe,Me)}}var c=e(60495),d=e(85960),f=e(12331),E=e(92369),v=e(14607),h=e(47020),p=e(53568),s=e(43282),y=e(39972);class C extends a.wx{}C.Component=b;function b({model:he}){const{links:xe,uid:Me}=(0,y.Pm)(he).useState();return!xe||!Me?null:d.createElement(d.Fragment,null,xe.map((He,Ve)=>{const Oe=(0,s.Bq)().getAnchorInfo(He),Ne=`${He.title}-$${Ve}`;if(He.type==="dashboards")return d.createElement(p.Ul,{key:Ne,link:He,linkInfo:Oe,dashboardUID:Me});const _e=h.xy[He.icon],qe=d.createElement(p.MM,{icon:_e,href:(0,f.Nm)(Oe.href),target:He.targetBlank?"_blank":void 0,rel:"noreferrer","data-testid":E.wl.components.DashboardLinks.link},Oe.title);return d.createElement("div",{key:Ne,"data-testid":E.wl.components.DashboardLinks.container},He.tooltip?d.createElement(v.u,{content:Oe.tooltip},qe):qe)}))}class S{constructor(xe,Me){this._sceneObject=Me,this.state={name:xe,type:"dashboard_macro"}}getValue(xe){const Me=(0,y.Pm)(this._sceneObject);switch(xe){case"uid":return Me.state.uid||"";case"title":case"name":case"id":default:return Me.state.title}}getValueText(){return""}}function D(){const he=a.vp.registerVariableMacro("__dashboard",S);return()=>he()}var M=e(14798),T=e(81110),R=e(44839),O=e(40235),x=e(54635);class I extends a.wx{}I.Component=L;function L({model:he}){const{menu:xe}=he.useState();return d.createElement(R.L,{overlay:()=>d.createElement(xe.Component,{model:xe,key:xe.state.key})},d.createElement(O.h,{icon:"external-link-alt",iconSize:"md","aria-label":"panel links"}))}class P extends a.wx{}P.Component=N;function N({model:he}){const{links:xe}=he.useState();return xe?d.createElement(x.v,null,xe?.map((Me,He)=>d.createElement(x.v.Item,{key:He,label:Me.title,url:Me.href,target:Me.target,onClick:Me.onClick}))):null}var F=e(62197),U=e(43330);class j extends a.wx{constructor(){super({}),this.onActivate=()=>{const xe=this.parent;if(!xe||!(xe instanceof a.Z))throw new Error("PanelNotices can be used only as title items for VizPanel")},this.addActivationHandler(this.onActivate)}getPanel(){const xe=this.parent;return xe&&xe instanceof a.Z?xe:null}}j.Component=V;function V({model:he}){const xe=he.getPanel(),He=a.ep.getData(he).useState();if(!xe)return null;const Ve=(0,y.Jb)(xe);return He.data?.series?d.createElement(U.f,{frames:He.data?.series,panelId:Ve}):null}var _=e(31326),H=e(91338),z=e(17067),K=e(81223),Y=e(43471),k=e(71785);function q(he,xe){xe.app=K.zj.Dashboard,xe.canAddAnnotations=()=>{const Me=(0,y.Pm)(he);return!X(Me)||!Me.canEditDashboard()?!1:!!Me.state.meta.annotationsPermissions?.dashboard.canAdd},xe.canEditAnnotations=Me=>{const He=(0,y.Pm)(he);return He.canEditDashboard()?Me?!!He.state.meta.annotationsPermissions?.dashboard.canEdit:!!He.state.meta.annotationsPermissions?.organization.canEdit:!1},xe.canDeleteAnnotations=Me=>{const He=(0,y.Pm)(he);return He.canEditDashboard()?Me?!!He.state.meta.annotationsPermissions?.dashboard.canDelete:!!He.state.meta.annotationsPermissions?.organization.canDelete:!1},xe.onAnnotationCreate=async Me=>{const He=(0,y.Pm)(he),Ve=Me.from!==Me.to,Oe={dashboardUID:He.state.uid,panelId:(0,y.Jb)(he),isRegion:Ve,time:Me.from,timeEnd:Ve?Me.to:0,tags:Me.tags,text:Me.description};await(0,k.xD)(Oe),te(He),xe.eventBus.publish(new Y.n1(Oe))},xe.onAnnotationUpdate=async Me=>{const He=(0,y.Pm)(he),Ve=Me.from!==Me.to,Oe={id:Me.id,dashboardUID:He.state.uid,panelId:(0,y.Jb)(he),isRegion:Ve,time:Me.from,timeEnd:Ve?Me.to:0,tags:Me.tags,text:Me.description};await(0,k._E)(Oe),te(He),xe.eventBus.publish(new Y.n1(Oe))},xe.onAnnotationDelete=async Me=>{await(0,k.Dl)({id:Me}),te((0,y.Pm)(he)),xe.eventBus.publish(new Y.n1({id:Me}))},xe.onAddAdHocFilter=Me=>{const He=(0,y.Pm)(he),Ve=(0,y.R)(he);if(!Ve)return;const Oe=se(He,Ve.state.datasource);de(Oe,Me)},xe.onUpdateData=Me=>Promise.resolve(!0),xe.instanceState={legacyPanelId:(0,y.Jb)(he)}}function X(he){if(he.state.$data instanceof a.mv){for(const xe of he.state.$data.state.layers)if(xe instanceof a.o6.y&&xe.state.isEnabled&&xe.state.query.builtIn)return xe}}function te(he){const xe=X(he);xe&&xe.runLayer()}function se(he,xe){const Me=he.state.controls??[];for(const Ve of Me)if(Ve instanceof a.zo&&(Ve.state.datasource===xe||Ve.state.datasource?.uid===xe?.uid))return Ve;const He=new a.zo({datasource:xe});return he.setState({controls:[Me[0],He,...Me.slice(1)]}),He}function de(he,xe){for(const Me of he.state.filters)if(Me.key===xe.key){he.setState({filters:he.state.filters.map(He=>He.key===xe.key?xe:He)});return}he.setState({filters:[...he.state.filters,xe]})}var re=e(99386),fe=e(80268),ie=e(68460);function oe(he){return function(Me,He){if(He.angularPanelCtrl){Me.options={angularOptions:he.getOptionsToRemember()};return}if(he.autoMigrateFrom){const Ve=ie.G7[he.autoMigrateFrom]!=null,Oe=he.getOptionsToRemember(),Ne=he.autoMigrateFrom;if(He.onPanelTypeChanged){const _e=Ve?{angular:Oe}:Oe.options;Object.assign(Me.options,He.onPanelTypeChanged(Me,Ne,_e,Me.fieldConfig))}}}}function ue(he){const xe=new o.f(he.dashboard,he.meta,{autoMigrateOldPanels:!1});return Ue(xe)}function me(he){const xe=[];let Me=null,He=[];for(const Ve of he)if(Ve.type==="row")Me?Me.id!==Ve.id&&(xe.push(ge(Me,He)),Me=Ve,He=[]):Ve.collapsed?xe.push(ge(Ve,[])):Me=Ve;else if(Ve.libraryPanel?.uid&&!("model"in Ve.libraryPanel)){const Oe=Pe(Ve);Oe&&xe.push(Oe)}else{const Oe=ye(Ve);Me?He.push(Oe):xe.push(Oe)}return Me&&xe.push(ge(Me,He)),xe}function ge(he,xe){he.collapsed&&he.panels&&(xe=he.panels.map(Ve=>(Ve instanceof o.r||(Ve=new o.r(Ve)),ye(Ve))));let Me,He=xe;return he.repeat&&(He=[],Me=[new z.a({variableName:he.repeat,sources:xe})]),new a.I_({key:(0,y.Rv)(he.id),title:he.title,y:he.gridPos.y,isCollapsed:he.collapsed,children:He,$behaviors:Me})}function Ue(he){let xe,Me=[],He=[];if(he.templating?.list?.length){const Ne=he.templating.list.map(_e=>{try{return Te(_e)?(He.push(new a.zo({name:_e.name,datasource:_e.datasource,filters:_e.filters??[],baseFilters:_e.baseFilters??[]})),null):De(_e)}catch(qe){return console.error(qe),null}}).filter(_e=>!!_e);xe=new a.hT({variables:Ne})}he.annotations?.list?.length&&(Me=he.annotations?.list.map(Ne=>new m({key:`annnotations-${Ne.name}`,query:Ne,name:Ne.name,isEnabled:!!Ne.enable,isHidden:!!Ne.hide})));let Ve=n.config.unifiedAlertingEnabled;return Ve||he.panels.find(Ne=>!!Ne.alert)&&(Ve=!0),Ve&&Me.push(new r.u({key:"alert-states",name:"Alert States"})),new M.WI({title:he.title,tags:he.tags||[],links:he.links||[],uid:he.uid,id:he.id,description:he.description,editable:he.editable,meta:he.meta,body:new a.Qh({isLazy:!0,children:me(he.panels)}),$timeRange:new a.gg({from:he.time.from,to:he.time.to,fiscalYearStartMonth:he.fiscalYearStartMonth,timeZone:he.timezone,weekStart:he.weekStart}),$variables:xe,$behaviors:[D,new a.U1.Y({sync:he.graphTooltip}),ct],$data:Me.length>0?new a.mv({layers:Me}):void 0,controls:[new c.n({variableControls:[new a.dn({}),...He,new a.wJ],timeControls:he.timepicker.hidden?[]:[new a.n7({}),new a.vf({refresh:he.refresh,intervals:he.timepicker.refresh_intervals})],linkControls:new C({})})]})}function De(he){const xe={name:he.name,label:he.label};if(he.type==="custom")return new a.eO({...xe,value:he.current?.value??"",text:he.current?.text??"",description:he.description,query:he.query,isMulti:he.multi,allValue:he.allValue||void 0,includeAll:he.includeAll,defaultToAll:!!he.includeAll,skipUrlSync:he.skipUrlSync,hide:he.hide});if(he.type==="query")return new a.$1({...xe,value:he.current?.value??"",text:he.current?.text??"",description:he.description,query:he.query,datasource:he.datasource,sort:he.sort,refresh:he.refresh,regex:he.regex,allValue:he.allValue||void 0,includeAll:he.includeAll,defaultToAll:!!he.includeAll,isMulti:he.multi,skipUrlSync:he.skipUrlSync,hide:he.hide,definition:he.definition});if(he.type==="datasource")return new a.l3({...xe,value:he.current?.value??"",text:he.current?.text??"",description:he.description,regex:he.regex,pluginId:he.query,allValue:he.allValue||void 0,includeAll:he.includeAll,defaultToAll:!!he.includeAll,skipUrlSync:he.skipUrlSync,isMulti:he.multi,hide:he.hide});if(he.type==="interval"){const Me=(0,y._B)(he),He=(0,y._n)(he,Me);return new a.TC({...xe,value:He,description:he.description,intervals:Me,autoEnabled:he.auto,autoStepCount:he.auto_count,autoMinInterval:he.auto_min,refresh:he.refresh,skipUrlSync:he.skipUrlSync,hide:he.hide})}else{if(he.type==="constant")return new a.M6({...xe,description:he.description,value:he.query,skipUrlSync:he.skipUrlSync,hide:he.hide});if(he.type==="textbox")return new a.Dm({...xe,description:he.description,value:he.query,skipUrlSync:he.skipUrlSync,hide:he.hide});throw new Error(`Scenes: Unsupported variable type ${he.type}`)}}function Pe(he){if(!he.libraryPanel)return null;const xe=new T.X({title:he.title,uid:he.libraryPanel.uid,name:he.libraryPanel.name,key:(0,y.Rv)(he.id)});return new a.bO({body:xe,y:he.gridPos.y,x:he.gridPos.x,width:he.gridPos.w,height:he.gridPos.h})}function ye(he){const xe=he.links&&he.links.length>0,Me=[];let He;xe&&(He=new I({menu:new P({$behaviors:[(0,F.S)(he)]})}),Me.push(He)),Me.push(new j);const Ve={key:(0,y.Rv)(he.id),title:he.title,description:he.description,pluginId:he.type,options:he.options??{},fieldConfig:he.fieldConfig,pluginVersion:he.pluginVersion,displayMode:he.transparent?"transparent":void 0,hoverHeader:!he.title&&!he.timeFrom&&!he.timeShift,$data:(0,re.R)(he),menu:new a.e0({$behaviors:[F.F]}),titleItems:Me,extendPanelContext:q,_UNSAFE_customMigrationHandler:oe(he)};if((he.timeFrom||he.timeShift)&&(Ve.$timeRange=new H.r({timeFrom:he.timeFrom,timeShift:he.timeShift,hideTimeOverride:he.hideTimeOverride})),he.repeat){const Ne=he.repeatDirection??"h";return new _.o({key:`grid-item-${he.id}`,x:he.gridPos.x,y:he.gridPos.y,width:Ne==="h"?24:he.gridPos.w,height:he.gridPos.h,itemHeight:he.gridPos.h,source:new a.Z(Ve),variableName:he.repeat,repeatedPanels:[],repeatDirection:he.repeatDirection,maxPerRow:he.maxPerRow})}const Oe=new a.Z(Ve);return new a.bO({key:`grid-item-${he.id}`,x:he.gridPos.x,y:he.gridPos.y,width:he.gridPos.w,height:he.gridPos.h,body:Oe})}const Te=he=>he.type==="adhoc",nt=()=>{const he=[];return xe=>{he.includes(xe)||(he.push(xe),fe.a.panelDescriptionShown())}};function ct(he){const xe=nt();he.subscribeToEvent(a.f_,Me=>{const{interaction:He}=Me.payload;switch(He){case"panel-description-shown":xe(Me.payload.origin.state.key||"");break;case"panel-status-message-clicked":fe.a.panelStatusMessageClicked();break;case"panel-cancel-query-clicked":fe.a.panelCancelQueryClicked();break;case"panel-menu-shown":fe.a.panelMenuShown();break}})}},13150:(G,A,e)=>{"use strict";e.d(A,{vi:()=>b,EU:()=>C,h2:()=>T});var n=e(25788),a=e(57474),o=e(34166),r=e(91470),i=e(3201),g=e(71851),u=e(61815),l=e(43310),m=e(60495),c=e(81110),d=e(31326),f=e(91338),E=e(17067),v=e(91170),h=e(39972);const p={name:"grafana",uid:"grafana"};function s(R){const O=[];for(const x of R){if(!(x instanceof a.o6.y))continue;const I={...x.state.query,enable:!!x.state.isEnabled,hide:!!x.state.isHidden};O.push(I)}return O}var y=e(81221);function C(R,O=!1){const x=R.state,I=x.$timeRange.state,L=x.$data,P=x.$variables,N=x.body;let F=o.ic.refresh_intervals,U=[],j=o.Ql.graphTooltip,V=[];if(N instanceof a.Qh){for(const z of N.state.children)if(z instanceof a.bO&&U.push(b(z,O)),z instanceof d.o&&(U=U.concat(D(z,O))),z instanceof a.I_){if(z.state.key.indexOf("-clone-")>0&&!O)continue;M(z,U,O)}}let _=[];if(L instanceof a.mv){const z=L.state.layers;_=s(z)}if(P instanceof a.hT&&(V=(0,y.q)(P)),x.controls&&x.controls[0]instanceof m.n){const z=x.controls[0].state.timeControls;for(const Y of z)Y instanceof a.vf&&Y.state.intervals&&(F=Y.state.intervals);const K=x.controls[0].state.variableControls;for(const Y of K)Y instanceof a.zo&&V.push({name:Y.state.name,type:"adhoc",datasource:Y.state.datasource})}x.$behaviors&&x.$behaviors[0]instanceof a.U1.Y&&(j=x.$behaviors[0].state.sync);const H={...o.Ql,title:x.title,description:x.description||void 0,uid:x.uid,id:x.id,editable:x.editable,time:{from:I.from,to:I.to},timepicker:{...o.ic,refresh_intervals:F},panels:U,annotations:{list:_},templating:{list:V},timezone:I.timeZone,fiscalYearStartMonth:I.fiscalYearStartMonth,weekStart:I.weekStart,tags:x.tags,graphTooltip:j};return(0,i.M)(H)}function b(R,O=!1){let x,I=0,L=0,P=0,N=0;if(R instanceof a.bO){if(R.state.body instanceof c.X)return I=R.state.x??0,L=R.state.y??0,P=R.state.width??0,N=R.state.height??0,{id:(0,h.Jb)(R.state.body),title:R.state.body.state.title,gridPos:{x:I,y:L,w:P,h:N},libraryPanel:{name:R.state.body.state.name,uid:R.state.body.state.uid}};if(!(R.state.body instanceof a.Z))throw new Error("SceneGridItem body expected to be VizPanel");x=R.state.body,I=R.state.x??0,L=R.state.y??0,P=R.state.width??0,N=R.state.height??0}if(R instanceof d.o&&(x=R.state.source,I=R.state.x??0,L=R.state.y??0,P=R.state.width??0,N=R.state.height??0),!x)throw new Error("Unsupported grid item type");const F={id:(0,h.Jb)(x),type:x.state.pluginId,title:x.state.title,gridPos:{x:I,y:L,w:P,h:N},options:x.state.options,fieldConfig:x.state.fieldConfig??{defaults:{},overrides:[]},transformations:[],transparent:x.state.displayMode==="transparent",...S(x,O)},U=x.state.$timeRange;return U instanceof f.r&&(F.timeFrom=U.state.timeFrom,F.timeShift=U.state.timeShift,F.hideTimeOverride=U.state.hideTimeOverride),R instanceof d.o&&(F.repeat=R.state.variableName,F.maxPerRow=R.state.maxPerRow,F.repeatDirection=R.getRepeatDirection()),F}function S(R,O=!1){const x=R.state.$data,I={};if(x instanceof v.K&&(I.datasource={type:"datasource",uid:u.oe},I.targets=[{datasource:{...I.datasource},refId:"A",panelId:x.state.query.panelId,topic:x.state.query.topic}]),x instanceof a.uq&&(I.targets=x.state.queries,I.maxDataPoints=x.state.maxDataPoints,I.datasource=x.state.datasource),x instanceof a.bM){const L=x.state.$data;L instanceof v.K&&(I.datasource={type:"datasource",uid:u.oe},I.targets=[{datasource:{...I.datasource},refId:"A",panelId:L.state.query.panelId,topic:L.state.query.topic}]),L instanceof a.uq&&(I.targets=L.state.queries,I.maxDataPoints=L.state.maxDataPoints,I.datasource=L.state.datasource),I.transformations=x.state.transformations}if(x&&O){I.datasource=p;let L=(0,g.XJ)(x.state.data);x instanceof a.bM&&(L=(0,g.XJ)(x.state.$data.state.data)),I.targets=[{refId:"A",datasource:I.datasource,queryType:l.hR.Snapshot,snapshot:L}]}return I}function D(R,O=!1){if(O){if(R.state.repeatedPanels){const x=R.state.itemHeight??10,I=Math.ceil(R.state.repeatedPanels.length/R.getMaxPerRow()),L=Math.ceil(R.state.repeatedPanels.length/I),P=24/L,N=x;return R.state.repeatedPanels.map((U,j)=>{let V=0,_=0;R.state.repeatDirection==="v"?(V=R.state.x,_=j*N):(V=j%L*P,_=R.state.y+Math.floor(j/L)*N);const H={x:V,y:_,w:P,h:N},z=U.state.$variables.getByName(R.state.variableName);return{id:(0,h.Jb)(U),type:U.state.pluginId,title:U.state.title,gridPos:H,options:U.state.options,fieldConfig:U.state.fieldConfig??{defaults:{},overrides:[]},transformations:[],transparent:U.state.displayMode==="transparent",scopedVars:{[R.state.variableName]:{text:z?.state.text,value:z?.state.value}},...S(U,O)}})}return[]}else return[b(R)]}function M(R,O,x=!1){const I=!!R.state.isCollapsed,L={type:"row",id:(0,h.Jb)(R),title:R.state.title,gridPos:{x:R.state.x??0,y:R.state.y??0,w:R.state.width??24,h:R.state.height??1},collapsed:I,panels:[]};if(R.state.$behaviors?.length){const N=R.state.$behaviors[0];N instanceof E.a&&(L.repeat=N.state.variableName)}if(x&&R.state.$variables){const F=R.state.$variables.state.variables.reduce((U,j)=>({...U,[j.state.name]:{text:j.state.text,value:j.state.value}}),{});L.scopedVars=F}O.push(L);let P=[];x?R.state.children.forEach(N=>{N instanceof d.o?P=P.concat(D(N,!I)):P.push(b(N,!I))}):P=R.state.children.map(N=>b(N)),R.state.isCollapsed?L.panels=P:O.push(...P)}function T(R,O,x,I){let L={...x,title:R,time:{from:O.from.toISOString(),to:O.to.toISOString()},links:[]};if(I){const P=x.panels?.find(N=>N.id===(0,h.Jb)(I));P&&(P.gridPos={w:24,x:0,y:0,h:20},L={...L,panels:[P]})}if(L.panels?.forEach(P=>{"links"in P&&(P.links=[])}),L.annotations){const N=(L.annotations.list?.filter(F=>F.enable)||[]).map(F=>({name:F.name,enable:F.enable,iconColor:F.iconColor,type:F.type,builtIn:F.builtIn,hide:F.hide,snapshotData:[]}));L.annotations.list=N}return L.templating&&L.templating.list?.forEach(P=>{"query"in P&&(P.query=""),"options"in P&&(P.options=P.current&&!(0,n.Q)(P.current)?[P.current]:[]),"refresh"in P&&(P.refresh=r.Bd.never)}),L}},7572:(G,A,e)=>{"use strict";e.d(A,{V:()=>Le});var n=e(85960),a=e(90857),o=e(57474),r=e(87501),i=e(7288),g=e(10305),u=e(49683),l=e(95329),m=e(80268),c=e(39972),d=e(78344),f=e.n(d),E=e(81445),v=e(53565),h=e(74042),p=e(20519),s=e(5999),y=e(29165),C=e(62577),b=e(55855),S=e(26733),D=e(94849),M=e(27008),T=e(13150);const R=(0,l.t)("share-modal.export.share-externally-label","Export for sharing externally");class O extends o.wx{constructor($e){super({isSharingExternally:!1,isViewingJSON:!1,...$e}),this.tabId=D.Ax.export,this._exporter=new S.E,this.onShareExternallyChange=()=>{this.setState({isSharingExternally:!this.state.isSharingExternally})},this.onViewJSON=()=>{this.setState({isViewingJSON:!this.state.isViewingJSON})}}getTabLabel(){return(0,l.t)("share-modal.tab-title.export","Export")}getClipboardText(){}async getExportableDashboardJson(){const{dashboardRef:$e,isSharingExternally:et}=this.state,tt=(0,T.EU)($e.resolve());return et?await this._exporter.makeExportable(new M.f(tt)):tt}async onSaveAsFile(){const $e=await this.getExportableDashboardJson(),et=JSON.stringify($e,null,2),{isSharingExternally:tt}=this.state,it=new Blob([et],{type:"application/json;charset=utf-8"}),vt=new Date().getTime();let yt="dashboard";"title"in $e&&$e.title&&(yt=$e.title),f()(it,`${yt}-${vt}.json`),m.a.exportDownloadJsonClicked({externally:tt})}}O.Component=x;function x({model:Fe}){const{isSharingExternally:$e,isViewingJSON:et,modalRef:tt}=Fe.useState(),it=(0,E.Z)(async()=>{if(et){const vt=await Fe.getExportableDashboardJson();return JSON.stringify(vt,null,2)}return""},[et]);return n.createElement(n.Fragment,null,!et&&n.createElement(n.Fragment,null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(l.cC,{i18nKey:"share-modal.export.info-text"},"Export this dashboard.")),n.createElement(h.wc,{spacing:"md"},n.createElement(p.g,{label:R},n.createElement(s.r,{id:"share-externally-toggle",value:$e,onChange:Fe.onShareExternallyChange}))),n.createElement(i.u.ButtonRow,null,n.createElement(y.zx,{variant:"secondary",onClick:()=>{tt?.resolve().onDismiss()},fill:"outline"},n.createElement(l.cC,{i18nKey:"share-modal.export.cancel-button"},"Cancel")),n.createElement(y.zx,{variant:"secondary",icon:"brackets-curly",onClick:Fe.onViewJSON},n.createElement(l.cC,{i18nKey:"share-modal.export.view-button"},"View JSON")),n.createElement(y.zx,{variant:"primary",icon:"save",onClick:()=>Fe.onSaveAsFile()},n.createElement(l.cC,{i18nKey:"share-modal.export.save-button"},"Save to file")))),et&&n.createElement(n.Fragment,null,n.createElement(v.Z,{disableHeight:!0},({width:vt})=>it.value?n.createElement(C.p,{value:it.value??"",language:"json",showMiniMap:!1,height:"500px",width:vt}):it.loading?n.createElement("div",null,"Loading..."):null),n.createElement(i.u.ButtonRow,null,n.createElement(y.zx,{variant:"secondary",fill:"outline",onClick:Fe.onViewJSON,icon:"arrow-left"},n.createElement(l.cC,{i18nKey:"share-modal.export.back-button"},"Back to export config")),n.createElement(b.m,{variant:"secondary",icon:"copy",disabled:it.loading,getText:()=>it.value??""},n.createElement(l.cC,{i18nKey:"share-modal.view-json.copy-button"},"Copy to Clipboard")),n.createElement(y.zx,{variant:"primary",icon:"save",disabled:it.loading,onClick:()=>Fe.onSaveAsFile()},n.createElement(l.cC,{i18nKey:"share-modal.export.save-button"},"Save to file")))))}var I=e(87619),L=e(31326);class P extends o.wx{constructor(){super(...arguments),this.tabId=D.Ax.libraryPanel}getTabLabel(){return(0,l.t)("share-modal.tab-title.library-panel","Library panel")}}P.Component=N;function N({model:Fe}){const{panelRef:$e,dashboardRef:et,modalRef:tt}=Fe.useState();if(!$e)return null;const it=$e.resolve();if(it.parent instanceof o.bO||it.parent instanceof L.o){const vt=et.resolve(),yt=(0,T.vi)(it.parent),Wt=new M.r(yt),ut=(0,T.EU)(vt),pt=new M.f(ut);return n.createElement(I.e,{initialFolderUid:vt.state.meta.folderUid,dashboard:pt,panel:Wt,onDismiss:()=>{tt?.resolve().onDismiss()}})}return null}var F=e(85745),U=e(92369),j=e(91),V=e(51637),_=e(24956),H=e(97666),z=e(49199),K=e(28878),Y=e(79113),k=e(75530);class q extends o.wx{constructor($e){super({...$e,useLockedTime:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""}),this.tabId=D.Ax.link,this.onToggleLockedTime=()=>{this.setState({useLockedTime:!this.state.useLockedTime}),this.buildUrl()},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl}),this.buildUrl()},this.onThemeChange=et=>{this.setState({selectedTheme:et}),this.buildUrl()},this.getShareUrl=()=>this.state.shareUrl,this.addActivationHandler(()=>{this.buildUrl()})}async buildUrl(){const{panelRef:$e,dashboardRef:et,useLockedTime:tt,useShortUrl:it,selectedTheme:vt}=this.state,yt=et.resolve(),Wt=$e?.resolve(),ut=j.E1.getLocation(),pt=o.ep.getTimeRange(Wt??yt),we={};Wt&&(we.viewPanel=Wt.state.key),tt&&(we.from=pt.state.value.from.toISOString(),we.to=pt.state.value.to.toISOString()),vt!=="current"&&(we.theme=vt);let lt=(0,k.$9)({uid:yt.state.uid,currentQueryParams:ut.search,updateQuery:we,absolute:!0,useExperimentalURL:!!(a.config.featureToggles.dashboardSceneForViewers&&yt.state.meta.canEdit)});it&&(lt=await(0,K.D)(lt));const Bt=(0,k.$9)({uid:yt.state.uid,currentQueryParams:ut.search,updateQuery:we,absolute:!0,soloRoute:!0,render:!0,timeZone:te(pt.getTimeZone())});this.setState({shareUrl:lt,imageUrl:Bt})}getTabLabel(){return(0,l.t)("share-modal.tab-title.link","Link")}onCopy(){m.a.shareLinkCopied({currentTimeRange:this.state.useLockedTime,theme:this.state.selectedTheme,shortenURL:this.state.useShortUrl})}}q.Component=X;function X({model:Fe}){const $e=Fe.useState(),{panelRef:et,dashboardRef:tt}=$e,it=tt.resolve(),vt=et?.resolve(),Wt=o.ep.getTimeRange(vt??it).state.to==="now",{useLockedTime:ut,useShortUrl:pt,selectedTheme:we,shareUrl:lt,imageUrl:Bt}=$e,Kt=U.wl.pages.SharePanelModal,It=!!it.state.uid,Zt=(0,l.t)("share-modal.link.time-range-label","Lock time range"),yn=(0,l.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),xn=(0,l.t)("share-modal.link.shorten-url","Shorten URL"),An=(0,l.t)("share-modal.link.link-url","Link URL");return n.createElement(n.Fragment,null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(l.cC,{i18nKey:"share-modal.link.info-text"},"Create a direct link to this dashboard or panel, customized with the options below.")),n.createElement(V.C,null,n.createElement(p.g,{label:Zt,description:Wt?yn:""},n.createElement(s.r,{id:"share-current-time-range",value:ut,onChange:Fe.onToggleLockedTime})),n.createElement(Y.J,{selectedTheme:we,onChange:Fe.onThemeChange}),n.createElement(p.g,{label:xn},n.createElement(s.r,{id:"share-shorten-url",value:pt,onChange:Fe.onUrlShorten})),n.createElement(p.g,{label:An},n.createElement(_.I,{id:"link-url-input",value:lt,readOnly:!0,addonAfter:n.createElement(b.m,{icon:"copy",variant:"primary",getText:Fe.getShareUrl,onClipboardCopy:Fe.onCopy},n.createElement(l.cC,{i18nKey:"share-modal.link.copy-link-button"},"Copy"))}))),vt&&a.config.rendererAvailable&&n.createElement(n.Fragment,null,It&&n.createElement("div",{className:"gf-form"},n.createElement("a",{href:Bt,target:"_blank",rel:"noreferrer","aria-label":Kt.linkToRenderedImage},n.createElement(H.J,{name:"camera"}),"\xA0",n.createElement(l.cC,{i18nKey:"share-modal.link.rendered-image"},"Direct link rendered image"))),!It&&n.createElement(z.b,{severity:"info",title:(0,l.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0},n.createElement(l.cC,{i18nKey:"share-modal.link.save-dashboard"},"To render a panel image, you must save the dashboard first."))),vt&&!a.config.rendererAvailable&&n.createElement(z.b,{severity:"info",title:(0,l.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0},n.createElement(l.cC,{i18nKey:"share-modal.link.render-instructions"},"To render a panel image, you must install the",n.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana image renderer plugin"),". Please contact your Grafana administrator to install the plugin.")))}function te(Fe){const $e="UTC"+encodeURIComponent((0,F.CQ)().format("Z"));if(Fe==="utc")return"UTC";if(Fe==="browser"){if(!window.Intl)return $e;const tt=window.Intl.DateTimeFormat().resolvedOptions();return tt.timeZone?tt.timeZone:$e}return Fe}var se=e(44639),de=e(91338);class re extends o.wx{constructor($e){super($e),this.tabId=D.Ax.embed}getTabLabel(){return(0,l.t)("share-modal.tab-title.panel-embed","Embed")}}re.Component=fe;function fe({model:Fe}){const{panelRef:$e,dashboardRef:et}=Fe.useState(),tt=$e.resolve(),it=et.resolve(),{uid:vt}=it.useState(),yt=(0,c.Jb)(tt),Wt=o.ep.getTimeRange(tt),ut=Wt instanceof de.r?Wt.state.timeFrom:void 0;return n.createElement(se.q,{panel:{id:yt,timeFrom:ut},range:Wt.state.value,dashboard:{uid:vt??"",time:Wt.state.value},buildIframe:ie})}function ie(Fe,$e,et,tt,it){const vt=(0,D.U8)({useCurrentTimeRange:Fe,selectedTheme:et,panel:tt,range:it}),yt=vt.get("editPanel")??vt.get("viewPanel")??"";return vt.set("panelId",yt),vt.delete("editPanel"),vt.delete("viewPanel"),`<iframe src="${(0,k.$9)({absolute:!0,soloRoute:!0,uid:$e,currentQueryParams:vt.toString()})}" width="450" height="200" frameborder="0"></iframe>`}var oe=e(31622),ue=e(85445),me=e(5106),ge=e(83676);const Ue="/api/snapshots",De=()=>[{label:(0,l.t)("share-modal.snapshot.expire-never","Never"),value:0},{label:(0,l.t)("share-modal.snapshot.expire-hour","1 Hour"),value:60*60},{label:(0,l.t)("share-modal.snapshot.expire-day","1 Day"),value:60*60*24},{label:(0,l.t)("share-modal.snapshot.expire-week","7 Days"),value:60*60*24*7}];class Pe extends o.wx{constructor($e){super({...$e,snapshotName:$e.dashboardRef.resolve().state.title,selectedExpireOption:De()[0]}),this.tabId=D.Ax.snapshot,this.onSnasphotNameChange=et=>{this.setState({snapshotName:et.trim()})},this.onExpireChange=et=>{this.setState({selectedExpireOption:De().find(tt=>tt.value===et)})},this.onSnapshotCreate=async(et=!1)=>{const{selectedExpireOption:tt}=this.state,it=this.prepareSnapshot(),vt={dashboard:it,name:it.title,expires:tt?.value,external:et};try{return await(0,ue.i)().post(Ue,vt)}finally{et?m.a.publishSnapshotClicked({expires:vt.expires}):m.a.publishSnapshotLocalClicked({expires:vt.expires})}},this.addActivationHandler(()=>{this._onActivate()})}_onActivate(){(0,ge.G)().getSharingOptions().then($e=>{this.isActive&&this.setState({snapshotSharingOptions:$e})})}getTabLabel(){return(0,l.t)("share-modal.tab-title.snapshot","Snapshot")}prepareSnapshot(){const $e=o.ep.getTimeRange(this),{dashboardRef:et,panelRef:tt}=this.state,it=(0,T.EU)(et.resolve(),!0);return(0,T.h2)(this.state.snapshotName||"",$e.state.value,it,tt?.resolve())}}Pe.Component=ye;function ye({model:Fe}){const{snapshotName:$e,selectedExpireOption:et,modalRef:tt,snapshotSharingOptions:it}=Fe.useState(),[vt,yt]=(0,oe.default)(async(pt=!1)=>Fe.onSnapshotCreate(pt)),[Wt,ut]=(0,oe.default)(async pt=>await(0,ue.i)().get(pt));return Wt.value?n.createElement(l.cC,{i18nKey:"share-modal.snapshot.deleted-message"},"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches."):n.createElement(n.Fragment,null,!vt.value&&n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(l.cC,{i18nKey:"share-modal.snapshot.info-text-1"},"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard.")),n.createElement("p",{className:"share-modal-info-text"},n.createElement(l.cC,{i18nKey:"share-modal.snapshot.info-text-2"},"Keep in mind, your snapshot ",n.createElement("em",null,"can be viewed by anyone")," that has the link and can access the URL. Share wisely."))),n.createElement(p.g,{label:(0,l.t)("share-modal.snapshot.name","Snapshot name")},n.createElement(_.I,{id:"snapshot-name-input",width:30,defaultValue:$e,onBlur:pt=>Fe.onSnasphotNameChange(pt.target.value)})),n.createElement(p.g,{label:(0,l.t)("share-modal.snapshot.expire","Expire")},n.createElement(me.S,{id:"expire-select-input",options:De(),value:et?.value,onChange:Fe.onExpireChange})),n.createElement(i.u.ButtonRow,null,n.createElement(y.zx,{variant:"secondary",onClick:()=>{tt?.resolve().onDismiss()},fill:"outline"},n.createElement(l.cC,{i18nKey:"share-modal.snapshot.cancel-button"},"Cancel")),it?.externalEnabled&&n.createElement(y.zx,{variant:"secondary",disabled:vt.loading,onClick:()=>yt(!0)},it?.externalSnapshotName),n.createElement(y.zx,{variant:"primary",disabled:vt.loading,onClick:()=>yt()},n.createElement(l.cC,{i18nKey:"share-modal.snapshot.local-button"},"Local Snapshot")))),vt.value&&n.createElement(n.Fragment,null,n.createElement(p.g,{label:(0,l.t)("share-modal.snapshot.url-label","Snapshot URL")},n.createElement(_.I,{id:"snapshot-url-input",value:vt.value.url,readOnly:!0,addonAfter:n.createElement(b.m,{icon:"copy",variant:"primary",getText:()=>vt.value.url},n.createElement(l.cC,{i18nKey:"share-modal.snapshot.copy-link-button"},"Copy"))})),n.createElement("div",{className:"pull-right",style:{padding:"5px"}},n.createElement(l.cC,{i18nKey:"share-modal.snapshot.mistake-message"},"Did you make a mistake? "),"\xA0",n.createElement(y.zx,{fill:"outline",size:"md",variant:"destructive",onClick:()=>{ut(vt.value.deleteUrl)}},n.createElement(l.cC,{i18nKey:"share-modal.snapshot.delete-button"},"Delete snapshot.")))))}var Te=e(37287),nt=e(63390),ct=e(28817),he=e(66681),xe=e(47257),Me=e(60563),He=e(95162),Ve=e(77980);class Oe extends o.wx{constructor($e){super({confirmVariant:"destructive",dismissText:"Cancel",dismissVariant:"secondary",icon:"exclamation-triangle",confirmButtonVariant:"destructive",...$e})}onDismiss(){}}Oe.Component=Ne;function Ne({model:Fe}){const $e=Fe.useState();return n.createElement(Ve.s,{...$e})}var _e=e(32063),qe=e(72686),rt=e(65512),mt=e(81110);const Je=async Fe=>{let $e=new Set;for(const et of Fe)qe.W.has(et)&&await(0,rt.ak)().get(et)instanceof _e.CK||$e.add(et);return Array.from($e)};function Ae(Fe){const $e=new Set,et=Fe.state.body;if(!(et instanceof o.Qh))return[];for(const tt of et.state.children){if(tt instanceof o.bO){const it=Xe(tt);for(const vt of it)$e.add(vt)}if(tt instanceof o.I_){const it=Ke(tt);for(const vt of it)$e.add(vt)}}return Array.from($e).sort()}function Ke(Fe){return new Set(Fe.state.children.map(et=>Xe(et)).flat())}function Xe(Fe){let $e;if(Fe instanceof o.bO)if(Fe.state.body instanceof mt.X)$e=Fe.state.body.state.panel;else if(Fe.state.body instanceof o.Z)$e=Fe.state.body;else throw new Error("SceneGridItem body expected to be VizPanel");else Fe instanceof L.o&&($e=Fe.state.source);if(!$e)throw new Error("Unsupported grid item type");const et=$e.state.$data,tt=new Set;if(et instanceof o.uq)for(const it of et.state.queries)tt.add(it.datasource?.type??"");if(et instanceof o.bM){const it=et.state.$data;if(it instanceof o.uq)for(const vt of it.state.queries)tt.add(vt.datasource?.type??"")}return Array.from(tt)}function ne(Fe){const{value:$e}=(0,E.Z)(async()=>{const et=Ae(Fe);return Je(et)},[]);return $e}function Z({model:Fe,publicDashboard:$e,isGetLoading:et}){const tt=(0,xe.wW)(ee),it=u.Vt.hasPermission(He.AccessControlAction.DashboardsPublicWrite),{dashboardRef:vt}=Fe.useState(),yt=vt.resolve(),{isDirty:Wt}=yt.useState(),[ut]=(0,Te.bS)(),pt=(yt.state.$variables?.state.variables.length??0)>0,we=ne(yt),Bt=o.ep.getTimeRange(Fe).useState();return n.createElement(Me.r,{dashboard:yt,publicDashboard:$e,unsupportedDatasources:we,onRevoke:()=>{yt.showModal(new Oe({isOpen:!0,title:"Revoke public URL",icon:"trash-alt",confirmText:"Revoke public URL",body:n.createElement("p",{className:tt.description},"Are you sure you want to revoke this URL? The dashboard will no longer be public."),onDismiss:()=>{yt.showModal(new Le({dashboardRef:vt,activeTab:"Public Dashboard"}))},onConfirm:()=>{ut({dashboard:yt,dashboardUid:yt.state.uid,uid:$e.uid}),yt.closeModal()}}))},timeRange:Bt.value,showSaveChangesAlert:it&&Wt,hasTemplateVariables:pt})}const ee=Fe=>({description:(0,he.css)({fontSize:Fe.typography.body.fontSize})});var ce=e(28503);function be({model:Fe}){const{dashboardRef:$e}=Fe.useState(),et=$e.resolve(),tt=ne(et),it=(et.state.$variables?.state.variables.length??0)>0;return n.createElement(ce.R,{dashboard:et,unsupportedDatasources:tt,unsupportedTemplateVariables:it})}class Ee extends o.wx{constructor(){super(...arguments),this.tabId=D.Ax.publicDashboard}getTabLabel(){return(0,l.t)("share-modal.tab-title.public-dashboard","Public Dashboard")}}Ee.Component=Be;function Be({model:Fe}){const{data:$e,isLoading:et}=(0,Te.Ym)(Fe.state.dashboardRef.resolve().state.uid);return n.createElement(n.Fragment,null,et?n.createElement(nt.a,null):(0,ct.Gt)($e)?n.createElement(Z,{model:Fe,publicDashboard:$e,isGetLoading:et}):n.createElement(be,{model:Fe}))}class Le extends o.wx{constructor($e){super({activeTab:"link",...$e}),this.onDismiss=()=>{(0,c.Pm)(this).closeModal()},this.onChangeTab=et=>{m.a.sharingTabChanged({item:et.value}),this.setState({activeTab:et.value})},this.addActivationHandler(()=>this.buildTabs())}buildTabs(){const{dashboardRef:$e,panelRef:et}=this.state,tt=[new q({dashboardRef:$e,panelRef:et,modalRef:this.getRef()})];et||tt.push(new O({dashboardRef:$e,modalRef:this.getRef()})),u.Vt.isSignedIn&&a.config.snapshotEnabled&&tt.push(new Pe({panelRef:et,dashboardRef:$e,modalRef:this.getRef()})),et&&(tt.push(new re({panelRef:et,dashboardRef:$e})),et.resolve()instanceof o.Z&&tt.push(new P({panelRef:et,dashboardRef:$e,modalRef:this.getRef()}))),a.config.featureToggles.publicDashboards&&tt.push(new Ee({dashboardRef:$e,modalRef:this.getRef()})),this.setState({tabs:tt})}}Le.Component=ze;function ze({model:Fe}){const{panelRef:$e,tabs:et,activeTab:tt}=Fe.useState(),it=$e?(0,l.t)("share-modal.panel.title","Share Panel"):(0,l.t)("share-modal.dashboard.title","Share");if(!et)return;const vt=et?.map(ut=>({label:ut.getTabLabel(),value:ut.tabId})),yt=n.createElement(r.H,{title:it,icon:"share-alt",tabs:vt,activeTab:tt,onChangeTab:Fe.onChangeTab}),Wt=et.find(ut=>ut.tabId===tt);return n.createElement(i.u,{isOpen:!0,title:yt,onDismiss:Fe.onDismiss},n.createElement(g.I,null,Wt&&n.createElement(Wt.Component,{model:Wt})))}},99386:(G,A,e)=>{"use strict";e.d(A,{R:()=>i});var n=e(90857),a=e(57474),o=e(61815),r=e(91170);function i(g){if(!g.targets?.length||n.config.panels[g.type]?.skipDataQuery)return;let u;return g.datasource?.uid===o.oe?u=new r.K({query:g.targets[0]}):u=new a.uq({datasource:g.datasource??void 0,queries:g.targets,maxDataPoints:g.maxDataPoints??void 0,maxDataPointsFromWidth:!0,dataLayerFilter:{panelId:g.id}}),g.transformations?.length&&(u=new a.bM({$data:u,transformations:g.transformations})),u}},80268:(G,A,e)=>{"use strict";e.d(A,{a:()=>a});var n=e(43183);const a={dashboardInitialized:r=>{o("init_dashboard_completed",{...r})},panelMenuShown:r=>{o("panelheader_menu",{...r,item:"menu"})},panelMenuItemClicked:r=>{o("panelheader_menu",{item:r})},panelMenuInspectClicked(r){o("panelheader_menu",{item:"inspect",tab:r})},panelLinkClicked:r=>{o("panelheader_datalink_clicked",r)},panelStatusMessageClicked:r=>{o("panelheader_statusmessage_clicked",r)},panelCancelQueryClicked:r=>{o("panelheader_cancelquery_clicked",r)},panelDescriptionShown:r=>{o("panelheader_description_displayed",r)},sharingTabChanged:r=>{o("sharing_category_clicked",r)},shareLinkCopied:r=>{o("sharing_link_copy_clicked",r)},embedSnippetCopy:r=>{o("sharing_embed_copy_clicked",r)},publishSnapshotClicked:r=>{o("sharing_snapshot_publish_clicked",r)},publishSnapshotLocalClicked:r=>{o("sharing_snapshot_local_clicked",r)},exportDownloadJsonClicked:r=>{o("sharing_export_download_json_clicked",r)},exportCopyJsonClicked:r=>{o("sharing_export_copy_json_clicked",r)},exportSaveJsonClicked:r=>{o("sharing_export_save_json_clicked",r)},exportViewJsonClicked:r=>{o("sharing_export_view_json_clicked",r)},generatePublicDashboardUrlClicked:r=>{o("sharing_public_generate_url_clicked",r)},revokePublicDashboardEmailClicked:r=>{o("sharing_public_email_revoke_clicked",r)},resendPublicDashboardEmailClicked:r=>{o("sharing_public_email_resend_clicked",r)},publicDashboardEmailInviteClicked:r=>{o("sharing_public_email_invite_clicked",r)},publicDashboardShareTypeChange:r=>{o("sharing_public_can_view_clicked",r)},publicDashboardTimeSelectionChanged:r=>{o("sharing_public_time_picker_clicked",r)},publicDashboardAnnotationsSelectionChanged:r=>{o("sharing_public_annotations_clicked",r)},publicDashboardUrlCopied:r=>{o("sharing_public_copy_url_clicked",r)},publicDashboardPauseSharingClicked:r=>{o("sharing_public_pause_clicked",r)},revokePublicDashboardClicked:r=>{o("sharing_public_revoke_clicked",r)},emptyDashboardButtonClicked:r=>{o("emptydashboard_clicked",r)},toolbarAddButtonClicked:r=>{o("toolbar_add_clicked",r)},toolbarFavoritesClick:()=>{o("toolbar_actions_clicked",{item:"favorites"})},toolbarSettingsClick:()=>{o("toolbar_actions_clicked",{item:"settings"})},toolbarRefreshClick:()=>{o("toolbar_actions_clicked",{item:"refresh"})},toolbarTimePickerClick:()=>{o("toolbar_actions_clicked",{item:"time_picker"})},toolbarZoomClick:()=>{o("toolbar_actions_clicked",{item:"zoom_out_time_range"})},toolbarShareClick:()=>{o("toolbar_actions_clicked",{item:"share"})},toolbarSaveClick:()=>{o("toolbar_actions_clicked",{item:"save"})},toolbarAddClick:()=>{o("toolbar_actions_clicked",{item:"add"})}},o=(r,i)=>{i?(0,n.ff)(`dashboards_${r}`,i):(0,n.ff)(`dashboards_${r}`)}},75530:(G,A,e)=>{"use strict";e.d(A,{$9:()=>m,el:()=>f,qx:()=>d,uO:()=>c});var n=e(173),a=e(12693),o=e(91),r=e(90857),i=e(57474),g=e(49683),u=e(18815),l=e(39972);function m(E){let v=E.useExperimentalURL?`/scenes/dashboard/${E.uid}${E.subPath??""}`:`/d/${E.uid}${E.subPath??""}`;E.soloRoute&&(v=`/d-solo/${E.uid}${E.subPath??""}`),E.render&&(v="/render"+v,E.updateQuery={...E.updateQuery,width:1e3,height:500,tz:E.timeZone});const h=E.currentQueryParams?(0,o.Ox)(E.currentQueryParams):{};if(E.updateQuery)for(const s of Object.keys(E.updateQuery))E.updateQuery[s]===null||E.updateQuery[s]===void 0?delete h[s]:h[s]=E.updateQuery[s];const p=n.Cj.renderUrl(v,h);return E.absolute?r.config.appUrl+p.slice(1):p}function c(E){return a.u.getUrlForPartial(o.E1.getLocation(),{viewPanel:E.state.key})}function d(E,v){return a.u.getUrlForPartial(o.E1.getLocation(),{inspect:E.state.key,inspectTab:v})}function f(E){const v=E.getPlugin(),h=(0,l.R)(E);if(!g.Vt.hasAccessToExplore()||v?.meta.skipDataQuery||!h)return Promise.resolve(void 0);const p=i.ep.getTimeRange(E);return(0,u.H6)({queries:h.state.queries,dsRef:h.state.datasource,timeRange:p.state.value,scopedVars:{__sceneObject:{value:E}},adhocFilters:h.state.data?.request?.filters})}},39972:(G,A,e)=>{"use strict";e.d(A,{CR:()=>c,Jb:()=>g,Pm:()=>h,Qx:()=>p,R:()=>v,RB:()=>s,Rv:()=>i,U:()=>f,_B:()=>d,_n:()=>E,ds:()=>u,pi:()=>m});var n=e(57474),a=e(86039),o=e(47935),r=e(14798);function i(y){return`panel-${y}`}function g(y){return parseInt(y.state.key.replace("panel-",""),10)}function u(y,C){if(!C)return null;const b=l(y,C);if(b)return b;const S=parseInt(C,10);return isNaN(S)?null:l(y,i(S))}function l(y,C){if(!C)return null;const b=n.ep.findObject(y,S=>S.state.key===C);if(b){if(b instanceof n.Z)return b;throw new Error(`Found panel with key ${C} but it was not a VizPanel`)}return null}function m(y,C){y.forEachChild(b=>{b.isActive&&(b.forceRender(),m(b,C))})}function c(y){const{value:C,text:b,options:S}=y.state;return y.hasAllValue()?{values:S.map(D=>D.value),texts:S.map(D=>D.label)}:{values:Array.isArray(C)?C:[C],texts:Array.isArray(b)?b:[b]}}function d(y){const C=y.query.match(/(["'])(.*?)\1|\w+/g);if(!C)return a.T6.query?.split(",")??[];const b=new Set,S=C.reduce((D,M)=>{const T=M.replace(/["']+/g,"");return T.startsWith("$__auto_interval_")||D.add(T),D},b);return Array.from(S)}function f(y){return Array.isArray(y)?y.join(","):""}function E(y,C){const b=Array.isArray(y.current.value)?y.current.value[0]:y.current.value;return b.startsWith("$__auto_interval_")?"$__auto":C.includes(b)?b:C[0]}function v(y){if(y){if(y.state.$data instanceof n.uq)return y.state.$data;if(y.state.$data instanceof n.bM)return v(y.state.$data)}}function h(y){const C=y.getRoot();if(C instanceof o.Y)return C.state.dashboardRef.resolve();if(C instanceof r.WI)return C;throw new Error("SceneObject root is not a DashboardScene")}function p(y){return y instanceof n.Z?y:y.parent?p(y.parent):null}function s(y){return y.includes("clone")}},37287:(G,A,e)=>{"use strict";e.d(A,{Bl:()=>b,FJ:()=>p,Mi:()=>E,RS:()=>y,Rh:()=>c,WJ:()=>h,Ym:()=>d,bS:()=>v,jI:()=>C,r5:()=>s,zZ:()=>f});var n=e(15995),a=e(81838),o=e(85445),r=e(88492),i=e(93991),g=e(14798);function u(S){return typeof S=="object"&&S!=null&&"error"in S}const l=({baseUrl:S})=>async D=>{try{const{data:M,...T}=await(0,a.n)((0,o.i)().fetch({...D,url:S+D.url,showErrorAlert:D.showErrorAlert}));return{data:M,meta:T}}catch(M){return D.manageError?D.manageError(M):{error:M}}},m=S=>({error:(0,o.kW)(S)&&S.status!==404?S:null}),c=(0,n.LC)({reducerPath:"publicDashboardApi",baseQuery:l({baseUrl:"/api"}),tagTypes:["PublicDashboard","AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"],refetchOnMountOrArgChange:!0,endpoints:S=>({getPublicDashboard:S.query({query:D=>({url:`/dashboards/uid/${D}/public-dashboards`,manageError:m,showErrorAlert:!1}),async onQueryStarted(D,{dispatch:M,queryFulfilled:T}){try{await T}catch(R){u(R)&&(0,o.kW)(R.error)&&M((0,r.$l)((0,i.t_)(R.error.data.message)))}},providesTags:(D,M,T)=>[{type:"PublicDashboard",id:T}]}),createPublicDashboard:S.mutation({query:D=>({url:`/dashboards/uid/${D.dashboard instanceof g.WI?D.dashboard.state.uid:D.dashboard.uid}/public-dashboards`,method:"POST",data:D.payload}),async onQueryStarted({dashboard:D,payload:M},{dispatch:T,queryFulfilled:R}){const{data:O}=await R;T((0,r.$l)((0,i.AT)("Dashboard is public!"))),D instanceof g.WI?D.setState({meta:{...D.state.meta,publicDashboardEnabled:O.isEnabled,publicDashboardUid:O.uid}}):D.updateMeta({publicDashboardUid:O.uid,publicDashboardEnabled:O.isEnabled})},invalidatesTags:(D,M,{dashboard:T})=>[{type:"PublicDashboard",id:T instanceof g.WI?T.state.uid:T.uid}]}),updatePublicDashboard:S.mutation({query:({payload:D,dashboard:M})=>({url:`/dashboards/uid/${M instanceof g.WI?M.state.uid:M.uid}/public-dashboards/${D.uid}`,method:"PATCH",data:D}),async onQueryStarted({dashboard:D},{dispatch:M,queryFulfilled:T}){const{data:R}=await T;M((0,r.$l)((0,i.AT)("Public dashboard updated!"))),D instanceof g.WI?D.setState({meta:{...D.state.meta,publicDashboardEnabled:R.isEnabled,publicDashboardUid:R.uid}}):D.updateMeta?.({publicDashboardUid:R.uid,publicDashboardEnabled:R.isEnabled})},invalidatesTags:(D,M,{payload:T})=>[{type:"PublicDashboard",id:T.dashboardUid},"AuditTablePublicDashboard"]}),addRecipient:S.mutation({query:()=>({url:""})}),deleteRecipient:S.mutation({query:()=>({url:""})}),reshareAccessToRecipient:S.mutation({query:()=>({url:""})}),getActiveUsers:S.query({query:()=>({url:"/"}),providesTags:["UsersWithActiveSessions"]}),getActiveUserDashboards:S.query({query:()=>({url:""}),providesTags:(D,M,T)=>[{type:"ActiveUserDashboards",id:T}]}),listPublicDashboards:S.query({query:(D=1)=>({url:`/dashboards/public-dashboards?page=${D}&perpage=8`}),transformResponse:D=>({...D,totalPages:Math.ceil(D.totalCount/D.perPage)}),providesTags:["AuditTablePublicDashboard"]}),deletePublicDashboard:S.mutation({query:D=>({url:`/dashboards/uid/${D.dashboardUid}/public-dashboards/${D.uid}`,method:"DELETE"}),async onQueryStarted({dashboard:D,uid:M},{dispatch:T,queryFulfilled:R}){await R,T((0,r.$l)((0,i.AT)("Public dashboard deleted!"))),D instanceof g.WI?D.setState({meta:{...D.state.meta,publicDashboardUid:M,publicDashboardEnabled:!1}}):D?.updateMeta({publicDashboardUid:M,publicDashboardEnabled:!1})},invalidatesTags:(D,M,{dashboardUid:T})=>[{type:"PublicDashboard",id:T},"AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"]})})}),{useGetPublicDashboardQuery:d,useCreatePublicDashboardMutation:f,useUpdatePublicDashboardMutation:E,useDeletePublicDashboardMutation:v,useListPublicDashboardsQuery:h,useAddRecipientMutation:p,useDeleteRecipientMutation:s,useReshareAccessToRecipientMutation:y,useGetActiveUsersQuery:C,useGetActiveUserDashboardsQuery:b}=c},26733:(G,A,e)=>{"use strict";e.d(A,{E:()=>c});var n=e(56375),a=e(81502),o=e(67954),r=e(1706),i=e(12404),g=e(49950),u=e(43489),l=e(81990);function m(d){return!!(d.libraryPanel?.name&&d.libraryPanel?.uid)}class c{async makeExportable(f){f.cleanUpRepeats();const E=f.getSaveModelCloneOld();E.id=null,f.processRepeats();const v=[],h={},p={},s={},y=new Map;for(const D of E.getVariables())s[D.name]=D;const C=(D,M)=>{if(D.datasource===void 0){D.datasource=M;return}let T=D.datasource,R=null;const O=T?.uid;return O&&O.indexOf("$")===0&&(R=s[O.substring(1)],R&&R.current&&(T=R.current.value)),(0,a.F)().get(T).then(x=>{if(x.meta?.builtIn||(h["datasource"+x.meta?.id]={type:"datasource",id:x.meta.id,name:x.meta.name,version:x.meta.info.version||"1.0.0"},R))return;const I=D.libraryPanel,L=I?"-for-library-panel":"";let P="DS_"+x.name.replace(" ","_").toUpperCase()+L.toUpperCase();if(p[P]={name:P,label:x.name,description:"",type:"datasource",pluginId:x.meta?.id,pluginName:x.meta?.name,usage:p[P]?.usage},I){const N=p[P]?.usage?.libraryPanels||[];N.push({name:I.name,uid:I.uid}),p[P].usage={libraryPanels:N}}D.datasource={type:x.meta.id,uid:"${"+P+"}"}})},b=async D=>{if(D.type!=="row"){if(await C(D),D.targets)for(const T of D.targets)await C(T,D.datasource);const M=o.default.panels[D.type];M&&(h["panel"+M.id]={type:"panel",id:M.id,name:M.name,version:M.info.version})}},S=async D=>{if((0,i.V)(D)){const{name:M,uid:T}=D.libraryPanel;let R=D.libraryPanel.model;R||(R=(await(0,r.Mh)(T,!0)).model),await C(R);const{gridPos:O,id:x,...I}=R;y.has(T)||y.set(T,{name:M,uid:T,kind:g.V.Panel,model:I})}};try{for(const T of E.panels)if(await b(T),T.collapsed!==void 0&&T.collapsed===!0&&T.panels)for(const R of T.panels)await b(R);for(const T of E.getVariables())(0,u.Xh)(T)&&(await C(T),T.options=[],T.current={},T.refresh=T.refresh!==l.Bd.never?T.refresh:l.Bd.onDashboardLoad);for(const T of E.annotations.list)await C(T);h.grafana={type:"grafana",id:"grafana",name:"Grafana",version:o.default.buildInfo.version};for(const T of E.panels)if(await S(T),T.collapsed!==void 0&&T.collapsed===!0&&T.panels)for(const R of T.panels)await S(R);(0,n.each)(p,T=>{v.push(T)});for(const T of E.getVariables())if((0,u.VC)(T)){const R="VAR_"+T.name.replace(" ","_").toUpperCase();v.push({name:R,type:"constant",label:T.label||T.name,value:T.query,description:""}),T.query="${"+R+"}",T.current={value:T.query,text:T.query,selected:!1},T.options=[T.current]}const D=[...y.entries()].reduce((T,[R,O])=>(T[R]=O,T),{}),M=(0,n.defaults)({__inputs:v,__elements:D,__requires:(0,n.sortBy)(h,["id"])},E);for(let T=0;T<M.panels.length;T++){const R=M.panels[T];m(R)&&(M.panels[T]={gridPos:R.gridPos,id:R.id,libraryPanel:{uid:R.libraryPanel.uid,name:R.libraryPanel.name}})}return M}catch(D){return console.error("Export failed:",D),{error:D}}}}},10632:(G,A,e)=>{"use strict";e.d(A,{u:()=>i});var n=e(66681),a=e(85960),o=e(47257),r=e(75064);const i=({icon:u,iconType:l,iconSize:m,tooltip:c,onClick:d,children:f})=>{const E=(0,o.wW)(g);return a.createElement("div",{className:E.noBorderContainer},u&&a.createElement(r.h,{name:u,size:m,iconType:l,tooltip:c,tooltipPlacement:"bottom",onClick:d}),f)},g=u=>({noBorderContainer:(0,n.css)`
    padding: 0 ${u.spacing(.5)};
    display: flex;
  `})},7628:(G,A,e)=>{"use strict";e.d(A,{C:()=>d});var n=e(85960),a=e(13446),o=e(2384),r=e(15867),i=e(38483),g=e(49683),u=e(95329),l=e(41879),m=e(45864),c=e(14914);class d extends n.Component{constructor(){super(...arguments),this.onChangeRefreshInterval=E=>{(0,m.$t)().setAutoRefresh(E),this.forceUpdate()},this.onRefresh=()=>((0,m.$t)().refreshTimeModel(),Promise.resolve()),this.onMoveBack=()=>{g.h$.publish(new c.Qt({direction:c.Im.Left}))},this.onMoveForward=()=>{g.h$.publish(new c.Qt({direction:c.Im.Right}))},this.onChangeTimePicker=E=>{const{dashboard:v}=this.props,h=v.timepicker,p=h.nowDelay&&E.raw.to==="now",s=a.isMathString(E.raw.from)?E.raw.from:E.from,y=a.isMathString(E.raw.to)?E.raw.to:E.to,C={from:s,to:p?"now-"+h.nowDelay:y};(0,m.$t)().setTime(C)},this.onChangeTimeZone=E=>{this.props.dashboard.timezone=E,this.props.onChangeTimeZone(E),this.onRefresh()},this.onChangeFiscalYearStartMonth=E=>{this.props.dashboard.fiscalYearStartMonth=E,this.onRefresh()},this.onZoom=()=>{this.props.onToolbarZoomClick&&this.props.onToolbarZoomClick(),g.h$.publish(new c.p8({scale:2}))},this.onRefreshClick=()=>{this.props.onToolbarRefreshClick&&this.props.onToolbarRefreshClick(),this.onRefresh()}}componentDidMount(){this.sub=this.props.dashboard.events.subscribe(o.md,()=>this.forceUpdate())}componentWillUnmount(){this.sub?.unsubscribe()}render(){const{dashboard:E,isOnCanvas:v}=this.props,{refresh_intervals:h}=E.timepicker,p=(0,m.$t)().getValidIntervals(h||r.o5),s=(0,m.$t)().timeRange(),y=E.getTimezone(),C=E.fiscalYearStartMonth,b=E.panelInEdit?.isEditing;let S;return E.refresh===l.Wg&&(S=(0,m.$t)().getAutoRefreshInteval().interval),n.createElement(n.Fragment,null,n.createElement(i.a,{value:s,onChange:this.onChangeTimePicker,timeZone:y,fiscalYearStartMonth:C,onMoveBackward:this.onMoveBack,onMoveForward:this.onMoveForward,onZoom:this.onZoom,onChangeTimeZone:this.onChangeTimeZone,onChangeFiscalYearStartMonth:this.onChangeFiscalYearStartMonth,isOnCanvas:v,onToolbarTimePickerClick:this.props.onToolbarTimePickerClick}),n.createElement(r.dP,{onIntervalChanged:this.onChangeRefreshInterval,onRefresh:this.onRefreshClick,value:E.refresh,intervals:p,isOnCanvas:v,tooltip:(0,u.t)("dashboard.toolbar.refresh","Refresh dashboard"),noIntervalPicker:b,showAutoInterval:!0,text:S}))}}},52171:(G,A,e)=>{"use strict";e.d(A,{t:()=>Pe});var n=e(66681),a=e(85960),o=e(36752),r=e(30694),i=e(86734),g=e(92369),u=e(91),l=e(87173),m=e(77980),c=e(69977),d=e(82541),f=e(40235),E=e(93349),v=e(19424),h=e(37870),p=e(35304),s=e(67954),y=e(93991),C=e(49683),b=e(69671),S=e(95329),D=e(62293),M=e(47257),T=e(44839),R=e(29165),O=e(97666),x=e(90857),I=e(54635),L=e(64524),P=e(80268),N=e(95162),F=e(3273);const j=({dashboard:Te})=>{const nt=(0,a.useMemo)(()=>(0,L.uZ)(),[]),ct=(0,N.useDispatch)(),he=(0,N.useSelector)(xe=>xe.dashboard.initialDatasource);return a.createElement(I.v,null,a.createElement(I.v.Item,{key:"add-visualisation",testId:g.wl.pages.AddDashboard.itemButton("Add new visualization menu item"),label:(0,S.t)("dashboard.add-menu.visualization","Visualization"),onClick:()=>{const xe=(0,L.LU)(Te,he);P.a.toolbarAddButtonClicked({item:"add_visualization"}),u.E1.partial({editPanel:xe}),ct((0,F.Rd)(void 0))}}),x.config.featureToggles.vizAndWidgetSplit&&a.createElement(I.v.Item,{key:"add-widget",testId:g.wl.pages.AddDashboard.itemButton("Add new widget menu item"),label:(0,S.t)("dashboard.add-menu.widget","Widget"),onClick:()=>{P.a.toolbarAddButtonClicked({item:"add_widget"}),u.E1.partial({addWidget:!0})}}),a.createElement(I.v.Item,{key:"add-row",testId:g.wl.pages.AddDashboard.itemButton("Add new row menu item"),label:(0,S.t)("dashboard.add-menu.row","Row"),onClick:()=>{P.a.toolbarAddButtonClicked({item:"add_row"}),(0,L.L_)(Te)}}),a.createElement(I.v.Item,{key:"add-panel-lib",testId:g.wl.pages.AddDashboard.itemButton("Add new panel from panel library menu item"),label:(0,S.t)("dashboard.add-menu.import","Import from library"),onClick:()=>{P.a.toolbarAddButtonClicked({item:"import_from_library"}),(0,L.RB)(Te)}}),a.createElement(I.v.Item,{key:"add-panel-clipboard",testId:g.wl.pages.AddDashboard.itemButton("Add new panel from clipboard menu item"),label:(0,S.t)("dashboard.add-menu.paste-panel","Paste panel"),onClick:()=>{P.a.toolbarAddButtonClicked({item:"paste_panel"}),(0,L.Dh)(Te,nt)},disabled:!nt}))},_=({dashboard:Te,onToolbarAddMenuOpen:nt})=>{const ct=H((0,M.l4)()),[he,xe]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{he&&nt&&nt()},[he,nt]),a.createElement(T.L,{overlay:()=>a.createElement(j,{dashboard:Te}),placement:"bottom",offset:[0,6],onVisibleChange:xe},a.createElement(R.zx,{icon:"panel-add",size:"lg",fill:"text",className:(0,n.cx)(ct.button,ct.buttonIcon,ct.buttonText),"data-testid":g.wl.components.PageToolbar.itemButton("Add button")},a.createElement(S.cC,{i18nKey:"dashboard.toolbar.add"},"Add"),a.createElement(O.J,{name:he?"angle-up":"angle-down",size:"lg"})))};function H(Te){return{button:(0,n.css)({label:"add-panel-button",padding:Te.spacing(.5,.5,.5,.75),height:Te.spacing((Te.components.height.sm+Te.components.height.md)/2),borderRadius:Te.shape.radius.default}),buttonIcon:(0,n.css)({svg:{margin:0}}),buttonText:(0,n.css)({label:"add-panel-button-text",fontSize:Te.typography.body.fontSize,span:{marginLeft:Te.spacing(.67)}})}}var z=e(58434),K=e(93657),Y=e(71746),k=e(21644),q=e(14914),X=e(10632),te=e(7628),se=e(763),de=e(5312);const re=({dashboard:Te})=>{const[nt]=(0,se.K)(),{showModal:ct,hideModal:he}=(0,a.useContext)(E.kr);return(0,a.useEffect)(()=>(nt.shareView&&ct(de.ShareModal,{dashboard:Te,onDismiss:he,activeTab:String(nt.shareView)}),()=>{he()}),[ct,he,Te,nt.shareView]),a.createElement(X.u,{tooltip:(0,S.t)("dashboard.toolbar.share","Share dashboard"),icon:"share-alt",iconSize:"lg",onClick:()=>{P.a.toolbarShareClick(),ct(de.ShareModal,{dashboard:Te,onDismiss:he})}})},fe={setStarred:D.OQ,updateTimeZoneForSession:k.YT},ie=(0,o.connect)(null,fe),oe=g.wl.pages.Dashboard.DashNav,ue=[],me=[];function ge(Te){ue.push(Te)}function Ue(Te){me.push(Te)}const De=a.memo(Te=>{(0,r.TH)();const nt=(0,l.N)();(0,b.r)(Te.dashboard.events,q.hS);const ct=Te.dashboard.snapshot?.originalUrl??"",he=()=>{window.location.href=i.QX.sanitizeUrl(Te.dashboard.snapshot.originalUrl)},xe=(0,y.iG)(),Me=()=>{try{const Xe=new URL(i.QX.sanitizeUrl(ct),s.default.appUrl),ne=new URL(s.default.appUrl);Xe.host!==ne.host?C.h$.publish(new q.Dn({component:m.s,props:{title:"Proceed to external site?",modalClass:ye,body:a.createElement(a.Fragment,null,a.createElement("p",null,"This link connects to an external website at"," ",a.createElement("code",null,ct)),a.createElement("p",null,"Are you sure you'd like to proceed?")),confirmVariant:"primary",confirmText:"Proceed",onConfirm:he}})):he()}catch(Xe){xe.error("Invalid URL",Xe instanceof Error?Xe.message:void 0)}},He=()=>{P.a.toolbarFavoritesClick();const Xe=(0,K.h4)(),{dashboard:ne,setStarred:Z}=Te;Xe.starDashboard(ne.uid,!!ne.meta.isStarred).then(ee=>{Z({id:ne.uid,title:ne.title,url:ne.meta.url??"",isStarred:ee}),ne.meta.isStarred=ee,nt()})},Ve=()=>{P.a.toolbarSettingsClick(),u.E1.partial({editview:"settings"})},Oe=()=>{Y.r0.prev()},Ne=()=>{Y.r0.next()},_e=()=>{Y.r0.stop(),nt()},qe=(Xe,ne)=>{Xe.map((Z,ee)=>{const ce=Z.component,be=a.createElement(ce,{...Te,key:`button-custom-${ee}`});typeof Z.index=="number"?ne.splice(Z.index,0,be):ne.push(be)})},rt=()=>Y.r0.isPlaying,mt=()=>{const{dashboard:Xe,kioskMode:ne}=Te,{canStar:Z,canShare:ee,isStarred:ce}=Xe.meta,be=[];if(ne||rt())return[];if(Z){let Ee=ce?(0,S.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,S.t)("dashboard.toolbar.mark-favorite","Mark as favorite");be.push(a.createElement(X.u,{tooltip:Ee,icon:ce?"favorite":"star",iconType:ce?"mono":"default",iconSize:"lg",onClick:He,key:"button-star"}))}return ee&&be.push(a.createElement(re,{key:"button-share",dashboard:Xe})),Xe.meta.publicDashboardEnabled&&be.push(a.createElement(c.V,{key:"public-dashboard",name:"Public",colorIndex:5,"data-testid":oe.publicDashboardTag})),s.default.featureToggles.scenes&&!Xe.isSnapshot()&&be.push(a.createElement(X.u,{key:"button-scenes",tooltip:"View as Scene",icon:"apps",onClick:()=>{const Ee=u.E1.getLocation();u.E1.push(`/scenes/dashboard/${Xe.uid}${Ee.search}`)}})),qe(ue,be),be},Je=()=>a.createElement(d.h,{key:"playlist-buttons"},a.createElement(f.h,{tooltip:(0,S.t)("dashboard.toolbar.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:Oe,narrow:!0}),a.createElement(f.h,{onClick:_e},a.createElement(S.cC,{i18nKey:"dashboard.toolbar.playlist-stop"},"Stop playlist")),a.createElement(f.h,{tooltip:(0,S.t)("dashboard.toolbar.playlist-next","Go to next dashboard"),icon:"forward",onClick:Ne,narrow:!0})),Ae=()=>{const{dashboard:Xe,updateTimeZoneForSession:ne,hideTimePicker:Z}=Te;return Z?null:a.createElement(te.C,{dashboard:Xe,onChangeTimeZone:ne,onToolbarRefreshClick:P.a.toolbarRefreshClick,onToolbarZoomClick:P.a.toolbarZoomClick,onToolbarTimePickerClick:P.a.toolbarTimePickerClick,key:"time-controls"})},Ke=()=>{const{dashboard:Xe,onAddPanel:ne,isFullscreen:Z,kioskMode:ee}=Te,{canSave:ce,canEdit:be,showSettings:Ee}=Xe.meta,{snapshot:Be}=Xe,Le=Be&&Be.originalUrl,ze=[];return rt()?[Je(),Ae()]:ee===N.KioskMode.TV?[Ae()]:(be&&!Z&&(s.default.featureToggles.emptyDashboardPage?ze.push(a.createElement(_,{dashboard:Xe,onToolbarAddMenuOpen:P.a.toolbarAddClick,key:"panel-add-dropdown"})):ze.push(a.createElement(f.h,{tooltip:(0,S.t)("dashboard.toolbar.add-panel","Add panel"),icon:"panel-add",iconSize:"xl",onClick:ne,key:"button-panel-add"}))),ce&&!Z&&ze.push(a.createElement(E.JY,{key:"button-save"},({showModal:Fe,hideModal:$e})=>a.createElement(f.h,{tooltip:(0,S.t)("dashboard.toolbar.save","Save dashboard"),icon:"save",onClick:()=>{P.a.toolbarSaveClick(),Fe(z.d,{dashboard:Xe,onDismiss:$e})}}))),Le&&ze.push(a.createElement(f.h,{tooltip:(0,S.t)("dashboard.toolbar.open-original","Open original dashboard"),onClick:Me,icon:"link",key:"button-snapshot"})),Ee&&ze.push(a.createElement(f.h,{tooltip:(0,S.t)("dashboard.toolbar.settings","Dashboard settings"),icon:"cog",onClick:Ve,key:"button-settings"})),qe(me,ze),ze.push(Ae()),ze)};return a.createElement(h.A,{actions:a.createElement(a.Fragment,null,mt(),a.createElement(p.M,{leftActionsSeparator:!0}),a.createElement(v.R,{alignment:"right"},Ke()))})});De.displayName="DashNav";const Pe=ie(De),ye=(0,n.css)({width:"max-content",maxWidth:"80vw"})},89296:(G,A,e)=>{"use strict";e.d(A,{P:()=>s});var n=e(56375),a=e(85960),o=e(71244),r=e(92369),i=e(96525),g=e(20519),u=e(76310),l=e(38797),m=e(24956),c=e(5999),d=e(95329),f=e(15867),E=e(45864);const v=({refreshIntervals:y,onRefreshIntervalChange:C,getIntervalsFunc:b=p,validateIntervalsFunc:S=h})=>{const[D,M]=(0,a.useState)(b(y??f.o5)),[T,R]=(0,a.useState)(null);(0,a.useEffect)(()=>{const L=b(y??f.o5);M(L)},[b,y]);const O=(0,a.useMemo)(()=>Array.isArray(D)?D.join(","):"",[D]),x=(0,a.useCallback)(L=>{const P=L.currentTarget.value?L.currentTarget.value.split(","):[];M(P)},[M]),I=(0,a.useCallback)(L=>{const P=S(D);P===null&&C(b(D)),R(P)},[b,D,C,S]);return a.createElement(g.g,{label:(0,d.t)("dashboard-settings.general.auto-refresh-label","Auto refresh"),description:(0,d.t)("dashboard-settings.general.auto-refresh-description","Define the auto refresh intervals that should be available in the auto refresh list."),error:T,invalid:!!T},a.createElement(m.I,{id:"auto-refresh-input",invalid:!!T,value:O,onChange:x,onBlur:I}))},h=(y,C={getTimeSrv:E.$t})=>{try{return p(y,C),null}catch(b){return b instanceof Error?b.message:"Invalid intervals"}},p=(y,C={getTimeSrv:E.$t})=>{const b=y.filter(S=>S.trim()!=="").map(S=>S.replace(/\s+/g,""));return[...new Set(C.getTimeSrv().getValidIntervals(b))]};class s extends a.PureComponent{constructor(){super(...arguments),this.state={isNowDelayValid:!0},this.onNowDelayChange=C=>{const b=C.currentTarget.value;if((0,n.isEmpty)(b))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(b);if(o.isValidTimeSpan(b))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(b);this.setState({isNowDelayValid:!1})},this.onHideTimePickerChange=()=>{this.props.onHideTimePickerChange(!this.props.timePickerHidden)},this.onLiveNowChange=()=>{this.props.onLiveNowChange(!this.props.liveNow)},this.onTimeZoneChange=C=>{typeof C=="string"&&this.props.onTimeZoneChange(C)},this.onWeekStartChange=C=>{this.props.onWeekStartChange(C)}}render(){return a.createElement(i.s,{label:(0,d.t)("dashboard-settings.time-picker.time-options-label","Time options"),isOpen:!0},a.createElement(g.g,{label:(0,d.t)("dashboard-settings.time-picker.time-zone-label","Time zone"),"data-testid":r.wl.components.TimeZonePicker.containerV2},a.createElement(u.O,{inputId:"time-options-input",includeInternal:!0,value:this.props.timezone,onChange:this.onTimeZoneChange,width:40})),a.createElement(g.g,{label:(0,d.t)("dashboard-settings.time-picker.week-start-label","Week start"),"data-testid":r.wl.components.WeekStartPicker.containerV2},a.createElement(l.z,{inputId:"week-start-input",width:40,value:this.props.weekStart,onChange:this.onWeekStartChange})),a.createElement(v,{refreshIntervals:this.props.refreshIntervals,onRefreshIntervalChange:this.props.onRefreshIntervalChange}),a.createElement(g.g,{label:(0,d.t)("dashboard-settings.time-picker.now-delay-label","Now delay"),description:(0,d.t)("dashboard-settings.time-picker.now-delay-description","Exclude recent data that may be incomplete.")},a.createElement(m.I,{id:"now-delay-input",invalid:!this.state.isNowDelayValid,placeholder:"0m",onChange:this.onNowDelayChange,defaultValue:this.props.nowDelay})),a.createElement(g.g,{label:(0,d.t)("dashboard-settings.time-picker.hide-time-picker","Hide time picker")},a.createElement(c.r,{id:"hide-time-picker-toggle",value:!!this.props.timePickerHidden,onChange:this.onHideTimePickerChange})),a.createElement(g.g,{label:(0,d.t)("dashboard-settings.time-picker.refresh-live-dashboards-label","Refresh live dashboards"),description:(0,d.t)("dashboard-settings.time-picker.refresh-live-dashboards-description","Continuously re-draw panels where the time range references 'now'")},a.createElement(c.r,{id:"refresh-live-dashboards-toggle",value:!!this.props.liveNow,onChange:this.onLiveNowChange})))}}},68114:(G,A,e)=>{"use strict";e.d(A,{D:()=>dr});var n=e(85960),a=e(30694),o=e(12693),r=e(92369),i=e(91),g=e(29165),u=e(19424),l=e(37870),m=e(20989),c=e(67954),d=e(95329),f=e(41879),E=e(95162),v=e(14914),h=e(36752),p=e(83205),s=e(90857),y=e(66681),C=e(81445),b=e(43183),S=e(47257),D=e(96525),M=e(74042),T=e(75682),R=e(14607),O=e(97666),x=e(75064),I=e(7288);const L=({nodes:xt,edges:St,direction:Xt,width:Qt,height:sn,onDoubleClick:bn})=>{const Bn=(0,n.useRef)(null),_n=(0,n.useRef)(null),jn=(0,n.useCallback)(Sa=>{bn&&bn(Sa.nodes[0])},[bn]);return(0,n.useEffect)(()=>((async()=>{const ta=await e.e(8271).then(e.t.bind(e,97595,23)),ra={nodes:P(ta,xt),edges:N(ta,St)},Oa={width:"100%",height:"100%",autoResize:!0,layout:{improvedLayout:!0,hierarchical:{enabled:!0,direction:Xt??"DU",sortMethod:"directed"}},interaction:{navigationButtons:!0,dragNodes:!1}};Bn.current=new ta.Network(_n.current,ra,Oa),Bn.current?.on("doubleClick",jn)})(),()=>{Bn.current&&Bn.current.off("doubleClick")}),[Xt,St,xt,jn]),n.createElement("div",null,n.createElement("div",{ref:_n,style:{width:Qt??"100%",height:sn??"60vh"}}))};function P(xt,St){const Xt=St.map(Qt=>({...Qt,shape:"box"}));return new xt.DataSet(Xt)}function N(xt,St){const Xt=St.map(Qt=>({...Qt,arrows:"to",dashes:!0}));return new xt.DataSet(Xt)}function F({edges:xt,nodes:St,show:Xt,title:Qt,children:sn}){const[bn,Bn]=(0,n.useState)(Xt),_n=(0,n.useCallback)(()=>Bn(!0),[Bn]),jn=(0,n.useCallback)(()=>Bn(!1),[Bn]);return n.createElement(n.Fragment,null,n.createElement(I.u,{isOpen:bn,title:Qt,icon:"info-circle",iconTooltip:"The graph can be moved, zoomed in, and zoomed out.",onClickBackdrop:jn,onDismiss:jn},n.createElement(L,{nodes:St,edges:xt})),sn({showModal:_n}))}const U=({id:xt,usages:St})=>{const Xt=(0,n.useMemo)(()=>St.find(sn=>sn.variable.id===xt),[xt,St]);if(!Xt)return null;const Qt=Xt.nodes.map(sn=>sn.label.includes(`$${xt}`)?{...sn,color:"#FB7E81"}:sn);return n.createElement(F,{show:!1,title:`Showing usages for: $${xt}`,nodes:Qt,edges:Xt.edges},({showModal:sn})=>n.createElement(x.h,{onClick:()=>sn(),name:"code-branch",tooltip:"Show usages","data-testid":"VariablesUnknownButton"}))};var j=e(58348);const V=1e3;function _({variables:xt,dashboard:St}){const[Xt,Qt]=(0,n.useState)(!1),[sn,bn]=(0,n.useState)(0),[Bn,_n]=(0,n.useState)([]),jn=(0,S.wW)(Y);(0,n.useEffect)(()=>bn(ra=>ra+1),[xt,St]);const{loading:Sa}=(0,C.Z)(async()=>{if(Xt&&sn>0){const ra=Date.now(),Oa=await(0,j.Yg)(xt,St),Ja=Date.now()-ra;return Ja>=V&&(0,b.ff)("Slow unknown variables expansion",{elapsed:Ja}),bn(0),_n(Oa),Oa}return[]},[xt,St,Xt,sn]),ta=ra=>{ra&&(0,b.ff)("Unknown variables section expanded"),Qt(ra)};return n.createElement("div",{className:jn.container},n.createElement(D.s,{label:n.createElement(H,null),isOpen:Xt,onToggle:ta},Sa&&n.createElement(M.wc,{justify:"center"},n.createElement(M.Lh,{justify:"center"},n.createElement("span",null,"Loading..."),n.createElement(T.$,null))),!Sa&&Bn&&n.createElement(n.Fragment,null,Bn.length===0&&n.createElement(z,null),Bn.length>0&&n.createElement(K,{usages:Bn}))))}function H(){const xt=(0,S.wW)(Y);return n.createElement("h5",null,"Renamed or missing variables",n.createElement(R.u,{content:"Click to expand a list with all variable references that have been renamed or are missing from the dashboard."},n.createElement(O.J,{name:"info-circle",className:xt.infoIcon})))}function z(){return n.createElement("span",null,"No renamed or missing variables found.")}function K({usages:xt}){const St=(0,S.wW)(Y);return n.createElement("table",{className:"filter-table filter-table--hover"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Variable"),n.createElement("th",{colSpan:5}))),n.createElement("tbody",null,xt.map(Xt=>{const{variable:Qt}=Xt,{id:sn,name:bn}=Qt;return n.createElement("tr",{key:sn},n.createElement("td",{className:St.firstColumn},n.createElement("span",null,bn)),n.createElement("td",{className:St.defaultColumn}),n.createElement("td",{className:St.defaultColumn}),n.createElement("td",{className:St.defaultColumn}),n.createElement("td",{className:St.lastColumn},n.createElement(U,{id:Qt.id,usages:xt})))})))}const Y=xt=>({container:(0,y.css)`
    margin-top: ${xt.spacing(4)};
    padding-top: ${xt.spacing(4)};
  `,infoIcon:(0,y.css)`
    margin-left: ${xt.spacing(1)};
  `,defaultColumn:(0,y.css)`
    width: 1%;
  `,firstColumn:(0,y.css)`
    width: 1%;
    vertical-align: top;
    color: ${xt.colors.text.maxContrast};
  `,lastColumn:(0,y.css)`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    text-align: right;
  `});var k=e(14595),q=e(59084),X=e(22042),te=e(10805),se=e(77980);function de({varName:xt,isOpen:St=!1,onConfirm:Xt,onDismiss:Qt}){return n.createElement(se.s,{title:"Delete variable",isOpen:St,onConfirm:Xt,onDismiss:Qt,body:`
      Are you sure you want to delete variable "${xt}"?
    `,modalClass:re.modal,confirmText:"Delete"})}const re={modal:(0,y.css)({width:"max-content",maxWidth:"80vw"})};var fe=e(23757),ie=e(25648),oe=e(43489),ue=e(99165),me=e(50595),ge=e(20519),Ue=e(5106);const De=[{label:"Label and value",value:me.bU.dontHide},{label:"Value",value:me.bU.hideLabel},{label:"Nothing",value:me.bU.hideVariable}];function Pe({onChange:xt,hide:St,type:Xt}){const Qt=(0,n.useMemo)(()=>De.find(sn=>sn.value===St)?.value??De[0].value,[St]);return Xt==="constant"?null:n.createElement(ge.g,{label:"Show on dashboard"},n.createElement(Ue.S,{options:De,onChange:xt,value:Qt}))}var ye=e(1377),Te=e(1030),nt=e(11606),ct=e(64210);function he({onChange:xt,type:St}){const Xt=(0,n.useMemo)(()=>(0,te.bi)(),[]),Qt=(0,n.useMemo)(()=>Xt.find(sn=>sn.value===St)??Xt[0],[Xt,St]);return n.createElement(ct.u,{name:"Select variable type",value:Qt,options:Xt,onChange:xt,testId:r.wl.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelectV2})}var xe=e(81368),Me=e(114);const He=({variable:{options:xt}})=>{const[St,Xt]=(0,n.useState)(20),[Qt,sn]=(0,n.useState)([]),bn=(0,n.useCallback)(_n=>{_n.preventDefault(),Xt(St+20)},[St,Xt]),Bn=(0,S.wW)(Ve);return(0,n.useEffect)(()=>sn(xt.slice(0,St)),[St,xt]),Qt.length?n.createElement("div",{style:{display:"flex",flexDirection:"column",marginTop:"16px"}},n.createElement("h5",null,"Preview of values"),n.createElement(xe.Z,null,Qt.map((_n,jn)=>n.createElement(xe.Z,{key:`${_n.value}-${jn}`,className:Bn.optionContainer},n.createElement(Me.W,{"aria-label":r.wl.pages.Dashboard.Settings.Variables.Edit.General.previewOfValuesOption},n.createElement("div",{className:Bn.label},_n.text))))),xt.length>St&&n.createElement(xe.Z,{className:Bn.optionContainer},n.createElement(g.zx,{onClick:bn,variant:"secondary",size:"sm","aria-label":"Variable editor Preview of Values Show More link"},"Show more"))):null};He.displayName="VariableValuesPreview";function Ve(xt){return{wrapper:(0,y.css)({display:"flex",flexDirection:"column",marginTop:xt.spacing(2)}),optionContainer:(0,y.css)({marginLeft:xt.spacing(.5),marginBottom:xt.spacing(.5)}),label:(0,y.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"50vw"})}}var Oe=e(56375),Ne=e(81127),_e=e(65874);const qe=xt=>async St=>{const{rootStateKey:Xt}=xt;St((0,k.mb)(Xt,(0,_e.wJ)({name:(0,q.E0)(xt).name,id:xt.id})))},rt=xt=>async(St,Xt)=>{const{rootStateKey:Qt}=xt;St((0,k.mb)(Qt,(0,_e.qe)((0,te.Y6)(xt))))},mt=(xt,St)=>(Xt,Qt)=>{const{id:sn,rootStateKey:bn}=xt;let Bn=null;if(St.match(/^(?!__).*$/)||(Bn="Template names cannot begin with '__', that's reserved for Grafana's global variables"),St.match(/^\w+$/)||(Bn="Only word characters are allowed in variable names"),(0,q.gt)(bn,Qt()).filter(Sa=>Sa.name===St&&Sa.id!==sn).length&&(Bn="Variable with the same name already exists"),Bn){Xt((0,k.mb)(bn,(0,_e.y8)({newName:St,errorText:Bn})));return}Xt(Je(xt,St))},Je=(xt,St)=>(Xt,Qt)=>{const{rootStateKey:sn}=xt,bn=(0,q.E0)(xt,Qt());if(bn.name===St){Xt((0,k.mb)(sn,(0,_e.Yo)((0,te.Y6)(xt,{newName:St}))));return}const Bn={...(0,Oe.cloneDeep)(bn),name:St,id:St},_n=bn.global,jn=bn.index,Sa=(0,te.yQ)(Bn);Xt((0,k.mb)(sn,(0,X.VN)((0,te.Y6)(Sa,{global:_n,index:jn,model:Bn})))),Xt((0,k.mb)(sn,(0,_e.Yo)((0,te.Y6)(Sa,{newName:St})))),Xt((0,k.mb)(sn,(0,X.mZ)((0,te.Y6)(xt,{reIndex:!1}))))},Ae=(xt,St="query")=>(Xt,Qt)=>{const sn=(0,te.mn)(xt),bn=(0,q.gt)(sn,Qt()),Bn=Xe(St,bn),_n={type:St,id:Bn},jn=!1,Sa=(0,q.Eo)(sn,Qt()),ta=(0,Oe.cloneDeep)(ie.z.get(St).initialState);ta.id=Bn,ta.name=Bn,ta.rootStateKey=sn,Xt((0,k.mb)(sn,(0,X.VN)((0,te.Y6)(_n,{global:jn,model:ta,index:Sa})))),i.E1.partial({editIndex:bn.length})},Ke=xt=>(St,Xt)=>{const Qt=(0,te.mn)(xt),sn=Xt(),bn=(0,q.xD)(Qt,sn),Bn=sn.dashboard.getModel(),{usages:_n}=(0,j.V)(bn,Bn),jn=(0,j.vI)(_n);St((0,k.mb)(Qt,(0,Ne.j4)({usages:_n,usagesNetwork:jn})))};function Xe(xt,St){let Xt=0,Qt=`${xt}${Xt}`;for(;St.find(sn=>sn.id===Qt);)Qt=`${xt}${++Xt}`;return Qt}var ne=(xt=>(xt[xt.MaxSize=50]="MaxSize",xt))(ne||{});const Z=(xt,St)=>({editor:(0,q.AE)(St.identifier.rootStateKey,xt).editor,variable:(0,q.E0)(St.identifier,xt)}),ee=xt=>({...(0,p.bindActionCreators)({variableEditorMount:qe,variableEditorUnMount:rt,changeVariableName:mt,updateOptions:ue.Rk},xt),changeVariableProp:(St,Xt,Qt)=>xt((0,k.mb)(St.rootStateKey,(0,X.Pl)((0,te.Y6)(St,{propName:Xt,propValue:Qt})))),changeVariableType:(St,Xt)=>xt((0,k.mb)(St.rootStateKey,(0,X.Be)((0,te.Y6)(St,{newType:Xt})))),removeVariable:St=>{xt((0,k.mb)(St.rootStateKey,(0,X.mZ)((0,te.Y6)(St,{reIndex:!0}))))}}),ce=(0,h.connect)(Z,ee);class be extends n.PureComponent{constructor(){super(...arguments),this.state={showDeleteModal:!1},this.onNameChange=St=>{St.preventDefault(),this.props.changeVariableName(this.props.identifier,St.currentTarget.value)},this.onTypeChange=St=>{St.value&&this.props.changeVariableType(this.props.identifier,St.value)},this.onLabelChange=St=>{St.preventDefault(),this.props.changeVariableProp(this.props.identifier,"label",St.currentTarget.value)},this.onDescriptionChange=St=>{this.props.changeVariableProp(this.props.identifier,"description",St.currentTarget.value)},this.onHideChange=St=>{this.props.changeVariableProp(this.props.identifier,"hide",St)},this.onPropChanged=({propName:St,propValue:Xt,updateOptions:Qt=!1})=>{this.props.changeVariableProp(this.props.identifier,St,Xt),Qt&&this.props.updateOptions((0,te.yQ)(this.props.variable))},this.onHandleSubmit=async St=>{St.preventDefault(),this.props.editor.isValid&&this.props.updateOptions((0,te.yQ)(this.props.variable))},this.onModalOpen=()=>{this.setState({showDeleteModal:!0})},this.onModalClose=()=>{this.setState({showDeleteModal:!1})},this.onDelete=()=>{this.props.removeVariable(this.props.identifier),this.onModalClose(),i.E1.partial({editIndex:null})},this.onApply=()=>{i.E1.partial({editIndex:null})}}componentDidMount(){this.props.variableEditorMount(this.props.identifier)}componentWillUnmount(){this.props.variableEditorUnMount(this.props.identifier)}render(){const{variable:St}=this.props,Xt=ie.z.get(this.props.variable.type).editor;if(!Xt)return null;const Qt=St.state===fe.Gu.Loading;return n.createElement(n.Fragment,null,n.createElement("form",{"aria-label":"Variable editor Form",onSubmit:this.onHandleSubmit},n.createElement(he,{onChange:this.onTypeChange,type:this.props.variable.type}),n.createElement(ye.e,null,"General"),n.createElement(nt.V,{value:this.props.editor.name,onChange:this.onNameChange,name:"Name",placeholder:"Variable name",description:"The name of the template variable. (Max. 50 characters)",invalid:!!this.props.editor.errors.name,error:this.props.editor.errors.name,testId:r.wl.pages.Dashboard.Settings.Variables.Edit.General.generalNameInputV2,maxLength:ne.MaxSize,required:!0}),n.createElement(nt.V,{name:"Label",description:"Optional display name",value:this.props.variable.label??"",placeholder:"Label name",onChange:this.onLabelChange,testId:r.wl.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInputV2}),n.createElement(Te.W,{name:"Description",value:St.description??"",placeholder:"Descriptive text",onChange:this.onDescriptionChange,width:52}),n.createElement(Pe,{onChange:this.onHideChange,hide:this.props.variable.hide,type:this.props.variable.type}),Xt&&n.createElement(Xt,{variable:this.props.variable,onPropChange:this.onPropChanged}),(0,oe.eL)(this.props.variable)?n.createElement(He,{variable:this.props.variable}):null,n.createElement("div",{style:{marginTop:"16px"}},n.createElement(M.Lh,{spacing:"md",height:"inherit"},n.createElement(g.zx,{variant:"destructive",fill:"outline",onClick:this.onModalOpen},"Delete"),n.createElement(g.zx,{type:"submit","aria-label":r.wl.pages.Dashboard.Settings.Variables.Edit.General.submitButton,disabled:Qt,variant:"secondary"},"Run query",Qt&&n.createElement(O.J,{className:"spin-clockwise",name:"sync",size:"sm",style:{marginLeft:"2px"}})),n.createElement(g.zx,{variant:"primary",onClick:this.onApply,"data-testid":r.wl.pages.Dashboard.Settings.Variables.Edit.General.applyButton},"Apply")))),n.createElement(de,{isOpen:this.state.showDeleteModal,varName:this.props.editor.name,onConfirm:this.onDelete,onDismiss:this.onModalClose}))}}const Ee=ce(be);var Be=e(31173),Le=e(13086),ze=e(64409),Fe=e(59767);const $e=({variables:xt})=>{const St=(0,n.useMemo)(()=>(0,j.GQ)(xt),[xt]),Xt=(0,n.useMemo)(()=>(0,j.MJ)(xt),[xt]);return Xt.length?n.createElement(F,{show:!1,title:"Dependencies",nodes:(0,j.Of)(St,Xt),edges:Xt},({showModal:Qt})=>n.createElement(g.zx,{onClick:()=>{(0,b.ff)("Show variable dependencies"),Qt()},icon:"channel-add",variant:"secondary"},"Show dependencies")):null},et=xt=>n.createElement(h.Provider,{store:Fe.h},n.createElement($e,{...xt})),tt=({id:xt,usages:St,isAdhoc:Xt})=>{const Qt=(0,n.useMemo)(()=>St.find(bn=>bn.variable.id===xt),[St,xt]);if(St.length===0||Xt||!Qt)return null;const sn=Qt.nodes.map(bn=>bn.label.includes(`$${xt}`)?{...bn,color:"#FB7E81"}:bn);return n.createElement(F,{show:!1,title:`Showing usages for: $${xt}`,nodes:sn,edges:Qt.edges},({showModal:bn})=>n.createElement(x.h,{onClick:()=>{(0,b.ff)("Show variable usages"),bn()},name:"code-branch",tooltip:"Show usages"}))};function it({index:xt,variable:St,usageTree:Xt,usagesNetwork:Qt,onEdit:sn,onDuplicate:bn,onDelete:Bn}){const _n=(0,S.l4)(),jn=(0,S.wW)(Wt),Sa=vt(St),ra=(0,j.Rv)(St.id,Xt)>0||St.type==="adhoc",Oa=(0,te.yQ)(St);return n.createElement(Be._l,{draggableId:JSON.stringify(Oa),index:xt},(Ts,Ja)=>n.createElement("tr",{ref:Ts.innerRef,...Ts.draggableProps,style:{userSelect:Ja.isDragging?"none":"auto",background:Ja.isDragging?_n.colors.background.secondary:void 0,...Ts.draggableProps.style}},n.createElement("td",{role:"gridcell",className:jn.column},n.createElement(g.zx,{size:"xs",fill:"text",onClick:Ks=>{Ks.preventDefault(),sn(Oa)},className:jn.nameLink,"aria-label":r.wl.pages.Dashboard.Settings.Variables.List.tableRowNameFields(St.name)},St.name)),n.createElement("td",{role:"gridcell",className:jn.definitionColumn,onClick:Ks=>{Ks.preventDefault(),sn(Oa)},"aria-label":r.wl.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(St.name)},Sa),n.createElement("td",{role:"gridcell",className:jn.column},n.createElement("div",{className:jn.icons},n.createElement(yt,{passed:ra}),n.createElement(tt,{id:St.id,isAdhoc:St.type==="adhoc",usages:Qt}),n.createElement(x.h,{onClick:Ks=>{Ks.preventDefault(),(0,b.ff)("Duplicate variable"),bn(Oa)},name:"copy",tooltip:"Duplicate variable","aria-label":r.wl.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(St.name)}),n.createElement(x.h,{onClick:Ks=>{Ks.preventDefault(),(0,b.ff)("Delete variable"),Bn(Oa)},name:"trash-alt",tooltip:"Remove variable","aria-label":r.wl.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(St.name)}),n.createElement("div",{...Ts.dragHandleProps,className:jn.dragHandle},n.createElement(O.J,{name:"draggabledots",size:"lg"}))))))}function vt(xt){let St="";return xt.type==="query"?xt.definition?St=xt.definition:typeof xt.query=="string"&&(St=xt.query):(0,oe.eL)(xt)&&(St=xt.query),St}function yt({passed:xt}){const St=(0,S.wW)(Wt);return xt?n.createElement(O.J,{name:"check",className:St.iconPassed,title:"This variable is referenced by other variables or dashboard."}):n.createElement(O.J,{name:"exclamation-triangle",className:St.iconFailed,title:"This variable is not referenced by any variable or dashboard."})}function Wt(xt){return{dragHandle:(0,y.css)`
      cursor: grab;
      margin-left: ${xt.spacing(1)};
    `,column:(0,y.css)`
      width: 1%;
    `,nameLink:(0,y.css)`
      cursor: pointer;
      color: ${xt.colors.primary.text};
    `,definitionColumn:(0,y.css)`
      width: 100%;
      max-width: 200px;
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      -o-text-overflow: ellipsis;
      white-space: nowrap;
    `,iconPassed:(0,y.css)`
      color: ${xt.v1.palette.greenBase};
      margin-right: ${xt.spacing(2)};
    `,iconFailed:(0,y.css)`
      color: ${xt.v1.palette.orange};
      margin-right: ${xt.spacing(2)};
    `,icons:(0,y.css)`
      display: flex;
      gap: ${xt.spacing(2)};
      align-items: center;
    `}}function ut({variables:xt,usages:St,usagesNetwork:Xt,onChangeOrder:Qt,onAdd:sn,onEdit:bn,onDelete:Bn,onDuplicate:_n}){const jn=(0,S.wW)(we),Sa=ta=>{if(!ta.destination||!ta.source)return;(0,b.ff)("Variable drag and drop");const ra=JSON.parse(ta.draggableId);Qt(ra,xt[ta.source.index].index,xt[ta.destination.index].index)};return n.createElement("div",null,n.createElement("div",null,xt.length===0&&n.createElement(pt,{onAdd:sn}),xt.length>0&&n.createElement(Le.K,{direction:"column",gap:4},n.createElement("div",{className:jn.tableContainer},n.createElement("table",{className:"filter-table filter-table--hover","aria-label":r.wl.pages.Dashboard.Settings.Variables.List.table,role:"grid"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Variable"),n.createElement("th",null,"Definition"),n.createElement("th",{colSpan:5}))),n.createElement(Be.Z5,{onDragEnd:Sa},n.createElement(Be.bK,{droppableId:"variables-list",direction:"vertical"},ta=>n.createElement("tbody",{ref:ta.innerRef,...ta.droppableProps},xt.map((ra,Oa)=>n.createElement(it,{index:Oa,key:`${ra.name}-${Oa}`,variable:ra,usageTree:St,usagesNetwork:Xt,onDelete:Bn,onDuplicate:_n,onEdit:bn})),ta.placeholder))))),n.createElement(Le.K,null,n.createElement(et,{variables:xt}),n.createElement(g.zx,{"aria-label":r.wl.pages.Dashboard.Settings.Variables.List.newButton,onClick:sn,icon:"plus"},"New variable")))))}function pt({onAdd:xt}){return n.createElement("div",null,n.createElement(ze.Z,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",infoBox:{__html:` <p>
                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server
                    or sensor names in your metric queries you can use variables in their place. Variables are shown as
                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data
                    being displayed in your dashboard. Check out the
                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">
                      Templates and variables documentation
                    </a>
                    for more information.
                  </p>`},infoBoxTitle:"What do variables do?",onClick:St=>{St.preventDefault(),xt()}}))}const we=()=>({tableContainer:(0,y.css)`
    overflow: scroll;
    width: 100%;
  `}),lt=(xt,St)=>{const{uid:Xt}=St.dashboard,Qt=(0,q.AE)(Xt,xt);return{variables:(0,q.xD)(Xt,xt),idInEditor:Qt.editor.id,usagesNetwork:Qt.inspect.usagesNetwork,usages:Qt.inspect.usages}},Bt=xt=>({...(0,p.bindActionCreators)({createNewVariable:Ae,initListMode:Ke},xt),changeVariableOrder:(St,Xt,Qt)=>xt((0,k.mb)(St.rootStateKey,(0,X.gE)((0,te.Y6)(St,{fromIndex:Xt,toIndex:Qt})))),duplicateVariable:St=>xt((0,k.mb)(St.rootStateKey,(0,X.Y9)((0,te.Y6)(St,{newId:void 0})))),removeVariable:St=>{xt((0,k.mb)(St.rootStateKey,(0,X.mZ)((0,te.Y6)(St,{reIndex:!0}))))}}),Kt=(0,h.connect)(lt,Bt);class It extends n.PureComponent{constructor(){super(...arguments),this.state={variableId:void 0},this.onEditVariable=St=>{const Xt=this.props.variables.findIndex(Qt=>Qt.id===St.id);i.E1.partial({editIndex:Xt})},this.onNewVariable=()=>{this.props.createNewVariable(this.props.dashboard.uid)},this.onChangeVariableOrder=(St,Xt,Qt)=>{this.props.changeVariableOrder(St,Xt,Qt)},this.onDuplicateVariable=St=>{this.props.duplicateVariable(St)},this.onModalOpen=St=>{this.setState({variableId:St})},this.onModalClose=()=>{this.setState({variableId:void 0})},this.onRemoveVariable=()=>{this.props.removeVariable(this.state.variableId),this.onModalClose()}}componentDidMount(){this.props.initListMode(this.props.dashboard.uid)}render(){const{editIndex:St,variables:Xt,sectionNav:Qt}=this.props,sn=St!=null?Xt[St]:void 0,bn=Qt.node,Bn=s.config.featureToggles.dockedMegaMenu&&bn.parentItem?{...bn.parentItem,url:bn.url}:void 0,_n=sn?{text:sn.name,parentItem:Bn}:Bn;return n.createElement(m.T,{navModel:this.props.sectionNav,pageNav:_n},!sn&&n.createElement(ut,{variables:this.props.variables,onAdd:this.onNewVariable,onEdit:this.onEditVariable,onChangeOrder:this.onChangeVariableOrder,onDuplicate:this.onDuplicateVariable,onDelete:this.onModalOpen,usages:this.props.usages,usagesNetwork:this.props.usagesNetwork}),!sn&&this.props.variables.length>0&&n.createElement(_,{variables:this.props.variables,dashboard:this.props.dashboard}),sn&&n.createElement(Ee,{identifier:(0,te.yQ)(sn)}),n.createElement(de,{isOpen:this.state.variableId!==void 0,varName:this.state.variableId?.id??"",onConfirm:this.onRemoveVariable,onDismiss:this.onModalClose}))}}const Zt=Kt(It);var yn=e(88879),xn=e(49683);const An=({dashboard:xt,sectionNav:St})=>{const Xt=xn.Vt.hasPermission(E.AccessControlAction.DashboardsPermissionsWrite),Qt=s.config.featureToggles.dockedMegaMenu?St.node.parentItem:void 0;return n.createElement(m.T,{navModel:St,pageNav:Qt},n.createElement(yn.P,{resource:"dashboards",resourceId:xt.uid,canSetPermissions:Xt}))};var qt=e(82179),On=e(52219),wn=e(81502),Zn=e(51637),Aa=e(24956),Ea=e(55973),Nt=e(27436),en=e(82724),rn=e(81838),un=e(93821),on=e(93657),In=e(45864),Sn=e(27008),Ln=e(1283),hn=e(76863),Gn=e(94372),Cn=e(16949),Yn=e(1930);class Xn extends n.PureComponent{constructor(St){super(St),this.updateFields=()=>{const Xt=this.props.response?.panelData,Qt=Xt?.series?.[0]??Xt?.annotations?.[0];if(Qt&&Qt.fields){const sn=Qt.fields.map(bn=>{const Bn=(0,Gn.CZ)(bn,Qt);let _n="";for(let jn=0;jn<Qt.length;jn++){if(jn>0&&(_n+=", "),jn>2){_n+="...";break}_n+=bn.values[jn]}return _n.length>50&&(_n=_n.substring(0,50)+"..."),{label:`${Bn} (${bn.type})`,value:Bn,description:_n}});this.setState({fieldNames:sn})}},this.onFieldSourceChange=(Xt,Qt)=>{const sn=this.props.mappings||{},bn=sn[Xt]||{};this.props.change({...sn,[Xt]:{...bn,source:Qt.value||Cn.L.Field}})},this.onFieldNameChange=(Xt,Qt)=>{const sn=this.props.mappings||{};if(!Qt){const Bn={...this.props.mappings};delete Bn[Xt],this.props.change(Bn);return}const bn=sn[Xt]||{};this.props.change({...sn,[Xt]:{...bn,value:Qt.value,source:Cn.L.Field}})},this.state={fieldNames:[]}}componentDidMount(){this.updateFields()}componentDidUpdate(St){St.response!==this.props.response&&this.updateFields()}renderRow(St,Xt,Qt){const{fieldNames:sn}=this.state;let bn=[...sn];const Bn=Xt.value;let _n=sn.find(Sa=>Bn===Sa.value);Bn&&!_n&&bn.push({label:Bn,value:Bn});let jn=Qt?Qt[St.key]:"";if(jn&&St.key.startsWith("time")){const Sa=(0,Yn.Cf)("dateTimeAsIso");jn=(0,Yn.zc)(Sa(jn))}return jn==null&&(jn=""),n.createElement("tr",{key:St.key},n.createElement("td",null,St.label||St.key," ",St.help&&n.createElement(R.u,{content:St.help},n.createElement(O.J,{name:"info-circle"}))),n.createElement("td",null,n.createElement(Nt.Ph,{value:_n,options:bn,placeholder:St.placeholder||St.key,onChange:Sa=>{this.onFieldNameChange(St.key,Sa)},noOptionsMessage:"Unknown field names",allowCustomValue:!0,isClearable:!0})),n.createElement("td",null,`${jn}`))}render(){const St=this.props.response?.events?.[0],Xt=this.props.mappings||{};return n.createElement("table",{className:"filter-table"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Annotation"),n.createElement("th",null,"From"),n.createElement("th",null,"First Value"))),n.createElement("tbody",null,hn.r0.map(Qt=>this.renderRow(Qt,Xt[Qt.key]||{},St))))}}class Pt extends n.PureComponent{constructor(){super(...arguments),this.state={},this.onRunQuery=async()=>{const{datasource:St,annotation:Xt}=this.props;if((0,hn.yr)(St))return;const Qt=(0,on.h4)().getCurrent();if(!Qt)return;this.setState({running:!0});const sn=await(0,rn.n)((0,Ln.r)({range:(0,In.$t)().timeRange(),panel:new Sn.r({}),dashboard:Qt},St,Xt));this.setState({running:!1,response:sn})},this.onQueryChange=St=>{this.props.onChange({...this.props.annotation,target:St})},this.onMappingChange=St=>{this.props.onChange({...this.props.annotation,mappings:St})},this.onAnnotationChange=St=>{this.props.onChange(St)}}componentDidMount(){this.verifyDataSource()}componentDidUpdate(St){this.props.annotation!==St.annotation&&!(0,hn.yr)(this.props.datasource)&&this.verifyDataSource()}verifyDataSource(){const{datasource:St,annotation:Xt}=this.props,sn={...hn.yA,...St.annotations}.prepareAnnotation(Xt);sn!==Xt?this.props.onChange(sn):this.onRunQuery()}renderStatus(){const{response:St,running:Xt}=this.state;let Qt="alert-info",sn="...",bn;if(Xt||St?.panelData?.state===fe.Gu.Loading||!St)sn="loading...";else{const{events:Bn,panelData:_n}=St;if(_n?.error)Qt="alert-error",bn="exclamation-triangle",sn=_n.error.message??"error";else if(!Bn?.length)Qt="alert-warning",bn="exclamation-triangle",sn="No events found";else{const jn=_n?.series?.[0]??_n?.annotations?.[0];sn=`${Bn.length} events (from ${jn?.fields.length} fields)`}}return n.createElement("div",{className:(0,y.cx)(Qt,(0,y.css)`
            margin: 4px 0px;
            padding: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          `)},n.createElement("div",null,bn&&n.createElement(n.Fragment,null,n.createElement(O.J,{name:bn}),"\xA0"),sn),n.createElement("div",null,Xt?n.createElement(T.$,null):n.createElement(g.zx,{variant:"secondary",size:"xs",onClick:this.onRunQuery},"TEST")))}render(){const{datasource:St,annotation:Xt,datasourceInstanceSettings:Qt}=this.props,{response:sn}=this.state;let bn=St.annotations?.QueryEditor||St.components?.QueryEditor;if(!bn)return n.createElement("div",null,"Annotations are not supported. This datasource needs to export a QueryEditor");const Bn={...St.annotations?.getDefaultQuery?.(),...Xt.target??{refId:"Anno"}};return n.createElement(n.Fragment,null,n.createElement(un.n,{instanceSettings:Qt},n.createElement(bn,{key:St?.name,query:Bn,datasource:St,onChange:this.onQueryChange,onRunQuery:this.onRunQuery,data:sn?.panelData,range:(0,In.$t)().timeRange(),annotation:Xt,onAnnotationChange:this.onAnnotationChange})),(0,hn.$w)(St)&&n.createElement(n.Fragment,null,this.renderStatus(),n.createElement(Xn,{response:sn,mappings:Xt.mappings,change:this.onMappingChange})))}}var Dt=e(40715),$t=e(92289);class jt extends n.PureComponent{constructor(){super(...arguments),this.ref=null}componentWillUnmount(){this.angularComponent&&this.angularComponent.destroy()}componentDidMount(){this.ref&&this.loadAngular()}componentDidUpdate(St){St.datasource!==this.props.datasource&&this.loadAngular(),this.scopeProps&&this.scopeProps.ctrl.currentAnnotation!==this.props.annotation&&(this.scopeProps.ctrl.ignoreNextWatcherFiring=!0,this.scopeProps.ctrl.currentAnnotation=this.props.annotation,this.angularComponent?.digest())}loadAngular(){this.angularComponent&&(this.angularComponent.destroy(),this.scopeProps=void 0);const St=(0,$t.w)(),Xt='<plugin-component type="annotations-query-ctrl"> </plugin-component>',Qt={ctrl:{currentDatasource:this.props.datasource,currentAnnotation:this.props.annotation,ignoreNextWatcherFiring:!1}};this.angularComponent=St.load(this.ref,Qt,Xt),this.angularComponent.digest(),this.angularComponent.getScope().$watch(()=>{if(Qt.ctrl.ignoreNextWatcherFiring){Qt.ctrl.ignoreNextWatcherFiring=!1;return}this.props.onChange(Qt.ctrl.currentAnnotation)}),this.scopeProps=Qt}render(){return n.createElement("div",{ref:St=>this.ref=St})}}const mn="New annotation",Dn=({editIdx:xt,dashboard:St})=>{const Xt=(0,S.wW)(vn),[Qt,sn]=(0,n.useState)(St.annotations.list[xt]),bn=(0,n.useMemo)(()=>Qt.filter?Qt.filter.exclude?2:1:0,[Qt.filter]),{value:Bn}=(0,C.Z)(()=>(0,wn.F)().get(Qt.datasource),[Qt.datasource]),_n=(0,wn.F)().getInstanceSettings(Qt.datasource),jn=Ia=>{const ms=[...St.annotations.list];ms.splice(xt,1,Ia),sn(Ia),St.annotations.list=ms},Sa=Ia=>{jn({...Qt,name:Ia.currentTarget.value})},ta=Ia=>{const ms=(0,On.iU)(Ia);Qt.datasource?.type!==ms.type?jn({datasource:ms,builtIn:Qt.builtIn,enable:Qt.enable,iconColor:Qt.iconColor,name:Qt.name,hide:Qt.hide,filter:Qt.filter,mappings:Qt.mappings,type:Qt.type}):jn({...Qt,datasource:ms})},ra=Ia=>{const ms=Ia.currentTarget;jn({...Qt,[ms.name]:ms.type==="checkbox"?ms.checked:ms.value})},Oa=Ia=>{jn({...Qt,iconColor:Ia})},Ts=Ia=>{let ms=Ia.value===0?void 0:{exclude:Ia.value===2,ids:Qt.filter?.ids??[]};jn({...Qt,filter:ms})},Ja=Ia=>{if(!Array.isArray(Ia))return;const ms={exclude:bn===2,ids:[]};Ia.forEach(mr=>mr.value&&ms.ids.push(mr.value)),jn({...Qt,filter:ms})},Ks=fa,us=()=>{i.E1.partial({editview:null,editIndex:null})},cs=()=>{const Ia=St.annotations.list;St.annotations.list=[...Ia.slice(0,xt),...Ia.slice(xt+1)],fa()},Bs=Qt.name===mn,Fr=(Ia,ms)=>Ia.label&&ms.label?Ia.label.toLowerCase().localeCompare(ms.label.toLowerCase()):-1,hs=(0,n.useMemo)(()=>St?.panels.filter(Ia=>c.default.panels[Ia.type]).map(Ia=>({value:Ia.id,label:Ia.title??`Panel ${Ia.id}`,description:Ia.description,imgUrl:c.default.panels[Ia.type].info.logos.small})).sort(Fr)??[],[St]);return n.createElement("div",null,n.createElement(Zn.C,{className:Xt.settingsForm},n.createElement(ge.g,{label:"Name"},n.createElement(Aa.I,{"aria-label":r.wl.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:Bs,value:Qt.name,onChange:Sa})),n.createElement(ge.g,{label:"Data source",htmlFor:"data-source-picker"},n.createElement(Dt.q,{annotations:!0,variables:!0,current:Qt.datasource,onChange:ta})),n.createElement(ge.g,{label:"Enabled",description:"When enabled the annotation query is issued every dashboard refresh"},n.createElement(Ea.X,{name:"enable",id:"enable",value:Qt.enable,onChange:ra})),n.createElement(ge.g,{label:"Hidden",description:"Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden."},n.createElement(Ea.X,{name:"hide",id:"hide",value:Qt.hide,onChange:ra})),n.createElement(ge.g,{label:"Color",description:"Color to use for the annotation event markers"},n.createElement(M.Lh,null,n.createElement(en.B,{value:Qt?.iconColor,onChange:Oa}))),n.createElement(ge.g,{label:"Show in","aria-label":r.wl.pages.Dashboard.Settings.Annotations.NewAnnotation.showInLabel},n.createElement(n.Fragment,null,n.createElement(Nt.Ph,{options:La,value:bn,onChange:Ts,"aria-label":r.wl.components.Annotations.annotationsTypeInput}),bn!==0&&n.createElement(Nt.NU,{options:hs,value:hs.filter(Ia=>Qt.filter?.ids.includes(Ia.value)),onChange:Ja,isClearable:!0,placeholder:"Choose panels",width:100,closeMenuOnSelect:!1,className:Xt.select,"aria-label":r.wl.components.Annotations.annotationsChoosePanelInput})))),n.createElement(Zn.C,null,n.createElement("h3",{className:"page-heading"},"Query"),Bn?.annotations&&_n&&n.createElement(Pt,{datasource:Bn,datasourceInstanceSettings:_n,annotation:Qt,onChange:jn}),Bn&&!Bn.annotations&&n.createElement(jt,{datasource:Bn,annotation:Qt,onChange:jn})),n.createElement(Le.K,null,!Qt.builtIn&&n.createElement(g.zx,{variant:"destructive",onClick:cs},"Delete"),n.createElement(g.zx,{variant:"secondary",onClick:us,"data-testid":r.wl.pages.Dashboard.Settings.Annotations.NewAnnotation.previewInDashboard},"Preview in dashboard"),n.createElement(g.zx,{variant:"primary",onClick:Ks},"Apply")))},vn=xt=>({settingsForm:(0,y.css)({maxWidth:xt.spacing(60),marginBottom:xt.spacing(2)}),select:(0,y.css)`
      margin-top: 8px;
    `});function fa(){i.E1.partial({editIndex:null})}var Pa=(xt=>(xt[xt.AllPanels=0]="AllPanels",xt[xt.IncludePanels=1]="IncludePanels",xt[xt.ExcludePanels=2]="ExcludePanels",xt))(Pa||{});const La=[{label:"All panels",value:0,description:"Send the annotation data to all panels that support annotations"},{label:"Selected panels",value:1,description:"Send the annotations to the explicitly listed panels"},{label:"All panels except",value:2,description:"Do not send annotation data to the following panels"}];var Ma=e(8898),ts=e(81573);const ds=({children:xt,...St})=>{const Xt=(0,S.wW)(ys);return n.createElement("div",{className:Xt.buttonWrapper},n.createElement(g.zx,{icon:"plus",variant:"secondary",...St},xt))},ys=xt=>({buttonWrapper:(0,y.css)`
    padding: ${xt.spacing(3)} 0;
  `}),ns=({dashboard:xt,onNew:St,onEdit:Xt})=>{const Qt=(0,S.wW)(qa),[sn,bn]=(0,n.useState)(xt.annotations.list),Bn=(ra,Oa)=>{xt.annotations.list=Ma.moveItemImmutably(sn,ra,ra+Oa),bn(xt.annotations.list)},_n=ra=>{xt.annotations.list=[...sn.slice(0,ra),...sn.slice(ra+1)],bn(xt.annotations.list)},jn=sn.length===0||sn.length===1&&sn[0].builtIn,Sa=ra=>ra.enable===!1?n.createElement(n.Fragment,null,n.createElement("em",{className:"muted"},"(Disabled) \xA0 ",ra.name)):ra.builtIn?n.createElement(n.Fragment,null,n.createElement("em",{className:"muted"},ra.name," \xA0 (Built-in)")):n.createElement(n.Fragment,null,ra.name),ta=(0,wn.F)();return n.createElement(M.wc,null,sn.length>0&&n.createElement("div",{className:Qt.table},n.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Query name"),n.createElement("th",null,"Data source"),n.createElement("th",{colSpan:3}))),n.createElement("tbody",null,xt.annotations.list.map((ra,Oa)=>n.createElement("tr",{key:`${ra.name}-${Oa}`},ra.builtIn?n.createElement("td",{role:"gridcell",style:{width:"90%"},className:"pointer",onClick:()=>Xt(Oa)},n.createElement(g.zx,{size:"sm",fill:"text",variant:"secondary"},Sa(ra))):n.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>Xt(Oa)},n.createElement(g.zx,{size:"sm",fill:"text",variant:"secondary"},Sa(ra))),n.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>Xt(Oa)},ta.getInstanceSettings(ra.datasource)?.name||ra.datasource?.uid),n.createElement("td",{role:"gridcell",style:{width:"1%"}},Oa!==0&&n.createElement(x.h,{name:"arrow-up",onClick:()=>Bn(Oa,-1),tooltip:"Move up"})),n.createElement("td",{role:"gridcell",style:{width:"1%"}},xt.annotations.list.length>1&&Oa!==xt.annotations.list.length-1?n.createElement(x.h,{name:"arrow-down",onClick:()=>Bn(Oa,1),tooltip:"Move down"}):null),n.createElement("td",{role:"gridcell",style:{width:"1%"}},!ra.builtIn&&n.createElement(ts.m,{size:"sm",onConfirm:()=>_n(Oa),"aria-label":`Delete query with title "${ra.name}"`}))))))),jn&&n.createElement(ze.Z,{onClick:St,title:"There are no custom annotation queries added yet",buttonIcon:"comment-alt",buttonTitle:"Add annotation query",infoBoxTitle:"What are annotation queries?",infoBox:{__html:`<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines
          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for
          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or
          drag region). These will be stored in Grafana's annotation database.
        </p>
        Checkout the
        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'
          >Annotations documentation</a
        >
        for more information.`}}),!jn&&n.createElement(ds,{onClick:St},"New query"))},qa=()=>({table:(0,y.css)`
    width: 100%;
    overflow-x: scroll;
  `});function Ss({dashboard:xt,editIndex:St,sectionNav:Xt}){const Qt=()=>{const Bn={name:mn,enable:!0,datasource:(0,On.iU)((0,wn.F)().getInstanceSettings(null)),iconColor:"red"};xt.annotations.list=[...xt.annotations.list,{...Bn}],i.E1.partial({editIndex:xt.annotations.list.length-1})},sn=Bn=>{i.E1.partial({editIndex:Bn})},bn=St!=null&&St<xt.annotations.list.length;return n.createElement(m.T,{navModel:Xt,pageNav:wr(xt,St,Xt.node)},!bn&&n.createElement(ns,{dashboard:xt,onNew:Qt,onEdit:sn}),bn&&n.createElement(Dn,{dashboard:xt,editIdx:St}))}function wr(xt,St,Xt){const Qt=s.config.featureToggles.dockedMegaMenu?Xt.parentItem:void 0;if(St==null)return Qt;const sn=xt.annotations.list[St];if(sn)return{text:sn.name,parentItem:Qt&&{...Qt,url:Xt.url}}}var ls=e(61353),zs=e(57445),ks=e(7073),es=e(6089),za=e(19461),Ls=e(63319),pr=e(66643),cr=e(25971),Ns=e(7800),Ur=e(89296);const Go=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];function sr({dashboard:xt,updateTimeZone:St,updateWeekStart:Xt,sectionNav:Qt}){const[sn,bn]=(0,n.useState)(0),[Bn,_n]=(0,n.useState)(xt.title),[jn,Sa]=(0,n.useState)(xt.description),ta=s.config.featureToggles.dockedMegaMenu?Qt.node.parentItem:void 0,ra=(Ta,fr)=>{xt.meta.folderUid=Ta,xt.meta.folderTitle=fr,xt.meta.hasUnsavedFolderChange=!0,bn(sn+1)},Oa=n.useCallback(Ta=>{xt.title=Ta,_n(Ta)},[_n,xt]),Ts=n.useCallback(Ta=>{xt.description=Ta,Sa(Ta)},[Sa,xt]),Ja=Ta=>{xt.graphTooltip=Ta,bn(sn+1)},Ks=Ta=>{xt.timepicker.refresh_intervals=Ta.filter(fr=>fr.trim()!=="")},us=Ta=>{xt.timepicker.nowDelay=Ta},cs=Ta=>{xt.timepicker.hidden=Ta,bn(sn+1)},Bs=Ta=>{xt.liveNow=Ta,bn(sn+1)},Fr=Ta=>{xt.timezone=Ta,bn(sn+1),St(Ta)},hs=Ta=>{xt.weekStart=Ta,bn(sn+1),Xt(Ta)},Ia=Ta=>{xt.tags=Ta,bn(sn+1)},ms=Ta=>{xt.editable=Ta,bn(sn+1)},mr=[{label:"Editable",value:!0},{label:"Read-only",value:!1}];return n.createElement(m.T,{navModel:Qt,pageNav:ta},n.createElement("div",{style:{maxWidth:"600px"}},n.createElement(ls.x,{marginBottom:5},n.createElement(ge.g,{label:n.createElement(M.Lh,{justify:"space-between"},n.createElement(zs._,{htmlFor:"title-input"},n.createElement(d.cC,{i18nKey:"dashboard-settings.general.title-label"},"Title")),s.config.featureToggles.dashgpt&&n.createElement(Ns.n,{onGenerate:Oa,dashboard:xt}))},n.createElement(Aa.I,{id:"title-input",name:"title",value:Bn,onChange:Ta=>Oa(Ta.target.value)})),n.createElement(ge.g,{label:n.createElement(M.Lh,{justify:"space-between"},n.createElement(zs._,{htmlFor:"description-input"},(0,d.t)("dashboard-settings.general.description-label","Description")),s.config.featureToggles.dashgpt&&n.createElement(cr._,{onGenerate:Ts,dashboard:xt}))},n.createElement(ks.K,{id:"description-input",name:"description",value:jn,onChange:Ta=>Ts(Ta.target.value)})),n.createElement(ge.g,{label:(0,d.t)("dashboard-settings.general.tags-label","Tags")},n.createElement(es.B,{id:"tags-input",tags:xt.tags,onChange:Ia,width:40})),n.createElement(ge.g,{label:(0,d.t)("dashboard-settings.general.folder-label","Folder")},n.createElement(za.E,{value:xt.meta.folderUid,onChange:ra,initialTitle:xt.meta.folderTitle,inputId:"dashboard-folder-input",enableCreateNew:!0,dashboardId:xt.id,skipInitialLoad:!0})),n.createElement(ge.g,{label:(0,d.t)("dashboard-settings.general.editable-label","Editable"),description:(0,d.t)("dashboard-settings.general.editable-description","Set to read-only to disable all editing. Reload the dashboard for changes to take effect")},n.createElement(Ue.S,{value:xt.editable,options:mr,onChange:ms}))),n.createElement(Ur.P,{onTimeZoneChange:Fr,onWeekStartChange:hs,onRefreshIntervalChange:Ks,onNowDelayChange:us,onHideTimePickerChange:cs,onLiveNowChange:Bs,refreshIntervals:xt.timepicker.refresh_intervals,timePickerHidden:xt.timepicker.hidden,nowDelay:xt.timepicker.nowDelay,timezone:xt.timezone,weekStart:xt.weekStart,liveNow:xt.liveNow}),n.createElement(D.s,{label:(0,d.t)("dashboard-settings.general.panel-options-label","Panel options"),isOpen:!0},n.createElement(ge.g,{label:(0,d.t)("dashboard-settings.general.panel-options-graph-tooltip-label","Graph tooltip"),description:(0,d.t)("dashboard-settings.general.panel-options-graph-tooltip-description","Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect")},n.createElement(Ue.S,{onChange:Ja,options:Go,value:xt.graphTooltip}))),n.createElement(ls.x,{marginTop:3},xt.meta.canDelete&&n.createElement(pr.b,null))))}const Qr={updateTimeZone:Ls.tM,updateWeekStart:Ls.f4},Nr=(0,h.connect)(null,Qr)(sr);var Hs=e(62577),Do=e(60829);function oo({dashboard:xt,sectionNav:St}){const[Xt,Qt]=(0,n.useState)(JSON.stringify(xt.getSaveModelClone(),null,2)),sn=s.config.featureToggles.dockedMegaMenu?St.node.parentItem:void 0,bn=async()=>{await(0,on.h4)().saveJSONDashboard(Xt),Do.H.reloadPage()},Bn=(0,S.wW)(vr);return n.createElement(m.T,{navModel:St,pageNav:sn},n.createElement("div",{className:Bn.wrapper},n.createElement(d.cC,{i18nKey:"dashboard-settings.json-editor.subtitle"},"The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on."),n.createElement(Hs.p,{value:Xt,language:"json",showMiniMap:!0,showLineNumbers:!0,onBlur:Qt,containerStyles:Bn.codeEditor}),xt.meta.canSave&&n.createElement("div",null,n.createElement(g.zx,{type:"submit",onClick:bn},n.createElement(d.cC,{i18nKey:"dashboard-settings.json-editor.save-button"},"Save changes")))))}const vr=xt=>({wrapper:(0,y.css)({display:"flex",height:"100%",flexDirection:"column",gap:xt.spacing(2)}),codeEditor:(0,y.css)({flexGrow:1})});var Bo=e(47020),Ms=e(7042);const is=({dashboard:xt,onNew:St,onEdit:Xt})=>{const Qt=(0,S.wW)(ao),[sn,bn]=(0,n.useState)(xt.links),Bn=(ta,ra)=>{xt.links=Ma.moveItemImmutably(sn,ta,ta+ra),bn(xt.links)},_n=(ta,ra)=>{xt.links=[...sn,{...ta}],bn(xt.links)},jn=ta=>{xt.links=[...sn.slice(0,ta),...sn.slice(ta+1)],bn(xt.links)};return xt.links.length===0?n.createElement("div",null,n.createElement(ze.Z,{onClick:St,title:"There are no dashboard links added yet",buttonIcon:"link",buttonTitle:"Add dashboard link",infoBoxTitle:"What are dashboard links?",infoBox:{__html:"<p>Dashboard Links allow you to place links to other dashboards and web sites directly below the dashboard header.</p>"}})):n.createElement(n.Fragment,null,n.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Type"),n.createElement("th",null,"Info"),n.createElement("th",{colSpan:3}))),n.createElement("tbody",null,sn.map((ta,ra)=>n.createElement("tr",{key:`${ta.title}-${ra}`},n.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>Xt(ra)},n.createElement(O.J,{name:"external-link-alt"})," \xA0 ",ta.type),n.createElement("td",{role:"gridcell"},n.createElement(M.Lh,null,ta.title&&n.createElement("span",{className:Qt.titleWrapper},ta.title),ta.type==="link"&&n.createElement("span",{className:Qt.urlWrapper},ta.url),ta.type==="dashboards"&&n.createElement(Ms.P,{tags:ta.tags??[]}))),n.createElement("td",{style:{width:"1%"},role:"gridcell"},ra!==0&&n.createElement(x.h,{name:"arrow-up",onClick:()=>Bn(ra,-1),tooltip:"Move link up"})),n.createElement("td",{style:{width:"1%"},role:"gridcell"},sn.length>1&&ra!==sn.length-1?n.createElement(x.h,{name:"arrow-down",onClick:()=>Bn(ra,1),tooltip:"Move link down"}):null),n.createElement("td",{style:{width:"1%"},role:"gridcell"},n.createElement(x.h,{name:"copy",onClick:()=>_n(ta,ra),tooltip:"Copy link"})),n.createElement("td",{style:{width:"1%"},role:"gridcell"},n.createElement(ts.m,{"aria-label":`Delete link with title "${ta.title}"`,size:"sm",onConfirm:()=>jn(ra)})))))),n.createElement(ds,{onClick:St},"New link"))},ao=()=>({titleWrapper:(0,y.css)`
    width: 20vw;
    text-overflow: ellipsis;
    overflow: hidden;
  `,urlWrapper:(0,y.css)`
    width: 40vw;
    text-overflow: ellipsis;
    overflow: hidden;
  `});function Na({dashboard:xt,sectionNav:St,editIndex:Xt}){const[Qt,sn]=(0,n.useState)(!1),bn=()=>{sn(!1),i.E1.partial({editIndex:void 0})},Bn=()=>{xt.links=[...xt.links,{...Bo.zA}],sn(!0),i.E1.partial({editIndex:xt.links.length-1})},_n=ta=>{sn(!1),i.E1.partial({editIndex:ta})},jn=Xt!==void 0;let Sa;if(s.config.featureToggles.dockedMegaMenu&&(Sa=St.node.parentItem),jn&&(Sa={text:Qt?"New link":"Edit link",subTitle:Qt?"Create a new link on your dashboard":"Edit a specific link of your dashboard"},s.config.featureToggles.dockedMegaMenu)){const Oa=St.node.url;Sa.parentItem=St.node.parentItem&&{...St.node.parentItem,url:Oa}}return n.createElement(m.T,{navModel:St,pageNav:Sa},!jn&&n.createElement(is,{dashboard:xt,onNew:Bn,onEdit:_n}),jn&&n.createElement(Bo.fD,{dashboard:xt,editLinkIdx:Xt,onGoBack:bn}))}var Wa=e(49415);const zn=10;class Mt extends n.PureComponent{constructor(St){super(St),this.getVersions=(Xt=!1)=>{this.setState({isAppending:Xt}),Wa.K8.getHistoryList(this.props.dashboard,{limit:this.limit,start:this.start}).then(Qt=>{this.setState({isLoading:!1,versions:[...this.state.versions,...this.decorateVersions(Qt)]}),this.start+=this.limit}).catch(Qt=>console.log(Qt)).finally(()=>this.setState({isAppending:!1}))},this.getDiff=async()=>{const Xt=this.state.versions.filter(jn=>jn.checked),[Qt,sn]=Xt,bn=Qt.version===this.props.dashboard.version;this.setState({isLoading:!0});const Bn=await Wa.K8.getDashboardVersion(this.props.dashboard.uid,sn.version),_n=await Wa.K8.getDashboardVersion(this.props.dashboard.uid,Qt.version);this.setState({baseInfo:sn,isLoading:!1,isNewLatest:bn,newInfo:Qt,viewMode:"compare",diffData:{lhs:Bn.data,rhs:_n.data}})},this.decorateVersions=Xt=>Xt.map(Qt=>({...Qt,createdDateString:this.props.dashboard.formatDate(Qt.created),ageString:this.props.dashboard.getRelativeTime(Qt.created),checked:!1})),this.onCheck=(Xt,Qt)=>{this.setState({versions:this.state.versions.map(sn=>sn.id===Qt?{...sn,checked:Xt.currentTarget.checked}:sn)})},this.reset=()=>{this.setState({baseInfo:void 0,diffData:{lhs:{},rhs:{}},isNewLatest:!1,newInfo:void 0,versions:this.state.versions.map(Xt=>({...Xt,checked:!1})),viewMode:"list"})},this.limit=zn,this.start=0,this.state={isAppending:!0,isLoading:!0,versions:[],viewMode:"list",isNewLatest:!1,diffData:{lhs:{},rhs:{}}}}componentDidMount(){this.getVersions()}isLastPage(){return this.state.versions.find(St=>St.version===1)}render(){const{versions:St,viewMode:Xt,baseInfo:Qt,newInfo:sn,isNewLatest:bn,isLoading:Bn,diffData:_n}=this.state,jn=St.filter(Oa=>Oa.checked).length===2,Sa=St.length>1,ta=St.length>=this.limit,ra=s.config.featureToggles.dockedMegaMenu?this.props.sectionNav.node.parentItem:void 0;return Xt==="compare"?n.createElement(m.T,{navModel:this.props.sectionNav,pageNav:ra},n.createElement(Wa.Cs,{onClick:this.reset,baseVersion:Qt?.version,newVersion:sn?.version,isNewLatest:bn}),Bn?n.createElement(xr,{msg:"Fetching changes\u2026"}):n.createElement(Wa.U$,{newInfo:sn,baseInfo:Qt,isNewLatest:bn,diffData:_n})):n.createElement(m.T,{navModel:this.props.sectionNav,pageNav:ra},Bn?n.createElement(xr,{msg:"Fetching history list\u2026"}):n.createElement(Wa.Sd,{versions:St,onCheck:this.onCheck,canCompare:jn}),this.state.isAppending&&n.createElement(xr,{msg:"Fetching more entries\u2026"}),Sa&&n.createElement(Wa.R1,{hasMore:ta,canCompare:jn,getVersions:this.getVersions,getDiff:this.getDiff,isLastPage:!!this.isLastPage()}))}}const xr=({msg:xt})=>n.createElement(M.Lh,null,n.createElement(T.$,null),n.createElement("em",null,xt)),wo=()=>i.E1.partial({editview:null,editIndex:null});function dr({dashboard:xt,editview:St,pageNav:Xt,sectionNav:Qt}){const[sn,bn]=(0,n.useState)(0);(0,n.useEffect)(()=>{xt.events.subscribe(v.hS,()=>bn(us=>us+1))},[xt]);const Bn=(0,n.useMemo)(()=>Wr(xt),[xt,sn]),_n=()=>{xt.meta.hasUnsavedFolderChange=!1},jn=Bn.find(us=>us.id===St)??Bn[0],Sa=f.contextSrv.hasEditPermissionInFolders,ta=xt.meta.canSave,ra=(0,a.TH)(),Oa=lo(ra),Ts=io(Xt,Qt,Bn,jn,ra),Ja="sm",Ks=[n.createElement(g.zx,{"data-testid":r.wl.pages.Dashboard.Settings.Actions.close,variant:"secondary",key:"close",fill:"outline",size:Ja,onClick:wo},"Close"),Sa&&n.createElement(qt.t,{dashboard:xt,onSaveSuccess:_n,variant:"secondary",key:"save as",size:Ja}),ta&&n.createElement(qt.i,{dashboard:xt,onSaveSuccess:_n,key:"Save",size:Ja})];return n.createElement(n.Fragment,null,n.createElement(l.A,{actions:n.createElement(u.R,{alignment:"right"},Ks)}),n.createElement(jn.component,{sectionNav:Ts,dashboard:xt,editIndex:Oa}))}function Wr(xt){const St=[],Xt=(0,d.t)("dashboard-settings.general.title","General");xt.meta.canEdit&&(St.push({title:Xt,id:"settings",icon:"sliders-v-alt",component:Nr}),St.push({title:(0,d.t)("dashboard-settings.annotations.title","Annotations"),id:"annotations",icon:"comment-alt",component:Ss,subTitle:"Annotation queries return events that can be visualized as event markers in graphs across the dashboard."}),St.push({title:(0,d.t)("dashboard-settings.variables.title","Variables"),id:"templating",icon:"calculator-alt",component:Zt,subTitle:"Variables can make your dashboard more dynamic and act as global filters."}),St.push({title:(0,d.t)("dashboard-settings.links.title","Links"),id:"links",icon:"link",component:Na})),xt.meta.canMakeEditable&&St.push({title:Xt,icon:"sliders-v-alt",id:"settings",component:Uo}),xt.id&&xt.meta.canSave&&St.push({title:(0,d.t)("dashboard-settings.versions.title","Versions"),id:"versions",icon:"history",component:Mt});const Qt=(0,d.t)("dashboard-settings.permissions.title","Permissions");return xt.id&&xt.meta.canAdmin&&f.contextSrv.hasPermission(E.AccessControlAction.DashboardsPermissionsRead)&&St.push({title:Qt,id:"permissions",icon:"lock",component:An}),St.push({title:(0,d.t)("dashboard-settings.json-editor.title","JSON Model"),id:"dashboard_json",icon:"arrow",component:oo}),St}function ur(xt,St){return{...xt,parentItem:xt.parentItem?ur(xt.parentItem,St):St}}function io(xt,St,Xt,Qt,sn){const bn={text:(0,d.t)("dashboard-settings.settings.title","Settings"),children:[],icon:"apps",hideFromBreadcrumbs:!0};c.default.featureToggles.dockedMegaMenu&&(bn.hideFromBreadcrumbs=!1,bn.url=o.u.getUrlForPartial(sn,{editview:"settings",editIndex:null})),bn.children=Xt.map(_n=>({text:_n.title,icon:_n.icon,id:_n.id,url:o.u.getUrlForPartial(sn,{editview:_n.id,editIndex:null}),active:_n===Qt,parentItem:bn,subTitle:_n.subTitle}));const Bn=ur(xt,St.node);return bn.parentItem=Bn,{main:bn,node:bn.children.find(_n=>_n.active)}}function Uo({dashboard:xt,sectionNav:St}){return n.createElement(m.T,{navModel:St},n.createElement("div",{className:"dashboard-settings__header"},"Dashboard not editable"),n.createElement(g.zx,{type:"submit",onClick:()=>xt.makeEditable()},"Make editable"))}function lo(xt){const St=new URLSearchParams(xt.search).get("editIndex");if(St!=null)return parseInt(St,10)}},66643:(G,A,e)=>{"use strict";e.d(A,{b:()=>D});var n=e(85960),a=e(93349),o=e(29165),r=e(95329),i=e(93657),g=e(66681),u=e(56375),l=e(36752),m=e(31622),c=e(91),d=e(77980),f=e(7288),E=e(67954),v=e(63319),h=e(32737);const p={cleanUpDashboardAndVariables:v.lw},s=(0,l.connect)(null,p),y=({hideModal:M,cleanUpDashboardAndVariables:T,dashboard:R})=>{const O=R.meta.provisioned,[,x]=(0,m.default)(async()=>{await(0,h.iM)(R.uid,!0),T(),M(),c.E1.replace("/")},[M]),I=C(R.panels,R.title);return O?n.createElement(b,{hideModal:M,provisionedId:R.meta.provisionedExternalId}):n.createElement(d.s,{isOpen:!0,body:I,onConfirm:x,onDismiss:M,title:"Delete",icon:"trash-alt",confirmText:"Delete"})},C=(M,T)=>{const R=(0,u.sumBy)(M,O=>O.alert?1:0);return R>0&&!E.config.unifiedAlertingEnabled?n.createElement(n.Fragment,null,n.createElement("p",null,"Do you want to delete this dashboard?"),n.createElement("p",null,"This dashboard contains ",R," alert",R>1?"s":"",". Deleting this dashboard also deletes those alerts.")):n.createElement(n.Fragment,null,n.createElement("p",null,"Do you want to delete this dashboard?"),n.createElement("p",null,T))},b=({hideModal:M,provisionedId:T})=>n.createElement(f.u,{isOpen:!0,title:"Cannot delete provisioned dashboard",icon:"trash-alt",onDismiss:M,className:(0,g.css)`
      width: 500px;
    `},n.createElement("p",null,"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."),n.createElement("p",null,n.createElement("i",null,"See"," ",n.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),n.createElement("br",null),"File path: ",T),n.createElement(f.u.ButtonRow,null,n.createElement(o.zx,{variant:"primary",onClick:M},"OK"))),S=s(y),D=()=>{const M=(0,i.h4)().getCurrent();return n.createElement(a.JY,null,({showModal:T,hideModal:R})=>n.createElement(o.zx,{variant:"destructive",onClick:()=>{T(S,{dashboard:M,hideModal:R})},"aria-label":"Dashboard settings page delete dashboard button"},n.createElement(r.cC,{i18nKey:"dashboard-settings.dashboard-delete-button"},"Delete Dashboard")))}},28879:(G,A,e)=>{"use strict";e.d(A,{v:()=>j,Z:()=>U});var n=e(66681),a=e(85960),o=e(47257),r=e(29165),i=e(40377),g=e(57652),u=e(75682),l=e(14607),m=e(49199),c=e(74042),d=e(24956),f=e(75064),E=e(97666),v=e(79055);const h=({currentPage:_,numberOfPages:H,onNavigate:z,hideWhenSinglePage:K,className:Y})=>{const k=(0,o.wW)(p);return K&&H<=1?null:a.createElement("div",{className:(0,n.cx)(k.wrapper,Y)},a.createElement(f.h,{name:"angle-left",size:"md",tooltip:"Previous",onClick:()=>z(_-1),disabled:_===1}),_," of ",H,a.createElement(f.h,{name:"angle-right",size:"md",tooltip:"Next",onClick:()=>z(_+1),disabled:_===H}))},p=_=>({wrapper:(0,n.css)({display:"flex",flexDirection:"row",gap:16,userSelect:"none"})});var s=e(81445),y=e(80203),C=e(45465),b=e(93991),S=e(34802),D=(_=>(_.IDLE="idle",_.GENERATING="generating",_.COMPLETED="completed",_))(D||{});const M=1e4;function T(_=S.YB,H=1){const[z,K]=(0,a.useState)([]),[Y,k]=(0,a.useState)(!1),[q,X]=(0,a.useState)(""),[te,se]=(0,a.useState)("idle"),[de,re]=(0,a.useState)(),{error:fe}=(0,b.iG)(),ie=(0,a.useCallback)(Ue=>{se("idle"),K([]),k(!1),re(Ue),fe("Failed to generate content using OpenAI","Please try again or if the problem persists, contact your organization admin."),console.error(Ue),(0,C.H)(Ue,{messages:JSON.stringify(z),model:_,temperature:String(H)})},[z,_,H,fe]),{error:oe,value:ue}=(0,s.Z)(async()=>await(0,S.K_)(),[S.K_]),{error:me,value:ge}=(0,s.Z)(async()=>{if(!ue||!z.length)return{enabled:ue};se("generating"),re(void 0);const Ue=y.lA({model:_,temperature:H,messages:z}).pipe(y.XE());return{enabled:ue,stream:Ue.subscribe({next:X,error:ie,complete:()=>{se("completed"),setTimeout(()=>{se("idle")}),K([]),k(!1),re(void 0)}})}},[z,ue]);return(0,a.useEffect)(()=>()=>{ge?.stream&&ge.stream.unsubscribe()},[ge]),(0,a.useEffect)(()=>{Y&&(ge?.stream?.unsubscribe(),se("idle"),k(!1),re(void 0),K([]))},[Y,ge?.stream]),(0,a.useEffect)(()=>{let Ue;return te==="generating"&&q===""&&(Ue=setTimeout(()=>{ie(new Error(`OpenAI stream timed out after ${M}ms`))},M)),()=>{Ue&&clearTimeout(Ue)}},[te,q,ie]),(me||oe)&&re(me||oe),{setMessages:K,setStopGeneration:k,messages:z,reply:q,streamStatus:te,error:de,value:ge}}const R=({history:_,index:H,reply:z,streamStatus:K,onNavigate:Y})=>{const k=(0,o.wW)(O),q=_.length,X=()=>z&&K!==D.IDLE?z:_[H-1];return a.createElement(a.Fragment,null,a.createElement(h,{currentPage:H,numberOfPages:q,onNavigate:Y,hideWhenSinglePage:!0,className:k.paginationWrapper}),a.createElement("div",{className:k.contentWrapper},a.createElement(i.x,{element:"p",color:"secondary"},X())))},O=_=>({paginationWrapper:(0,n.css)({display:"flex",flexDirection:"row",justifyContent:"flex-end",marginTop:15}),contentWrapper:(0,n.css)({display:"flex",flexBasis:"100%",flexGrow:3,whiteSpace:"pre-wrap",marginTop:20,height:110,overflowY:"scroll"})}),x=({onSuggestionClick:_,isGenerating:H})=>{const z=(0,o.wW)(I);return a.createElement("div",{className:z.quickSuggestionsWrapper},a.createElement(r.zx,{onClick:()=>_(S.VN.Shorter),size:"sm",variant:"secondary",disabled:H},S.VN.Shorter),a.createElement(r.zx,{onClick:()=>_(S.VN.MoreDescriptive),size:"sm",variant:"secondary",disabled:H},S.VN.MoreDescriptive),a.createElement(r.zx,{onClick:()=>_(S.VN.Regenerate),size:"sm",variant:"secondary",disabled:H},S.VN.Regenerate))},I=_=>({quickSuggestionsWrapper:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"wrap",flexGrow:1,gap:8,paddingTop:10})});var L=e(33941);const P=.5,N=({eventTrackingSrc:_,history:H,messages:z,onApplySuggestion:K,updateHistory:Y})=>{const k=(0,o.wW)(F),[q,X]=(0,a.useState)(1),[te,se]=(0,a.useState)(!1),[de,re]=(0,a.useState)(""),{setMessages:fe,setStopGeneration:ie,reply:oe,streamStatus:ue,error:me}=T(S.YB,P),ge=ue===D.GENERATING,Ue=(Me,He)=>(0,L.TU)(_,Me,He);(0,a.useEffect)(()=>{!ge&&oe!==""&&X(1)},[ge,oe]),(0,a.useEffect)(()=>{ue===D.COMPLETED&&Y((0,S.Is)(oe))},[ue,oe,Y]),(0,a.useEffect)(()=>{me&&se(!0),ue===D.GENERATING&&se(!1)},[me,ue]);const De=Me=>{Te(Me),Ue(L.k_.customFeedback,{customFeedback:Me})},Pe=()=>{ge?(ie(!0),oe!==""&&Y((0,S.Is)(oe))):K(H[q-1])},ye=Me=>{X(Me),Ue(Me>q?L.k_.backHistoryItem:L.k_.forwardHistoryItem)},Te=Me=>{Me!==S.VN.Regenerate&&(z=[...z,...(0,S.KS)(H[q],Me)]),fe(z),Me in S.VN&&Ue(L.k_.quickFeedback,{quickFeedbackItem:Me})},nt=Me=>Me.key==="Enter"&&De(de),ct=Me=>re(Me.currentTarget.value),he=()=>De(de),xe=()=>Ue(L.k_.linkToDocs);return a.createElement("div",{className:k.container},te&&a.createElement("div",null,a.createElement(m.b,{title:""},a.createElement(c.wc,null,a.createElement("div",null,"Sorry, I was unable to complete your request. Please try again.")))),a.createElement(d.I,{placeholder:"Tell AI what to do next...",suffix:a.createElement(f.h,{name:"corner-down-right-alt",variant:"secondary","aria-label":"Send custom feedback",onClick:he,disabled:de===""}),value:de,onChange:ct,onKeyDown:nt}),a.createElement("div",{className:k.actions},a.createElement(x,{onSuggestionClick:Te,isGenerating:ge}),a.createElement(R,{history:H,index:q,onNavigate:ye,reply:(0,S.Is)(oe),streamStatus:ue})),a.createElement("div",{className:k.applySuggestion},a.createElement(c.Lh,{justify:"flex-end"},a.createElement(r.zx,{icon:ge?"fa fa-spinner":"check",onClick:Pe},ge?U:"Apply"))),a.createElement("div",{className:k.footer},a.createElement(E.J,{name:"exclamation-circle","aria-label":"exclamation-circle",className:k.infoColor}),a.createElement(i.x,{variant:"bodySmall",color:"secondary"},"This content is AI-generated using the"," ",a.createElement(v.h,{variant:"bodySmall",href:"https://grafana.com/docs/grafana-cloud/alerting-and-irm/machine-learning/llm-plugin/",external:!0,onClick:xe},"Grafana LLM plugin"))))},F=_=>({container:(0,n.css)({display:"flex",flexDirection:"column",width:520,height:250,paddingBottom:35}),applySuggestion:(0,n.css)({marginTop:_.spacing(1)}),actions:(0,n.css)({display:"flex",flexDirection:"row",flexWrap:"wrap"}),footer:(0,n.css)({position:"absolute",bottom:0,left:0,width:"100%",display:"flex",flexDirection:"row",margin:0,padding:_.spacing(1),paddingLeft:_.spacing(2),alignItems:"center",gap:_.spacing(1),borderTop:`1px solid ${_.colors.border.weak}`,marginTop:_.spacing(2)}),infoColor:(0,n.css)({color:_.colors.info.main})}),U="Stop generating",j=({text:_="Auto-generate",toggleTipTitle:H="",onClick:z,model:K=S.YB,messages:Y,onGenerate:k,temperature:q=1,eventTrackingSrc:X,disabled:te})=>{const se=(0,o.wW)(V),{messages:de,setMessages:re,setStopGeneration:fe,reply:ie,value:oe,error:ue,streamStatus:me}=T(K,q),[ge,Ue]=(0,a.useState)([]),[De,Pe]=(0,a.useState)(!0),ye=ge.length>0,Te=me===D.GENERATING&&!ye,nt=te||oe&&!oe.enabled&&!ue,ct=_e=>(0,L.TU)(X,_e),he=_e=>{me===D.GENERATING?fe(!0):ye?Pe&&Pe(!0):(z?.(_e),re(typeof Y=="function"?Y():Y));const qe=ue?L.k_.erroredRetryButton:Te?L.k_.stopGenerationButton:ye?L.k_.improveButton:L.k_.autoGenerateButton;ct(qe)},xe=(0,a.useCallback)(_e=>{ge.indexOf(_e)===-1&&Ue([_e,...ge])},[ge]);if((0,a.useEffect)(()=>{Te&&ie&&k((0,S.Is)(ie))},[me,ie,k,Te]),(0,a.useEffect)(()=>{me===D.COMPLETED&&xe((0,S.Is)(ie))},[ge,me,ie,xe]),!oe?.enabled)return null;const Me=_e=>{ct(L.k_.applySuggestion),k(_e),Pe(!1)},He=()=>{if(!Te)return ue||oe&&!oe?.enabled?"exclamation-circle":"ai"},Ve=()=>{let _e=_;return ue&&(_e="Retry"),Te&&(_e=U),ye&&(_e="Improve"),_e},Oe=a.createElement(r.zx,{icon:He(),onClick:he,fill:"text",size:"sm",disabled:nt,variant:ue?"destructive":"primary"},Ve()),Ne=()=>{if(ye){const _e=a.createElement(i.x,{element:"p"},H);return a.createElement(g.P,{title:_e,content:a.createElement(N,{history:ge,messages:de,onApplySuggestion:Me,updateHistory:xe,eventTrackingSrc:X}),placement:"bottom-start",fitContent:!0,show:De?void 0:!1},Oe)}return Oe};return a.createElement("div",{className:se.wrapper},Te&&a.createElement(u.$,{size:"sm",className:se.spinner}),!ye&&a.createElement(l.u,{show:ue?void 0:!1,interactive:!0,content:"Failed to generate content using OpenAI. Please try again or if the problem persist, contact your organization admin."},Oe),ye&&Ne())},V=_=>({wrapper:(0,n.css)({display:"flex"}),spinner:(0,n.css)({color:_.colors.text.link})})},25971:(G,A,e)=>{"use strict";e.d(A,{_:()=>u});var n=e(85960),a=e(28879),o=e(33941),r=e(34802);const g=`You are an expert in creating Grafana Dashboards.
Your goal is to write a descriptive and concise dashboard description.
You will be given the title and description of the dashboard's panels.
The dashboard description is meant to explain the purpose of the dashboard and what its panels show.
If the dashboard has no panels, the description should be "Empty dashboard"
There should be no numbers in the description except where they are important.
The dashboard description should not have the dashboard title or any quotation marks in it.
The description should be, at most, 300 characters.
Respond with only the description of the dashboard.`,u=({onGenerate:m,dashboard:c})=>{const d=n.useMemo(()=>l(c),[c]);return n.createElement(a.v,{messages:d,onGenerate:m,eventTrackingSrc:o.dG.dashboardDescription,toggleTipTitle:"Improve your dashboard description"})};function l(m){const c=(0,r._v)(m);return[{content:g,role:r.uU.system},{content:`The title of the dashboard is "${m.title}"
${c}`,role:r.uU.system}]}},7800:(G,A,e)=>{"use strict";e.d(A,{n:()=>u});var n=e(85960),a=e(28879),o=e(33941),r=e(34802);const g=`You are an expert in creating Grafana Dashboards.
Your goal is to write a concise dashboard title.
You will be given the title and description of the dashboard's panels.
The dashboard title is meant to say what it shows on one line for users to navigate to it.
If the dashboard has no panels, the title should be "Empty dashboard"
There should be no numbers in the title.
The dashboard title should not have quotation marks in it.
The title should be, at most, 50 characters.
Respond with only the title of the dashboard.`,u=({onGenerate:m,dashboard:c})=>{const d=n.useMemo(()=>l(c),[c]);return n.createElement(a.v,{messages:d,onGenerate:m,eventTrackingSrc:o.dG.dashboardTitle,toggleTipTitle:"Improve your dashboard title"})};function l(m){return[{content:g,role:r.uU.system},{content:`The panels in the dashboard are: ${(0,r._v)(m)}`,role:r.uU.system}]}},33941:(G,A,e)=>{"use strict";e.d(A,{TU:()=>i,dG:()=>o,k_:()=>r});var n=e(43183);const a="dashboards_autogenerate_clicked";var o=(g=>(g.panelDescription="panel-description",g.panelTitle="panel-title",g.dashboardChanges="dashboard-changes",g.dashboardTitle="dashboard-title",g.dashboardDescription="dashboard-description",g.unknown="unknown",g))(o||{}),r=(g=>(g.autoGenerateButton="auto-generate-button",g.erroredRetryButton="errored-retry-button",g.stopGenerationButton="stop-generating-button",g.improveButton="improve-button",g.backHistoryItem="back-history-item",g.forwardHistoryItem="forward-history-item",g.quickFeedback="quick-feedback",g.linkToDocs="link-to-docs",g.customFeedback="custom-feedback",g.applySuggestion="apply-suggestion",g))(r||{});function i(g,u,l){(0,n.ff)(a,{src:g,item:u,...l})}},34802:(G,A,e)=>{"use strict";e.d(A,{YB:()=>h,VN:()=>v,uU:()=>E,xm:()=>s,_v:()=>b,KS:()=>C,wH:()=>S,K_:()=>y,Is:()=>p});var n=e(80203),a=e(83569),o=e(27008);function r(D,M){return D===M?M:Array.isArray(D)&&Array.isArray(M)?u(D,M):i(D)&&i(M)?g(D,M):M}function i(D){return typeof D=="object"&&!Array.isArray(D)&&D!==null}function g(D,M){const T=Object.keys(D),R={};for(const O of T)M.hasOwnProperty(O)&&(Array.isArray(D[O])&&Array.isArray(M[O])||typeof D[O]=="object"&&typeof M[O]=="object"?R[O]=r(D[O],M[O]):R[O]=M[O]);return R}function u(D,M){const T=new Array(D.length).fill(void 0),R=new Set([...Array(D.length).keys()]),O=new Set([...Array(M.length).keys()]);for(let x=0;x<D.length&&O.size!==0;x++){let I=D[x];for(let L=0;L<M.length;L++){if(!O.has(L))continue;let P=M[L];P=r(I,P),JSON.stringify(I)===JSON.stringify(P)&&(R.delete(x),O.delete(L),T[x]=P)}}return l(D,M,T,R,O),T.filter(x=>x!==void 0)}function l(D,M,T,R,O){let x={};O.forEach(L=>{let P=M[L];if(typeof P!="object"||Array.isArray(P)){T.push(P),O.delete(L);return}R.forEach(N=>{let F=D[N];if(typeof F!="object"||Array.isArray(F)){R.delete(N);return}let U=0;for(const j in F){let V=F[j];if(!P.hasOwnProperty(j))continue;let _=P[j];typeof V!="string"&&typeof V!="number"||typeof V!=typeof _||V===_&&(j==="id"&&(U+=1e3),U++)}U!==0&&(x[U]===void 0&&(x[U]=[]),x[U].push([N,L]))})});const I=Object.keys(x).map(Number);I.sort((L,P)=>P-L);for(const L of I){let P=x[L];for(const N of P){const[F,U]=N;R.has(F)&&O.has(U)&&(T[F]=M[U],R.delete(F),O.delete(U))}}for(const L of O)T.push(M[L])}function m(D){const M=D.split(`
`);let T=D[0].startsWith("Index")?4:3,R=M.slice(0,T);const O=/("title"|Title|\{|\}|\[|\])/i;for(let x=T;x<M.length;x++){let I=M[x];(O.test(I)||I.startsWith("+")||I.startsWith("-"))&&R.push(I)}return R.join(`
`)+`
`}function c(D){if(D===null||D==="")return null;if(Array.isArray(D)){const T=D.map(R=>c(R)).filter(R=>R!==null);return T.length>0?T:null}if(typeof D!="object")return D;const M={};for(const T in D){const R=c(D[T]);if(R!==null){if(Array.isArray(R)&&R.length===0||typeof R=="object"&&Object.keys(R).length===0)continue;M[T]=R}}return Object.keys(M).length>0?M:null}function d(D){return JSON.parse(JSON.stringify(D,null,2))}function f(D){let M=d(D.getOriginalDashboard()),T=d(new o.f(M).getSaveModelClone()),R=d(D.getSaveModelClone());T=c(r(M,T)),R=c(r(T,R)),M=c(M);let O=(0,a.ym)("Before migration changes","After migration changes",JSON.stringify(M,null,2),JSON.stringify(T,null,2),"","",{context:20}),x=(0,a.ym)("Before user changes","After user changes",JSON.stringify(T,null,2),JSON.stringify(R,null,2),"","",{context:20});return O=m(O),x=m(x),{migrationDiff:O,userDiff:x}}var E=(D=>(D.system="system",D.user="user",D))(E||{}),v=(D=>(D.Shorter="Even shorter",D.MoreDescriptive="More descriptive",D.Regenerate="Regenerate",D))(v||{});const h="gpt-4",p=D=>D.replace(/^"|"$/g,"");function s(D){const{migrationDiff:M,userDiff:T}=f(D);return{userChanges:T,migrationChanges:M}}async function y(){return n.am().then(D=>D.ok)}const C=(D,M)=>[{role:"system",content:`Your previous response was: ${D}. The user has provided the following feedback: ${M}. Re-generate your response according to the provided feedback.`}];function b(D){const M=(O,x)=>`- Panel ${x}
- Title: ${O.title}${O.description?`
- Description: ${O.description}`:""}`,T=D.panels.map(M);let R;if(T.length<=10)R=`The panels in the dashboard are:
${T.join(`
`)}`;else{const O=D.panels.filter(L=>L.description),x=D.panels.filter(L=>!L.description);let I;O.length>=10?I=O.slice(10).map(M).join(`
`):(I=O.map(M).join(`
`),I+=`
`,I+=x.slice(10-O.length).map(M).join("n")),R=`There are ${T.length} panels.
Due to space constraints, only the information for ten of them is presented.
These ten are not necessarily the first ten, but prioritized to those with descriptions.
The panels in the dashboard are:
${I}`}return R}function S(D){const M=D.getSaveModel(),T=new Set(["id","datasource","title","description","targets","thresholds","type","xaxis","yaxes"]),R=Object.keys(M).reduce((O,x)=>(T.has(x)&&(O[x]=M[x]),O),{});return JSON.stringify(R,null,2)}},71851:(G,A,e)=>{"use strict";e.d(A,{$R:()=>v,S$:()=>E,XJ:()=>f});var n=e(56375),a=e(75520),o=e(79739),r=e(34921),i=e(12537),g=e(23757),u=e(90857),l=e(43310),m=e(58309);function c(){const C="ABCDEFGHIJKLMNOPQRSTUVWXYZ",b="abcdefghijklmnopqrstuvwxyz",S=C.length,D=new Map;return M=>{const T=D.get(M);if(T!=null)return T;const R=[...M].map(O=>O.toLowerCase()&&O!==O.toUpperCase()?b.charAt(Math.floor(Math.random()*S)):O.toUpperCase()&&O!==O.toUpperCase()?C.charAt(Math.floor(Math.random()*S)):O).join("");return D.set(M,R),R}}function d(C,b){if(!(b.labels||b.names||b.values))return C;const S=new Set(["time","value","exemplar","traceid","id","uid","uuid","__name__","le","name"]),D=c();return C.map(M=>{let{schema:T,data:R}=M;if(T&&R){if(b.labels){for(const O of T.fields)if(O.labels){const x={};for(const[I,L]of Object.entries(O.labels))x[I]=D(L);O.labels=x}}if(b.names)for(const O of T.fields)O.name?.length&&!S.has(O.name.toLowerCase())&&(O.name=D(O.name));b.values&&T.fields.forEach((O,x)=>{if(O.type===m.fS.string&&R){const I=R.values[x].map(L=>D(String(L)));R.values[x]=I}})}return{schema:T,data:R}})}function f(C){const b=[];if(C?.series)for(const S of C.series)b.push((0,o.Y)(S));if(C?.annotations)for(const S of C.annotations){const D=(0,o.Y)(S);D.schema?.meta||(D.schema.meta={}),D.schema.meta.dataTopic=r.w5.Annotations,b.push(D)}return b}function E(C,b){const S=C.getSaveModel(),D={panelType:S.type,datasource:"??"},M=`${u.config.buildInfo.version} (${u.config.buildInfo.commit})`;let T=`| Key | Value |
|--|--|
| Panel | ${D.panelType} @ ${S.pluginVersion??M} |
| Grafana | ${M} // ${u.config.buildInfo.edition} |
`;return b&&(T+="<details><summary>Panel debug snapshot dashboard</summary>\n\n```json\n"+b+"\n```\n</details>"),T}async function v(C,b,S){const D=C.getSaveModel(),M=(0,n.cloneDeep)(y),T={panelType:D.type,datasource:"??"},R=await(0,a.z)(C.getQueryRunner().getData({withFieldConfig:!1,withTransforms:!1})),O=C.datasource,x=d(f(R),b),I=`${u.config.buildInfo.version} (${u.config.buildInfo.commit})`,L=D?.targets??[],P=`<table width="100%">
    <tr>
      <th width="2%">Panel</th>
      <td >${T.panelType} @ ${D.pluginVersion??I}</td>
    </tr>
    <tr>
      <th>Queries</th>
      <td>${L.map(N=>{const F=N.datasource??O;return`${N.refId}[${F?.type}]`}).join(", ")}</td>
    </tr>
    ${h(D)}
    ${p(R,x)}
    ${s(R)}
    <tr>
      <th>Grafana</th>
      <td>${I} // ${u.config.buildInfo.edition}</td>
    </tr>
  </table>`.trim();if(M.panels[0]={...D,...M.panels[0],targets:[{refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:l.hR.Snapshot,snapshot:x}]},D.transformations?.length){const N=M.panels[M.panels.length-1];N.title=N.title+" (after transformations)";const F=(0,n.cloneDeep)(N);F.id=100,F.title="Data (before transformations)",F.gridPos.w=24,F.targets[0].withTransforms=!1,M.panels.push(F)}return R.annotations?.length&&M.panels.push({id:7,gridPos:{h:6,w:24,x:0,y:20},type:"table",title:"Annotations",datasource:{type:"datasource",uid:"-- Dashboard --"},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,topic:r.w5.Annotations,refId:"A"}]}),M.panels[1].options.content=P,M.panels[2].options.content=JSON.stringify(D,null,2),M.title=`Debug: ${D.title} // ${(0,i.dq)(new Date)}`,M.tags=["debug",`debug-${T.panelType}`],M.time={from:S.from.toISOString(),to:S.to.toISOString()},M}function h(C){return C.transformations?`<tr>
      <th>Transform</th>
      <td>${C.transformations.map(b=>b.id).join(", ")}</td>
  </tr>`:""}function p(C,b){let S=C.series.length??0,D=0,M=0;for(const T of C.series)D+=T.fields.length,M+=T.length;return`<tr><th>Data</th><td>${C.state!==g.Gu.Done?C.state:""} ${S} frames, ${D} fields, ${M} rows </td></tr>`}function s(C){return C.annotations?.length?`<tr>
  <th>Annotations</th>
  <td>${C.annotations.map((b,S)=>`<span>${b.length}</span>`)}</td>
</tr>`:""}const y={panels:[{id:2,title:"Reproduced with embedded data",datasource:{type:"grafana",uid:"grafana"},gridPos:{h:13,w:15,x:0,y:0}},{gridPos:{h:7,w:9,x:15,y:0},id:5,options:{content:"...",mode:"html"},title:"Debug info",type:"text"},{id:6,title:"Original Panel JSON",type:"text",gridPos:{h:13,w:9,x:15,y:7},options:{content:"...",mode:"code",code:{language:"json",showLineNumbers:!0,showMiniMap:!0}}},{id:3,title:"Data from panel above",type:"table",datasource:{type:"datasource",uid:"-- Dashboard --"},gridPos:{h:7,w:15,x:0,y:13},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,refId:"A"}]}],schemaVersion:37}},10798:(G,A,e)=>{"use strict";e.d(A,{L1:()=>l,WM:()=>m,pV:()=>u});var n=e(85960),a=e(84041),o=e(81502),r=e(95329),i=e(48116),g=e(38685);const u=c=>(0,a.Z)(async()=>l(c),[c]).value;async function l(c){const d=c?.request?.targets||[];if(c&&c.series&&d.length){for(const f of c.series)if(f.meta&&f.meta.custom){const E=await(0,o.F)().get(d[0].datasource);if(E&&E.components?.MetadataInspector)return E}}}const m=(c,d,f,E,v)=>(0,n.useMemo)(()=>{const h=[];return(0,g.sY)(f)&&(h.push({label:(0,r.t)("dashboard.inspect.data-tab","Data"),value:i.q.Data}),h.push({label:(0,r.t)("dashboard.inspect.stats-tab","Stats"),value:i.q.Stats})),v&&h.push({label:(0,r.t)("dashboard.inspect.meta-tab","Meta data"),value:i.q.Meta}),h.push({label:(0,r.t)("dashboard.inspect.json-tab","JSON"),value:i.q.JSON}),E&&h.push({label:(0,r.t)("dashboard.inspect.error-tab","Error"),value:i.q.Error}),d.meta.canEdit&&(0,g.sY)(f)&&h.push({label:(0,r.t)("dashboard.inspect.query-tab","Query"),value:i.q.Query}),h},[f,v,d,E])},47020:(G,A,e)=>{"use strict";e.d(A,{fD:()=>E,xy:()=>d,zA:()=>m});var n=e(85960),a=e(20519),o=e(24956),r=e(27436),i=e(6089),g=e(96525),u=e(55973),l=e(29165);const m={icon:"external link",title:"New link",tooltip:"",type:"dashboards",url:"",asDropdown:!1,tags:[],targetBlank:!1,keepTime:!1,includeVars:!1},c=[{value:"dashboards",label:"Dashboards"},{value:"link",label:"Link"}],d={"external link":"external-link-alt",dashboard:"apps",question:"question-circle",info:"info-circle",bolt:"bolt",doc:"file-alt",cloud:"cloud"},f=Object.keys(d).map(v=>({label:v,value:v})),E=({editLinkIdx:v,dashboard:h,onGoBack:p})=>{const[s,y]=(0,n.useState)(v!==null?h.links[v]:m),C=R=>{const O=[...h.links];O.splice(v,1,R),h.links=O,y(R)},b=R=>{C({...s,tags:R})},S=R=>{const O={...s,type:R.value};O.type==="dashboards"?(O.url="",O.tooltip=""):O.tags=[],C(O)},D=R=>{C({...s,icon:R.value})},M=R=>{const O=R.currentTarget;C({...s,[O.name]:O.type==="checkbox"?O.checked:O.value})},T=s.title===m.title;return n.createElement("div",{style:{maxWidth:"600px"}},n.createElement(a.g,{label:"Title"},n.createElement(o.I,{name:"title",id:"title",value:s.title,onChange:M,autoFocus:T})),n.createElement(a.g,{label:"Type"},n.createElement(r.Ph,{inputId:"link-type-input",value:s.type,options:c,onChange:S})),s.type==="dashboards"&&n.createElement(n.Fragment,null,n.createElement(a.g,{label:"With tags"},n.createElement(i.B,{tags:s.tags,onChange:b}))),s.type==="link"&&n.createElement(n.Fragment,null,n.createElement(a.g,{label:"URL"},n.createElement(o.I,{name:"url",value:s.url,onChange:M})),n.createElement(a.g,{label:"Tooltip"},n.createElement(o.I,{name:"tooltip",value:s.tooltip,onChange:M,placeholder:"Open dashboard"})),n.createElement(a.g,{label:"Icon"},n.createElement(r.Ph,{value:s.icon,options:f,onChange:D}))),n.createElement(g.s,{label:"Options",isOpen:!0},s.type==="dashboards"&&n.createElement(a.g,null,n.createElement(u.X,{label:"Show as dropdown",name:"asDropdown",value:s.asDropdown,onChange:M})),n.createElement(a.g,null,n.createElement(u.X,{label:"Include current time range",name:"keepTime",value:s.keepTime,onChange:M})),n.createElement(a.g,null,n.createElement(u.X,{label:"Include current template variable values",name:"includeVars",value:s.includeVars,onChange:M})),n.createElement(a.g,null,n.createElement(u.X,{label:"Open link in new tab",name:"targetBlank",value:s.targetBlank,onChange:M}))),n.createElement(l.zx,{onClick:p},"Apply"))}},91480:(G,A,e)=>{"use strict";e.d(A,{u:()=>d});var n=e(66681),a=e(85960),o=e(6753),r=e(92369),i=e(47257),g=e(66600),u=e(29165),l=e(763),m=e(53301);const c="showCategory",d=a.memo(({id:v,title:h,children:p,forceOpen:s,isOpenDefault:y,renderTitle:C,className:b,itemsCount:S,isNested:D=!1,sandboxId:M})=>{const T=y!==!1,[R,O]=(0,o.Z)(E(v),{isExpanded:T}),x=(0,i.wW)(f),[I,L]=(0,l.K)(),[P,N]=(0,a.useState)(R?.isExpanded??T),F=(0,a.useRef)(0),U=(0,a.useRef)(null),j=I[c]===v;(0,a.useEffect)(()=>{F.current&&Date.now()-F.current<200||(j||s)&&(P||N(!0),j&&U.current?.scrollIntoView())},[s,P,j]);const V=(0,a.useCallback)(()=>{F.current=Date.now(),L({[c]:P?void 0:v},!0),O({isExpanded:!P}),N(!P)},[O,N,L,P,v]);C||(C=function(Y){return Y||S===void 0||S===0?h:a.createElement("span",null,h," ",a.createElement(g.A,{value:S}))});const _=(0,n.cx)({[x.box]:!0,[x.boxNestedExpanded]:D&&P},b,"options-group"),H=(0,n.cx)(x.header,{[x.headerExpanded]:P,[x.headerNested]:D}),z=(0,n.cx)(x.body,{[x.bodyNested]:D});return a.createElement("div",{className:_,"data-testid":"options-category","data-plugin-sandbox":M,"aria-label":r.wl.components.OptionsGroup.group(v),ref:U},a.createElement("div",{className:H,onClick:V},a.createElement(u.zx,{"aria-label":r.wl.components.OptionsGroup.toggle(v),type:"button",fill:"text",size:"sm",variant:"secondary","aria-expanded":P,className:x.toggleButton,icon:P?"angle-down":"angle-right",onClick:V}),a.createElement("h6",{id:`button-${v}`,className:x.title},C(P))),P&&a.createElement("div",{className:z,id:v,"aria-labelledby":`button-${v}`},p))});d.displayName="OptionsPaneCategory";const f=v=>({box:(0,n.css)`
      border-top: 1px solid ${v.colors.border.weak};
    `,boxNestedExpanded:(0,n.css)`
      margin-bottom: ${v.spacing(2)};
    `,title:(0,n.css)`
      flex-grow: 1;
      overflow: hidden;
      line-height: 1.5;
      font-size: 1rem;
      padding-left: 6px;
      font-weight: ${v.typography.fontWeightMedium};
      margin: 0;
    `,header:(0,n.css)`
      display: flex;
      cursor: pointer;
      align-items: center;
      padding: ${v.spacing(.5)};
      color: ${v.colors.text.primary};
      font-weight: ${v.typography.fontWeightMedium};

      &:hover {
        background: ${v.colors.emphasize(v.colors.background.primary,.03)};
      }
    `,toggleButton:(0,n.css)`
      align-self: baseline;
    `,headerExpanded:(0,n.css)`
      color: ${v.colors.text.primary};
    `,headerNested:(0,n.css)`
      padding: ${v.spacing(.5,0,.5,0)};
    `,body:(0,n.css)`
      padding: ${v.spacing(1,2,1,4)};
    `,bodyNested:(0,n.css)`
      position: relative;
      padding-right: 0;
      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 8px;
        width: 1px;
        height: 100%;
        background: ${v.colors.border.weak};
      }
    `}),E=v=>`${m.jy}.optionGroup[${v}]`},44690:(G,A,e)=>{"use strict";e.d(A,{j:()=>o});var n=e(85960),a=e(91480);class o{constructor(i){this.props=i,this.items=[],this.categories=[]}addItem(i){return i.parent=this,this.items.push(i),this}addCategory(i){return i.props.isNested=!0,i.parent=this,this.categories.push(i),this}getCategory(i){let g=this.categories.find(u=>u.props.id===i);return g||(g=new o({title:i,id:i}),this.addCategory(g),g)}render(i){return this.props.customRender?this.props.customRender():n.createElement(a.u,{key:this.props.title,...this.props},this.items.map(g=>g.render(i)),this.categories.map(g=>g.render(i)))}}},59386:(G,A,e)=>{"use strict";e.d(A,{a:()=>f});var n=e(66681),a=e(85960),o=e(83795),r=e.n(o),i=e(92369),g=e(57445),u=e(20519),l=e(47257),m=e(14607);function c({overrides:h}){const p=(0,l.wW)(d);return a.createElement("div",{className:p.wrapper},h.map((s,y)=>a.createElement(m.u,{content:s.tooltip,key:y.toString(),placement:"top"},a.createElement("div",{"aria-label":s.description,className:p[s.type]}))))}const d=h=>{const p={width:8,height:8,borderRadius:h.shape.radius.circle,marginLeft:h.spacing(1),position:"relative",top:"-1px"};return{wrapper:(0,n.css)({display:"flex"}),rule:(0,n.css)({...p,backgroundColor:h.colors.primary.main}),data:(0,n.css)({...p,backgroundColor:h.colors.warning.main})}};class f{constructor(p){this.props=p}getLabel(p){const{title:s,description:y,overrides:C,addon:b}=this.props;if(!p)return this.parent.props.title===s&&!C?.length?null:a.createElement(E,{title:s,description:y,overrides:C,addon:b});const S=[];return this.parent.parent&&S.push(this.highlightWord(this.parent.parent.props.title,p)),this.parent.props.title!==s&&S.push(this.highlightWord(this.parent.props.title,p)),a.createElement(g._,{description:y&&this.highlightWord(y,p),category:S},this.highlightWord(s,p),C&&C.length>0&&a.createElement(c,{overrides:C}))}highlightWord(p,s){return a.createElement(r(),{textToHighlight:p,searchWords:[s],highlightClassName:"search-fragment-highlight"})}renderOverrides(){const{overrides:p}=this.props;!p||p.length}render(p){const{title:s,description:y,render:C,showIf:b,skipField:S}=this.props,D=`${this.parent.props.id} ${s}`;return b&&!b()?null:S?C():a.createElement(u.g,{label:this.getLabel(p),description:y,key:D,"aria-label":i.wl.components.PanelEditor.OptionsPane.fieldLabel(D)},C())}}function E({title:h,description:p,overrides:s,addon:y}){const C=(0,l.wW)(v);return a.createElement("div",{className:C.container},a.createElement(g._,{description:p},h,s&&s.length>0&&a.createElement(c,{overrides:s})),y)}function v(h){return{container:(0,n.css)`
      display: flex;
      justify-content: space-between;
    `}}},73393:(G,A,e)=>{"use strict";e.d(A,{HZ:()=>E,AL:()=>f});var n=e(56375),a=e(85960),o=e(96072),r=e(43282),i=e(44690),g=e(59386);const u="Some data fields have this option pre-configured. Add a field override rule to override the pre-configured value.",l="An override rule exists for this property";function m(v,h,p){const s=[];if(p){for(const C of p)for(const b of C.fields)if((0,n.get)(b.config,v.path)!=null){s.push({type:"data",description:u,tooltip:u});break}}return h.overrides.some(C=>C.properties.some(b=>b.id===v.id))&&s.push({type:"rule",description:l,tooltip:l}),s}var c=e(38685);function d({data:v,replaceVariables:h,options:p,eventBus:s,instanceState:y}){const C=v?.series??[];return{data:C,replaceVariables:h,options:p,eventBus:s,getSuggestions:S=>(0,r.PW)(C,S),instanceState:y}}function f(v){const{plugin:h,panel:p,onPanelOptionsChanged:s,onFieldConfigsChange:y,data:C,dashboard:b,instanceState:S}=v,D=p.getOptions(),M=p.fieldConfig,T={},R=d({data:C,replaceVariables:p.replaceVariables,options:D,eventBus:b.events,instanceState:S}),O=I=>{const L=(I&&I[0])??`${h.meta.name}`,P=T[L];return P||(T[L]=new i.j({title:L,id:L,sandboxId:h.meta.id}))},x={getValue:I=>(0,n.get)(D,I),onChange:(I,L)=>{const P=(0,c.hs)(D,I,L);s(P)}};E(h.getPanelOptionsSupplier(),x,O,R);for(const I of h.fieldConfigRegistry.list()){if(I.isCustom){if(I.showIf&&!I.showIf(M.defaults.custom,C?.series))continue}else if(I.showIf&&!I.showIf(M.defaults,C?.series))continue;if(I.hideFromDefaults)continue;const L=O(I.category),P=I.editor,N=M.defaults,F=I.isCustom?N.custom?(0,n.get)(N.custom,I.path):void 0:(0,n.get)(N,I.path);I.getItemsCount&&(L.props.itemsCount=I.getItemsCount(F)),L.addItem(new g.a({title:I.name,description:I.description,overrides:m(I,M,C?.series),render:function(){const j=V=>{y((0,c.uJ)(M,I.path,V,I.isCustom))};return a.createElement(P,{value:F,onChange:j,item:I,context:R,id:I.id})}}))}return Object.values(T)}function E(v,h,p,s,y){const C=new o.rt;v(C,s);for(const b of C.getItems()){if(b.showIf&&!b.showIf(s.options,s.data))continue;let S=y;if(S?b.category?.[0]?.length&&(S=S.getCategory(b.category[0])):S=p(b.category),(0,o.j)(b)){const M=b.getNestedValueAccess(h),T=M.getContext?M.getContext(s):{...s,options:h.getValue(b.path)};E(b.getBuilder(),M,p,T,S);continue}const D=b.editor;S.addItem(new g.a({title:b.name,description:b.description,render:function(){return a.createElement(D,{value:h.getValue(b.path),onChange:T=>{h.onChange(b.path,T)},item:b,context:s,id:b.id})}}))}}},53301:(G,A,e)=>{"use strict";e.d(A,{Hl:()=>d,K9:()=>h,OT:()=>s,ZP:()=>C,g_:()=>p,jy:()=>u,my:()=>v,yi:()=>E});var n=e(20079),a=e(23757),o=e(9833),r=e(20994),i=e(68460),g=e(12702);const u="grafana.dashboard.editor.ui",l={isPanelOptionsVisible:!0,rightPaneSize:400,topPaneSize:.45,mode:g.d1.Fill},m=()=>{const b=r.Z.getObject(u,l);let S={...b};return typeof b.topPaneSize=="string"&&(S={...b,topPaneSize:parseFloat(b.topPaneSize)/100}),{getPanel:()=>new i.rY({}),getSourcePanel:()=>new i.rY({}),getData:()=>({state:a.Gu.NotStarted,series:[],timeRange:(0,o.JK)()}),initDone:!1,shouldDiscardChanges:!1,isOpen:!1,isVizPickerOpen:!1,tableViewEnabled:!1,ui:{...l,...S}}},c=(0,n.oM)({name:"panelEditor",initialState:m(),reducers:{updateEditorInitState:(b,S)=>{b.getPanel=()=>S.payload.panel,b.getSourcePanel=()=>S.payload.sourcePanel,b.initDone=!0,b.isOpen=!0,b.shouldDiscardChanges=!1},setEditorPanelData:(b,S)=>{b.getData=()=>S.payload},setDiscardChanges:(b,S)=>{b.shouldDiscardChanges=S.payload},setPanelEditorUIState:(b,S)=>{b.ui={...b.ui,...S.payload},!b.ui.isPanelOptionsVisible&&b.isVizPickerOpen&&(b.isVizPickerOpen=!1)},toggleVizPicker:(b,S)=>{b.isVizPickerOpen=S.payload,b.isVizPickerOpen&&(b.ui.isPanelOptionsVisible=!0)},toggleTableView(b){b.tableViewEnabled=!b.tableViewEnabled},closeEditor:b=>{b.getPanel=()=>new i.rY({}),b.getSourcePanel=()=>new i.rY({}),b.isOpen=!1,b.initDone=!1,b.isVizPickerOpen=!1,b.tableViewEnabled=!1}}}),{updateEditorInitState:d,setEditorPanelData:f,setDiscardChanges:E,closeEditor:v,setPanelEditorUIState:h,toggleVizPicker:p,toggleTableView:s}=c.actions,C={panelEditor:c.reducer}},98746:(G,A,e)=>{"use strict";e.d(A,{X:()=>l,b:()=>u});var n=e(84513),a=e(67954),o=e(41879),r=e(5907),i=e(76679),g=e(12702);const u=(0,n.Z)((m,c)=>{const d=[];if(!c)return d;let f=g.Ip.Visualize;if(c.meta.skipDataQuery)return[];c.meta.skipDataQuery||(f=g.Ip.Query,d.push({id:g.Ip.Query,text:"Query",icon:"database",active:!1}),d.push({id:g.Ip.Transform,text:"Transform data",icon:"process",active:!1})),l(c)&&d.push({id:g.Ip.Alert,text:"Alert",icon:"bell",active:!1});const E=d.find(v=>v.id===(m||f))??d[0];return E.active=!0,d});function l(m){const{alertingEnabled:c,unifiedAlertingEnabled:d}=(0,a.iE)(),f=o.contextSrv.hasPermission((0,r.Bz)(i.GC).read),E=c||d&&f,v=m.meta.id==="graph",h=m.meta.id==="timeseries";return E&&v||h}},12702:(G,A,e)=>{"use strict";e.d(A,{Ip:()=>n,Ok:()=>g,d1:()=>a,d7:()=>r});var n=(u=>(u.Query="query",u.Transform="transform",u.Visualize="visualize",u.Alert="alert",u))(n||{}),a=(u=>(u[u.Fill=0]="Fill",u[u.Fit=1]="Fit",u[u.Exact=2]="Exact",u))(a||{}),o=(u=>(u[u.Off=0]="Off",u[u.Table=1]="Table",u))(o||{});const r=[{value:0,label:"Fill",description:"Use all available space"},{value:2,label:"Actual",description:"Make same size as on the dashboard"}],i=[{value:0,label:"Visualization",description:"Show using selected visualization"},{value:1,label:"Table",description:"Show raw data in table form"}];var g=(u=>(u[u.Visualizations=0]="Visualizations",u[u.LibraryPanels=1]="LibraryPanels",u[u.Suggestions=2]="Suggestions",u[u.Widgets=3]="Widgets",u))(g||{})},38685:(G,A,e)=>{"use strict";e.d(A,{hs:()=>l,jF:()=>i,sY:()=>g,uJ:()=>u});var n=e(56375),a=e.n(n),o=e(89248),r=e(12702);function i(m,c,d,f){if(m===r.d1.Fill)return{width:c,height:d};const E=8*6,v=60,p=(window.innerWidth-v-o.hD*4)/o.cz*f.gridPos.w,s=o.K3*f.gridPos.h+E,y=Math.min(c/p,d/s);return p<=c&&s<=d?{width:p,height:s}:{width:p*y,height:s*y}}function g(m){return m?.meta.skipDataQuery===!1}const u=(m,c,d,f)=>{let E={...m.defaults};const v=d==null||d==="";return f?E.custom?v?E.custom=(0,n.omit)(E.custom,c):E.custom=l(E.custom,c,d):v||(E.custom=l(E.custom,c,d)):v?E=(0,n.omit)(E,c):E=l(E,c,d),{...m,defaults:E}};function l(m,c,d){const f=Array.isArray(c)?c:c.split("."),E=f.shift();if(E.endsWith("]")){const h=E.lastIndexOf("["),p=+E.substring(h+1,E.length-1),s=E.substring(0,h);let y=m[s];const C=Array.isArray(y)?[...y]:[];return f.length&&(y=C[p],(y==null||typeof y!="object")&&(y={}),d=l(y,f,d)),C[p]=d,{...m,[s]:C}}if(!f.length)return{...m,[E]:d};let v=m[E];return(v==null||typeof v!="object")&&(v={}),{...m,[E]:l(v,f,d)}}},82179:(G,A,e)=>{"use strict";e.d(A,{i:()=>u,t:()=>l});var n=e(85960),a=e(92369),o=e(43183),r=e(93349),i=e(29165),g=e(58434);const u=({dashboard:m,onSaveSuccess:c,size:d})=>n.createElement(r.JY,null,({showModal:f,hideModal:E})=>n.createElement(i.zx,{size:d,onClick:()=>{f(g.d,{dashboard:m,onSaveSuccess:c,onDismiss:E})},"aria-label":a.wl.pages.Dashboard.Settings.General.saveDashBoard},"Save dashboard")),l=({dashboard:m,onClick:c,onSaveSuccess:d,variant:f,size:E})=>n.createElement(r.JY,null,({showModal:v,hideModal:h})=>n.createElement(i.zx,{size:E,onClick:()=>{(0,o.ff)("grafana_dashboard_save_as_clicked"),c?.(),v(g.d,{dashboard:m,onSaveSuccess:d,onDismiss:h,isCopy:!0})},variant:f,"aria-label":a.wl.pages.Dashboard.Settings.General.saveAsDashBoard},"Save as"))},15915:(G,A,e)=>{"use strict";e.d(A,{_:()=>l});var n=e(66681),a=e(85960),o=e(81445),r=e(47257),i=e(75682),g=e(68918),u=e(21986);const l=({diff:c,oldValue:d,newValue:f})=>{const E=(0,r.wW)(m),v=(0,o.Z)(async()=>{const p=JSON.stringify(d??{},null,2),s=JSON.stringify(f??{},null,2);let y;const C=[];let b=0;if(c)for(const[S,D]of Object.entries(c)){const M=a.createElement(g.B,{diffs:D,key:S,title:S});S==="schemaVersion"?y=M:C.push(M),b+=D.length}return{schemaChange:y,diffs:C,count:b,showDiffs:b<15,jsonView:a.createElement(u.Z,{oldValue:p,newValue:s})}},[c,d,f]),{value:h}=v;return!h||!d?a.createElement(i.$,null):h.count<1?a.createElement("div",null,"No changes in this dashboard"):a.createElement("div",null,h.schemaChange&&a.createElement("div",{className:E.spacer},h.schemaChange),h.showDiffs&&a.createElement("div",{className:E.spacer},h.diffs),a.createElement("h4",null,"JSON Model"),h.jsonView)},m=c=>({spacer:(0,n.css)`
    margin-bottom: ${c.v1.spacing.xl};
  `})},58434:(G,A,e)=>{"use strict";e.d(A,{d:()=>_e});var n=e(85960),a=e(85445),o=e(90857),r=e(63153),i=e(70523),g=e(94439),u=e(55803),l=e(66681),m=e(81445),c=e(47257),d=e(49199),f=e(46783);function E({dashboard:qe}){const rt=(0,c.wW)(v),{loading:mt,value:Je,error:Ae}=(0,m.Z)(async()=>{const Xe=qe.getSaveModelCloneOld();return f.ae.validateDashboard(Xe).catch(Z=>{if(Z.status>=500)throw Z;return Z.data})},[qe]);let Ke;if(mt)Ke=n.createElement(d.b,{severity:"info",title:"Checking dashboard validity"});else if(Je)Je.isValid||(Ke=n.createElement(d.b,{severity:"warning",title:"Dashboard failed schema validation"},n.createElement("p",null,"Validation is provided for development purposes and should be safe to ignore. If you are a Grafana developer, consider checking and updating the dashboard schema"),n.createElement("div",{className:rt.error},Je.message)));else{const Xe=Ae?.message??"Unknown error";Ke=n.createElement(d.b,{severity:"info",title:"Error checking dashboard validity"},n.createElement("p",{className:rt.error},Xe))}return Ke?n.createElement("div",{className:rt.root},Ke):null}const v=qe=>({root:(0,l.css)({marginTop:qe.spacing(1)}),error:(0,l.css)({fontFamily:qe.typography.fontFamilyMonospace,whiteSpace:"pre-wrap",overflowX:"auto",maxWidth:"100%"})}),h=E;var p=e(15915),s=e(77980),y=e(7288),C=e(29165),b=e(82179),S=e(85954),D=e(12693),M=e(43183),T=e(91),R=e(60484),O=e(93991),x=e(62293),I=e(42321),L=e(95162),P=e(14914),N=e(64524);const F=async(qe,rt,mt,Je)=>{const Ae=await Je({dashboard:qe,folderUid:rt.folderUid??mt.meta.folderUid??qe.meta?.folderUid,message:rt.message,overwrite:rt.overwrite});if("error"in Ae)throw Ae.error;return Ae.data},U=(qe=!1)=>{const rt=(0,L.useDispatch)(),mt=(0,O.iG)(),[Je]=(0,I.yF)(),[Ae,Ke]=(0,S.Z)(async(Xe,ne,Z)=>{try{const ee=await F(Xe,ne,Z,Je);Z.version=ee.version,Xe.version=ee.version,Z.clearUnsavedChanges(Xe,ne),R.Z.publish(new P.Jd),mt.success("Dashboard saved"),(0,N.AX)(ee.uid),qe?(0,M.ff)("grafana_dashboard_copied",{name:Z.title,url:ee.url}):(0,M.ff)(`grafana_dashboard_${Z.id?"saved":"created"}`,{name:Z.title,url:ee.url});const ce=T.E1.getLocation().pathname,be=D.u.stripBaseFromUrl(ee.url);return be!==ce&&setTimeout(()=>T.E1.replace(be)),Z.meta.isStarred&&rt((0,x.gd)({id:Z.uid,title:Z.title,url:be})),ee}catch(ee){throw ee instanceof Error&&mt.error(ee.message??"Error saving dashboard"),ee}},[rt,mt]);return{state:Ae,onDashboardSave:Ke}},j=({dashboard:qe,dashboardSaveModel:rt,error:mt,onDismiss:Je,setErrorIsHandled:Ae})=>{const{onDashboardSave:Ke}=U();return n.createElement(n.Fragment,null,mt.data&&mt.data.status==="version-mismatch"&&n.createElement(s.s,{isOpen:!0,title:"Conflict",body:n.createElement("div",null,"Someone else has updated this dashboard ",n.createElement("br",null)," ",n.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await Ke(rt,{overwrite:!0},qe),Je()},onDismiss:Je}),mt.data&&mt.data.status==="name-exists"&&n.createElement(s.s,{isOpen:!0,title:"Conflict",body:n.createElement("div",null,"A dashboard with the same name in selected folder already exists. ",n.createElement("br",null),n.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await Ke(rt,{overwrite:!0},qe),Je()},onDismiss:Je}),mt.data&&mt.data.status==="plugin-dashboard"&&n.createElement(V,{dashboard:qe,onDismiss:()=>{Ae(!0),Je()}}))},V=({onDismiss:qe,dashboard:rt})=>{const{onDashboardSave:mt}=U(),Je=(0,c.wW)(H);return n.createElement(y.u,{className:Je.modal,title:"Plugin dashboard",icon:"copy",isOpen:!0,onDismiss:qe},n.createElement("div",{className:Je.modalText},"Your changes will be lost when you update the plugin.",n.createElement("br",null),n.createElement("small",null,"Use ",n.createElement("strong",null,"Save As")," to create custom version.")),n.createElement(y.u.ButtonRow,null,n.createElement(C.zx,{variant:"secondary",onClick:qe,fill:"outline"},"Cancel"),n.createElement(b.t,{onClick:qe,dashboard:rt,onSaveSuccess:qe}),n.createElement(C.zx,{variant:"destructive",onClick:async()=>{await mt(rt.getSaveModelClone(),{overwrite:!0},rt),qe()}},"Overwrite")))},_=qe=>{switch(qe){case"version-mismatch":case"name-exists":case"plugin-dashboard":return!0;default:return!1}},H=qe=>({modal:(0,l.css)`
    width: 500px;
  `,modalText:(0,l.css)`
    font-size: ${qe.typography.h4.fontSize};
    color: ${qe.colors.text.primary};
    margin-bottom: ${qe.spacing(4)}
    padding-top: ${qe.spacing(2)};
  `,modalButtonRow:(0,l.css)`
    margin-bottom: 14px;
    a,
    button {
      margin-right: ${qe.spacing(2)};
    }
  `});var z=e(66596),K=e(96130),Y=e(20519),k=e(74042),q=e(57445),X=e(24956),te=e(7073),se=e(5999),de=e(19461),re=e(5192),fe=e(25971),ie=e(7800);const oe=qe=>{const rt=qe.getSaveModelClone();return rt.id=null,rt.uid="",rt.title+=" Copy",rt.editable=!0,qe.id>0&&rt.panels&&rt.panels.forEach(mt=>{mt.type==="graph"&&mt.alert&&delete mt.thresholds,delete mt.alert}),rt},ue=({dashboard:qe,isLoading:rt,isNew:mt,onSubmit:Je,onCancel:Ae,onSuccess:Ke})=>{const Xe={title:mt?qe.title:`${qe.title} Copy`,description:qe.description,$folder:{uid:qe.meta.folderUid,title:qe.meta.folderTitle},copyTags:!1},ne=Z=>async ee=>{if(ee&&ee===Z().$folder.title?.trim())return"Dashboard name cannot be the same as folder name";try{return await re.t.validateNewDashboardName(Z().$folder.uid??"general",ee),!0}catch(ce){return ce instanceof Error?ce.message:"Dashboard name is invalid"}};return n.createElement(z.l,{defaultValues:Xe,onSubmit:async Z=>{if(!Je)return;const ee=oe(qe);ee.title=Z.title,ee.description=Z.description,!mt&&!Z.copyTags&&(ee.tags=[]),(await Je(ee,{folderUid:Z.$folder.uid},qe)).status==="success"&&Ke()}},({register:Z,control:ee,errors:ce,getValues:be})=>n.createElement(n.Fragment,null,n.createElement(K.g,{render:({field:{ref:Ee,...Be}})=>n.createElement(Y.g,{label:n.createElement(k.Lh,{justify:"space-between"},n.createElement(q._,{htmlFor:"title"},"Title"),o.config.featureToggles.dashgpt&&mt&&n.createElement(ie.n,{onGenerate:Le=>Be.onChange(Le),dashboard:qe})),invalid:!!ce.title,error:ce.title?.message},n.createElement(X.I,{...Be,onChange:Le=>Be.onChange(Le.target.value),"aria-label":"Save dashboard title field",autoFocus:!0})),control:ee,name:"title",rules:{validate:ne(be)}}),n.createElement(K.g,{render:({field:{ref:Ee,...Be}})=>n.createElement(Y.g,{label:n.createElement(k.Lh,{justify:"space-between"},n.createElement(q._,{htmlFor:"description"},"Description"),o.config.featureToggles.dashgpt&&mt&&n.createElement(fe._,{onGenerate:Le=>Be.onChange(Le),dashboard:qe})),invalid:!!ce.description,error:ce.description?.message},n.createElement(te.K,{...Be,onChange:Le=>Be.onChange(Le.target.value),"aria-label":"Save dashboard description field",autoFocus:!0})),control:ee,name:"description"}),n.createElement(Y.g,{label:"Folder"},n.createElement(K.g,{render:({field:{ref:Ee,...Be}})=>n.createElement(de.E,{...Be,onChange:(Le,ze)=>Be.onChange({uid:Le,title:ze}),value:Be.value?.uid,initialTitle:qe.meta.folderTitle,dashboardId:qe.id,enableCreateNew:!0}),control:ee,name:"$folder"})),!mt&&n.createElement(Y.g,{label:"Copy tags"},n.createElement(se.r,{...Z("copyTags")})),n.createElement(k.Lh,null,n.createElement(C.zx,{type:"button",variant:"secondary",onClick:Ae,fill:"outline"},"Cancel"),n.createElement(C.zx,{disabled:rt,type:"submit","aria-label":"Save dashboard button"},rt?"Saving...":"Save"))))};var me=e(92369),ge=e(13086),Ue=e(55973),De=e(28879),Pe=e(33941),ye=e(34802);const Te=["You are an expert in Grafana Dashboards","Your goal is to write a description of the changes for a dashboard to display to the user","You will be given human-readable diffs with most irrelevant lines filtered out"].join(`.
`),nt=["Respond only with the diff description, which is meant to be loaded directly into the application for the user.",'If there are no substantial user or migration changes, the correct description is "Minor changes only"',`If there are too many changes of either kind, and those changes have a message saying 'too long', the correct response for that section is "Too many changes to auto-summarize"`,"In a diff, lines beginning with - are removed, and lines beginning with + are added.","Lines with neither + nor - are included for context. Be careful not to mark them as added or removed if they do not start with + or -.","If a line is changed, it will show a previous version removed and a new version added","When referring to panel changes, use the panel title","When using panel title, wrap it with double quotes","When the panel changes position, just mention that the panel has changed position","When an entire panel is added or removed, use the panel title and only say it was added or removed and disregard the rest of the changes for that panel","Group together similar changes into one line when multiple panels are affected","Refer to templating elements as variables","Try to make the response as short as possible"].join(`.
`),ct=({dashboard:qe,onGenerate:rt,disabled:mt})=>{const Je=(0,n.useCallback)(()=>he(qe),[qe]);return n.createElement(De.v,{messages:Je,onGenerate:rt,temperature:0,model:"gpt-3.5-turbo-16k",eventTrackingSrc:Pe.dG.dashboardChanges,toggleTipTitle:"Improve your dashboard changes summary",disabled:mt})};function he(qe){let{userChanges:rt,migrationChanges:mt}=(0,ye.xm)(qe);return rt.length>8e3&&(rt="User changes were too long, fill in the user changes section with 'User changes too long to auto-summarize'"),mt.split(`
`).length<10?mt="No significant migration changes":mt.length>8e3&&(mt="Migration changes were too long, fill in the migration changes section with 'Migration changes too long to auto-summarize'"),[{content:Te,role:ye.uU.system},{content:`Summarize the following user changes diff under "User changes":
${rt}`,role:ye.uU.system},{content:`Be sure to only include substantial user changes, such as adding or removing entire panels, changing panel titles or descriptions, etc.
Do not include "User Changes" section if there are no substantial user changes to report.`,role:ye.uU.system},{content:`Summarize the following migration changes diff under "Migration changes":
${mt}`,role:ye.uU.system},{content:`Be sure to only include substantial migration changes, such as adding or removing entire panels, changing panel titles or descriptions, etc.
Ignore any threshold step changes or templating list changes.
Ignore other changes and do not include them in the summary. Do not include "Migration Changes" section if there are no substantial migration changes to report.
If there are substantial migration changes, add "Some autogenerated changes are included to update the dashboard to the latest valid schema version" at the end.`,role:ye.uU.system},{content:nt,role:ye.uU.system}]}const xe=({dashboard:qe,isLoading:rt,saveModel:mt,options:Je,onSubmit:Ae,onCancel:Ke,onSuccess:Xe,onOptionsChange:ne})=>{const Z=(0,n.useMemo)(()=>qe.hasTimeChanged(),[qe]),ee=(0,n.useMemo)(()=>qe.hasVariablesChanged(),[qe]),[ce,be]=(0,n.useState)(!1),[Ee,Be]=(0,n.useState)(Je.message),Le=(0,c.wW)(Me);return n.createElement(z.l,{onSubmit:async ze=>{if(!Ae)return;be(!0),Je={...Je,message:Ee},(await Ae(mt.clone,Je,qe)).status==="success"?Xe():be(!1)}},({register:ze,errors:Fe})=>n.createElement(ge.K,{gap:2,direction:"column",alignItems:"flex-start"},Z&&n.createElement(Ue.X,{checked:!!Je.saveTimerange,onChange:()=>ne({...Je,saveTimerange:!Je.saveTimerange}),label:"Save current time range as dashboard default","aria-label":me.wl.pages.SaveDashboardModal.saveTimerange}),ee&&n.createElement(Ue.X,{checked:!!Je.saveVariables,onChange:()=>ne({...Je,saveVariables:!Je.saveVariables}),label:"Save current variable values as dashboard default","aria-label":me.wl.pages.SaveDashboardModal.saveVariables}),n.createElement("div",{className:Le.message},o.config.featureToggles.dashgpt&&n.createElement(ct,{dashboard:qe,onGenerate:$e=>{ne({...Je,message:$e}),Be($e)},disabled:!mt.hasChanges}),n.createElement(te.K,{"aria-label":"message",value:Ee,onChange:$e=>{ne({...Je,message:$e.currentTarget.value}),Be($e.currentTarget.value)},placeholder:"Add a note to describe your changes.",autoFocus:!0,rows:5})),n.createElement(ge.K,{alignItems:"center"},n.createElement(C.zx,{variant:"secondary",onClick:Ke,fill:"outline"},"Cancel"),n.createElement(C.zx,{type:"submit",disabled:!mt.hasChanges||rt,icon:ce?"spinner":void 0,"aria-label":me.wl.pages.SaveDashboardModal.save},rt?"Saving...":"Save"),!mt.hasChanges&&n.createElement("div",null,"No changes to save"))))};function Me(qe){return{message:(0,l.css)`
      display: flex;
      align-items: end;
      flex-direction: column;
      width: 100%;
    `}}var He=e(78344),Ve=e(55855);const Oe=({dashboard:qe,onCancel:rt})=>{const[mt,Je]=(0,n.useState)(()=>{const Ke=qe.getSaveModelClone();return delete Ke.id,JSON.stringify(Ke,null,2)}),Ae=(0,n.useCallback)(()=>{const Ke=new Blob([mt],{type:"application/json;charset=utf-8"});(0,He.saveAs)(Ke,qe.title+"-"+new Date().getTime()+".json")},[qe.title,mt]);return n.createElement(n.Fragment,null,n.createElement(ge.K,{direction:"column",gap:2},n.createElement("div",null,"This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source.",n.createElement("br",null),n.createElement("i",null,"See"," ",n.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),n.createElement("br",null)," ",n.createElement("br",null),n.createElement("strong",null,"File path: ")," ",qe.meta.provisionedExternalId),n.createElement(te.K,{spellCheck:!1,value:mt,onChange:Ke=>{Je(Ke.currentTarget.value)},className:Ne.json}),n.createElement(k.Lh,null,n.createElement(C.zx,{variant:"secondary",onClick:rt,fill:"outline"},"Cancel"),n.createElement(Ve.m,{icon:"copy",getText:()=>mt},"Copy JSON to clipboard"),n.createElement(C.zx,{type:"submit",onClick:Ae},"Save JSON to file"))))},Ne={json:(0,l.css)`
    height: 400px;
    width: 100%;
    overflow: auto;
    resize: none;
    font-family: monospace;
  `},_e=({dashboard:qe,onDismiss:rt,onSaveSuccess:mt,isCopy:Je})=>{const[Ae,Ke]=(0,n.useState)({}),Xe=qe.getOriginalDashboard(),ne=qe.meta.provisioned,Z=qe.version===0,[ee,ce]=(0,n.useState)(!1),be=(0,n.useMemo)(()=>{const tt=qe.getSaveModelClone({saveTimerange:!!Ae.saveTimerange,saveVariables:!!Ae.saveVariables});if(!Xe)return{clone:tt,diff:{},diffCount:0,hasChanges:!1};const it=(0,u.Q$)(Xe,tt);let vt=0;for(const yt of Object.values(it))vt+=yt.length;return{clone:tt,diff:it,diffCount:vt,hasChanges:vt>0&&!Z}},[qe,Xe,Ae,Z]),[Ee,Be]=(0,n.useState)(!1),{state:Le,onDashboardSave:ze}=U(Je),Fe=mt?()=>{rt(),mt()}:rt,$e=()=>Ee?n.createElement(p._,{diff:be.diff,oldValue:Xe,newValue:be.clone}):Z||Je?n.createElement(ue,{dashboard:qe,isLoading:Le.loading,onCancel:rt,onSuccess:Fe,onSubmit:ze,isNew:Z}):ne?n.createElement(Oe,{dashboard:qe,onCancel:rt,onSuccess:Fe}):n.createElement(xe,{dashboard:qe,isLoading:Le.loading,saveModel:be,onCancel:rt,onSuccess:Fe,onSubmit:ze,options:Ae,onOptionsChange:Ke});if(Le.error&&!ee&&(0,a.kW)(Le.error)&&_(Le.error.data.status))return n.createElement(j,{error:Le.error,dashboard:qe,dashboardSaveModel:be.clone,onDismiss:rt,setErrorIsHandled:ce});let et="Save dashboard";return Je?et="Save dashboard copy":ne&&(et="Provisioned dashboard"),n.createElement(r.d,{title:et,onClose:rt,subtitle:qe.title,tabs:n.createElement(i.J,null,n.createElement(g.O,{label:"Details",active:!Ee,onChangeTab:()=>Be(!1)}),be.hasChanges&&n.createElement(g.O,{label:"Changes",active:Ee,onChangeTab:()=>Be(!0),counter:be.diffCount}))},$e(),o.config.featureToggles.showDashboardValidationWarnings&&n.createElement(h,{dashboard:qe}))}},44639:(G,A,e)=>{"use strict";e.d(A,{q:()=>E});var n=e(85960),a=e(33067),o=e(43183),r=e(20519),i=e(5999),g=e(7073),u=e(7288),l=e(55855),m=e(95329),c=e(80268),d=e(79113),f=e(94849);function E({panel:v,dashboard:h,range:p,buildIframe:s=f.S_}){const[y,C]=(0,n.useState)(!0),[b,S]=(0,n.useState)("current"),[D,M]=(0,n.useState)("");(0,a.Z)(()=>{(0,o.ff)("grafana_dashboards_embed_share_viewed")}),(0,n.useEffect)(()=>{const L=s(y,h.uid,b,v,p);M(L)},[b,y,h,v,p,s]);const T=L=>{M(L.currentTarget.value)},R=()=>{C(L=>!L)},O=L=>{S(L)},I=h.time.to==="now"?(0,m.t)("share-modal.embed.time-range-description","Transforms the current relative time range to an absolute time range"):"";return n.createElement(n.Fragment,null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(m.cC,{i18nKey:"share-modal.embed.info"},"Generate HTML for embedding an iframe with this panel.")),n.createElement(r.g,{label:(0,m.t)("share-modal.embed.time-range","Current time range"),description:I},n.createElement(i.r,{id:"share-current-time-range",value:y,onChange:R})),n.createElement(d.J,{selectedTheme:b,onChange:O}),n.createElement(r.g,{label:(0,m.t)("share-modal.embed.html","Embed HTML"),description:(0,m.t)("share-modal.embed.html-description","The HTML code below can be pasted and included in another web page. Unless anonymous access is enabled, the user viewing that page need to be signed into Grafana for the graph to load.")},n.createElement(g.K,{"data-testid":"share-embed-html",id:"share-panel-embed-embed-html-textarea",rows:5,value:D,onChange:T})),n.createElement(u.u.ButtonRow,null,n.createElement(l.m,{icon:"copy",variant:"primary",getText:()=>D,onClipboardCopy:()=>{c.a.embedSnippetCopy({currentTimeRange:y,theme:b})}},n.createElement(m.cC,{i18nKey:"share-modal.embed.copy"},"Copy to clipboard"))))}},87619:(G,A,e)=>{"use strict";e.d(A,{e:()=>i});var n=e(85960),a=e(43183),o=e(95329),r=e(17027);const i=({panel:g,initialFolderUid:u,onDismiss:l})=>((0,n.useEffect)(()=>{(0,a.ff)("grafana_dashboards_library_panel_share_viewed")},[]),g?n.createElement(n.Fragment,null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(o.cC,{i18nKey:"share-modal.library.info"},"Create library panel.")),n.createElement(r.T,{panel:g,initialFolderUid:u,onDismiss:l})):null)},67716:(G,A,e)=>{"use strict";e.d(A,{V8:()=>ie});var n=e(85960),a=e(87501),o=e(7288),r=e(10305),i=e(47257),g=e(67954),u=e(49683),l=e(95329),m=e(63390),c=e(80268),d=e(12404),f=e(44639),E=e(78344),v=e(20519),h=e(5999),p=e(29165),s=e(26733),y=e(14914),C=e(53565),b=e(62577),S=e(55855);function D({json:oe,onDismiss:ue}){const me=(0,n.useCallback)(()=>oe,[oe]);return n.createElement(o.u,{title:"JSON",onDismiss:ue,onClickBackdrop:ue,isOpen:!0},n.createElement(C.Z,{disableHeight:!0},({width:ge})=>n.createElement(b.p,{value:oe,language:"json",showMiniMap:!1,height:"500px",width:ge})),n.createElement(o.u.ButtonRow,null,n.createElement(S.m,{icon:"copy",getText:me,onClipboardCopy:()=>{c.a.exportCopyJsonClicked()}},n.createElement(l.cC,{i18nKey:"share-modal.view-json.copy-button"},"Copy to Clipboard"))))}class M extends n.PureComponent{constructor(ue){super(ue),this.onShareExternallyChange=()=>{this.setState({shareExternally:!this.state.shareExternally})},this.onSaveAsFile=()=>{const{dashboard:me}=this.props,{shareExternally:ge}=this.state;c.a.exportSaveJsonClicked(),ge?this.exporter.makeExportable(me).then(Ue=>{this.openSaveAsDialog(Ue)}):this.openSaveAsDialog(me.getSaveModelClone())},this.onViewJson=()=>{const{dashboard:me}=this.props,{shareExternally:ge}=this.state;c.a.exportViewJsonClicked(),ge?this.exporter.makeExportable(me).then(Ue=>{this.openJsonModal(Ue)}):this.openJsonModal(me.getSaveModelClone())},this.openSaveAsDialog=me=>{const ge=JSON.stringify(me,null,2),Ue=new Blob([ge],{type:"application/json;charset=utf-8"}),De=new Date().getTime();(0,E.saveAs)(Ue,`${me.title}-${De}.json`)},this.openJsonModal=me=>{u.h$.publish(new y.Dn({props:{json:JSON.stringify(me,null,2)},component:D})),this.props.onDismiss?.()},this.state={shareExternally:!1},this.exporter=new s.E}render(){const{onDismiss:ue}=this.props,{shareExternally:me}=this.state,ge=(0,l.t)("share-modal.export.share-externally-label","Export for sharing externally");return n.createElement(n.Fragment,null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(l.cC,{i18nKey:"share-modal.export.info-text"},"Export this dashboard.")),n.createElement(v.g,{label:ge},n.createElement(h.r,{id:"share-externally-toggle",value:me,onChange:this.onShareExternallyChange})),n.createElement(o.u.ButtonRow,null,n.createElement(p.zx,{variant:"secondary",onClick:ue,fill:"outline"},n.createElement(l.cC,{i18nKey:"share-modal.export.cancel-button"},"Cancel")),n.createElement(p.zx,{variant:"secondary",onClick:this.onViewJson},n.createElement(l.cC,{i18nKey:"share-modal.export.view-button"},"View JSON")),n.createElement(p.zx,{variant:"primary",onClick:this.onSaveAsFile},n.createElement(l.cC,{i18nKey:"share-modal.export.save-button"},"Save to file"))))}}var T=e(87619),R=e(92369),O=e(51637),x=e(24956),I=e(79055),L=e(49199),P=e(79113),N=e(94849);class F extends n.PureComponent{constructor(ue){super(ue),this.buildUrl=async()=>{const{panel:me,dashboard:ge}=this.props,{useCurrentTimeRange:Ue,useShortUrl:De,selectedTheme:Pe}=this.state,ye=await(0,N.bl)(Ue,Pe,me,De),Te=(0,N.Sc)(Ue,ge.uid,Pe,me);this.setState({shareUrl:ye,imageUrl:Te})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange})},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl})},this.onThemeChange=me=>{this.setState({selectedTheme:me})},this.getShareUrl=()=>this.state.shareUrl,this.state={useCurrentTimeRange:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""},this.onCopy=this.onCopy.bind(this)}componentDidMount(){this.buildUrl()}componentDidUpdate(ue,me){const{useCurrentTimeRange:ge,useShortUrl:Ue,selectedTheme:De}=this.state;(me.useCurrentTimeRange!==ge||me.selectedTheme!==De||me.useShortUrl!==Ue)&&this.buildUrl()}onCopy(){c.a.shareLinkCopied({currentTimeRange:this.state.useCurrentTimeRange,theme:this.state.selectedTheme,shortenURL:this.state.useShortUrl})}render(){const{panel:ue,dashboard:me}=this.props,ge=me?me.time.to==="now":!1,{useCurrentTimeRange:Ue,useShortUrl:De,selectedTheme:Pe,shareUrl:ye,imageUrl:Te}=this.state,nt=R.wl.pages.SharePanelModal,ct=!!me.id,he=(0,l.t)("share-modal.link.time-range-label","Lock time range"),xe=(0,l.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),Me=(0,l.t)("share-modal.link.shorten-url","Shorten URL"),He=(0,l.t)("share-modal.link.link-url","Link URL");return n.createElement(n.Fragment,null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(l.cC,{i18nKey:"share-modal.link.info-text"},"Create a direct link to this dashboard or panel, customized with the options below.")),n.createElement(O.C,null,n.createElement(v.g,{label:he,description:ge?xe:""},n.createElement(h.r,{id:"share-current-time-range",value:Ue,onChange:this.onUseCurrentTimeRangeChange})),n.createElement(P.J,{selectedTheme:Pe,onChange:this.onThemeChange}),n.createElement(v.g,{label:Me},n.createElement(h.r,{id:"share-shorten-url",value:De,onChange:this.onUrlShorten})),n.createElement(v.g,{label:He},n.createElement(x.I,{id:"link-url-input",value:ye,readOnly:!0,addonAfter:n.createElement(S.m,{icon:"copy",variant:"primary",getText:this.getShareUrl,onClipboardCopy:this.onCopy},n.createElement(l.cC,{i18nKey:"share-modal.link.copy-link-button"},"Copy"))}))),ue&&g.default.rendererAvailable&&n.createElement(n.Fragment,null,ct&&n.createElement(I.h,{href:Te,external:!0,icon:"camera","aria-label":nt.linkToRenderedImage},(0,l.t)("share-modal.link.rendered-image","Direct link rendered image")),!ct&&n.createElement(L.b,{severity:"info",title:(0,l.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0},n.createElement(l.cC,{i18nKey:"share-modal.link.save-dashboard"},"To render a panel image, you must save the dashboard first."))),ue&&!g.default.rendererAvailable&&n.createElement(L.b,{severity:"info",title:(0,l.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0},n.createElement(l.cC,{i18nKey:"share-modal.link.render-instructions"},"To render a panel image, you must install the",n.createElement(I.h,{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",external:!0},"Grafana image renderer plugin"),". Please contact your Grafana administrator to install the plugin.")))}}var U=e(25788),j=e(85445),V=e(27436),_=e(75682),H=e(45864),z=e(81990),K=e(83676);const Y="/api/snapshots";class k extends n.PureComponent{constructor(ue){super(ue),this.createSnapshot=me=>()=>{const{timeoutSeconds:ge}=this.state;this.dashboard.snapshot={timestamp:new Date},this.setState({isLoading:!0}),this.dashboard.startRefresh(),setTimeout(()=>{this.saveSnapshot(this.dashboard,me)},ge*1e3)},this.saveSnapshot=async(me,ge)=>{const{snapshotExpires:Ue,timeoutSeconds:De}=this.state,Pe=this.dashboard.getSaveModelCloneOld();this.scrubDashboard(Pe);const ye={dashboard:Pe,name:Pe.title,expires:Ue,external:ge};try{const Te=await(0,j.i)().post(Y,ye);this.setState({deleteUrl:Te.deleteUrl,snapshotUrl:Te.url,step:2})}finally{ge?c.a.publishSnapshotClicked({expires:Ue,timeout:De}):c.a.publishSnapshotLocalClicked({expires:Ue,timeout:De}),this.setState({isLoading:!1})}},this.scrubDashboard=me=>{const{panel:ge}=this.props,{snapshotName:Ue}=this.state;me.title=Ue,me.time=(0,H.$t)().timeRange(),me.links=[],me.panels.forEach(Pe=>{Pe.targets=[],Pe.links=[],Pe.datasource=null});const De=me.annotations.list.filter(Pe=>Pe.enable);if(me.annotations.list=De.map(Pe=>({name:Pe.name,enable:Pe.enable,iconColor:Pe.iconColor,snapshotData:Pe.snapshotData,type:Pe.type,builtIn:Pe.builtIn,hide:Pe.hide})),me.getVariables().forEach(Pe=>{"query"in Pe&&(Pe.query=""),"options"in Pe&&(Pe.options=Pe.current&&!(0,U.Q)(Pe.current)?[Pe.current]:[]),"refresh"in Pe&&(Pe.refresh=z.Bd.never)}),ge){const Pe=ge.getSaveModel();Pe.gridPos.w=24,Pe.gridPos.x=0,Pe.gridPos.y=0,Pe.gridPos.h=20,me.panels=[Pe]}delete this.dashboard.snapshot,this.dashboard.forEachPanel(Pe=>{delete Pe.snapshotData}),this.dashboard.annotations.list.forEach(Pe=>{delete Pe.snapshotData})},this.deleteSnapshot=async()=>{const{deleteUrl:me}=this.state;await(0,j.i)().get(me),this.setState({step:3})},this.getSnapshotUrl=()=>this.state.snapshotUrl,this.onSnapshotNameChange=me=>{this.setState({snapshotName:me.target.value})},this.onTimeoutChange=me=>{this.setState({timeoutSeconds:Number(me.target.value)})},this.onExpireChange=me=>{this.setState({selectedExpireOption:me,snapshotExpires:me.value})},this.dashboard=ue.dashboard,this.expireOptions=[{label:(0,l.t)("share-modal.snapshot.expire-never","Never"),value:0},{label:(0,l.t)("share-modal.snapshot.expire-hour","1 Hour"),value:60*60},{label:(0,l.t)("share-modal.snapshot.expire-day","1 Day"),value:60*60*24},{label:(0,l.t)("share-modal.snapshot.expire-week","7 Days"),value:60*60*24*7}],this.state={isLoading:!1,step:1,selectedExpireOption:this.expireOptions[0],snapshotExpires:this.expireOptions[0].value,snapshotName:ue.dashboard.title,timeoutSeconds:4,snapshotUrl:"",deleteUrl:"",externalEnabled:!1,sharingButtonText:""}}componentDidMount(){this.getSnaphotShareOptions()}async getSnaphotShareOptions(){const ue=await(0,K.G)().getSharingOptions();this.setState({sharingButtonText:ue.externalSnapshotName,externalEnabled:ue.externalEnabled})}renderStep1(){const{onDismiss:ue}=this.props,{snapshotName:me,selectedExpireOption:ge,timeoutSeconds:Ue,isLoading:De,sharingButtonText:Pe,externalEnabled:ye}=this.state,Te=(0,l.t)("share-modal.snapshot.name","Snapshot name"),nt=(0,l.t)("share-modal.snapshot.expire","Expire"),ct=(0,l.t)("share-modal.snapshot.timeout","Timeout (seconds)"),he=(0,l.t)("share-modal.snapshot.timeout-description","You might need to configure the timeout value if it takes a long time to collect your dashboard metrics.");return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(l.cC,{i18nKey:"share-modal.snapshot.info-text-1"},"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard.")),n.createElement("p",{className:"share-modal-info-text"},n.createElement(l.cC,{i18nKey:"share-modal.snapshot.info-text-2"},"Keep in mind, your snapshot ",n.createElement("em",null,"can be viewed by anyone")," that has the link and can access the URL. Share wisely."))),n.createElement(v.g,{label:Te},n.createElement(x.I,{id:"snapshot-name-input",width:30,value:me,onChange:this.onSnapshotNameChange})),n.createElement(v.g,{label:nt},n.createElement(V.Ph,{inputId:"expire-select-input",width:30,options:this.expireOptions,value:ge,onChange:this.onExpireChange})),n.createElement(v.g,{label:ct,description:he},n.createElement(x.I,{id:"timeout-input",type:"number",width:21,value:Ue,onChange:this.onTimeoutChange})),n.createElement(o.u.ButtonRow,null,n.createElement(p.zx,{variant:"secondary",onClick:ue,fill:"outline"},n.createElement(l.cC,{i18nKey:"share-modal.snapshot.cancel-button"},"Cancel")),ye&&n.createElement(p.zx,{variant:"secondary",disabled:De,onClick:this.createSnapshot(!0)},Pe),n.createElement(p.zx,{variant:"primary",disabled:De,onClick:this.createSnapshot()},n.createElement(l.cC,{i18nKey:"share-modal.snapshot.local-button"},"Local Snapshot"))))}renderStep2(){const{snapshotUrl:ue}=this.state;return n.createElement(n.Fragment,null,n.createElement(v.g,{label:(0,l.t)("share-modal.snapshot.url-label","Snapshot URL")},n.createElement(x.I,{id:"snapshot-url-input",value:ue,readOnly:!0,addonAfter:n.createElement(S.m,{icon:"copy",variant:"primary",getText:this.getSnapshotUrl},n.createElement(l.cC,{i18nKey:"share-modal.snapshot.copy-link-button"},"Copy"))})),n.createElement("div",{className:"pull-right",style:{padding:"5px"}},n.createElement(l.cC,{i18nKey:"share-modal.snapshot.mistake-message"},"Did you make a mistake? "),"\xA0",n.createElement(p.Qj,{fill:"text",target:"_blank",onClick:this.deleteSnapshot},n.createElement(l.cC,{i18nKey:"share-modal.snapshot.delete-button"},"Delete snapshot."))))}renderStep3(){return n.createElement("div",{className:"share-modal-header"},n.createElement("p",{className:"share-modal-info-text"},n.createElement(l.cC,{i18nKey:"share-modal.snapshot.deleted-message"},"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches.")))}render(){const{isLoading:ue,step:me}=this.state;return n.createElement(n.Fragment,null,me===1&&this.renderStep1(),me===2&&this.renderStep2(),me===3&&this.renderStep3(),ue&&n.createElement(_.$,{inline:!0}))}}const q=[],X=[];function te(oe){q.push(oe)}function se(oe){X.push(oe)}function de(oe,ue){const ge=[{label:(0,l.t)("share-modal.tab-title.link","Link"),value:N.Ax.link,component:F}];if(u.Vt.isSignedIn&&g.config.snapshotEnabled){const De=(0,l.t)("share-modal.tab-title.snapshot","Snapshot");ge.push({label:De,value:N.Ax.snapshot,component:k})}if(oe){const De=(0,l.t)("share-modal.tab-title.embed","Embed");if(ge.push({label:De,value:N.Ax.embed,component:f.q}),!(0,d.V)(oe)){const Pe=(0,l.t)("share-modal.tab-title.library-panel","Library panel");ge.push({label:Pe,value:N.Ax.libraryPanel,component:T.e})}ge.push(...X)}else{const De=(0,l.t)("share-modal.tab-title.export","Export");ge.push({label:De,value:N.Ax.export,component:M}),ge.push(...q)}g.config.featureToggles.publicDashboards&&ge.push({label:"Public dashboard",value:N.Ax.publicDashboard,component:m.E});const Ue=ge.find(De=>De.value===ue);return{tabs:ge,activeTab:Ue?.value??ge[0].value}}function re(oe){const{tabs:ue,activeTab:me}=de(oe.panel,oe.activeTab);return{tabs:ue,activeTab:me}}class fe extends n.Component{constructor(ue){super(ue),this.onSelectTab=me=>{this.setState(ge=>({...ge,activeTab:me.value})),c.a.sharingTabChanged({item:me.value})},this.state=re(ue)}getActiveTab(){const{tabs:ue,activeTab:me}=this.state;return ue.find(ge=>ge.value===me)}renderTitle(){const{panel:ue}=this.props,{activeTab:me}=this.state,ge=ue?(0,l.t)("share-modal.panel.title","Share Panel"):(0,l.t)("share-modal.dashboard.title","Share"),Ue=de(this.props.panel,this.state.activeTab).tabs;return n.createElement(a.H,{title:ge,icon:"share-alt",tabs:Ue,activeTab:me,onChangeTab:this.onSelectTab})}render(){const{dashboard:ue,panel:me}=this.props,Ue=this.getActiveTab().component;return n.createElement(o.u,{isOpen:!0,title:this.renderTitle(),onDismiss:this.props.onDismiss},n.createElement(r.I,null,n.createElement(Ue,{dashboard:ue,panel:me,onDismiss:this.props.onDismiss})))}}const ie=(0,i.HE)(fe)},60563:(G,A,e)=>{"use strict";e.d(A,{w:()=>Pe,r:()=>De});var n=e(66681),a=e(85960),o=e(10476),r=e(92369),i=e(90857),g=e(11855),u=e(47257),l=e(20519),m=e(24956),c=e(55855),d=e(5999),f=e(57445),E=e(74042),v=e(29165),h=e(93349),p=e(37287),s=e(96201),y=e(80268),C=e(4990),b=e(41879),S=e(95162),D=e(62223);const M=()=>{const{width:Te}=(0,D.Z)();return Te>1024};var T=e(67716),R=e(94849),O=e(18163),x=e(49199);const I=()=>a.createElement(x.b,{title:"Please save your dashboard changes before updating the public configuration",severity:"warning",bottomSpacing:0});var L=e(44382),P=e(52620),N=e(28817),F=e(51637),U=e(76275);const j=r.wl.pages.ShareDashboardModal.PublicDashboard,V=({disabled:Te,onChange:nt,register:ct,timeRange:he})=>a.createElement(a.Fragment,null,a.createElement(F.C,{disabled:Te},a.createElement(E.wc,{spacing:"md"},a.createElement(E.Ar,{orientation:1,spacing:"xs",justify:"space-between"},a.createElement(f._,{description:"The public dashboard uses the default time range settings of the dashboard"},"Default time range"),a.createElement(U.K,{value:he,disabled:!0,onChange:()=>{}})),a.createElement(E.Ar,{orientation:0,spacing:"sm"},a.createElement(d.r,{...ct("isTimeSelectionEnabled"),"data-testid":j.EnableTimeRangeSwitch,onChange:xe=>{nt("isTimeSelectionEnabled",xe.currentTarget.checked),y.a.publicDashboardTimeSelectionChanged({enabled:xe.currentTarget.checked})}}),a.createElement(f._,{description:"Allow viewers to change time range"},"Time range picker enabled")),a.createElement(E.Ar,{orientation:0,spacing:"sm"},a.createElement(d.r,{...ct("isAnnotationsEnabled"),onChange:xe=>{nt("isAnnotationsEnabled",xe.currentTarget.checked),y.a.publicDashboardAnnotationsSelectionChanged({enabled:xe.currentTarget.checked})},"data-testid":j.EnableAnnotationsSwitch}),a.createElement(f._,{description:"Show annotations on public dashboard"},"Show annotations")))));var _=e(82541),H=e(96130),z=e(5106),K=e(75682);const Y=[{label:"Anyone with a link",value:N.Jd.PUBLIC},{label:"Only specified people",value:N.Jd.EMAIL}],k=r.wl.pages.ShareDashboardModal.PublicDashboard.EmailSharingConfiguration,q=({recipients:Te,dashboardUid:nt,publicDashboardUid:ct})=>{const he=(0,u.wW)(te),[xe,{isLoading:Me}]=(0,p.r5)(),[He,{isLoading:Ve}]=(0,p.RS)(),Oe=Me||Ve,Ne=qe=>{y.a.revokePublicDashboardEmailClicked(),xe({recipientUid:qe,dashboardUid:nt,uid:ct})},_e=qe=>{y.a.resendPublicDashboardEmailClicked(),He({recipientUid:qe,uid:ct})};return a.createElement("table",{className:he.table,"data-testid":k.EmailSharingList},a.createElement("tbody",null,Te.map((qe,rt)=>a.createElement("tr",{key:qe.uid},a.createElement("td",null,qe.recipient),a.createElement("td",null,a.createElement(_.h,{className:he.tableButtonsContainer},a.createElement(v.zx,{type:"button",variant:"destructive",fill:"text","aria-label":"Revoke",title:"Revoke",size:"sm",disabled:Oe,onClick:()=>Ne(qe.uid),"data-testid":`${k.DeleteEmail}-${rt}`},"Revoke"),a.createElement(v.zx,{type:"button",variant:"primary",fill:"text","aria-label":"Resend",title:"Resend",size:"sm",disabled:Oe,onClick:()=>_e(qe.uid),"data-testid":`${k.ReshareLink}-${rt}`},"Resend")))))))},X=()=>{const{width:Te}=(0,D.Z)(),nt=(0,u.wW)(te),he=(0,S.useSelector)(ne=>ne.dashboard).getModel(),{data:xe}=(0,p.Ym)(he.uid),[Me]=(0,p.Mi)(),[He,{isLoading:Ve}]=(0,p.FJ)(),Oe=b.contextSrv.hasPermission(S.AccessControlAction.DashboardsPublicWrite),{register:Ne,setValue:_e,control:qe,watch:rt,handleSubmit:mt,formState:{errors:Je},reset:Ae}=(0,o.cI)({defaultValues:{shareType:xe?.share||N.Jd.PUBLIC,email:""},mode:"onSubmit"}),Ke=ne=>{const Z={dashboard:he,payload:{...xe,share:ne}};Me(Z)},Xe=async ne=>{y.a.publicDashboardEmailInviteClicked(),await He({recipient:ne.email,uid:xe.uid,dashboardUid:he.uid}).unwrap(),Ae({email:"",shareType:N.Jd.EMAIL})};return a.createElement("form",{onSubmit:mt(Xe)},a.createElement(F.C,{disabled:!Oe,"data-testid":k.Container,className:nt.container},a.createElement(l.g,{label:"Can view dashboard",className:nt.field},a.createElement(H.g,{name:"shareType",control:qe,render:({field:ne})=>{const{ref:Z,...ee}=ne;return a.createElement(z.S,{...ee,size:Te<480?"sm":"md",options:Y,onChange:ce=>{y.a.publicDashboardShareTypeChange({shareType:ce===N.Jd.EMAIL?"email":"public"}),_e("shareType",ce),Ke(ce)}})}})),rt("shareType")===N.Jd.EMAIL&&a.createElement(a.Fragment,null,a.createElement(l.g,{label:"Invite",description:"Invite people by email",error:Je.email?.message,invalid:!!Je.email?.message||void 0,className:nt.field},a.createElement("div",{className:nt.emailContainer},a.createElement(m.I,{className:nt.emailInput,placeholder:"email",autoCapitalize:"none",...Ne("email",{required:"Email is required",pattern:{value:N.C2,message:"Invalid email"}}),"data-testid":k.EmailSharingInput}),a.createElement(v.zx,{type:"submit",variant:"primary",disabled:Ve,"data-testid":k.EmailSharingInviteButton},"Invite ",Ve&&a.createElement(K.$,null)))),!!xe?.recipients?.length&&a.createElement(q,{recipients:xe.recipients,dashboardUid:he.uid,publicDashboardUid:xe.uid}))))},te=Te=>({container:(0,n.css)`
    label: emailConfigContainer;
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    gap: ${Te.spacing(3)};
  `,field:(0,n.css)`
    label: field-noMargin;
    margin-bottom: 0;
  `,emailContainer:(0,n.css)`
    label: emailContainer;
    display: flex;
    gap: ${Te.spacing(1)};
  `,emailInput:(0,n.css)`
    label: emailInput;
    flex-grow: 1;
  `,table:(0,n.css)`
    label: table;
    display: flex;
    max-height: 220px;
    overflow-y: scroll;

    & tbody {
      display: flex;
      flex-direction: column;
      flex-grow: 1;
    }

    & tr {
      min-height: 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: ${Te.spacing(.5,1)};

      :nth-child(odd) {
        background: ${Te.colors.background.secondary};
      }
    }
  `,tableButtonsContainer:(0,n.css)`
    display: flex;
    justify-content: end;
  `});var se=e(99053),de=e(75064);function re({headerElement:Te,isContentVisible:nt=!1,onRowToggle:ct,title:he,...xe}){const Me=(0,u.wW)(fe),He=Te&&se.renderOrCallToRender(Te,{className:Me.summaryWrapper});return a.createElement("div",{className:Me.wrapper},a.createElement("div",{className:Me.header},a.createElement(de.h,{name:nt?"angle-down":"angle-right",tooltip:nt?"Collapse settings":"Expand settings",className:Me.collapseIcon,onClick:ct,"aria-expanded":nt,...xe}),he&&a.createElement("div",{className:Me.titleWrapper,onClick:ct},a.createElement("span",{className:Me.title},he)),He))}re.displayName="SettingsBarHeader";function fe(Te){return{wrapper:(0,n.css)({label:"header",padding:Te.spacing(.5,.5),borderRadius:Te.shape.radius.default,background:Te.colors.background.secondary,minHeight:Te.spacing(4),"&:focus":{outline:"none"}}),header:(0,n.css)({label:"column",display:"flex",alignItems:"center",whiteSpace:"nowrap"}),collapseIcon:(0,n.css)({marginLeft:Te.spacing(.5),color:Te.colors.text.disabled}),titleWrapper:(0,n.css)({display:"flex",alignItems:"center",cursor:"pointer",overflow:"hidden",marginRight:`${Te.spacing(.5)}`,[Te.breakpoints.down("sm")]:{flex:"1 1"}}),title:(0,n.css)({fontWeight:Te.typography.fontWeightBold,marginLeft:Te.spacing(.5),overflow:"hidden",textOverflow:"ellipsis"}),summaryWrapper:(0,n.css)({display:"flex",flexWrap:"wrap",[Te.breakpoints.down("sm")]:{flex:"2 2"}})}}function ie({children:Te,title:nt,headerElement:ct,...he}){const xe=(0,u.wW)(oe),[Me,He]=(0,a.useState)(!1);function Ve(){He(Oe=>!Oe)}return a.createElement(a.Fragment,null,a.createElement(re,{onRowToggle:Ve,isContentVisible:Me,title:nt,headerElement:ct,...he}),Me&&a.createElement("div",{className:xe.content},Te))}ie.displayName="SettingsBar";const oe=Te=>({content:(0,n.css)({marginTop:Te.spacing(1),marginLeft:Te.spacing(4)})});var ue=e(93738);function me({className:Te,isDataLoading:nt=!1,timeRange:ct,timeSelectionEnabled:he,annotationsEnabled:xe}){const Me=(0,u.wW)(ge);return nt?a.createElement("div",{className:(0,n.cx)(Me.summaryWrapper,Te)},a.createElement(K.$,{className:Me.summary,inline:!0,size:"sm"})):a.createElement("div",{className:(0,n.cx)(Me.summaryWrapper,Te)},a.createElement("span",{className:Me.summary},"Time range = ",a.createElement(ue.q,{className:Me.timeRange,value:ct})),a.createElement("span",{className:Me.summary},`Time range picker = ${he?"enabled":"disabled"}`),a.createElement("span",{className:Me.summary},`Annotations = ${xe?"show":"hide"}`))}me.displayName="SettingsSummary";const ge=Te=>({summaryWrapper:(0,n.css)({display:"flex"}),summary:(0,n.css)`
      label: collapsedText;
      margin-left: ${Te.spacing.gridSize*2}px;
      font-size: ${Te.typography.bodySmall.fontSize};
      color: ${Te.colors.text.secondary};
    `,timeRange:(0,n.css)({display:"inline-block"})}),Ue=r.wl.pages.ShareDashboardModal.PublicDashboard;function De({onRevoke:Te,timeRange:nt,hasTemplateVariables:ct=!1,showSaveChangesAlert:he=!1,unsupportedDatasources:xe=[],publicDashboard:Me,dashboard:He}){const Ve=(0,u.wW)(ye),Oe=M(),[Ne,{isLoading:_e}]=(0,p.Mi)(),qe=b.contextSrv.hasPermission(S.AccessControlAction.DashboardsPublicWrite),rt=!qe||_e,mt=!!i.config.featureToggles.publicDashboardsEmailSharing&&(0,g.v)("publicDashboardsEmailSharing"),{handleSubmit:Je,setValue:Ae,register:Ke}=(0,o.cI)({defaultValues:{isAnnotationsEnabled:Me?.annotationsEnabled,isTimeSelectionEnabled:Me?.timeSelectionEnabled,isPaused:!Me?.isEnabled}}),Xe=async ee=>{const{isAnnotationsEnabled:ce,isTimeSelectionEnabled:be,isPaused:Ee}=ee;Ne({dashboard:He,payload:{...Me,annotationsEnabled:ce,timeSelectionEnabled:be,isEnabled:!Ee}})},ne=async(ee,ce)=>{Ae(ee,ce),await Je(be=>Xe(be))()};function Z(){y.a.publicDashboardUrlCopied()}return a.createElement("div",{className:Ve.configContainer},he&&a.createElement(I,null),!qe&&a.createElement(O.D,{mode:"edit"}),ct&&a.createElement(P.V,null),xe.length>0&&a.createElement(L.f,{unsupportedDataSources:xe.join(", ")}),mt&&a.createElement(X,null),a.createElement(l.g,{label:"Dashboard URL",className:Ve.fieldSpace},a.createElement(m.I,{value:(0,N._M)(Me.accessToken),readOnly:!0,disabled:!Me?.isEnabled,"data-testid":Ue.CopyUrlInput,addonAfter:a.createElement(c.m,{"data-testid":Ue.CopyUrlButton,variant:"primary",disabled:!Me?.isEnabled,getText:()=>(0,N._M)(Me.accessToken),onClipboardCopy:Z},"Copy")})),a.createElement(l.g,{className:Ve.fieldSpace},a.createElement(E.Ar,null,a.createElement(d.r,{...Ke("isPaused"),disabled:rt,onChange:ee=>{y.a.publicDashboardPauseSharingClicked({paused:ee.currentTarget.checked}),ne("isPaused",ee.currentTarget.checked)},"data-testid":Ue.PauseSwitch}),a.createElement(f._,{className:(0,n.css)`
              margin-bottom: 0;
            `},"Pause sharing dashboard"))),a.createElement(l.g,{className:Ve.fieldSpace},a.createElement(ie,{title:"Settings",headerElement:({className:ee})=>a.createElement(me,{className:ee,isDataLoading:_e,timeRange:nt,timeSelectionEnabled:Me?.timeSelectionEnabled,annotationsEnabled:Me?.annotationsEnabled}),"data-testid":Ue.SettingsDropdown},a.createElement(V,{disabled:rt,onChange:ne,register:Ke,timeRange:nt}))),a.createElement(E.Ar,{orientation:Oe?0:1,justify:Oe?"flex-end":"flex-start",align:Oe?"center":"normal"},a.createElement(E.Lh,{justify:"flex-end"},a.createElement(v.zx,{"aria-label":"Revoke public URL",title:"Revoke public URL",onClick:Te,type:"button",disabled:rt,"data-testid":Ue.DeleteButton,variant:"destructive",fill:"outline"},"Revoke public URL"))))}function Pe({publicDashboard:Te,unsupportedDatasources:nt}){const he=(0,S.useSelector)(Ne=>Ne.dashboard).getModel(),xe=(0,s.O)(he.getDefaultTime(),he),Me=b.contextSrv.hasPermission(S.AccessControlAction.DashboardsPublicWrite),He=(0,N._H)(he.getVariables()),[Ve]=(0,p.bS)(),Oe=Ne=>{Ve({dashboard:he,uid:Te.uid,dashboardUid:he.uid}),Ne()};return a.createElement(h.JY,null,({showModal:Ne,hideModal:_e})=>a.createElement(De,{publicDashboard:Te,dashboard:he,unsupportedDatasources:nt,timeRange:xe,showSaveChangesAlert:Me&&he.hasUnsavedChanges(),hasTemplateVariables:He,onRevoke:()=>{y.a.revokePublicDashboardClicked(),Ne(C.N,{dashboardTitle:he.title,onConfirm:()=>Oe(_e),onDismiss:()=>{Ne(T.V8,{dashboard:he,onDismiss:_e,activeTab:R.Ax.publicDashboard})}})}}))}const ye=Te=>({configContainer:(0,n.css)`
    label: config container;
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    gap: ${Te.spacing(3)};
  `,fieldSpace:(0,n.css)`
    label: field space;
    width: 100%;
    margin-bottom: 0;
  `,timeRange:(0,n.css)({display:"inline-block"})})},28503:(G,A,e)=>{"use strict";e.d(A,{D:()=>O,R:()=>R});var n=e(66681),a=e(85960),o=e(92369),r=e(47257),i=e(66596),g=e(29165),u=e(75682),l=e(37287),m=e(80268),c=e(41879),d=e(95162),f=e(18163),E=e(44382),v=e(52620),h=e(28817),p=e(24892),s=e(51637),y=e(74042),C=e(55973);const b=o.wl.pages.ShareDashboardModal.PublicDashboard,S=[{type:"publicAcknowledgment",description:"Your entire dashboard will be public*",testId:b.WillBePublicCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",tooltip:"Learn more about public dashboards"}},{type:"dataSourcesAcknowledgment",description:"Publishing currently only works with a subset of data sources*",testId:b.LimitedDSCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/datasources/",tooltip:"Learn more about public datasources"}},{type:"usageAcknowledgment",description:"Making a dashboard public will cause queries to run each time it is viewed, which may increase costs*",testId:b.CostIncreaseCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",tooltip:"Learn more about query caching"}}],D=({disabled:I,register:L})=>{const P=(0,r.wW)(M);return a.createElement(a.Fragment,null,a.createElement("p",{className:P.title},"Before you make the dashboard public, acknowledge the following:"),a.createElement(s.C,{disabled:I},a.createElement(y.wc,{spacing:"md"},S.map(N=>a.createElement(y.Lh,{key:N.type,spacing:"none",align:"center"},a.createElement(C.X,{...L(N.type,{required:!0}),label:N.description,"data-testid":N.testId}),a.createElement(g.Qj,{variant:"primary",href:N.info.href,target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:N.info.tooltip}))))))},M=I=>({title:(0,n.css)`
    font-weight: ${I.typography.fontWeightBold};
  `}),T=o.wl.pages.ShareDashboardModal.PublicDashboard,R=({unsupportedDatasources:I=[],unsupportedTemplateVariables:L=!1,dashboard:P,hasError:N=!1})=>{const F=(0,r.wW)(x),U=c.contextSrv.hasPermission(d.AccessControlAction.DashboardsPublicWrite),[j,{isLoading:V,isError:_}]=(0,l.zZ)(),H=()=>{j({dashboard:P,payload:{isEnabled:!0}}),m.a.generatePublicDashboardUrlClicked({})},z=!U||V||_||N;return a.createElement("div",{className:F.container},a.createElement("div",null,a.createElement("p",{className:F.title},"Welcome to public dashboards!"),a.createElement("p",{className:F.description},"Currently, we don\u2019t support template variables or frontend data sources")),!U&&a.createElement(f.D,{mode:"create"}),L&&a.createElement(v.V,null),I.length>0&&a.createElement(E.f,{unsupportedDataSources:I.join(", ")}),a.createElement(i.l,{onSubmit:H,validateOn:"onChange",maxWidth:"none"},({register:K,formState:{isValid:Y}})=>a.createElement(a.Fragment,null,a.createElement("div",{className:F.checkboxes},a.createElement(D,{disabled:z,register:K})),a.createElement("div",{className:F.buttonContainer},a.createElement(g.zx,{type:"submit",disabled:z||!Y,"data-testid":T.CreateButton},"Generate public URL ",V&&a.createElement(u.$,{className:F.loadingSpinner}))))))};function O({hasError:I}){const P=(0,d.useSelector)(U=>U.dashboard).getModel(),{unsupportedDataSources:N}=(0,p.g)(P),F=(0,h._H)(P.getVariables());return a.createElement(R,{dashboard:P,unsupportedDatasources:N,unsupportedTemplateVariables:F,hasError:I})}const x=I=>({container:(0,n.css)`
    display: flex;
    flex-direction: column;
    gap: ${I.spacing(4)};
  `,title:(0,n.css)`
    font-size: ${I.typography.h4.fontSize};
    margin: ${I.spacing(0,0,2)};
  `,description:(0,n.css)`
    color: ${I.colors.text.secondary};
    margin-bottom: ${I.spacing(0)};
  `,checkboxes:(0,n.css)`
    margin: ${I.spacing(0,0,4)};
  `,buttonContainer:(0,n.css)`
    display: flex;
    justify-content: end;
  `,loadingSpinner:(0,n.css)`
    margin-left: ${I.spacing(1)};
  `})},18163:(G,A,e)=>{"use strict";e.d(A,{D:()=>i});var n=e(85960),a=e(92369),o=e(49199);const r=a.wl.pages.ShareDashboardModal.PublicDashboard,i=({mode:g})=>n.createElement(o.b,{severity:"info",title:`You don\u2019t have permission to ${g} a public dashboard`,"data-testid":r.NoUpsertPermissionsWarningAlert,bottomSpacing:0},"Contact your admin to get permission to ",g," create public dashboards")},44382:(G,A,e)=>{"use strict";e.d(A,{f:()=>m});var n=e(66681),a=e(70318),o=e.n(a),r=e(85960),i=e(92369),g=e(47257),u=e(49199);const l=i.wl.pages.ShareDashboardModal.PublicDashboard,m=({unsupportedDataSources:d})=>{const f=(0,g.wW)(c);return r.createElement(u.b,{severity:"warning",title:"Unsupported data sources","data-testid":l.UnsupportedDataSourcesWarningAlert,bottomSpacing:0},r.createElement("p",{className:f.unsupportedDataSourceDescription},"There are data sources in this dashboard that are unsupported for public dashboards. Panels that use these data sources may not function properly: ",d,"."),r.createElement("a",{href:"https://grafana.com/docs/grafana/next/dashboards/dashboard-public/",className:o()("text-link",f.unsupportedDataSourceDescription)},"Read more about supported data sources"))},c=d=>({unsupportedDataSourceDescription:(0,n.css)`
    color: ${d.colors.text.secondary};
    margin-bottom: ${d.spacing(1)};
  `})},52620:(G,A,e)=>{"use strict";e.d(A,{V:()=>i});var n=e(85960),a=e(92369),o=e(49199);const r=a.wl.pages.ShareDashboardModal.PublicDashboard,i=()=>n.createElement(o.b,{severity:"warning",title:"Template variables are not supported","data-testid":r.TemplateVariablesWarningAlert,bottomSpacing:0},"This public dashboard may not work since it uses template variables")},63390:(G,A,e)=>{"use strict";e.d(A,{E:()=>E,a:()=>f});var n=e(66681),a=e(85960),o=e(47257),r=e(75682),i=e(37287),g=e(28817),u=e(95162),l=e(99544),m=e(60563),c=e(28503),d=e(24892);const f=()=>{const h=(0,o.wW)(v);return a.createElement(l.L,{className:h.loadingContainer},a.createElement(a.Fragment,null,"Loading configuration",a.createElement(r.$,{size:"lg",className:h.spinner})))},E=h=>{const{data:p,isLoading:s,isError:y}=(0,i.Ym)(h.dashboard.uid),b=(0,u.useSelector)(D=>D.dashboard).getModel(),{unsupportedDataSources:S}=(0,d.g)(b);return a.createElement(a.Fragment,null,s?a.createElement(f,null):(0,g.Gt)(p)?a.createElement(m.w,{publicDashboard:p,unsupportedDatasources:S}):a.createElement(c.D,{hasError:y}))},v=h=>({loadingContainer:(0,n.css)({height:"280px",alignItems:"center",justifyContent:"center",gap:h.spacing(1)}),spinner:(0,n.css)({marginBottom:h.spacing(0)})})},28817:(G,A,e)=>{"use strict";e.d(A,{C2:()=>f,Ez:()=>d,Gt:()=>l,Jd:()=>g,_H:()=>u,_M:()=>c,ek:()=>m});var n=e(32063),a=e(67954),o=e(65512),r=e(94849),i=e(72686),g=(E=>(E.PUBLIC="public",E.EMAIL="email",E))(g||{});const u=E=>E.length>0,l=E=>E?.uid!==""&&E?.uid!==void 0,m=async E=>{let v=new Set;for(const h of E)for(const p of h.targets){const s=p?.datasource?.type;s&&(i.W.has(s)&&await(0,o.ak)().get(p.datasource)instanceof n.CK||v.add(s))}return Array.from(v).sort()},c=E=>`${(0,a.iE)().appUrl}public-dashboards/${E}`,d=E=>`/d/${E}?shareView=${r.Ax.publicDashboard}`,f=/^[A-Z\d._%+-]+@[A-Z\d.-]+\.[A-Z]{2,}$/i},72686:(G,A,e)=>{"use strict";e.d(A,{W:()=>n});const n=new Set(["__expr__","apache-iotdb-datasource","aquaqanalytics-kdbbackend-datasource","axiomhq-axiom-datasource","cnos-cnosdb-datasource","datasource","dlopes7-appdynamics-datasource","dvelop-odata-datasource","elasticsearch","frser-sqlite-datasource","grafadruid-druid-datasource","grafana-athena-datasource","grafana-azure-data-explorer-datasource","grafana-azure-monitor-datasource","grafana-bigquery-datasource","grafana-clickhouse-datasource","grafana-databricks-datasource","grafana-datadog-datasource","grafana-db2-datasource","grafana-dynatrace-datasource","grafana-es-open-distro-datasource","grafana-falconlogscale-datasource","grafana-github-datasource","grafana-gitlab-datasource","grafana-honeycomb-datasource","grafana-iot-sitewise-datasource","grafana-jira-datasource","grafana-looker-datasource","grafana-mock-datasource","grafana-mongodb-datasource","grafana-newrelic-datasource","grafana-odbc-datasource","grafana-opcua-datasource","grafana-opensearch-datasource","grafana-oracle-datasource","grafana-orbit-datasource","grafana-redshift-datasource","grafana-salesforce-datasource","grafana-saphana-datasource","grafana-sentry-datasource","grafana-servicenow-datasource","grafana-snowflake-datasource","grafana-splunk-datasource","grafana-splunk-monitoring-datasource","grafana-timestream-datasource","grafana-wavefront-datasource","grafana-x-ray-datasource","graphite","hadesarchitect-cassandra-datasource","influxdata-flightsql-datasource","influxdb","innius-grpc-datasource","kniepdennis-neo4j-datasource","loki","marcusolsson-csv-datasource","marcusolsson-ynab-datasource","mssql","mysql","nagasudhirpulla-api-datasource","needleinajaystack-haystack-datasource","opentsdb","postgres","prometheus","quickwit-quickwit-datasource","redis-datasource","sentinelone-dataset-datasource","sneller-sneller-datasource","spiceai-spicexyz-datasource","stackdriver","tdengine-datasource","vertamedia-clickhouse-datasource","vertica-grafana-datasource","ydbtech-ydb-datasource","yesoreyeram-infinity-datasource"])},24892:(G,A,e)=>{"use strict";e.d(A,{g:()=>o});var n=e(85960),a=e(28817);const o=r=>{const[i,g]=(0,n.useState)([]);return(0,n.useEffect)(()=>{(async()=>await(0,a.ek)(r.panels))().then(l=>{g(l)})},[r.panels]),{unsupportedDataSources:i}}},79113:(G,A,e)=>{"use strict";e.d(A,{J:()=>i});var n=e(85960),a=e(20519),o=e(5106),r=e(95329);const i=({selectedTheme:g="current",onChange:u})=>{const l=[{label:(0,r.t)("share-modal.theme-picker.current","Current"),value:"current"},{label:(0,r.t)("share-modal.theme-picker.dark","Dark"),value:"dark"},{label:(0,r.t)("share-modal.theme-picker.light","Light"),value:"light"}];return n.createElement(a.g,{label:(0,r.t)("share-modal.theme-picker.field-name","Theme")},n.createElement(o.S,{options:l,value:g,onChange:u}))}},5312:(G,A,e)=>{"use strict";e.d(A,{ShareModal:()=>n.V8});var n=e(67716)},94849:(G,A,e)=>{"use strict";e.d(A,{Ax:()=>h,OS:()=>m,S_:()=>E,Sc:()=>f,U8:()=>l,bl:()=>c});var n=e(71244),a=e(173),o=e(12693),r=e(85745),i=e(90857),g=e(28878),u=e(45864);function l({useCurrentTimeRange:p,selectedTheme:s,panel:y,search:C=window.location.search,range:b=(0,u.$t)().timeRange(),orgId:S=i.config.bootData.user.orgId}){const D=new URLSearchParams(C),M=y?.timeFrom;if(M){const{from:T,to:R}=n.describeTextRange(M);D.set("from",T),D.set("to",R)}else D.set("from",String(b.from.valueOf())),D.set("to",String(b.to.valueOf()));return D.set("orgId",String(S)),p||(D.delete("from"),D.delete("to")),s!=="current"&&D.set("theme",s),y&&!D.has("editPanel")&&D.set("viewPanel",String(y.id)),D.delete("auth_token"),D}function m(){let p=window.location.href;const s=p.indexOf("?");return s!==-1&&(p=p.substring(0,s)),p}async function c(p,s,y,C){const b=m(),S=l({useCurrentTimeRange:p,selectedTheme:s,panel:y}),D=a.Cj.appendQueryToUrl(b,S.toString());return C?await(0,g.D)(D):D}function d(p,s,y,C,b){const S=m(),D=l({useCurrentTimeRange:p,selectedTheme:y,panel:C,range:b});let M=S.replace(i.config.appSubUrl+"/dashboard/",i.config.appSubUrl+"/dashboard-solo/");M=M.replace(i.config.appSubUrl+"/d/",i.config.appSubUrl+"/d-solo/"),o.u.stripBaseFromUrl(S)==="/"&&(M=`${i.config.appUrl}d-solo/${s}`);const R=D.get("editPanel")??D.get("viewPanel")??"";return D.set("panelId",R),D.delete("editPanel"),D.delete("viewPanel"),a.Cj.appendQueryToUrl(M,D.toString())}function f(p,s,y,C){let S=d(p,s,y,C).replace(i.config.appSubUrl+"/dashboard-solo/",i.config.appSubUrl+"/render/dashboard-solo/");return S=S.replace(i.config.appSubUrl+"/d-solo/",i.config.appSubUrl+"/render/d-solo/"),S+="&width=1000&height=500"+v(),S}function E(p,s,y,C,b){return`<iframe src="${d(p,s,y,C,b)}" width="450" height="200" frameborder="0"></iframe>`}function v(){const p="&tz=UTC"+encodeURIComponent((0,r.CQ)().format("Z"));if(!window.Intl)return p;const s=window.Intl.DateTimeFormat();if(!s.resolvedOptions)return p;const y=s.resolvedOptions();return y.timeZone?"&tz="+encodeURIComponent(y.timeZone):p}const h={link:"link",snapshot:"snapshot",export:"export",embed:"embed",libraryPanel:"library_panel",pdf:"pdf",report:"report",publicDashboard:"public_dashboard"}},53568:(G,A,e)=>{"use strict";e.d(A,{MM:()=>b,Ul:()=>h});var n=e(66681),a=e(85960),o=e(81445),r=e(12331),i=e(92369),g=e(47257),u=e(54635),l=e(50263),m=e(44839),c=e(97666),d=e(29165),f=e(46783),E=e(43282);function v({dashboardUID:S,link:D}){const M=(0,g.wW)(C),T=p({dashboardUID:S,link:D});return!T||y.length===0?null:a.createElement(u.v,null,a.createElement("div",{className:M.dropdown},a.createElement(l.$,null,T.map((R,O)=>a.createElement(u.v.Item,{url:R.url,target:D.targetBlank?"_blank":void 0,key:`dashlinks-dropdown-item-${R.uid}-${O}`,label:R.title,testId:i.wl.components.DashboardLinks.link,"aria-label":`${R.title} dashboard`})))))}const h=S=>{const{link:D,linkInfo:M,dashboardUID:T}=S,R=p(S),O=(0,g.wW)(C);return D.asDropdown?a.createElement(m.L,{overlay:a.createElement(v,{link:D,dashboardUID:T})},a.createElement(b,{"data-placement":"bottom","data-toggle":"dropdown","aria-controls":"dropdown-list","aria-haspopup":"menu",fill:"outline",variant:"secondary","data-testid":i.wl.components.DashboardLinks.dropDown},a.createElement(c.J,{"aria-hidden":!0,name:"bars",className:O.iconMargin}),a.createElement("span",null,M.title))):a.createElement(a.Fragment,null,R.length>0&&R.map((x,I)=>a.createElement(b,{key:`dashlinks-list-item-${x.uid}-${I}`,icon:"apps",variant:"secondary",fill:"outline",href:x.url,target:D.targetBlank?"_blank":void 0,rel:"noreferrer","data-testid":i.wl.components.DashboardLinks.link},x.title)))},p=({link:S,dashboardUID:D})=>{const{tags:M}=S,T=(0,o.Z)(()=>s(M),[M]);return T.value?y(D,S,T.value):[]};async function s(S,D={getBackendSrv:f.i}){return await D.getBackendSrv().search({tag:S,limit:100})}function y(S,D,M,T={getLinkSrv:E.Bq,sanitize:r.Nw,sanitizeUrl:r.Nm}){return M.filter(R=>R.uid!==S).map(R=>{const O=R.uid,x=T.sanitize(R.title),I=T.getLinkSrv().getLinkUrl({...D,url:R.url}),L=T.sanitizeUrl(I);return{uid:O,title:x,url:L}})}function C(S){return{iconMargin:(0,n.css)({marginRight:S.spacing(.5)}),dropdown:(0,n.css)({maxWidth:"max(30vw, 300px)",maxHeight:"70vh",overflowY:"auto"}),button:(0,n.css)({color:S.colors.text.primary}),dashButton:(0,n.css)({fontSize:S.typography.bodySmall.fontSize,paddingLeft:S.spacing(1),paddingRight:S.spacing(1)})}}const b=a.forwardRef(({className:S,...D},M)=>{const T=(0,g.wW)(C),R=D.href?d.Qj:d.zx;return a.createElement(R,{...D,variant:"secondary",fill:"outline",className:(0,n.cx)(S,T.dashButton),ref:M})});b.displayName="DashboardLinkButton"},68918:(G,A,e)=>{"use strict";e.d(A,{B:()=>f});var n=e(66681),a=e(56375),o=e(85960),r=e(47257),i=e(97666);const g=({diff:v})=>{const h=(0,r.wW)(u),p=!(0,a.isUndefined)(v.originalValue)&&!(0,a.isArray)(v.originalValue)&&!(0,a.isObject)(v.originalValue),s=!(0,a.isUndefined)(v.value)&&!(0,a.isArray)(v.value)&&!(0,a.isObject)(v.value);return o.createElement(o.Fragment,null,p&&o.createElement("span",{className:h},String(v.originalValue)),p&&s?o.createElement(i.J,{name:"arrow-right"}):null,s&&o.createElement("span",{className:h},String(v.value)))},u=v=>(0,n.css)`
  background-color: ${v.colors.action.hover};
  border-radius: ${v.shape.radius.default};
  color: ${v.colors.text.primary};
  font-size: ${v.typography.body.fontSize};
  margin: 0 ${v.spacing(.5)};
  padding: ${v.spacing(.5,1)};
`;var l=e(55803);const m={op:"replace",originalValue:void 0,path:[""],value:void 0,startLineNumber:0},c=({diff:v,title:h})=>{const p=(0,r.wW)(d);return v?o.createElement(o.Fragment,null,o.createElement(i.J,{type:"mono",name:"circle",className:p[v.op]})," ",o.createElement("span",{className:p.embolden},h)," ",o.createElement("span",null,(0,l.dW)(v,v.path.length>1))," ",o.createElement(g,{diff:v})):o.createElement("div",{className:p.withoutDiff},o.createElement(i.J,{type:"mono",name:"circle",className:p.replace})," ",o.createElement("span",{className:p.embolden},h)," ",o.createElement("span",null,(0,l.dW)(m,!1)))},d=v=>({embolden:(0,n.css)`
    font-weight: ${v.typography.fontWeightBold};
  `,add:(0,n.css)`
    color: ${v.colors.success.main};
  `,replace:(0,n.css)`
    color: ${v.colors.success.main};
  `,move:(0,n.css)`
    color: ${v.colors.success.main};
  `,copy:(0,n.css)`
    color: ${v.colors.success.main};
  `,_get:(0,n.css)`
    color: ${v.colors.success.main};
  `,test:(0,n.css)`
    color: ${v.colors.success.main};
  `,remove:(0,n.css)`
    color: ${v.colors.success.main};
  `,withoutDiff:(0,n.css)`
    margin-bottom: ${v.spacing(2)};
  `}),f=({diffs:v,title:h})=>{const p=(0,r.wW)(E);return v.length===1?o.createElement("div",{className:p.container,"data-testid":"diffGroup"},o.createElement(c,{title:h,diff:v[0]})):o.createElement("div",{className:p.container,"data-testid":"diffGroup"},o.createElement(c,{title:h}),o.createElement("ul",{className:p.list},v.map((s,y)=>o.createElement("li",{className:p.listItem,key:`${(0,a.last)(s.path)}__${y}`},o.createElement("span",null,(0,l.dW)(s))," ",o.createElement(g,{diff:s})))))},E=v=>({container:(0,n.css)`
    background-color: ${v.colors.background.secondary};
    font-size: ${v.typography.h6.fontSize};
    margin-bottom: ${v.spacing(2)};
    padding: ${v.spacing(2)};
  `,list:(0,n.css)`
    margin-left: ${v.spacing(4)};
  `,listItem:(0,n.css)`
    margin-bottom: ${v.spacing(1)};
  `})},21986:(G,A,e)=>{"use strict";e.d(A,{Z:()=>u});var n=e(66681),a=e(85960),o=e(86114),r=e.n(o),i=e(19737),g=e(47257);const u=({oldValue:l,newValue:m})=>{const c=(0,g.l4)(),d={variables:{dark:{diffViewerBackground:c.colors.background.canvas,diffViewerColor:c.colors.text.primary,addedBackground:(0,i.Z)(c.v1.palette.greenShade).setAlpha(.3).toString(),addedColor:"white",removedBackground:(0,i.Z)(c.v1.palette.redShade).setAlpha(.3).toString(),removedColor:"white",wordAddedBackground:(0,i.Z)(c.v1.palette.greenBase).setAlpha(.4).toString(),wordRemovedBackground:(0,i.Z)(c.v1.palette.redBase).setAlpha(.4).toString(),addedGutterBackground:(0,i.Z)(c.v1.palette.greenShade).setAlpha(.2).toString(),removedGutterBackground:(0,i.Z)(c.v1.palette.redShade).setAlpha(.2).toString(),gutterBackground:c.colors.background.primary,gutterBackgroundDark:c.colors.background.primary,highlightBackground:(0,i.Z)(c.colors.primary.main).setAlpha(.4).toString(),highlightGutterBackground:(0,i.Z)(c.colors.primary.shade).setAlpha(.2).toString(),codeFoldGutterBackground:c.colors.background.secondary,codeFoldBackground:c.colors.background.secondary,emptyLineBackground:c.colors.background.secondary,gutterColor:c.colors.text.disabled,addedGutterColor:c.colors.text.primary,removedGutterColor:c.colors.text.primary,codeFoldContentColor:c.colors.text.disabled,diffViewerTitleBackground:c.colors.background.secondary,diffViewerTitleColor:c.colors.text.disabled,diffViewerTitleBorderColor:c.colors.border.strong}},codeFold:{fontSize:c.typography.bodySmall.fontSize},gutter:`
      pre {
        color: ${(0,i.Z)(c.colors.text.disabled).setAlpha(1).toString()};
        opacity: 0.61;
      }
    `};return a.createElement("div",{className:(0,n.css)`
        font-size: ${c.typography.bodySmall.fontSize};
        // prevent global styles interfering with diff viewer
        pre {
          all: revert;
        }
      `},a.createElement(r(),{styles:d,oldValue:l,newValue:m,splitView:!1,compareMethod:o.DiffMethod.CSS,useDarkTheme:c.isDark}))}},49415:(G,A,e)=>{"use strict";e.d(A,{U$:()=>V,Cs:()=>R,Sd:()=>S,R1:()=>L,K8:()=>r});var n=e(56375),a=e(85445);class o{getHistoryList(z,K){const Y=z&&z.uid?z.uid:void 0;return Y?(0,a.i)().get(`api/dashboards/uid/${Y}/versions`,K):Promise.resolve([])}getDashboardVersion(z,K){return(0,a.i)().get(`api/dashboards/uid/${z}/versions/${K}`)}restoreDashboard(z,K){const Y=z&&z.uid?z.uid:void 0,k=`api/dashboards/uid/${Y}/restore`;return Y&&(0,n.isNumber)(K)?(0,a.i)().post(k,{version:K}):Promise.resolve({})}}const r=new o;var i=e(66681),g=e(85960),u=e(55973),l=e(69977),m=e(93349),c=e(29165),d=e(77980),f=e(85954),E=e(12693),v=e(91),h=e(93991),p=e(95162),s=e(60829);const y=async(H,z)=>(s.H.ignoreNextSave(),await r.restoreDashboard(z,H)),C=H=>{const z=(0,p.useSelector)(q=>q.dashboard.getModel()),[K,Y]=(0,f.Z)(async()=>await y(H,z),[]),k=(0,h.iG)();return(0,g.useEffect)(()=>{if(K.value){const q=v.E1.getLocation(),X=E.u.stripBaseFromUrl(K.value.url),te=q.state?.routeReloadCounter;v.E1.replace({...q,pathname:X,state:{routeReloadCounter:te?te+1:1}}),k.success("Dashboard restored",`Restored from version ${H}`)}},[K,H,k]),{state:K,onRestoreDashboard:Y}},b=({hideModal:H,version:z})=>{const{state:K,onRestoreDashboard:Y}=C(z);return(0,g.useEffect)(()=>{!K.loading&&K.value&&H()},[K,H]),g.createElement(d.s,{isOpen:!0,title:"Restore Version",icon:"history",onDismiss:H,onConfirm:Y,body:g.createElement("p",null,"Are you sure you want to restore the dashboard to version ",z,"? All unsaved changes will be lost."),confirmText:`Yes, restore to version ${z}`})},S=({versions:H,canCompare:z,onCheck:K})=>g.createElement("table",{className:"filter-table gf-form-group"},g.createElement("thead",null,g.createElement("tr",null,g.createElement("th",{className:"width-4"}),g.createElement("th",{className:"width-4"},"Version"),g.createElement("th",{className:"width-14"},"Date"),g.createElement("th",{className:"width-10"},"Updated by"),g.createElement("th",null,"Notes"),g.createElement("th",null))),g.createElement("tbody",null,H.map((Y,k)=>g.createElement("tr",{key:Y.id},g.createElement("td",null,g.createElement(u.X,{"aria-label":`Toggle selection of version ${Y.version}`,className:(0,i.css)`
                display: inline;
              `,checked:Y.checked,onChange:q=>K(q,Y.id),disabled:!Y.checked&&z})),g.createElement("td",null,Y.version),g.createElement("td",null,Y.createdDateString),g.createElement("td",null,Y.createdBy),g.createElement("td",null,Y.message),g.createElement("td",{className:"text-right"},k===0?g.createElement(l.V,{name:"Latest",colorIndex:17}):g.createElement(m.JY,null,({showModal:q,hideModal:X})=>g.createElement(c.zx,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{q(b,{version:Y.version,hideModal:X})}},"Restore")))))));var D=e(47257),M=e(75064),T=e(97666);const R=({onClick:H=n.noop,baseVersion:z=0,newVersion:K=0,isNewLatest:Y=!1})=>{const k=(0,D.wW)(O);return g.createElement("h3",{className:k.header},g.createElement(M.h,{name:"arrow-left",size:"xl",onClick:H,tooltip:"Reset version"}),g.createElement("span",null,"Comparing ",z," ",g.createElement(T.J,{name:"arrows-h"})," ",K," ",Y&&g.createElement("cite",{className:"muted"},"(Latest)")))},O=H=>({header:(0,i.css)`
    font-size: ${H.typography.h3.fontSize};
    display: flex;
    gap: ${H.spacing(2)};
    margin-bottom: ${H.spacing(3)};
  `});var x=e(13086),I=e(14607);const L=({hasMore:H,canCompare:z,getVersions:K,getDiff:Y,isLastPage:k})=>g.createElement(x.K,null,H&&g.createElement(c.zx,{type:"button",onClick:()=>K(!0),variant:"secondary",disabled:k},"Show more versions"),g.createElement(I.u,{content:"Select two versions to start comparing",placement:"bottom"},g.createElement(c.zx,{type:"button",disabled:!z,onClick:Y,icon:"code-branch"},"Compare versions")));var P=e(74042),N=e(96525),F=e(68918),U=e(21986),j=e(55803);const V=({baseInfo:H,newInfo:z,diffData:K,isNewLatest:Y})=>{const k=(0,j.Q$)(K.lhs,K.rhs),q=(0,D.wW)(_);return g.createElement("div",null,g.createElement("div",{className:q.spacer},g.createElement(P.Lh,{justify:"space-between",align:"center"},g.createElement("div",null,g.createElement("p",{className:q.versionInfo},g.createElement("strong",null,"Version ",z.version)," updated by ",z.createdBy," ",z.ageString," -"," ",z.message),g.createElement("p",{className:(0,i.cx)(q.versionInfo,q.noMarginBottom)},g.createElement("strong",null,"Version ",H.version)," updated by ",H.createdBy," ",H.ageString," -"," ",H.message)),Y&&g.createElement(m.JY,null,({showModal:X,hideModal:te})=>g.createElement(c.zx,{variant:"destructive",icon:"history",onClick:()=>{X(b,{version:H.version,hideModal:te})}},"Restore to version ",H.version)))),g.createElement("div",{className:q.spacer},Object.entries(k).map(([X,te])=>g.createElement(F.B,{diffs:te,key:X,title:X}))),g.createElement(N.s,{isOpen:!1,label:"View JSON Diff"},g.createElement(U.Z,{oldValue:JSON.stringify(K.lhs,null,2),newValue:JSON.stringify(K.rhs,null,2)})))},_=H=>({spacer:(0,i.css)`
    margin-bottom: ${H.spacing(4)};
  `,versionInfo:(0,i.css)`
    color: ${H.colors.text.secondary};
    font-size: ${H.typography.bodySmall.fontSize};
  `,noMarginBottom:(0,i.css)`
    margin-bottom: 0;
  `})},55803:(G,A,e)=>{"use strict";e.d(A,{Q$:()=>i,dW:()=>g});var n=e(21277),a=e(20829),o=e(56375),r=e.n(o);const i=(m,c)=>{const d=(0,n.qu)(m,c),f=a.stringify(m,null,2),E=a.stringify(c,null,2),v=s=>s.map(y=>{let C,b,S=0;const D=(0,o.tail)(y.path.split("/"));return y.op==="replace"&&E.pointers[y.path]&&(C=(0,o.get)(m,D),b=y.value,S=E.pointers[y.path].value.line),y.op==="add"&&E.pointers[y.path]&&(b=y.value,S=E.pointers[y.path].value.line),y.op==="remove"&&f.pointers[y.path]&&(C=(0,o.get)(m,D),S=f.pointers[y.path].value.line),{op:y.op,value:b,path:D,originalValue:C,startLineNumber:S}}),h=s=>(0,o.sortBy)(s,"startLineNumber"),p=s=>s.reduce((y,C)=>{const b=C.path[0];return y[b]||(y[b]=[]),y[b].push(C),y},{});return(0,o.flow)([v,h,p])(d)},g=(m,c=!0)=>{const d=(0,o.last)(m.path),f=u(d),E=m.op==="remove"?m.originalValue:m.value;let v=l(m.op);return c&&(f?v+=` item ${d}`:(0,o.isArray)(E)&&!(0,o.isEmpty)(E)?v+=` ${E.length} ${d}`:v+=` ${d}`),v},u=m=>!(0,o.isNaN)((0,o.toNumber)(m)),l=m=>m==="add"?"added":m==="remove"?"deleted":"changed"},43330:(G,A,e)=>{"use strict";e.d(A,{f:()=>d});var n=e(85960),a=e(91),o=e(66681),r=e(47257),i=e(40235),g=e(97666),u=e(14607),l=e(55182);const m=({notice:f,onClick:E})=>{const v=(0,r.wW)(c),h=f.severity==="error"||f.severity==="warning"?"exclamation-triangle":"file-landscape-alt";return f.inspect&&E?n.createElement(i.h,{className:v.notice,icon:h,iconSize:"md",key:f.severity,tooltip:f.text,onClick:p=>E(p,f.inspect)}):f.link?n.createElement("a",{className:v.notice,"aria-label":f.text,href:f.link,target:"_blank",rel:"noreferrer"},n.createElement(g.J,{name:h,style:{marginRight:"8px"},size:"md"})):n.createElement(u.u,{key:f.severity,content:f.text},n.createElement("span",{className:v.iconTooltip},n.createElement(g.J,{name:h,size:"md"})))},c=f=>({notice:(0,o.css)({background:"inherit",border:"none",borderRadius:f.shape.radius.default}),iconTooltip:(0,o.css)({color:`${f.colors.text.secondary}`,backgroundColor:"inherit",cursor:"auto",border:"none",borderRadius:`${f.shape.radius.default}`,padding:`${f.spacing(0,1)}`,height:` ${f.spacing(f.components.height.md)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,l.getFocusStyles)(f),zIndex:1},"&: focus:not(:focus-visible)":(0,l.getMouseFocusStyles)(f),"&:hover ":{boxShadow:`${f.shadows.z1}`,color:`${f.colors.text.primary}`,background:`${f.colors.background.secondary}`}})}),d=({frames:f,panelId:E})=>{const v=(0,n.useCallback)((p,s)=>{p.stopPropagation(),a.E1.partial({inspect:E,inspectTab:s})},[E]),h={};for(const p of f)if(!(!p.meta||!p.meta.notices))for(const s of p.meta.notices)h[s.severity]=s;return n.createElement(n.Fragment,null,Object.values(h).map(p=>n.createElement(m,{notice:p,onClick:v,key:p.severity})))}},26515:(G,A,e)=>{"use strict";e.d(A,{A:()=>l});var n=e(81517),a=e(85745),o=e(13446);const r=100;class i{constructor(){this.listeners=[],this.budget=1,this.threshold=1.5,this.ok=new n.X(!0),this.lastUpdate=Date.now(),this.isLive=!1,this.liveTimeOffset=0,this.measure=()=>{const c=Date.now();this.budget=(c-this.lastUpdate)/r;const d=this.ok.getValue(),f=this.budget<=this.threshold;if(d!==f&&this.ok.next(f),this.lastUpdate=c,this.isLive&&this.ok.getValue()&&this.timeRange){let E;for(const v of this.listeners){if(!v.panel.props.isInView)continue;if(c-v.last>=v.intervalMs){if(!E){const{raw:p}=this.timeRange;E={raw:p,from:(0,a.CQ)(c-this.liveTimeOffset),to:(0,a.CQ)(c)}}v.panel.liveTimeChanged(E),v.last=c}}}}}setLiveTimeRange(c){if(this.timeRange=c,this.isLive=c?.raw?.to==="now",this.isLive){const d=o.parse(c.raw.from,!1)?.valueOf(),f=o.parse(c.raw.to,!0)?.valueOf();this.liveTimeOffset=f-d;for(const E of this.listeners)E.intervalMs=u(this.liveTimeOffset,E.panel.props.width)}}listen(c){this.listeners.push({last:this.lastUpdate,panel:c,intervalMs:u(6e4,c.props.width)})}remove(c){this.listeners=this.listeners.filter(d=>d.panel!==c)}updateInterval(c){if(!(!this.timeRange||!this.isLive)){for(const d of this.listeners)if(d.panel===c){d.intervalMs=u(this.liveTimeOffset,d.panel.props.width);return}}}}const g=5*60*1e3;function u(m,c){const d=Math.ceil(m/c/100)*100;return d>g?g:d}const l=new i;setInterval(l.measure,r)},6211:(G,A,e)=>{"use strict";e.d(A,{Bg:()=>C,pD:()=>b});var n=e(29175),a=e.n(n),o=e(56375),r=e.n(o),i=e(55104),g=e.n(i),u=e(47475),l=e(13446),m=e(85445),c=e(91),d=e(46783),f=e(81182),E=e(33986),v=e(51012),h=e(65512),p=e(49683),s=e(93657),y=e(83676);class C{constructor(){}_dashboardLoadFailed(M,T){return T=T||!1,{meta:{canStar:!1,isSnapshot:T,canDelete:!1,canSave:!1,canEdit:!1,canShare:!1,dashboardNotFound:!0},dashboard:{title:M,uid:M,schemaVersion:0}}}loadDashboard(M,T,R){const O=(0,v.wc)();let x;if(M==="script"&&T)x=this._loadScriptedDashboard(T);else if(M==="snapshot"&&T)x=(0,y.G)().getSnapshot(T).catch(()=>this._dashboardLoadFailed("Snapshot not found",!0));else if(M==="ds"&&T)x=this._loadFromDatasource(T);else if(M==="public"&&R)x=d.ae.getPublicDashboardByUid(R).then(I=>I).catch(I=>{const L=I.data.statusCode===403&&I.data.messageId==="publicdashboards.notEnabled",P=I.data.statusCode===404&&I.data.messageId==="publicdashboards.notFound",N=I.data.statusCode===404&&I.data.messageId==="publicdashboards.dashboardNotFound",F=this._dashboardLoadFailed(L?"Public Dashboard paused":"Public Dashboard Not found",!0);return{...F,meta:{...F.meta,publicDashboardEnabled:P?void 0:!L,dashboardNotFound:P||N}}});else if(R){const I=O.getFromCache(R);if(I)return Promise.resolve(I);x=d.ae.getDashboardByUid(R).then(L=>{if(L.meta.isFolder)throw p.h$.emit(u.SI.alertError,["Dashboard not found"]),new Error("Dashboard not found");return L}).catch(()=>this._dashboardLoadFailed("Not found",!0))}else throw new Error("Dashboard uid or slug required");return x.then(I=>(I.meta.dashboardNotFound!==!0&&f.Z.addDashboardImpression(I.dashboard.uid),I)),x}_loadScriptedDashboard(M){const T="public/dashboards/"+M.replace(/\.(?!js)/,"/")+"?"+new Date().getTime();return(0,m.i)().get(T).then(this._executeScript.bind(this)).then(R=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:R.data}),R=>(console.error("Script dashboard error "+R),p.h$.emit(u.SI.alertError,["Script Error","Please make sure it exists and returns a valid dashboard"]),this._dashboardLoadFailed("Scripted dashboard")))}async _loadFromDatasource(M){const T=await(0,h.ak)().get(M);if(!T)return Promise.reject("can not find datasource: "+M);const R=new URLSearchParams(window.location.search),O=R.get("path");if(!O)return Promise.reject("expecting path parameter");const x={};return R.forEach((I,L)=>{x[L]=I}),(0,m.i)().get(`/api/datasources/uid/${T.uid}/resources/${O}`,x).then(I=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:I}))}_executeScript(M){const T={dashboardSrv:(0,s.h4)(),datasourceSrv:(0,h.ak)()},O=new Function("ARGS","kbn","dateMath","_","moment","window","document","$","jQuery","services",M)(c.E1.getSearchObject(),E.Z,l,r(),g(),window,document,a(),a(),T);return(0,o.isFunction)(O)?new Promise(x=>{O(I=>{x({data:I})})}):{data:O}}}let b=new C;const S=D=>{throw new Error("dashboardLoaderSrv can be only overriden in test environment")}},93657:(G,A,e)=>{"use strict";e.d(A,{h4:()=>E});var n=e(81838),a=e(47475),o=e(60484),r=e(95329),i=e(46783),g=e(32737),u=e(14914),l=e(98898),m=e(8808);class c{constructor(){this.onRemovePanel=h=>{const p=this.getCurrent();p&&(0,m.WJ)(p,p.getPanelById(h),!0)},o.h.subscribe(u.Eb,h=>this.onRemovePanel(h.payload))}create(h,p){return new l.f(h,p)}setCurrent(h){this.dashboard=h}getCurrent(){return this.dashboard}saveJSONDashboard(h){const p=JSON.parse(h);return(0,g.uC)({dashboard:p,folderUid:this.dashboard?.meta.folderUid||p.folderUid})}saveDashboard(h,p){return(0,n.n)((0,i.i)().fetch({url:"/api/dashboards/db/",method:"POST",data:{...h,dashboard:h.dashboard.getSaveModelClone()},...p}))}starDashboard(h,p){const s=(0,i.i)(),y={showSuccessAlert:!1,url:"/api/user/stars/dashboard/uid/"+h,method:p?"DELETE":"POST"};return s.request(y).then(()=>{const C=!p;this.dashboard?.uid===h&&(this.dashboard.meta.isStarred=C);const b=C?(0,r.t)("notifications.starred-dashboard","Dashboard starred"):(0,r.t)("notifications.unstarred-dashboard","Dashboard unstarred");return o.h.emit(a.SI.alertSuccess,[b]),C})}}let d;function f(v){d=v}function E(){return d||(d=new c),d}},83676:(G,A,e)=>{"use strict";e.d(A,{G:()=>o});var n=e(85445);const a={getSnapshots:()=>(0,n.i)().get("/api/dashboard/snapshots"),getSharingOptions:()=>(0,n.i)().get("/api/snapshot/shared-options"),deleteSnapshot:r=>(0,n.i)().delete("/api/snapshots/"+r),getSnapshot:async r=>{const i=await(0,n.i)().get("/api/snapshots/"+r);return i.meta.canShare=!1,i}};function o(){return a}},45864:(G,A,e)=>{"use strict";e.d(A,{$t:()=>C});var n=e(56375),a=e(85745),o=e(9833),r=e(71244),i=e(13446),g=e(91),u=e(57474),l=e(60484),m=e(67954),c=e(41879),d=e(52152),f=e(96201),E=e(14914),v=e(15867);function h({urlRefresh:b,currentRefresh:S,isAllowedIntervalFn:D,minRefreshInterval:M,refreshIntervals:T=v.o5}){if(!b)return S;const R=D(b),O=T.find(x=>x===b);if(!R||!O){const x=M?T.find(L=>L===M):void 0,I=T?.length?T[0]:void 0;return x??I??S}return b||S}class p{constructor(S){this.contextSrv=S,this.timeRangeForUrl=()=>{const D=this.timeRange().raw;return(0,a.v9)(D.from)&&(D.from=D.from.valueOf().toString()),(0,a.v9)(D.to)&&(D.to=D.to.valueOf().toString()),D},this.time=(0,o.JK)().raw,this.timeAtLoad=(0,o.JK)().raw,this.refreshTimeModel=this.refreshTimeModel.bind(this),l.Z.subscribe(E.p8,D=>{this.zoomOut(D.payload.scale,D.payload.updateUrl)}),l.Z.subscribe(E.Qt,D=>{this.shiftTime(D.payload.direction,D.payload.updateUrl)}),l.Z.subscribe(E.QI,D=>{this.makeAbsoluteTime(D.payload.updateUrl)}),document.addEventListener("visibilitychange",()=>{this.autoRefreshBlocked&&document.visibilityState==="visible"&&(this.autoRefreshBlocked=!1,this.refreshTimeModel())})}init(S){this.timeModel=S,this.time=S.time,this.refresh=S.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=(0,n.cloneDeep)(this.time);const D=r.convertRawToRange(this.time,this.timeModel?.getTimezone(),this.timeModel?.fiscalYearStartMonth);D.to.isBefore(D.from)&&this.setTime({from:D.raw.to,to:D.raw.from},!1),this.refresh&&this.setAutoRefresh(this.refresh)}getValidIntervals(S){return this.contextSrv.getValidIntervals(S)}parseTime(){(0,n.isString)(this.time.from)&&this.time.from.indexOf("Z")>=0&&(this.time.from=(0,a.CQ)(this.time.from).utc()),(0,n.isString)(this.time.to)&&this.time.to.indexOf("Z")>=0&&(this.time.to=(0,a.CQ)(this.time.to).utc())}parseUrlParam(S){if(S.indexOf("now")!==-1)return S;if(S.length===8){const D=(0,a.zh)(S,"YYYYMMDD");if(D.isValid())return D}else if(S.length===15){const D=(0,a.zh)(S,"YYYYMMDDTHHmmss");if(D.isValid())return D}if(!isNaN(Number(S))){const D=parseInt(S,10);return(0,a.zh)(D)}return null}getTimeWindow(S,D){const M=parseInt(S,10);let T;return D.match(/^\d+$/)&&parseInt(D,10)?T=parseInt(D,10):T=r.intervalToMs(D),{from:(0,a.zh)(M-T/2),to:(0,a.zh)(M+T/2)}}initTimeFromUrl(){if(m.config.publicDashboardAccessToken&&this.timeModel?.timepicker?.hidden)return;const S=g.E1.getSearch();S.get("time")&&S.get("time.window")&&(this.time=this.getTimeWindow(S.get("time"),S.get("time.window"))),S.get("from")&&(this.time.from=this.parseUrlParam(S.get("from"))||this.time.from),S.get("to")&&(this.time.to=this.parseUrlParam(S.get("to"))||this.time.to),S.get("to")&&S.get("to").indexOf("now")===-1&&(this.refresh=!1,this.timeModel&&(this.timeModel.refresh=!1)),this.refresh=h({urlRefresh:S.get("refresh"),currentRefresh:this.refresh,refreshIntervals:Array.isArray(this.timeModel?.timepicker?.refresh_intervals)?this.timeModel?.timepicker?.refresh_intervals:void 0,isAllowedIntervalFn:this.contextSrv.isAllowedInterval,minRefreshInterval:m.config.minRefreshInterval})}updateTimeRangeFromUrl(){const S=g.E1.getSearch();if(S.get("left"))return;const D=this.timeRangeForUrl(),M=S.get("from"),T=S.get("to");M&&T?(M!==D.from||T!==D.to)&&(this.initTimeFromUrl(),this.setTime(this.time,!1)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)}timeHasChangedSinceLoad(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)}setAutoRefresh(S){this.timeModel&&(this.timeModel.refresh=S),this.stopAutoRefresh();const D=g.E1.getSearchObject();if(!S){D.refresh&&g.E1.partial({refresh:null},!0);return}let M=S,T=60*1e3;S===c.Wg?T=this.getAutoRefreshInteval().intervalMs:(M=this.contextSrv.getValidInterval(S),T=r.intervalToMs(M)),this.refreshMS=T,this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(T),this.refreshTimeModel()},T),D.refresh!==M&&g.E1.partial({refresh:M},!0)}getAutoRefreshInteval(){const S=window?.innerWidth??2e3;return r.calculateInterval(this.timeRange(),S,m.config.minRefreshInterval)}refreshTimeModel(){this.timeModel?.timeRangeUpdated(this.timeRange())}startNextRefreshTimer(S){this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(S),this.contextSrv.isGrafanaVisible()?this.refreshTimeModel():this.autoRefreshBlocked=!0},S)}stopAutoRefresh(){clearTimeout(this.refreshTimer),this.refreshTimer=void 0,this.refreshMS=void 0}resumeAutoRefresh(){this.timeModel?.refresh&&this.setAutoRefresh(this.timeModel.refresh)}setTime(S,D=!0){if((0,n.extend)(this.time,S),(0,a.v9)(S.to)?(this.oldRefresh=this.timeModel?.refresh||this.oldRefresh,this.setAutoRefresh(!1)):this.oldRefresh&&this.oldRefresh!==this.timeModel?.refresh&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=void 0),D===!0){const M=this.timeRangeForUrl(),T=g.E1.getSearchObject();if(T.from===M.from.toString()&&T.to===M.to.toString())return;T.from=M.from.toString(),T.to=M.to.toString(),g.E1.partial(T)}this.timeModel?.refresh===c.Wg&&this.getAutoRefreshInteval().intervalMs!==this.refreshMS&&this.setAutoRefresh(c.Wg),this.refreshTimeModel()}timeRange(){return window.__grafanaSceneContext&&window.__grafanaSceneContext.isActive?u.ep.getTimeRange(window.__grafanaSceneContext).state.value:(0,f.O)(this.time,this.timeModel)}zoomOut(S,D=!0){const M=this.timeRange(),{from:T,to:R}=(0,d.h)(M,S);this.setTime({from:(0,a.zh)(T),to:(0,a.zh)(R)},D)}shiftTime(S,D=!0){const M=this.timeRange(),{from:T,to:R}=(0,d.e)(S,M);this.setTime({from:(0,a.zh)(T),to:(0,a.zh)(R)},D)}makeAbsoluteTime(S){const{from:D,to:M}=this.timeRange();this.setTime({from:D,to:M},S)}isRefreshOutsideThreshold(S,D=.05){const M=this.timeRange();if(i.isMathString(M.raw.from)){const T=M.to.diff(M.from),R=Date.now()-S,O=T*D;return R>=O}return!1}}let s;function y(b){s=b}function C(){return s||(s=new p(c.contextSrv)),s}},56575:(G,A,e)=>{"use strict";e.d(A,{o3:()=>V,pR:()=>k});var n=e(56375),a=e(88008),o=e(25788),r=e(52219),i=e(173),g=e(56582),u=e(43626),l=e(76784),m=e(70274),c=e(58309),d=e(8138),f=e(14857),E=e(81502),v=e(1713),h=e(71336),p=e(72933),s=e(67954),y=e(89248);function C(ie){return Array.from(new Array(ie+1),(oe,ue)=>ue).filter(oe=>ie%oe===0)}var b=e(33986),S=e(65512),D=e(43489),M=e(94377),T=e(63459),R=e(2637),O=e(44293),x=e(21871),I=e(67992);function L(ie,oe){const ue=[];if(ie?.statistics&&ie?.statistics.length){ie.statistic=ie.statistics[0];for(const me of ie.statistics.splice(1))ue.push({...ie,statistic:me})}for(const me of ue)me.refId=(0,x.Hs)(oe),delete me.statistics,oe.push(me);return delete ie.statistics,ue}function P(ie){const oe=[];if(ie&&"statistics"in ie&&ie?.statistics?.length){for(const ue of ie.statistics.splice(1)){const{statistics:me,name:ge,...Ue}=ie;oe.push({...Ue,statistic:ue,name:`${ge} - ${ue}`})}ie.statistic=ie.statistics[0],oe.length!==0&&(ie.name=`${ie.name} - ${ie.statistic}`),delete ie.statistics}return oe}function N(ie){ie.hasOwnProperty("metricQueryType")||(ie.metricQueryType=I.$5.Search),ie.hasOwnProperty("metricEditorMode")||(ie.metricQueryType===I.$5.Query?ie.metricEditorMode=I.MQ.Code:ie.metricEditorMode=ie.expression?I.MQ.Code:I.MQ.Builder)}var F=e(81990),U=e(68460);a.S.setInit(p.u),a.N.setInit(p.l);const j=39;class V{constructor(oe){this.dashboard=oe,(0,E.F)()||(0,E.w)(new S.ND)}updateSchema(oe){let ue,me,ge,Ue;const De=this.dashboard.schemaVersion,Pe=[];if(this.dashboard.schemaVersion=j,De!==this.dashboard.schemaVersion){if(De<2&&(oe.services&&oe.services.filter&&(this.dashboard.time=oe.services.filter.time,this.dashboard.templating.list=oe.services.filter.list||[]),Pe.push(ye=>(ye.type==="graphite"&&(ye.type="graph"),ye.type!=="graph"||((0,n.isBoolean)(ye.legend)&&(ye.legend={show:ye.legend}),ye.grid&&(ye.grid.min&&(ye.grid.leftMin=ye.grid.min,delete ye.grid.min),ye.grid.max&&(ye.grid.leftMax=ye.grid.max,delete ye.grid.max)),ye.y_format&&(ye.y_formats||(ye.y_formats=[]),ye.y_formats[0]=ye.y_format,delete ye.y_format),ye.y2_format&&(ye.y_formats||(ye.y_formats=[]),ye.y_formats[1]=ye.y2_format,delete ye.y2_format)),ye))),De<3){let ye=this.dashboard.getNextPanelId();Pe.push(Te=>(Te.id||(Te.id=ye,ye+=1),Te))}if(De<4&&Pe.push(ye=>(ye.type!=="graph"||((0,n.each)(ye.aliasYAxis,(Te,nt)=>{ye.seriesOverrides=[{alias:nt,yaxis:Te}]}),delete ye.aliasYAxis),ye)),De<6){const ye=(0,n.find)(oe.pulldowns,{type:"annotations"});for(ye&&(this.dashboard.annotations={list:ye.annotations||[]}),ue=0;ue<this.dashboard.templating.list.length;ue++){const Te=this.dashboard.templating.list[ue];Te.datasource===void 0&&(Te.datasource=null),Te.type==="filter"&&(Te.type="query"),Te.type===void 0&&(Te.type="query"),Te.allFormat===void 0&&delete Te.allFormat}}if(De<7&&(oe.nav&&oe.nav.length&&(this.dashboard.timepicker=oe.nav[0]),Pe.push(ye=>((0,n.each)(ye.targets,Te=>{Te.refId||(Te.refId=ye.getNextQueryLetter&&ye.getNextQueryLetter())}),ye))),De<8&&Pe.push(ye=>((0,n.each)(ye.targets,Te=>{Te.fields&&Te.tags&&Te.groupBy&&(Te.rawQuery?(delete Te.fields,delete Te.fill):(Te.select=(0,n.map)(Te.fields,nt=>{const ct=[];return ct.push({type:"field",params:[nt.name]}),ct.push({type:nt.func,params:[]}),nt.mathExpr&&ct.push({type:"math",params:[nt.mathExpr]}),nt.asExpr&&ct.push({type:"alias",params:[nt.asExpr]}),ct}),delete Te.fields,(0,n.each)(Te.groupBy,nt=>{nt.type==="time"&&nt.interval&&(nt.params=[nt.interval],delete nt.interval),nt.type==="tag"&&nt.key&&(nt.params=[nt.key],delete nt.key)}),Te.fill&&(Te.groupBy.push({type:"fill",params:[Te.fill]}),delete Te.fill)))}),ye)),De<9&&Pe.push(ye=>{if(ye.type!=="singlestat"&&ye.thresholds!=="")return ye;if(ye.thresholds){const Te=ye.thresholds.split(",");Te.length>=3&&(Te.shift(),ye.thresholds=Te.join(","))}return ye}),De<10&&Pe.push(ye=>(ye.type!=="table"||(0,n.each)(ye.styles,Te=>{if(Te.thresholds&&Te.thresholds.length>=3){const nt=Te.thresholds;nt.shift(),Te.thresholds=nt}}),ye)),De<12&&(0,n.each)(this.dashboard.getVariables(),ye=>{"refresh"in ye&&(ye.refresh&&(ye.refresh=1),ye.refresh||(ye.refresh=0)),"hideVariable"in ye&&ye.hideVariable?ye.hide=2:"hideLabel"in ye&&ye.hideLabel&&(ye.hide=1)}),De<12&&Pe.push(ye=>(ye.type!=="graph"||!ye.grid||ye.yaxes||(ye.yaxes=[{show:ye["y-axis"],min:ye.grid.leftMin,max:ye.grid.leftMax,logBase:ye.grid.leftLogBase,format:ye.y_formats[0],label:ye.leftYAxisLabel},{show:ye["y-axis"],min:ye.grid.rightMin,max:ye.grid.rightMax,logBase:ye.grid.rightLogBase,format:ye.y_formats[1],label:ye.rightYAxisLabel}],ye.xaxis={show:ye["x-axis"]},delete ye.grid.leftMin,delete ye.grid.leftMax,delete ye.grid.leftLogBase,delete ye.grid.rightMin,delete ye.grid.rightMax,delete ye.grid.rightLogBase,delete ye.y_formats,delete ye.leftYAxisLabel,delete ye.rightYAxisLabel,delete ye["y-axis"],delete ye["x-axis"]),ye)),De<13&&Pe.push(ye=>{if(ye.type!=="graph"||!ye.grid)return ye;ye.thresholds||(ye.thresholds=[]);const Te={},nt={};return ye.grid.threshold1!==null&&(Te.value=ye.grid.threshold1,ye.grid.thresholdLine?(Te.line=!0,Te.lineColor=ye.grid.threshold1Color,Te.colorMode="custom"):(Te.fill=!0,Te.fillColor=ye.grid.threshold1Color,Te.colorMode="custom")),ye.grid.threshold2!==null&&(nt.value=ye.grid.threshold2,ye.grid.thresholdLine?(nt.line=!0,nt.lineColor=ye.grid.threshold2Color,nt.colorMode="custom"):(nt.fill=!0,nt.fillColor=ye.grid.threshold2Color,nt.colorMode="custom")),(0,n.isNumber)(Te.value)&&((0,n.isNumber)(nt.value)?Te.value>nt.value?(Te.op=nt.op="lt",ye.thresholds.push(Te),ye.thresholds.push(nt)):(Te.op=nt.op="gt",ye.thresholds.push(Te),ye.thresholds.push(nt)):(Te.op="gt",ye.thresholds.push(Te))),delete ye.grid.threshold1,delete ye.grid.threshold1Color,delete ye.grid.threshold2,delete ye.grid.threshold2Color,delete ye.grid.thresholdLine,ye}),De<14&&(this.dashboard.graphTooltip=oe.sharedCrosshair?1:0),De<16&&this.upgradeToGridLayout(oe),De<17&&Pe.push(ye=>{if(ye.minSpan){const Te=y.cz/ye.minSpan,nt=C(y.cz);ye.maxPerRow=nt[(0,n.findIndex)(nt,ct=>ct>Te)-1]}return delete ye.minSpan,ye}),De<18&&Pe.push(ye=>(ye["options-gauge"]&&(ye.options=ye["options-gauge"],ye.options.valueOptions={unit:ye.options.unit,stat:ye.options.stat,decimals:ye.options.decimals,prefix:ye.options.prefix,suffix:ye.options.suffix},ye.options.thresholds&&ye.options.thresholds.reverse(),delete ye.options.options,delete ye.options.unit,delete ye.options.stat,delete ye.options.decimals,delete ye.options.prefix,delete ye.options.suffix,delete ye["options-gauge"]),ye)),De<19&&Pe.push(ye=>(ye.links&&(0,n.isArray)(ye.links)&&(ye.links=ye.links.map(z)),ye)),De<20){const ye=Te=>({...Te,url:K(Te.url)});Pe.push(Te=>(Te.options&&Te.options.dataLinks&&(0,n.isArray)(Te.options.dataLinks)&&(Te.options.dataLinks=Te.options.dataLinks.map(ye)),Te.options&&Te.options.fieldOptions&&Te.options.fieldOptions.defaults&&(Te.options.fieldOptions.defaults.links&&(0,n.isArray)(Te.options.fieldOptions.defaults.links)&&(Te.options.fieldOptions.defaults.links=Te.options.fieldOptions.defaults.links.map(ye)),Te.options.fieldOptions.defaults.title&&(Te.options.fieldOptions.defaults.title=K(Te.options.fieldOptions.defaults.title))),Te))}if(De<21){const ye=Te=>({...Te,url:Te.url.replace(/__series.labels/g,"__field.labels")});Pe.push(Te=>(Te.options&&Te.options.dataLinks&&(0,n.isArray)(Te.options.dataLinks)&&(Te.options.dataLinks=Te.options.dataLinks.map(ye)),Te.options&&Te.options.fieldOptions&&Te.options.fieldOptions.defaults&&Te.options.fieldOptions.defaults.links&&(0,n.isArray)(Te.options.fieldOptions.defaults.links)&&(Te.options.fieldOptions.defaults.links=Te.options.fieldOptions.defaults.links.map(ye)),Te))}if(De<22&&Pe.push(ye=>(ye.type!=="table"||(0,n.each)(ye.styles,Te=>{Te.align="auto"}),ye)),De<23)for(const ye of this.dashboard.templating.list){if(!(0,D.U4)(ye))continue;const{multi:Te,current:nt}=ye;(0,o.Q)(nt)||(ye.current=(0,M.x)(nt,Te))}if(De<24&&Pe.push(ye=>{const Te=ye.type==="table";if(Te&&!ye.styles)return ye;const nt=ye.table==="table2";return!Te||nt||(ye.type=Te?"table-old":"table"),ye}),De<25,De<26&&Pe.push(ye=>(ye.type==="text2"&&(ye.type="text",delete ye.options.angular),ye)),De<27&&(this.removeRepeatedPanels(),this.dashboard.templating.list=this.dashboard.templating.list.map(ye=>{if(!(0,D.VC)(ye))return ye;const Te={...ye};return Te.current={selected:!0,text:Te.query??"",value:Te.query??""},Te.options=[Te.current],Te.hide===F.bU.dontHide||Te.hide===F.bU.hideLabel?{...Te,type:"textbox"}:Te})),De<28){Pe.push(ye=>ye.type==="singlestat"?Y(ye):ye);for(const ye of this.dashboard.templating.list)ye.tags&&delete ye.tags,ye.tagsQuery&&delete ye.tagsQuery,ye.tagValuesQuery&&delete ye.tagValuesQuery,ye.useTags&&delete ye.useTags}if(De<29)for(const ye of this.dashboard.templating.list)ye.type==="query"&&(ye.refresh!==1&&ye.refresh!==2&&(ye.refresh=1),ye.options?.length&&(ye.options=[]));if(De<30&&(Pe.push(X),Pe.push(re)),De<31&&Pe.push(ye=>{if(ye.transformations){for(const Te of ye.transformations)if(Te.id===d.r.id)return q(ye,d.r.id,{id:f.R.id,options:{}})}return ye}),De<32,De<33&&Pe.push(ye=>{if(ye.datasource=k(ye.datasource,{returnDefaultAsNull:!0}),!ye.targets)return ye;for(const Te of ye.targets){const nt=k(Te.datasource,{returnDefaultAsNull:!0});nt!=null&&(Te.datasource=nt)}return ye}),De<34&&(Pe.push(ye=>(this.migrateCloudWatchQueries(ye),ye)),this.migrateCloudWatchAnnotationQuery()),De<35&&Pe.push(fe),De<36){for(const Te of this.dashboard.annotations.list)Te.datasource=k(Te.datasource,{returnDefaultAsNull:!1});const ye=(0,E.F)().getInstanceSettings(null);if(ye){for(const Te of this.dashboard.templating.list)Te.type==="query"&&Te.datasource===null&&(Te.datasource=(0,r.iU)(ye));Pe.push(Te=>{if(Te.targets){let nt=!1;Te.datasource==null&&Te.targets.length>0&&(Te.datasource=(0,r.iU)(ye),nt=!0);for(const ct of Te.targets)(ct.datasource==null||ct.datasource.uid==null)&&(Te.datasource?.uid!==T.D?ct.datasource={...Te.datasource}:ct.datasource=k(ct.datasource,{returnDefaultAsNull:!1})),nt&&ct.datasource?.uid!=="__expr__"&&(Te.datasource=ct.datasource)}return Te})}}if(De<37&&Pe.push(ye=>(ye.options?.legend&&(ye.options.legend.displayMode==="hidden"||ye.options.legend.showLegend===!1)?(ye.options.legend.displayMode="list",ye.options.legend.showLegend=!1):ye.options?.legend&&(ye.options.legend={...ye.options?.legend,showLegend:!0}),ye)),De<38&&Pe.push(ye=>{if(ye.type==="table"&&ye.fieldConfig!==void 0){const Te=ye.fieldConfig.defaults?.custom?.displayMode;if(Te!==void 0&&(ye.fieldConfig.defaults.custom.cellOptions=(0,h.q7)(Te),delete ye.fieldConfig.defaults.custom.displayMode),ye.fieldConfig?.overrides)for(const nt of ye.fieldConfig.overrides)for(let ct=0;ct<nt.properties?.length;ct++){let he=nt.properties[ct].value;nt.properties[ct].id==="custom.displayMode"&&(nt.properties[ct].id="custom.cellOptions",nt.properties[ct].value=(0,h.q7)(he))}}return ye}),De<39&&Pe.push(ye=>(ye.transformations?.forEach(Te=>{if(Te.id==="timeSeriesTable"&&Te.options!==void 0&&Te.options.refIdToStat!==void 0){let nt={};for(const[ct,he]of Object.entries(Te.options.refIdToStat)){let xe={};xe.stat=he,nt[ct]=xe}Te.options=nt}}),ye)),Pe.length!==0)for(me=0;me<this.dashboard.panels.length;me++)for(ge=0;ge<Pe.length;ge++){this.dashboard.panels[me]=Pe[ge].call(this,this.dashboard.panels[me]);const ye=this.dashboard.panels[me].panels;if(ye)for(Ue=0;Ue<ye.length;Ue++)ye[Ue]=Pe[ge].call(this,ye[Ue])}}}removeRepeatedPanels(){const oe=[];for(const ue of this.dashboard.panels)ue.repeatPanelId||ue.repeatByRow||(ue.type==="row"&&Array.isArray(ue.panels)&&(ue.panels=ue.panels.filter(me=>!me.repeatPanelId)),oe.push(ue));this.dashboard.panels=oe}migrateCloudWatchQueries(oe){for(const ue of oe.targets||[])if(te(ue)&&(N(ue),ue.hasOwnProperty("statistics"))){const me=L(ue,[...oe.targets]);for(const ge of me)oe.targets.push(ge)}}migrateCloudWatchAnnotationQuery(){for(const oe of this.dashboard.annotations.list)if(se(oe)){const ue=P(oe);for(const me of ue)this.dashboard.annotations.list.push(me)}}upgradeToGridLayout(oe){let ue=0;const me=y.cz/12;let Ue=(0,n.max)((0,n.flattenDeep)((0,n.map)(oe.rows,Pe=>(0,n.map)(Pe.panels,"id"))))+1;if(!oe.rows)return;const De=(0,n.some)(oe.rows,Pe=>Pe.collapse||Pe.showTitle||Pe.repeat);for(const Pe of oe.rows){if(Pe.repeatIteration)continue;const ye=Pe.height||y.b0,Te=_(ye),nt={};let ct;De&&(nt.id=Ue,nt.type="row",nt.title=Pe.title,nt.collapsed=Pe.collapse,nt.repeat=Pe.repeat,nt.panels=[],nt.gridPos={x:0,y:ue,w:y.cz,h:Te},ct=new U.rY(nt),Ue++,ue++);const he=new H(Te,y.cz,ue);for(const xe of Pe.panels){xe.span=xe.span||y.kh,xe.minSpan&&(xe.minSpan=Math.min(y.cz,y.cz/12*xe.minSpan));const Me=Math.floor(xe.span)*me,He=xe.height?_(xe.height):Te,Ve=he.getPanelPosition(He,Me);ue=he.yPos,xe.gridPos={x:Ve.x,y:ue+Ve.y,w:Me,h:He},he.addPanel(xe.gridPos),delete xe.span,ct&&nt.collapsed?ct.panels?.push(xe):this.dashboard.panels.push(new U.rY(xe))}ct&&this.dashboard.panels.push(ct),ct&&nt.collapsed||(ue+=Te)}}}function _(ie){return(0,n.isString)(ie)&&(ie=parseInt(ie.replace("px",""),10)),ie<y.AV&&(ie=y.AV),Math.ceil(ie/(y.K3+y.hD))}class H{constructor(oe,ue=y.cz,me=0){this.area=new Array(ue).fill(0),this.yPos=me,this.height=oe}reset(){this.area.fill(0)}addPanel(oe){for(let ue=oe.x;ue<oe.x+oe.w;ue++)(!this.area[ue]||oe.y+oe.h-this.yPos>this.area[ue])&&(this.area[ue]=oe.y+oe.h-this.yPos);return this.area}getPanelPosition(oe,ue,me=!1){let ge,Ue,De;for(let Pe=this.area.length-1;Pe>=0&&this.height-this.area[Pe]>0;Pe--)if(Ue===void 0)Ue=Pe;else if(Pe<this.area.length-1&&this.area[Pe]<=this.area[Pe+1])ge=Pe;else break;if(ge!==void 0&&Ue!==void 0&&Ue-ge>=ue-1){const Pe=(0,n.max)(this.area.slice(ge));De={x:ge,y:Pe}}else return me?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(oe,ue,!0));return De}}function z(ie){let oe=ie.url;return!oe&&ie.dashboard&&(oe=`dashboard/db/${b.Z.slugifyForUrl(ie.dashboard)}`),!oe&&ie.dashUri&&(oe=`dashboard/${ie.dashUri}`),oe||(oe="/"),ie.keepTime&&(oe=i.Cj.appendQueryToUrl(oe,`$${g.W.keepTime}`)),ie.includeVars&&(oe=i.Cj.appendQueryToUrl(oe,`$${g.W.includeVars}`)),ie.params&&(oe=i.Cj.appendQueryToUrl(oe,ie.params)),{url:oe,title:ie.title,targetBlank:ie.targetBlank}}function K(ie){const oe=/(__series_name)|(\$__series_name)|(__value_time)|(__field_name)|(\$__field_name)/g;return ie.replace(oe,(ue,me,ge,Ue,De,Pe)=>me?"__series.name":ge?"${__series.name}":Ue?"__value.time":De?"__field.name":Pe?"${__field.name}":ue)}function Y(ie){if(s.config.panels["grafana-singlestat-panel"])return ie.type="grafana-singlestat-panel",ie;let oe=!1;return ie.changePlugin||(oe=!0,ie=new U.rY(ie)),ie.plugin={angularPanelCtrl:{}},ie.gauge?.show?(R.plugin.meta=s.config.panels.gauge,ie.changePlugin(R.plugin)):(O.plugin.meta=s.config.panels.stat,ie.changePlugin(O.plugin)),oe?ie.getSaveModel():ie}function k(ie,oe){if(oe.returnDefaultAsNull&&(ie==null||ie==="default"))return null;if((0,r.cv)(ie))return ie;const ue=(0,E.F)().getInstanceSettings(ie);return ue?(0,r.iU)(ue):{uid:ie||void 0}}function q(ie,oe,ue){if(ie.transformations){const me=[];for(const ge of ie.transformations)me.push(ge),ge.id===oe&&me.push({...ue});ie.transformations=me}return ie}function X(ie){const oe=ie.fieldConfig;if(!oe)return ie;if(oe.defaults&&oe.defaults.mappings&&(oe.defaults.mappings=de(oe.defaults.mappings,oe.defaults.thresholds)),Array.isArray(oe.overrides))for(const ue of oe.overrides)for(const me of ue.properties)me.id==="mappings"&&(me.value=de(me.value));return ie}function te(ie){return ie.hasOwnProperty("dimensions")&&ie.hasOwnProperty("namespace")&&ie.hasOwnProperty("region")&&ie.hasOwnProperty("metricName")}function se(ie){return ie.hasOwnProperty("dimensions")&&ie.hasOwnProperty("namespace")&&ie.hasOwnProperty("region")&&ie.hasOwnProperty("prefixMatching")&&ie.hasOwnProperty("statistics")}function de(ie,oe){if(!ie)return;const ue={type:u.H.ValueToText,options:{}},me=[];for(const ge of ie){if(ge.type&&ge.options){ge.type===u.H.ValueToText?ue.options={...ue.options,...ge.options}:me.push(ge);continue}let Ue;const De=parseFloat(ge.text);if(oe&&!isNaN(De)){const Pe=(0,l.m1)(De,oe.steps);Pe&&Pe.color&&(Ue=Pe.color)}switch(ge.type){case 1:ge.value!=null&&(ge.value==="null"?me.push({type:u.H.SpecialValue,options:{match:u.e.Null,result:{text:ge.text,color:Ue}}}):ue.options[String(ge.value)]={text:ge.text,color:Ue});break;case 2:me.push({type:u.H.RangeToText,options:{from:+ge.from,to:+ge.to,result:{text:ge.text,color:Ue}}});break}}return Object.keys(ue.options).length>0&&me.unshift(ue),me}function re(ie){return(ie.type==="timeseries"||ie.type==="xychart")&&ie.options.tooltipOptions&&(ie.options={...ie.options,tooltip:ie.options.tooltipOptions},delete ie.options.tooltipOptions),ie}function fe(ie){return ie.type==="timeseries"&&ie.fieldConfig?.defaults.custom?.axisPlacement===v.LB.Hidden&&(ie.fieldConfig={...ie.fieldConfig,overrides:[...ie.fieldConfig.overrides,{matcher:{id:m.mi.byType,options:c.fS.time},properties:[{id:"custom.axisPlacement",value:v.LB.Auto}]}]}),ie}},98898:(G,A,e)=>{"use strict";e.d(A,{f:()=>U});var n=e(56375),a=e(34269),o=e(16293),r=e(12537),i=e(85745),g=e(90857),u=e(2384),l=e(42309),m=e(89248),c=e(41879),d=e(3201),f=e(94063),E=e(25648),v=e(99165),h=e(59084),p=e(95162),s=e(14914),y=e(49683),C=e(59767),b=e(81990),S=e(10805),D=e(45864),M=e(27008);const T=new Set(["gridPos","title","description","transparent"]);function R(_,H){const z=[],K={changed:!1,actions:{add:[],remove:[],replace:[],update:[],noop:[]},panels:z};let Y=0;const k=new Map;for(let q of H){let{id:X}=q;X||(Y||(Y=x([_,H])),X=Y++,q={...q,id:X}),k.set(X,q)}for(const q of _){const X=k.get(q.id);if(!X){K.changed=!0,K.actions.remove.push(q.id),q.destroy();continue}if(k.delete(q.id),X===q){z.push(q),K.actions.noop.push(q.id);continue}if(q.type===X.type){const se=q.getSaveModel();let de=!0,re=!1;for(const[fe,ie]of Object.entries(X))if(!(0,n.isEqualWith)(ie,se[fe],O))if(K.changed=!0,de=!1,T.has(fe))q[fe]=ie,re=!0;else{re=!1;break}if(de){z.push(q),K.actions.noop.push(q.id);continue}if(re){z.push(q),K.actions.update.push(q.id);continue}}q.destroy();const te=new M.r(X);te.key=`${te.id}-update-${Date.now()}`,z.push(te),K.changed=!0,K.actions.replace.push(q.id)}for(const q of k.values())z.push(new M.r(q)),K.changed=!0,K.actions.add.push(q.id);return K}function O(_,H){if(_==null&&(H===1/0||H===-1/0||H==null)||H==null&&(_===1/0||_===-1/0||_==null))return!0}function x(_){let H=0;for(const z of _)for(const K of z)K.id>H&&(H=K.id);return H+1}var I=e(56575),L=e(68460);function P(_,H){return _.repeatDirection===m.yM?!1:H.gridPos.x>=_.gridPos.x+_.gridPos.w&&H.gridPos.y===_.gridPos.y}function N(_){for(const H of _)if(delete H.scopedVars,H.panels?.length)for(const z of H.panels)delete z.scopedVars}const F=class{constructor(_,H,z){if(this.timeRangeUpdatedDuringEdit=!1,this.originalDashboard=null,this.getVariablesFromState=z?.getVariablesFromState??h.gt,this.events=new o.F,this.id=_.id||null,this.uid=_.uid||null,this.revision=_.revision??void 0,this.title=_.title??"No Title",this.description=_.description,this.tags=_.tags??[],this.timezone=_.timezone??"",this.weekStart=_.weekStart??"",this.editable=_.editable!==!1,this.graphTooltip=_.graphTooltip||0,this.time=_.time??{from:"now-6h",to:"now"},this.timepicker=_.timepicker??{},this.liveNow=!!_.liveNow,this.templating=this.ensureListExist(_.templating),this.annotations=this.ensureListExist(_.annotations),this.refresh=_.refresh||"",this.snapshot=_.snapshot,this.schemaVersion=_.schemaVersion??0,this.fiscalYearStartMonth=_.fiscalYearStartMonth??0,this.version=_.version??0,this.links=_.links??[],this.gnetId=_.gnetId||null,this.panels=(0,n.map)(_.panels??[],K=>new L.rY(K)),this.originalDashboard=(0,n.cloneDeep)(_),this.originalTemplating=(0,n.cloneDeep)(this.templating),this.originalTime=(0,n.cloneDeep)(this.time),this.ensurePanelsHaveUniqueIds(),this.formatDate=this.formatDate.bind(this),this.initMeta(H),this.updateSchema(_),z?.autoMigrateOldPanels||!g.config.angularSupportEnabled||g.config.featureToggles.autoMigrateOldPanels)for(const K of this.panelIterator()){const Y=L.G7[K.type];!K.autoMigrateFrom&&Y&&(K.autoMigrateFrom=K.type,K.type=Y)}this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos(),this.panelsAffectedByVariableChange=null,this.appEventsSubscription=new a.w0,this.lastRefresh=Date.now(),this.appEventsSubscription.add(y.h$.subscribe(b.x9,this.variablesChangedHandler.bind(this))),this.appEventsSubscription.add(y.h$.subscribe(b.eq,this.variablesTimeRangeProcessDoneHandler.bind(this))),this.appEventsSubscription.add(y.h$.subscribe(b.Wy,this.variablesChangedInUrlHandler.bind(this)))}addBuiltInAnnotationQuery(){this.annotations.list.some(H=>H.builtIn===1)||this.annotations.list.unshift({datasource:{uid:"-- Grafana --",type:"grafana"},name:"Annotations & Alerts",type:"dashboard",iconColor:l.Jx,enable:!0,hide:!0,builtIn:1})}initMeta(_){_=_||{},_.canShare=_.canShare!==!1,_.canSave=_.canSave!==!1,_.canStar=_.canStar!==!1,_.canEdit=_.canEdit!==!1,_.canDelete=_.canDelete!==!1,_.showSettings=_.canEdit,_.canMakeEditable=_.canSave&&!this.editable,_.hasUnsavedFolderChange=!1,this.editable||(_.canEdit=!1,_.canDelete=!1,_.canSave=!1),this.meta=_}getSaveModelCloneOld(_){const H=(0,n.defaults)(_||{},{saveVariables:!0,saveTimerange:!0});let z={};for(const K in this)F.nonPersistedProperties[K]||!this.hasOwnProperty(K)||(z[K]=(0,n.cloneDeep)(this[K]));return z.templating=this.getTemplatingSaveModel(H),H.saveTimerange||(z.time=this.originalTime),z.panels=this.getPanelSaveModels(),z=(0,d.M)(z),z.getVariables=()=>z.templating.list,z}getSaveModelClone(_){const H=this.getSaveModelCloneOld(_),z=JSON.stringify(H);return JSON.parse(z)}updatePanels(_){const H=R(this.panels,_??[]);return H.changed&&(this.panels=H.panels??[],this.sortPanelsByGridPos(),this.events.publish(new s._B)),H}getPanelSaveModels(){return this.panels.filter(_=>this.isSnapshotTruthy()||!(_.type==="add-panel"||_.repeatPanelId||_.repeatedByRow)).map(_=>{if(_.libraryPanel){const{id:H,title:z,libraryPanel:K,gridPos:Y}=_;return{id:H,title:z,gridPos:Y,libraryPanel:{uid:K.uid,name:K.name}}}return this.panelInEdit&&this.panelInEdit.id===_.id?this.panelInEdit.getSaveModel():_.getSaveModel()}).map(_=>(this.isSnapshotTruthy()||(delete _.scopedVars,_.type==="row"&&_.panels&&_.panels.length>0&&(_.panels=_.panels.filter(H=>!H.repeatPanelId).map(H=>(delete H.scopedVars,H)))),_))}getTemplatingSaveModel(_){const H=this.originalTemplating?.list??[],K=this.getVariablesFromState(this.uid).map(k=>{const q=E.z.get(k.type).getSaveModel(k,_.saveVariables);if(!_.saveVariables){const X=H.find(({name:te,type:se})=>te===k.name&&se===k.type);if(!X)return q;k.type==="adhoc"?q.filters=X.filters:(q.current=X.current,q.options=X.options)}return q});return{list:(0,d.M)(K)}}timeRangeUpdated(_){this.events.publish(new u.md(_)),(0,C.WI)((0,v.DU)(this.uid,_)),this.panelInEdit&&(this.timeRangeUpdatedDuringEdit=!0)}startRefresh(_={refreshAll:!0,panelIds:[]}){if(this.events.publish(new u.U5),this.lastRefresh=Date.now(),this.panelInEdit&&(_.refreshAll||_.panelIds.includes(this.panelInEdit.id))){this.panelInEdit.refresh();return}for(const H of this.panels)!this.otherPanelInFullscreen(H)&&(_.refreshAll||_.panelIds.includes(H.id))&&H.refresh()}render(){this.events.publish(new s._z);for(const _ of this.panels)_.render()}panelInitialized(_){const H=_.getQueryRunner().getLastResult();!this.otherPanelInFullscreen(_)&&!H&&_.refresh()}otherPanelInFullscreen(_){return(this.panelInEdit||this.panelInView)&&!(_.isViewing||_.isEditing)}initEditPanel(_){return(0,D.$t)().stopAutoRefresh(),this.panelInEdit=_.getEditClone(),this.timeRangeUpdatedDuringEdit=!1,this.panelInEdit}exitPanelEditor(){this.panelInEdit.destroy(),this.panelInEdit=void 0,(0,D.$t)().resumeAutoRefresh(),(this.panelsAffectedByVariableChange||this.timeRangeUpdatedDuringEdit)&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange??[],refreshAll:this.timeRangeUpdatedDuringEdit}),this.panelsAffectedByVariableChange=null,this.timeRangeUpdatedDuringEdit=!1)}initViewPanel(_){this.panelInView=_,_.setIsViewing(!0)}exitViewPanel(_){this.panelInView=void 0,_.setIsViewing(!1),this.refreshIfPanelsAffectedByVariableChange()}refreshIfPanelsAffectedByVariableChange(){this.panelsAffectedByVariableChange&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange,refreshAll:!1}),this.panelsAffectedByVariableChange=null)}ensurePanelsHaveUniqueIds(){const _=new Set;let H=this.getNextPanelId();for(const z of this.panelIterator())(!z.id||_.has(z.id))&&(z.id=H++),_.add(z.id)}ensureListExist(_={}){return _.list??=[],_}getNextPanelId(){let _=0;for(const H of this.panelIterator())H.id>_&&(_=H.id);return _+1}*panelIterator(){for(const _ of this.panels){yield _;const H=_.panels??[];for(const z of H)yield z}}forEachPanel(_){for(let H=0;H<this.panels.length;H++)_(this.panels[H],H)}getPanelById(_){return this.panelInEdit&&this.panelInEdit.id===_?this.panelInEdit:this.panels.find(H=>H.id===_)??null}canEditPanel(_){return!!(this.meta.canEdit&&_&&!_.repeatPanelId&&_.type!=="row")}canEditPanelById(_){return this.canEditPanel(this.getPanelById(_))}addPanel(_){_.id=this.getNextPanelId(),this.panels.unshift(new L.rY(_)),this.sortPanelsByGridPos(),this.events.publish(new s._B)}updateMeta(_){this.meta={...this.meta,..._},this.events.publish(new s.hS)}makeEditable(){this.editable=!0,this.updateMeta({canMakeEditable:!1,canEdit:!0,canSave:!0})}sortPanelsByGridPos(){this.panels.sort((_,H)=>_.gridPos.y===H.gridPos.y?_.gridPos.x-H.gridPos.x:_.gridPos.y-H.gridPos.y)}clearUnsavedChanges(_,H){for(const z of this.panels)z.configRev=0;this.panelInEdit&&(this.panelInEdit.hasSavedPanelEditChange=this.panelInEdit.configRev>0,this.panelInEdit.configRev=0),this.originalDashboard=_,this.originalTemplating=_.templating,H.saveTimerange&&(this.originalTime=_.time)}hasUnsavedChanges(){return!!this.panels.find(H=>H.hasChanged)}cleanUpRepeats(){if(this.isSnapshotTruthy()||!this.hasVariables())return;N(this.panels);const _=this.panels.filter(H=>(!H.repeat||H.repeatedByRow)&&H.repeatPanelId);(0,n.pull)(this.panels,..._),_.map(H=>H.destroy()),this.sortPanelsByGridPos()}processRepeats(){if(!(this.isSnapshotTruthy()||!this.hasVariables()||this.panelInView)){this.cleanUpRepeats();for(let _=0;_<this.panels.length;_++){const H=this.panels[_];H.repeat&&this.repeatPanel(H,_)}this.sortPanelsByGridPos(),this.events.publish(new s._B)}}cleanUpRowRepeats(_){const H=_.map(K=>K.id),z=_.filter(K=>!K.repeat&&K.repeatPanelId&&H.includes(K.repeatPanelId));(0,n.pull)(_,...z),(0,n.pull)(this.panels,...z)}processRowRepeats(_){if(this.isSnapshotTruthy()||!this.hasVariables())return;let H=_.panels??[];if(!_.collapsed){const z=this.panels.findIndex(K=>K.id===_.id);H=this.getRowPanels(z)}this.cleanUpRowRepeats(H);for(const z of H)if(z.repeat){const K=this.panels.findIndex(Y=>Y.id===z.id);this.repeatPanel(z,K)}}getPanelRepeatClone(_,H,z){if(H===0)return _;const K=_.getSaveModel();K.id=this.getNextPanelId();const Y=new L.rY(K);return this.panels.splice(z+H,0,Y),Y.repeatPanelId=_.id,Y.repeat=void 0,this.panelInView?.id===Y.id&&(Y.setIsViewing(!0),this.panelInView=Y),Y}getRowRepeatClone(_,H,z){if(H===0){if(!_.collapsed){const q=this.getRowPanels(z);_.panels=q}return _}const K=new L.rY(_.getSaveModel());let Y,k;return _.collapsed?(Y=(0,n.cloneDeep)(_.panels)??[],K.panels=Y,k=z+H):(Y=this.getRowPanels(z),K.panels=Y.map(q=>q.getSaveModel()),k=z+(Y.length+1)*H),this.panels.splice(k,0,K),this.updateRepeatedPanelIds(K),K}repeatPanel(_,H){const z=this.getPanelRepeatVariable(_);if(!z)return;if(_.type==="row"){this.repeatRow(_,H,z);return}const K=this.getSelectedVariableOptions(z),Y=_.maxPerRow||4;let k=0,q=_.gridPos.y;for(let te=0;te<K.length;te++){const se=K[te];let de;de=this.getPanelRepeatClone(_,te,H),de.scopedVars??={},de.scopedVars[z.name]=se,_.repeatDirection===m.OA?(te>0&&(q+=de.gridPos.h),de.gridPos.y=q):(de.gridPos.w=Math.max(m.cz/K.length,m.cz/Y),de.gridPos.x=k,de.gridPos.y=q,k+=de.gridPos.w,k+de.gridPos.w>m.cz&&(k=0,q+=de.gridPos.h))}const X=q-_.gridPos.y;if(X>0){const te=H+K.length;for(const se of this.panels.slice(te))P(_,se)||(se.gridPos.y+=X)}}repeatRow(_,H,z){const K=this.getSelectedVariableOptions(z);for(let Y=0;Y<K.length;Y++){const k=K[Y],q=this.getRowRepeatClone(_,Y,H);V(q,z,k);const X=this.getRowHeight(q),te=q.panels||[];let se;if(_.collapsed){for(const de of te)V(de,z,k),Y>0&&this.updateRepeatedPanelIds(de,!0);q.gridPos.y+=Y,se=H+Y+1}else{const de=H+(te.length+1)*Y+1;te.forEach((re,fe)=>{if(V(re,z,k),Y>0){const ie=new L.rY(re);this.updateRepeatedPanelIds(ie,!0),ie.gridPos.y+=X*Y,this.panels.splice(de+fe,0,ie)}}),q.panels=[],q.gridPos.y+=X*Y,se=de+te.length}if(K.length>1)for(const de of this.panels.slice(se))de.gridPos.y+=X}}updateRepeatedPanelIds(_,H){return _.repeatPanelId=_.id,_.id=this.getNextPanelId(),H?_.repeatedByRow=!0:_.repeat=void 0,_}getSelectedVariableOptions(_){let H;return(0,S.HY)(_)?H=_.options.slice(1,_.options.length):H=(0,n.filter)(_.options,{selected:!0}),H}getRowHeight(_){if(!_.panels||_.panels.length===0)return 0;if(_.collapsed)return 1;const H=(0,n.maxBy)(_.panels,({gridPos:z})=>z.y+z.h).gridPos;return H.y+H.h-_.gridPos.y}removePanel(_){this.panels=this.panels.filter(H=>H!==_),_.destroy(),this.events.publish(new s._B)}removeRow(_,H){(!H&&_.collapsed||H&&!_.collapsed)&&this.toggleRow(_),this.removePanel(_)}expandRows(){const _=this.panels.filter(H=>H.type==="row"&&H.collapsed);for(const H of _)this.toggleRow(H)}collapseRows(){const _=this.panels.filter(H=>H.type==="row"&&!H.collapsed);for(const H of _)this.toggleRow(H)}isSubMenuVisible(){return this.links.length>0||this.getVariables().some(_=>_.hide!==2)||this.annotations.list.some(_=>!_.hide)}getPanelInfoById(_){const H=this.panels.findIndex(z=>z.id===_);return H>=0?{panel:this.panels[H],index:H}:null}duplicatePanel(_){const H=_.getSaveModel();return H.id=this.getNextPanelId(),delete H.repeat,delete H.repeatIteration,delete H.repeatPanelId,delete H.scopedVars,H.alert&&delete H.thresholds,delete H.alert,_.gridPos.x+_.gridPos.w*2<=m.cz?H.gridPos.x+=_.gridPos.w:H.gridPos.y+=_.gridPos.h,this.addPanel(H),H}formatDate(_,H){return(0,r.dq)(_,{format:H,timeZone:this.getTimezone()})}destroy(){this.appEventsSubscription.unsubscribe(),this.events.removeAllListeners();for(const _ of this.panels)_.destroy()}toggleRow(_){const H=(0,n.indexOf)(this.panels,_);if(!_.collapsed){const k=this.getRowPanels(H);(0,n.pull)(this.panels,...k),_.panels=k.map(q=>q.getSaveModel()),_.collapsed=!0,k.some(q=>q.hasChanged)&&_.configRev++,this.events.publish(new s._B);return}_.collapsed=!1;const z=_.panels??[],K=z.some(k=>k.repeat),Y=_.repeat;if(z.length>0){const q=(z[0].gridPos.y??_.gridPos.y)-(_.gridPos.y+_.gridPos.h);let X=H+1,te=_.gridPos.y;for(const de of z){if(Y){const re=this.getPanelRepeatVariable(_);if(de.scopedVars??={},re){const fe=this.getSelectedVariableOptions(re);de.scopedVars={...de.scopedVars,[re.name]:fe[0]}}}de.gridPos.y??(de.gridPos.y=_.gridPos.y),de.gridPos.y-=q,this.panels.splice(X,0,new L.rY(de)),X+=1,te=Math.max(te,de.gridPos.y+de.gridPos.h)}const se=te-_.gridPos.y-1;for(const de of this.panels.slice(X))de.gridPos.y+=se;_.panels=[],K&&this.processRowRepeats(_)}this.sortPanelsByGridPos(),this.events.publish(new s._B)}getRowPanels(_){const H=this.panels.slice(_+1),z=H.findIndex(Y=>Y.type==="row");return H.slice(0,z>=0?z:this.panels.length)}on(_,H){console.log("DashboardModel.on is deprecated use events.subscribe"),this.events.on(_,H)}off(_,H){console.log("DashboardModel.off is deprecated"),this.events.off(_,H)}cycleGraphTooltip(){this.graphTooltip=(this.graphTooltip+1)%3}sharedTooltipModeEnabled(){return this.graphTooltip>0}sharedCrosshairModeOnly(){return this.graphTooltip===1}getRelativeTime(_){return(0,r.E8)(_,{timeZone:this.getTimezone()})}isSnapshot(){return this.snapshot!==void 0}getTimezone(){return this.timezone?this.timezone:c.contextSrv?.user?.timezone}updateSchema(_){new I.o3(this).updateSchema(_)}hasTimeChanged(){const{time:_,originalTime:H}=this;return!((0,n.isEqual)(_,H)||(0,n.isEqual)((0,i.CQ)(_?.from),(0,i.CQ)(H?.from))&&(0,n.isEqual)((0,i.CQ)(_?.to),(0,i.CQ)(H?.to)))}autoFitPanels(_,H){const z=Math.max(...this.panels.map(te=>te.gridPos.h+te.gridPos.y)),K=55,Y=20;let k=_-K-Y;H&&H!==p.KioskMode.TV&&(k+=K);const q=Math.floor(k/(m.K3+m.hD)),X=z/q;for(const te of this.panels)te.gridPos.y=Math.round(te.gridPos.y/X)||1,te.gridPos.h=Math.round(te.gridPos.h/X)||1}templateVariableValueUpdated(){this.processRepeats(),this.events.emit(p.CoreEvents.nq)}getPanelByUrlId(_){const H=parseInt(_??"0",10),z=this.panels.filter(K=>K.collapsed);for(const K of z)K.panels?.some(k=>k.id===H)&&this.toggleRow(K);return this.getPanelById(H)}toggleLegendsForAll(){const _=this.panels.filter(j),H=_.filter(Y=>Y.legend.show).length,z=_.length-H,K=H>=z;for(const Y of _)Y.legend.show=!K,Y.render()}toggleExemplarsForAll(){for(const _ of this.panels)for(const H of _.targets){if(!(H.datasource&&H.datasource.type==="prometheus"))continue;const z=H;z.exemplar=!z.exemplar}this.startRefresh()}getVariables(){return this.getVariablesFromState(this.uid)}canEditAnnotations(_){let H=!0;return _?H=!!this.meta.annotationsPermissions?.dashboard.canEdit:H=!!this.meta.annotationsPermissions?.organization.canEdit,(g.config.featureToggles.annotationPermissionUpdate||this.canEditDashboard())&&H}canDeleteAnnotations(_){let H=!0;return _?H=!!this.meta.annotationsPermissions?.dashboard.canDelete:H=!!this.meta.annotationsPermissions?.organization.canDelete,g.config.featureToggles.annotationPermissionUpdate?H:H&&this.canEditDashboard()}canAddAnnotations(){return this.annotations.list.find(H=>H.builtIn===1)?.enable===!1?!1:g.config.featureToggles.annotationPermissionUpdate?!!this.meta.annotationsPermissions?.dashboard.canAdd:!!this.meta.annotationsPermissions?.dashboard.canAdd&&this.canEditDashboard()}canEditDashboard(){return!!(this.meta.canEdit||this.meta.canMakeEditable)}shouldUpdateDashboardPanelFromJSON(_,H){!(0,n.isEqual)(_?.gridPos,H?.gridPos)&&this.events.publish(new s._B)}getDefaultTime(){return this.originalTime}getPanelRepeatVariable(_){return this.getVariablesFromState(this.uid).find(H=>H.name===_.repeat)}isSnapshotTruthy(){return this.snapshot}hasVariables(){return this.getVariablesFromState(this.uid).length>0}hasVariablesChanged(){const _=this.originalTemplating?.list??[],H=this.getTemplatingSaveModel({saveVariables:!0}).list;return _.length!==H.length?!1:!(0,n.isEqual)(H,_)}variablesTimeRangeProcessDoneHandler(_){const H=_.payload.variableIds.length>0;this.variablesChangedHandler(new b.x9({panelIds:[],refreshAll:!0}),H)}variablesChangedHandler(_,H=!0){if(H&&this.processRepeats(),_.payload.refreshAll||(0,D.$t)().isRefreshOutsideThreshold(this.lastRefresh)){this.startRefresh({refreshAll:!0,panelIds:[]});return}(this.panelInEdit||this.panelInView)&&(this.panelsAffectedByVariableChange=_.payload.panelIds.filter(z=>z!==(this.panelInEdit?.id??this.panelInView?.id))),this.startRefresh(_.payload)}variablesChangedInUrlHandler(_){this.templateVariableValueUpdated(),this.startRefresh(_.payload)}getOriginalDashboard(){return this.originalDashboard}hasAngularPlugins(){return this.panels.some(_=>{const H=_.isAngularPlugin()&&!_.plugin?.meta.angular?.hideDeprecation;let z=!1;return _.datasource?.uid&&(z=(0,f.G)(_.datasource?.uid)),H||z})}};let U=F;U.nonPersistedProperties={events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0,originalLibraryPanels:!0,panelInEdit:!0,panelInView:!0,getVariablesFromState:!0,formatDate:!0,appEventsSubscription:!0,panelsAffectedByVariableChange:!0,lastRefresh:!0,timeRangeUpdatedDuringEdit:!0,originalDashboard:!0};function j(_){return!!_.legend}function V(_,H,z){_.scopedVars??={},_.scopedVars[H.name]=z}},68460:(G,A,e)=>{"use strict";e.d(A,{G7:()=>s,Jg:()=>S,hb:()=>b,rY:()=>C});var n=e(56375),a=e.n(n),o=e(90308),r=e(16293),i=e(81223),g=e(24372),u=e(2384),l=e(12399),m=e(67954),c=e(18815),d=e(21871),f=e(14914),E=e(17771);const v={events:!0,isViewing:!0,isEditing:!0,isInView:!0,hasRefreshed:!0,cachedPluginOptions:!0,plugin:!0,queryRunner:!0,replaceVariables:!0,configRev:!0,hasSavedPanelEditChange:!0,getDisplayTitle:!0,dataSupport:!0,key:!0,isNew:!0,refreshWhenInView:!0},h={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,queryCachingTTL:!0,cachedPluginOptions:!0,transparent:!0,pluginVersion:!0,queryRunner:!0,transformations:!0,fieldConfig:!0,maxDataPoints:!0,interval:!0,replaceVariables:!0,libraryPanel:!0,getDisplayTitle:!0,configRev:!0,key:!0},p={gridPos:{x:0,y:0,h:3,w:6},targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1,options:{},fieldConfig:{defaults:{},overrides:[]},title:""},s={graph:"timeseries","table-old":"table",singlestat:"stat","grafana-singlestat-panel":"stat","grafana-piechart-panel":"piechart","grafana-worldmap-panel":"geomap"},y={"heatmap-new":"heatmap"};class C{constructor(M){this.datasource=null,this.isViewing=!1,this.isEditing=!1,this.isInView=!1,this.configRev=0,this.refreshWhenInView=!1,this.cachedPluginOptions={},this.events=new r.F,this.restoreModel(M),this.replaceVariables=this.replaceVariables.bind(this),this.key=(0,o.Z)()}restoreModel(M){for(const R in this)v[R]||!this.hasOwnProperty(R)||M[R]||typeof this[R]!="function"&&typeof this[R]!="symbol"&&delete this[R];for(const R in M)this[R]=M[R];const T=y[this.type];T&&(this.autoMigrateFrom=this.type,this.type=T),(0,n.defaultsDeep)(this,(0,n.cloneDeep)(p)),this.ensureQueryIds()}generateNewKey(){this.key=(0,o.Z)()}ensureQueryIds(){if(this.targets&&(0,n.isArray)(this.targets))for(const M of this.targets)M.refId||(M.refId=(0,d.Hs)(this.targets))}getOptions(){return this.options}get hasChanged(){return this.configRev>0}updateOptions(M){this.options=M,this.configRev++,this.events.publish(new f.Wj),this.render()}updateFieldConfig(M){this.fieldConfig=M,this.configRev++,this.events.publish(new f.Wj),this.resendLastResult(),this.render()}getSaveModel(){const M={};for(const T in this)v[T]||!this.hasOwnProperty(T)||(0,n.isEqual)(this[T],p[T])||(M[T]=(0,n.cloneDeep)(this[T]));return this.type==="row"&&this.panels&&this.panels.length>0&&(M.panels=this.panels.map(T=>{if(T.libraryPanel){const{id:R,title:O,libraryPanel:x,gridPos:I}=T;return{id:R,title:O,gridPos:I,libraryPanel:{uid:x.uid,name:x.name}}}return T})),M}setIsViewing(M){this.isViewing=M}updateGridPos(M,T=!0){M.x===this.gridPos.x&&M.y===this.gridPos.y&&M.h===this.gridPos.h&&M.w===this.gridPos.w||(this.gridPos.x=M.x,this.gridPos.y=M.y,this.gridPos.w=M.w,this.gridPos.h=M.h,T&&this.configRev++,this.render())}runAllPanelQueries({dashboardUID:M,dashboardTimezone:T,timeData:R,width:O}){this.getQueryRunner().run({datasource:this.datasource,queries:this.targets,panelId:this.id,dashboardUID:M,timezone:T,timeRange:R.timeRange,timeInfo:R.timeInfo,maxDataPoints:this.maxDataPoints||Math.floor(O),minInterval:this.interval,scopedVars:this.scopedVars,cacheTimeout:this.cacheTimeout,queryCachingTTL:this.queryCachingTTL,transformations:this.transformations,app:this.isEditing?i.zj.PanelEditor:this.isViewing?i.zj.PanelViewer:i.zj.Dashboard})}refresh(){this.hasRefreshed=!0,this.events.publish(new u.U5)}render(){this.hasRefreshed?this.events.publish(new f._z):this.refresh()}getOptionsToRemember(){return Object.keys(this).reduce((M,T)=>v[T]||h[T]?M:{...M,[T]:this[T]},{})}restorePanelOptions(M){const T=this.cachedPluginOptions[M];T&&(Object.keys(T.properties).map(R=>{this[R]=T.properties[R]}),this.fieldConfig=(0,g.__)(this.fieldConfig,T.fieldConfig))}applyPluginOptionDefaults(M,T){const R=(0,g.d4)({plugin:M,currentOptions:this.options,currentFieldConfig:this.fieldConfig,isAfterPluginChange:T});this.fieldConfig=R.fieldConfig,this.options=R.options}async pluginLoaded(M){this.plugin=M;const T=b(M);if(this.autoMigrateFrom){const R=s[this.autoMigrateFrom]!=null,O=this.getOptionsToRemember(),x=this.autoMigrateFrom,I=this.type;this.clearPropertiesBeforePluginChange(),this.type=I,this.plugin=M,this.callPanelTypeChangeHandler(M,x,O,R)}if(M.onPanelMigration&&T!==this.pluginVersion){const R=M.onPanelMigration(this);this.options=await R,this.pluginVersion=T}this.applyPluginOptionDefaults(M,!1),this.resendLastResult()}clearPropertiesBeforePluginChange(){for(const M in this)h[M]||delete this[M];this.options={},this.fieldConfig={defaults:{...this.fieldConfig.defaults,custom:{}},overrides:(0,g.aS)(this.fieldConfig.overrides,g._k)}}callPanelTypeChangeHandler(M,T,R,O){if(M.onPanelTypeChanged){const x=O?{angular:R}:R.options;Object.assign(this.options,M.onPanelTypeChanged(this,T,x,this.fieldConfig))}}changePlugin(M){const T=M.meta.id,R=this.getOptionsToRemember(),O=this.fieldConfig,x=this.type,I=this.isAngularPlugin()||!!s[x];this.cachedPluginOptions[x]={properties:R,fieldConfig:O},this.clearPropertiesBeforePluginChange(),this.restorePanelOptions(T),this.callPanelTypeChangeHandler(M,x,R,I),this.type=T,this.plugin=M,this.configRev++,this.applyPluginOptionDefaults(M,!0),M.onPanelMigration&&(this.pluginVersion=b(M))}updateQueries(M){const{dataSource:T}=M;this.datasource={uid:T.uid,type:T.type},this.cacheTimeout=M.cacheTimeout,this.queryCachingTTL=M.queryCachingTTL,this.timeFrom=M.timeRange?.from,this.timeShift=M.timeRange?.shift,this.hideTimeOverride=M.timeRange?.hide,this.interval=M.minInterval,this.maxDataPoints=M.maxDataPoints,this.targets=M.queries,this.configRev++,this.events.publish(new f.pO)}addQuery(M){M=M||{refId:"A"},M.refId=(0,d.Hs)(this.targets),this.targets.push(M),this.configRev++}changeQuery(M,T){M.refId=this.targets[T].refId,this.configRev++,this.targets=this.targets.map((R,O)=>O===T?M:R)}getEditClone(){const M=this.getSaveModel(),T=new C(M);T.isEditing=!0,T.plugin=this.plugin;const R=this.getQueryRunner();return T.getQueryRunner().useLastResultFrom(R),T}getTransformations(){return this.transformations}getFieldOverrideOptions(){if(this.plugin)return{fieldConfig:this.fieldConfig,replaceVariables:this.replaceVariables,fieldConfigRegistry:this.plugin.fieldConfigRegistry,theme:m.default.theme2}}getDataSupport(){return this.plugin?.dataSupport??{annotations:!1,alertStates:!1}}getQueryRunner(){return this.queryRunner||(this.queryRunner=new E.o(this)),this.queryRunner}hasTitle(){return this.title&&this.title.length>0}isAngularPlugin(){return(this.plugin&&this.plugin.angularPanelCtrl)!==void 0||(this.plugin?.meta?.angular?.detected??!1)}destroy(){this.events.removeAllListeners(),this.queryRunner&&this.queryRunner.destroy()}setTransformations(M){this.transformations=M,this.resendLastResult(),this.configRev++,this.events.publish(new f.Xw)}setProperty(M,T){this[M]=T,this.configRev++,M==="repeat"&&(this.repeat&&!this.repeatDirection?this.repeatDirection="h":this.repeat||(delete this.repeatDirection,delete this.maxPerRow))}replaceVariables(M,T,R){const O=this.getQueryRunner().getLastRequest(),x=Object.assign({},this.scopedVars,O?.scopedVars,T);return(0,l.J)().replace(M,x,R)}resendLastResult(){this.plugin&&this.getQueryRunner().resendLastResult()}getDisplayTitle(){return this.replaceVariables(this.title,void 0,"text")}initLibraryPanel(M){for(const[T,R]of Object.entries(M.model)){switch(T){case"id":case"gridPos":case"libraryPanel":continue}this[T]=R}this.libraryPanel=M}unlinkLibraryPanel(){delete this.libraryPanel,this.configRev++,this.render()}}function b(D){return D&&D.meta.info.version?D.meta.info.version:m.default.buildInfo.version}function S(D){const M={};return Object.entries(D).filter(([T,R])=>!v[T]&&D.hasOwnProperty(T)&&!(0,n.isEqual)(R,p[T])).forEach(([T,R])=>{M[T]=R}),(0,c.Xh)(M)}},63319:(G,A,e)=>{"use strict";e.d(A,{$j:()=>f,f4:()=>p,fG:()=>E,lw:()=>v,tM:()=>h});var n=e(85445),a=e(88492),o=e(93991),r=e(60829),i=e(79248),g=e(21644),u=e(69396),l=e(99165),m=e(93657),c=e(45864),d=e(3273);function f(s,y){return async C=>{await(0,n.i)().post("/api/dashboards/import",s),C((0,a.$l)((0,o.AT)("Dashboard Imported",y))),C((0,u.m3)())}}function E(s){return async y=>{await(0,n.i)().delete(`/api/dashboards/uid/${s}`),y((0,u.m3)())}}const v=()=>(s,y)=>{const b=y().dashboard.getModel();b&&(b.destroy(),s((0,l.wX)(b.uid))),(0,c.$t)().stopAutoRefresh(),s((0,d.sG)()),s((0,i.Vl)()),r.H.leave(),(0,m.h4)().setCurrent(void 0)},h=s=>y=>{y((0,g.YT)(s)),(0,c.$t)().refreshTimeModel()},p=s=>y=>{y((0,g.zW)(s)),(0,c.$t)().refreshTimeModel()}},27008:(G,A,e)=>{"use strict";e.d(A,{f:()=>n.f,r:()=>a.rY});var n=e(98898),a=e(68460)},24024:(G,A,e)=>{"use strict";e.d(A,{ZQ:()=>H,mV:()=>_,f1:()=>Y,$M:()=>K});var n=e(12693),a=e(85745),o=e(43471),r=e(91),i=e(85445),g=e(90857),u=e(88492),l=e(60484),m=e(93991),c=e(46783),d=e(20994),f=e(6211),E=e(93657),v=e(45864),h=e(51012),p=e(55539),s=e(43001);function y(k){return async q=>{const X=await c.ae.getFolderByUid(k);return q((0,s.G3)(X)),q((0,u.RL)((0,p.B1)(X))),X}}var C=e(60829),b=e(71746),S=e(10805),D=e(95162),M=e(9739),T=e(99165),R=e(59084),O=e(80268);function x(k,q){const X=k.templating.list.map(te=>te.type).reduce((te,se)=>(te[I(se)]=1+te[I(se)]||1,te),{});O.a.dashboardInitialized({uid:k.uid,title:k.title,theme:k.style,schemaVersion:k.schemaVersion,version_before_migration:q,panels_count:k.panels.length,...X})}const I=k=>`variable_type_${k}_count`;var L=e(98898),P=e(49641),N=e(43183);function F(k){const q={dashboardId:k.id,dashboardName:k.title,dashboardUid:k.uid,folderName:k.meta.folderTitle,eventName:P.ct.DashboardView};(0,N.r_)(q)}var U=e(3273);async function j(k,q,X){const te=d.Z.getObject(z);if(te)return Y(),te;try{switch(k.routeName){case D.DashboardRoutes.Home:{const de=(0,h.wc)().getFromCache(D.DashboardRoutes.Home);if(de)return de;const re=await c.ae.get("/api/dashboards/home");if(re.redirectUri){const fe=n.u.stripBaseFromUrl(re.redirectUri);return r.E1.replace(fe),null}return re.meta.canSave=!1,re.meta.canShare=!1,re.meta.canStar=!1,re}case D.DashboardRoutes.Public:return await f.pD.loadDashboard("public",k.urlSlug,k.accessToken);case D.DashboardRoutes.Embedded:if(k.dashboardDto)return k.dashboardDto;case D.DashboardRoutes.Normal:{const se=await f.pD.loadDashboard(k.urlType,k.urlSlug,k.urlUid);if(se.meta.folderUid)try{await q(y(se.meta.folderUid))}catch(de){console.warn("Error fetching parent folder",se.meta.folderUid,"for dashboard",de)}if(k.fixUrl&&se.meta.url&&!b.r0.isPlaying){const de=n.u.stripBaseFromUrl(se.meta.url),re=r.E1.getLocation().pathname;de!==re&&(r.E1.replace({...r.E1.getLocation(),pathname:de}),console.log("not correct url correcting",de,re))}return se}case D.DashboardRoutes.New:return k.urlFolderUid&&await q(y(k.urlFolderUid)),H(k.urlFolderUid,k.panelType);case D.DashboardRoutes.Path:{const se=k.urlSlug??"";return await f.pD.loadDashboard(D.DashboardRoutes.Path,se,se)}default:throw{message:"Unknown route "+k.routeName}}}catch(se){return(0,i.kW)(se)&&se.cancelled||(q((0,U.jA)({message:"Failed to fetch dashboard",error:se})),console.error(se)),null}}const V=(k,q={})=>(k.forEach(X=>{X.panels?V(X.panels,q):X.targets&&X.targets.forEach(te=>{te.datasource?.type&&(q[te.datasource.type]?q[te.datasource.type].push(te):q[te.datasource.type]=[te])})}),q);function _(k){return async(q,X)=>{q((0,U.sf)());const te=await j(k,q,X),se=te?.dashboard?.version;if(!te)return;q((0,U.Nv)());let de;try{de=new L.f(te.dashboard,te.meta)}catch(ge){q((0,U.jA)({message:"Failed create dashboard model",error:ge})),console.error(ge);return}const re=X(),fe=r.E1.getSearchObject();fe.orgId||r.E1.partial({orgId:re.user.orgId},!0);const ie=(0,v.$t)();(0,E.h4)().setCurrent(de),ie.init(de);const ue=(0,S.mn)(k.urlUid??de.uid);if(await q((0,T.LX)(ue,de)),(0,M.Tl)({dashboard:de,timeSrv:ie}).run({dashboard:de,range:ie.timeRange()}),(0,R.cp)(X())===ue&&X().dashboard.initPhase===D.DashboardInitPhase.Services){try{de.processRepeats(),fe.autofitpanels&&de.autoFitPanels(window.innerHeight,fe.kiosk),k.keybindingSrv.setupDashboardBindings(de)}catch(ge){ge instanceof Error&&q((0,u.$l)((0,m.t_)("Dashboard init failed",ge))),console.error(ge)}k.routeName!==D.DashboardRoutes.New?(F(de),C.H.watch(de.uid)):C.H.leave(),de.weekStart!==""?(0,a.Ls)(de.weekStart):(0,a.Ls)(g.config.bootData.user.weekStart),l.Z.publish(new o.Pl({dashboardId:de.uid,orgId:re.user.orgId,userId:re.user.user?.id,grafanaVersion:g.config.buildInfo.version,queries:V(de.panels)})),x(de,se),q((0,U.dS)(de))}}}function H(k,q){const X=g.config.featureToggles.emptyDashboardPage?[]:[{type:q??"add-panel",gridPos:{x:0,y:0,w:12,h:9},title:"Panel Title"}],te={meta:{canStar:!1,canShare:!1,canDelete:!1,isNew:!0,folderUid:""},dashboard:{title:"New dashboard",panels:X}};return k&&(te.meta.folderUid=k),te}const z="DASHBOARD_FROM_LS_KEY";function K(k){d.Z.setObject(z,k)}function Y(){d.Z.delete(z)}},3273:(G,A,e)=>{"use strict";e.d(A,{Nv:()=>c,Rd:()=>E,ZP:()=>h,dS:()=>m,jA:()=>l,sG:()=>d,sf:()=>u,tq:()=>f});var n=e(20079),a=e(34166),o=e(95162),r=e(98898);const i={initPhase:o.DashboardInitPhase.NotStarted,getModel:()=>null,initError:null,initialDatasource:void 0},g=(0,n.oM)({name:"dashboard",initialState:i,reducers:{dashboardInitFetching:p=>{p.initPhase=o.DashboardInitPhase.Fetching},dashboardInitServices:p=>{p.initPhase=o.DashboardInitPhase.Services},dashboardInitCompleted:(p,s)=>{p.getModel=()=>s.payload,p.initPhase=o.DashboardInitPhase.Completed},dashboardInitFailed:(p,s)=>{p.initPhase=o.DashboardInitPhase.Failed,p.initError=s.payload,p.getModel=()=>new r.f({...a.Ql,title:"Dashboard init failed"},{canSave:!1,canEdit:!1})},cleanUpDashboard:p=>{p.initPhase=o.DashboardInitPhase.NotStarted,p.initError=null,p.getModel=()=>null},addPanel:(p,s)=>{},setInitialDatasource:(p,s)=>{p.initialDatasource=s.payload}}}),{dashboardInitFetching:u,dashboardInitFailed:l,dashboardInitCompleted:m,dashboardInitServices:c,cleanUpDashboard:d,addPanel:f,setInitialDatasource:E}=g.actions,h={dashboard:g.reducer}},64524:(G,A,e)=>{"use strict";e.d(A,{$0:()=>y,$N:()=>p,AI:()=>m,AX:()=>s,Dh:()=>E,LU:()=>l,L_:()=>c,RB:()=>f,rm:()=>d,uZ:()=>v,yQ:()=>C});var n=e(56375),a=e.n(n),o=e(91),r=e(67954),i=e(89248),g=e(20994),u=e(8808);function l(S,D){const M={type:"timeseries",title:"Panel Title",gridPos:(0,u.lg)(S),datasource:D?{uid:D}:null,isNew:!0};return S.addPanel(M),M.id}function m(S,D){const M={type:D,title:"Widget title",gridPos:(0,u.lg)(S),datasource:null,isNew:!0};return S.addPanel(M),M.id}function c(S){const D={type:"row",title:"Row title",gridPos:{x:0,y:0}};S.addPanel(D)}function d(){o.E1.push("/dashboard/import")}function f(S){const D={type:"add-library-panel",gridPos:(0,u.lg)(S)};S.addPanel(D)}function E(S,D){if(!D)return;const M=(0,u.lg)(S),T={type:D.id,title:"Panel Title",gridPos:{x:M.x,y:M.y,w:D.defaults.gridPos.w,h:D.defaults.gridPos.h}};D.defaults&&((0,n.defaults)(T,D.defaults),T.title=D.defaults.title,g.Z.delete(i.zF)),S.addPanel(T)}function v(){const S=(0,n.chain)(r.default.panels).filter({hideFromList:!1}).map(M=>M).value(),D=g.Z.get(i.zF);if(D){const M=JSON.parse(D),T=(0,n.find)(S,{id:M.type});if(T){const R=(0,n.cloneDeep)(T);return R.name=M.title,R.sort=-1,{...R,defaults:{...M}}}}}const h="grafana.dashboards.panelEdit.lastUsedDatasource";function p(S){if(g.Z.exists(h)){const D=g.Z.getObject(h);if(D?.dashboardUid===S)return D}}function s(S){if(!g.Z.exists(h))return;const M=g.Z.getObject(h)?.datasourceUid??"";b(S,M)}function y(S){g.Z.setObject(h,{dashboardUid:S,datasourceUid:""})}function C(S,D){const M=p(S);if(!M)b(S,D);else{const T=M?.dashboardUid??"";b(T,D)}}function b(S,D){g.Z.setObject(h,{dashboardUid:S,datasourceUid:D})}},8808:(G,A,e)=>{"use strict";e.d(A,{Kq:()=>M,Po:()=>D,W1:()=>x,WJ:()=>C,bY:()=>S,jN:()=>b,lg:()=>P,oe:()=>T,qw:()=>O});var n=e(56375),a=e.n(n),o=e(47475),r=e(71244),i=e(85745),g=e(13446),u=e(12399),l=e(60484),m=e(67954),c=e(89248),d=e(20994),f=e(5312),E=e(68460),v=e(17027),h=e(53685),p=e(29100),s=e(59767),y=e(14914);const C=(N,F,U)=>{if(U!==!1){const j=F.alert&&!m.default.unifiedAlertingEnabled?"Panel includes an alert rule. removing the panel will also remove the alert rule":void 0,V=F.alert?"YES":void 0;l.Z.publish(new y.VJ({title:"Remove panel",text:"Are you sure you want to remove this panel?",text2:j,icon:"trash-alt",confirmText:V,yesText:"Remove",onConfirm:()=>C(N,F,!1)}));return}N.removePanel(F),(0,s.WI)((0,p.qj)(F.key))},b=(N,F)=>{N.duplicatePanel(F)},S=N=>{let F=N;N instanceof E.rY&&(F=N.getSaveModel()),d.Z.set(c.zF,JSON.stringify(F)),l.Z.emit(o.SI.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])},D=(N,F)=>{l.Z.publish(new y.Dn({component:f.ShareModal,props:{dashboard:N,panel:F}}))},M=(N,F)=>{l.Z.publish(new y.Dn({component:v.c,props:{panel:F,initialFolderUid:N.meta.folderUid,isOpen:!0}}))},T=N=>{l.Z.publish(new y.Dn({component:h.i,props:{onConfirm:()=>N.unlinkLibraryPanel(),isOpen:!0}}))},R=N=>{N.refresh()},O=N=>{const F={...N.options};F.legend.showLegend===!0?F.legend.showLegend=!1:F.legend.showLegend=!0,N.updateOptions(F)};function x(N,F){const U={timeInfo:"",timeRange:F};if(N.timeFrom){const j=(0,u.J)().replace(N.timeFrom,N.scopedVars),V=r.describeTextRange(j);if(V.invalid)return U.timeInfo="invalid time override",U;if((0,n.isString)(F.raw.from)){const _=(0,i.C_)(F.from).tz(),H=(0,i.C_)(F.to).tz(),z=g.parse(V.from,void 0,_);U.timeInfo=V.display,U.timeRange={from:z,to:g.parse(V.to,void 0,H),raw:{from:V.from,to:V.to}}}}if(N.timeShift){const j=(0,u.J)().replace(N.timeShift,N.scopedVars);if(r.describeTextRange(j).invalid)return U.timeInfo="invalid timeshift",U;const _="-"+j;U.timeInfo+=" timeshift "+_;const H=g.parseDateMath(_,U.timeRange.from,!1),z=g.parseDateMath(_,U.timeRange.to,!0);U.timeRange={from:H,to:z,raw:{from:H,to:z}}}return N.hideTimeOverride&&(U.timeInfo=""),U}function I(N){const U=document.getElementsByTagName("html")[0].getBoundingClientRect().width;return N.maxDataPoints?N.maxDataPoints:Math.ceil(U*(N.gridPos.w/24))}function L(N,F){const U=N.plugin&&N.plugin.noPadding?0:config.theme.panelPadding*2,j=N.hasTitle()?config.theme.panelHeaderHeight:0;return F-j-U-PANEL_BORDER}function P(N){for(const U of N.panelIterator())U.gridPos.y+=8;return{x:0,y:0,w:12,h:8}}},96201:(G,A,e)=>{"use strict";e.d(A,{O:()=>o});var n=e(85745),a=e(13446);const o=(r,i)=>{const g={from:(0,n.v9)(r.from)?(0,n.CQ)(r.from):r.from,to:(0,n.v9)(r.to)?(0,n.CQ)(r.to):r.to},u=i?i.getTimezone():void 0;return{from:a.parse(g.from,!1,u,i?.fiscalYearStartMonth),to:a.parse(g.to,!0,u,i?.fiscalYearStartMonth),raw:g}}},71005:(G,A,e)=>{"use strict";e.d(A,{DK:()=>g,eM:()=>i,dg:()=>u});var n=e(1050),a=e(45878);function o(l){const m=new Set;return Object.keys(l).forEach(c=>{l[c].forEach(d=>{m.add(d)})}),m}function r(l){const m=Array.from(o(l));return m.length===1?m[0]:`${m.slice(0,-1).join(", ")} or ${m.slice(-1)}`}function i(l){return new n.y(m=>{let c=0;Promise.all([e.e(2325),e.e(2357)]).then(e.bind(e,62325)).then(d=>{l.forEach(f=>{const E=new FileReader;E.readAsArrayBuffer(f),E.onload=()=>{const v=E.result;if(v&&v instanceof ArrayBuffer){if(f.type==="application/json"){const h=new TextDecoder("utf-8"),p=JSON.parse(h.decode(v));m.next({dataFrames:[(0,a.g0)(p)],file:f})}else m.next({dataFrames:d.readSpreadsheet(v),file:f});++c>=l.length&&m.complete()}}})}).catch(()=>{throw"Failed to load sheets module"})})}const g={"text/plain":[".csv",".txt"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-excel":[".xls"],"application/vnd.apple.numbers":[".numbers"],"application/vnd.oasis.opendocument.spreadsheet":[".ods"],"application/json":[".json"]},u=5e5},34558:(G,A,e)=>{"use strict";e.d(A,{P:()=>u});var n=e(85960),a=e(29165),o=e(49683),r=e(95329),i=e(82955),g=e(95162);function u({variant:l,onClick:m}){const c=o.Vt.hasPermission(g.AccessControlAction.DataSourcesCreate),d=i.Z.DataSourcesNew;return n.createElement(a.Qj,{variant:l||"primary",href:d,disabled:!c,tooltip:c?void 0:"You do not have permission to configure new data sources",onClick:m,target:"_blank"},n.createElement(r.cC,{i18nKey:"data-source-picker.add-new-data-source"},"Configure a new data source"))}},42545:(G,A,e)=>{"use strict";e.d(A,{F:()=>g});var n=e(66681),a=e(85960),o=e(47257),r=e(72435),i=e(7042);function g({ds:l,onClick:m,selected:c,description:d,...f}){const E=(0,o.l4)(),v=u(E,l.meta.builtIn);return a.createElement(r.Z,{key:l.uid,onClick:m,className:(0,n.cx)(v.card,c?v.selected:void 0),...f},a.createElement(r.Z.Heading,{className:v.heading},a.createElement("div",{className:v.headingContent},a.createElement("span",{className:v.name},l.name," ",l.isDefault?a.createElement(i.P,{tags:["default"]}):null),a.createElement("small",{className:v.type},d||l.meta.name))),a.createElement(r.Z.Figure,{className:v.logo},a.createElement("img",{src:l.meta.info.logos.small,alt:`${l.meta.name} Logo`})))}function u(l,m=!1){return{card:(0,n.css)`
      cursor: pointer;
      background-color: ${l.colors.background.primary};
      border-bottom: 1px solid ${l.colors.border.weak};
      // Move to list component
      margin-bottom: 0;
      border-radius: 0;
      padding: ${l.spacing(1)};
    `,heading:(0,n.css)`
      width: 100%;
      overflow: hidden;
      // This is needed to enable ellipsis when text overlfows
      > button {
        width: 100%;
      }
    `,headingContent:(0,n.css)`
      color: ${l.colors.text.secondary};
      width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: flex;
      justify-content: space-between;
    `,logo:(0,n.css)`
      width: 32px;
      height: 32px;
      padding: ${l.spacing(0,1)};
      display: flex;
      align-items: center;

      > img {
        max-height: 100%;
        min-width: 24px;
        filter: invert(${m&&l.isLight?1:0});
      }
    `,name:(0,n.css)`
      color: ${l.colors.text.primary};
      display: flex;
      gap: ${l.spacing(2)};
    `,type:(0,n.css)`
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: flex;
      align-items: center;
    `,separator:(0,n.css)`
      margin: 0 ${l.spacing(1)};
      color: ${l.colors.border.weak};
    `,selected:(0,n.css)`
      background-color: ${l.colors.background.secondary};
    `,meta:(0,n.css)`
      display: block;
      overflow-wrap: unset;
      white-space: nowrap;
      width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
    `}}},52025:(G,A,e)=>{"use strict";e.d(A,{K:()=>c});var n=e(66681),a=e(85960),o=e(12399),r=e(47257),i=e(95329),g=e(40941),u=e(34558),l=e(42545),m=e(74059);function c(h){const p=(0,a.useRef)(null),[s,y]=(0,g.wv)({keyboardEvents:h.keyboardEvents,containerRef:p}),C=(0,r.l4)(),b=v(C,y),{className:S,current:D,onChange:M,enableKeyboardNavigation:T,onClickEmptyStateCTA:R}=h,O=(0,g.Hq)({alerting:h.alerting,annotations:h.annotations,dashboard:h.dashboard,logs:h.logs,metrics:h.metrics,mixed:h.mixed,pluginId:h.pluginId,tracing:h.tracing,type:h.type,variables:h.variables}),[x,I]=(0,g.BM)(),L=h.filter?O.filter(h.filter):O;return a.createElement("div",{ref:p,className:(0,n.cx)(S,b.container),"data-testid":"data-sources-list"},L.length===0&&a.createElement(d,{className:b.emptyState,onClickCTA:R}),L.sort((0,m.Tw)(D,x,E())).map(P=>a.createElement(l.F,{"data-testid":"data-source-card",key:P.uid,ds:P,onClick:()=>{I(P),M(P)},selected:(0,m.TX)(P,D),...T?s:{}})))}function d({className:h,onClickCTA:p}){const s=(0,r.wW)(f);return a.createElement("div",{className:(0,n.cx)(h,s.container)},a.createElement("p",{className:s.message},a.createElement(i.cC,{i18nKey:"data-source-picker.list.no-data-source-message"},"No data sources found")),a.createElement(u.P,{onClick:p}))}function f(h){return{container:(0,n.css)`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    `,message:(0,n.css)`
      margin-bottom: ${h.spacing(3)};
    `}}function E(){return(0,o.J)().getVariables().filter(p=>p.type==="datasource").map(p=>`\${${p.id}}`)}function v(h,p){return{container:(0,n.css)`
      display: flex;
      flex-direction: column;
      ${p} {
        background-color: ${h.colors.background.secondary};
      }
    `,emptyState:(0,n.css)`
      height: 100%;
      flex: 1;
    `}}},10501:(G,A,e)=>{"use strict";e.d(A,{a:()=>T});var n=e(66681),a=e(56375),o=e(85960),r=e(43183),i=e(90857),g=e(47257),u=e(7288),l=e(24956),m=e(97666),c=e(50263),d=e(85447),f=e(95329),E=e(71005),v=e(8345),h=e(40941),p=e(34558),s=e(42545),y=e(74059);const C={grafana:(0,f.t)("data-source-picker.built-in-list.description-grafana","Discover visualizations using mock data"),"-- Mixed --":(0,f.t)("data-source-picker.built-in-list.description-mixed","Use multiple data sources"),"-- Dashboard --":(0,f.t)("data-source-picker.built-in-list.description-dashboard","Reuse query results from other visualizations")};function b({className:O,current:x,onChange:I,tracing:L,dashboard:P,mixed:N,metrics:F,type:U,annotations:j,variables:V,alerting:_,pluginId:H,logs:z,filter:K}){const k=(0,h.Hq)({tracing:L,dashboard:P,mixed:N,metrics:F,type:U,annotations:j,variables:V,alerting:_,pluginId:H,logs:z}).filter(q=>(K?K?.(q):!0)&&!!q.meta.builtIn);return o.createElement("div",{className:O,"data-testid":"built-in-data-sources-list"},k.map(q=>o.createElement(s.F,{key:q.uid,ds:q,description:C[q.uid],selected:(0,y.TX)(q,x),onClick:()=>I(q)})))}var S=e(52025);const D="dashboards_dspickermodal_clicked",M={SELECT_DS:"select_ds",UPLOAD_FILE:"upload_file",CONFIG_NEW_DS:"config_new_ds",CONFIG_NEW_DS_EMPTY_STATE:"config_new_ds_empty_state",SEARCH:"search",DISMISS:"dismiss"};function T({tracing:O,dashboard:x,mixed:I,metrics:L,type:P,annotations:N,variables:F,alerting:U,pluginId:j,logs:V,uploadFile:_,filter:H,onChange:z,current:K,onDismiss:Y,reportedInteractionFrom:k}){const q=(0,g.wW)(R),[X,te]=(0,o.useState)(""),se=k||"modal",de=()=>{Y(),(0,r.ff)(D,{item:M.DISMISS,src:se})},re=me=>{z(me),(0,r.ff)(D,{item:M.SELECT_DS,ds_type:me.type,src:se})},fe=o.useMemo(()=>(0,a.once)(()=>{(0,r.ff)(D,{item:"search",src:se})}),[se]),ie=(0,h.wP)("-- Grafana --"),oe=(0,v.k)((me,ge)=>{ie&&(z(ie,[me]),(0,r.ff)(D,{item:M.UPLOAD_FILE,src:se}),ge.length<1&&Y())}),ue=({className:me})=>o.createElement(b,{className:me,onChange:re,current:K,filter:H,variables:F,tracing:O,metrics:L,type:P,annotations:N,alerting:U,pluginId:j,logs:V,dashboard:x,mixed:I});return o.createElement(u.u,{title:(0,f.t)("data-source-picker.modal.title","Select data source"),closeOnEscape:!0,closeOnBackdropClick:!0,isOpen:!0,className:q.modal,contentClassName:q.modalContent,onClickBackdrop:de,onDismiss:de},o.createElement("div",{className:q.leftColumn},o.createElement(l.I,{type:"search",autoFocus:!0,className:q.searchInput,value:X,prefix:o.createElement(m.J,{name:"search"}),placeholder:(0,f.t)("data-source-picker.modal.input-placeholder","Select data source"),onChange:me=>{te(me.currentTarget.value),fe()}}),o.createElement(c.$,null,o.createElement(S.K,{onChange:re,current:K,onClickEmptyStateCTA:()=>(0,r.ff)(D,{item:M.CONFIG_NEW_DS_EMPTY_STATE,src:se}),filter:me=>(H?H?.(me):!0)&&(0,y.qW)(me,X)&&!me.meta.builtIn,variables:F,tracing:O,metrics:L,type:P,annotations:N,alerting:U,pluginId:j,logs:V,dashboard:x,mixed:I}),o.createElement(ue,{className:q.appendBuiltInDataSourcesList}))),o.createElement("div",{className:q.rightColumn},o.createElement("div",{className:q.builtInDataSources},o.createElement(c.$,{className:q.builtInDataSourcesList},o.createElement(ue,null)),_&&i.config.featureToggles.editPanelCSVDragAndDrop&&o.createElement(d.Yo,{readAs:"readAsArrayBuffer",fileListRenderer:()=>{},options:{maxSize:E.dg,multiple:!1,accept:E.DK,onDrop:oe}},o.createElement(d.A_,null))),o.createElement("div",{className:q.newDSSection},o.createElement("span",{className:q.newDSDescription},o.createElement(f.cC,{i18nKey:"data-source-picker.modal.configure-new-data-source"},"Open a new tab and configure a data source")),o.createElement(p.P,{variant:"secondary",onClick:()=>{(0,r.ff)(D,{item:M.CONFIG_NEW_DS,src:se}),Y()}}))))}function R(O){return{modal:(0,n.css)`
      width: 80%;
      height: 80%;
      max-width: 1200px;
      max-height: 900px;

      ${O.breakpoints.down("md")} {
        width: 100%;
      }
    `,modalContent:(0,n.css)`
      display: flex;
      flex-direction: row;
      height: 100%;

      ${O.breakpoints.down("md")} {
        flex-direction: column;
      }
    `,leftColumn:(0,n.css)`
      display: flex;
      flex-direction: column;
      width: 50%;
      height: 100%;
      padding-right: ${O.spacing(4)};
      border-right: 1px solid ${O.colors.border.weak};

      ${O.breakpoints.down("md")} {
        width: 100%;
        border-right: 0;
        padding-right: 0;
        flex: 1;
        overflow-y: auto;
      }
    `,rightColumn:(0,n.css)`
      display: flex;
      flex-direction: column;
      width: 50%;
      height: 100%;
      justify-items: space-evenly;
      align-items: stretch;
      padding-left: ${O.spacing(4)};

      ${O.breakpoints.down("md")} {
        width: 100%;
        padding-left: 0;
        flex: 0;
      }
    `,builtInDataSources:(0,n.css)`
      flex: 1 1;
      margin-bottom: ${O.spacing(4)};

      ${O.breakpoints.down("md")} {
        flex: 0;
      }
    `,builtInDataSourcesList:(0,n.css)`
      ${O.breakpoints.down("md")} {
        display: none;
        margin-bottom: 0;
      }

      margin-bottom: ${O.spacing(4)};
    `,appendBuiltInDataSourcesList:(0,n.css)`
      ${O.breakpoints.up("md")} {
        display: none;
      }
    `,newDSSection:(0,n.css)`
      display: flex;
      flex-direction: row;
      width: 100%;
      justify-content: space-between;
      align-items: center;
    `,newDSDescription:(0,n.css)`
      flex: 1 0;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      color: ${O.colors.text.secondary};
    `,searchInput:(0,n.css)`
      width: 100%;
      min-height: 32px;
      margin-bottom: ${O.spacing(1)};
    `}}},40715:(G,A,e)=>{"use strict";e.d(A,{q:()=>k});var n=e(85960),a=e(36613),o=e(67954),r=e(66681),i=e(57529),g=e(89344),u=e(48925),l=e(39159),m=e(92369),c=e(43183),d=e(47257),f=e(24956),E=e(97666),v=e(25142),h=e(50263),p=e(93349),s=e(29165),y=e(95329),C=e(40865),b=e(43310),S=e(40941),D=e(52025);function M(q){const{dataSource:X}=q,te=(0,d.l4)(),se=R(te,X?.meta.builtIn);return X?n.createElement("img",{className:se.pickerDSLogo,alt:`${X.meta.name} logo`,src:X.meta.info.logos.small}):T()}function T(){const q=(0,d.wW)(R);return n.createElement("div",{className:q.pickerDSLogo})}function R(q,X=!1){return{pickerDSLogo:(0,r.css)`
      height: 20px;
      width: 20px;
      filter: invert(${X&&q.isLight?1:0});
    `}}var O=e(10501),x=e(4591);const I=20,L=200,P={name:"maxSize",enabled:!0,phase:"main",requires:["offset","preventOverflow","flip"],fn({state:q,name:X,options:te}){const se=(0,x.Z)(q,te),{x:de,y:re}=q.modifiersData.preventOverflow||{x:0,y:0},{width:fe,height:ie}=q.rects.popper,{width:oe}=q.rects.reference,[ue]=q.placement.split("-"),me=ue==="left"?"left":"right",ge=ue==="top"?"top":"bottom";q.modifiersData[X]={maxWidth:fe-se[me]-de,maxHeight:ie-se[ge]-re,minWidth:oe}}},N={name:"applyMaxSize",enabled:!0,phase:"beforeWrite",requires:["maxSize"],fn({state:q}){const{maxHeight:X,maxWidth:te,minWidth:se}=q.modifiersData.maxSize;q.styles.popper.maxHeight??=`${X-I}px`,q.styles.popper.minHeight??=`${L}px`,q.styles.popper.maxWidth??=te,q.styles.popper.minWidth??=se}};var F=e(74059);const U="dashboards_dspicker_clicked",j={OPEN_DROPDOWN:"open_dspicker",SELECT_DS:"select_ds",ADD_FILE:"add_file",OPEN_ADVANCED_DS_PICKER:"open_advanced_ds_picker",CONFIG_NEW_DS_EMPTY_STATE:"config_new_ds_empty_state"};function V(q){const{current:X,onChange:te,hideTextValue:se=!1,width:de,inputId:re,noDefault:fe=!1,disabled:ie=!1,placeholder:oe="Select data source",...ue}=q,me=(0,d.wW)(_,q),[ge,Ue]=(0,n.useState)(!1),[De,Pe]=(0,n.useState)(!1),[ye,Te]=(0,n.useState)(""),{onKeyDown:nt,keyboardEvents:ct}=(0,C.A)(),he=(0,n.useRef)(null),[xe,Me]=(0,n.useState)(),[He,Ve]=(0,n.useState)(),[Oe,Ne]=(0,n.useState)(),_e=(0,S.wP)(X),qe=(0,S.wP)("-- Grafana --"),rt=!X&&fe?void 0:_e,mt=ye&&ge?n.createElement(T,null):n.createElement(M,{dataSource:rt}),Je=(0,l.D)(xe,He,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}},P,N]}),Ae=(0,n.useCallback)(()=>{Te(""),Ue(!1),xe?.focus()},[Ue,xe]),{overlayProps:Ke,underlayProps:Xe}=(0,u.Ir)({onClose:Ae,isDismissable:!0,isOpen:ge,shouldCloseOnInteractOutside:Ee=>xe?!xe.isSameNode(Ee):!1},he),{dialogProps:ne}=(0,i.R)({"aria-label":"Opened data source picker list"},he);function Z(){(0,c.ff)(U,{item:j.OPEN_DROPDOWN}),Ue(!0),xe?.focus()}function ee(){qe&&te(qe,[b.ip])}function ce(Ee){Ee.key==="Tab"&&!Ee.shiftKey&&ge&&(Ee.preventDefault(),Oe?.focus()),Ee.key==="Tab"&&Ee.shiftKey&&ge&&Ae(),nt(Ee)}function be(Ee){Ee.shiftKey?(Ee.preventDefault(),xe?.focus()):Ae()}return(0,n.useEffect)(()=>{const Ee=ct.subscribe({next:Be=>{switch(Be?.code){case"ArrowDown":Z(),Be.preventDefault();break;case"ArrowUp":Z(),Be.preventDefault();break;case"Escape":Ae(),Be.preventDefault();break}}});return()=>Ee.unsubscribe()}),n.createElement("div",{className:me.container,"data-testid":m.wl.components.DataSourcePicker.container},n.createElement("div",{className:me.trigger,onClick:Z},n.createElement(f.I,{id:re||"data-source-picker",className:De?void 0:me.input,"data-testid":m.wl.components.DataSourcePicker.inputV2,"aria-label":"Select a data source",autoComplete:"off",prefix:rt?mt:void 0,suffix:n.createElement(E.J,{name:ge?"search":"angle-down"}),placeholder:se?"":(0,F.Ve)(rt)||oe,onFocus:()=>{Pe(!0)},onBlur:()=>{Pe(!1)},onKeyDown:ce,value:ye,onChange:Ee=>{Z(),Te(Ee.currentTarget.value)},ref:Me,disabled:ie})),ge?n.createElement(v.h_,null,n.createElement("div",{...Xe}),n.createElement("div",{ref:he,...Ke,...ne},n.createElement(H,{...ue,...Je.attributes.popper,style:Je.styles.popper,ref:Ve,footerRef:Ne,current:rt,filterTerm:ye,keyboardEvents:ct,onChange:(Ee,Be)=>{Ae(),Ee.uid!==rt?.uid&&(te(Ee,Be),(0,c.ff)(U,{item:j.SELECT_DS,ds_type:Ee.type}))},onClose:Ae,onClickAddCSV:ee,onDismiss:Ae,onNavigateOutsiteFooter:be}))):null)}function _(q,X){return{container:(0,r.css)`
      position: relative;
      cursor: ${X.disabled?"not-allowed":"pointer"};
      width: ${q.spacing(X.width||"auto")};
    `,trigger:(0,r.css)`
      cursor: pointer;
      ${X.disabled&&"pointer-events: none;"}
    `,input:(0,r.css)`
      input::placeholder {
        color: ${X.disabled?q.colors.action.disabledText:q.colors.text.primary};
      }
    `}}const H=n.forwardRef((q,X)=>{const{filterTerm:te,onChange:se,onClose:de,onClickAddCSV:re,current:fe,filter:ie}=q,oe=(0,n.useCallback)(ge=>{se(ge)},[se]),ue=(0,n.useCallback)(()=>{re?.(),de(),(0,c.ff)(U,{item:j.ADD_FILE})},[re,de]),me=(0,d.wW)(z);return n.createElement("div",{style:q.style,ref:X,className:me.container},n.createElement(h.$,null,n.createElement(D.K,{...q,enableKeyboardNavigation:!0,className:me.dataSourceList,current:fe,onChange:oe,filter:ge=>(ie?ie?.(ge):!0)&&(0,F.qW)(ge,te),onClickEmptyStateCTA:()=>(0,c.ff)(U,{item:j.CONFIG_NEW_DS_EMPTY_STATE})})),n.createElement(g.MT,null,n.createElement(K,{...q,onClickAddCSV:ue,onChange:oe,onNavigateOutsiteFooter:q.onNavigateOutsiteFooter})))});H.displayName="PickerContent";function z(q){return{container:(0,r.css)`
      display: flex;
      flex-direction: column;
      background: ${q.colors.background.primary};
      box-shadow: ${q.shadows.z3};
    `,picker:(0,r.css)`
      background: ${q.colors.background.secondary};
    `,dataSourceList:(0,r.css)`
      flex: 1;
    `,footer:(0,r.css)`
      flex: 0;
      display: flex;
      flex-direction: row-reverse;
      justify-content: space-between;
      padding: ${q.spacing(1.5)};
      border-top: 1px solid ${q.colors.border.weak};
      background-color: ${q.colors.background.secondary};
    `}}function K({onClose:q,onChange:X,onClickAddCSV:te,...se}){const de=(0,d.wW)(Y),re=se.uploadFile&&o.default.featureToggles.editPanelCSVDragAndDrop,fe=oe=>{oe.key==="Tab"&&se.onNavigateOutsiteFooter(oe)},ie=oe=>{oe.key==="Tab"&&oe.shiftKey&&se.onNavigateOutsiteFooter(oe)};return n.createElement("div",{className:de.footer},n.createElement(p.JY,null,({showModal:oe,hideModal:ue})=>n.createElement(s.zx,{size:"sm",variant:"secondary",fill:"text",onClick:()=>{q(),oe(O.a,{reportedInteractionFrom:"ds_picker",tracing:se.tracing,dashboard:se.dashboard,mixed:se.mixed,metrics:se.metrics,type:se.type,annotations:se.annotations,variables:se.variables,alerting:se.alerting,pluginId:se.pluginId,logs:se.logs,filter:se.filter,uploadFile:se.uploadFile,current:se.current,onDismiss:ue,onChange:(me,ge)=>{X(me,ge),ue()}}),(0,c.ff)(U,{item:j.OPEN_ADVANCED_DS_PICKER})},ref:se.footerRef,onKeyDown:re?ie:fe},n.createElement(y.cC,{i18nKey:"data-source-picker.open-advanced-button"},"Open advanced data source picker"),n.createElement(E.J,{name:"arrow-right"}))),re&&n.createElement(s.zx,{variant:"secondary",size:"sm",onClick:te,onKeyDown:fe},"Add csv or spreadsheet"))}function Y(q){return{footer:(0,r.css)`
      flex: 0;
      display: flex;
      flex-direction: row-reverse;
      justify-content: space-between;
      padding: ${q.spacing(1.5)};
      border-top: 1px solid ${q.colors.border.weak};
      background-color: ${q.colors.background.secondary};
    `}}function k(q){return o.config.featureToggles.advancedDataSourcePicker?n.createElement(V,{...q}):n.createElement(a.q,{...q})}},74059:(G,A,e)=>{"use strict";e.d(A,{TX:()=>n,Tw:()=>o,Ve:()=>a,qW:()=>r});function n(i,g){return!i||!g?!1:typeof g=="string"?i.uid===g:i.uid===g.uid}function a(i){if(i){if(typeof i=="string")return`${i} - not found`;if("name"in i)return i.name;if(i.uid)return`${i.uid} - not found`}}function o(i,g,u){return(m,c)=>{const d=m.name.toUpperCase(),f=c.name.toUpperCase();if(i&&n(m,i))return-1;if(i&&n(c,i))return 1;const E=g.indexOf(m.uid),v=g.indexOf(c.uid);if(E>-1&&E>v)return-1;if(v>-1&&v>E)return 1;const h=u.includes(m.uid),p=u.includes(c.uid);return h&&!p?-1:p&&!h||m.meta.builtIn&&!c.meta.builtIn?1:c.meta.builtIn&&!m.meta.builtIn||d<f?-1:1}}function r(i,g=""){return i.name.toLowerCase().includes(g.toLowerCase())}},96053:(G,A,e)=>{"use strict";e.d(A,{n:()=>n});const n={List:"/datasources",Edit:"/datasources/edit/:uid",Dashboards:"/datasources/edit/:uid/dashboards",New:"/datasources/new"}},40941:(G,A,e)=>{"use strict";e.d(A,{BM:()=>i,Hq:()=>g,wP:()=>u,wv:()=>l});var n=e(85960),a=e(6753),o=e(81502);const r="grafana.features.datasources.components.picker.DataSourceDropDown.history";function i(){const[m=[],c]=(0,a.Z)(r,[]),d=(0,n.useCallback)(f=>{f.meta.builtIn||(m.includes(f.uid)?(m.splice(m.findIndex(E=>f.uid===E),1),c([...m,f.uid])):c([...m,f.uid].slice(1,6)))},[m,c]);return[m,d]}function g(m){return(0,o.F)().getList(m)}function u(m){const c=(0,o.F)();return c.getInstanceSettings(m)}function l(m){const{keyboardEvents:c,containerRef:d}=m,f=(0,n.useRef)(0),E="data-role",v="keyboardSelectableItem",h={[E]:v},p=`[${E}="${v}"`,s="data-selectedItem",y=`[${s}="true"]`,C=(0,n.useCallback)(S=>{const D=d?.current?.querySelectorAll(p),M=D?.item(S%D?.length);D?.forEach(T=>T.setAttribute(s,"false")),M&&(M.scrollIntoView({block:"center"}),M.setAttribute(s,"true"))},[d,p]),b=(0,n.useCallback)(()=>{d?.current?.querySelector(y)?.querySelector("button")?.click()},[d,y]);return(0,n.useEffect)(()=>{if(!c)return;const S=c.subscribe({next:D=>{switch(D?.code){case"ArrowDown":{C(++f.current),D.preventDefault();break}case"ArrowUp":f.current=f.current>0?f.current-1:f.current,C(f.current),D.preventDefault();break;case"Enter":b();break}}});return()=>S.unsubscribe()},[c,C,b]),(0,n.useEffect)(()=>{const S=new MutationObserver(D=>{D.some(T=>T.addedNodes&&T.addedNodes.length>0||T.removedNodes&&T.removedNodes.length>0)&&C(0)});return d.current&&S.observe(d.current,{childList:!0}),()=>{S.disconnect()}},[d,p,C]),[h,y]}},98642:(G,A,e)=>{"use strict";e.d(A,{J_:()=>te,F5:()=>re,M9:()=>K,Kj:()=>se,bZ:()=>k,kY:()=>Y,oe:()=>de});var n=e(43471),a=e(12693),o=e(32063),r=e(85445),i=e(90857),g=e(91),u=e(88492),l=e(49683),m=e(46783),c=e(82955),d=e(65512),f=e(67552),E=e(73243),v=e(95162),h=e(81838),p=e(78105);const s=async()=>await(0,m.i)().get("/api/datasources"),y=async fe=>{const ie=await(0,h.n)((0,m.i)().fetch({method:"GET",url:`/api/datasources/${fe}`,params:(0,p.y)(),showErrorAlert:!1}));if(ie.ok)return ie.data;throw Error(`Could not find data source by ID: "${fe}"`)},C=async fe=>{const ie=await(0,h.n)((0,m.i)().fetch({method:"GET",url:`/api/datasources/uid/${fe}`,params:(0,p.y)(),showErrorAlert:!1}));if(ie.ok)return ie.data;throw Error(`Could not find data source by UID: "${fe}"`)},b=async fe=>{try{return await C(fe)}catch{console.log(`Failed to lookup data source using UID "${fe}"`)}try{return await y(fe)}catch{console.log(`Failed to lookup data source using ID "${fe}"`)}throw Error("Could not find data source")},S=fe=>(0,m.i)().post("/api/datasources",fe),D=()=>(0,m.i)().get("/api/plugins",{enabled:1,type:"datasource"}),M=fe=>(0,m.i)().put(`/api/datasources/uid/${fe.uid}`,fe,{showErrorAlert:!1,showSuccessAlert:!1}),T=fe=>(0,m.i)().delete(`/api/datasources/uid/${fe}`);var R=e(96053),O=e(58757),x=e(73667),I=e(11855);function L(fe){const ie=[{id:"tsdb",title:"Time series databases",plugins:[]},{id:"logging",title:"Logging & document databases",plugins:[]},{id:"tracing",title:"Distributed tracing",plugins:[]},{id:"profiling",title:"Profiling",plugins:[]},{id:"sql",title:"SQL",plugins:[]},{id:"cloud",title:"Cloud",plugins:[]},{id:"enterprise",title:"Enterprise plugins",plugins:[]},{id:"iot",title:"Industrial & IoT",plugins:[]},{id:"other",title:"Others",plugins:[]}].filter(ge=>ge),oe={},ue={},me=N();for(const ge of ie)oe[ge.id]=ge;for(const ge of fe){const Ue=me.find(Pe=>Pe.id===ge.id);if((ge.enterprise||Ue)&&(ge.category="enterprise",ge.unlicensed=!(0,I.v)("enterprise.plugins"),ge.info.links=Ue?.info?.links||ge.info.links),ge.info.links)for(const Pe of ge.info.links)Pe.name="Learn more";(ie.find(Pe=>Pe.id===ge.category)||oe.other).plugins.push(ge),ue[ge.id]=ge}for(const ge of ie){if(ge.id==="cloud"&&ge.plugins.push(F()),ge.id==="enterprise")for(const Ue of me)ue[Ue.id]||ge.plugins.push(Ue);P(ge.plugins)}return ie.filter(ge=>ge.plugins.length>0)}function P(fe){const ie={prometheus:100,graphite:95,loki:90,mysql:80,jaeger:100,postgres:79,gcloud:-1};fe.sort((oe,ue)=>{const me=ie[oe.id]||0,ge=ie[ue.id]||0;return me>ge?-1:me<ge||oe.name>ue.name?1:-1})}function N(){return[U({id:"grafana-splunk-datasource",name:"Splunk",description:"Visualize and explore Splunk logs",imgUrl:"public/img/plugins/splunk_logo_128.png"}),U({id:"grafana-oracle-datasource",name:"Oracle",description:"Visualize and explore Oracle SQL",imgUrl:"public/img/plugins/oracle.png"}),U({id:"grafana-dynatrace-datasource",name:"Dynatrace",description:"Visualize and explore Dynatrace data",imgUrl:"public/img/plugins/dynatrace.png"}),U({id:"grafana-servicenow-datasource",description:"ServiceNow integration and data source",name:"ServiceNow",imgUrl:"public/img/plugins/servicenow.svg"}),U({id:"grafana-datadog-datasource",description:"DataDog integration and data source",name:"DataDog",imgUrl:"public/img/plugins/datadog.png"}),U({id:"grafana-newrelic-datasource",description:"New Relic integration and data source",name:"New Relic",imgUrl:"public/img/plugins/newrelic.svg"}),U({id:"grafana-mongodb-datasource",description:"MongoDB integration and data source",name:"MongoDB",imgUrl:"public/img/plugins/mongodb.svg"}),U({id:"grafana-snowflake-datasource",description:"Snowflake integration and data source",name:"Snowflake",imgUrl:"public/img/plugins/snowflake.svg"}),U({id:"grafana-wavefront-datasource",description:"Wavefront integration and data source",name:"Wavefront",imgUrl:"public/img/plugins/wavefront.svg"}),U({id:"dlopes7-appdynamics-datasource",description:"AppDynamics integration and data source",name:"AppDynamics",imgUrl:"public/img/plugins/appdynamics.svg"}),U({id:"grafana-saphana-datasource",description:"SAP HANA\xAE integration and data source",name:"SAP HANA\xAE",imgUrl:"public/img/plugins/sap_hana.png"}),U({id:"grafana-honeycomb-datasource",description:"Honeycomb integration and datasource",name:"Honeycomb",imgUrl:"public/img/plugins/honeycomb.png"}),U({id:"grafana-salesforce-datasource",description:"Salesforce integration and datasource",name:"Salesforce",imgUrl:"public/img/plugins/salesforce.svg"}),U({id:"grafana-jira-datasource",description:"Jira integration and datasource",name:"Jira",imgUrl:"public/img/plugins/jira_logo.png"}),U({id:"grafana-gitlab-datasource",description:"GitLab integration and datasource",name:"GitLab",imgUrl:"public/img/plugins/gitlab.svg"}),U({id:"grafana-splunk-monitoring-datasource",description:"SignalFx integration and datasource",name:"Splunk Infrastructure Monitoring",imgUrl:"public/img/plugins/signalfx-logo.svg"}),U({id:"grafana-azuredevops-datasource",description:"Azure Devops datasource",name:"Azure Devops",imgUrl:"public/img/plugins/azure-devops.png"}),U({id:"grafana-sumologic-datasource",description:"SumoLogic integration and datasource",name:"SumoLogic",imgUrl:"public/img/plugins/sumo.svg"})]}function F(){return{id:"gcloud",name:"Grafana Cloud",type:x.zV.datasource,module:"phantom",baseUrl:"",info:{description:"Hosted Graphite, Prometheus, and Loki",logos:{small:"public/img/grafana_icon.svg",large:"asd"},author:{name:"Grafana Labs"},links:[{url:"https://grafana.com/products/cloud/",name:"Learn more"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}function U(fe){return{id:fe.id,name:fe.name,type:x.zV.datasource,module:"phantom",baseUrl:"",info:{description:fe.description,logos:{small:fe.imgUrl,large:fe.imgUrl},author:{name:"Grafana Labs"},links:[{url:"/plugins/"+fe.id,name:"Install now",target:"_self"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}var j=e(96378),V=e(26025),_=e(34909);const H=fe=>{let ie,oe;return fe.error&&fe.error instanceof o.ZA?(ie=fe.error.message,oe=fe.error.details):(0,r.kW)(fe)?ie=fe.data.message??`HTTP error ${fe.statusText}`:fe instanceof Error&&(ie=fe.message),{message:ie,details:oe}},z=fe=>{const{details:ie,message:oe,status:ue}=fe;return{status:ue,message:oe,details:ie}},K=(fe,ie={loadDataSource:q,loadDataSourceMeta:X,getDataSource:_.f6,getDataSourceMeta:_.G4,importDataSourcePlugin:E.nL})=>async(oe,ue)=>{if(!fe){oe((0,V.CT)(new Error("Invalid UID")));return}try{const me=await oe(ie.loadDataSource(fe));await oe(ie.loadDataSourceMeta(me));const ge=ie.getDataSource(ue().dataSources,fe),Ue=ie.getDataSourceMeta(ue().dataSources,ge.type),De=await ie.importDataSourcePlugin(Ue);oe((0,V.iZ)(De))}catch(me){me instanceof Error&&oe((0,V.CT)(me))}},Y=(fe,ie=R.n.Edit,oe={getDatasourceSrv:d.ak,getBackendSrv:m.i})=>async(ue,me)=>{const ge=await oe.getDatasourceSrv().get(fe),Ue=ie.replace(/:uid/gi,fe);ge.testDatasource&&(ue((0,V.j_)()),oe.getBackendSrv().withNoBackendCache(async()=>{try{const De=await ge.testDatasource(),Pe=z({...De,details:{...De.details}});ue((0,V.ng)(Pe)),(0,O.Rw)({grafana_version:i.config.buildInfo.version,plugin_id:ge.type,datasource_uid:ge.uid,success:!0,path:Ue}),l.h$.publish(new n.U6)}catch(De){const Pe=H(De);ue((0,V.Aq)({...Pe})),(0,O.Rw)({grafana_version:i.config.buildInfo.version,plugin_id:ge.type,datasource_uid:ge.uid,success:!1,path:Ue}),l.h$.publish(new n._m)}}))};function k(){return async fe=>{if(!l.Vt.hasPermission(v.AccessControlAction.DataSourcesRead))return;fe((0,V.MP)());const ie=await s();fe((0,V.be)(ie))}}function q(fe){return async ie=>{let oe=await b(fe);return fe!==oe.uid&&(window.location.href=a.u.assureBaseUrl(`/datasources/edit/${oe.uid}`),oe={}),ie((0,V.rl)(oe)),oe}}function X(fe){return async ie=>{const oe=await(0,f.a)(fe.type),ue=await(0,E.nL)(oe),me=ue.DataSourceClass.prototype instanceof o.CK,ge={...oe,isBackend:oe.backend||me};ie((0,V.jS)(ge)),ue.meta=ge,ie((0,u.RL)((0,j.B1)(fe,ue)))}}function te(fe,ie=R.n.Edit){return async()=>{const oe={type:fe.id,access:"proxy"},ue=await S(oe),me=ie.replace(/:uid/gi,ue.datasource.uid);await(0,d.ak)().reload(),await l.Vt.fetchUserPermissions(),(0,O.Er)({grafana_version:i.config.buildInfo.version,plugin_id:fe.id,datasource_uid:ue.datasource.uid,plugin_version:ue.meta?.info?.version,path:me}),g.E1.push(me)}}function se(){return async fe=>{fe((0,V.Ww)());const ie=await D(),oe=L(ie);fe((0,V.wZ)({plugins:ie,categories:oe}))}}function de(fe){return async ie=>{try{await M(fe)}catch(oe){const ue=H(oe);return ie((0,V.Aq)(ue)),Promise.reject(fe)}return await(0,d.ak)().reload(),ie(q(fe.uid))}}function re(){return async(fe,ie)=>{const{uid:oe}=ie().dataSources.dataSource;try{await T(oe),await(0,d.ak)().reload();const ue=c.Z.DataSources;g.E1.push(ue)}catch(ue){const me=H(ue);fe((0,V.Aq)(me))}}}},24097:(G,A,e)=>{"use strict";e.d(A,{V:()=>o});var n=e(85960),a=e(96053);const o=(0,n.createContext)(a.n)},25393:(G,A,e)=>{"use strict";e.d(A,{E:()=>f,IA:()=>S,OU:()=>p,Qs:()=>D,YY:()=>T,_l:()=>M,d7:()=>R,hw:()=>E,nH:()=>s,q6:()=>C,qj:()=>y,wl:()=>b,zJ:()=>v});var n=e(85960),a=e(1992),o=e(60484),r=e(49683),i=e(95162),g=e(14914),u=e(31372),l=e(98642),m=e(24097),c=e(26025),d=e(34909);const f=O=>{const x=(0,i.useDispatch)();(0,n.useEffect)(()=>(x((0,l.M9)(O)),function(){x((0,a.e)({cleanupAction:L=>L.dataSourceSettings=c.fk}))}),[O,x])},E=O=>{const x=(0,i.useDispatch)(),I=R();return()=>x((0,l.kY)(O,I.Edit))},v=()=>{const O=(0,i.useDispatch)(),x=(0,i.useSelector)(L=>L.dataSources.isLoadingDataSources),I=(0,i.useSelector)(L=>L.dataSources.dataSources);return(0,n.useEffect)(()=>{O((0,l.bZ)())},[O]),{isLoading:x,dataSources:I}},h=O=>{const x=useDispatch();useEffect(()=>{x(loadDataSource(O))},[x,O])},p=()=>{const O=(0,i.useDispatch)();(0,n.useEffect)(()=>{O((0,l.Kj)())},[O])},s=()=>{const O=(0,i.useDispatch)(),x=R();return I=>{O((0,l.J_)(I,x.Edit))}},y=()=>{const O=(0,i.useDispatch)();return async x=>O((0,l.oe)(x))},C=()=>{const O=(0,i.useDispatch)(),{name:x}=(0,i.useSelector)(I=>I.dataSources.dataSource);return()=>{o.Z.publish(new g.VJ({title:"Delete",text:`Are you sure you want to delete the "${x}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>O((0,l.F5)())}))}},b=O=>(0,i.useSelector)(x=>(0,d.f6)(x.dataSources,O)),S=O=>{const x=b(O);return(0,u.i)(x)},D=O=>(0,i.useSelector)(x=>(0,d.G4)(x.dataSources,O)),M=()=>(0,i.useSelector)(O=>O.dataSourceSettings),T=O=>{const x=b(O),I=x.readOnly===!0,L=r.Vt.hasPermissionInMetadata(i.AccessControlAction.DataSourcesWrite,x),P=r.Vt.hasPermissionInMetadata(i.AccessControlAction.DataSourcesDelete,x);return{readOnly:I,hasWriteRights:L,hasDeleteRights:P}},R=()=>(0,n.useContext)(m.V)},80150:(G,A,e)=>{"use strict";e.d(A,{BX:()=>i.BX,E:()=>o.E,Ht:()=>i.Ht,I5:()=>g.I5,IA:()=>g.IA,IO:()=>g.IO,J_:()=>n.J_,Nu:()=>i.Nu,OU:()=>o.OU,Qs:()=>o.Qs,Rz:()=>o.IA,Vj:()=>a.V,YY:()=>o.YY,_l:()=>o._l,d7:()=>o.d7,hw:()=>o.hw,mt:()=>g.mt,nH:()=>o.nH,q6:()=>o.q6,qj:()=>o.qj,r7:()=>g.r7,rl:()=>i.rl,wl:()=>o.wl,yr:()=>i.yr,zJ:()=>o.zJ,zT:()=>i.zT});var n=e(98642),a=e(24097),o=e(25393),r=e(96378),i=e(26025),g=e(34909)},96378:(G,A,e)=>{"use strict";e.d(A,{B1:()=>m,nI:()=>c,xG:()=>d});var n=e(73667),a=e(11855),o=e(64582),r=e(67954),i=e(49683),g=e(3016),u=e(95162);const l="Loading";function m(E,v){const h=v.meta,p=r.default.featureToggles.featureHighlights,s={img:h.info.logos.large,id:"datasource-"+E.uid,url:"",text:E.name,children:[{active:!1,icon:"sliders-v-alt",id:`datasource-settings-${E.uid}`,text:"Settings",url:`datasources/edit/${E.uid}/`}]};if(v.configPages)for(const M of v.configPages)s.children.push({active:!1,text:M.title,icon:M.icon,url:`datasources/edit/${E.uid}/?page=${M.id}`,id:`datasource-page-${M.id}`});h.includes&&f(h.includes)&&i.Vt.hasRole("Admin")&&s.children.push({active:!1,icon:"apps",id:`datasource-dashboards-${E.uid}`,text:"Dashboards",url:`datasources/edit/${E.uid}/dashboards`});const y=E.type===l,C="feature-highlights-data-source-permissions-badge",b={active:!1,icon:"lock",id:`datasource-permissions-${E.uid}`,text:"Permissions",url:`datasources/edit/${E.uid}/permissions`};if((0,g.d5)()&&!y&&(b.tabSuffix=()=>(0,o.Z)({experimentId:C,eventVariant:"trial"})),(0,a.v)("dspermissions.enforcement")?i.Vt.hasPermissionInMetadata(u.AccessControlAction.DataSourcesPermissionsRead,E)&&s.children.push(b):p&&!y&&s.children.push({...b,url:b.url+"/upgrade",tabSuffix:()=>(0,o.Z)({experimentId:C})}),r.default.analytics?.enabled){const M="feature-highlights-data-source-insights-badge",T={active:!1,icon:"info-circle",id:`datasource-insights-${E.uid}`,text:"Insights",url:`datasources/edit/${E.uid}/insights`};(0,g.d5)()&&!y&&(T.tabSuffix=()=>(0,o.Z)({experimentId:M,eventVariant:"trial"})),(0,a.v)("analytics")?i.Vt.hasPermission(u.AccessControlAction.DataSourcesInsightsRead)&&s.children.push(T):p&&!y&&s.children.push({...T,url:T.url+"/upgrade",tabSuffix:()=>(0,o.Z)({experimentId:M})})}const S="feature-highlights-query-caching-badge",D={active:!1,icon:"database",id:`datasource-cache-${E.uid}`,text:"Cache",url:`datasources/edit/${E.uid}/cache`,hideFromTabs:!h.isBackend||!r.default.caching.enabled};return(0,g.d5)()&&!y&&(D.tabSuffix=()=>(0,o.Z)({experimentId:S,eventVariant:"trial"})),(0,a.v)("caching")?i.Vt.hasPermissionInMetadata(u.AccessControlAction.DataSourcesCachingRead,E)&&s.children.push(D):p&&!y&&s.children.push({...D,url:D.url+"/upgrade",tabSuffix:()=>(0,o.Z)({experimentId:S})}),s}function c(E,v){let h={text:""};for(const p of E.children)if(p.id.indexOf(v)>0){p.active=!0,h=p;break}return{main:E,node:h}}function d(E){const v=m({access:"",basicAuth:!1,basicAuthUser:"",withCredentials:!1,database:"",id:1,uid:"x",isDefault:!1,jsonData:{authType:"credentials",defaultRegion:"eu-west-2"},name:"Loading",orgId:1,readOnly:!1,type:l,typeName:l,typeLogoUrl:"public/img/icn-datasource.svg",url:"",user:"",secureJsonFields:{}},{meta:{id:"1",type:n.zV.datasource,name:"",info:{author:{name:"",url:""},description:"",links:[{name:"",url:""}],logos:{large:"",small:""},screenshots:[],updated:"",version:""},includes:[],module:"",baseUrl:""}});return c(v,E)}function f(E){return E.find(v=>v.type==="dashboard")!==void 0}},26025:(G,A,e)=>{"use strict";e.d(A,{Aq:()=>D,BX:()=>E,CT:()=>C,Ht:()=>f,MP:()=>i,Nu:()=>h,Ww:()=>l,ZP:()=>T,be:()=>g,fk:()=>s,iZ:()=>y,jS:()=>u,j_:()=>b,ng:()=>S,rl:()=>r,wZ:()=>m,yr:()=>v,zT:()=>c});var n=e(20079),a=e(76923);const o={dataSources:[],plugins:[],categories:[],dataSource:{},layoutMode:a.l.List,searchQuery:"",dataSourcesCount:0,dataSourceTypeSearchQuery:"",isLoadingDataSources:!1,isLoadingDataSourcePlugins:!1,dataSourceMeta:{},isSortAscending:!0},r=(0,n.PH)("dataSources/dataSourceLoaded"),i=(0,n.PH)("dataSources/dataSourcesLoad"),g=(0,n.PH)("dataSources/dataSourcesLoaded"),u=(0,n.PH)("dataSources/dataSourceMetaLoaded"),l=(0,n.PH)("dataSources/dataSourcePluginsLoad"),m=(0,n.PH)("dataSources/dataSourcePluginsLoaded"),c=(0,n.PH)("dataSources/setDataSourcesSearchQuery"),d=(0,n.PH)("dataSources/setDataSourcesLayoutMode"),f=(0,n.PH)("dataSources/setDataSourceTypeSearchQuery"),E=(0,n.PH)("dataSources/setDataSourceName"),v=(0,n.PH)("dataSources/setIsDefault"),h=(0,n.PH)("dataSources/setIsSortAscending"),p=(R=o,O)=>i.match(O)?{...R,isLoadingDataSources:!0}:g.match(O)?{...R,isLoadingDataSources:!1,dataSources:O.payload,dataSourcesCount:O.payload.length}:r.match(O)?{...R,dataSource:O.payload}:c.match(O)?{...R,searchQuery:O.payload}:d.match(O)?{...R,layoutMode:O.payload}:l.match(O)?{...R,plugins:[],isLoadingDataSourcePlugins:!0}:m.match(O)?{...R,plugins:O.payload.plugins,categories:O.payload.categories,isLoadingDataSourcePlugins:!1}:f.match(O)?{...R,dataSourceTypeSearchQuery:O.payload}:u.match(O)?{...R,dataSourceMeta:O.payload}:E.match(O)?{...R,dataSource:{...R.dataSource,name:O.payload}}:v.match(O)?{...R,dataSource:{...R.dataSource,isDefault:O.payload}}:h.match(O)?{...R,isSortAscending:O.payload}:R,s={testingStatus:{},loadError:null,loading:!0,plugin:null},y=(0,n.PH)("dataSourceSettings/initDataSourceSettingsSucceeded"),C=(0,n.PH)("dataSourceSettings/initDataSourceSettingsFailed"),b=(0,n.PH)("dataSourceSettings/testDataSourceStarting"),S=(0,n.PH)("dataSourceSettings/testDataSourceSucceeded"),D=(0,n.PH)("dataSourceSettings/testDataSourceFailed"),T={dataSources:p,dataSourceSettings:(R=s,O)=>y.match(O)?{...R,plugin:O.payload,loadError:null,loading:!1}:C.match(O)?{...R,plugin:null,loadError:O.payload.message,loading:!1}:b.match(O)?{...R,testingStatus:{message:"Testing... this could take up to a couple of minutes",status:"info"}}:S.match(O)?{...R,testingStatus:{status:O.payload?.status,message:O.payload?.message,details:O.payload?.details}}:D.match(O)?{...R,testingStatus:{status:"error",message:O.payload?.message,details:O.payload?.details}}:R}},34909:(G,A,e)=>{"use strict";e.d(A,{G4:()=>i,I5:()=>o,IA:()=>m,IO:()=>g,f6:()=>r,mt:()=>a,r7:()=>l});var n=e(84513);const a=(0,n.Z)(c=>{const d=new RegExp(c.searchQuery,"i");return c.dataSources.filter(E=>d.test(E.name)||d.test(E.database)||d.test(E.type)).sort((E,v)=>c.isSortAscending?E.name.localeCompare(v.name):v.name.localeCompare(E.name))}),o=(0,n.Z)(c=>{const d=new RegExp(c.dataSourceTypeSearchQuery,"i");return c.plugins.filter(f=>d.test(f.name))}),r=(c,d)=>c.dataSource.uid===d?c.dataSource:{},i=(c,d)=>c.dataSourceMeta.id===d?c.dataSourceMeta:{},g=c=>c.searchQuery,u=c=>c.layoutMode,l=c=>c.dataSourcesCount,m=c=>c.isSortAscending},58757:(G,A,e)=>{"use strict";e.d(A,{Er:()=>a,Rw:()=>o,U4:()=>r,aL:()=>l,dF:()=>g,hJ:()=>i,ij:()=>u});var n=e(43183);const a=m=>{(0,n.ff)("grafana_ds_add_datasource_clicked",m)},o=m=>{(0,n.ff)("grafana_ds_test_datasource_clicked",m)},r=m=>{(0,n.ff)("grafana_ds_explore_datasource_clicked",m)},i=m=>{(0,n.ff)("grafana_ds_create_dashboard_clicked",m)},g=m=>{(0,n.ff)("grafana_ds_datasources_list_viewed",m)},u=m=>{(0,n.ff)("connections_datasources_settings_clicked",{item:m})},l=m=>{(0,n.ff)("connections_datasources_ds_configured",m)}},31372:(G,A,e)=>{"use strict";e.d(A,{i:()=>o});var n=e(173),a=e(12693);const o=r=>{const i=JSON.stringify({datasource:r.name,context:"explore"});return n.Cj.renderUrl(a.u.assureBaseUrl("/explore"),{left:i})}},4840:()=>{"use strict"},86855:(G,A,e)=>{"use strict";e.d(A,{L:()=>l});var n=e(66681),a=e(85960),o=e(47257),r=e(27436),i=e(38276),g=e(60190);const u={label:"Fixed color",value:"_____fixed_____"},l=c=>{const{value:d,context:f,onChange:E}=c,v="dark-green",h=(0,o.wW)(m),p=d?.field,s=!p,y=(0,g.IX)(f.data),C=(0,g.nw)(y,p,u),b=(0,a.useCallback)(M=>{const T=M.value;if(T&&T!==u.value)E({...d,field:T});else{const R=d?.fixed??v;E({...d,field:void 0,fixed:R})}},[E,d]),S=(0,a.useCallback)(M=>{E({field:void 0,fixed:M??v})},[E]),D=s?u:C.find(M=>M.value===p);return a.createElement(a.Fragment,null,a.createElement("div",{className:h.container},a.createElement(r.Ph,{value:D,options:C,onChange:b,noOptionsMessage:"No fields found"}),s&&a.createElement("div",{className:h.picker},a.createElement(i.zH,{color:d?.fixed??v,onChange:S,enableNamedColors:!0}))))},m=c=>({container:(0,n.css)`
    display: flex;
    flex-wrap: nowrap;
    justify-content: flex-end;
    align-items: center;
  `,picker:(0,n.css)`
    padding-left: 8px;
  `})},36647:(G,A,e)=>{"use strict";e.d(A,{E:()=>h});var n=e(66681),a=e(85960),o=e(47257),r=e(29165),i=e(81368),g=e(84933),u=e(24956),l=e(55135),m=e(51928),c=e(73088),d=e(91861),f=e(10718),E=e(55351),v=e(71495);const h=y=>{const{value:C,src:b,name:S,placeholder:D,onChange:M,onClear:T,mediaType:R,folderName:O,size:x,color:I,maxFiles:L}=y,P=(0,o.wW)(s),N=(0,o.l4)(),F=(0,a.createRef)(),U=a.createElement(v.Y,{onChange:M,value:C,mediaType:R,folderName:O,maxFiles:L});let j=b;!j&&C&&(j=(0,f.t)(C));const V=I&&{fill:N.visualization.getColorByName(I)},_=()=>C&&j?a.createElement(d.V,{src:j,className:P.icon,style:{...V}}):a.createElement(r.Qj,{variant:"primary",fill:"text",size:"sm"},"Set icon"),H=()=>a.createElement(i.Z,null,a.createElement(g._,{label:null,grow:!0},a.createElement(u.I,{value:p(b,S),placeholder:D,readOnly:!0,prefix:j&&a.createElement(d.V,{src:j,className:P.icon,style:{...V}}),suffix:a.createElement(r.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:T})})));return a.createElement(l.D,{content:U},(z,K,Y)=>a.createElement(a.Fragment,null,F.current&&a.createElement(m.J,{...Y,referenceElement:F.current,onMouseEnter:z,onKeyDown:k=>{(0,c.i)(k,K)}}),a.createElement("div",{ref:F,className:P.pointer,onClick:z,onKeyDown:k=>{k.key==="Enter"&&z()},role:"button",tabIndex:0},x===E.zc.SMALL&&_(),x===E.zc.NORMAL&&H())))};function p(y,C){if(y?.startsWith("public/img/icons")){const b=C?.lastIndexOf(".svg")??0;if(b>0)return C.substring(0,b)}return C}const s=y=>({pointer:(0,n.css)`
    cursor: pointer;
    input[readonly] {
      cursor: pointer;
    }
  `,icon:(0,n.css)`
    vertical-align: middle;
    display: inline-block;
    fill: currentColor;
    width: 25px;
  `})},71495:(G,A,e)=>{"use strict";e.d(A,{Y:()=>j});var n=e(66681),a=e(57529),o=e(89344),r=e(48925),i=e(85960),g=e(85445),u=e(47257),l=e(29165),m=e(67954),c=e(55351),d=e(20519),f=e(85447),E=e(91861);function v({secondaryText:_="Drag and drop here or browse"}){const H=(0,u.wW)(p);return i.createElement("div",{className:H.iconWrapper},i.createElement("small",{className:H.small},_),i.createElement(l.zx,{type:"button",icon:"upload"},"Upload"))}const h=({mediaType:_,setFormData:H,setUpload:z,error:K})=>{const Y=(0,u.wW)(p),[k,q]=(0,i.useState)(!1),[X,te]=(0,i.useState)(""),se=()=>i.createElement(d.g,{label:"Preview"},i.createElement("div",{className:Y.iconPreview},_===c.DD.Icon&&i.createElement(E.V,{src:X,className:Y.img}),_===c.DD.Image&&i.createElement("img",{src:X,alt:"Preview of the uploaded file",className:Y.img}))),de=fe=>{fetch(`/api/storage/delete/upload/${fe.file.name}`,{method:"DELETE"}).catch(ie=>console.error("cannot delete file",ie))},re=_==="icon"?{"image/*":[".svg",".xml"]}:{"image/*":[".jpeg",".png",".gif",".webp"]};return i.createElement(f.Yo,{readAs:"readAsBinaryString",onFileRemove:de,options:{accept:re,multiple:!1,onDrop:fe=>{let ie=new FormData;ie.append("file",fe[0]),te(URL.createObjectURL(fe[0])),q(!0),H(ie),z(!0)}}},K.message!==""&&k?i.createElement("p",null,K.message):k?i.createElement(se,null):i.createElement(v,null))};function p(_,H){return{container:(0,n.css)`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:(0,n.css)`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${_.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${_.colors.border.medium};
      background-color: ${H?_.colors.background.secondary:_.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:(0,n.css)`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:(0,n.css)`
      margin: ${_.spacing(2,0,1)};
    `,small:(0,n.css)`
      color: ${_.colors.text.secondary};
      margin-bottom: ${_.spacing(2)};
    `,iconContainer:(0,n.css)`
      display: flex;
      flex-direction: column;
      width: 80%;
      align-items: center;
      align-self: center;
    `,iconPreview:(0,n.css)`
      width: 238px;
      height: 198px;
      border: 1px solid ${_.colors.border.medium};
      display: flex;
      align-items: center;
      justify-content: center;
    `,img:(0,n.css)`
      width: 147px;
      height: 147px;
      fill: ${_.colors.text.primary};
    `}}var s=e(27436),y=e(96535),C=e(65512),b=e(53565),S=e(403);const D=(0,i.memo)(function(H){const{columnIndex:z,rowIndex:K,style:Y,data:k}=H,{cards:q,columnCount:X,onChange:te,selected:se}=k,de=z+K*X,re=q[de],fe=(0,u.wW)(T);return i.createElement("div",{style:Y},re&&i.createElement("div",{key:re.value,className:se===re.value?(0,n.cx)(fe.card,fe.selected):fe.card,onClick:()=>te(re.value),onKeyDown:ie=>{ie.key==="Enter"&&te(re.value)},role:"button",tabIndex:0},re.imgUrl.endsWith(".svg")?i.createElement(E.V,{src:re.imgUrl,className:fe.img}):i.createElement("img",{src:re.imgUrl,alt:"",className:fe.img}),i.createElement("h6",{className:fe.text},re.label.slice(0,-4))))},S.wy),M=_=>{const{onChange:H,cards:z,value:K}=_,Y=(0,u.wW)(T);return i.createElement(b.Z,{defaultWidth:680},({width:k,height:q})=>{const se=Math.floor(k/90),de=Math.ceil(z.length/se);return i.createElement(S.Ym,{width:k,height:q,columnCount:se,columnWidth:90,rowCount:de,rowHeight:90,itemData:{cards:z,columnCount:se,onChange:H,selected:K},className:Y.grid},D)})},T=_=>({card:(0,n.css)`
    display: inline-block;
    width: 90px;
    height: 90px;
    margin: 0.75rem;
    margin-left: 15px;
    text-align: center;
    cursor: pointer;
    position: relative;
    background-color: transparent;
    border: 1px solid transparent;
    border-radius: 8px;
    padding-top: 6px;
    :hover {
      border-color: ${_.colors.action.hover};
      box-shadow: ${_.shadows.z2};
    }
  `,selected:(0,n.css)`
    border: 2px solid ${_.colors.primary.main};
    :hover {
      border-color: ${_.colors.primary.main};
    }
  `,img:(0,n.css)`
    width: 40px;
    height: 40px;
    object-fit: cover;
    vertical-align: middle;
    fill: ${_.colors.text.primary};
  `,text:(0,n.css)`
    color: ${_.colors.text.primary};
    white-space: nowrap;
    font-size: 12px;
    text-overflow: ellipsis;
    display: block;
    overflow: hidden;
  `,grid:(0,n.css)`
    border: 1px solid ${_.colors.border.medium};
  `}),R=_=>_===c.DD.Icon?[c.QS.Icon,c.QS.IOT,c.QS.Marker]:[c.QS.BG],O=(_,H)=>_.find(z=>H.startsWith(z.value))??_[0],x=_=>{const{value:H,mediaType:z,folderName:K,newValue:Y,setNewValue:k,maxFiles:q}=_,X=(0,u.wW)(I),te=R(z).map(Ue=>({label:Ue,value:Ue})),[se,de]=(0,i.useState)(),[re,fe]=(0,i.useState)(O(te,H?.length?H:K)),[ie,oe]=(0,i.useState)([]),[ue,me]=(0,i.useState)([]),ge=Ue=>{Ue?(Ue=Ue.toLowerCase(),me(ie.filter(De=>De.search.includes(Ue)))):me(ie)};return(0,i.useEffect)(()=>{const Ue=re?.value;if(Ue){const De=z===c.DD.Icon?Pe=>Pe.name.endsWith(".svg"):Pe=>Pe.name.endsWith(".png")||Pe.name.endsWith(".gif");(0,C.ak)().get("-- Grafana --").then(Pe=>{Pe.listFiles(Ue,q).subscribe({next:ye=>{const Te=[];ye.forEach(nt=>{if(De(nt)){const ct=nt.name.lastIndexOf(".");Te.push({value:`${Ue}/${nt.name}`,label:nt.name,search:(ct?nt.name.substring(0,ct):nt.name).toLowerCase(),imgUrl:`public/${Ue}/${nt.name}`})}}),oe(Te),me(Te)}})})}},[z,re,q]),i.createElement(i.Fragment,null,i.createElement(d.g,null,i.createElement(s.Ph,{options:te,onChange:fe,value:re,menuShouldPortal:!1})),i.createElement(d.g,null,i.createElement(y.H,{value:se??"",placeholder:"Search",onChange:Ue=>{ge(Ue),de(Ue)}})),ue&&i.createElement("div",{className:X.cardsWrapper},i.createElement(M,{cards:ue,onChange:Ue=>k(Ue),value:Y})))},I=_=>({cardsWrapper:(0,n.css)`
    height: 30vh;
    min-height: 50px;
    margin-top: 5px;
    max-width: 680px;
  `});var L=e(24956),P=e(57445),N=e(10718);const F=_=>{const{newValue:H,setNewValue:z,mediaType:K}=_,Y=(0,u.wW)(U),k=(0,N.t)(H);let q=H?.substring(H.lastIndexOf("/")+1,H.lastIndexOf("."));return q.length>20&&(q=q.substring(0,20)+"..."),i.createElement(i.Fragment,null,i.createElement(d.g,null,i.createElement(L.I,{onChange:X=>z(X.currentTarget.value),value:H})),i.createElement("div",{className:Y.iconContainer},i.createElement(d.g,{label:"Preview"},i.createElement("div",{className:Y.iconPreview},K===c.DD.Icon&&i.createElement(E.V,{src:k,className:Y.img}),K===c.DD.Image&&H&&i.createElement("img",{src:k,alt:"Preview of the selected URL",className:Y.img}))),i.createElement(P._,null,q)))},U=_=>({iconContainer:(0,n.css)`
    display: flex;
    flex-direction: column;
    width: 80%;
    align-items: center;
    align-self: center;
  `,iconPreview:(0,n.css)`
    width: 238px;
    height: 198px;
    border: 1px solid ${_.colors.border.medium};
    display: flex;
    align-items: center;
    justify-content: center;
  `,img:(0,n.css)`
    width: 147px;
    height: 147px;
    fill: ${_.colors.text.primary};
  `}),j=_=>{const{value:H,onChange:z,mediaType:K,folderName:Y,maxFiles:k}=_,q=(0,u.wW)(V),X=()=>{z(H)},te=(0,i.createRef)(),{dialogProps:se}=(0,a.R)({},te),{overlayProps:de}=(0,r.Ir)({onClose:X,isDismissable:!0,isOpen:!0},te),re=H&&H.includes("://"),[fe,ie]=(0,i.useState)(H??""),[oe,ue]=(0,i.useState)(re?c.hQ.URL:c.hQ.Folder),[me,ge]=(0,i.useState)(new FormData),[Ue,De]=(0,i.useState)(!1),[Pe,ye]=(0,i.useState)({message:""}),Te=Me=>`${q.resourcePickerPopoverTab} ${oe===Me&&q.resourcePickerPopoverActiveTab}`,nt=()=>i.createElement(x,{value:H,mediaType:K,folderName:Y,newValue:fe,setNewValue:ie,maxFiles:k}),ct=()=>i.createElement(F,{newValue:fe,setNewValue:ie,mediaType:K}),he=()=>i.createElement(h,{mediaType:K,setFormData:ge,setUpload:De,newValue:fe,error:Pe}),xe=()=>{switch(oe){case c.hQ.Folder:return nt();case c.hQ.URL:return ct();case c.hQ.Upload:return he();default:return nt()}};return i.createElement(o.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("section",{ref:te,...de,...se},i.createElement("div",{className:q.resourcePickerPopover},i.createElement("div",{className:q.resourcePickerPopoverTabs},i.createElement("button",{className:Te(c.hQ.Folder),onClick:()=>ue(c.hQ.Folder)},"Folder"),i.createElement("button",{className:Te(c.hQ.URL),onClick:()=>ue(c.hQ.URL)},"URL")),i.createElement("div",{className:q.resourcePickerPopoverContent},xe(),i.createElement("div",{className:q.buttonRow},i.createElement(l.zx,{variant:"secondary",onClick:()=>X(),fill:"outline"},"Cancel"),i.createElement(l.zx,{variant:fe&&fe!==H?"primary":"secondary",onClick:()=>{Ue?fetch("/api/storage/upload",{method:"POST",body:me}).then(Me=>{if(Me.status>=400){Me.json().then(He=>ye(He));return}else return Me.json()}).then(Me=>{(0,g.i)().get(`api/storage/read/${Me.path}`).then(()=>ie(`${m.config.appUrl}api/storage/read/${Me.path}`)).then(()=>z(`${m.config.appUrl}api/storage/read/${Me.path}`))}).catch(Me=>console.error(Me)):z(fe)}},"Select"))))))},V=_=>({resourcePickerPopover:(0,n.css)`
    border-radius: ${_.shape.radius.default};
    box-shadow: ${_.shadows.z3};
    background: ${_.colors.background.primary};
    border: 1px solid ${_.colors.border.weak};
  `,resourcePickerPopoverTab:(0,n.css)`
    width: 50%;
    text-align: center;
    padding: ${_.spacing(1,0)};
    background: ${_.colors.background.secondary};
    color: ${_.colors.text.secondary};
    font-size: ${_.typography.bodySmall.fontSize};
    cursor: pointer;
    border: none;

    &:focus:not(:focus-visible) {
      outline: none;
      box-shadow: none;
    }

    :focus-visible {
      position: relative;
    }
  `,resourcePickerPopoverActiveTab:(0,n.css)`
    color: ${_.colors.text.primary};
    font-weight: ${_.typography.fontWeightMedium};
    background: ${_.colors.background.primary};
  `,resourcePickerPopoverContent:(0,n.css)`
    width: 315px;
    font-size: ${_.typography.bodySmall.fontSize};
    min-height: 184px;
    padding: ${_.spacing(1)};
    display: flex;
    flex-direction: column;
  `,resourcePickerPopoverTabs:(0,n.css)`
    display: flex;
    width: 100%;
    border-radius: ${_.shape.radius.default} ${_.shape.radius.default} 0 0;
  `,buttonRow:(0,n.css)({display:"flex",justifyContent:"center",gap:_.spacing(2),padding:_.spacing(1)})})},12457:(G,A,e)=>{"use strict";e.d(A,{$:()=>f});var n=e(85960),a=e(1713),o=e(81368),r=e(84933),i=e(5106),g=e(29165),u=e(53231),l=e(13094);const m=[{label:"Fixed",value:a.xy.Fixed,description:"Fixed value"},{label:"Field",value:a.xy.Field,description:"Display field value"}],c={settings:{}},d={settings:{}},f=({value:E,context:v,onChange:h})=>{const s=(0,n.useCallback)(D=>{h({...E,mode:D})},[h,E]),y=(0,n.useCallback)(D=>{h({...E,field:D})},[h,E]),C=(0,n.useCallback)((D="")=>{h({...E,fixed:D})},[h,E]),b=()=>{C("")},S=E?.mode??a.xy.Fixed;return n.createElement(n.Fragment,null,n.createElement(o.Z,null,n.createElement(r._,{label:"Source",labelWidth:9,grow:!0},n.createElement(i.S,{value:S,options:m,onChange:s,fullWidth:!0}))),S!==a.xy.Fixed&&n.createElement(o.Z,null,n.createElement(r._,{label:"Field",labelWidth:9,grow:!0},n.createElement(u.b,{context:v,value:E.field??"",onChange:y,item:c}))),S===a.xy.Fixed&&n.createElement(o.Z,{key:E?.fixed},n.createElement(r._,{label:"Value",labelWidth:9,grow:!0},n.createElement(l.A,{context:v,value:E?.fixed,onChange:C,item:d,suffix:E?.fixed&&n.createElement(g.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:b})}))),S===a.xy.Template&&n.createElement(o.Z,null,n.createElement(r._,{label:"Template",labelWidth:9,grow:!0},n.createElement(l.A,{context:v,value:E?.fixed,onChange:C,item:d}))))}},1431:(G,A,e)=>{"use strict";e.d(A,{Lm:()=>n.L,Lv:()=>h,k9:()=>L,cL:()=>T,$2:()=>N.$});var n=e(86855),a=e(85960);const o=({value:F,onChange:U})=>{const[j,V]=useState(F?[{value:F,label:F}]:[]),[_,H]=useState(),z=window.__grafana_public_path__+"img/icons/unicons/",K=Y=>{U(Y),H(Y)};return useEffect(()=>{getBackendSrv().get(`${z}/index.json`).then(Y=>{V(Y.files.map(k=>({value:k,label:k})))})},[z]),React.createElement(Select,{options:j,value:_,onChange:Y=>{K(Y.value)}})},r=null;var i=e(1713),g=e(81368),u=e(84933),l=e(5106),m=e(53231),c=e(73115),d=e(55351),f=e(36647);const E=[{label:"Fixed",value:i.Q8.Fixed,description:"Fixed value"},{label:"Field",value:i.Q8.Field,description:"Use a string field result"}],v={settings:{}},h=F=>{const{value:U,context:j,onChange:V,item:_}=F,H=9,z=(0,a.useCallback)(fe=>{V({...U,mode:fe})},[V,U]),K=(0,a.useCallback)((fe="")=>{V({...U,field:fe})},[V,U]),Y=(0,a.useCallback)(fe=>{V({...U,fixed:fe??""})},[V,U]),k=fe=>{fe.stopPropagation(),V({mode:i.Q8.Fixed,fixed:"",field:""})},q=U?.mode??i.Q8.Fixed,X=_.settings?.showSourceRadio??!0,te=_.settings?.resourceType??d.DD.Icon,se=_.settings?.folderName??c.ResourceFolderName.Icon,de=_.settings?.maxFiles;let re="";return te===d.DD.Icon&&(U?.fixed?re=(0,c.getPublicOrAbsoluteUrl)(U.fixed):_.settings?.placeholderValue&&(re=(0,c.getPublicOrAbsoluteUrl)(_.settings.placeholderValue))),a.createElement(a.Fragment,null,X&&a.createElement(g.Z,null,a.createElement(u._,{label:"Source",labelWidth:H,grow:!0},a.createElement(l.S,{value:q,options:E,onChange:z,fullWidth:!0}))),q!==i.Q8.Fixed&&a.createElement(g.Z,null,a.createElement(u._,{label:"Field",labelWidth:H,grow:!0},a.createElement(m.b,{context:j,value:U.field??"",onChange:K,item:v}))),q===i.Q8.Fixed&&a.createElement(f.E,{onChange:Y,onClear:k,value:U?.fixed,src:re,placeholder:_.settings?.placeholderText??"Select a value",name:p(U?.fixed)??"",mediaType:te,folderName:se,size:d.zc.NORMAL,maxFiles:de}),q===i.Q8.Mapping&&a.createElement(g.Z,null,a.createElement(u._,{label:"Mappings",labelWidth:H,grow:!0},a.createElement("div",null,"TODO mappings editor!"))))};function p(F){if(!F)return;const U=F.lastIndexOf("/");return U>0?F.substring(U+1):F}var s=e(66681),y=e(47257),C=e(27436),b=e(60190),S=e(98050),D=e(66414);const M={label:"Fixed value",value:"_____fixed_____"},T=F=>{const{value:U,context:j,onChange:V,item:_}=F,{settings:H}=_,z=(0,y.wW)(R),K=U?.field,Y=!K,k=(0,b.IX)(j.data),q=(0,b.nw)(k,K,M),X=(0,a.useMemo)(()=>(0,D.x5)(H),[H]),te=(0,a.useCallback)(ue=>{V((0,D.C)(ue,X))},[V,X]),se=(0,a.useCallback)(ue=>{const me=ue.value;me&&me!==M.value?te({...U,field:me}):te({...U,field:void 0})},[te,U]),de=(0,a.useCallback)(ue=>{ue!==void 0&&te({...U,min:ue})},[te,U]),re=(0,a.useCallback)(ue=>{ue!==void 0&&te({...U,max:ue})},[te,U]),fe=(0,a.useCallback)(ue=>{ue!==void 0&&te({...U,fixed:ue})},[te,U]),ie=U??{},oe=Y?M:q.find(ue=>ue.value===K);return a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement(C.Ph,{value:oe,options:q,onChange:se,noOptionsMessage:"No fields found"})),a.createElement("div",{className:z.range},Y&&a.createElement(g.Z,null,a.createElement(u._,{label:"Value",labelWidth:8,grow:!0},a.createElement(S.Y,{value:ie.fixed,...X,onChange:fe}))),!Y&&!X.hideRange&&a.createElement(a.Fragment,null,a.createElement(g.Z,null,a.createElement(u._,{label:"Min",labelWidth:8,grow:!0},a.createElement(S.Y,{value:ie.min,...X,onChange:de}))),a.createElement(g.Z,null,a.createElement(u._,{label:"Max",labelWidth:8,grow:!0},a.createElement(S.Y,{value:ie.max,...X,onChange:re}))))))},R=F=>({range:(0,s.css)`
    padding-top: 8px;
  `});var O=e(58309);const x={label:"Fixed value",value:"_____fixed_____"},I=[{label:"Mod",value:i.eK.Mod,description:"Use field values, mod from max"},{label:"Clamped",value:i.eK.Clamped,description:"Use field values, clamped to max and min"}],L=({value:F,context:U,onChange:j,item:V})=>{const{settings:_}=V,H=0,z=F?.field,K=!z,Y=(0,b.IX)(U.data),k=(0,b.nw)(Y,z,x,O.fS.number),q=(0,y.wW)(P),X=(0,a.useCallback)(ie=>{const oe=ie.value;if(oe&&oe!==x.value)j({...F,field:oe});else{const ue=F.fixed??H;j({...F,field:void 0,fixed:ue})}},[j,F]),te=(0,a.useCallback)(ie=>{j({...F,mode:ie})},[j,F]),se=(0,a.useCallback)(ie=>{j({...F,field:void 0,fixed:ie??H})},[j,F]),de=F??{},re=F?.mode??i.eK.Mod,fe=K?x:k.find(ie=>ie.value===z);return a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement(g.Z,null,a.createElement(u._,{label:"Limit",labelWidth:8,grow:!0},a.createElement(l.S,{value:re,options:I,onChange:te,fullWidth:!0}))),a.createElement(C.Ph,{value:fe,options:k,onChange:X,noOptionsMessage:"No fields found"})),a.createElement("div",{className:q.range},K&&a.createElement(g.Z,null,a.createElement(u._,{label:"Value",labelWidth:8,grow:!0},a.createElement(S.Y,{value:de?.fixed??H,onChange:se,max:_?.max,min:_?.min})))))},P=F=>({range:(0,s.css)`
    padding-top: 8px;
  `});var N=e(12457)},73115:(G,A,e)=>{"use strict";e.d(A,{MediaType:()=>n.DD,ResourceFolderName:()=>n.QS,findField:()=>i.PI,findFieldIndex:()=>i.rj,getColorDimension:()=>g,getPublicOrAbsoluteUrl:()=>v.t,getResourceDimension:()=>v.I,getScalarDimension:()=>p.y,getScaledDimension:()=>l.W8,getScaledDimensionForField:()=>l.A,getTextDimension:()=>f});var n=e(55351),a=e(73859),o=e(72211),r=e(64282),i=e(46046);function g(s,y,C){return u((0,i.PI)(s,y.field),y,C)}function u(s,y,C){if(!s){const D=C.visualization.getColorByName(y.fixed??"grey");return{isAssumed:!!y.field?.length||!y.fixed,fixed:D,value:()=>D,get:M=>D}}const b=(0,a.fD)(s);if(b.isByValue||s.config.mappings?.length){const D=(0,o.xD)(s,!0);D!==s.config&&(s={...s,config:D},s.state=void 0);const M=(0,r.U)({field:s,theme:C}),T=R=>M(R).color??"#ccc";return{field:s,get:R=>T(s.values[R]),value:()=>T((0,i.cR)(s))}}const S=b.getCalculator(s,C)(0,0);return{fixed:S,value:()=>S,get:D=>S,field:s}}var l=e(66414),m=e(58309),c=e(1930),d=e(1713);function f(s,y){const C=y.field?(0,i.PI)(s,y.field):s?.fields.find(b=>b.type===m.fS.string);return E(C,y)}function E(s,y){let C=y.fixed;const b=y.mode??d.xy.Fixed;if(b===d.xy.Fixed)return{isAssumed:!C,fixed:C,value:()=>C,get:D=>C};if(b===d.xy.Template){const D=M=>`TEMPLATE[${y.fixed} // ${M}]`;return s?{field:s,get:M=>D(s.values[M]),value:()=>D((0,i.cR)(s))}:(C=D(""),{isAssumed:!0,fixed:C,value:()=>C,get:M=>C})}if(!s)return{isAssumed:!0,fixed:C,value:()=>C,get:D=>C};let S=D=>(0,c.zc)(s.display(D));return{field:s,get:D=>S(s.values[D]),value:()=>S((0,i.cR)(s))}}var v=e(10718),h=e(4840),p=e(98298)},10718:(G,A,e)=>{"use strict";e.d(A,{I:()=>r,t:()=>o});var n=e(1713),a=e(46046);function o(i){return i?i.indexOf(":/")>0?i:window.__grafana_public_path__+i:""}function r(i,g){const u=g.mode??n.Q8.Fixed;if(u===n.Q8.Fixed){const c=o(g.fixed);return{isAssumed:!c,fixed:c,value:()=>c,get:d=>c}}const l=(0,a.PI)(i,g.field);if(!l){const c="";return{isAssumed:!0,fixed:c,value:()=>c,get:d=>c}}if(u===n.Q8.Mapping){const c=d=>o(`${d}`);return{field:l,get:d=>c(l.values[d]),value:()=>c((0,a.cR)(l))}}const m=c=>{if(l&&l.display){const d=l.display(c).icon;return o(d??"")}return""};return{field:l,get:c=>m(l.values[c]),value:()=>m((0,a.cR)(l))}}},98298:(G,A,e)=>{"use strict";e.d(A,{y:()=>o});var n=e(1713),a=e(46046);function o(i,g){return r((0,a.PI)(i,g?.field),g)}function r(i,g){if(!i){const m=g.fixed??0;return{isAssumed:!!g.field?.length||!g.fixed,fixed:m,value:()=>m,get:()=>m}}let u=m=>m%g.max;return g.mode===n.eK.Clamped&&(u=m=>m<g.min?g.min:m>g.max?g.max:m),{field:i,get:m=>{const c=i.values[m];return c===null||typeof c!="number"?0:u(c)},value:()=>(0,a.cR)(i)}}},66414:(G,A,e)=>{"use strict";e.d(A,{A:()=>i,C:()=>u,W8:()=>r,x5:()=>g});var n=e(72211),a=e(1713),o=e(46046);function r(l,m){return i((0,o.PI)(l,m?.field),m)}function i(l,m,c){if(!l){const p=m.fixed??0;return{isAssumed:!!m.field?.length||!m.fixed,fixed:p,value:()=>p,get:()=>p}}const d=(0,n.dz)(l),f=m.max-m.min;if(l.values.length<1||f<=0||d.delta<=0)return{fixed:m.min,value:()=>m.min,get:()=>m.min};let v=p=>m.min+p*f;if(c===a.B5.Quad){const p=Math.PI*(m.max/2)**2,s=Math.PI*(m.min/2)**2,y=p-s;v=C=>{let b=s+y*C;return Math.sqrt(b/Math.PI)*2}}const h=p=>{const s=l.values[p];let y=0;return s!==-1/0&&(y=(s-d.min)/d.delta),y>1?y=1:y<0&&(y=0),v(y)};return{get:h,value:()=>h((0,o.cR)(l)),field:l}}function g(l){return l||(l={min:0,max:1}),l.min==null&&(l.min=0),l.max==null&&(l.max=1),l}function u(l,m){let{min:c,max:d}=g(m);if(l||(l={}),l.max==null&&(l.max=d),l.min==null&&(l.min=c),l.min>l.max){const f=l.max;l.max=l.min,l.min=f}return l.min<c&&(l.min=c),l.max>d&&(l.max=d),l.fixed==null&&(l.fixed=l.min+(l.max-l.min)/2),l.field||(l.fixed>d?l.fixed=d:l.fixed<c&&(l.fixed=c)),l}},55351:(G,A,e)=>{"use strict";e.d(A,{DD:()=>r,QS:()=>o,hQ:()=>i,qj:()=>a,zc:()=>g});var n=e(1713);const a=Object.freeze({fixed:"",mode:n.xy.Field,field:""});var o=(u=>(u.Icon="img/icons/unicons",u.IOT="img/icons/iot",u.Marker="img/icons/marker",u.BG="img/bg",u))(o||{}),r=(u=>(u.Icon="icon",u.Image="image",u))(r||{}),i=(u=>(u.Folder="folder",u.URL="url",u.Upload="upload",u))(i||{}),g=(u=>(u.SMALL="small",u.NORMAL="normal",u))(g||{})},46046:(G,A,e)=>{"use strict";e.d(A,{FP:()=>g,PI:()=>d,Qz:()=>m,WO:()=>c,cR:()=>E,pb:()=>u,rj:()=>f,z2:()=>l});var n=e(94372),a=e(16515),o=e(90857),r=e(73115),i=e(98298);function g(v,h){if(v?.series&&h.field)for(const p of v.series){const s=(0,r.getColorDimension)(p,h,o.config.theme2);if(!s.isAssumed||v.series.length===1)return s}return(0,r.getColorDimension)(void 0,h,o.config.theme2)}function u(v,h){if(v?.series&&h.field)for(const p of v.series){const s=(0,r.getScaledDimension)(p,h);if(!s.isAssumed||v.series.length===1)return s}return(0,r.getScaledDimension)(void 0,h)}function l(v,h){if(v?.series&&h.field)for(const p of v.series){const s=(0,i.y)(p,h);if(!s.isAssumed||v.series.length===1)return s}return(0,i.y)(void 0,h)}function m(v,h){if(v?.series&&h.field)for(const p of v.series){const s=(0,r.getResourceDimension)(p,h);if(!s.isAssumed||v.series.length===1)return s}return(0,r.getResourceDimension)(void 0,h)}function c(v,h){if(v?.series&&h.field)for(const p of v.series){const s=(0,r.getTextDimension)(p,h);if(!s.isAssumed||v.series.length===1)return s}return(0,r.getTextDimension)(void 0,h)}function d(v,h){const p=f(h,v);return p==null?void 0:v.fields[p]}function f(v,h,p){if(!(!h||!v?.length))for(let s=0;s<h.fields.length;s++){const y=h.fields[s];if(v===y.name)return s;const C=(0,n.CZ)(y,h,p);if(v===C)return s}}function E(v){const h=v.state?.calcs;if(h){const y=h[a.gz.lastNotNull];if(y!=null)return y}const p=v.values;let s=p.length-1;for(;s>=0;){const y=p[s--];if(y!=null)return y}}},17683:(G,A,e)=>{"use strict";e.d(A,{I:()=>l,a:()=>u});var n=e(66681),a=e(85960),o=e(47257),r=e(63779),i=e(61420);const g=(m,c)=>({valueNavigation:(0,n.css)`
      width: ${i.vl};
      font-weight: bold;
    `,valueNavigationWrapper:(0,n.css)`
      display: flex;
      justify-content: flex-end;
    `,itemLabelsWrap:(0,n.css)`
      ${c?"":`border-bottom: 1px solid ${m.colors.border.medium}`};
    `}),u=m=>m.includes(r.QG)?m.replace(r.QG,""):m,l=({valueLabels:m,expanded:c})=>{const d=(0,o.wW)(g,c);return a.createElement("div",{className:d.itemLabelsWrap},a.createElement("div",{className:d.valueNavigationWrapper},m.map((f,E)=>a.createElement("span",{className:d.valueNavigation,key:f.name},u(f.name)))))}},61420:(G,A,e)=>{"use strict";e.d(A,{ZP:()=>b,vl:()=>h,Cw:()=>p});var n=e(66681),a=e(85960),o=e(35792),r=e(43183),i=e(47257),g=e(75064),u=e(17683),l=e(56917);const m=(S,D)=>({rowWrapper:(0,n.css)`
    position: relative;
    min-width: ${h};
    padding-right: 5px;
  `,rowValue:(0,n.css)`
    white-space: nowrap;
    overflow-x: auto;
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
    display: block;
    padding-right: 10px;

    &::-webkit-scrollbar {
      display: none; /* Chrome, Safari and Opera */
    }

    &:before {
      pointer-events: none;
      content: '';
      width: 100%;
      height: 100%;
      position: absolute;
      left: 0;
      top: 0;
      background: linear-gradient(to right, transparent calc(100% - 25px), ${S.colors.background.primary});
    }
  `,rowValuesWrap:(0,n.css)`
    padding-left: ${p};
    width: calc(${D} * ${h});
    display: flex;
  `}),c=({totalNumberOfValues:S,values:D,hideFieldsWithoutValues:M})=>{const T=(0,i.wW)(m,S);return a.createElement("div",{role:"cell",className:T.rowValuesWrap},D?.map(R=>M&&(R.value===void 0||R.value===l.T)?null:a.createElement("span",{key:R.key,className:T.rowWrapper},a.createElement("span",{className:T.rowValue},R.value))))},d=S=>{const D=S.isDark?"#ce9178":"#a31515",M=S.isDark?"#73bf69":"#56a64b";return{metricName:(0,n.css)`
      color: ${M};
    `,metricValue:(0,n.css)`
      color: ${D};
    `,expanded:(0,n.css)`
      display: block;
      text-indent: 1em;
    `}},E=({value:S,index:D,length:M,isExpandedView:T})=>{const R=(0,i.wW)(d),O=S.key,x=S.value;return a.createElement("span",{className:T?R.expanded:"",key:D},a.createElement("span",{className:R.metricName},O),a.createElement("span",null,"="),a.createElement("span",null,'"'),a.createElement("span",{className:R.metricValue},x),a.createElement("span",null,'"'),D<M-1&&a.createElement("span",null,", "))},v="20px",h="80px",p="25px",s=(S,D,M)=>({rowWrapper:(0,n.css)`
    border-bottom: 1px solid ${S.colors.border.medium};
    display: flex;
    position: relative;
    padding-left: 22px;
    ${M?"":"align-items: center;"}
    ${M?"":"height: 100%;"}
  `,copyToClipboardWrapper:(0,n.css)`
    position: absolute;
    left: 0;
    ${M?"":"bottom: 0;"}
    ${M?"top: 4px;":"top: 0;"}
    margin: auto;
    z-index: 1;
    height: 16px;
    width: 16px;
  `,rowLabelWrapWrap:(0,n.css)`
    position: relative;
    width: calc(100% - (${D} * ${h}) - ${p});
  `,rowLabelWrap:(0,n.css)`
    white-space: nowrap;
    overflow-x: auto;
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
    padding-right: ${v};

    &::-webkit-scrollbar {
      display: none; /* Chrome, Safari and Opera */
    }

    &:after {
      pointer-events: none;
      content: '';
      width: 100%;
      height: 100%;
      position: absolute;
      left: 0;
      top: 0;
      background: linear-gradient(
        to right,
        transparent calc(100% - ${v}),
        ${S.colors.background.primary}
      );
    }
  `});function y(S){let D=[],M=[];for(const T in S)T in S&&S[T]&&!T.includes("Value")?D.push({key:T,value:S[T]}):T in S&&S[T]&&T.includes("Value")&&M.push({key:T,value:S[T]});return{values:M,attributeValues:D}}const b=({listItemData:S,listKey:D,totalNumberOfValues:M,valueLabels:T,isExpandedView:R})=>{const{__name__:O,...x}=S,[I,L]=(0,o.Z)(),P=T?.length??M,N=(0,i.wW)(s,P,R),{values:F,attributeValues:U}=y(x),j=H=>H==="\u221E"||H==="Infinity"?"+Inf":H,V=`${O}{${U.map(H=>`${H.key}="${j(H.value)}"`)}}`,_=!!(T&&T?.length);return a.createElement(a.Fragment,null,T!==void 0&&R&&a.createElement(u.I,{valueLabels:T,expanded:R}),a.createElement("div",{key:D,className:N.rowWrapper},a.createElement("span",{className:N.copyToClipboardWrapper},a.createElement(g.h,{tooltip:"Copy to clipboard",onClick:()=>{(0,r.ff)("grafana_explore_prometheus_instant_query_ui_raw_toggle_expand"),L(V)},name:"copy"})),a.createElement("span",{role:"cell",className:N.rowLabelWrapWrap},a.createElement("div",{className:N.rowLabelWrap},a.createElement("span",null,O),a.createElement("span",null,"{"),a.createElement("span",null,U.map((H,z)=>a.createElement(E,{isExpandedView:R,value:H,key:z,index:z,length:U.length}))),a.createElement("span",null,"}"))),a.createElement(c,{hideFieldsWithoutValues:_,totalNumberOfValues:P,values:F})))}},54287:(G,A,e)=>{"use strict";e.d(A,{q:()=>o});var n=e(85960),a=e(85745);const o=({timeInMs:i,className:g,humanize:u})=>n.createElement("span",{className:g},r(i,u)),r=(i,g=!1)=>{const u=i/1e3;if(!g)return`${u.toFixed(1)}s`;const l=(0,a.Ks)(u,"seconds"),m=l.hours(),c=l.minutes(),d=l.seconds();return m?`${m}h ${c}m ${d}s`:c?`${c}m ${d}s`:`${d}s`}},21477:(G,A,e)=>{"use strict";e.d(A,{m:()=>rt});var n=e(66681),a=e(85960),o=e(45220),r=e(81223),i=e(56582),g=e(12399),u=e(47257),l=e(29724),m=e(65512),c=e(18435),d=e(95162),f=e(7954),E=e(7997),v=e(84513);const p=(Je,Ae,Ke)=>{let Xe;return Ke?Xe=Ae?.childSpanIds.find(ne=>Je.has(ne)&&Je.get(ne).startTime+Je.get(ne).duration<Ke):Xe=Ae.childSpanIds[0],Xe?Je.get(Xe):void 0},y=Je=>{const Ae=[],Ke=[];Je.forEach(Z=>{if(Z.references[0]?.refType==="FOLLOWS_FROM"){Ae.push(Z.spanID);const ee=Je.get(Z.references[0].spanID);ee.childSpanIds=ee.childSpanIds.filter(ce=>ce!==Z.spanID),Je.set(ee.spanID,{...ee})}});const Xe=Z=>{Z.forEach(ee=>{const ce=Je.get(ee);ce.hasChildren&&(Ke.push(...ce.childSpanIds),Xe(ce.childSpanIds))})};return Xe(Ae),[...Ae,...Ke].forEach(Z=>Je.delete(Z)),Je},b=Je=>{let Ae=[...Je.keys()];return Ae.forEach(Ke=>{const Xe=Je.get(Ke);if(!(Xe&&Xe.references.length&&Xe.depth))return;const ne=Je.get(Xe.references[0].spanID);if(!ne){Je.delete(Xe.spanID);return}const Z=Xe.startTime+Xe.duration,ee=ne.startTime+ne.duration;if(Xe.startTime>=ne.startTime){if(Xe.startTime>=ee){Je.delete(Xe.spanID),ne.childSpanIds=ne.childSpanIds.filter(ce=>ce!==Xe.spanID);return}if(Z>ee){Je.set(Xe.spanID,{...Xe,duration:ee-Xe.startTime});return}return}Z<=ne.startTime?(Je.delete(Xe.spanID),ne.childSpanIds=ne.childSpanIds.filter(ce=>ce!==Xe.spanID)):Z<=ee?Je.set(Xe.spanID,{...Xe,startTime:ne.startTime,duration:Z-ne.startTime}):Je.set(Xe.spanID,{...Xe,startTime:ne.startTime,duration:ee-ne.startTime})}),Ae=[...Je.keys()],Ae.forEach(Ke=>{const Xe=Je.get(Ke);if(Xe.references.length){const ne=Je.get(Xe.references[0].spanID);Xe.references[0].span=ne,Je.set(Ke,{...Xe})}}),Je},S=(Je,Ae,Ke,Xe)=>{const ne=Je.get(Ae);if(!ne)return Ke;const Z=p(Je,ne,Xe);let ee;if(Z)ee={spanId:ne.spanID,section_start:Z.startTime+Z.duration,section_end:Xe||ne.startTime+ne.duration},ee.section_start!==ee.section_end&&Ke.push(ee),S(Je,Z.spanID,Ke);else if(ee={spanId:ne.spanID,section_start:ne.startTime,section_end:Xe||ne.startTime+ne.duration},ee.section_start!==ee.section_end&&Ke.push(ee),ne.references.length){const ce=ne.references.filter(be=>be.refType==="CHILD_OF")[0].spanID;S(Je,ce,Ke,ne.startTime)}return Ke};function D(Je){let Ae=[];const Ke=Je?.spans[0].spanID;if(Ke){const Xe=Je.spans.reduce((ne,Z)=>(ne.set(Z.spanID,Z),ne),new Map);try{const ne=y(Xe),Z=b(ne);Ae=S(Z,Ke,Ae)}catch(ne){console.log("error while computing critical path for a trace",ne)}}return Ae}const T=(0,v.Z)(D);var R=e(70318),O=e.n(R),x=e(16602),I=e(33808),L=e(3810),P=e(56075);const N=.8,F=2,U=200,j=10,V=60,_=6;function H(Je,Ae,Ke,Xe,ne){const Z=new Map,ee=Ae.length<V?V:Math.min(Ae.length,U),ce=window.innerWidth*2;Je.width=ce,Je.height=ee;const be=Math.min(_,Math.max(F,ee/Ae.length)),Ee=ee/Ae.length,Be=Je.getContext("2d",{alpha:!1});if(Be){Be.fillStyle=ne,Be.fillRect(0,0,ce,ee);for(let Le=0;Le<Ae.length;Le++){const{valueWidth:ze,valueOffset:Fe,serviceName:$e}=Ae[Le],et=Fe/Ke*ce;let tt=ze/Ke*ce;tt<j&&(tt=j);let it=Z.get($e);it||(it=`rgba(${Xe($e).concat(N).join()})`,Z.set($e,it)),Be.fillStyle=it,Be.fillRect(et,Le*Ee,tt,be)}}}const z=(0,I.B)(Je=>({CanvasSpanGraph:(0,n.css)`
      label: CanvasSpanGraph;
      background: ${(0,L.h)(Je,"#fafafa")};
      height: 60px;
      position: absolute;
      width: 100%;
    `}));class K extends a.PureComponent{constructor(Ae){super(Ae),this.getColor=Ke=>(0,P.e6)(Ke,this.props.theme),this._setCanvasRef=Ke=>{this._canvasElm=Ke},this._canvasElm=void 0}componentDidMount(){this._draw()}componentDidUpdate(){this._draw()}_draw(){if(this._canvasElm){const{valueWidth:Ae,items:Ke}=this.props;H(this._canvasElm,Ke,Ae,this.getColor,(0,L.h)(this.props.theme,"#fff"))}}render(){return a.createElement("canvas",{className:z(this.props.theme).CanvasSpanGraph,ref:this._setCanvasRef,"data-testid":"CanvasSpanGraph"})}}const Y=(0,u.HE)(K);var k=e(85325);const q=()=>({TickLabels:(0,n.css)`
      label: TickLabels;
      height: 1rem;
      position: relative;
    `,TickLabelsLabel:(0,n.css)`
      label: TickLabelsLabel;
      color: #717171;
      font-size: 0.7rem;
      position: absolute;
      user-select: none;
    `});function X(Je){const{numTicks:Ae,duration:Ke}=Je,Xe=(0,u.wW)(q),ne=[];for(let Z=0;Z<Ae+1;Z++){const ee=Z/Ae,ce=ee===1?{right:"0%"}:{left:`${ee*100}%`};ne.push(a.createElement("div",{key:ee,className:Xe.TickLabelsLabel,style:ce,"data-testid":"tick"},(0,k.LU)(Ke*ee)))}return a.createElement("div",{className:Xe.TickLabels,"data-testid":"TickLabels"},ne)}var te=e(29165),se=e(69893);const de=()=>({GraphTick:(0,n.css)`
      label: GraphTick;
      stroke: #aaa;
      stroke-width: 1px;
    `});function re(Je){const{numTicks:Ae}=Je,Ke=(0,u.wW)(de),Xe=[];for(let ne=1;ne<Ae;ne++){const Z=`${ne/Ae*100}%`;Xe.push(a.createElement("line",{className:Ke.GraphTick,x1:Z,y1:"0%",x2:Z,y2:"100%",key:ne/Ae}))}return a.createElement("g",{"data-testid":"ticks","aria-hidden":"true"},Xe)}const fe=()=>({ScrubberHandleExpansion:O()((0,n.css)`
        label: ScrubberHandleExpansion;
        cursor: col-resize;
        fill-opacity: 0;
        fill: #44f;
      `,"scrubber-handle-expansion"),ScrubberHandle:O()((0,n.css)`
        label: ScrubberHandle;
        cursor: col-resize;
        fill: #555;
      `,"scrubber-handle"),ScrubberLine:O()((0,n.css)`
        label: ScrubberLine;
        pointer-events: none;
        stroke: #555;
      `,"scrubber-line"),ScrubberDragging:(0,n.css)`
      label: ScrubberDragging;
      & .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      & .scrubber-handle {
        fill: #44f;
      }
      & > .scrubber-line {
        stroke: #44f;
      }
    `,ScrubberHandles:(0,n.css)`
      label: ScrubberHandles;
      &:hover > .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      &:hover > .scrubber-handle {
        fill: #44f;
      }
      &:hover + .scrubber.line {
        stroke: #44f;
      }
    `});function ie({isDragging:Je,onMouseDown:Ae,onMouseEnter:Ke,onMouseLeave:Xe,position:ne}){const Z=`${ne*100}%`,ee=(0,u.wW)(fe),ce=O()({[ee.ScrubberDragging]:Je});return a.createElement("g",{className:ce,"data-testid":"scrubber-component"},a.createElement("g",{"data-testid":"scrubber-component-g",className:ee.ScrubberHandles,onMouseDown:Ae,onMouseEnter:Ke,onMouseLeave:Xe},a.createElement("rect",{"data-testid":"scrubber-component-rect-1",x:Z,className:ee.ScrubberHandleExpansion,style:{transform:"translate(-4.5px)"},width:"9",height:"20"}),a.createElement("rect",{"data-testid":"scrubber-component-rect-2",x:Z,className:ee.ScrubberHandle,style:{transform:"translate(-1.5px)"},width:"3",height:"20"})),a.createElement("line",{className:ee.ScrubberLine,y2:"100%",x1:Z,x2:Z,"data-testid":"scrubber-component-line"}))}const oe=(0,I.B)(Je=>{const Ae="JaegerUiComponents__ViewingLayerResetZoomHoverClassName",Ke=(0,n.css)`
    label: ViewingLayerResetZoom;
    display: none;
    position: absolute;
    right: 1%;
    top: 10%;
    z-index: 1;
  `;return{ViewingLayer:(0,n.css)`
      label: ViewingLayer;
      cursor: vertical-text;
      position: relative;
      z-index: 1;
      &:hover > .${Ae} {
        display: unset;
      }
    `,ViewingLayerGraph:(0,n.css)`
      label: ViewingLayerGraph;
      border: 1px solid ${(0,L.h)(Je,"#999")};
      /* need !important here to overcome something from semantic UI */
      overflow: visible !important;
      position: relative;
      transform-origin: 0 0;
      width: 100%;
    `,ViewingLayerInactive:(0,n.css)`
      label: ViewingLayerInactive;
      fill: ${(0,L.h)(Je,"rgba(214, 214, 214, 0.5)")};
    `,ViewingLayerCursorGuide:(0,n.css)`
      label: ViewingLayerCursorGuide;
      stroke: ${(0,L.h)(Je,"#f44")};
      stroke-width: 1;
    `,ViewingLayerDraggedShift:(0,n.css)`
      label: ViewingLayerDraggedShift;
      fill-opacity: 0.2;
    `,ViewingLayerDrag:(0,n.css)`
      label: ViewingLayerDrag;
      fill: ${(0,L.h)(Je,"#44f")};
    `,ViewingLayerFullOverlay:(0,n.css)`
      label: ViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `,ViewingLayerResetZoom:Ke,ViewingLayerResetZoomHoverClassName:Ae}}),ue={SHIFT_END:"SHIFT_END",SHIFT_START:"SHIFT_START",REFRAME:"REFRAME"};function me(Je,Ae){const[Ke,Xe]=Je<Ae?[Je,Ae]:[Ae,Je];return{x:`${Ke*100}%`,width:`${(Xe-Ke)*100}%`,leadingX:`${Ae*100}%`}}class ge extends a.PureComponent{constructor(Ae){super(Ae),this._setRoot=Ke=>{this._root=Ke},this._getDraggingBounds=Ke=>{if(!this._root)throw new Error("invalid state");const{left:Xe,width:ne}=this._root.getBoundingClientRect(),[Z,ee]=this.props.viewRange.time.current;let ce=1,be=0;return Ke===ue.SHIFT_START?ce=ee:Ke===ue.SHIFT_END&&(be=Z),{clientXLeft:Xe,maxValue:ce,minValue:be,width:ne}},this._handleReframeMouseMove=({value:Ke})=>{this.props.updateNextViewRangeTime({cursor:Ke})},this._handleReframeMouseLeave=()=>{this._draggerReframe.resetBounds(),this.props.updateNextViewRangeTime({cursor:null})},this._handleReframeDragUpdate=({value:Ke})=>{const Xe=Ke,{time:ne}=this.props.viewRange,ee={reframe:{anchor:ne.reframe?ne.reframe.anchor:Xe,shift:Xe}};this.props.updateNextViewRangeTime(ee)},this._handleReframeDragEnd=({manager:Ke,value:Xe})=>{const{time:ne}=this.props.viewRange,Z=ne.reframe?ne.reframe.anchor:Xe,[ee,ce]=Xe<Z?[Xe,Z]:[Z,Xe];Ke.resetBounds(),this.props.updateViewRangeTime(ee,ce,"minimap")},this._handleScrubberEnterLeave=({type:Ke})=>{const Xe=Ke===se.EUpdateTypes.MouseEnter;this.setState({preventCursorLine:Xe})},this._handleScrubberDragUpdate=({event:Ke,tag:Xe,type:ne,value:Z})=>{ne===se.EUpdateTypes.DragStart&&Ke.stopPropagation(),Xe===ue.SHIFT_START?this.props.updateNextViewRangeTime({shiftStart:Z}):Xe===ue.SHIFT_END&&this.props.updateNextViewRangeTime({shiftEnd:Z})},this._handleScrubberDragEnd=({manager:Ke,tag:Xe,value:ne})=>{const[Z,ee]=this.props.viewRange.time.current;let ce;if(Xe===ue.SHIFT_START)ce=[ne,ee];else if(Xe===ue.SHIFT_END)ce=[Z,ne];else throw new Error("bad state");Ke.resetBounds(),this.setState({preventCursorLine:!1}),this.props.updateViewRangeTime(ce[0],ce[1],"minimap")},this._resetTimeZoomClickHandler=()=>{this.props.updateViewRangeTime(0,1)},this._draggerReframe=new se.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseMove:this._handleReframeMouseMove,onMouseLeave:this._handleReframeMouseLeave,tag:ue.REFRAME}),this._draggerStart=new se.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:ue.SHIFT_START}),this._draggerEnd=new se.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:ue.SHIFT_END}),this._root=void 0,this.state={preventCursorLine:!1}}componentWillUnmount(){this._draggerReframe.dispose(),this._draggerEnd.dispose(),this._draggerStart.dispose()}_getMarkers(Ae,Ke){const Xe=oe(this.props.theme),ne=me(Ae,Ke);return[a.createElement("rect",{key:"fill",className:O()(Xe.ViewingLayerDraggedShift,Xe.ViewingLayerDrag),x:ne.x,y:"0",width:ne.width,height:this.props.height-2}),a.createElement("rect",{key:"edge",className:O()(Xe.ViewingLayerDrag),x:ne.leadingX,y:"0",width:"1",height:this.props.height-2})]}render(){const{height:Ae,viewRange:Ke,numTicks:Xe,theme:ne}=this.props,{preventCursorLine:Z}=this.state,{current:ee,cursor:ce,shiftStart:be,shiftEnd:Ee,reframe:Be}=Ke.time,Le=be!=null||Ee!=null||Be!=null,[ze,Fe]=ee;let $e=0;ze&&($e=ze*100);let et=100;Fe&&(et=100-Fe*100);let tt;!Le&&ce!=null&&!Z&&(tt=`${ce*100}%`);const it=oe(ne);return a.createElement("div",{"aria-hidden":!0,className:it.ViewingLayer,style:{height:Ae}},(ze!==0||Fe!==1)&&a.createElement(te.zx,{onClick:this._resetTimeZoomClickHandler,className:O()(it.ViewingLayerResetZoom,it.ViewingLayerResetZoomHoverClassName),type:"button",variant:"secondary"},"Reset Selection"),a.createElement("svg",{height:Ae,className:it.ViewingLayerGraph,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove},$e>0&&a.createElement("rect",{x:0,y:0,height:"100%",width:`${$e}%`,className:it.ViewingLayerInactive,"data-testid":"left-ViewingLayerInactive"}),et>0&&a.createElement("rect",{x:`${100-et}%`,y:0,height:"100%",width:`${et}%`,className:it.ViewingLayerInactive,"data-testid":"right-ViewingLayerInactive"}),a.createElement(re,{numTicks:Xe}),tt&&a.createElement("line",{className:it.ViewingLayerCursorGuide,x1:tt,y1:"0",x2:tt,y2:Ae-2,strokeWidth:"1","data-testid":"ViewingLayerCursorGuide"}),be!=null&&this._getMarkers(ze,be),Ee!=null&&this._getMarkers(Fe,Ee),a.createElement(ie,{isDragging:be!=null,onMouseDown:this._draggerStart.handleMouseDown,onMouseEnter:this._draggerStart.handleMouseEnter,onMouseLeave:this._draggerStart.handleMouseLeave,position:ze||0}),a.createElement(ie,{isDragging:Ee!=null,position:Fe||1,onMouseDown:this._draggerEnd.handleMouseDown,onMouseEnter:this._draggerEnd.handleMouseEnter,onMouseLeave:this._draggerEnd.handleMouseLeave}),Be!=null&&this._getMarkers(Be.anchor,Be.shift)),Le&&a.createElement("div",{className:it.ViewingLayerFullOverlay}))}}const Ue=(0,u.HE)(ge),De=60,Pe=4;function ye(Je){return{valueOffset:Je.relativeStartTime,valueWidth:Je.duration,serviceName:Je.process.serviceName}}function Te(Je){return Je.spans.map(ye)}const nt=(0,v.Z)(Te);class ct extends a.PureComponent{render(){const{height:Ae,trace:Ke,viewRange:Xe,updateNextViewRangeTime:ne,updateViewRangeTime:Z}=this.props;if(!Ke)return a.createElement("div",null);const ee=nt(Ke);return a.createElement("div",{className:O()(x.GL,x.H3)},a.createElement(X,{numTicks:Pe,duration:Ke.duration}),a.createElement("div",{className:x.WW},a.createElement(Y,{valueWidth:Ke.duration,items:ee}),a.createElement(Ue,{viewRange:Xe,numTicks:Pe,height:Ae||De,updateViewRangeTime:Z,updateNextViewRangeTime:ne})))}}ct.defaultProps={height:De};var he=e(90835);function xe(){const[Je,Ae]=(0,a.useState)(new Set),Ke=(0,a.useCallback)(function(be){if(Je.size===0)return;let Ee=-1,Be=!0;const Le=be.reduce((ze,Fe)=>(Fe.depth<=Ee&&(Be=!0),Be&&ze.has(Fe.spanID)&&(ze.delete(Fe.spanID),Be=!1,Ee=Fe.depth),ze),new Set(Je));Ae(Le)},[Je]),Xe=(0,a.useCallback)(function(be){if(Me(be,Je))return;let Ee;const Be=be.reduce((Le,ze)=>(Ee&&ze.depth<=Ee.depth?(Le.add(Ee.spanID),ze.hasChildren&&(Ee=ze)):ze.hasChildren&&!Le.has(ze.spanID)&&(Ee=ze),Le),new Set(Je));Ee&&Be.add(Ee.spanID),Ae(Be)},[Je]),ne=(0,a.useCallback)(function(){Ae(new Set)},[]),Z=(0,a.useCallback)(function(be){if(Me(be,Je))return;const Ee=be.reduce((Be,Le)=>(Le.hasChildren&&Be.add(Le.spanID),Be),new Set);Ae(Ee)},[Je]),ee=(0,a.useCallback)(function(be){const Ee=new Set(Je);Je.has(be)?Ee.delete(be):Ee.add(be),Ae(Ee)},[Je]);return{childrenHiddenIDs:Je,expandOne:Ke,collapseOne:Xe,expandAll:ne,collapseAll:Z,childrenToggle:ee}}function Me(Je,Ae){return Je.filter(Xe=>Xe.hasChildren).length===Ae.size}function He(Je){const[Ae,Ke]=(0,a.useState)(new Map);(0,a.useEffect)(()=>{Ke(new Map)},[Je,Ke]);const Xe=(0,a.useCallback)(function(ce){const be=new Map(Ae);be.has(ce)?be.delete(ce):be.set(ce,new E.DetailState),Ke(be)},[Ae]),ne=(0,a.useCallback)(function(ce,be){const Ee=Ae.get(ce);if(!Ee)return;const Be=Ee.toggleLogItem(be),Le=new Map(Ae);return Le.set(ce,Be),Ke(Le)},[Ae]),Z=(0,a.useCallback)(function(ce,be){const Ee=Ae.get(ce);if(!Ee)return;const Be=Ee.toggleReferenceItem(be),Le=new Map(Ae);return Le.set(ce,Be),Ke(Le)},[Ae]);return{detailStates:Ae,toggleDetail:Xe,detailLogItemToggle:ne,detailLogsToggle:(0,a.useCallback)(ee=>Ve("logs",Ae,Ke)(ee),[Ae]),detailWarningsToggle:(0,a.useCallback)(ee=>Ve("warnings",Ae,Ke)(ee),[Ae]),detailStackTracesToggle:(0,a.useCallback)(ee=>Ve("stackTraces",Ae,Ke)(ee),[Ae]),detailReferenceItemToggle:Z,detailReferencesToggle:(0,a.useCallback)(ee=>Ve("references",Ae,Ke)(ee),[Ae]),detailProcessToggle:(0,a.useCallback)(ee=>Ve("process",Ae,Ke)(ee),[Ae]),detailTagsToggle:(0,a.useCallback)(ee=>Ve("tags",Ae,Ke)(ee),[Ae])}}function Ve(Je,Ae,Ke){return Xe=>{const ne=Ae.get(Xe);if(!ne)return;let Z;Je==="tags"?Z=ne.toggleTags():Je==="process"?Z=ne.toggleProcess():Je==="warnings"?Z=ne.toggleWarnings():Je==="references"?Z=ne.toggleReferences():Je==="stackTraces"?Z=ne.toggleStackTraces():Z=ne.toggleLogs();const ee=new Map(Ae);ee.set(Xe,Z),Ke(ee)}}function Oe(){const[Je,Ae]=(0,a.useState)(new Set),Ke=(0,a.useCallback)(function(Z){Ae(ee=>{const ce=new Set(ee);return ce.add(Z),ce})},[]),Xe=(0,a.useCallback)(function(Z){Ae(ee=>{const ce=new Set(ee);return ce.delete(Z),ce})},[]);return{hoverIndentGuideIds:Je,addHoverIndentGuideId:Ke,removeHoverIndentGuideId:Xe}}var Ne=e(73678);function _e(){const[Je,Ae]=(0,a.useState)({time:{current:[0,1]}}),Ke=(0,a.useCallback)(function(Z){Ae(ee=>{const ce={...ee.time,...Z};return{...ee,time:ce}})},[]),Xe=(0,a.useCallback)(function(Z,ee){const be={current:[Z,ee]};Ae(Ee=>({...Ee,time:be}))},[]);return{viewRange:Je,updateViewRangeTime:Xe,updateNextViewRangeTime:Ke}}const qe=Je=>({noDataMsg:(0,n.css)`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${Je.typography.h4.fontSize};
    color: ${Je.colors.text.secondary};
  `});function rt(Je){const{traceProp:Ae,datasource:Ke,topOfViewRef:Xe,exploreId:ne,createSpanLink:Z}=Je,{detailStates:ee,toggleDetail:ce,detailLogItemToggle:be,detailLogsToggle:Ee,detailProcessToggle:Be,detailReferencesToggle:Le,detailReferenceItemToggle:ze,detailTagsToggle:Fe,detailWarningsToggle:$e,detailStackTracesToggle:et}=He(Je.dataFrames[0]),{removeHoverIndentGuideId:tt,addHoverIndentGuideId:it,hoverIndentGuideIds:vt}=Oe(),{viewRange:yt,updateViewRangeTime:Wt,updateNextViewRangeTime:ut}=_e(),{expandOne:pt,collapseOne:we,childrenToggle:lt,collapseAll:Bt,childrenHiddenIDs:Kt,expandAll:It}=xe(),{search:Zt,setSearch:yn,spanFilterMatches:xn}=(0,Ne.Rx)(Ae?.spans),[An,qt]=(0,a.useState)(""),[On,wn]=(0,o.Z)(!1),[Zn,Aa]=(0,a.useState)(!1),[Ea,Nt]=(0,a.useState)(!1),[en,rn]=(0,a.useState)(100),[un,on]=(0,a.useState)({}),[In,Sn]=(0,a.useState)({}),Ln=(0,u.wW)(qe),[hn,Gn]=(0,a.useState)(.4),[Cn,Yn]=mt({refId:Je.dataFrames[0]?.refId,exploreId:Je.exploreId,datasource:Ke,splitOpenFn:Je.splitOpenFn}),Xn=(0,a.useMemo)(()=>({childrenHiddenIDs:Kt,detailStates:ee,hoverIndentGuideIds:vt,spanNameColumnWidth:hn,traceID:Je.traceProp?.traceID}),[Kt,ee,vt,hn,Je.traceProp?.traceID]),Pt=(0,m.ak)().getInstanceSettings(Ke?.name),Dt=(0,l.p1)(Pt?.jsonData),jt=Pt?.jsonData?.tracesToMetrics,Dn=Pt?.jsonData?.tracesToProfiles,vn=Pt?.jsonData,fa=(0,a.useMemo)(()=>Z??(0,he.yj)({splitOpenFn:Je.splitOpenFn,traceToLogsOptions:Dt,traceToMetricsOptions:jt,traceToProfilesOptions:Dn,dataFrame:Je.dataFrames[0],createFocusSpanLink:Yn,trace:Ae}),[Je.splitOpenFn,Dt,jt,Dn,Je.dataFrames,Yn,Ae,Z]),Pa=(0,d.useSelector)(ds=>(0,c.Z)(ds.user)),La=Ke?Ke?.type:"unknown",Ma=Je.scrollElement?Je.scrollElement:document.getElementsByClassName(Je.scrollElementClass??"")[0],ts=T(Ae);return a.createElement(a.Fragment,null,Je.dataFrames?.length&&Ae?a.createElement(a.Fragment,null,a.createElement(E.TracePageHeader,{trace:Ae,data:Je.dataFrames[0],timeZone:Pa,search:Zt,setSearch:yn,showSpanFilters:On,setShowSpanFilters:wn,showSpanFilterMatchesOnly:Zn,setShowSpanFilterMatchesOnly:Aa,showCriticalPathSpansOnly:Ea,setShowCriticalPathSpansOnly:Nt,setFocusedSpanIdForSearch:qt,spanFilterMatches:xn,datasourceType:La,setHeaderHeight:rn,app:ne?r.zj.Explore:r.zj.Unknown}),a.createElement(ct,{trace:Ae,viewRange:yt,updateNextViewRangeTime:ut,updateViewRangeTime:Wt}),a.createElement(E.TraceTimelineViewer,{findMatchesIDs:xn,trace:Ae,traceToProfilesOptions:Dn,datasourceType:La,spanBarOptions:vn?.spanBar,traceTimeline:Xn,updateNextViewRangeTime:ut,updateViewRangeTime:Wt,viewRange:yt,timeZone:Pa,setSpanNameColumnWidth:Gn,collapseAll:Bt,collapseOne:we,expandAll:It,expandOne:pt,childrenToggle:lt,detailLogItemToggle:be,detailLogsToggle:Ee,detailWarningsToggle:$e,detailStackTracesToggle:et,detailReferencesToggle:Le,detailReferenceItemToggle:ze,detailProcessToggle:Be,detailTagsToggle:Fe,detailToggle:ce,addHoverIndentGuideId:it,removeHoverIndentGuideId:tt,linksGetter:()=>[],createSpanLink:fa,scrollElement:Ma,focusedSpanId:Cn,focusedSpanIdForSearch:An,showSpanFilterMatchesOnly:Zn,showCriticalPathSpansOnly:Ea,createFocusSpanLink:Yn,topOfViewRef:Xe,headerHeight:en,criticalPath:ts,traceFlameGraphs:un,setTraceFlameGraphs:on,redrawListView:In,setRedrawListView:Sn})):a.createElement("div",{className:Ln.noDataMsg},"No data"))}function mt(Je){const Ae=(0,d.useSelector)(ce=>ce.explore.panes[Je.exploreId]?.panelsState.trace),Ke=Ae?.spanId,Xe=(0,d.useDispatch)(),ne=ce=>Xe((0,f.km)(Je.exploreId,"trace",{...Ae,spanId:ce})),Z=(0,d.useSelector)(ce=>ce.explore.panes[Je.exploreId]?.queries.find(be=>be.refId===Je.refId));return[Ke,(ce,be)=>{const Ee={title:"Deep link to this span",url:"",internal:{datasourceUid:Je.datasource?.uid,datasourceName:Je.datasource?.name,query:{...Z,query:ce},panelsState:{trace:{spanId:be}}}},Be=Z?.queryType==="traceql"&&Z.query===ce;return(0,i._)({link:Ee,internalLink:Ee.internal,scopedVars:{},field:{},onClickFn:Be?()=>ne(Ke===be?void 0:be):Je.splitOpenFn?()=>Je.splitOpenFn({datasourceUid:Je.datasource?.uid,queries:[{...Z,query:ce}],panelsState:{trace:{spanId:be}}}):void 0,replaceVariables:(0,g.J)().replace.bind((0,g.J)())})}]}},3810:(G,A,e)=>{"use strict";e.d(A,{h:()=>a});var n=e(19737);function a(o,r,i){if(o.isLight)return r;{if(i){const l=(0,n.Z)(r);return n.Z.mostReadable(i,[l.clone().lighten(25),l.clone().lighten(10),l,l.clone().darken(10),l.clone().darken(25)],{includeFallbackColors:!1}).toHex8String()}const g=(0,n.Z)(r).toHsl();g.l=1-g.l;const u=(0,n.Z)(g);return u.isLight()?u.darken(5).toHex8String():u.lighten(5).toHex8String()}}},7997:(G,A,e)=>{"use strict";e.d(A,{DetailState:()=>Kr,TracePageHeader:()=>Jr,TraceTimelineViewer:()=>ur,filterSpans:()=>Qo,transformTraceData:()=>Oi});var n=e(66681),a=e(85960),o=e(43183),r=e(90857),i=e(33808),g=e(47257),u=e(3810),l=e(47699),m=e.n(l);const d={scrollPageDown:{binding:"s",label:"Scroll down"},scrollPageUp:{binding:"w",label:"Scroll up"},scrollToNextVisibleSpan:{binding:"f",label:"Scroll to the next visible span"},scrollToPrevVisibleSpan:{binding:"b",label:"Scroll to the previous visible span"},panLeft:{binding:["a","left"],label:"Pan left"},panLeftFast:{binding:["shift+a","shift+left"],label:"Pan left \u2014 Large"},panRight:{binding:["d","right"],label:"Pan right"},panRightFast:{binding:["shift+d","shift+right"],label:"Pan right \u2014 Large"},zoomIn:{binding:"up",label:"Zoom in"},zoomInFast:{binding:"shift+up",label:"Zoom in \u2014 Large"},zoomOut:{binding:"down",label:"Zoom out"},zoomOutFast:{binding:"shift+down",label:"Zoom out \u2014 Large"},collapseAll:{binding:"]",label:"Collapse All"},expandAll:{binding:"[",label:"Expand All"},collapseOne:{binding:"p",label:"Collapse One Level"},expandOne:{binding:"o",label:"Expand One Level"},searchSpans:{binding:"ctrl+b",label:"Search Spans"},clearSearch:{binding:"escape",label:"Clear Search"}};let f;function E(){if(f)return f;const Qe=new(m())(document.body);return f=Qe,Qe}function v(Qe){const Ye=E();Object.keys(Qe).forEach(Ze=>{const dt=Qe[Ze];dt&&Ye.bind(d[Ze].binding,dt)})}function h(){E().reset()}var p=e(70318),s=e.n(p),y=e(16602),C=e(85325);function b(Qe){const{min:Ye,max:Ze,viewStart:dt,viewEnd:Ct}=Qe,Lt=Ze-Ye,Ft=Ye+dt*Lt,nn=Ze-(1-Ct)*Lt-Ft;return(an,Nn)=>({start:(an-Ft)/nn,end:(Nn-Ft)/nn})}function S(Qe,Ye,Ze){return!Array.isArray(Ze.tags)||!Ze.tags.length?!1:Ze.tags.some(dt=>dt.key===Qe&&dt.value===Ye)}const D=Qe=>Qe.kind==="client",M=S.bind(null,"span.kind","client"),T=Qe=>D(Qe)||M(Qe),R=Qe=>Qe.kind==="server",O=S.bind(null,"span.kind","server"),x=Qe=>R(Qe)||O(Qe),I=Qe=>Qe.statusCode===2,L=S.bind(null,"error",!0),P=S.bind(null,"error","true"),N=Qe=>I(Qe)||L(Qe)||P(Qe);function F(Qe,Ye){const{depth:Ze}=Qe[Ye];let dt=Ye+1;for(;dt<Qe.length&&Qe[dt].depth>Ze;dt++)if(N(Qe[dt]))return!0;return!1}function U(Qe){if(Qe.length<=1||!T(Qe[0]))return!1;const Ze=Qe[0].depth+1;let dt=1;for(;dt<Qe.length&&Qe[dt].depth===Ze;){if(x(Qe[dt]))return Qe[dt];dt++}return null}const j=Qe=>Qe.kind?Qe.kind==="client":Qe.tags.some(({key:Ye,value:Ze})=>Ye==="span.kind"&&Ze==="client"),V=Qe=>({Ticks:(0,n.css)`
      label: Ticks;
      pointer-events: none;
    `,TicksTick:(0,n.css)`
      label: TicksTick;
      position: absolute;
      height: 100%;
      width: 1px;
      background: ${(0,u.h)(Qe,"#d8d8d8")};
      &:last-child {
        width: 0;
      }
    `,TicksTickLabel:(0,n.css)`
      label: TicksTickLabel;
      left: 0.25rem;
      position: absolute;
    `,TicksTickLabelEndAnchor:(0,n.css)`
      label: TicksTickLabelEndAnchor;
      left: initial;
      right: 0.25rem;
    `});function _(Qe){const{endTime:Ye,numTicks:Ze,showLabels:dt,startTime:Ct}=Qe;let Lt;if(dt){Lt=[];const nn=(Ye||0)-(Ct||0);for(let an=0;an<Ze;an++){const Nn=(Ct||0)+an/(Ze-1)*nn;Lt.push((0,C.LU)(Nn))}}const Ft=(0,g.wW)(V),Yt=[];for(let nn=0;nn<Ze;nn++){const an=nn/(Ze-1);Yt.push(a.createElement("div",{"data-testid":"TicksID",key:an,className:Ft.TicksTick,style:{left:`${an*100}%`}},Lt&&a.createElement("span",{className:s()(Ft.TicksTickLabel,{[Ft.TicksTickLabelEndAnchor]:an>=1})},Lt[nn])))}return a.createElement("div",{className:Ft.Ticks},Yt)}_.defaultProps={endTime:null,showLabels:null,startTime:null};const H=()=>({flexRow:(0,n.css)`
      display: flex;
      flex: 0 1 auto;
      flex-direction: row;
    `});function z(Qe){const{children:Ye,className:Ze="",...dt}=Qe,Ct=(0,g.wW)(H);return a.createElement("div",{className:s()(Ct.flexRow,Ze),...dt},Ye)}z.defaultProps={className:""};function K(Qe){const{children:Ye,className:Ze="",width:dt,style:Ct,...Lt}=Qe,Ft=`${dt*100}%`,Yt={...Ct,flexBasis:Ft,maxWidth:Ft};return a.createElement("div",{className:s()(y.WW,Ze),style:Yt,"data-testid":"TimelineRowCell",...Lt},Ye)}K.defaultProps={className:"",style:{}},z.Cell=K;var Y=e(75064);const k=()=>({TimelineCollapser:(0,n.css)`
      align-items: center;
      display: flex;
      flex: none;
      justify-content: center;
      margin-right: 0.5rem;
    `});function q(Qe){const{onExpandAll:Ye,onExpandOne:Ze,onCollapseAll:dt,onCollapseOne:Ct}=Qe,Lt=(0,g.wW)(k);return a.createElement("div",{className:Lt.TimelineCollapser,"data-testid":"TimelineCollapser"},a.createElement(Y.h,{tooltip:"Expand +1",size:"xl",tooltipPlacement:"top",name:"angle-down",onClick:Ze}),a.createElement(Y.h,{tooltip:"Collapse +1",size:"xl",tooltipPlacement:"top",name:"angle-right",onClick:Ct}),a.createElement(Y.h,{tooltip:"Expand All",size:"xl",tooltipPlacement:"top",name:"angle-double-down",onClick:Ye}),a.createElement(Y.h,{tooltip:"Collapse All",size:"xl",tooltipPlacement:"top",name:"angle-double-right",onClick:dt}))}var X=e(69893);const te=(0,i.B)(()=>({TimelineColumnResizer:(0,n.css)`
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,wrapper:(0,n.css)`
      bottom: 0;
      position: absolute;
      top: 0;
    `,dragger:(0,n.css)`
      border-left: 2px solid transparent;
      cursor: col-resize;
      height: 5000px;
      margin-left: -1px;
      position: absolute;
      top: 0;
      width: 1px;
      z-index: 10;
      &:hover {
        border-left: 2px solid rgba(0, 0, 0, 0.3);
      }
      &::before {
        position: absolute;
        top: 0;
        bottom: 0;
        left: -8px;
        right: 0;
        content: ' ';
      }
    `,draggerDragging:(0,n.css)`
      background: rgba(136, 0, 136, 0.05);
      width: unset;
      &::before {
        left: -2000px;
        right: -2000px;
      }
    `,draggerDraggingLeft:(0,n.css)`
      border-left: 2px solid #808;
      border-right: 1px solid #999;
    `,draggerDraggingRight:(0,n.css)`
      border-left: 1px solid #999;
      border-right: 2px solid #808;
    `,gripIcon:(0,n.css)`
      position: absolute;
      top: 0;
      bottom: 0;
      &::before,
      &::after {
        border-right: 1px solid #ccc;
        content: ' ';
        height: 9px;
        position: absolute;
        right: 9px;
        top: 25px;
      }
      &::after {
        right: 5px;
      }
    `,gripIconDragging:(0,n.css)`
      &::before,
      &::after {
        border-right: 1px solid rgba(136, 0, 136, 0.5);
      }
    `}));class se extends a.PureComponent{constructor(Ye){super(Ye),this._setRootElm=Ze=>{this._rootElm=Ze},this._getDraggingBounds=()=>{if(!this._rootElm)throw new Error("invalid state");const{left:Ze,width:dt}=this._rootElm.getBoundingClientRect(),{min:Ct,max:Lt}=this.props;return{clientXLeft:Ze,width:dt,maxValue:Lt,minValue:Ct}},this._handleDragUpdate=({value:Ze})=>{this.setState({dragPosition:Ze})},this._handleDragEnd=({manager:Ze,value:dt})=>{Ze.resetBounds(),this.setState({dragPosition:null}),this.props.onChange(dt)},this._dragManager=new X.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleDragEnd,onDragMove:this._handleDragUpdate,onDragStart:this._handleDragUpdate}),this._rootElm=void 0,this.state={dragPosition:null}}componentWillUnmount(){this._dragManager.dispose()}render(){let Ye,Ze;const{position:dt,columnResizeHandleHeight:Ct}=this.props,{dragPosition:Lt}=this.state;Ye=`${dt*100}%`;const Ft={left:Ye};let Yt=!1,nn=!1;const an=te();if(this._dragManager.isDragging()&&this._rootElm&&Lt!=null){Yt=Lt<dt,nn=Lt>dt;const Kn=`${Math.min(dt,Lt)*100}%`,Vn=`calc(${(1-Math.max(dt,Lt))*100}% - 1px)`;Ze={left:Kn,right:Vn}}else Ze=Ft;Ze.height=Ct;const Nn=Yt||nn;return a.createElement("div",{className:an.TimelineColumnResizer,ref:this._setRootElm,"data-testid":"TimelineColumnResizer"},a.createElement("div",{className:s()(an.gripIcon,Nn&&an.gripIconDragging),style:Ft,"data-testid":"TimelineColumnResizer--gripIcon"}),a.createElement("div",{"aria-hidden":!0,className:s()(an.dragger,Nn&&an.draggerDragging,nn&&an.draggerDraggingRight,Yt&&an.draggerDraggingLeft),onMouseDown:this._dragManager.handleMouseDown,style:Ze,"data-testid":"TimelineColumnResizer--dragger"}))}}const de=(0,i.B)(()=>({TimelineViewingLayer:(0,n.css)`
      label: TimelineViewingLayer;
      bottom: 0;
      cursor: vertical-text;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,TimelineViewingLayerCursorGuide:(0,n.css)`
      label: TimelineViewingLayerCursorGuide;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      width: 1px;
      background-color: red;
    `,TimelineViewingLayerDragged:(0,n.css)`
      label: TimelineViewingLayerDragged;
      position: absolute;
      top: 0;
      bottom: 0;
    `,TimelineViewingLayerDraggedDraggingLeft:(0,n.css)`
      label: TimelineViewingLayerDraggedDraggingLeft;
      border-left: 1px solid;
    `,TimelineViewingLayerDraggedDraggingRight:(0,n.css)`
      label: TimelineViewingLayerDraggedDraggingRight;
      border-right: 1px solid;
    `,TimelineViewingLayerDraggedShiftDrag:(0,n.css)`
      label: TimelineViewingLayerDraggedShiftDrag;
      background-color: rgba(68, 68, 255, 0.2);
      border-color: #44f;
    `,TimelineViewingLayerDraggedReframeDrag:(0,n.css)`
      label: TimelineViewingLayerDraggedReframeDrag;
      background-color: rgba(255, 68, 68, 0.2);
      border-color: #f44;
    `,TimelineViewingLayerFullOverlay:(0,n.css)`
      label: TimelineViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `}));function re(Qe){return Reflect.has(Qe,"isOutOfView")}function fe(Qe,Ye,Ze){return Qe+Ze*(Ye-Qe)}function ie(Qe,Ye,Ze){return(Ze-Qe)/(Ye-Qe)}function oe(Qe,Ye){let[Ze,dt]=Qe<Ye?[Qe,Ye]:[Ye,Qe];return Ze>=1||dt<=0?{isOutOfView:!0}:(Ze<0&&(Ze=0),dt>1&&(dt=1),{isDraggingLeft:Qe>Ye,left:`${Ze*100}%`,width:`${(dt-Ze)*100}%`})}function ue(Qe,Ye,Ze,dt,Ct){const Lt=ie(Qe,Ye,Ze),Ft=ie(Qe,Ye,dt),Yt=oe(Lt,Ft);if(re(Yt))return null;const{isDraggingLeft:nn,left:an,width:Nn}=Yt,Kn=de(),Vn=(0,n.cx)({[Kn.TimelineViewingLayerDraggedDraggingRight]:!nn,[Kn.TimelineViewingLayerDraggedReframeDrag]:!Ct,[Kn.TimelineViewingLayerDraggedShiftDrag]:Ct});return a.createElement("div",{className:(0,n.cx)(Kn.TimelineViewingLayerDragged,Kn.TimelineViewingLayerDraggedDraggingLeft,Vn),style:{left:an,width:Nn},"data-testid":"Dragged"})}class me extends a.PureComponent{constructor(Ye){super(Ye),this._setRoot=Ze=>{this._root=Ze},this._getDraggingBounds=()=>{if(!this._root)throw new Error("invalid state");const{left:Ze,width:dt}=this._root.getBoundingClientRect();return{clientXLeft:Ze,width:dt}},this._handleReframeMouseMove=({value:Ze})=>{const[dt,Ct]=this.props.viewRangeTime.current,Lt=fe(dt,Ct,Ze);this.props.updateNextViewRangeTime({cursor:Lt})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:void 0})},this._handleReframeDragUpdate=({value:Ze})=>{const{current:dt,reframe:Ct}=this.props.viewRangeTime,[Lt,Ft]=dt,Yt=fe(Lt,Ft,Ze),an={reframe:{anchor:Ct?Ct.anchor:Yt,shift:Yt}};this.props.updateNextViewRangeTime(an)},this._handleReframeDragEnd=({manager:Ze,value:dt})=>{const{current:Ct,reframe:Lt}=this.props.viewRangeTime,[Ft,Yt]=Ct,nn=fe(Ft,Yt,dt),an=Lt?Lt.anchor:nn,[Nn,Kn]=nn<an?[nn,an]:[an,nn];Ze.resetBounds(),this.props.updateViewRangeTime(Nn,Kn,"timeline-header")},this._draggerReframe=new X.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseLeave:this._handleReframeMouseLeave,onMouseMove:this._handleReframeMouseMove}),this._root=void 0}UNSAFE_componentWillReceiveProps(Ye){const{boundsInvalidator:Ze}=this.props;Ze!==Ye.boundsInvalidator&&this._draggerReframe.resetBounds()}componentWillUnmount(){this._draggerReframe.dispose()}render(){const{viewRangeTime:Ye}=this.props,{current:Ze,cursor:dt,reframe:Ct,shiftEnd:Lt,shiftStart:Ft}=Ye,[Yt,nn]=Ze,an=Ct!=null||Lt!=null||Ft!=null;let Nn;!an&&dt!=null&&dt>=Yt&&dt<=nn&&(Nn=`${ie(Yt,nn,dt)*100}%`);const Kn=de();return a.createElement("div",{"aria-hidden":!0,className:Kn.TimelineViewingLayer,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove,"data-testid":"TimelineViewingLayer"},Nn!=null&&a.createElement("div",{className:Kn.TimelineViewingLayerCursorGuide,style:{left:Nn},"data-testid":"TimelineViewingLayer--cursorGuide"}),Ct!=null&&ue(Yt,nn,Ct.anchor,Ct.shift,!1),Lt!=null&&ue(Yt,nn,nn,Lt,!0),Ft!=null&&ue(Yt,nn,Yt,Ft,!0))}}const ge=Qe=>({TimelineHeaderRow:(0,n.css)`
      label: TimelineHeaderRow;
      background: ${(0,u.h)(Qe,"#ececec")};
      border-bottom: 1px solid ${(0,u.h)(Qe,"#ccc")};
      height: 38px;
      line-height: 38px;
      width: 100%;
      z-index: 4;
      position: relative;
    `,TimelineHeaderRowTitle:(0,n.css)`
      label: TimelineHeaderRowTitle;
      flex: 1;
      overflow: hidden;
      margin: 0;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,TimelineHeaderWrapper:(0,n.css)`
      label: TimelineHeaderWrapper;
      align-items: center;
    `});function Ue(Qe){const{duration:Ye,nameColumnWidth:Ze,numTicks:dt,onCollapseAll:Ct,onCollapseOne:Lt,onColummWidthChange:Ft,onExpandAll:Yt,onExpandOne:nn,updateViewRangeTime:an,updateNextViewRangeTime:Nn,viewRangeTime:Kn,columnResizeHandleHeight:Vn}=Qe,[Hn,ua]=Kn.current,Qn=(0,g.wW)(ge);return a.createElement(z,{className:Qn.TimelineHeaderRow,"data-testid":"TimelineHeaderRow"},a.createElement(z.Cell,{className:s()(y.oD,y.H3,Qn.TimelineHeaderWrapper),width:Ze},a.createElement("h4",{className:Qn.TimelineHeaderRowTitle},"Service & Operation"),a.createElement(q,{onCollapseAll:Ct,onExpandAll:Yt,onCollapseOne:Lt,onExpandOne:nn})),a.createElement(z.Cell,{width:1-Ze},a.createElement(me,{boundsInvalidator:Ze,updateNextViewRangeTime:Nn,updateViewRangeTime:an,viewRangeTime:Kn}),a.createElement(_,{numTicks:dt,startTime:Hn*Ye,endTime:ua*Ye,showLabels:!0})),a.createElement(se,{columnResizeHandleHeight:Vn,position:Ze,onChange:Ft,min:.2,max:.85}))}var De=e(56375),Pe=e(84513),ye=e(40235);const Te="peer.service";var nt=e(56075);class ct{constructor(Ye){this.ys=[],this.heights=[],this.bufferLen=Ye,this.dataLen=-1,this.lastI=-1}profileData(Ye){Ye!==this.dataLen&&(this.dataLen=Ye,this.ys.length=Ye,this.heights.length=Ye,this.lastI>=Ye&&(this.lastI=Ye-1))}calcHeights(Ye,Ze,dt){dt!=null&&(this.lastI=dt);let Ct=Ye+this.bufferLen;if(Ct<=this.lastI)return;Ct>=this.heights.length&&(Ct=this.heights.length-1);let Lt=this.lastI;for(this.lastI===-1&&(Lt=0,this.ys[0]=0);Lt<=Ct;){const Ft=this.heights[Lt]=Ze(Lt);this.ys[Lt+1]=this.ys[Lt]+Ft,Lt++}this.lastI=Ct}calcYs(Ye,Ze){for(;(this.ys[this.lastI]==null||Ye>this.ys[this.lastI])&&this.lastI<this.dataLen-1;)this.calcHeights(this.lastI,Ze)}confirmHeight(Ye,Ze){let dt=Ye;if(dt>this.lastI){this.calcHeights(dt,Ze);return}const Ct=Ze(dt);if(Ct===this.heights[dt])return;const Lt=Ct-this.heights[dt];for(this.heights[dt]=Ct;++dt<=this.lastI;)this.ys[dt]+=Lt;this.ys[this.lastI+1]!=null&&(this.ys[this.lastI+1]+=Lt)}findFloorIndex(Ye,Ze){this.calcYs(Ye,Ze);let dt=0,Ct=this.lastI;if(this.ys.length<2||Ye<this.ys[1])return 0;if(Ye>this.ys[Ct])return Ct;let Lt;for(;dt<Ct;)if(Lt=dt+.5*(Ct-dt)|0,Ye>this.ys[Lt]){if(Ye<=this.ys[Lt+1])return Lt;dt=Lt}else if(Ye<this.ys[Lt]){if(Ye>=this.ys[Lt-1])return Lt-1;Ct=Lt}else return Lt;throw new Error(`unable to find floor index for y=${Ye}`)}getRowPosition(Ye,Ze){return this.confirmHeight(Ye,Ze),{height:this.heights[Ye],y:this.ys[Ye]}}getEstimatedHeight(){const Ye=this.ys[this.lastI]+this.heights[this.lastI];return this.lastI>=this.dataLen-1?Ye|0:Ye/(this.lastI+1)*this.heights.length|0}}const he=100;class xe extends a.Component{constructor(Ye){super(Ye),this.getViewHeight=()=>this._viewHeight,this.getBottomVisibleIndex=()=>{const Ze=this._scrollTop+this._viewHeight;return this._yPositions.findFloorIndex(Ze,this._getHeight)},this.getTopVisibleIndex=()=>this._yPositions.findFloorIndex(this._scrollTop,this._getHeight),this.getRowPosition=Ze=>this._yPositions.getRowPosition(Ze,this._getHeight),this.scrollToIndex=(Ze,dt)=>{const{scrollElement:Ct}=this.props,Lt=Ct?.getBoundingClientRect().top||0,Yt=(Ct?.scrollTop||0)+(this._itemHolderElm?.getBoundingClientRect().top||0)-Lt,nn=this.getRowPosition(Ze).y;this.props.scrollElement?.scrollTo({top:nn+Yt-dt-80})},this._onScroll=()=>{this._isScrolledOrResized||(this._isScrolledOrResized=!0,window.requestAnimationFrame(this._positionList))},this._positionList=()=>{if(this._isScrolledOrResized=!1,!this._wrapperElm)return;this._calcViewIndexes();const Ze=this.props.viewBufferMin>this._startIndex?0:this._startIndex-this.props.viewBufferMin,dt=this.props.viewBufferMin<this.props.dataLength-this._endIndex?this._endIndex+this.props.viewBufferMin:this.props.dataLength-1;(Ze<this._startIndexDrawn||dt>this._endIndexDrawn)&&this.forceUpdate()},this._initWrapper=Ze=>{this.props.windowScroller&&(this._wrapperElm=Ze,Ze&&(this._viewHeight=Ze.clientHeight))},this._initItemHolder=Ze=>{this._itemHolderElm=Ze,this._scanItemHeights()},this._scanItemHeights=()=>{const Ze=this.props.getIndexFromKey;if(!this._itemHolderElm)return;let dt=null,Ct=null,Lt=!1;const Ft=this._itemHolderElm.childNodes,Yt=Ft.length;for(let nn=0;nn<Yt;nn++){const an=Ft[nn];if(an instanceof HTMLElement){const Nn=an.getAttribute("data-item-key");if(!Nn){console.warn("itemKey not found");continue}const Vn=(an.firstElementChild||an).clientHeight,Hn=this._knownHeights.get(Nn);Vn!==Hn&&(this._knownHeights.set(Nn,Vn),Lt?Ct=Nn:(Lt=!0,dt=Ct=Nn))}}if(dt!=null&&Ct!=null){const nn=Ze(dt),an=Ct===dt?nn:Ze(Ct);this._yPositions.calcHeights(an,this._getHeight,nn),this.forceUpdate()}},this._getHeight=Ze=>{const dt=this.props.getKeyFromIndex(Ze),Ct=this._knownHeights.get(dt);return Ct!=null&&Ct===Ct?Ct:this.props.itemHeightGetter(Ze,dt)},this._yPositions=new ct(200),this._knownHeights=new Map,this._startIndexDrawn=2**20,this._endIndexDrawn=-(2**20),this._startIndex=0,this._endIndex=0,this._viewHeight=-1,this._scrollTop=-1,this._isScrolledOrResized=!1,this._htmlTopOffset=-1,this._windowScrollListenerAdded=!1,this._htmlElm=document.documentElement,this._wrapperElm=void 0,this._itemHolderElm=void 0}componentDidMount(){if(this.props.windowScroller){if(this._wrapperElm){const{top:Ye}=this._wrapperElm.getBoundingClientRect();this._htmlTopOffset=Ye+this._htmlElm.scrollTop}window.addEventListener("scroll",this._onScroll),this._windowScrollListenerAdded=!0}else this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll)}componentDidUpdate(Ye){this._itemHolderElm&&this._scanItemHeights(),!this.props.windowScroller&&Ye.scrollElement!==this.props.scrollElement&&(Ye.scrollElement?.removeEventListener("scroll",this._onScroll),this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll))}componentWillUnmount(){this._windowScrollListenerAdded?window.removeEventListener("scroll",this._onScroll):this._wrapperElm?.removeEventListener("scroll",this._onScroll)}_isViewChanged(){if(!this._wrapperElm)return!1;const Ye=this.props.windowScroller,Ze=Ye?this._htmlElm.clientHeight:this._wrapperElm.clientHeight,dt=Ye?this._htmlElm.scrollTop:this._wrapperElm.scrollTop;return Ze!==this._viewHeight||dt!==this._scrollTop}_calcViewIndexes(){if(this.props.windowScroller)this._viewHeight=window.innerHeight-this._htmlTopOffset,this._scrollTop=window.scrollY;else{if(!this._wrapperElm){this._viewHeight=-1,this._startIndex=0,this._endIndex=0;return}this._viewHeight=this._wrapperElm.clientHeight,this._scrollTop=this._wrapperElm.scrollTop}const Ze=this._scrollTop,dt=this._scrollTop+this._viewHeight;this._startIndex=this._yPositions.findFloorIndex(Ze,this._getHeight),this._endIndex=this._yPositions.findFloorIndex(dt,this._getHeight)}render(){const{dataLength:Ye,getKeyFromIndex:Ze,initialDraw:dt=he,itemRenderer:Ct,viewBuffer:Lt,viewBufferMin:Ft}=this.props,Yt=this._getHeight,nn=[];let an,Nn;if(this._yPositions.profileData(Ye),!this._wrapperElm)an=0,Nn=(dt<Ye?dt:Ye)-1;else{this._isViewChanged()&&this._calcViewIndexes();const Hn=Ft>this._startIndex?0:this._startIndex-Ft,ua=Ft<Ye-this._endIndex?this._endIndex+Ft:Ye-1;Hn<this._startIndexDrawn||ua>this._endIndexDrawn?(an=Lt>this._startIndex?0:this._startIndex-Lt,Nn=this._endIndex+Lt,Nn>=Ye&&(Nn=Ye-1)):(an=this._startIndexDrawn>Ye-1?0:this._startIndexDrawn,Nn=this._endIndexDrawn>Ye-1?Ye-1:this._endIndexDrawn)}this._yPositions.calcHeights(Nn,Yt,an||-1),this._startIndexDrawn=an,this._endIndexDrawn=Nn,nn.length=Nn-an+1;for(let Hn=an;Hn<=Nn;Hn++){const{y:ua,height:Qn}=this._yPositions.getRowPosition(Hn,Yt),ha={height:Qn,top:ua,position:"absolute"},oa=Ze(Hn),xa={"data-item-key":oa};nn.push(Ct(oa,ha,Hn,xa))}const Kn={style:{position:"relative"},ref:this._initWrapper};this.props.windowScroller||(Kn.onScroll=this._onScroll,Kn.style.height="100%",Kn.style.overflowY="auto");const Vn={position:"relative",height:this._yPositions.getEstimatedHeight()};return a.createElement("div",{...Kn,"data-testid":"ListView"},a.createElement("div",{style:Vn},a.createElement("div",{style:{position:"absolute",top:0,margin:0,padding:0},className:this.props.itemsWrapperClassName,ref:this._initItemHolder},nn)))}}xe.defaultProps={initialDraw:he,itemsWrapperClassName:"",windowScroller:!1};var Me=e(97666),He=e(79152),Ve=e(92369),Oe=e(14607),Ne=e(55135),_e=e(51928);function qe({children:Qe,content:Ye,overlayClassName:Ze}){const dt=(0,a.useRef)(null);return a.createElement(Ne.D,{content:Ye,hideAfter:300},(Ct,Lt,Ft)=>a.createElement(a.Fragment,null,dt.current&&a.createElement(_e.J,{...Ft,referenceElement:dt.current,wrapperClassName:Ze,onMouseLeave:Lt,onMouseEnter:Ct}),a.cloneElement(Qe,{ref:dt,onMouseEnter:Ct,onMouseLeave:Lt})))}const rt="label";var mt=e(29165);const Je=()=>({CopyIcon:(0,n.css)`
      background-color: transparent;
      border: none;
      color: inherit;
      height: 100%;
      overflow: hidden;
      &:focus {
        background-color: rgba(255, 255, 255, 0.25);
        color: inherit;
      }
    `});function Ae(Qe){const Ye=(0,g.wW)(Je),[Ze,dt]=(0,a.useState)(!1),Ct=()=>{navigator.clipboard.writeText(Qe.copyText),dt(!0)};return a.createElement(Oe.u,{content:Ze?"Copied":Qe.tooltipTitle},a.createElement(mt.zx,{className:s()(Ye.CopyIcon),type:"button",icon:Qe.icon,onClick:Ct}))}Ae.defaultProps={icon:"copy",className:void 0};var Ke=e(23932),Xe=e.n(Ke);const ne="copyIcon",Z=Qe=>({KeyValueTable:(0,n.css)`
      label: KeyValueTable;
      background: ${(0,u.h)(Qe,"#fff")};
      border: 1px solid ${(0,u.h)(Qe,"#ddd")};
      margin-bottom: 0.5rem;
      max-height: 450px;
      overflow: auto;
    `,body:(0,n.css)`
      label: body;
      vertical-align: baseline;
    `,row:(0,n.css)`
      label: row;
      & > td {
        padding: 0rem 0.5rem;
        height: 30px;
      }
      &:nth-child(2n) > td {
        background: ${(0,u.h)(Qe,"#f5f5f5")};
      }
      &:not(:hover) .${ne} {
        visibility: hidden;
      }
    `,keyColumn:(0,n.css)`
      label: keyColumn;
      color: ${(0,u.h)(Qe,"#888")};
      white-space: pre;
      width: 125px;
    `,copyColumn:(0,n.css)`
      label: copyColumn;
      text-align: right;
    `,linkIcon:(0,n.css)`
      label: linkIcon;
      vertical-align: middle;
      font-weight: bold;
    `}),ee=/^(\[|\{)/;function ce(Qe){if(typeof Qe=="string"&&ee.test(Qe))try{return JSON.parse(Qe)}catch{}return Qe}const be=Qe=>a.createElement("a",{href:Qe.href,title:Qe.title,target:"_blank",rel:"noopener noreferrer"},Qe.children," ",a.createElement(Me.J,{name:"external-link-alt"}));be.defaultProps={title:""};function Ee(Qe){const{data:Ye,linksGetter:Ze}=Qe,dt=(0,g.wW)(Z);return a.createElement("div",{className:s()(dt.KeyValueTable),"data-testid":"KeyValueTable"},a.createElement("table",{className:y.K9},a.createElement("tbody",{className:dt.body},Ye.map((Ct,Lt)=>{const Ft={__html:Xe()(ce(Ct.value))},Yt=a.createElement("div",{className:y.b$,dangerouslySetInnerHTML:Ft}),nn=Ze?Ze(Ye,Lt):null;let an;return nn&&nn.length?an=a.createElement("div",null,a.createElement(be,{href:nn[0].url,title:nn[0].text},Yt)):an=Yt,a.createElement("tr",{className:dt.row,key:`${Ct.key}-${Lt}`},a.createElement("td",{className:dt.keyColumn,"data-testid":"KeyValueTable--keyColumn"},Ct.key),a.createElement("td",null,an),a.createElement("td",{className:dt.copyColumn},a.createElement(Ae,{className:ne,copyText:JSON.stringify(Ct,null,2),tooltipTitle:"Copy JSON"})))}))))}const Be=Qe=>({header:(0,n.css)`
      label: header;
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,u.h)(Qe,"#e8e8e8")};
      }
    `,headerEmpty:(0,n.css)`
      label: headerEmpty;
      background: none;
      cursor: initial;
    `,headerHighContrast:(0,n.css)`
      label: headerHighContrast;
      &:hover {
        background: ${(0,u.h)(Qe,"#ddd")};
      }
    `,emptyIcon:(0,n.css)`
      label: emptyIcon;
      color: ${(0,u.h)(Qe,"#aaa")};
    `,summary:(0,n.css)`
      label: summary;
      display: inline;
      list-style: none;
      padding: 0;
    `,summaryItem:(0,n.css)`
      label: summaryItem;
      display: inline;
      margin-left: 0.7em;
      padding-right: 0.5rem;
      border-right: 1px solid ${(0,u.h)(Qe,"#ddd")};
      &:last-child {
        padding-right: 0;
        border-right: none;
      }
    `,summaryLabel:(0,n.css)`
      label: summaryLabel;
      color: ${(0,u.h)(Qe,"#777")};
    `,summaryDelim:(0,n.css)`
      label: summaryDelim;
      color: ${(0,u.h)(Qe,"#bbb")};
      padding: 0 0.2em;
    `});function Le(Qe){const{data:Ye}=Qe,Ze=(0,g.wW)(Be);return!Array.isArray(Ye)||!Ye.length?null:a.createElement("ul",{className:Ze.summary},Ye.map((dt,Ct)=>a.createElement("li",{className:Ze.summaryItem,key:`${dt.key}-${Ct}`},a.createElement("span",{className:Ze.summaryLabel},dt.key),a.createElement("span",{className:Ze.summaryDelim},"="),String(dt.value))))}Le.defaultProps={data:null};function ze(Qe){const{className:Ye,data:Ze,highContrast:dt,interactive:Ct,isOpen:Lt,label:Ft,linksGetter:Yt,onToggle:nn}=Qe,an=!Array.isArray(Ze)||!Ze.length,Nn=(0,g.wW)(Be),Kn=s()(y.Im,{[Nn.emptyIcon]:an});let Vn=null,Hn=null;return Ct&&(Vn=Lt?a.createElement(Me.J,{name:"angle-down",className:Kn}):a.createElement(Me.J,{name:"angle-right",className:Kn}),Hn={"aria-checked":Lt,onClick:an?null:nn,role:"switch"}),a.createElement("div",{className:s()(Ye,y.ty)},a.createElement("div",{className:s()(Nn.header,{[Nn.headerEmpty]:an,[Nn.headerHighContrast]:dt&&!an}),...Hn,"data-testid":"AccordianKeyValues--header"},Vn,a.createElement("strong",{"data-test":rt},Ft,Lt||":"),!Lt&&a.createElement(Le,{data:Ze})),Lt&&a.createElement(Ee,{data:Ze,linksGetter:Yt}))}ze.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const Fe=Qe=>({AccordianLogs:(0,n.css)`
      label: AccordianLogs;
      border: 1px solid ${(0,u.h)(Qe,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianLogsHeader:(0,n.css)`
      label: AccordianLogsHeader;
      background: ${(0,u.h)(Qe,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,u.h)(Qe,"#dadada")};
      }
    `,AccordianLogsContent:(0,n.css)`
      label: AccordianLogsContent;
      background: ${(0,u.h)(Qe,"#f0f0f0")};
      border-top: 1px solid ${(0,u.h)(Qe,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianLogsFooter:(0,n.css)`
      label: AccordianLogsFooter;
      color: ${(0,u.h)(Qe,"#999")};
    `});function $e(Qe){const{interactive:Ye,isOpen:Ze,linksGetter:dt,logs:Ct,openedItems:Lt,onItemToggle:Ft,onToggle:Yt,timestamp:nn}=Qe;let an=null,Nn="span",Kn=null;Ye&&(an=Ze?a.createElement(Me.J,{name:"angle-down",className:y.Im}):a.createElement(Me.J,{name:"angle-right",className:"u-align-icon"}),Nn="a",Kn={"aria-checked":Ze,onClick:Yt,role:"switch"});const Vn=(0,g.wW)(Fe);return a.createElement("div",{className:Vn.AccordianLogs},a.createElement(Nn,{className:Vn.AccordianLogsHeader,...Kn},an," ",a.createElement("strong",null,"Events")," (",Ct.length,")"),Ze&&a.createElement("div",{className:Vn.AccordianLogsContent},(0,De.sortBy)(Ct,"timestamp").map((Hn,ua)=>a.createElement(ze,{key:`${Hn.timestamp}-${ua}`,className:ua<Ct.length-1?y.bi:null,data:Hn.fields||[],highContrast:!0,interactive:Ye,isOpen:Lt?Lt.has(Hn):!1,label:`${(0,C.LU)(Hn.timestamp-nn)}`,linksGetter:dt,onToggle:Ye&&Ft?()=>Ft(Hn):null})),a.createElement("small",{className:Vn.AccordianLogsFooter},"Log timestamps are relative to the start time of the full trace.")))}$e.defaultProps={interactive:!0,linksGetter:void 0,onItemToggle:void 0,onToggle:void 0,openedItems:void 0};const et=Qe=>({wrapper:(0,n.css)({label:"wrapper",bottom:0,left:0,position:"absolute",right:0,top:0,overflow:"hidden",zIndex:0}),bar:(0,n.css)({label:"bar",borderRadius:Qe.shape.radius.default,minWidth:"2px",position:"absolute",height:"36%",top:"32%"}),rpc:(0,n.css)({label:"rpc",position:"absolute",top:"35%",bottom:"35%",zIndex:1}),label:(0,n.css)({label:"label",color:"#aaa",fontSize:"12px",fontFamily:"'Helvetica Neue', Helvetica, Arial, sans - serif",lineHeight:"1em",whiteSpace:"nowrap",padding:"0 0.5em",position:"absolute"}),logMarker:(0,n.css)({label:"logMarker",backgroundColor:(0,u.h)(Qe,"#2c3235"),cursor:"pointer",height:"60%",minWidth:"1px",position:"absolute",top:"20%","&:hover":{backgroundColor:(0,u.h)(Qe,"#464c54")},"&::before, &::after":{content:"''",position:"absolute",top:0,bottom:0,right:0,border:"1px solid transparent"},"&::after":{left:0}}),criticalPath:(0,n.css)({position:"absolute",top:"45%",height:"11%",zIndex:2,overflow:"hidden",background:(0,u.h)(Qe,"#f1f1f1"),borderLeft:`1px solid ${(0,u.h)(Qe,"#2c3235")}`,borderRight:`1px solid ${(0,u.h)(Qe,"#2c3235")}`})});function tt(Qe){return`${(Qe*100).toFixed(1)}%`}function it(Qe){return`${Qe*100}%`}function vt({criticalPath:Qe,viewEnd:Ye,viewStart:Ze,getViewedBounds:dt,color:Ct,shortLabel:Lt,longLabel:Ft,onClick:Yt,rpc:nn,traceStartTime:an,span:Nn,className:Kn,labelClassName:Vn}){const[Hn,ua]=(0,a.useState)(Lt),Qn=()=>ua(Lt),ha=()=>ua(Ft),oa=(0,De.groupBy)(Nn.logs,Ba=>{const na=dt(Ba.timestamp,Ba.timestamp).start;return tt(Math.round(na*500)/500)}),xa=(0,g.wW)(et);return a.createElement("div",{className:s()(xa.wrapper,Kn),onBlur:Qn,onClick:Yt,onFocus:ha,onMouseOut:Qn,onMouseOver:ha,"aria-hidden":!0,"data-testid":Ve.wl.components.TraceViewer.spanBar},a.createElement("div",{"aria-label":Hn,className:s()(xa.bar),style:{background:Ct,left:tt(Ze),width:tt(Ye-Ze)}},a.createElement("div",{className:s()(xa.label,Vn),"data-testid":"SpanBar--label"},Hn)),a.createElement("div",null,Object.keys(oa).map(Ba=>a.createElement(qe,{key:Ba,content:a.createElement($e,{interactive:!1,isOpen:!0,logs:oa[Ba],timestamp:an})},a.createElement("div",{"data-testid":"SpanBar--logMarker",className:s()(xa.logMarker),style:{left:Ba}})))),nn&&a.createElement("div",{className:s()(xa.rpc),style:{background:nn.color,left:tt(nn.viewStart),width:tt(nn.viewEnd-nn.viewStart)}}),Qe?.map((Ba,na)=>{const Fa=dt(Ba.section_start,Ba.section_end),ja=Fa.start,ps=Fa.end,Is=`${Ba.spanId}-${na}`;return a.createElement(Oe.u,{key:Is,placement:"top",content:a.createElement("div",null,"A segment on the ",a.createElement("em",null,"critical path")," of the overall trace/request/workflow.")},a.createElement("div",{"data-testid":"SpanBar--criticalPath",className:xa.criticalPath,style:{left:it(ja),width:it(ps-ja)}}))}))}const yt=a.memo(vt);var Wt=e(69707),ut=e(19841);const pt=(Qe,Ye,Ze,dt)=>(Qe.sort(function(Ct,Lt){return(Ct.title||"link").toLowerCase().localeCompare((Lt.title||"link").toLowerCase())}),Qe.map((Ct,Lt)=>a.createElement(Wt.s,{key:Lt,label:Ct.title||"Link",onClick:Ct.onClick?Ft=>{(0,o.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:dt,grafana_version:r.config.buildInfo.version,type:Ct.type,location:"menu"}),Ft?.preventDefault(),Ct.onClick(Ft),Ze()}:void 0,url:Ct.href,className:Ye.menuItem}))),we=({links:Qe,datasourceType:Ye,color:Ze})=>{const dt=(0,g.wW)(()=>lt(Ze)),[Ct,Lt]=(0,a.useState)(!1),[Ft,Yt]=(0,a.useState)({x:0,y:0}),nn=()=>Lt(!1);return a.createElement("div",{"data-testid":"SpanLinksMenu",className:dt.wrapper},a.createElement("button",{onClick:an=>{Lt(!0),Yt({x:an.pageX,y:an.pageY})},className:dt.button},a.createElement(Me.J,{name:"link",className:dt.icon})),Ct?a.createElement(ut.x,{onClose:()=>Lt(!1),renderMenuItems:()=>pt(Qe,dt,nn,Ye),focusOnOpen:!1,x:Ft.x,y:Ft.y}):null)},lt=Qe=>({wrapper:(0,n.css)`
      border: none;
      background: ${Qe}10;
      border-bottom: 1px solid ${Qe}CF;
      padding-right: 4px;
    `,button:(0,n.css)`
      background: transparent;
      border: none;
      padding: 0;
    `,icon:(0,n.css)`
      background: transparent;
      border: none;
      padding: 0;
    `,menuItem:(0,n.css)`
      max-width: 60ch;
      overflow: hidden;
    `});function Bt(Qe){return(0,De.get)((0,De.find)(Qe.references,({span:Ye,refType:Ze})=>Ye&&Ye.spanID&&(Ze==="CHILD_OF"||Ze==="FOLLOWS_FROM")),"span")}function Kt(Qe){const Ye=[];if(!Qe)return Ye;let Ze=Bt(Qe);for(;Ze;)Ye.push(Ze.spanID),Ze=Bt(Ze);return Ye}const It=(0,i.B)(Qe=>({SpanTreeOffset:(0,n.css)`
      label: SpanTreeOffset;
      color: ${(0,u.h)(Qe,"#000")};
      position: relative;
    `,SpanTreeOffsetParent:(0,n.css)`
      label: SpanTreeOffsetParent;
      &:hover {
        cursor: pointer;
      }
    `,indentGuide:(0,n.css)`
      label: indentGuide;
      /* The size of the indentGuide is based off of the iconWrapper */
      padding-right: 1rem;
      height: 100%;
      display: inline-flex;
      transition: padding 300ms ease-out;
      &::before {
        content: '';
        padding-left: 1px;
        background-color: ${(0,u.h)(Qe,"lightgrey")};
      }
    `,indentGuideActive:(0,n.css)`
      label: indentGuideActive;
      &::before {
        background-color: ${(0,u.h)(Qe,"#777")};
      }
    `,indentGuideThin:(0,n.css)`
      padding-right: 0.3rem;
    `,iconWrapper:(0,n.css)`
      label: iconWrapper;
      position: absolute;
      right: 0;
    `}));class Zt extends a.PureComponent{constructor(Ye){super(Ye),this.handleMouseLeave=(Ze,dt)=>{(!(Ze.relatedTarget instanceof HTMLSpanElement)||(0,De.get)(Ze,"relatedTarget.dataset.ancestorId")!==dt)&&this.props.removeHoverIndentGuideId(dt)},this.handleMouseEnter=(Ze,dt)=>{(!(Ze.relatedTarget instanceof HTMLSpanElement)||(0,De.get)(Ze,"relatedTarget.dataset.ancestorId")!==dt)&&this.props.addHoverIndentGuideId(dt)},this.ancestorIds=Kt(Ye.span),this.ancestorIds.push("root"),this.ancestorIds.reverse()}render(){const{childrenVisible:Ye,onClick:Ze,showChildrenIcon:dt,span:Ct,theme:Lt,visibleSpanIds:Ft}=this.props,{hasChildren:Yt,spanID:nn}=Ct,an=Yt?{onClick:Ze,role:"switch","aria-checked":Ye}:null,Nn=dt&&Yt&&(Ye?a.createElement(Me.J,{name:"angle-down","data-testid":"icon-arrow-down",size:"sm"}):a.createElement(Me.J,{name:"angle-right","data-testid":"icon-arrow-right",size:"sm"})),Kn=It(Lt);return a.createElement("span",{className:s()(Kn.SpanTreeOffset,{[Kn.SpanTreeOffsetParent]:Yt}),...an},this.ancestorIds.map((Vn,Hn)=>a.createElement("span",{key:Vn,className:s()(Kn.indentGuide,{[Kn.indentGuideActive]:this.props.hoverIndentGuideIds.has(Vn),[Kn.indentGuideThin]:Hn!==this.ancestorIds.length-1&&Vn!=="root"&&!Ft.includes(Vn)}),"data-ancestor-id":Vn,"data-testid":"SpanTreeOffset--indentGuide",onMouseEnter:ua=>this.handleMouseEnter(ua,Vn),onMouseLeave:ua=>this.handleMouseLeave(ua,Vn)})),Nn&&a.createElement("span",{className:Kn.iconWrapper,onMouseEnter:Vn=>this.handleMouseEnter(Vn,nn),onMouseLeave:Vn=>this.handleMouseLeave(Vn,nn),"data-testid":"icon-wrapper"},Nn))}}Zt.displayName="UnthemedSpanTreeOffset",Zt.defaultProps={childrenVisible:!1,showChildrenIcon:!0};const yn=(0,g.HE)(Zt),xn="spanBar",An="spanBarLabel",qt="nameWrapper",On="nameWrapperMatchingFilter",wn="jaegerView",Zn="nameColumn",Aa=(0,i.B)((Qe,Ye)=>{const Ze={label:"flash",flash:(0,n.keyframes)`
    from {
      background-color: ${(0,u.h)(Qe,"#68b9ff")};
    }
    to {
      background-color: 'default';
    }
  `},dt=Ye?"":(0,u.h)(Qe,"#fffce4");return{nameWrapper:(0,n.css)`
      label: nameWrapper;
      line-height: 27px;
      overflow: hidden;
      display: flex;
    `,nameWrapperMatchingFilter:(0,n.css)`
      label: nameWrapperMatchingFilter;
      background-color: ${dt};
    `,nameColumn:(0,n.css)`
      label: nameColumn;
      position: relative;
      white-space: nowrap;
      z-index: 1;
      &:hover {
        z-index: 1;
      }
    `,endpointName:(0,n.css)`
      label: endpointName;
      color: ${(0,u.h)(Qe,"#484848")};
      font-size: 0.9em;
    `,view:(0,n.css)`
      label: view;
      position: relative;
    `,viewExpanded:(0,n.css)`
      label: viewExpanded;
      background: ${(0,u.h)(Qe,"#f8f8f8")};
      outline: 1px solid ${(0,u.h)(Qe,"#ddd")};
    `,viewExpandedAndMatchingFilter:(0,n.css)`
      label: viewExpandedAndMatchingFilter;
      background: ${(0,u.h)(Qe,"#fff3d7")};
      outline: 1px solid ${(0,u.h)(Qe,"#ddd")};
    `,row:(0,n.css)`
      label: row;
      font-size: 0.9em;
      &:hover .${xn} {
        opacity: 1;
      }
      &:hover .${An} {
        color: ${(0,u.h)(Qe,"#000")};
      }
      &:hover .${qt} {
        background: #f8f8f8;
        background: linear-gradient(
          90deg,
          ${(0,u.h)(Qe,"#fafafa")},
          ${(0,u.h)(Qe,"#f8f8f8")} 75%,
          ${(0,u.h)(Qe,"#eee")}
        );
      }
      &:hover .${wn} {
        background-color: ${(0,u.h)(Qe,"#f5f5f5")};
        outline: 1px solid ${(0,u.h)(Qe,"#ddd")};
      }
    `,rowClippingLeft:(0,n.css)`
      label: rowClippingLeft;
      & .${Zn}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to right,
          ${(0,u.h)(Qe,"rgba(25, 25, 25, 0.25)")},
          ${(0,u.h)(Qe,"rgba(32, 32, 32, 0)")}
        );
        left: 100%;
        z-index: -1;
      }
    `,rowClippingRight:(0,n.css)`
      label: rowClippingRight;
      & .${wn}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to left,
          ${(0,u.h)(Qe,"rgba(25, 25, 25, 0.25)")},
          ${(0,u.h)(Qe,"rgba(25, 25, 25, 0.25)")}
        );
        right: 0%;
        z-index: 1;
      }
    `,rowExpanded:(0,n.css)`
      label: rowExpanded;
      & .${xn} {
        opacity: 1;
      }
      & .${An} {
        color: ${(0,u.h)(Qe,"#000")};
      }
      & .${qt}, &:hover .${qt} {
        background: ${(0,u.h)(Qe,"#f0f0f0")};
        box-shadow: 0 1px 0 ${(0,u.h)(Qe,"#ddd")};
      }
      & .${On} {
        background: ${(0,u.h)(Qe,"#fff3d7")};
      }
      &:hover .${wn} {
        background: ${(0,u.h)(Qe,"#eee")};
      }
    `,rowMatchingFilter:(0,n.css)`
      label: rowMatchingFilter;
      // background-color: ${(0,u.h)(Qe,"#fffbde")};
      &:hover .${qt} {
        background: linear-gradient(
          90deg,
          ${(0,u.h)(Qe,"#fffbde")},
          ${(0,u.h)(Qe,"#fffbde")} 75%,
          ${(0,u.h)(Qe,"#f7f1c6")}
        );
      }
      &:hover .${wn} {
        background-color: ${(0,u.h)(Qe,"#f7f1c6")};
        outline: 1px solid ${(0,u.h)(Qe,"#ddd")};
      }
    `,rowFocused:(0,n.css)`
      label: rowFocused;
      background-color: ${(0,u.h)(Qe,"#cbe7ff")};
      animation: ${Ze.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      & .${qt}, .${wn}, .${On} {
        background-color: ${(0,u.h)(Qe,"#cbe7ff")};
        animation: ${Ze.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      }
      & .${xn} {
        opacity: 1;
      }
      & .${An} {
        color: ${(0,u.h)(Qe,"#000")};
      }
      &:hover .${qt}, :hover .${wn} {
        background: ${(0,u.h)(Qe,"#d5ebff")};
        box-shadow: 0 1px 0 ${(0,u.h)(Qe,"#ddd")};
      }
    `,rowExpandedAndMatchingFilter:(0,n.css)`
      label: rowExpandedAndMatchingFilter;
      &:hover .${wn} {
        background: ${(0,u.h)(Qe,"#ffeccf")};
      }
    `,name:(0,n.css)`
      label: name;
      color: ${(0,u.h)(Qe,"#000")};
      cursor: pointer;
      flex: 1 1 auto;
      outline: none;
      overflow-y: hidden;
      overflow-x: auto;
      padding-left: 4px;
      padding-right: 0.25em;
      position: relative;
      -ms-overflow-style: none;
      scrollbar-width: none;
      &::-webkit-scrollbar {
        display: none;
      }
      &:focus {
        text-decoration: none;
      }
      &:hover > span {
        color: ${(0,u.h)(Qe,"#000")};
      }
      text-align: left;
      background: transparent;
      border: none;
      border-bottom-width: 1px;
      border-bottom-style: solid;
    `,nameDetailExpanded:(0,n.css)`
      label: nameDetailExpanded;
      &::before {
        bottom: 0;
      }
    `,svcName:(0,n.css)`
      label: svcName;
      font-size: 0.9em;
      font-weight: bold;
      margin-right: 0.25rem;
    `,svcNameChildrenCollapsed:(0,n.css)`
      label: svcNameChildrenCollapsed;
      font-weight: bold;
      font-style: italic;
    `,errorIcon:(0,n.css)`
      label: errorIcon;
      border-radius: 6.5px;
      color: ${(0,u.h)(Qe,"#fff")};
      font-size: 0.85em;
      margin-right: 0.25rem;
      padding: 1px;
    `,rpcColorMarker:(0,n.css)`
      label: rpcColorMarker;
      border-radius: 6.5px;
      display: inline-block;
      font-size: 0.85em;
      height: 1em;
      margin-right: 0.25rem;
      padding: 1px;
      width: 1em;
      vertical-align: middle;
    `,labelRight:(0,n.css)`
      label: labelRight;
      left: 100%;
    `,labelLeft:(0,n.css)`
      label: labelLeft;
      right: 100%;
    `}});class Ea extends a.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._childrenToggle=()=>{this.props.onChildrenToggled(this.props.span.spanID)},this.getSpanBarLabel=(Ye,Ze,dt)=>{const Ct=Ze?.type??"";if(Ct===He.Hn)return"";if(Ct===""||Ct===He.th)return`(${dt})`;if(Ct===He.Kg){const Lt=Ze?.tag?.trim()??"";if(Lt!==""&&Ye.tags){const Ft=Ye.tags?.find(nn=>nn.key===Lt);if(Ft)return`(${Ft.value})`;const Yt=Ye.process?.tags?.find(nn=>nn.key===Lt);if(Yt)return`(${Yt.value})`}}return""}}render(){const{className:Ye,color:Ze,spanBarOptions:dt,columnDivision:Ct,isChildrenExpanded:Lt,isDetailExpanded:Ft,isMatchingFilter:Yt,showSpanFilterMatchesOnly:nn,isFocused:an,numTicks:Nn,rpc:Kn,noInstrumentedServer:Vn,showErrorIcon:Hn,getViewedBounds:ua,traceStartTime:Qn,span:ha,hoverIndentGuideIds:oa,addHoverIndentGuideId:xa,removeHoverIndentGuideId:Ba,clippingLeft:na,clippingRight:Fa,theme:ja,createSpanLink:ps,datasourceType:Is,showServiceName:bs,visibleSpanIds:vs,criticalPath:qs}=this.props,{duration:Rs,hasChildren:Dr,operationName:qr,process:{serviceName:Vr}}=ha,Qa=(0,C.LU)(Rs),gr=ua(ha.startTime,ha.startTime+ha.duration),Gs=gr.start,Wn=gr.end,aa=Aa(ja,nn),ya=`${Vr}::${qr}`;let Ya,ws;return Gs>1-Wn?(Ya=`${ya} | ${Qa}`,ws=aa.labelLeft):(Ya=`${Qa} | ${ya}`,ws=aa.labelRight),a.createElement(z,{className:s()(aa.row,{[aa.rowExpanded]:Ft,[aa.rowMatchingFilter]:Yt,[aa.rowExpandedAndMatchingFilter]:Yt&&Ft,[aa.rowFocused]:an,[aa.rowClippingLeft]:na,[aa.rowClippingRight]:Fa},Ye)},a.createElement(z.Cell,{className:s()(aa.nameColumn,Zn),width:Ct},a.createElement("div",{className:s()(aa.nameWrapper,qt,{[aa.nameWrapperMatchingFilter]:Yt,nameWrapperMatchingFilter:Yt})},a.createElement(yn,{onClick:Dr?this._childrenToggle:void 0,childrenVisible:Lt,span:ha,hoverIndentGuideIds:oa,addHoverIndentGuideId:xa,removeHoverIndentGuideId:Ba,visibleSpanIds:vs}),a.createElement("button",{type:"button",className:s()(aa.name,{[aa.nameDetailExpanded]:Ft}),"aria-checked":Ft,title:ya,onClick:this._detailToggle,role:"switch",style:{background:`${Ze}10`,borderBottomColor:`${Ze}CF`},tabIndex:0},Hn&&a.createElement(Me.J,{name:"exclamation-circle",style:{backgroundColor:ha.errorIconColor?(0,u.h)(ja,ha.errorIconColor):(0,u.h)(ja,"#db2828")},className:aa.errorIcon}),bs&&a.createElement("span",{className:s()(aa.svcName,{[aa.svcNameChildrenCollapsed]:Dr&&!Lt})},`${Vr} `),Kn&&a.createElement("span",null,a.createElement(Me.J,{name:"arrow-right"})," ",a.createElement("i",{className:aa.rpcColorMarker,style:{background:Kn.color}}),Kn.serviceName),Vn&&a.createElement("span",null,a.createElement(Me.J,{name:"arrow-right"})," ",a.createElement("i",{className:aa.rpcColorMarker,style:{background:Vn.color}}),Vn.serviceName),a.createElement("span",{className:aa.endpointName},Kn?Kn.operationName:qr),a.createElement("span",{className:aa.endpointName}," ",this.getSpanBarLabel(ha,dt,Qa))),ps&&(()=>{const as=ps(ha),eo=as?.length||0;return as&&eo===1?as[0]?a.createElement("a",{href:as[0].href,target:"_blank",style:{background:`${Ze}10`,borderBottom:`1px solid ${Ze}CF`,paddingRight:"4px"},rel:"noopener noreferrer",onClick:as[0].onClick?Es=>{!(Es.ctrlKey||Es.metaKey||Es.shiftKey)&&as[0].onClick&&(Es.preventDefault(),as[0].onClick(Es))}:void 0},as[0].content):null:as&&eo>1?a.createElement(we,{links:as,datasourceType:Is,color:Ze}):null})())),a.createElement(z.Cell,{className:s()(aa.view,wn,{[aa.viewExpanded]:Ft,[aa.viewExpandedAndMatchingFilter]:Yt&&Ft}),"data-testid":"span-view",style:{cursor:"pointer"},width:1-Ct,onClick:this._detailToggle},a.createElement(_,{numTicks:Nn}),a.createElement(yt,{criticalPath:qs,rpc:Kn,viewStart:Gs,viewEnd:Wn,getViewedBounds:ua,color:Ze,shortLabel:Qa,longLabel:Ya,traceStartTime:Qn,span:ha,labelClassName:`${An} ${ws}`,className:xn})))}}Ea.displayName="UnthemedSpanBarRow",Ea.defaultProps={className:"",rpc:null};const Nt=(0,g.HE)(Ea);var en=e(8109),rn=e(12537),un=e(91),on=e(77937),In=e(7073),Sn=e(29262),Ln=e(90835);const hn=Qe=>({Divider:(0,n.css)`
      background: ${(0,u.h)(Qe,"#ddd")};
    `,DividerVertical:(0,n.css)`
      label: DividerVertical;
      display: inline-block;
      width: 1px;
      height: 0.9em;
      margin: 0 8px;
      vertical-align: middle;
    `,DividerHorizontal:(0,n.css)`
      label: DividerHorizontal;
      display: block;
      height: 1px;
      width: 100%;
      margin: 24px 0;
      clear: both;
      vertical-align: middle;
      position: relative;
      top: -0.06em;
    `});function Gn({className:Qe,style:Ye,type:Ze}){const dt=(0,g.wW)(hn);return a.createElement("div",{style:Ye,className:(0,n.cx)(dt.Divider,Ze==="horizontal"?dt.DividerHorizontal:dt.DividerVertical,Qe)})}const Cn=Qe=>Ye=>({LabeledList:(0,n.css)`
      label: LabeledList;
      list-style: none;
      margin: 0;
      padding: 0;
      ${Qe&&`
        margin-right: -8px;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-end;
      `}
    `,LabeledListItem:(0,n.css)`
      label: LabeledListItem;
      display: inline-block;
      ${Qe&&`
        border-right: 1px solid ${(0,u.h)(Ye,"#ddd")};
        padding: 0 8px;
      `}
    `,LabeledListLabel:(0,n.css)`
      label: LabeledListLabel;
      color: ${Ye.isLight?"#999":"#666"};
      margin-right: 0.25rem;
    `,LabeledListValue:(0,n.css)`
      label: LabeledListValue;
      ${!Qe&&"margin-right: 0.55rem;"}
    `});function Yn(Qe){const{className:Ye,divider:Ze=!1,items:dt}=Qe,Ct=(0,g.wW)(Cn(Ze));return a.createElement("ul",{className:s()(Ct.LabeledList,Ye)},dt.map(({key:Lt,label:Ft,value:Yt})=>a.createElement("li",{className:Ct.LabeledListItem,key:`${Lt}`},a.createElement("span",{className:Ct.LabeledListLabel},Ft),a.createElement("strong",{className:Ct.LabeledListValue},Yt))))}const Xn="kind",Pt="status",Dt="status.message",$t="library.name",jt="library.version",mn="trace.state",Dn="id";var vn=e(77061);function fa(Qe){const{reference:Ye,children:Ze,createFocusSpanLink:dt}=Qe,Ct=dt(Ye.traceID,Ye.spanID);return a.createElement("a",{href:Ct.href,target:Ct.target,rel:"noopener noreferrer",onClick:Ct.onClick?Lt=>{Lt.preventDefault(),Ct.onClick(Lt)}:void 0},Ze)}const Pa=Qe=>({AccordianReferenceItem:(0,n.css)`
      border-bottom: 1px solid ${(0,u.h)(Qe,"#d8d8d8")};
    `,AccordianKeyValues:(0,n.css)`
      margin-left: 10px;
    `,AccordianReferences:(0,n.css)`
      label: AccordianReferences;
      border: 1px solid ${(0,u.h)(Qe,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianReferencesHeader:(0,n.css)`
      label: AccordianReferencesHeader;
      background: ${(0,u.h)(Qe,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,u.h)(Qe,"#dadada")};
      }
    `,AccordianReferencesContent:(0,n.css)`
      label: AccordianReferencesContent;
      background: ${(0,u.h)(Qe,"#f0f0f0")};
      border-top: 1px solid ${(0,u.h)(Qe,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianReferencesFooter:(0,n.css)`
      label: AccordianReferencesFooter;
      color: ${(0,u.h)(Qe,"#999")};
    `,ReferencesList:(0,n.css)`
      background: #fff;
      border: 1px solid #ddd;
      margin-bottom: 0.7em;
      max-height: 450px;
      overflow: auto;
    `,list:(0,n.css)`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
      background: #fff;
    `,itemContent:(0,n.css)`
      padding: 0.25rem 0.5rem;
      display: flex;
      width: 100%;
      justify-content: space-between;
    `,item:(0,n.css)`
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `,debugInfo:(0,n.css)`
      letter-spacing: 0.25px;
      margin: 0.5em 0 0;
      flex-wrap: wrap;
      display: flex;
      justify-content: flex-end;
    `,debugLabel:(0,n.css)`
      margin: 0 5px 0 5px;
      &::before {
        color: #bbb;
        content: attr(data-label);
      }
    `,serviceName:(0,n.css)`
      margin-right: 8px;
    `,title:(0,n.css)`
      display: flex;
      align-items: center;
      gap: 4px;
    `});function La(Qe){const{data:Ye,createFocusSpanLink:Ze,openedItems:dt,onItemToggle:Ct,interactive:Lt}=Qe,Ft=(0,g.wW)(Pa);return a.createElement("div",{className:Ft.AccordianReferencesContent},Ye.map((Yt,nn)=>a.createElement("div",{className:nn<Ye.length-1?Ft.AccordianReferenceItem:void 0,key:nn},a.createElement("div",{className:Ft.item,key:`${Yt.spanID}`},a.createElement(fa,{reference:Yt,createFocusSpanLink:Ze},a.createElement("span",{className:Ft.itemContent},Yt.span?a.createElement("span",null,a.createElement("span",{className:(0,n.cx)("span-svc-name",Ft.serviceName)},Yt.span.process.serviceName),a.createElement("small",{className:"endpoint-name"},Yt.span.operationName)):a.createElement("span",{className:(0,n.cx)("span-svc-name",Ft.title)},"View Linked Span ",a.createElement(Me.J,{name:"external-link-alt"})),a.createElement("small",{className:Ft.debugInfo},a.createElement("span",{className:Ft.debugLabel,"data-label":"TraceID:"},Yt.traceID),a.createElement("span",{className:Ft.debugLabel,"data-label":"SpanID:"},Yt.spanID))))),!!Yt.tags?.length&&a.createElement("div",{className:Ft.AccordianKeyValues},a.createElement(ze,{className:nn<Ye.length-1?y.bi:null,data:Yt.tags||[],highContrast:!0,interactive:Lt,isOpen:dt?dt.has(Yt):!1,label:"attributes",linksGetter:null,onToggle:Lt&&Ct?()=>Ct(Yt):null})))))}const Ma=({data:Qe,interactive:Ye=!0,isOpen:Ze,onToggle:dt,onItemToggle:Ct,openedItems:Lt,createFocusSpanLink:Ft})=>{const Yt=!Array.isArray(Qe)||!Qe.length;let nn=null,an="span",Nn=null;Ye&&(nn=Ze?a.createElement(Me.J,{name:"angle-down",className:y.Im}):a.createElement(Me.J,{name:"angle-right",className:y.Im}),an="a",Nn={"aria-checked":Ze,onClick:Yt?null:dt,role:"switch"});const Kn=(0,g.wW)(Pa);return a.createElement("div",{className:Kn.AccordianReferences},a.createElement(an,{className:Kn.AccordianReferencesHeader,...Nn},nn,a.createElement("strong",null,a.createElement("span",null,"References"))," ","(",Qe.length,")"),Ze&&a.createElement(La,{data:Qe,openedItems:Lt,createFocusSpanLink:Ft,onItemToggle:Ct,interactive:Ye}))},ts=a.memo(Ma),ds=()=>({TextList:(0,n.css)`
      max-height: 450px;
      overflow: auto;
    `,List:(0,n.css)`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
    `,item:(0,n.css)`
      padding: 0.25rem 0.5rem;
      vertical-align: top;
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `});function ys(Qe){const{data:Ye}=Qe,Ze=(0,g.wW)(ds);return a.createElement("div",{className:s()(Ze.TextList),"data-testid":"TextList"},a.createElement("ul",{className:Ze.List},Ye.map((dt,Ct)=>a.createElement("li",{className:Ze.item,key:`${Ct}`},dt))))}const ns=Qe=>({header:(0,n.css)`
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,u.h)(Qe,"#e8e8e8")};
      }
    `});function qa({data:Qe}){return a.createElement(ys,{data:Qe})}function Ss(Qe){const{className:Ye,data:Ze,headerClassName:dt,interactive:Ct,isOpen:Lt,label:Ft,onToggle:Yt,TextComponent:nn=qa}=Qe,an=!Array.isArray(Ze)||!Ze.length,Nn=(0,g.wW)(Be),Kn=s()(y.Im,{[Nn.emptyIcon]:an});let Vn=null,Hn=null;Ct&&(Vn=Lt?a.createElement(Me.J,{name:"angle-down",className:Kn}):a.createElement(Me.J,{name:"angle-right",className:Kn}),Hn={"aria-checked":Lt,onClick:an?null:Yt,role:"switch"});const ua=(0,g.wW)(ns);return a.createElement("div",{className:Ye||""},a.createElement("div",{className:s()(ua.header,dt),...Hn,"data-testid":"AccordianText--header"},Vn,a.createElement("strong",null,Ft)," (",Ze.length,")"),Lt&&a.createElement(nn,{data:Ze}))}Ss.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};var wr=e(66137),ls=e(81838),zs=e(85745),ks=e(81223),es=e(52968),za=e(65512),Ls=e(87877);function pr(Qe){const{span:Ye,traceToProfilesOptions:Ze,timeZone:dt,traceFlameGraphs:Ct,setTraceFlameGraphs:Lt,setRedrawListView:Ft}=Qe,[Yt,{height:nn}]=(0,wr.Z)(),an=(0,g.wW)(cr),Nn=Ye.tags.filter(Qn=>Qn.key===Ln.wq),Kn=Nn.length>0?Nn[0].value:void 0,Vn=(0,a.useCallback)(()=>{const Qn=Math.floor(Ye.startTime/1e3)-3e4,ha=(Ye.startTime+Ye.duration)/1e3+3e4,oa=(0,zs.CQ)(ha),xa=(0,zs.CQ)(Qn);return{from:xa,to:oa,raw:{from:xa,to:oa}}},[Ye.duration,Ye.startTime]),Hn=async(Qn,ha)=>{const oa=await(0,za.ak)().get(ha);if(oa instanceof Ls.tF){const Ba=(await(0,ls.n)(oa.query(Qn))).data.find(na=>na.name==="response");if(Ba&&Ba.length>1)return Ba}},ua=(0,a.useCallback)(async(Qn,ha,oa)=>{let xa="{}";if(ha.customQuery&&ha.query)xa=ha.query;else{const Fa=ha.tags&&ha.tags.length>0?ha.tags:Ln.n4;xa=`{${(0,Ln.yN)(oa,Fa)}}`}const Ba={requestId:"span-flamegraph-requestId",interval:"2s",intervalMs:2e3,range:Vn(),scopedVars:{},app:ks.zj.Unknown,timezone:dt,startTime:oa.startTime,targets:[{labelSelector:xa,groupBy:[],profileTypeId:ha.profileTypeId??"",queryType:"profile",spanSelector:[Kn],refId:"span-flamegraph-refId",datasource:{type:Qn.type,uid:Qn.uid}}]},na=await Hn(Ba,Qn.uid);na&&na.length>0&&Lt({...Ct,[Kn]:na})},[Vn,Kn,Lt,dt,Ct]);return(0,a.useEffect)(()=>{if(r.config.featureToggles.traceToProfiles&&!Object.keys(Ct).includes(Kn)){let Qn;Ze&&Ze?.datasourceUid&&(Qn=(0,za.ak)().getInstanceSettings(Ze.datasourceUid)),Ze&&Qn&&ua(Qn,Ze,Ye)}},[Lt,Ye,Ct,Ze,Vn,dt,ua,Kn]),(0,a.useEffect)(()=>{Ft({})},[nn,Ft]),Ct[Kn]?a.createElement("div",{className:an.flameGraph,ref:Yt},a.createElement("div",{className:an.flameGraphTitle},"Flame graph"),a.createElement(es.Z,{data:Ct[Kn],getTheme:()=>r.config.theme2,showFlameGraphOnly:!0,disableCollapsing:!0})):a.createElement(a.Fragment,null)}const cr=()=>({flameGraph:(0,n.css)({label:"flameGraphInSpan",margin:"5px"}),flameGraphTitle:(0,n.css)({label:"flameGraphTitleInSpan",marginBottom:"5px",fontWeight:"bold"})}),Ns=Qe=>({header:(0,n.css)`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0 1rem;
      margin-bottom: 0.25rem;
    `,listWrapper:(0,n.css)`
      overflow: hidden;
    `,debugInfo:(0,n.css)`
      label: debugInfo;
      display: block;
      letter-spacing: 0.25px;
      margin: 0.5em 0 -0.75em;
      text-align: right;
    `,debugLabel:(0,n.css)`
      label: debugLabel;
      &::before {
        color: ${(0,u.h)(Qe,"#bbb")};
        content: attr(data-label);
      }
    `,debugValue:(0,n.css)`
      label: debugValue;
      background-color: inherit;
      border: none;
      color: ${(0,u.h)(Qe,"#888")};
      cursor: pointer;
      &:hover {
        color: ${(0,u.h)(Qe,"#333")};
      }
    `,AccordianWarnings:(0,n.css)`
      label: AccordianWarnings;
      background: ${(0,u.h)(Qe,"#fafafa")};
      border: 1px solid ${(0,u.h)(Qe,"#e4e4e4")};
      margin-bottom: 0.25rem;
    `,AccordianWarningsHeader:(0,n.css)`
      label: AccordianWarningsHeader;
      background: ${(0,u.h)(Qe,"#fff7e6")};
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,u.h)(Qe,"#ffe7ba")};
      }
    `,AccordianWarningsHeaderOpen:(0,n.css)`
      label: AccordianWarningsHeaderOpen;
      border-bottom: 1px solid ${(0,u.h)(Qe,"#e8e8e8")};
    `,AccordianWarningsLabel:(0,n.css)`
      label: AccordianWarningsLabel;
      color: ${(0,u.h)(Qe,"#d36c08")};
    `,Textarea:(0,n.css)`
      word-break: break-all;
      white-space: pre;
    `,LinkIcon:(0,n.css)`
      font-size: 1.5em;
    `});function Ur(Qe){const{detailState:Ye,linksGetter:Ze,logItemToggle:dt,logsToggle:Ct,processToggle:Lt,span:Ft,tagsToggle:Yt,traceStartTime:nn,warningsToggle:an,stackTracesToggle:Nn,referencesToggle:Kn,referenceItemToggle:Vn,createSpanLink:Hn,createFocusSpanLink:ua,datasourceType:Qn,traceFlameGraphs:ha,setTraceFlameGraphs:oa,traceToProfilesOptions:xa,setRedrawListView:Ba}=Qe,{isTagsOpen:na,isProcessOpen:Fa,logs:ja,isWarningsOpen:ps,references:Is,isStackTracesOpen:bs}=Ye,{operationName:vs,process:qs,duration:Rs,relativeStartTime:Dr,startTime:qr,traceID:Vr,spanID:Qa,logs:gr,tags:Gs,warnings:Wn,references:aa,stackTraces:ya}=Ft,{timeZone:Ya}=Qe;let ws=[{key:"svc",label:"Service:",value:qs.serviceName},{key:"duration",label:"Duration:",value:(0,C.LU)(Rs)},{key:"start",label:"Start Time:",value:(0,C.LU)(Dr)+Go(qr,Ya)},...Ft.childSpanCount>0?[{key:"child_count",label:"Child Count:",value:Ft.childSpanCount}]:[]];const as=(0,g.wW)(Ns);Ft.kind&&ws.push({key:Xn,label:"Kind:",value:Ft.kind}),Ft.statusCode!==void 0&&ws.push({key:Pt,label:"Status:",value:en.Q[Ft.statusCode].toLowerCase()}),Ft.statusMessage&&ws.push({key:Dt,label:"Status Message:",value:Ft.statusMessage}),Ft.instrumentationLibraryName&&ws.push({key:$t,label:"Library Name:",value:Ft.instrumentationLibraryName}),Ft.instrumentationLibraryVersion&&ws.push({key:jt,label:"Library Version:",value:Ft.instrumentationLibraryVersion}),Ft.traceState&&ws.push({key:mn,label:"Trace State:",value:Ft.traceState});const eo=(ss,Mr,Tr,fo)=>a.createElement(on.k,{link:{...ss,title:Tr,target:"_blank",origin:ss.field,onClick:Ji=>{(0,o.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:Qn,grafana_version:r.config.buildInfo.version,type:Mr,location:"spanDetails"}),ss.onClick?ss.onClick?.(Ji):un.E1.push(ss.href)}},buttonProps:{icon:fo}});let Es=null,So=null;if(Hn){const ss=Hn(Ft),Mr=ss?.filter(fo=>fo.type===vn.u.Logs);ss&&Mr&&Mr.length>0&&(Es=eo(Mr[0],vn.u.Logs,"Logs for this span","gf-logs"));const Tr=ss?.filter(fo=>fo.type===vn.u.Profiles&&fo.title===Sn.vM);ss&&Tr&&Tr.length>0&&(So=eo(Tr[0],vn.u.Profiles,"Profiles for this span","link"))}const _r=ua(Vr,Qa);return a.createElement("div",{"data-testid":"span-detail-component"},a.createElement("div",{className:as.header},a.createElement("h2",{className:s()(y.h2)},vs),a.createElement("div",{className:as.listWrapper},a.createElement(Yn,{className:y.xb,divider:!0,items:ws}))),a.createElement("span",{style:{marginRight:"10px"}},Es),So,a.createElement(Gn,{className:y.im,type:"horizontal"}),a.createElement("div",null,a.createElement("div",null,a.createElement(ze,{data:Gs,label:"Span Attributes",linksGetter:Ze,isOpen:na,onToggle:()=>Yt(Qa)}),qs.tags&&a.createElement(ze,{className:y.bi,data:qs.tags,label:"Resource Attributes",linksGetter:Ze,isOpen:Fa,onToggle:()=>Lt(Qa)})),gr&&gr.length>0&&a.createElement($e,{linksGetter:Ze,logs:gr,isOpen:ja.isOpen,openedItems:ja.openedItems,onToggle:()=>Ct(Qa),onItemToggle:ss=>dt(Qa,ss),timestamp:nn}),Wn&&Wn.length>0&&a.createElement(Ss,{className:as.AccordianWarnings,headerClassName:as.AccordianWarningsHeader,label:a.createElement("span",{className:as.AccordianWarningsLabel},"Warnings"),data:Wn,isOpen:ps,onToggle:()=>an(Qa)}),ya?.length?a.createElement(Ss,{label:"Stack trace",data:ya,isOpen:bs,TextComponent:ss=>{let Mr;return ss.data?.length>1?Mr=ss.data.map((Tr,fo)=>`StackTrace ${fo+1}:
${Tr}`).join(`
`):Mr=ss.data?.[0],a.createElement(In.K,{className:as.Textarea,style:{cursor:"unset"},readOnly:!0,cols:10,rows:10,value:Mr})},onToggle:()=>Nn(Qa)}):null,aa&&aa.length>0&&(aa.length>1||aa[0].refType!=="CHILD_OF")&&a.createElement(ts,{data:aa,isOpen:Is.isOpen,openedItems:Is.openedItems,onToggle:()=>Kn(Qa),onItemToggle:ss=>Vn(Qa,ss),createFocusSpanLink:ua}),r.config.featureToggles.tracesEmbeddedFlameGraph&&Ft.tags.some(ss=>ss.key===Ln.wq)&&a.createElement(pr,{span:Ft,timeZone:Ya,traceFlameGraphs:ha,setTraceFlameGraphs:oa,traceToProfilesOptions:xa,setRedrawListView:Ba}),a.createElement("small",{className:as.debugInfo},a.createElement("a",{..._r,onClick:ss=>{_r.onClick&&ss.button===0&&(!ss.currentTarget.target||ss.currentTarget.target==="_self")&&!(ss.metaKey||ss.altKey||ss.ctrlKey||ss.shiftKey)&&(ss.preventDefault(),_r.onClick(ss))}},a.createElement(Me.J,{name:"link",className:s()(y.Im,as.LinkIcon)})),a.createElement("span",{className:as.debugLabel,"data-label":"SpanID:"})," ",Qa)))}const Go=(Qe,Ye)=>{const Ze=(0,rn.dq)(Qe/1e3,{timeZone:Ye,defaultWithMS:!0}),dt=Ze.split(" ");return` (${dt[1]?dt[1]:Ze})`},sr=(0,i.B)(Qe=>({expandedAccent:(0,n.css)`
      cursor: pointer;
      height: 100%;
      overflow: hidden;
      position: absolute;
      width: 100%;
      &::before {
        border-left: 1px solid;
        pointer-events: none;
        width: 1000px;
      }
      &::after {
        border-right: 1000px solid;
        border-color: inherit;
        cursor: pointer;
        opacity: 0.2;
      }

      /* border-color inherit must come AFTER other border declarations for accent */
      &::before,
      &::after {
        border-color: inherit;
        content: ' ';
        position: absolute;
        height: 100%;
      }

      &:hover::after {
        opacity: 0.35;
      }
    `,infoWrapper:(0,n.css)`
      label: infoWrapper;
      border: 1px solid ${(0,u.h)(Qe,"#d3d3d3")};
      border-top: 3px solid;
      padding: 0.75rem;
    `}));class Qr extends a.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._linksGetter=(Ye,Ze)=>{const{linksGetter:dt,span:Ct}=this.props;return dt(Ct,Ye,Ze)}}render(){const{color:Ye,columnDivision:Ze,detailState:dt,logItemToggle:Ct,logsToggle:Lt,processToggle:Ft,referenceItemToggle:Yt,referencesToggle:nn,warningsToggle:an,stackTracesToggle:Nn,span:Kn,traceToProfilesOptions:Vn,timeZone:Hn,tagsToggle:ua,traceStartTime:Qn,hoverIndentGuideIds:ha,addHoverIndentGuideId:oa,removeHoverIndentGuideId:xa,theme:Ba,createSpanLink:na,focusedSpanId:Fa,createFocusSpanLink:ja,datasourceType:ps,visibleSpanIds:Is,traceFlameGraphs:bs,setTraceFlameGraphs:vs,setRedrawListView:qs}=this.props,Rs=sr(Ba);return a.createElement(z,null,a.createElement(z.Cell,{width:Ze,style:{overflow:"hidden"}},a.createElement(yn,{span:Kn,showChildrenIcon:!1,hoverIndentGuideIds:ha,addHoverIndentGuideId:oa,removeHoverIndentGuideId:xa,visibleSpanIds:Is}),a.createElement(mt.zx,{fill:"text",onClick:this._detailToggle,className:s()(Rs.expandedAccent,(0,mt.gN)(Ba)),style:{borderColor:Ye},"data-testid":"detail-row-expanded-accent"})),a.createElement(z.Cell,{width:1-Ze},a.createElement("div",{className:Rs.infoWrapper,style:{borderTopColor:Ye}},a.createElement(Ur,{detailState:dt,linksGetter:this._linksGetter,logItemToggle:Ct,logsToggle:Lt,processToggle:Ft,referenceItemToggle:Yt,referencesToggle:nn,warningsToggle:an,stackTracesToggle:Nn,span:Kn,traceToProfilesOptions:Vn,timeZone:Hn,tagsToggle:ua,traceStartTime:Qn,createSpanLink:na,focusedSpanId:Fa,createFocusSpanLink:ja,datasourceType:ps,traceFlameGraphs:bs,setTraceFlameGraphs:vs,setRedrawListView:qs}))))}}const ka=(0,g.HE)(Qr),Nr=(0,i.B)(()=>({rowsWrapper:(0,n.css)`
      width: 100%;
    `,row:(0,n.css)`
      width: 100%;
    `,scrollToTopButton:(0,n.css)`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 40px;
      height: 40px;
      position: absolute;
      bottom: 30px;
      right: 30px;
      z-index: 1;
    `})),Hs={bar:28,detail:161,detailWithLogs:197},Do=5,oo=33;function vr(Qe,Ye,Ze,dt,Ct,Lt,Ft){if(!Qe)return[];Ct&&dt&&(Qe=Qe.filter(an=>dt.has(an.spanID))),Lt&&Ft&&(Qe=Qe.filter(an=>Ft.find(Nn=>Nn.spanId===an.spanID)));let Yt=null;const nn=[];for(let an=0;an<Qe.length;an++){const Nn=Qe[an],{spanID:Kn,depth:Vn}=Nn;let Hn=!1;Yt!=null&&(Vn>=Yt?Hn=!0:Yt=null),!Hn&&(Ye.has(Kn)&&(Yt=Vn+1),nn.push({span:Nn,isDetail:!1,spanIndex:an}),Ze.has(Kn)&&nn.push({span:Nn,isDetail:!0,spanIndex:an}))}return nn}function Bo(Qe){const[Ye,Ze]=Qe;return{left:Ye>0,right:Ze<1}}function Ms(Qe,Ye,Ze,dt,Ct,Lt,Ft){return Qe?vr(Qe.spans,Ye,Ze,dt,Ct,Lt,Ft):[]}function is(Qe){const Ye=new Map;return Qe&&Qe.spans.forEach(Ze=>{Ze.childSpanIds.length&&Ye.set(Ze.spanID,Ze.childSpanIds)}),Ye}const ao=(0,Pe.Z)(Ms),Na=(0,Pe.Z)(b,De.isEqual),Wa=(0,Pe.Z)(Bo,De.isEqual),zn=(0,Pe.Z)(is);class Mt extends a.Component{constructor(){super(...arguments),this.hasScrolledToSpan=!1,this.getViewRange=()=>this.props.currentViewRangeTime,this.getSearchedSpanIDs=()=>this.props.findMatchesIDs,this.getCollapsedChildren=()=>this.props.childrenHiddenIDs,this.mapRowIndexToSpanIndex=Ye=>this.getRowStates()[Ye].spanIndex,this.mapSpanIndexToRowIndex=Ye=>{const Ze=this.getRowStates().length;for(let dt=0;dt<Ze;dt++){const{spanIndex:Ct}=this.getRowStates()[dt];if(Ct===Ye)return dt}throw new Error(`unable to find row for span index: ${Ye}`)},this.setListView=Ye=>{this.listView=Ye},this.getKeyFromIndex=Ye=>{const{isDetail:Ze,span:dt}=this.getRowStates()[Ye];return`${dt.traceID}--${dt.spanID}--${Ze?"detail":"bar"}`},this.getIndexFromKey=Ye=>{const Ze=Ye.split("--"),dt=Ze[0],Ct=Ze[1],Lt=Ze[2]==="detail",Ft=this.getRowStates().length;for(let Yt=0;Yt<Ft;Yt++){const{span:nn,isDetail:an}=this.getRowStates()[Yt];if(nn.spanID===Ct&&nn.traceID===dt&&an===Lt)return Yt}return-1},this.getRowHeight=Ye=>{const{span:Ze,isDetail:dt}=this.getRowStates()[Ye];return dt?Array.isArray(Ze.logs)&&Ze.logs.length?Hs.detailWithLogs:Hs.detail:Hs.bar},this.renderRow=(Ye,Ze,dt,Ct)=>{const{isDetail:Lt,span:Ft,spanIndex:Yt}=this.getRowStates()[dt],nn=Math.max((this.listView?.getTopVisibleIndex()||0)-oo,0),an=(this.listView?.getBottomVisibleIndex()||0)+oo,Nn=this.getVisibleSpanIds(nn,an);return Lt?this.renderSpanDetailRow(Ft,Ye,Ze,Ct,Nn):this.renderSpanBarRow(Ft,Yt,Ye,Ze,Ct,Nn)},this.scrollToSpan=(Ye,Ze)=>{if(Ze==null)return;const dt=this.getRowStates().findIndex(Ct=>Ct.span.spanID===Ze);dt>=0&&this.listView?.scrollToIndex(dt,Ye)},this.scrollToTop=()=>{const{topOfViewRef:Ye,datasourceType:Ze,trace:dt}=this.props;Ye?.current?.scrollIntoView({behavior:"smooth"}),(0,o.ff)("grafana_traces_trace_view_scroll_to_top_clicked",{datasourceType:Ze,grafana_version:r.config.buildInfo.version,numServices:dt.services.length,numSpans:dt.spans.length})},this.getVisibleSpanIds=(0,Pe.Z)((Ye,Ze)=>{const dt=[];for(let Ct=Ye;Ct<Ze;Ct++){const Lt=this.getRowStates()[Ct];Lt?.span&&dt.push(Lt.span.spanID)}return dt})}componentDidMount(){this.scrollToSpan(this.props.headerHeight,this.props.focusedSpanId)}shouldComponentUpdate(Ye){let Ze;for(Ze in Ye)if(Ye[Ze]!==this.props[Ze])return!0;return!1}componentDidUpdate(Ye){const{headerHeight:Ze,focusedSpanId:dt,focusedSpanIdForSearch:Ct}=this.props;this.hasScrolledToSpan||(this.scrollToSpan(Ze,dt),this.hasScrolledToSpan=!0),dt!==Ye.focusedSpanId&&this.scrollToSpan(Ze,dt),Ct!==Ye.focusedSpanIdForSearch&&this.scrollToSpan(Ze,Ct)}getRowStates(){const{childrenHiddenIDs:Ye,detailStates:Ze,trace:dt,findMatchesIDs:Ct,showSpanFilterMatchesOnly:Lt,showCriticalPathSpansOnly:Ft,criticalPath:Yt}=this.props;return ao(dt,Ye,Ze,Ct,Lt,Ft,Yt)}getClipping(){const{currentViewRangeTime:Ye}=this.props;return Wa(Ye)}getViewedBounds(){const{currentViewRangeTime:Ye,trace:Ze}=this.props,[dt,Ct]=Ye;return Na({min:Ze.startTime,max:Ze.endTime,viewStart:dt,viewEnd:Ct})}getChildSpansMap(){return zn(this.props.trace)}getAccessors(){const Ye=this.listView;if(!Ye)throw new Error("ListView unavailable");return{getViewRange:this.getViewRange,getSearchedSpanIDs:this.getSearchedSpanIDs,getCollapsedChildren:this.getCollapsedChildren,getViewHeight:Ye.getViewHeight,getBottomRowIndexVisible:Ye.getBottomVisibleIndex,getTopRowIndexVisible:Ye.getTopVisibleIndex,getRowPosition:Ye.getRowPosition,mapRowIndexToSpanIndex:this.mapRowIndexToSpanIndex,mapSpanIndexToRowIndex:this.mapSpanIndexToRowIndex}}renderSpanBarRow(Ye,Ze,dt,Ct,Lt,Ft){const{spanID:Yt,childSpanIds:nn}=Ye,{serviceName:an}=Ye.process,{childrenHiddenIDs:Nn,childrenToggle:Kn,detailStates:Vn,detailToggle:Hn,findMatchesIDs:ua,spanNameColumnWidth:Qn,trace:ha,spanBarOptions:oa,hoverIndentGuideIds:xa,addHoverIndentGuideId:Ba,removeHoverIndentGuideId:na,createSpanLink:Fa,focusedSpanId:ja,focusedSpanIdForSearch:ps,showSpanFilterMatchesOnly:Is,theme:bs,datasourceType:vs,criticalPath:qs}=this.props;if(!ha)return null;const Rs=(0,nt._K)(an,bs),Dr=Nn.has(Yt),qr=Vn.has(Yt),Vr=ua?ua.has(Yt):!1,Qa=Yt===ja||Yt===ps,gr=N(Ye)||Dr&&F(ha.spans,Ze);let Gs=null;if(Dr){const Es=U(ha.spans.slice(Ze));if(Es){const So=this.getViewedBounds()(Es.startTime,Es.startTime+Es.duration);Gs={color:(0,nt._K)(Es.process.serviceName,bs),operationName:Es.operationName,serviceName:Es.process.serviceName,viewEnd:So.end,viewStart:So.start}}}const Wn=Ye.tags.find(Es=>Es.key===Te);let aa=null;!Ye.hasChildren&&Wn&&j(Ye)&&(aa={serviceName:Wn.value,color:(0,nt._K)(Wn.value,bs)});const ya=Ze>0?ha.spans[Ze-1]:null,Ya=[Yt,...nn],ws=Es=>{Es.forEach(So=>{const _r=this.getChildSpansMap().get(So);_r?.length&&(Ya.push(..._r),ws(_r))})};ws(nn);const as=qs?.filter(Es=>Dr?Ya.includes(Es.spanId):Es.spanId===Yt),eo=Nr();return a.createElement("div",{className:eo.row,key:dt,style:Ct,...Lt},a.createElement(Nt,{clippingLeft:this.getClipping().left,clippingRight:this.getClipping().right,color:Rs,spanBarOptions:oa,columnDivision:Qn,isChildrenExpanded:!Dr,isDetailExpanded:qr,isMatchingFilter:Vr,isFocused:Qa,showSpanFilterMatchesOnly:Is,numTicks:Do,onDetailToggled:Hn,onChildrenToggled:Kn,rpc:Gs,noInstrumentedServer:aa,showErrorIcon:gr,getViewedBounds:this.getViewedBounds(),traceStartTime:ha.startTime,span:Ye,hoverIndentGuideIds:xa,addHoverIndentGuideId:Ba,removeHoverIndentGuideId:na,createSpanLink:Fa,datasourceType:vs,showServiceName:ya===null||ya.process.serviceName!==Ye.process.serviceName,visibleSpanIds:Ft,criticalPath:as}))}renderSpanDetailRow(Ye,Ze,dt,Ct,Lt){const{spanID:Ft}=Ye,{serviceName:Yt}=Ye.process,{detailLogItemToggle:nn,detailLogsToggle:an,detailProcessToggle:Nn,detailReferencesToggle:Kn,detailReferenceItemToggle:Vn,detailWarningsToggle:Hn,detailStackTracesToggle:ua,detailStates:Qn,detailTagsToggle:ha,detailToggle:oa,spanNameColumnWidth:xa,trace:Ba,traceToProfilesOptions:na,timeZone:Fa,hoverIndentGuideIds:ja,addHoverIndentGuideId:ps,removeHoverIndentGuideId:Is,linksGetter:bs,createSpanLink:vs,focusedSpanId:qs,createFocusSpanLink:Rs,theme:Dr,datasourceType:qr,traceFlameGraphs:Vr,setTraceFlameGraphs:Qa,setRedrawListView:gr}=this.props,Gs=Qn.get(Ft);if(!Ba||!Gs)return null;const Wn=(0,nt._K)(Yt,Dr),aa=Nr();return a.createElement("div",{className:aa.row,key:Ze,style:{...dt,zIndex:1},...Ct},a.createElement(ka,{color:Wn,columnDivision:xa,onDetailToggled:oa,detailState:Gs,linksGetter:bs,logItemToggle:nn,logsToggle:an,processToggle:Nn,referenceItemToggle:Vn,referencesToggle:Kn,warningsToggle:Hn,stackTracesToggle:ua,span:Ye,traceToProfilesOptions:na,timeZone:Fa,tagsToggle:ha,traceStartTime:Ba.startTime,hoverIndentGuideIds:ja,addHoverIndentGuideId:ps,removeHoverIndentGuideId:Is,createSpanLink:vs,focusedSpanId:qs,createFocusSpanLink:Rs,datasourceType:qr,visibleSpanIds:Lt,traceFlameGraphs:Vr,setTraceFlameGraphs:Qa,setRedrawListView:gr}))}render(){const Ye=Nr(),{scrollElement:Ze,redrawListView:dt}=this.props;return a.createElement(a.Fragment,null,a.createElement(xe,{ref:this.setListView,dataLength:this.getRowStates().length,itemHeightGetter:this.getRowHeight,itemRenderer:this.renderRow,viewBuffer:oo,viewBufferMin:oo,itemsWrapperClassName:Ye.rowsWrapper,getKeyFromIndex:this.getKeyFromIndex,getIndexFromKey:this.getIndexFromKey,windowScroller:!1,scrollElement:Ze,redraw:dt}),this.props.topOfViewRef&&a.createElement(ye.h,{className:Ye.scrollToTopButton,onClick:this.scrollToTop,title:"Scroll to top",icon:"arrow-up"}))}}const xr=(0,g.HE)(Mt),wo=(0,i.B)(Qe=>({TraceTimelineViewer:(0,n.css)`
      label: TraceTimelineViewer;
      border-bottom: 1px solid ${(0,u.h)(Qe,"#bbb")};

      & .json-markup {
        line-height: 17px;
        font-size: 13px;
        font-family: monospace;
        white-space: pre-wrap;
      }

      & .json-markup-key {
        font-weight: bold;
      }

      & .json-markup-bool {
        color: ${(0,u.h)(Qe,"firebrick")};
      }

      & .json-markup-string {
        color: ${(0,u.h)(Qe,"teal")};
      }

      & .json-markup-null {
        color: ${(0,u.h)(Qe,"teal")};
      }

      & .json-markup-number {
        color: ${(0,u.h)(Qe,"blue","black")};
      }
    `})),dr=5;class Wr extends a.PureComponent{constructor(Ye){super(Ye),this.collapseAll=()=>{this.props.collapseAll(this.props.trace.spans),(0,o.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:r.config.buildInfo.version,type:"collapseAll"})},this.collapseOne=()=>{this.props.collapseOne(this.props.trace.spans),(0,o.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:r.config.buildInfo.version,type:"collapseOne"})},this.expandAll=()=>{this.props.expandAll(),(0,o.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:r.config.buildInfo.version,type:"expandAll"})},this.expandOne=()=>{this.props.expandOne(this.props.trace.spans),(0,o.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:r.config.buildInfo.version,type:"expandOne"})},this.state={height:0}}componentDidMount(){v({collapseAll:this.collapseAll,expandAll:this.expandAll,collapseOne:this.collapseOne,expandOne:this.expandOne})}render(){const{setSpanNameColumnWidth:Ye,updateNextViewRangeTime:Ze,updateViewRangeTime:dt,viewRange:Ct,traceTimeline:Lt,theme:Ft,topOfViewRef:Yt,focusedSpanIdForSearch:nn,...an}=this.props,{trace:Nn}=an,Kn=wo(Ft);return a.createElement("div",{className:Kn.TraceTimelineViewer,ref:Vn=>Vn&&this.setState({height:Vn.getBoundingClientRect().height})},a.createElement(Ue,{duration:Nn.duration,nameColumnWidth:Lt.spanNameColumnWidth,numTicks:dr,onCollapseAll:this.collapseAll,onCollapseOne:this.collapseOne,onColummWidthChange:Ye,onExpandAll:this.expandAll,onExpandOne:this.expandOne,viewRangeTime:Ct.time,updateNextViewRangeTime:Ze,updateViewRangeTime:dt,columnResizeHandleHeight:this.state.height}),a.createElement(xr,{...an,...Lt,setSpanNameColumnWidth:Ye,currentViewRangeTime:Ct.time.current,topOfViewRef:Yt,focusedSpanIdForSearch:nn,datasourceType:this.props.datasourceType}))}}const ur=(0,g.HE)(Wr);var io=e(67192);const Uo=()=>({NewWindowIconLarge:(0,n.css)`
      label: NewWindowIconLarge;
      font-size: 1.5em;
    `});function lo(Qe){const{isLarge:Ye,className:Ze,...dt}=Qe,Ct=(0,g.wW)(Uo),Lt=s()({[Ct.NewWindowIconLarge]:Ye},Ze);return a.createElement(Me.J,{className:Lt,name:"anchor",...dt})}lo.defaultProps={isLarge:!1};const xt=Qe=>a.createElement("a",{href:Qe.href,title:Qe.title,target:"_blank",rel:"noopener noreferrer",className:Qe.className},Qe.children," ",a.createElement(lo,null));function St(Qe){const{links:Ye}=Qe;return a.createElement(xt,{href:Ye[0].url,title:Ye[0].text,className:Qe.className})}const Xt=100,Qt="<trace-without-root-span>",sn=()=>({BreakableText:(0,n.css)`
      label: BreakableText;
      display: inline-block;
      white-space: pre;
    `}),bn=/\W*\w+\W*/g;function Bn(Qe){const{className:Ye,text:Ze,wordRegexp:dt=bn}=Qe,Ct=(0,g.wW)(sn);if(!Ze)return null;const Lt=[];dt.exec("");let Ft=dt.exec(Ze)||[Ze];for(;Ft;)Lt.push(a.createElement("span",{key:`${Ze}-${Lt.length}`,className:Ye||Ct.BreakableText},Ft[0])),Ft=dt.exec(Ze);return a.createElement(a.Fragment,null,Lt)}Bn.defaultProps={wordRegexp:bn};const _n=Qe=>({TraceName:(0,n.css)`
      label: TraceName;
      font-size: ${Qe.typography.size.lg};
    `});function jn(Qe){const{className:Ye,traceName:Ze}=Qe,dt=(0,g.wW)(_n),Ct=String(Ze||Qt),Lt=a.createElement(Bn,{text:Ct});return a.createElement("span",{className:s()(dt.TraceName,Ye)},Lt)}var Sa=e(7281);const ta=Object.defineProperty({archiveEnabled:!1,dependencies:{dagMaxNumServices:Xt,menuEnabled:!0},linkPatterns:[],search:{maxLookback:{label:"2 Days",value:"2d"},maxLimit:1500},tracking:{gaID:null,trackErrors:!0}},"__mergeFields",{value:["dependencies","search","tracking"]});function ra(){return ta}function Oa(Qe){return(0,De.get)(ra(),Qe)}function Ts(Qe){const Ye=Qe.references?Qe.references.find(Ze=>Ze.refType==="CHILD_OF"):null;return Ye?Ye.span:null}const Ja=/#\{([^{}]*)\}/g;function Ks(Qe){const Ye=new Set;return Qe.replace(Ja,(Ze,dt)=>(Ye.add(dt),Ze)),Array.from(Ye)}function us(Qe,Ye,Ze){return Qe.replace(Ja,(dt,Ct)=>{const Lt=Ze[Ct];return Lt==null?"":Ye(Lt)})}function cs(Qe,Ye){if(typeof Qe!="string")throw new Error("Invalid template");return{parameters:Ks(Qe),template:us.bind(null,Qe,Ye)}}function Bs(Qe){if(typeof Qe=="string")return Ye=>Ye===Qe;if(Array.isArray(Qe))return Ye=>Qe.indexOf(Ye)>-1;if(Qe==null)return()=>!0;throw new Error(`Invalid value: ${Qe}`)}const Fr=Qe=>Qe;function hs(Qe){try{const Ye=cs(Qe.url,encodeURIComponent),Ze=cs(Qe.text,Fr);return{object:Qe,type:Bs(Qe.type),key:Bs(Qe.key),value:Bs(Qe.value),url:Ye,text:Ze,parameters:(0,De.uniq)(Ye.parameters.concat(Ze.parameters))}}catch(Ye){return console.error(`Ignoring invalid link pattern: ${Ye}`,Qe),null}}function Ia(Qe,Ye){if(Ye)return Ye.find(Ze=>Ze.key===Qe)}function ms(Qe,Ye){let Ze=Ye;for(;Ze;){const dt=Ia(Qe,Ze.tags)||Ia(Qe,Ze.process.tags);if(dt)return dt;Ze=Ts(Ze)}}function mr(Qe,Ye){return Qe.template(Ye)}function Ta(Qe,Ye){const Ze=[],dt=Object.keys(Ye).filter(Ct=>typeof Ye[Ct]=="string"||Ye[Ct]==="number");return Qe?.filter(Ct=>Ct?.type("traces")).forEach(Ct=>{const Lt={};Ct?.parameters.every(Yt=>{const nn=Yt;return dt.includes(nn)?(Lt[Yt]=Ye[nn],!0):!1})&&Ze.push({url:mr(Ct.url,Lt),text:mr(Ct.text,Lt)})}),Ze}function fr(Qe,Ye,Ze,dt){const Ct=Ze[dt];let Lt="logs";const Ft=Ye.process.tags===Ze;Ft&&(Lt="process"),Ye.tags===Ze&&(Lt="tags");const nn=[];return Qe.forEach(an=>{if(an.type(Lt)&&an.key(Ct.key)&&an.value(Ct.value)){const Nn={};an.parameters.every(Vn=>{let Hn=Ia(Vn,Ze);return!Hn&&!Ft&&(Hn=ms(Vn,Ye)),Hn?(Nn[Vn]=Hn.value,!0):(console.warn(`Skipping link pattern, missing parameter ${Vn} for key ${Ct.key} in ${Lt}.`,an.object),!1)})&&nn.push({url:mr(an.url,Nn),text:mr(an.text,Nn)})}}),nn}function Yr(Qe,Ye){return(Ze,dt,Ct)=>{if(Qe.length===0)return[];const Lt=dt[Ct];let Ft=Ye.get(Lt);return Ft||(Ft=fr(Qe,Ze,dt,Ct),Ye.set(Lt,Ft)),Ft}}const Zr=(Oa("linkPatterns")||[]).map(hs).filter(Qe=>!!Qe),co=(0,Sa.Z)(10)(Qe=>{const Ye=[];return Qe?Ta(Zr,Qe):Ye}),Ol=Yr(Zr,new WeakMap);function Il(Qe){let Ye;const Ze=new Set(Qe.map(({spanID:dt})=>dt));for(let dt=0;dt<Qe.length;dt++){if(Qe[dt].references&&Qe[dt].references.some(({traceID:Yt,spanID:nn})=>Yt===Qe[dt].traceID&&Ze.has(nn)))continue;if(!Ye){Ye=Qe[dt];continue}const Lt=Qe[dt].references&&Qe[dt].references.length||0,Ft=Ye.references&&Ye.references.length||0;(Lt<Ft||Lt===Ft&&Qe[dt].startTime<Ye.startTime)&&(Ye=Qe[dt])}return Ye?`${Ye.process.serviceName}: ${Ye.operationName}`:""}const ri=(0,De.memoize)(Il,Qe=>Qe.length?Qe[0].traceID:0);function Gi(Qe){for(let Ye=0;Ye<Qe.length;Ye++){const Ze=Qe[Ye].tags.filter(Lt=>Lt.key==="http.method"),dt=Qe[Ye].tags.filter(Lt=>Lt.key==="http.status_code"),Ct=Qe[Ye].tags.filter(Lt=>Lt.key==="http.url"||Lt.key==="http.target"||Lt.key==="http.path");if(Ze.length>0||dt.length>0||Ct.length>0)return{method:Ze,status:dt,url:Ct}}return{}}const jo=(0,De.memoize)(Gi,Qe=>Qe.length?Qe[0].traceID:0);var Cs=e(67954),Rl=e(70397);const Al=Qe=>({ActionButton:(0,n.css)`
      label: ActionButton;
      overflow: hidden;
      position: relative;
      &:after {
        content: '';
        background: ${Qe.colors.primary.main};
        display: block;
        position: absolute;
        right: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: all 0.8s;
      }
      &:active:after {
        margin: 0;
        opacity: 0.3;
        transition: 0s;
      }
    `});function ji(Qe){const{onClick:Ye,ariaLabel:Ze,label:dt,icon:Ct}=Qe,Lt=(0,g.wW)(Al);return a.createElement(mt.zx,{className:Lt.ActionButton,size:"sm",variant:"secondary",fill:"outline",type:"button",icon:Ct,"aria-label":Ze,onClick:Ye},dt)}const Ll=Qe=>({TracePageActions:(0,n.css)`
      label: TracePageActions;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
    `,feedback:(0,n.css)`
      margin: 6px;
      color: ${Qe.colors.text.secondary};
      font-size: ${Qe.typography.bodySmall.fontSize};
      &:hover {
        color: ${Qe.colors.text.link};
      }
    `});function Bl(Qe){const{traceId:Ye,data:Ze,app:dt}=Qe,Ct=(0,g.l4)(),Lt=Ll(Ct),[Ft,Yt]=(0,a.useState)(!1),nn=()=>{navigator.clipboard.writeText(Ye),Yt(!0),setTimeout(()=>{Yt(!1)},5e3)},an=()=>{const Nn=(0,Rl.gb)(Ze,"Trace-"+Ye.substring(Ye.length-6));(0,o.ff)("grafana_traces_download_traces_clicked",{app:dt,grafana_version:Cs.config.buildInfo.version,trace_format:Nn,location:"trace-view"})};return a.createElement("div",{className:Lt.TracePageActions},a.createElement("a",{href:"https://forms.gle/RZDEx8ScyZNguDoC8",className:Lt.feedback,title:"Share your thoughts about tracing in Grafana.",target:"_blank",rel:"noreferrer noopener"},a.createElement(Me.J,{name:"comment-alt-message"})," Give feedback"),a.createElement(ji,{onClick:nn,ariaLabel:"Copy Trace ID",label:Ft?"Copied!":"Trace ID",icon:"copy"}),a.createElement(ji,{onClick:an,ariaLabel:"Export Trace",label:"Export",icon:"save"}))}var Os=e(11248),Ci=e(37890),wl=e(8655),oi=e(81368),Co=e(84933),ii=e(74042),Er=e(27436),Po=e(42177),li=e(73678),Ul=e(24956);class Qi extends a.PureComponent{constructor(){super(...arguments),this.clearUiFind=()=>{this.props.onChange("")}}render(){const{value:Ye}=this.props,Ze=a.createElement(a.Fragment,null,Ye&&Ye.length&&a.createElement(Y.h,{name:"times",onClick:this.clearUiFind,tooltip:"Clear input"}));return a.createElement("div",{style:{width:"200px"}},a.createElement(Ul.I,{placeholder:"Find...",onChange:dt=>this.props.onChange(dt.currentTarget.value),suffix:Ze,value:Ye}))}}Qi.defaultProps={value:void 0};const so=(0,a.memo)(function(Ye){const{trace:Ze,spanFilterMatches:dt,setFocusedSpanIdForSearch:Ct,focusedSpanIndexForSearch:Lt,setFocusedSpanIndexForSearch:Ft,datasourceType:Yt,showSpanFilters:nn}=Ye,an=ci((0,g.l4)(),nn);(0,a.useEffect)(()=>{if(dt&&Lt!==-1){const na=Array.from(dt);Ct(na[Lt])}},[Lt,Ct,dt]);const Nn=(na,Fa)=>{if(na.preventDefault(),na.stopPropagation(),Fa){if((0,o.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:Yt,grafana_version:r.config.buildInfo.version,direction:"next"}),Lt===-1||dt&&Lt===dt.size-1){Ft(0);return}Ft(Lt+1)}},Kn=(na,Fa)=>{if(na.preventDefault(),na.stopPropagation(),Fa){if((0,o.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:Yt,grafana_version:r.config.buildInfo.version,direction:"prev"}),dt&&(Lt===-1||Lt===0)){Ft(dt.size-1);return}Ft(Lt-1)}},Vn=(na,Fa)=>{na.key==="Enter"&&Nn(na,Fa)},Hn=(na,Fa)=>{na.key==="Enter"&&Kn(na,Fa)},ua=(dt&&dt?.size>0)??!1,Qn=ua?an.button:(0,n.cx)(an.button,an.buttonDisabled),ha=(0,a.useCallback)(na=>a.createElement(Oe.u,{content:na,placement:"top"},a.createElement("span",{className:an.tooltip},a.createElement(Me.J,{name:"info-circle",size:"md"}))),[an.tooltip]),oa=(0,a.useCallback)((na,Fa)=>{let ja=a.createElement(a.Fragment,null,a.createElement("span",null,`${Ze.spans.length} spans`),ha(a.createElement(a.Fragment,null,a.createElement("div",null,"Services: ",Fa),a.createElement("div",null,"Depth: ",na))));if(dt)if(dt.size===0)ja=a.createElement(a.Fragment,null,a.createElement("span",null,"0 matches"),ha("There are 0 span matches for the filters selected. Please try removing some of the selected filters."));else{const ps=dt.size===1?"match":"matches",Is=Lt!==-1?`${Lt+1}/${dt.size} ${ps}`:`${dt.size} ${ps}`,bs=[];dt.forEach(vs=>{Ze.processes[vs]&&bs.push(Ze.processes[vs].serviceName)}),ja=a.createElement(a.Fragment,null,a.createElement("span",null,Is),ha(a.createElement(a.Fragment,null,a.createElement("div",null,"Services: ",new Set(bs).size,"/",Fa),a.createElement("div",null,"Depth: ",na))))}return ja},[Lt,ha,dt,Ze.processes,Ze.spans]),xa=new Set((0,De.values)(Ze.processes).map(na=>na.serviceName)).size,Ba=(0,De.get)((0,De.maxBy)(Ze.spans,"depth"),"depth",0)+1;return a.createElement(a.Fragment,null,a.createElement("span",{className:an.matches},oa(Ba,xa)),a.createElement("div",{className:ua?an.buttons:(0,n.cx)(an.buttons,an.buttonsDisabled)},a.createElement("div",{"aria-label":"Prev result button",className:Qn,onClick:na=>Kn(na,ua),onKeyDown:na=>Hn(na,ua),role:"button",tabIndex:ua?0:-1},"Prev"),a.createElement("div",{"aria-label":"Next result button",className:Qn,onClick:na=>Nn(na,ua),onKeyDown:na=>Vn(na,ua),role:"button",tabIndex:ua?0:-1},"Next")))}),ci=(Qe,Ye)=>{const Ze=(0,mt.fW)({theme:Qe,variant:"secondary",size:Ye?"md":"sm",iconOnly:!1,fill:"outline"});return{buttons:(0,n.css)`
      display: inline-flex;
      gap: 4px;
    `,buttonsDisabled:(0,n.css)`
      cursor: not-allowed;
    `,button:(0,n.css)`
      ${Ze.button};
    `,buttonDisabled:(0,n.css)`
      ${Ze.disabled};
      pointer-events: none;
    `,matches:(0,n.css)`
      margin-right: ${Qe.spacing(2)};
      text-wrap: nowrap;
    `,tooltip:(0,n.css)`
      color: #aaa;
      margin: 0 0 0 5px;
    `}};var Pi=e(5999);function Qo(Qe,Ye){if(!Ye)return;let Ze=!1;Qe.serviceName&&(Ye=di(Ye,Qe),Ze=!0),Qe.spanName&&(Ye=uo(Ye,Qe),Ze=!0),(Qe.from||Qe.to)&&(Ye=Wl(Ye,Qe),Ze=!0);const dt=Ha(Ye,Qe.tags);if(dt&&(Ye=dt,Ze=!0),Qe.query){const Ct=Nl(Qe.query,Ye);Ct&&(Ye=Ct,Ze=!0)}return Ze?new Set(Ye.map(Ct=>Ct.spanID)):void 0}function Nl(Qe,Ye){if(!Ye)return;const Ze=[];Qe.split(/\s+/).filter(Boolean).forEach(Ft=>{Ze.push(Ft.toLowerCase())});const dt=(Ft,Yt)=>Ft.some(nn=>Yt.toLowerCase().includes(nn)),Ct=Ft=>Ft?Ft.some(Yt=>dt(Ze,Yt.key)||dt(Ze,Yt.value.toString())):!1,Lt=Ft=>dt(Ze,Ft.operationName)||dt(Ze,Ft.process.serviceName)||Ct(Ft.tags)||Ft.kind&&dt(Ze,Ft.kind)||Ft.statusCode!==void 0&&dt(Ze,en.Q[Ft.statusCode])||Ft.statusMessage&&dt(Ze,Ft.statusMessage)||Ft.instrumentationLibraryName&&dt(Ze,Ft.instrumentationLibraryName)||Ft.instrumentationLibraryVersion&&dt(Ze,Ft.instrumentationLibraryVersion)||Ft.traceState&&dt(Ze,Ft.traceState)||Ft.logs!==null&&Ft.logs.some(Yt=>Ct(Yt.fields))||Ct(Ft.process.tags)||Ze.some(Yt=>Yt===Ft.spanID);return Ye.filter(Lt)}const Ha=(Qe,Ye)=>{if(Ye=Ye.filter(Ze=>Ze.key&&Ze.key!==""||Ze.value),Ye.length>0)return Qe.filter(Ze=>Ye.every(dt=>{if(dt.key&&dt.value){if(Ze.tags.some(Ct=>xi(dt,Ct))||Ze.process.tags.some(Ct=>xi(dt,Ct))||Ze.logs&&Ze.logs.some(Ct=>Ct.fields.some(Lt=>xi(dt,Lt)))||Ze.kind&&dt.key===Xn&&dt.value===Ze.kind||Ze.statusCode!==void 0&&dt.key===Pt&&dt.value===en.Q[Ze.statusCode].toLowerCase()||Ze.statusMessage&&dt.key===Dt&&dt.value===Ze.statusMessage||Ze.instrumentationLibraryName&&dt.key===$t&&dt.value===Ze.instrumentationLibraryName||Ze.instrumentationLibraryVersion&&dt.key===jt&&dt.value===Ze.instrumentationLibraryVersion||Ze.traceState&&dt.key===mn&&dt.value===Ze.traceState||dt.key===Dn&&dt.value===Ze.spanID)return yr(dt.operator,!0)}else if(dt.key&&(Ze.tags.some(Ct=>Si(dt.key,Ct.key))||Ze.process.tags.some(Ct=>Si(dt.key,Ct.key))||Ze.logs&&Ze.logs.some(Ct=>Ct.fields.some(Lt=>Si(dt.key,Lt.key)))||Ze.kind&&dt.key===Xn||Ze.statusCode!==void 0&&dt.key===Pt||Ze.statusMessage&&dt.key===Dt||Ze.instrumentationLibraryName&&dt.key===$t||Ze.instrumentationLibraryVersion&&dt.key===jt||Ze.traceState&&dt.key===mn||dt.key===Dn))return yr(dt.operator,!0);return yr(dt.operator,!1)}))},Si=(Qe,Ye)=>Qe===Ye.toString(),xi=(Qe,Ye)=>Qe.key===Ye.key.toString()&&Qe.value===Ye.value.toString(),yr=(Qe,Ye)=>Qe==="="?Ye:!Ye,di=(Qe,Ye)=>Qe.filter(Ze=>Ye.serviceNameOperator==="="?Ze.process.serviceName===Ye.serviceName:Ze.process.serviceName!==Ye.serviceName),uo=(Qe,Ye)=>Qe.filter(Ze=>Ye.spanNameOperator==="="?Ze.operationName===Ye.spanName:Ze.operationName!==Ye.spanName),Wl=(Qe,Ye)=>{const Ze=No(Ye?.from||""),dt=No(Ye?.to||"");let Ct=[];if(Ze&&(Ct=Qe.filter(Lt=>Ye.fromOperator===">"?Lt.duration>Ze:Lt.duration>=Ze)),dt){const Lt=Ft=>Ye.toOperator==="<"?Ft.duration<dt:Ft.duration<=dt;Ct=Ct.length>0?Ct.filter(Ft=>Lt(Ft)):Qe.filter(Ft=>Lt(Ft))}return Ct},No=Qe=>{if(Qe.includes("ns"))return parseFloat(Qe.split("ns")[0])/1e3;if(Qe.includes("us"))return parseFloat(Qe.split("us")[0]);if(Qe.includes("\xB5s"))return parseFloat(Qe.split("\xB5s")[0]);if(Qe.includes("ms"))return parseFloat(Qe.split("ms")[0])*1e3;if(Qe.includes("s"))return parseFloat(Qe.split("s")[0])*1e3*1e3;if(Qe.includes("m"))return parseFloat(Qe.split("m")[0])*1e3*1e3*60;if(Qe.includes("h"))return parseFloat(Qe.split("h")[0])*1e3*1e3*60*60},mo=(0,a.memo)(function(Ye){const{trace:Ze,search:dt,spanFilterMatches:Ct,showSpanFilterMatchesOnly:Lt,setShowSpanFilterMatchesOnly:Ft,showCriticalPathSpansOnly:Yt,setShowCriticalPathSpansOnly:nn,focusedSpanIndexForSearch:an,setFocusedSpanIndexForSearch:Nn,setFocusedSpanIdForSearch:Kn,datasourceType:Vn,clear:Hn,showSpanFilters:ua}=Ye,Qn=(0,g.wW)(Fl),ha=(0,a.useMemo)(()=>dt.serviceName&&dt.serviceName!==""||dt.spanName&&dt.spanName!==""||No(dt.from||"")||No(dt.to||"")||dt.tags.length>1||dt.tags.some(oa=>oa.key)||dt.query&&dt.query!==""||Lt,[dt.serviceName,dt.spanName,dt.from,dt.to,dt.tags,dt.query,Lt]);return a.createElement("div",{className:Qn.container},a.createElement("div",{className:Qn.controls},a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement(mt.zx,{variant:"destructive",disabled:!ha,type:"button",fill:"outline","aria-label":"Clear filters button",onClick:Hn},"Clear"),a.createElement("div",{className:Qn.matchesOnly},a.createElement(Pi.r,{value:Lt,onChange:oa=>Ft(oa.currentTarget.checked??!1),label:"Show matches only switch",disabled:!Ct?.size}),a.createElement(mt.zx,{onClick:()=>Ft(!Lt),className:Qn.clearMatchesButton,variant:"secondary",fill:"text",disabled:!Ct?.size},"Show matches only")),a.createElement("div",{className:Qn.matchesOnly},a.createElement(Pi.r,{value:Yt,onChange:oa=>nn(oa.currentTarget.checked??!1),label:"Show critical path only switch"}),a.createElement(mt.zx,{onClick:()=>nn(!Yt),className:Qn.clearMatchesButton,variant:"secondary",fill:"text"},"Show critical path only"))),a.createElement("div",{className:Qn.nextPrevResult},a.createElement(so,{trace:Ze,spanFilterMatches:Ct,setFocusedSpanIdForSearch:Kn,focusedSpanIndexForSearch:an,setFocusedSpanIndexForSearch:Nn,datasourceType:Vn,showSpanFilters:ua})))))}),Fl=Qe=>{const Ye=(0,mt.fW)({theme:Qe,variant:"secondary",size:"md",iconOnly:!1,fill:"outline"});return{button:(0,n.css)(Ye.button),buttonDisabled:(0,n.css)(Ye.disabled,{pointerEvents:"none",cursor:"not-allowed"}),container:(0,n.css)`
      display: inline;
    `,controls:(0,n.css)`
      display: flex;
      justify-content: flex-end;
      margin: 5px 0 0 0;
    `,matchesOnly:(0,n.css)`
      display: inline-flex;
      margin: 0 0 0 25px;
      vertical-align: middle;
      align-items: center;
    `,clearMatchesButton:(0,n.css)`
      color: ${Qe.colors.text.primary};

      &:hover {
        background: inherit;
      }
    `,nextPrevResult:(0,n.css)`
      margin-left: auto;
      display: flex;
      align-items: center;
    `}},Yi=(0,a.memo)(Qe=>{const{trace:Ye,search:Ze,setSearch:dt,showSpanFilters:Ct,setShowSpanFilters:Lt,showSpanFilterMatchesOnly:Ft,setShowSpanFilterMatchesOnly:Yt,showCriticalPathSpansOnly:nn,setShowCriticalPathSpansOnly:an,setFocusedSpanIdForSearch:Nn,spanFilterMatches:Kn,datasourceType:Vn}=Qe,Hn={...(0,g.wW)(br)},[ua,Qn]=(0,a.useState)(),[ha,oa]=(0,a.useState)(),[xa,Ba]=(0,a.useState)(),[na,Fa]=(0,a.useState)({}),[ja,ps]=(0,a.useState)(-1),Is=/^\d+(?:\.\d)?\d*(?:ns|us|µs|ms|s|m|h)$/,bs=(0,a.useCallback)(()=>{Qn(void 0),oa(void 0),Ba(void 0),Fa({}),dt(li.js),Yt(!1)},[dt,Yt]);if((0,a.useEffect)(()=>{bs()},[bs,Ye]),!Ye)return null;const vs=Wn=>{ps(-1),Nn(""),dt(Wn)},qs=()=>{if(!ua){const Wn=Ye.spans.map(aa=>aa.process.serviceName);Qn((0,De.uniq)(Wn).sort().map(Os.E))}},Rs=()=>{if(!ha){const Wn=Ye.spans.map(aa=>aa.operationName);oa((0,De.uniq)(Wn).sort().map(Os.E))}},Dr=()=>{if(!xa){let Wn=[],aa=[];Ye.spans.forEach(ya=>{ya.tags.forEach(Ya=>{Wn.push(Ya.key)}),ya.process.tags.forEach(Ya=>{Wn.push(Ya.key)}),ya.logs!==null&&ya.logs.forEach(Ya=>{Ya.fields.forEach(ws=>{aa.push(ws.key)})}),ya.kind&&Wn.push(Xn),ya.statusCode!==void 0&&Wn.push(Pt),ya.statusMessage&&Wn.push(Dt),ya.instrumentationLibraryName&&Wn.push($t),ya.instrumentationLibraryVersion&&Wn.push(jt),ya.traceState&&Wn.push(mn),Wn.push(Dn)}),Wn=(0,De.uniq)(Wn).sort(),aa=(0,De.uniq)(aa).sort(),Ba([...Wn,...aa].map(Os.E))}},qr=async Wn=>{const aa=[];return Ye.spans.forEach(ya=>{const Ya=ya.tags.find(as=>as.key===Wn)?.value;Ya&&aa.push(Ya.toString());const ws=ya.process.tags.find(as=>as.key===Wn)?.value;switch(ws&&aa.push(ws.toString()),ya.logs!==null&&ya.logs.forEach(as=>{const eo=as.fields.find(Es=>Es.key===Wn)?.value;eo&&aa.push(eo.toString())}),Wn){case Xn:ya.kind&&aa.push(ya.kind);break;case Pt:ya.statusCode!==void 0&&aa.push(en.Q[ya.statusCode].toLowerCase());break;case Dt:ya.statusMessage&&aa.push(ya.statusMessage);break;case $t:ya.instrumentationLibraryName&&aa.push(ya.instrumentationLibraryName);break;case jt:ya.instrumentationLibraryVersion&&aa.push(ya.instrumentationLibraryVersion);break;case mn:ya.traceState&&aa.push(ya.traceState);break;case Dn:aa.push(ya.spanID);break;default:break}}),(0,De.uniq)(aa).sort().map(Os.E)},Vr=(Wn,aa)=>{dt({...Ze,tags:Ze.tags?.map(Ya=>Ya.id===Wn.id?{...Ya,key:aa?.value||"",value:void 0}:Ya)}),(async()=>{if(aa?.value)Fa({...na,[Wn.id]:await qr(aa.value)});else{const Ya={...na};Ya[Wn.id]&&delete Ya[Wn.id],Fa(Ya)}})()},Qa=()=>{const Wn={id:(0,li.kb)(),operator:"="};dt({...Ze,tags:[...Ze.tags,Wn]})},gr=Wn=>{let aa=Ze.tags.filter(ya=>ya.id!==Wn);aa.length===0&&(aa=[{id:(0,li.kb)(),operator:"="}]),dt({...Ze,tags:aa})},Gs=a.createElement(a.Fragment,null,a.createElement(Oe.u,{content:"Filter your spans below. You can continue to apply filters until you have narrowed down your resulting spans to the select few you are most interested in.",placement:"right"},a.createElement("span",{className:Hn.collapseLabel},"Span Filters",a.createElement(Me.J,{size:"md",name:"info-circle"}))),!Ct&&a.createElement("div",{className:Hn.nextPrevResult},a.createElement(so,{trace:Ye,spanFilterMatches:Kn,setFocusedSpanIdForSearch:Nn,focusedSpanIndexForSearch:ja,setFocusedSpanIndexForSearch:ps,datasourceType:Vn,showSpanFilters:Ct})));return a.createElement("div",{className:Hn.container},a.createElement(wl.U,{label:Gs,collapsible:!0,isOpen:Ct,onToggle:Lt},a.createElement(oi.Z,{className:Hn.flexContainer},a.createElement(Co._,{label:"Service Name",labelWidth:16},a.createElement(ii.Lh,{spacing:"xs"},a.createElement(Er.Ph,{"aria-label":"Select service name operator",onChange:Wn=>vs({...Ze,serviceNameOperator:Wn.value}),options:[(0,Os.E)("="),(0,Os.E)("!=")],value:Ze.serviceNameOperator}),a.createElement(Er.Ph,{"aria-label":"Select service name",isClearable:!0,onChange:Wn=>vs({...Ze,serviceName:Wn?.value||""}),onOpenMenu:qs,options:ua,placeholder:"All service names",value:Ze.serviceName||null}))),a.createElement(Qi,{onChange:Wn=>{vs({...Ze,query:Wn}),Wn===""&&Yt(!1)},value:Ze.query||""})),a.createElement(oi.Z,null,a.createElement(Co._,{label:"Span Name",labelWidth:16},a.createElement(ii.Lh,{spacing:"xs"},a.createElement(Er.Ph,{"aria-label":"Select span name operator",onChange:Wn=>vs({...Ze,spanNameOperator:Wn.value}),options:[(0,Os.E)("="),(0,Os.E)("!=")],value:Ze.spanNameOperator}),a.createElement(Er.Ph,{"aria-label":"Select span name",isClearable:!0,onChange:Wn=>vs({...Ze,spanName:Wn?.value||""}),onOpenMenu:Rs,options:ha,placeholder:"All span names",value:Ze.spanName||null})))),a.createElement(oi.Z,null,a.createElement(Co._,{label:"Duration",labelWidth:16,tooltip:"Filter by duration. Accepted units are ns, us, ms, s, m, h"},a.createElement(ii.Lh,{spacing:"xs",align:"flex-start"},a.createElement(Er.Ph,{"aria-label":"Select min span operator",onChange:Wn=>vs({...Ze,fromOperator:Wn.value}),options:[(0,Os.E)(">"),(0,Os.E)(">=")],value:Ze.fromOperator}),a.createElement("div",{className:Hn.intervalInput},a.createElement(Po.w,{ariaLabel:"Select min span duration",onChange:Wn=>vs({...Ze,from:Wn}),isInvalidError:"Invalid duration",placeholder:"e.g. 100ms, 1.2s",width:18,value:Ze.from||"",validationRegex:Is})),a.createElement(Er.Ph,{"aria-label":"Select max span operator",onChange:Wn=>vs({...Ze,toOperator:Wn.value}),options:[(0,Os.E)("<"),(0,Os.E)("<=")],value:Ze.toOperator}),a.createElement(Po.w,{ariaLabel:"Select max span duration",onChange:Wn=>vs({...Ze,to:Wn}),isInvalidError:"Invalid duration",placeholder:"e.g. 100ms, 1.2s",width:18,value:Ze.to||"",validationRegex:Is})))),a.createElement(oi.Z,{className:Hn.tagsRow},a.createElement(Co._,{label:"Tags",labelWidth:16,tooltip:"Filter by tags, process tags or log fields in your spans."},a.createElement("div",null,Ze.tags.map((Wn,aa)=>a.createElement("div",{key:aa},a.createElement(ii.Lh,{spacing:"xs",width:"auto"},a.createElement(Er.Ph,{"aria-label":"Select tag key",isClearable:!0,key:Wn.key,onChange:ya=>Vr(Wn,ya),onOpenMenu:Dr,options:xa,placeholder:"Select tag",value:Wn.key||null}),a.createElement(Er.Ph,{"aria-label":"Select tag operator",onChange:ya=>{vs({...Ze,tags:Ze.tags?.map(Ya=>Ya.id===Wn.id?{...Ya,operator:ya.value}:Ya)})},options:[(0,Os.E)("="),(0,Os.E)("!=")],value:Wn.operator}),a.createElement("span",{className:Hn.tagValues},a.createElement(Er.Ph,{"aria-label":"Select tag value",isClearable:!0,key:Wn.value,onChange:ya=>{vs({...Ze,tags:Ze.tags?.map(Ya=>Ya.id===Wn.id?{...Ya,value:ya?.value||""}:Ya)})},options:na[Wn.id]?na[Wn.id]:[],placeholder:"Select value",value:Wn.value})),a.createElement(Ci._,{"aria-label":"Remove tag",variant:"secondary",icon:"times",onClick:()=>gr(Wn.id),title:"Remove tag"}),a.createElement("span",{className:Hn.addTag},Ze?.tags?.length&&aa===Ze.tags.length-1&&a.createElement(Ci._,{"aria-label":"Add tag",variant:"secondary",icon:"plus",onClick:Qa,title:"Add tag"})))))))),a.createElement(mo,{trace:Ye,search:Ze,spanFilterMatches:Kn,showSpanFilterMatchesOnly:Ft,setShowSpanFilterMatchesOnly:Yt,showCriticalPathSpansOnly:nn,setShowCriticalPathSpansOnly:an,setFocusedSpanIdForSearch:Nn,focusedSpanIndexForSearch:ja,setFocusedSpanIndexForSearch:ps,datasourceType:Vn,clear:bs,showSpanFilters:Ct})))});Yi.displayName="SpanFilters";const br=Qe=>({container:(0,n.css)`
      label: SpanFilters;
      margin: 0.5em 0 -${Qe.spacing(1)} 0;
      z-index: 5;

      & > div {
        border-left: none;
        border-right: none;
      }
    `,collapseLabel:(0,n.css)`
      svg {
        color: #aaa;
        margin: -2px 0 0 10px;
      }
    `,flexContainer:(0,n.css)({display:"flex",justifyContent:"space-between"}),addTag:(0,n.css)`
      margin: 0 0 0 10px;
    `,intervalInput:(0,n.css)`
      margin: 0 -4px 0 0;
    `,tagsRow:(0,n.css)`
      margin: -4px 0 0 0;
    `,tagValues:(0,n.css)`
      max-width: 200px;
    `,nextPrevResult:(0,n.css)`
      flex: 1;
      align-items: center;
      display: flex;
      justify-content: flex-end;
      margin-right: ${Qe.spacing(1)};
    `}),Jr=(0,a.memo)(Qe=>{const{trace:Ye,data:Ze,app:dt,timeZone:Ct,search:Lt,setSearch:Ft,showSpanFilters:Yt,setShowSpanFilters:nn,showSpanFilterMatchesOnly:an,setShowSpanFilterMatchesOnly:Nn,showCriticalPathSpansOnly:Kn,setShowCriticalPathSpansOnly:Vn,setFocusedSpanIdForSearch:Hn,spanFilterMatches:ua,datasourceType:Qn,setHeaderHeight:ha}=Qe,oa=(0,g.wW)(Yo);(0,a.useEffect)(()=>{ha(document.querySelector("."+oa.header)?.scrollHeight??0)},[ha,Yt,oa.header]);const xa=(0,a.useMemo)(()=>Ye?co(Ye):[],[Ye]);if(!Ye)return null;const Ba=(bs,vs)=>{const qs=(0,rn.dq)(bs.startTime/1e3,{timeZone:vs,defaultWithMS:!0}),Rs=qs.match(/^(.+)(:\d\d\.\d+)$/);return Rs?a.createElement("span",{className:oa.TracePageHeaderOverviewItemValue},Rs[1],a.createElement("span",{className:oa.TracePageHeaderOverviewItemValueDetail},Rs[2])):qs},na=a.createElement("h1",{className:s()(oa.title)},a.createElement(jn,{traceName:ri(Ye.spans)}),a.createElement("small",{className:oa.duration},(0,C.LU)(Ye.duration))),{method:Fa,status:ja,url:ps}=jo(Ye.spans);let Is="green";return ja&&ja.length>0&&(ja[0].value.toString().charAt(0)==="4"?Is="orange":ja[0].value.toString().charAt(0)==="5"&&(Is="red")),a.createElement("header",{className:oa.header},a.createElement("div",{className:oa.titleRow},xa&&xa.length>0&&a.createElement(St,{links:xa,className:oa.TracePageHeaderBack}),na,a.createElement(Bl,{traceId:Ye.traceID,data:Ze,app:dt})),a.createElement("div",{className:oa.subtitle},a.createElement("span",{className:oa.timestamp},Ba(Ye,Ct)),a.createElement("span",{className:oa.tagMeta},Fa&&Fa.length>0&&a.createElement(Oe.u,{content:"http.method",interactive:!0},a.createElement("span",{className:oa.tag},a.createElement(io.C,{text:Fa[0].value,color:"blue"}))),ja&&ja.length>0&&a.createElement(Oe.u,{content:"http.status_code",interactive:!0},a.createElement("span",{className:oa.tag},a.createElement(io.C,{text:ja[0].value,color:Is}))),ps&&ps.length>0&&a.createElement(Oe.u,{content:"http.url or http.target or http.path",interactive:!0},a.createElement("span",{className:oa.url},ps[0].value)))),a.createElement(Yi,{trace:Ye,showSpanFilters:Yt,setShowSpanFilters:nn,showSpanFilterMatchesOnly:an,setShowSpanFilterMatchesOnly:Nn,showCriticalPathSpansOnly:Kn,setShowCriticalPathSpansOnly:Vn,search:Lt,setSearch:Ft,spanFilterMatches:ua,setFocusedSpanIdForSearch:Hn,datasourceType:Qn}))});Jr.displayName="TracePageHeader";const Yo=Qe=>({TracePageHeaderBack:(0,n.css)`
      label: TracePageHeaderBack;
      align-items: center;
      align-self: stretch;
      background-color: #fafafa;
      border-bottom: 1px solid #ddd;
      border-right: 1px solid #ddd;
      color: inherit;
      display: flex;
      font-size: 1.4rem;
      padding: 0 1rem;
      margin-bottom: -1px;
      &:hover {
        background-color: #f0f0f0;
        border-color: #ccc;
      }
    `,TracePageHeaderOverviewItemValueDetail:s()((0,n.css)`
        label: TracePageHeaderOverviewItemValueDetail;
        color: #aaa;
      `,"trace-item-value-detail"),TracePageHeaderOverviewItemValue:(0,n.css)`
      label: TracePageHeaderOverviewItemValue;
      &:hover > .trace-item-value-detail {
        color: unset;
      }
    `,header:(0,n.css)`
      label: TracePageHeader;
      background-color: ${Qe.colors.background.primary};
      padding: 0.5em 0 0 0;
      position: sticky;
      top: 0;
      z-index: 5;
    `,titleRow:(0,n.css)`
      align-items: flex-start;
      display: flex;
      padding: 0 8px;
    `,title:(0,n.css)`
      color: inherit;
      flex: 1;
      font-size: 1.7em;
      line-height: 1em;
    `,subtitle:(0,n.css)`
      flex: 1;
      line-height: 1em;
      margin: -0.5em 0.5em 0.75em 0.5em;
    `,tag:(0,n.css)`
      margin: 0 0.5em 0 0;
    `,duration:(0,n.css)`
      color: #aaa;
      margin: 0 0.75em;
    `,timestamp:(0,n.css)`
      vertical-align: middle;
    `,tagMeta:(0,n.css)`
      margin: 0 0.75em;
      vertical-align: text-top;
    `,url:(0,n.css)`
      margin: -2.5px 0.3em;
      height: 15px;
      overflow: hidden;
      word-break: break-all;
      line-height: 20px;
    `,TracePageHeaderTraceId:(0,n.css)`
      label: TracePageHeaderTraceId;
      white-space: nowrap;
      text-overflow: ellipsis;
      max-width: 30%;
      display: inline-block;
    `});class Kr{constructor(Ye){const{isTagsOpen:Ze,isProcessOpen:dt,isReferencesOpen:Ct,isWarningsOpen:Lt,isStackTracesOpen:Ft,logs:Yt,references:nn}=Ye||{};this.isTagsOpen=!!Ze,this.isProcessOpen=!!dt,this.isReferencesOpen=!!Ct,this.isWarningsOpen=!!Lt,this.isStackTracesOpen=!!Ft,this.logs={isOpen:!!(Yt&&Yt.isOpen),openedItems:Yt&&Yt.openedItems?new Set(Yt.openedItems):new Set},this.references={isOpen:!!(nn&&nn.isOpen),openedItems:nn&&nn.openedItems?new Set(nn.openedItems):new Set}}toggleTags(){const Ye=new Kr(this);return Ye.isTagsOpen=!this.isTagsOpen,Ye}toggleProcess(){const Ye=new Kr(this);return Ye.isProcessOpen=!this.isProcessOpen,Ye}toggleReferences(){const Ye=new Kr(this);return Ye.references.isOpen=!this.references.isOpen,Ye}toggleReferenceItem(Ye){const Ze=new Kr(this);return Ze.references.openedItems.has(Ye)?Ze.references.openedItems.delete(Ye):Ze.references.openedItems.add(Ye),Ze}toggleWarnings(){const Ye=new Kr(this);return Ye.isWarningsOpen=!this.isWarningsOpen,Ye}toggleStackTraces(){const Ye=new Kr(this);return Ye.isStackTracesOpen=!this.isStackTracesOpen,Ye}toggleLogs(){const Ye=new Kr(this);return Ye.logs.isOpen=!this.logs.isOpen,Ye}toggleLogItem(Ye){const Ze=new Kr(this);return Ze.logs.openedItems.has(Ye)?Ze.logs.openedItems.delete(Ye):Ze.logs.openedItems.add(Ye),Ze}}var Wo=e(8111);class Xr{static iterFunction(Ye,Ze=0){return dt=>Ye(dt.value,dt,Ze)}static searchFunction(Ye){return typeof Ye=="function"?Ye:(Ze,dt)=>Ye instanceof Xr?dt===Ye:Ze===Ye}constructor(Ye,Ze=[]){this.value=Ye,this.children=Ze}get depth(){return this.children.reduce((Ye,Ze)=>Math.max(Ze.depth+1,Ye),1)}get size(){let Ye=0;return this.walk(()=>Ye++),Ye}addChild(Ye){return this.children.push(Ye instanceof Xr?Ye:new Xr(Ye)),this}find(Ye){if(Xr.iterFunction(Xr.searchFunction(Ye))(this))return this;for(let dt=0;dt<this.children.length;dt++){const Ct=this.children[dt].find(Ye);if(Ct)return Ct}return null}getPath(Ye){const Ze=Xr.iterFunction(Xr.searchFunction(Ye)),dt=(Ct,Lt)=>{const Ft=Lt.concat([Ct]);if(Ze(Ct))return Ft;for(let Yt=0;Yt<Ct.children.length;Yt++){const nn=Ct.children[Yt],an=dt(nn,Ft);if(an)return an}return null};return dt(this,[])}walk(Ye,Ze=0){const dt=[];let Ct=Ze;for(dt.push({node:this,depth:Ct});dt.length;){const Lt=dt[dt.length-1];dt.pop();const{node:Ft,depth:Yt}=Lt;Ye(Ft.value,Ft,Yt),Ct=Yt+1;let nn=Ft.children.length-1;for(;nn>=0;)dt.push({node:Ft.children[nn],depth:Ct}),nn--}}paths(Ye){const Ze=[];Ze.push({node:this,childIndex:0});const dt=[];for(;Ze.length;){const{node:Ct,childIndex:Lt}=Ze[Ze.length-1];if(Ct.children.length>=Lt+1)Ze[Ze.length-1].childIndex++,Ze.push({node:Ct.children[Lt],childIndex:0});else{if(Ct.children.length===0){const Ft=Ze.map(Yt=>Yt.node.value);Ye(Ft)}Ze.pop()}}return dt}}const Mi=Qe=>Qe.spanID,Kl=Qe=>Qe.references||[],Vl=(0,Wo.P1)((0,Wo.P1)(({span:Qe})=>Qe,Kl),({type:Qe})=>Qe,(Qe,Ye)=>Qe.find(Ze=>Ze.refType===Ye)),Gc=(0,Wo.P1)(Qe=>Vl({span:Qe,type:"CHILD_OF"}),Qe=>Qe?Qe.spanID:null),Zi=Qe=>Qe.spans,jc=(0,Wo.P1)(Zi,Qe=>Qe.reduce((Ye,Ze)=>Ye.set(Mi(Ze),Ze),new Map)),Ti="__root__";function ui(Qe,Ye=null){const Ze=new Map(Qe.spans.map(Ft=>[Ft.spanID,new Xr(Ft.spanID)])),dt=Ye??new Map(Qe.spans.map(Ft=>[Ft.spanID,Ft])),Ct=new Xr(Ti);Qe.spans.forEach(Ft=>{const Yt=Ze.get(Ft.spanID);if(Array.isArray(Ft.references)&&Ft.references.length){const{refType:nn,spanID:an}=Ft.references[0];if(nn==="CHILD_OF"||nn==="FOLLOWS_FROM")(Ze.get(an)||Ct).children?.push(Yt);else throw new Error(`Unrecognized ref type: ${nn}`)}else Ct.children.push(Yt)});const Lt=(Ft,Yt)=>{const nn=Ft?.value?dt.get(Ft.value.toString()):void 0,an=Yt?.value?dt.get(Yt.value.toString()):void 0;return+(nn?.startTime>an?.startTime)||+(nn?.startTime===an?.startTime)-1};return Qe.spans.forEach(Ft=>{const Yt=Ze.get(Ft.spanID);Yt.children.length>1&&Yt?.children.sort(Lt)}),Ct.children.sort(Lt),Ct}function _l(Qe){const Ye=new Map,Ze=Qe.reduce((Ct,Lt)=>(Ct.some(Ft=>Ft.key===Lt.key&&Ft.value===Lt.value)?Ye.set(`${Lt.key}:${Lt.value}`,`Duplicate tag "${Lt.key}:${Lt.value}"`):Ct.push(Lt),Ct),[]),dt=Array.from(Ye.values());return{dedupedTags:Ze,warnings:dt}}function Zo(Qe,Ye){const Ze=Qe?.slice()??[],dt=(Ye||[]).map(Ct=>Ct.toLowerCase());return Ze.sort((Ct,Lt)=>{const Ft=Ct.key.toLowerCase(),Yt=Lt.key.toLowerCase();for(let nn=0;nn<dt.length;nn++){const an=dt[nn];if(Ft.startsWith(an)&&!Yt.startsWith(an))return-1;if(!Ft.startsWith(an)&&Yt.startsWith(an))return 1}return Ft>Yt?1:Ft<Yt?-1:0}),Ze}function Oi(Qe){if(!Qe?.traceID)return null;const Ye=Qe.traceID.toLowerCase();let Ze=0,dt=Number.MAX_SAFE_INTEGER;const Ct=new Map,Lt=new Map;Qe.spans=Qe.spans.filter(Vn=>!!Vn.startTime),Qe.processes=Object.entries(Qe.processes).reduce((Vn,[Hn,ua])=>(Vn[Hn]={...ua,tags:Zo(ua.tags)},Vn),{});const Ft=Qe.spans.length;for(let Vn=0;Vn<Ft;Vn++){const Hn=Qe.spans[Vn],{startTime:ua,duration:Qn,processID:ha}=Hn;let oa=Hn.spanID;ua<dt&&(dt=ua),ua+Qn>Ze&&(Ze=ua+Qn);const xa=Ct.get(oa);xa!=null?(console.warn(`Dupe spanID, ${xa+1} x ${oa}`,Hn,Lt.get(oa)),(0,De.isEqual)(Hn,Lt.get(oa))&&console.warn("	 two spans with same ID have `isEqual(...) === true`"),Ct.set(oa,xa+1),oa=`${oa}_${xa}`,Hn.spanID=oa):Ct.set(oa,1),Hn.process=Qe.processes[ha],Lt.set(oa,Hn)}const Yt=ui(Qe,Lt),nn=[],an={};Yt.walk((Vn,Hn,ua=0)=>{if(Vn==="__root__"||typeof Vn!="string")return;const Qn=Lt.get(Vn);if(!Qn)return;const{serviceName:ha}=Qn.process;an[ha]=(an[ha]||0)+1,Qn.relativeStartTime=Qn.startTime-dt,Qn.depth=ua-1,Qn.hasChildren=Hn.children.length>0,Qn.childSpanCount=Hn.children.length,Qn.warnings=Qn.warnings||[],Qn.tags=Qn.tags||[],Qn.references=Qn.references||[],Qn.childSpanIds=Hn.children.slice().sort((xa,Ba)=>{const na=Lt.get(xa.value),Fa=Lt.get(Ba.value);return Fa.startTime+Fa.duration-(na.startTime+na.duration)}).map(xa=>xa.value);const oa=_l(Qn.tags);Qn.tags=Zo(oa.dedupedTags,Oa("topTagPrefixes")),Qn.warnings=Qn.warnings.concat(oa.warnings),Qn.references.forEach((xa,Ba)=>{const na=Lt.get(xa.spanID);na&&(xa.span=na,Ba>0&&(na.subsidiarilyReferencedBy=na.subsidiarilyReferencedBy||[],na.subsidiarilyReferencedBy.push({spanID:Vn,traceID:Ye,span:Qn,refType:xa.refType})))}),nn.push(Qn)});const Nn=ri(nn);return{services:Object.keys(an).map(Vn=>({name:Vn,numberOfSpans:an[Vn]})),spans:nn,traceID:Ye,traceName:Nn,processes:Qe.processes,duration:Ze-dt,startTime:dt,endTime:Ze}}},79152:(G,A,e)=>{"use strict";e.d(A,{Hn:()=>f,Kg:()=>v,th:()=>E,vc:()=>p});var n=e(66681),a=e(85960),o=e(11248),r=e(52219),i=e(15889),g=e(47257),u=e(81368),l=e(84933),m=e(27436),c=e(24956),d=e(7033);const f="None",E="Duration",v="Tag";function h({options:y,onOptionsChange:C}){const b=(0,g.wW)(s),S=[f,E,v].map(o.E);return a.createElement("div",{className:(0,n.css)({width:"100%"})},a.createElement(u.Z,{className:b.row},a.createElement(l._,{label:"Label",labelWidth:26,tooltip:"Default: duration",grow:!0},a.createElement(m.Ph,{inputId:"label",options:S,value:y.jsonData.spanBar?.type||"",onChange:D=>{(0,r.tp)({onOptionsChange:C,options:y},"spanBar",{...y.jsonData.spanBar,type:D?.value??""})},placeholder:"Duration",isClearable:!0,"aria-label":"select-label-name",width:40}))),y.jsonData.spanBar?.type===v&&a.createElement(u.Z,{className:b.row},a.createElement(l._,{label:"Tag key",labelWidth:26,tooltip:"Tag key which will be used to get the tag value. A span's attributes and resources will be searched for the tag key"},a.createElement(c.I,{type:"text",placeholder:"Enter tag key",onChange:D=>(0,r.tp)({onOptionsChange:C,options:y},"spanBar",{...y.jsonData.spanBar,tag:D.currentTarget.value}),value:y.jsonData.spanBar?.tag||"",width:40}))))}const p=({options:y,onOptionsChange:C})=>{let b=y.type;return b+=y.type==="tempo"?"/configure-tempo-data-source/#span-bar":"/#span-bar",a.createElement(i._,{title:"Span bar",description:a.createElement(d.W,{description:"Add additional info next to the service and operation on a span bar row in the trace view.",suffix:b,feature:"the span bar"})},a.createElement(h,{options:y,onOptionsChange:C}))},s=y=>({infoText:(0,n.css)`
    label: infoText;
    padding-bottom: ${y.spacing(2)};
    color: ${y.colors.text.secondary};
  `,row:(0,n.css)`
    label: row;
    align-items: baseline;
  `})},77061:(G,A,e)=>{"use strict";e.d(A,{u:()=>n});var n=(a=>(a.Logs="log",a.Traces="trace",a.Metrics="metric",a.Profiles="profile",a.Unknown="unknown",a))(n||{})},16602:(G,A,e)=>{"use strict";e.d(A,{GL:()=>u,H3:()=>g,Im:()=>v,K9:()=>p,WW:()=>a,b$:()=>E,bi:()=>o,h2:()=>i,im:()=>r,oD:()=>l,ty:()=>h,xb:()=>f});var n=e(66681);const a=(0,n.css)`
  position: relative;
`,o=(0,n.css)`
  margin-bottom: 0.25rem;
`,r=(0,n.css)`
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
`,i=(0,n.css)`
  margin: 0;
`,g=(0,n.css)`
  padding-left: 0.5rem;
  padding-right: 0.5rem;
`,u=(0,n.css)`
  padding-bottom: 0.5rem;
`,l=(0,n.css)`
  display: flex;
`,m=(0,n.css)`
  align-items: center;
`,c=(0,n.css)`
  align-items: start;
`,d=(0,n.css)`
  flex: 1 1 auto;
  min-width: 0; /* 1 */
  min-height: 0; /* 1 */
`,f=(0,n.css)`
  text-align: right;
`,E=(0,n.css)`
  display: inline-block;
`,v=(0,n.css)`
  margin: -0.2rem 0.25rem 0 0;
`,h=(0,n.css)`
  text-overflow: ellipsis;
`,p=(0,n.css)`
  width: 100%;
`,s=(0,n.css)`
  color: #aaa;
`,y=(0,n.css)`
  justify-content: flex-end;
`},69893:(G,A,e)=>{"use strict";e.d(A,{EUpdateTypes:()=>a,default:()=>i});var n=(g=>(g.DragEnd="DragEnd",g.DragMove="DragMove",g.DragStart="DragStart",g.MouseEnter="MouseEnter",g.MouseLeave="MouseLeave",g.MouseMove="MouseMove",g))(n||{});const a=n;var o=e(56375);const r=0;class i{constructor({getBounds:u,tag:l,resetBoundsOnResize:m=!0,...c}){this.resetBounds=()=>{this._bounds=void 0},this._handleMinorMouseEvent=d=>{const{button:f,clientX:E,type:v}=d;if(this._isDragging||f!==r)return;let h=null,p;if(v==="mouseenter")h=a.MouseEnter,p=this._onMouseEnter;else if(v==="mouseleave")h=a.MouseLeave,p=this._onMouseLeave;else if(v==="mousemove")h=a.MouseMove,p=this._onMouseMove;else throw new Error(`invalid event type: ${v}`);if(!p)return;const{value:s,x:y}=this._getPosition(E);p({event:d,type:h,value:s,x:y,manager:this,tag:this.tag})},this._handleDragEvent=d=>{const{button:f,clientX:E,type:v}=d;let h=null,p;if(v==="mousedown"){if(this._isDragging||f!==r)return;window.addEventListener("mousemove",this._handleDragEvent),window.addEventListener("mouseup",this._handleDragEvent);const C=(0,o.get)(document,"body.style");C&&(C.userSelect="none"),this._isDragging=!0,h=a.DragStart,p=this._onDragStart}else if(v==="mousemove"){if(!this._isDragging)return;h=a.DragMove,p=this._onDragMove}else if(v==="mouseup"){if(!this._isDragging)return;this._stopDragging(),h=a.DragEnd,p=this._onDragEnd}else throw new Error(`invalid event type: ${v}`);if(!p)return;const{value:s,x:y}=this._getPosition(E);p({event:d,type:h,value:s,x:y,manager:this,tag:this.tag})},this.handleMouseDown=this._handleDragEvent,this.handleMouseEnter=this._handleMinorMouseEvent,this.handleMouseMove=this._handleMinorMouseEvent,this.handleMouseLeave=this._handleMinorMouseEvent,this.getBounds=u,this.tag=l,this._isDragging=!1,this._bounds=void 0,this._resetBoundsOnResize=!!m,this._resetBoundsOnResize&&window.addEventListener("resize",this.resetBounds),this._onMouseEnter=c.onMouseEnter,this._onMouseLeave=c.onMouseLeave,this._onMouseMove=c.onMouseMove,this._onDragStart=c.onDragStart,this._onDragMove=c.onDragMove,this._onDragEnd=c.onDragEnd}_getBounds(){return this._bounds||(this._bounds=this.getBounds(this.tag)),this._bounds}_getPosition(u){const{clientXLeft:l,maxValue:m,minValue:c,width:d}=this._getBounds();let f=u-l,E=f/d;return c!=null&&E<c?(E=c,f=c*d):m!=null&&E>m&&(E=m,f=m*d),{value:E,x:f}}_stopDragging(){window.removeEventListener("mousemove",this._handleDragEvent),window.removeEventListener("mouseup",this._handleDragEvent);const u=(0,o.get)(document,"body.style");u&&(u.userSelect="auto"),this._isDragging=!1}isDragging(){return this._isDragging}dispose(){this._isDragging&&this._stopDragging(),this._resetBoundsOnResize&&window.removeEventListener("resize",this.resetBounds),this._bounds=void 0,this._onMouseEnter=void 0,this._onMouseLeave=void 0,this._onMouseMove=void 0,this._onDragStart=void 0,this._onDragMove=void 0,this._onDragEnd=void 0}}},56075:(G,A,e)=>{"use strict";e.d(A,{_K:()=>l,e6:()=>m});var n=e(84513),a=e(19737),o=e(42309);function r(d){if(d.length!==7)return[0,0,0];const f=d.slice(1,3),E=d.slice(3,5),v=d.slice(5);return[parseInt(f,16),parseInt(E,16),parseInt(v,16)]}class i{constructor(f,E){const v=c(f,E);this.colorsHex=v,this.colorsRgb=v.map(r),this.cache=new Map,this.prevColorIndex=void 0}_getColorIndex(f){let E=this.cache.get(f);if(E==null){const v=this.hashCode(f?f.toLowerCase():"");if(E=Math.abs(v%this.colorsHex.length),this.prevColorIndex!==void 0){this.prevColorIndex===E&&(E=this.getNextIndex(E));const h=this.colorsHex[this.prevColorIndex];if(a.Z.readability(h,this.colorsHex[E])<1.5){let p=E;for(let s=0;s<this.colorsHex.length;s++)if(p=this.getNextIndex(p),a.Z.readability(h,this.colorsHex[p])>1.5){E=p;break}}}this.cache.set(f,E),this.prevColorIndex=E}return E}getNextIndex(f){return f+1<this.colorsHex.length?f+1:0}hashCode(f){let E=0,v,h;for(v=0;v<f.length;v++)h=f.charCodeAt(v),E=(E<<5)-E+h;return E}getColorByKey(f){const E=this._getColorIndex(f);return this.colorsHex[E]}getRgbColorByKey(f){const E=this._getColorIndex(f);return this.colorsRgb[E]}clear(){this.cache.clear()}}const g=(0,n.Z)((d,f)=>new i(d,f));function u(d){g([],d)}function l(d,f){return g(o.O9,f).getColorByKey(d)}function m(d,f){return g(o.O9,f).getRgbColorByKey(d)}function c(d,f){const E=[...d],v=E.indexOf("#E24D42");v>-1&&E.splice(v,1);const h=d.indexOf("#BF1B00");h>-1&&E.splice(h,1);let p=[];for(const s of E)a.Z.readability(f.colors.background.primary,s)>=3&&p.push(s);return p}},85325:(G,A,e)=>{"use strict";e.d(A,{LU:()=>C});var n=e(56375),a=e.n(n),o=e(770),r=e.n(o);const i="YYYY-MM-DD",g="HH:mm",u=1e3,l=1e3*u,m=60*l,c=60*m,d=24*c,f=Math.log10(u),E=[{unit:"d",microseconds:d,ofPrevious:24},{unit:"h",microseconds:c,ofPrevious:60},{unit:"m",microseconds:m,ofPrevious:60},{unit:"s",microseconds:l,ofPrevious:1e3},{unit:"ms",microseconds:u,ofPrevious:1e3},{unit:"\u03BCs",microseconds:1,ofPrevious:1e3}],v=(b,S,D)=>toFloatPrecision(b/D,S)*D;function h(b){return moment(b/u).format(i)}function p(b){return moment(b/u).format(g)}function s(b){const S=v(b,f,u);return`${moment.duration(S/u).asMilliseconds()}ms`}function y(b){const S=v(b,f,l);return`${moment.duration(S/u).asSeconds()}s`}function C(b){const[S,D]=(0,n.dropWhile)(E,({microseconds:x},I)=>I<E.length-1&&x>b);if(S.ofPrevious===1e3)return`${(0,n.round)(b/S.microseconds,2)}${S.unit}`;const T=`${Math.floor(b/S.microseconds)}${S.unit}`,R=Math.round(b/D.microseconds%S.ofPrevious),O=`${R}${D.unit}`;return R===0?T:`${T} ${O}`}},90835:(G,A,e)=>{"use strict";e.d(A,{n4:()=>E,wq:()=>v,yN:()=>S,yj:()=>c});var n=e(85960),a=e(56582),o=e(71244),r=e(85745),i=e(12399),g=e(97666),u=e(65512),l=e(52077),m=e(77061);function c({splitOpenFn:x,traceToLogsOptions:I,traceToMetricsOptions:L,traceToProfilesOptions:P,dataFrame:N,createFocusSpanLink:F,trace:U}){if(!N)return;let j=T(U);const V=N.fields.some(H=>!!H.config.links?.length),_=h(x,N.fields[0],I,L,F,j);return function(z){let K=_(z);if(V){j={...j,...R(z),...O(z,P)};const Y=N.fields.filter(k=>!!k.config.links?.length);try{let k;P?.datasourceUid&&(k=(0,u.ak)().getInstanceSettings(P.datasourceUid));const q=k?.type==="grafana-pyroscope-datasource",X=z.tags.some(re=>re.key===v),te=q&&X;let se=[];Y.forEach(re=>{const fe=(0,l.a_)({field:re,rowIndex:z.dataFrameRowIndex,splitOpenFn:x,range:D(z,void 0,void 0,te),dataFrame:N,vars:j});se=se.concat(fe)});const de=se.map(re=>({title:re.title,href:re.href,onClick:re.onClick,content:n.createElement(g.J,{name:"link",title:re.title||"Link"}),field:re.origin,type:te?m.u.Profiles:m.u.Unknown}));K.push.apply(K,de)}catch(k){return console.error(k),K}}return K}}const d=x=>x.map(I=>({key:I,value:I.includes(".")?I.replace(".","_"):void 0})),f=d(["cluster","hostname","namespace","pod","service.name","service.namespace"]),E=d(["service.name","service.namespace"]),v="pyroscope.profile.id";function h(x,I,L,P,N,F){let U;L?.datasourceUid&&(U=(0,u.ak)().getInstanceSettings(L.datasourceUid));const j=U?.type==="grafana-splunk-datasource";let V;return P?.datasourceUid&&(V=(0,u.ak)().getInstanceSettings(P.datasourceUid)),function(H){F={...F,...R(H)};const z=[];let K,Y="";if(U&&L){const k=L.customQuery?L.query:void 0,q=L.tags&&L.tags.length>0?L.tags:f;switch(U?.type){case"loki":Y=S(H,q),K=p(H,L,Y,k);break;case"grafana-splunk-datasource":Y=S(H,q,{joinBy:" "}),K=y(H,L,Y,k);break;case"elasticsearch":case"grafana-opensearch-datasource":Y=S(H,q,{labelValueSign:":",joinBy:" AND "}),K=s(H,L,Y,k);break;case"grafana-falconlogscale-datasource":Y=S(H,q,{joinBy:" OR "}),K=b(H,L,Y,k);break;case"googlecloud-logging-datasource":Y=S(H,q,{joinBy:" AND "}),K=C(H,L,Y,k)}if(K){const X={title:U.name,url:"",internal:{datasourceUid:U.uid,datasourceName:U.name,query:K}};if(F={...F,__tags:{text:"Tags",value:Y}},(0,l.lt)(X.internal.query,F).allVariablesDefined){const te=(0,a._)({link:X,internalLink:X.internal,scopedVars:F,range:D(H,{startMs:L.spanStartTimeShift?o.intervalToMs(L.spanStartTimeShift):0,endMs:L.spanEndTimeShift?o.intervalToMs(L.spanEndTimeShift):0},j),field:{},onClickFn:x,replaceVariables:(0,i.J)().replace.bind((0,i.J)())});z.push({href:te.href,title:"Related logs",onClick:te.onClick,content:n.createElement(g.J,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:I,type:m.u.Logs})}}}if(V&&P?.queries)for(const k of P.queries){const q=M(k,P?.tags||[],H),X={title:V.name,url:"",internal:{datasourceUid:V.uid,datasourceName:V.name,query:{expr:q,refId:"A"}}},te=(0,a._)({link:X,internalLink:X.internal,scopedVars:{},range:D(H,{startMs:P.spanStartTimeShift?o.intervalToMs(P.spanStartTimeShift):-12e4,endMs:P.spanEndTimeShift?o.intervalToMs(P.spanEndTimeShift):12e4}),field:{},onClickFn:x,replaceVariables:(0,i.J)().replace.bind((0,i.J)())});z.push({title:k?.name,href:te.href,onClick:te.onClick,content:n.createElement(g.J,{name:"chart-line",title:"Explore metrics for this span"}),field:I,type:m.u.Metrics})}if(H.references&&N)for(const k of H.references){if(k.refType==="CHILD_OF")continue;const q=N(k.traceID,k.spanID);z.push({href:q.href,title:k.span?k.span.operationName:"View linked span",content:n.createElement(g.J,{name:"link",title:"View linked span"}),onClick:q.onClick,field:q.origin,type:m.u.Traces})}if(H.subsidiarilyReferencedBy&&N)for(const k of H.subsidiarilyReferencedBy){const q=N(k.traceID,k.spanID);z.push({href:q.href,title:k.span?k.span.operationName:"View linked span",content:n.createElement(g.J,{name:"link",title:"View linked span"}),onClick:q.onClick,field:q.origin,type:m.u.Traces})}return z}}function p(x,I,L,P){const{filterByTraceID:N,filterBySpanID:F}=I;if(P)return{expr:P,refId:""};if(!L)return;let U="{${__tags}}";return N&&x.traceID&&(U+=' |="${__span.traceId}"'),F&&x.spanID&&(U+=' |="${__span.spanId}"'),{expr:U,refId:""}}function s(x,I,L,P){const{filterByTraceID:N,filterBySpanID:F}=I;if(P)return{query:P,refId:"",metrics:[{id:"1",type:"logs"}]};let U=[];return F&&x.spanID&&U.push('"${__span.spanId}"'),N&&x.traceID&&U.push('"${__span.traceId}"'),L&&U.push("${__tags}"),{query:U.join(" AND "),refId:"",metrics:[{id:"1",type:"logs"}]}}function y(x,I,L,P){const{filterByTraceID:N,filterBySpanID:F}=I;if(P)return{query:P,refId:""};let U="";return L&&(U+="${__tags}"),N&&x.traceID&&(U+=' "${__span.traceId}"'),F&&x.spanID&&(U+=' "${__span.spanId}"'),{query:U,refId:""}}function C(x,I,L,P){const{filterByTraceID:N,filterBySpanID:F}=I;if(P)return{query:P,refId:""};let U=[];return F&&x.spanID&&U.push('"${__span.spanId}"'),N&&x.traceID&&U.push('"${__span.traceId}"'),L&&U.push("${__tags}"),{query:U.join(" AND "),refId:""}}function b(x,I,L,P){const{filterByTraceID:N,filterBySpanID:F}=I;if(P)return{lsql:P,refId:""};if(!L)return;let U="${__tags}";return N&&x.traceID&&(U+=' or "${__span.traceId}"'),F&&x.spanID&&(U+=' or "${__span.spanId}"'),{lsql:U,refId:""}}function S(x,I,{labelValueSign:L="=",joinBy:P=", "}={}){return[...x.process.tags,...x.tags,{key:"spanId",value:x.spanID},{key:"traceId",value:x.traceID},{key:"name",value:x.operationName},{key:"duration",value:x.duration}].map(N=>{const F=I.find(U=>U.key===N.key);if(F)return`${F.value?F.value:F.key}${L}"${N.value}"`}).filter(N=>!!N).join(P)}function D(x,I={startMs:0,endMs:0},L=!1,P=!1){let N=Math.floor(x.startTime/1e3+I.startMs);const F=(x.startTime+x.duration)/1e3;let U=Math.floor(F+I.endMs);L&&U-N<1e3?U=N+1e3:P?(N=N-6e4,U=U+6e4):N===U&&U++;const j=(0,r.CQ)(U),V=(0,r.CQ)(N);return{from:V,to:j,raw:{from:V,to:j}}}function M(x,I=[],L){if(!x.query)return`histogram_quantile(0.5, sum(rate(traces_spanmetrics_latency_bucket{service="${L.process.serviceName}"}[5m])) by (le))`;let P=x.query;if(I.length&&P.indexOf("$__tags")!==-1){const N=[...L.process.tags,...L.tags],U=I.reduce((j,V)=>{const _=N.find(H=>H.key===V.key)?.value;return _&&j.push(`${V.value?V.value:V.key}="${_}"`),j},[])?.join(", ");P=P.replace(/\$__tags/g,U)}return P}function T(x){return{__trace:{text:"Trace",value:{duration:x.duration,name:x.traceName,traceId:x.traceID}}}}function R(x){const I={};for(const L of x.process.tags)I[L.key]=L.value;for(const L of x.tags)I[L.key]=L.value;return{__span:{text:"Span",value:{spanId:x.spanID,traceId:x.traceID,duration:x.duration,name:x.operationName,tags:I}}}}function O(x,I){let L={};if(I){const P=I.tags&&I.tags.length>0?I.tags:E;L={__tags:{text:"Tags",value:S(x,P)}}}return L}},73678:(G,A,e)=>{"use strict";e.d(A,{Rx:()=>u,js:()=>g,kb:()=>r});var n=e(85960),a=e(90308),o=e(7997);const r=()=>(0,a.Z)().slice(0,12),g={spanNameOperator:"=",serviceNameOperator:"=",fromOperator:">",toOperator:"<",tags:[{id:r(),operator:"="}]};function u(l){const[m,c]=(0,n.useState)(g),d=(0,n.useMemo)(()=>l&&(0,o.filterSpans)(m,l),[m,l]);return{search:m,setSearch:c,spanFilterMatches:d}}},86450:(G,A,e)=>{"use strict";e.d(A,{N:()=>o});var n=e(73891),a=e(7997);function o(i){if(!i)return null;let g=i.fields.length===1?i.fields[0].values[0]:r(i);return g?(0,a.transformTraceData)(g):null}function r(i){const g=new n.U(i),u={};for(let l=0;l<g.length;l++){const m=g.get(l);if(!m.spanID)return null;u[m.spanID]||(u[m.spanID]={serviceName:m.serviceName,tags:m.serviceTags})}return{traceID:g.get(0).traceID,processes:u,spans:g.toArray().map((l,m)=>{const c=[];return l.parentSpanID&&c.push({refType:"CHILD_OF",spanID:l.parentSpanID,traceID:l.traceID}),l.references&&c.push(...l.references.map(d=>({refType:"FOLLOWS_FROM",...d}))),{...l,duration:l.duration*1e3,startTime:l.startTime*1e3,processID:l.spanID,flags:0,references:c,logs:l.logs?.map(d=>({...d,timestamp:d.timestamp*1e3}))||[],dataFrameRowIndex:m}})}}},54310:(G,A,e)=>{"use strict";e.d(A,{U:()=>N});var n=e(56375),a=e(85960),o=e(10476),r=e(12693),i=e(43183),g=e(91),u=e(90857),l=e(96130),m=e(20519),c=e(5106),d=e(49199),f=e(7288),E=e(29165),v=e(66399),h=e(41879),p=e(24024),s=e(95162),y=e(37079),C=e(46783),b=(F=>(F.FETCH_DASHBOARD="fetch-dashboard",F.SET_DASHBOARD_LS="set-dashboard-ls-error",F))(b||{});function S(){const F=(0,p.ZQ)();return F.dashboard.panels=[],F}function D(F,U){let j=[];return F==="table"&&U.panelState?.logs?.columns&&(U.panelState.logs?.labelFieldName&&j.push({id:"extractFields",options:{source:U.panelState.logs.labelFieldName}}),j.push({id:"organize",options:{includeByName:Object.values(U.panelState.logs.columns).reduce((V,_)=>({...V,[_]:!0}),{})}})),j}async function M(F){const U=O(F.queries,F.queryResponse,F?.panelState),j={targets:F.queries,type:U,title:"New Panel",gridPos:{x:0,y:0,w:12,h:8},datasource:F.datasource,transformations:D(U,F)};let V;if(F.dashboardUid)try{V=await C.ae.getDashboardByUid(F.dashboardUid)}catch{throw"fetch-dashboard"}else V=S();V.dashboard.panels=[j,...V.dashboard.panels??[]];try{(0,p.$M)(V)}catch{throw"set-dashboard-ls-error"}}const T=F=>!F.hide,R=F=>U=>U.refId===F;function O(F,U,j){for(const{refId:V}of F.filter(T)){const _=R(V);if(U.flameGraphFrames.some(_))return"flamegraph";if(U.graphFrames.some(_))return"timeseries";if(U.logsFrames.some(_))return j?.logs?.visualisationType?j.logs.visualisationType:"logs";if(U.nodeGraphFrames.some(_))return"nodeGraph";if(U.traceFrames.some(_))return"traces";if(U.customFrames.some(_))return U.customFrames.find(_)?.meta?.preferredVisualisationPluginId??"table"}return"table"}var x=(F=>(F.NewDashboard="new-dashboard",F.ExistingDashboard="existing-dashboard",F))(x||{});function I(F){}function L(F){return F?`d/${F}`:"dashboard/new"}var P=(F=>(F.UNKNOWN="unknown-error",F.NAVIGATION="navigation-error",F))(P||{});function N(F){const{exploreId:U,onClose:j}=F,V=(0,s.useSelector)((0,y.F9)(U)),[_,H]=(0,a.useState)(),{handleSubmit:z,control:K,formState:{errors:Y},watch:k}=(0,o.cI)({defaultValues:{saveTarget:"new-dashboard"}}),q=h.contextSrv.hasPermission(s.AccessControlAction.DashboardsCreate),X=h.contextSrv.hasPermission(s.AccessControlAction.DashboardsWrite),te=[];q&&te.push({label:"New dashboard",value:"new-dashboard"}),X&&te.push({label:"Existing dashboard",value:"existing-dashboard"});const se=te.length>1?k("saveTarget"):te[0].value,de=async(re,fe)=>{H(void 0);const ie=fe.saveTarget==="existing-dashboard"?fe.dashboardUid:void 0;(0,i.ff)("e_2_d_submit",{newTab:re,saveTarget:fe.saveTarget,queries:V.queries.length});try{await M({dashboardUid:ie,datasource:V.datasourceInstance?.getRef(),queries:V.queries,queryResponse:V.queryResponse,panelState:V?.panelsState})}catch(me){switch(me){case b.FETCH_DASHBOARD:H({error:me,message:"Could not fetch dashboard information. Please try again."});break;case b.SET_DASHBOARD_LS:H({error:me,message:"Could not add panel to dashboard. Please try again."});break;default:H({error:"unknown-error",message:"Something went wrong. Please try again."})}return}const oe=L(ie);if(!re){j(),g.E1.push(r.u.stripBaseFromUrl(oe));return}if(!!!e.g.open(u.config.appUrl+oe,"_blank")){H({error:"navigation-error",message:"Could not navigate to the selected dashboard. Please try again."}),(0,p.f1)();return}j()};return(0,a.useEffect)(()=>{(0,i.ff)("e_2_d_open")},[]),a.createElement("form",null,te.length>1&&a.createElement(l.g,{control:K,render:({field:{ref:re,...fe}})=>a.createElement(m.g,{label:"Target dashboard",description:"Choose where to add the panel."},a.createElement(c.S,{options:te,...fe,id:"e2d-save-target"})),name:"saveTarget"}),se==="existing-dashboard"&&(()=>a.createElement(l.g,{render:({field:{ref:re,value:fe,onChange:ie,...oe}})=>a.createElement(m.g,{label:"Dashboard",description:"Select in which dashboard the panel will be created.",error:Y.dashboardUid?.message,invalid:!!Y.dashboardUid},a.createElement(v.o,{...oe,inputId:"e2d-dashboard-picker",defaultOptions:!0,onChange:ue=>ie(ue?.uid)})),control:K,name:"dashboardUid",shouldUnregister:!0,rules:{required:{value:!0,message:"This field is required."}}}))(),_&&a.createElement(d.b,{severity:"error",title:"Error adding the panel"},_.message),a.createElement(f.u.ButtonRow,null,a.createElement(E.zx,{type:"reset",onClick:j,fill:"outline",variant:"secondary"},"Cancel"),a.createElement(E.zx,{type:"submit",variant:"secondary",onClick:z((0,n.partial)(de,!0)),icon:"external-link-alt"},"Open in new tab"),a.createElement(E.zx,{type:"submit",variant:"primary",onClick:z((0,n.partial)(de,!1)),icon:"apps"},"Open dashboard")))}},44658:(G,A,e)=>{"use strict";e.d(A,{k:()=>o});var n=e(41879),a=e(95162);function o(){const r=n.contextSrv.hasPermission(a.AccessControlAction.DashboardsCreate),i=n.contextSrv.hasPermission(a.AccessControlAction.DashboardsWrite);return r&&!i?"Add panel to new dashboard":i&&!r?"Add panel to existing dashboard":"Add panel to dashboard"}},89601:(G,A,e)=>{"use strict";e.d(A,{F:()=>u});var n=e(85960),a=e(12693),o=e(91),r=e(7288),i=e(74042),g=e(29165);function u(l){const{onDismiss:m,path:c,title:d}=l,f=()=>{e.g.open(a.u.assureBaseUrl(c),"_blank"),m()},E=()=>o.E1.push(c);return n.createElement(r.u,{title:d,isOpen:!0,onDismiss:m},n.createElement(i.wc,{spacing:"sm"},n.createElement("p",null,"Do you want to proceed in the current tab or open a new tab?")),n.createElement(r.u.ButtonRow,null,n.createElement(g.zx,{onClick:m,fill:"outline",variant:"secondary"},"Cancel"),n.createElement(g.zx,{type:"submit",variant:"secondary",onClick:f,icon:"external-link-alt"},"Open in new tab"),n.createElement(g.zx,{type:"submit",variant:"primary",onClick:E,icon:"apps"},"Open")))}},63353:(G,A,e)=>{"use strict";e.d(A,{G:()=>r});var n=e(85960),a=e(54635),o=e(23280);function r({extensions:u,onSelect:l}){const{categorised:m,uncategorised:c}=g(u),d=c.length>0&&Object.keys(m).length>0;return n.createElement(a.v,null,n.createElement(n.Fragment,null,Object.keys(m).map(f=>n.createElement(a.v.Group,{key:f,label:(0,o.ew)(f,25)},i(m[f],l))),d&&n.createElement(a.v.Divider,{key:"divider"}),i(c,l)))}function i(u,l){return u.map(m=>n.createElement(a.v.Item,{ariaLabel:m.title,icon:m?.icon||"plug",key:m.id,label:(0,o.ew)(m.title,25),onClick:c=>{if(m.path)return l(m);m.onClick?.(c)}}))}function g(u){return(0,n.useMemo)(()=>{const l=[],m={};for(const c of u){if(!c.category){l.push(c);continue}Array.isArray(m[c.category])||(m[c.category]=[]),m[c.category].push(c)}return{uncategorised:l,categorised:m}},[u])}},36400:(G,A,e)=>{"use strict";e.d(A,{L:()=>d,Q:()=>E});var n=e(1050),a=e(81502),o=e(43183),r=e(88492),i=e(93991),g=e(15925),u=e(59767),l=e(7954),m=e(20764),c=e(67900);const d=v=>new n.y(h=>{const p=u.h.getState().explore.panes[v]?.correlations;if(p)h.next(p),h.complete();else{const s=u.h.subscribe(()=>{const y=u.h.getState().explore.panes[v]?.correlations;y&&(s(),h.next(y),h.complete())})}});function f(v){return async(h,p)=>{const s=p().explore.panes[v];if(s.datasourceInstance?.uid!==void 0){let y=s.datasourceInstance.meta.mixed?s.queries.map(b=>b.datasource?.uid).filter(b=>b!==null):[s.datasourceInstance.uid];const C=await(0,g.r_)(y);h((0,l.CL)({exploreId:v,correlations:C.correlations||[]}))}}}function E(v,h,p){return async(s,y)=>{const C=Object.keys(y().explore?.panes),b=y().explore?.panes[C[0]],S=y().explore?.panes[C[1]];if(!b||!S)return;const D=b.datasourceInstance?.meta.mixed?b.queries[0].datasource:b.datasourceInstance?.getRef(),M=S.datasourceInstance?.meta.mixed?S.queries[0].datasource:S.datasourceInstance?.getRef(),[T,R]=await Promise.all([(0,a.F)().get(D),(0,a.F)().get(M)]);if(T?.uid&&R?.uid&&S.correlationEditorHelperData?.resultField){const O={sourceUID:T.uid,targetUID:R.uid,label:v||await(0,g.eo)(b,S),description:h,config:{field:S.correlationEditorHelperData.resultField,target:S.queries[0],type:"query",transformations:p}};await(0,g.NO)(T.uid,O).then(async()=>{s((0,m.YV)(C[1])),await s(f(C[0])),await s((0,c.aA)({exploreId:C[0]})),(0,o.ff)("grafana_explore_correlation_editor_saved",{sourceDatasourceType:T.type,targetDataSourceType:R.type})}).catch(x=>{s((0,r.$l)((0,i.t_)("Error creating correlation",x))),console.error(x)})}}}},95618:(G,A,e)=>{"use strict";e.d(A,{eX:()=>E,zU:()=>f});var n=e(20079),a=e(43183),o=e(15867),r=e(18815),i=e(15925),g=e(3211),u=e(7954),l=e(67900),m=e(17713),c=e(3158);const d=(0,n.PH)("explore/updateDatasourceInstance");function f(v,h,p){return async(s,y)=>{const C=y().user.orgId,{history:b,instance:S}=await(0,c.r_)(C,h),D=y().explore.panes[v].datasourceInstance;(0,a.ff)("explore_change_ds",{from:(D?.meta?.mixed?"mixed":D?.type)||"unknown",to:S.meta.mixed?"mixed":S.type,exploreId:v}),s(d({exploreId:v,datasourceInstance:S,history:b}));const M=y().explore.panes[v].queries,T=(0,c.e1)(S.uid,M),R=await(0,i.r_)(T);s((0,u.CL)({exploreId:v,correlations:R.correlations||[]})),p?.importQueries&&await s((0,l.GJ)(v,M,D,S)),y().explore.panes[v].isLive&&s((0,m.oz)({exploreId:v,refreshInterval:o.dP.offOption.value})),p?.importQueries&&s((0,l.aA)({exploreId:v}))}}const E=(v,h)=>{if(d.match(h)){const{datasourceInstance:p,history:s}=h.payload;return(0,r.RZ)(v.querySubscription),{...v,datasourceInstance:p,graphResult:null,tableResult:null,logsResult:null,supplementaryQueries:(0,g.DK)(),queryResponse:(0,c.lp)(),queryKeys:[],history:s}}return v}},7954:(G,A,e)=>{"use strict";e.d(A,{CK:()=>b,CL:()=>y,Oj:()=>h,Yn:()=>E,iz:()=>S,km:()=>v,qN:()=>C});var n=e(20079),a=e(18815),o=e(15925),r=e(18435),i=e(95162),g=e(95618),u=e(55756),l=e(20764),m=e(67900),c=e(17713),d=e(3158);const f=(0,n.PH)("explore/changeSize"),E=(0,n.PH)("explore/changePanels");function v(D,M,T){return async(R,O)=>{const x=O().explore.panes[D];if(x===void 0)return;const{panelsState:I}=x;R(E({exploreId:D,panelsState:{...I,[M]:T}}))}}const h=(0,n.PH)("explore/changeCorrelationHelperData"),p=(0,n.PH)("explore/initializeExploreAction"),s=(0,n.PH)("explore/setUrlReplaced"),y=(0,n.PH)("explore/saveCorrelationsAction");function C(D,{width:M}){return f({exploreId:D,width:M})}const b=(0,i.createAsyncThunk)("explore/initializeExplore",async({exploreId:D,datasource:M,queries:T,range:R,panelsState:O,correlationHelperData:x,eventBridge:I},{dispatch:L,getState:P,fulfillWithValue:N})=>{let F,U=[];if(M){const j=P().user.orgId,V=await(0,d.r_)(j,M);F=V.instance,U=V.history}if(L(p({exploreId:D,queries:T,range:(0,d.rx)(R,(0,r.Z)(P().user)),datasourceInstance:F,history:U,eventBridge:I})),O!==void 0&&L(E({exploreId:D,panelsState:O})),L((0,c.b3)({exploreId:D})),F){const j=(0,d.e1)(F.uid,T),V=await(0,o.r_)(j);L(y({exploreId:D,correlations:V.correlations||[]})),L((0,m.aA)({exploreId:D}))}return x!==void 0&&P().explore.correlationEditorDetails?.editorMode&&L(h({exploreId:D,correlationEditorHelperData:x})),N({exploreId:D,state:P().explore.panes[D]})}),S=(D=(0,d.t5)(),M)=>{if(D=(0,m.Y)(D,M),D=(0,g.eX)(D,M),D=(0,c.ok)(D,M),D=(0,u.Oo)(D,M),l.ZU.match(M)){const{richHistory:T,total:R}=M.payload.richHistoryResults;return{...D,richHistory:T,richHistoryTotal:R}}if(l.Zy.match(M)){const T=M.payload.filters;return{...D,richHistorySearchFilters:T}}if(f.match(M)){const T=M.payload.width;return{...D,containerWidth:T}}if(E.match(M)){const{panelsState:T}=M.payload;return{...D,panelsState:T}}if(h.match(M)){const{correlationEditorHelperData:T}=M.payload;return{...D,correlationEditorHelperData:T}}if(y.match(M))return{...D,correlations:M.payload.correlations};if(p.match(M)){const{queries:T,range:R,datasourceInstance:O,history:x,eventBridge:I}=M.payload;return{...D,range:R,queries:T,initialized:!0,eventBridge:I,queryKeys:(0,a.$$)(T),datasourceInstance:O,history:x,queryResponse:(0,d.lp)(),cache:[],correlations:[]}}return D}},55756:(G,A,e)=>{"use strict";e.d(A,{Cs:()=>p,Ff:()=>d,KZ:()=>C,NV:()=>f,Oo:()=>b,TV:()=>v,WY:()=>m,ch:()=>y,ev:()=>c,fM:()=>g,ik:()=>E,io:()=>h,sO:()=>s});var n=e(20079),a=e(85563),o=e(78e3),r=e(20764),i=e(37079);const g=(0,n.PH)("explore/historyUpdated"),u=({updatedQuery:S,deletedId:D})=>async(M,T)=>{l(T().explore,(R,O)=>{const x=R.richHistory.map(L=>L.id===S?.id?S:L).filter(L=>L.id!==D),I=R.richHistory.length-x.length;M((0,r.ZU)({richHistoryResults:{richHistory:x,total:R.richHistoryTotal-I},exploreId:O}))})},l=(S,D)=>{Object.entries(S.panes).forEach(([M,T])=>{T&&D(T,M)})},m=(S,D,M)=>async(T,R)=>{const{richHistoryStorageFull:O,limitExceeded:x}=await(0,a.au)(S,D,M,!1,"",!R().explore.richHistoryStorageFull,!R().explore.richHistoryLimitExceededWarningShown);O&&T((0,r.fm)()),x&&T((0,r.QN)())},c=(S,D)=>async(M,T)=>{const R=await(0,a.VI)(S,D);M(u({updatedQuery:R}))},d=(S,D)=>async M=>{const T=await(0,a.gt)(S,D);M(u({updatedQuery:T}))},f=S=>async D=>{const M=await(0,a.y9)(S);D(u({deletedId:M}))},E=()=>async(S,D)=>{await(0,a.HK)(),(0,i.M)(D()).forEach(([M])=>{S((0,r.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:M})),S((0,r.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:M}))})},v=S=>async(D,M)=>{const T=M().explore.panes[S].richHistorySearchFilters;if(T){const R=await(0,a.ub)(T);D((0,r.ZU)({richHistoryResults:R,exploreId:S}))}},h=S=>async(D,M)=>{const T=M().explore.panes[S]?.richHistorySearchFilters,R=M().explore.panes[S]?.richHistory;if(T&&R){const O={...T,page:(T?.page||1)+1},x=await(0,a.ub)(O),I=[...R,...x.richHistory];D((0,r.Zy)({filters:O,exploreId:S})),D((0,r.ZU)({richHistoryResults:{richHistory:I,total:x.total},exploreId:S}))}},p=S=>async D=>{D((0,r.Zy)({filters:void 0,exploreId:S})),D((0,r.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:S}))},s=()=>async(S,D)=>{let M=D().explore.richHistorySettings;M||(M=await(0,a.di)(),S((0,r.e8)(M)))},y=S=>async D=>{D((0,r.e8)(S)),await(0,a.kg)(S)},C=(S,D)=>async(M,T)=>{await M((0,r.Zy)({exploreId:S,filters:{...D}}));const R=T().explore.richHistorySettings;(0,o.X)().lastUsedDataSourcesAvailable&&await M(y({...R,lastUsedDatasourceFilters:D.datasourceFilters}))},b=(S,D)=>g.match(D)?{...S,history:D.payload.history}:S},20764:(G,A,e)=>{"use strict";e.d(A,{AP:()=>b,Hg:()=>O,QN:()=>h,Sx:()=>y,VY:()=>M,YV:()=>S,ZP:()=>N,ZU:()=>E,Zy:()=>s,bW:()=>T,e8:()=>p,fm:()=>v,m$:()=>x,nL:()=>C,tl:()=>f});var n=e(20079),a=e(56375),o=e.n(a),r=e(16293),i=e(91),g=e(18815),u=e(31683),l=e(95162),m=e(17765),c=e(7954),d=e(3158);const f=(0,n.PH)("explore/syncTimes"),E=(0,n.PH)("explore/richHistoryUpdated"),v=(0,n.PH)("explore/richHistoryStorageFullAction"),h=(0,n.PH)("explore/richHistoryLimitExceededAction"),p=(0,n.PH)("explore/richHistorySettingsUpdated"),s=(0,n.PH)("explore/richHistorySearchFiltersUpdatedAction"),y=(0,n.PH)("explore/splitSizeUpdateAction"),C=(0,n.PH)("explore/maximizePaneAction"),b=(0,n.PH)("explore/evenPaneResizeAction"),S=(0,n.PH)("explore/splitClose"),D=(0,n.PH)("explore/setPaneState"),M=(0,n.PH)("explore/clearPanes"),T=(0,l.createAsyncThunk)("explore/splitOpen",async(F,{getState:U,dispatch:j,requestId:V})=>{const _=Object.values(U().explore.panes)[0],H=F?.queries??(F?.query?[F?.query]:_?.queries||[]);Object.keys(U().explore.panes).forEach((K,Y)=>{Y>=1&&j(S(K))});const z=F?.range||_?.range.raw||d.UI;await j(R({exploreId:V,datasource:F?.datasourceUid||_?.datasourceInstance?.getRef(),queries:(0,m.Z)(H),range:z,panelsState:F?.panelsState||_?.panelsState,correlationHelperData:F?.correlationHelperData,eventBridge:new r.F})),_?.range&&await j(f({syncedTimes:(0,a.isEqual)(_.range.raw,z)}))},{idGenerator:g.z0}),R=(0,l.createAsyncThunk)("explore/createNewSplitOpen",async(F,{dispatch:U})=>{await U((0,c.CK)(F))}),O=(0,n.PH)("explore/changeCorrelationEditorDetails"),x=(F,U)=>async j=>{const{timeRange:V,getExploreUrl:_,openInNewWindow:H}=U,z=await _({queries:F.targets,dsRef:F.datasource,scopedVars:F.scopedVars,timeRange:V,adhocFilters:(0,u.J)().getAdhocFilters(F.datasource?.uid??"",!0)});if(H&&z){H(z);return}i.E1.push(z)},I=(0,d.t5)(),L={syncedTimes:!1,panes:{},correlationEditorDetails:{editorMode:!1,correlationDirty:!1,queryEditorDirty:!1,isExiting:!1},richHistoryStorageFull:!1,richHistoryLimitExceededWarningShown:!1,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0},N={explore:(F=L,U)=>{if(S.match(U)){const{[U.payload]:V,..._}={...F.panes};return{...F,panes:_,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0,syncedTimes:!1}}if(y.match(U)){const{largerExploreId:V}=U.payload;return{...F,largerExploreId:V,maxedExploreId:void 0,evenSplitPanes:V===void 0}}if(C.match(U)){const{exploreId:V}=U.payload;return{...F,largerExploreId:V,maxedExploreId:V,evenSplitPanes:!1}}if(b.match(U))return{...F,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0};if(f.match(U))return{...F,syncedTimes:U.payload.syncedTimes};if(v.match(U))return{...F,richHistoryStorageFull:!0};if(h.match(U))return{...F,richHistoryLimitExceededWarningShown:!0};if(p.match(U)){const V=U.payload;return{...F,richHistorySettings:V}}if(R.pending.match(U))return{...F,panes:{...F.panes,[U.meta.arg.exploreId]:I}};if(c.CK.pending.match(U)){const V=Object.entries(F.panes),_=V.slice(0,U.meta.arg.position),H=V.slice(_.length),z=[..._,[U.meta.arg.exploreId,I],...H].reduce((K,[Y,k])=>({...K,[Y]:k}),{});return{...F,panes:z}}if(M.match(U))return{...F,panes:{}};if(O.match(U)){const{editorMode:V,label:_,description:H,canSave:z,correlationDirty:K,queryEditorDirty:Y,isExiting:k,postConfirmAction:q,transformations:X}=U.payload;return{...F,correlationEditorDetails:{editorMode:!!(V??F.correlationEditorDetails?.editorMode),canSave:!!(z??F.correlationEditorDetails?.canSave),label:_??F.correlationEditorDetails?.label,description:H??F.correlationEditorDetails?.description,transformations:X??F.correlationEditorDetails?.transformations,correlationDirty:!!(K??F.correlationEditorDetails?.correlationDirty),queryEditorDirty:!!(Y??F.correlationEditorDetails?.queryEditorDirty),isExiting:!!(k??F.correlationEditorDetails?.isExiting),postConfirmAction:q}}}const j=U.payload?.exploreId;return typeof j=="string"?{...F,panes:Object.entries(F.panes).reduce((V,[_,H])=>({...V,[_]:_===j?(0,c.iz)(H,U):H}),{})}:F}}},67900:(G,A,e)=>{"use strict";e.d(A,{CS:()=>Ae,K8:()=>et,ci:()=>Ke,qV:()=>Z,LK:()=>tt,Sv:()=>_e,GJ:()=>ee,W1:()=>it,sK:()=>ce,Y:()=>yt,aA:()=>Ee,EA:()=>$e,P4:()=>rt,$9:()=>me,sQ:()=>Ne,KO:()=>Fe,SE:()=>Ve,z0:()=>vt});var n=e(20079),a=e(52131),o=e.n(a),r=e(56375),i=e(77491),g=e(21964),u=e(25394),l=e(25066),m=e(45691),c=e(23757),d=e(34921),f=e(45236),E=e(41466),v=e(47475),h=e(45878),p=e(81502),s=e(43183),y=e(90857),C=e(18815),b=e(52152),S=e(15925),D=e(18435),M=e(63459),T=e(95162),R=e(88492),O=e(93991),x=e(98659),I=e(98231),L=e(64282),P=e(89306),N=e(53615),F=e(58309),U=e(81154),j=e(19593),V=e(20229);const _=ut=>{const pt=[],we=[],lt=[],Bt=[],Kt=[],It=[],Zt=[],yn=[];for(const xn of ut.series){if(te(xn)){yn.push(xn);continue}switch(xn.meta?.preferredVisualisationType){case"logs":Bt.push(xn);break;case"graph":pt.push(xn);break;case"trace":Kt.push(xn);break;case"table":we.push(xn);break;case"rawPrometheus":lt.push(xn);break;case"nodeGraph":It.push(xn);break;case"flamegraph":Zt.push(xn);break;default:X(xn)&&pt.push(xn),we.push(xn)}}return{...ut,graphFrames:pt,tableFrames:we,logsFrames:Bt,traceFrames:Kt,nodeGraphFrames:It,customFrames:yn,flameGraphFrames:Zt,rawPrometheusFrames:lt,graphResult:null,tableResult:null,logsResult:null,rawPrometheusResult:null}},H=({showCorrelationEditorLinks:ut,queries:pt,correlations:we,defaultTargetDatasource:lt})=>Bt=>{if(ut&&lt)for(const Kt of Bt.series)for(const It of Kt.fields){It.config.links=[],It.display=It.display||(0,L.g)();const Zt={};Kt.fields.map(yn=>{Zt[`${yn.name}`]=`\${__data.fields.['${yn.name}']}`}),It.config.links.push({url:"",origin:P.n1.ExploreCorrelationsEditor,title:`Correlate with ${It.name}`,internal:{datasourceUid:lt.uid,datasourceName:lt.name,query:{datasource:{uid:lt.uid}},meta:{correlationData:{resultField:It.name,vars:Zt,origVars:Zt}}}})}else if(pt?.length&&we?.length){const Kt=(0,r.mapValues)((0,r.groupBy)(pt,"refId"),"0.datasource.uid");(0,S.nh)(Bt.series,we,Kt)}return Bt},z=ut=>ut.graphFrames.length?{...ut,graphResult:ut.graphFrames}:{...ut,graphResult:null},K=ut=>{if(ut.tableFrames.length===0)return(0,g.of)({...ut,tableResult:null});ut.tableFrames.sort((Bt,Kt)=>{const It=Bt.refId,Zt=Kt.refId;return It>Zt?1:It<Zt?-1:0});const pt=ut.tableFrames.every(Bt=>X(Bt)),we={interpolate:Bt=>Bt};return(pt?(0,g.of)(ut.tableFrames).pipe(N.Y.joinByFieldTransformer.operator({},we)):(0,g.of)(ut.tableFrames).pipe(N.Y.mergeTransformer.operator({},we))).pipe((0,I.U)(Bt=>{for(const Kt of Bt)for(const It of Kt.fields)It.display=It.display??(0,L.U)({field:It,theme:y.config.theme2,timeZone:ut.request?.timezone??"browser"});return{...ut,tableResult:Bt}}))},Y=ut=>{const pt=ut.rawPrometheusFrames;if(!pt||pt.length===0)return(0,g.of)({...ut,tableResult:null});pt.sort((Kt,It)=>{const Zt=Kt.refId,yn=It.refId;return Zt>yn?1:Zt<yn?-1:0});const we=pt.every(Kt=>X(Kt)),lt={interpolate:Kt=>Kt};return(we?(0,g.of)(pt).pipe(N.Y.joinByFieldTransformer.operator({},lt)):(0,g.of)(pt).pipe(N.Y.mergeTransformer.operator({},lt))).pipe((0,I.U)(Kt=>{const It=Kt[0];for(const Zt of It.fields)Zt.display=Zt.display??(0,L.U)({field:Zt,theme:y.config.theme2,timeZone:ut.request?.timezone??"browser"});return{...ut,rawPrometheusResult:It}}))},k=(ut={})=>pt=>{if(pt.logsFrames.length===0)return{...pt,logsResult:null};const we=pt.request?.intervalMs,lt=(0,U.aB)(pt.logsFrames,we,ut.absoluteRange,ut.queries),Bt=(0,C.Oy)(ut.refreshInterval),Kt=(0,j.j0)(lt,Bt),It=Kt.rows,Zt=Kt.series,yn={...Kt,rows:It,series:Zt};return{...pt,logsResult:yn}};function q(ut,pt,we,lt,Bt,Kt,It,Zt){return(0,g.of)(ut).pipe((0,I.U)(yn=>(0,h.zR)(yn,pt)),(0,I.U)(H({defaultTargetDatasource:Zt,showCorrelationEditorLinks:It,queries:Bt,correlations:Kt})),(0,I.U)(_),(0,I.U)(z),(0,I.U)(k({absoluteRange:we,refreshInterval:lt,queries:Bt})),(0,l.z)(Y),(0,l.z)(K))}function X(ut){const pt=(0,r.groupBy)(ut.fields,we=>we.type);return!!(Object.keys(pt).length===2&&pt[F.fS.time]?.length===1&&pt[F.fS.number])}function te(ut){return ut.meta?.preferredVisualisationPluginId?(0,V.eD)(ut.meta?.preferredVisualisationPluginId):!1}var se=e(3211),de=e(36400),re=e(7954),fe=e(55756),ie=e(20764),oe=e(17713),ue=e(3158);const me=ut=>pt=>{const we=pt.explore.panes[ut];return we&&we.queryResponse?we.queryResponse.state===c.Gu.Loading||we.queryResponse.state===c.Gu.Streaming:!1},ge=(0,n.PH)("explore/addQueryRow"),Ue=(0,n.PH)("explore/changeQueries"),De=(0,n.PH)("explore/cancelQueries"),Pe=(0,n.PH)("explore/queriesImported"),ye=(0,n.PH)("explore/queryStoreSubscription"),Te=(0,n.PH)("explore/setSupplementaryQueryEnabledAction"),nt=(0,n.PH)("explore/storeSupplementaryQueryDataProviderAction"),ct=(0,n.PH)("explore/cleanSupplementaryQueryDataProviderAction"),he=(0,n.PH)("explore/cleanSupplementaryQueryAction"),xe=(0,n.PH)("explore/storeSupplementaryQueryDataSubscriptionAction"),Me=(0,n.PH)("explore/updateSupplementaryQueryDataAction"),He=(0,n.PH)("explore/queryStreamUpdated"),Ve=(0,n.PH)("explore/setQueries"),Oe=(0,n.PH)("changeLoadingState"),Ne=(0,n.PH)("explore/setPausedState"),_e=(0,n.PH)("explore/clearLogs"),qe=(0,n.PH)("explore/scanStart"),rt=(0,n.PH)("explore/scanStop"),mt=(0,n.PH)("explore/addResultsToCache"),Je=(0,n.PH)("explore/clearCache");function Ae(ut,pt){return async(we,lt)=>{const Bt=lt().explore.panes[ut];let Kt;Bt.datasourceInstance?.meta.mixed?Kt=(0,r.findLast)(Bt.queries,Zt=>!!Zt.datasource)?.datasource||void 0:Kt=Bt.datasourceInstance?.getRef();const It=await(0,C.Xk)(Bt.queries,pt,Kt);we(ge({exploreId:ut,index:pt,query:It}))}}function Ke(ut){return(pt,we)=>{pt(rt({exploreId:ut})),pt(De({exploreId:ut}));const lt=we().explore.panes[ut].supplementaryQueries;for(const Bt of se.SY)pt(ct({exploreId:ut,type:Bt})),lt[Bt]?.data?.state!==c.Gu.Done&&pt(he({exploreId:ut,type:Bt}))}}const Xe=(ut,pt)=>{const we=ut.getRef();return pt.map(lt=>({...lt,datasource:we}))},ne=async(ut,pt,we)=>{let lt=[];if(pt.meta?.id===ut.meta?.id)lt=we;else if((0,d.p)(pt)&&(0,d.CZ)(ut)){const Bt=await pt.exportToAbstractQueries(we);lt=await ut.importFromAbstractQueries(Bt)}else ut.importQueries&&(lt=await ut.importQueries(we,pt));return Xe(ut,lt)},Z=(0,T.createAsyncThunk)("explore/changeQueries",async({queries:ut,exploreId:pt},{getState:we,dispatch:lt})=>{let Bt=!1;const Kt=we().explore.panes[pt].queries,It=we().explore.panes[pt].datasourceInstance?.uid,Zt=we().explore.correlationEditorDetails,yn=Zt?.editorMode||!1;!(Object.keys(we().explore.panes)[0]===pt)&&yn&&!Zt?.queryEditorDirty&&lt((0,ie.Hg)({queryEditorDirty:!0}));for(const An of ut)for(const qt of Kt){if(An.refId===qt.refId&&An.datasource?.type!==qt.datasource?.type){const On=await(0,p.F)().get(qt.datasource),wn=await(0,p.F)().get({uid:An.datasource?.uid});await lt(ee(pt,Kt,On,wn,An.refId)),Bt=!0}if(It===M.D&&An.refId===qt.refId&&An.datasource?.uid!==qt.datasource?.uid){const On=(0,ue.e1)(M.D,ut),wn=await(0,S.r_)(On);lt((0,re.CL)({exploreId:pt,correlations:wn.correlations||[]}))}}Bt||lt(Ue({queries:ut,exploreId:pt})),ut.length<Kt.length&&lt(Ee({exploreId:pt}))}),ee=(ut,pt,we,lt,Bt)=>async Kt=>{if(!we){Kt(Pe({exploreId:ut,queries:pt}));return}let It=pt;if(lt.uid===M.D)It=pt.map(yn=>({...yn,datasource:we.getRef()}));else if(we.uid===M.D){const yn=(0,r.groupBy)(pt,An=>An.datasource?.uid),xn=await Promise.all(Object.keys(yn).map(async An=>{const qt=await(0,p.F)().get({uid:An});return await ne(lt,qt,yn[An])}));It=(0,r.flatten)(xn.filter(An=>An.length>0))}else{let yn=pt;if(Bt!==void 0){const xn=pt.find(An=>An.refId===Bt);xn&&(yn=[xn])}It=await ne(lt,we,yn)}let Zt=await(0,C.Z8)(It,lt.getRef());if(Bt!==void 0){It.length===0&&(It=[await(0,C.Xk)([],void 0,lt.getRef())]);const yn=pt.findIndex(An=>An.refId===Bt),xn={...Zt[0],refId:pt[yn].refId};Zt=[...pt],Zt[yn]=xn}return Kt(Pe({exploreId:ut,queries:Zt})),Zt};function ce(ut,pt,we){return async(lt,Bt)=>{const Kt=Bt().explore.panes[ut],{queries:It}=Kt,yn=(await Promise.all(It.map(xn=>we({...xn},pt)))).map((xn,An)=>(0,C.fR)(xn,It,An));lt(Ve({exploreId:ut,queries:yn})),pt.preventSubmit||lt(Ee({exploreId:ut}))}}async function be(ut,pt,we,lt,Bt,Kt){const It=lt.meta.id,Zt=(0,C._Q)(we,It,Bt);ut((0,fe.fM)({exploreId:Kt,history:Zt})),ut((0,fe.WY)(lt.uid,lt.name,Bt));for(const yn in pt.panes)await ut((0,fe.TV)(yn))}const Ee=(0,T.createAsyncThunk)("explore/runQueries",async({exploreId:ut,preserveCache:pt},{dispatch:we,getState:lt})=>{we(Ke(ut)),we((0,oe.b3)({exploreId:ut}));const Bt=(0,de.L)(ut);pt!==!0&&we(tt(ut));const Kt=lt().explore.panes[ut],{datasourceInstance:It,containerWidth:Zt,isLive:yn,range:xn,scanning:An,queryResponse:qt,querySubscription:On,refreshInterval:wn,absoluteRange:Zn,cache:Aa,supplementaryQueries:Ea,correlationEditorHelperData:Nt}=Kt,en=lt().explore.correlationEditorDetails?.editorMode||!1,rn=Object.keys(lt().explore.panes)[0]===ut,un=en&&rn,on=un?await(0,p.F)().get():void 0,In=en&&!rn&&Nt!==void 0;let Sn,Ln;const hn=Kt.queries.map(Cn=>({...Cn,datasource:Cn.datasource||It?.getRef()}));It!=null&&be(we,lt().explore,Kt.history,It,hn,ut);const Gn=(0,ue.M0)(Aa,Zn);if(Gn)Sn=(0,i.a)([(0,g.of)(Gn),Bt]).pipe((0,l.z)(([Cn,Yn])=>q(Cn,qt,Zn,wn,hn,Yn,un,on))),Ln=Sn.subscribe(Cn=>{we(He({exploreId:ut,response:Cn}))});else{if(!(0,C.z_)(hn)||!It)return;const Cn=It?.interval;(0,C.RZ)(On);const Yn={minInterval:Cn,maxDataPoints:Zt,liveStreaming:yn};let Xn={};In&&Nt!==void 0&&Object.entries(Nt?.vars).forEach($t=>{Xn[$t[0]]={value:$t[1]}});const Pt=(0,D.Z)(lt().user),Dt=(0,C.Zf)(ut,hn,Yn,xn,An,Pt,Xn);if(we(Oe({exploreId:ut,loadingState:c.Gu.Loading})),Sn=(0,i.a)([(0,x.v7)(It,Dt.request).pipe(yn?(0,m.p)(500):u.y),Bt]).pipe((0,l.z)(([$t,jt])=>q($t,qt,Zn,wn,hn,jt,un,on))),Ln=Sn.subscribe({next($t){if($t.logsResult!==null&&$t.state===c.Gu.Done&&(0,s.ff)("grafana_explore_logs_result_displayed",{datasourceType:It.type}),we(He({exploreId:ut,response:$t})),lt().explore.panes[ut].scanning)if($t.state===c.Gu.Done&&$t.series.length===0){const jt=(0,b.e)(-1,lt().explore.panes[ut].range);we((0,oe.b3)({exploreId:ut,absoluteRange:jt})),we(Ee({exploreId:ut}))}else we(rt({exploreId:ut}))},error($t){we((0,R.$l)((0,O.t_)("Query processing error",$t))),we(Oe({exploreId:ut,loadingState:c.Gu.Error})),console.error($t)},complete(){lt().explore.panes[ut].queryResponse.state===c.Gu.Loading&&we(Oe({exploreId:ut,loadingState:c.Gu.Done}))}}),yn)for(const $t of se.SY)we(ct({exploreId:ut,type:$t})),we(he({exploreId:ut,type:$t}));else we(Le({exploreId:ut,datasourceInstance:It,transaction:Dt,newQuerySource:Sn,supplementaryQueries:Ea,queries:hn,absoluteRange:Zn}))}we(ye({exploreId:ut,querySubscription:Ln}))}),Be=async(ut,pt)=>{const we=ut.filter(Bt=>Bt.datasource?.uid!==M.D),lt=(0,r.groupBy)(we,"datasource.uid");return await Promise.all(Object.values(lt).map(async Bt=>({datasource:await(0,p.F)().get(Bt[0].datasource,pt),targets:Bt})))},Le=(0,T.createAsyncThunk)("explore/handleSupplementaryQueries",async({datasourceInstance:ut,exploreId:pt,transaction:we,newQuerySource:lt,supplementaryQueries:Bt,queries:Kt,absoluteRange:It},{dispatch:Zt})=>{let yn;ut.meta.mixed?yn=await Be(we.request.targets,we.request.scopedVars):yn=[{datasource:ut,targets:we.request.targets}];for(const xn of se.SY){const An=(0,se.Z9)(yn,xn,{...we.request,requestId:`${we.request.requestId}_${(0,r.snakeCase)(xn)}`},lt);An?(Zt(nt({exploreId:pt,type:xn,dataProvider:An})),ze(Bt[xn].data,Kt,It)||(Zt(he({exploreId:pt,type:xn})),Bt[xn].enabled&&Zt(it(pt,xn)))):Zt(ct({exploreId:pt,type:xn}))}});function ze(ut,pt,we){if(!ut)return!1;const lt=(0,r.zipObject)((0,r.map)(pt,"refId"),pt),Bt=(0,r.mapValues)((0,r.groupBy)(ut.data.map(yn=>yn.meta?.custom?.sourceQuery),"refId"),r.head),Kt=ut.data.every(yn=>yn.meta?.custom?.logsVolumeType===f.o8.FullRange),It=o()(lt,Bt),Zt=ut.data.every(yn=>{const xn=yn.meta?.custom?.absoluteRange;return xn?xn&&xn.from<=we.from&&we.to<=xn.to:!0});return Kt&&It&&Zt}function Fe(ut,pt){return(we,lt)=>{const Bt=lt().explore.panes[ut].queries,Kt=pt.map((It,Zt)=>(0,C.fR)(It,Bt,Zt));we(Ve({exploreId:ut,queries:Kt})),we(Ee({exploreId:ut}))}}function $e(ut){return(pt,we)=>{pt(qe({exploreId:ut}));const lt=(0,b.e)(-1,we().explore.panes[ut].range);pt((0,oe.b3)({exploreId:ut,absoluteRange:lt})),pt(Ee({exploreId:ut}))}}function et(ut){return(pt,we)=>{const lt=we().explore.panes[ut].queryResponse,Bt=we().explore.panes[ut].absoluteRange,Kt=(0,ue.M7)(Bt);lt.state===c.Gu.Done&&pt(mt({exploreId:ut,cacheKey:Kt,queryResponse:lt}))}}function tt(ut){return(pt,we)=>{pt(Je({exploreId:ut}))}}function it(ut,pt){return(we,lt)=>{const{supplementaryQueries:Bt}=lt().explore.panes[ut],Kt=Bt[pt].dataProvider;if(Kt){const It=Kt.subscribe({next:Zt=>{we(Me({exploreId:ut,type:pt,data:Zt}))}});we(xe({exploreId:ut,type:pt,dataSubscription:It}))}}}function vt(ut,pt,we){return(lt,Bt)=>{lt(Te({exploreId:ut,enabled:pt,type:we})),(0,se.B9)(pt,we),pt&&lt(it(ut,we))}}const yt=(ut,pt)=>{if(ge.match(pt)){const{queries:we}=ut,{index:lt,query:Bt}=pt.payload,Kt=[...we.slice(0,lt+1),{...Bt},...we.slice(lt+1)];return{...ut,queries:Kt,queryKeys:(0,C.$$)(Kt)}}if(Ue.match(pt)){const{queries:we}=pt.payload;return{...ut,queries:we}}if(De.match(pt))return(0,C.RZ)(ut.querySubscription),{...ut,...ut.queryResponse?{queryResponse:{...ut.queryResponse,state:c.Gu.Done}}:{}};if(Ve.match(pt)){const{queries:we}=pt.payload;return{...ut,queries:we.slice(),queryKeys:(0,C.$$)(we)}}if(ye.match(pt)){const{querySubscription:we}=pt.payload;return{...ut,querySubscription:we}}if(Te.match(pt)){const{enabled:we,type:lt}=pt.payload,{supplementaryQueries:Bt}=ut,Kt=Bt[lt].dataSubscription;!we&&Kt&&Kt.unsubscribe();const It={...Bt,[lt]:{...Bt[lt],enabled:we,data:void 0}};return{...ut,supplementaryQueries:It}}if(nt.match(pt)){const{dataProvider:we,type:lt}=pt.payload,{supplementaryQueries:Bt}=ut,Kt=Bt[lt];Kt?.dataSubscription&&Kt.dataSubscription.unsubscribe();const It={...Bt,[lt]:{...Kt,dataProvider:we,dataSubscription:void 0}};return{...ut,supplementaryQueries:It}}if(ct.match(pt)){const{type:we}=pt.payload,{supplementaryQueries:lt}=ut,Bt=lt[we];Bt?.dataSubscription&&Bt.dataSubscription.unsubscribe();const Kt={...lt,[we]:{...Bt,dataProvider:void 0,dataSubscription:void 0}};return{...ut,supplementaryQueries:Kt}}if(he.match(pt)){const{type:we}=pt.payload,{supplementaryQueries:lt}=ut,Bt={...lt,[we]:{...lt[we],data:void 0}};return{...ut,supplementaryQueries:Bt}}if(xe.match(pt)){const{dataSubscription:we,type:lt}=pt.payload,{supplementaryQueries:Bt}=ut,Kt={...Bt,[lt]:{...Bt[lt],dataSubscription:we}};return{...ut,supplementaryQueries:Kt}}if(Me.match(pt)){let{data:we,type:lt}=pt.payload;const{supplementaryQueries:Bt}=ut,Kt={...Bt,[lt]:{...Bt[lt],data:we}};return{...ut,supplementaryQueries:Kt}}if(He.match(pt))return Wt(ut,pt);if(Pe.match(pt)){const{queries:we}=pt.payload;return{...ut,queries:we,queryKeys:(0,C.$$)(we)}}if(Oe.match(pt)){const{loadingState:we}=pt.payload;return{...ut,queryResponse:{...ut.queryResponse,state:we}}}if(Ne.match(pt)){const{isPaused:we}=pt.payload;return{...ut,isPaused:we}}if(qe.match(pt))return{...ut,scanning:!0};if(rt.match(pt))return{...ut,scanning:!1,scanRange:void 0};if(mt.match(pt)){const{cache:lt}=ut,{queryResponse:Bt,cacheKey:Kt}=pt.payload;let It=[...lt];return It.some(yn=>yn.key===Kt)||(It=[{key:Kt,value:Bt},...It].slice(0,5)),{...ut,cache:It}}if(Je.match(pt))return{...ut,cache:[]};if(_e.match(pt)){if(!ut.logsResult)return{...ut,clearedAtIndex:null};if(ut.queryResponse.state===c.Gu.Loading)return{...ut,clearedAtIndex:null,logsResult:{...ut.logsResult,rows:[]}};const we=ut.clearedAtIndex?ut.clearedAtIndex+ut.logsResult.rows.length:ut.logsResult.rows.length-1;return{...ut,clearedAtIndex:we,logsResult:{...ut.logsResult,rows:[]}}}return ut},Wt=(ut,pt)=>{const{response:we}=pt.payload,{request:lt,series:Bt,error:Kt,graphResult:It,logsResult:Zt,tableResult:yn,rawPrometheusResult:xn,traceFrames:An,nodeGraphFrames:qt,flameGraphFrames:On,rawPrometheusFrames:wn,customFrames:Zn}=we;if(Kt){if(Kt.type===E.eA.Timeout||Kt.type===E.eA.Cancelled)return{...ut};y.config.angularSupportEnabled&&ut.datasourceInstance?.components?.QueryCtrl&&ut.eventBridge.emit(v.Kh.dataError,Kt)}if(!lt)return{...ut};if(y.config.angularSupportEnabled&&ut.datasourceInstance?.components?.QueryCtrl){const Aa=Bt.map(Ea=>(0,h.Zr)(Ea));ut.eventBridge.emit(v.Kh.dataReceived,Aa)}return{...ut,queryResponse:we,graphResult:It,tableResult:yn,rawPrometheusResult:xn,logsResult:ut.isLive&&Zt?{...Zt,rows:(0,ue.bG)(ut.clearedAtIndex,Zt.rows)}:Zt,showLogs:!!Zt,showMetrics:!!It,showTable:!!yn?.length,showTrace:!!An.length,showNodeGraph:!!qt.length,showRawPrometheus:!!wn.length,showFlameGraph:!!On.length,showCustom:!!Zn?.length,clearedAtIndex:ut.isLive?ut.clearedAtIndex:null}}},37079:(G,A,e)=>{"use strict";e.d(A,{F9:()=>l,Ky:()=>a,M:()=>r,UP:()=>g,aM:()=>u,pd:()=>i,z7:()=>m});var n=e(8111);const a=c=>c.explore.panes,o=c=>c.explore,r=(0,n.P1)(a,Object.entries),i=(0,n.P1)(r,c=>c.length>1),g=(0,n.P1)(r,c=>c.some(d=>d[1].correlationEditorHelperData!==void 0)),u=c=>(0,n.P1)(a,d=>Object.keys(d)[0]===c),l=c=>(0,n.P1)(a,d=>d[c]),m=(0,n.P1)(o,c=>c.correlationEditorDetails)},17713:(G,A,e)=>{"use strict";e.d(A,{F9:()=>C,a1:()=>b,b3:()=>p,cD:()=>h,mG:()=>s,oW:()=>E,ok:()=>D,oz:()=>v,vG:()=>S});var n=e(20079),a=e(85745),o=e(23757),r=e(12399),i=e(15867),g=e(18815),u=e(52152),l=e(45864),m=e(19593),c=e(18435),d=e(20764),f=e(67900);const E=(0,n.PH)("explore/changeRange"),v=(0,n.PH)("explore/changeRefreshInterval"),h=M=>(T,R)=>{const{syncedTimes:O}=R().explore;O?Object.keys(R().explore.panes).forEach(x=>{T(p({...M,exploreId:x})),T((0,f.aA)({exploreId:x,preserveCache:!0}))}):(T(p({...M})),T((0,f.aA)({exploreId:M.exploreId,preserveCache:!0})))},p=M=>(T,R)=>{const{exploreId:O,absoluteRange:x,rawRange:I}=M,L=R().explore.panes[O],P=(0,c.Z)(R().user),N=(0,c.i)(R().user),{range:F}=L;let U=F.raw;x&&(U={from:(0,a.GY)(P,x.from),to:(0,a.GY)(P,x.to)}),I&&(U=I);const j=(0,g.OQ)(P,U,N),V={from:j.from.valueOf(),to:j.to.valueOf()};(0,l.$t)().init({timepicker:{},getTimezone:()=>P,timeRangeUpdated(_){},time:j.raw}),(0,r.J)().updateTimeRange(j),T(E({exploreId:O,range:j,absoluteRange:V}))};function s(M){return(T,R)=>{const O=R().explore.panes[M].range.raw;Object.keys(R().explore.panes).filter(I=>I!==M).forEach(I=>{T(h({exploreId:I,rawRange:O}))});const x=R().explore.syncedTimes;T((0,d.tl)({syncedTimes:!x}))}}function y(M){return(T,R)=>{const O=(0,c.Z)(R().user),x=(0,c.i)(R().user);Object.entries(R().explore.panes).forEach(([I,L])=>{const P=(0,g.OQ)(O,L.range.raw,x);M(I,L,P,T)})}}function C(){return y((M,T,R,O)=>{const x={from:R.from.valueOf(),to:R.to.valueOf()};O(h({exploreId:M,absoluteRange:x}))})}function b(M){return y((T,R,O,x)=>{const I=(0,u.e)(M,O);x(h({exploreId:T,absoluteRange:I}))})}function S(M){return y((T,R,O,x)=>{const I=(0,u.h)(O,M);x(h({exploreId:T,absoluteRange:I}))})}const D=(M,T)=>{if(v.match(T)){const{refreshInterval:R}=T.payload,O=i.dP.isLive(R),x=(0,g.Oy)(R),I=(0,m.j0)(M.logsResult,x);return i.dP.isLive(M.refreshInterval)&&!O&&(0,g.RZ)(M.querySubscription),{...M,refreshInterval:R,queryResponse:{...M.queryResponse,state:O?o.Gu.Streaming:o.Gu.Done},isLive:O,isPaused:O?!1:M.isPaused,logsResult:I}}if(E.match(T)){const{range:R,absoluteRange:O}=T.payload;return{...M,range:R,absoluteRange:O}}return M}},3158:(G,A,e)=>{"use strict";e.d(A,{FG:()=>v,M0:()=>C,M7:()=>y,UI:()=>f,bG:()=>M,dc:()=>S,e1:()=>T,lp:()=>p,r_:()=>s,rx:()=>b,t5:()=>h});var n=e(56375),a=e.n(n),o=e(23757),r=e(9833),i=e(13446),g=e(85745),u=e(63459),l=e(20994),m=e(18815),c=e(65512),d=e(3211);const f={from:"now-6h",to:"now"},E="grafana.explore.style.graph",v=R=>{l.Z.set(E,R)},h=R=>({containerWidth:0,datasourceInstance:null,history:[],queries:[],initialized:!1,range:{from:null,to:null,raw:f},absoluteRange:{from:null,to:null},scanning:!1,queryKeys:[],isLive:!1,isPaused:!1,queryResponse:p(),tableResult:null,graphResult:null,logsResult:null,clearedAtIndex:null,rawPrometheusResult:null,eventBridge:null,cache:[],richHistory:[],supplementaryQueries:(0,d.DK)(),panelsState:{},correlations:void 0,...R}),p=()=>({state:o.Gu.NotStarted,series:[],timeRange:(0,r.JK)(),graphFrames:[],logsFrames:[],traceFrames:[],nodeGraphFrames:[],flameGraphFrames:[],customFrames:[],tableFrames:[],rawPrometheusFrames:[],rawPrometheusResult:null,graphResult:null,logsResult:null,tableResult:null});async function s(R,O){let x;try{x=await(0,c.ak)().get(O)}catch{x=await(0,c.ak)().get()}if(x.init)try{x.init()}catch(P){console.error(P)}const I=`grafana.explore.history.${x.meta?.id}`,L=l.Z.getObject(I,[]);return(0,m.ET)(R,x.uid),{history:L,instance:x}}function y(R){const O={from:R.from,to:R.to};return Object.entries(O).map(([I,L])=>`${encodeURIComponent(I)}=${encodeURIComponent(L.toString())}`).join("&")}function C(R,O){const x=y(O),I=R.findIndex(P=>P.key===x);return I>=0?R[I].value:void 0}function b(R,O){return{from:i.parse(R.from,!1,O),to:i.parse(R.to,!0,O),raw:R}}function S(R){let O=f,x={from:D(R.from),to:D(R.to)};return x.from!==null&&x.to!==null&&(O={from:x.from,to:x.to}),O}function D(R){if(R===null)return null;if((0,g.v9)(R))return R;if(typeof R!="string")return null;const O=R;if(O.indexOf("now")!==-1)return O;if(O.length===8)return(0,g.zh)(O,"YYYYMMDD");if(O.length===15)return(0,g.zh)(O,"YYYYMMDDTHHmmss");if(O.length===19)return(0,g.zh)(O,"YYYY-MM-DD HH:mm:ss");if(O.match(/^\d+$/)){const I=parseInt(O,10);return(0,g.zh)(I)}const x=(0,g.zh)(O);return x.isValid()?x:null}const M=(R,O)=>O?R?O.slice(R+1):O:[],T=(R,O)=>R===u.D?(0,n.uniq)(O.map(x=>x.datasource?.uid).filter(x=>!!x)):[R]},56917:(G,A,e)=>{"use strict";e.d(A,{T:()=>a,u:()=>o});var n=e(1930);const a=" ",o=r=>{const i={},g=[],u=r.fields.filter(c=>!["Time"].includes(c.name));let l=u.find(c=>c.name==="__name__")?.values??[];!l.length&&u.length&&u[0].values.length&&(l=Array(u[0].values.length).fill(""));const m=r.fields.filter(c=>!["__name__"].includes(c.name));return l.forEach(function(c,d){i[c]={};const f=i[c][d]??{};for(const E of m){const v=E.name;if(v!=="Time")if(typeof E?.display=="function"){const h=E?.display(E.values[d]);if(!isNaN(h.numeric))f[v]=h.numeric.toString(10);else{const p=(0,n.zc)(h);p?f[v]=p:v.includes("Value #")&&(f[v]=a)}}else console.warn("Field display method is missing!")}g.push({...f,__name__:c})}),g}},52077:(G,A,e)=>{"use strict";e.d(A,{Rb:()=>y,a_:()=>s,lt:()=>S,qQ:()=>p,u8:()=>C});var n=e(56375),a=e.n(n),o=e(85960),r=e(32205),i=e(89306),g=e(81223),u=e(56582),l=e(12399),m=e(43183),c=e(41879),d=e(81259),f=e(43282);const v=[M=>!M.internal||c.contextSrv.hasAccessToExplore()],h="grafana_data_link_clicked",p=(M,T)=>O=>{const{field:x,dataLinkScopedVars:I,frame:L,link:P,linkModel:N}=O,{valueRowIndex:F}=O.config;if(!P.internal||F===void 0)return N;const U=s({field:x,rowIndex:F,splitOpenFn:M,range:T,vars:I,dataFrame:L,linksToProcess:[P]});return U.length?(0,n.first)(U):void 0},s=M=>{const{field:T,vars:R,splitOpenFn:O,range:x,rowIndex:I,dataFrame:L}=M,P={...R||{}};P.__value={value:{raw:T.values[I]},text:"Raw value"};let N;L&&(N=(0,r.z)({frame:L,rowIndex:I}),P.__data={value:{name:L.name,refId:L.refId,fields:N},text:"Data"},L.fields.forEach(U=>{N&&N[U.name]&&(P[U.name]={value:N[U.name]})}),P.__targetField={value:N[T.name]});const F=M.linksToProcess||T.config.links;return F?F.filter(V=>v.every(_=>_(V,P))).map(V=>{if(V.internal){let _={};V.internal?.transformations&&V.internal?.transformations.forEach(k=>{let q;k.field?q=L?.fields.find(te=>te.name===k.field)?.values[I]:q=T.values[I],_={..._,...(0,d.Y)(k,q,T.name)}});const H={...P,..._},z=S(V,H);let K=[];if(z.variables.length===0){const k=T.name.toString();K.push({variableName:k,value:"",match:""})}else K=z.variables;const Y=k=>{(0,m.ff)(h,{origin:V.origin||i.n1.Datasource,app:g.zj.Explore,internal:!0}),O?.(k)};return z.allVariablesDefined?{...(0,u._)({link:V,internalLink:V.internal,scopedVars:H,range:x,field:T,onClickFn:M.splitOpenFn?q=>Y(q):void 0,replaceVariables:(0,l.J)().replace.bind((0,l.J)())}),variables:K}:void 0}else{const _=(z,K)=>(0,l.J)().replace(z,{...K,...P}),H=(0,f.Bq)().getDataLinkUIModel(V,_,T);return H.title||(H.title=y(H.href)),H}}).filter(V=>!!V):[]};function y(M){M.indexOf("://")<0&&(M=`http://${M}`);let T;try{T=new URL(M).hostname}catch{T=M}return T}function C(M,T){return(0,o.useCallback)((R,O)=>R.fields.flatMap(x=>x.config?.links&&x.config?.links.length?s({field:x,rowIndex:O,range:M,dataFrame:R,splitOpenFn:T}):[]),[M,T])}const b=["__from","__to","__interval","__interval_ms","__org","__user","__range","__rate_interval","__timeFilter","timeFilter"];function S(M,T){let R=[];return(0,l.J)().replace.bind((0,l.J)())(D(M),T,void 0,R),R=(0,n.uniqBy)(R,"variableName"),{variables:R,allVariablesDefined:R.filter(x=>!b.includes(x.variableName)).every(x=>x.found)}}function D(M){let T="",R;for(R in M)typeof M[R]=="string"?T+=" "+M[R]:typeof M[R]=="object"&&(T+=" "+D(M[R]));return T}},17765:(G,A,e)=>{"use strict";e.d(A,{Z:()=>a});var n=e(21871);function a(o){const r=new Set(o.map(i=>i.refId).filter(Boolean));return r.size===o.length?o:(r.clear(),o.map(i=>{if(i.refId&&!r.has(i.refId))return r.add(i.refId),i;const g=(0,n.Hs)(o);return r.add(g),{...i,refId:g}}))}},3211:(G,A,e)=>{"use strict";e.d(A,{B9:()=>E,DK:()=>v,SY:()=>d,Z9:()=>s});var n=e(56375),a=e.n(n),o=e(1050),r=e(59069),i=e(69297),g=e(14069),u=e(45236),l=e(23757),m=e(20994),c=e(81154);const d=[u.v8.LogsVolume,u.v8.LogsSample],f=y=>`grafana.explore.logs.enable${y}`,E=(y,C)=>{m.Z.set(f(C),y?"true":"false")},v=()=>{let y={[u.v8.LogsVolume]:{enabled:!0},[u.v8.LogsSample]:{enabled:!1}};for(const C of d){if(C===u.v8.LogsSample)continue;m.Z.get(f(C))==="false"&&(y[C]={enabled:!1})}return y},h=(y,C,b)=>new o.y(S=>y.subscribe(D=>{if(D.logsResult&&D.logsResult.rows&&D.logsResult.visibleRange&&D.logsResult.bucketSize!==void 0&&D.state===l.Gu.Done){const M=D.logsResult.bucketSize,T=C.map(x=>x.refId),R=(0,n.groupBy)(D.logsResult.rows,"dataFrame.refId");let O=[];T.forEach(x=>{if(R[x]?.length){const I=(0,c.Nw)(R[x],M);O=[...O,...I];const L={logsVolumeType:u.o8.Limited,absoluteRange:D.logsResult?.visibleRange,datasourceName:b,sourceQuery:C.find(P=>P.refId===x)};S.next({data:O.map(P=>{const N=P.meta?.custom||{};return{...P,meta:{custom:{...N,...L}}}}),state:D.state})}}),S.complete()}})),p=(y,C,b,S)=>{if(y===u.v8.LogsVolume)return h(C,b,S)},s=(y,C,b,S)=>{const M=y.map(({datasource:T,targets:R},O)=>{const x=(0,n.cloneDeep)(b);return x.requestId=`${x.requestId||""}_${O}`,x.targets=R,(0,u.mN)(T,C)?T.getDataProvider(C,x):p(C,S,R,T.name)}).filter(l.fQ);if(M.length!==0)return M.length===1?M[0]:(0,r.T)(...M).pipe((0,g.R)((T,R)=>T.errors&&T.errors.length||R.state===l.Gu.NotStarted?T:R.state===l.Gu.Loading&&T.state===l.Gu.NotStarted?{...T,state:l.Gu.Loading}:R.state&&R.state!==l.Gu.Done?T:{...T,data:[...T.data,...R.data],state:l.Gu.Done},{data:[],state:l.Gu.NotStarted}),(0,i.E)())}},15013:(G,A,e)=>{"use strict";e.d(A,{mV:()=>D,bE:()=>S});var n=e(16226),a=e(25066),o=e(73667),r=e(32063),i=e(12399),g=e(81502),u=e(85960),l=e(84933),m=e(27436),c=e(16148),d=e(45848),f=e(71325),E=e(46575),v=e(72096),h=e(36530),p=e(92731);const s=15;function y(){const M=(0,u.useRef)({}),T=(0,u.useCallback)(O=>{switch(O){case h.Us.math:case h.Us.reduce:case h.Us.resample:case h.Us.threshold:return M.current[O];case h.Us.classic:return}},[]),R=(0,u.useCallback)((O,x)=>{switch(O){case h.Us.math:M.current.math=x;break;case h.Us.reduce:case h.Us.resample:case h.Us.resample:M.current.reduce=x,M.current.resample=x,M.current.threshold=x;break}},[]);return{getCachedExpression:T,setCachedExpression:R}}function C(M){const{query:T,queries:R,onRunQuery:O,onChange:x}=M,{getCachedExpression:I,setCachedExpression:L}=y();(0,u.useEffect)(()=>{L(T.type,T.expression)},[T.expression,T.type,L]);const P=(0,u.useCallback)(U=>{const j=I(U.value),V=(0,p.J)({...T,type:U.value});x({...V,expression:j??V.expression})},[T,x,I]),N=()=>{const U=R.filter(j=>T.refId!==j.refId).map(j=>({value:j.refId,label:j.refId}));switch(T.type){case h.Us.math:return u.createElement(d.Z,{onChange:x,query:T,labelWidth:s,onRunQuery:O});case h.Us.reduce:return u.createElement(f.v,{refIds:U,onChange:x,labelWidth:s,query:T});case h.Us.resample:return u.createElement(E.p,{query:T,labelWidth:s,onChange:x,refIds:U});case h.Us.classic:return u.createElement(c.I,{onChange:x,query:T,refIds:U});case h.Us.threshold:return u.createElement(v.M,{onChange:x,query:T,labelWidth:s,refIds:U})}},F=h.EJ.find(U=>U.value===T.type);return u.createElement("div",null,u.createElement(l._,{label:"Operation",labelWidth:s},u.createElement(m.Ph,{options:h.EJ,value:F,onChange:P,width:25})),N())}class b extends r.CK{constructor(T){super(T),this.instanceSettings=T}applyTemplateVariables(T,R){const O=(0,i.J)();return{...T,expression:O.replace(T.expression,R),window:O.replace(T.window,R)}}getCollapsedText(T){return`Expression: ${T.type}`}query(T){let R=T.targets.map(async x=>{const I=await(0,g.F)().get(x.datasource);return I.interpolateVariablesInQueries?I?.interpolateVariablesInQueries([x],T.scopedVars,T.filters)[0]:x});return(0,n.D)(Promise.all(R)).pipe((0,a.z)(x=>super.query({...T,targets:x})))}newQuery(T){return{refId:"--",datasource:r.hr,type:T?.type??h.Us.math,...T}}}const S={id:-100,uid:h.Yq,name:r.hr.name,type:r.hr.type,access:"proxy",meta:{baseUrl:"",module:"",type:o.zV.datasource,name:r.hr.type,id:r.hr.type,info:{author:{name:"Grafana Labs"},logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"},description:"Adds expression support to Grafana",screenshots:[],links:[],updated:"",version:""}},jsonData:{},readOnly:!0},D=new b(S);D.meta={id:r.hr.type,info:{logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"}}},D.components={QueryEditor:C}},16148:(G,A,e)=>{"use strict";e.d(A,{I:()=>C});var n=e(85960),a=e(81368),o=e(84933),r=e(29165),i=e(97666),g=e(92731),u=e(66681),l=e(47257),m=e(13086),c=e(85722),d=e(27436),f=e(24956),E=e(34524);const v=E.Z.reducerTypes.map(b=>({label:b.text,value:b.value})),h=E.Z.evalOperators.map(b=>({label:b.text,value:b.value})),p=E.Z.evalFunctions.map(b=>({label:b.text,value:b.value})),s=({condition:b,index:S,onChange:D,onRemoveCondition:M,refIds:T})=>{const R=(0,l.wW)(y),O=U=>{D({...b,operator:{type:U.value}})},x=U=>{D({...b,reducer:{type:U.value,params:[]}})},I=U=>{D({...b,query:{params:[U.value]}})},L=U=>{D({...b,evaluator:{params:b.evaluator.params,type:U.value}})},P=(U,j)=>{const V=parseFloat(U.currentTarget.value),_=[...b.evaluator.params];_[j]=V,D({...b,evaluator:{...b.evaluator,params:_}})},N=(0,u.css)`
    width: 60px;
  `,F=b.evaluator.type===E.$.IsWithinRange||b.evaluator.type===E.$.IsOutsideRange;return n.createElement(m.K,null,n.createElement("div",{style:{flex:1}},n.createElement(a.Z,null,S===0?n.createElement("div",{className:(0,u.cx)(R.button,N)},"WHEN"):n.createElement(c.d,{className:(0,u.cx)(R.buttonSelectText,N),options:h,onChange:O,value:h.find(U=>U.value===b.operator.type)}),n.createElement(d.Ph,{options:v,onChange:x,width:20,value:v.find(U=>U.value===b.reducer.type)}),n.createElement("div",{className:R.button},"OF"),n.createElement(d.Ph,{onChange:I,options:T,width:"auto",value:T.find(U=>U.value===b.query.params[0])})),n.createElement(a.Z,null,n.createElement(c.d,{className:R.buttonSelectText,options:p,onChange:L,value:p.find(U=>U.value===b.evaluator.type)}),F?n.createElement(n.Fragment,null,n.createElement(f.I,{type:"number",width:10,onChange:U=>P(U,0),value:b.evaluator.params[0]}),n.createElement("div",{className:R.button},"TO"),n.createElement(f.I,{type:"number",width:10,onChange:U=>P(U,1),value:b.evaluator.params[1]})):b.evaluator.type!==E.$.HasNoValue?n.createElement(f.I,{type:"number",width:10,onChange:U=>P(U,0),value:b.evaluator.params[0]}):null)),n.createElement(r.zx,{variant:"secondary",type:"button",onClick:()=>M(S)},n.createElement(i.J,{name:"trash-alt"})))},y=b=>{const S=(0,u.css)`
    color: ${b.colors.primary.text};
    font-size: ${b.typography.bodySmall.fontSize};
  `;return{buttonSelectText:S,button:(0,u.cx)((0,u.css)`
        display: flex;
        align-items: center;
        border-radius: ${b.shape.radius.default};
        font-weight: ${b.typography.fontWeightMedium};
        border: 1px solid ${b.colors.border.weak};
        white-space: nowrap;
        padding: 0 ${b.spacing(1)};
        background-color: ${b.colors.background.canvas};
      `,S)}},C=({onChange:b,query:S,refIds:D})=>{const M=(O,x)=>{S.conditions&&b({...S,conditions:[...S.conditions.slice(0,x),O,...S.conditions.slice(x+1)]})},T=()=>{if(S.conditions){const O=S.conditions.at(-1)?.query?.params??[],x={...g.R,query:{params:O}};b({...S,conditions:S.conditions.length>0?[...S.conditions,x]:[x]})}},R=O=>{if(S.conditions){const x=S.conditions[O],I=S.conditions.filter(L=>L!==x).map((L,P)=>P===0?{...L,operator:{type:"when"}}:L);b({...S,conditions:I})}};return n.createElement("div",null,n.createElement(a.Z,null,n.createElement(o._,{label:"Conditions",labelWidth:14},n.createElement("div",null,S.conditions?.map((O,x)=>{if(O)return n.createElement(s,{key:x,index:x,condition:O,onChange:I=>M(I,x),onRemoveCondition:R,refIds:D})})))),n.createElement(r.zx,{variant:"secondary",type:"button",onClick:T},n.createElement(i.J,{name:"plus-circle"})))}},45848:(G,A,e)=>{"use strict";e.d(A,{Z:()=>d});var n=e(66681),a=e(85960),o=e(47257),r=e(13086),i=e(84933),g=e(114),u=e(57652),l=e(97666),m=e(7073);const c="Math operations on one or more queries. You reference the query by ${refId} ie. $A, $B, $C etc\nThe sum of two scalar values: $A + $B > 10",d=({labelWidth:h,onChange:p,query:s,onRunQuery:y})=>{const C=D=>{p({...s,expression:D.target.value})},b=(0,o.wW)(E),S=()=>{s.expression&&y()};return a.createElement(r.K,null,a.createElement(i._,{label:a.createElement(g.W,{width:"auto"},a.createElement(u.P,{fitContent:!0,content:a.createElement("div",{className:b.documentationContainer},a.createElement("div",null,"Run math operations on one or more queries. You reference the query by ","${refId}"," ie. $A, $B, $C etc.",a.createElement("br",null),"Example: ",a.createElement("code",null,"$A + $B")),a.createElement("header",{className:b.documentationHeader},"Available Math functions"),a.createElement("div",{className:b.documentationFunctions},a.createElement(f,{name:"abs",description:"returns the absolute value of its argument which can be a number or a series"}),a.createElement(f,{name:"is_inf",description:"returns 1 for Inf values (negative or positive) and 0 for other values. It's able to operate on series or scalar values."}),a.createElement(f,{name:"is_nan",description:"returns 1 for NaN values and 0 for other values. It's able to operate on series or scalar values."}),a.createElement(f,{name:"is_null",description:"returns 1 for null values and 0 for other values. It's able to operate on series or scalar values."}),a.createElement(f,{name:"is_number",description:"returns 1 for all real number values and 0 for non-number. It's able to operate on series or scalar values."}),a.createElement(f,{name:"log",description:"returns the natural logarithm of its argument, which can be a number or a series"}),a.createElement(f,{name:"inf, infn, nan, and null",description:"The inf for infinity positive, infn for infinity negative, nan, and null functions all return a single scalar value that matches its name."}),a.createElement(f,{name:"round",description:"returns a rounded integer value. It's able to operate on series or escalar values."}),a.createElement(f,{name:"ceil",description:"rounds the number up to the nearest integer value. It's able to operate on series or escalar values."}),a.createElement(f,{name:"floor",description:"rounds the number down to the nearest integer value. It's able to operate on series or escalar values."}))),title:a.createElement(r.K,{gap:1,direction:"row"},a.createElement(l.J,{name:"book-open"})," Math operator"),footer:a.createElement("div",null,"See our additional documentation on"," ",a.createElement("a",{className:b.documentationLink,target:"_blank",href:"https://grafana.com/docs/grafana/latest/panels/query-a-data-source/use-expressions-to-manipulate-data/about-expressions/#math",rel:"noreferrer"},a.createElement(l.J,{size:"xs",name:"external-link-alt"})," Math expressions"),"."),closeButton:!0,placement:"bottom-start"},a.createElement("div",{className:b.info},"Expression ",a.createElement(l.J,{name:"info-circle"})))),labelWidth:h,grow:!0,shrink:!0},a.createElement(m.K,{value:s.expression,onChange:C,rows:1,placeholder:c,onBlur:S,style:{minWidth:250,lineHeight:"26px",minHeight:32}})))},f=({name:h,description:p})=>{const s=(0,o.wW)(v);return a.createElement(a.Fragment,null,a.createElement("span",{className:s.name},h),a.createElement("span",{className:s.description},p))},E=h=>({documentationHeader:(0,n.css)`
    font-size: ${h.typography.h5.fontSize};
    font-weight: ${h.typography.h5.fontWeight};
  `,documentationLink:(0,n.css)`
    color: ${h.colors.text.link};
  `,documentationContainer:(0,n.css)`
    display: flex;
    flex: 1;
    flex-direction: column;
    gap: ${h.spacing(2)};

    padding: ${h.spacing(1)} ${h.spacing(2)};
  `,documentationFunctions:(0,n.css)`
    display: grid;
    grid-template-columns: max-content auto;
    column-gap: ${h.spacing(2)};
  `,info:(0,n.css)`
    display: flex;
    flex-direction: row;
    align-items: center;
    cursor: pointer;
    gap: ${h.spacing(1)};
  `}),v=h=>({name:(0,n.css)`
    font-weight: ${h.typography.fontWeightBold};
  `,description:(0,n.css)`
    font-size: ${h.typography.bodySmall.fontSize};
    color: ${h.colors.text.disabled};
  `})},71325:(G,A,e)=>{"use strict";e.d(A,{v:()=>u});var n=e(85960),a=e(84933),o=e(24956),r=e(81368),i=e(27436),g=e(36530);const u=({labelWidth:l="auto",onChange:m,refIds:c,query:d})=>{const f=g.SQ.find(b=>b.value===d.reducer),E=b=>{m({...d,expression:b.value})},v=b=>{m({...d,reducer:b.value})},h=b=>{m({...d,settings:b})},p=b=>{let S;switch(b.value){case g.kN.ReplaceNonNumbers:let D=0;d.settings?.mode===g.kN.ReplaceNonNumbers&&(D=d.settings?.replaceWithValue??0),S={mode:g.kN.ReplaceNonNumbers,replaceWithValue:D};break;default:S={mode:b.value}}h(S)},s=b=>{const S=b.currentTarget.valueAsNumber;h({mode:g.kN.ReplaceNonNumbers,replaceWithValue:S??0})},y=d.settings?.mode??g.kN.Strict,C=()=>{if(y===g.kN.ReplaceNonNumbers)return n.createElement(a._,{label:"Replace With",labelWidth:l},n.createElement(o.I,{type:"number",width:10,onChange:s,value:d.settings?.replaceWithValue??0}))};return n.createElement(n.Fragment,null,n.createElement(r.Z,null,n.createElement(a._,{label:"Input",labelWidth:l},n.createElement(i.Ph,{onChange:E,options:c,value:d.expression,width:"auto"}))),n.createElement(r.Z,null,n.createElement(a._,{label:"Function",labelWidth:l},n.createElement(i.Ph,{options:g.SQ,value:f,onChange:v,width:20})),n.createElement(a._,{label:"Mode",labelWidth:l},n.createElement(i.Ph,{onChange:p,options:g.YM,value:y,width:25})),C()))}},46575:(G,A,e)=>{"use strict";e.d(A,{p:()=>u});var n=e(85960),a=e(81368),o=e(84933),r=e(27436),i=e(24956),g=e(36530);const u=({labelWidth:l="auto",onChange:m,refIds:c,query:d})=>{const f=g.Fr.find(y=>y.value===d.downsampler),E=g.r8.find(y=>y.value===d.upsampler),v=y=>{m({...d,window:y.target.value})},h=y=>{m({...d,expression:y.value})},p=y=>{m({...d,downsampler:y.value})},s=y=>{m({...d,upsampler:y.value})};return n.createElement(n.Fragment,null,n.createElement(a.Z,null,n.createElement(o._,{label:"Input",labelWidth:l},n.createElement(r.Ph,{onChange:h,options:c,value:d.expression,width:20}))),n.createElement(a.Z,null,n.createElement(o._,{label:"Resample to",labelWidth:l,tooltip:"10s, 1m, 30m, 1h"},n.createElement(i.I,{onChange:v,value:d.window,width:15})),n.createElement(o._,{label:"Downsample"},n.createElement(r.Ph,{options:g.Fr,value:f,onChange:p,width:25})),n.createElement(o._,{label:"Upsample"},n.createElement(r.Ph,{options:g.r8,value:E,onChange:s,width:25}))))}},72096:(G,A,e)=>{"use strict";e.d(A,{M:()=>f});var n=e(66681),a=e(85960),o=e(47257),r=e(81368),i=e(84933),g=e(27436),u=e(85722),l=e(24956),m=e(34524),c=e(36530);const d=m.$.IsAbove,f=({labelWidth:h,onChange:p,refIds:s,query:y})=>{const C=(0,o.wW)(v),b={type:"query",evaluator:{type:d,params:[0,0]},query:{params:[]},reducer:{params:[],type:"last"}},S=y.conditions?.length?y.conditions:[b],D=S[0],M=c.Mi.find(I=>I.value===S[0].evaluator?.type),T=I=>{p({...y,expression:I.value})},R=I=>{const L=I.value??d;p({...y,conditions:E(S,{type:L})})},O=(I,L)=>{const P=parseFloat(I.currentTarget.value),N=[...D.evaluator.params];N[L]=P,p({...y,conditions:E(S,{params:N})})},x=D.evaluator.type===m.$.IsWithinRange||D.evaluator.type===m.$.IsOutsideRange;return a.createElement(a.Fragment,null,a.createElement(r.Z,null,a.createElement(i._,{label:"Input",labelWidth:h},a.createElement(g.Ph,{onChange:T,options:s,value:y.expression,width:20}))),a.createElement(r.Z,null,a.createElement(u.d,{className:C.buttonSelectText,options:c.Mi,onChange:R,value:M}),x?a.createElement(a.Fragment,null,a.createElement(l.I,{type:"number",width:10,onChange:I=>O(I,0),defaultValue:D.evaluator.params[0]}),a.createElement("div",{className:C.button},"TO"),a.createElement(l.I,{type:"number",width:10,onChange:I=>O(I,1),defaultValue:D.evaluator.params[1]})):a.createElement(l.I,{type:"number",width:10,onChange:I=>O(I,0),defaultValue:S[0].evaluator.params[0]||0})))};function E(h,p){return[{...h[0],evaluator:{...h[0].evaluator,...p}}]}const v=h=>({buttonSelectText:(0,n.css)`
    color: ${h.colors.primary.text};
    font-size: ${h.typography.bodySmall.fontSize};
    text-transform: uppercase;
  `,button:(0,n.css)`
    height: 32px;

    color: ${h.colors.primary.text};
    font-size: ${h.typography.bodySmall.fontSize};
    text-transform: uppercase;

    display: flex;
    align-items: center;
    border-radius: ${h.shape.radius.default};
    font-weight: ${h.typography.fontWeightBold};
    border: 1px solid ${h.colors.border.medium};
    white-space: nowrap;
    padding: 0 ${h.spacing(1)};
    background-color: ${h.colors.background.primary};
  `})},36530:(G,A,e)=>{"use strict";e.d(A,{EJ:()=>g,Fr:()=>c,Mi:()=>f,SQ:()=>u,Us:()=>r,YM:()=>m,Yq:()=>o,hF:()=>i,kN:()=>l,r8:()=>d});var n=e(16515),a=e(34524);const o="__expr__";var r=(E=>(E.math="math",E.reduce="reduce",E.resample="resample",E.classic="classic_conditions",E.threshold="threshold",E))(r||{});const i=E=>{switch(E){case"math":return"Math";case"reduce":return"Reduce";case"resample":return"Resample";case"classic_conditions":return"Classic condition";case"threshold":return"Threshold"}},g=[{value:"math",label:"Math",description:"Free-form math formulas on time series or number data."},{value:"reduce",label:"Reduce",description:"Takes one or more time series returned from a query or an expression and turns each series into a single number."},{value:"resample",label:"Resample",description:"Changes the time stamps in each time series to have a consistent time interval."},{value:"classic_conditions",label:"Classic condition",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the condition. Disables multi-dimensional alerts for this rule."},{value:"threshold",label:"Threshold",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the threshold condition."}],u=[{value:n.gz.min,label:"Min",description:"Get the minimum value"},{value:n.gz.max,label:"Max",description:"Get the maximum value"},{value:n.gz.mean,label:"Mean",description:"Get the average value"},{value:n.gz.sum,label:"Sum",description:"Get the sum of all values"},{value:n.gz.count,label:"Count",description:"Get the number of values"},{value:n.gz.last,label:"Last",description:"Get the last value"}];var l=(E=>(E.Strict="",E.ReplaceNonNumbers="replaceNN",E.DropNonNumbers="dropNN",E))(l||{});const m=[{value:"",label:"Strict",description:"Result can be NaN if series contains non-numeric data"},{value:"dropNN",label:"Drop Non-numeric Values",description:"Drop NaN, +/-Inf and null from input series before reducing"},{value:"replaceNN",label:"Replace Non-numeric Values",description:"Replace NaN, +/-Inf and null with a constant value before reducing"}],c=[{value:n.gz.last,label:"Last",description:"Fill with the last value"},{value:n.gz.min,label:"Min",description:"Fill with the minimum value"},{value:n.gz.max,label:"Max",description:"Fill with the maximum value"},{value:n.gz.mean,label:"Mean",description:"Fill with the average value"},{value:n.gz.sum,label:"Sum",description:"Fill with the sum of all values"}],d=[{value:"pad",label:"pad",description:"fill with the last known value"},{value:"backfilling",label:"backfilling",description:"fill with the next known value"},{value:"fillna",label:"fillna",description:"Fill with NaNs"}],f=[{value:a.$.IsAbove,label:"Is above"},{value:a.$.IsBelow,label:"Is below"},{value:a.$.IsWithinRange,label:"Is within range"},{value:a.$.IsOutsideRange,label:"Is outside range"}]},92731:(G,A,e)=>{"use strict";e.d(A,{J:()=>r,R:()=>i});var n=e(16515),a=e(34524),o=e(36530);const r=g=>{switch(g.type){case o.Us.reduce:g.reducer||(g.reducer=n.gz.mean);break;case o.Us.resample:g.downsampler||(g.downsampler=n.gz.mean),g.upsampler||(g.upsampler="fillna"),g.reducer=void 0;break;case o.Us.math:g.expression=void 0;break;case o.Us.classic:g.conditions||(g.conditions=[i]);break;default:g.reducer=void 0}return g},i={type:"query",reducer:{params:[],type:"avg"},operator:{type:"and"},query:{params:[]},evaluator:{params:[0,0],type:a.$.IsAbove}}},55539:(G,A,e)=>{"use strict";e.d(A,{AZ:()=>l,B1:()=>f,Pr:()=>u,W3:()=>m,y3:()=>g});var n=e(90857),a=e(95329),o=e(41879),r=e(98936),i=e(95162);const g="manage-folder",u=v=>`folder-dashboards-${v}`,l=v=>`folder-library-panels-${v}`,m=v=>`folder-alerting-${v}`,c=v=>`folder-permissions-${v}`,d=v=>`folder-settings-${v}`;function f(v,h=v.parents){const p={icon:"folder",id:g,subTitle:(0,r.L)("manage-folder"),url:v.url,text:v.title,children:[{active:!1,icon:"apps",id:u(v.uid),text:(0,a.t)("browse-dashboards.manage-folder-nav.dashboards","Dashboards"),url:v.url}]};if(h&&h.length>0){const s=h[h.length-1],y=h.slice(0,h.length-1);p.parentItem=f(s,y)}return p.children.push({active:!1,icon:"library-panel",id:l(v.uid),text:(0,a.t)("browse-dashboards.manage-folder-nav.panels","Panels"),url:`${v.url}/library-panels`}),o.contextSrv.hasPermission(i.AccessControlAction.AlertingRuleRead)&&n.config.unifiedAlertingEnabled&&p.children.push({active:!1,icon:"bell",id:m(v.uid),text:(0,a.t)("browse-dashboards.manage-folder-nav.alert-rules","Alert rules"),url:`${v.url}/alerting`}),p}function E(v){const h=f({created:"",createdBy:"",hasAcl:!1,updated:"",updatedBy:"",id:1,uid:"loading",title:"Loading",url:"url",canSave:!0,canEdit:!0,canAdmin:!0,canDelete:!0,version:0});return h.children[v].active=!0,{main:h,node:h.children[v]}}},43001:(G,A,e)=>{"use strict";e.d(A,{G3:()=>g,ZP:()=>m});var n=e(20079),a=e(42321);const o={id:0,uid:"loading",title:"loading",url:"",canSave:!1,canDelete:!1,hasChanged:!1,version:1},r=(c,d)=>({...c,...d.payload,hasChanged:!1}),i=(0,n.oM)({name:"folder",initialState:o,reducers:{loadFolder:r,setFolderTitle:(c,d)=>({...c,title:d.payload,hasChanged:d.payload.trim().length>0})},extraReducers:c=>{c.addMatcher(a.Hv.getFolder.matchFulfilled,r)}}),{loadFolder:g,setFolderTitle:u}=i.actions,m={folder:i.reducer}},14867:(G,A,e)=>{"use strict";e.d(A,{Q:()=>l});var n=e(66681),a=e(85960),o=e(47257),r=e(27436),i=e(49199),g=e(31139);const u=[{label:"Countries",description:"Lookup countries by name, two letter code, or three letter code",value:g.LI},{label:"USA States",description:"Lookup states by name or 2 ",value:"public/gazetteer/usa-states.json"},{label:"Airports",description:"Lookup airports by id or code",value:"public/gazetteer/airports.geojson"}],l=({value:c,onChange:d,context:f,item:E})=>{const v=(0,o.wW)(m),[h,p]=(0,a.useState)(),s=E.settings;(0,a.useEffect)(()=>{async function b(){const S=await(0,g.so)(c);p(S)}b()},[c,p]);const{current:y,options:C}=(0,a.useMemo)(()=>{let b=s?.options?[...s.options]:[...u],S=b?.find(D=>D.value===h?.path);return!S&&h&&(S={label:h.path,value:h.path},b.push(S)),{options:b,current:S}},[h,s?.options]);return a.createElement(a.Fragment,null,a.createElement(r.Ph,{value:y,options:C,onChange:b=>d(b.value),allowCustomValue:!0,formatCreateLabel:b=>`Load from URL: ${b}`}),h&&a.createElement(a.Fragment,null,h.error&&a.createElement(i.b,{title:h.error,severity:"warning"}),h.count&&a.createElement("div",{className:v.keys},a.createElement("b",null,"(",h.count,")"),h.examples(10).map(b=>a.createElement("span",{key:b},b,",")),h.count>10&&" ...")))},m=()=>({keys:(0,n.css)`
    margin-top: 4px;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;

    > span {
      margin-left: 4px;
    }
  `})},1853:(G,A,e)=>{"use strict";e.d(A,{C:()=>s});var n=e(58309),a=e(1713),o=e(14867),r=e(66681),i=e(85960),g=e(92369),u=e(47257),l=e(49199),m=e(97666),c=e(27436),d=e(74042),f=e(10871);const E=[{value:a.q1.Auto,label:"Auto",ariaLabel:g.wl.components.Transforms.SpatialOperations.location.autoOption,description:"Automatically identify location data based on default field names"},{value:a.q1.Coords,label:"Coords",ariaLabel:g.wl.components.Transforms.SpatialOperations.location.coords.option,description:"Specify latitude and longitude fields"},{value:a.q1.Geohash,label:"Geohash",ariaLabel:g.wl.components.Transforms.SpatialOperations.location.geohash.option,description:"Specify geohash field"},{value:a.q1.Lookup,label:"Lookup",ariaLabel:g.wl.components.Transforms.SpatialOperations.location.lookup.option,description:"Specify Gazetteer and lookup field"}],v="https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/geomap/#location",h=({value:y,onChange:C,context:b,item:S})=>{const[D,M]=(0,i.useState)();(0,i.useEffect)(()=>{S.settings?.source&&S.settings?.data?.length&&S.settings.data[0]&&(0,f.cJ)(S.settings.source).then(O=>{S.settings&&S.settings.data&&M((0,f.g6)(S.settings.data[0],O))})},[S.settings]);const T=(0,u.wW)(p),R=()=>{if(D){if(D.warning)return i.createElement(l.b,{title:D.warning,severity:"warning",buttonContent:i.createElement(m.J,{name:"question-circle",size:"xl"}),className:T.alert,onRemove:()=>{const O=window.open(v,"_blank","noopener,noreferrer");O&&(O.opener=null)}});if(y===a.q1.Auto&&D.description)return i.createElement("span",null,D.description)}return null};return i.createElement(i.Fragment,null,i.createElement(c.Ph,{options:E,value:y,onChange:O=>{C(O.value)}}),i.createElement(d.Lh,{className:T.hGroup},R()))},p=y=>({alert:(0,r.css)`
      & div {
        padding: 4px;
      }
      margin-bottom: 0px;
      margin-top: 5px;
      padding: 2px;
    `,hGroup:(0,r.css)`
      & div {
        width: 100%;
      }
    `});function s(y,C,b,S,D){switch(b.addCustomEditor({id:"modeEditor",path:`${C}mode`,name:"Location Mode",editor:h,settings:{data:D,source:S}}),S?.mode){case a.q1.Coords:b.addFieldNamePicker({path:`${C}latitude`,name:"Latitude field",settings:{filter:M=>M.type===n.fS.number,noFieldsMessage:"No numeric fields found"}}).addFieldNamePicker({path:`${C}longitude`,name:"Longitude field",settings:{filter:M=>M.type===n.fS.number,noFieldsMessage:"No numeric fields found"}});break;case a.q1.Geohash:b.addFieldNamePicker({path:`${C}geohash`,name:"Geohash field",settings:{filter:M=>M.type===n.fS.string,noFieldsMessage:"No strings fields found"}});break;case a.q1.Lookup:b.addFieldNamePicker({path:`${C}lookup`,name:"Lookup field",settings:{filter:M=>M.type===n.fS.string,noFieldsMessage:"No strings fields found"}}).addCustomEditor({id:"gazetteer",path:`${C}gazetteer`,name:"Gazetteer",editor:o.Q})}}},7094:(G,A,e)=>{"use strict";e.d(A,{EK:()=>f,Fh:()=>E,ie:()=>d,uZ:()=>m,zS:()=>c});var n=e(59284),a=e(229),o=e(16842),r=e(51227),i=e(58309),g=e(15830);function u(h){if(!h?.length)return;const p=[16,8,4,2,1],s="0123456789bcdefghjkmnpqrstuvwxyz";let y=!0;const C=[],b=[];C[0]=-90,C[1]=90,b[0]=-180,b[1]=180;let S;h.split("").forEach(T=>{S=s.indexOf(T),p.forEach(R=>{l(y?b:C,S,R),y=!y})});const D=(C[0]+C[1])/2;return[(b[0]+b[1])/2,D]}function l(h,p,s){p&s?h[0]=(h[0]+h[1])/2:h[1]=(h[0]+h[1])/2}function m(h){return{name:h.name??"Point",type:i.fS.geo,values:h.values.map(p=>{const s=u(p);if(s)return new n.Z((0,r.mi)(s))}),config:v}}function c(h,p){const s=new Array(h.values.length);for(let y=0;y<h.values.length;y++){const C=h.values[y],b=p.values[y];C===null||b===null||(s[y]=new n.Z((0,r.mi)([C,b])))}return{name:"Point",type:i.fS.geo,values:s,config:v}}function d(h,p){const s=p.values.length,y=new Array(s);for(let C=0;C<s;C++)y[C]=h.find(p.values[C])?.geometry();return{name:"Geometry",type:i.fS.geo,values:y,config:v}}function f(h,p){const s=h.values,y=p.values;if(!s||!y)throw"missing src/dest";if(s.length!==y.length)throw"Source and destination field lengths do not match";const C=h.values.length,b=new Array(C);for(let S=0;S<C;S++){const D=s[S],M=y[S];D&&M?b[S]=new a.Z([D,M]):D?b[S]=D:M&&(b[S]=M)}return{name:"Geometry",type:i.fS.geo,values:b,config:v}}function E(h,p){const s=h.values,y=p.values;if(!s||!y)throw"missing src/dest";if(s.length!==y.length)throw"Source and destination field lengths do not match";const C=h.values.length,b=new Array(C);for(let S=0;S<C;S++){const D=s[S],M=y[S];D&&M&&(b[S]=new o.Z([(0,g.Lb)(D),(0,g.Lb)(M)]))}return{name:"Geometry",type:i.fS.geo,values:b,config:v}}const v=Object.freeze({custom:{hideFrom:{tooltip:!0}}})},31139:(G,A,e)=>{"use strict";e.d(A,{LI:()=>h,so:()=>p});var n=e(1668),a=e(59284),o=e(45878),r=e(58309),i=e(85445),g=e(15775);function u(s){const y=new g.Z().readFeatures(s,{featureProjection:"EPSG:3857"}),C=y.length,b=new Array(C).fill(null),S=[],D=new Map,M=x=>{let I=D.get(x);return I||(I={types:new Set,values:new Array(C).fill(null),count:0},S.push(x),D.set(x,I)),I},T=(...x)=>{for(const I of x)if(!D.has(I))return I;return"___"+x[0]},R={types:new Set,values:new Array(C).fill(null),count:0};for(let x=0;x<C;x++){const I=y[x];b[x]=I.getGeometry();const L=I.getId();L!=null&&(R.values[x]=L,R.types.add((0,o.DP)(L)),R.count++);for(const P of I.getKeys()){const N=I.get(P);if(N===b[x]||N==null)continue;const F=M(P);F.values[x]=N,F.types.add((0,o.DP)(N)),F.count++}}const O=[];if(R.count>0){const x=l(R);O.push({name:T("id","_id","__id"),type:x,values:R.values,config:{}})}O.push({name:T("geo","geometry"),type:r.fS.geo,values:b,config:{}});for(const x of S){const I=D.get(x);if(!I)continue;const L=l(I);O.push({name:x,type:L,values:I.values,config:{}})}return{fields:O,length:C}}function l(s){return s.count<1?r.fS.other:s.types.size>1?(s.values=s.values.map(y=>y!=null?`${y}`:y),r.fS.string):s.types.values().next().value}var m=e(7094),c=e(51227);function d(s,y){let C=0;const b=new Map;for(const S of y){const D=new a.Z((0,c.mi)([S.longitude,S.latitude])),M={point:()=>D,geometry:()=>D};if(S.name&&(b.set(S.name,M),b.set(S.name.toUpperCase(),M)),S.key&&(b.set(S.key,M),b.set(S.key.toUpperCase(),M)),S.keys)for(const T of S.keys)b.set(T,M),b.set(T.toUpperCase(),M);C++}return{path:s,find:S=>{let D=b.get(S);return!D&&typeof S=="string"&&(D=b.get(S.toUpperCase())),D},count:C,examples:S=>{const D=[];if(b.size<1)D.push("no values found");else for(const M of b.keys())if(D.push(M),D.length>=S)break;return D}}}function f(s,y){let C;if(Array.isArray(y)){const b=y[0];if(b.latitude&&b.longitude&&(b.key||b.keys))return d(s,y)}else Array.isArray(y?.features)&&y?.type==="FeatureCollection"&&(C=u(y));if(!C)try{C=(0,o.g0)(y)}catch(b){return{path:s,error:`${b}`,find:S=>{},examples:S=>[]}}return E(C,{path:s})}function E(s,y){const C=[];let b,S,D,M,T;for(const x of s.fields)if(x.type===r.fS.geo&&(b=x),!T&&x.type===r.fS.string&&(T=x),x.name){y.keys&&y.keys.includes(x.name)&&C.push(x);const I=x.name.toUpperCase();switch(I){case"LAT":case"LATITUTE":S=x;break;case"LON":case"LNG":case"LONG":case"LONGITUE":D=x;break;case"GEOHASH":M=x;break;case"ID":case"UID":case"KEY":case"CODE":y.keys||C.push(x);break;default:y.keys||(I.endsWith("_ID")||I.endsWith("_CODE"))&&C.push(x)}}!C.length&&T&&C.push(T);let R=!1;b?R=b.values[0]?.getType()==="Point":M?(b=(0,m.uZ)(M),R=!0):S&&D&&(b=(0,m.zS)(D,S),R=!0);const O=new Map;return C.forEach(x=>{x.values.forEach((I,L)=>{const P=`${I}`;O.set(P.toUpperCase(),L),O.set(P,L)})}),{path:y.path,find:x=>{const I=O.get(x);if(I!=null){const L=b?.values[I];return{frame:s,index:I,point:()=>!L||R?L:new a.Z((0,n.qg)(L.getExtent())),geometry:()=>L}}},examples:x=>{const I=[];for(let L of O.keys())if(I.push(L),I.length>x)break;return I},frame:()=>s,count:s.length}}const v={},h="public/gazetteer/countries.json";async function p(s){s||(s=h);let y=v[s];if(!y){try{const C=await(0,i.i)().get(s);y=f(s,C)}catch(C){console.warn("Error loading placename lookup",s,C),y={path:s,error:"Error loading URL",find:b=>{},examples:b=>[]}}v[s]=y}return y}},10871:(G,A,e)=>{"use strict";e.d(A,{cJ:()=>d,g6:()=>E});var n=e(94372),a=e(58309),o=e(34103),r=e(70274),i=e(1713),g=e(7094),u=e(31139);function l(v){return h=>{for(const p of h.fields)if(v(p,h,[]))return p}}function m(v){return h=>{for(const p of h.fields){if(v.has(p.name.toLowerCase()))return p;const s=(0,n.CZ)(p,h);if(v.has(s))return p}}}const c={mode:i.q1.Auto,geohash:m(new Set(["geohash"])),latitude:m(new Set(["latitude","lat"])),longitude:m(new Set(["longitude","lon","lng"])),h3:m(new Set(["h3"])),wkt:m(new Set(["wkt"])),lookup:m(new Set(["lookup"])),geo:v=>v.fields.find(h=>h.type===a.fS.geo)};async function d(v){const h={...c,mode:v?.mode??i.q1.Auto};switch(h.gazetteer=await(0,u.so)(v?.gazetteer),h.mode){case i.q1.Geohash:v?.geohash?h.geohash=l((0,o.sq)({id:r.mi.byName,options:v.geohash})):h.geohash=()=>{};break;case i.q1.Lookup:const p=v?.lookup?.length?(0,o.sq)({id:r.mi.byName,options:v.lookup}):(0,o.sq)({id:r.mi.byType,options:a.fS.string});h.lookup=l(p);break;case i.q1.Coords:v?.latitude?h.latitude=l((0,o.sq)({id:r.mi.byName,options:v.latitude})):h.latitude=()=>{},v?.longitude?h.longitude=l((0,o.sq)({id:r.mi.byName,options:v.longitude})):h.longitude=()=>{};break}return h}function f(v,h){const p={mode:h.mode??i.q1.Auto};if(p.mode===i.q1.Auto){if(p.geo=h.geo(v),p.geo)return p;if(p.latitude=h.latitude(v),p.longitude=h.longitude(v),p.latitude&&p.longitude)return p.mode=i.q1.Coords,p;if(p.geohash=h.geohash(v),p.geohash)return p.mode=i.q1.Geohash,p;if(p.lookup=h.lookup(v),p.lookup)return p.mode=i.q1.Lookup,p}switch(p.mode){case i.q1.Coords:p.latitude=h.latitude(v),p.longitude=h.longitude(v);break;case i.q1.Geohash:p.geohash=h.geohash(v);break;case i.q1.Lookup:p.lookup=h.lookup(v);break}return p}function E(v,h){const p=f(v,h);switch(p.mode){case i.q1.Auto:return p.geo?{field:p.geo}:{warning:"Unable to find location fields"};case i.q1.Coords:return p.latitude&&p.longitude?{field:(0,g.zS)(p.longitude,p.latitude),derived:!0,description:`${p.mode}: ${p.latitude.name}, ${p.longitude.name}`}:{warning:"Select latitude/longitude fields"};case i.q1.Geohash:return p.geohash?{field:(0,g.uZ)(p.geohash),derived:!0,description:`${p.mode}`}:{warning:"Select geohash field"};case i.q1.Lookup:return p.lookup?h.gazetteer?{field:(0,g.ie)(h.gazetteer,p.lookup),derived:!0,description:`${p.mode}: ${h.gazetteer.path}`}:{warning:"Gazetteer not found"}:{warning:"Select lookup field"}}return{warning:"unable to find geometry"}}},16826:(G,A,e)=>{"use strict";e.d(A,{E:()=>I});var n=e(56375),a=e(85960),o=e(53565),r=e(61751),i=e(6011),g=e(17338),u=e(92369),l=e(43183),m=e(29165),c=e(75682),d=e(63510),f=e(67954),E=e(95329),v=e(81154),h=e(94372),p=e(47257),s=e(74042),y=e(20519),C=e(27436),b=e(5999),S=e(61387),D=e(66681);const M=P=>(0,D.css)`
  padding: ${P.spacing(0,2)};
  font-size: ${P.typography.bodySmall.fontSize};
  color: ${P.colors.text.secondary};
  overflow: hidden;
  text-overflow: ellipsis;
`,T=({children:P})=>{const N=(0,p.wW)(M);return a.createElement("div",{className:N},P)};var R=e(27644);const O=({options:P,actions:N,onOptionsChange:F,hasTransformations:U,data:j,dataFrames:V,transformationOptions:_,selectedDataFrame:H,onDataFrameChange:z,downloadForExcel:K,toggleDownloadForExcel:Y})=>{const k=(0,p.wW)(R.i);let q=V;H===r.W.joinByField&&(q=j);const X=q.map((de,re)=>({value:re,label:`${(0,h.nf)(de)} (${re})`})),te=[..._,...X];function se(){let de="";if(!j)return de;const re=[];return H===r.W.joinByField?re.push((0,E.t)("dashboard.inspect-data.series-to-columns","Series joined by time")):j.length>1&&re.push((0,h.nf)(j[H])),(P.withTransforms||P.withFieldConfig)&&(P.withTransforms&&re.push((0,E.t)("dashboard.inspect-data.panel-transforms","Panel transforms")),P.withTransforms&&P.withFieldConfig,P.withFieldConfig&&re.push((0,E.t)("dashboard.inspect-data.formatted","Formatted data"))),K&&re.push((0,E.t)("dashboard.inspect-data.excel-header","Excel header")),re.join(", ")}return a.createElement("div",{className:k.dataDisplayOptions},a.createElement(S.t,{id:"Data options",index:0,title:(0,E.t)("dashboard.inspect-data.data-options","Data options"),headerElement:a.createElement(T,null,se()),isOpen:!1,actions:N},a.createElement("div",{className:k.options,"data-testid":"dataOptions"},a.createElement(s.wc,{spacing:"none"},j.length>1&&a.createElement(y.g,{label:(0,E.t)("dashboard.inspect-data.dataframe-label","Show data frame")},a.createElement(C.Ph,{options:te,value:H,onChange:z,width:30,"aria-label":(0,E.t)("dashboard.inspect-data.dataframe-aria-label","Select dataframe")})),a.createElement(s.Lh,null,U&&F&&a.createElement(y.g,{label:(0,E.t)("dashboard.inspect-data.transformations-label","Apply panel transformations"),description:(0,E.t)("dashboard.inspect-data.transformations-description","Table data is displayed with transformations defined in the panel Transform tab.")},a.createElement(b.r,{value:!!P.withTransforms,onChange:()=>F({...P,withTransforms:!P.withTransforms})})),F&&a.createElement(y.g,{label:(0,E.t)("dashboard.inspect-data.formatted-data-label","Formatted data"),description:(0,E.t)("dashboard.inspect-data.formatted-data-description","Table data is formatted with options defined in the Field and Override tabs.")},a.createElement(b.r,{id:"formatted-data-toggle",value:!!P.withFieldConfig,onChange:()=>F({...P,withFieldConfig:!P.withFieldConfig})})),a.createElement(y.g,{label:(0,E.t)("dashboard.inspect-data.download-excel-label","Download for Excel"),description:(0,E.t)("dashboard.inspect-data.download-excel-description","Adds header to CSV for use with Excel")},a.createElement(b.r,{id:"excel-toggle",value:K,onChange:Y})))))))};var x=e(70397);class I extends a.PureComponent{constructor(N){super(N),this.onExportLogsAsTxt=()=>{const{data:F,dataName:U,app:j}=this.props;(0,l.ff)("grafana_logs_download_logs_clicked",{app:j,format:"logs",area:"inspector"});const V=(0,v.aB)(F||[]);(0,x.Fc)(V,U)},this.onExportTracesAsJson=()=>{const{data:F,dataName:U,app:j}=this.props;if(F)for(const V of F){if(V.meta?.preferredVisualisationType!=="trace")continue;const _=(0,x.gb)(V,U+"-traces");(0,l.ff)("grafana_traces_download_traces_clicked",{app:j,grafana_version:f.config.buildInfo.version,trace_format:_,location:"inspector"})}},this.onExportServiceGraph=()=>{const{data:F,dataName:U,app:j}=this.props;(0,l.ff)("grafana_traces_download_service_graph_clicked",{app:j,grafana_version:f.config.buildInfo.version,location:"inspector"}),F&&(0,x.KO)(F,U)},this.onDataFrameChange=F=>{this.setState({transformId:F.value===r.W.joinByField?r.W.joinByField:r.W.noop,dataFrameIndex:typeof F.value=="number"?F.value:0,selectedDataFrame:F.value})},this.onToggleDownloadForExcel=()=>{this.setState(F=>({downloadForExcel:!F.downloadForExcel}))},this.state={selectedDataFrame:0,dataFrameIndex:0,transformId:r.W.noop,transformationOptions:L(),transformedData:N.data??[],downloadForExcel:!1}}componentDidUpdate(N,F){if(!this.props.data){this.setState({transformedData:[]});return}if(this.props.options.withTransforms){this.setState({transformedData:this.props.data});return}if(N.data!==this.props.data||F.transformId!==this.state.transformId){const U=this.state.transformationOptions.find(j=>j.value===this.state.transformId);if(U&&U.transformer.id!==r.W.noop){const j=this.state.selectedDataFrame,V=this.state.dataFrameIndex,_=(0,i.H)([U.transformer],this.props.data).subscribe(H=>{this.setState({transformedData:H,selectedDataFrame:j,dataFrameIndex:V},()=>_.unsubscribe())});return}this.setState({transformedData:this.props.data});return}}exportCsv(N,F){const{dataName:U}=this.props,{transformId:j}=this.state,V=N[this.state.dataFrameIndex];F&&(0,l.ff)("grafana_logs_download_clicked",{app:this.props.app,format:"csv"}),(0,x.gv)(V,U,{useExcelHeader:this.state.downloadForExcel},j)}getProcessedData(){const{options:N,panelPluginId:F,fieldConfig:U,timeZone:j}=this.props,V=this.state.transformedData;if(!N.withFieldConfig||!F||!U)return(0,g.Of)(V);const _=this.cleanTableConfigFromFieldConfig(F,U);return(0,g.SM)({data:V,theme:f.config.theme2,fieldConfig:_,timeZone:j,replaceVariables:H=>H})}cleanTableConfigFromFieldConfig(N,F){if(N!=="table")return F;F=(0,n.cloneDeep)(F),F.defaults.custom={};for(const U of F.overrides)for(const j of U.properties)if(j.id.startsWith("custom.")){const V=U.properties.indexOf(j);U.properties.slice(V,1)}return F}renderActions(N,F,U,j){return a.createElement(a.Fragment,null,a.createElement(m.zx,{variant:"primary",onClick:()=>this.exportCsv(N,F),size:"sm"},a.createElement(E.cC,{i18nKey:"dashboard.inspect-data.download-csv"},"Download CSV")),F&&a.createElement(m.zx,{variant:"primary",onClick:this.onExportLogsAsTxt,size:"sm"},a.createElement(E.cC,{i18nKey:"dashboard.inspect-data.download-logs"},"Download logs")),U&&a.createElement(m.zx,{variant:"primary",onClick:this.onExportTracesAsJson,size:"sm"},a.createElement(E.cC,{i18nKey:"dashboard.inspect-data.download-traces"},"Download traces")),j&&a.createElement(m.zx,{variant:"primary",onClick:this.onExportServiceGraph,size:"sm"},a.createElement(E.cC,{i18nKey:"dashboard.inspect-data.download-service"},"Download service graph")))}render(){const{isLoading:N,options:F,data:U,onOptionsChange:j,hasTransformations:V}=this.props,{dataFrameIndex:_,transformationOptions:H,selectedDataFrame:z,downloadForExcel:K}=this.state,Y=(0,R.S)();if(N)return a.createElement("div",null,a.createElement(c.$,{inline:!0})," Loading");const k=this.getProcessedData();if(!k||!k.length)return a.createElement("div",null,"No Data");const q=k[_]?_:0,X=k[q],te=k.some(re=>re?.meta?.preferredVisualisationType==="logs"),se=k.some(re=>re?.meta?.preferredVisualisationType==="trace"),de=k.some(re=>re?.meta?.preferredVisualisationType==="nodeGraph");return a.createElement("div",{className:Y.wrap,"aria-label":u.wl.components.PanelInspector.Data.content},a.createElement("div",{className:Y.toolbar},a.createElement(O,{data:U,hasTransformations:V,options:F,dataFrames:k,transformationOptions:H,selectedDataFrame:z,downloadForExcel:K,onOptionsChange:j,onDataFrameChange:this.onDataFrameChange,toggleDownloadForExcel:this.onToggleDownloadForExcel,actions:this.renderActions(k,te,se,de)})),a.createElement("div",{className:Y.content},a.createElement(o.Z,null,({width:re,height:fe})=>re===0?null:a.createElement(d.i,{width:re,height:fe,data:X,showTypeIcons:!0}))))}}function L(){return[{value:r.W.joinByField,label:(0,E.t)("dashboard.inspect-data.transformation","Series joined by time"),transformer:{id:r.W.joinByField,options:{byField:void 0}}}]}},73536:(G,A,e)=>{"use strict";e.d(A,{f:()=>v});var n=e(66681),a=e(85960),o=e(92369),r=e(95329),i=e(64282),g=e(58309),u=e(1930),l=e(47257);const m=({timeZone:p,name:s,stats:y})=>{const C=(0,l.l4)(),b=(0,l.wW)(d);return!y||!y.length?null:a.createElement("div",{className:b.wrapper},a.createElement("div",{className:"section-heading"},s),a.createElement("table",{className:"filter-table width-30"},a.createElement("tbody",null,y.map((S,D)=>a.createElement("tr",{key:`${S.displayName}-${D}`},a.createElement("td",null,S.displayName),a.createElement("td",{className:b.cell},c(S,p,C)))))))};function c(p,s,y){const C=(0,i.U)({field:{type:g.fS.number,config:p},theme:y,timeZone:s});return(0,u.zc)(C(p.value))}const d=p=>({wrapper:(0,n.css)`
    padding-bottom: ${p.spacing(2)};
  `,cell:(0,n.css)`
    text-align: right;
  `}),f=({name:p,traceIds:s})=>{const y=(0,l.wW)(E);return s.length===0?null:a.createElement("div",{className:y.wrapper},a.createElement("div",{className:"section-heading"},p),a.createElement("table",{className:"filter-table width-30"},a.createElement("tbody",null,s.map((C,b)=>a.createElement("tr",{key:`${C}-${b}`},a.createElement("td",null,C))))))},E=p=>({wrapper:(0,n.css)`
    padding-bottom: ${p.spacing(2)};
  `,cell:(0,n.css)`
    text-align: right;
  `}),v=({data:p,timeZone:s})=>{if(!p.request)return null;let y=[];const C=p.request.endTime?p.request.endTime-p.request.startTime:-1,b=p.timings?.dataProcessingTime||-1;let S=0;for(const O of p.series)S+=O.length;C>0&&y.push({displayName:(0,r.t)("dashboard.inspect-stats.request-time","Total request time"),value:C,unit:"ms"}),b>0&&y.push({displayName:(0,r.t)("dashboard.inspect-stats.processing-time","Data processing time"),value:b,unit:"ms"}),y.push({displayName:(0,r.t)("dashboard.inspect-stats.queries","Number of queries"),value:p.request.targets?.length??0}),y.push({displayName:(0,r.t)("dashboard.inspect-stats.rows","Total number rows"),value:S});let D=[];for(const O of p.series)O.meta&&O.meta.stats&&(D=D.concat(O.meta.stats));const M=(0,r.t)("dashboard.inspect-stats.table-title","Stats"),T=(0,r.t)("dashboard.inspect-stats.data-title","Data source stats"),R=(0,r.t)("dashboard.inspect-stats.data-traceids","Trace IDs");return a.createElement("div",{"aria-label":o.wl.components.PanelInspector.Stats.content,className:h},a.createElement(m,{timeZone:s,name:M,stats:y}),a.createElement(m,{timeZone:s,name:T,stats:D}),a.createElement(f,{name:R,traceIds:p.traceIds??[]}))},h=(0,n.css)`
  height: 100%;
  overflow-y: scroll;
`},97577:(G,A,e)=>{"use strict";e.d(A,{D:()=>h});var n=e(66681),a=e(85960),o=e(34269),r=e(23757),i=e(92369),g=e(90857),u=e(13086),l=e(29165),m=e(55855),c=e(79468),d=e(92904),f=e(95329),E=e(46783),v=e(27644);class h extends a.PureComponent{constructor(s){super(s),this.subs=new o.w0,this.setFormattedJson=y=>{this.formattedJson=y},this.getTextForClipboard=()=>JSON.stringify(this.formattedJson,null,2),this.onToggleExpand=()=>{this.setState(y=>({...y,allNodesExpanded:!this.state.allNodesExpanded}))},this.onToggleMocking=()=>{this.setState(y=>({...y,isMocking:!this.state.isMocking}))},this.getNrOfOpenNodes=()=>this.state.allNodesExpanded===null?3:this.state.allNodesExpanded?20:1,this.state={executedQueries:[],allNodesExpanded:null,isMocking:!1,mockedResponse:"",response:{}}}componentDidMount(){this.subs.add(E.ae.getInspectorStream().subscribe({next:s=>this.onDataSourceResponse(s)}))}componentDidUpdate(s){this.props.data!==s.data&&this.updateQueryList()}updateQueryList(){const{data:s}=this.props,y=s.series,C=[];if(y?.length){let b;y.forEach((S,D)=>{const M=S.meta?.executedQueryString;if(M){const T=S.refId||"?";b?.refId===T?(b.frames++,b.rows+=S.length):(b={refId:T,frames:0,rows:S.length,query:M},C.push(b))}})}this.setState({executedQueries:C})}componentWillUnmount(){this.subs.unsubscribe()}onDataSourceResponse(s){s.config?.hideFromInspector||(s={...s},s.headers&&delete s.headers,s.config&&(s.request=s.config,delete s.config,delete s.request.transformRequest,delete s.request.transformResponse,delete s.request.paramSerializer,delete s.request.jsonpCallbackParam,delete s.request.headers,delete s.request.requestId,delete s.request.inspect,delete s.request.retry,delete s.request.timeout),s.data&&(s.response=s.data,delete s.config,delete s.data,delete s.status,delete s.statusText,delete s.ok,delete s.url,delete s.redirected,delete s.type,delete s.$$config),this.setState({response:s}))}renderExecutedQueries(s){if(!s.length)return null;const y={refId:(0,n.css)`
        font-weight: ${g.config.theme.typography.weight.semibold};
        color: ${g.config.theme.colors.textBlue};
        margin-right: 8px;
      `};return a.createElement("div",null,s.map(C=>a.createElement(u.K,{key:C.refId,gap:1,direction:"column"},a.createElement("div",null,a.createElement("span",{className:y.refId},C.refId,":"),C.frames>1&&a.createElement("span",null,C.frames," frames, "),a.createElement("span",null,C.rows," rows")),a.createElement("pre",null,C.query))))}render(){const{allNodesExpanded:s,executedQueries:y,response:C}=this.state,{onRefreshQuery:b,data:S}=this.props,D=this.getNrOfOpenNodes(),M=(0,v.S)(),T=Object.keys(C).length>0,R=S.state===r.Gu.Loading;return a.createElement("div",{className:M.wrap},a.createElement("div",{"aria-label":i.wl.components.PanelInspector.Query.content},a.createElement("h3",{className:"section-heading"},"Query inspector"),a.createElement("p",{className:"small muted"},a.createElement(f.cC,{i18nKey:"inspector.query.description"},"Query inspector allows you to view raw request and response. To collect this data Grafana needs to issue a new query. Click refresh button below to trigger a new query."))),this.renderExecutedQueries(y),a.createElement("div",{className:M.toolbar},a.createElement(l.zx,{icon:"sync",onClick:b,"aria-label":i.wl.components.PanelInspector.Query.refreshButton},a.createElement(f.cC,{i18nKey:"inspector.query.refresh"},"Refresh")),T&&s&&a.createElement(l.zx,{icon:"minus",variant:"secondary",className:M.toolbarItem,onClick:this.onToggleExpand},a.createElement(f.cC,{i18nKey:"inspector.query.collapse-all"},"Collapse all")),T&&!s&&a.createElement(l.zx,{icon:"plus",variant:"secondary",className:M.toolbarItem,onClick:this.onToggleExpand},a.createElement(f.cC,{i18nKey:"inspector.query.expand-all"},"Expand all")),T&&a.createElement(m.m,{getText:this.getTextForClipboard,className:M.toolbarItem,icon:"copy",variant:"secondary"},a.createElement(f.cC,{i18nKey:"inspector.query.copy-to-clipboard"},"Copy to clipboard")),a.createElement("div",{className:"flex-grow-1"})),a.createElement("div",{className:M.content},R&&a.createElement(c.u,{text:"Loading query inspector..."}),!R&&T&&a.createElement(d.g,{json:C,open:D,onDidRender:this.setFormattedJson}),!R&&!T&&a.createElement("p",{className:"muted"},a.createElement(f.cC,{i18nKey:"inspector.query.no-data"},"No request and response collected yet. Hit refresh button"))))}}},27644:(G,A,e)=>{"use strict";e.d(A,{S:()=>r,i:()=>i});var n=e(66681),a=e(33808),o=e(67954);const r=(0,a.B)(()=>i(o.config.theme2)),i=g=>({wrap:(0,n.css)`
      display: flex;
      flex-direction: column;
      height: 100%;
      width: 100%;
      flex: 1 1 0;
      min-height: 0;
    `,toolbar:(0,n.css)`
      display: flex;
      width: 100%;
      flex-grow: 0;
      align-items: center;
      justify-content: flex-end;
      margin-bottom: ${g.v1.spacing.sm};
    `,toolbarItem:(0,n.css)`
      margin-left: ${g.v1.spacing.md};
    `,content:(0,n.css)`
      flex-grow: 1;
      height: 100%;
    `,editor:(0,n.css)`
      font-family: monospace;
      height: 100%;
      flex-grow: 1;
    `,viewer:(0,n.css)`
      overflow: scroll;
    `,dataFrameSelect:(0,n.css)`
      flex-grow: 2;
    `,leftActions:(0,n.css)`
      display: flex;
      flex-grow: 1;

      max-width: 85%;
      @media (max-width: 1345px) {
        max-width: 75%;
      }
    `,options:(0,n.css)`
      padding-top: ${g.v1.spacing.sm};
    `,dataDisplayOptions:(0,n.css)`
      flex-grow: 1;
      min-width: 300px;
      margin-right: ${g.v1.spacing.sm};
    `,selects:(0,n.css)`
      display: flex;
      > * {
        margin-right: ${g.v1.spacing.sm};
      }
    `})},48116:(G,A,e)=>{"use strict";e.d(A,{q:()=>n});var n=(a=>(a.Data="data",a.Meta="meta",a.Error="error",a.Stats="stats",a.JSON="json",a.Query="query",a.Help="help",a))(n||{})},70397:(G,A,e)=>{"use strict";e.d(A,{Fc:()=>c,KO:()=>f,gb:()=>E,gv:()=>d});var n=e(78344),a=e.n(n),o=e(12537),r=e(61751),i=e(86346),g=e(38070),u=e(85916),l=e(29262),m=e(67824);function c(v,h){let p="";v.meta?.forEach(C=>{const b=`${C.label}: ${JSON.stringify(C.value)}
`;p=p+b}),p=p+`

`,v.rows.forEach(C=>{const b=(0,o.dq)(C.timeEpochMs,{defaultWithMS:!0})+"	"+C.entry+`
`;p=p+b});const s=new Blob([p],{type:"text/plain;charset=utf-8"}),y=`${h}-logs-${(0,o.dq)(new Date)}.txt`;a()(s,y)}function d(v,h,p,s=r.W.noop){const y=(0,i.MJ)([v],p),C=new Blob([String.fromCharCode(65279),y],{type:"text/csv;charset=utf-8"}),b=s!==r.W.noop?"-as-"+s.toLocaleLowerCase():"",S=`${h}-data${b}-${(0,o.dq)(new Date)}.csv`;a()(C,S)}function f(v,h){const p=new Blob([JSON.stringify(v)],{type:"application/json"}),s=`${h}-${(0,o.dq)(new Date)}.json`;a()(p,s)}function E(v,h){let p="otlp";switch(v.meta?.custom?.traceFormat){case"jaeger":{let s=(0,u.c6)(new g.v(v));f(s,h),p="jaeger";break}case"zipkin":{let s=(0,m.H)(new g.v(v));f(s,h),p="zipkin";break}case"otlp":default:{let s=(0,l.g9)(new g.v(v));f(s,h);break}}return p}},29410:(G,A,e)=>{"use strict";e.d(A,{w:()=>o});var n=e(47475),a=e(60484);function o(i){let g="";try{g=JSON.stringify(i,r(),2)}catch(u){u instanceof Error&&(u.toString().includes("RangeError")||u.toString().includes("allocation size overflow"))?a.Z.emit(n.SI.alertError,[u.toString(),"Cannot display JSON, the object is too big."]):a.Z.emit(n.SI.alertError,[u instanceof Error?u.toString():u])}return g}function r(){const i=new WeakSet;return(g,u)=>{if(g==="__dataContext"||g==="__sceneObject")return"Filtered out in JSON serialization";if(typeof u=="object"&&u!==null){if(i.has(u))return;i.add(u)}return u}}},84003:(G,A,e)=>{"use strict";e.d(A,{GY:()=>g,MA:()=>i,nW:()=>r});var n=e(85445),a=e(49683),o=e(95162);const r=(0,o.createAsyncThunk)("users/fetchInvitees",async()=>a.Vt.hasPermission(o.AccessControlAction.OrgUsersAdd)?await(0,n.i)().get("/api/org/invites"):[]),i=(0,o.createAsyncThunk)("users/addInvitee",async(u,{dispatch:l})=>{await(0,n.i)().post("/api/org/invites",u),await l(r())}),g=(0,o.createAsyncThunk)("users/revokeInvite",async u=>(await(0,n.i)().patch(`/api/org/invites/${u}/revoke`,{}),u))},8538:(G,A,e)=>{"use strict";e.d(A,{ZP:()=>l,selectors:()=>r});var n=e(20079),a=e(84003);const o=(0,n.HF)({selectId:m=>m.code}),r=o.getSelectors(),i=o.getInitialState({status:"idle"}),l={invites:(0,n.oM)({name:"invites",initialState:i,reducers:{},extraReducers:m=>{m.addCase(a.nW.pending,c=>{c.status="loading"}).addCase(a.nW.fulfilled,(c,{payload:d})=>{o.setAll(c,d),c.status="succeeded"}).addCase(a.nW.rejected,c=>{c.status="failed"}).addCase(a.GY.fulfilled,(c,{payload:d})=>{o.removeOne(c,d),c.status="succeeded"})}}).reducer}},17027:(G,A,e)=>{"use strict";e.d(A,{T:()=>E,c:()=>v});var n=e(85960),a=e(27160),o=e(81445),r=e(85445),i=e(20519),g=e(24956),u=e(7288),l=e(29165),m=e(9561),c=e(95329),d=e(1706),f=e(90499);const E=({panel:h,initialFolderUid:p,onDismiss:s})=>{const[y,C]=(0,n.useState)(p),[b,S]=(0,n.useState)(h.title),[D,M]=(0,n.useState)(h.title),[T,R]=(0,n.useState)(!1);console.log("folderUid",y),(0,n.useEffect)(()=>R(!0),[b]),(0,a.Z)(()=>M(b),350,[b]);const{saveLibraryPanel:O}=(0,f.E)(),x=(0,n.useCallback)(()=>{h.libraryPanel={uid:"",name:b},O(h,y).then(P=>{(0,r.kW)(P)?h.libraryPanel=void 0:s?.()})},[h,b,y,s,O]),I=(0,o.Z)(async()=>{try{return!(await(0,d.jh)(b)).some(P=>P.folderUid===y)}catch(P){return(0,r.kW)(P)&&(P.isHandled=!0),!0}finally{R(!1)}},[D,y]);console.log("isValidName:",I);const L=!I?.value&&I.value!==void 0&&b===D&&!T;return n.createElement(n.Fragment,null,n.createElement(i.g,{label:(0,c.t)("library-panel.add-modal.name","Library panel name"),invalid:L,error:L?(0,c.t)("library-panel.add-modal.error","Library panel with this name already exists"):""},n.createElement(g.I,{id:"share-panel-library-panel-name-input",name:"name",value:b,onChange:P=>S(P.currentTarget.value)})),n.createElement(i.g,{label:(0,c.t)("library-panel.add-modal.folder","Save in folder"),description:(0,c.t)("library-panel.add-modal.folder-description","Library panel permissions are derived from the folder permissions")},n.createElement(m.Fz,{onChange:({uid:P})=>C(P),initialFolderUid:p,inputId:"share-panel-library-panel-folder-picker"})),n.createElement(u.u.ButtonRow,null,n.createElement(l.zx,{variant:"secondary",onClick:s,fill:"outline"},n.createElement(c.cC,{i18nKey:"library-panel.add-modal.cancel"},"Cancel")),n.createElement(l.zx,{onClick:x,disabled:L},n.createElement(c.cC,{i18nKey:"library-panel.add-modal.create"},"Create library panel"))))},v=({isOpen:h=!1,panel:p,initialFolderUid:s,...y})=>n.createElement(u.u,{title:"Create library panel",isOpen:h,onDismiss:y.onDismiss},n.createElement(E,{panel:p,initialFolderUid:s,onDismiss:y.onDismiss}))},53685:(G,A,e)=>{"use strict";e.d(A,{i:()=>o});var n=e(85960),a=e(77980);const o=({isOpen:r,onConfirm:i,onDismiss:g})=>n.createElement(a.s,{title:"Do you really want to unlink this panel?",icon:"question-circle",body:`If you unlink this panel, you will be able to edit it without affecting any other dashboards.
            However, once you make a change you will not be able to revert to its original reusable panel.`,confirmText:"Yes, unlink",onConfirm:()=>{i(),g()},onDismiss:g,isOpen:r})},12404:(G,A,e)=>{"use strict";e.d(A,{V:()=>n});function n(a){return!!a.libraryPanel?.uid}},1706:(G,A,e)=>{"use strict";e.d(A,{E8:()=>E,Ef:()=>f,Kq:()=>m,Mh:()=>u,Ob:()=>c,Pq:()=>g,UO:()=>d,jh:()=>l});var n=e(81838),a=e(34166),o=e(27008),r=e(46783),i=e(49950);async function g({searchString:v="",perPage:h=100,page:p=1,excludeUid:s="",sortDirection:y="",typeFilter:C=[],folderFilterUIDs:b=[]}={}){const S=new URLSearchParams;S.append("searchString",v),S.append("sortDirection",y),S.append("typeFilter",C.join(",")),S.append("folderFilterUIDs",b.join(",")),S.append("excludeUid",s),S.append("perPage",h.toString(10)),S.append("page",p.toString(10)),S.append("kind",i.V.Panel.toString(10));const{result:D}=await(0,r.i)().get(`/api/library-elements?${S.toString()}`);return D}async function u(v,h=!1){const p=await(0,n.n)((0,r.i)().fetch({method:"GET",url:`/api/library-elements/${v}`,showSuccessAlert:!h,showErrorAlert:!h})),{result:s}=p.data,y=new o.f({...a.Ql,schemaVersion:35,panels:[s.model]}),{scopedVars:C,...b}=y.panels[0].getSaveModel();return y.destroy(),{...s,model:b}}async function l(v){const{result:h}=await(0,r.i)().get(`/api/library-elements/name/${v}`);return h}async function m(v,h){const{result:p}=await(0,r.i)().post("/api/library-elements",{folderUid:h,name:v.libraryPanel.name,model:v,kind:i.V.Panel});return p}async function c(v){const{libraryPanel:h,...p}=v,{uid:s,name:y,version:C,folderUid:b}=h,S=i.V.Panel,{result:D}=await(0,r.i)().patch(`/api/library-elements/${s}`,{folderUid:b,name:y,model:p,version:C,kind:S});return D}function d(v){return(0,r.i)().delete(`/api/library-elements/${v}`)}async function f(v){const{result:h}=await(0,r.i)().get(`/api/library-elements/${v}/connections`);return h}async function E(v){const h=await f(v);return h.length===0?[]:await(0,r.i)().search({dashboardUIDs:h.map(s=>s.connectionUid)})}},49950:(G,A,e)=>{"use strict";e.d(A,{V:()=>n});var n=(o=>(o[o.Panel=1]="Panel",o))(n||{}),a=(o=>(o[o.Dashboard=1]="Dashboard",o))(a||{})},90499:(G,A,e)=>{"use strict";e.d(A,{E:()=>c});var n=e(31622),a=e(85445),o=e(93991),r=e(95329),i=e(1706);async function g(d,f){const E=u(d),v=await m(E,f);return l(d,v),v}function u(d){let{scopedVars:f,...E}=d.getSaveModel();return E={libraryPanel:{name:d.title,uid:void 0},...E},E}function l(d,f){d.restoreModel({...f.model,configRev:0,libraryPanel:f,title:d.title}),d.hasSavedPanelEditChange=!0,d.refresh()}function m(d,f){return d.libraryPanel?d.libraryPanel&&d.libraryPanel.uid===""?(0,i.Kq)(d,f):(0,i.Ob)(d):Promise.reject()}const c=()=>{const d=(0,o.iG)(),[f,E]=(0,n.default)(async(v,h)=>{try{const p=await g(v,h);return d.success((0,r.t)("library-panels.save.success","Library panel saved")),p}catch(p){throw(0,a.kW)(p)&&(p.isHandled=!0,d.error((0,r.t)("library-panels.save.error",'Error saving library panel: "{{errorMsg}}"',{errorMsg:p.message??p.data.message}))),p}},[]);return{state:f,saveLibraryPanel:E}}},60829:(G,A,e)=>{"use strict";e.d(A,{H:()=>C});var n=e(90308),a=e(68898),o=e(47475),r=e(78942),i=e(91),g=e(49683),u=e(14914),l=e(93657),m=e(66681),c=e(85960),d=e(47257),f=e(7288),E=e(29165),v=(b=>(b.Saved="saved",b.EditingStarted="editing-started",b.EditingCanceled="editing-cancelled",b.Deleted="deleted",b))(v||{});function h({onDismiss:b,event:S}){const D=(0,d.wW)(p),M=()=>{if(S?.action===v.Deleted){i.E1.push("/");return}C.reloadPage(),b()};return c.createElement(f.u,{isOpen:!0,title:"Dashboard changed",icon:"copy",onDismiss:b,onClickBackdrop:()=>{},className:D.modal},c.createElement("div",{className:D.description},"The dashboad has been updated by another session. Do you want to continue editing or discard your local changes?"),c.createElement(f.u.ButtonRow,null,c.createElement(E.zx,{onClick:b,variant:"secondary",fill:"outline"},"Continue editing"),c.createElement(E.zx,{onClick:M,variant:"destructive"},"Discard local changes")))}const p=b=>({modal:(0,m.css)({width:"600px"}),description:(0,m.css)({color:b.colors.text.secondary,paddingBottom:b.spacing(1)})}),s=(0,n.Z)();class y{constructor(){this.editing=!1,this.observer={next:S=>{if((0,a.se)(S)&&this.editing&&S.state===a.yS.Connected&&this.sendEditingState(),(0,a.RL)(S)){if(S.message.sessionId===s)return;const{action:D}=S.message;switch(D){case v.EditingStarted:case v.Saved:{if(this.ignoreSave){this.ignoreSave=!1;return}const M=(0,l.h4)().getCurrent();if(M?.uid!==S.message.uid){console.log("dashboard event for different dashboard?",S,M);return}const T=this.editing||M.hasUnsavedChanges();if(D===v.Saved)T?g.h$.publish(new u.Dn({component:h,props:{event:S}})):(g.h$.emit(o.SI.alertSuccess,["Dashboard updated"]),this.reloadPage());else if(T&&D===v.EditingStarted&&!this.hasSeenNotice){const R=S.message,O=this.getRecentEditingEvent();(!O||O.message!==R.message)&&(this.hasSeenNotice=!0,g.h$.emit(o.SI.alertWarning,["Another session is editing this dashboard",R.message])),this.lastEditing=R}return}}}}}}setEditingState(S){const D=this.editing=S;this.editing=S,this.hasSeenNotice=!1,D&&g.Vt.isEditor&&this.sendEditingState()}sendEditingState(){const{channel:S,uid:D}=this;S&&D&&(0,r.gj)().publish(S,{sessionId:s,uid:D,action:this.editing?v.EditingStarted:v.EditingCanceled,timestamp:Date.now()})}watch(S){const D=(0,r.gj)();D&&S!==this.uid&&(this.channel={scope:a.z.Grafana,namespace:"dashboard",path:`uid/${S}`},this.leave(),S&&(this.subscription=D.getStream(this.channel).subscribe(this.observer)),this.uid=S)}leave(){this.subscription&&this.subscription.unsubscribe(),this.subscription=void 0,this.uid=void 0}ignoreNextSave(){this.ignoreSave=!0}getRecentEditingEvent(){return this.lastEditing&&this.lastEditing.timestamp&&Date.now()-this.lastEditing.timestamp>5e3&&(this.lastEditing=void 0),this.lastEditing}reloadPage(){i.E1.reload()}}const C=new y},26233:(G,A,e)=>{"use strict";e.d(A,{A1:()=>o,g0:()=>a,iL:()=>g});var n=e(45878),a=(u=>(u.NewValuesSameSchema="NewValuesSameSchema",u.FullFrame="FullFrame",u))(a||{});const o=(u,l)=>"type"in u&&u.type===l,r=Object.values(a),i=u=>"type"in u&&r.includes(u.type),g=u=>(0,n.aY)(u)&&"packetInfo"in u},89877:(G,A,e)=>{"use strict";e.d(A,{j:()=>i});var n=e(66681),a=e(85960),o=e(47257);const r=["level","lvl","filename"],i=({labels:u})=>{const l=(0,o.wW)(g),m=Object.keys(u).filter(c=>!c.startsWith("_")&&!r.includes(c));return m.length===0?a.createElement("span",{className:(0,n.cx)([l.logsLabels])},a.createElement("span",{className:(0,n.cx)([l.logsLabel])},"(no unique labels)")):a.createElement("span",{className:(0,n.cx)([l.logsLabels])},m.sort().map(c=>{const d=u[c];if(!d)return;const f=`${c}: ${d}`;return a.createElement("span",{key:c,className:(0,n.cx)([l.logsLabel])},a.createElement("span",{className:(0,n.cx)([l.logsLabelValue]),title:f},d))}))},g=u=>({logsLabels:(0,n.css)`
      display: flex;
      flex-wrap: wrap;
      font-size: ${u.typography.size.xs};
    `,logsLabel:(0,n.css)`
      label: logs-label;
      display: flex;
      padding: ${u.spacing(0,.25)};
      background-color: ${u.colors.background.secondary};
      border-radius: ${u.shape.radius.default};
      margin: ${u.spacing(.125,.5,0,0)};
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:(0,n.css)`
      label: logs-label__value;
      display: inline-block;
      max-width: ${u.spacing(25)};
      text-overflow: ellipsis;
      overflow: hidden;
    `})},62793:(G,A,e)=>{"use strict";e.d(A,{Q:()=>m});var n=e(45033),a=e(85960),o=e(83795),r=e.n(o),i=e(2119),g=e(47257);function u(c,d){return d.split(/;\s*/).reduce((f,E)=>{if(E==="color:rgba(0,0,0,0.5)")return{color:c.colors.text.secondary};const v=E.match(/([^:\s]+)\s*:\s*(.+)/);if(v&&v[1]&&v[2]){const h=v[1].replace(/-([a-z])/g,(p,s)=>s.toUpperCase());f[h]=v[2]}return f},{})}class l extends a.PureComponent{constructor(){super(...arguments),this.state={chunks:[],prevValue:""}}static getDerivedStateFromProps(d,f){return d.value===f.prevValue?null:{chunks:n.ZP.parse(d.value).spans.map(v=>v.css?{style:u(d.theme,v.css),text:v.text}:{text:v.text}),prevValue:d.value}}render(){const{chunks:d}=this.state;return d.map((f,E)=>{const v=this.props.highlight?.searchWords?a.createElement(r(),{key:E,textToHighlight:f.text,searchWords:this.props.highlight.searchWords,findChunks:i.Xt,highlightClassName:this.props.highlight.highlightClassName}):f.text;return f.style?a.createElement("span",{key:E,style:f.style,"data-testid":"ansiLogLine"},v):v})}}const m=(0,g.HE)(l);m.displayName="LogMessageAnsi"},74277:(G,A,e)=>{"use strict";e.d(A,{t:()=>r});var n=e(85960),a=e(75064),o=e(55855);const r=n.memo(({logText:i,onOpenContext:g,onPermalinkClick:u,onPinLine:l,onUnpinLine:m,pinned:c,row:d,showContextToggle:f,styles:E,mouseIsOver:v,onBlur:h})=>{const p=f?f(d):!1,s=(0,n.useCallback)(S=>{S.stopPropagation()},[]),y=(0,n.useCallback)(S=>{S.stopPropagation(),g(d)},[g,d]),C=(0,n.useCallback)(S=>{!S.currentTarget.contains(S.relatedTarget)&&h&&h()},[h]),b=(0,n.useCallback)(()=>i,[i]);return n.createElement("span",{className:`log-row-menu ${E.rowMenu}`,onClick:s,onBlur:C},c&&!v&&n.createElement(a.h,{className:E.unPinButton,size:"md",name:"gf-pin",onClick:()=>m&&m(d),tooltip:"Unpin line",tooltipPlacement:"top","aria-label":"Unpin line",tabIndex:0}),v&&n.createElement(n.Fragment,null,p&&n.createElement(a.h,{size:"md",name:"gf-show-context",onClick:y,tooltip:"Show context",tooltipPlacement:"top","aria-label":"Show context",tabIndex:0}),n.createElement(o.m,{className:E.copyLogButton,icon:"copy",variant:"secondary",fill:"text",size:"md",getText:b,tooltip:"Copy to clipboard",tooltipPlacement:"top",tabIndex:0}),c&&m&&n.createElement(a.h,{className:E.unPinButton,size:"md",name:"gf-pin",onClick:()=>m&&m(d),tooltip:"Unpin line",tooltipPlacement:"top","aria-label":"Unpin line",tabIndex:0}),!c&&l&&n.createElement(a.h,{className:E.unPinButton,size:"md",name:"gf-pin",onClick:()=>l&&l(d),tooltip:"Pin line",tooltipPlacement:"top","aria-label":"Pin line",tabIndex:0}),u&&d.rowId!==void 0&&d.uid&&n.createElement(a.h,{tooltip:"Copy shortlink","aria-label":"Copy shortlink",tooltipPlacement:"top",size:"md",name:"share-alt",onClick:()=>u(d),tabIndex:0})))});r.displayName="LogRowMenuCell"},27280:(G,A,e)=>{"use strict";e.d(A,{n:()=>u,r:()=>c});var n=e(85960),a=e(83795),o=e.n(a),r=e(2119),i=e(62793),g=e(74277);const u=1e5,l=({hasAnsi:d,entry:f,highlights:E,styles:v})=>{const h=E&&E.length>0&&E[0]&&E[0].length>0&&f.length<u,p=E??[];if(d){const s=h?{searchWords:p,highlightClassName:v.logsRowMatchHighLight}:void 0;return n.createElement(i.Q,{value:f,highlight:s})}else if(h)return n.createElement(o(),{textToHighlight:f,searchWords:p,findChunks:r.Xt,highlightClassName:v.logsRowMatchHighLight});return n.createElement(n.Fragment,null,f)},m=(d,f)=>{if(f)try{return JSON.stringify(JSON.parse(d),void 0,2)}catch{return d}return d},c=n.memo(d=>{const{row:f,wrapLogMessage:E,prettifyLogMessage:v,showContextToggle:h,styles:p,onOpenContext:s,onPermalinkClick:y,onUnpinLine:C,onPinLine:b,pinned:S,mouseIsOver:D,onBlur:M}=d,{hasAnsi:T,raw:R}=f,O=(0,n.useMemo)(()=>m(R,v),[R,v]),x=(0,n.useMemo)(()=>D||S,[D,S]);return n.createElement(n.Fragment,null,n.createElement("td",{className:p.logsRowMessage},n.createElement("div",{className:E?p.positionRelative:p.horizontalScroll},n.createElement("button",{className:`${p.logLine} ${p.positionRelative}`},n.createElement(l,{hasAnsi:T,entry:O,highlights:f.searchWords,styles:p})))),n.createElement("td",{className:`log-row-menu-cell ${p.logRowMenuCell}`},x&&n.createElement(g.t,{logText:O,row:f,showContextToggle:h,onOpenContext:s,onPermalinkClick:y,onPinLine:b,onUnpinLine:C,pinned:S,styles:p,mouseIsOver:D,onBlur:M})))});c.displayName="LogRowMessage"},46063:(G,A,e)=>{"use strict";e.d(A,{w:()=>fe});var n=e(66681),a=e(84513),o=e(85960),r=e(81223),i=e(1713),g=e(90857),u=e(47257),l=e(43183),m=e(54635),c=e(19593);const d=({x:ie,y:oe,onClickFilterValue:ue,onClickFilterOutValue:me,selection:ge,row:Ue,close:De})=>{const Pe=(0,o.useRef)(null),ye=(0,u.wW)(E);return(0,o.useEffect)(()=>{function nt(ct){ct.key==="Escape"&&De()}return document.addEventListener("keyup",nt),()=>{document.removeEventListener("keyup",nt)}},[De]),ue||me?o.createElement("div",{className:ye.menu,style:{top:oe,left:ie}},o.createElement(m.v,{ref:Pe},o.createElement(m.v.Item,{label:"Copy selection",onClick:()=>{(0,c.zp)(ge,Pe),De(),f("copy",ge.length,Ue.datasourceType)}}),ue&&o.createElement(m.v.Item,{label:"Add as line contains filter",onClick:()=>{ue(ge,Ue.dataFrame.refId),De(),f("line_contains",ge.length,Ue.datasourceType)}}),me&&o.createElement(m.v.Item,{label:"Add as line does not contain filter",onClick:()=>{me(ge,Ue.dataFrame.refId),De(),f("line_does_not_contain",ge.length,Ue.datasourceType)}}))):null};function f(ie,oe,ue){(0,l.ff)("grafana_explore_logs_popover_menu",{action:ie,selectionLength:oe,datasourceType:ue||"unknown"})}const E=ie=>({menu:(0,n.css)({position:"absolute",zIndex:ie.zIndex.modal})});class v{constructor(){this.seen=new Set,this.count=0}getKey(oe){this.count+=1;const ue=`k_${oe}`;return this.seen.has(ue)?`i_${this.count}`:(this.seen.add(ue),ue)}}var h=e(56375),p=e(12537),s=e(14607),y=e(97666),C=e(512),b=e(55855),S=e(75064),D=e(77937),M=e(81154),T=e(33808);const R=ie=>({logsStatsRow:(0,n.css)`
    label: logs-stats-row;
    margin: ${parseInt(ie.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:(0,n.css)`
    label: logs-stats-row--active;
    color: ${ie.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:(0,n.css)`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:(0,n.css)`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:(0,n.css)`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: ${ie.spacing(.75)};
  `,logsStatsRowPercent:(0,n.css)`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: ${ie.spacing(.75)};
    width: ${ie.spacing(4.5)};
  `,logsStatsRowBar:(0,n.css)`
    label: logs-stats-row__bar;
    height: ${ie.spacing(.5)};
    overflow: hidden;
    background: ${ie.colors.text.disabled};
  `,logsStatsRowInnerBar:(0,n.css)`
    label: logs-stats-row__innerbar;
    height: ${ie.spacing(.5)};
    overflow: hidden;
    background: ${ie.colors.primary.main};
  `}),O=({active:ie,count:oe,proportion:ue,value:me})=>{const ge=(0,u.wW)(R),Ue=`${Math.round(ue*100)}%`,De={width:Ue},Pe=ie?(0,n.cx)([ge.logsStatsRow,ge.logsStatsRowActive]):(0,n.cx)([ge.logsStatsRow]);return o.createElement("div",{className:Pe},o.createElement("div",{className:(0,n.cx)([ge.logsStatsRowLabel])},o.createElement("div",{className:(0,n.cx)([ge.logsStatsRowValue]),title:me},me),o.createElement("div",{className:(0,n.cx)([ge.logsStatsRowCount])},oe),o.createElement("div",{className:(0,n.cx)([ge.logsStatsRowPercent])},Ue)),o.createElement("div",{className:(0,n.cx)([ge.logsStatsRowBar])},o.createElement("div",{className:(0,n.cx)([ge.logsStatsRowInnerBar]),style:De})))};O.displayName="LogLabelStatsRow";const x=5,I=(0,T.B)(ie=>({logsStats:(0,n.css)`
      label: logs-stats;
      background: inherit;
      color: ${ie.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:(0,n.css)`
      label: logs-stats__header;
      border-bottom: 1px solid ${ie.colors.border.medium};
      display: flex;
    `,logsStatsTitle:(0,n.css)`
      label: logs-stats__title;
      font-weight: ${ie.typography.fontWeightMedium};
      padding-right: ${ie.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:(0,n.css)`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:(0,n.css)`
      label: logs-stats__body;
      padding: 5px 0px;
    `}));class L extends o.PureComponent{render(){const{label:oe,rowCount:ue,stats:me,value:ge,theme:Ue,isLabel:De}=this.props,Pe=I(Ue),ye=me.slice(0,x);let Te=ye.find(Ve=>Ve.value===ge),nt=me.slice(x);const ct=!Te;ct&&(Te=nt.find(Ve=>Ve.value===ge),nt=nt.filter(Ve=>Ve.value!==ge));const he=nt.reduce((Ve,Oe)=>Ve+Oe.count,0),Me=ye.reduce((Ve,Oe)=>Ve+Oe.count,0)+he,He=he/Me;return o.createElement("div",{className:Pe.logsStats,"data-testid":"logLabelStats"},o.createElement("div",{className:Pe.logsStatsHeader},o.createElement("div",{className:Pe.logsStatsTitle},oe,": ",Me," of ",ue," rows have that ",De?"label":"field")),o.createElement("div",{className:Pe.logsStatsBody},ye.map(Ve=>o.createElement(O,{key:Ve.value,...Ve,active:Ve.value===ge})),ct&&Te&&o.createElement(O,{key:Te.value,...Te,active:!0}),he>0&&o.createElement(O,{key:"__OTHERS__",count:he,value:"Other",proportion:He})))}}const P=(0,u.HE)(L);P.displayName="LogLabelStats";var N=e(51994);const F=(0,a.Z)(ie=>({wordBreakAll:(0,n.css)`
      label: wordBreakAll;
      word-break: break-all;
    `,copyButton:(0,n.css)`
      & > button {
        color: ${ie.colors.text.secondary};
        padding: 0;
        justify-content: center;
        border-radius: ${ie.shape.radius.circle};
        height: ${ie.spacing(ie.components.height.sm)};
        width: ${ie.spacing(ie.components.height.sm)};
        svg {
          margin: 0;
        }

        span > div {
          top: -5px;
          & button {
            color: ${ie.colors.success.main};
          }
        }
      }
    `,adjoiningLinkButton:(0,n.css)`
      margin-left: ${ie.spacing(1)};
    `,wrapLine:(0,n.css)`
      label: wrapLine;
      white-space: pre-wrap;
    `,logDetailsStats:(0,n.css)`
      padding: 0 ${ie.spacing(1)};
    `,logDetailsValue:(0,n.css)`
      display: flex;
      align-items: center;
      line-height: 22px;

      .log-details-value-copy {
        visibility: hidden;
      }
      &:hover {
        .log-details-value-copy {
          visibility: visible;
        }
      }
    `,buttonRow:(0,n.css)`
      display: flex;
      flex-direction: row;
      gap: ${ie.spacing(.5)};
      margin-left: ${ie.spacing(.5)};
    `}));class U extends o.PureComponent{constructor(){super(...arguments),this.state={showFieldsStats:!1,fieldCount:0,fieldStats:null},this.showField=()=>{const{onClickShowField:oe,parsedKeys:ue,row:me}=this.props;oe&&oe(ue[0]),(0,l.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:me.datasourceType,logRowUid:me.uid,type:"enable"})},this.hideField=()=>{const{onClickHideField:oe,parsedKeys:ue,row:me}=this.props;oe&&oe(ue[0]),(0,l.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:me.datasourceType,logRowUid:me.uid,type:"disable"})},this.isFilterLabelActive=async()=>{const{isFilterLabelActive:oe,parsedKeys:ue,parsedValues:me,row:ge}=this.props;return oe?await oe(ue[0],me[0],ge.dataFrame?.refId):!1},this.filterLabel=()=>{const{onClickFilterLabel:oe,parsedKeys:ue,parsedValues:me,row:ge}=this.props;oe&&oe(ue[0],me[0],(0,M.Tx)(ge)||void 0),(0,l.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:ge.datasourceType,filterType:"include",logRowUid:ge.uid})},this.filterOutLabel=()=>{const{onClickFilterOutLabel:oe,parsedKeys:ue,parsedValues:me,row:ge}=this.props;oe&&oe(ue[0],me[0],(0,M.Tx)(ge)||void 0),(0,l.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:ge.datasourceType,filterType:"exclude",logRowUid:ge.uid})},this.updateStats=()=>{const{getStats:oe}=this.props,ue=oe(),me=ue?ue.reduce((ge,Ue)=>ge+Ue.count,0):0;(!(0,h.isEqual)(this.state.fieldStats,ue)||me!==this.state.fieldCount)&&this.setState({fieldStats:ue,fieldCount:me})},this.showStats=()=>{const{isLabel:oe,row:ue,app:me}=this.props,{showFieldsStats:ge}=this.state;ge||this.updateStats(),this.toggleFieldsStats(),(0,l.ff)("grafana_explore_logs_log_details_stats_clicked",{dataSourceType:ue.datasourceType,fieldType:oe?"label":"detectedField",type:ge?"close":"open",logRowUid:ue.uid,app:me})}}componentDidUpdate(){this.state.showFieldsStats&&this.updateStats()}toggleFieldsStats(){this.setState(oe=>({showFieldsStats:!oe.showFieldsStats}))}generateClipboardButton(oe){const{theme:ue}=this.props,me=F(ue);return o.createElement("div",{className:`log-details-value-copy ${me.copyButton}`},o.createElement(b.m,{getText:()=>oe,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"md"}))}generateMultiVal(oe,ue){return o.createElement("table",null,o.createElement("tbody",null,oe?.map((me,ge)=>o.createElement("tr",{key:`${me}-${ge}`},o.createElement("td",null,me,ue&&me!==""&&this.generateClipboardButton(me))))))}render(){const{theme:oe,parsedKeys:ue,parsedValues:me,isLabel:ge,links:Ue,displayedFields:De,wrapLogMessage:Pe,onClickFilterLabel:ye,onClickFilterOutLabel:Te,disableActions:nt,row:ct}=this.props,{showFieldsStats:he,fieldStats:xe,fieldCount:Me}=this.state,He=F(oe),Ve=(0,N.h)(oe),Oe=ue==null?!1:ue.length===1,Ne=me==null?!1:me.length===1,_e=!nt&&ye&&Te,qe=ct.dataFrame?.refId?` in query ${ct.dataFrame?.refId}`:"",rt=!Ne&&me!=null&&!me.every(Je=>Je===""),mt=De&&ue!=null&&De.includes(ue[0])?o.createElement(S.h,{variant:"primary",tooltip:"Hide this field",name:"eye",onClick:this.hideField}):o.createElement(S.h,{tooltip:"Show this field instead of the message",name:"eye",onClick:this.showField});return o.createElement(o.Fragment,null,o.createElement("tr",{className:Ve.logDetailsValue},o.createElement("td",{className:Ve.logsDetailsIcon},o.createElement("div",{className:He.buttonRow},_e&&o.createElement(o.Fragment,null,o.createElement(j,{name:"search-plus",onClick:this.filterLabel,isActive:this.isFilterLabelActive,tooltipSuffix:qe}),o.createElement(S.h,{name:"search-minus",tooltip:`Filter out value${qe}`,onClick:this.filterOutLabel})),!nt&&De&&mt,!nt&&o.createElement(S.h,{variant:he?"primary":"secondary",name:"signal",tooltip:"Ad-hoc statistics",className:"stats-button",disabled:!Oe,onClick:this.showStats}))),o.createElement("td",{className:Ve.logDetailsLabel},Oe?ue[0]:this.generateMultiVal(ue)),o.createElement("td",{className:(0,n.cx)(He.wordBreakAll,Pe&&He.wrapLine)},o.createElement("div",{className:He.logDetailsValue},Ne?me[0]:this.generateMultiVal(me,!0),Ne&&this.generateClipboardButton(me[0]),o.createElement("div",{className:(0,n.cx)((Ne||rt)&&He.adjoiningLinkButton)},Ue?.map((Je,Ae)=>o.createElement("span",{key:`${Je.title}-${Ae}`},o.createElement(D.k,{link:Je}))))))),he&&Oe&&Ne&&o.createElement("tr",null,o.createElement("td",null,o.createElement(S.h,{variant:he?"primary":"secondary",name:"signal",tooltip:"Hide ad-hoc statistics",onClick:this.showStats})),o.createElement("td",{colSpan:2},o.createElement("div",{className:He.logDetailsStats},o.createElement(P,{stats:xe,label:ue[0],value:me[0],rowCount:Me,isLabel:ge})))))}}const j=({isActive:ie,tooltipSuffix:oe,...ue})=>{const[me,ge]=(0,o.useState)(!1),Ue=me?"Remove filter":"Filter for value";return ie().then(ge),o.createElement(S.h,{...ue,variant:me?"primary":void 0,tooltip:Ue+oe})},V=(0,u.HE)(U);V.displayName="LogDetailsRow";var _=e(93128);class H extends o.PureComponent{render(){const{app:oe,row:ue,theme:me,hasError:ge,onClickFilterOutLabel:Ue,onClickFilterLabel:De,getRows:Pe,showDuplicates:ye,className:Te,onClickShowField:nt,onClickHideField:ct,displayedFields:he,getFieldLinks:xe,wrapLogMessage:Me,styles:He}=this.props,Ve=(0,N.p)(me,ue.logLevel),Oe=ue.labels?ue.labels:{},Ne=Object.keys(Oe).length>0,_e=(0,_.YD)(ue,xe);let qe=_e.filter(Z=>Z.links?.length);const rt=qe.filter(Z=>Z.fieldIndex!==ue.entryFieldIndex).sort(),mt=qe.filter(Z=>Z.fieldIndex===ue.entryFieldIndex).sort(),Je=(0,_.DC)(mt),Ae=rt&&rt.length>0||Je&&Je.length>0,Ke=ue.dataFrame.meta?.type===C.P.LogLines?[]:_e.filter(Z=>Z.links?.length===0&&Z.fieldIndex!==ue.entryFieldIndex).sort(),Xe=Ke&&Ke.length>0,ne=ge?"":`${Ve.logsRowLevelColor} ${He.logsRowLevel} ${He.logsRowLevelDetails}`;return o.createElement("tr",{className:(0,n.cx)(Te,He.logDetails)},ye&&o.createElement("td",null),o.createElement("td",{className:ne,"aria-label":"Log level"}),o.createElement("td",{colSpan:4},o.createElement("div",{className:He.logDetailsContainer},o.createElement("table",{className:He.logDetailsTable},o.createElement("tbody",null,(Ne||Xe)&&o.createElement("tr",null,o.createElement("td",{colSpan:100,className:He.logDetailsHeading,"aria-label":"Fields"},"Fields")),Object.keys(Oe).sort().map((Z,ee)=>{const ce=Oe[Z];return o.createElement(V,{key:`${Z}=${ce}-${ee}`,parsedKeys:[Z],parsedValues:[ce],isLabel:!0,getStats:()=>(0,c.lL)(Pe(),Z),onClickFilterOutLabel:Ue,onClickFilterLabel:De,onClickShowField:nt,onClickHideField:ct,row:ue,app:oe,wrapLogMessage:Me,displayedFields:he,disableActions:!1,isFilterLabelActive:this.props.isFilterLabelActive})}),Ke.map((Z,ee)=>{const{keys:ce,values:be,fieldIndex:Ee}=Z;return o.createElement(V,{key:`${ce[0]}=${be[0]}-${ee}`,parsedKeys:ce,parsedValues:be,onClickShowField:nt,onClickHideField:ct,onClickFilterOutLabel:Ue,onClickFilterLabel:De,getStats:()=>(0,c.i6)(ue.dataFrame.fields[Ee].values),displayedFields:he,wrapLogMessage:Me,row:ue,app:oe,disableActions:!1,isFilterLabelActive:this.props.isFilterLabelActive})}),Ae&&o.createElement("tr",null,o.createElement("td",{colSpan:100,className:He.logDetailsHeading,"aria-label":"Data Links"},"Links")),rt.map((Z,ee)=>{const{keys:ce,values:be,links:Ee,fieldIndex:Be}=Z;return o.createElement(V,{key:`${ce[0]}=${be[0]}-${ee}`,parsedKeys:ce,parsedValues:be,links:Ee,onClickShowField:nt,onClickHideField:ct,getStats:()=>(0,c.i6)(ue.dataFrame.fields[Be].values),displayedFields:he,wrapLogMessage:Me,row:ue,app:oe,disableActions:!1})}),Je?.map((Z,ee)=>{const{keys:ce,values:be,links:Ee,fieldIndex:Be}=Z;return o.createElement(V,{key:`${ce[0]}=${be[0]}-${ee}`,parsedKeys:ce,parsedValues:be,links:Ee,onClickShowField:nt,onClickHideField:ct,getStats:()=>(0,c.i6)(ue.dataFrame.fields[Be].values),displayedFields:he,wrapLogMessage:Me,row:ue,app:oe,disableActions:!0})}),!Xe&&!Ne&&!Ae&&o.createElement("tr",null,o.createElement("td",{colSpan:100,"aria-label":"No details"},"No details available")))))))}}const z=(0,u.HE)(H);z.displayName="LogDetails";var K=e(89877),Y=e(27280),k=e(74277);const q=o.memo(ie=>{const{row:oe,detectedFields:ue,getFieldLinks:me,wrapLogMessage:ge,styles:Ue,mouseIsOver:De,pinned:Pe,...ye}=ie,Te=(0,_.YD)(oe,me),nt=ge?"":X.noWrap,ct=(0,o.useMemo)(()=>ue.map(xe=>{const Me=Te.find(He=>{const{keys:Ve}=He;return Ve[0]===xe});return Me!=null?`${xe}=${Me.values}`:oe.labels[xe]!==void 0&&oe.labels[xe]!==null?`${xe}=${oe.labels[xe]}`:null}).filter(xe=>xe!==null).join(" "),[ue,Te,oe.labels]),he=(0,o.useMemo)(()=>De||Pe,[De,Pe]);return o.createElement(o.Fragment,null,o.createElement("td",{className:Ue.logsRowMessage},o.createElement("div",{className:nt},ct)),o.createElement("td",{className:`log-row-menu-cell ${Ue.logRowMenuCell}`},he&&o.createElement(k.t,{logText:ct,row:oe,styles:Ue,pinned:Pe,mouseIsOver:De,...ye})))}),X={noWrap:(0,n.css)`
    white-space: nowrap;
  `};q.displayName="LogRowMessageDisplayedFields";class te extends o.PureComponent{constructor(oe){super(oe),this.state={permalinked:!1,showingContext:!1,showDetails:!1,mouseIsOver:!1},this.debouncedContextClose=(0,h.debounce)(()=>{this.setState({showingContext:!1})},3e3),this.onOpenContext=ue=>{this.setState({showingContext:!0}),this.props.onOpenContext(ue,this.debouncedContextClose)},this.onRowClick=ue=>{this.props.handleTextSelection?.(ue,this.props.row)||this.props.enableLogDetails&&((0,l.ff)("grafana_explore_logs_log_details_clicked",{datasourceType:this.props.row.datasourceType,type:this.state.showDetails?"close":"open",logRowUid:this.props.row.uid,app:this.props.app}),this.setState(me=>({showDetails:!me.showDetails})))},this.onMouseEnter=()=>{this.setState({mouseIsOver:!0}),this.props.onLogRowHover&&this.props.onLogRowHover(this.props.row)},this.onMouseMove=ue=>{this.props.handleTextSelection&&document.getSelection()?.toString()&&ue.buttons>0&&this.setState({mouseIsOver:!1})},this.onMouseLeave=()=>{this.setState({mouseIsOver:!1}),this.props.onLogRowHover&&this.props.onLogRowHover(void 0)},this.scrollToLogRow=(ue,me=!1)=>{const{row:ge,permalinkedRowId:Ue,scrollIntoView:De,containerRendered:Pe}=this.props;if(Ue!==ge.uid){(ue.permalinked||me)&&this.setState({permalinked:!1});return}!this.state.permalinked&&Pe&&this.logLineRef.current&&De&&(De(this.logLineRef.current),(0,l.ff)("grafana_explore_logs_permalink_opened",{datasourceType:ge.datasourceType??"unknown",logRowUid:ge.uid}),this.setState({permalinked:!0}))},this.escapeRow=(0,a.Z)((ue,me)=>ue.hasUnescapedContent&&me?{...ue,entry:(0,c.l3)(ue.entry),raw:(0,c.l3)(ue.raw)}:ue),this.logLineRef=o.createRef()}renderTimeStamp(oe){return(0,p.dq)(oe,{timeZone:this.props.timeZone,defaultWithMS:!0})}componentDidMount(){this.scrollToLogRow(this.state,!0)}componentDidUpdate(oe,ue){this.scrollToLogRow(ue)}render(){const{getRows:oe,onClickFilterLabel:ue,onClickFilterOutLabel:me,onClickShowField:ge,onClickHideField:Ue,enableLogDetails:De,row:Pe,showDuplicates:ye,showContextToggle:Te,showLabels:nt,showTime:ct,displayedFields:he,wrapLogMessage:xe,prettifyLogMessage:Me,theme:He,getFieldLinks:Ve,forceEscape:Oe,app:Ne,styles:_e}=this.props,{showDetails:qe,showingContext:rt,permalinked:mt}=this.state,Je=(0,N.p)(He,Pe.logLevel),{errorMessage:Ae,hasError:Ke}=(0,c.Mi)(Pe),Xe=(0,n.cx)(_e.logsRow,{[_e.errorLogRow]:Ke,[_e.highlightBackground]:rt||mt}),ne=(0,n.cx)(_e.logsRow,{[_e.errorLogRow]:Ke,[_e.highlightBackground]:mt&&!this.state.showDetails}),Z=this.escapeRow(Pe,Oe);return o.createElement(o.Fragment,null,o.createElement("tr",{ref:this.logLineRef,className:Xe,onClick:this.onRowClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseMove:this.onMouseMove,onFocus:this.onMouseEnter},ye&&o.createElement("td",{className:_e.logsRowDuplicates},Z.duplicates&&Z.duplicates>0?`${Z.duplicates+1}x`:null),o.createElement("td",{className:Ke?"":`${Je.logsRowLevelColor} ${_e.logsRowLevel}`},Ke&&o.createElement(s.u,{content:`Error: ${Ae}`,placement:"right",theme:"error"},o.createElement(y.J,{className:_e.logIconError,name:"exclamation-triangle",size:"xs"}))),De&&o.createElement("td",{title:qe?"Hide log details":"See log details",className:_e.logsRowToggleDetails},o.createElement(y.J,{className:_e.topVerticalAlign,name:qe?"angle-down":"angle-right"})),ct&&o.createElement("td",{className:_e.logsRowLocalTime},this.renderTimeStamp(Pe.timeEpochMs)),nt&&Z.uniqueLabels&&o.createElement("td",{className:_e.logsRowLabels},o.createElement(K.j,{labels:Z.uniqueLabels})),he&&he.length>0?o.createElement(q,{row:Z,showContextToggle:Te,detectedFields:he,getFieldLinks:Ve,wrapLogMessage:xe,onOpenContext:this.onOpenContext,onPermalinkClick:this.props.onPermalinkClick,styles:_e,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinned,mouseIsOver:this.state.mouseIsOver,onBlur:this.onMouseLeave}):o.createElement(Y.r,{row:Z,showContextToggle:Te,wrapLogMessage:xe,prettifyLogMessage:Me,onOpenContext:this.onOpenContext,onPermalinkClick:this.props.onPermalinkClick,app:Ne,styles:_e,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinned,mouseIsOver:this.state.mouseIsOver,onBlur:this.onMouseLeave})),this.state.showDetails&&o.createElement(z,{className:ne,showDuplicates:ye,getFieldLinks:Ve,onClickFilterLabel:ue,onClickFilterOutLabel:me,onClickShowField:ge,onClickHideField:Ue,getRows:oe,row:Z,wrapLogMessage:xe,hasError:Ke,displayedFields:he,app:Ne,styles:_e,isFilterLabelActive:this.props.isFilterLabelActive}))}}const se=(0,u.HE)(te);se.displayName="LogRow";const de=100;class re extends o.PureComponent{constructor(){super(...arguments),this.renderAllTimer=null,this.logRowsRef=(0,o.createRef)(),this.state={renderAll:!1,selection:"",selectedRow:null,popoverMenuCoordinates:{x:0,y:0}},this.openContext=(oe,ue)=>{this.props.onOpenContext&&this.props.onOpenContext(oe,ue)},this.handleSelection=(oe,ue)=>{if(this.popoverMenuSupported()===!1)return!1;const me=document.getSelection()?.toString();if(!me||!this.logRowsRef.current)return!1;const ge=this.logRowsRef.current?.getBoundingClientRect();return this.setState({selection:me,popoverMenuCoordinates:{x:oe.clientX-ge.left,y:oe.clientY-ge.top},selectedRow:ue}),document.addEventListener("click",this.handleDeselection),document.addEventListener("contextmenu",this.handleDeselection),!0},this.handleDeselection=oe=>{if((0,c.RN)(oe.target)&&!this.logRowsRef.current?.contains(oe.target)){this.closePopoverMenu();return}document.getSelection()?.toString()||this.closePopoverMenu()},this.closePopoverMenu=()=>{document.removeEventListener("click",this.handleDeselection),document.removeEventListener("contextmenu",this.handleDeselection),this.setState({selection:"",popoverMenuCoordinates:{x:0,y:0},selectedRow:null})},this.makeGetRows=(0,a.Z)(oe=>()=>oe),this.sortLogs=(0,a.Z)((oe,ue)=>(0,c.$u)(oe,ue))}popoverMenuSupported(){return!g.config.featureToggles.logRowsPopoverMenu||this.props.app!==r.zj.Explore?!1:!!(this.props.onClickFilterOutValue||this.props.onClickFilterValue)}componentDidMount(){const{logRows:oe,previewLimit:ue}=this.props,ge=(oe?oe.length:0)<=ue*2;ge?this.setState({renderAll:ge}):this.renderAllTimer=window.setTimeout(()=>this.setState({renderAll:!0}),2e3)}componentWillUnmount(){document.removeEventListener("click",this.handleDeselection),document.removeEventListener("contextmenu",this.handleDeselection),this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{deduplicatedRows:oe,logRows:ue,dedupStrategy:me,theme:ge,logsSortOrder:Ue,previewLimit:De,...Pe}=this.props,{renderAll:ye}=this.state,Te=(0,N.h)(ge),nt=oe||ue,ct=ue&&ue.length>0,he=nt?nt.reduce((qe,rt)=>rt.duplicates?qe+rt.duplicates:qe,0):0,xe=me!==i.Y4.none&&he>0,Me=nt||[],He=Ue?this.sortLogs(Me,Ue):Me,Ve=He.slice(0,De),Oe=He.slice(De,He.length),Ne=this.makeGetRows(He),_e=new v;return o.createElement("div",{className:Te.logRows,ref:this.logRowsRef},this.state.selection&&this.state.selectedRow&&o.createElement(d,{close:this.closePopoverMenu,row:this.state.selectedRow,selection:this.state.selection,...this.state.popoverMenuCoordinates,onClickFilterValue:Pe.onClickFilterValue,onClickFilterOutValue:Pe.onClickFilterOutValue}),o.createElement("table",{className:(0,n.cx)(Te.logsRowsTable,this.props.overflowingContent?"":Te.logsRowsTableContain)},o.createElement("tbody",null,ct&&Ve.map(qe=>o.createElement(se,{key:_e.getKey(qe.uid),getRows:Ne,row:qe,showDuplicates:xe,logsSortOrder:Ue,onOpenContext:this.openContext,styles:Te,onPermalinkClick:this.props.onPermalinkClick,scrollIntoView:this.props.scrollIntoView,permalinkedRowId:this.props.permalinkedRowId,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinnedRowId===qe.uid,isFilterLabelActive:this.props.isFilterLabelActive,handleTextSelection:this.popoverMenuSupported()?this.handleSelection:void 0,...Pe})),ct&&ye&&Oe.map(qe=>o.createElement(se,{key:_e.getKey(qe.uid),getRows:Ne,row:qe,showDuplicates:xe,logsSortOrder:Ue,onOpenContext:this.openContext,styles:Te,onPermalinkClick:this.props.onPermalinkClick,scrollIntoView:this.props.scrollIntoView,permalinkedRowId:this.props.permalinkedRowId,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinnedRowId===qe.uid,isFilterLabelActive:this.props.isFilterLabelActive,handleTextSelection:this.popoverMenuSupported()?this.handleSelection:void 0,...Pe})),ct&&!ye&&o.createElement("tr",null,o.createElement("td",{colSpan:5},"Rendering ",He.length-De," rows...")))))}}re.defaultProps={previewLimit:de};const fe=(0,u.HE)(re);fe.displayName="LogsRows"},51994:(G,A,e)=>{"use strict";e.d(A,{h:()=>m,p:()=>l});var n=e(66681),a=e(84513),o=e(19737),r=e(45236),i=e(30887),g=e(90857),u=e(55182);const l=(c,d)=>{let f=c.isLight?c.v1.palette.gray5:c.v1.palette.gray2;switch(d){case r.in.crit:case r.in.critical:f="#705da0";break;case r.in.error:case r.in.err:f="#e24d42";break;case r.in.warning:case r.in.warn:f=c.colors.warning.main;break;case r.in.info:f="#7eb26d";break;case r.in.debug:f="#1f78c1";break;case r.in.trace:f="#6ed0e0";break}return{logsRowLevelColor:(0,n.css)`
      &::after {
        background-color: ${f};
      }
    `}},m=(0,a.Z)(c=>{const d=u.hoverColor(c.colors.background.secondary,c),f=(0,o.Z)(c.components.dashboard.background).setAlpha(.7).toRgbString(),E=g.config.featureToggles.exploreScrollableLogsContainer;return{logsRowLevel:(0,n.css)`
      label: logs-row__level;
      max-width: ${c.spacing(1.25)};
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: ${c.spacing(.5)};
      }
    `,logsRowMatchHighLight:(0,n.css)`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${c.components.textHighlight.text}
      background-color: ${c.components.textHighlight};
    `,logRows:(0,n.css)({position:"relative"}),logsRowsTable:(0,n.css)`
      label: logs-rows;
      font-family: ${c.typography.fontFamilyMonospace};
      font-size: ${c.typography.bodySmall.fontSize};
      width: 100%;
      ${!E&&`margin-bottom: ${c.spacing(2.25)};`}
      position: relative;
    `,logsRowsTableContain:(0,n.css)`
      contain: strict;
    `,highlightBackground:(0,n.css)`
      background-color: ${(0,o.Z)(c.colors.info.transparent).setAlpha(.25).toString()};
    `,logsRow:(0,n.css)`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-menu {
          z-index: 1;
        }

        background: ${d};
      }

      td:not(.log-row-menu-cell):last-child {
        width: 100%;
      }

      > td:not(.log-row-menu-cell) {
        position: relative;
        padding-right: ${c.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }
    `,logsRowDuplicates:(0,n.css)`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logIconError:(0,n.css)`
      color: ${c.colors.warning.main};
    `,logsRowToggleDetails:(0,n.css)`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:(0,n.css)`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:(0,n.css)`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:(0,n.css)`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
      overflow-wrap: anywhere;
      width: 100%;
      text-align: left;
    `,copyLogButton:(0,n.css)`
      padding: 0 0 0 ${c.spacing(.5)};
      height: ${c.spacing(3)};
      width: ${c.spacing(3.25)};
      line-height: ${c.spacing(2.5)};
      overflow: hidden;
      &:hover {
          background-color: ${i.alpha(c.colors.text.primary,.12)};
        }
      }
    `,logDetailsContainer:(0,n.css)`
      label: logs-row-details-table;
      border: 1px solid ${c.colors.border.medium};
      padding: 0 ${c.spacing(1)} ${c.spacing(1)};
      border-radius: ${c.shape.radius.default};
      margin: ${c.spacing(2.5)} ${c.spacing(1)} ${c.spacing(2.5)} ${c.spacing(2)};
      cursor: default;
    `,logDetailsTable:(0,n.css)`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:(0,n.css)`
      label: logs-row-details__icon;
      position: relative;
      color: ${c.v1.palette.gray3};
      padding-top: 1px;
      padding-bottom: 1px;
      padding-right: ${c.spacing(.75)};
    `,logDetailsLabel:(0,n.css)`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${c.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:(0,n.css)`
      label: logs-row-details__heading;
      font-weight: ${c.typography.fontWeightBold};
      padding: ${c.spacing(1)} 0 ${c.spacing(.5)};
    `,logDetailsValue:(0,n.css)`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${d};
      }
    `,topVerticalAlign:(0,n.css)`
      label: topVerticalAlign;
      margin-top: -${c.spacing(.9)};
      margin-left: -${c.spacing(.25)};
    `,detailsOpen:(0,n.css)`
      &:hover {
        background-color: ${u.hoverColor(c.colors.background.primary,c)};
      }
    `,errorLogRow:(0,n.css)`
      label: erroredLogRow;
      color: ${c.colors.text.secondary};
    `,positionRelative:(0,n.css)`
      label: positionRelative;
      position: relative;
    `,rowWithContext:(0,n.css)`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${f};
      display: inherit;
    `,horizontalScroll:(0,n.css)`
      label: horizontalScroll;
      white-space: pre;
    `,contextNewline:(0,n.css)`
      display: block;
      margin-left: 0px;
    `,rowMenu:(0,n.css)`
      label: rowMenu;
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      top: 0;
      bottom: auto;
      background: ${c.colors.background.primary};
      box-shadow: ${c.shadows.z3};
      padding: ${c.spacing(.5,1,.5,1)};
      z-index: 100;
      gap: ${c.spacing(.5)};

      & > button {
        margin: 0;
      }
    `,logRowMenuCell:(0,n.css)`
      position: sticky;
      z-index: ${c.zIndex.dropdown};
      margin-top: -${c.spacing(.125)};
      right: 0px;

      & > span {
        transform: translateX(-100%);
      }
    `,logLine:(0,n.css)`
      background-color: transparent;
      border: none;
      diplay: inline;
      font-family: ${c.typography.fontFamilyMonospace};
      font-size: ${c.typography.bodySmall.fontSize};
      letter-spacing: ${c.typography.bodySmall.letterSpacing};
      text-align: left;
      padding: 0;
      user-select: text;
    `,logsRowLevelDetails:(0,n.css)`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:(0,n.css)`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${c.colors.background.primary};
      }
    `,visibleRowMenu:(0,n.css)`
      label: visibleRowMenu;
      aspect-ratio: 1/1;
      z-index: 90;
    `,linkButton:(0,n.css)`
      label: linkButton;
      > button {
        padding-top: ${c.spacing(.5)};
      }
    `,hidden:(0,n.css)`
      label: hidden;
      visibility: hidden;
    `,unPinButton:(0,n.css)`
      height: ${c.spacing(3)};
      line-height: ${c.spacing(2.5)};
    `}})},93128:(G,A,e)=>{"use strict";e.d(A,{B2:()=>l,DC:()=>u,YD:()=>g});var n=e(56375),a=e.n(n),o=e(84513),r=e(18815),i=e(92840);const g=(0,o.Z)((d,f)=>{const E=l(d,f);return Object.values(E)}),u=(0,o.Z)(d=>{let f=[];return d.forEach(E=>{E.links?.forEach(v=>{if(v.variables){const h=v.variables.map(s=>{const y=s.variableName,C=s.fieldPath?`.${s.fieldPath}`:"";return`${y}${C}`}),p=v.variables.map(s=>s.found?s.value:"");f.push({keys:h,values:p,links:[v],fieldIndex:E.fieldIndex})}})}),f}),l=(0,o.Z)((d,f)=>c(d.dataFrame).visible.filter(h=>h.values[d.rowIndex]!=null).map(h=>{const p=f?f(h,d.rowIndex,d.dataFrame):[],s=h.values[d.rowIndex],y=typeof s=="string"||typeof s=="number"?s.toString():(0,r.Xh)(s);return{keys:[h.name],values:[y],links:p,fieldIndex:h.index}}));function m(d,f){const E=(0,i.L)(d);if(E===null)return new Set;const v=new Set(E.extraFields.map(h=>h.index));return E.severityField!==null&&v.add(E.severityField.index),f.keepBody&&v.add(E.bodyField.index),f.keepTimestamp&&v.add(E.timeField.index),v}function c(d,f){const E=d.fields.map((s,y)=>({...s,index:y})),v=m(d,f??{}),[h,p]=(0,n.partition)(E,s=>s.config.custom?.hidden?!1:(s.config.links??[]).length>0?!0:v.has(s.index));return{visible:h,hidden:p}}},92840:(G,A,e)=>{"use strict";e.d(A,{m:()=>E,L:()=>h});var n=e(30215),a=e(58309),o=e(512);function r(p,s){const y=p.labels;if(y!==void 0){const C=new Array(s);return C.fill(y),C}else return null}function i(p,s,y){const C=p.getFieldByName("labels");if(C!==void 0&&C.type===a.fS.other){const b=C.values.map(E);return[C,()=>b]}else return[null,()=>r(s,y.length)]}function g(p){const s=new n.N(p),y=s.getFirstFieldOfType(a.fS.time),C=s.getFirstFieldOfType(a.fS.string);if(y===void 0||C===void 0)return null;const b=s.getFieldByName("tsNs")??null,S=s.getFieldByName("level")??null,D=s.getFieldByName("id")??null,[M,T]=i(s,C,p),R=s.fields.filter((O,x)=>x!==y.index&&x!==C.index&&x!==b?.index&&x!==S?.index&&x!==D?.index&&x!==M?.index);return{timeField:y,bodyField:C,timeNanosecondField:b,severityField:S,idField:D,getLogFrameLabels:T,getLogFrameLabelsAsLabels:T,getLabelFieldName:()=>M?.name??null,extraFields:R}}function u(p,s,y){const C=p.getFieldByName(s);if(C!==void 0)return C.type===y?C:void 0}const l="timestamp",m="body",c="severity",d="id",f="labels";function E(p){const s={};return Object.entries(p).forEach(([y,C])=>{s[y]=typeof C=="string"?C:JSON.stringify(C)}),s}function v(p){const s=new n.N(p),y=u(s,l,a.fS.time),C=u(s,m,a.fS.string);if(y===void 0||C===void 0)return null;const b=u(s,c,a.fS.string)??null,S=u(s,d,a.fS.string)??null,D=u(s,f,a.fS.other)??null,M=D===null?null:D.values,T=s.fields.filter((R,O)=>O!==y.index&&O!==C.index&&O!==b?.index&&O!==S?.index&&O!==D?.index);return{timeField:y,bodyField:C,severityField:b,idField:S,getLogFrameLabels:()=>M,timeNanosecondField:null,getLogFrameLabelsAsLabels:()=>M!==null?M.map(E):null,getLabelFieldName:()=>D!==null?D.name:null,extraFields:T}}function h(p){return p.meta?.type===o.P.LogLines?v(p):g(p)}},81154:(G,A,e)=>{"use strict";e.d(A,{Qp:()=>R,aB:()=>z,UW:()=>j,nu:()=>V,Tx:()=>ie,Nw:()=>_,Ce:()=>re,Bz:()=>de});var n=e(56375),a=e(1050),o=e(81034),r=e(16226),i=e(45236),g=e(1713),u=e(45878),l=e(30215),m=e(58309),c=e(14345),d=e(85745),f=e(5e4),E=e(86734),v=e(12537),h=e(71244),p=e(23757),s=e(7321),y=e(42309),C=e(45033),b=e(67954);function S(oe,ue){return b.default.bootData?.user?.lightTheme?ue:oe}var D=e(92840),M=e(19593);const T="Line limit",R="Common labels",O={[i.in.critical]:y.O9[7],[i.in.warning]:y.O9[1],[i.in.error]:y.O9[4],[i.in.info]:y.O9[0],[i.in.debug]:y.O9[5],[i.in.trace]:y.O9[2],[i.in.unknown]:S("#8e8e8e","#bdc4cd")},x=1,I=1e3*x,L=60*I,P=60*L,N=24*P,F=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function U(oe,ue,me){switch(me){case g.Y4.exact:return oe.entry.replace(F,"")===ue.entry.replace(F,"");case g.Y4.numbers:return oe.entry.replace(/\d/g,"")===ue.entry.replace(/\d/g,"");case g.Y4.signature:return oe.entry.replace(/\w/g,"")===ue.entry.replace(/\w/g,"");default:return!1}}function j(oe,ue){return ue===g.Y4.none?oe:oe.reduce((me,ge,Ue)=>{const De={...ge},Pe=me[me.length-1];return Ue>0&&U(ge,Pe,ue)?Pe.duplicates++:(De.duplicates=0,me.push(De)),me},[])}function V(oe,ue){return ue.size===0?oe:oe.filter(me=>!ue.has(me.logLevel))}function _(oe,ue){const me={},ge=[];for(const Ue of oe){let De=me[Ue.logLevel];De||(me[Ue.logLevel]=De={lastTs:null,datapoints:[],target:Ue.logLevel,color:O[Ue.logLevel]},ge.push(De));const Pe=Math.floor(Ue.timeEpochMs/ue)*ue;Pe===De.lastTs?De.datapoints[De.datapoints.length-1][0]++:(De.datapoints.push([1,Pe]),De.lastTs=Pe);for(const ye of ge)ye!==De&&ye.lastTs!==Pe&&(ye.datapoints.push([0,Pe]),ye.lastTs=Pe)}return ge.map((Ue,De)=>{Ue.datapoints.sort((nt,ct)=>nt[1]-ct[1]);const Pe=(0,u.g0)(Ue),Te=new l.N(Pe).getFirstFieldOfType(m.fS.number);return Pe.fields[Te.index].config.min=0,Pe.fields[Te.index].config.decimals=0,Pe.fields[Te.index].config.color={mode:c.S.Fixed,fixedColor:Ue.color},Pe.fields[Te.index].config.custom={drawStyle:g.l8.Bars,barAlignment:g.pu.Center,barWidthFactor:.9,barMaxWidth:5,lineColor:Ue.color,pointColor:Ue.color,fillColor:Ue.color,lineWidth:0,fillOpacity:100,stacking:{mode:g.o0.Normal,group:"A"}},Pe})}function H(oe){return oe.fields.some(ue=>ue.type===m.fS.time)&&oe.fields.some(ue=>ue.type===m.fS.string)}function z(oe,ue,me,ge){const{logSeries:Ue}=Y(oe),De=q(Ue,ge);if(De){if(ue&&De.rows.length>0){const Pe=De.rows.sort(M.DA),{visibleRange:ye,bucketSize:Te,visibleRangeMs:nt,requestedRangeMs:ct}=K(Pe,ue,me);De.visibleRange=ye,De.bucketSize=Te,De.series=_(Pe,Te),De.meta&&(De.meta=X(De,nt,ct))}else De.series=[];return De.queries=ge,De}return{hasUniqueLabels:!1,rows:[],meta:[],series:[],queries:ge}}function K(oe,ue,me,ge=20,Ue=1e3){let De=me,Pe=ue,ye=Math.max(Pe*ge,Ue),Te,nt;if(me){const ct=oe[0].timeEpochMs;if(nt=me.to-me.from,Te=me.to-ct,Te>0){const he=Te/nt;Pe*=he,ye=Math.max(Math.ceil(Pe*ge),Ue),De={from:Math.floor(ct/ye)*ye,to:me.to}}else Te=1}return{bucketSize:ye,visibleRange:De,visibleRangeMs:Te,requestedRangeMs:nt}}function Y(oe){const ue=[],me=[];for(const ge of oe){if(H(ge)||!ge.fields.length){me.push(ge);continue}ge.length>0&&ue.push(ge)}return{logSeries:me,metricSeries:ue}}function k(oe,ue,me){const ge=oe.values[me],De=(0,d.zh)(ge).valueOf();if(ue)return{ts:ge,timeEpochMs:De,timeEpochNs:ue.values[me]};if(oe.nanos!==void 0){const Pe=oe.nanos[me].toString().padStart(6,"0"),ye=`${De}${Pe}`;return{ts:ge,timeEpochMs:De,timeEpochNs:ye}}return{ts:ge,timeEpochMs:De,timeEpochNs:De+"000000"}}function q(oe,ue=[]){if(oe.length===0)return;const me=[];let ge=[];const Ue=oe.filter(Oe=>Oe.fields.length);Ue.length&&Ue.forEach(Oe=>{const Ne=(0,D.L)(Oe);if(Ne!=null){const _e=Ne.getLogFrameLabelsAsLabels()??void 0,qe={rawFrame:Oe,logsFrame:Ne,frameLabels:_e};ge.push(qe),_e&&_e.length>0&&me.push(_e)}});const De=me.flat(),Pe=De.length>0?(0,f.FT)(De):{},ye=[];let Te=!1;for(const Oe of ge){const{logsFrame:Ne,rawFrame:_e,frameLabels:qe}=Oe,{timeField:rt,timeNanosecondField:mt,bodyField:Je,severityField:Ae,idField:Ke}=Ne;for(let Xe=0;Xe<_e.length;Xe++){const{ts:ne,timeEpochMs:Z,timeEpochNs:ee}=k(rt,mt??void 0,Xe),ce=Je.values[Xe]??"",be=typeof ce=="string"?ce:JSON.stringify(ce),Ee=E.QX.hasAnsiCodes(be),Be=!!be.match(/\\n|\\t|\\r/),Le=_e.meta?.custom?.searchWords??_e.meta?.searchWords??[],ze=Ee?C._J.strip(be):be,Fe=qe?.[Xe],$e=(0,f.IU)(Fe,Pe);Object.keys($e).length>0&&(Te=!0);let et=i.in.unknown;const tt=Ae&&Ae.values[Xe]||Fe&&Fe.level;tt?et=(0,M.jx)(tt):et=(0,M.ZO)(ze);const it=ue.find(yt=>yt.refId===_e.refId)?.datasource?.type,vt={entryFieldIndex:Je.index,rowIndex:Xe,dataFrame:_e,logLevel:et,timeFromNow:(0,v.E8)(ne),timeEpochMs:Z,timeEpochNs:ee,timeLocal:(0,v.dq)(ne,{timeZone:"browser"}),timeUtc:(0,v.dq)(ne,{timeZone:"utc"}),uniqueLabels:$e,hasAnsi:Ee,hasUnescapedContent:Be,searchWords:Le,entry:ze,raw:be,labels:Fe||{},uid:`${_e.refId}_${Ke?Ke.values[Xe]:Xe.toString()}`,datasourceType:it};Ke!==null&&(vt.rowId=Ke.values[Xe]),ye.push(vt)}}const nt=[];(0,n.size)(Pe)>0&&nt.push({label:R,value:Pe,kind:i.Ku.LabelsMap});const he=oe.filter(Oe=>Oe?.meta?.custom?.limit??Oe?.meta?.limit).reduce((Oe,Ne)=>(Oe[Ne.refId??""]=Ne.meta?.custom?.limit??Ne.meta?.limit??0,Oe),{}),xe=Object.values(he).reduce((Oe,Ne)=>Oe+=Ne,0);xe>0&&nt.push({label:T,value:xe,kind:i.Ku.Number});let Me=0;const He={};let Ve=!1;for(const Oe of oe){const Ne=Oe.meta?.custom?.lokiQueryStatKey,{refId:_e}=Oe;if(!Ve&&Oe.meta?.custom?.error&&(nt.push({label:"",value:Oe.meta?.custom.error,kind:i.Ku.Error}),Ve=!0),_e&&!He[_e]){if(Ne&&Oe.meta?.stats){const qe=Oe.meta.stats.find(rt=>rt.displayName===Ne);qe&&(Me+=qe.value)}He[_e]=!0}}if(Me>0){const{text:Oe,suffix:Ne}=(0,s.i7)("B")(Me);nt.push({label:"Total bytes processed",value:`${Oe} ${Ne}`,kind:i.Ku.String})}return{hasUniqueLabels:Te,meta:nt,rows:ye}}function X(oe,ue,me){let ge=[...oe.meta];const Ue=ge.findIndex(Pe=>Pe.label===T),De=Ue>=0&&ge[Ue]?.value;if(De&&typeof De=="number"&&De>0){let Pe;if(De===oe.rows.length&&ue&&me){const ye=(ue/me*100).toFixed(2);Pe=`${De} reached, received logs cover ${ye}% (${h.msRangeToTimeString(ue)}) of your selected time range (${h.msRangeToTimeString(me)})`}else Pe=`${De} (${oe.rows.length} returned)`;ge[Ue]={label:T,value:Pe,kind:i.Ku.String}}return ge}function te(oe,ue){const me=ue&&oe===i.in.unknown?"logs":oe,ge=O[oe];return{displayNameFromDS:me,color:{mode:c.S.Fixed,fixedColor:ge},custom:{drawStyle:g.l8.Bars,barAlignment:g.pu.Center,lineColor:ge,pointColor:ge,fillColor:ge,lineWidth:1,fillOpacity:100,stacking:{mode:g.o0.Normal,group:"A"}}}}const se=(oe,ue,me)=>(oe.fields=oe.fields.map(ge=>(ge.type===m.fS.number&&(ge.config={...ge.config,...te(ue(oe),me)}),ge)),oe);function de(oe,ue,me){const ge=me.range.to.valueOf()-me.range.from.valueOf(),Ue=fe(ue.scopedVars,ge);return ue.interval=Ue.interval,ue.scopedVars.__interval={value:Ue.interval,text:Ue.interval},Ue.intervalMs!==void 0&&(ue.intervalMs=Ue.intervalMs,ue.scopedVars.__interval_ms={value:Ue.intervalMs,text:Ue.intervalMs}),ue.hideFromInspector=!0,new a.y(De=>{let Pe=[];De.next({state:p.Gu.Loading,error:void 0,data:[]});const ye=oe.query(ue),nt=((0,o.b)(ye)?ye:(0,r.D)(ye)).subscribe({complete:()=>{De.complete()},next:ct=>{const{error:he}=ct;if(he!==void 0)De.next({state:p.Gu.Error,error:he,data:[]}),De.error(he);else{const xe=(0,n.groupBy)(ct.data,"refId");Pe=ct.data.map(Me=>{let He=Me.refId||"";He.startsWith("log-volume-")&&(He=He.substr(11));const Ve={logsVolumeType:i.o8.FullRange,absoluteRange:{from:me.range.from.valueOf(),to:me.range.to.valueOf()},datasourceName:oe.name,sourceQuery:me.targets.find(Oe=>Oe.refId===He)};return Me.meta={...Me.meta,custom:{...Me.meta?.custom,...Ve}},se(Me,me.extractLevel,xe[Me.refId].length===1)}),De.next({state:ct.state,error:void 0,data:Pe})}},error:ct=>{De.next({state:p.Gu.Error,error:ct,data:[]}),De.error(ct)}});return()=>{nt?.unsubscribe()}})}function re(oe,ue){return ue.hideFromInspector=!0,new a.y(me=>{let ge=[];me.next({state:p.Gu.Loading,error:void 0,data:[]});const Ue=oe.query(ue),Pe=((0,o.b)(Ue)?Ue:(0,r.D)(Ue)).subscribe({complete:()=>{me.next({state:p.Gu.Done,error:void 0,data:ge}),me.complete()},next:ye=>{const{error:Te}=ye;Te!==void 0?(me.next({state:p.Gu.Error,error:Te,data:[]}),me.error(Te)):ge=ye.data.map(nt=>{const ct=(0,u.g0)(nt),{timeIndex:he}=(0,u.sV)(ct);return(0,u.aK)(ct,he)})},error:ye=>{me.next({state:p.Gu.Error,error:ye,data:[]}),me.error(ye)}});return()=>{Pe?.unsubscribe()}})}function fe(oe,ue){if(oe.__interval_ms){let me=oe.__interval_ms.value,ge="";return ue<I*5?(me=x,ge="1ms"):me>P?(me=N,ge="1d"):me>L?(me=P,ge="1h"):me>I?(me=L,ge="1m"):(me=I,ge="1s"),{interval:ge,intervalMs:me}}else return{interval:"$__interval"}}function ie(oe){const ue=oe.dataFrame;return ue.length===0||ue.length<=oe.rowIndex?null:(0,u.at)({fields:ue.fields.map(ge=>({...ge,values:[ge.values[oe.rowIndex]]}))})}},19593:(G,A,e)=>{"use strict";e.d(A,{$u:()=>s,DA:()=>v,Di:()=>b,FP:()=>T,Js:()=>M,Mi:()=>y,RN:()=>O,ZO:()=>m,_c:()=>D,hY:()=>S,i6:()=>f,j0:()=>p,jx:()=>c,l3:()=>C,lL:()=>d,zp:()=>R});var n=e(56375),a=e.n(n),o=e(45236),r=e(1713),i=e(30215),g=e(58309),u=e(38070),l=e(93128);function m(x){if(!x)return o.in.unknown;let I=o.in.unknown,L;for(const[P,N]of Object.entries(o.in)){const U=new RegExp(`\\b${P}\\b`,"i").exec(x);U&&(L===void 0||U.index<L)&&(I=N,L=U.index)}return I}function c(x){const I=o.in[x.toString().toLowerCase()];return I||o.in.unknown}function d(x,I){const L=x.filter(F=>F.labels[I]!==void 0),P=L.length,N=(0,n.countBy)(L,F=>F.labels[I]);return E(N,P)}function f(x){const I=x.filter(P=>P!=null),L=(0,n.countBy)(I);return E(L,I.length)}const E=(x,I)=>(0,n.chain)(x).map((L,P)=>({count:L,value:P,proportion:L/I})).sortBy("count").reverse().value(),v=(x,I)=>x.timeEpochMs<I.timeEpochMs?-1:x.timeEpochMs>I.timeEpochMs?1:x.timeEpochNs<I.timeEpochNs?-1:x.timeEpochNs>I.timeEpochNs?1:0,h=(x,I)=>x.timeEpochMs>I.timeEpochMs?-1:x.timeEpochMs<I.timeEpochMs?1:x.timeEpochNs>I.timeEpochNs?-1:x.timeEpochNs<I.timeEpochNs?1:0,p=(x,I)=>{const L=x?s(x.rows,I):[];return x?{...x,rows:L}:{hasUniqueLabels:!1,rows:L}},s=(x,I)=>I===r.UV.Ascending?x.sort(v):x.sort(h),y=x=>x.labels.__error__?{hasError:!0,errorMessage:x.labels.__error__}:{hasError:!1},C=x=>x.replace(/\\r\\n|\\n|\\t|\\r/g,I=>I.slice(1)==="t"?"	":`
`);function b(x){return x.map(I=>{const L=(0,l.B2)(I).reduce((P,N)=>{const F=N.keys[0];return P[F]=N.values[0],P},{});return{line:I.entry,timestamp:I.timeEpochNs,fields:{...L,...I.labels}}})}const S=x=>{let I={from:1/0,to:-1/0};return x.forEach(L=>{const P=L.meta?.custom||{};P.absoluteRange?.from&&P.absoluteRange?.to&&(I={from:Math.min(I.from,P.absoluteRange.from),to:Math.max(I.to,P.absoluteRange.to)})}),I},D=x=>{if(x.length===0)throw new Error("Cannot aggregate data frames: there must be at least one data frame to aggregate");const I={},L={};let P=-1/0;const N={};let F=[];return x.forEach(U=>{const j=new i.N(U),V=j.getFirstFieldOfType(g.fS.time),_=j.getFirstFieldOfType(g.fS.number);if(!V)throw new Error("Missing time field");if(!_)throw new Error("Missing value field");const H=_.config.displayNameFromDS||U.name||"logs",z=_.values.length;N[H]={meta:U.meta,valueFieldConfig:_.config,timeFieldConfig:V.config};for(let K=0;K<z;K++){const Y=V.values[K],k=_.values[K];I[H]??={},I[H][Y]=(I[H][Y]||0)+k,L[Y]=(L[Y]||0)+k,P=Math.max(L[Y],P)}}),Object.keys(I).forEach(U=>{const j=new u.v,{meta:V,timeFieldConfig:_,valueFieldConfig:H}=N[U];j.name=U,j.meta=V,j.addField({name:"Time",type:g.fS.time,config:_}),j.addField({name:"Value",type:g.fS.number,config:H}),Object.entries(I[U]).sort((z,K)=>Number(z[0])-Number(K[0])).forEach(([z,K])=>{j.add({Time:Number(z),Value:K})}),F.push(j)}),{dataFrames:F,maximum:P}},M=x=>{const I=x[0]?.meta?.custom;return I&&I.datasourceName?{name:I.datasourceName}:null},T=x=>x[0]?.meta?.custom?.logsVolumeType===o.o8.Limited,R=async(x,I)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(x);{const L=document.createElement("textarea");I.current?.appendChild(L),L.value=x,L.focus(),L.select(),document.execCommand("copy"),L.remove()}};function O(x){return x instanceof Element}},4990:(G,A,e)=>{"use strict";e.d(A,{N:()=>g});var n=e(66681),a=e(85960),o=e(47257),r=e(77980);const i=({title:l})=>{const m=(0,o.wW)(u);return a.createElement("p",{className:m.description},l?"Are you sure you want to revoke this URL? The dashboard will no longer be public.":"Orphaned public dashboard will no longer be public.")},g=({dashboardTitle:l,onConfirm:m,onDismiss:c})=>a.createElement(r.s,{isOpen:!0,body:a.createElement(i,{title:l}),onConfirm:m,onDismiss:c,title:"Revoke public URL",icon:"trash-alt",confirmText:"Revoke public URL"}),u=l=>({title:(0,n.css)`
    margin-bottom: ${l.spacing(1)};
  `,description:(0,n.css)`
    font-size: ${l.typography.body.fontSize};
  `})},5192:(G,A,e)=>{"use strict";e.d(A,{t:()=>r});var n=e(30824);class a extends Error{constructor(g,u){super(u),this.type=g}}class o{constructor(){this.rootName="general"}validateNewDashboardName(g,u){return this.validate(g,u,"A dashboard or a folder with the same name already exists")}validateNewFolderName(g){return this.validate(this.rootName,g,"A folder or dashboard in the general folder with the same name already exists")}async validate(g,u,l){u=(u||"").trim();const m=u.toLowerCase();if(u.length===0)throw new a("REQUIRED","Name is required");if(m===this.rootName)throw new a("EXISTING","This is a reserved name and cannot be used for a folder.");const d=await(0,n.getGrafanaSearcher)().search({kind:["dashboard"],query:u,location:g||"general"});for(const f of d.view)if(m===f.name.toLowerCase())throw new a("EXISTING",l)}}const r=new o},32737:(G,A,e)=>{"use strict";e.d(A,{$j:()=>D,EW:()=>V,L6:()=>P,Pb:()=>j,ZL:()=>U,iM:()=>_,nQ:()=>E,q_:()=>f,uC:()=>I,ys:()=>S});var n=e(12693),a=e(85445),o=e(91),r=e(81502),i=e(88492),g=e(93991),u=e(60829),l=e(95162),m=e(1706),c=e(49950),d=e(1864);function f(z){return async K=>{try{K((0,d.AK)());const Y=await(0,a.i)().get(`/api/gnet/dashboards/${z}`);await K(C(Y.json)),await K(p(Y)),K(y())}catch(Y){K((0,d.eh)()),(0,a.kW)(Y)&&K((0,i.$l)((0,g.t_)(Y.data.message||Y)))}}}function E(z){return async K=>{await K(C(z)),await K(s(z)),K(y())}}const v=(z,K)=>z?.usage?.libraryPanels?.filter(Y=>K.inputs.libraryPanels.some(k=>k.state!==d.KQ.Exists&&k.model.uid===Y.uid));function h(z,K){let Y=z.__inputs;if(K.inputs.libraryPanels?.length){const k=[];z.__inputs?.forEach(q=>{if(!q?.usage?.libraryPanels){k.push(q);return}const X=v(q,K);q.usage={libraryPanels:X},!!X?.length&&k.push(q)}),Y=k}return{...z,__inputs:Y}}function p(z){return(K,Y)=>{const k=Y().importDashboard,q=h(z.json,k);K((0,d.S9)({...z,json:q}))}}function s(z){return(K,Y)=>{const k=Y().importDashboard,q=h(z,k);K((0,d.Nw)(q))}}function y(){return(z,K)=>{const Y=K().importDashboard.dashboard;if(Y&&Y.__inputs){const k=[];Y.__inputs.forEach(q=>{const X={name:q.name,label:q.label,info:q.description,value:q.value,type:q.type,pluginId:q.pluginId,options:[]};X.description=T(q),q.type===d.n$.DataSource?M(q,X):X.info||(X.info="Specify a string constant"),k.push(X)}),z((0,d.Zc)(k))}}}function C(z){return async function(K){const Y=await b(z);K((0,d.C2)(Y))}}async function b(z){if(!z||!z.__elements)return[];const K=[];for(const Y of Object.values(z.__elements)){if(Y.kind!==c.V.Panel)continue;const k=Y.model,{type:q,description:X}=k,{uid:te,name:se}=Y,de={model:{model:k,uid:te,name:se,version:0,type:q,kind:c.V.Panel,description:X},state:d.KQ.New};try{const re=await(0,m.Mh)(te,!0);de.state=d.KQ.Exists,de.model=re}catch(re){if(re.status!==404)throw re}K.push(de)}return K}function S(){return z=>{z((0,d.MO)())}}function D(z){return async(K,Y)=>{const k=Y().importDashboard.dashboard,q=Y().importDashboard.inputs;let X=[];z.dataSources?.forEach((de,re)=>{const fe=q.dataSources[re];X.push({name:fe.name,type:fe.type,pluginId:fe.pluginId,value:de.uid})}),z.constants?.forEach((de,re)=>{const fe=q.constants[re];X.push({value:de,name:fe.name,type:fe.type})});const te=await(0,a.i)().post("api/dashboards/import",{dashboard:{...k,title:z.title,uid:z.uid||k.uid},overwrite:!0,inputs:X,folderUid:z.folder.uid}),se=n.u.stripBaseFromUrl(te.importedUrl);o.E1.push(se)}}const M=(z,K)=>{(0,r.F)().getList({pluginId:z.pluginId}).length===0?K.info="No data sources of type "+z.pluginName+" found":K.info||(K.info="Select a "+z.pluginName+" data source")},T=z=>{if(z.usage&&z.usage.libraryPanels)return`List of affected library panels: ${z.usage.libraryPanels.reduce((Y,k,q)=>q===0?k.name:`${Y}, ${k.name}`,"")}`};async function R(z,K){const Y={totalCount:z.length,successCount:0};for(const k of z)try{await N(k,K)!==null&&(Y.successCount+=1)}catch(q){console.error("Failed to move a folder",q)}return Y}function O(z,K,...Y){return async k=>{try{const q=await z(...Y);return Array.prototype.concat(k,[q])}catch(q){if(K)return k;throw q}}}function x(z,K){const Y=[];for(const k of z)Y.push(O(L,!0,k,!0));for(const k of K)Y.push(O(_,!0,k,!0));return H(Y)}function I(z){return u.H.ignoreNextSave(),(0,a.i)().post("/api/dashboards/db/",{dashboard:z.dashboard,message:z.message??"",overwrite:z.overwrite??!1,folderUid:z.folderUid})}function L(z,K){return getBackendSrv().delete(`/api/folders/${z}?forceDeleteRules=false`,void 0,{showSuccessAlert:K})}function P(z){return(0,a.i)().post("/api/folders",z)}function N(z,K){const Y={parentUid:K.uid};return getBackendSrv().post(`/api/folders/${z}/move`,Y,{showErrorAlert:!1})}const F=1e3;function U(z,K,Y=l.SearchQueryType.Folder){return(0,a.i)().get("/api/search",{query:z,type:Y,permission:K,limit:F})}function j(z){return(0,a.i)().get(`/api/folders/${z}`)}function V(z){return(0,a.i)().get(`/api/folders/id/${z}`)}function _(z,K){return(0,a.i)().delete(`/api/dashboards/uid/${z}`,{showSuccessAlert:K})}function H(z){return z.reduce((K,Y)=>Promise.resolve(K).then(Y),[])}},1864:(G,A,e)=>{"use strict";e.d(A,{AK:()=>v,C2:()=>f,G7:()=>o,KQ:()=>i,MO:()=>l,Nw:()=>d,S9:()=>c,ZP:()=>p,Zc:()=>m,eh:()=>E,n$:()=>r,wg:()=>g});var n=e(20079),a=e(23757),o=(s=>(s[s.Gcom=0]="Gcom",s[s.Json=1]="Json",s))(o||{}),r=(s=>(s.DataSource="datasource",s.Constant="constant",s.LibraryPanel="libraryPanel",s))(r||{}),i=(s=>(s.New="new",s.Exists="exists",s.Different="different",s))(i||{});const g={meta:{updatedAt:"",orgName:""},dashboard:{},source:1,inputs:{},state:a.Gu.NotStarted},u=(0,n.oM)({name:"manageDashboards",initialState:g,reducers:{setGcomDashboard:(s,y)=>{s.dashboard={...y.payload.json,id:null},s.meta={updatedAt:y.payload.updatedAt,orgName:y.payload.orgName},s.source=0,s.state=a.Gu.Done},setJsonDashboard:(s,y)=>{s.dashboard={...y.payload,id:null},s.meta=g.meta,s.source=1,s.state=a.Gu.Done},clearDashboard:s=>{s.dashboard={},s.state=a.Gu.NotStarted},setInputs:(s,y)=>{s.inputs={dataSources:y.payload.filter(C=>C.type==="datasource"),constants:y.payload.filter(C=>C.type==="constant"),libraryPanels:s.inputs.libraryPanels||[]}},setLibraryPanelInputs:(s,y)=>{s.inputs.libraryPanels=y.payload},fetchFailed:s=>{s.dashboard={},s.state=a.Gu.Error},fetchDashboard:s=>{s.state=a.Gu.Loading}}}),{clearDashboard:l,setInputs:m,setGcomDashboard:c,setJsonDashboard:d,setLibraryPanelInputs:f,fetchFailed:E,fetchDashboard:v}=u.actions,p={importDashboard:u.reducer}},58796:(G,A,e)=>{"use strict";e.d(A,{FV:()=>i,JE:()=>l,Q$:()=>g,RF:()=>r,Yi:()=>u});var n=e(85445),a=e(88492),o=e(60025);function r(m={getBackendSrv:n.i}){return async c=>{const d=await m.getBackendSrv().get("/api/org");return c((0,o.jR)(d)),d}}function i(m={getBackendSrv:n.i}){return async(c,d)=>{const f=d().organization.organization;await m.getBackendSrv().put("/api/org",{name:f.name}),c((0,a.H7)(f.name)),c(r(m))}}function g(m,c={getBackendSrv:n.i}){return async d=>{const f=await c.getBackendSrv().post("/api/user/using/"+m);d((0,a.H7)(f.name))}}function u(m,c={getBackendSrv:n.i}){return async d=>{const f=await c.getBackendSrv().post("/api/orgs/",m);d(g(f.orgId))}}function l(m={getBackendSrv:n.i}){return async c=>{const d=await m.getBackendSrv().get("/api/user/orgs");return c((0,o.IM)(d)),d}}},60025:(G,A,e)=>{"use strict";e.d(A,{IM:()=>g,ZP:()=>l,jR:()=>i,xR:()=>r});var n=e(20079);const a={organization:{},userOrgs:[]},o=(0,n.oM)({name:"organization",initialState:a,reducers:{organizationLoaded:(m,c)=>({...m,organization:c.payload}),setOrganizationName:(m,c)=>({...m,organization:{...m.organization,name:c.payload}}),userOrganizationsLoaded:(m,c)=>({...m,userOrgs:c.payload})}}),{setOrganizationName:r,organizationLoaded:i,userOrganizationsLoaded:g}=o.actions,l={organization:o.reducer}},70797:(G,A,e)=>{"use strict";e.d(A,{Z:()=>p});var n=e(66681),a=e(85960),o=e(11795),r=e(81223),i=e(91),g=e(47257),u=e(76738),l=e(20249),m=e(89248),c=e(20994),d=e(53301),f=e(12702),E=e(93657),v=e(95162),h=e(29100);function p(C){const b=(0,g.wW)(y),S=(0,u.R9)(),D=new o.mi(C.data),{dataSummary:M}=D,T=s(C,M),R=(0,v.useDispatch)(),O=(0,E.h4)().getCurrent()?.getPanelById(C.panelId),x=()=>{c.Z.setObject(m.FL,f.Ok.Suggestions),R((0,d.g_)(!0))},I=()=>{O&&R((0,h.Kc)({panel:O,pluginId:"table"}))},L=P=>{O&&(R((0,h.Kc)({...P,panel:O})),P.transformations&&setTimeout(()=>{i.E1.partial({tab:"transform"})},100))};return a.createElement("div",{className:b.wrapper},a.createElement("div",{className:b.message},T),S.app===r.zj.PanelEditor&&M.hasData&&O&&a.createElement("div",{className:b.actions},C.suggestions&&a.createElement(a.Fragment,null,C.suggestions.map(P=>a.createElement(l.x,{key:P.name,icon:"process",onClick:()=>L(P)},P.name))),a.createElement(l.x,{icon:"table",onClick:I},"Switch to table"),a.createElement(l.x,{icon:"chart-line",onClick:x},"Open visualization suggestions")))}function s({data:C,fieldConfig:b,message:S,needsNumberField:D,needsTimeField:M,needsStringField:T},R){return S||(!C.series||C.series.length===0||C.series.every(O=>O.length===0)?b?.defaults.noValue??"No data":T&&!R.hasStringField?"Data is missing a string field":D&&!R.hasNumberField?"Data is missing a number field":M&&!R.hasTimeField?"Data is missing a time field":"Cannot visualize data")}const y=C=>({wrapper:(0,n.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}),message:(0,n.css)({textAlign:"center",color:C.colors.text.secondary,fontSize:C.typography.size.lg,width:"100%"}),actions:(0,n.css)({marginTop:C.spacing(2),display:"flex",height:"50%",maxHeight:"150px",columnGap:C.spacing(1),rowGap:C.spacing(1),width:"100%",maxWidth:"600px"})})},25802:(G,A,e)=>{"use strict";e.d(A,{F:()=>u,X:()=>l});var n=e(85960),a=e(12932),o=e(73667),r=e(49199),i=e(95162);class g extends n.PureComponent{constructor(c){super(c)}render(){const c={display:"flex",alignItems:"center",justifyContent:"center",height:"100%"};return n.createElement("div",{style:c},n.createElement(r.b,{severity:i.AppNotificationSeverity.Error,...this.props}))}}function u(m,c){const d=class extends n.PureComponent{render(){const v=n.createElement(n.Fragment,null,"Check the server startup logs for more information. ",n.createElement("br",null),"If this plugin was loaded from Git, then make sure it was compiled.");return n.createElement(g,{title:`Error loading: ${m.id}`,text:v})}},f=new a.c(d);return f.meta=m,f.loadError=!0,f}function l(m,c){const d=class extends n.PureComponent{render(){return n.createElement(g,{title:`Panel plugin not found: ${m}`})}},f=new a.c(c?()=>null:d);return f.meta={id:m,name:m,sort:100,type:o.zV.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},f}},33088:(G,A,e)=>{"use strict";e.d(A,{$:()=>E});var n=e(85960),a=e(58715),o=e(17338),r=e(77786),i=e(24372),g=e(12399),u=e(47257),l=e(76738),m=e(8958),c=e(49683),d=e(20229);const f={defaults:{},overrides:[]};function E(h){const{pluginId:p,data:s,timeZone:y=(0,a.Z)(),options:C={},width:b,height:S,title:D,onOptionsChange:M=()=>{},onChangeTimeRange:T=()=>{},onFieldConfigChange:R=()=>{},fieldConfig:O=f}=h,x=(0,u.l4)(),I=(0,g.J)(),L=(0,n.useMemo)(()=>I.replace.bind(I),[I]),[P,N]=(0,n.useState)((0,d.q1)(p)),[F,U]=(0,n.useState)(),j=v(P,C,O),{dataLinkPostProcessor:V}=(0,l.R9)(),_=(0,o.Cc)(P,j?.fieldConfig,s,y,x,L,V);if((0,n.useEffect)(()=>{P&&P.hasPluginId(p)||(0,d.Ub)(p).then(z=>N(z)).catch(z=>{U(z.message)})},[p,P]),F)return n.createElement("div",null,"Failed to load plugin: ",F);if(!P||!P.hasPluginId(p))return n.createElement("div",null,"Loading plugin panel...");if(!P.panel)return n.createElement("div",null,"Seems like the plugin you are trying to load does not have a panel component.");if(!_)return n.createElement("div",null,"No panel data");const H=P.panel;return n.createElement(m.z4,{dependencies:[P,s]},n.createElement(r.b,{meta:P.meta},n.createElement(H,{id:1,data:_,title:D,timeRange:_.timeRange,timeZone:y,options:j.options,fieldConfig:O,transparent:!1,width:b,height:S,renderCounter:0,replaceVariables:z=>z,onOptionsChange:M,onFieldConfigChange:R,onChangeTimeRange:T,eventBus:c.h$})))}function v(h,p,s){return(0,n.useMemo)(()=>{if(h)return(0,i.d4)({plugin:h,currentOptions:p,currentFieldConfig:s,isAfterPluginChange:!1})},[h,s,p])}},26469:(G,A,e)=>{"use strict";e.d(A,{X:()=>f});var n=e(66681),a=e(85960),o=e(34785),r=e(73667),i=e(1058),g=e(92369),u=e(47257),l=e(75064),m=e(15343),c=e(35029);const d=38,f=({isCurrent:s,title:y,plugin:C,onClick:b,onDelete:S,disabled:D,showBadge:M,description:T,children:R})=>{const O=(0,u.wW)(h),x=D||C.state===r.BV.deprecated,I=(0,n.cx)({[O.item]:!0,[O.itemDisabled]:x,[O.current]:s});return a.createElement("div",{className:I,"aria-label":g.wl.components.PluginVisualization.item(C.name),"data-testid":g.wl.components.PluginVisualization.item(C.name),onClick:x?void 0:b,title:s?"Click again to close this section":C.name},a.createElement("img",{className:(0,n.cx)(O.img,{[O.disabled]:x}),src:C.info.logos.small,alt:""}),a.createElement("div",{className:(0,n.cx)(O.itemContent,{[O.disabled]:x})},a.createElement("div",{className:O.name},y),T?a.createElement("span",{className:O.description},T):null,R),M&&a.createElement("div",{className:(0,n.cx)(O.badge,{[O.disabled]:x})},a.createElement(p,{plugin:C})),S&&a.createElement(l.h,{name:"trash-alt",onClick:L=>{L.stopPropagation(),S()},className:O.deleteButton,"aria-label":"Delete button on panel type card",tooltip:"Delete"}))},E=({children:s,hasDescription:y,hasDelete:C})=>{const b=(0,u.wW)(h),S=(0,u.wW)(v);return a.createElement("div",{className:b.item},a.createElement(o.Z,{className:(0,n.cx)(b.img,S.image),width:d,height:d}),a.createElement("div",{className:b.itemContent},a.createElement("div",{className:b.name},a.createElement(o.Z,{width:160})),y?a.createElement(o.Z,{containerClassName:b.description,width:80}):null,s),C&&a.createElement(o.Z,{containerClassName:(0,n.cx)(b.deleteButton,S.deleteButton),width:16,height:16}))};f.displayName="PanelTypeCard",f.Skeleton=E;const v=()=>({deleteButton:(0,n.css)({lineHeight:1}),image:(0,n.css)({lineHeight:1})}),h=s=>({item:(0,n.css)({position:"relative",display:"flex",flexShrink:0,cursor:"pointer",background:s.colors.background.secondary,borderRadius:s.shape.radius.default,boxShadow:s.shadows.z1,border:`1px solid ${s.colors.background.secondary}`,alignItems:"center",padding:s.spacing(1),width:"100%",overflow:"hidden",transition:s.transitions.create(["background"],{duration:s.transitions.duration.short}),"&:hover":{background:s.colors.emphasize(s.colors.background.secondary,.03)}}),itemContent:(0,n.css)({overflow:"hidden",position:"relative",padding:s.spacing(0,1)}),itemDisabled:(0,n.css)({cursor:"default","&, &:hover":{background:s.colors.action.disabledBackground}}),current:(0,n.css)({label:"currentVisualizationItem",border:`1px solid ${s.colors.primary.border}`,background:s.colors.action.selected}),disabled:(0,n.css)({opacity:.6,filter:"grayscale(1)",cursor:"default",pointerEvents:"none"}),name:(0,n.css)({textOverflow:"ellipsis",overflow:"hidden",fontSize:s.typography.size.sm,fontWeight:s.typography.fontWeightMedium,width:"100%"}),description:(0,n.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",color:s.colors.text.secondary,fontSize:s.typography.bodySmall.fontSize,fontWeight:s.typography.fontWeightLight,width:"100%",maxHeight:"4.5em"}),img:(0,n.css)({maxHeight:d,width:d,display:"flex",alignItems:"center"}),badge:(0,n.css)({background:s.colors.background.primary}),deleteButton:(0,n.css)({cursor:"pointer",marginLeft:"auto"})}),p=({plugin:s})=>(0,i.x)(s.signature)?a.createElement(m.o,{status:s.signature}):a.createElement(c.u,{state:s.state});p.displayName="PanelPluginBadge"},66372:(G,A,e)=>{"use strict";e.d(A,{G:()=>l});var n=e(66681),a=e(85960),o=e(90857),r=e(47257),i=e(4211),g=e(99602),u=e(88566);function l({pluginId:c,searchQuery:d,onChange:f,isWidget:E=!1}){const v=(0,r.wW)(m),h=(0,a.useMemo)(()=>o.config.featureToggles.vizAndWidgetSplit?E?(0,g.Ry)():(0,g.hK)():(0,g.xW)(),[E]),p=(0,a.useMemo)(()=>(0,g.rw)(h,d,c),[h,d,c]);return p.length===0?a.createElement(i.K,null,"Could not find anything matching your query"):a.createElement("div",{className:v.grid},p.map(s=>a.createElement(u.u,{disabled:!1,key:s.id,isCurrent:s.id===c,plugin:s,onClick:y=>f({pluginId:s.id,withModKey:y.metaKey||y.ctrlKey||y.altKey})})))}const m=c=>({grid:(0,n.css)({maxWidth:"100%",display:"grid",gridGap:c.spacing(.5)}),heading:(0,n.css)({...c.typography.h5,margin:c.spacing(0,.5,1)})})},88566:(G,A,e)=>{"use strict";e.d(A,{u:()=>o});var n=e(85960),a=e(26469);const o=({isCurrent:r,plugin:i,onClick:g,disabled:u})=>n.createElement(a.X,{title:i.name,plugin:i,description:i.info.description,onClick:g,isCurrent:r,disabled:u,showBadge:!0});o.displayName="VizTypePickerPlugin"},44985:(G,A,e)=>{"use strict";e.d(A,{H:()=>g,n:()=>i});var n=e(45878),a=e(1930),o=e(32205),r=e(43282);const i=u=>{const l=u.field.links;if(!(!l||l.length===0))return{getLinks:m=>{const c={};if(u.view){const{dataFrame:f}=u.view;c.__series={value:{name:f.name,refId:f.refId},text:"Series"};const E=u.colIndex!==void 0?f.fields[u.colIndex]:void 0;if(E){if(c.__field={value:{name:E.name,labels:E.labels},text:"Field"},u.rowIndex!==void 0&&u.rowIndex>=0){const{timeField:v}=(0,n.sV)(f);c.__value={value:{raw:E.values[u.rowIndex],numeric:u.display.numeric,text:(0,a.zc)(u.display),time:v?v.values[u.rowIndex]:void 0},text:"Value"}}u.view&&(c.__data={value:{name:f.name,refId:f.refId,fields:(0,o.z)({frame:f,rowIndex:u.rowIndex})},text:"Data"})}else c.__value={value:{raw:u.display.numeric,numeric:u.display.numeric,text:(0,a.zc)(u.display),calc:u.name},text:"Value"}}else console.log("VALUE",u);const d=(f,E,v)=>{const h={...c,...E};return m(f,h,v)};return l.map(f=>(0,r.Bq)().getDataLinkUIModel(f,d,u))}}},g=(u,l)=>{const m=u.links;if(!(!m||m.length===0))return{getLinks:()=>m.map(c=>(0,r.Bq)().getDataLinkUIModel(c,l||u.replaceVariables,u))}}},43282:(G,A,e)=>{"use strict";e.d(A,{Bq:()=>O,PR:()=>y,PW:()=>S});var n=e(56375),a=e.n(n),o=e(56582),r=e(89306),i=e(94372),g=e(58309),u=e(12693),l=e(86734),m=e(173),c=e(20440),d=e(12399),f=e(1713),E=e(67954);const v=[{value:`${o.W.keepTime}`,label:"Time range",documentation:"Adds current time range",origin:r.L8.BuiltIn},{value:`${o.W.timeRangeFrom}`,label:"Time range: from",documentation:"Adds current time range's from value",origin:r.L8.BuiltIn},{value:`${o.W.timeRangeTo}`,label:"Time range: to",documentation:"Adds current time range's to value",origin:r.L8.BuiltIn}],h=[{value:`${o.W.seriesName}`,label:"Name",documentation:"Name of the series",origin:r.L8.Series}],p=[{value:`${o.W.valueNumeric}`,label:"Numeric",documentation:"Numeric representation of selected value",origin:r.L8.Value},{value:`${o.W.valueText}`,label:"Text",documentation:"Text representation of selected value",origin:r.L8.Value},{value:`${o.W.valueRaw}`,label:"Raw",documentation:"Raw value",origin:r.L8.Value}],s=x=>x.includes(".")||x.trim().includes(" ")?`["${x}"]`:`.${x}`,y=()=>[...(0,d.J)().getVariables().map(x=>({value:x.name,label:x.name,origin:r.L8.Template})),{value:`${o.W.includeVars}`,label:"All variables",documentation:"Adds current variables",origin:r.L8.Template},...v],C=x=>{const I=[];for(const P of x)for(const N of P.fields)if(N.labels)for(const F of Object.keys(N.labels))I.push(F);const L=(0,n.chain)(I).flatten().uniq().value();return[{value:`${o.W.fieldName}`,label:"Name",documentation:"Field name of the clicked datapoint (in ms epoch)",origin:r.L8.Field},...L.map(P=>({value:`__field.labels${s(P)}`,label:`labels.${P}`,documentation:`${P} label value`,origin:r.L8.Field}))]},b=x=>{let I,L;const P=[],N={};if(x.length!==1)return[];const F=x[0];for(const U of F.fields){const j=(0,i.CZ)(U,F,x);N[j]||(P.push({value:`__data.fields${s(j)}`,label:`${j}`,documentation:`Formatted value for ${j} on the same row`,origin:r.L8.Fields}),N[j]=!0,!I&&U.type===g.fS.number&&(I={...U,name:j}),!L&&U.config.displayName&&U.config.displayName!==U.name&&(L={...U,name:j}))}return P.length&&P.push({value:"__data.fields[0]",label:"Select by index",documentation:"Enter the field order",origin:r.L8.Fields}),I&&(P.push({value:`__data.fields${s(I.name)}.numeric`,label:"Show numeric value",documentation:"the numeric field value",origin:r.L8.Fields}),P.push({value:`__data.fields${s(I.name)}.text`,label:"Show text value",documentation:"the text value",origin:r.L8.Fields})),L&&P.push({value:`__data.fields${s(L.name)}`,label:"Select by title",documentation:"Use the title to pick the field",origin:r.L8.Fields}),P},S=(x,I)=>{const L={value:`${o.W.valueTime}`,label:"Time",documentation:"Time value of the clicked datapoint (in ms epoch)",origin:r.L8.Value};return I===r.o3.Values?[...h,...C(x),...p,L,...b(x),...y()]:[...h,...C(x),...b(x),...y()]},D=x=>{const I=C(x),L={value:`${DataLinkBuiltInVars.valueCalc}`,label:"Calculation name",documentation:"Name of the calculation the value is a result of",origin:VariableOrigin.Value};return[...h,...I,...p,L,...y()]};class M{constructor(){this.getDataLinkUIModel=(I,L,P)=>{let N=I.url;I.onBuildUrl&&(N=I.onBuildUrl({origin:P,replaceVariables:L}));const F={href:u.u.assureBaseUrl(N.replace(/\n/g,"")),title:I.title??"",target:I.targetBlank?"_blank":void 0,origin:P};return L&&(F.href=L(F.href,void 0,f.b8.UriEncode),F.title=L(I.title)),I.onClick&&(F.onClick=U=>{I.onClick({origin:P,replaceVariables:L,e:U})}),F.href=(0,E.iE)().disableSanitizeHtml?F.href:l.QX.sanitizeUrl(F.href),F}}getLinkUrl(I){let L={};I.keepTime&&(L[`$${o.W.keepTime}`]=!0),I.includeVars&&(L[`$${o.W.includeVars}`]=!0);let P=u.u.assureBaseUrl(m.Cj.appendQueryToUrl(I.url||"",m.Cj.toUrlParams(L)));return P=(0,d.J)().replace(P),(0,E.iE)().disableSanitizeHtml?P:l.QX.sanitizeUrl(P)}getAnchorInfo(I){const L=(0,d.J)();return{href:this.getLinkUrl(I),title:L.replace(I.title||""),tooltip:L.replace(I.tooltip||"")}}getPanelLinkAnchorInfo(I,L){(0,c.d)("link_srv.ts","getPanelLinkAnchorInfo","getDataLinkUIModel");const P=(N,F,U)=>(0,d.J)().replace(N,{...L,...F},U);return this.getDataLinkUIModel(I,P,{})}}let T;function R(x){T=x}function O(){return T||(T=new M),T}},29100:(G,A,e)=>{"use strict";e.d(A,{JI:()=>u,Kc:()=>m,ih:()=>c,qj:()=>l});var n=e(24372),a=e(1706),o=e(25802),r=e(69396),i=e(14914),g=e(79248);function u(f){return async(E,v)=>{if(f.libraryPanel?.uid&&!("model"in f.libraryPanel)){E(d(f));return}let h=f.type,p=v().plugins.panels[h];if(!p)try{p=await E((0,r.Ro)(h))}catch{p=(0,o.X)(h,h==="row")}f.plugin||await f.pluginLoaded(p),E((0,g.bc)({key:f.key,plugin:p}))}}function l(f){return E=>{E((0,g.WJ)({key:f}))}}function m({panel:f,pluginId:E,options:v,fieldConfig:h,transformations:p}){return async(s,y)=>{if(f.type===E&&!v&&!h&&!p)return;let b=y().plugins.panels[E];if(b||(b=await s((0,r.Ro)(E))),f.type!==E&&f.changePlugin(b),v||h||p){const S=(0,n.d4)({plugin:b,currentOptions:v||f.options,currentFieldConfig:h||f.fieldConfig,isAfterPluginChange:!1});f.options=S.options,f.fieldConfig=S.fieldConfig,f.transformations=p||f.transformations,f.configRev++}f.generateNewKey(),s((0,g.bc)({key:f.key,plugin:b}))}}function c(f,E){return async(v,h)=>{const p=E.model.type,s=f.type;if(f.restoreModel({...E.model,gridPos:f.gridPos,id:f.id,libraryPanel:E}),f.getQueryRunner().clearLastResult(),s!==p){let C=h().plugins.panels[p];C||(C=await v((0,r.Ro)(p))),await f.pluginLoaded(C),f.generateNewKey(),await v((0,g.bc)({key:f.key,plugin:C}))}else{const y=f.key;f.generateNewKey(),v((0,g.mr)({oldKey:y,newKey:f.key}))}f.configRev=0,f.hasSavedPanelEditChange=!0,f.refresh(),f.events.publish(i.pO),f.events.publish(i.Wj)}}function d(f){return async(E,v)=>{const h=f.libraryPanel.uid;try{const p=await(0,a.Mh)(h,!0);f.initLibraryPanel(p),await E(u(f));const s=v().dashboard.getModel();if(f.repeat&&s){const y=s.panels.findIndex(C=>C.id===f.id);s.repeatPanel(f,y),s.sortPanelsByGridPos(),s.events.publish(new i._B)}}catch(p){console.log("ERROR: ",p),E((0,g.bc)({key:f.key,plugin:(0,o.X)("Unable to load library panel: "+h,!1)}))}}}},79248:(G,A,e)=>{"use strict";e.d(A,{Vl:()=>m,WJ:()=>l,ZP:()=>d,bc:()=>r,mr:()=>u,o8:()=>i,pC:()=>g});var n=e(20079);const a={},o=(0,n.oM)({name:"panels",initialState:a,reducers:{panelModelAndPluginReady:(f,E)=>{f[E.payload.key]={plugin:E.payload.plugin}},changePanelKey:(f,E)=>{f[E.payload.newKey]=f[E.payload.oldKey],delete f[E.payload.oldKey]},removePanel:(f,E)=>{delete f[E.payload.key]},removeAllPanels:f=>{Object.keys(f).forEach(E=>delete f[E])},setPanelInstanceState:(f,E)=>{f[E.payload.key].instanceState=E.payload.value},setPanelAngularComponent:(f,E)=>{const v=f[E.payload.key];v.angularComponent=E.payload.angularComponent}}}),{panelModelAndPluginReady:r,setPanelAngularComponent:i,setPanelInstanceState:g,changePanelKey:u,removePanel:l,removeAllPanels:m}=o.actions,d={panels:o.reducer}},99602:(G,A,e)=>{"use strict";e.d(A,{Ry:()=>i,hK:()=>g,rw:()=>u,xW:()=>r});var n=e(73667),a=e(49531),o=e(67954);function r(){const l=o.config.panels;return Object.keys(l).filter(m=>l[m].hideFromList===!1).map(m=>l[m]).sort((m,c)=>m.sort-c.sort)}function i(){return r().filter(l=>!!l.skipDataQuery)}function g(){return r().filter(l=>!l.skipDataQuery)}function u(l,m,c){if(!m.length)return l.filter(h=>h.state===n.BV.deprecated?c===h.id:!0);const d=(0,a.x6)(m).toLowerCase(),f=[],E=[],v="graph".startsWith(d);for(const h of l){if(h.state===n.BV.deprecated&&c!==h.id)continue;const s=h.name.toLowerCase().indexOf(d);s===0?f.push(h):s>0?E.push(h):v&&h.id==="timeseries"&&f.push(h)}return f.concat(E)}},71746:(G,A,e)=>{"use strict";e.d(A,{r0:()=>c});var n=e(56375),a=e.n(n),o=e(12693),r=e(173),i=e(71244),g=e(91),u=e(76825);const l={kiosk:!0,autofitpanels:!0,orgId:!0};class m{constructor(){this.urls=[],this.index=0,this.numberOfLoops=0,this.isPlaying=!1,this.locationUpdated=this.locationUpdated.bind(this),this.api=(0,u.K9)()}next(){if(clearTimeout(this.nextTimeoutId),this.index>this.urls.length-1){if(this.numberOfLoops++,this.numberOfLoops>=3){window.location.href=this.startUrl;return}this.index=0}const E=this.urls[this.index],v=g.E1.getSearchObject(),h=(0,n.pickBy)(v,(s,y)=>l[y]),p=o.u.stripBaseFromUrl(E);this.index++,this.validPlaylistUrl=p,this.nextTimeoutId=setTimeout(()=>this.next(),this.interval),g.E1.push(p+"?"+r.Cj.toUrlParams(h))}prev(){this.index=Math.max(this.index-2,0),this.next()}locationUpdated(f){f.pathname!==this.validPlaylistUrl&&this.stop()}async start(f){this.stop(),this.startUrl=window.location.href,this.index=0,this.isPlaying=!0,this.locationListenerUnsub=g.E1.getHistory().listen(this.locationUpdated);const E=[];let v=await this.api.getPlaylist(f);if(!v.items?.length)return;this.interval=i.intervalToMs(v.interval);const h=await(0,u.jc)(v.items);for(const p of h)if(p.dashboards)for(const s of p.dashboards)E.push(s.url);E.length&&(this.urls=E,this.isPlaying=!0,this.next())}stop(){this.isPlaying&&(this.index=0,this.isPlaying=!1,this.locationListenerUnsub&&this.locationListenerUnsub(),this.nextTimeoutId&&clearTimeout(this.nextTimeoutId),g.E1.getSearchObject().kiosk&&g.E1.partial({kiosk:null}))}}const c=new m},76825:(G,A,e)=>{"use strict";e.d(A,{Ds:()=>y,K9:()=>C,d5:()=>s,jc:()=>p});var n=e(81838),a=e(73891),o=e(85445),r=e(90857),i=e(88492),g=e(93991),u=e(8124),l=e(43310),m=e(59767),c=e(30824);class d{async getAllPlaylist(){return(0,o.i)().get("/api/playlists/")}async getPlaylist(S){const D=await(0,o.i)().get(`/api/playlists/${S}`);return await v(D),D}async createPlaylist(S){await h(()=>(0,o.i)().post("/api/playlists",S))}async updatePlaylist(S){await h(()=>(0,o.i)().put(`/api/playlists/${S.uid}`,S))}async deletePlaylist(S){await h(()=>(0,o.i)().delete(`/api/playlists/${S}`),"Playlist deleted")}}class f{constructor(){this.apiVersion="playlist.grafana.app/v0alpha1",this.playlistAsK8sResource=S=>({apiVersion:this.apiVersion,kind:"Playlist",metadata:{name:S.uid},spec:{title:S.name,interval:S.interval,items:S.items??[]}}),this.url=`/apis/${this.apiVersion}/namespaces/${r.config.namespace}/playlists`}async getAllPlaylist(){return(await(0,o.i)().get(this.url)).items.map(E)}async getPlaylist(S){const D=await(0,o.i)().get(this.url+"/"+S),M=E(D);return await v(M),M}async createPlaylist(S){const D=this.playlistAsK8sResource(S);await h(()=>(0,o.i)().post(this.url,D))}async updatePlaylist(S){const D=this.playlistAsK8sResource(S);await h(()=>(0,o.i)().put(`${this.url}/${S.uid}`,D))}async deletePlaylist(S){await h(()=>(0,o.i)().delete(`${this.url}/${S}`),"Playlist deleted")}}function E(b){const{spec:S,metadata:D}=b;return{uid:D.name,name:S.title,interval:S.interval,items:S.items}}async function v(b){if(b?.items){for(const S of b.items)if(S.type==="dashboard_by_id"){S.type="dashboard_by_uid";const D=await(0,o.i)().get(`/api/dashboards/ids/${S.value}`);D?.length&&(S.value=D[0])}}}async function h(b,S="Playlist saved"){try{await b(),(0,m.WI)((0,i.$l)((0,g.AT)(S)))}catch(D){D instanceof Error&&(0,m.WI)((0,i.$l)((0,g.t_)("Unable to save playlist",D)))}}async function p(b){let S=0;if(!b?.length)return[];const D=[];for(const R of b){const O={query:"*",kind:["dashboard"],limit:1e3};switch(R.type){case"dashboard_by_id":throw new Error("invalid item (with id)");case"dashboard_by_uid":O.uid=[R.value];break;case"dashboard_by_tag":O.tags=[R.value];break}D.push({refId:`${S++}`,queryType:l.hR.Search,search:O})}if(!r.config.featureToggles.panelTitleSearch){const R=(0,c.getGrafanaSearcher)(),O=[];for(let x=0;x<D.length;x++){const I=(await R.search(D[x].search)).view;O.push({...b[x],dashboards:I.map(L=>({...L}))})}return O}const M=await(0,u.e)(),T=await(0,n.n)(M.query({targets:D}));if(T.data.length!==b.length)throw new Error("unexpected result size");return b.map((R,O)=>{const x=new a.U(T.data[O]);return{...R,dashboards:x.map(I=>({...I}))}})}function s(){return{items:[],interval:"5m",name:"",uid:""}}function y(b,S){return S?.length?(S=S.toLowerCase(),b.filter(D=>D.name.toLowerCase().includes(S))):b}function C(){return r.config.featureToggles.kubernetesPlaylists?new f:new d}},3453:(G,A,e)=>{"use strict";e.d(A,{$F:()=>u,E1:()=>f,GP:()=>h,GV:()=>g,P6:()=>p,Tk:()=>v,id:()=>E,jL:()=>l});var n=e(55583),a=e(85445),o=e(78105),r=e(38821),i=e(67187);async function g(y){const C=await m(y),b=!!C,[S,D,M]=await Promise.all([f(),c(y,b),d(y)]),T=S.find(O=>O.id===y),R=T?.dependencies||C?.json?.dependencies;return{grafanaDependency:R?.grafanaDependency??R?.grafanaVersion??"",pluginDependencies:R?.plugins||[],links:T?.info.links||C?.json?.info.links||[],readme:M||C?.readme,versions:D,statusContext:C?.statusContext??""}}async function u(){try{const{items:y}=await(0,a.i)().get(`${r.tB}/plugins`,{includeDeprecated:!0});return y.filter(i.Ok)}catch(y){if((0,a.kW)(y))return y.isHandled=!0,console.error("Failed to fetch plugins from catalog (default https://grafana.com/api/plugins)"),[];throw y}}async function l(){try{return await(0,a.i)().get(`${r.O2}/errors`)}catch{return[]}}async function m(y){try{return await(0,a.i)().get(`${r.tB}/plugins/${y}`,{})}catch(C){(0,a.kW)(C)&&(C.isHandled=!0);return}}async function c(y,C){try{return C?((await(0,a.i)().get(`${r.tB}/plugins/${y}/versions`)).items||[]).map(S=>({version:S.version,createdAt:S.createdAt,isCompatible:S.isCompatible,grafanaDependency:S.grafanaDependency})):[]}catch(b){return(0,a.kW)(b)&&(b.isHandled=!0),[]}}async function d(y){try{const C=await(0,a.i)().get(`${r.O2}/${y}/markdown/README`);return C?(0,n.a)(C):""}catch(C){return(0,a.kW)(C)&&(C.isHandled=!0),""}}async function f(){return(await(0,a.i)().get(`${r.O2}`,(0,o.y)({embedded:0}))).filter(i.W5)}async function E(){const{items:y}=await(0,a.i)().get(`${r.GB}/plugins`);return y}async function v(y){return await(0,a.i)().post(`${r.O2}/${y}/install`,void 0,{showErrorAlert:!1})}async function h(y){return await(0,a.i)().post(`${r.O2}/${y}/uninstall`)}async function p(y,C){return(await(0,a.i)().datasourceRequest({url:`/api/plugins/${y}/settings`,method:"POST",data:C}))?.data}const s={getRemotePlugins:u,getInstalledPlugins:f,installPlugin:v,uninstallPlugin:h}},99544:(G,A,e)=>{"use strict";e.d(A,{L:()=>r});var n=e(66681),a=e(85960),o=e(47257);const r=({children:g,wrap:u,className:l})=>{const m=(0,o.l4)(),c=i(m,u);return a.createElement("div",{className:(0,n.cx)(c.container,l)},g)},i=(g,u)=>({container:(0,n.css)`
    display: flex;
    flex-direction: row;
    flex-wrap: ${u?"wrap":"no-wrap"};
    & > * {
      margin-bottom: ${g.spacing()};
      margin-right: ${g.spacing()};
    }
    & > *:last-child {
      margin-right: 0;
    }
  `})},38821:(G,A,e)=>{"use strict";e.d(A,{GB:()=>a,O2:()=>n,tB:()=>o,uJ:()=>r});const n="/api/plugins",a="/api/instance",o="/api/gnet",r="plugins"},67187:(G,A,e)=>{"use strict";e.d(A,{AA:()=>s,HT:()=>M,Nh:()=>p,Ok:()=>R,RU:()=>S,Uj:()=>h,W5:()=>T,XB:()=>b,ZG:()=>E,fG:()=>D,uR:()=>c});var n=e(73667),a=e(61385),o=e(90857),r=e(11855),i=e(67954),g=e(49683),u=e(46783),l=e(95162),m=e(87809);function c({local:L=[],remote:P=[],instance:N=[],pluginErrors:F}){const U=[],j=y(F),V=N.reduce((_,H)=>(_.add(H.pluginSlug),_),new Set);return L.forEach(_=>{const H=P.find(K=>K.slug===_.id),z=j[_.id];H||U.push(d(_,void 0,z))}),P.forEach(_=>{const H=L.find(Y=>Y.id===_.slug),z=j[_.slug];if(!(_.status===m.Bs.Deprecated&&!H)){const Y=d(H,_,z);i.default.featureToggles.managedPluginsInstall&&o.config.pluginAdminExternalManageEnabled&&(Y.isFullyInstalled=V.has(_.slug)&&Y.isInstalled,Y.isInstalled=V.has(_.slug)||Y.isInstalled),U.push(Y)}}),U}function d(L,P,N){return!L&&P?f(P,N):L&&!P?E(L,N):v(L,P,N)}function f(L,P){const{name:N,slug:F,description:U,version:j,orgName:V,popularity:_,downloads:H,typeCode:z,updatedAt:K,createdAt:Y,status:k,angularDetected:q}=L,X=!!P||x(z);return{description:U,downloads:H,id:F,info:{logos:{small:`https://grafana.com/api/plugins/${F}/versions/${j}/logos/small`,large:`https://grafana.com/api/plugins/${F}/versions/${j}/logos/large`}},name:N,orgName:V,popularity:_,publishedAt:Y,signature:C({remote:L,error:P}),updatedAt:K,hasUpdate:!1,isPublished:!0,isInstalled:X,isDisabled:X,isDeprecated:k===m.Bs.Deprecated,isCore:L.internal,isDev:!1,isEnterprise:k===m.Bs.Enterprise,type:z,error:P?.errorCode,angularDetected:q,isFullyInstalled:X}}function E(L,P){const{name:N,info:{description:F,version:U,logos:j,updated:V,author:_},id:H,dev:z,type:K,signature:Y,signatureOrg:k,signatureType:q,hasUpdate:X,accessControl:te,angularDetected:se}=L,de=!!P||x(K);return{description:F,downloads:0,id:H,info:{logos:j},name:N,orgName:_.name,popularity:0,publishedAt:"",signature:C({local:L,error:P}),signatureOrg:k,signatureType:q,updatedAt:V,installedVersion:U,hasUpdate:X,isInstalled:!0,isDisabled:de,isCore:Y==="internal",isPublished:!1,isDeprecated:!1,isDev:!!z,isEnterprise:!1,type:K,error:P?.errorCode,accessControl:te,angularDetected:se,isFullyInstalled:!0}}function v(L,P,N){const F=L?.info.version,U=P?.slug||L?.id||"",j=L?.type||P?.typeCode,V=!!N||x(j);let _={small:`/public/img/icn-${j}.svg`,large:`/public/img/icn-${j}.svg`};return P?_={small:`https://grafana.com/api/plugins/${U}/versions/${P.version}/logos/small`,large:`https://grafana.com/api/plugins/${U}/versions/${P.version}/logos/large`}:L&&L.info.logos&&(_=L.info.logos),{description:L?.info.description||P?.description||"",downloads:P?.downloads||0,hasUpdate:L?.hasUpdate||!1,id:U,info:{logos:_},isCore:!!(P?.internal||L?.signature===n.Xy.internal),isDev:!!L?.dev,isEnterprise:P?.status===m.Bs.Enterprise,isInstalled:!!L||V,isDisabled:V,isDeprecated:P?.status===m.Bs.Deprecated,isPublished:!0,name:P?.name||L?.name||"",orgName:P?.orgName||L?.info.author.name||"",popularity:P?.popularity||0,publishedAt:P?.createdAt||"",type:j,signature:C({local:L,remote:P,error:N}),signatureOrg:L?.signatureOrg||P?.versionSignedByOrgName,signatureType:L?.signatureType||P?.versionSignatureType||P?.signatureType||void 0,updatedAt:P?.updatedAt||L?.info.updated||"",installedVersion:F,error:N?.errorCode,accessControl:L?.accessControl,angularDetected:L?.angularDetected||P?.angularDetected,isFullyInstalled:!!L||V}}const h=L=>`${o.config.pluginCatalogURL}${L}`;var p=(L=>(L.nameAsc="nameAsc",L.nameDesc="nameDesc",L.updated="updated",L.published="published",L.downloads="downloads",L))(p||{});const s=(L,P)=>{const N={nameAsc:(F,U)=>F.name.localeCompare(U.name),nameDesc:(F,U)=>U.name.localeCompare(F.name),updated:(F,U)=>(0,a.J)(U.updatedAt).valueOf()-(0,a.J)(F.updatedAt).valueOf(),published:(F,U)=>(0,a.J)(U.publishedAt).valueOf()-(0,a.J)(F.publishedAt).valueOf(),downloads:(F,U)=>U.downloads-F.downloads};return N[P]?L.sort(N[P]):L};function y(L=[]){return L.reduce((P,N)=>(P[N.pluginId]=N,P),{})}function C(L){const{error:P,local:N,remote:F}=L;if(P)switch(P.errorCode){case n.w2.invalidSignature:return n.Xy.invalid;case n.w2.missingSignature:return n.Xy.missing;case n.w2.modifiedSignature:return n.Xy.modified}return N?.signature?N.signature:F?.signatureType&&F?.versionSignatureType?n.Xy.valid:n.Xy.missing}const b=()=>(0,u.i)().get("/api/frontend/settings").then(L=>{o.config.panels=L.panels});function S(L){if(!L)return;const[P]=L.filter(N=>!!N.isCompatible);return P}const D=()=>o.config.pluginAdminEnabled,M=(L,P,N)=>{const F=o.config.pluginAdminExternalManageEnabled,U=g.Vt.hasPermission(l.AccessControlAction.PluginsInstall),j=!!N;return L.type===n.zV.renderer||L.type===n.zV.secretsmanager||L.isEnterprise&&!(0,r.v)("enterprise.plugins")||L.isDev||!U&&!F||!L.isPublished||!j||!P},T=L=>O(L.id),R=L=>O(L.slug);function O(L){const{pluginCatalogHiddenPlugins:P}=o.config;return!P.includes(L)}function x(L){return L===n.zV.secretsmanager&&!o.config.secretsManagerPluginEnabled}function I(L){return L?.signature==="internal"}},69396:(G,A,e)=>{"use strict";e.d(A,{DD:()=>C,LP:()=>I,N9:()=>T,Qd:()=>p,Ro:()=>L,Tz:()=>O,bQ:()=>R,bp:()=>s,m3:()=>x,tQ:()=>y,wx:()=>b});var n=e(20079),a=e(16226),o=e(21964),r=e(85431),i=e(82846),g=e(32631),u=e(81838),l=e(90857),m=e(85445),c=e(67954),d=e(20229),f=e(99109),E=e(3453),v=e(38821),h=e(67187);const p=(0,n.hg)(`${v.uJ}/fetchAll`,async(P,N)=>{try{N.dispatch({type:`${v.uJ}/fetchLocal/pending`}),N.dispatch({type:`${v.uJ}/fetchRemote/pending`});const F=l.config.pluginAdminExternalManageEnabled&&c.default.featureToggles.managedPluginsInstall?(0,a.D)((0,E.id)()):(0,o.of)(void 0),U=500,j=(0,a.D)((0,E.jL)()),V=(0,a.D)((0,E.E1)()),_=(0,a.D)((0,E.$F)()).pipe((0,r.K)(H=>(N.dispatch({type:`${v.uJ}/fetchRemote/rejected`}),console.error(H),(0,o.of)([]))));return(0,i.D)({local:V,remote:_,instance:F,pluginErrors:j}).pipe((0,g.V)({each:U,with:()=>(_.subscribe(async H=>{if(N.dispatch({type:`${v.uJ}/fetchRemote/fulfilled`}),H.length>0){const z=await(0,u.n)(V),K=await(0,u.n)(F),Y=await(0,u.n)(j);N.dispatch(b((0,h.uR)({local:z,remote:H,instance:K,pluginErrors:Y})))}}),(0,i.D)({local:V,instance:F,pluginErrors:j}))})).subscribe(({local:H,remote:z,instance:K,pluginErrors:Y})=>{H&&z?(N.dispatch({type:`${v.uJ}/fetchLocal/fulfilled`}),N.dispatch({type:`${v.uJ}/fetchRemote/fulfilled`}),N.dispatch(b((0,h.uR)({local:H,remote:z,instance:K,pluginErrors:Y})))):H&&(N.dispatch({type:`${v.uJ}/fetchLocal/fulfilled`}),N.dispatch(b((0,h.uR)({local:H,pluginErrors:Y}))))},H=>(console.log(H),N.dispatch({type:`${v.uJ}/fetchLocal/rejected`}),N.dispatch({type:`${v.uJ}/fetchRemote/rejected`}),N.rejectWithValue("Unknown error."))),null}catch{return N.rejectWithValue("Unknown error.")}}),s=(0,n.hg)(`${v.uJ}/fetchAllLocal`,async(P,N)=>{try{return(await(0,E.E1)()).map(U=>(0,h.ZG)(U))}catch{return N.rejectWithValue("Unknown error.")}}),y=(0,n.hg)(`${v.uJ}/fetchRemotePlugins`,async(P,N)=>{try{return await(0,E.$F)()}catch(F){return(0,m.kW)(F)&&(F.isHandled=!0),N.rejectWithValue([])}}),C=(0,n.hg)(`${v.uJ}/fetchDetails`,async(P,N)=>{try{const F=await(0,E.GV)(P);return{id:P,changes:{details:F}}}catch{return N.rejectWithValue("Unknown error.")}}),b=(0,n.PH)(`${v.uJ}/addPlugins`),S=(0,n.PH)(`${v.uJ}/addLocalPlugins`),D=(0,n.PH)(`${v.uJ}/addLocalPlugins`),M=(0,n.PH)(`${v.uJ}/addLocalPlugins`),T=(0,n.hg)(`${v.uJ}/install`,async({id:P,version:N,isUpdating:F=!1},U)=>{const j=F?{isInstalled:!0,installedVersion:N,hasUpdate:!1}:{isInstalled:!0,installedVersion:N};try{return await(0,E.Tk)(P),await(0,h.XB)(),F&&(0,f.Hl)(P),{id:P,changes:j}}catch(V){return console.error(V),(0,m.kW)(V)?U.rejectWithValue(V.data):U.rejectWithValue("Unknown error.")}}),R=(0,n.hg)(`${v.uJ}/install`,async()=>({})),O=(0,n.hg)(`${v.uJ}/uninstall`,async(P,N)=>{try{return await(0,E.GP)(P),await(0,h.XB)(),(0,f.Hl)(P),{id:P,changes:{isInstalled:!1,installedVersion:void 0}}}catch(F){return console.error(F),N.rejectWithValue("Unknown error.")}}),x=(0,n.hg)(`${v.uJ}/loadPluginDashboards`,async(P,N)=>{const j=`api/plugins/${N.getState().dataSources.dataSource.type}/dashboards`;return(0,m.i)().get(j)}),I=(0,n.PH)(`${v.uJ}/panelPluginLoaded`),L=P=>async(N,F)=>{let U=F().plugins.panels[P];return U||(U=await(0,d.Ub)(P),F().plugins.panels[P]||N(I(U))),U}},14746:(G,A,e)=>{"use strict";e.d(A,{CD:()=>i,I6:()=>E,UC:()=>f});var n=e(20079),a=e(38821),o=e(87809),r=e(69396);const i=(0,n.HF)(),g=v=>new RegExp(`${a.uJ}/(.*)/pending`).test(v.type),u=v=>new RegExp(`${a.uJ}/(.*)/fulfilled`).test(v.type),l=v=>new RegExp(`${a.uJ}/(.*)/rejected`).test(v.type),m=v=>{const h=v.lastIndexOf("/");return v.substring(0,h)},c={items:i.getInitialState(),requests:{},settings:{displayMode:o.lL.Grid},plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},d=(0,n.oM)({name:"plugins",initialState:c,reducers:{setDisplayMode(v,h){v.settings.displayMode=h.payload}},extraReducers:v=>v.addCase(r.wx,(h,p)=>{i.upsertMany(h.items,p.payload)}).addCase(r.bp.fulfilled,(h,p)=>{i.upsertMany(h.items,p.payload)}).addCase(r.DD.fulfilled,(h,p)=>{i.updateOne(h.items,p.payload)}).addCase(r.N9.fulfilled,(h,p)=>{i.updateOne(h.items,p.payload)}).addCase(r.Tz.fulfilled,(h,p)=>{i.updateOne(h.items,p.payload)}).addCase(r.LP,(h,p)=>{h.panels[p.payload.meta.id]=p.payload}).addCase(r.m3.pending,(h,p)=>{h.isLoadingPluginDashboards=!0,h.dashboards=[]}).addCase(r.m3.fulfilled,(h,p)=>{h.isLoadingPluginDashboards=!1,h.dashboards=p.payload}).addMatcher(g,(h,p)=>{h.requests[m(p.type)]={status:o.eE.Pending}}).addMatcher(u,(h,p)=>{h.requests[m(p.type)]={status:o.eE.Fulfilled}}).addMatcher(l,(h,p)=>{h.requests[m(p.type)]={status:o.eE.Rejected,error:p.payload}})}),{setDisplayMode:f}=d.actions,E=d.reducer},87809:(G,A,e)=>{"use strict";e.d(A,{Bs:()=>r,Co:()=>o,cd:()=>a,eE:()=>l,lL:()=>n,tu:()=>u,vF:()=>i,xc:()=>g});var n=(m=>(m.Grid="grid",m.List="list",m))(n||{}),a=(m=>(m.Home="plugins-home",m.Browse="plugins-browse",m.Details="plugins-details",m))(a||{}),o=(m=>(m.app="apps",m.datasource="database",m.panel="credit-card",m.renderer="capture",m.secretsmanager="key-skeleton-alt",m))(o||{}),r=(m=>(m.Deleted="deleted",m.Active="active",m.Pending="pending",m.Deprecated="deprecated",m.Enterprise="enterprise",m))(r||{}),i=(m=>(m.INSTALL="INSTALL",m.UNINSTALL="UNINSTALL",m.UPDATE="UPDATE",m.REINSTALL="REINSTALL",m))(i||{}),g=(m=>(m.OVERVIEW="Overview",m.VERSIONS="Version history",m.CONFIG="Config",m.DASHBOARDS="Dashboards",m.USAGE="Usage",m))(g||{}),u=(m=>(m.OVERVIEW="overview",m.VERSIONS="version-history",m.CONFIG="config",m.DASHBOARDS="dashboards",m.USAGE="usage",m))(u||{}),l=(m=>(m.Pending="Pending",m.Fulfilled="Fulfilled",m.Rejected="Rejected",m))(l||{})},94063:(G,A,e)=>{"use strict";e.d(A,{G:()=>r});var n=e(90857);function a(i){return Object.values(n.config.datasources).find(g=>g.uid===i)??null}function o(i){return a(i)?.meta.angular?.detected??!1}function r(i){const g=a(i);return(g?.meta.angular?.detected&&!g?.meta.angular.hideDeprecation)??!1}},66706:(G,A,e)=>{"use strict";e.d(A,{a:()=>r,v:()=>a});var n=e(85960);const a=n.createContext(o());a.displayName="PluginPageContext";function o(){return{sectionNav:{main:{text:"Plugin page"},node:{text:"Plugin page"}}}}function r(i){return{sectionNav:i??o().sectionNav}}},35029:(G,A,e)=>{"use strict";e.d(A,{u:()=>r});var n=e(85960),a=e(73667),o=e(67192);const r=g=>{const u=i(g.state);return u?n.createElement(o.C,{className:g.className,color:u.color,title:u.tooltip,text:u.text,icon:u.icon}):null};function i(g){switch(g){case a.BV.deprecated:return{text:"Deprecated",color:"red",tooltip:"This feature is deprecated and will be removed in a future release"};case a.BV.alpha:return{text:"Alpha",color:"blue",tooltip:"This feature is experimental and future updates might not be backward compatible"};case a.BV.beta:return{text:"Beta",color:"blue",tooltip:"This feature is close to complete but not fully tested"};default:return null}}},65512:(G,A,e)=>{"use strict";e.d(A,{ND:()=>v,ak:()=>s});var n=e(41466),a=e(47475),o=e(16218),r=e(12399),i=e(18362),g=e(85445),u=e(81502),l=e(32063),m=e(60484),c=e(67954),d=e(15013),f=e(36530),E=e(73243);class v{constructor(C=(0,r.J)()){this.templateSrv=C,this.datasources={},this.settingsMapByName={},this.settingsMapByUid={},this.settingsMapById={},this.defaultName=""}init(C,b){this.datasources={},this.settingsMapByUid={},this.settingsMapByName=C,this.defaultName=b;for(const S of Object.values(C))S.uid||(S.uid=S.name),this.settingsMapByUid[S.uid]=S,this.settingsMapById[S.id]=S;this.datasources[l.hr.type]=d.mV,this.datasources[f.Yq]=d.mV,this.settingsMapByUid[l.hr.uid]=d.bE,this.settingsMapByUid[f.Yq]=d.bE}getDataSourceSettingsByUid(C){return this.settingsMapByUid[C]}getInstanceSettings(C,b){let S=h(C);if((0,l.Pr)(S))return d.bE;if(S==="default"||S==null)return this.settingsMapByUid[this.defaultName]??this.settingsMapByName[this.defaultName];if(S[0]==="$"){const D=this.templateSrv.replace(S,b,p);let M;return D==="default"?M=this.settingsMapByName[this.defaultName]:M=this.settingsMapByUid[D]??this.settingsMapByName[D],M?{...M,isDefault:!1,name:S,uid:S,rawRef:{type:M.type,uid:M.uid}}:void 0}return this.settingsMapByUid[S]??this.settingsMapByName[S]??this.settingsMapById[S]}get(C,b){let S=h(C);if(!S)return this.get(this.defaultName);if((0,l.Pr)(C))return Promise.resolve(this.datasources[f.Yq]);const D=this.settingsMapByName[S];return D&&(S=D.uid),this.datasources[S]?Promise.resolve(this.datasources[S]):(S=this.templateSrv.replace(S,b,p),S==="default"&&this.defaultName!=="default"?this.get(this.defaultName):this.datasources[S]?Promise.resolve(this.datasources[S]):this.loadDatasource(S))}async loadDatasource(C){if(this.datasources[C])return Promise.resolve(this.datasources[C]);const b=this.getInstanceSettings(C);if(!b)return Promise.reject({message:`Datasource ${C} was not found`});try{const S=await(0,E.nL)(b.meta);if(this.datasources[C])return this.datasources[C];const D=S.DataSourceClass.length!==1;let M;if(D?M=(0,i.V)().instantiate(S.DataSourceClass,{instanceSettings:b}):M=new S.DataSourceClass(b),M.components=S.components,!(M instanceof n.MF)){const T=M;T.name=b.name,T.id=b.id,T.type=b.type,T.meta=b.meta,T.uid=b.uid,M.getRef=n.MF.prototype.getRef}return this.datasources[C]=M,this.datasources[M.uid]=M,M}catch(S){return S instanceof Error&&m.Z.emit(a.SI.alertError,[b.name+" plugin failed",S.toString()]),Promise.reject({message:`Datasource: ${C} was not found`})}}getAll(){return Object.values(this.settingsMapByName)}getList(C={}){const b=Object.values(this.settingsMapByName).filter(D=>!(D.meta.id==="grafana"||D.meta.id==="mixed"||D.meta.id==="dashboard"||C.metrics&&!D.meta.metrics||C.tracing&&!D.meta.tracing||C.logs&&D.meta.category!=="logging"&&!D.meta.logs||C.annotations&&!D.meta.annotations||C.alerting&&!D.meta.alerting||C.pluginId&&!(0,o.S)(C.pluginId,D.meta)||C.filter&&!C.filter(D)||C.type&&(Array.isArray(C.type)?!C.type.includes(D.type):C.type!==D.type)||!C.all&&D.meta.metrics!==!0&&D.meta.annotations!==!0&&D.meta.tracing!==!0&&D.meta.logs!==!0&&D.meta.alerting!==!0));if(C.variables)for(const D of this.templateSrv.getVariables()){if(D.type!=="datasource")continue;let M=D.current.value==="default"?this.defaultName:D.current.value;Array.isArray(M)&&M.length===1&&(M=M[0]);const T=!Array.isArray(M)&&(this.settingsMapByName[M]||this.settingsMapByUid[M]);if(T){const R=`\${${D.name}}`;b.push({...T,isDefault:!1,name:R,uid:R})}}const S=b.sort((D,M)=>D.name.toLowerCase()>M.name.toLowerCase()?1:D.name.toLowerCase()<M.name.toLowerCase()?-1:0);if(!C.pluginId&&!C.alerting){if(C.mixed){const D=this.getInstanceSettings("-- Mixed --");D&&b.push(D)}if(C.dashboard){const D=this.getInstanceSettings("-- Dashboard --");D&&b.push(D)}if(!C.tracing){const D=this.getInstanceSettings("-- Grafana --");D&&b.push(D)}}return S}getExternal(){return this.getList()}getAnnotationSources(){return this.getList({annotations:!0,variables:!0}).map(C=>({name:C.name,value:C.name,meta:C.meta}))}getMetricSources(C){return this.getList({metrics:!0,variables:!C?.skipVariables}).map(b=>({name:b.name,value:b.name,meta:b.meta}))}async reload(){const C=await(0,g.i)().get("/api/frontend/settings");c.default.datasources=C.datasources,c.default.defaultDatasource=C.defaultDatasource,this.init(C.datasources,C.defaultDatasource)}}function h(y){return(0,l.Pr)(y)?l.hr.uid:typeof y=="string"?y:y?.uid}function p(y){return Array.isArray(y)?y[0]:y}const s=()=>(0,u.F)()},23280:(G,A,e)=>{"use strict";e.d(A,{CR:()=>O,Ch:()=>s,DQ:()=>y,IX:()=>v,KE:()=>E,_A:()=>b,cS:()=>L,eP:()=>h,ew:()=>I,fD:()=>M,lu:()=>S});var n=e(66681),a=e(56375),o=e.n(a),r=e(85960),i=e(81445),g=e(73999),u=e(77786),l=e(85745),m=e(7288),c=e(60484),d=e(67552),f=e(14914);function E(P){console.warn(`[Plugin Extensions] ${P}`)}function v(P){return typeof P=="object"&&"type"in P&&P.type===g.D.link}function h(P){return typeof P=="object"&&"type"in P&&P.type===g.D.component}function p(P,N=""){return(...F)=>{try{return P(...F)}catch(U){U instanceof Error&&console.warn(`${N}${U.message}`)}}}function s(P,N){return{openModal:async U=>{const{title:j,body:V,width:_,height:H}=U;c.Z.publish(new f.Dn({component:y(P,C({title:j,body:V,width:_,height:H}))}))},context:N}}const y=(P,N)=>U=>{const{error:j,loading:V,value:_}=(0,i.Z)(()=>(0,d.a)(P,{showErrorAlert:!1}));return V?null:j?(E(`Could not fetch plugin meta information for "${P}", aborting. (${j.message})`),null):_?r.createElement(u.b,{meta:_},r.createElement(N,{...U})):(E(`Fetched plugin meta information is empty for "${P}", aborting.`),null)},C=({title:P,body:N,width:F,height:U})=>{const j=(0,n.css)({width:F,height:U});return({onDismiss:_})=>r.createElement(m.u,{title:P,className:j,isOpen:!0,onDismiss:_,onClickBackdrop:_},r.createElement(N,{onDismiss:_}))};function b(P,N=new Map){if(!P||typeof P!="object"||Object.isFrozen(P))return P;const F=Array.isArray(P)?[...P]:{...P};if(N.has(P))return N.get(P);N.set(P,F);const U=Reflect.ownKeys(F);for(const j of U){const V=Array.isArray(F)?F[Number(j)]:F[j];V&&(typeof V=="object"||typeof V=="function")&&(Array.isArray(F)?F[Number(j)]=b(V,N):F[j]=b(V,N))}return Object.freeze(F)}function S(P,N){const F=`${P}${N.extensionPointId}${N.title}`;return Array.from(F).reduce((U,j)=>Math.imul(31,U)+j.charCodeAt(0)|0,0).toString()}const D=Symbol("isReadOnlyProxy");function M(P){if(!P||typeof P!="object"||R(P))return P;const N=new WeakMap;return new Proxy(P,{defineProperty:()=>!1,deleteProperty:()=>!1,isExtensible:()=>!1,set:()=>!1,get(F,U,j){if(U===D)return!0;const V=Reflect.get(F,U,j);return(0,l.v9)(V)?(0,l.CQ)(V):(0,a.isObject)(V)||(0,a.isArray)(V)?(N.has(V)||N.set(V,M(V)),N.get(V)):V}})}function T(P){return typeof P=="object"&&P!==null}function R(P){return T(P)&&P[D]===!0}function O(P){const N={type:g.D.link,...P};return x(N),N}function x(P){if(P.type!==g.D.link)throw Error("config is not a extension link")}function I(P,N){return P.length<N?P:`${P.slice(0,N-3).trimEnd()}...`}function L(P){const N={},F=[];for(const j of P){const V=j.category;if(!V){F.push({text:I(j.title,25),href:j.path,onClick:j.onClick});continue}Array.isArray(N[V])||(N[V]=[]),N[V].push({text:I(j.title,25),href:j.path,onClick:j.onClick})}const U=Object.keys(N).reduce((j,V)=>(j.push({text:I(V,25),type:"group",subMenu:N[V]}),j),[]);return F.length>0&&(U.length>0&&U.push({text:"divider",type:"divider"}),Array.prototype.push.apply(U,F)),U}},20229:(G,A,e)=>{"use strict";e.d(A,{Ub:()=>u,_2:()=>c,eD:()=>l,pv:()=>m,q1:()=>d,wG:()=>v});var n=e(12932),a=e(67954),o=e(25802),r=e(73243);const i={},g={};function u(h){const p=i[h];if(p)return p;const s=m(h);if(!s)throw new Error(`Plugin ${h} not found`);return i[h]=f(s),h!==s.type&&(i[s.type]=i[h]),i[h]}function l(h){return!!m(h)}function m(h){const p=a.default.panels[h];if(!p){for(const s of Object.values(a.default.panels))if(s.aliasIDs?.includes(h))return s}return p}function c(h){return f(h)}function d(h){return g[h]}function f(h){return(0,r.N$)({path:h.module,version:h.info?.version,isAngular:h.angular?.detected,pluginId:h.id}).then(p=>{if(p.plugin)return p.plugin;if(p.PanelCtrl){const s=new n.c(null);return s.angularPanelCtrl=p.PanelCtrl,s}throw new Error("missing export: plugin or PanelCtrl")}).then(p=>(p.meta=h,g[h.id]=p,!p.panel&&p.angularPanelCtrl&&(p.panel=E(p)),p)).catch(p=>(console.warn("Error loading panel plugin: "+h.id,p),(0,o.F)(h,p)))}let E=h=>null;function v(h){E=h}},99109:(G,A,e)=>{"use strict";e.d(A,{Hl:()=>i,Vf:()=>r,u0:()=>g});var n=e(67552);const a={},o=Date.now();function r({path:l,version:m}){const c=u(l);c&&!a[c]&&(a[c]=encodeURI(m))}function i(l){const m=`plugins/${l}/module`;a[m]&&delete a[m],(0,n.Z)(l)}function g(l,m=o){const c=u(l);if(!c)return`${l}?_cache=${m}`;const f=a[c]||m;return`${l}?_cache=${f}`}function u(l){const m=/\/.+\/(plugins\/.+\/module)\.js/i.exec(l);if(!m)return;const[c,d]=m;if(d)return d}},44756:(G,A,e)=>{"use strict";e.d(A,{Nr:()=>o,OY:()=>n,YB:()=>r,xm:()=>a});const n="package",a=/^plugins.+\.css$/i,o=/^(text|application)\/(x-)?javascript(;|$)/,r=/(?:^\uFEFF?|[^$_a-zA-Z\xA0-\uFFFF.])define\s*\(\s*("[^"]+"\s*,\s*|'[^']+'\s*,\s*)?\s*(\[(\s*(("[^"]+"|'[^']+')\s*,|\/\/.*\r?\n))*(\s*("[^"]+"|'[^']+')\s*,?)?(\s*(\/\/.*\r?\n|\/\*\/))*\s*\]|function\s*|{|[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*\))/},47932:(G,A,e)=>{"use strict";e.d(A,{t:()=>d,g:()=>f});var n=e(90857),a=e(65362),o=e(24716),r=e(44756),i=e(45465);const g=new WeakMap,u={};function l(E,v,h){const p={get(s,y){if(document.currentScript===null&&typeof y!="symbol"&&y.toString()!=="__useDefault"){const b=`${v}.${String(y)}`,S=`${b}`;u[S]||(u[S]=!0,(0,i.PN)(`Plugin using ${b}`,{key:String(y),parent:v,packageName:h}))}let C=Reflect.get(s,y);return C!==null&&typeof C=="object"&&!(C instanceof RegExp)?(g.has(C)||g.set(C,l(C,`${v}.${String(y)}`,h)),g.get(C)):(typeof C=="function"&&(C=C.bind(s)),C)}};return typeof E=="object"&&E!==null?new Proxy(E,p):E}const m=/^(@grafana|app\/)/;function c(E,v){return m.test(v)?l(E,v,v):E}function d(E){return Object.keys(E).reduce((v,h)=>{const p=`${r.OY}:${h}`,s=n.config.featureToggles.pluginsAPIMetrics?c(E[h],h):E[h];return a.i3.set(p,s),o.g.set(h,E[h]),v[h]=p,v},{})}function f(E){return!!n.config.pluginsCDNBaseURL&&E.startsWith(n.config.pluginsCDNBaseURL)}},67552:(G,A,e)=>{"use strict";e.d(A,{Z:()=>r,a:()=>o});var n=e(85445);const a={};function o(i,g){const u=a[i];return u?Promise.resolve(u):(0,n.i)().get(`/api/plugins/${i}/settings`,void 0,void 0,g).then(l=>(a[i]=l,l)).catch(l=>typeof l=="object"&&l!==null&&"status"in l&&l.status===403?(l.isHandled=!0,Promise.reject(l)):Promise.reject(new Error("Unknown Plugin")))}const r=i=>i?delete a[i]:Object.keys(a).forEach(g=>delete a[g])},73243:(G,A,e)=>{"use strict";e.d(A,{Av:()=>Yh,nL:()=>Qh,N$:()=>Kc});var n={};e.r(n),e.d(n,{plugin:()=>Te});var a={};e.r(a),e.d(a,{plugin:()=>ls});var o={};e.r(o),e.d(o,{plugin:()=>Bo});var r={};e.r(r),e.d(r,{plugin:()=>xi});var i={};e.r(i),e.d(i,{plugin:()=>Yi});var g={};e.r(g),e.d(g,{plugin:()=>qu});var u={};e.r(u),e.d(u,{plugin:()=>nm});var l={};e.r(l),e.d(l,{plugin:()=>Sm});var m={};e.r(m),e.d(m,{plugin:()=>Lm});var c={};e.r(c),e.d(c,{plugin:()=>Bm});var d={};e.r(d),e.d(d,{plugin:()=>Xl});var f={};e.r(f),e.d(f,{plugin:()=>Hm});var E={};e.r(E),e.d(E,{plugin:()=>qm});var v={};e.r(v),e.d(v,{plugin:()=>sf});var h={};e.r(h),e.d(h,{plugin:()=>xd});var p={};e.r(p),e.d(p,{plugin:()=>cl});var s={};e.r(s),e.d(s,{plugin:()=>bf});var y={};e.r(y),e.d(y,{plugin:()=>_d});var C={};e.r(C),e.d(C,{plugin:()=>Qd});var b={};e.r(b),e.d(b,{plugin:()=>Nf});var S={};e.r(S),e.d(S,{plugin:()=>iu});var D={};e.r(D),e.d(D,{plugin:()=>og});var M={};e.r(M),e.d(M,{plugin:()=>mu});var T={};e.r(T),e.d(T,{plugin:()=>ug});var R={};e.r(R),e.d(R,{plugin:()=>gg});var O={};e.r(O),e.d(O,{plugin:()=>Rg});var x=e(41466),I=e(81223),L=e(65362),P=e(85960),N=e(12932),F=e(76679),U=e(90857),j=e(50263),V=e(92746),_=e(5970),H=e(98724),z=e(46002),K=e(30422),Y=e(95162),k=e(66681),q=e(18678),X=e(47257),te=e(29165),se=e(2698),de=e(44211),re=e(44412),fe=e(5626),ie=e(77294),oe=e(16901);const ue=({alertManagerSourceName:w,group:J,expandAll:le})=>{const[pe,Se]=(0,P.useState)(le),Re=(0,X.wW)(me),We=(0,X.wW)(fe.r);return(0,P.useEffect)(()=>Se(le),[le]),P.createElement("div",{className:Re.group,"data-testid":"alert-group"},Object.keys(J.labels).length>0?P.createElement(se.s,{labels:J.labels,size:"sm"}):P.createElement("div",{className:Re.noGroupingText},"No grouping"),P.createElement("div",{className:Re.row},P.createElement(de.U,{isCollapsed:!pe,onToggle:()=>Se(!pe)})," ",P.createElement(re.Z,{group:J})),pe&&P.createElement("div",{className:Re.alerts},J.alerts.map((Ge,at)=>{const ot=Ge.status.state.toUpperCase(),ft=(0,q.vT)({start:new Date(Ge.startsAt),end:Date.now()});return P.createElement("div",{"data-testid":"alert-group-alert",className:Re.alert,key:`${Ge.fingerprint}-${at}`},P.createElement("div",null,P.createElement("span",{className:We[Ge.status.state]},ot," "),"for ",ft),P.createElement("div",null,P.createElement(se.s,{labels:Ge.labels,size:"sm"})),P.createElement("div",{className:Re.actionsRow},Ge.status.state===oe.Z9.Suppressed&&P.createElement(te.Qj,{href:`${(0,ie.eQ)("/alerting/silences",w)}&silenceIds=${Ge.status.silencedBy.join(",")}`,className:Re.button,icon:"bell",size:"sm"},"Manage silences"),Ge.status.state===oe.Z9.Active&&P.createElement(te.Qj,{href:(0,ie.VN)(w,Ge.labels),className:Re.button,icon:"bell-slash",size:"sm"},"Silence"),Ge.generatorURL&&P.createElement(te.Qj,{className:Re.button,href:Ge.generatorURL,icon:"chart-line",size:"sm"},"See source")))})))},me=w=>({noGroupingText:(0,k.css)`
    height: ${w.spacing(4)};
  `,group:(0,k.css)`
    background-color: ${w.colors.background.secondary};
    margin: ${w.spacing(.5,1,.5,1)};
    padding: ${w.spacing(1)};
  `,row:(0,k.css)`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${w.spacing(1)};
  `,alerts:(0,k.css)`
    margin: ${w.spacing(0,2,0,4)};
  `,alert:(0,k.css)`
    padding: ${w.spacing(1,0)};
    & + & {
      border-top: 1px solid ${w.colors.border.medium};
    }
  `,button:(0,k.css)`
    & + & {
      margin-left: ${w.spacing(1)};
    }
  `,actionsRow:(0,k.css)`
    padding: ${w.spacing(1,0)};
  `}),ge=(w,J)=>(0,P.useMemo)(()=>w.filter(le=>(0,H.eD)(le.labels,J)||le.alerts.some(pe=>(0,H.eD)(pe.labels,J))),[w,J]),Ue=w=>{const J=(0,Y.useDispatch)(),le=U.config.unifiedAlertingEnabled,pe=w.options.expandAll,Se=w.options.alertmanager,We=((0,V._)(ft=>ft.amAlertGroups)||K.oq)[Se||""]?.result||[],Ge=w.options.labels?(0,H.Zh)(w.options.labels):[],at=ge(We,Ge);(0,P.useEffect)(()=>{function ft(){Se&&J((0,_.mS)(Se))}ft();const ht=setInterval(ft,z.iF);return()=>{clearInterval(ht)}},[J,Se]);const ot=at.length>0;return P.createElement(j.$,{autoHeightMax:"100%",autoHeightMin:"100%"},le&&P.createElement("div",null,ot&&at.map(ft=>P.createElement(ue,{alertManagerSourceName:Se,key:JSON.stringify(ft.labels),group:ft,expandAll:pe})),!ot&&"No alerts"))};var De=e(27436);function Pe(w){return w.name===F.GC?"Grafana":w.name.slice(0,37)}const ye=({onChange:w,current:J,dataSources:le})=>{const pe=(0,P.useMemo)(()=>le.map(Se=>({label:Pe(Se),value:Se.name,imgUrl:Se.imgUrl,meta:Se.meta})),[le]);return P.createElement(De.Ph,{"aria-label":"Choose Alertmanager",width:29,backspaceRemovesValue:!1,onChange:Se=>Se.value&&w(Se.value),options:pe,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:J,getOptionLabel:Se=>Se.label})},Te=new N.c(Ue).setPanelOptions(w=>w.addCustomEditor({name:"Alertmanager",path:"alertmanager",id:"alertmanager",defaultValue:F.GC,category:["Options"],editor:function(le){const pe=(0,P.useMemo)(F.z3,[]);return P.createElement(ye,{current:le.value,onChange:Se=>le.onChange(Se),dataSources:pe})}}).addBooleanSwitch({name:"Expand all by default",path:"expandAll",defaultValue:!1,category:["Options"]}).addTextInput({description:"Filter results by matching labels, ex: env=production,severity=~critical|warning",name:"Labels",path:"labels",category:["Filter"]}));var nt=e(6089),ct=e(13086),he=e(9561),xe=e(97812),Me=e.n(xe),He=e(92369),Ve=e(19252),Oe=e(32737);async function Ne({query:w,permissionLevel:J}){return(await(0,Oe.ZL)(w,J)).map(Se=>({id:Se.id,title:Se.title,url:Se.url}))}async function _e({query:w,permissionLevel:J,extraFolders:le}){const pe=await Ne({query:w,permissionLevel:J}),Se=le??[],Re=w?Se.filter(We=>We.title?.toLowerCase().includes(w.toLowerCase())):Se;return pe?Re.concat(pe):Re}async function qe({query:w,permissionLevel:J=Y.PermissionLevelString.View,extraFolders:le=[]}){return(await _e({query:w,permissionLevel:J,extraFolders:le})).map(Se=>({value:Se,label:Se.title}))}function rt(w,J){return w?.find(le=>le.value?.id===J)}async function mt(w){if(w!=null)try{const{id:J,title:le}=await(0,Oe.EW)(w);return{value:{id:J,title:le},label:le}}catch{console.error(`Could not find folder with id:${w}`)}}const Je={id:void 0,title:"All"},Ae={id:Ve.pW,title:Ve.fy};function Ke({onChange:w,extraFolders:J=[],initialFolderId:le,permissionLevel:pe=Y.PermissionLevelString.View}){const[Se,Re]=(0,P.useState)(!1),[We,Ge]=(0,P.useState)(void 0),[at,ot]=(0,P.useState)(void 0),ft=(0,P.useCallback)(async At=>{let zt=rt(At,le);zt||(zt=await mt(le)??At[0],w(zt.value)),Re(!0),ot(At),Ge(zt)},[le,w]),ht=(0,P.useCallback)(async At=>{const zt=await qe({query:At,permissionLevel:pe,extraFolders:J});return Se||await ft(zt),zt},[pe,J,Se,ft]),wt=Me()(ht,300,{leading:!0}),Et=(0,P.useCallback)(({value:At})=>{const zt=rt(at,At?.id);Ge(zt),w(At)},[at,w]);return P.createElement("div",{"data-testid":He.wl.components.ReadonlyFolderPicker.container},P.createElement(De.qb,{loadingMessage:"Loading folders...",defaultOptions:!0,defaultValue:We,value:We,loadOptions:wt,onChange:Et}))}var Xe=e(40715),ne=e(56375),Z=e.n(ne),ee=e(81445),ce=e(85745),be=e(13446),Ee=e(85445),Be=e(72435),Le=e(97666),ze=e(34524),Fe=e(93657),$e=e(62567);function et(w){const[J,le]=(0,P.useState)(""),pe=(0,ee.Z)(async()=>{if(w.options.showOptions!==$e.kx.Current)return;const We={state:it(w.options.stateFilter)};w.options.alertName&&(We.query=w.replaceVariables(w.options.alertName)),w.options.folderId>=0&&(We.folderId=w.options.folderId),w.options.dashboardTitle&&(We.dashboardQuery=w.options.dashboardTitle),w.options.dashboardAlerts&&(We.dashboardId=(0,Fe.h4)().getCurrent()?.id),w.options.tags&&(We.dashboardTag=w.options.tags);const Ge=await(0,Ee.i)().get("/api/alerts",We,`alert-list-get-current-alert-state-${w.id}`);let at=tt(w.options.sortOrder,Ge.map(ot=>({...ot,stateModel:ze.Z.getStateDisplayModel(ot.state),newStateDateAgo:(0,ce.CQ)(ot.newStateDate).locale("en").fromNow(!0)})));return at.length>w.options.maxItems&&(at=at.slice(0,w.options.maxItems)),le(at.length===0?"No alerts":""),at},[w.options.showOptions,w.options.stateFilter.alerting,w.options.stateFilter.execution_error,w.options.stateFilter.no_data,w.options.stateFilter.ok,w.options.stateFilter.paused,w.options.stateFilter.pending,w.options.maxItems,w.options.tags,w.options.dashboardAlerts,w.options.dashboardTitle,w.options.folderId,w.options.alertName,w.options.sortOrder,w.timeRange]),Se=(0,ee.Z)(async()=>{if(w.options.showOptions!==$e.kx.RecentChanges)return;const We={limit:w.options.maxItems,type:"alert",newState:it(w.options.stateFilter)},Ge=(0,Fe.h4)().getCurrent();w.options.dashboardAlerts&&(We.dashboardId=Ge?.id),We.from=be.parse(Ge?.time.from).unix()*1e3,We.to=be.parse(Ge?.time.to).unix()*1e3;const at=await(0,Ee.i)().get("/api/annotations",We,`alert-list-get-state-changes-${w.id}`),ot=tt(w.options.sortOrder,at.map(ft=>({...ft,time:Ge?.formatDate(ft.time,"MMM D, YYYY HH:mm:ss"),stateModel:ze.Z.getStateDisplayModel(ft.newState),info:ze.Z.getAlertAnnotationInfo(ft)})));return le(ot.length===0?"No alerts in current time range":""),ot},[w.options.showOptions,w.options.maxItems,w.options.stateFilter.alerting,w.options.stateFilter.execution_error,w.options.stateFilter.no_data,w.options.stateFilter.ok,w.options.stateFilter.paused,w.options.stateFilter.pending,w.options.dashboardAlerts,w.options.sortOrder]),Re=(0,X.wW)(vt);return P.createElement(j.$,{autoHeightMin:"100%",autoHeightMax:"100%"},P.createElement("div",{className:Re.container},J&&P.createElement("div",{className:Re.noAlertsMessage},J),P.createElement("section",null,P.createElement("ol",{className:Re.alertRuleList},w.options.showOptions===$e.kx.Current?!pe.loading&&pe.value&&pe.value.map(We=>P.createElement("li",{className:Re.alertRuleItem,key:`alert-${We.id}`},P.createElement(Be.Z,{href:`${We.url}?viewPanel=${We.panelId}`,className:Re.cardContainer},P.createElement(Be.Z.Heading,null,We.name),P.createElement(Be.Z.Figure,{className:(0,k.cx)(Re.alertRuleItemIcon,We.stateModel.stateClass)},P.createElement(Le.J,{name:We.stateModel.iconClass,size:"xl",className:Re.alertIcon})),P.createElement(Be.Z.Meta,null,P.createElement("div",{className:Re.alertRuleItemText},P.createElement("span",{className:We.stateModel.stateClass},We.stateModel.text),P.createElement("span",{className:Re.alertRuleItemTime}," for ",We.newStateDateAgo)))))):!Se.loading&&Se.value&&Se.value.map(We=>P.createElement("li",{className:Re.alertRuleItem,key:`alert-${We.id}`},P.createElement(Be.Z,{className:Re.cardContainer},P.createElement(Be.Z.Heading,null,We.alertName),P.createElement(Be.Z.Figure,{className:(0,k.cx)(Re.alertRuleItemIcon,We.stateModel.stateClass)},P.createElement(Le.J,{name:We.stateModel.iconClass,size:"xl"})),P.createElement(Be.Z.Meta,null,P.createElement("span",{className:(0,k.cx)(Re.alertRuleItemText,We.stateModel.stateClass)},We.stateModel.text),P.createElement("span",null,We.time),We.info&&P.createElement("span",{className:Re.alertRuleItemInfo},We.info)))))))))}function tt(w,J){if(w===$e.As.Importance)return(0,ne.sortBy)(J,pe=>ze.Z.alertStateSortScore[pe.state||pe.newState]);if(w===$e.As.TimeAsc)return(0,ne.sortBy)(J,pe=>new Date(pe.newStateDate||pe.time));if(w===$e.As.TimeDesc)return(0,ne.sortBy)(J,pe=>new Date(pe.newStateDate||pe.time)).reverse();const le=(0,ne.sortBy)(J,pe=>(pe.name||pe.alertName).toLowerCase());return w===$e.As.AlphaDesc&&le.reverse(),le}function it(w){return Object.entries(w).filter(([J,le])=>le).map(([J,le])=>J)}const vt=w=>({cardContainer:(0,k.css)`
    padding: ${w.spacing(.5)} 0 ${w.spacing(.25)} 0;
    line-height: ${w.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:(0,k.css)`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:(0,k.css)`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:(0,k.css)`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${w.colors.background.secondary};
    padding: ${w.spacing(.5)} ${w.spacing(1)};
    border-radius: ${w.shape.radius.default};
    margin-bottom: ${w.spacing(.5)};
  `,alertRuleItemIcon:(0,k.css)`
    display: flex;
    justify-content: center;
    align-items: center;
    width: ${w.spacing(4)};
    padding: 0 ${w.spacing(.5)} 0 ${w.spacing(.25)};
    margin-right: 0px;
  `,alertRuleItemText:(0,k.css)`
    font-weight: ${w.typography.fontWeightBold};
    font-size: ${w.typography.size.sm};
    margin: 0;
  `,alertRuleItemTime:(0,k.css)`
    color: ${w.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:(0,k.css)`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:(0,k.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:(0,k.css)`
    margin-right: ${w.spacing(.5)};
  `}),yt=w=>{const J={showOptions:w.options.showOptions??w.show??$e.kx.Current,maxItems:w.options.maxItems??w.limit??10,sortOrder:w.options.sortOrder??w.sortOrder??$e.As.AlphaAsc,dashboardAlerts:w.options.dashboardAlerts??w.onlyAlertsOnDashboard??!1,alertName:w.options.alertName??w.nameFilter??"",dashboardTitle:w.options.dashboardTitle??w.dashboardFilter??"",folderId:w.options.folderId??w.folderId,tags:w.options.tags??w.dashboardTags??[],stateFilter:w.options.stateFilter??w.stateFilter?.reduce((pe,Se)=>({...pe,[Se]:!0}),{})??{}};return parseFloat(w.pluginVersion||"7.4")<7.5&&["show","limit","sortOrder","onlyAlertsOnDashboard","nameFilter","dashboardFilter","folderId","dashboardTags","stateFilter"].forEach(Se=>delete w[Se]),J};var Wt=e(25119),ut=e(10178);function pt(w,J){const le=(0,H.Zh)(w);return(0,H.eD)(J,le)}function we(w,J){const{stateFilter:le,alertInstanceLabelFilter:pe}=w;return(0,ne.isEmpty)(le)?J:J.filter(Se=>(le.firing&&((0,ut.j)(Se,Wt.bj.Alerting)||(0,ut.j)(Se,Wt.x_.Firing))||le.pending&&((0,ut.j)(Se,Wt.bj.Pending)||(0,ut.j)(Se,Wt.x_.Pending))||le.noData&&(0,ut.j)(Se,Wt.bj.NoData)||le.normal&&(0,ut.j)(Se,Wt.bj.Normal)||le.error&&(0,ut.j)(Se,Wt.bj.Error)||le.inactive&&(0,ut.j)(Se,Wt.x_.Inactive))&&(pe?pt(w.alertInstanceLabelFilter,Se.labels):!0))}function lt(w){return!(w.startsWith("__")&&w.endsWith("__"))}const Bt=w=>{const{onChange:J,id:le,defaultValue:pe,dataSource:Se}=w,Re=(0,Y.useDispatch)();(0,P.useEffect)(()=>{Se?Se&&Re((0,_.y6)({rulesSourceName:Se})):Re((0,_.lB)())},[Re,Se]);const We=(0,V._)(ft=>ft.promRules),Ge=(0,K.PE)(We),at=(0,K.yR)(We),ot=(0,P.useMemo)(()=>{if((0,ne.isEmpty)(We))return[];if(!Ge)return[];const ft=Object.keys(We).flatMap(ht=>We[ht].result??[]).flatMap(ht=>ht.groups).flatMap(ht=>ht.rules.filter(wt=>wt.type===Wt.pz.Alerting)).flatMap(ht=>ht.alerts??[]).map(ht=>Object.keys(ht.labels??{})).flatMap(ht=>ht.filter(lt));return(0,ne.uniq)(ft)},[Ge,We]);return P.createElement(De.NU,{id:le,isLoading:at,defaultValue:pe,"aria-label":"group by label keys",placeholder:"Group by",prefix:P.createElement(Le.J,{name:"tag-alt"}),onChange:ft=>{J(ft.map(ht=>ht.value??""))},options:ot.map(ft=>({label:ft,value:ft}))})};var Kt=e(45220),It=e(33067),Zt=e(2384),yn=e(49199),xn=e(72264),An=e(79468),qt=e(67954),On=e(41879),wn=e(14411),Zn=e(60808),Aa=e(68700),Ea=e(9001),Nt=e(62570),en=e(53136),rn=e.n(en),un=e(6469),on=e(89248);const In=({rule:w,alerts:J,options:le,grafanaTotalInstances:pe,handleInstancesLimit:Se,limitInstances:Re,grafanaFilteredInstancesTotal:We})=>{const Ge=le.groupMode===$e.LM.Custom?!0:le.showInstances,[at,ot]=(0,P.useState)(Ge),ft=(0,X.wW)(Sn),ht=(0,X.wW)(te.gN),wt=(0,P.useCallback)(()=>{ot(Fn=>!Fn)},[]),Et=(0,P.useMemo)(()=>we(le,(0,ie.Zl)(le.sortOrder,J))??[],[J,le]),At=pe!==void 0,zt=pe&&We?pe-We:0,Rt=J.length-Et.length,Tt=At?zt:Rt,_t=Et.length>0,Jt=_t?wt:ne.noop;(0,P.useEffect)(()=>{Et.length===0&&ot(!1)},[Et]);const Ht=async()=>{Se&&(Se(!1),ot(!0))},fn=async()=>{Se&&(Se(!0),ot(!0))},kt=Re?We:Et.length,gn=Et.length,cn=At?kt:gn,tn=Re?`Showing ${Zn.gr} of ${pe} instances`:`Showing all ${pe} instances`,pn=Re?"View all instances":`Limit the result to ${Zn.gr} instances`,dn=pe&&Zn.gr===Et.length&&pe>Et.length,Un=pe&&Zn.gr<Et.length&&!Re,qn=dn||Un?P.createElement("div",{className:ft.footerRow},P.createElement("div",null,tn),P.createElement(te.zx,{size:"sm",variant:"secondary",onClick:Re?Ht:fn},pn)):void 0;return P.createElement("div",null,le.groupMode===$e.LM.Default&&P.createElement("button",{className:(0,k.cx)(ht,_t?ft.clickable:""),onClick:()=>Jt()},_t&&P.createElement(Le.J,{name:at?"angle-down":"angle-right",size:"md"}),P.createElement("span",null,`${cn} ${rn()("instance",cn)}`),Tt>0&&P.createElement("span",null,", ",`${Tt} hidden by filters`)),at&&P.createElement(un.o,{rule:w,instances:Et,pagination:{itemsPerPage:2*on.gN},footerRow:qn}))},Sn=w=>({clickable:(0,k.css)`
    cursor: pointer;
  `,footerRow:(0,k.css)`
    display: flex;
    flex-direction: column;
    gap: ${w.spacing(1)};
    justify-content: space-between;
    align-items: center;
    width: 100%;
  `}),Ln="__ungrouped__",hn=({rules:w,options:J})=>{const le=(0,X.wW)(ys),pe=J.groupBy,Se=(0,P.useMemo)(()=>{const Re=new Map,We=ot=>pe?Yn(ot,pe):!0;w.forEach(ot=>{const ft=(0,Ea.Re)(ot),ht=We(ot);(ft?.alerts??[]).forEach(wt=>{const Et=ht?Gn(pe,wt.labels):Ln,At=Re.get(Et)?.alerts??[];Re.set(Et,{rule:ot,alerts:[...At,wt]})})});const Ge=Re.get(Ln)?.alerts??[];return Re.delete(Ln),Re.set(Ln,{alerts:Ge}),Array.from(Re.entries()).reduce((ot,[ft,{rule:ht,alerts:wt}])=>{const Et=we(J,wt);return Et.length>0&&ot.set(ft,{rule:ht,alerts:Et}),ot},new Map)},[pe,w,J]);return P.createElement(P.Fragment,null,Array.from(Se).map(([Re,{rule:We,alerts:Ge}])=>P.createElement("li",{className:le.alertRuleItem,key:Re,"data-testid":Re},P.createElement("div",null,P.createElement("div",{className:le.customGroupDetails},P.createElement("div",{className:le.alertLabels},Re!==Ln&&Cn(Re).map(([at,ot])=>P.createElement(Nt.i,{key:at,labelKey:at,value:ot})),Re===Ln&&"No grouping")),P.createElement(In,{rule:We,alerts:Ge,options:J})))))};function Gn(w,J){return new URLSearchParams(w.map(le=>[le,J[le]])).toString()}function Cn(w){return[...new URLSearchParams(w)]}function Yn(w,J){const le=(0,Ea.Re)(w);return J.every(pe=>(le?.alerts??[]).some(Se=>Se.labels[pe]))}const Xn=hn;var Pt=e(8134),Dt=e(99586),$t=e(60956),jt=e(87873);function mn(w){return Object.values(w).filter(J=>J!==void 0).reduce((J,le)=>J+le,0)}const Dn=({rules:w,options:J,handleInstancesLimit:le,limitInstances:pe,hideViewRuleLinkText:Se})=>{const Re=(0,X.wW)(ys),We=(0,X.wW)(vn),{href:Ge}=(0,Pt.Z)(),at=w.length<=J.maxItems?w:w.slice(0,J.maxItems);return P.createElement(P.Fragment,null,P.createElement("ol",{className:Re.alertRuleList},at.map((ot,ft)=>{const{namespaceName:ht,groupName:wt,dataSourceName:Et}=ot,At=(0,Ea.x_)(ot.promRule)?ot.promRule:void 0,zt=(0,Ea.ub)(At),Rt=(0,$t.Yd)(ot.dataSourceName,ot),Tt=(0,$t.$V)(Rt),_t=ot.dataSourceName===F.GC?mn(ot.instanceTotals):void 0,Jt=ot.dataSourceName===F.GC?mn(ot.filteredInstanceTotals):void 0,Ht=(0,jt.u)(`/alerting/${encodeURIComponent(Et)}/${encodeURIComponent(Tt)}/view`,{returnTo:Ge??""});return At?P.createElement("li",{className:Re.alertRuleItem,key:`alert-${ht}-${wt}-${ot.name}-${ft}`},P.createElement("div",{className:We.icon},P.createElement(Le.J,{name:ze.Z.getStateDisplayModel(At.state).iconClass,className:We[(0,Ea.Aq)(At.state)],size:"lg"})),P.createElement("div",{className:Re.alertNameWrapper},P.createElement("div",{className:Re.instanceDetails},P.createElement(ct.K,{direction:"row",gap:1},P.createElement("div",{className:Re.alertName,title:ot.name},ot.name),P.createElement(Dt.L,null),Ht&&P.createElement("a",{href:Ht,target:"__blank",className:Re.link,rel:"noopener","aria-label":"View alert rule"},P.createElement("span",{className:(0,k.cx)({[Re.hidden]:Se})},"View alert rule"),P.createElement(Le.J,{name:"external-link-alt",size:"sm"}))),P.createElement("div",{className:Re.alertDuration},P.createElement("span",{className:We[(0,Ea.Aq)(At.state)]},(0,Ea.SS)(At.state))," ",zt&&At.state!==Wt.x_.Inactive&&P.createElement(P.Fragment,null,"for"," ",P.createElement("span",null,(0,q.vT)({start:zt,end:Date.now()}))))),P.createElement(In,{rule:ot,alerts:At.alerts??[],options:J,grafanaTotalInstances:_t,grafanaFilteredInstancesTotal:Jt,handleInstancesLimit:le,limitInstances:pe}))):null})))},vn=w=>({common:(0,k.css)`
    width: 70px;
    text-align: center;
    align-self: stretch;

    display: inline-block;
    color: white;
    border-radius: ${w.shape.radius.default};
    font-size: ${w.typography.bodySmall.fontSize};
    text-transform: capitalize;
    line-height: 1.2;
    flex-shrink: 0;

    display: flex;
    flex-direction: column;
    justify-content: center;
  `,icon:(0,k.css)`
    margin-top: ${w.spacing(2.5)};
    align-self: flex-start;
  `,good:(0,k.css)`
    color: ${w.colors.success.main};
  `,bad:(0,k.css)`
    color: ${w.colors.error.main};
  `,warning:(0,k.css)`
    color: ${w.colors.warning.main};
  `,neutral:(0,k.css)`
    color: ${w.colors.secondary.main};
  `,info:(0,k.css)`
    color: ${w.colors.primary.main};
  `}),fa=Dn;function Pa(w){const J=(le,[pe,Se])=>Se?[...le,pe]:le;return Object.entries(w).reduce(J,[])}const La=({dispatch:w,limitInstances:J,matcherList:le,dataSourceName:pe,stateList:Se})=>{w(pe?(0,_.dn)({rulesSourceName:pe,limitAlerts:J?Zn.gr:void 0,matcher:le,state:Se}):(0,_.ei)(!1,{limitAlerts:J?Zn.gr:void 0,matcher:le,state:Se}))};function Ma(w){const J=(0,Y.useDispatch)(),[le,pe]=(0,Kt.Z)(!0),{usePrometheusRulesByNamespaceQuery:Se}=wn.alertRuleApi,Re=(0,V._)(ia=>ia.promRules),We=(0,V._)(ia=>ia.rulerRules),Ge=(0,K.wt)(Re),at=w.width<320;(0,P.useEffect)(()=>{w.options.stateFilter.inactive===!0&&(w.options.stateFilter.normal=!0),w.options.stateFilter.inactive=void 0},[w.options.stateFilter]);let ot;(0,It.Z)(()=>{ot=(0,Fe.h4)().getCurrent()});const ft=(0,P.useMemo)(()=>Pa(w.options.stateFilter),[w.options.stateFilter]),{options:ht,replaceVariables:wt}=w,Et=ht.datasource===F.JY?F.GC:ht.datasource,At={...w.options,alertName:wt(ht.alertName),alertInstanceLabelFilter:wt(ht.alertInstanceLabelFilter)},zt=(0,P.useMemo)(()=>(0,H.Zh)(At.alertInstanceLabelFilter),[At.alertInstanceLabelFilter]),Rt=!Et||Et===F.GC,{currentData:Tt=[],isLoading:_t,refetch:Jt}=Se({limitAlerts:le?Zn.gr:void 0,matcher:zt,state:ft},{skip:!Rt});(0,P.useEffect)(()=>{Re.loading||La({dispatch:J,limitInstances:le,matcherList:zt,dataSourceName:Et,stateList:ft});const ia=ot?.events.subscribe(Zt.md,()=>{Rt&&Jt(),(!Et||Et!==F.GC)&&La({dispatch:J,limitInstances:le,matcherList:zt,dataSourceName:Et,stateList:ft})});return()=>{ia?.unsubscribe()}},[J,ot,zt,ft,le,Et,Jt,Rt,Re.loading]);const Ht=ia=>{ia?(La({dispatch:J,limitInstances:le,matcherList:zt,dataSourceName:Et,stateList:ft}),pe(!0)):(La({dispatch:J,limitInstances:!1,matcherList:zt,dataSourceName:Et,stateList:ft}),pe(!1))},fn=(0,Aa.Zo)(void 0,Tt),kt=(0,K.wt)(We),gn=(0,K.I7)(Re),cn=Ge||kt,tn=(0,K.yR)(Re),pn=(0,X.wW)(ys),dn=(0,Ea.C7)(fn),Un=w.options.sortOrder,qn=(0,P.useMemo)(()=>ds(w,ts(Un,dn)),[dn,Un,w]),Fn=qn.length===0?"No alerts matching filters":void 0,Tn=_t||cn&&tn&&!gn,sa=Object.values(Re).some(ia=>ia.result);return!On.contextSrv.hasPermission(Y.AccessControlAction.AlertingRuleRead)&&!On.contextSrv.hasPermission(Y.AccessControlAction.AlertingRuleExternalRead)?P.createElement(yn.b,{title:"Permission required"},"Sorry, you do not have the required permissions to read alert rules"):P.createElement(j.$,{autoHeightMin:"100%",autoHeightMax:"100%"},P.createElement("div",{className:pn.container},sa&&Fn&&P.createElement("div",{className:pn.noAlertsMessage},Fn),sa&&P.createElement("section",null,w.options.viewMode===$e.wO.Stat&&P.createElement(xn.w6,{width:w.width,height:w.height,graphMode:xn.IG.None,textMode:xn.jG.Auto,justifyMode:xn.ap.Auto,theme:qt.config.theme2,value:{text:`${qn.length}`,numeric:qn.length}}),w.options.viewMode===$e.wO.List&&w.options.groupMode===$e.LM.Custom&&P.createElement(Xn,{rules:qn,options:At}),w.options.viewMode===$e.wO.List&&w.options.groupMode===$e.LM.Default&&P.createElement(fa,{rules:qn,options:At,handleInstancesLimit:Ht,limitInstances:le,hideViewRuleLinkText:at})),Tn&&P.createElement(An.u,{text:"Loading..."})))}function ts(w,J){if(w===$e.As.Importance)return(0,ne.sortBy)(J,pe=>ze.Z.alertStateSortScore[pe.state]);if(w===$e.As.TimeAsc)return(0,ne.sortBy)(J,pe=>{const Se=(0,Ea.Re)(pe)??void 0;return(0,Ea.ub)(Se)||new Date});if(w===$e.As.TimeDesc)return(0,ne.sortBy)(J,pe=>{const Se=(0,Ea.Re)(pe)??void 0;return(0,Ea.ub)(Se)||new Date}).reverse();const le=(0,ne.sortBy)(J,pe=>pe.name.toLowerCase());return w===$e.As.AlphaDesc&&le.reverse(),le}function ds(w,J){const{options:le,replaceVariables:pe}=w;let Se=[...J];if(le.dashboardAlerts){const Re=(0,Fe.h4)().getCurrent()?.uid;Se=Se.filter(({annotations:We={}})=>Object.entries(We).some(([Ge,at])=>Ge===z.q6.dashboardUID&&at===Re))}if(le.alertName){const Re=pe(le.alertName);Se=Se.filter(({name:We})=>We.toLocaleLowerCase().includes(Re.toLocaleLowerCase()))}if(Se=Se.filter(Re=>{const We=(0,Ea.Re)(Re);return We?le.stateFilter.firing&&We.state===Wt.x_.Firing||le.stateFilter.pending&&We.state===Wt.x_.Pending||le.stateFilter.normal&&We.state===Wt.x_.Inactive:!1}),le.folder&&(Se=Se.filter(Re=>Re.namespaceName===le.folder.title)),le.datasource){const Re=le.datasource===F.JY;Se=Se.filter(Re?({dataSourceName:We})=>We===F.GC:({dataSourceName:We})=>We===le.datasource)}return Se=Se.reduce((Re,We)=>{const Ge=(0,Ea.Re)(We);return(Ge?we({stateFilter:le.stateFilter,alertInstanceLabelFilter:pe(le.alertInstanceLabelFilter)},Ge.alerts??[]):[]).length&&Re.push(We),Re},[]),Se}const ys=w=>({cardContainer:(0,k.css)`
    padding: ${w.spacing(.5)} 0 ${w.spacing(.25)} 0;
    line-height: ${w.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:(0,k.css)`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:(0,k.css)`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:(0,k.css)`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${w.colors.background.secondary};
    padding: ${w.spacing(.5)} ${w.spacing(1)};
    border-radius: ${w.shape.radius.default};
    margin-bottom: ${w.spacing(.5)};

    gap: ${w.spacing(2)};
  `,alertName:(0,k.css)`
    font-size: ${w.typography.h6.fontSize};
    font-weight: ${w.typography.fontWeightBold};

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,alertNameWrapper:(0,k.css)`
    display: flex;
    flex: 1;
    flex-wrap: nowrap;
    flex-direction: column;

    min-width: 100px;
  `,alertLabels:(0,k.css)`
    > * {
      margin-right: ${w.spacing(.5)};
    }
  `,alertDuration:(0,k.css)`
    font-size: ${w.typography.bodySmall.fontSize};
  `,alertRuleItemText:(0,k.css)`
    font-weight: ${w.typography.fontWeightBold};
    font-size: ${w.typography.bodySmall.fontSize};
    margin: 0;
  `,alertRuleItemTime:(0,k.css)`
    color: ${w.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:(0,k.css)`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:(0,k.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:(0,k.css)`
    margin-right: ${w.spacing(.5)};
  `,instanceDetails:(0,k.css)`
    min-width: 1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,customGroupDetails:(0,k.css)`
    margin-bottom: ${w.spacing(.5)};
  `,link:(0,k.css)`
    word-break: break-all;
    color: ${w.colors.primary.text};
    display: flex;
    align-items: center;
    gap: ${w.spacing(1)};
  `,hidden:(0,k.css)`
    display: none;
  `});class ns{getSuggestionsForData(J){const{dataSummary:le}=J;if(le.hasData)return;J.getListAppender({name:"Dashboard list",pluginId:"dashlist",options:{}}).append({})}}function qa(w){return w.showOptions===$e.kx.Current}const Ss=new N.c(et).setPanelOptions(w=>{w.addSelect({name:"Show",path:"showOptions",settings:{options:[{label:"Current state",value:$e.kx.Current},{label:"Recent state changes",value:$e.kx.RecentChanges}]},defaultValue:$e.kx.Current,category:["Options"]}).addNumberInput({name:"Max items",path:"maxItems",defaultValue:10,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",settings:{options:[{label:"Alphabetical (asc)",value:$e.As.AlphaAsc},{label:"Alphabetical (desc)",value:$e.As.AlphaDesc},{label:"Importance",value:$e.As.Importance},{label:"Time (asc)",value:$e.As.TimeAsc},{label:"Time (desc)",value:$e.As.TimeDesc}]},defaultValue:$e.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",defaultValue:"",category:["Filter"],showIf:qa}).addTextInput({path:"dashboardTitle",name:"Dashboard title",defaultValue:"",category:["Filter"],showIf:qa}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:null,editor:function({value:le,onChange:pe}){return P.createElement(Ke,{initialFolderId:le,onChange:Se=>pe(Se?.id),extraFolders:[Je,Ae]})},category:["Filter"],showIf:qa}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:[],editor(J){return P.createElement(nt.B,{tags:J.value,onChange:J.onChange})},category:["Filter"],showIf:qa}).addBooleanSwitch({path:"stateFilter.ok",name:"Ok",defaultValue:!1,category:["State filter"],showIf:qa}).addBooleanSwitch({path:"stateFilter.paused",name:"Paused",defaultValue:!1,category:["State filter"],showIf:qa}).addBooleanSwitch({path:"stateFilter.no_data",name:"No data",defaultValue:!1,category:["State filter"],showIf:qa}).addBooleanSwitch({path:"stateFilter.execution_error",name:"Execution error",defaultValue:!1,category:["State filter"],showIf:qa}).addBooleanSwitch({path:"stateFilter.alerting",name:"Alerting",defaultValue:!1,category:["State filter"],showIf:qa}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!1,category:["State filter"],showIf:qa})}).setMigrationHandler(yt).setSuggestionsSupplier(new ns),wr=new N.c(Ma).setPanelOptions(w=>{w.addRadio({path:"viewMode",name:"View mode",description:"Toggle between list view and stat view",defaultValue:$e.wO.List,settings:{options:[{label:"List",value:$e.wO.List},{label:"Stat",value:$e.wO.Stat}]},category:["Options"]}).addRadio({path:"groupMode",name:"Group mode",description:"How alert instances should be grouped",defaultValue:$e.LM.Default,settings:{options:[{value:$e.LM.Default,label:"Default grouping"},{value:$e.LM.Custom,label:"Custom grouping"}]},category:["Options"]}).addCustomEditor({path:"groupBy",name:"Group by",description:"Filter alerts using label querying",id:"groupBy",defaultValue:[],showIf:J=>J.groupMode===$e.LM.Custom,category:["Options"],editor:J=>P.createElement(Bt,{id:J.id??"groupBy",defaultValue:J.value.map(le=>({label:le,value:le})),onChange:J.onChange,dataSource:J.context.options.datasource})}).addNumberInput({name:"Max items",path:"maxItems",description:"Maximum alerts to display",defaultValue:20,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",description:"Sort order of alerts and alert instances",settings:{options:[{label:"Alphabetical (asc)",value:$e.As.AlphaAsc},{label:"Alphabetical (desc)",value:$e.As.AlphaDesc},{label:"Importance",value:$e.As.Importance},{label:"Time (asc)",value:$e.As.TimeAsc},{label:"Time (desc)",value:$e.As.TimeDesc}]},defaultValue:$e.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts linked to this dashboard",description:"Only show alerts linked to this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",description:"Filter for alerts containing this text",defaultValue:"",category:["Filter"]}).addTextInput({path:"alertInstanceLabelFilter",name:"Alert instance label",description:'Filter alert instances using label querying, ex: {severity="critical", instance=~"cluster-us-.+"}',defaultValue:"",category:["Filter"]}).addCustomEditor({path:"datasource",name:"Datasource",description:"Filter from alert source",id:"datasource",defaultValue:null,editor:function(le){return P.createElement(ct.K,{gap:1},P.createElement(Xe.q,{...le,type:["prometheus","loki","grafana"],noDefault:!0,current:le.value,onChange:pe=>le.onChange(pe.name)}),P.createElement(te.zx,{variant:"secondary",onClick:()=>le.onChange(null)},"Clear"))},category:["Filter"]}).addCustomEditor({showIf:J=>J.datasource===F.JY||!J.datasource,path:"folder",name:"Folder",description:"Filter for alerts in the selected folder (only for Grafana alerts)",id:"folder",defaultValue:null,editor:function(le){return P.createElement(he.Fz,{enableReset:!0,showRoot:!1,allowEmpty:!0,initialTitle:le.value?.title,initialFolderUid:le.value?.uid,permissionLevel:Y.PermissionLevelString.View,onClear:()=>le.onChange(""),...le})},category:["Filter"]}).addBooleanSwitch({path:"stateFilter.firing",name:"Alerting / Firing",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.noData",name:"No Data",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.normal",name:"Normal",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.error",name:"Error",defaultValue:!0,category:["Alert state filter"]})}),ls=U.config.unifiedAlertingEnabled?wr:Ss;var zs=e(34269),ks=e(12693),es=e(47475),za=e(43471),Ls=e(91),pr=e(7042),cr=e(33808),Ns=e(74045),Ur=e(60484),Go=e(51787),sr=e(14607);const Qr=({options:w,annotation:J,formatDate:le,onClick:pe,onAvatarClick:Se,onTagClick:Re})=>{const We=(0,X.wW)(Hs),{showUser:Ge,showTags:at,showTime:ot}=w,{text:ft="",login:ht,email:wt,avatarUrl:Et,tags:At,time:zt,timeEnd:Rt}=J,Tt=()=>{pe(J)},_t=()=>{Se(J)},Jt=ht&&Ge,Ht=zt&&ot,fn=Rt&&Rt!==zt&&ot;return P.createElement(Be.Z,{className:We.card,onClick:Tt},P.createElement(Be.Z.Heading,null,P.createElement(Go.D,{className:We.heading,onClick:kt=>{kt.stopPropagation()},content:ft})),Ht&&P.createElement(Be.Z.Description,{className:We.timestamp},P.createElement(Nr,{formatDate:le,time:zt}),fn&&P.createElement(P.Fragment,null,P.createElement("span",{className:We.time},"-"),P.createElement(Nr,{formatDate:le,time:Rt})," ")),Jt&&P.createElement(Be.Z.Meta,{className:We.meta},P.createElement(ka,{email:wt,login:ht,avatarUrl:Et,onClick:_t})),at&&At&&P.createElement(Be.Z.Tags,null,P.createElement(pr.P,{tags:At,onClick:kt=>Re(kt,!1)})))},ka=({onClick:w,avatarUrl:J,login:le,email:pe})=>{const Se=(0,X.wW)(Hs),Re=Ge=>{Ge.stopPropagation(),w()},We=P.createElement("span",null,"Created by:",P.createElement("br",null)," ",pe);return P.createElement(sr.u,{content:We,theme:"info",placement:"top"},P.createElement("button",{onClick:Re,className:Se.avatar},P.createElement("img",{src:J,alt:"avatar icon"})))},Nr=({time:w,formatDate:J})=>{const le=(0,X.wW)(Hs);return P.createElement("span",{className:le.time},P.createElement("span",null,J(w)))};function Hs(w){return{card:(0,k.css)({gridTemplateAreas:'"Heading Description Meta Tags"',gridTemplateColumns:"auto 1fr auto auto",padding:w.spacing(1),margin:w.spacing(.5),width:"inherit"}),heading:(0,k.css)({a:{zIndex:1,position:"relative",color:w.colors.text.link,"&:hover":{textDecoration:"underline"}}}),meta:(0,k.css)({margin:0,position:"relative",justifyContent:"end"}),timestamp:(0,k.css)({margin:0,alignSelf:"center"}),time:(0,k.css)({marginLeft:w.spacing(1),marginRight:w.spacing(1),fontSize:w.typography.bodySmall.fontSize,color:w.colors.text.secondary}),avatar:(0,k.css)({border:"none",background:"inherit",margin:0,padding:w.spacing(.5),img:{borderRadius:w.shape.radius.circle,width:w.spacing(2),height:w.spacing(2)}})}}class Do extends P.PureComponent{constructor(J){super(J),this.style=oo(U.config.theme2),this.subs=new zs.w0,this.tagListRef=P.createRef(),this.onAnnoClick=async le=>{if(!le.time)return;const{options:pe}=this.props,Re=(0,Fe.h4)().getCurrent(),We={from:this._timeOffset(le.time,pe.navigateBefore,!0),to:this._timeOffset(le.timeEnd??le.time,pe.navigateAfter,!1)};if(pe.navigateToPanel&&(We.viewPanel=le.panelId),Re?.uid===le.dashboardUID){Ls.E1.partial(We);return}const Ge=await(0,Ee.i)().get("/api/search",{dashboardUIDs:le.dashboardUID});if(Ge&&Ge.length&&Ge[0].uid===le.dashboardUID){const at=Ge[0],ot=new URL(at.url,window.location.origin);ot.searchParams.set("from",We.from),ot.searchParams.set("to",We.to),Ls.E1.push(ks.u.stripBaseFromUrl(ot.toString()));return}Ur.Z.emit(es.SI.alertWarning,["Unknown Dashboard: "+le.dashboardUID])},this.onTagClick=(le,pe)=>{if(!pe&&this.state.queryTags.includes(le))return;const Se=pe?this.state.queryTags.filter(We=>We!==le):[...this.state.queryTags,le];let Re;if(pe){const We=document.activeElement,Ge=We?.getAttribute("data-tag-id");if(this.tagListRef.current?.contains(We)&&Ge){const at=Number.parseInt(Ge,10),ot=this.tagListRef.current.querySelector(`[data-tag-id="${at+1}"]`)??this.tagListRef.current.querySelector(`[data-tag-id="${at-1}"]`);ot instanceof HTMLElement&&(Re=ot)}}this.setState({queryTags:Se},()=>Re?.focus())},this.onUserClick=le=>{this.setState({queryUser:{id:le.userId,login:le.login,email:le.email}})},this.onClearUser=()=>{this.setState({queryUser:void 0})},this.renderItem=(le,pe)=>{const{options:Se}=this.props,Re=(0,Fe.h4)().getCurrent();return Re?P.createElement(Qr,{annotation:le,formatDate:Re.formatDate,onClick:this.onAnnoClick,onAvatarClick:this.onUserClick,onTagClick:this.onTagClick,options:Se}):P.createElement(P.Fragment,null)},this.state={annotations:[],timeInfo:"",loaded:!1,queryTags:[]}}componentDidMount(){this.doSearch(),this.subs.add(this.props.eventBus.getStream(za.n1).subscribe({next:()=>{this.doSearch()}}))}componentWillUnmount(){this.subs.unsubscribe()}componentDidUpdate(J,le){const{options:pe,timeRange:Se}=this.props;(pe!==J.options||this.state.queryTags!==le.queryTags||this.state.queryUser!==le.queryUser||J.renderCounter!==this.props.renderCounter||pe.onlyInTimeRange&&Se!==J.timeRange)&&this.doSearch()}async doSearch(){const{options:J}=this.props,{queryUser:le,queryTags:pe}=this.state,Se={tags:J.tags,limit:J.limit,type:"annotation"};J.onlyFromThisDashboard&&(Se.dashboardUID=(0,Fe.h4)().getCurrent()?.uid);let Re="";if(J.onlyInTimeRange){const{timeRange:Ge}=this.props;Se.from=Ge.from.valueOf(),Se.to=Ge.to.valueOf()}else Re="All Time";le&&(Se.userId=le.id),J.tags&&J.tags.length&&(Se.tags=J.tags.map(Ge=>this.props.replaceVariables(Ge))),pe.length&&(Se.tags=Se.tags?[...Se.tags,...pe]:pe);const We=await(0,Ee.i)().get("/api/annotations",Se,`anno-list-panel-${this.props.id}`);this.setState({annotations:We,timeInfo:Re,loaded:!0})}_timeOffset(J,le,pe=!1){let Se=5,Re="m";const We=/^(\d+)(\w)/.exec(le);We&&We.length===3&&(Se=parseInt(We[1],10),Re=We[2]);const Ge=(0,ce.CQ)(J);return pe&&(Se*=-1),Ge.add(Se,Re).valueOf()}render(){const{loaded:J,annotations:le,queryUser:pe,queryTags:Se}=this.state;if(!J)return P.createElement("div",null,"loading...");const Re=pe||Se.length>0;return P.createElement(j.$,{autoHeightMin:"100%"},Re&&P.createElement("div",{className:this.style.filter},P.createElement("b",null,"Filter:"),pe&&P.createElement(te.zx,{size:"sm",variant:"secondary",fill:"text",onClick:this.onClearUser,"aria-label":`Remove filter: ${pe.email}`},pe.email),Se.length>0&&P.createElement(pr.P,{icon:"times",tags:Se,onClick:We=>this.onTagClick(We,!0),getAriaLabel:We=>`Remove ${We} tag`,className:this.style.tagList,ref:this.tagListRef})),le.length<1&&P.createElement("div",{className:this.style.noneFound},"No Annotations Found"),P.createElement(Ns.L,{items:le,renderItem:this.renderItem,getItemKey:We=>`${We.id}`}))}}const oo=(0,cr.B)(w=>({noneFound:(0,k.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: calc(100% - 30px);
  `,filter:(0,k.css)({alignItems:"center",display:"flex",flexWrap:"wrap",gap:w.spacing(.5),padding:w.spacing(.5)}),tagList:(0,k.css)({justifyContent:"flex-start","li > button":{paddingLeft:"3px"}})})),vr={limit:10,navigateAfter:"10m",navigateBefore:"10m",navigateToPanel:!0,onlyFromThisDashboard:!1,onlyInTimeRange:!1,showTags:!0,showTime:!0,showUser:!0,tags:[]},Bo=new N.c(Do).setPanelOptions(w=>{w.addRadio({category:["Annotation query"],path:"onlyFromThisDashboard",name:"Query filter",defaultValue:vr.onlyFromThisDashboard,settings:{options:[{value:!1,label:"All dashboards"},{value:!0,label:"This dashboard"}]}}).addRadio({category:["Annotation query"],path:"onlyInTimeRange",name:"Time range",defaultValue:vr.onlyInTimeRange,settings:{options:[{value:!1,label:"None"},{value:!0,label:"This dashboard"}]}}).addCustomEditor({category:["Annotation query"],id:"tags",path:"tags",name:"Tags",description:"Match annotation tags",editor(J){return P.createElement(nt.B,{tags:J.value,onChange:J.onChange})}}).addNumberInput({category:["Annotation query"],path:"limit",name:"Limit",defaultValue:vr.limit}).addBooleanSwitch({category:["Display"],path:"showUser",name:"Show user",defaultValue:vr.showUser}).addBooleanSwitch({category:["Display"],path:"showTime",name:"Show time",defaultValue:vr.showTime}).addBooleanSwitch({category:["Display"],path:"showTags",name:"Show tags",defaultValue:vr.showTags}).addRadio({category:["Link behavior"],path:"navigateToPanel",name:"Link target",defaultValue:vr.navigateToPanel,settings:{options:[{value:!0,label:"Panel"},{value:!1,label:"Dashboard"}]}}).addTextInput({category:["Link behavior"],path:"navigateBefore",name:"Time before",defaultValue:vr.navigateBefore,description:""}).addTextInput({category:["Link behavior"],path:"navigateAfter",name:"Time after",defaultValue:vr.navigateAfter,description:""})}).setPanelChangeHandler((w,J,le)=>J==="ryantxu-annolist-panel"?le:w.options);var Ms=e(37496),is=e(14345),ao=e(17945),Na=e(94372),Wa=e(11795),zn=e(58309),Mt=e(1713),xr=e(90646),wo=e(59864),dr=e(36438),Wr=e(92283),ur=e(58029),io=e(58541),Uo=e(25503),lo=e(73722),xt=e(88912),St=e(76738),Xt=e(48461),Qt=e(2925),sn=e(29627),bn=e(33012),Bn=e(21813),_n=e(25142),jn=e(10642),Sa=e(62610),ta=e(42929);const ra=({config:w,onUPlotClick:J,setFocusedSeriesIdx:le,setFocusedPointIdx:pe,setCoords:Se,setHover:Re,isToolTipOpen:We,isActive:Ge,setIsActive:at,sync:ot})=>{We.current=!1;const ft=()=>{at&&at(!0)},ht=()=>{We.current||(Se(null),at&&at(!1))};let wt=null,Et=null;w.addHook("init",Tt=>{wt=Tt.root.parentElement,Et=Tt.over,wt?.addEventListener("click",J),Et.addEventListener("mouseleave",ht),Et.addEventListener("mouseenter",ft),ot&&ot()===Sa.m.Crosshair&&Tt.root.classList.add("shared-crosshair")});const At=()=>{We.current&&(Se(null),J())};w.addHook("drawClear",At),w.addHook("destroy",()=>{wt?.removeEventListener("click",J),Et?.removeEventListener("mouseleave",ht),Et?.removeEventListener("mouseenter",ft),At()});let zt;w.addHook("syncRect",(Tt,_t)=>{zt=_t});const Rt=w.getTooltipInterpolator();return Rt&&w.addHook("setCursor",Tt=>{We.current||Rt(le,pe,_t=>{if(_t){Se(null);return}if(!zt)return;const{x:Jt,y:Ht}=(0,ta._)(Tt,zt);Jt!==void 0&&Ht!==void 0&&Se({canvas:{x:Tt.cursor.left,y:Tt.cursor.top},viewport:{x:Jt,y:Ht}})},Tt)}),w.addHook("setLegend",Tt=>{if(!We.current&&!Rt&&pe(Tt.legend.idx),Tt.cursor.idxs!=null)for(let _t=0;_t<Tt.cursor.idxs.length;_t++){const Jt=Tt.cursor.idxs[_t];if(Jt!=null){const Ht={xIndex:Jt,yIndex:0,pageX:zt.left+Tt.cursor.left,pageY:zt.top+Tt.cursor.top};(!We.current||!Ht)&&Re(Ht);return}}}),w.addHook("setSeries",(Tt,_t)=>{We.current||le(_t)}),w};var Oa=e(88940),Ts=e(74210),Ja=e(7012),Ks=e(56512),us=e(56871),cs=e(1930),Bs=e(73859),Fr=e(85334),hs=e(64282),Ia=e(65277),ms=e(18288),mr=e(79474),Ta=e(73115),fr=e(30887),Yr=e(31639),Zr=e(36148);const co=Yr.Gj,Ol=Yr.Gj,Il=8,ri=30,Gi=.65,jo=.1,Cs=.15,Rl=5,Al=10,ji=.1;function Ll(w,J,le,pe,Se){const Re=(0,Xt.X1)(w,14),We=J/(Re.width+2)*14,Ge=le/pe,at=Math.min(Ge,We);return{fontSize:Math.min(at,Se??at),textMetrics:Re}}function Bl(w,J){const{xOri:le,xDir:pe,rawValue:Se,getColor:Re,formatValue:We,formatShortValue:Ge,fillOpacity:at=1,showValue:ot,xSpacing:ft=0}=w,ht=le===Mt.wN.Horizontal,wt=!w.text?.valueSize,Et=w.stacking!==Mt.o0.None,At=w.stacking===Mt.o0.Percent;let{groupWidth:zt,barWidth:Rt,barRadius:Tt=0}=w;Et&&([zt,Rt]=[Rt,zt]);let _t,Jt;const Ht=Pn=>Array.from(Pn.data[0].map(($n,kn)=>kn)),fn=ft===0?void 0:(Pn,$n)=>{const kn=Pn.bbox.width,va=pe*(ht?1:-1);let ma=$n.length,Ra=ma-1,Ua=0,Ds=kn/us.Z.pxRatio,fs=Math.abs(Math.floor(Ds/ft));Ua=ma<fs?0:Math.ceil(ma/fs);let nr=$n.map((ar,Io)=>Ua!==0&&(ft>0?Io:Ra-Io)%Ua>0?null:ar);return va===1?nr:nr.reverse()},kt=(Pn,$n,kn,va,ma)=>{if(w.xTimeAuto){let Ra=Pn.scales.x,Ua=Ra.min,Ds=Ra.max;Ra.min=Pn.data[0][0],Ra.max=Pn.data[0][Pn.data[0].length-1];let fs=(0,Qt.mr)(Pn,$n,kn,va,ma);return Ra.min=Ua,Ra.max=Ds,fs}return $n.map(Ra=>ht?Ge(0,Ra):We(0,Ra))},gn=(Pn,$n,kn)=>{$n=0,kn=Math.max(1,Pn.data[0].length-1);let va=0;(0,Yr.Qm)(Pn.data[0].length,zt,co,0,(Ra,Ua,Ds)=>{va=Ua+Ds/2});let ma=kn-$n;if(va===.5)$n-=ma;else{let Ua=(1/(1-va*2)*ma-ma)/2;$n-=Ua,kn+=Ua}return[$n,kn]};let cn=(Pn,$n)=>{let kn=Array.from({length:$n},()=>({offs:Array(Pn).fill(0),size:Array(Pn).fill(0)}));return(0,Yr.Qm)(Pn,zt,co,null,(va,ma,Ra)=>{(0,Yr.Qm)($n,Rt,Ol,null,(Ua,Ds,fs)=>{kn[Ua].offs[va]=ma+Ra*Ds,kn[Ua].size[va]=Ra*fs})}),kn},tn=(Pn,$n)=>{let kn=Array.from({length:$n},()=>({offs:Array(Pn).fill(0),size:Array(Pn).fill(0)}));return(0,Yr.Qm)(Pn,zt,co,null,(va,ma,Ra)=>{(0,Yr.Qm)($n,Rt,Ol,null,(Ua,Ds,fs)=>{kn[Ua].offs[va]=ma,kn[Ua].size[va]=Ra})}),kn};const pn=ht?jo:Cs,dn=ht?Rl:Al;let Un=[],qn=[],Fn=1,Tn,sa=w.text?.valueSize??ri,ia=dn,Ga=1/0,Za=1/0,Va=Re!=null,_a=Va?{fill:{unit:3,values:(Pn,$n)=>qn[$n].fill},stroke:{unit:3,values:(Pn,$n)=>qn[$n].stroke}}:{},da=us.Z.paths.bars({radius:At?0:Et?(Pn,$n)=>$n===Pn.data.length-1?[Tt,0]:[0,0]:Tt,disp:{x0:{unit:2,values:(Pn,$n)=>Un[$n].offs},size:{unit:2,values:(Pn,$n)=>Un[$n].size},..._a},each:(Pn,$n,kn,va,ma,Ra,Ua)=>{va-=Pn.bbox.left,ma-=Pn.bbox.top;let Ds=Pn.data[$n][kn];ht?(Ga=Math.min(Ga,Ds<0?Pn.bbox.height-(ma+Ua):ma),Za=Ra):(Ga=Ua,Za=Math.min(Za,Ds<0?va:Pn.bbox.width-(va+Ra)));let fs={x:va,y:ma,w:Ra,h:Ua,sidx:$n,didx:kn};if(w.fullHighlight&&(w.xOri===Mt.wN.Horizontal?(fs.y=0,fs.h=Pn.bbox.height):(fs.x=0,fs.w=Pn.bbox.width)),_t.add(fs),ot!==Mt.Jp.Never){const nr=Se($n,kn);let ar=1;At&&wa[$n][kn]&&(ar=wa[$n][kn]);const Io=ar===0?0:nr/ar,ko=We($n,Io);if(ia=Math.min(ia,Math.round(pn*(ht?Ra:Ua))),Tn[kn]===void 0&&(Tn[kn]={}),Tn[kn][$n]={text:ko,value:Se($n,kn),hidden:!1},wt){const{fontSize:Br,textMetrics:ir}=Ll(Tn[kn][$n].text,Za*(ht?Gi:1)-(ht?0:ia),Ga*(ht?1:Gi)-(ht?ia:0),1);Tn[kn][$n].textMetrics=ir;let Ps=Math.round(Math.min(sa,ri,Br));Fn=Ps/sa*(Ps/14),sa=Ps}else Tn[kn][$n].textMetrics=(0,Xt.X1)(Tn[kn][$n].text,sa);let ni=ht?0:-Math.round(ji*sa),Lr=Se($n,kn);if(w.negY?.[$n]&&Lr!=null&&(Lr*=-1),Lr!=null){const Br=Pn.bbox.left+(ht?va+Ra/2:Lr<0?va-ia:va+Ra+ia),ir=Pn.bbox.top+(ht?Lr<0?ma+Ua+ia:ma-ia:ma+Ua/2-ni),{textMetrics:Ps={width:1,actualBoundingBoxAscent:1,actualBoundingBoxDescent:1}}=Tn[kn][$n];let Ro=0,bo=0;ht?(Ro=Ps.width*Fn/2,bo=Lr>0?(Ps.actualBoundingBoxAscent+Ps.actualBoundingBoxDescent)*Fn:0):(bo=(Ps.actualBoundingBoxAscent+Ps.actualBoundingBoxDescent)*Fn/2,Ro=Lr<0?Ps.width*Fn:0),Tn[kn][$n].x=Br,Tn[kn][$n].y=ir,Tn[kn][$n].bbox={x:Br-Ro,y:ir-bo,w:Ps.width*Fn,h:(Ps.actualBoundingBoxAscent+Ps.actualBoundingBoxDescent)*Fn}}}}});const Rn=Pn=>{let $n=Pn.over;$n.style.overflow="hidden",Pn.root.querySelectorAll(".u-cursor-pt").forEach(kn=>{kn.style.borderRadius="0",w.fullHighlight&&(kn.style.zIndex="-1")})},Jn={x:!1,y:!1,drag:{x:!1,y:!1},dataIdx:(Pn,$n)=>{if($n===1){Jt=null;let kn=Pn.cursor.left*us.Z.pxRatio,va=Pn.cursor.top*us.Z.pxRatio;_t.get(kn,va,1,1,ma=>{(0,Zr.Pn)(kn,va,ma.x,ma.y,ma.x+ma.w,ma.y+ma.h)&&(Et?(Jt==null||ma.h*ma.w<Jt.h*Jt.w)&&(Jt=ma):Jt=ma)})}return Jt&&$n===Jt.sidx?Jt.didx:null},points:{fill:"rgba(255,255,255,0.4)",bbox:(Pn,$n)=>{let kn=Jt&&$n===Jt.sidx,va=0,ma=0;if(Et&&kn){const Ra=Jt&&Jt.sidx>1&&(0,Zr.zZ)(_t,Jt.sidx-1,Jt.didx);Ra&&(ht?va=Ra.h:ma=Ra.w)}return{left:kn?(Jt.x+ma)/us.Z.pxRatio:-10,top:kn?Jt.y/us.Z.pxRatio:-10,width:kn?(Jt.w-ma)/us.Z.pxRatio:0,height:kn?(Jt.h-va)/us.Z.pxRatio:0}}}},ea=Pn=>{if(_t=_t||new Zr.lW(0,0,Pn.bbox.width,Pn.bbox.height),_t.clear(),Pn.series.forEach($n=>{$n._paths=null}),Et?Un=[null,...tn(Pn.data[0].length,Pn.data.length-1)]:Un=[null,...cn(Pn.data[0].length,Pn.data.length-1)],Va){qn=[null];for(let $n=1;$n<Pn.data.length;$n++){let kn=Pn.data[$n].map((va,ma)=>va!=null?Re($n,ma,va):null);qn.push({fill:at<1?kn.map(va=>va!=null?(0,fr.alpha)(va,at):null):kn,stroke:kn})}}Tn={},sa=w.text?.valueSize??ri,ia=dn,Ga=Za=1/0},la=Pn=>{if(ot===Mt.Jp.Never||sa<Il)return;Pn.ctx.save(),Pn.ctx.fillStyle=J.colors.text.primary,Pn.ctx.font=`${sa}px ${J.typography.fontFamily}`;let $n,kn;for(const va in Tn){let ma=!0;for(const Ra in Tn[va]){const Ua=Tn[va][Ra],{text:Ds,x:fs=0,y:nr=0}=Ua;let{value:ar}=Ua;w.negY?.[Ra]&&ar!=null&&(ar*=-1);let Io=ht?"center":ar!==null&&ar<0?"right":"left",ko=ht?ar!==null&&ar<0?"top":"alphabetic":"middle";if(Io!==$n&&(Pn.ctx.textAlign=$n=Io),ko!==kn&&(Pn.ctx.textBaseline=kn=ko),ot===Mt.Jp.Always)Pn.ctx.fillText(Ds,fs,nr);else if(ot===Mt.Jp.Auto){let{bbox:ni}=Ua,Lr=!1;if(ni==null)Lr=!0,Ua.hidden=!0;else if(!ma)for(const Br in Tn[va]){if(Br===Ra)continue;const ir=Tn[va][Br],{bbox:Ps,hidden:Ro}=ir;if(!Ro&&Ps&&(0,Zr.kK)(ni,Ps)){Lr=!0,Ua.hidden=!0;break}}ma=!1,!Lr&&Pn.ctx.fillText(Ds,fs,nr)}}}Pn.ctx.restore()},ba=(Pn,$n,kn,va)=>{Jt?(Pn(Jt.sidx),$n(Jt.didx),kn()):kn(!0)};let wa=null;function Da(Pn,$n){return wa=null,(0,mr.Bj)(Pn[0],$n,({totals:kn})=>{wa=kn})}return{cursor:Jn,xRange:gn,xValues:kt,xSplits:Ht,hFilter:fn,barsBuilder:da,init:Rn,drawClear:ea,draw:la,interpolateTooltip:ba,prepData:Da}}const Os={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:Mt.wm.Auto,showValue:Mt.Jp.Auto,stacking:Mt.o0.None,xTickLabelRotation:0,xTickLabelSpacing:0},Ci={fillOpacity:80,gradientMode:Mt.FI.None,lineWidth:1};function wl(w){return w===Wa.wm.Vertical?{xOri:Mt.wN.Horizontal,xDir:Mt.bQ.Right,yOri:Mt.wN.Vertical,yDir:Mt.bQ.Up}:{xOri:Mt.wN.Vertical,xDir:Mt.bQ.Down,yOri:Mt.wN.Horizontal,yDir:Mt.bQ.Right}}const oi=({frame:w,theme:J,orientation:le,showValue:pe,groupWidth:Se,barWidth:Re,barRadius:We=0,stacking:Ge,text:at,rawValue:ot,getColor:ft,fillOpacity:ht,allFrames:wt,xTickLabelRotation:Et,xTickLabelMaxLength:At,xTickLabelSpacing:zt=0,legend:Rt,timeZone:Tt,fullHighlight:_t})=>{const Jt=new Ia.U,Ht=(Fn,Tn)=>(0,cs.zc)(w.fields[Fn].display(Tn)),fn=(Fn,Tn)=>Co(Ht(Fn,Tn),At),kt=wl(le);w.fields.length===2&&(Se=Re,Re=1);const gn={xOri:kt.xOri,xDir:kt.xDir,groupWidth:Se,barWidth:Re,barRadius:We,stacking:Ge,rawValue:ot,getColor:ft,fillOpacity:ht,formatValue:Ht,formatShortValue:fn,timeZone:Tt,text:at,showValue:pe,legend:Rt,xSpacing:zt,xTimeAuto:w.fields[0]?.type===zn.fS.time&&!w.fields[0].config.unit?.startsWith("time:"),negY:w.fields.map(Fn=>Fn.config.custom?.transform===Mt.pR.NegativeY),fullHighlight:_t},cn=Bl(gn,J);if(Jt.setCursor(cn.cursor),Jt.addHook("init",cn.init),Jt.addHook("drawClear",cn.drawClear),Jt.addHook("draw",cn.draw),Jt.setTooltipInterpolator(cn.interpolateTooltip),Et!==0){let Fn=50,Tn=kt.xOri===Mt.wN.Horizontal?14:5;Jt.setPadding(ii(w,Et,At,Fn,Tn))}Jt.setPrepData(cn.prepData),Jt.addScale({scaleKey:"x",isTime:!1,range:cn.xRange,distribution:Mt.wf.Ordinal,orientation:kt.xOri,direction:kt.xDir});const tn=w.fields[0].config.custom?.axisPlacement!==Mt.LB.Hidden?kt.xOri===Mt.wN.Horizontal?Mt.LB.Bottom:Mt.LB.Left:Mt.LB.Hidden,pn=w.fields[0].config.custom?.axisPlacement!==Mt.LB.Hidden;Jt.addAxis({scaleKey:"x",isTime:!1,placement:tn,label:w.fields[0].config.custom?.axisLabel,splits:cn.xSplits,filter:kt.xOri===0?cn.hFilter:void 0,values:cn.xValues,timeZone:Tt,grid:{show:!1},ticks:{show:!1},gap:15,tickLabelRotation:kt.xOri===0?Et*-1:0,theme:J,show:pn});let dn=0;const Un=Po(Rt);for(let Fn=1;Fn<w.fields.length;Fn++){const Tn=w.fields[Fn];dn++;const sa={...Ci,...Tn.config.custom},ia=Tn.config.unit||ms.j,Ga=(0,Bs.fD)(Tn),Va=(0,Bs.YO)(Tn,J).color;let _a=sa.axisSoftMin,da=sa.axisSoftMax;if(_a==null&&Tn.config.min==null&&(_a=0),da==null&&Tn.config.max==null&&(da=0),sa.thresholdsStyle&&Tn.config.thresholds&&(sa.thresholdsStyle.mode??Mt.i3.Off)!==Mt.i3.Off&&Jt.addThresholds({config:sa.thresholdsStyle,thresholds:Tn.config.thresholds,scaleKey:ia,theme:J,hardMin:Tn.config.min,hardMax:Tn.config.max,softMin:sa.axisSoftMin,softMax:sa.axisSoftMax}),Jt.addSeries({scaleKey:ia,pxAlign:!0,lineWidth:sa.lineWidth,lineColor:Va,fillOpacity:sa.fillOpacity,theme:J,colorMode:Ga,pathBuilder:cn.barsBuilder,show:!sa.hideFrom?.viz,gradientMode:sa.gradientMode,thresholds:Tn.config.thresholds,hardMin:Tn.config.min,hardMax:Tn.config.max,softMin:sa.axisSoftMin,softMax:sa.axisSoftMax,dataFrameFieldIndex:{fieldIndex:Un?Fn:wt[0].fields.findIndex(Rn=>Rn.type===zn.fS.number&&Rn.state?.seriesIndex===dn-1),frameIndex:0}}),Jt.addScale({scaleKey:ia,min:Tn.config.min,max:Tn.config.max,softMin:_a,softMax:da,centeredZero:sa.axisCenteredZero,orientation:kt.yOri,direction:kt.yDir,distribution:sa.scaleDistribution?.type,log:sa.scaleDistribution?.log}),sa.axisPlacement!==Mt.LB.Hidden){let Rn=sa.axisPlacement;(!Rn||Rn===Mt.LB.Auto)&&(Rn=Mt.LB.Left),kt.xOri===1&&(Rn===Mt.LB.Left&&(Rn=Mt.LB.Bottom),Rn===Mt.LB.Right&&(Rn=Mt.LB.Top));let Jn={scaleKey:ia,label:sa.axisLabel,size:sa.axisWidth,placement:Rn,formatValue:(ea,la)=>(0,cs.zc)(Tn.display(ea,la)),filter:kt.yOri===0?cn.hFilter:void 0,tickLabelRotation:kt.xOri===1?Et*-1:0,theme:J,grid:{show:sa.axisGridShow}};sa.axisBorderShow&&(Jn.border={show:!0}),sa.axisColorMode===Mt.yK.Series&&(Jn.color=Va),Jt.addAxis(Jn)}}let qn=(0,mr.i7)(w);return Jt.setStackingGroups(qn),Jt};function Co(w,J){return w.length>J?w.substring(0,J).concat("..."):w}function ii(w,J,le,pe=0,Se=0){const Re=w.fields[0].values,We=Qt.gD,Ge=w.fields[0].display,at=Et=>Ge?Ge(Re[Et]):Re[Et];let ot=0;for(let Et=0;Et<Re.length;Et++){let At=(0,Xt.X1)(Co((0,cs.zc)(at(Et)),le),We);ot=At.width>ot?At.width:ot}const ft=J>0?Math.cos(J*Math.PI/180)*(0,Xt.X1)(Co((0,cs.zc)(at(Re.length-1)),le),We).width:0,ht=J<0?Math.cos(J*-1*Math.PI/180)*(0,Xt.X1)(Co((0,cs.zc)(at(0)),le),We).width:0,wt=Math.sin((J>=0?J:J*-1)*Math.PI/180)*ot-Se;return[Math.round(Qt.gD*us.Z.pxRatio),ft,wt,Math.max(0,ht-pe)]}function Er(w,J,le){if(!w?.length)return{warn:"No data in response"};(0,Na.UY)(w);const pe=w.length===1?(0,Fr.Y3)(w[0],w[0].fields.findIndex(ht=>ht.type===zn.fS.time)):(0,Fr._9)({frames:w});if(!pe)return{warn:"Unable to join data"};let Se;if(le.colorByField&&(Se=(0,Ta.findField)(pe,le.colorByField),!Se))return{warn:"Color field not found"};let Re;if(le.xField&&(Re=(0,Ta.findField)(pe,le.xField),!Re))return{warn:"Configured x field not found"};let We,Ge,at=[];for(const ht of pe.fields)if(ht!==Re)switch(ht.type){case zn.fS.string:We||(We=ht);break;case zn.fS.time:Ge||(Ge=ht);break;case zn.fS.number:{const wt={...ht,state:{...ht.state,seriesIndex:at.length},config:{...ht.config,custom:{...ht.config.custom,stacking:{group:"_",mode:le.stacking}}},values:ht.values.map(Et=>Number.isFinite(Et)||Et==null?Et:null)};le.stacking===Mt.o0.Percent&&(wt.config.unit="percentunit",wt.display=(0,hs.U)({field:wt,theme:J})),at.push(wt)}}let ot=Re;if(ot||(ot=We||Ge),!ot)return{warn:"Bar charts requires a string or time field"};if(!at.length)return{warn:"No numeric fields found"};if(Se&&at.length>1){const ht=at.find(wt=>wt!==Se);ht&&(at=[ht])}let ft=at;return le.stacking===Mt.o0.Percent&&(ft=at.map(ht=>{const wt=pe.fields.find(At=>At.state?.displayName===ht.state?.displayName),Et={...ht,config:{...wt.config},values:ht.values};return Et.display=(0,hs.U)({field:Et,theme:J}),Et}),ft.unshift(ot)),at.unshift(ot),{aligned:pe,colorByField:Se,viz:[{length:ot.values.length,fields:at}],legend:{fields:ft,length:ot.values.length}}}const Po=w=>!!(w?.sortBy&&w.sortDesc!==null),li=10,Ul=["orientation","barWidth","barRadius","xTickLabelRotation","xTickLabelMaxLength","xTickLabelSpacing","groupWidth","stacking","showValue","xField","colorField","legend",(w,J)=>J.text?.valueSize===w.text?.valueSize],Qi=({data:w,options:J,fieldConfig:le,width:pe,height:Se,timeZone:Re,id:We})=>{const Ge=(0,X.l4)(),{eventBus:at}=(0,St.R9)(),ot=(0,P.useRef)(void 0),ft=(0,P.useRef)(!1),[ht,wt]=(0,P.useState)(void 0),[Et,At]=(0,P.useState)(null),[zt,Rt]=(0,P.useState)(null),[Tt,_t]=(0,P.useState)(null),[Jt,Ht]=(0,P.useState)(!1),[fn,kt]=(0,P.useState)(!1),gn=()=>{ft.current=!1,At(null),kt(!1)},cn=()=>{ft.current=!ft.current,kt(ft.current)},tn=(0,P.useRef)(),pn=(0,P.useRef)(),dn=(0,P.useMemo)(()=>Er(w.series,Ge,J),[w.series,Ge,J]),Un="viz"in dn?dn:null;pn.current=Un?.colorByField;const qn=(0,P.useRef)(1e4);(0,P.useMemo)(()=>{qn.current++},[J]);const Fn=(0,P.useMemo)(()=>{const Rn=Un?.viz[0],Jn=tn.current;return Rn&&Jn&&(0,lo.Ch)(Rn,Jn,!0)||qn.current++,tn.current=Rn,(w.structureRev??0)+qn.current},[Un,w.structureRev]),Tn=(0,P.useMemo)(()=>!J.orientation||J.orientation===Wa.wm.Auto?pe<Se?Wa.wm.Horizontal:Wa.wm.Vertical:J.orientation,[pe,Se,J.orientation]),sa=(0,P.useMemo)(()=>{if(J.xTickLabelMaxLength)return J.xTickLabelMaxLength;{const Rn=J.xTickLabelRotation,Jn=(0,Xt.X1)("M",Qt.gD).width;return Se/2/(Math.sin((Rn>=0?Rn:Rn*-1)*Math.PI/180)*Jn)-3}},[Se,J.xTickLabelRotation,J.xTickLabelMaxLength]);if("warn"in dn)return P.createElement(xt.Z,{panelId:We,fieldConfig:le,data:w,message:dn.warn,needsNumberField:!0});const ia=(Rn,Jn,ea)=>{const la=Jn==null?null:Rn.fields[Jn];if(la){const Da=(0,Na.CZ)(la,Rn);Jn=dn.aligned.fields.findIndex(Pn=>Da===(0,Na.CZ)(Pn,dn.aligned))}const ba=J.fullHighlight&&J.stacking!==Mt.o0.None?Mt.f3.Multi:J.tooltip.mode,wa=J.tooltip.mode===Mt.f3.Multi?J.tooltip.sort:Mt.As.None;return P.createElement(P.Fragment,null,fn&&P.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},P.createElement(Oa.P,{onClick:gn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),P.createElement(Ks.H,{data:dn.aligned,rowIndex:ea,columnIndex:Jn,sortOrder:wa,mode:ba}))},Ga=Rn=>{const{legend:Jn}=J;if(!Rn||Jn.showLegend===!1)return null;if(dn.colorByField){const ea=(0,Ja.$m)([dn.colorByField],Ge);if(ea?.length)return P.createElement(sn.AY.Legend,{placement:Jn.placement},P.createElement(bn.l,{placement:Jn.placement,items:ea,displayMode:Jn.displayMode}))}return P.createElement(Bn.l,{data:[dn.legend],config:Rn,maxHeight:"35%",maxWidth:"60%",...J.legend})},Za=(Rn,Jn)=>tn.current.fields[Rn].values[Jn];let Va,_a=1;if(dn.colorByField){const Rn=dn.colorByField,Jn=Rn.display;_a=(Rn.config.custom.fillOpacity??100)/100,Va=(ea,la)=>Jn(pn.current?.values[la]).color}else tn.current.fields.some(Jn=>Jn.config.custom?.gradientMode===Mt.FI.Scheme&&Jn.config.color?.mode===is.S.Thresholds||Jn.config.mappings?.some(la=>la.type==="value"?Object.values(la.options).some(ba=>ba.color!=null):la.options.result.color!=null))&&(_a=(tn.current.fields.find(ea=>ea.type===zn.fS.number).config.custom.fillOpacity??100)/100,Va=(ea,la)=>{let ba=tn.current.fields[ea];return ba.display(ba.values[la]).color});const da=(Rn,Jn,ea)=>{const{barWidth:la,barRadius:ba=0,showValue:wa,groupWidth:Da,stacking:Pn,legend:$n,tooltip:kn,text:va,xTickLabelRotation:ma,xTickLabelSpacing:Ra,fullHighlight:Ua}=J;return oi({frame:Rn,getTimeRange:ea,timeZone:Re,theme:Ge,timeZones:[Re],eventBus:at,orientation:Tn,barWidth:la,barRadius:ba,showValue:wa,groupWidth:Da,xTickLabelRotation:ma,xTickLabelMaxLength:sa,xTickLabelSpacing:Ra,stacking:Pn,legend:$n,tooltip:kn,text:va,rawValue:Za,getColor:Va,fillOpacity:_a,allFrames:dn.viz,fullHighlight:Ua})};return P.createElement(Ts.d,{theme:Ge,frames:dn.viz,prepConfig:da,propsToDiff:Ul,preparePlotFrame:Rn=>Rn[0],renderLegend:Ga,legend:J.legend,timeZone:Re,timeRange:{from:1,to:1},structureRev:Fn,width:pe,height:Se},Rn=>(ot.current!==Rn&&(ot.current=ra({config:Rn,onUPlotClick:cn,setFocusedSeriesIdx:Rt,setFocusedPointIdx:_t,setCoords:At,setHover:wt,isToolTipOpen:ft,isActive:Jt,setIsActive:Ht})),J.tooltip.mode===Mt.f3.None?null:P.createElement(_n.h_,null,ht&&Et&&zt&&P.createElement(jn.S,{position:{x:Et.viewport.x,y:Et.viewport.y},offset:{x:li,y:li},allowPointerEvents:ft.current},ia(dn.viz[0],zt,Tt)))))};var so=e(74042),ci=e(5106),Pi=e(55973);const Qo=[{label:"None",value:0,description:"Show all tick marks"},{label:"Small",value:100,description:"Require 100px spacing"},{label:"Medium",value:200,description:"Require 200px spacing"},{label:"Large",value:300,description:"Require 300px spacing"}],Nl=w=>{let J=w.value??0;const le=J<0;le&&(J*=-1);let pe=Qo[0];for(const We of Qo)if(pe=We,J<=pe.value)break;const Se=We=>{w.onChange(We*(le?-1:1))},Re=()=>{w.onChange(w.value*-1)};return P.createElement(so.Lh,null,P.createElement(ci.S,{value:pe.value,options:Qo,onChange:Se}),J!==0&&P.createElement(sr.u,{content:"Require space from the right side",placement:"top"},P.createElement("div",null,P.createElement(Pi.X,{value:le,onChange:Re,label:"RTL"}))))};var Ha=e(12802);class Si{getListWithDefaults(J){return J.getListAppender({name:Ha.y.BarChart,pluginId:"barchart",options:{showValue:Mt.Jp.Never,legend:{calcs:[],displayMode:Mt.jK.List,showLegend:!0,placement:"right"}},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:le=>{le.options.barWidth=.8}}})}getSuggestionsForData(J){const le=this.getListWithDefaults(J),{dataSummary:pe}=J;pe.frameCount===1&&(!pe.hasNumberField||!pe.hasStringField||pe.rowCountTotal>50||(le.append({name:Ha.y.BarChart}),pe.numberFieldCount>1&&(le.append({name:Ha.y.BarChartStacked,options:{stacking:Mt.o0.Normal}}),le.append({name:Ha.y.BarChartStackedPercent,options:{stacking:Mt.o0.Percent}})),le.append({name:Ha.y.BarChartHorizontal,options:{orientation:Wa.wm.Horizontal}}),pe.numberFieldCount>1&&(le.append({name:Ha.y.BarChartHorizontalStacked,options:{stacking:Mt.o0.Normal,orientation:Wa.wm.Horizontal}}),le.append({name:Ha.y.BarChartHorizontalStackedPercent,options:{orientation:Wa.wm.Horizontal,stacking:Mt.o0.Percent}}))))}}const xi=new N.c(Qi).useFieldConfig({standardOptions:{[Ms.qb.Color]:{settings:{byValueSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:is.S.PaletteClassic}}},useCustomConfig:w=>{const J=Ci;w.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:J.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:J.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:xr.q.fillGradient[0].value,settings:{options:xr.q.fillGradient}}),w.addSelect({category:["Graph styles"],name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:Mt.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:Mt.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),w.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:Mt.i3.Off},settings:{options:xr.q.thresholdsDisplayModes},editor:Uo.F,override:Uo.F,process:ao.kG,shouldApply:()=>!0}),wo.r(w,J,!1),dr.B(w)}}).setPanelOptions((w,J)=>{const le=Er(J.data,U.config.theme2,J.options??{});let pe="First string or time field";const Se="viz"in le?le.viz[0]:void 0;if(Se?.fields?.length){const Re=Se.fields[0];pe+=` (${(0,Na.CZ)(Re,Se)})`}w.addFieldNamePicker({path:"xField",name:"X Axis",settings:{placeholderText:pe}}).addRadio({path:"orientation",name:"Orientation",settings:{options:[{value:Wa.wm.Auto,label:"Auto"},{value:Wa.wm.Horizontal,label:"Horizontal"},{value:Wa.wm.Vertical,label:"Vertical"}]},defaultValue:Os.orientation}).addSliderInput({path:"xTickLabelRotation",name:"Rotate x-axis tick labels",defaultValue:Os.xTickLabelRotation,settings:{min:-90,max:90,step:15,marks:{"-90":"-90\xB0","-45":"-45\xB0",0:"0\xB0",45:"45\xB0",90:"90\xB0"},included:!1}}).addNumberInput({path:"xTickLabelMaxLength",name:"X-axis tick label max length",description:"X-axis labels will be truncated to the length provided",settings:{placeholder:"None",min:0},showIf:Re=>Re.xTickLabelRotation!==0}).addCustomEditor({id:"xTickLabelSpacing",path:"xTickLabelSpacing",name:"X-axis labels minimum spacing",defaultValue:Os.xTickLabelSpacing,editor:Nl}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Mt.Jp.Auto,label:"Auto"},{value:Mt.Jp.Always,label:"Always"},{value:Mt.Jp.Never,label:"Never"}]},defaultValue:Os.showValue}).addRadio({path:"stacking",name:"Stacking",settings:{options:xr.q.stacking},defaultValue:Os.stacking}).addSliderInput({path:"groupWidth",name:"Group width",defaultValue:Os.groupWidth,settings:{min:0,max:1,step:.01},showIf:(Re,We)=>Re.stacking&&Re.stacking!==Mt.o0.None?!1:yr(We)!==1}).addSliderInput({path:"barWidth",name:"Bar width",defaultValue:Os.barWidth,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"barRadius",name:"Bar radius",defaultValue:Os.barRadius,settings:{min:0,max:.5,step:.05}}).addBooleanSwitch({path:"fullHighlight",name:"Highlight full area on hover",defaultValue:Os.fullHighlight}),w.addFieldNamePicker({path:"colorByField",name:"Color by field",description:"Use the color value for a sibling field to color each bar value."}),(!J.options?.fullHighlight||J.options?.stacking===Mt.o0.None)&&Wr.L(w),ur.J(w),io.Z(w,!1)}).setSuggestionsSupplier(new Si);function yr(w){let J=0;if(w)for(const le of w)for(const pe of le.fields)pe.type===zn.fS.number&&J++;return J}var di=e(16090),uo=e(43505);const Wl=w=>(0,di.rD)(w);var No=e(76935),mo=e(6498);class Fl{getSuggestionsForData(J){const{dataSummary:le}=J;if(!le.hasData||!le.hasNumberField)return;const pe=J.getListAppender({name:"",pluginId:"bargauge",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}});le.numberFieldCount>50||(le.hasStringField&&le.frameCount===1&&le.rowCountTotal<30?(pe.append({name:Ha.y.BarGaugeBasic,options:{reduceOptions:{values:!0,calcs:[]},displayMode:Mt.QH.Basic,orientation:Wa.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),pe.append({name:Ha.y.BarGaugeLCD,options:{reduceOptions:{values:!0,calcs:[]},displayMode:Mt.QH.Lcd,orientation:Wa.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})):(pe.append({name:Ha.y.BarGaugeBasic,options:{displayMode:Mt.QH.Basic,orientation:Wa.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),pe.append({name:Ha.y.BarGaugeLCD,options:{displayMode:Mt.QH.Lcd,orientation:Wa.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})))}}const Yi=new N.c(No.M).useFieldConfig().setPanelOptions(w=>{(0,uo.j)(w),(0,uo.h)(w),io.Z(w),w.addRadio({path:"displayMode",name:"Display mode",settings:{options:[{value:Mt.QH.Gradient,label:"Gradient"},{value:Mt.QH.Lcd,label:"Retro LCD"},{value:Mt.QH.Basic,label:"Basic"}]},defaultValue:mo.v.displayMode}).addRadio({path:"valueMode",name:"Value display",settings:{options:[{value:Mt.M8.Color,label:"Value color"},{value:Mt.M8.Text,label:"Text color"},{value:Mt.M8.Hidden,label:"Hidden"}]},defaultValue:mo.v.valueMode}).addRadio({path:"namePlacement",name:"Name placement",settings:{options:[{value:Mt.L3.Auto,label:"Auto"},{value:Mt.L3.Top,label:"Top"},{value:Mt.L3.Left,label:"Left"}]},defaultValue:mo.v.namePlacement,showIf:J=>J.orientation!==Wa.wm.Vertical}).addBooleanSwitch({path:"showUnfilled",name:"Show unfilled area",description:"When enabled renders the unfilled region as gray",defaultValue:mo.v.showUnfilled,showIf:J=>J.displayMode!=="lcd"}).addRadio({path:"sizing",name:"Bar size",settings:{options:[{value:Mt.o.Auto,label:"Auto"},{value:Mt.o.Manual,label:"Manual"}]},defaultValue:mo.v.sizing}).addSliderInput({path:"minVizWidth",name:"Min width",description:"Minimum column width (vertical orientation)",defaultValue:mo.v.minVizWidth,settings:{min:0,max:300,step:1},showIf:J=>J.sizing===Mt.o.Manual&&(J.orientation===Wa.wm.Auto||J.orientation===Wa.wm.Vertical)}).addSliderInput({path:"minVizHeight",name:"Min height",description:"Minimum row height (horizontal orientation)",defaultValue:mo.v.minVizHeight,settings:{min:0,max:300,step:1},showIf:J=>J.sizing===Mt.o.Manual&&(J.orientation===Wa.wm.Auto||J.orientation===Wa.wm.Horizontal)}).addSliderInput({path:"maxVizHeight",name:"Max height",description:"Maximum row height (horizontal orientation)",defaultValue:mo.v.maxVizHeight,settings:{min:0,max:300,step:1},showIf:J=>J.sizing===Mt.o.Manual&&(J.orientation===Wa.wm.Auto||J.orientation===Wa.wm.Horizontal)})}).setPanelChangeHandler(di.ZH).setMigrationHandler(Wl).setSuggestionsSupplier(new Fl);var br=e(58976),Jr=e(17338),Yo=e(80995),Kr=e(70741),Wo=e(45192);const Xr=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),Mi=Array(53);for(let w=0;w<Mi.length;w++)Mi[w]=2**w;const Kl=(w,J=1)=>w==null?"-":w.toFixed(J),Vl={drawStyle:Mt.l8.Line,showPoints:Mt.Jp.Auto,axisPlacement:Mt.LB.Auto},Gc=({frame:w,theme:J,timeZones:le,getTimeRange:pe,eventBus:Se,sync:Re,allFrames:We,renderers:Ge,tweakScale:at=ht=>ht,tweakAxis:ot=ht=>ht,eventsScope:ft="__global_"})=>{const ht=new Ia.U(le[0]);let wt;ht.setPrepData(cn=>(wt=cn[0],(0,mr.Bj)(cn[0],ht.getStackingGroups())));const Et=w.fields[0];if(!Et)return ht;const At="x";let zt="_x",Rt="";const Tt=Et.config.custom?.axisPlacement!==Mt.LB.Hidden?Mt.LB.Bottom:Mt.LB.Hidden,_t=Et.config.custom?.axisPlacement!==Mt.LB.Hidden;if(Et.type===zn.fS.time){zt="time",ht.addScale({scaleKey:At,orientation:Mt.wN.Horizontal,direction:Mt.bQ.Right,isTime:!0,range:()=>{const tn=pe();return[tn.from.valueOf(),tn.to.valueOf()]}});const cn=le.length>1?(tn,pn)=>pn.map((dn,Un)=>Un<2?null:dn):void 0;for(let tn=0;tn<le.length;tn++){const pn=le[tn];ht.addAxis({scaleKey:At,isTime:!0,placement:Tt,show:_t,label:Et.config.custom?.axisLabel,timeZone:pn,theme:J,grid:{show:tn===0&&Et.config.custom?.axisGridShow},filter:cn})}le.length>1&&ht.addHook("drawAxes",tn=>{tn.ctx.save(),tn.ctx.fillStyle=J.colors.text.primary,tn.ctx.textAlign="left",tn.ctx.textBaseline="bottom";let pn=0;tn.axes.forEach(dn=>{if(dn.side===2){let Un=dn._pos+dn._size;tn.ctx.fillText(le[pn],tn.bbox.left,Un*us.Z.pxRatio),pn++}}),tn.ctx.restore()})}else Et.config.unit&&(zt=Et.config.unit),ht.addScale({scaleKey:At,orientation:Mt.wN.Horizontal,direction:Mt.bQ.Right,range:(cn,tn,pn)=>[Et.config.min??tn,Et.config.max??pn]}),ht.addAxis({scaleKey:At,placement:Tt,show:_t,label:Et.config.custom?.axisLabel,theme:J,grid:{show:Et.config.custom?.axisGridShow},formatValue:(cn,tn)=>(0,cs.zc)(Et.display(cn,tn))});let Jt=Ge?.flatMap(cn=>Object.values(cn.fieldMap).filter(tn=>cn.indicesOnly.indexOf(tn)===-1))??[],Ht;for(let cn=1;cn<w.fields.length;cn++){const tn=w.fields[cn],pn={...tn.config,custom:{...Vl,...tn.config.custom}},dn=pn.custom;if(tn===Et||tn.type!==zn.fS.number&&tn.type!==zn.fS.enum)continue;let Un=tn.display??Kl;tn.config.custom?.stacking?.mode===Mt.o0.Percent&&(Un=(0,hs.U)({field:{...tn,config:{...tn.config,unit:"percentunit"}},theme:J}));const qn=(0,Wo.z)(pn,tn.type),Fn=(0,Bs.fD)(tn),sa=(0,Bs.YO)(tn,J).color;if(ht.addScale(at({scaleKey:qn,orientation:Mt.wN.Vertical,direction:Mt.bQ.Up,distribution:dn.scaleDistribution?.type,log:dn.scaleDistribution?.log,linearThreshold:dn.scaleDistribution?.linearThreshold,min:tn.config.min,max:tn.config.max,softMin:dn.axisSoftMin,softMax:dn.axisSoftMax,centeredZero:dn.axisCenteredZero,range:dn.stacking?.mode===Mt.o0.Percent?(Rn,Jn,ea)=>(Jn=Jn<0?-1:0,ea=ea>0?1:0,[Jn,ea]):tn.type===zn.fS.enum?(Rn,Jn,ea)=>[-1,tn.config.type.enum.text.length]:void 0,decimals:tn.config.decimals},tn)),Rt||(Rt=qn),dn.axisPlacement!==Mt.LB.Hidden){let Rn;dn.axisColorMode===Mt.yK.Series&&(Fn.isByValue&&tn.config.custom?.gradientMode===Mt.FI.Scheme&&Fn.id===is.S.Thresholds?Rn=(0,Kr.P2)(1,J,Fn,tn.config.thresholds):Rn=sa);const Jn={border:{show:dn.axisBorderShow||!1,width:1/devicePixelRatio,stroke:Rn||J.colors.text.primary},ticks:{show:dn.axisBorderShow||!1,stroke:Rn||J.colors.text.primary},color:Rn||J.colors.text.primary};let ea,la,ba;if(Xr.has(pn.unit))ea=Mi;else if(tn.type===zn.fS.enum){let wa=tn.config.type.enum.text;ba=wa.map((Da,Pn)=>Pn),la=wa}ht.addAxis(ot({scaleKey:qn,label:dn.axisLabel,size:dn.axisWidth,placement:dn.axisPlacement??Mt.LB.Auto,formatValue:(wa,Da)=>(0,cs.zc)(Un(wa,Da)),theme:J,grid:{show:dn.axisGridShow},decimals:tn.config.decimals,distr:dn.scaleDistribution?.type,splits:ba,values:la,incrs:ea,...Jn},tn))}const ia=dn.drawStyle===Mt.l8.Points?Mt.Jp.Always:dn.showPoints;let Ga=()=>null;dn.spanNulls!==!0&&(Ga=(Rn,Jn,ea,la)=>{let ba=[],wa=Rn.series[Jn];if(!ea&&la&&la.length){const[Da,Pn]=wa.idxs,$n=Rn.data[0],kn=Rn.data[Jn],va=Math.round(Rn.valToPos($n[Da],"x",!0)),ma=Math.round(Rn.valToPos($n[Pn],"x",!0));la[0][0]===va&&ba.push(Da);for(let Ra=0;Ra<la.length;Ra++){let Ua=la[Ra],Ds=la[Ra+1];if(Ds&&Ua[1]===Ds[0]){let fs=Rn.posToIdx(Ua[1],!0);if(kn[fs]==null)for(let nr=1;nr<100;nr++){if(kn[fs+nr]!=null){fs+=nr;break}if(kn[fs-nr]!=null){fs-=nr;break}}ba.push(fs)}}la[la.length-1][1]===ma&&ba.push(Pn)}return ba.length?ba:null});let{fillOpacity:Za}=dn,Va=null,_a=null;if(tn.state?.origin){Ht||(Ht=Zi(w,We));const Rn=We[tn.state.origin.frameIndex],Jn=Rn?.fields[tn.state.origin.fieldIndex],ea=(0,Na.CZ)(Jn??tn,Rn,We);if(Jt.indexOf(ea)>=0)Va=()=>null,_a=()=>{};else if(dn.transform===Mt.pR.Constant){const la=us.Z.paths.linear();Va=(ba,wa)=>{const Da=ba._data,Pn=pe();let $n=[Pn.from.valueOf(),Pn.to.valueOf()],kn=Da[wa].find(Ra=>Ra!=null),va=[kn,kn],ma=Da.slice();return ma[0]=$n,ma[wa]=va,la({...ba,_data:ma},wa,0,1)}}if(dn.fillBelowTo){const la=w.fields.find(Pn=>dn.fillBelowTo===Pn.name||dn.fillBelowTo===Pn.config?.displayNameFromDS||dn.fillBelowTo===(0,Na.CZ)(Pn,w,We)),ba=la?(0,Na.CZ)(la,w,We):dn.fillBelowTo,wa=Ht.get(ea),Da=Ht.get(ba);(0,ne.isNumber)(Da)&&(0,ne.isNumber)(wa)?(ht.addBand({series:[wa,Da],fill:void 0}),Za||(Za=35)):Za=0}}let da;Fn.id===is.S.Thresholds&&(da=Rn=>(0,Bs.YO)(wt.fields[Rn],J).color),ht.addSeries({pathBuilder:Va,pointsBuilder:_a,scaleKey:qn,showPoints:ia,pointsFilter:Ga,colorMode:Fn,fillOpacity:Za,theme:J,dynamicSeriesColor:da,drawStyle:dn.drawStyle,lineColor:dn.lineColor??sa,lineWidth:dn.lineWidth,lineInterpolation:dn.lineInterpolation,lineStyle:dn.lineStyle,barAlignment:dn.barAlignment,barWidthFactor:dn.barWidthFactor,barMaxWidth:dn.barMaxWidth,pointSize:dn.pointSize,spanNulls:dn.spanNulls||!1,show:!dn.hideFrom?.viz,gradientMode:dn.gradientMode,thresholds:pn.thresholds,hardMin:tn.config.min,hardMax:tn.config.max,softMin:dn.axisSoftMin,softMax:dn.axisSoftMax,dataFrameFieldIndex:tn.state?.origin}),dn.thresholdsStyle&&pn.thresholds&&(dn.thresholdsStyle.mode??Mt.i3.Off)!==Mt.i3.Off&&ht.addThresholds({config:dn.thresholdsStyle,thresholds:pn.thresholds,scaleKey:qn,theme:J,hardMin:tn.config.min,hardMax:tn.config.max,softMin:dn.axisSoftMin,softMax:dn.axisSoftMax})}let fn=(0,mr.i7)(w);ht.setStackingGroups(fn),Ge?.forEach(cn=>{Ht||(Ht=Zi(w,We));let tn={};for(let pn in cn.fieldMap){let dn=cn.fieldMap[pn];tn[pn]=Ht.get(dn)}cn.init(ht,tn)}),ht.scaleKeys=[At,Rt];const kt=15;let gn={dataIdx:(cn,tn,pn,dn)=>{let Un=cn.data[tn];if(Un[pn]==null){let qn=null,Fn=null,Tn;for(Tn=pn;qn==null&&Tn-- >0;)Un[Tn]!=null&&(qn=Tn);for(Tn=pn;Fn==null&&Tn++<Un.length;)Un[Tn]!=null&&(Fn=Tn);let sa=cn.data[0],ia=cn.valToPos(dn,"x"),Ga=Fn==null?1/0:cn.valToPos(sa[Fn],"x"),Za=qn==null?-1/0:cn.valToPos(sa[qn],"x"),Va=ia-Za,_a=Ga-ia;Va<=_a?Va<=kt&&(pn=qn):_a<=kt&&(pn=Fn)}return pn}};if(Re&&Re()!==Sa.m.Off&&Et.type===zn.fS.time){const cn={point:{[At]:null,[Rt]:null},data:w},tn=new za.es(cn);gn.sync={key:ft,filters:{pub:(pn,dn,Un,qn,Fn,Tn,sa)=>Re&&Re()===Sa.m.Off?!1:(cn.rowIndex=sa,Un<0&&qn<0?(cn.point[zt]=null,cn.point[Rt]=null,Se.publish(new za.xH)):(cn.point[zt]=dn.posToVal(Un,At),cn.point[Rt]=dn.posToVal(qn,Rt),cn.point.panelRelY=qn>0?qn/Tn:1,Se.publish(tn),tn.payload.down=void 0),!0)},scales:[At,Rt]}}return ht.setSync(),ht.setCursor(gn),ht};function Zi(w,J){const le=new Map;return w.fields.forEach((pe,Se)=>{const Re=pe.state?.origin;if(Re){const We=J[Re.frameIndex]?.fields[Re.fieldIndex];We&&le.set((0,Na.CZ)(We,J[Re.frameIndex],J),Se)}}),le}const jc=["legend","options","theme"];class Ti extends P.Component{constructor(){super(...arguments),this.prepConfig=(J,le,pe)=>{const{eventBus:Se,eventsScope:Re,sync:We}=this.context,{theme:Ge,timeZone:at,renderers:ot,tweakAxis:ft,tweakScale:ht}=this.props;return Gc({frame:J,theme:Ge,timeZones:Array.isArray(at)?at:[at],getTimeRange:pe,eventBus:Se,sync:We,allFrames:le,renderers:ot,tweakScale:ht,tweakAxis:ft,eventsScope:Re})},this.renderLegend=J=>{const{legend:le,frames:pe}=this.props;return!J||le&&!le.showLegend||!(0,Bn.o)(J,pe)?null:P.createElement(Bn.l,{data:pe,config:J,...le})}}render(){return P.createElement(Ts.d,{...this.props,prepConfig:this.prepConfig,propsToDiff:jc,renderLegend:this.renderLegend})}}Ti.contextType=St.bb;const ui=(0,X.HE)(Ti);ui.displayName="TimeSeries";var _l=e(79088),Zo=e(39159),Oi=e(42309);const Qe=w=>J=>{const le=w.visualization.getColorByName(J?.color||Oi.Jx);return{markerTriangle:(0,k.css)`
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-bottom: 4px solid ${le};
      `,markerBar:(0,k.css)`
        display: block;
        width: calc(100%);
        height: 5px;
        background: ${le};
      `}};var Ye=e(31622),Ze=e(50883),dt=e(66596),Ct=e(20519),Lt=e(7073),Ft=e(96130),Yt=e(82894),nn=e(71785);const an=P.forwardRef(({annotation:w,onSave:J,onDismiss:le,timeFormatter:pe,className:Se,...Re},We)=>{const Ge=(0,X.wW)(Nn),at=(0,St.R9)(),ot=(0,P.useRef)(null);(0,Ze.Z)(ot,()=>{le()});const[ft,ht]=(0,Ye.default)(async fn=>{const kt=await at.onAnnotationCreate(fn);return J&&J(),kt}),[wt,Et]=(0,Ye.default)(async fn=>{const kt=await at.onAnnotationUpdate(fn);return J&&J(),kt}),At=w.id!==void 0,zt=w.time!==w.timeEnd,Rt=At?Et:ht,Tt=At?wt:ft,_t=zt?`${pe(w.time)} - ${pe(w.timeEnd)}`:pe(w.time),Jt=({tags:fn,description:kt})=>{Rt({id:w.id,tags:fn,description:kt,from:Math.round(w.time),to:Math.round(w.timeEnd)})},Ht=P.createElement("div",{ref:We,className:(0,k.cx)(Ge.editor,Se),...Re},P.createElement("div",{className:Ge.header},P.createElement(so.Lh,{justify:"space-between",align:"center"},P.createElement("div",{className:Ge.title},"Add annotation"),P.createElement("div",{className:Ge.ts},_t))),P.createElement("div",{className:Ge.editorForm},P.createElement(dt.l,{onSubmit:Jt,defaultValues:{description:w?.text,tags:w?.tags||[]}},({register:fn,errors:kt,control:gn})=>P.createElement(P.Fragment,null,P.createElement(Ct.g,{label:"Description",invalid:!!kt.description,error:kt?.description?.message},P.createElement(Lt.K,{...fn("description",{required:"Annotation description is required"})})),P.createElement(Ct.g,{label:"Tags"},P.createElement(Ft.g,{control:gn,name:"tags",render:({field:{ref:cn,onChange:tn,...pn}})=>P.createElement(Yt.D,{allowCustomValue:!0,placeholder:"Add tags",onChange:tn,tagOptions:nn.lK,tags:pn.value})})),P.createElement(so.Lh,{justify:"flex-end"},P.createElement(te.zx,{size:"sm",variant:"secondary",onClick:le,fill:"outline"},"Cancel"),P.createElement(te.zx,{size:"sm",type:"submit",disabled:Tt?.loading},Tt?.loading?"Saving":"Save"))))));return P.createElement(P.Fragment,null,P.createElement("div",{className:Ge.backdrop}),P.createElement("div",{ref:ot},Ht))});an.displayName="AnnotationEditorForm";const Nn=w=>({backdrop:(0,k.css)`
      label: backdrop;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: ${w.zIndex.navbarFixed};
    `,editorContainer:(0,k.css)`
      position: absolute;
      top: calc(100% + 10px);
      transform: translate3d(-50%, 0, 0);
    `,editor:(0,k.css)`
      background: ${w.colors.background.primary};
      box-shadow: ${w.shadows.z3};
      z-index: ${w.zIndex.dropdown};
      border: 1px solid ${w.colors.border.weak};
      border-radius: ${w.shape.radius.default};
      width: 460px;
    `,editorForm:(0,k.css)`
      padding: ${w.spacing(1)};
    `,header:(0,k.css)`
      border-bottom: 1px solid ${w.colors.border.weak};
      padding: ${w.spacing(1.5,1)};
    `,title:(0,k.css)`
      font-weight: ${w.typography.fontWeightMedium};
    `,ts:(0,k.css)`
      font-size: ${w.typography.bodySmall.fontSize};
      color: ${w.colors.text.secondary};
    `}),Kn=({onDismiss:w,onSave:J,timeZone:le,data:pe,selection:Se,annotation:Re,style:We})=>{const Ge=(0,X.l4)(),at=(0,X.wW)(Vn),ot=(0,X.wW)(Qe),[ft,ht]=(0,P.useState)(null),[wt,Et]=(0,P.useState)(null),At=(0,Zo.D)(ft,wt,{modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]});let zt=pe.fields[0];if(!zt)return null;const Rt=zt.display||(0,hs.U)({field:zt,timeZone:le,theme:Ge}),Tt=Se.min!==Se.max;return P.createElement(_n.h_,null,P.createElement(P.Fragment,null,P.createElement("div",{style:We},P.createElement("div",{className:(0,k.cx)((0,k.css)`
                position: absolute;
                top: ${Se.bbox.top}px;
                left: ${Se.bbox.left}px;
                width: ${Se.bbox.width}px;
                height: ${Se.bbox.height}px;
              `,Tt?at.overlayRange(Re):at.overlay(Re))},P.createElement("div",{ref:ht,className:Tt?(0,k.cx)(ot(Re).markerBar,at.markerBar):(0,k.cx)(ot(Re).markerTriangle,at.markerTriangle)}))),P.createElement(an,{annotation:Re||{time:Se.min,timeEnd:Se.max},timeFormatter:_t=>Rt(_t).text,onSave:J,onDismiss:w,ref:Et,style:At.styles.popper,...At.attributes.popper})))},Vn=w=>({overlay:J=>{const le=w.visualization.getColorByName(J?.color||Oi.Jx);return(0,k.css)`
        border-left: 1px dashed ${le};
      `},overlayRange:J=>{const le=w.visualization.getColorByName(J?.color||Oi.Jx);return(0,k.css)`
        background: ${fr.alpha(le,.1)};
        border-left: 1px dashed ${le};
        border-right: 1px dashed ${le};
      `},markerTriangle:(0,k.css)`
      top: calc(100% + 2px);
      left: -4px;
      position: absolute;
    `,markerBar:(0,k.css)`
      top: 100%;
      left: 0;
      position: absolute;
    `}),Hn=({data:w,timeZone:J,config:le,children:pe})=>{const Se=(0,P.useRef)(),[Re,We]=(0,P.useState)(),[Ge,at]=(0,P.useState)(!1),[ot,ft]=(0,P.useState)(null),ht=(0,_l.Z)(),wt=(0,P.useCallback)(()=>{ft(null),Se.current&&Se.current.setSelect({top:0,left:0,width:0,height:0}),at(!1)},[at,ft]);(0,P.useLayoutEffect)(()=>{let At=!1;le.addHook("init",Rt=>{Se.current=Rt;const Tt=Rt.hooks.setSelect;if(Tt)for(let _t=0;_t<Tt.length;_t++){const Jt=Tt[_t];Jt!==zt&&(Tt[_t]=(...Ht)=>{!At&&Jt(...Ht)})}}),le.addHook("syncRect",(Rt,Tt)=>{ht()&&We(Tt)});const zt=Rt=>{At&&(at(!0),ft({min:Rt.posToVal(Rt.select.left,"x"),max:Rt.posToVal(Rt.select.left+Rt.select.width,"x"),bbox:{left:Rt.select.left,top:0,height:Rt.select.height,width:Rt.select.width}}),At=!1)};le.addHook("setSelect",zt),le.setCursor({bind:{mousedown:(Rt,Tt,_t)=>Jt=>(At=Jt.button===0&&(Jt.metaKey||Jt.ctrlKey),_t(Jt),null),mouseup:(Rt,Tt,_t)=>Jt=>(At&&Rt.select.width===0&&(Rt.select.left=Rt.cursor.left,Rt.select.height=Rt.bbox.height/window.devicePixelRatio),_t(Jt),null)}})},[le,We,ht]);const Et=(0,P.useCallback)(({coords:At})=>{if(!Se.current||!Re||!At)return;const zt=Se.current.posToVal(At.plotCanvas.x,"x");zt&&(ft({min:zt,max:zt,bbox:{left:At.plotCanvas.x,top:0,height:Re.height,width:0}}),at(!0))},[Re]);return P.createElement(P.Fragment,null,Ge&&ot&&Re&&P.createElement(Kn,{selection:ot,onDismiss:wt,onSave:wt,data:w,timeZone:J,style:{position:"absolute",top:`${Re.top}px`,left:`${Re.left}px`,width:`${Re.width}px`,height:`${Re.height}px`}}),pe?pe({startAnnotating:Et}):null)};var ua=e(73891),Qn=e(17325),ha=e(12537),oa=e(70991),xa=e(55182),Ba=e(86734),na=e(75064),Fa=e(69977);const ja=({annotation:w,timeFormatter:J,canEdit:le,canDelete:pe,onEdit:Se,onDelete:Re})=>{const We=(0,X.wW)(ps),Ge=J(w.time),at=J(w.timeEnd);let ot=w.text;const ft=w.tags;let ht="",wt,Et,At=null;const zt=P.createElement("span",{className:We.time},w.isRegion?`${Ge} - ${at}`:Ge);if(w.login&&w.avatarUrl&&(wt=P.createElement("img",{className:We.avatar,alt:"Annotation avatar",src:w.avatarUrl})),w.alertId!==void 0&&w.newState){const Rt=ze.Z.getStateDisplayModel(w.newState);At=P.createElement("div",{className:We.alertState},P.createElement("i",{className:Rt.stateClass},Rt.text)),ht=ze.Z.getAlertAnnotationInfo(w)}else w.title&&(ot=w.title+"<br />"+(typeof ot=="string"?ot:""));return(le||pe)&&(Et=P.createElement("div",{className:We.editControls},le&&P.createElement(na.h,{name:"pen",size:"sm",onClick:Se,tooltip:"Edit"}),pe&&P.createElement(na.h,{name:"trash-alt",size:"sm",onClick:Re,tooltip:"Delete"}))),P.createElement("div",{className:We.wrapper},P.createElement("div",{className:We.header},P.createElement(so.Lh,{justify:"space-between",align:"center",spacing:"md"},P.createElement("div",{className:We.meta},P.createElement("span",null,wt,At),zt),Et)),P.createElement("div",{className:We.body},ot&&P.createElement("div",{dangerouslySetInnerHTML:{__html:Ba.QX.sanitize(ot)}}),ht,P.createElement(P.Fragment,null,P.createElement(so.Lh,{spacing:"xs",wrap:!0},ft?.map((Rt,Tt)=>P.createElement(Fa.V,{name:Rt,key:`${Rt}-${Tt}`}))))))};ja.displayName="AnnotationTooltip";const ps=w=>({wrapper:(0,k.css)`
      max-width: 400px;
    `,commentWrapper:(0,k.css)`
      margin-top: 10px;
      border-top: 2px solid #2d2b34;
      height: 30vh;
      overflow-y: scroll;
      padding: 0 3px;
    `,header:(0,k.css)`
      padding: ${w.spacing(.5,1)};
      border-bottom: 1px solid ${w.colors.border.weak};
      font-size: ${w.typography.bodySmall.fontSize};
      display: flex;
    `,meta:(0,k.css)`
      display: flex;
      justify-content: space-between;
    `,editControls:(0,k.css)`
      display: flex;
      align-items: center;
      > :last-child {
        margin-right: 0;
      }
    `,avatar:(0,k.css)`
      border-radius: ${w.shape.radius.circle};
      width: 16px;
      height: 16px;
      margin-right: ${w.spacing(1)};
    `,alertState:(0,k.css)`
      padding-right: ${w.spacing(1)};
      font-weight: ${w.typography.fontWeightMedium};
    `,time:(0,k.css)`
      color: ${w.colors.text.secondary};
      font-weight: normal;
      display: inline-block;
      position: relative;
      top: 1px;
    `,body:(0,k.css)`
      padding: ${w.spacing(1)};

      a {
        color: ${w.colors.text.link};
        &:hover {
          text-decoration: underline;
        }
      }
    `}),Is=6,bs={modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]};function vs({annotation:w,timeZone:J,width:le}){const{canEditAnnotations:pe,canDeleteAnnotations:Se,...Re}=(0,St.R9)(),We=(0,X.wW)(Qe),Ge=(0,X.wW)(qs),[at,ot]=(0,P.useState)(!1),[ft,ht]=(0,P.useState)(!1),[wt,Et]=(0,P.useState)(null),[At,zt]=(0,P.useState)(null),[Rt,Tt]=(0,P.useState)(null),_t=(0,P.useRef)(),Jt=(0,Zo.D)(wt,At,bs),Ht=(0,Zo.D)(wt,Rt,bs),fn=(0,P.useCallback)(()=>{ht(!0),ot(!1)},[ht,ot]),kt=(0,P.useCallback)(()=>{Re.onAnnotationDelete&&Re.onAnnotationDelete(w.id)},[w,Re]),gn=(0,P.useCallback)(()=>{_t.current&&clearTimeout(_t.current),ot(!0)},[ot]),cn=(0,P.useCallback)(()=>{_t.current&&clearTimeout(_t.current)},[]),tn=(0,P.useCallback)(()=>{_t.current=setTimeout(()=>{ot(!1)},100)},[ot]),pn=(0,P.useCallback)(Tn=>(0,ha.dq)(Tn,{format:oa.U6.fullDate,timeZone:J}),[J]),dn=(0,P.useCallback)(()=>P.createElement(ja,{annotation:w,timeFormatter:pn,onEdit:fn,onDelete:kt,canEdit:pe?pe(w.dashboardUID):!1,canDelete:Se?Se(w.dashboardUID):!1}),[pe,Se,kt,fn,pn,w]),Un=!!w.isRegion&&le>Is;let qn=`${le/2}px`,Fn=P.createElement("div",{className:We(w).markerTriangle,style:{left:qn,position:"relative",transform:"translate3d(-100%,-50%, 0)"}});return Un&&(Fn=P.createElement("div",{className:We(w).markerBar,style:{width:`${le}px`,transform:"translate3d(0,-50%, 0)"}})),P.createElement(P.Fragment,null,P.createElement("div",{ref:Et,onMouseEnter:gn,onMouseLeave:tn,className:Un?void 0:Ge.markerWrapper,"data-testid":He.wl.pages.Dashboard.Annotations.marker},Fn),at&&P.createElement(_n.h_,null,P.createElement("div",{ref:zt,style:Jt.styles.popper,...Jt.attributes.popper,className:Ge.tooltip,onMouseEnter:cn,onMouseLeave:tn},dn())),ft&&P.createElement(_n.h_,null,P.createElement(an,{onDismiss:()=>ht(!1),onSave:()=>ht(!1),timeFormatter:pn,annotation:w,ref:Tt,style:Ht.styles.popper,...Ht.attributes.popper})))}const qs=w=>({markerWrapper:(0,k.css)`
      label: markerWrapper;
      padding: 0 4px 4px 4px;
    `,wrapper:(0,k.css)`
      max-width: 400px;
    `,tooltip:(0,k.css)`
      ${(0,xa.getTooltipContainerStyles)(w)};
      padding: 0;
    `}),Rs=({annotations:w,timeZone:J,config:le})=>{const pe=(0,X.l4)(),Se=(0,P.useRef)(),Re=(0,P.useRef)();(0,P.useEffect)(()=>{const at=[];for(const ot of w)at.push(new ua.U(ot));return Re.current=at,()=>{Re.current=[]}},[w]),(0,P.useLayoutEffect)(()=>{le.addHook("init",at=>{Se.current=at}),le.addHook("draw",at=>{if(!Re.current)return null;const ot=at.ctx;if(!ot)return;ot.save(),ot.beginPath(),ot.rect(at.bbox.left,at.bbox.top,at.bbox.width,at.bbox.height),ot.clip();const ft=(ht,wt)=>{ot.beginPath(),ot.lineWidth=2,ot.strokeStyle=wt,ot.setLineDash([5,5]),ot.moveTo(ht,at.bbox.top),ot.lineTo(ht,at.bbox.top+at.bbox.height),ot.stroke(),ot.closePath()};for(let ht=0;ht<Re.current.length;ht++){const wt=Re.current[ht];for(let Et=0;Et<wt.length;Et++){const At=wt.get(Et);if(!At.time)continue;let zt=at.valToPos(At.time,"x",!0);const Rt=pe.visualization.getColorByName(At.color);if(ft(zt,Rt),At.isRegion&&At.timeEnd){let Tt=at.valToPos(At.timeEnd,"x",!0);ft(Tt,Rt),ot.fillStyle=fr.alpha(Rt,.1),ot.rect(zt,at.bbox.top,Tt-zt,at.bbox.height),ot.fill()}}}ot.restore()})},[le,pe]);const We=(0,P.useCallback)((at,ot)=>{const ht=new ua.U(at).get(ot.fieldIndex);if(!ht.time||!Se.current)return;let wt=Se.current.valToPos(ht.time,"x");return wt<0&&(wt=0),{x:wt,y:Se.current.bbox.height/window.devicePixelRatio+4}},[]),Ge=(0,P.useCallback)((at,ot)=>{let ft=0;const wt=new ua.U(at).get(ot.fieldIndex);if(!!wt.isRegion&&Se.current){let At=Se.current.valToPos(wt.time,"x"),zt=Se.current.valToPos(wt.timeEnd,"x");At<0&&(At=0),zt>Se.current.bbox.width/window.devicePixelRatio&&(zt=Se.current.bbox.width/window.devicePixelRatio),ft=zt-At}return P.createElement(vs,{annotation:wt,timeZone:J,width:ft})},[J]);return P.createElement(Qn.T,{id:"annotations",config:le,events:w,renderEventMarker:Ge,mapEventToXYCoords:We})};var Dr=e(43050),qr=e(8441),Vr=e(71862),Qa=e(69707),gr=e(19841);const Gs=({data:w,config:J,onClose:le,timeZone:pe,replaceVariables:Se,...Re})=>{const[We,Ge]=(0,P.useState)(null),[at,ot]=(0,P.useState)(null),[ft,ht]=(0,P.useState)(!1);(0,P.useLayoutEffect)(()=>{let Et=null;J.addHook("init",At=>{At.over.addEventListener("click",zt=>{Et!=null&&!zt.metaKey&&!zt.ctrlKey&&!zt.shiftKey&&(Ge({viewport:{x:zt.clientX,y:zt.clientY},plotCanvas:{x:zt.clientX-At.rect.left,y:zt.clientY-At.rect.top}}),ot({seriesIdx:Et,dataIdx:At.cursor.idxs[Et]}),ht(!0))})}),J.addHook("setSeries",(At,zt)=>{Et=zt})},[J]);const wt=(0,P.useMemo)(()=>Re.defaultItems?Re.defaultItems.map(Et=>({...Et,items:Et.items.map(At=>({...At,onClick:zt=>{We&&At.onClick?.(zt,{coords:We})}}))})):[],[We,Re.defaultItems]);return P.createElement(P.Fragment,null,ft&&We&&P.createElement(Wn,{data:w,frames:Re.frames,defaultItems:wt,timeZone:pe,selection:{point:at,coords:We},replaceVariables:Se,onClose:()=>{ot(null),ht(!1),le&&le()}}))},Wn=({selection:w,timeZone:J,defaultItems:le,replaceVariables:pe,data:Se,...Re})=>{const We=(0,P.useRef)(null),Ge=()=>{Re.onClose&&Re.onClose()};(0,Dr.Z)(We,()=>{Ge()});const at=Se.fields[0];if(!at)return null;const ot=le?[...le]:[];let ft=()=>null;if(w.point){const{seriesIdx:wt,dataIdx:Et}=w.point,At=at.display;if(wt&&Et!==null){const zt=Se.fields[wt],Rt=zt.display(zt.values[Et]);zt.config.links&&zt.config.links.length>0&&zt.getLinks&&ot.push({items:zt.getLinks({valueRowIndex:Et}).map(_t=>({label:_t.title,ariaLabel:_t.title,url:_t.href,target:_t.target,icon:_t.target==="_self"?"link":"external-link-alt",onClick:_t.onClick}))}),ft=()=>P.createElement(qr.b,{timestamp:At(at.values[Et]).text,displayValue:Rt,seriesColor:Rt.color,displayName:(0,Na.CZ)(zt,Se,Re.frames)})}}const ht=()=>ot?.map((wt,Et)=>P.createElement(Vr.k,{key:`${wt.label}${Et}`,label:wt.label},(wt.items||[]).map(At=>P.createElement(Qa.s,{key:At.url,url:At.url,label:At.label,target:At.target,icon:At.icon,active:At.active,onClick:At.onClick}))));return P.createElement(gr.x,{renderMenuItems:ht,renderHeader:ft,x:w.coords.viewport.x,y:w.coords.viewport.y,onClose:Ge})};var aa=e(18632),ya=e(52208);const Ya=({timeZone:w,dataFrame:J,dataFrameFieldIndex:le,config:pe,exemplarColor:Se,clickedExemplarFieldIndex:Re,setClickedExemplarFieldIndex:We})=>{const Ge=(0,X.wW)(ws),[at,ot]=(0,P.useState)(!1),[ft,ht]=(0,P.useState)(!1),[wt,Et]=P.useState(null),[At,zt]=P.useState(null),{styles:Rt,attributes:Tt}=(0,Zo.D)(wt,At,{modifiers:[{name:"preventOverflow",options:{altAxis:!0}},{name:"flip",options:{fallbackPlacements:["top","left-start"]}}]}),_t=(0,P.useRef)();(0,P.useEffect)(()=>{Re?.fieldIndex===le.fieldIndex&&Re?.frameIndex===le.frameIndex||ht(!1)},[Re,le]);const Jt=()=>{const pn=[P.createElement("rect",{fill:Se,key:"diamond",x:"3.38672",width:"4.78985",height:"4.78985",transform:"rotate(45 3.38672 0)"}),P.createElement("path",{fill:Se,key:"x",d:"M1.94444 3.49988L0 5.44432L1.55552 6.99984L3.49996 5.05539L5.4444 6.99983L6.99992 5.44431L5.05548 3.49988L6.99983 1.55552L5.44431 0L3.49996 1.94436L1.5556 0L8.42584e-05 1.55552L1.94444 3.49988Z"}),P.createElement("path",{fill:Se,key:"triangle",d:"M4 0L7.4641 6H0.535898L4 0Z"}),P.createElement("rect",{fill:Se,key:"rectangle",width:"5",height:"5"}),P.createElement("path",{fill:Se,key:"pentagon",d:"M3 0.5L5.85317 2.57295L4.76336 5.92705H1.23664L0.146831 2.57295L3 0.5Z"}),P.createElement("path",{fill:Se,key:"plus",d:"m2.35672,4.2425l0,2.357l1.88558,0l0,-2.357l2.3572,0l0,-1.88558l-2.3572,0l0,-2.35692l-1.88558,0l0,2.35692l-2.35672,0l0,1.88558l2.35672,0z"})];return pn[le.frameIndex%pn.length]},Ht=(0,P.useCallback)(()=>{Re===void 0&&(_t.current&&clearTimeout(_t.current),ot(!0))},[ot,Re]),fn=()=>{ht(!0)},kt=(0,P.useCallback)(()=>{_t.current=setTimeout(()=>{ot(!1)},150)},[ot]),gn=(0,P.useCallback)(()=>{const pn=J.fields.filter(Fn=>Fn.config.links?.length&&Fn.config.links?.length>0)||[],dn=[...pn,...J.fields.filter(Fn=>!pn.includes(Fn))],Un=Fn=>(0,ha.dq)(Fn,{format:oa.U6.fullDate,timeZone:w}),qn=()=>{ht(!1),ot(!1),We(void 0)};return P.createElement("div",{onMouseEnter:Ht,onMouseLeave:kt,className:Ge.tooltip,ref:zt,style:Rt.popper,...Tt.popper},P.createElement("div",{className:Ge.wrapper},ft&&P.createElement(ya.o,{onClick:qn}),P.createElement("div",{className:Ge.body},P.createElement("div",{className:Ge.header},P.createElement("span",{className:Ge.title},"Exemplars")),P.createElement("div",null,P.createElement("table",{className:Ge.exemplarsTable},P.createElement("tbody",null,dn.map((Fn,Tn)=>{const sa=Fn.values[le.fieldIndex],ia=Fn.config.links?.length?Fn.getLinks?.({valueRowIndex:le.fieldIndex}):void 0;return P.createElement("tr",{key:Tn},P.createElement("td",{valign:"top"},Fn.name),P.createElement("td",null,P.createElement("div",{className:Ge.valueWrapper},P.createElement("span",null,Fn.type===zn.fS.time?Un(sa):sa),ia&&P.createElement(aa.Z,{links:ia}))))})))))))},[Tt.popper,J.fields,le,Ht,kt,Rt.popper,Ge,w,ft,We]),cn=pe.getSeries().find(pn=>pn.props.dataFrameFieldIndex?.frameIndex===le.frameIndex)?.props.lineColor,tn=()=>{We(le),fn()};return P.createElement(P.Fragment,null,P.createElement("div",{ref:Et,onClick:tn,onKeyDown:pn=>{pn.key==="Enter"&&tn()},onMouseEnter:Ht,onMouseLeave:kt,className:Ge.markerWrapper,"aria-label":He.wl.components.DataSource.Prometheus.exemplarMarker,role:"button",tabIndex:0},P.createElement("svg",{viewBox:"0 0 7 7",width:"7",height:"7",style:{fill:cn},className:(0,k.cx)(Ge.marble,(at||ft)&&Ge.activeMarble)},Jt())),(at||ft)&&P.createElement(_n.h_,null,gn()))},ws=w=>{const J=w.isDark?w.v1.palette.dark2:w.v1.palette.white,le=w.isDark?w.v1.palette.dark9:w.v1.palette.gray5,pe=w.isDark?w.v1.palette.black:w.v1.palette.white,Se=w.isDark?w.v1.palette.dark3:w.v1.palette.gray6;return{markerWrapper:(0,k.css)`
      padding: 0 4px 4px 4px;
      width: 8px;
      height: 8px;
      box-sizing: content-box;
      transform: translate3d(-50%, 0, 0);

      &:hover {
        > svg {
          transform: scale(1.3);
          opacity: 1;
          filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
        }
      }
    `,marker:(0,k.css)`
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-bottom: 4px solid ${w.v1.palette.red};
      pointer-events: none;
    `,wrapper:(0,k.css)`
      background: ${J};
      border: 1px solid ${le};
      border-radius: ${w.shape.borderRadius(2)};
      box-shadow: 0 0 20px ${pe};
      padding: ${w.spacing(1)};
    `,exemplarsTable:(0,k.css)`
      width: 100%;

      tr td {
        padding: 5px 10px;
        white-space: nowrap;
        border-bottom: 4px solid ${w.components.panel.background};
      }

      tr {
        background-color: ${w.colors.background.primary};

        &:nth-child(even) {
          background-color: ${Se};
        }
      }
    `,valueWrapper:(0,k.css)`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      column-gap: ${w.spacing(1)};

      > span {
        flex-grow: 0;
      }

      > * {
        flex: 1 1;
        align-self: center;
      }
    `,tooltip:(0,k.css)`
      background: none;
      padding: 0;
      overflow-y: auto;
      max-height: 95vh;
    `,header:(0,k.css)`
      background: ${le};
      padding: 6px 10px;
      display: flex;
    `,title:(0,k.css)`
      font-weight: ${w.typography.fontWeightMedium};
      padding-right: ${w.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,body:(0,k.css)`
      font-weight: ${w.typography.fontWeightMedium};
      border-radius: ${w.shape.borderRadius(2)};
      overflow: hidden;
    `,marble:(0,k.css)`
      display: block;
      opacity: 0.5;
      transition: transform 0.15s ease-out;
    `,activeMarble:(0,k.css)`
      transform: scale(1.3);
      opacity: 1;
      filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
    `}},as=({exemplars:w,timeZone:J,config:le,visibleSeries:pe})=>{const Se=(0,P.useRef)(),[Re,We]=(0,P.useState)();(0,P.useLayoutEffect)(()=>{le.addHook("init",ot=>{Se.current=ot})},[le]);const Ge=(0,P.useCallback)((ot,ft)=>{const ht=ot.fields.find(Tt=>Tt.name===zn.Ls),wt=ot.fields.find(Tt=>Tt.name===zn.M5);if(!ht||!wt||!Se.current)return;const Et=Object.keys(Se.current.scales).find(Tt=>!["x","y"].some(_t=>_t===Tt))??ms.j,At=Se.current.scales[Et].min,zt=Se.current.scales[Et].max;let Rt=wt.values[ft.fieldIndex];return At!=null&&Rt<At&&(Rt=At),zt!=null&&Rt>zt&&(Rt=zt),{x:Se.current.valToPos(ht.values[ft.fieldIndex],"x"),y:Se.current.valToPos(Rt,Et)}},[]),at=(0,P.useCallback)((ot,ft)=>{const ht=pe!==void 0?So(pe,ot,ft):!0,wt=pe!==void 0?Es(ot,ft,pe):void 0;return ht?P.createElement(Ya,{setClickedExemplarFieldIndex:We,clickedExemplarFieldIndex:Re,timeZone:J,dataFrame:ot,dataFrameFieldIndex:ft,config:le,exemplarColor:wt}):P.createElement(P.Fragment,null)},[le,J,pe,We,Re]);return P.createElement(Qn.T,{config:le,id:"exemplars",events:w,renderEventMarker:at,mapEventToXYCoords:Ge})},eo=(w,J)=>{const le=w.series.filter(Se=>Se.props.show),pe=[];return J?.length&&le.forEach(Se=>{const Re=Se.props?.dataFrameFieldIndex?.frameIndex,We=Se.props?.dataFrameFieldIndex?.fieldIndex;if(Re!==void 0&&We!==void 0){const Ge=J[Re]?.fields[We];Ge?.labels&&pe.push({labels:Ge.labels,color:Se.props?.lineColor??""})}}),{labels:pe,totalSeriesCount:w.series.length}},Es=(w,J,le)=>{let pe;return le.labels.some(Se=>{const Re=Object.keys(Se.labels),We=w.fields.filter(Ge=>Re.find(at=>at===Ge.name));return We.length&&We.every((at,ot,ft)=>{const ht=at.values[J.fieldIndex];return Se.labels[at.name]===ht})?(pe=Se.color,!0):!1}),pe},So=(w,J,le)=>{let pe=!1;return w.labels.length===w.totalSeriesCount?pe=!0:w.labels.some(Se=>{const Re=Object.keys(Se.labels);if(Object.keys(Se.labels).length===0)pe=!0;else{const We=J.fields.filter(Ge=>Re.find(at=>at===Ge.name));We.length&&(pe=w.labels.some(Ge=>Object.keys(Ge.labels).every(at=>{const ot=Ge.labels[at];return We.find(ft=>ft.values[le.fieldIndex]===ot)})))}return pe}),pe},_r=({config:w,onChangeTimeRange:J})=>{const le=(0,P.useRef)(),[pe,Se]=(0,P.useState)([]),[Re,We]=(0,P.useState)();if((0,P.useLayoutEffect)(()=>{w.addHook("init",Et=>{le.current=Et}),w.addHook("setScale",Et=>{Se(Et.data?.[0]??[]),We(Et.scales.x??void 0)})},[w]),pe.length<2||!J||!Re||!Re.time||!Re.min||!Re.max)return null;let Ge=0,at=pe.length-1;for(;Ge<=at&&pe[Ge]==null;)Ge++;for(;at>=0&&pe[at]==null;)at--;const ot=pe[Ge],ft=pe[at],ht=Re.min,wt=Re.max;return ot==null||ft==null||ot<=wt&&ft>=ht?null:P.createElement("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",textAlign:"center"}},P.createElement("div",null,P.createElement("div",null,"Data outside time range"),P.createElement(te.zx,{onClick:Et=>J({from:ot,to:ft}),variant:"secondary","data-testid":"time-series-zoom-to-data"},"Zoom to data")))};_r.displayName="OutsideRangePlugin";var ss=e(23318),Mr=e.n(ss);const Tr=({step:w,y:J,dragBounds:le,mapPositionToValue:pe,formatValue:Se,onChange:Re})=>{const We=(0,X.l4)();let Ge=J,at="none";J<(le.top??0)&&(at="top"),J>(le.bottom??0)+22&&(at="bottom"),at==="bottom"&&(Ge=le.bottom??J),at==="top"&&(Ge=le.top??J);const ot=typeof Re!="function",ft=(0,X.wW)(fo,w,at,ot),[ht,wt]=(0,P.useState)(w.value),Et=(0,P.useMemo)(()=>We.colors.getContrastText(We.visualization.getColorByName(w.color)),[w.color,We]);return P.createElement(Mr(),{axis:"y",grid:[1,1],disabled:ot,onStop:ot?ne.noop:(At,zt)=>(Re(pe(zt.lastY)),!1),onDrag:(At,zt)=>wt(pe(zt.lastY)),position:{x:0,y:Ge},bounds:le},P.createElement("div",{className:ft.handle,style:{color:Et}},P.createElement("span",{className:ft.handleText},Se(ht))))};Tr.displayName="ThresholdDragHandle";const fo=(w,J,le,pe)=>{const Se=w.visualization.getColorByName(J.color),Re=Ji(le),We=le!=="none";return{handle:(0,k.css)`
      display: flex;
      align-items: center;
      position: absolute;
      left: 0;
      width: calc(100% - 9px);
      height: 18px;
      margin-top: -9px;
      border-color: ${Se};
      cursor: ${pe?"initial":"grab"};
      border-top-right-radius: ${w.shape.radius.default};
      border-bottom-right-radius: ${w.shape.radius.default};
      ${We&&(0,k.css)`
        margin-top: 0;
        border-radius: ${w.shape.radius.default};
      `}
      background: ${Se};
      font-size: ${w.typography.bodySmall.fontSize};
      &:before {
        ${Re};
      }
    `,handleText:(0,k.css)`
      text-align: center;
      width: 100%;
      display: block;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `}};function Ji(w){const J=w==="none",le=pe=>(0,k.css)`
    content: '';
    position: absolute;

    bottom: 0;
    top: 0;
    width: 0;
    height: 0;
    left: 0;

    border-right-style: solid;
    border-right-width: ${pe}px;
    border-right-color: inherit;
    border-top: ${pe}px solid transparent;
    border-bottom: ${pe}px solid transparent;
  `;return J?(0,k.css)`
      ${le(9)};
      left: -9px;
    `:w==="top"?(0,k.css)`
      ${le(5)};
      left: calc(50% - 2.5px);
      top: -7px;
      transform: rotate(90deg);
    `:w==="bottom"?(0,k.css)`
      ${le(5)};
      left: calc(50% - 2.5px);
      top: calc(100% - 2.5px);
      transform: rotate(-90deg);
    `:""}const $l=60,zl=({config:w,fieldConfig:J,onThresholdsChange:le})=>{const pe=(0,P.useRef)(),[Se,Re]=(0,P.useState)(0);(0,P.useLayoutEffect)(()=>{w.setPadding([0,$l,0,0]),w.addHook("init",Ge=>{pe.current=Ge}),w.addHook("draw",()=>{Re(Ge=>Ge+1)})},[w]);const We=(0,P.useMemo)(()=>{const Ge=pe.current;if(!Ge)return null;const at=J.defaults.thresholds;if(!at)return null;const ot=(0,Wo.z)(J.defaults,zn.fS.number),ft=J.defaults.decimals,ht=[];for(let wt=0;wt<at.steps.length;wt++){const Et=at.steps[wt],At=Ge.valToPos(Et.value,ot);if(Number.isNaN(At)||!Number.isFinite(At))continue;const zt=Ge.bbox.height/window.devicePixelRatio,Tt=typeof le=="function"?Jt=>{const Ht=[...at.steps.slice(0,wt),...at.steps.slice(wt+1),{...at.steps[wt],value:Jt}].sort((fn,kt)=>fn.value-kt.value);le({...at,steps:Ht})}:void 0,_t=P.createElement(Tr,{key:`${Et.value}-${wt}`,step:Et,y:At,dragBounds:{top:0,bottom:zt},mapPositionToValue:Jt=>Ge.posToVal(Jt,ot),formatValue:Jt=>(0,cs.Cf)(ot)(Jt,ft).text,onChange:Tt});ht.push(_t)}return ht},[Se,J,le]);return pe.current?P.createElement("div",{style:{position:"absolute",overflow:"visible",left:`${(pe.current.bbox.left+pe.current.bbox.width)/window.devicePixelRatio}px`,top:`${pe.current.bbox.top/window.devicePixelRatio}px`,width:`${$l}px`,height:`${pe.current.bbox.height/window.devicePixelRatio}px`}},We):null};zl.displayName="ThresholdControlsPlugin";var Qc=e(6237),Yc=e(8499),ku=e(84231),Hu=e(44558);function js(w){let J=new Map;return w.map(pe=>({...pe,fields:pe.fields.map(Se=>{if(Se.type===zn.fS.enum){let Re=(0,Wo.z)(Se.config,Se.type),We=J.get(Re);We||(We=[],J.set(Re,We));let Ge=Se.values.toArray().slice(),at=Se.config.type.enum.text;if(We.length>0)for(let ot=0;ot<Ge.length;ot++)Ge[ot]+=We.length;return We.push(...at),Se.config.type.enum.text=We,{...Se,values:Ge}}return Se})}))}function $r(w,J,le,pe){if(!w?.length)return null;let Se=pe!=null;pe!=null&&pe>0&&(w=[{...w[0],fields:[w[0].fields[pe],...w[0].fields.filter((at,ot)=>ot!==pe)]}]);for(let at of w)for(let ot of at.fields)ot.type===zn.fS.time&&typeof ot.values[0]!="number"&&(ot.values=(0,Yc.p8)(ot,{destinationType:zn.fS.time}).values);let Re=0;e:for(let at of w)for(let ot of at.fields)if(ot.type===zn.fS.enum&&++Re>1){w=js(w);break e}let We;const Ge=[];for(let at of w){const ot=[];let ft=!1,ht=!1,wt=Se?at:(0,ku.w)({frame:at,refFieldPseudoMin:le?.from.valueOf(),refFieldPseudoMax:le?.to.valueOf()});const Et=(0,Hu.I)(wt).fields;for(let At=0;At<Et?.length;At++){const zt=Et[At];switch(zt.type){case zn.fS.time:ft=!0,ot.push(zt);break;case zn.fS.number:ht=Se?At>0:!0,We={...zt,values:zt.values.map(_t=>Number.isFinite(_t)||_t==null?_t:null)},ot.push(We);break;case zn.fS.enum:ht=!0;case zn.fS.string:We={...zt,values:zt.values},ot.push(We);break;case zn.fS.boolean:ht=!0;const Rt=zt.config?.custom??{},Tt={...zt.config,max:1,min:0,custom:Rt};Rt.lineInterpolation!==Mt.KC.StepBefore&&(Rt.lineInterpolation=Mt.KC.StepAfter),We={...zt,config:Tt,type:zn.fS.number,values:zt.values.map(_t=>_t==null?_t:_t?1:0)},(0,cs.br)(Tt.unit)||(Tt.unit="bool",We.display=(0,hs.U)({field:We,theme:J})),ot.push(We);break}}(Se||ft)&&ht&&Ge.push({...at,length:wt.length,fields:ot})}return Ge.length?(Zc(Ge,J,0),Qs(Ge,J),Ge):null}const Qs=(w,J)=>{const{palette:le}=J.visualization;for(const pe of w)for(const Se of pe.fields)if(Se.type===zn.fS.enum){const Re=le[Se.state?.seriesIndex%le.length],We=J.visualization.getColorByName(Re),Ge=Se.config.type.enum;Ge.color=Array(Ge.text.length).fill(We),Se.display=(0,hs.U)({field:Se,theme:J})}},Zc=(w,J,le)=>{let pe=0;w.forEach(Se=>{Se.fields.forEach((Re,We)=>{We!==le&&(Re.type===zn.fS.number||Re.type===zn.fS.boolean||Re.type===zn.fS.enum)&&(Re.state={...Re.state,seriesIndex:pe++},Re.display=(0,hs.U)({field:Re,theme:J}))})})};function zr(w,J){return!w||!w.length?[J]:w.map(le=>le?.length?le:J)}function kl(w,J,le,pe,Se){return w.fields.forEach(Re=>{if(Re.state?.origin?.frameIndex===void 0||J[Re.state?.origin?.frameIndex]===void 0)return;const We=[];for(const at of J[Re.state?.origin?.frameIndex].fields)if(at.type===zn.fS.string)if(Re.values instanceof Qc.o){const ot={...at};ot.values=new Qc.o(at.values,Re.values.getOrderArray()),We.push(ot)}else We.push(at);const Ge={fields:[...w.fields,...We],length:w.fields.length+We.length};Re.getLinks=(0,Jr.oB)(Ge,Re,Re.state.scopedVars,le,pe,Se)}),w}var rr=(w=>(w.Candles="candles",w.CandlesVolume="candles+volume",w.Volume="volume",w))(rr||{}),Xi=(w=>(w.Candles="candles",w.OHLCBars="ohlcbars",w))(Xi||{}),Fo=(w=>(w.CloseClose="close-close",w.OpenClose="open-close",w))(Fo||{});const Vs={down:"red",flat:"gray",up:"green"},Ka={...{candleStyle:"candles",colorStrategy:"open-close",colors:{down:"red",up:"green",flat:"gray"},fields:{},includeAllFields:!1,mode:"candles+volume"},legend:{displayMode:Mt.jK.List,showLegend:!0,placement:"bottom",calcs:[]}},Jo={open:{key:"open",name:"Open",defaults:["open","o"],description:"Value at the start of the period"},high:{key:"high",name:"High",defaults:["high","h","max"],description:"Maximum value within the period"},low:{key:"low",name:"Low",defaults:["low","l","min"],description:"Minimum value within the period"},close:{key:"close",name:"Close",defaults:["close","c"],description:"Value at the end of the period"},volume:{key:"volume",name:"Volume",defaults:["volume","v"],description:"Sample count within the period"}};function Gu(w,J,le){const pe=(0,Ta.findField)(w,le[J.key]);if(!pe)for(const Se of w.fields){const Re=(0,Na.CZ)(Se,w).toLowerCase();if(J.defaults.includes(Re)||J.defaults.includes(Se.name))return Se}return pe}function Hl(w,J,le,pe){if(!w?.length)return null;const Se=J.fields??{},Re=w.length===1?(0,Fr.Y3)(w[0],w[0].fields.findIndex(Et=>Et.type===zn.fS.time)):(0,Fr._9)({frames:w});if(!Re?.length)return null;const We={aligned:Re,frame:Re,names:{}},Ge=$r([Re],le,pe);if(!Ge)return null;const at=We.frame=Ge[0],ot=at.fields.findIndex(Et=>Et.type===zn.fS.time);if(ot<0)return null;const ft=new Set;for(const Et of Object.values(Jo)){const At=Gu(at,Et,Se);At&&(We[Et.key]=At,ft.add(At))}if(!We.open&&!We.close&&(We.open=at.fields.find(Et=>Et.type===zn.fS.number),We.open&&ft.add(We.open)),We.open&&!We.close&&!Se.close){const Et=We.open.values.slice(1);Et.push(Et[Et.length-1]),We.close={...We.open,values:Et,name:"Next open",state:void 0},ft.add(We.close),at.fields.push(We.close),We.autoOpenClose=!0}if(We.close&&!We.open&&!Se.open){const Et=We.close.values.slice();Et.unshift(Et[0]),Et.length=at.length,We.open={...We.close,values:Et,name:"Previous close",state:void 0},ft.add(We.open),at.fields.push(We.open),We.autoOpenClose=!0}!We.high&&!Se.high&&(We.high=We.open),!We.low&&!Se.low&&(We.low=We.open),J.mode===rr.Volume?(We.high&&(We.high!==We.open&&ft.delete(We.high),We.high=void 0),We.low&&(We.low!==We.open&&ft.delete(We.low),We.low=void 0)):J.mode===rr.Candles&&We.volume&&(ft.delete(We.volume),We.volume=void 0);for(const Et of Object.values(Jo)){const At=We[Et.key];At&&(We.names[Et.key]=(0,Na.CZ)(At,We.frame))}const ht=at.fields[ot],wt=[ht];J.includeAllFields?wt.push(...at.fields.filter(Et=>Et!==ht)):wt.push(...ft),We.frame={...We.frame,fields:wt};for(let Et=0;Et<We.frame.fields.length;Et++){const At=We.frame.fields[Et];At.state={...At.state,seriesIndex:Et-1,origin:{fieldIndex:Et,frameIndex:0}}}return We}const{alpha:Ii}=fr;function ju(w){let{mode:J,candleStyle:le,fields:pe,colorStrategy:Se,upColor:Re,downColor:We,flatColor:Ge,volumeAlpha:at,flatAsUp:ot=!0}=w;const ft=J!==rr.Volume&&pe.high!=null&&pe.low!=null,ht=ft&&le===Xi.Candles,wt=J!==rr.Candles&&pe.volume!=null;function Et(Ht,fn,kt,gn,cn){return Ht>0?kt:Ht<0?gn:cn?kt:fn}let At=0,zt=pe.open,Rt=pe.high,Tt=pe.low,_t=pe.close,Jt=pe.volume;return Ht=>{let fn,kt,gn,cn,tn,pn;ft&&(gn=new Path2D,kt=new Path2D,fn=new Path2D),wt&&(cn=new Path2D,tn=new Path2D,pn=new Path2D);let dn=new Path2D,Un=Ht.ctx,qn=Ht.data[At],Fn=Ht.data[zt],Tn=Ht.data[_t],sa=ft?Ht.data[Rt]:null,ia=ft?Ht.data[Tt]:null,Ga=wt?Ht.data[Jt]:null,Za=Jt!=null?Math.round(Ht.valToPos(0,Ht.series[Jt].scale,!0)):null,[Va,_a]=Ht.series[0].idxs,da=Ht.data[0],Rn=Fn,Jn=Ht.bbox.width;if(da.length>1){let Da=null;for(let Pn=0,$n=1/0;Pn<da.length;Pn++)if(Rn[Pn]!==void 0){if(Da!=null){let kn=Math.abs(da[Pn]-da[Da]);kn<$n&&($n=kn,Jn=Math.abs(Ht.valToPos(da[Pn],"x",!0)-Ht.valToPos(da[Da],"x",!0)))}Da=Pn}}let ea=Math.round(.6*Jn),la=2,ba=2;ea<=12&&(la=ba=1);let wa=Math.floor(ea/2);for(let Da=Va;Da<=_a;Da++){let Pn=Math.round(Ht.valToPos(qn[Da],"x",!0)),$n=Da===Va?0:Math.sign(Tn[Da]-Tn[Da-1]),kn=Math.sign(Tn[Da]-Fn[Da]);if(wt&&pn&&tn&&cn){let va=Et(Se===Fo.CloseClose?$n:kn,pn,tn,cn,Da===Va&&Fo.CloseClose?!1:ot),ma=Math.round(Ht.valToPos(Ga[Da],Ht.series[Jt].scale,!0));va.rect(Pn-wa,ma,ea,Za-ma)}if(ft&&gn&&kt&&fn){let va=Et(Se===Fo.CloseClose?$n:kn,gn,kt,fn,Da===Va&&Fo.CloseClose?!1:ot),ma=Math.round(Ht.valToPos(sa[Da],Ht.series[Rt].scale,!0)),Ra=Math.round(Ht.valToPos(ia[Da],Ht.series[Tt].scale,!0));va.rect(Pn-Math.floor(la/2),ma,la,Ra-ma);let Ua=Math.round(Ht.valToPos(Fn[Da],Ht.series[zt].scale,!0)),Ds=Math.round(Ht.valToPos(Tn[Da],Ht.series[_t].scale,!0));if(ht){let fs=Math.min(Ua,Ds),nr=Math.max(Ua,Ds),ar=Math.max(1,nr-fs);va.rect(Pn-wa,fs,ea,ar),Se===Fo.CloseClose&&kn>=0&&ar>ba*2&&dn.rect(Pn-wa+ba,fs+ba,ea-ba*2,ar-ba*2)}else va.rect(Pn-wa,Ua,wa,la),va.rect(Pn,Ds,wa,la)}}Un.save(),Un.rect(Ht.bbox.left,Ht.bbox.top,Ht.bbox.width,Ht.bbox.height),Un.clip(),wt&&pn&&tn&&cn&&(Un.fillStyle=Ii(Re,at),Un.fill(tn),Un.fillStyle=Ii(We,at),Un.fill(cn),Un.fillStyle=Ii(Ge,at),Un.fill(pn)),ft&&gn&&kt&&fn&&(Un.fillStyle=Re,Un.fill(kt),Un.fillStyle=We,Un.fill(fn),Un.fillStyle=Ge,Un.fill(gn),Un.globalCompositeOperation="destination-out",Un.fill(dn)),Un.restore()}}const Qu=({data:w,id:J,timeRange:le,timeZone:pe,width:Se,height:Re,options:We,fieldConfig:Ge,onChangeTimeRange:at,replaceVariables:ot})=>{const{sync:ft,canAddAnnotations:ht,onThresholdsChange:wt,canEditThresholds:Et,showThresholds:At}=(0,St.R9)(),zt=(0,X.l4)(),Rt=(0,P.useMemo)(()=>Hl(w.series,We,zt,le),[w.series,We,zt,le]),{renderers:Tt,tweakScale:_t,tweakAxis:Jt,shouldRenderPrice:Ht}=(0,P.useMemo)(()=>{let kt=(ea,la)=>ea,gn=(ea,la)=>ea,cn={renderers:[],tweakScale:kt,tweakAxis:gn,shouldRenderPrice:!1};if(!Rt)return cn;const tn=Rt.names;if(!Object.keys(tn).length)return cn;const{mode:pn,candleStyle:dn,colorStrategy:Un}=We,qn={...Vs,...We.colors};let{open:Fn,high:Tn,low:sa,close:ia,volume:Ga}=tn;if(Fn==null||ia==null)return cn;let Za=.5,Va=-1,_a=!1;if(Ga!=null&&pn!==rr.Candles){let ea=Rt.volume;if(ea!=null){_a=!0;let{fillOpacity:la}=ea.config.custom;la&&(Za=la/100),pn!==rr.Volume&&(ea.config={...ea.config},ea.config.unit="short",ea.display=(0,hs.U)({field:ea,theme:qt.config.theme2}),gn=(ba,wa)=>{if(wa.name===Rt.volume?.name){let Da=(Pn,$n)=>{let kn=[],va=Pn.series[Va].max;for(let ma=0;ma<$n.length&&(kn.push($n[ma]),!(va&&$n[ma]>va));ma++);return kn};ba.space=20,ba.filter=Da,ba.ticks={...ba.ticks,filter:Da}}return ba},kt=(ba,wa)=>(wa.name===Rt.volume?.name&&(ba.range=(Da,Pn,$n)=>[0,$n*7]),ba))}}let da=pn!==rr.Volume&&Tn!=null&&sa!=null;if(!da&&!_a)return cn;let Rn={},Jn=[];return da?Rn={open:Fn,high:Tn,low:sa,close:ia}:Jn.push(Fn,ia),_a&&(Rn.volume=Ga,Rn.open=Fn,Rn.close=ia),{shouldRenderPrice:da,renderers:[{fieldMap:Rn,indicesOnly:Jn,init:(ea,la)=>{Va=la.volume,ea.addHook("drawAxes",ju({mode:pn,fields:la,upColor:qt.config.theme2.visualization.getColorByName(qn.up),downColor:qt.config.theme2.visualization.getColorByName(qn.down),flatColor:qt.config.theme2.visualization.getColorByName(qn.flat),volumeAlpha:Za,colorStrategy:Un,candleStyle:dn,flatAsUp:!0}))}}],tweakScale:kt,tweakAxis:gn}},[We,w.structureRev,w.series.length]);if(!Rt)return P.createElement(xt.Z,{panelId:J,fieldConfig:Ge,data:w,needsTimeField:!0,needsNumberField:!0});if(Ht)for(let kt in Tt[0].fieldMap){let gn=Rt[kt];gn.config={...gn.config,custom:{...gn.config.custom,hideFrom:{legend:!0,tooltip:!1,viz:!1}}}}const fn=!!(ht&&ht());return P.createElement(ui,{frames:[Rt.frame],structureRev:w.structureRev,timeRange:le,timeZone:pe,width:Se,height:Re,legend:We.legend,renderers:Tt,tweakAxis:Jt,tweakScale:_t,options:We},(kt,gn)=>(gn.fields.forEach(cn=>{cn.getLinks=(0,Jr.oB)(gn,cn,cn.state.scopedVars,ot,pe)}),P.createElement(P.Fragment,null,P.createElement(Yo.R,{config:kt,onZoom:at,withZoomY:!0}),P.createElement(ta.i,{data:gn,config:kt,mode:Mt.f3.Multi,sync:ft,timeZone:pe}),w.annotations&&P.createElement(Rs,{annotations:w.annotations,config:kt,timeZone:pe}),fn?P.createElement(Hn,{data:gn,timeZone:pe,config:kt},({startAnnotating:cn})=>P.createElement(Gs,{data:gn,config:kt,timeZone:pe,replaceVariables:ot,defaultItems:fn?[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(tn,pn)=>{pn&&cn({coords:pn.coords})}}]}]:[]})):P.createElement(Gs,{data:gn,config:kt,timeZone:pe,replaceVariables:ot,defaultItems:[]}),w.annotations&&P.createElement(as,{config:kt,exemplars:w.annotations,timeZone:pe}),(Et&&wt||At)&&P.createElement(zl,{config:kt,fieldConfig:Ge,onThresholdsChange:Et?wt:void 0}),P.createElement(_r,{config:kt,onChangeTimeRange:at}))))};class Xc{getSuggestionsForData(J){const{dataSummary:le}=J;if(!J.data?.series||!le.hasData||le.timeFieldCount<1||le.numberFieldCount<2||le.numberFieldCount>10)return;const pe=Hl(J.data.series,Ka,U.config.theme2);if(!pe||pe.open===pe.high&&pe.open===pe.low)return;J.getListAppender({name:"",pluginId:"candlestick",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:Ha.y.Candlestick,options:Ka,fieldConfig:{defaults:{},overrides:[]},score:pe.autoOpenClose?Wa._.Good:Wa._.Best})}}const Yu=[{label:"Candles",value:rr.Candles},{label:"Volume",value:rr.Volume},{label:"Both",value:rr.CandlesVolume}],Zu=[{label:"Candles",value:Xi.Candles},{label:"OHLC Bars",value:Xi.OHLCBars}],Ju=[{label:"Since Open",value:Fo.OpenClose},{label:"Since Prior Close",value:Fo.CloseClose}],Xu=w=>w.type===zn.fS.number;function Ri(w,J,le){let pe="Auto ";if(le){const Se=le[J.key];Se?.config?(pe+="= "+(0,Na.CZ)(Se),Se===le?.open&&J.key!=="open"&&(pe+=` (${J.defaults.join(",")})`)):pe+=`(${J.defaults.join(",")})`}w.addFieldNamePicker({path:`fields.${J.key}`,name:J.name,description:J.description,settings:{filter:Xu,placeholderText:pe}})}const qu=new N.c(Qu).useFieldConfig((0,br.F)(br.r)).setPanelOptions((w,J)=>{const le=J.options??Ka,pe=Hl(J.data,le,U.config.theme2);w.addRadio({path:"mode",name:"Mode",description:"",defaultValue:Ka.mode,settings:{options:Yu}}).addRadio({path:"candleStyle",name:"Candle style",description:"",defaultValue:Ka.candleStyle,settings:{options:Zu},showIf:Se=>Se.mode!==rr.Volume}).addRadio({path:"colorStrategy",name:"Color strategy",description:"",defaultValue:Ka.colorStrategy,settings:{options:Ju}}).addColorPicker({path:"colors.up",name:"Up color",defaultValue:Vs.up}).addColorPicker({path:"colors.down",name:"Down color",defaultValue:Vs.down}),Ri(w,Jo.open,pe),le.mode!==rr.Volume&&(Ri(w,Jo.high,pe),Ri(w,Jo.low,pe)),Ri(w,Jo.close,pe),le.mode!==rr.Candles&&Ri(w,Jo.volume,pe),w.addRadio({path:"includeAllFields",name:"Additional fields",description:"Use standard timeseries options to configure any fields not mapped above",defaultValue:Ka.includeAllFields,settings:{options:[{label:"Ignore",value:!1},{label:"Include",value:!0}]}}),ur.J(w)}).setDataSupport({annotations:!0,alertStates:!0}).setSuggestionsSupplier(new Xc);var Cr=e(19461),qc=e(173),qi=e(56582),Ai=e(49683),em=e(69671),go=e(62293),Ko=e(46783),mi=e(81182),ed=e(81990);const tm=w=>({dashlistSectionHeader:(0,k.css)`
    padding: ${w.spacing(.25,1)};
    margin-right: ${w.spacing(1)};
  `,dashlistSection:(0,k.css)`
    margin-bottom: ${w.spacing(2)};
    padding-top: 3px;
  `,dashlistLink:(0,k.css)`
    display: flex;
    cursor: pointer;
    border-bottom: 1px solid ${w.colors.border.weak};
    margin-right: ${w.spacing(1)};
    padding: ${w.spacing(1)};
    align-items: center;

    &:hover {
      a {
        color: ${w.colors.text.link};
        text-decoration: underline;
      }
    }
  `,dashlistFolder:(0,k.css)`
    color: ${w.colors.text.secondary};
    font-size: ${w.typography.bodySmall.fontSize};
    line-height: ${w.typography.body.lineHeight};
  `,dashlistTitle:(0,k.css)`
    &::after {
      position: absolute;
      content: '';
      left: 0;
      top: 0;
      bottom: 0;
      right: 0;
    }
  `,dashlistLinkBody:(0,k.css)`
    flex-grow: 1;
    overflow: hidden;
    text-overflow: ellipsis;
  `,dashlistItem:(0,k.css)`
    position: relative;
    list-style: none;
  `});async function As(w,J){let le=Promise.resolve([]);if(w.showStarred){const ft={limit:w.maxItems,starred:"true"};le=(0,Ko.i)().search(ft)}let pe=Promise.resolve([]),Se=[];if(w.showRecentlyViewed){let ft=await mi.Z.getDashboardOpened();Se=(0,ne.take)(ft,w.maxItems),pe=(0,Ko.i)().search({dashboardUIDs:Se,limit:w.maxItems})}let Re=Promise.resolve([]);if(w.showSearch){const ft=w.folderUID===""?"general":w.folderUID,ht={limit:w.maxItems,query:J(w.query,{},"text"),folderUIDs:ft,tag:w.tags.map(wt=>J(wt,{},"text")),type:"dash-db"};Re=(0,Ko.i)().search(ht)}const[We,Ge,at]=await Promise.all([le,Re,pe]);let ot=new Map;for(const ft of Se){const ht=at.find(wt=>wt.uid===ft);ht&&ot.set(ft,{...ht,isRecent:!0})}return Ge.forEach(ft=>{ft.uid&&(ot.has(ft.uid)?ot.get(ft.uid).isSearchResult=!0:ot.set(ft.uid,{...ft,isSearchResult:!0}))}),We.forEach(ft=>{ft.uid&&(ot.has(ft.uid)?ot.get(ft.uid).isStarred=!0:ot.set(ft.uid,{...ft,isStarred:!0}))}),ot}function td(w){const[J,le]=(0,P.useState)(new Map),pe=(0,Y.useDispatch)();(0,P.useEffect)(()=>{As(w.options,w.replaceVariables).then(Rt=>{le(Rt)})},[w.options,w.replaceVariables,w.renderCounter]);const Se=async(Rt,Tt)=>{const{uid:_t,title:Jt,url:Ht}=Tt;Rt.preventDefault(),Rt.stopPropagation();const fn=await(0,Fe.h4)().starDashboard(Tt.uid,Tt.isStarred),kt=new Map(J);kt.set(Tt?.uid??"",{...Tt,isStarred:fn}),le(kt),pe((0,go.OQ)({id:_t??"",title:Jt,url:Ht,isStarred:fn}))},[Re,We,Ge]=(0,P.useMemo)(()=>{const Rt=[...J.values()];return[Rt.filter(Tt=>Tt.isStarred).sort((Tt,_t)=>Tt.title.localeCompare(_t.title)),Rt.filter(Tt=>Tt.isRecent),Rt.filter(Tt=>Tt.isSearchResult).sort((Tt,_t)=>Tt.title.localeCompare(_t.title))]},[J]),{showStarred:at,showRecentlyViewed:ot,showHeadings:ft,showSearch:ht}=w.options,wt=[{header:"Starred dashboards",dashboards:Re,show:at},{header:"Recently viewed dashboards",dashboards:We,show:ot},{header:"Search",dashboards:Ge,show:ht}],Et=(0,X.wW)(tm),At=Xa(w),zt=Rt=>P.createElement("ul",null,Rt.map(Tt=>{let _t=Tt.url;return _t=qc.Cj.appendQueryToUrl(_t,At),_t=(0,qt.iE)().disableSanitizeHtml?_t:Ba.QX.sanitizeUrl(_t),P.createElement("li",{className:Et.dashlistItem,key:`dash-${Tt.uid}`},P.createElement("div",{className:Et.dashlistLink},P.createElement("div",{className:Et.dashlistLinkBody},P.createElement("a",{className:Et.dashlistTitle,href:_t},Tt.title),Tt.folderTitle&&P.createElement("div",{className:Et.dashlistFolder},Tt.folderTitle)),P.createElement(na.h,{tooltip:Tt.isStarred?`Unmark "${Tt.title}" as favorite`:`Mark "${Tt.title}" as favorite`,name:Tt.isStarred?"favorite":"star",iconType:Tt.isStarred?"mono":"default",onClick:Jt=>Se(Jt,Tt)})))}));return P.createElement(j.$,{autoHeightMin:"100%",autoHeightMax:"100%"},wt.map(({show:Rt,header:Tt,dashboards:_t},Jt)=>Rt&&P.createElement("div",{className:Et.dashlistSection,key:`dash-group-${Jt}`},ft&&P.createElement("h6",{className:Et.dashlistSectionHeader},Tt),zt(_t))))}function Xa(w){(0,em.r)(Ai.h$,ed.x9);let J={};return w.options.keepTime&&(J[`$${qi.W.keepTime}`]=!0),w.options.includeVars&&(J[`$${qi.W.includeVars}`]=!0),w.replaceVariables(qc.Cj.toUrlParams(J))}async function En(w){return w===0?"":(await(0,Ee.i)().get(`/api/folders/id/${w}`,void 0,void 0,{showErrorAlert:!1})).uid}async function nd(w){const J={...w.options,showStarred:w.options.showStarred??w.starred,showRecentlyViewed:w.options.showRecentlyViewed??w.recent,showSearch:w.options.showSearch??w.search,showHeadings:w.options.showHeadings??w.headings,maxItems:w.options.maxItems??w.limit,query:w.options.query??w.query,folderId:w.options.folderId??w.folderId,tags:w.options.tags??w.tags};if(parseFloat(w.pluginVersion||"6.1")<6.3&&["starred","recent","search","headings","limit","query","folderId"].forEach(Se=>delete w[Se]),J.folderId!==void 0){const pe=J.folderId;try{const Se=await En(pe);J.folderUID=Se,delete J.folderId}catch(Se){console.warn("Dashlist: Error migrating folder ID to UID",Se)}}return J}const xo={includeVars:!1,keepTime:!1,maxItems:10,query:"",showHeadings:!0,showRecentlyViewed:!1,showSearch:!1,showStarred:!0,tags:[]},nm=new N.c(td).setPanelOptions(w=>{w.addBooleanSwitch({path:"keepTime",name:"Include current time range",defaultValue:xo.keepTime}).addBooleanSwitch({path:"includeVars",name:"Include current template variable values",defaultValue:xo.includeVars}).addBooleanSwitch({path:"showStarred",name:"Starred",defaultValue:xo.showStarred}).addBooleanSwitch({path:"showRecentlyViewed",name:"Recently viewed",defaultValue:xo.showRecentlyViewed}).addBooleanSwitch({path:"showSearch",name:"Search",defaultValue:xo.showSearch}).addBooleanSwitch({path:"showHeadings",name:"Show headings",defaultValue:xo.showHeadings}).addNumberInput({path:"maxItems",name:"Max items",defaultValue:xo.maxItems}).addTextInput({path:"query",name:"Query",defaultValue:xo.query}).addCustomEditor({path:"folderUID",name:"Folder",id:"folderUID",defaultValue:void 0,editor:function({value:le,onChange:pe}){return P.createElement(Cr.E,{value:le,onChange:Se=>pe(Se)})}}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:xo.tags,editor(J){return P.createElement(nt.B,{tags:J.value,onChange:J.onChange})}})}).setMigrationHandler(nd);var kr=e(17482),xs=e(43183),el=e(93445);const ad=({onBlur:w,placeholder:J})=>{const le=(0,P.useRef)(null);(0,P.useEffect)(()=>{le.current&&le.current.focus()});const pe=Se=>{Se.key==="Enter"&&Se.currentTarget.blur()};return P.createElement("input",{type:"text",placeholder:J,onBlur:w,ref:le,onKeyDown:pe,"data-testid":"column-input"})},fi=({divStyle:w,onColumnInputBlur:J})=>{const[le,pe]=(0,P.useState)(!1),Se=()=>{pe(!0)},Re=We=>{const Ge=We.target.value;Ge&&J(Ge),pe(!1)};return P.createElement("div",{className:w},le?P.createElement(ad,{placeholder:"Column Name",onBlur:Re}):P.createElement("button",{onClick:Se},"+"))};var ho=e(50427);const _s=()=>U.config.featureToggles.enableDatagridEditing,Gl="600 13px Inter",am="400 13px Inter",sm=document.createElement("canvas"),rm=20,om=300,im=65,lm="both",cm="number",dm={isContextMenuOpen:!1},um={isInputOpen:!1},Ws="datagrid_panel",Fs={EDIT_CELL:"edit_cell",GRID_SELECTED:"grid_selected",APPEND_ROW:"append_row",APPEND_COLUMN:"append_column",DELETE_BTN_PRESSED:"delete_btn_pressed",COLUMN_RESIZE:"column_resize",COLUMN_REORDER:"column_reorder",ROW_REORDER:"row_reorder",CONTEXT_MENU_ACTION:"context_menu_action",HEADER_MENU_ACTION:"header_menu_action"},sd={name:"A",fields:[],length:0},mm={kind:kr.p6.Text,data:"",allowOverlay:!0,readonly:!1,displayData:""},rd={columns:kr.EV.empty(),rows:kr.EV.empty()},fm={sticky:!1,tint:!0},gm={fill:!0,sticky:!1};async function Hr(w,J){if(J&&_s()){for(let le=0;le<w.fields.length;le++)delete w.fields[le].config.displayName,delete w.fields[le].config.displayNameFromDS;return await J([w])}return!1}const jl=(w,J=!1)=>{const le=sm.getContext("2d");return le.font=J?Gl:am,le.measureText(w).width},hm=w=>Math.max(jl(w.name,!0)+im,Math.min(om,w.values.toArray().reduce((J,le)=>{const pe=jl(le?.toString()??"");return pe>J?pe:J},0)+rm)),tl=(w,J,le=!1)=>{const pe={...w,fields:w.fields.map(Se=>({...Se,values:Se.values.slice()}))};for(const Se of pe.fields){const Re=Se.values.toArray();for(let We=J.length-1;We>=0;We--)le?Re.splice(J[We],1):Re.splice(J[We],1,null);Se.values=[...Re]}return{...pe,length:pe.fields[0]?.values.length??0}},Li=(w,J)=>{const le=J.x,pe=J.y,Se=J.x+J.width-1,Re={...w,fields:w.fields.map(We=>({...We,values:We.values.slice()}))};for(let We=le;We<=Se;We++){const Ge=Re.fields[We],at=Ge.values.toArray();at.splice(pe,J.height,...new Array(J.height).fill(null)),Ge.values=[...at]}return{...Re,length:Re.fields[0]?.values.length??0}},pm=w=>{const J=w.values.toArray();w.values=J.map(le=>le==="undefined"||le==="null"?null:le)};function vm(w){return{accentColor:w.colors.primary.main,accentFg:w.colors.secondary.main,textDark:w.colors.text.primary,textMedium:w.colors.text.secondary,textLight:w.colors.text.secondary,textBubble:w.colors.text.primary,textHeader:w.colors.text.primary,bgCell:w.colors.background.primary,bgCellMedium:w.colors.background.primary,bgHeader:w.colors.background.primary,bgHeaderHasFocus:w.colors.background.secondary,bgHeaderHovered:w.colors.background.secondary,linkColor:w.colors.text.link,fontFamily:w.typography.fontFamily,headerFontStyle:`${w.typography.fontWeightMedium} ${w.typography.fontSize}px`,fgIconHeader:w.colors.secondary.contrastText,bgIconHeader:w.colors.secondary.main}}const Em=(w,J,le=!1)=>{const pe=w.values.get(J);switch(w.type){case zn.fS.boolean:return{kind:kr.p6.Boolean,data:pe||!1,allowOverlay:!1,readonly:!1};case zn.fS.number:return{kind:kr.p6.Number,data:pe||0,allowOverlay:_s()&&!le,readonly:!1,displayData:pe!=null?pe.toString():""};case zn.fS.string:return{kind:kr.p6.Text,data:pe||"",allowOverlay:_s()&&!le,readonly:!1,displayData:pe!=null?pe.toString():""};default:return{kind:kr.p6.Text,data:pe||"",allowOverlay:_s()&&!le,readonly:!1,displayData:pe!=null?pe.toString():""}}},er=(w,J)=>({dataEditor:(0,k.css)`
      .dvn-scroll-inner > div:nth-child(2) {
        pointer-events: none !important;
      }
      scrollbar-color: ${w.colors.background.secondary} ${w.colors.background.primary};
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      ::-webkit-scrollbar-track {
        background: ${w.colors.background.primary};
      }
      ::-webkit-scrollbar-thumb {
        border-radius: 10px;
      }
      ::-webkit-scrollbar-corner {
        display: none;
      }
    `,addColumnDiv:(0,k.css)`
      width: 120px;
      display: flex;
      flex-direction: column;
      background-color: ${w.colors.background.primary};
      button {
        pointer-events: ${J?"none":"auto"};
        border: none;
        outline: none;
        height: 37px;
        font-size: 20px;
        background-color: ${w.colors.background.primary};
        color: ${w.colors.text.primary};
        border-right: 1px solid ${w.components.panel.borderColor};
        border-bottom: 1px solid ${w.components.panel.borderColor};
        transition: background-color 200ms;
        cursor: pointer;
        :hover {
          background-color: ${w.colors.background.secondary};
        }
      }
      input {
        height: 37px;
        border: 1px solid ${w.colors.primary.main};
        :focus {
          outline: none;
        }
      }
    `,renameColumnInput:(0,k.css)`
      height: 37px;
      border: 1px solid ${w.colors.primary.main};
      :focus {
        outline: none;
      }
    `}),od=w=>w.rows.length||w.columns.length?!0:w.current===void 0?!1:w.current.range&&!(w.current.range.height===1&&w.current.range.width===1);var Ys=(w=>(w.columnResizeStart="columnResizeStart",w.columnResizeEnd="columnResizeEnd",w.columnMove="columnMove",w.updateColumns="updateColumns",w.showColumnRenameInput="showColumnRenameInput",w.hideColumnRenameInput="hideColumnRenameInput",w.openCellContextMenu="openCellContextMenu",w.openHeaderContextMenu="openHeaderContextMenu",w.openHeaderDropdownMenu="openHeaderDropdownMenu",w.closeContextMenu="closeContextMenu",w.multipleCellsSelected="multipleCellsSelected",w.gridSelectionCleared="gridSelectionCleared",w.columnFreezeReset="columnFreezeReset",w.columnFreezeChanged="columnFreezeChanged",w.openSearch="openSearch",w.closeSearch="closeSearch",w))(Ys||{});const ym={columns:[],contextMenuData:dm,renameColumnInputData:um,gridSelection:rd,columnFreezeIndex:0,toggleSearch:!1,isResizeInProgress:!1},fp=new Map([[zn.fS.number,kr.PE.HeaderNumber],[zn.fS.string,kr.PE.HeaderTextTemplate],[zn.fS.boolean,kr.PE.HeaderBoolean],[zn.fS.time,kr.PE.HeaderDate],[zn.fS.other,kr.PE.HeaderReference]]),bm=(w,J)=>{let le=[];switch(J.type){case"columnResizeStart":le=[...w.columns];const pe=J.payload;return le[pe.columnIndex]={...w.columns[pe.columnIndex],width:pe.width},{...w,columns:le,isResizeInProgress:!0};case"columnMove":le=[...w.columns];const Se=J.payload,Re=w.columns[Se.from].width;let We=le.splice(Se.from,1)[0];return We={...We,width:Re},le.splice(Se.to,0,We),{...w,columns:le};case"columnResizeEnd":return{...w,isResizeInProgress:!1};case"updateColumns":const Ge=J.payload;return le=[...Ge.frame.fields.map((Tt,_t)=>{const Jt=w.columns.find(fn=>fn.title===Tt.name)?.width;return{title:(0,Na.CZ)(Tt,Ge.frame),width:Jt??hm(Tt),icon:fp.get(Tt.type),hasMenu:_s(),trailingRowOptions:{targetColumn:--_t}}})],{...w,columns:le};case"showColumnRenameInput":return{...w,renameColumnInputData:{...w.renameColumnInputData,isInputOpen:!0}};case"hideColumnRenameInput":return{...w,renameColumnInputData:{...w.renameColumnInputData,isInputOpen:!1}};case"openCellContextMenu":const at=J.payload,ot=at.event,ft=at.cell;return{...w,contextMenuData:{x:ot.bounds.x+ot.localEventX,y:ot.bounds.y+ot.localEventY,column:ft[0]===-1?void 0:ft[0],row:ft[1],isContextMenuOpen:!0,isHeaderMenu:!1}};case"openHeaderContextMenu":const ht=J.payload,wt=ht.event;return{...w,contextMenuData:{x:wt.bounds.x+wt.localEventX,y:wt.bounds.y+wt.localEventY,column:ht.columnIndex,row:void 0,isContextMenuOpen:!0,isHeaderMenu:!1}};case"openHeaderDropdownMenu":const Et=J.payload,At=Et.screenPosition;return{...w,contextMenuData:{x:At.x+At.width,y:At.y+At.height,column:Et.columnIndex,row:void 0,isContextMenuOpen:!0,isHeaderMenu:!0},renameColumnInputData:{x:At.x,y:At.y,width:At.width,height:At.height,columnIdx:Et.columnIndex,isInputOpen:!1,inputValue:Et.value}};case"closeContextMenu":return{...w,contextMenuData:{isContextMenuOpen:!1}};case"closeSearch":return{...w,toggleSearch:!1};case"openSearch":return{...w,toggleSearch:!0};case"multipleCellsSelected":const zt=J.payload;return{...w,gridSelection:zt.selection};case"gridSelectionCleared":return{...w,gridSelection:rd};case"columnFreezeReset":return{...w,columnFreezeIndex:0};case"columnFreezeChanged":const Rt=J.payload;return{...w,columnFreezeIndex:Rt.columnIndex};default:return w}},Dm=({menuData:w,data:J,saveData:le,closeContextMenu:pe,dispatch:Se,gridSelection:Re,columnFreezeIndex:We,renameColumnClicked:Ge})=>{let at=[],ot=[];const{row:ft,column:ht,x:wt,y:Et,isHeaderMenu:At}=w;Re.rows&&(at=Re.rows.toArray()),Re.columns&&(ot=Re.columns.toArray());let zt="Delete row";at.length&&at.length>1&&(zt=`Delete ${at.length} rows`);let Rt="Delete column";ot.length&&ot.length>1&&(Rt=`Delete ${ot.length} columns`);const Tt=ft!==void 0&&ft>=0||at.length,_t=ht!==void 0&&ht>=0&&ft!==void 0||ot.length,Jt=ft!==void 0&&ft>=0&&!at.length,Ht=ht!==void 0&&ht>=0&&ft!==void 0&&!ot.length,fn=()=>P.createElement(P.Fragment,null,Tt?P.createElement(Qa.s,{label:zt,onClick:()=>{if(at.length){le(tl(J,at,!0)),Se({type:Ys.gridSelectionCleared});return}ft!==void 0&&ft>=0&&((0,xs.ff)(Ws,{item:Fs.CONTEXT_MENU_ACTION,menu_action:"row_delete"}),le(tl(J,[ft],!0)))}}):null,_t?P.createElement(Qa.s,{label:Rt,onClick:()=>{if(ot.length){le({...J,fields:J.fields.filter((gn,cn)=>!ot.includes(cn))}),Se({type:Ys.gridSelectionCleared});return}ht!==void 0&&ht>=0&&((0,xs.ff)(Ws,{item:Fs.CONTEXT_MENU_ACTION,menu_action:"column_delete"}),le({...J,fields:J.fields.filter((gn,cn)=>cn!==ht)}))}}):null,_t||Tt?P.createElement(ho.R,null):null,Jt?P.createElement(Qa.s,{label:"Clear row",onClick:()=>{(0,xs.ff)(Ws,{item:Fs.CONTEXT_MENU_ACTION,menu_action:"row_clear"}),le(tl(J,[ft]))}}):null,Ht?P.createElement(Qa.s,{label:"Clear column",onClick:()=>{const gn=J.fields[ht];gn.values=gn.values.map(()=>null),(0,xs.ff)(Ws,{item:Fs.CONTEXT_MENU_ACTION,menu_action:"column_clear"}),le({...J})}}):null,Jt||Ht?P.createElement(ho.R,null):null,P.createElement(Qa.s,{label:"Remove all data",onClick:()=>{(0,xs.ff)(Ws,{item:Fs.CONTEXT_MENU_ACTION,menu_action:"remove_all"}),le(sd)}}),P.createElement(Qa.s,{label:"Search...",onClick:()=>{(0,xs.ff)(Ws,{item:Fs.CONTEXT_MENU_ACTION,menu_action:"open_search"}),Se({type:Ys.openSearch})}})),kt=()=>{if(ht==null)return null;const gn=J.fields[ht].type,cn=[],tn=Un=>{cn.push({label:(0,ne.capitalize)(Un),options:{targetField:J.fields[ht].name,destinationType:Un}})};gn===zn.fS.string?(tn(zn.fS.number),tn(zn.fS.boolean)):gn===zn.fS.number?(tn(zn.fS.string),tn(zn.fS.boolean)):gn===zn.fS.boolean?(tn(zn.fS.number),tn(zn.fS.string)):(tn(zn.fS.string),tn(zn.fS.number),tn(zn.fS.boolean));let pn="Set column freeze position";const dn=ht+1;return We===dn&&(pn="Unset column freeze"),P.createElement(P.Fragment,null,cn.length?P.createElement(Vr.k,{label:"Set field type"},cn.map((Un,qn)=>P.createElement(Qa.s,{key:qn,label:Un.label,onClick:()=>{const Fn=(0,Yc.p8)(J.fields[ht],Un.options);Un.options.destinationType===zn.fS.string&&pm(Fn);const Tn={name:J.name,fields:[...J.fields],length:J.length};Tn.fields[ht]=Fn,(0,xs.ff)(Ws,{item:Fs.HEADER_MENU_ACTION,menu_action:"convert_field"}),le(Tn)}}))):null,P.createElement(ho.R,null),P.createElement(Qa.s,{label:pn,onClick:()=>{(0,xs.ff)(Ws,{item:Fs.HEADER_MENU_ACTION,menu_action:"column_freeze"}),Se(We===dn?{type:Ys.columnFreezeReset}:{type:Ys.columnFreezeChanged,payload:{columnIndex:dn}})}}),P.createElement(Qa.s,{label:"Rename column",onClick:Ge}),P.createElement(ho.R,null),P.createElement(Qa.s,{label:"Delete column",onClick:()=>{(0,xs.ff)(Ws,{item:Fs.HEADER_MENU_ACTION,menu_action:"delete_column"}),le({...J,fields:J.fields.filter((Un,qn)=>qn!==ht)}),Se({type:Ys.gridSelectionCleared})}}),P.createElement(Qa.s,{label:"Clear column",onClick:()=>{const Un=J.fields[ht];Un.values=Un.values.map(()=>null),(0,xs.ff)(Ws,{item:Fs.HEADER_MENU_ACTION,menu_action:"clear_column"}),le({...J})}}))};return P.createElement(gr.x,{renderMenuItems:At?kt:fn,x:wt,y:Et,onClose:pe})},Cm=({renameColumnData:w,onColumnInputBlur:J,classStyle:le})=>{const{x:pe,y:Se,width:Re,height:We,inputValue:Ge,columnIdx:at}=w,[ot,ft]=(0,P.useState)({}),[ht,wt]=(0,P.useState)(Ge),Et=(0,P.useRef)(null);(0,P.useLayoutEffect)(()=>{Et.current?.focus();const Tt=Et.current?.getBoundingClientRect();if(Tt){const _t={right:window.innerWidth<pe+Tt.width,bottom:window.innerHeight<Se+Tt.height};ft({position:"fixed",left:_t.right?pe-Tt.width:pe,top:_t.bottom?Se-Tt.height:Se,width:Re,height:We})}},[We,Re,pe,Se]);const At=Tt=>{const _t=Tt.target.value;_t&&J(_t,at)},zt=Tt=>{wt(Tt.target.value)},Rt=Tt=>{Tt.key==="Enter"&&Tt.currentTarget.blur()};return P.createElement(_n.h_,null,P.createElement("input",{type:"text",className:le,value:ht,onBlur:At,ref:Et,style:ot,onChange:zt,onKeyDown:Rt}))};function Pm({options:w,data:J,id:le,fieldConfig:pe,width:Se,height:Re}){const[We,Ge]=(0,P.useReducer)(bm,ym),{onUpdateData:at}=(0,St.R9)(),{columns:ot,contextMenuData:ft,renameColumnInputData:ht,gridSelection:wt,columnFreezeIndex:Et,toggleSearch:At,isResizeInProgress:zt}=We,Rt=J.series[w.selectedSeries??0],Tt=(0,X.l4)(),_t=vm(Tt);(0,P.useEffect)(()=>{Rt&&Ge({type:Ys.updateColumns,payload:{frame:Rt}})},[Rt]);const Jt=([da,Rn])=>{const Jn=Rt.fields[da];return!Jn||Rn>Rt.length?mm:Em(Jn,Rn,od(wt))},Ht=(da,Rn)=>{if(od(wt))return;const[Jn,ea]=da,la={...Rt,fields:Rt.fields.map(Da=>({...Da,values:[...Da.values]}))},ba=la.fields[Jn];if(!ba)return;const wa=ba.values.toArray();wa[ea]=Rn.data,ba.values=[...wa],(0,xs.ff)(Ws,{item:Fs.EDIT_CELL}),Hr(la,at)},fn=da=>{const Rn=Rt.length??0;(0,xs.ff)(Ws,{item:Fs.APPEND_COLUMN}),Hr({...Rt,fields:[...Rt.fields,{name:da,type:zn.fS.string,config:{},values:new Array(Rn).fill("")}]},at)},kt=()=>{const da=Rt.fields.map(Rn=>{const Jn=Rn.values.slice();return Jn.push(null),{...Rn,values:Jn}});(0,xs.ff)(Ws,{item:Fs.APPEND_ROW}),Hr({...Rt,fields:da,length:Rt.length+1},at)},gn=(da,Rn,Jn,ea)=>{(0,xs.ff)(Ws,{item:Fs.COLUMN_RESIZE}),Ge({type:Ys.columnResizeStart,payload:{columnIndex:Jn,width:Rn}})},cn=(da,Rn,Jn,ea)=>{Ge({type:Ys.columnResizeEnd})},tn=()=>{Ge({type:Ys.closeContextMenu})},pn=da=>{if(da.current&&da.current.range)return(0,xs.ff)(Ws,{item:Fs.DELETE_BTN_PRESSED,selection:"grid-cell"}),Hr(Li(Rt,da.current.range),at),!0;const Rn=da.rows.toArray(),Jn=da.columns.toArray();if(Rn.length)return(0,xs.ff)(Ws,{item:Fs.DELETE_BTN_PRESSED,selection:"rows"}),Hr(tl(Rt,Rn),at),!0;if(Jn.length){const ea={...Rt,fields:Rt.fields.map((la,ba)=>Jn.includes(ba)?{...la,values:new Array(Rt.length).fill(null)}:la)};return(0,xs.ff)(Ws,{item:Fs.DELETE_BTN_PRESSED,selection:"columns"}),Hr(ea,at),!0}return!1},dn=(da,Rn)=>{Rn.preventDefault(),Ge({type:Ys.openCellContextMenu,payload:{event:Rn,cell:da}})},Un=(da,Rn)=>{Rn.preventDefault(),Ge({type:Ys.openHeaderContextMenu,payload:{event:Rn,columnIndex:da}})},qn=(da,Rn)=>{Ge({type:Ys.openHeaderDropdownMenu,payload:{screenPosition:Rn,columnIndex:da,value:We.columns[da].title}})},Fn=async(da,Rn)=>{const Jn=Rt.fields.map(ba=>ba),ea=Jn[da];Jn.splice(da,1),Jn.splice(Rn,0,ea),await Hr({...Rt,fields:Jn},at)&&((0,xs.ff)(Ws,{item:Fs.COLUMN_REORDER}),Ge({type:Ys.columnMove,payload:{from:da,to:Rn}}))},Tn=(da,Rn)=>{const Jn=Rt.fields.map(ea=>({...ea,values:ea.values.slice()}));for(const ea of Jn){const la=ea.values[da];ea.values.splice(da,1),ea.values.splice(Rn,0,la)}(0,xs.ff)(Ws,{item:Fs.ROW_REORDER}),Hr({...Rt,fields:Jn},at)},sa=()=>{(0,xs.ff)(Ws,{item:Fs.HEADER_MENU_ACTION,menu_action:"rename_column"}),Ge({type:Ys.showColumnRenameInput})},ia=(da,Rn)=>{const Jn=Rt.fields.map(ea=>ea);Jn[Rn].name=da,Ge({type:Ys.hideColumnRenameInput}),Hr({...Rt,fields:Jn},at)},Ga=()=>{Ge({type:Ys.closeSearch})},Za=da=>{(0,xs.ff)(Ws,{item:Fs.GRID_SELECTED}),Ge({type:Ys.multipleCellsSelected,payload:{selection:da}})},Va=da=>{Hr(da,at)};if(!Rt)return P.createElement(xt.Z,{panelId:le,fieldConfig:pe,data:J});if(!_s())return P.createElement(xt.Z,{panelId:le,message:"Datagrid is not enabled",fieldConfig:pe,data:J});if(!document.getElementById("portal")){const da=document.createElement("div");da.id="portal",document.body.appendChild(da)}const _a=er(Tt,zt);return P.createElement(P.Fragment,null,P.createElement(kr.ZP,{className:_a.dataEditor,getCellContent:Jt,columns:ot,rows:Rt.length,width:Se,height:Re,initialSize:[Se,Re],theme:_t,smoothScrollX:!0,smoothScrollY:!0,overscrollY:50,onCellEdited:_s()?Ht:void 0,getCellsForSelection:_s()?!0:void 0,showSearch:_s()?At:!1,onSearchClose:Ga,gridSelection:wt,onGridSelectionChange:_s()?Za:void 0,onRowAppended:_s()?kt:void 0,onDelete:_s()?pn:void 0,rowMarkers:_s()?lm:cm,onColumnResize:gn,onColumnResizeEnd:cn,onCellContextMenu:_s()?dn:void 0,onHeaderContextMenu:_s()?Un:void 0,onHeaderMenuClick:_s()?qn:void 0,trailingRowOptions:fm,rightElement:_s()?P.createElement(fi,{onColumnInputBlur:fn,divStyle:_a.addColumnDiv}):null,rightElementProps:gm,freezeColumns:Et,onRowMoved:_s()?Tn:void 0,onColumnMoved:_s()?Fn:void 0}),ft.isContextMenuOpen&&P.createElement(Dm,{menuData:ft,data:Rt,saveData:Va,closeContextMenu:tn,dispatch:Ge,gridSelection:wt,columnFreezeIndex:Et,renameColumnClicked:sa}),ht.isInputOpen?P.createElement(Cm,{onColumnInputBlur:ia,renameColumnData:ht,classStyle:_a.renameColumnInput}):null)}const id={selectedSeries:0},Sm=new N.c(Pm).setPanelOptions((w,J)=>{const le=J.data.map((pe,Se)=>({value:Se,label:pe.refId}));return J.options&&!le.map(pe=>pe.value).includes(J.options.selectedSeries??0)&&(J.options.selectedSeries=id.selectedSeries),w.addSelect({path:"selectedSeries",name:"Select series",defaultValue:id.selectedSeries,settings:{options:le}})});class xm extends P.Component{constructor(){super(...arguments),this.subscription=new zs.w0,this.state={}}componentDidMount(){const{eventBus:J}=this.props;this.subscription.add(J.subscribe(za.es,le=>{this.setState({event:le})})),this.subscription.add(J.subscribe(za.xH,le=>{this.setState({event:le})})),this.subscription.add(J.subscribe(es.IA,le=>{this.setState({event:le})})),this.subscription.add(J.subscribe(es.oi,le=>{this.setState({event:le})}))}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{event:J}=this.state;if(!J)return P.createElement("div",null,"no events yet");const{type:le,payload:pe,origin:Se}=J;return P.createElement(j.$,{autoHeightMin:"100%",autoHeightMax:"100%"},P.createElement("h3",null,"Origin: ",Se?.path),P.createElement("span",null,"Type: ",le),!!pe&&P.createElement(P.Fragment,null,P.createElement("pre",null,JSON.stringify(pe.point,null,"  ")),pe.data&&P.createElement(Ks.H,{data:pe.data,rowIndex:pe.rowIndex,columnIndex:pe.columnIndex})))}}var Mm=e(81424);let Ql=100;class Tm extends P.PureComponent{constructor(J){super(J),this.history=new Mm.d({capacity:40,append:"head"}),this.eventObserver={next:pe=>{const Se=pe.origin;this.history.add({key:Ql++,type:pe.type,path:Se?.path,payload:pe.payload}),this.setState({counter:Ql})}},this.state={counter:Ql};const le=[];le.push(J.eventBus.getStream(za.es).subscribe(this.eventObserver)),le.push(J.eventBus.getStream(za.xH).subscribe(this.eventObserver)),le.push(J.eventBus.getStream(za.v9).subscribe(this.eventObserver)),this.subs=le}componentWillUnmount(){for(const J of this.subs)J.unsubscribe()}render(){return P.createElement(j.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.history.map((J,le)=>P.createElement("div",{key:J.key},JSON.stringify(J.path)," ",J.type," / X:",JSON.stringify(J.payload.x)," / Y:",JSON.stringify(J.payload.y))))}}var Or=e(16515);class Om extends P.Component{constructor(){super(...arguments),this.lastRender=Date.now(),this.counters={render:0,dataChanged:0,schemaChanged:0},this.resetCounters=()=>{this.counters={render:0,dataChanged:0,schemaChanged:0},this.forceUpdate()}}shouldComponentUpdate(J){const{data:le,options:pe}=this.props;if(J.data!==le&&(this.counters.dataChanged++,pe.counters?.schemaChanged)){const Se=J.data?.series,Re=le.series;Re&&Se&&((0,lo.nl)(Re,Se,lo.Ch)||this.counters.schemaChanged++)}return!0}render(){const{data:J,options:le}=this.props,pe=le.counters??{render:!1,dataChanged:!1,schemaChanged:!1};this.counters.render++;const Se=Date.now(),Re=Se-this.lastRender;this.lastRender=Se;const We=Or.TB.get(Or.gz.lastNotNull);return P.createElement("div",null,P.createElement("div",null,P.createElement(na.h,{name:"step-backward",title:"reset counters",onClick:this.resetCounters,tooltip:"Step back"}),P.createElement("span",null,pe.render&&P.createElement("span",null,"Render: ",this.counters.render,"\xA0"),pe.dataChanged&&P.createElement("span",null,"Data: ",this.counters.dataChanged,"\xA0"),pe.schemaChanged&&P.createElement("span",null,"Schema: ",this.counters.schemaChanged,"\xA0"),P.createElement("span",null,"TIME: ",Re,"ms"))),J.series&&J.series.map((Ge,at)=>P.createElement("div",{key:`${at}/${Ge.refId}`},P.createElement("h4",null,(0,Na.nf)(Ge,at)," (",Ge.length,")"),P.createElement("table",{className:"filter-table"},P.createElement("thead",null,P.createElement("tr",null,P.createElement("td",null,"Field"),P.createElement("td",null,"Type"),P.createElement("td",null,"Last"))),P.createElement("tbody",null,Ge.fields.map((ot,ft)=>{const ht=We.reduce(ot,!1,!1)[We.id];return P.createElement("tr",{key:`${ft}/${ot.name}`},P.createElement("td",null,(0,Na.CZ)(ot,Ge,J.series)),P.createElement("td",null,ot.type),P.createElement("td",null,`${ht}`))}))))))}}var Im=e(24956);function Rm(w){const J=(0,St.R9)(),le=pe=>{J.onInstanceStateChange({name:pe.currentTarget.value})};return P.createElement(P.Fragment,null,P.createElement(Ct.g,{label:"State name"},P.createElement(Im.I,{value:J.instanceState?.name??"",onChange:le})))}function Am({value:w,context:J,onChange:le,item:pe}){return P.createElement("div",null,"Current value: ",J.instanceState?.name," ")}var hr=(w=>(w.Cursor="cursor",w.Events="events",w.Render="render",w.State="State",w.ThrowError="ThrowError",w))(hr||{});class gp extends P.Component{render(){const{options:J}=this.props;switch(J.mode){case hr.Events:return P.createElement(Tm,{eventBus:this.props.eventBus});case hr.Cursor:return P.createElement(xm,{eventBus:this.props.eventBus});case hr.State:return P.createElement(Rm,{...this.props});case hr.ThrowError:throw new Error("I failed you and for that i am deeply sorry");default:return P.createElement(Om,{...this.props})}}}const Lm=new N.c(gp).useFieldConfig().setPanelOptions(w=>{w.addSelect({path:"mode",name:"Mode",defaultValue:hr.Render,settings:{options:[{label:"Render",value:hr.Render},{label:"Events",value:hr.Events},{label:"Cursor",value:hr.Cursor},{label:"Cursor",value:hr.Cursor},{label:"Share state",value:hr.State},{label:"Throw error",value:hr.ThrowError}]}}).addCustomEditor({id:"stateView",path:"stateView",name:"State view",defaultValue:"",showIf:({mode:J})=>J===hr.State,editor:Am}).addBooleanSwitch({path:"counters.render",name:"Render Count",defaultValue:!0,showIf:({mode:J})=>J===hr.Render}).addBooleanSwitch({path:"counters.dataChanged",name:"Data Changed Count",defaultValue:!0,showIf:({mode:J})=>J===hr.Render}).addBooleanSwitch({path:"counters.schemaChanged",name:"Schema Changed Count",defaultValue:!0,showIf:({mode:J})=>J===hr.Render}).addDashboardPicker({path:"dashboardUID",name:"Dashboard",settings:{placeholder:"Select dashboard",isClearable:!0}})});var Mn=e(221),Zs=e(52968);function Bi(w,J={}){(0,xs.ff)(`grafana_flamegraph_${w}`,{app:I.zj.Unknown,grafana_version:U.config.buildInfo.version,...J})}const ld=w=>{const J=(0,Mn.d6)(w.data.series[0]);return J?P.createElement(xt.Z,{panelId:w.id,data:w.data,message:(0,Mn.cN)(J)}):P.createElement(Zs.Z,{data:w.data.series[0],stickyHeader:!1,getTheme:()=>U.config.theme2,showFlameGraphOnly:w.options?.showFlameGraphOnly??!1,onTableSymbolClick:()=>Bi("table_item_selected"),onViewSelected:le=>Bi("view_selected",{view:le}),onTextAlignSelected:le=>Bi("text_align_selected",{align:le}),onTableSort:le=>Bi("table_sort_selected",{sort:le}),disableCollapsing:!U.config.featureToggles.flameGraphItemCollapsing})};class cd{getListWithDefaults(J){return J.getListAppender({name:Ha.y.FlameGraph,pluginId:"flamegraph"})}getSuggestionsForData(J){if(!J.data)return;const le=J.data.series[0];!le||(0,Mn.d6)(le)||this.getListWithDefaults(J).append({name:Ha.y.FlameGraph})}}const Bm=new N.c(ld).setSuggestionsSupplier(new cd);var gi=e(2637),wm=e(75682);const dd=(w,J)=>{const le="linear-gradient(to right, #5182CC 0%, #245BAF 100%)",pe=J?le:"linear-gradient(to right, #f05a28 0%, #fbca0a 100%)",Se=J?le:"linear-gradient(to right, #FBCA0A 0%, #F05A28 100%)",Re=w.isDark?pe:Se;return`
      background-color: ${w.colors.background.secondary};
      margin-right: ${w.spacing(4)};
      border: 1px solid ${w.colors.border.weak};
      border-bottom-left-radius: ${w.shape.borderRadius(2)};
      border-bottom-right-radius: ${w.shape.borderRadius(2)};
      position: relative;
      max-height: 230px;

      ${w.breakpoints.down("xxl")} {
        margin-right: ${w.spacing(2)};
      }
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 2px;
        top: 0;
        background-image: ${Re};
      }
`},ud=(w,J)=>(0,k.css)`
  color: ${J?w.v1.palette.blue95:w.colors.text.secondary};

  ${w.breakpoints.down("sm")} {
    display: none;
  }
`,wi=(0,k.css)`
  padding: 16px;
`,Yl=({card:w})=>{const J=(0,X.wW)(Um,w.done),le=(0,X.wW)(ud,w.done);return P.createElement("div",{className:J.card},P.createElement("div",{className:wi},P.createElement("a",{href:`${w.href}?utm_source=grafana_gettingstarted`,className:J.url},P.createElement("div",{className:J.heading},w.done?"complete":w.heading),P.createElement("h4",{className:J.title},w.title),P.createElement("div",null,P.createElement(Le.J,{className:le,name:w.icon,size:"xxl"})))),P.createElement("a",{href:`${w.learnHref}?utm_source=grafana_gettingstarted`,className:J.learnUrl,target:"_blank",rel:"noreferrer"},"Learn how in the docs ",P.createElement(Le.J,{name:"external-link-alt"})))},Um=(w,J)=>({card:(0,k.css)`
      ${dd(w,J)}

      min-width: 230px;

      ${w.breakpoints.down("md")} {
        min-width: 192px;
      }
    `,heading:(0,k.css)`
      text-transform: uppercase;
      color: ${J?w.v1.palette.blue95:"#FFB357"};
      margin-bottom: ${w.spacing(2)};
    `,title:(0,k.css)`
      margin-bottom: ${w.spacing(2)};
    `,url:(0,k.css)`
      display: inline-block;
    `,learnUrl:(0,k.css)`
      border-top: 1px solid ${w.colors.border.weak};
      position: absolute;
      bottom: 0;
      padding: 8px 16px;
      width: 100%;
    `});var hi=e(20994);const Nm=({card:w})=>{const J=(0,X.wW)(Vo,w.done),le=(0,X.wW)(ud,w.done);return P.createElement("a",{className:J.card,target:"_blank",rel:"noreferrer",href:`${w.href}?utm_source=grafana_gettingstarted`,onClick:pe=>Wm(pe,w)},P.createElement("div",{className:wi},P.createElement("div",{className:J.type},w.type),P.createElement("div",{className:J.heading},w.done?"complete":w.heading),P.createElement("h4",{className:J.cardTitle},w.title),P.createElement("div",{className:J.info},w.info),P.createElement(Le.J,{className:le,name:w.icon,size:"xxl"})))},Wm=(w,J)=>{w.preventDefault(),hi.Z.get(J.key)||hi.Z.set(J.key,!0)},Vo=(w,J)=>({card:(0,k.css)`
      ${dd(w,J)}
      width: 460px;
      min-width: 460px;

      ${w.breakpoints.down("xl")} {
        min-width: 368px;
      }

      ${w.breakpoints.down("lg")} {
        min-width: 272px;
      }
    `,type:(0,k.css)`
      color: ${w.colors.primary.text};
      text-transform: uppercase;
    `,heading:(0,k.css)`
      text-transform: uppercase;
      color: ${w.colors.primary.text};
      margin-bottom: ${w.spacing(1)};
    `,cardTitle:(0,k.css)`
      margin-bottom: ${w.spacing(2)};
    `,info:(0,k.css)`
      margin-bottom: ${w.spacing(2)};
    `,status:(0,k.css)`
      display: flex;
      justify-content: flex-end;
    `}),Fm=({step:w})=>{const J=(0,X.wW)(Zl);return P.createElement("div",{className:J.setup},P.createElement("div",{className:J.info},P.createElement("h2",{className:J.title},w.title),P.createElement("p",null,w.info)),P.createElement("div",{className:J.cards},w.cards.map((le,pe)=>{const Se=`${le.title}-${pe}`;return le.type==="tutorial"?P.createElement(Nm,{key:Se,card:le}):P.createElement(Yl,{key:Se,card:le})})))},Zl=w=>({setup:(0,k.css)`
      display: flex;
      width: 95%;
    `,info:(0,k.css)`
      width: 172px;
      margin-right: 5%;

      ${w.breakpoints.down("xxl")} {
        margin-right: ${w.spacing(4)};
      }
      ${w.breakpoints.down("sm")} {
        display: none;
      }
    `,title:(0,k.css)`
      color: ${w.v1.palette.blue95};
    `,cards:(0,k.css)`
      overflow-x: scroll;
      overflow-y: hidden;
      width: 100%;
      display: flex;
      justify-content: center;

      ${w.breakpoints.down("xxl")} {
        justify-content: flex-start;
      }
    `});var pi=e(65512);const md="Grafana fundamentals",Mo="Create users and teams",Km="getting.started.",fd=`${Km}${md.replace(" ","-").trim().toLowerCase()}`,Ui=`${Km}${Mo.replace(" ","-").trim().toLowerCase()}`,gd=()=>[{heading:"Welcome to Grafana",subheading:"The steps below will guide you to quickly finish setting up your Grafana installation.",title:"Basic",info:"The steps below will guide you to quickly finish setting up your Grafana installation.",done:!1,cards:[{type:"tutorial",heading:"Data source and dashboards",title:md,info:"Set up and understand Grafana if you have no prior experience. This tutorial guides you through the entire process and covers the \u201CData source\u201D and \u201CDashboards\u201D steps to the right.",href:"https://grafana.com/tutorials/grafana-fundamentals",icon:"grafana",check:()=>Promise.resolve(hi.Z.get(fd)),key:fd,done:!1},{type:"docs",title:"Add your first data source",heading:"data sources",icon:"database",learnHref:"https://grafana.com/docs/grafana/latest/features/datasources/add-a-data-source",href:"datasources/new",check:()=>new Promise(w=>{w((0,pi.ak)().getMetricSources().filter(J=>J.meta.builtIn!==!0).length>0)}),done:!1},{type:"docs",heading:"dashboards",title:"Create your first dashboard",icon:"apps",href:"dashboard/new",learnHref:"https://grafana.com/docs/grafana/latest/guides/getting_started/#create-a-dashboard",check:async()=>(await(0,Ko.i)().search({limit:1})).length>0,done:!1}]},{heading:"Setup complete!",subheading:"All necessary steps to use Grafana are done. Now tackle advanced steps or make the best use of this home dashboard \u2013 it is, after all, a fully customizable dashboard \u2013 and remove this panel.",title:"Advanced",info:" Manage your users and teams and add plugins. These steps are optional",done:!1,cards:[{type:"tutorial",heading:"Users",title:"Create users and teams",info:"Learn to organize your users in teams and manage resource access and roles.",href:"https://grafana.com/tutorials/create-users-and-teams",icon:"users-alt",key:Ui,check:()=>Promise.resolve(hi.Z.get(Ui)),done:!1},{type:"docs",heading:"plugins",title:"Find and install plugins",learnHref:"https://grafana.com/docs/grafana/latest/plugins/installation",href:"plugins",icon:"plug",check:async()=>{const w=await(0,Ko.i)().get("/api/plugins",{embedded:0,core:0});return Promise.resolve(w.length>0)},done:!1}]}];class Jl extends P.PureComponent{constructor(){super(...arguments),this.state={checksDone:!1,currentStep:0,steps:gd()},this.onForwardClick=()=>{this.setState(J=>({currentStep:J.currentStep+1}))},this.onPreviousClick=()=>{this.setState(J=>({currentStep:J.currentStep-1}))},this.dismiss=()=>{const{id:J}=this.props,le=(0,Fe.h4)().getCurrent(),pe=le?.getPanelById(J);le?.removePanel(pe),Ko.ae.put("/api/user/helpflags/1",void 0,{showSuccessAlert:!1}).then(Se=>{Ai.Vt.user.helpFlags1=Se.helpFlags1})}}async componentDidMount(){const{steps:J}=this.state,le=J.map(async Se=>{const Re=Se.cards.map(async Ge=>Ge.check().then(at=>({...Ge,done:at}))),We=await Promise.all(Re);return{...Se,done:We.every(Ge=>Ge.done),cards:We}}),pe=await Promise.all(le);this.setState({currentStep:pe[0].done?1:0,steps:pe,checksDone:!0})}render(){const{checksDone:J,currentStep:le,steps:pe}=this.state,Se=Vm(),Re=pe[le];return P.createElement("div",{className:Se.container},J?P.createElement(P.Fragment,null,P.createElement(te.zx,{variant:"secondary",fill:"text",className:Se.dismiss,onClick:this.dismiss},"Remove this panel"),le===pe.length-1&&P.createElement(te.zx,{className:(0,k.cx)(Se.backForwardButtons,Se.previous),onClick:this.onPreviousClick,"aria-label":"To advanced tutorials",icon:"angle-left",variant:"secondary"}),P.createElement("div",{className:Se.content},P.createElement(Fm,{step:Re})),le<pe.length-1&&P.createElement(te.zx,{className:(0,k.cx)(Se.backForwardButtons,Se.forward),onClick:this.onForwardClick,"aria-label":"To basic tutorials",icon:"angle-right",variant:"secondary"})):P.createElement("div",{className:Se.loading},P.createElement("div",{className:Se.loadingText},"Checking completed setup steps"),P.createElement(wm.$,{size:"xl",inline:!0})))}}const Vm=(0,cr.B)(()=>{const w=U.config.theme2;return{container:(0,k.css)`
      display: flex;
      flex-direction: column;
      height: 100%;
      // background: url(public/img/getting_started_bg_${w.colors.mode}.svg) no-repeat;
      background-size: cover;
      padding: ${w.spacing(4)} ${w.spacing(2)} 0;
    `,content:(0,k.css)`
      label: content;
      display: flex;
      justify-content: center;

      ${w.breakpoints.down("xxl")} {
        margin-left: ${w.spacing(3)};
        justify-content: flex-start;
      }
    `,header:(0,k.css)`
      label: header;
      margin-bottom: ${w.spacing(3)};
      display: flex;
      flex-direction: column;

      ${w.breakpoints.down("lg")} {
        flex-direction: row;
      }
    `,headerLogo:(0,k.css)`
      height: 58px;
      padding-right: ${w.spacing(2)};
      display: none;

      ${w.breakpoints.up("md")} {
        display: block;
      }
    `,heading:(0,k.css)`
      label: heading;
      margin-right: ${w.spacing(3)};
      margin-bottom: ${w.spacing(3)};
      flex-grow: 1;
      display: flex;

      ${w.breakpoints.up("md")} {
        margin-bottom: 0;
      }
    `,backForwardButtons:(0,k.css)`
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `,previous:(0,k.css)`
      left: 10px;

      ${w.breakpoints.down("md")} {
        left: 0;
      }
    `,forward:(0,k.css)`
      right: 10px;

      ${w.breakpoints.down("md")} {
        right: 0;
      }
    `,dismiss:(0,k.css)`
      align-self: flex-end;
      text-decoration: underline;
      margin-bottom: ${w.spacing(1)};
    `,loading:(0,k.css)`
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    `,loadingText:(0,k.css)`
      margin-right: ${w.spacing(1)};
    `}}),Xl=new N.c(Jl).setNoPadding();var Pr=e(87500),hd=e(34305);const Xo={bucketOffset:0},pd={fillOpacity:80,gradientMode:Mt.FI.None,lineWidth:1};function vd(w,J){return Math.floor(w/J)*J}function ql(w,J){return Math.ceil(w/J)*J}function rs(w){return w.fields[0].type===zn.fS.string?1:w.fields[1].values[0]-w.fields[0].values[0]}function _m(w){return w.fields[0].type===zn.fS.string?1:w.fields[1].values[1]-w.fields[0].values[1]}const ec=(w,J)=>{let{min:le,max:pe}=w.fields[2].config,Se=new Ia.U,Re=w.fields[0].type===zn.fS.string,We=rs(w),Ge=_m(w),at=Ge/We,ot=Ge!==We,ft=(Tt,_t,Jt,Ht,fn,kt)=>{let gn=Tt.axes[_t]._space,cn=Tt.valToPos(Tt.data[0][0]+We,"x")-Tt.valToPos(Tt.data[0][0],"x"),tn=vd(le??Tt.data[0][0],We),pn=ql(pe??Tt.data[0][Tt.data[0].length-1]+We,We),dn=[],Un=Math.ceil(gn/cn);for(let qn=0,Fn=tn;Fn<=pn;qn++,Fn+=We)!(qn%Un)&&dn.push(Fn);return dn};Se.addScale({scaleKey:"x",isTime:!1,distribution:Re?Mt.wf.Ordinal:ot?Mt.wf.Log:Mt.wf.Linear,log:2,orientation:Mt.wN.Horizontal,direction:Mt.bQ.Right,range:ot?(Tt,_t,Jt)=>us.Z.rangeLog(_t,Jt*at,2,!0):(Tt,_t,Jt)=>{le!=null&&(_t=le),pe!=null&&(Jt=pe);let Ht=Tt.data[0][0],fn=Tt.data[0][Tt.data[0].length-1];return Jt===fn?Jt+=We:Jt=ql(Jt,We),_t>Ht&&(_t=vd(_t,We)),[_t,Jt]}}),Se.addScale({scaleKey:"y",isTime:!1,distribution:Mt.wf.Linear,orientation:Mt.wN.Vertical,direction:Mt.bQ.Up});const ht=w.fields[0].display,wt=Tt=>(0,cs.zc)(ht(Tt));Se.addAxis({scaleKey:"x",isTime:!1,placement:Mt.LB.Bottom,incrs:Re?[1]:ot?void 0:Pr.Zi,splits:ot||Re?void 0:ft,values:Re?(Tt,_t)=>_t:(Tt,_t)=>{const Jt=_t.map(wt),Ht=Jt.reduce((cn,tn)=>Math.max((0,Xt.X1)(tn,Qt.gD).width,cn),0),fn=10,kt=Tt.bbox.width/((Ht+fn)*devicePixelRatio),gn=Math.ceil(Jt.length/kt);return Jt.map((cn,tn)=>tn%gn===0?cn:null)},theme:J});let At=w.fields[2].display;Se.addAxis({scaleKey:"y",isTime:!1,placement:Mt.LB.Left,formatValue:(Tt,_t)=>(0,cs.zc)(At(Tt,_t)),theme:J}),Se.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let zt=us.Z.paths.bars({align:1,size:[1,1/0]}),Rt=0;for(let Tt=2;Tt<w.fields.length;Tt++){const _t=w.fields[Tt];_t.state=_t.state??{},_t.state.seriesIndex=Rt++;const Jt={...pd,..._t.config.custom},Ht="y",fn=(0,Bs.fD)(_t),gn=(0,Bs.YO)(_t,J).color;Se.addSeries({scaleKey:Ht,lineWidth:Jt.lineWidth,lineColor:gn,fillOpacity:Jt.fillOpacity,theme:J,colorMode:fn,pathBuilder:zt,show:!Jt.hideFrom?.viz,gradientMode:Jt.gradientMode,thresholds:_t.config.thresholds,hardMin:_t.config.min,hardMax:_t.config.max,softMin:Jt.axisSoftMin,softMax:Jt.axisSoftMax,dataFrameFieldIndex:_t.state.origin})}return Se},$m=w=>{let J=[];for(const le of w.fields)le.name!==Pr.cO&&J.push(le.values);for(let le=1;le<J.length;le++){let pe=J[le];for(let Se=0;Se<pe.length;Se++)pe[Se]===0&&(pe[Se]=null)}return J};class zm extends P.Component{constructor(J){super(J),this.state=this.prepState(J)}prepState(J,le=!0){let pe=null;const{alignedFrame:Se}=J;return Se&&(pe={alignedData:$m(Se)},le&&(pe.config=ec(Se,this.props.theme))),pe}renderLegend(J){const{legend:le}=this.props;return!J||le.showLegend===!1?null:P.createElement(Bn.l,{data:this.props.rawSeries,config:J,maxHeight:"35%",maxWidth:"60%",...le})}componentDidUpdate(J){const{structureRev:le,alignedFrame:pe,bucketSize:Se}=this.props;if(pe!==J.alignedFrame){let Re=this.prepState(this.props,!1);Re&&(Se!==J.bucketSize||this.props.options!==J.options||this.state.config===void 0||le!==J.structureRev||!le)&&(Re.config=ec(pe,this.props.theme)),Re&&this.setState(Re)}}render(){const{width:J,height:le,children:pe,alignedFrame:Se}=this.props,{config:Re}=this.state;return Re?P.createElement(sn.AY,{width:J,height:le,legend:this.renderLegend(Re)},(We,Ge)=>P.createElement(hd.N,{config:this.state.config,data:this.state.alignedData,width:We,height:Ge},pe?pe(Re,Se):null)):null}}const km=({data:w,options:J,width:le,height:pe})=>{const Se=(0,X.l4)(),Re=(0,P.useMemo)(()=>{if(!w.series.length)return;if(w.series.forEach((at,ot)=>{at.fields.forEach((ft,ht)=>{ft.state={...ft.state,origin:{frameIndex:ot,fieldIndex:ht}}})}),w.series.length===1){const at=(0,Pr.qr)(w.series[0]);if(at)return(0,Pr.zM)(at)}const Ge=(0,Pr.gY)(w.series,J);if(Ge)return(0,Pr.zM)(Ge,Se)},[w.series,J,Se]);if(!Re||!Re.fields.length)return P.createElement("div",{className:"panel-empty"},P.createElement("p",null,"No histogram found in response"));const We=rs(Re);return P.createElement(zm,{options:J,theme:Se,legend:J.legend,rawSeries:w.series,structureRev:w.structureRev,width:le,height:pe,alignedFrame:Re,bucketSize:We},(Ge,at)=>null)};function nl(w){if(w?.length!==1)return!1;const J=w[0];if(J.fields.length<3||!(0,Pr.Ok)(J.fields[0].name)||!(0,Pr.kl)(J.fields[1].name))return!1;for(const le of J.fields)if(le.type!==zn.fS.number)return!1;return!0}const Hm=new N.c(km).setPanelOptions(w=>{w.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(J,le)=>nl(le)}).addNumberInput({path:"bucketSize",name:Pr.py.bucketSize.name,description:Pr.py.bucketSize.description,settings:{placeholder:"Auto",min:0},defaultValue:Xo.bucketSize,showIf:(J,le)=>!nl(le)}).addNumberInput({path:"bucketOffset",name:Pr.py.bucketOffset.name,description:Pr.py.bucketOffset.description,settings:{placeholder:"0",min:0},defaultValue:Xo.bucketOffset,showIf:(J,le)=>!nl(le)}).addBooleanSwitch({path:"combine",name:Pr.py.combine.name,description:Pr.py.combine.description,defaultValue:Xo.combine,showIf:(J,le)=>!nl(le)}),ur.J(w)}).useFieldConfig({standardOptions:{[Ms.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:is.S.PaletteClassic}}},useCustomConfig:w=>{const J=pd;w.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:J.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:J.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:xr.q.fillGradient[0].value,settings:{options:xr.q.fillGradient}}),dr.B(w)}});var Gr=e(68898),al=e(57445);const To=[{label:"Grafana",value:Gr.z.Grafana,description:"Core grafana live features"},{label:"Data Sources",value:Gr.z.DataSource,description:"Data sources with live support"},{label:"Plugins",value:Gr.z.Plugin,description:"Plugins with live support"}];class Gm extends P.PureComponent{constructor(){super(...arguments),this.state={namespaces:[],paths:[]},this.onScopeChanged=J=>{J.value&&this.props.onChange({scope:J.value,namespace:void 0,path:void 0})},this.onNamespaceChanged=J=>{this.props.onChange({scope:this.props.value?.scope,namespace:J.value,path:void 0})},this.onPathChanged=J=>{const{value:le,onChange:pe}=this.props;pe({scope:le.scope,namespace:le.namespace,path:J.value})}}async componentDidMount(){this.updateSelectOptions()}async componentDidUpdate(J){this.props.value!==J.value&&this.updateSelectOptions()}async updateSelectOptions(){this.setState({namespaces:[],paths:[]})}render(){const{namespaces:J,paths:le}=this.state,{scope:pe,namespace:Se,path:Re}=this.props.value,We=qo(qt.config.theme2);return P.createElement(P.Fragment,null,P.createElement(yn.b,{title:"Grafana Live",severity:"info"},"This supports real-time event streams in grafana core. This feature is under heavy development. Expect the intefaces and structures to change as this becomes more production ready."),P.createElement("div",null,P.createElement("div",{className:We.dropWrap},P.createElement(al._,null,"Scope"),P.createElement(De.Ph,{options:To,value:To.find(Ge=>Ge.value===pe),onChange:this.onScopeChanged})),pe&&P.createElement("div",{className:We.dropWrap},P.createElement(al._,null,"Namespace"),P.createElement(De.Ph,{options:J,value:J.find(Ge=>Ge.value===Se)??(Se?{label:Se,value:Se}:void 0),onChange:this.onNamespaceChanged,allowCustomValue:!0,backspaceRemovesValue:!0})),pe&&Se&&P.createElement("div",{className:We.dropWrap},P.createElement(al._,null,"Path"),P.createElement(De.Ph,{options:le,value:jm(le,Re),onChange:this.onPathChanged,allowCustomValue:!0,backspaceRemovesValue:!0}))))}}function jm(w,J){const le=w.find(pe=>pe.value===J);if(le)return le;if(J)return{label:J,value:J}}const qo=(0,cr.B)(w=>({dropWrap:(0,k.css)`
    margin-bottom: ${w.spacing(1)};
  `}));var Ed=e(28870),yd=e(23757),tc=e(78942),Qm=e(92904),sl=e(62577),po=e(70274),nc=e(63510),_o=e(24298);function bd(w){const{data:J,height:le,width:pe,options:Se,fieldConfig:Re,id:We,timeRange:Ge}=w,at=(0,X.l4)(),ot=(0,St.R9)(),ft=(0,_o.yR)(J.series)?(0,_o.Bc)(J.series):J.series,ht=ft?.length,wt=ft[0]?.fields.length,Et=Dd(ft,Se),At=ft[Et];let zt=le;if(!ht||!wt)return P.createElement(xt.Z,{panelId:We,fieldConfig:Re,data:J});if(ht>1){const _t=at.spacing.gridSize*at.components.height.md,Jt=at.spacing.gridSize;zt=le-_t-Jt}const Rt=P.createElement(nc.i,{height:zt,width:pe,data:At,noHeader:!Se.showHeader,showTypeIcons:Se.showTypeIcons,resizable:!0,initialSortBy:Se.sortBy,onSortByChange:_t=>rl(_t,w),onColumnResize:(_t,Jt)=>Ym(_t,Jt,w),onCellFilterAdded:ot.onAddAdHocFilter,footerOptions:Se.footer,enablePagination:Se.footer?.enablePagination,cellHeight:Se.cellHeight,timeRange:Ge});if(ht===1)return Rt;const Tt=ft.map((_t,Jt)=>({label:(0,Na.nf)(_t),value:Jt}));return P.createElement("div",{className:ac.wrapper},Rt,P.createElement("div",{className:ac.selectWrapper},P.createElement(De.Ph,{options:Tt,value:Tt[Et],onChange:_t=>Zm(_t,w)})))}function Dd(w,J){return J.frameIndex>0&&J.frameIndex<w.length?J.frameIndex:0}function Ym(w,J,le){const{fieldConfig:pe}=le,{overrides:Se}=pe,Re=po.mi.byName,We="custom.width",Ge=Se.find(at=>at.matcher.id===Re&&at.matcher.options===w);if(Ge){const at=Ge.properties.find(ot=>ot.id===We);at?at.value=J:Ge.properties.push({id:We,value:J})}else Se.push({matcher:{id:Re,options:w},properties:[{id:We,value:J}]});le.onFieldConfigChange({...pe,overrides:Se})}function rl(w,J){J.onOptionsChange({...J.options,sortBy:w})}function Zm(w,J){J.onOptionsChange({...J.options,frameIndex:w.value||0})}const ac={wrapper:(0,k.css)`
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  `,selectWrapper:(0,k.css)`
    padding: 8px 8px 0px 8px;
  `};var vo=(w=>(w.Raw="raw",w.JSON="json",w.Auto="auto",w.None="none",w))(vo||{});class Jm extends P.PureComponent{constructor(J){super(J),this.styles=Xm(U.config.theme2),this.streamObserver={next:le=>{(0,Gr.se)(le)?this.setState({status:le,changed:Date.now()}):(0,Gr.RL)(le)?this.setState({message:le.message,changed:Date.now()}):console.log("ignore",le)}},this.unsubscribe=()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)},this.onSaveJSON=le=>{const{options:pe,onOptionsChange:Se}=this.props;try{const Re=JSON.parse(le);Se({...pe,json:Re})}catch(Re){console.log("Error reading JSON",Re)}},this.onPublishClicked=async()=>{const{addr:le}=this.state;if(!le){console.log("invalid address");return}const pe=this.props.options?.json;if(!pe){console.log("nothing to publish");return}const Se=await(0,tc.gj)().publish(le,pe);console.log("onPublishClicked (response from publish)",Se)},this.isValid=!!(0,tc.gj)(),this.state={changed:0}}async componentDidMount(){this.loadChannel()}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(J){this.props.options?.channel!==J.options?.channel&&this.loadChannel()}async loadChannel(){const J=this.props.options?.channel;if(!(0,Gr.nU)(J)){console.log("INVALID",J),this.unsubscribe(),this.setState({addr:void 0});return}if((0,ne.isEqual)(J,this.state.addr)){console.log("Same channel",this.state.addr);return}const le=(0,tc.gj)();if(!le){console.log("INVALID",J),this.unsubscribe(),this.setState({addr:void 0});return}this.unsubscribe(),console.log("LOAD",J);try{this.subscription=le.getStream(J).subscribe(this.streamObserver),this.setState({addr:J,error:void 0})}catch(pe){this.setState({addr:void 0,error:pe})}}renderNotEnabled(){const J=`[feature_toggles]
    enable = live`;return P.createElement(yn.b,{title:"Grafana Live",severity:"info"},P.createElement("p",null,"Grafana live requires a feature flag to run"),P.createElement("b",null,"custom.ini:"),P.createElement("pre",null,J))}renderMessage(J){const{options:le}=this.props,{message:pe}=this.state;if(!pe)return P.createElement("div",null,P.createElement("h4",null,"Waiting for data:"),le.channel?.scope,"/",le.channel?.namespace,"/",le.channel?.path);if(le.message===vo.JSON)return P.createElement(Qm.g,{json:pe,open:5});if(le.message===vo.Auto&&pe instanceof Ed.Av){const Se={series:(0,Jr.SM)({data:[pe],theme:U.config.theme2,replaceVariables:We=>We,fieldConfig:{defaults:{},overrides:[]}}),state:yd.Gu.Streaming},Re={...this.props,options:{frameIndex:0,showHeader:!0}};return P.createElement(bd,{...Re,data:Se,height:J})}return P.createElement("pre",null,JSON.stringify(pe))}renderPublish(J){const{options:le}=this.props;return P.createElement(P.Fragment,null,P.createElement(sl.p,{height:J-32,language:"json",value:le.json?JSON.stringify(le.json,null,2):"{ }",onBlur:this.onSaveJSON,onSave:this.onSaveJSON,showMiniMap:!1,showLineNumbers:!0}),P.createElement("div",{style:{height:32}},P.createElement(te.zx,{onClick:this.onPublishClicked},"Publish")))}renderStatus(){const{status:J}=this.state;if(J?.state===Gr.yS.Connected)return;let le="";return J&&(le=this.styles.status[J.state]),P.createElement("div",{className:(0,k.cx)(le,this.styles.statusWrap)},J?.state)}renderBody(){const{status:J}=this.state,{options:le,height:pe}=this.props;if(le.publish){if(le.message===vo.None)return P.createElement("div",null,this.renderPublish(pe));const Se=pe/2;return P.createElement("div",null,P.createElement("div",{style:{height:Se,overflow:"hidden"}},P.createElement(j.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(Se))),P.createElement("div",null,this.renderPublish(Se)))}return le.message===vo.None?P.createElement("pre",null,JSON.stringify(J)):P.createElement("div",{style:{overflow:"hidden",height:pe}},P.createElement(j.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(pe)))}render(){if(!this.isValid)return this.renderNotEnabled();const{addr:J,error:le}=this.state;return J?le?P.createElement("div",null,P.createElement("h2",null,"ERROR"),P.createElement("div",null,JSON.stringify(le))):P.createElement(P.Fragment,null,this.renderStatus(),this.renderBody()):P.createElement(yn.b,{title:"Grafana Live",severity:"info"},"Use the panel editor to pick a channel")}}const Xm=(0,cr.B)(w=>({statusWrap:(0,k.css)`
    margin: auto;
    position: absolute;
    top: 0;
    right: 0;
    background: ${w.components.panel.background};
    padding: 10px;
    z-index: ${w.zIndex.modal};
  `,status:{[Gr.yS.Pending]:(0,k.css)`
      border: 1px solid ${w.v1.palette.orange};
    `,[Gr.yS.Connected]:(0,k.css)`
      border: 1px solid ${w.colors.success.main};
    `,[Gr.yS.Connecting]:(0,k.css)`
      border: 1px solid ${w.v1.palette.brandWarning};
    `,[Gr.yS.Disconnected]:(0,k.css)`
      border: 1px solid ${w.colors.warning.main};
    `,[Gr.yS.Shutdown]:(0,k.css)`
      border: 1px solid ${w.colors.error.main};
    `,[Gr.yS.Invalid]:(0,k.css)`
      border: 1px solid red;
    `}})),qm=new N.c(Jm).setPanelOptions(w=>{w.addCustomEditor({category:["Channel"],id:"channel",path:"channel",name:"Channel",editor:Gm,defaultValue:{}}),w.addRadio({path:"message",name:"Show Message",description:"Display the last message received on this channel",settings:{options:[{value:vo.Raw,label:"Raw Text"},{value:vo.JSON,label:"JSON"},{value:vo.Auto,label:"Auto"},{value:vo.None,label:"None"}]},defaultValue:vo.JSON}).addBooleanSwitch({path:"publish",name:"Show Publish",description:"Display a form to publish values",defaultValue:!1})});var Ni=e(45236),sc=e(52077),ef=e(70797),tf=e(89877),rc=e(46063),oc=e(81154);const nf=({data:w,timeZone:J,fieldConfig:le,options:{showLabels:pe,showTime:Se,wrapLogMessage:Re,showCommonLabels:We,prettifyLogMessage:Ge,sortOrder:at,dedupStrategy:ot,enableLogDetails:ft},title:ht,id:wt})=>{const Et=at===Mt.UV.Ascending,At=(0,X.wW)(Cd),[zt,Rt]=(0,P.useState)(0),Tt=(0,P.useRef)(null),{eventBus:_t}=(0,St.R9)(),Jt=(0,P.useCallback)(tn=>{tn?_t.publish(new za.es({point:{time:tn.timeEpochMs}})):_t.publish(new za.xH)},[_t]),[Ht,fn,kt]=(0,P.useMemo)(()=>{const tn=w?(0,oc.aB)(w.series,w.request?.intervalMs,void 0,w.request?.targets):null,pn=tn?.rows||[],dn=tn?.meta?.find(qn=>qn.label===oc.Qp),Un=(0,oc.UW)(pn,ot);return[pn,Un,dn]},[w,ot]);(0,P.useLayoutEffect)(()=>{Et&&Tt.current?Rt(Tt.current.offsetHeight):Rt(0)},[Et,Ht]);const gn=(0,P.useCallback)((tn,pn)=>(0,sc.a_)({field:tn,rowIndex:pn,range:w.timeRange}),[w]);if(!w||Ht.length===0)return P.createElement(ef.Z,{fieldConfig:le,panelId:wt,data:w,needsStringField:!0});const cn=()=>P.createElement("div",{className:(0,k.cx)(At.labelContainer,Et&&At.labelContainerAscending)},P.createElement("span",{className:At.label},"Common labels:"),P.createElement(tf.j,{labels:kt?kt.value:{labels:"(no common labels)"}}));return P.createElement(j.$,{autoHide:!0,scrollTop:zt},P.createElement("div",{className:At.container,ref:Tt},We&&!Et&&cn(),P.createElement(rc.w,{logRows:Ht,deduplicatedRows:fn,dedupStrategy:ot,showLabels:pe,showTime:Se,wrapLogMessage:Re,prettifyLogMessage:Ge,timeZone:J,getFieldLinks:gn,logsSortOrder:at,enableLogDetails:ft,previewLimit:Et?Ht.length:void 0,onLogRowHover:Jt,app:I.zj.Dashboard}),We&&Et&&cn()))},Cd=w=>({container:(0,k.css)({marginBottom:w.spacing(1.5)}),labelContainer:(0,k.css)({margin:w.spacing(0,0,.5,.5),display:"flex",alignItems:"center"}),labelContainerAscending:(0,k.css)({margin:w.spacing(.5,0,.5,0)}),label:(0,k.css)({marginRight:w.spacing(.5),fontSize:w.typography.bodySmall.fontSize,fontWeight:w.typography.fontWeightMedium})});class af{getSuggestionsForData(J){const le=J.getListAppender({name:"",pluginId:"logs",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}),{dataSummary:pe}=J;!pe.hasData||!pe.hasTimeField||!pe.hasStringField||(pe.preferredVisualisationType==="logs"?le.append({name:Ha.y.Logs,score:Wa._.Best}):le.append({name:Ha.y.Logs}))}}const sf=new N.c(nf).setPanelOptions(w=>{w.addBooleanSwitch({path:"showTime",name:"Time",description:"",defaultValue:!1}).addBooleanSwitch({path:"showLabels",name:"Unique labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"showCommonLabels",name:"Common labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"wrapLogMessage",name:"Wrap lines",description:"",defaultValue:!1}).addBooleanSwitch({path:"prettifyLogMessage",name:"Prettify JSON",description:"",defaultValue:!1}).addBooleanSwitch({path:"enableLogDetails",name:"Enable log details",description:"",defaultValue:!0}).addRadio({path:"dedupStrategy",name:"Deduplication",description:"",settings:{options:[{value:Mt.Y4.none,label:"None",description:Ni.Uv[Mt.Y4.none]},{value:Mt.Y4.exact,label:"Exact",description:Ni.Uv[Mt.Y4.exact]},{value:Mt.Y4.numbers,label:"Numbers",description:Ni.Uv[Mt.Y4.numbers]},{value:Mt.Y4.signature,label:"Signature",description:Ni.Uv[Mt.Y4.signature]}]},defaultValue:Mt.Y4.none}).addRadio({path:"sortOrder",name:"Order",description:"",settings:{options:[{value:Mt.UV.Descending,label:"Newest first"},{value:Mt.UV.Ascending,label:"Oldest first"}]},defaultValue:Mt.UV.Descending})}).setSuggestionsSupplier(new af);var rf=e(95953),Pd=e(35912),Ir=e(23758);function tr(w){const{width:J,options:{feedUrl:le=Pd.k,showImage:pe}}=w,{state:Se,getNews:Re}=(0,Ir.j)(le);return(0,P.useEffect)(()=>{const We=w.eventBus.subscribe(Zt.U5,Re);return()=>{We.unsubscribe()}},[Re,w.eventBus]),(0,P.useEffect)(()=>{Re()},[Re]),Se.error?P.createElement(yn.b,{title:"Error loading RSS feed"},"Make sure that the feed URL is correct and that CORS is configured correctly on the server. See"," ",P.createElement("a",{style:{textDecoration:"underline"},href:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/news/"},"News panel documentation. ",P.createElement(Le.J,{name:"external-link-alt"}))):Se.loading?P.createElement("div",null,"Loading..."):Se.value?P.createElement(j.$,{autoHeightMin:"100%",autoHeightMax:"100%"},Se.value.map((We,Ge)=>P.createElement(rf.S,{key:Ge,index:Ge,width:J,showImage:pe,data:Se.value}))):null}const Sd={showImage:!0},xd=new N.c(tr).setPanelOptions(w=>{w.addTextInput({path:"feedUrl",name:"URL",description:"Supports RSS and Atom feeds",settings:{placeholder:Pd.k},defaultValue:Sd.feedUrl}).addBooleanSwitch({path:"showImage",name:"Show image",description:"Controls if the news item social (og:image) image is shown above text content",defaultValue:Sd.showImage})});var Md=e(84513),ic=e(59691),of=e(25002);const ol=({width:w,height:J,data:le,options:pe})=>{const Se=(0,sc.u8)(le.timeRange);if(!le||!le.series.length)return P.createElement("div",{className:"panel-empty"},P.createElement("p",null,"No data found in response"));const Re=(0,Md.Z)(of.Ee);return P.createElement("div",{style:{width:w,height:J}},P.createElement(ic.E,{dataFrames:Re(le.series,pe),getLinks:Se}))};var il=e(38276),ll=e(53231);const lc=({value:w,onChange:J,context:le})=>{const pe=(0,X.wW)(lf),Se=()=>{const Ge={field:"",color:""};J(w?[...w,Ge]:[Ge])},Re=Ge=>{const at=w?.slice();at.splice(Ge,1),J(at)},We=(Ge,at,ot)=>{let ft=w?.slice()??[];ft[Ge][at]=ot,J(ft)};return P.createElement(P.Fragment,null,w?.map((Ge,at)=>P.createElement("div",{className:pe.section,key:at},P.createElement(ll.b,{context:le,value:Ge.field??"",onChange:ot=>{We(at,"field",ot)},item:{settings:{filter:ot=>ot.name.includes("arc__")},id:`arc-field-${at}`,name:`arc-field-${at}`}}),P.createElement(il.zH,{color:Ge.color||"#808080",onChange:ot=>{We(at,"color",ot)}}),P.createElement(te.zx,{size:"sm",icon:"minus",variant:"secondary",onClick:()=>Re(at),title:"Remove arc"}))),P.createElement(te.zx,{size:"sm",icon:"plus",onClick:Se,variant:"secondary"},"Add arc"))},lf=()=>({section:(0,k.css)`
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0 8px;
      margin-bottom: 8px;
    `}),cl=new N.c(ol).setPanelOptions((w,J)=>{w.addNestedOptions({category:["Nodes"],path:"nodes",build:le=>{le.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),le.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"}),le.addCustomEditor({name:"Arc sections",path:"arcs",id:"arcs",editor:lc})}}),w.addNestedOptions({category:["Edges"],path:"edges",build:le=>{le.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),le.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"})}})});var Td=e(98068),Od=e(39836),cf=e(92528),df=e(68748),uf=e(10994),Id=e(49739),cc=e(88483),mf=e(45386),dc=e(19737),ff=e(15324),uc=e(68847);let gf=0;const hf=()=>gf++;function Rd(w){const J=(0,P.useRef)(null);return J.current===null&&(J.current=w+hf()),J.current.toString()}var to=(w=>(w.Donut="donut",w.Pie="pie",w))(to||{}),Rr=(w=>(w.Name="name",w.Percent="percent",w.Value="value",w))(Rr||{}),Eo=(w=>(w.Percent="percent",w.Value="value",w))(Eo||{});const hp={values:[]},mc={displayLabels:[]};function Ad(w){return!w.field.custom?.hideFrom?.viz&&!isNaN(w.display.numeric)}function Ld(w,J){return J.display.numeric+w}const pf=({fieldDisplayValues:w,pieType:J,width:le,height:pe,highlightedTitle:Se,displayLabels:Re=[],tooltipOptions:We})=>{const Ge=(0,X.l4)(),at=Rd("PieChart"),ot=(0,X.wW)(vc),ft=(0,cc.Z)(),{containerRef:ht,TooltipInPortal:wt}=(0,mf.Z)({detectBounds:!0,scroll:!0}),Et=w.filter(Ad),At=kt=>kt.display.numeric,zt=kt=>`${at}-${(0,dc.Z)(kt).toHex()}`,Rt=kt=>`url(#${zt(kt)})`,Tt=Re.length>0,_t=We.mode!=="none"&&ft.tooltipOpen,Jt=Et.reduce(Ld,0),Ht=gc(le,pe,J),fn=[...new Set(Et.map(kt=>kt.display.color??is.R))];return P.createElement("div",{className:ot.container},P.createElement("svg",{width:Ht.size,height:Ht.size,ref:ht,style:{overflow:"visible"}},P.createElement(uf.Z,{top:Ht.position,left:Ht.position},fn.map(kt=>P.createElement(df.Z,{key:kt,id:zt(kt),from:wd(kt,Ge),to:vp(kt,Ge),fromOffset:Ht.gradientFromOffset,toOffset:"1",gradientUnits:"userSpaceOnUse",cx:0,cy:0,radius:Ht.outerRadius})),P.createElement(Id.Z,{data:Et,pieValue:At,outerRadius:Ht.outerRadius,innerRadius:Ht.innerRadius,cornerRadius:3,padAngle:.005},kt=>P.createElement(P.Fragment,null,kt.arcs.map(gn=>{const cn=gn.data.display.color??is.R,tn=hc(Se,gn);return gn.data.hasLinks&&gn.data.getLinks?P.createElement(ff.V,{key:gn.index,links:gn.data.getLinks},pn=>P.createElement(fc,{tooltip:ft,highlightState:tn,arc:gn,pie:kt,fill:Rt(cn),openMenu:pn.openMenu,tooltipOptions:We})):P.createElement(fc,{key:gn.index,highlightState:tn,tooltip:ft,arc:gn,pie:kt,fill:Rt(cn),tooltipOptions:We})}),Tt&&kt.arcs.map(gn=>{const cn=hc(Se,gn);return P.createElement(Bd,{arc:gn,key:gn.index,highlightState:cn,outerRadius:Ht.outerRadius,innerRadius:Ht.innerRadius,displayLabels:Re,total:Jt,color:Ge.colors.text.primary})}))))),_t?P.createElement(wt,{key:Math.random(),top:ft.tooltipTop,className:ot.tooltipPortal,left:ft.tooltipLeft,unstyled:!0,applyPositionStyle:!0},P.createElement(uc.c,{series:ft.tooltipData})):null)};function fc({arc:w,pie:J,highlightState:le,openMenu:pe,fill:Se,tooltip:Re,tooltipOptions:We}){const Ge=(0,X.l4)(),at=(0,X.wW)(vc),{eventBus:ot}=(0,St.R9)(),ft=(0,P.useCallback)(Et=>{ot?.publish({type:za.xH.type,payload:{raw:Et,x:0,y:0,dataId:w.data.display.title}}),Re.hideTooltip()},[ot,w,Re]),ht=(0,P.useCallback)(Et=>{ot?.publish({type:za.es.type,payload:{raw:Et,x:0,y:0,dataId:w.data.display.title}});const At=Et.currentTarget.ownerSVGElement;if(At){const zt=(0,cf.Z)(At,Et);Re.showTooltip({tooltipLeft:zt.x,tooltipTop:zt.y,tooltipData:vf(J,w,We)})}},[ot,w,Re,J,We]),wt=pc(le,at);return P.createElement("g",{key:w.data.display.title,className:wt,onMouseMove:We.mode!=="none"?ht:void 0,onMouseOut:ft,onClick:pe,"aria-label":He.wl.components.Panels.Visualization.PieChart.svgSlice},P.createElement("path",{d:J.path({...w}),fill:Se,stroke:Ge.colors.background.primary,strokeWidth:1}))}function Bd({arc:w,outerRadius:J,innerRadius:le,displayLabels:pe,total:Se,color:Re,highlightState:We}){const Ge=(0,X.wW)(vc),at=le===0?J/6:le,[ot,ft]=pp(w,J,at);if(!(w.endAngle-w.startAngle>=.3))return null;let wt=pe.includes(Rr.Name)?Math.min(Math.max(J/150*14,12),30):Math.min(Math.max(J/100*14,12),36);return P.createElement("g",{className:pc(We,Ge)},P.createElement("text",{fill:Re,x:ot,y:ft,dy:".33em",fontSize:wt,fontWeight:500,textAnchor:"middle",pointerEvents:"none"},pe.includes(Rr.Name)&&P.createElement("tspan",{x:ot,dy:"1.2em"},w.data.display.title),pe.includes(Rr.Value)&&P.createElement("tspan",{x:ot,dy:"1.2em"},(0,cs.zc)(w.data.display)),pe.includes(Rr.Percent)&&P.createElement("tspan",{x:ot,dy:"1.2em"},(w.data.display.numeric/Se*100).toFixed(w.data.field.decimals??0)+"%")))}function vf(w,J,le){return le.mode==="multi"?w.arcs.filter(pe=>{const Se=pe.data.field;return Se&&!Se.custom?.hideFrom?.tooltip&&!Se.custom?.hideFrom?.viz}).map(pe=>({color:pe.data.display.color??is.R,label:pe.data.display.title,value:(0,cs.zc)(pe.data.display),isActive:pe.index===J.index})):[{color:J.data.display.color??is.R,label:J.data.display.title,value:(0,cs.zc)(J.data.display)}]}function pp(w,J,le){const pe=(J+le)/2,Se=(+w.startAngle+ +w.endAngle)/2-Math.PI/2;return[Math.cos(Se)*pe,Math.sin(Se)*pe]}function wd(w,J){return(0,dc.Z)(w).darken(20*(J.isDark?1:-.7)).spin(4).toRgbString()}function vp(w,J){return(0,dc.Z)(w).darken(10*(J.isDark?1:-.7)).spin(-4).toRgbString()}function gc(w,J,le,pe=16){const Se=Math.min(J,w),Re=(Se-pe*2)/2,We=le===to.Pie?Re:Math.max(Re/3,20),Ge=Re-We,at=(Se-pe*2)/2,ot=1-(Re-Ge)/Re;return{position:at+pe,size:Se,outerRadius:Re,innerRadius:Ge,gradientFromOffset:ot}}var dl=(w=>(w[w.Highlighted=0]="Highlighted",w[w.Deemphasized=1]="Deemphasized",w[w.Normal=2]="Normal",w))(dl||{});function hc(w,J){return w?w===J.data.display.title?0:1:2}function pc(w,J){switch(w){case 0:return J.svgArg.highlighted;case 1:return J.svgArg.deemphasized;case 2:default:return J.svgArg.normal}}const vc=w=>({container:(0,k.css)`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,svgArg:{normal:(0,k.css)`
        transition: all 200ms ease-in-out;
      `,highlighted:(0,k.css)`
        transition: all 200ms ease-in-out;
        transform: scale3d(1.03, 1.03, 1);
      `,deemphasized:(0,k.css)`
        transition: all 200ms ease-in-out;
        fill-opacity: 0.5;
      `},tooltipPortal:(0,k.css)`
      ${(0,xa.getTooltipContainerStyles)(w)}
    `}),ul={displayMode:Mt.jK.List,showLegend:!0,placement:"right",calcs:[],values:[Eo.Percent]};function Ud(w){const{data:J,timeZone:le,fieldConfig:pe,replaceVariables:Se,width:Re,height:We,options:Ge,id:at}=w,ot=(0,X.l4)(),ft=yf(),ht=(0,Td.nG)({fieldConfig:pe,reduceOptions:Ge.reduceOptions,data:J.series,theme:ot,replaceVariables:Se,timeZone:le});return Nd(ht)?P.createElement(sn.AY,{width:Re,height:We,legend:Ef(w,ht)},(wt,Et)=>P.createElement(pf,{width:wt,height:Et,highlightedTitle:ft,fieldDisplayValues:ht,tooltipOptions:Ge.tooltip,pieType:Ge.pieType,displayLabels:Ge.displayLabels})):P.createElement(xt.Z,{panelId:at,fieldConfig:pe,data:J})}function Ef(w,J){const le=w.options.legend??ul;if(le.showLegend===!1)return;const pe=J.filter(Ad).reduce(Ld,0),Se=J.sort((Re,We)=>isNaN(Re.display.numeric)?1:isNaN(We.display.numeric)?-1:We.display.numeric-Re.display.numeric).map((Re,We)=>{const Ge=Re.field.custom?.hideFrom??{};if(Ge.legend)return;const at=!!Ge.viz,ot=Re.display;return{label:ot.title??"",color:ot.color??is.R,yAxis:1,disabled:at,getItemKey:()=>(ot.title??"")+We,getDisplayValues:()=>{const ft=le.values??[];let ht=[];if(ft.includes(Eo.Value)&&ht.push({numeric:ot.numeric,text:(0,cs.zc)(ot),title:"Value"}),ft.includes(Eo.Percent)){const wt=at?0:ot.numeric/pe,Et=wt*100;ht.push({numeric:wt,percent:Et,text:at||isNaN(wt)?w.fieldConfig.defaults.noValue??"-":Et.toFixed(Re.field.decimals??0)+"%",title:ft.length>1?"Percent":""})}return ht}}}).filter(Re=>!!Re);return P.createElement(sn.AY.Legend,{placement:le.placement,width:le.width},P.createElement(bn.l,{items:Se,seriesVisibilityChangeBehavior:Od.Y.Hide,placement:le.placement,displayMode:le.displayMode}))}function Nd(w){return w.some(J=>J.view?.dataFrame.length)}function yf(){const[w,J]=(0,P.useState)(),{eventBus:le}=(0,St.R9)();return(0,P.useEffect)(()=>{const pe=We=>{J(We.payload.dataId)},Se=We=>{J(void 0)},Re=new zs.w0;return Re.add(le.getStream(za.es).subscribe({next:pe})),Re.add(le.getStream(za.xH).subscribe({next:Se})),()=>{Re.unsubscribe()}},[J,le]),w}const Wd=(w,J,le)=>{if(J==="grafana-piechart-panel"&&le.angular){const pe=le.angular,Se=[];let Re=w.options;if(pe.aliasColors)for(const We of Object.keys(pe.aliasColors)){const Ge=pe.aliasColors[We];Ge&&Se.push({matcher:{id:po.mi.byName,options:We},properties:[{id:Ms.qb.Color,value:{mode:is.S.Fixed,fixedColor:Ge}}]})}if(w.fieldConfig={overrides:Se,defaults:{unit:pe.format,decimals:pe.decimals?pe.decimals:0}},Re.legend={placement:"right",values:[],displayMode:Mt.jK.Table,showLegend:!0,calcs:[]},pe.valueName)switch(Re.reduceOptions={calcs:[]},pe.valueName){case"current":Re.reduceOptions.calcs=["lastNotNull"];break;case"min":Re.reduceOptions.calcs=["min"];break;case"max":Re.reduceOptions.calcs=["max"];break;case"avg":Re.reduceOptions.calcs=["mean"];break;case"total":Re.reduceOptions.calcs=["sum"];break}switch(pe.legendType){case"Under graph":Re.legend.placement="bottom";break;case"Right side":Re.legend.placement="right";break}switch(pe.pieType){case"pie":Re.pieType=to.Pie;break;case"donut":Re.pieType=to.Donut;break}return pe.legend&&(pe.legend.show||(Re.legend.showLegend=!1),pe.legend.values&&Re.legend.values.push(Eo.Value),pe.legend.percentage&&Re.legend.values.push(Eo.Percent)),pe.legendType==="On graph"&&(Re.legend.showLegend=!1,Re.displayLabels=[Rr.Name],pe.legend.values&&Re.displayLabels.push(Rr.Value),pe.legend.percentage&&Re.displayLabels.push(Rr.Percent)),Re}return{}};class Ec{getSuggestionsForData(J){const le=J.getListAppender({name:Ha.y.PieChart,pluginId:"piechart",options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},displayLabels:[Rr.Percent],legend:{calcs:[],displayMode:Mt.jK.Hidden,placement:"right",values:[],showLegend:!1}}}),{dataSummary:pe}=J;if(pe.hasNumberField){if(pe.hasStringField&&pe.frameCount===1){if(pe.rowCountTotal>30||pe.rowCountTotal<2)return;le.append({name:Ha.y.PieChart,options:{reduceOptions:{values:!0,calcs:[]}}}),le.append({name:Ha.y.PieChartDonut,options:{reduceOptions:{values:!0,calcs:[]},pieType:to.Donut}});return}pe.numberFieldCount>30||pe.numberFieldCount<2||(le.append({name:Ha.y.PieChart}),le.append({name:Ha.y.PieChartDonut,options:{pieType:to.Donut}}))}}}const bf=new N.c(Ud).setPanelChangeHandler(Wd).useFieldConfig({disableStandardOptions:[Ms.qb.Thresholds],standardOptions:{[Ms.qb.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:is.S.PaletteClassic}}},useCustomConfig:w=>{dr.B(w)}}).setPanelOptions(w=>{(0,uo.j)(w),w.addRadio({name:"Piechart type",description:"How the piechart should be rendered",path:"pieType",settings:{options:[{value:to.Pie,label:"Pie"},{value:to.Donut,label:"Donut"}]},defaultValue:to.Pie}).addMultiSelect({name:"Labels",path:"displayLabels",description:"Select the labels to be displayed in the pie chart",settings:{options:[{value:Rr.Percent,label:"Percent"},{value:Rr.Name,label:"Name"},{value:Rr.Value,label:"Value"}]}}),Wr.L(w),ur.J(w,!1),w.addMultiSelect({name:"Legend values",path:"legend.values",category:["Legend"],settings:{options:[{value:Eo.Percent,label:"Percent"},{value:Eo.Value,label:"Value"}]},showIf:J=>J.legend.showLegend!==!1})}).setSuggestionsSupplier(new Ec);var ml=e(44293),$o=e(70555),ei=e(4586),fl=e(99532);const Fd=({data:w,alignedData:J,seriesIdx:le,datapointIdx:pe,timeZone:Se,onAnnotationAdd:Re})=>{const We=(0,X.l4)();if(!w||pe==null)return null;const Ge=J.fields[le],at=[],ot=new Set;if(Ge.getLinks){const kt=Ge.values[pe],gn=Ge.display?Ge.display(kt):{text:`${kt}`,numeric:+kt};Ge.getLinks({calculatedValue:gn,valueRowIndex:pe}).forEach(cn=>{const tn=`${cn.title}/${cn.href}`;ot.has(tn)||(at.push(cn),ot.add(tn))})}const ft=J.fields[0],ht=ft.display||(0,hs.U)({field:ft,timeZone:Se,theme:We}),wt=Ge.state?.origin,Et=Ge.display||(0,hs.U)({field:Ge,timeZone:Se,theme:We}),At=Ge.values[pe],zt=Et(At),Rt=wt?(0,Na.CZ)(w[wt.frameIndex].fields[wt.fieldIndex],w[wt.frameIndex],w):null,Tt=(0,Ja.iK)(Ge,pe);let _t;Tt&&(_t=ft.values[Tt]);const Jt=ft.values[pe];let Ht=null,fn=null;if(_t){const kt=_t&&(0,Ja.Y)(_t-Jt);fn=P.createElement(P.Fragment,null,P.createElement("br",null),P.createElement("strong",null,"Duration:")," ",kt),Ht=P.createElement(P.Fragment,null," to"," ",P.createElement("strong",null,ht(ft.values[Tt]).text))}return P.createElement("div",null,P.createElement("div",{style:{fontSize:We.typography.bodySmall.fontSize}},Rt,P.createElement("br",null),P.createElement(uc.V,{label:zt.text,color:zt.color||is.R,isActive:!0}),"From ",P.createElement("strong",null,ht(ft.values[pe]).text),Ht,fn),P.createElement("div",{style:{margin:We.spacing(1,-1,-1,-1),borderTop:`1px solid ${We.colors.border.weak}`}},Re&&P.createElement(Qa.s,{label:"Add annotation",icon:"comment-alt",onClick:Re}),at.length>0&&at.map((kt,gn)=>P.createElement(Qa.s,{key:gn,icon:"external-link-alt",target:kt.target,label:kt.title,url:kt.href,onClick:kt.onClick}))))};Fd.displayName="StateTimelineTooltip";const gl=10,Df=({data:w,timeRange:J,timeZone:le,options:pe,width:Se,height:Re,replaceVariables:We,onChangeTimeRange:Ge})=>{const at=(0,X.l4)(),ot=(0,P.useRef)(void 0),ft=(0,P.useRef)(!1),[ht,wt]=(0,P.useState)(void 0),[Et,At]=(0,P.useState)(null),[zt,Rt]=(0,P.useState)(null),[Tt,_t]=(0,P.useState)(null),[Jt,Ht]=(0,P.useState)(!1),[fn,kt]=(0,P.useState)(!1),{sync:gn,canAddAnnotations:cn}=(0,St.R9)(),tn=()=>{ft.current=!1,At(null),kt(!1)},pn=()=>{ft.current=!ft.current,kt(ft.current)},{frames:dn,warn:Un}=(0,P.useMemo)(()=>(0,Ja.AR)(w.series,pe.mergeValues??!0,J,at),[w.series,pe.mergeValues,J,at]),qn=(0,P.useMemo)(()=>(0,Ja.SA)(dn,pe.legend,at),[dn,pe.legend,at]),Fn=(0,P.useMemo)(()=>zr(pe.timezone,le),[pe.timezone,le]),Tn=(0,P.useCallback)((ia,Ga,Za,Va)=>{const _a=dn??[],da=_a.reduce((Rn,Jn)=>Rn+Jn.fields.filter(ea=>ea.type!==zn.fS.time).length,0);return Ga===null||Za===null||!ia.meta?.transformations?.length&&ia.fields.length-1!==da||!ia.fields[Ga]?null:P.createElement(P.Fragment,null,fn&&P.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},P.createElement(Oa.P,{onClick:tn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),P.createElement(Fd,{data:_a,alignedData:ia,seriesIdx:Ga,datapointIdx:Za,timeZone:le,onAnnotationAdd:Va}))},[le,dn,fn]);if(!dn||Un)return P.createElement("div",{className:"panel-empty"},P.createElement("p",null,Un??"No data found in response"));if(dn.length===1){const ia=(0,Ed.MB)(dn[0])}const sa=!!(cn&&cn());return P.createElement(fl.K,{theme:at,frames:dn,structureRev:w.structureRev,timeRange:J,timeZone:Fn,width:Se,height:Re,legendItems:qn,...pe,mode:Ja.KN.Changes},(ia,Ga)=>(ot.current!==ia&&(ot.current=ra({config:ia,onUPlotClick:pn,setFocusedSeriesIdx:Rt,setFocusedPointIdx:_t,setCoords:At,setHover:wt,isToolTipOpen:ft,isActive:Jt,setIsActive:Ht,sync:gn})),P.createElement(P.Fragment,null,P.createElement(Yo.R,{config:ia,onZoom:Ge}),P.createElement(_r,{config:ia,onChangeTimeRange:Ge}),w.annotations&&P.createElement(Rs,{annotations:w.annotations,config:ia,timeZone:le}),sa?P.createElement(Hn,{data:Ga,timeZone:le,config:ia},({startAnnotating:Za})=>pe.tooltip.mode===Mt.f3.None||Tt===null||!Jt&&gn&&gn()===Sa.m.Crosshair?null:P.createElement(_n.h_,null,ht&&Et&&zt&&P.createElement(jn.S,{position:{x:Et.viewport.x,y:Et.viewport.y},offset:{x:gl,y:gl},allowPointerEvents:ft.current},Tn(Ga,zt,Tt,()=>{Za({coords:{plotCanvas:Et.canvas,viewport:Et.viewport}}),tn()})))):P.createElement(_n.h_,null,pe.tooltip.mode!==Mt.f3.None&&ht&&Et&&P.createElement(jn.S,{position:{x:Et.viewport.x,y:Et.viewport.y},offset:{x:gl,y:gl},allowPointerEvents:ft.current},Tn(Ga,zt,Tt))))))};var Kd=e(43626);const Cf=(w,J,le)=>{let pe=w.options??{};if(J==="natel-discrete-panel"&&le.angular){const Se=le.angular,Re=w.fieldConfig??{defaults:{},overrides:[]};Se.units&&(Re.defaults.unit=Se.units);const We={fillOpacity:100,lineWidth:0};Re.defaults.custom=We,pe.mergeValues=!0;const Ge={type:Kd.H.ValueToText,options:{}};if(Re.defaults.mappings=[Ge],(0,ne.isArray)(Se.colorMaps))for(const at of Se.colorMaps){const ot=at.color;ot&&(Ge.options[at.text]={color:ot})}if((0,ne.isArray)(Se.valueMaps))for(const at of Se.valueMaps){const ot=at.text,ft=at.value;if(ot&&ft){let ht=Ge.options[ft];ht?ht.text=ot:Ge.options[ft]={text:ot}}}if((0,ne.isArray)(Se.rangeMaps))for(const at of Se.rangeMaps){let ot=+at.from,ft=+at.to;const ht=at.text;ht&&Re.defaults.mappings.push({type:Kd.H.RangeToText,options:{from:ot,to:ft,result:{text:ht}}})}w.fieldConfig=Re}return pe},hl={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:Mt.Jp.Auto},jr={fillOpacity:70,lineWidth:0};class Vd{getSuggestionsForData(J){const{dataSummary:le}=J;if(!le.hasData||!le.hasTimeField||!le.hasStringField&&!le.hasNumberField||le.numberFieldCount>=30||le.preferredVisualisationType==="logs")return;J.getListAppender({name:"",pluginId:"state-timeline",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:Ha.y.StateTimeline})}}const _d=new N.c(Df).setPanelChangeHandler(Cf).useFieldConfig({standardOptions:{[Ms.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:is.S.ContinuousGrYlRd}}},useCustomConfig:w=>{w.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:jr.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:jr.fillOpacity,settings:{min:0,max:100,step:1}}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",defaultValue:!1,editor:ei.c,override:ei.c,shouldApply:J=>J.type!==zn.fS.time,process:ao.kG,settings:{isTime:!0}}).addCustomEditor({id:"insertNulls",path:"insertNulls",name:"Disconnect values",defaultValue:!1,editor:$o.M,override:$o.M,shouldApply:J=>J.type!==zn.fS.time,process:ao.kG,settings:{isTime:!0}}),dr.B(w)}}).setPanelOptions(w=>{w.addBooleanSwitch({path:"mergeValues",name:"Merge equal consecutive values",defaultValue:hl.mergeValues}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Mt.Jp.Auto,label:"Auto"},{value:Mt.Jp.Always,label:"Always"},{value:Mt.Jp.Never,label:"Never"}]},defaultValue:hl.showValue}).addRadio({path:"alignValue",name:"Align values",settings:{options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},defaultValue:hl.alignValue}).addSliderInput({path:"rowHeight",name:"Row height",settings:{min:0,max:1,step:.01},defaultValue:hl.rowHeight}),ur.J(w,!1),Wr.L(w,!0)}).setSuggestionsSupplier(new Vd).setDataSupport({annotations:!0});var Wi=e(25690);const $d=({data:w,alignedData:J,seriesIdx:le,datapointIdx:pe,timeZone:Se})=>{const Re=(0,X.l4)();if(!w||pe==null)return null;const We=J.fields[le],Ge=[],at=new Set;if(We.getLinks){const Rt=We.values[pe],Tt=We.display?We.display(Rt):{text:`${Rt}`,numeric:+Rt};We.getLinks({calculatedValue:Tt,valueRowIndex:pe}).forEach(_t=>{const Jt=`${_t.title}/${_t.href}`;at.has(Jt)||(Ge.push(_t),at.add(Jt))})}const ot=J.fields[0],ft=ot.display||(0,hs.U)({field:ot,timeZone:Se,theme:Re}),ht=We.state?.origin,wt=We.display||(0,hs.U)({field:We,timeZone:Se,theme:Re}),Et=We.values[pe],At=wt(Et),zt=ht?(0,Na.CZ)(w[ht.frameIndex].fields[ht.fieldIndex],w[ht.frameIndex],w):null;return P.createElement("div",null,P.createElement("div",{style:{fontSize:Re.typography.bodySmall.fontSize}},P.createElement("strong",null,ft(ot.values[pe]).text),P.createElement("br",null),P.createElement(uc.V,{label:At.text,color:At.color||is.R,isActive:!0}),zt),Ge.length>0&&P.createElement("div",{style:{margin:Re.spacing(1,-1,-1,-1),borderTop:`1px solid ${Re.colors.border.weak}`}},Ge.map((Rt,Tt)=>P.createElement(Qa.s,{key:Tt,icon:"external-link-alt",target:Rt.target,label:Rt.title,url:Rt.href,onClick:Rt.onClick}))))};$d.displayName="StatusHistoryTooltip";var zd=e(8898),Pf=e(27110),kd=e(1164),pl=e(49404),Fi=e(1122);const Sf=(w,J)=>{const le=[],pe=new Set;if(w.getLinks){const Se=w.values[J],Re=w.display?w.display(Se):{text:`${Se}`,numeric:+Se};w.getLinks({calculatedValue:Re,valueRowIndex:J}).forEach(We=>{const Ge=`${We.title}/${We.href}`;pe.has(Ge)||(le.push(We),pe.add(Ge))})}return le};function yc(w,J){return w.display?(0,cs.zc)(w.display(J)):`${J}`}const xf=({data:w,dataIdxs:J,alignedData:le,seriesIdx:pe,mode:Se=Mt.f3.Single,sortOrder:Re=Mt.As.None,isPinned:We})=>{const Ge=(0,X.wW)(Mf),at=J.find(At=>At!==void 0);if(!w||at==null)return null;let ot=[];const ft=le.fields[0];let ht=[];if(Se===Mt.f3.Single||We){const At=le.fields[pe];ht=Sf(At,at);const zt=At.display||(0,hs.U)(),Rt=At.values[at],Tt=zt(Rt);ot=[{label:(0,Na.CZ)(At),value:yc(At,At.values[at]),color:Tt.color,colorIndicator:Fi.F.value,colorPlacement:Fi.Z.trailing}]}if(Se===Mt.f3.Multi&&!We){const At=le,zt=At.fields,Rt=[];for(let Tt=0;Tt<zt.length;Tt++){const _t=At.fields[Tt];if(!_t||_t===ft||_t.type===zn.fS.time||_t.config.custom?.hideFrom?.tooltip||_t.config.custom?.hideFrom?.viz)continue;const Jt=_t.display||(0,hs.U)(),Ht=_t.values[at],fn=Jt(Ht);Rt.push(Ht),ot.push({label:(0,Na.CZ)(_t),value:yc(_t,_t.values[at]),color:fn.color,colorIndicator:Fi.F.value,colorPlacement:Fi.Z.trailing,isActive:pe===Tt})}if(Re!==Mt.As.None){const Tt=[...ot],_t=zd.sortValues(Re);ot.sort((Jt,Ht)=>{const fn=Tt.indexOf(Jt),kt=Tt.indexOf(Ht);return _t(Rt[fn],Rt[kt])})}}const wt=()=>({label:"",value:yc(ft,ft.values[at])}),Et=()=>ot;return P.createElement("div",{className:Ge.wrapper},P.createElement(pl.r,{headerLabel:wt()}),P.createElement(Pf.X,{contentLabelValue:Et()}),We&&P.createElement(kd.c,{dataLinks:ht,canAnnotate:!1}))},Mf=w=>({wrapper:(0,k.css)({display:"flex",flexDirection:"column",width:"280px"})}),Hd=10,Gd=({data:w,timeRange:J,timeZone:le,options:pe,width:Se,height:Re,onChangeTimeRange:We})=>{const Ge=(0,X.l4)(),at=(0,P.useRef)(void 0),ot=(0,P.useRef)(!1),[ft,ht]=(0,P.useState)(void 0),[wt,Et]=(0,P.useState)(null),[At,zt]=(0,P.useState)(null),[Rt,Tt]=(0,P.useState)(null),[_t,Jt]=(0,P.useState)(!1),[Ht,fn]=(0,P.useState)(!1),{sync:kt}=(0,St.R9)(),gn=()=>{ot.current=!1,Et(null),fn(!1)},cn=()=>{ot.current=!ot.current,fn(ot.current)},{frames:tn,warn:pn}=(0,P.useMemo)(()=>(0,Ja.AR)(w.series,!1,J,Ge),[w.series,J,Ge]),dn=(0,P.useMemo)(()=>(0,Ja.SA)(tn,pe.legend,Ge),[tn,pe.legend,Ge]),Un=(0,P.useCallback)((Tn,sa,ia)=>{const Ga=tn??[],Za=Ga.reduce((Va,_a)=>Va+_a.fields.filter(da=>da.type!==zn.fS.time).length,0);return sa===null||ia===null||!Tn.meta?.transformations?.length&&Tn.fields.length-1!==Za||!Tn.fields[sa]?null:P.createElement(P.Fragment,null,Ht&&P.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},P.createElement(Oa.P,{onClick:gn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),P.createElement($d,{data:Ga,alignedData:Tn,seriesIdx:sa,datapointIdx:ia,timeZone:le}))},[le,tn,Ht]),qn=Tn=>pe.tooltip.mode===Mt.f3.None||Rt===null||!_t&&kt&&kt()===Sa.m.Crosshair?null:P.createElement(_n.h_,null,ft&&wt&&At&&P.createElement(jn.S,{position:{x:wt.viewport.x,y:wt.viewport.y},offset:{x:Hd,y:Hd},allowPointerEvents:ot.current},Un(Tn,At,Rt))),Fn=(0,P.useMemo)(()=>zr(pe.timezone,le),[pe.timezone,le]);return!tn||pn?P.createElement("div",{className:"panel-empty"},P.createElement("p",null,pn??"No data found in response")):tn[0].length>Se/2?P.createElement("div",{className:"panel-empty"},P.createElement("p",null,"Too many points to visualize properly. ",P.createElement("br",null),"Update the query to return fewer points. ",P.createElement("br",null),"(",tn[0].length," points received)")):P.createElement(fl.K,{theme:Ge,frames:tn,structureRev:w.structureRev,timeRange:J,timeZone:Fn,width:Se,height:Re,legendItems:dn,...pe,mode:Ja.KN.Samples},(Tn,sa)=>(at.current!==Tn&&(at.current=ra({config:Tn,onUPlotClick:cn,setFocusedSeriesIdx:zt,setFocusedPointIdx:Tt,setCoords:Et,setHover:ht,isToolTipOpen:ot,isActive:_t,setIsActive:Jt})),U.config.featureToggles.newVizTooltips?P.createElement(P.Fragment,null,pe.tooltip.mode!==Mt.f3.None&&P.createElement(Wi.x,{config:Tn,hoverMode:Wi.c.xyOne,queryZoom:We,render:(ia,Ga,Za,Va,_a)=>P.createElement(xf,{data:tn??[],dataIdxs:Ga,alignedData:sa,seriesIdx:Za,timeZone:le,mode:pe.tooltip.mode,sortOrder:pe.tooltip.sort,isPinned:Va})})):P.createElement(P.Fragment,null,P.createElement(Yo.R,{config:Tn,onZoom:We}),qn(sa),P.createElement(_r,{config:Tn,onChangeTimeRange:We}))))},Ep={colWidth:.9,rowHeight:.9,showValue:Mt.Jp.Auto},jd={fillOpacity:70,lineWidth:1};class Tf{getSuggestionsForData(J){const{dataSummary:le}=J;if(!le.hasData||!le.hasTimeField||!le.hasStringField&&!le.hasNumberField||le.numberFieldCount>=30||le.rowCountMax>100||le.preferredVisualisationType==="logs")return;J.getListAppender({name:"",pluginId:"status-history",options:{},fieldConfig:{defaults:{color:{mode:is.S.ContinuousGrYlRd},custom:{}},overrides:[]},cardOptions:{previewModifier:Se=>{Se.options.colWidth=.7}}}).append({name:Ha.y.StatusHistory})}}const Qd=new N.c(Gd).useFieldConfig({standardOptions:{[Ms.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:is.S.Thresholds}}},useCustomConfig:w=>{w.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:jd.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:jd.fillOpacity,settings:{min:0,max:100,step:1}}),dr.B(w)}}).setPanelOptions(w=>{w.addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Mt.Jp.Auto,label:"Auto"},{value:Mt.Jp.Always,label:"Always"},{value:Mt.Jp.Never,label:"Never"}]},defaultValue:Mt.Jp.Auto}).addSliderInput({path:"rowHeight",name:"Row height",defaultValue:.9,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"colWidth",name:"Column width",defaultValue:.9,settings:{min:0,max:1,step:.01}}),ur.J(w,!1),Wr.L(w,!U.config.featureToggles.newVizTooltips)}).setSuggestionsSupplier(new Tf);var bc=e(88008),vi=e(54881),Of=e(5999);function If({onChange:w,value:J,context:le}){const pe=Se=>{Se?.currentTarget.checked&&(le.options.footer.show=!1),w(Se?.currentTarget.checked)};return P.createElement(Of.r,{value:!!J,onChange:pe})}function Yd({cellOptions:w,onChange:J}){const le=Se=>{w.mode=Se,J(w)},pe=Se=>{w.valueDisplayMode=Se,J(w)};return P.createElement(ct.K,{direction:"column",gap:0},P.createElement(Ct.g,{label:"Gauge display mode"},P.createElement(ci.S,{value:w?.mode??Mt.QH.Gradient,onChange:le,options:Rf})),P.createElement(Ct.g,{label:"Value display"},P.createElement(ci.S,{value:w?.valueDisplayMode??Mt.M8.Text,onChange:pe,options:Dc})))}const Rf=[{value:Mt.QH.Basic,label:"Basic"},{value:Mt.QH.Gradient,label:"Gradient"},{value:Mt.QH.Lcd,label:"Retro LCD"}],Dc=[{value:Mt.M8.Color,label:"Value color"},{value:Mt.M8.Text,label:"Text color"},{value:Mt.M8.Hidden,label:"Hidden"}],Zd=[{value:Mt.v7.Basic,label:"Basic"},{value:Mt.v7.Gradient,label:"Gradient"}],Af=({cellOptions:w,onChange:J})=>{const le=pe=>{w.mode=pe,J(w)};return P.createElement(Ct.g,{label:"Background display mode"},P.createElement(ci.S,{value:w?.mode??Mt.v7.Gradient,onChange:le,options:Zd}))};var Jd=e(13708),Xd=e(75561);const Lf=["hideValue","drawStyle","lineInterpolation","barAlignment","lineWidth","fillOpacity","gradientMode","lineStyle","spanNulls","showPoints","pointSize"];function Bf(w){const J=(0,br.F)(w);return{...J,useCustomConfig:le=>{J.useCustomConfig?.(le),le.addBooleanSwitch({path:"hideValue",name:"Hide value"})}}}const wf=w=>{const{cellOptions:J,onChange:le}=w,pe=(0,P.useMemo)(()=>{const We=Bf(Xd.U);return(0,Jd.j)(We,"ChartCell")},[]),Se=(0,X.wW)(Pc),Re={...Xd.U,...J};return P.createElement(so.wc,null,pe.list(Lf.map(We=>`custom.${We}`)).map(We=>{if(We.showIf&&!We.showIf(Re))return null;const Ge=We.editor,at=We.path;return P.createElement(Ct.g,{label:We.name,key:We.id,className:Se.field},P.createElement(Ge,{onChange:ot=>le({...J,[at]:ot}),value:(Cc(at,Re)?Re[at]:void 0)??We.defaultValue,item:We,context:{data:[]}}))}))};function Cc(w,J){return w in J}const Pc=()=>({field:(0,k.css)`
    width: 100%;

    // @TODO don't show "scheme" option for custom gradient mode.
    // it needs thresholds to work, which are not supported
    // for area chart cell right now
    [title='Use color scheme to define gradient'] {
      display: none;
    }
  `}),qd=({value:w,onChange:J})=>{const le=w.type,pe=(0,X.wW)(Uf),Se=eu.find(ot=>ot.value.type===le);let[Re,We]=(0,P.useState)({});const Ge=ot=>{ot.value!==void 0&&(w=ot.value,Re[w.type]!==void 0&&Object.keys(Re[w.type]).length>1&&(w=(0,ne.merge)(w,Re[w.type])),J(w))},at=ot=>{Re[w.type]=(0,ne.merge)(w,ot),We(Re),J(Re[w.type])};return P.createElement("div",{className:pe.fixBottomMargin},P.createElement(Ct.g,null,P.createElement(De.Ph,{options:eu,value:Se,onChange:Ge})),le===Mt.h2.Gauge&&P.createElement(Yd,{cellOptions:w,onChange:at}),le===Mt.h2.ColorBackground&&P.createElement(Af,{cellOptions:w,onChange:at}),le===Mt.h2.Sparkline&&P.createElement(wf,{cellOptions:w,onChange:at}))},eu=[{value:{type:Mt.h2.Auto},label:"Auto"},{value:{type:Mt.h2.Sparkline},label:"Sparkline"},{value:{type:Mt.h2.ColorText},label:"Colored text"},{value:{type:Mt.h2.ColorBackground},label:"Colored background"},{value:{type:Mt.h2.Gauge},label:"Gauge"},{value:{type:Mt.h2.JSONView},label:"JSON View"},{value:{type:Mt.h2.Image},label:"Image"}],Uf=w=>({fixBottomMargin:(0,k.css)({marginBottom:w.spacing(-2)})}),vl={cellHeight:Mt.Ss.Sm,footer:{show:!1,countRows:!1,reducer:[]},frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]};class tu{getSuggestionsForData(J){const le=J.getListAppender({name:Ha.y.Table,pluginId:"table",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:pe=>{pe.fieldConfig.defaults.custom.minWidth=50}}});J.dataSummary.fieldCount===0?le.append({cardOptions:{imgSrc:"public/app/plugins/panel/table/img/icn-table-panel.svg"}}):le.append({})}}const El="Table footer",nu=["Cell options"],Nf=new N.c(bd).setPanelChangeHandler(_o.I0).setMigrationHandler(_o.OF).useFieldConfig({useCustomConfig:w=>{w.addNumberInput({path:"minWidth",name:"Minimum column width",description:"The minimum width for column auto resizing",settings:{placeholder:"150",min:50,max:500},shouldApply:()=>!0,defaultValue:vi.OA.minWidth}).addNumberInput({path:"width",name:"Column width",settings:{placeholder:"auto",min:20,max:300},shouldApply:()=>!0,defaultValue:vi.OA.width}).addRadio({path:"align",name:"Column alignment",settings:{options:[{label:"auto",value:"auto"},{label:"left",value:"left"},{label:"center",value:"center"},{label:"right",value:"right"}]},defaultValue:vi.OA.align}).addCustomEditor({id:"cellOptions",path:"cellOptions",name:"Cell type",editor:qd,override:qd,defaultValue:vi.OA.cellOptions,process:ao.kG,category:nu,shouldApply:()=>!0}).addBooleanSwitch({path:"inspect",name:"Cell value inspect",description:"Enable cell value inspection in a modal window",defaultValue:!1,category:nu,showIf:J=>J.cellOptions.type===Mt.h2.Auto||J.cellOptions.type===Mt.h2.JSONView||J.cellOptions.type===Mt.h2.ColorText||J.cellOptions.type===Mt.h2.ColorBackground}).addBooleanSwitch({path:"filterable",name:"Column filter",description:"Enables/disables field filters in table",defaultValue:vi.OA.filterable}).addBooleanSwitch({path:"hidden",name:"Hide in table",defaultValue:void 0,hideFromDefaults:!0})}}).setPanelOptions(w=>{w.addBooleanSwitch({path:"showHeader",name:"Show table header",defaultValue:vl.showHeader}).addRadio({path:"cellHeight",name:"Cell height",defaultValue:vl.cellHeight,settings:{options:[{value:Mt.Ss.Sm,label:"Small"},{value:Mt.Ss.Md,label:"Medium"},{value:Mt.Ss.Lg,label:"Large"}]}}).addBooleanSwitch({path:"footer.show",category:[El],name:"Show table footer",defaultValue:vl.footer?.show}).addCustomEditor({id:"footer.reducer",category:[El],path:"footer.reducer",name:"Calculation",description:"Choose a reducer function / calculation",editor:bc.S.get("stats-picker").editor,defaultValue:[Or.gz.sum],showIf:J=>J.footer?.show}).addBooleanSwitch({path:"footer.countRows",category:[El],name:"Count rows",description:"Display a single count for all data rows",defaultValue:vl.footer?.countRows,showIf:J=>J.footer?.reducer?.length===1&&J.footer?.reducer[0]===Or.gz.count}).addMultiSelect({path:"footer.fields",category:[El],name:"Fields",description:"Select the fields that should be calculated",settings:{allowCustomValue:!1,options:[],placeholder:"All Numeric Fields",getOptions:async J=>{const le=[];if(J&&J.data&&J.data.length>0){const pe=J.data[0];for(const Se of pe.fields)if(Se.type===zn.fS.number){const Re=(0,Na.CZ)(Se,pe,J.data),We=Se.name;le.push({value:We,label:Re})}}return le}},defaultValue:"",showIf:J=>J.footer?.show&&!J.footer?.countRows||J.footer?.reducer?.length===1&&J.footer?.reducer[0]!==Or.gz.count}).addCustomEditor({id:"footer.enablePagination",path:"footer.enablePagination",name:"Enable pagination",editor:If})}).setSuggestionsSupplier(new tu);var Wf=e(63812),Ff=e(27160),Kf=e(55583),or=(w=>(w.Code="code",w.HTML="html",w.Markdown="markdown",w))(or||{}),au=(w=>(w.Go="go",w.Html="html",w.Json="json",w.Markdown="markdown",w.Plaintext="plaintext",w.Sql="sql",w.Typescript="typescript",w.Xml="xml",w.Yaml="yaml",w))(au||{});const yp="plaintext",Ki={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},su={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"};function Vf(w){const J=(0,X.wW)(ru),[le,pe]=(0,P.useState)({mode:w.options.mode,content:yl(w.options,w.replaceVariables,qt.default.disableSanitizeHtml)});if((0,Ff.Z)(()=>{const{options:Se,replaceVariables:Re}=w,We=yl(Se,Re,qt.default.disableSanitizeHtml);(We!==le.content||Se.mode!==le.mode)&&pe({mode:Se.mode,content:We})},100,[w]),le.mode===or.Code){const Se=w.options.code??Ki;return P.createElement(sl.p,{key:`${Se.showLineNumbers}/${Se.showMiniMap}`,value:le.content,language:Se.language??Ki.language,width:w.width,height:w.height,containerStyles:J.codeEditorContainer,showMiniMap:Se.showMiniMap,showLineNumbers:Se.showLineNumbers,readOnly:!0})}return P.createElement(j.$,{autoHeightMin:"100%",className:J.containStrict},P.createElement(Wf.Z,{html:le.content,className:J.markdown,"data-testid":"TextPanel-converted-content"}))}function yl(w,J,le){let{mode:pe,content:Se}=w;if(!Se)return"";switch(Se=J(Se,{},w.code?.language==="json"?"json":"html"),pe){case or.Code:break;case or.HTML:le||(Se=Ba.QX.sanitizeTextPanelContent(Se));break;case or.Markdown:default:Se=(0,Kf.x)(Se,{noSanitize:le})}return Se}const ru=w=>({codeEditorContainer:(0,k.css)`
    .monaco-editor .margin,
    .monaco-editor-background {
      background-color: ${w.colors.background.primary};
    }
  `,markdown:(0,k.cx)("markdown-html",(0,k.css)`
      height: 100%;
    `),containStrict:(0,k.css)({contain:"strict"})});var _f=e(53565),$f=e(47691);const zf=({value:w,onChange:J,context:le})=>{const pe=(0,P.useMemo)(()=>le.options?.mode??or.Markdown,[le]),Se=(0,X.wW)(kf),Re=()=>le.getSuggestions?le.getSuggestions().map(We=>(0,$f.T)(We)):[];return P.createElement("div",{className:(0,k.cx)(Se.editorBox)},P.createElement(_f.Z,{disableHeight:!0},({width:We})=>We===0?null:P.createElement(sl.p,{value:w,onBlur:J,onSave:J,language:pe,width:We,showMiniMap:!1,showLineNumbers:!1,height:"500px",getSuggestions:Re})))},kf=w=>({editorBox:(0,k.css)`
    label: editorBox;
    border: 1px solid ${w.colors.border.medium};
    border-radius: ${w.shape.radius.default};
    margin: ${w.spacing(.5)} 0;
    width: 100%;
  `}),ou=w=>{const J=parseFloat(w.pluginVersion||"6.1");let le=w.options;if(w.hasOwnProperty("content")&&w.hasOwnProperty("mode")){const Se=w,Re=Se.content,We=Se.mode;delete Se.content,delete Se.mode,J<7.1&&(le={content:Re,mode:We})}return[or.Code,or.HTML,or.Markdown].find(Se=>Se===le.mode)||(le={...le,mode:or.Markdown}),le},iu=new N.c(Vf).setPanelOptions(w=>{w.addRadio({path:"mode",name:"Mode",settings:{options:[{value:or.Markdown,label:"Markdown"},{value:or.HTML,label:"HTML"},{value:or.Code,label:"Code"}]},defaultValue:su.mode}).addSelect({path:"code.language",name:"Language",settings:{options:Object.values(au).map(J=>({value:J,label:J}))},defaultValue:Ki.language,showIf:J=>J.mode===or.Code}).addBooleanSwitch({path:"code.showLineNumbers",name:"Show line numbers",defaultValue:Ki.showLineNumbers,showIf:J=>J.mode===or.Code}).addBooleanSwitch({path:"code.showMiniMap",name:"Show mini map",defaultValue:Ki.showMiniMap,showIf:J=>J.mode===or.Code}).addCustomEditor({id:"content",path:"content",name:"Content",editor:zf,defaultValue:su.content})}).setMigrationHandler(ou);var Hf=e(512),lu=e(6579),Gf=e(61751);class jf{getSuggestionsForData(J){const{dataSummary:le}=J;if(!le.hasTimeField||!le.hasNumberField||le.rowCountTotal<2)return;const pe=J.getListAppender({name:Ha.y.LineChart,pluginId:"timeseries",options:{legend:{calcs:[],displayMode:Mt.jK.Hidden,placement:"right",showLegend:!1}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Re=>{Re.fieldConfig?.defaults.custom?.drawStyle!==Mt.l8.Bars&&(Re.fieldConfig.defaults.custom.lineWidth=Math.max(Re.fieldConfig.defaults.custom.lineWidth??1,2))}}}),Se=100;if(pe.append({name:Ha.y.LineChart}),le.rowCountMax<200&&pe.append({name:Ha.y.LineChartSmooth,fieldConfig:{defaults:{custom:{lineInterpolation:Mt.KC.Smooth}},overrides:[]}}),le.numberFieldCount===1){pe.append({name:Ha.y.AreaChart,fieldConfig:{defaults:{custom:{fillOpacity:25}},overrides:[]}}),pe.append({name:Ha.y.LineChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:is.S.ContinuousGrYlRd},custom:{gradientMode:Mt.FI.Scheme,lineInterpolation:Mt.KC.Smooth,lineWidth:3,fillOpacity:20}},overrides:[]}}),le.rowCountMax<Se&&(pe.append({name:Ha.y.BarChart,fieldConfig:{defaults:{custom:{drawStyle:Mt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Mt.FI.Hue}},overrides:[]}}),pe.append({name:Ha.y.BarChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:is.S.ContinuousGrYlRd},custom:{drawStyle:Mt.l8.Bars,fillOpacity:90,lineWidth:1,gradientMode:Mt.FI.Scheme}},overrides:[]}}));return}pe.append({name:Ha.y.AreaChartStacked,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:Mt.o0.Normal,group:"A"}}},overrides:[]}}),pe.append({name:Ha.y.AreaChartStackedPercent,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:Mt.o0.Percent,group:"A"}}},overrides:[]}}),le.rowCountTotal/le.numberFieldCount<Se&&(pe.append({name:Ha.y.BarChartStacked,fieldConfig:{defaults:{custom:{drawStyle:Mt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Mt.FI.Hue,stacking:{mode:Mt.o0.Normal,group:"A"}}},overrides:[]}}),pe.append({name:Ha.y.BarChartStackedPercent,fieldConfig:{defaults:{custom:{drawStyle:Mt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Mt.FI.Hue,stacking:{mode:Mt.o0.Percent,group:"A"}}},overrides:[]}}))}}function Qf(w){const J=(0,Fe.h4)().getCurrent()?.getPanelById(w);if(J){const le=J.transformations?[...J.transformations]:[];return le.push({id:Gf.W.prepareTimeSeries,options:{format:"wide"}}),{name:"Transform to wide time series format",pluginId:"timeseries",transformations:le}}}const Yf=({data:w,timeRange:J,timeZone:le,width:pe,height:Se,options:Re,fieldConfig:We,onChangeTimeRange:Ge,replaceVariables:at,id:ot})=>{const{sync:ft,canAddAnnotations:ht,onThresholdsChange:wt,canEditThresholds:Et,showThresholds:At,dataLinkPostProcessor:zt}=(0,St.R9)(),Rt=(0,P.useMemo)(()=>$r(w.series,qt.config.theme2,J),[w.series,J]),Tt=(0,P.useMemo)(()=>zr(Re.timezone,le),[Re.timezone,le]),_t=(0,P.useMemo)(()=>{if(Rt?.length&&Rt.every(Ht=>Ht.meta?.type===Hf.P.TimeSeriesLong)){const Ht=Qf(ot);return{message:"Long data must be converted to wide",suggestions:Ht?[Ht]:void 0}}},[Rt,ot]);if(!Rt||_t)return P.createElement(xt.Z,{panelId:ot,message:_t?.message,fieldConfig:We,data:w,needsTimeField:!0,needsNumberField:!0,suggestions:_t?.suggestions});const Jt=!!(ht&&ht());return P.createElement(ui,{frames:Rt,structureRev:w.structureRev,timeRange:J,timeZone:Tt,width:pe,height:Se,legend:Re.legend,options:Re},(Ht,fn)=>(fn.fields.some(kt=>!!kt.config.links?.length)&&(fn=kl(fn,Rt,at,le,zt)),P.createElement(P.Fragment,null,P.createElement(lu.C,{config:Ht}),P.createElement(Yo.R,{config:Ht,onZoom:Ge,withZoomY:!0}),Re.tooltip.mode===Mt.f3.None||P.createElement(ta.i,{frames:Rt,data:fn,config:Ht,mode:Re.tooltip.mode,sortOrder:Re.tooltip.sort,sync:ft,timeZone:le}),w.annotations&&P.createElement(Rs,{annotations:w.annotations,config:Ht,timeZone:le}),Jt?P.createElement(Hn,{data:fn,timeZone:le,config:Ht},({startAnnotating:kt})=>P.createElement(Gs,{data:fn,config:Ht,timeZone:le,replaceVariables:at,defaultItems:[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(gn,cn)=>{cn&&kt({coords:cn.coords})}}]}]})):P.createElement(Gs,{data:fn,frames:Rt,config:Ht,timeZone:le,replaceVariables:at,defaultItems:[]}),w.annotations&&P.createElement(as,{visibleSeries:eo(Ht,Rt),config:Ht,exemplars:w.annotations,timeZone:le}),(Et&&wt||At)&&P.createElement(zl,{config:Ht,fieldConfig:We,onThresholdsChange:Et?wt:void 0}),P.createElement(_r,{config:Ht,onChangeTimeRange:Ge}))))};var Vi=e(72623),Zf=e(76310);const Jf=({value:w,onChange:J})=>{const le=(0,X.wW)(Xf);(!w||w.length<1)&&(w=[""]);const pe=()=>{J([...w,Vi.RQ.default])},Se=We=>{const Ge=w.slice();Ge.splice(We,1),J(Ge)},Re=(We,Ge)=>{const at=w.slice();at[We]=Ge??Vi.RQ.default,at.length===0||at.length===1&&at[0]===""?J(void 0):J(at)};return P.createElement("div",null,w.map((We,Ge)=>P.createElement("div",{className:le.wrapper,key:`${Ge}.${We}`},P.createElement("span",{className:le.first},P.createElement(Zf.O,{onChange:at=>Re(Ge,at),includeInternal:!0,value:We??Vi.RQ.default})),Ge===w.length-1?P.createElement(na.h,{name:"plus",onClick:pe,tooltip:"Add timezone"}):P.createElement(na.h,{name:"times",onClick:()=>Se(Ge),tooltip:"Remove timezone"}))))},Xf=w=>({wrapper:(0,k.css)`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:(0,k.css)`
    margin-right: 8px;
    flex-grow: 2;
  `});var qf=e(37634),eg=e(45864),bl=e(43310);let Dl=null;const Sc=(w,J,le,pe)=>{if(J==="graph"&&le.angular){const{fieldConfig:Se,options:Re,annotations:We}=tg({...le.angular,fieldConfig:pe,panel:w}),Ge=(0,Fe.h4)().getCurrent();return Ge&&We?.length>0&&(Ge.annotations.list=[...Ge.annotations.list,...We],Dl==null&&(Dl=setTimeout(()=>{Dl=null,(0,eg.$t)().refreshTimeModel()}))),w.fieldConfig=Se,w.alert=le.angular.alert,Re}return sg(w),{}};function tg(w){let J=[];const le=w.fieldConfig?.overrides??[],pe=w.yaxes??[];let Se=cu(pe[0]);w.fieldConfig?.defaults&&(Se={...w.fieldConfig?.defaults,...Se});const Re={fill:w.dashes?"dash":"solid",dash:[w.dashLength??10,w.spaceLength??10]};if(w.aliasColors)for(const ht of Object.keys(w.aliasColors)){const wt=w.aliasColors[ht];wt&&le.push({matcher:{id:po.mi.byName,options:ht},properties:[{id:Ms.qb.Color,value:{mode:is.S.Fixed,fixedColor:wt}}]})}let We=!1;if(w.seriesOverrides?.length)for(const ht of w.seriesOverrides){if(!ht.alias)continue;const Et={matcher:{id:/^([/~@;%#'])(.*?)\1([gimsuy]*)$/.test(ht.alias)?po.mi.byRegexp:po.mi.byName,options:ht.alias},properties:[]};let At;for(const zt of Object.keys(ht)){const Rt=ht[zt];switch(zt){case"alias":case"$$hashKey":break;case"yaxis":if(Rt===2){const Tt=cu(pe[1]);ng(Se,Tt,Et.properties)}break;case"fill":Et.properties.push({id:"custom.fillOpacity",value:Rt*10});break;case"fillBelowTo":We=!0,Et.properties.push({id:"custom.fillBelowTo",value:Rt});break;case"fillGradient":Rt&&(Et.properties.push({id:"custom.fillGradient",value:"opacity"}),Et.properties.push({id:"custom.fillOpacity",value:Rt*10}));break;case"points":Et.properties.push({id:"custom.showPoints",value:Rt?Mt.Jp.Always:Mt.Jp.Never});break;case"bars":Rt?(Et.properties.push({id:"custom.drawStyle",value:Mt.l8.Bars}),Et.properties.push({id:"custom.fillOpacity",value:100})):Et.properties.push({id:"custom.drawStyle",value:Mt.l8.Line});break;case"lines":Rt?Et.properties.push({id:"custom.drawStyle",value:"line"}):Et.properties.push({id:"custom.lineWidth",value:0});break;case"linewidth":Et.properties.push({id:"custom.lineWidth",value:Rt});break;case"pointradius":Et.properties.push({id:"custom.pointSize",value:2+Rt*2});break;case"dashLength":case"spaceLength":case"dashes":switch(At||(At={fill:Re.fill,dash:[...Re.dash]}),zt){case"dashLength":At.dash[0]=Rt;break;case"spaceLength":At.dash[1]=Rt;break;case"dashes":At.fill=Rt?"dash":"solid";break}break;case"stack":Et.properties.push({id:"custom.stacking",value:rg(Rt)});break;case"color":Et.properties.push({id:"color",value:{fixedColor:Rt,mode:is.S.Fixed}});break;case"transform":Et.properties.push({id:"custom.transform",value:Rt==="negative-Y"?Mt.pR.NegativeY:Mt.pR.Constant});break;default:console.log("Ignore override migration:",ht.alias,zt,Rt)}}At&&Et.properties.push({id:"custom.lineStyle",value:At}),Et.properties.length&&le.push(Et)}const Ge=Se.custom??{};Ge.drawStyle=w.bars?Mt.l8.Bars:w.lines?Mt.l8.Line:Mt.l8.Points,w.points?(Ge.showPoints=Mt.Jp.Always,(0,ne.isNumber)(w.pointradius)&&(Ge.pointSize=2+w.pointradius*2)):Ge.drawStyle!==Mt.l8.Points&&(Ge.showPoints=Mt.Jp.Never),Ge.lineWidth=w.linewidth,Re.fill!=="solid"&&(Ge.lineStyle=Re),We?Ge.fillOpacity=35:(0,ne.isNumber)(w.fill)&&(Ge.fillOpacity=w.fill*10),(0,ne.isNumber)(w.fillGradient)&&w.fillGradient>0&&(Ge.gradientMode=Mt.FI.Opacity,Ge.fillOpacity=w.fillGradient*10),Ge.spanNulls=w.nullPointMode===yd.Gl.Ignore,w.steppedLine&&(Ge.lineInterpolation=Mt.KC.StepAfter),Ge.drawStyle===Mt.l8.Bars&&(Ge.fillOpacity=100),w.stack&&(Ge.stacking={mode:Mt.o0.Normal,group:br.r.stacking.group}),Se.custom=(0,ne.omitBy)(Ge,ne.isNil),Se.nullValueMode=w.nullPointMode;const at={legend:{displayMode:Mt.jK.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:Mt.f3.Single,sort:Mt.As.None}},ot=w.legend;if(ot){if(ot.show?at.legend.displayMode=ot.alignAsTable?Mt.jK.Table:Mt.jK.List:at.legend.showLegend=!1,ot.rightSide&&(at.legend.placement="right"),w.legend.values){const ht=(0,ne.pickBy)(w.legend);at.legend.calcs=ag(ht)}w.legend.sideWidth&&(at.legend.width=w.legend.sideWidth),ot.hideZero&&le.push(Tc(Or.gz.allIsZero)),ot.hideEmpty&&le.push(Tc(Or.gz.allIsNull))}w.timeRegions?.length&&w.timeRegions.map((wt,Et)=>({name:`T${Et+1}`,color:wt.colorMode!=="custom"?wt.colorMode:wt.fillColor,line:wt.line,fill:wt.fill,fromDayOfWeek:wt.fromDayOfWeek,toDayOfWeek:wt.toDayOfWeek,from:wt.from,to:wt.to})).forEach((wt,Et)=>{const At={datasource:{type:"datasource",uid:"grafana"},enable:!0,hide:!0,filter:{exclude:!1,ids:[w.panel.id]},iconColor:wt.fillColor??wt.color,name:`T${Et+1}`,target:{queryType:bl.hR.TimeRegions,refId:"Anno",timeRegion:{fromDayOfWeek:wt.fromDayOfWeek,toDayOfWeek:wt.toDayOfWeek,from:wt.from,to:wt.to,timezone:"utc"}}};wt.fill?J.push(At):wt.line&&(At.iconColor=wt.lineColor??"white",J.push(At))});const ft=w.tooltip;if(ft&&(ft.shared!==void 0&&(at.tooltip.mode=ft.shared?Mt.f3.Multi:Mt.f3.Single),ft.sort!==void 0&&ft.shared))switch(ft.sort){case 1:at.tooltip.sort=Mt.As.Ascending;break;case 2:at.tooltip.sort=Mt.As.Descending;break;default:at.tooltip.sort=Mt.As.None}if(w.thresholds&&w.thresholds.length>0){let ht=[],wt=!1,Et=!1;const At=w.thresholds.sort((Rt,Tt)=>Rt.value>Tt.value?1:-1);for(let Rt=0;Rt<At.length;Rt++){const Tt=At[Rt],_t=At.length>Rt+1?At[Rt+1]:null;Tt.fill&&(wt=!0),Tt.line&&(Et=!0),Tt.op==="gt"&&ht.push({value:Tt.value,color:xc(Tt)}),Tt.op==="lt"&&(ht.length===0&&ht.push({value:-1/0,color:xc(Tt)}),_t&&_t.op==="gt"&&_t.value>Tt.value?ht.push({value:Tt.value,color:"transparent"}):_t&&_t.op==="lt"?ht.push({value:Tt.value,color:xc(_t)}):ht.push({value:Tt.value,color:"transparent"}))}ht.length>0&&ht[0].value!==-1/0&&ht.unshift({color:"transparent",value:-1/0});let zt=wt?Mt.i3.Area:Mt.i3.Line;Et&&wt&&(zt=Mt.i3.LineAndArea),Se.custom.thresholdsStyle={mode:zt},Se.thresholds={mode:qf.H.Absolute,steps:ht}}return w.xaxis&&w.xaxis.show===!1&&w.xaxis.mode==="time"&&le.push({matcher:{id:po.mi.byType,options:zn.fS.time},properties:[{id:"custom.axisPlacement",value:Mt.LB.Hidden}]}),{fieldConfig:{defaults:(0,ne.omitBy)(Se,ne.isNil),overrides:le},options:at,annotations:J}}function xc(w){return w.colorMode==="critical"?"red":w.colorMode==="warning"?"orange":w.colorMode==="custom"?w.fillColor||w.lineColor:"red"}function cu(w){if(!w)return{};const J={axisPlacement:w.show?Mt.LB.Auto:Mt.LB.Hidden};if(w.label&&(J.axisLabel=w.label),w.logBase){const le=w.logBase;(le===2||le===10)&&(J.scaleDistribution={type:Mt.wf.Log,log:le})}return(0,ne.omitBy)({unit:w.format,decimals:Mc(w.decimals),min:Mc(w.min),max:Mc(w.max),custom:J},ne.isNil)}function ng(w,J,le){for(const[Re,We]of Object.entries(J))Re!=="custom"&&We!==w[Re]&&le.push({id:Re,value:We});const pe=w.custom??{},Se=J.custom??{};for(const[Re,We]of Object.entries(Se))We!==pe[Re]&&le.push({id:`custom.${Re}`,value:We})}function Mc(w){if((0,ne.isNumber)(w))return w;if((0,ne.isString)(w)){const J=Number(w);if(!isNaN(J))return J}}function ag(w){const J=[];for(const le of Object.keys(w)){const pe=Or.TB.getIfExists(le);pe&&J.push(pe.id)}return J}function sg(w){w.fieldConfig?.defaults?.custom?.hideFrom?.graph!==void 0&&(w.fieldConfig.defaults.custom.hideFrom.viz=w.fieldConfig.defaults.custom.hideFrom.graph,delete w.fieldConfig.defaults.custom.hideFrom.graph),w.fieldConfig?.overrides&&(w.fieldConfig.overrides=w.fieldConfig.overrides.map(J=>(J.properties=J.properties.map(le=>(le.id==="custom.hideFrom"&&le.value.graph&&(le.value.viz=le.value.graph,delete le.value.graph),le)),J)))}function Tc(w){return{matcher:{id:po.mi.byValue,options:{reducer:w,op:Mt.Bd.GTE,value:0}},properties:[{id:"custom.hideFrom",value:{tooltip:!0,viz:!1,legend:!0}}]}}function rg(w){const J=br.r.stacking?.group;return{mode:w?Mt.o0.Normal:Mt.o0.None,group:(0,ne.isString)(w)?w:J}}const og=new N.c(Yf).setPanelChangeHandler(Sc).useFieldConfig((0,br.F)(br.r)).setPanelOptions(w=>{Wr.L(w),ur.J(w),w.addCustomEditor({id:"timezone",name:"Time zone",path:"timezone",category:["Axis"],editor:Jf,defaultValue:void 0})}).setSuggestionsSupplier(new jf).setDataSupport({annotations:!0,alertStates:!0});var ig=e(81502),lg=e(21477),cg=e(86450);const du={wrapper:(0,k.css)`
    height: 100%;
    overflow: scroll;
  `},uu=({data:w,options:J})=>{const le=(0,P.createRef)(),pe=(0,P.useMemo)(()=>(0,cg.N)(w.series[0]),[w.series]),Se=(0,ee.Z)(async()=>await(0,ig.F)().get(w.request?.targets[0].datasource?.uid));return!w||!w.series.length||!pe?P.createElement("div",{className:"panel-empty"},P.createElement("p",null,"No data found in response")):P.createElement("div",{className:du.wrapper},P.createElement("div",{ref:le}),P.createElement(lg.m,{dataFrames:w.series,scrollElementClass:du.wrapper,traceProp:pe,datasource:Se.value,topOfViewRef:le,createSpanLink:J.createSpanLink}))},mu=new N.c(uu);var Oc=e(34103),fu=e(18581),dg=e(62184);const gu=({series:w})=>P.createElement(P.Fragment,null,w.map((J,le)=>{const pe=J.label,Se=J.value;return P.createElement(dg.F,{key:`${J.label}-${le}`,label:pe,value:Se,color:J.color,colorIndicator:Fi.F.series,isActive:J.isActive,justify:"space-between"})})),hu=({frames:w,data:J,mode:le=Mt.f3.Single,sortOrder:pe=Mt.As.None,sync:Se,dataIdxs:Re,seriesIdx:We,isPinned:Ge})=>{const at=(0,X.l4)(),ot=(0,X.wW)(pu),ft=J.fields[0];if(!ft)return null;const ht=ft.display||(0,hs.U)({field:ft,theme:at});let wt=ht(ft.values[Re[0]]).text,Et=null;const At=[],zt=new Set;if(le===Mt.f3.Single||Ge){const Tt=J.fields[We];if(!Tt)return null;const _t=Re[We];wt=ht(ft.values[_t]).text;const Ht=(Tt.display||(0,hs.U)({field:Tt,theme:at}))(Tt.values[_t]);if(Tt.getLinks){const fn=Tt.values[_t],kt=Tt.display?Tt.display(fn):{text:`${fn}`,numeric:+fn};Tt.getLinks({calculatedValue:kt,valueRowIndex:_t}).forEach(gn=>{const cn=`${gn.title}/${gn.href}`;zt.has(cn)||(At.push(gn),zt.add(cn))})}Et=P.createElement(gu,{series:[{color:Ht.color||is.R,label:(0,Na.CZ)(Tt,J,w),value:Ht?(0,cs.zc)(Ht):null}]})}if(le===Mt.f3.Multi&&!Ge){let Tt=[];const _t=J,Jt=_t.fields,Ht=[];for(let fn=0;fn<Jt.length;fn++){const kt=_t.fields[fn];if(!kt||kt===ft||kt.type===zn.fS.time||kt.type!==zn.fS.number||kt.config.custom?.hideFrom?.tooltip||kt.config.custom?.hideFrom?.viz)continue;const gn=J.fields[fn].values[Re[fn]],cn=kt.display(gn);Ht.push(gn),Tt.push({color:cn.color||is.R,label:kt.state?.displayName??kt.name,value:cn?(0,cs.zc)(cn):null,isActive:We===fn})}if(pe!==Mt.As.None){const fn=[...Tt],kt=zd.sortValues(pe);Tt.sort((gn,cn)=>{const tn=fn.indexOf(gn),pn=fn.indexOf(cn);return kt(Ht[tn],Ht[pn])})}Et=P.createElement(gu,{series:Tt})}const Rt=()=>({label:(0,Na.CZ)(ft,J),value:wt});return P.createElement("div",null,P.createElement("div",{className:ot.wrapper},P.createElement(pl.r,{headerLabel:Rt(),customValueDisplay:Et}),Ge&&P.createElement(kd.c,{dataLinks:At,canAnnotate:!1})))},pu=w=>({wrapper:(0,k.css)({display:"flex",flexDirection:"column",width:"280px"})}),bp=({data:w,timeRange:J,timeZone:le,width:pe,height:Se,options:Re,fieldConfig:We,replaceVariables:Ge,id:at})=>{const{sync:ot,dataLinkPostProcessor:ft}=(0,St.R9)(),ht=Re.xField??w.series[0].fields.find(At=>At.type===zn.fS.number)?.name,wt=(At,zt,Rt)=>(zt={...zt,x:Oc.Ls.get(po.mi.byName).get(ht)},(0,fu.R)(At,zt)),Et=(0,P.useMemo)(()=>{if(w.series.length>1)return{warning:"Only one frame is supported, consider adding a join transformation",frames:w.series};let At=w.series,zt;if(Re.xField){if(zt=(0,Ta.findFieldIndex)(Re.xField,At[0]),zt==null)return{warning:"Unable to find field: "+Re.xField,frames:w.series}}else if(zt=At[0].fields.findIndex(Rt=>Rt.type===zn.fS.number),zt===-1)return{warning:"No numeric fields found for X axis",frames:At};if(zt!=null){const Rt=At[0].fields[zt];if(Rt.type===zn.fS.number&&!(0,Fr.lP)(Rt.values))return{warning:"Values must be in ascending order",frames:At}}return{frames:$r(At,U.config.theme2,void 0,zt)}},[w.series,Re.xField]);return Et.warning||!Et.frames?P.createElement(xt.Z,{panelId:at,fieldConfig:We,data:w,message:Et.warning,needsNumberField:!0}):P.createElement(ui,{frames:Et.frames,structureRev:w.structureRev,timeRange:J,timeZone:le,width:pe,height:Se,legend:Re.legend,options:Re,preparePlotFrame:wt},(At,zt)=>(zt.fields.some(Rt=>!!Rt.config.links?.length)&&(zt=kl(zt,Et.frames,Ge,le,ft)),P.createElement(P.Fragment,null,P.createElement(lu.C,{config:At}),Re.tooltip.mode!==Mt.f3.None&&P.createElement(P.Fragment,null,U.config.featureToggles.newVizTooltips?P.createElement(Wi.x,{config:At,hoverMode:Re.tooltip.mode===Mt.f3.Single?Wi.c.xOne:Wi.c.xAll,render:(Rt,Tt,_t,Jt=!1)=>P.createElement(hu,{frames:Et.frames,data:zt,mode:Re.tooltip.mode,sortOrder:Re.tooltip.sort,sync:ot,dataIdxs:Tt,seriesIdx:_t,isPinned:Jt})}):P.createElement(ta.i,{frames:Et.frames,data:zt,config:At,mode:Re.tooltip.mode,sortOrder:Re.tooltip.sort,sync:ot,timeZone:le})))))};class Dp{getSuggestionsForData(J){const{dataSummary:le}=J;return le.numberFieldCount<2||le.rowCountTotal<2||le.rowCountTotal<2?void 0:J.getListAppender({name:Ha.y.LineChart,pluginId:"trend",options:{legend:{calcs:[],displayMode:Mt.jK.Hidden,placement:"right",showLegend:!1}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Se=>{Se.fieldConfig?.defaults.custom?.drawStyle!==Mt.l8.Bars&&(Se.fieldConfig.defaults.custom.lineWidth=Math.max(Se.fieldConfig.defaults.custom.lineWidth??1,2))}}})}}const ug=new N.c(bp).useFieldConfig((0,br.F)(br.r,!1)).setPanelOptions(w=>{const J=["X Axis"];w.addFieldNamePicker({path:"xField",name:"X Field",description:"An increasing numeric value",category:J,defaultValue:void 0,settings:{isClearable:!0,placeholderText:"First numeric value",filter:le=>le.type===zn.fS.number}}),Wr.L(w),ur.J(w)}).setSuggestionsSupplier(new Dp),mg=[{value:0,label:"Documentation",href:"https://grafana.com/docs/grafana/latest"},{value:1,label:"Tutorials",href:"https://grafana.com/tutorials"},{value:2,label:"Community",href:"https://community.grafana.com"},{value:3,label:"Public Slack",href:"http://slack.grafana.com"}],fg=()=>{const w=(0,X.wW)(Cl);return P.createElement("div",{className:w.container},P.createElement("h1",{className:w.title},"Welcome to Grafana"),P.createElement("div",{className:w.help},P.createElement("h3",{className:w.helpText},"Need help?"),P.createElement("div",{className:w.helpLinks},mg.map((J,le)=>P.createElement("a",{key:`${J.label}-${le}`,className:w.helpLink,href:`${J.href}?utm_source=grafana_gettingstarted`},J.label)))))},Cl=w=>({container:(0,k.css)`
      display: flex;
      /// background: url(public/img/g8_home_v2.svg) no-repeat;
      background-size: cover;
      height: 100%;
      align-items: center;
      padding: 0 16px;
      justify-content: space-between;
      padding: 0 ${w.spacing(3)};

      ${w.breakpoints.down("lg")} {
        background-position: 0px;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
      }

      ${w.breakpoints.down("sm")} {
        padding: 0 ${w.spacing(1)};
      }
    `,title:(0,k.css)`
      margin-bottom: 0;

      ${w.breakpoints.down("lg")} {
        margin-bottom: ${w.spacing(1)};
      }

      ${w.breakpoints.down("md")} {
        font-size: ${w.typography.h2.fontSize};
      }
      ${w.breakpoints.down("sm")} {
        font-size: ${w.typography.h3.fontSize};
      }
    `,help:(0,k.css)`
      display: flex;
      align-items: baseline;
    `,helpText:(0,k.css)`
      margin-right: ${w.spacing(2)};
      margin-bottom: 0;

      ${w.breakpoints.down("md")} {
        font-size: ${w.typography.h4.fontSize};
      }

      ${w.breakpoints.down("sm")} {
        display: none;
      }
    `,helpLinks:(0,k.css)`
      display: flex;
      flex-wrap: wrap;
    `,helpLink:(0,k.css)`
      margin-right: ${w.spacing(2)};
      text-decoration: underline;
      text-wrap: no-wrap;

      ${w.breakpoints.down("sm")} {
        margin-right: 8px;
      }
    `}),gg=new N.c(fg).setNoPadding();var vu=(w=>(w[w.NoData=0]="NoData",w[w.BadFrameSelection=1]="BadFrameSelection",w[w.XNotFound=2]="XNotFound",w))(vu||{});function Pl(w){return w.type===zn.fS.number}function Ic(w,J){if(!J||!J.length)return{error:0};w||(w={frame:0});let le=J[w.frame??0];if(!le)return{error:1};let pe=-1;for(let Ge=0;Ge<le.fields.length;Ge++){const at=le.fields[Ge];if(w.x&&w.x===(0,Na.CZ)(at,le,J)){pe=Ge;break}if(Pl(at)&&!w.x){pe=Ge;break}}let Se=!1;const Re=le.fields[pe],We=[Re];for(const Ge of le.fields)if(Ge.type===zn.fS.time&&(Se=!0),!(Ge===Re||!Pl(Ge))){if(w.exclude){const at=(0,Na.CZ)(Ge,le,J);if(w.exclude.includes(at))continue}We.push(Ge)}return{x:Re,fields:{x:Rc(Re),y:hg(Re)},frame:{...le,fields:We},hasData:le.fields.length>0,hasTime:Se}}function Rc(w){return w?J=>w===J||!!(w.state&&w.state===J.state):()=>!1}function hg(w){if(!w)return()=>!1;const J=Rc(w);return le=>!J(le,void 0,void 0)}const pg=({value:w,onChange:J,context:le})=>{const pe=(0,P.useMemo)(()=>le?.data?.length?le.data.map((Ge,at)=>({value:at,label:(0,Na.nf)(Ge,at)})):[{value:0,label:"First result"}],[le.data]),Se=(0,P.useMemo)(()=>Ic(w,le.data),[le.data,w]),Re=(0,P.useMemo)(()=>{const Ge={label:"?",value:void 0},at={numberFields:[Ge],yFields:[],xAxis:w?.x?{label:`${w.x} (Not found)`,value:w.x}:Ge},ot=le.data?le.data[w?.frame??0]:void 0;if(ot){const ft=Se.x?(0,Na.CZ)(Se.x,Se.frame,le.data):void 0;for(let ht of ot.fields)if(Pl(ht)){const wt=(0,Na.CZ)(ht,ot,le.data),Et={label:wt,value:wt};at.numberFields.push(Et),Ge.label==="?"&&(Ge.label=`${wt} (First)`),w?.x&&wt===w.x&&(at.xAxis=Et),ft!==wt&&at.yFields.push({label:wt,value:w?.exclude?.includes(wt)})}}return at},[Se,le.data,w]),We=(0,X.wW)(vg);return le.data?P.createElement("div",null,P.createElement(Ct.g,{label:"Data"},P.createElement(De.Ph,{options:pe,value:pe.find(Ge=>Ge.value===w?.frame)??pe[0],onChange:Ge=>{J({...w,frame:Ge.value})}})),P.createElement(Ct.g,{label:"X Field"},P.createElement(De.Ph,{options:Re.numberFields,value:Re.xAxis,onChange:Ge=>{J({...w,x:Ge.value})}})),P.createElement(Ct.g,{label:"Y Fields"},P.createElement("div",null,Re.yFields.map(Ge=>P.createElement("div",{key:Ge.label,className:We.row},P.createElement(na.h,{name:Ge.value?"eye-slash":"eye",onClick:()=>{const at=w?.exclude?[...w.exclude]:[];let ot=at.indexOf(Ge.label);ot<0?at.push(Ge.label):at.splice(ot,1),J({...w,exclude:at})},tooltip:Ge.value?"Disable":"Enable"}),Ge.label))))):P.createElement("div",null,"No data...")},vg=w=>({sorter:(0,k.css)`
    margin-top: 10px;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    cursor: pointer;
  `,row:(0,k.css)`
    padding: ${w.spacing(.5,1)};
    border-radius: ${w.shape.radius.default};
    background: ${w.colors.background.secondary};
    min-height: ${w.spacing(4)};
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    margin-bottom: 3px;
    border: 1px solid ${w.components.input.borderColor};
  `});var Eg=e(63791),Eu=e(1431),Ac=(w=>(w.Auto="auto",w.Manual="manual",w))(Ac||{}),Oo=(w=>(w.Lines="lines",w.Points="points",w.PointsAndLines="points+lines",w))(Oo||{});const Cp={exclude:[]},Lc={label:Mt.Jp.Auto,show:"points"},Pp={series:[]},yg=({value:w,onChange:J,context:le})=>{const[pe,Se]=(0,P.useState)(0),Re=(0,X.wW)(bg),We=(ft,ht,wt)=>{J(w.map((Et,At)=>At===ht?{...Et,[wt]:ft}:Et))},Ge=()=>{J([...w,{pointColor:{},pointSize:Lc.pointSize}]),Se(w.length)};(0,P.useEffect)(()=>{w?.length||Ge()},[]);const at=ft=>{J(w.filter((ht,wt)=>wt!==ft))},ot=ft=>ft===pe?`${Re.row} ${Re.sel}`:Re.row;return P.createElement(P.Fragment,null,P.createElement(te.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:Ge,className:Re.marginBot},"Add series"),P.createElement("div",{className:Re.marginBot},w.map((ft,ht)=>P.createElement("div",{key:`series/${ht}`,className:ot(ht),onClick:()=>Se(ht),role:"button","aria-label":`Select series ${ht+1}`,tabIndex:0,onKeyPress:wt=>{wt.key==="Enter"&&Se(ht)}},P.createElement(Eg.X,{name:ft.name??`Series ${ht+1}`,onChange:wt=>We(wt,ht,"name")}),P.createElement(na.h,{name:"trash-alt",title:"remove",className:(0,k.cx)(Re.actionIcon),onClick:()=>at(ht),tooltip:"Delete series"})))),pe>=0&&w[pe]&&P.createElement(P.Fragment,null,P.createElement("div",{key:`series/${pe}`},P.createElement(Ct.g,{label:"X Field"},P.createElement(ll.b,{value:w[pe].x??"",context:le,onChange:ft=>We(ft,pe,"x"),item:{}})),P.createElement(Ct.g,{label:"Y Field"},P.createElement(ll.b,{value:w[pe].y??"",context:le,onChange:ft=>We(ft,pe,"y"),item:{}})),P.createElement(Ct.g,{label:"Point color"},P.createElement(Eu.Lm,{value:w[pe].pointColor,context:le,onChange:ft=>We(ft,pe,"pointColor"),item:{}})),P.createElement(Ct.g,{label:"Point size"},P.createElement(Eu.cL,{value:w[pe].pointSize,context:le,onChange:ft=>We(ft,pe,"pointSize"),item:{settings:{min:1,max:100}}})))))},bg=w=>({marginBot:(0,k.css)`
    margin-bottom: 20px;
  `,row:(0,k.css)`
    padding: ${w.spacing(.5,1)};
    border-radius: ${w.shape.radius.default};
    background: ${w.colors.background.secondary};
    min-height: ${w.spacing(4)};
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 3px;
    cursor: pointer;

    border: 1px solid ${w.components.input.borderColor};
    &:hover {
      border: 1px solid ${w.components.input.borderHover};
    }
  `,sel:(0,k.css)`
    border: 1px solid ${w.colors.primary.border};
    &:hover {
      border: 1px solid ${w.colors.primary.border};
    }
  `,actionIcon:(0,k.css)`
    color: ${w.colors.text.secondary};
    &:hover {
      color: ${w.colors.text};
    }
  `});var yu=e(69690);const Dg=({allSeries:w,data:J,manualSeriesConfigs:le,seriesMapping:pe,rowIndex:Se,hoveredPointIndex:Re,options:We})=>{const Ge=(0,X.wW)(Cg);if(!w||Se==null)return null;const at=w[Re],ot=at.frame(J),ft=at.x(ot),ht=at.y(ot);let wt;if(ht.getLinks){const Rt=ht.values[Se],Tt=ht.display?ht.display(Rt):{text:`${Rt}`,numeric:+Rt};wt=ht.getLinks({calculatedValue:Tt,valueRowIndex:Se}).map(_t=>(_t.title||(_t.title=(0,sc.Rb)(_t.href)),_t))}let Et=ot.fields.filter(Rt=>Rt!==ft&&Rt!==ht),At=null,zt=null;if(pe===Ac.Manual&&le){const Rt=le[Re]?.pointColor?.field??"",Tt=le[Re]?.pointSize?.field??"",_t=Rt?(0,Ta.findField)(ot,Rt):void 0,Jt=Tt?(0,Ta.findField)(ot,Tt):void 0;zt={colorFacetFieldName:Rt,sizeFacetFieldName:Tt,colorFacetValue:_t?.values[Se],sizeFacetValue:Jt?.values[Se]},Et=Et.filter(Ht=>Ht!==_t&&Ht!==Jt)}return At={name:(0,Na.CZ)(ht,ot),val:ht.values[Se],field:ht,color:at.pointColor(ot)},P.createElement(P.Fragment,null,P.createElement("table",{className:Ge.infoWrap},P.createElement("tr",null,P.createElement("th",{colSpan:2,style:{backgroundColor:At.color}})),P.createElement("tbody",null,P.createElement("tr",null,P.createElement("th",null,(0,Na.CZ)(ft,ot)),P.createElement("td",null,Bc(ft,ft.values[Se]))),P.createElement("tr",null,P.createElement("th",null,At.name,":"),P.createElement("td",null,Bc(At.field,At.val))),zt!==null&&zt.colorFacetFieldName&&P.createElement("tr",null,P.createElement("th",null,zt.colorFacetFieldName,":"),P.createElement("td",null,zt.colorFacetValue)),zt!==null&&zt.sizeFacetFieldName&&P.createElement("tr",null,P.createElement("th",null,zt.sizeFacetFieldName,":"),P.createElement("td",null,zt.sizeFacetValue)),Et.map((Rt,Tt)=>P.createElement("tr",{key:Tt},P.createElement("th",null,(0,Na.CZ)(Rt,ot),":"),P.createElement("td",null,Bc(Rt,Rt.values[Se])))),wt&&wt.length>0&&P.createElement("tr",null,P.createElement("td",{colSpan:2},P.createElement(so.wc,null,wt.map((Rt,Tt)=>P.createElement(te.Qj,{key:Tt,icon:"external-link-alt",target:Rt.target,href:Rt.href,onClick:Rt.onClick,fill:"text",style:{width:"100%"}},Rt.title))))))))};function Bc(w,J){return w.display?(0,cs.zc)(w.display(J)):`${J}`}const Cg=w=>({infoWrap:(0,k.css)`
    padding: 8px;
    width: 100%;
    th {
      font-weight: ${w.typography.fontWeightMedium};
      padding: ${w.spacing(.25,2)};
    }
  `,highlight:(0,k.css)`
    background: ${w.colors.action.hover};
  `,xVal:(0,k.css)`
    font-weight: ${w.typography.fontWeightBold};
  `,icon:(0,k.css)`
    margin-right: ${w.spacing(1)};
    vertical-align: middle;
  `});var bu=e(77425);const Du=5;function Pg(w){return{standardOptions:{[Ms.qb.Min]:{hideFromDefaults:!0},[Ms.qb.Max]:{hideFromDefaults:!0},[Ms.qb.Unit]:{hideFromDefaults:!0},[Ms.qb.Decimals]:{hideFromDefaults:!0},[Ms.qb.NoValue]:{hideFromDefaults:!0},[Ms.qb.DisplayName]:{hideFromDefaults:!0},[Ms.qb.Thresholds]:{hideFromDefaults:!0},[Ms.qb.Mappings]:{hideFromDefaults:!0},[Ms.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:is.S.PaletteClassic}}},useCustomConfig:J=>{J.addRadio({path:"show",name:"Show",defaultValue:w.show,settings:{options:[{label:"Points",value:Oo.Points},{label:"Lines",value:Oo.Lines},{label:"Both",value:Oo.PointsAndLines}]}}).addSliderInput({path:"pointSize.fixed",name:"Point size",defaultValue:w.pointSize?.fixed??Du,settings:{min:1,max:100,step:1},showIf:le=>le.show!==Oo.Lines}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",showIf:le=>le.show!==Oo.Points,editor:bu.j,override:bu.j,process:ao.kG,shouldApply:le=>le.type===zn.fS.number}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:w.lineWidth,settings:{min:0,max:10,step:1},showIf:le=>le.show!==Oo.Points}),wo.r(J,w),dr.B(J)}}}function Sg(w,J,le,pe,Se,Re){let We,Ge;try{We=xg(w,J()),Ge=Mg(J,We,le,pe,Se,Re)}catch(at){let ot="Unknown error in prepScatter";return typeof at=="string"?ot=at:at instanceof Error&&(ot=at.message),{error:ot,series:[]}}return{series:We,builder:Ge}}function Cu(w,J,le,pe,Se,Re){const We=J[le],Ge=We.fields[Se];let at=Ge.state??{};at.seriesIndex=w,Ge.state=at;let ot=Re.pointColorFixed?U.config.theme2.visualization.getColorByName(Re.pointColorFixed):(0,Bs.YO)(Ge,U.config.theme2).color,ft=()=>ot;const ht={...Lc,...Ge.config.custom};let wt=Bs.WO.get(is.S.PaletteClassic);if(Re.pointColorIndex){const Tt=J[le].fields[Re.pointColorIndex];if(Tt)if(wt=(0,Bs.fD)(Ge),wt.isByValue){const _t=Re.pointColorIndex;ft=Jt=>{const Ht=Jt.fields[_t];return Ht.state?.range&&(Ht.state.range=void 0),Ht.display=(0,hs.U)({field:Ht,theme:U.config.theme2}),Ht.values.map(fn=>Ht.display(fn).color)}}else ot=wt.getCalculator(Tt,U.config.theme2)(Tt.values[0],1),ft=()=>ot}let Et=Re.pointSizeConfig,At=Re.pointSizeConfig?.fixed??Ge.config.custom?.pointSize?.fixed??Du,zt=()=>At;Re.pointSizeIndex?zt=Tt=>{const _t=(0,Ta.getScaledDimensionForField)(Tt.fields[Re.pointSizeIndex],Re.pointSizeConfig,Mt.B5.Quad),Jt=Array(Tt.length);for(let Ht=0;Ht<Tt.length;Ht++)Jt[Ht]=_t.get(Ht);return Jt}:Et={fixed:At,min:At,max:At};const Rt=(0,Na.CZ)(Ge,We,J);return{name:Rt,frame:Tt=>Tt[le],x:Tt=>Tt.fields[pe],y:Tt=>Tt.fields[Se],legend:()=>[{label:Rt,color:ot,getItemKey:()=>Rt,yAxis:Se}],showLine:ht.show!==Oo.Points,lineWidth:ht.lineWidth??2,lineStyle:ht.lineStyle,lineColor:()=>ot,showPoints:ht.show!==Oo.Lines?Mt.Jp.Always:Mt.Jp.Never,pointSize:zt,pointColor:ft,pointSymbol:(Tt,_t)=>"circle",label:Mt.Jp.Never,labelValue:()=>"",show:!We.fields[Se].config.custom.hideFrom?.viz,hints:{pointSize:Et,pointColor:{mode:wt}}}}function xg(w,J){let le=0;if(!J.length)throw"Missing data";if(w.seriesMapping==="manual"){if(!w.series?.length)throw"Missing series config";const at=[];for(const ot of w.series){if(!ot?.x)throw"Select X dimension";if(!ot?.y)throw"Select Y dimension";for(let ft=0;ft<J.length;ft++){const ht=J[ft],wt=(0,Ta.findFieldIndex)(ot.x,ht,J);if(wt!=null){const Et=(0,Ta.findFieldIndex)(ot.y,ht,J);if(Et==null)throw"Y must be in the same frame as X";const At={pointColorFixed:ot.pointColor?.fixed,pointColorIndex:(0,Ta.findFieldIndex)(ot.pointColor?.field,ht,J),pointSizeConfig:ot.pointSize,pointSizeIndex:(0,Ta.findFieldIndex)(ot.pointSize?.field,ht,J)};at.push(Cu(le++,J,ft,wt,Et,At))}}}return at}const pe=w.dims??{},Se=pe.frame??0,Re=J[Se],We=[];let Ge=(0,Ta.findFieldIndex)(pe.x,Re,J);for(let at=0;at<Re.fields.length;at++)if(Pl(Re.fields[at])){if(Ge==null||at===Ge){Ge=at;continue}if(pe.exclude&&pe.exclude.includes((0,Na.CZ)(Re.fields[at],Re,J)))continue;We.push(at)}if(Ge==null)throw"Missing X dimension";if(!We.length)throw"No Y values";return We.map(at=>Cu(le++,J,Se,Ge,at,{}))}const Mg=(w,J,le,pe,Se,Re)=>{let We,Ge;function at(Ht){return(kt,gn,cn,tn)=>(us.Z.orient(kt,gn,(pn,dn,Un,qn,Fn,Tn,sa,ia,Ga,Za,Va,_a,da,Rn,Jn)=>{const ea=us.Z.pxRatio,la=J[gn-1];let ba=kt.data[gn],wa=la.showLine,Da=la.showPoints===Mt.Jp.Always;!Da&&la.showPoints===Mt.Jp.Auto&&(Da=ba[0].length<1e3),!Da&&!wa&&(wa=!0);let Pn=1;kt.ctx.save(),kt.ctx.rect(kt.bbox.left,kt.bbox.top,kt.bbox.width,kt.bbox.height),kt.ctx.clip(),kt.ctx.fillStyle=pn.fill(),kt.ctx.strokeStyle=pn.stroke(),kt.ctx.lineWidth=Pn;let $n=2*Math.PI,kn=qn.key,va=Fn.key,ma=la.hints.pointSize;const Ra=la.hints.pointColor.mode.isByValue;let Ua=(ma.max??ma.fixed)*ea,Ds=kt.posToVal(-Ua/2,kn),fs=kt.posToVal(kt.bbox.width/ea+Ua/2,kn),nr=kt.posToVal(kt.bbox.height/ea+Ua/2,va),ar=kt.posToVal(-Ua/2,va),Io=Ht.disp.size.values(kt,gn),ko=Ht.disp.color.values(kt,gn),ni=Ht.disp.color.alpha,Lr=wa?new Path2D:null,Br=null;for(let ir=0;ir<ba[0].length;ir++){let Ps=ba[0][ir],Ro=ba[1][ir],bo=Io[ir]*ea;if(Ps>=Ds&&Ps<=fs&&Ro>=nr&&Ro<=ar){let Hi=Tn(Ps,qn,Za,ia),ai=sa(Ro,Fn,Va,Ga);wa&&Lr.lineTo(Hi,ai),Da&&(kt.ctx.moveTo(Hi+bo/2,ai),kt.ctx.beginPath(),kt.ctx.arc(Hi,ai,bo/2,0,$n),Ra&&ko[ir]!==Br&&(Br=ko[ir],kt.ctx.fillStyle=(0,fr.alpha)(Br,ni),kt.ctx.strokeStyle=Br),kt.ctx.fill(),kt.ctx.stroke(),Ht.each(kt,gn,ir,Hi-bo/2-Pn/2,ai-bo/2-Pn/2,bo+Pn,bo+Pn))}}if(wa){let ir=la.frame(w());kt.ctx.strokeStyle=la.lineColor(ir),kt.ctx.lineWidth=la.lineWidth*ea;const{lineStyle:Ps}=la;Ps&&Ps.fill!=="solid"&&(Ps.fill==="dot"&&(kt.ctx.lineCap="round"),kt.ctx.setLineDash(Ps.dash??[10,10])),kt.ctx.stroke(Lr)}kt.ctx.restore()}),null)}let ot=at({disp:{size:{values:(Ht,fn)=>Ht.data[fn][2]},color:{values:(Ht,fn)=>Ht.data[fn][3],alpha:.5}},each:(Ht,fn,kt,gn,cn,tn,pn)=>{gn-=Ht.bbox.left,cn-=Ht.bbox.top,We.add({x:gn,y:cn,w:tn,h:pn,sidx:fn,didx:kt})}});const ft=new Ia.U;ft.setCursor({drag:{setScale:!0},dataIdx:(Ht,fn)=>{if(fn===1){const kt=us.Z.pxRatio;Ge=null;let gn=1/0,cn=Ht.cursor.left*kt,tn=Ht.cursor.top*kt;We.get(cn,tn,1,1,pn=>{if((0,Zr.Pn)(cn,tn,pn.x,pn.y,pn.x+pn.w,pn.y+pn.h)){let dn=pn.x+pn.w/2,Un=pn.y+pn.h/2,qn=dn-cn,Fn=Un-tn,Tn=Math.sqrt(qn**2+Fn**2);Tn<=pn.w/2&&Tn<=gn&&(gn=Tn,Ge=pn)}})}return Ge&&fn===Ge.sidx?Ge.didx:null},points:{size:(Ht,fn)=>Ge&&fn===Ge.sidx?Ge.w/us.Z.pxRatio:0,fill:(Ht,fn)=>"rgba(255,255,255,0.4)"}});const ht=()=>{Re.current&&(pe(void 0),Se&&Se())};let wt=null;ft.addHook("init",(Ht,fn)=>{Ht.over.style.overflow="hidden",wt=Ht.root.parentElement,Se&&wt?.addEventListener("click",Se)}),ft.addHook("destroy",Ht=>{Se&&(wt?.removeEventListener("click",Se),ht())});let Et;ft.addHook("syncRect",(Ht,fn)=>{Et=fn}),ft.addHook("setLegend",Ht=>{if(Ht.cursor.idxs!=null)for(let fn=0;fn<Ht.cursor.idxs.length;fn++){const kt=Ht.cursor.idxs[fn];if(kt!=null&&!Re.current){pe({scatterIndex:fn-1,xIndex:kt,pageX:Et.left+Ht.cursor.left,pageY:Et.top+Ht.cursor.top});return}}Re.current||pe(void 0)}),ft.addHook("drawClear",Ht=>{ht(),We=We||new Zr.lW(0,0,Ht.bbox.width,Ht.bbox.height),We.clear(),Ht.series.forEach((fn,kt)=>{kt>0&&(fn._paths=null)})}),ft.setMode(2);const At=w();let zt=J[0].x(J[0].frame(At)),Rt=zt.config,Tt=Rt.custom,_t=Tt?.scaleDistribution;ft.addScale({scaleKey:"x",isTime:!1,orientation:Mt.wN.Horizontal,direction:Mt.bQ.Right,distribution:_t?.type,log:_t?.log,linearThreshold:_t?.linearThreshold,min:Rt.min,max:Rt.max,softMin:Tt?.axisSoftMin,softMax:Tt?.axisSoftMax,centeredZero:Tt?.axisCenteredZero,decimals:Rt.decimals});let Jt=Tt.axisLabel;return ft.addAxis({scaleKey:"x",placement:Tt?.axisPlacement!==Mt.LB.Hidden?Mt.LB.Bottom:Mt.LB.Hidden,show:Tt?.axisPlacement!==Mt.LB.Hidden,grid:{show:Tt?.axisGridShow},border:{show:Tt?.axisBorderShow},theme:le,label:Jt==null||Jt===""?(0,Na.CZ)(zt,J[0].frame(At),At):Jt,formatValue:(Ht,fn)=>(0,cs.zc)(zt.display(Ht,fn))}),J.forEach((Ht,fn)=>{let kt=Ht.frame(At),gn=Ht.y(kt);const cn=Ht.lineColor(kt),tn=Og(kt,Ht.pointColor);let pn=gn.config.unit??"y",dn=gn.config,Un=dn.custom,qn=Un?.scaleDistribution;ft.addScale({scaleKey:pn,orientation:Mt.wN.Vertical,direction:Mt.bQ.Up,distribution:qn?.type,log:qn?.log,linearThreshold:qn?.linearThreshold,min:dn.min,max:dn.max,softMin:Un?.axisSoftMin,softMax:Un?.axisSoftMax,centeredZero:Un?.axisCenteredZero,decimals:dn.decimals});let Fn=Un?.axisLabel;ft.addAxis({scaleKey:pn,theme:le,placement:Un?.axisPlacement===Mt.LB.Auto?Mt.LB.Left:Un?.axisPlacement,show:Un?.axisPlacement!==Mt.LB.Hidden,grid:{show:Un?.axisGridShow},border:{show:Un?.axisBorderShow},size:Un?.axisWidth,label:Fn==null||Fn===""?(0,Na.CZ)(gn,J[fn].frame(At),At):Fn,formatValue:(Tn,sa)=>(0,cs.zc)(gn.display(Tn,sa))}),ft.addSeries({facets:[{scale:"x",auto:!0},{scale:pn,auto:!0}],pathBuilder:ot,theme:le,scaleKey:"",lineColor:(0,fr.alpha)(""+cn,1),fillColor:(0,fr.alpha)(tn,.5),show:!Un.hideFrom?.viz})}),ft};function Pu(w,J,le){return w.error||!J.length?[null]:[null,...w.series.map((pe,Se)=>{const Re=pe.frame(J);let We;const Ge=pe.pointColor(Re);return Array.isArray(Ge)?We=Ge:We=Array(Re.length).fill(Ge),[pe.x(Re).values,pe.y(Re).values,Tg(Re,pe.pointSize),We]})]}function Tg(w,J){const le=J(w);return Array.isArray(le)?le:Array(w.length).fill(le)}function Og(w,J){const le=J(w);return Array.isArray(le)?le[0]:le}const Su=10,Ig=w=>{const[J,le]=(0,P.useState)(),[pe,Se]=(0,P.useState)([]),[Re,We]=(0,P.useState)(),[Ge,at]=(0,P.useState)(),[ot,ft]=(0,P.useState)(),[ht,wt]=(0,P.useState)(!1),Et=(0,P.useRef)(!1),At=(0,yu.Z)(w.options),zt=(0,yu.Z)(w.data),Rt=()=>{Et.current=!1,wt(!1),_t(void 0)},Tt=()=>{Et.current=!Et.current,wt(Et.current)},_t=kt=>{ft(kt)},Jt=(0,P.useCallback)(()=>{const kt=()=>w.data.series,gn=Sg(w.options,kt,U.config.theme2,_t,Tt,Et);gn.error?le(gn.error):gn.series.length&&w.data.series&&(We(gn.builder),Se(gn.series),at(()=>Pu(gn,w.data.series)),le(void 0))},[w.data.series,w.options]),Ht=(0,P.useCallback)(()=>{at(()=>Pu({error:J,series:pe},w.data.series))},[w.data.series,J,pe]);(0,P.useEffect)(()=>{At!==w.options||zt?.structureRev!==w.data.structureRev?Jt():zt?.series!==w.data.series&&Ht()},[w]);const fn=()=>{const kt=[],gn=pn=>pn==null?"-":pn.toFixed(1),cn=U.config.theme2;for(let pn=0;pn<pe.length;pn++){const dn=pe[pn],Un=dn.frame(w.data.series);if(Un)for(const qn of dn.legend())qn.getDisplayValues=()=>{const Fn=w.options.legend.calcs;if(!Fn?.length)return[];const Tn=dn.y(Un),sa=Tn.display??gn;let ia=null;const Ga=(0,Or.Kx)({field:Tn,reducers:Fn});return Fn.map(Za=>{const Va=Or.TB.get(Za);let _a=sa;return Va.id===Or.gz.diffperc&&(_a=(0,hs.U)({field:{...Tn,config:{...Tn.config,unit:"percent"}},theme:cn})),(Va.id===Or.gz.count||Va.id===Or.gz.changeCount||Va.id===Or.gz.distinctCount)&&(ia||(ia=(0,hs.U)({field:{...Tn,config:{...Tn.config,unit:"none"}},theme:cn})),_a=ia),{..._a(Ga[Za]),title:Va.name,description:Va.description}})},qn.disabled=!(dn.show??!0),w.options.seriesMapping===Ac.Manual&&(qn.label=w.options.series?.[pn]?.name??`Series ${pn+1}`),qn.color=(0,fr.alpha)(dn.lineColor(Un),1),kt.push(qn)}if(!w.options.legend.showLegend)return null;const tn={flexStart:(0,k.css)`
        div {
          justify-content: flex-start !important;
        }
      `};return P.createElement(sn.AY.Legend,{placement:w.options.legend.placement,width:w.options.legend.width},P.createElement(bn.l,{className:tn.flexStart,placement:w.options.legend.placement,items:kt,displayMode:w.options.legend.displayMode}))};return J||!Re||!Ge?P.createElement("div",{className:"panel-empty"},P.createElement("p",null,J)):P.createElement(P.Fragment,null,P.createElement(sn.AY,{width:w.width,height:w.height,legend:fn()},(kt,gn)=>P.createElement(hd.N,{config:Re,data:Ge,width:kt,height:gn})),P.createElement(_n.h_,null,ot&&w.options.tooltip.mode!==Mt.f3.None&&P.createElement(jn.S,{position:{x:ot.pageX,y:ot.pageY},offset:{x:Su,y:Su},allowPointerEvents:Et.current},ht&&P.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},P.createElement(Oa.P,{onClick:Rt,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),P.createElement(Dg,{options:w.options.tooltip,allSeries:pe,manualSeriesConfigs:w.options.series,seriesMapping:w.options.seriesMapping,rowIndex:ot.xIndex,hoveredPointIndex:ot.scatterIndex,data:w.data.series}))))},Rg=new N.c(Ig).useFieldConfig(Pg(Lc)).setPanelOptions(w=>{w.addRadio({path:"seriesMapping",name:"Series mapping",defaultValue:"auto",settings:{options:[{value:"auto",label:"Auto",description:"No changes to saved model since 8.0"},{value:"manual",label:"Manual"}]}}).addCustomEditor({id:"xyPlotConfig",path:"dims",name:"",editor:pg,showIf:J=>J.seriesMapping==="auto"}).addCustomEditor({id:"series",path:"series",name:"",defaultValue:[],editor:yg,showIf:J=>J.seriesMapping==="manual"}),Wr.L(w),ur.J(w)}),Ag={"core:plugin/graphite":async()=>await e.e(7494).then(e.bind(e,80944)),"core:plugin/cloudwatch":async()=>await Promise.all([e.e(8802),e.e(8831)]).then(e.bind(e,18802)),"core:plugin/dashboard":async()=>await e.e(8389).then(e.bind(e,91409)),"core:plugin/elasticsearch":async()=>await Promise.all([e.e(1185),e.e(9897)]).then(e.bind(e,11185)),"core:plugin/opentsdb":async()=>await e.e(3168).then(e.bind(e,30728)),"core:plugin/grafana":async()=>await e.e(7537).then(e.bind(e,91971)),"core:plugin/influxdb":async()=>await Promise.all([e.e(4782),e.e(6450),e.e(5783)]).then(e.bind(e,6450)),"core:plugin/loki":async()=>await Promise.all([e.e(4639),e.e(9113),e.e(7843),e.e(1598)]).then(e.bind(e,47843)),"core:plugin/jaeger":async()=>await e.e(890).then(e.bind(e,29541)),"core:plugin/zipkin":async()=>await e.e(4023).then(e.bind(e,76090)),"core:plugin/mixed":async()=>await e.e(2001).then(e.bind(e,94661)),"core:plugin/mysql":async()=>await Promise.all([e.e(4782),e.e(4251)]).then(e.bind(e,74088)),"core:plugin/grafana-postgresql-datasource":async()=>await Promise.all([e.e(4782),e.e(534)]).then(e.bind(e,66441)),"core:plugin/mssql":async()=>await Promise.all([e.e(4782),e.e(5032)]).then(e.bind(e,37448)),"core:plugin/prometheus":async()=>await Promise.all([e.e(9113),e.e(7087),e.e(7004)]).then(e.bind(e,80983)),"core:plugin/grafana-testdata-datasource":async()=>await e.e(319).then(e.bind(e,84526)),"core:plugin/cloud-monitoring":async()=>await Promise.all([e.e(1188),e.e(4401),e.e(3549)]).then(e.bind(e,94401)),"core:plugin/azuremonitor":async()=>await Promise.all([e.e(3638),e.e(642),e.e(2364)]).then(e.bind(e,80642)),"core:plugin/tempo":async()=>await Promise.all([e.e(9479),e.e(295)]).then(e.bind(e,59479)),"core:plugin/alertmanager":async()=>await Promise.all([e.e(3638),e.e(6795)]).then(e.bind(e,56513)),"core:plugin/grafana-pyroscope-datasource":async()=>await e.e(8693).then(e.bind(e,7086)),"core:plugin/parca":async()=>await e.e(2015).then(e.bind(e,47665)),"core:plugin/text":S,"core:plugin/timeseries":D,"core:plugin/trend":T,"core:plugin/state-timeline":y,"core:plugin/status-history":C,"core:plugin/candlestick":g,"core:plugin/graph":async()=>await Promise.all([e.e(6783),e.e(1260)]).then(e.bind(e,99114)),"core:plugin/xychart":O,"core:plugin/geomap":async()=>await Promise.all([e.e(5822),e.e(8096)]).then(e.bind(e,89278)),"core:plugin/canvas":async()=>await Promise.all([e.e(4532),e.e(3330)]).then(e.bind(e,92859)),"core:plugin/dashlist":u,"core:plugin/alertlist":a,"core:plugin/annolist":o,"core:plugin/heatmap":async()=>await e.e(6987).then(e.bind(e,95445)),"core:plugin/table":b,"core:plugin/table-old":async()=>await e.e(6784).then(e.bind(e,79097)),"core:plugin/news":h,"core:plugin/live":E,"core:plugin/stat":ml,"core:plugin/datagrid":l,"core:plugin/debug":m,"core:plugin/flamegraph":c,"core:plugin/gettingstarted":d,"core:plugin/gauge":gi,"core:plugin/piechart":s,"core:plugin/bargauge":i,"core:plugin/barchart":r,"core:plugin/logs":v,"core:plugin/traces":M,"core:plugin/welcome":R,"core:plugin/nodeGraph":p,"core:plugin/histogram":f,"core:plugin/alertGroups":n};var wc=e(99109),Lg=e(83919),Bg=e(33409),wg=e(18863),Ug=e(29175),Ng=e.n(Ug),Wg=e(55104),Fg=e.n(Wg),Kg=e(19609),xu=e.n(Kg),Vg=e(79873),_g=e(88960),$g=e(36752),zg=e(16088),kg=e(71690),Hg=e(83205),Gg=e(42307),jg=e(16334),Qg=e(53737),Yg=e(10418),Mu=e(71650),Xp=e(89377),qp=e(4027),e0=e(59554),t0=e(65103),n0=e(85095),a0=e(28844),s0=e(26189),r0=e(47825),o0=e(7540),Zg=e(11512),Jg=e(40620),Xg=e(42202),qg=e(32610),Tu=e(95633),eh=e(12421),th=e(33986),nh=e(73126);const _i=Xg;_i.PanelPlugin=N.c,_i.DataSourcePlugin=x.hf,_i.AppPlugin=I.k8,_i.DataSourceApi=x.MF;const ah=["jquery.flot.crosshair","jquery.flot.events","jquery.flot.fillbelow","jquery.flot.gauge","jquery.flot.pie","jquery.flot.selection","jquery.flot.stack","jquery.flot.stackpercent","jquery.flot.time","jquery.flot"].reduce((w,J)=>({...w,[J]:{fakeDep:1}}),{}),sh={"@emotion/css":k,"@emotion/react":Lg,"@grafana/data":Zg,"@grafana/runtime":Jg,"@grafana/slate-react":Mu.ZP,"@grafana/ui":_i,"app/core/app_events":{default:Ai.h$,__useDefault:!0},"app/core/config":{default:qt.default,__useDefault:!0},"app/core/core":{appEvents:Ai.h$,contextSrv:Ai.Vt},"app/core/services/backend_srv":{BackendSrv:Ko.y$,getBackendSrv:Ko.i},"app/core/table_model":{default:qg.Z,__useDefault:!0},"app/core/time_series":{default:Tu.Z,__useDefault:!0},"app/core/time_series2":{default:Tu.Z,__useDefault:!0},"app/core/utils/datemath":be,"app/core/utils/flatten":eh,"app/core/utils/kbn":{default:th.Z,__useDefault:!0},"app/core/utils/ticks":nh,"app/features/dashboard/impression_store":{impressions:mi.Z},d3:Bg,emotion:k,i18next:wg,jquery:{default:Ng(),__useDefault:!0},...ah,lodash:{default:Z(),__useDefault:!0},moment:{default:Fg(),__useDefault:!0},prismjs:xu(),react:P,"react-dom":Vg,"react-inlinesvg":_g,"react-redux":$g,"react-router-dom":zg,"react-router":kg,redux:Hg,rxjs:Gg,"rxjs/operators":jg,slate:Qg.ZP,"slate-plain-serializer":Yg.Z,"slate-react":Mu.ZP};function $i({url:w,source:J,transformSourceMapURL:le=!1,transformAssets:pe=!0}){const Se=w.split("/public/plugins/"),Re=Se[0],We=Se[1].split("/")[0];let Ge=J;return pe&&(Ge=Ge.replace(/(\/?)(public\/plugins)/g,`${Re}/$2`),Ge=Ge.replace(/(["|'])(plugins\/.+?.css)(["|'])/g,`$1${Re}/public/$2$3`)),le&&(Ge=Ge.replace(/(\/\/#\ssourceMappingURL=)(.+)\.map/g,`$1${Re}/public/plugins/${We}/$2.map`)),Ge}var Sl=e(44756),zi=e(47932);async function rh(w,J,le){const pe=await w(J,le),Se=pe.headers.get("content-type")||"";if(Sl.Nr.test(Se)){const Re=await pe.text();let We=Re;if(Sl.YB.test(We)&&(We=ch(Re)),(0,zi.g)(pe.url)){const Ge=$i({url:pe.url,source:We});return new Response(new Blob([Ge],{type:"text/javascript"}))}return new Response(new Blob([We],{type:"text/javascript"}))}return pe}function oh(w,J,le){const pe=J.endsWith("module.js")&&!(0,zi.g)(J);try{const Se=w.apply(this,[J,le]),Re=lh(Se);return pe?(0,wc.u0)(Re):Re}catch{return Sl.xm.test(J)?`${U.config.appSubUrl??""}/public/${J}`:(console.log(`SystemJS: failed to resolve '${J}'`),J)}}function ih(w,J){if(J.endsWith(".css")&&!w){const pe=L.i3.get(J)?.default;pe&&(document.adoptedStyleSheets=[...document.adoptedStyleSheets,pe])}}function lh(w){return w.startsWith(`${Sl.OY}:`)?w:(w.endsWith("!")&&(w=w.slice(0,-1)),["css","js","json","wasm"].some(pe=>w.endsWith(pe))?w:w+".js")}function ch(w){return`(function(define) {
  ${w}
})(window.__grafana_amd_define);`}var dh=e(4261),Uc=e(45465),uh=e(22654),Ou=e(67552),Iu=e(99911);function mh(w){const J=new URL(window.location.href),le=new URL(w);return J.host===le.host}async function fh(w,J,le){let pe="";if(mh(w)?(pe=await(await fetch(w)).text(),pe=$i({url:w,source:pe,transformSourceMapURL:!0,transformAssets:!1})):(0,zi.g)(w)&&(pe=await(await fetch(w)).text(),pe=$i({url:w,source:pe,transformSourceMapURL:!0,transformAssets:!0})),pe.length===0)throw new Error("Only same domain scripts are allowed in sandboxed plugins");pe=Ru(pe),le.evaluate(pe)}async function gh(w){if((0,zi.g)(w.module)){const J=w.module;let pe=await(await fetch(J)).text();return pe=$i({url:J,source:pe,transformSourceMapURL:!0,transformAssets:!0}),pe}else{const J=(0,wc.u0)(w.module);let pe=await(await fetch(J)).text();return pe=$i({url:J,source:pe,transformSourceMapURL:!0,transformAssets:!1}),pe=Ru(pe),pe}}function Ru(w){return w.replace(/window\.location/gi,"window.locationSandbox")}function hh(w){w.evaluate(`${Iu.X.toString()};${Iu.X.name}()`)}const zo=["iframe"];var Au=e(18566),xl=e(73667);const Lu=!!U.config.featureToggles.frontendSandboxMonitorOnly;function ph(w){return!!w&&typeof w=="object"&&w?.hasOwnProperty("plugin")}function i0(w){throw new Error(`Unexpected object: ${w}. This should never happen.`)}function vh(w){return w instanceof P.Component}function ro(w,J){J={...J,source:"sandbox",monitorOnly:String(Lu)},(0,Uc.KE)(w,J)}function Nc(w,J){J={...J,source:"sandbox",monitorOnly:String(Lu)},(0,Uc.H)(w,J)}async function Eh({isAngular:w,pluginId:J}){if(!U.config.featureToggles.pluginsFrontendSandbox||w||location.search.includes("nosandbox")&&U.config.buildInfo.env==="development"||U.config.disableFrontendSandboxForPlugins.includes(J))return!1;const Se=await(0,Ou.a)(J);return!(Se.type===xl.zV.app&&Se.signatureType===xl._Z.grafana)}function yh(w){return w?.constructor?.name==="RegExp"}function Wc(w){return w&&(yh(w)&&(0,Au.qD)(w)?new RegExp(w):Array.isArray(w)?w.map(Wc):typeof w=="object"?Object.keys(w).reduce((J,le)=>(Reflect.set(J,le,Wc(Reflect.get(w,le))),J),{}):w)}const Ar=new Map,yo=!!U.config.featureToggles.frontendSandboxMonitorOnly,Bu=Symbol.for("@SANDBOX_LIVE_API_PATCHED");function bh(){return Ar.size===0&&(Dh(Ar),Ch(Ar),Ph(Ar),Th(Ar),Mh(Ar),Sh(Ar),xh(Ar),Oh(Ar),Ih(Ar),wu(Ar),Rh(Ar)),Ar}function Ml(w,J){return ro(`Plugin ${J.id} tried to set a sandboxed property`,{pluginId:J.id,attrOrMethod:String(w),entity:"window"}),yo?w:()=>{throw new Error("Plugins are not allowed to set sandboxed properties")}}function Dh(w){const J=["contentDocument","contentWindow","src","srcdoc","srcObject","srcset"];for(const pe of J){const Se=Object.getOwnPropertyDescriptor(HTMLIFrameElement.prototype,pe);if(Se){let Re=function(We,Ge){const at=Ge.id;return ro(`Plugin ${at} tried to access iframe.${pe}`,{pluginId:at,attrOrMethod:pe,entity:"iframe"}),yo?We:()=>{throw new Error("iframe."+pe+" is not allowed in sandboxed plugins")}};var le=Re;Se.value&&w.set(Se.value,Re),Se.set&&w.set(Se.set,Re),Se.get&&w.set(Se.get,Re)}}}function Ch(w){const J=Object.getOwnPropertyDescriptor(window,"console");if(J?.value){let pe=function(Se,Re){const We=Re.id;if(yo)return Se;function Ge(...at){console.log(`[plugin ${We}]`,...at)}return{log:Ge,warn:Ge,error:Ge,info:Ge,debug:Ge,table:Ge}};var le=pe;w.set(J.value,pe)}J?.set&&w.set(J.set,Ml)}function Ph(w){function J(pe,Se){const Re=Se.id;return ro(`Plugin ${Re} accessed window.alert`,{pluginId:Re,attrOrMethod:"alert",entity:"window"}),yo?pe:function(...We){console.log(`[plugin ${Re}]`,...We)}}const le=Object.getOwnPropertyDescriptor(window,"alert");le?.value&&w.set(le.value,J),le?.set&&w.set(le.set,Ml)}function Sh(w){function J(pe,Se){const Re=Se.id;return function(...Ge){for(const at of Ge){const ot=at?.toLowerCase()||"";for(const ft of zo)if(ot.includes("<"+ft)){if(ro(`Plugin ${Re} tried to set ${ft} in innerHTML`,{pluginId:Re,attrOrMethod:"innerHTML",param:ft,entity:"HTMLElement"}),yo)continue;throw new Error("<"+ft+"> is not allowed in sandboxed plugins")}}(0,ne.isFunction)(pe)&&pe.apply(this,Ge)}}const le=[Object.getOwnPropertyDescriptor(Element.prototype,"innerHTML"),Object.getOwnPropertyDescriptor(Element.prototype,"outerHTML"),Object.getOwnPropertyDescriptor(Element.prototype,"insertAdjacentHTML"),Object.getOwnPropertyDescriptor(DOMParser.prototype,"parseFromString")];for(const pe of le)pe?.set&&w.set(pe.set,J),pe?.value&&w.set(pe.value,J)}function xh(w){function J(pe,Se){const Re=Se.id;return function(Ge,at){if(Ge&&zo.includes(Ge)&&(ro(`Plugin ${Re} tried to create ${Ge}`,{pluginId:Re,attrOrMethod:"createElement",param:Ge,entity:"document"}),!yo))return document.createDocumentFragment();if((0,ne.isFunction)(pe))return pe.apply(this,[Ge,at])}}const le=Object.getOwnPropertyDescriptor(Document.prototype,"createElement");le?.value&&w.set(le.value,J)}function Mh(w){function J(Re,We){const Ge=We.id;return function(ot,ft){const ht=ot?.nodeName?.toLowerCase()||"";if(ot&&zo.includes(ht)&&(ro(`Plugin ${Ge} tried to insert ${ht}`,{pluginId:Ge,attrOrMethod:"insertChild",param:ht,entity:"HTMLElement"}),!yo))return document.createDocumentFragment();if((0,ne.isFunction)(Re))return Re.call(this,ot,ft)}}function le(Re,We){const Ge=We.id;return function(ot,ft){const ht=ft?.nodeName?.toLowerCase()||"";if(ft&&zo.includes(ht)&&(ro(`Plugin ${Ge} tried to insert ${ht}`,{pluginId:Ge,attrOrMethod:"insertAdjacentElement",param:ht,entity:"HTMLElement"}),!yo))return document.createDocumentFragment();if((0,ne.isFunction)(Re))return Re.call(this,ot,ft)}}const pe=[Object.getOwnPropertyDescriptor(Node.prototype,"insertBefore"),Object.getOwnPropertyDescriptor(Node.prototype,"replaceChild")];for(const Re of pe)Re?.value&&w.set(Re.set,J);const Se=Object.getOwnPropertyDescriptor(Element.prototype,"insertAdjacentElement");Se?.value&&w.set(Se.set,le)}function Th(w){function J(Re,We){const Ge=We.id;return function(...ot){let ft=ot;const ht=ot?.filter(wt=>!zo.includes(wt.nodeName.toLowerCase()));yo||(ft=ht),ft.length!==ht.length&&ro(`Plugin ${Ge} tried to append fobiddenElements`,{pluginId:Ge,attrOrMethod:"append",param:ot?.filter(wt=>zo.includes(wt.nodeName.toLowerCase()))?.join(",")||"",entity:"HTMLElement"}),(0,ne.isFunction)(Re)&&Re.apply(this,ft)}}function le(Re,We,Ge){const at=We.id;return function(ft){const ht=ft?.nodeName?.toLowerCase()||"";if(ft&&zo.includes(ht)&&(ro(`Plugin ${at} tried to append ${ht}`,{pluginId:at,attrOrMethod:"appendChild",param:ht,entity:"HTMLElement"}),!yo))return document.createDocumentFragment();if(Ge&&ft&&ht==="script"&&ft instanceof HTMLScriptElement){fh(ft.src,We,Ge).then(()=>{ft.onload?.call(ft,new Event("load"))}).catch(wt=>{ft.onerror?.call(ft,new ErrorEvent("error",{error:wt}))});return}if((0,ne.isFunction)(Re))return Re.call(this,ft)}}const pe=[Object.getOwnPropertyDescriptor(Element.prototype,"append"),Object.getOwnPropertyDescriptor(Element.prototype,"prepend"),Object.getOwnPropertyDescriptor(Element.prototype,"after"),Object.getOwnPropertyDescriptor(Element.prototype,"before"),Object.getOwnPropertyDescriptor(Document.prototype,"append"),Object.getOwnPropertyDescriptor(Document.prototype,"prepend")];for(const Re of pe)Re?.value&&w.set(Re.value,J);const Se=Object.getOwnPropertyDescriptor(Node.prototype,"appendChild");Se?.value&&w.set(Se.value,le)}function Oh(w){const J=Object.getOwnPropertyDescriptor(Worker.prototype,"postMessage");function le(pe){return function(...Re){try{const We=(0,ne.cloneDeep)(Re);(0,ne.isFunction)(pe)&&pe.apply(this,We)}catch{throw new Error("postMessage arguments are invalid objects")}}}J?.value&&w.set(J.value,le)}function Ih(w){const J=Object.getOwnPropertyDescriptor(Document.prototype,"defaultView");J?.get&&w.set(J.get,()=>()=>window);const le=["write"];for(const pe of le){const Se=Object.getOwnPropertyDescriptor(Document.prototype,pe);Se?.set&&w.set(Se.set,Ml),Se?.value&&w.set(Se.value,Ml)}}async function wu(w){const J=Reflect.get(window,"monaco");if(!J||Object.hasOwn(J,Bu))return;const le=J.languages.setMonarchTokensProvider;function pe(){return function(...Se){return Se.length!==2?le.apply(J,Se):le.call(J,Se[0],Wc(Se[1]))}}w.set(J.languages.setMonarchTokensProvider,pe),Reflect.set(J,Bu,{})}async function Rh(w){const J=Object.getOwnPropertyDescriptor(window,"postMessage");function le(pe){return function(...Re){try{const We=(0,ne.cloneDeep)(Re);(0,ne.isFunction)(pe)&&pe.apply(this,We)}catch{throw new Error("postMessage arguments are invalid objects")}}}J?.value&&w.set(J.value,le)}function Ah(w){wu(Ar)}const Ei=Symbol.for("@@SANDBOX_LIVE_VALUE"),Uu=!!U.config.featureToggles.frontendSandboxMonitorOnly;function Lh(w,J){const le=Reflect.get(w,"nodeName");if(le==="body"||w===document.body)return document.body;if(le==="head"||w===document.head||w===document.documentElement)return w;if(zo.includes(le)&&(ro("<"+le+"> is not allowed in sandboxed plugins",{pluginId:J,param:le}),!Uu))throw new Error("<"+le+"> is not allowed in sandboxed plugins");if(Wh(w,J)||w.parentNode===document.body||w.closest("#reactRoot")===null||Uu)return w;{const pe=document.createElement(le);return pe.dataset.grafanaPluginSandboxElement="true",pe}}function Bh(w){if(typeof w=="object"&&w instanceof Element)try{return w.nodeName!==void 0}catch{return!1}return!1}function wh(w){const J=Reflect.get(w,"style");Object.hasOwn(J,Ei)||Reflect.defineProperty(J,Ei,{})}function Uh(w){w&&(Object.hasOwn(w,Ei)||((0,Au.qD)(w)&&!(w instanceof Function)&&(vh(w)||w instanceof x.MF)?Reflect.defineProperty(w,Ei,{}):w===xu().languages&&Object.defineProperty(w,Ei,{})))}function Nh(w){return Object.hasOwn(w,Ei)}function Wh(w,J){return!document.contains(w)||w.closest(`[data-plugin-sandbox=${J}]`)!==null}let no;function l0(){return no||(no=document.createElement("div"),no.setAttribute("id","grafana-plugin-sandbox-body"),no.setAttribute("data-plugin-sandbox","true"),no.dataset.pluginSandbox="sandboxed-plugin",no.style.width="100%",no.style.height="0%",no.style.overflow="hidden",no.style.top="0",no.style.left="0",document.body.appendChild(no)),no}let Nu=!1;function Fh(){Nu||(Nu=!0,Kh())}function Kh(){const w=window.history.replaceState;Object.defineProperty(window.history,"replaceState",{value:function(...J){let le=J;try{le=(0,ne.cloneDeep)(J)}catch(pe){ro("Error cloning args in window.history.replaceState",{error:String(pe)})}return Reflect.apply(w,this,le)},writable:!0,configurable:!0,enumerable:!1})}var Vh=e(24716);async function _h(w,J){if(!ph(w))return w;const le=await Promise.resolve(w.plugin);if(Reflect.has(le,"panel")&&Reflect.set(le,"panel",ki(Reflect.get(le,"panel"),J)),Reflect.has(le,"components")){const pe=Reflect.get(le,"components");Object.entries(pe).forEach(([Se,Re])=>{Reflect.set(pe,Se,ki(Re,J))}),Reflect.set(le,"components",pe)}if(Reflect.has(le,"root")&&Reflect.set(le,"root",ki(Reflect.get(le,"root"),J)),Reflect.has(le,"extensionConfigs")){const pe=Reflect.get(le,"extensionConfigs");for(const Se of pe)Reflect.has(Se,"component")&&Reflect.set(Se,"component",ki(Reflect.get(Se,"component"),J));Reflect.set(le,"extensionConfigs",pe)}if(Reflect.has(le,"configPages")){const pe=Reflect.get(le,"configPages")??[];for(const[Se,Re]of Object.entries(pe))!Re.body||!(0,ne.isFunction)(Re.body)||Reflect.set(pe,Se,{...Re,body:ki(Re.body,J)});Reflect.set(le,"configPages",pe)}return w}const ki=(w,J)=>{const le=P.memo(pe=>P.createElement("div",{"data-plugin-sandbox":J.id,style:{height:J.type===xl.zV.app||J.type===xl.zV.panel?"100%":"auto"}},P.createElement(w,{...pe})));return le.displayName=`GrafanaSandbox(${w.displayName||w.name||"Component"})`,le},Fc=new Map,Wu={};async function $h({pluginId:w}){Fh();try{const J=await(0,Ou.a)(w);return Fc.has(w)||Fc.set(w,zh(J)),Fc.get(w)}catch(J){const le=new Error(`Could not import plugin ${w} inside sandbox: `+J);throw Nc(le,{pluginId:w,error:String(J)}),le}}async function zh(w){return new Promise(async(J,le)=>{const pe=bh();let Se;function Re(Ge){if(Bh(Ge)){const ft=Lh(Ge,w.id);return wh(ft),ft}else Uh(Ge);const at=pe.get(Ge);if(at)return at(Ge,w,Se);const ot=Ah(Ge);return ot||Ge}Se=(0,dh.Z)(window,{distortionCallback:Re,defaultPolicy:uh.k,liveTargetCallback:Nh,endowments:Object.getOwnPropertyDescriptors({locationSandbox:window.location,setImmediate:function(Ge,...at){return setTimeout(Ge,0,...at)},get monaco(){return Reflect.get(window,"monaco")},get Prism(){return Reflect.get(window,"Prism")},get jQuery(){return Reflect.get(window,"jQuery")},get $(){return Reflect.get(window,"jQuery")},get grafanaBootData(){if(Wu[w.id+"-grafanaBootData"]||(Wu[w.id+"-grafanaBootData"]=!0,(0,Uc.PN)("Plugin using window.grafanaBootData",{sandbox:"true",pluginId:w.id,guessedPluginName:w.id,parent:"window",packageName:"window",key:"grafanaBootData"})),U.config.buildInfo.env==="development")throw new Error(`Error in ${w.id}: Plugins should not use window.grafanaBootData. Use "config" from "@grafana/runtime" instead.`);return console.error(`${w.id.toUpperCase()}: Plugins should not use window.grafanaBootData. Use "config" from "@grafana/runtime" instead.`),U.config.bootData},async define(Ge,at,ot){let ft,ht;Array.isArray(Ge)?(ft=Ge,ht=at):(ft=at,ht=ot);try{const wt=kh(ft),Et=ht.apply(null,wt),At=await _h(Et,w);J(At)}catch(wt){const Et=new Error(`Could not execute plugin's define ${w.id}: `+wt);Nc(Et,{pluginId:w.id,error:String(wt)}),le(Et)}}})}),hh(Se);let We="";try{We=await gh(w)}catch(Ge){le(new Error(`Could not load plugin code ${w.id}: `+Ge))}try{Se.evaluate(We)}catch(Ge){const at=new Error(`Could not run plugin ${w.id} inside sandbox: `+Ge);Nc(at,{pluginId:w.id,error:String(Ge)}),le(at)}})}function kh(w){const J=[];for(const le of w){let pe=Vh.g.get(le);if(pe?.__useDefault&&(pe=pe.default),!pe)throw new Error(`[sandbox] Could not resolve dependency ${le}`);J.push(pe)}return J}const Hh=(0,zi.t)(sh);L.i3.addImportMap({imports:Hh});const ti=L.i3.constructor.prototype;ti.shouldFetch=()=>!0;const Gh=ti.fetch;ti.fetch=function(w,J){return rh(Gh,w,J)};const jh=ti.resolve;ti.resolve=oh.bind(ti,jh),ti.onload=ih;async function Kc({path:w,version:J,isAngular:le,pluginId:pe}){J&&(0,wc.Vf)({path:w,version:J});const Se=Ag[w];return Se?typeof Se=="function"?await Se():Se:await Eh({isAngular:le,pluginId:pe})?$h({pluginId:pe}):L.i3.import(w)}function Qh(w){return Kc({path:w.module,version:w.info?.version,isAngular:w.angular?.detected,pluginId:w.id}).then(J=>{if(J.plugin){const le=J.plugin;return le.meta=w,le}if(J.Datasource){const le=new x.hf(J.Datasource);return le.setComponentsFromLegacyExports(J),le.meta=w,le}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")})}function Yh(w){return Kc({path:w.module,version:w.info?.version,isAngular:w.angular?.detected,pluginId:w.id}).then(J=>{const le=J.plugin?J.plugin:new I.k8;return le.init(w),le.meta=w,le.setComponentsFromLegacyExports(J),le})}},24716:(G,A,e)=>{"use strict";e.d(A,{g:()=>n});const n=new Map([])},84482:(G,A,e)=>{"use strict";e.d(A,{O:()=>i,d:()=>g});var n=e(73667),a=e(20229),o=e(67552),r=e(73243);async function i(u){const l=await(0,o.a)(u);let m;if(l.type===n.zV.app&&(m=await(0,r.Av)(l)),l.type===n.zV.datasource&&(m=await(0,r.nL)(l)),l.type===n.zV.panel&&(m=await(0,a._2)(l)),l.type===n.zV.renderer&&(m={meta:l}),!m)throw new Error("Unknown Plugin type: "+l.type);return m}function g(u,l,m){let d={...u},f;function E(h,p){return!p.startsWith(h.url??"")||f&&(f.url?.length??0)>(h.url?.length??0)?h:(f&&(f.active=!1),f={...h,active:!0},f)}function v(h,p=0){if(p>10)return h;if(h.children){const s=h.children.map(y=>v(y,p+1));return{...E(h,m),children:s}}return E(h,m)}return d.children=(d?.children??[]).map(v),{main:d,node:f??d}}},21644:(G,A,e)=>{"use strict";e.d(A,{$S:()=>v,Ns:()=>h,PL:()=>s,Uk:()=>b,YT:()=>d,ZP:()=>O,aw:()=>y,p$:()=>C,qD:()=>p,rf:()=>c,z0:()=>S,zW:()=>f,zc:()=>E});var n=e(20079),a=e(56375),o=e.n(a),r=e(12537),i=e(85745),g=e(67954),u=e(49683);const l={orgId:g.default.bootData.user.orgId,timeZone:g.default.bootData.user.timezone,weekStart:g.default.bootData.user.weekStart,fiscalYearStartMonth:0,orgsAreLoading:!1,sessionsAreLoading:!1,teamsAreLoading:!1,isUpdating:!1,orgs:[],sessions:[],teams:[],user:null},m=(0,n.oM)({name:"user/profile",initialState:l,reducers:{updateTimeZone:(x,I)=>{x.timeZone=I.payload.timeZone},updateWeekStart:(x,I)=>{x.weekStart=I.payload.weekStart},updateFiscalYearStartMonth:(x,I)=>{x.fiscalYearStartMonth=I.payload.fiscalYearStartMonth},setUpdating:(x,I)=>{x.isUpdating=I.payload.updating},userLoaded:(x,I)=>{x.user=I.payload.user},initLoadTeams:(x,I)=>{x.teamsAreLoading=!0},teamsLoaded:(x,I)=>{x.teams=I.payload.teams,x.teamsAreLoading=!1},initLoadOrgs:(x,I)=>{x.orgsAreLoading=!0},orgsLoaded:(x,I)=>{x.orgs=I.payload.orgs,x.orgsAreLoading=!1},initLoadSessions:(x,I)=>{x.sessionsAreLoading=!0},sessionsLoaded:(x,I)=>{const L=I.payload.sessions.sort((P,N)=>Number(N.isActive)-Number(P.isActive));x.sessions=L.map(P=>({id:P.id,isActive:P.isActive,seenAt:(0,r.E8)(P.seenAt),createdAt:P.createdAt,clientIp:P.clientIp,browser:P.browser,browserVersion:P.browserVersion,os:P.os,osVersion:P.osVersion,device:P.device})),x.sessionsAreLoading=!1},userSessionRevoked:(x,I)=>{x.sessions=x.sessions.filter(L=>L.id!==I.payload.tokenId),x.isUpdating=!1}}}),c=x=>async I=>{(0,a.set)(u.Vt,"user.fiscalYearStartMonth",x),I(T({fiscalYearStartMonth:x}))},d=x=>async I=>{(!(0,a.isString)(x)||(0,a.isEmpty)(x))&&(x=g.default?.bootData?.user?.timezone),(0,a.set)(u.Vt,"user.timezone",x),I(D({timeZone:x}))},f=x=>async I=>{(!(0,a.isString)(x)||(0,a.isEmpty)(x))&&(x=g.default?.bootData?.user?.weekStart),(0,a.set)(u.Vt,"user.weekStart",x),I(M({weekStart:x})),(0,i.Ls)(x)},{setUpdating:E,initLoadOrgs:v,orgsLoaded:h,initLoadTeams:p,teamsLoaded:s,userLoaded:y,userSessionRevoked:C,initLoadSessions:b,sessionsLoaded:S,updateTimeZone:D,updateWeekStart:M,updateFiscalYearStartMonth:T}=m.actions,R=m.reducer,O={user:m.reducer}},18435:(G,A,e)=>{"use strict";e.d(A,{Z:()=>n,i:()=>a});const n=o=>o.timeZone,a=o=>o.fiscalYearStartMonth},85726:(G,A,e)=>{"use strict";e.d(A,{S:()=>a,f:()=>o});class n{constructor(){this.extraRenderActions=[]}addExtraRenderAction(i){this.extraRenderActions=this.extraRenderActions.concat(i)}getAllExtraRenderAction(){return this.extraRenderActions}}const a=new n,o=new n},84457:(G,A,e)=>{"use strict";e.d(A,{x:()=>_,t:()=>z});var n=e(70318),a=e.n(n),o=e(56375),r=e(53136),i=e.n(r),g=e(85960),u=e(81223),l=e(93821),m=e(16293),c=e(23757),d=e(45878),f=e(47475),E=e(92369),v=e(81502),h=e(92289),p=e(67192),s=e(8958),y=e(67983),C=e(8907),b=e(61387),S=e(95329),D=e(45864),M=e(68460),T=e(85726),R=e(66681),O=e(47257),x=e(97666),I=e(24956),L=e(74321),P=e(40715);const N=K=>{const{query:Y,queries:k,onChange:q,collapsedText:X,renderExtras:te,disabled:se}=K,de=(0,O.wW)(U),[re,fe]=(0,g.useState)(!1),[ie,oe]=(0,g.useState)(null),ue=ye=>{fe(!0)},me=ye=>{if(fe(!1),ie){oe(null);return}Y.refId!==ye&&q({...Y,refId:ye})},ge=ye=>{const Te=ye.currentTarget.value.trim();if(Te.length===0){oe("An empty query name is not allowed");return}for(const nt of k)if(nt!==Y&&Te===nt.refId){oe("Query name already exists");return}ie&&oe(null)},Ue=ye=>{me(ye.currentTarget.value.trim())},De=ye=>{ye.key==="Enter"&&me(ye.currentTarget.value)},Pe=ye=>{ye.target.select()};return g.createElement(g.Fragment,null,g.createElement("div",{className:de.wrapper},!re&&g.createElement("button",{className:de.queryNameWrapper,"aria-label":E.wl.components.QueryEditorRow.title(Y.refId),title:"Edit query name",onClick:ue,"data-testid":"query-name-div",type:"button"},g.createElement("span",{className:de.queryName},Y.refId),g.createElement(x.J,{name:"pen",className:de.queryEditIcon,size:"sm"})),re&&g.createElement(g.Fragment,null,g.createElement(I.I,{type:"text",defaultValue:Y.refId,onBlur:Ue,autoFocus:!0,onKeyDown:De,onFocus:Pe,invalid:ie!==null,onChange:ge,className:de.queryNameInput,"data-testid":"query-name-input"}),ie&&g.createElement(L.S,{horizontal:!0},ie)),F(K,de),te&&g.createElement("div",{className:de.itemWrapper},te()),se&&g.createElement("em",{className:de.contextInfo},"Disabled")),X&&g.createElement("div",{className:de.collapsedText},X))},F=(K,Y)=>{const{alerting:k,dataSource:q,onChangeDataSource:X}=K;return X?g.createElement("div",{className:Y.itemWrapper},g.createElement(P.q,{variables:!0,alerting:k,current:q.name,onChange:X})):g.createElement("em",{className:Y.contextInfo},"(",q.name,")")},U=K=>({wrapper:(0,R.css)`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${K.spacing(.5)};
      overflow: hidden;
    `,queryNameWrapper:(0,R.css)`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${K.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${K.spacing(.5)};
      margin: 0;
      background: transparent;
      overflow: hidden;

      &:hover {
        background: ${K.colors.action.hover};
        border: 1px dashed ${K.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${K.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,queryName:(0,R.css)`
      font-weight: ${K.typography.fontWeightMedium};
      color: ${K.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${K.spacing(.5)};
    `,queryEditIcon:(0,R.cx)((0,R.css)`
        margin-left: ${K.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),queryNameInput:(0,R.css)`
      max-width: 300px;
      margin: -4px 0;
    `,collapsedText:(0,R.css)`
      font-weight: ${K.typography.fontWeightRegular};
      font-size: ${K.typography.bodySmall.fontSize};
      color: ${K.colors.text.secondary};
      padding-left: ${K.spacing(1)};
      align-items: center;
      overflow: hidden;
      font-style: italic;
      white-space: nowrap;
      text-overflow: ellipsis;
    `,contextInfo:(0,R.css)`
      font-size: ${K.typography.bodySmall.fontSize};
      font-style: italic;
      color: ${K.colors.text.secondary};
      padding-left: 10px;
      padding-right: 10px;
    `,itemWrapper:(0,R.css)`
      display: flex;
      margin-left: 4px;
    `});function j({error:K}){const Y=(0,O.wW)(V),k=K?.message??K?.data?.message??"Query error";return g.createElement("div",{className:Y.wrapper},g.createElement("div",{className:Y.icon},g.createElement(x.J,{name:"exclamation-triangle"})),g.createElement("div",{className:Y.message},k,K.traceId!=null&&g.createElement(g.Fragment,null,g.createElement("br",null)," ",g.createElement("span",null,"(Trace ID: ",K.traceId,")"))))}const V=K=>({wrapper:(0,R.css)({marginTop:K.spacing(.5),background:K.colors.background.secondary,display:"flex"}),icon:(0,R.css)({background:K.colors.error.main,color:K.colors.error.contrastText,padding:K.spacing(1)}),message:(0,R.css)({fontSize:K.typography.bodySmall.fontSize,fontFamily:K.typography.fontFamilyMonospace,padding:K.spacing(1)})});class _ extends g.PureComponent{constructor(){super(...arguments),this.element=null,this.angularScope=null,this.angularQueryEditor=null,this.dataSourceSrv=(0,v.F)(),this.id="",this.state={datasource:null,hasTextEditMode:!1,data:void 0,isOpen:!0,showingHelp:!1},this.renderAngularQueryEditor=()=>{if(!this.element)return;this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null);const Y=(0,h.w)(),k='<plugin-component type="query-ctrl" />',q={ctrl:this.getAngularQueryComponentScope()};this.angularQueryEditor=Y.load(this.element,q,k),this.angularScope=q.ctrl},this.onOpen=()=>{this.renderAngularQueryEditor()},this.renderPluginEditor=()=>{const{query:Y,onChange:k,queries:q,onRunQuery:X,onAddQuery:te,app:se=u.zj.PanelEditor,history:de}=this.props,{datasource:re,data:fe}=this.state;if(this.isWaitingForDatasourceToLoad())return null;if(re?.components?.QueryCtrl)return g.createElement("div",{ref:ie=>this.element=ie});if(re){let ie=this.getReactQueryEditor(re);if(ie)return g.createElement(l.n,{instanceSettings:this.props.dataSource},g.createElement(ie,{key:re?.name,query:Y,datasource:re,onChange:k,onRunQuery:X,onAddQuery:te,data:fe,range:(0,D.$t)().timeRange(),queries:q,app:se,history:de}))}return g.createElement("div",null,g.createElement(S.cC,{i18nKey:"query-operation.query-editor-not-exported"},"Data source plugin does not export any Query Editor component"))},this.onToggleEditMode=(Y,k)=>{Y.stopPropagation(),this.angularScope&&this.angularScope.toggleEditorMode&&(this.angularScope.toggleEditorMode(),this.angularQueryEditor?.digest(),k.isOpen||k.onOpen())},this.onRemoveQuery=()=>{const{onRemoveQuery:Y,query:k,onQueryRemoved:q}=this.props;Y(k),q&&q()},this.onCopyQuery=()=>{const{query:Y,onAddQuery:k,onQueryCopied:q}=this.props,X=(0,o.cloneDeep)(Y);k(X),q&&q()},this.onDisableQuery=()=>{const{query:Y,onChange:k,onRunQuery:q,onQueryToggled:X}=this.props;k({...Y,hide:!Y.hide}),q(),X&&X(Y.hide)},this.onToggleHelp=()=>{this.setState(Y=>({showingHelp:!Y.showingHelp}))},this.onClickExample=Y=>{Y.datasource===void 0&&(Y.datasource={type:this.props.dataSource.type,uid:this.props.dataSource.uid}),this.props.onChange({...Y,refId:this.props.query.refId}),this.onToggleHelp()},this.renderWarnings=()=>{const{data:Y,query:k}=this.props,X=(z(Y,k.refId)?.series??[]).reduce((re,fe)=>{if(!fe.meta?.notices)return re;const ie=(0,o.filter)(fe.meta.notices,{severity:"warning"})??[];return re.concat(ie)},[]),te=(0,o.uniqBy)(X,"text");if(!(te.length>0))return null;const de=te.map(re=>re.text).join(`
`);return g.createElement(p.C,{color:"orange",icon:"exclamation-triangle",text:g.createElement(g.Fragment,null,te.length," ",i()("warning",te.length)),tooltip:de})},this.renderExtraActions=()=>{const{query:Y,queries:k,data:q,onAddQuery:X,dataSource:te}=this.props,se=T.f.getAllExtraRenderAction().map((de,re)=>de({query:Y,queries:k,timeRange:q.timeRange,onAddQuery:X,dataSource:te,key:re})).filter(Boolean);return se.push(this.renderWarnings()),se},this.renderActions=Y=>{const{query:k,hideDisableQuery:q=!1}=this.props,{hasTextEditMode:X,datasource:te,showingHelp:se}=this.state,de=!!k.hide,re=te?.components?.QueryEditorHelp;return g.createElement(g.Fragment,null,re&&g.createElement(C.V,{title:(0,S.t)("query-operation.header.datasource-help","Show data source help"),icon:"question-circle",onClick:this.onToggleHelp,active:se}),X&&g.createElement(C.y,{title:(0,S.t)("query-operation.header.toggle-edit-mode","Toggle text edit mode"),icon:"pen",onClick:fe=>{this.onToggleEditMode(fe,Y)}}),this.renderExtraActions(),g.createElement(C.y,{title:(0,S.t)("query-operation.header.duplicate-query","Duplicate query"),icon:"copy",onClick:this.onCopyQuery}),q?null:g.createElement(C.V,{title:(0,S.t)("query-operation.header.disable-query","Disable query"),icon:de?"eye-slash":"eye",active:de,onClick:this.onDisableQuery}),g.createElement(C.y,{title:(0,S.t)("query-operation.header.remove-query","Remove query"),icon:"trash-alt",onClick:this.onRemoveQuery}))},this.renderHeader=Y=>{const{alerting:k,query:q,dataSource:X,onChangeDataSource:te,onChange:se,queries:de,renderHeaderExtras:re}=this.props;return g.createElement(N,{query:q,queries:de,onChangeDataSource:te,dataSource:X,disabled:q.hide,onClick:fe=>this.onToggleEditMode(fe,Y),onChange:se,collapsedText:Y.isOpen?null:this.renderCollapsedText(),renderExtras:re,alerting:k})}}componentDidMount(){const{data:Y,query:k,id:q}=this.props,X=z(Y,k.refId);this.id=(0,o.uniqueId)(q+"_"),this.setState({data:X}),this.loadDatasource()}componentWillUnmount(){this.angularQueryEditor&&this.angularQueryEditor.destroy()}getAngularQueryComponentScope(){const{query:Y,queries:k}=this.props,{datasource:q}=this.state,X=new M.rY({targets:k}),te={},se=this;return{datasource:q,target:Y,panel:X,dashboard:te,refresh:()=>{Y.hide!==se.props.query.hide&&(Y.hide=se.props.query.hide),this.props.onChange(Y),this.props.onRunQuery()},render:()=>()=>console.log("legacy render function called, it does nothing"),events:this.props.eventBus||new m.F,range:(0,D.$t)().timeRange()}}getInterpolatedDataSourceUID(){if(this.props.query.datasource){const Y=this.dataSourceSrv.getInstanceSettings(this.props.query.datasource);return Y?.rawRef?.uid??Y?.uid}return this.props.dataSource.rawRef?.uid??this.props.dataSource.uid}async loadDatasource(){let Y;const k=this.getInterpolatedDataSourceUID();try{Y=await this.dataSourceSrv.get(k)}catch{Y=await this.dataSourceSrv.get()}typeof this.props.onDataSourceLoaded=="function"&&this.props.onDataSourceLoaded(Y),this.setState({datasource:Y,queriedDataSourceIdentifier:k,hasTextEditMode:(0,o.has)(Y,"components.QueryCtrl.prototype.toggleEditorMode")})}componentDidUpdate(Y){const{datasource:k,queriedDataSourceIdentifier:q}=this.state,{data:X,query:te}=this.props;if(Y.id!==this.props.id&&(this.id=(0,o.uniqueId)(this.props.id+"_")),X!==Y.data){const se=z(X,te.refId);this.setState({data:se}),this.angularScope&&(this.angularScope.range=(0,D.$t)().timeRange()),this.angularQueryEditor&&se&&H(this.angularScope,se,this.angularQueryEditor)}if(k&&q!==this.getInterpolatedDataSourceUID()){this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null),this.loadDatasource();return}!this.element||this.angularQueryEditor||this.renderAngularQueryEditor()}getReactQueryEditor(Y){if(Y)switch(this.props.app){case u.zj.Explore:return Y.components?.ExploreMetricsQueryField||Y.components?.ExploreLogsQueryField||Y.components?.ExploreQueryField||Y.components?.QueryEditor;case u.zj.PanelEditor:case u.zj.Dashboard:default:return Y.components?.QueryEditor}}isWaitingForDatasourceToLoad(){return this.getInterpolatedDataSourceUID()!==this.state.queriedDataSourceIdentifier}renderCollapsedText(){const{datasource:Y}=this.state;return Y?.getQueryDisplayText?Y.getQueryDisplayText(this.props.query):this.angularScope&&this.angularScope.getCollapsedText?this.angularScope.getCollapsedText():null}render(){const{query:Y,index:k,visualization:q,collapsable:X}=this.props,{datasource:te,showingHelp:se,data:de}=this.state,re=Y.hide,fe=a()("query-editor-row",{"query-editor-row--disabled":re,"gf-form-disabled":re});if(!te)return null;const ie=this.renderPluginEditor(),oe=te.components?.QueryEditorHelp;return g.createElement("div",{"data-testid":"query-editor-row","aria-label":E.wl.components.QueryEditorRows.rows},g.createElement(b.t,{id:this.id,draggable:!0,collapsable:X,index:k,headerElement:this.renderHeader,actions:this.renderActions,onOpen:this.onOpen},g.createElement("div",{className:fe,id:this.id},g.createElement(s.z4,null,se&&oe&&g.createElement(y.h,null,g.createElement(oe,{onClickExample:ue=>this.onClickExample(ue),query:this.props.query,datasource:te})),ie),de?.error&&de.error.refId===Y.refId&&g.createElement(j,{error:de.error}),q)))}}function H(K,Y,k){if(Y.state===c.Gu.Done){const q=Y.series.map(X=>(0,d.Zr)(X));K.events.emit(f.Kh.dataReceived,q)}else Y.state===c.Gu.Error&&K.events.emit(f.Kh.dataError,Y.error);setTimeout(k.digest)}function z(K,Y){const k=K.series.filter(se=>se.refId===Y);if(K.state!==c.Gu.Loading&&(K.error||K.errors?.length)&&!K.series.length)return{...K,state:c.Gu.Error};let q=K.state,X=K.errors?.find(se=>se.refId===Y);!X&&K.error&&(X=K.error.refId===Y?K.error:void 0),q!==c.Gu.Loading&&(X?q=c.Gu.Error:K.state===c.Gu.Error&&(q=c.Gu.Done));const te=K.timeRange;return{...K,state:q,series:k,error:X,errors:X?[X]:void 0,timeRange:te}}},9739:(G,A,e)=>{"use strict";e.d(A,{Tl:()=>oe,kt:()=>re});var n=e(93231),a=e(64365),o=e(34269),r=e(59069),i=e(55670),g=e(98231),u=e(23136),l=e(15055),m=e(53773),c=e(87550),d=e(95135),f=e(24596),E=e(2384),v=e(67954),h=e(56375);function p(ue){let me=[];const ge=(0,h.partition)(ue,"id"),Ue=(0,h.groupBy)(ge[0],"id");return me=(0,h.map)(Ue,De=>De.length>1&&!(0,h.every)(De,s)?(0,h.find)(De,Pe=>Pe.eventType!=="panel-alert"):(0,h.head)(De)),me=(0,h.concat)(me,ge[1]),me}function s(ue){return ue.eventType==="panel-alert"}var y=e(45864),C=e(16226),b=e(85431),S=e(85445),D=e(59615);class M{canWork({dashboard:me,range:ge}){return!(!me.id||ge.raw.to!=="now"||!me.panels.find(Ue=>!!Ue.alert))}work(me){if(!this.canWork(me))return(0,D.H_)();const{dashboard:ge}=me;return(0,C.D)((0,S.i)().get("/api/alerts/states-for-dashboard",{dashboardId:ge.id},`dashboard-query-runner-alert-states-${ge.id}`)).pipe((0,g.U)(Ue=>({alertStates:Ue,annotations:[]})),(0,b.K)(D.Rc))}}var T=e(21964),R=e(25066),O=e(18719),x=e(90857),I=e(81502),L=e(63835),P=e(14914),N=e(1283);class F{canRun(me){return me?!!(!me.annotationQuery||me.annotations):!1}run({annotation:me,datasource:ge,dashboard:Ue,range:De}){if(!this.canRun(ge))return(0,T.of)([]);const Pe={};return(0,N.r)({dashboard:Ue,range:De,panel:Pe},ge,me).pipe((0,g.U)(ye=>ye.events??[]),(0,b.K)(D.h1))}}var U=e(76863);class j{canRun(me){return me?(0,U.yr)(me)?!0:!!(me.annotationQuery&&!me.annotations):!1}run({annotation:me,datasource:ge,dashboard:Ue,range:De}){return this.canRun(ge)?(0,C.D)(ge.annotationQuery({range:De,rangeRaw:De.raw,annotation:me,dashboard:Ue})).pipe((0,b.K)(D.h1)):(0,T.of)([])}}class V{constructor(me=[new j,new F]){this.runners=me}canWork({dashboard:me}){return!!me.annotations.list.find(V.getAnnotationsToProcessFilter)}work(me){if(!this.canWork(me))return(0,D.H_)();const{dashboard:ge,range:Ue}=me;let De=ge.annotations.list.filter(V.getAnnotationsToProcessFilter);x.config.publicDashboardAccessToken&&De.length>0&&(De=[De[0]]);const Pe=De.map(ye=>{let Te;if(x.config.publicDashboardAccessToken){const nt=new L.k;Te=(0,T.of)(nt).pipe((0,b.K)(D.hs))}else Te=(0,C.D)((0,I.F)().get(ye.datasource)).pipe((0,b.K)(D.hs));return Te.pipe((0,R.z)(nt=>{const ct=this.runners.find(he=>he.canRun(nt));return ct?(ge.events.publish(new P.z(ye)),ct.run({annotation:ye,datasource:nt,dashboard:ge,range:Ue}).pipe((0,u.R)(re().cancellations().pipe((0,O.h)(he=>he===ye))),(0,g.U)(he=>(ge.snapshot&&(ye.snapshotData=(0,h.cloneDeep)(he)),x.config.publicDashboardAccessToken?he:(0,D.pG)(ye,he))),(0,c.x)(()=>{ge.events.publish(new P.RB(ye))}))):(0,T.of)([])}))});return(0,r.T)(Pe).pipe((0,l.J)(),(0,m.u)((ye,Te)=>ye.concat(Te)),(0,g.U)(ye=>({annotations:ye,alertStates:[]})))}static getAnnotationsToProcessFilter(me){return me.enable&&!me.snapshotData}}var _=e(22674),H=e(5108),z=e(41879),K=e(46002),Y=e(9001),k=e(11735),q=e(95162);class X{constructor(){this.hasAlertRules={}}canWork({dashboard:me,range:ge}){return!(!me.uid||x.config.publicDashboardAccessToken||ge.raw.to!=="now"||this.hasAlertRules[me.uid]===!1||!(z.contextSrv.hasPermission(q.AccessControlAction.AlertingRuleRead)&&z.contextSrv.hasPermission(q.AccessControlAction.AlertingRuleExternalRead)))}work(me){if(!this.canWork(me))return(0,D.H_)();const{dashboard:ge}=me;return(0,C.D)((0,S.i)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:ge.uid},`dashboard-query-runner-unified-alert-states-${ge.id}`)).pipe((0,g.U)(Ue=>{if(Ue.status==="success"){this.hasAlertRules[ge.uid]=!1;const De={};return Ue.data.groups.forEach(Pe=>Pe.rules.forEach(ye=>{if((0,Y.x_)(ye)&&ye.annotations&&ye.annotations[K.q6.panelID]){this.hasAlertRules[ge.uid]=!0;const Te=Number(ye.annotations[K.q6.panelID]),nt=(0,k.n)(ye.state);De[Te]?nt===H.Z.Alerting&&De[Te].state!==H.Z.Alerting?De[Te].state=H.Z.Alerting:nt===H.Z.Pending&&De[Te].state!==H.Z.Alerting&&De[Te].state!==H.Z.Pending&&(De[Te].state=H.Z.Pending):De[Te]={state:nt,id:Object.keys(De).length,panelId:Te,dashboardId:ge.id}}})),{alertStates:Object.values(De),annotations:[]}}throw new Error("Unexpected alert rules response.")}),(0,b.K)(D.Rc))}}class te{constructor(me,ge=(0,y.$t)(),Ue=[v.config.unifiedAlertingEnabled?new X:new M,new _.g,new V]){this.dashboard=me,this.timeSrv=ge,this.workers=Ue,this.run=this.run.bind(this),this.getResult=this.getResult.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.executeRun=this.executeRun.bind(this),this.results=new n.t(1),this.runs=new a.x,this.cancellationStream=new a.x,this.runsSubscription=this.runs.subscribe(De=>this.executeRun(De)),this.eventsSubscription=me.events.subscribe(E.U5,De=>{this.run({dashboard:this.dashboard,range:this.timeSrv.timeRange()})})}run(me){this.runs.next(me)}getResult(me){return this.results.asObservable().pipe((0,g.U)(ge=>{const Ue=(0,D.tD)(ge.annotations,me),De=ge.alertStates.find(Pe=>!!me&&Pe.panelId===me);return{annotations:p(Ue),alertState:De}}))}executeRun(me){const Ue=this.workers.filter(nt=>nt.canWork(me)).map(nt=>nt.work(me)),De=new o.w0,Pe=(0,r.T)(Ue).pipe((0,u.R)(this.runs.asObservable()),(0,l.J)(),(0,m.u)((nt,ct)=>(nt.annotations=nt.annotations.concat(ct.annotations),nt.alertStates=nt.alertStates.concat(ct.alertStates),nt)),(0,c.x)(()=>{De.unsubscribe()}),(0,d.B)()),ye=new o.w0,Te=(0,i.H)(200).pipe((0,f.h)({annotations:[],alertStates:[]}),(0,u.R)(Pe),(0,c.x)(()=>{ye.unsubscribe()}));ye.add(Te.subscribe(nt=>{this.results.next(nt)})),De.add(Pe.subscribe(nt=>{this.results.next(nt)}))}cancel(me){this.cancellationStream.next(me)}cancellations(){return this.cancellationStream.asObservable().pipe((0,d.B)())}destroy(){this.results.complete(),this.runs.complete(),this.cancellationStream.complete(),this.runsSubscription.unsubscribe(),this.eventsSubscription.unsubscribe()}}let se;function de(ue){se&&se.destroy(),se=ue}function re(){if(!se)throw new Error("getDashboardQueryRunner can only be used after Grafana instance has started.");return se}let fe;function ie(ue){fe=ue}function oe(ue){fe||(fe=({dashboard:ge,timeSrv:Ue,workers:De})=>new te(ge,Ue,De));const me=fe(ue);return de(me),me}},63835:(G,A,e)=>{"use strict";e.d(A,{k:()=>c});var n=e(21964),a=e(16226),o=e(41466),r=e(45878),i=e(85445),g=e(90857),u=e(76679),l=e(43310);const m="-- Public --";class c extends o.MF{constructor(){let f={};super({name:"public-ds",id:0,type:"public-ds",meta:f,uid:m,jsonData:{},access:"proxy",readOnly:!0}),this.annotations={prepareQuery(E){return{...E,queryType:l.hR.Annotations,refId:"anno"}}}}query(f){return f.targets.length?f.targets[0]?.datasource?.uid===u.JY?(0,a.D)(this.getAnnotations(f)):(0,n.of)({data:[]}):(0,n.of)({data:[]})}async getAnnotations(f){const{range:{to:E,from:v}}=f,h={from:v.valueOf(),to:E.valueOf()},p=await(0,i.i)().get(`/api/public/dashboards/${g.config.publicDashboardAccessToken}/annotations`,h);return{data:[(0,r.g0)(p)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}},22674:(G,A,e)=>{"use strict";e.d(A,{g:()=>o});var n=e(21964),a=e(59615);class o{canWork({dashboard:i}){return i?.annotations?.list?.some(g=>g.enable&&!!g.snapshotData)}work(i){if(!this.canWork(i))return(0,a.H_)();const g=this.getAnnotationsFromSnapshot(i.dashboard);return(0,n.of)({annotations:g,alertStates:[]})}getAnnotationsFromSnapshot(i){return(i?.annotations?.list?.filter(m=>m.enable)).filter(m=>!!m.snapshotData).reduce((m,c)=>m.concat((0,a.pG)(c,c.snapshotData)),[])}getAnnotationsInSnapshot(i,g){const u=this.getAnnotationsFromSnapshot(i);return(0,a.tD)(u,g)}}},59615:(G,A,e)=>{"use strict";e.d(A,{H_:()=>f,Rc:()=>E,em:()=>s,h1:()=>c,hs:()=>d,pG:()=>p,tD:()=>h});var n=e(56375),a=e.n(n),o=e(21964),r=e(73891),i=e(4479),g=e(90857),u=e(59767),l=e(93991),m=e(12263);function c(y){return y.cancelled?(0,o.of)([]):(v("AnnotationQueryRunner failed",y),(0,o.of)([]))}function d(y){return v("Failed to retrieve datasource",y),(0,o.of)(void 0)}const f=()=>(0,o.of)({annotations:[],alertStates:[]});function E(y){return y.cancelled||v("DashboardQueryRunner failed",y),f()}function v(y,C){const b=(0,i.P)(C);console.error("handleAnnotationQueryRunnerError",b);const S=(0,l.t_)(y,b.message);(0,u.WI)((0,m.$l)(S))}function h(y,C){return C==null?y:y.filter(b=>{let S;if(S=b.source,!S)return!0;if(S.filter){const D=(S.filter.ids??[]).includes(C);if(S.filter.exclude){if(D)return!1}else if(!D)return!1}return b.panelId&&b.source.type==="dashboard"?b.panelId===C:!0})}function p(y,C){y.snapshotData&&(y=(0,n.cloneDeep)(y),delete y.snapshotData);for(const b of C)switch(b.source=y,b.color=g.config.theme2.visualization.getColorByName(y.iconColor),b.type=y.name,b.isRegion=!!(b.timeEnd&&b.time!==b.timeEnd),b.newState?.toLowerCase()){case"pending":b.color="yellow";break;case"alerting":b.color="red";break;case"ok":b.color="green";break;case"normal":b.color="green";break;case"no_data":b.color="gray";break;case"nodata":b.color="gray";break}return C}function s(y){if(!y||!y.length)return[];const C=[];for(const b of y){const S=new r.U(b);for(let D=0;D<b.length;D++){const M=(0,n.cloneDeep)(S.get(D));C.push(M)}}return C}},17771:(G,A,e)=>{"use strict";e.d(A,{o:()=>I,t:()=>x});var n=e(56375),a=e(93231),o=e(21964),r=e(25066),i=e(98231),g=e(85431),u=e(23757),l=e(45878),m=e(9833),c=e(17338),d=e(73722),f=e(6011),E=e(81223),v=e(71244),h=e(4479),p=e(32063),s=e(26233),y=e(65512),C=e(31683),b=e(61815),S=e(9739),D=e(77491),M=e(18100);function T(P,N){return(0,D.a)([P,N]).pipe((0,r.z)(F=>{const[U,j]=F;if(j.annotations?.length||j.alertState){U.annotations||(U.annotations=[]);const V=U.annotations.concat(new M.i(j.annotations)),_=j.alertState;return(0,o.of)({...U,annotations:V,alertState:_})}return(0,o.of)(U)}))}var R=e(98659);let O=100;function x(){return"Q"+O++}class I{constructor(N){this.templateSrv=(0,C.J)(),this.resendLastResult=()=>{this.lastResult&&this.subject.next(this.lastResult)},this.subject=new a.t(1),this.dataConfigSource=N}getData(N){const{withFieldConfig:F,withTransforms:U}=N;let j=1,V,_=[],H=[],z,K=!0,Y=-1;if(this.dataConfigSource.snapshotData){const k={state:u.Gu.Done,series:this.dataConfigSource.snapshotData.map(q=>(0,l.g0)(q)),timeRange:(0,m.JK)(),structureRev:j};return(0,o.of)(k)}return this.subject.pipe((0,r.z)(k=>{let q=this.dataConfigSource.getFieldOverrideOptions(),X=this.dataConfigSource.getTransformations();if(k.series===H&&V?.fieldConfig===q?.fieldConfig&&z===X)return(0,o.of)({...k,structureRev:j,series:_});V=q,z=X,H=k.series;let te=(0,o.of)(k);return U&&(te=this.applyTransformations(k)),te.pipe((0,i.U)(se=>{let de=se,re=!1;if(F&&se.series?.length){if(Y===this.dataConfigSource.configRev){const fe=se.series.find(ie=>(0,s.iL)(ie));fe&&!fe.packetInfo.schemaChanged&&_[0].fields.length===fe.fields.length&&(de={...de,series:_.map((ie,oe)=>({...ie,length:se.series[oe].length,fields:ie.fields.map((ue,me)=>({...ue,values:se.series[oe].fields[me].values,state:{...ue.state,calcs:void 0,range:void 0}}))}))},re=!0)}q!=null&&(K||!re)&&(Y=this.dataConfigSource.configRev,de={...de,series:(0,c.SM)({timeZone:se.request?.timezone??"browser",data:de.series,...q})},de.annotations&&(de.annotations=(0,c.SM)({data:de.annotations,...q,fieldConfig:{defaults:{},overrides:[]}})),K=!1)}return!re&&!(0,d.nl)(_,de.series,d.Ch)&&j++,_=de.series,{...de,structureRev:j}}))}))}applyTransformations(N){const F=this.dataConfigSource.getTransformations();if(!F||F.length===0)return(0,o.of)(N);const U={interpolate:j=>this.templateSrv.replace(j,N?.request?.scopedVars)};return(0,f.H)(F,N.series,U).pipe((0,i.U)(j=>({...N,series:j})),(0,g.K)(j=>(console.warn("Error running transformation:",j),(0,o.of)({...N,state:u.Gu.Error,errors:[(0,h.P)(j)]}))))}async run(N){const{queries:F,timezone:U,datasource:j,panelId:V,dashboardUID:_,timeRange:H,timeInfo:z,cacheTimeout:K,queryCachingTTL:Y,maxDataPoints:k,scopedVars:q,minInterval:X,app:te}=N;if((0,b.yl)(j)){this.pipeToSubject((0,b.AK)(N,F[0]),V,!0);return}const se={app:te??E.zj.Dashboard,requestId:x(),timezone:U,panelId:V,dashboardUID:_,range:H,timeInfo:z,interval:"",intervalMs:0,targets:(0,n.cloneDeep)(F),maxDataPoints:k,scopedVars:q||{},cacheTimeout:K,queryCachingTTL:Y,startTime:Date.now(),rangeRaw:H.raw};try{const de=await L(j,se.scopedVars),re=de.meta?.mixed;se.targets=se.targets.map(oe=>{const ue=oe.datasource?.type===p.hr.type;return(!oe.datasource||oe.datasource.uid!==de.uid&&!re&&!ue)&&(oe.datasource=de.getRef()),oe});const fe=X?this.templateSrv.replace(X,se.scopedVars):de.interval,ie=v.calculateInterval(H,k,fe);se.scopedVars=Object.assign({},se.scopedVars,{__interval:{text:ie.interval,value:ie.interval},__interval_ms:{text:ie.intervalMs.toString(),value:ie.intervalMs}}),se.interval=ie.interval,se.intervalMs=ie.intervalMs,se.filters=this.templateSrv.getAdhocFilters(de.name,!0),this.lastRequest=se,this.pipeToSubject((0,R.v7)(de,se),V)}catch(de){this.pipeToSubject((0,o.of)({state:u.Gu.Error,error:(0,h.P)(de),series:[],timeRange:se.range}),V)}}pipeToSubject(N,F,U=!1){this.subscription&&this.subscription.unsubscribe();let j=N;const V=this.dataConfigSource.getDataSupport();if(V.alertStates||V.annotations){const _=this.dataConfigSource;j=T(N,(0,S.kt)().getResult(_.id))}this.subscription=j.subscribe({next:_=>{this.lastResult=U?_:(0,l.zR)(_,this.lastResult),this.subject.next(this.lastResult)}})}cancelQuery(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&(this.lastResult.state===u.Gu.Loading||this.lastResult.state===u.Gu.Streaming)&&this.subject.next({...this.lastResult,state:u.Gu.Done}))}clearLastResult(){this.lastResult=void 0,this.subject=new a.t(1)}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}useLastResultFrom(N){this.lastResult=N.getLastResult(),this.lastResult&&this.subject.next(this.lastResult)}setLastResult(N){this.lastResult=N}getLastResult(){return this.lastResult}getLastRequest(){return this.lastRequest}}async function L(P,N){return P&&typeof P=="object"&&"query"in P?P:await(0,y.ak)().get(P,N)}},23994:(G,A,e)=>{"use strict";e.d(A,{V:()=>a});var n=e(87550);function a(o,r){return(0,n.x)(()=>{r&&o.resolveCancelerIfExists(r)})}},80833:(G,A,e)=>{"use strict";e.d(A,{C:()=>a});var n=e(73722);const a=(o,r)=>{let i=1;return r?.structureRev&&r.series&&(i=r.structureRev,(0,n.nl)(o.series,r.series,n.Ch)||i++),o.structureRev=i,o}},98659:(G,A,e)=>{"use strict";e.d(A,{v7:()=>F});var n=e(56375),a=e(21964),o=e(59069),r=e(55670),i=e(16226),g=e(98231),u=e(85431),l=e(42958),m=e(95135),c=e(24596),d=e(23136),f=e(23757),E=e(34921),v=e(13446),h=e(81223),p=e(45465),s=e(4479),y=e(90857),C=e(32063),b=e(46783),S=e(21871),D=e(15013),M=e(23994),T=e(173),R=e(49641),O=e(43183),x=e(93657);function I(j){let V=!1;return H=>{if(!H.request||V||T.Cj.getUrlSearchParams().editPanel!=null||H.state!==f.Gu.Done&&H.state!==f.Gu.Error)return;const K={eventName:R.ct.DataRequest,source:H.request.app,datasourceName:j.name,datasourceId:j.id,datasourceUid:j.uid,datasourceType:j.type,dataSize:0,duration:H.request.endTime-H.request.startTime};_(K,H),H.request.app!==h.zj.Explore&&H.request.app!==h.zj.Correlations&&L(K,H),H.series&&H.series.length>0&&(K.dataSize=H.series.length),(0,O.r_)(K),V=!0};function _(H,z){const K={};for(let k=0;k<z.series.length;k++){const q=z.series[k].refId;q&&!K[q]&&(K[q]=z.series[k].meta?.isCachedResponse??!1)}H.totalQueries=Object.keys(K).length,H.cachedQueries=Object.values(K).filter(k=>k===!0).length,H.panelId=z.request.panelId;const Y=(0,x.h4)().getCurrent();Y&&(H.dashboardId=Y.id,H.dashboardName=Y.title,H.dashboardUid=Y.uid,H.folderName=Y.meta.folderTitle)}}function L(j,V){V.errors?.length?j.error=V.errors.join(", "):V.error&&(j.error=V.error.message)}function P(j,V){const _=V.panelData.request,H={...V.packets},z=j.key??j.data?.[0]?.refId??"A";H[z]=j;let K=j.state||f.Gu.Done,Y,k;const q=[],X=[];for(const re in H){const fe=H[re];if((fe.error||fe.errors?.length)&&(K=f.Gu.Error,Y=fe.error,k=fe.errors),fe.data&&fe.data.length)for(const ie of fe.data){if(ie.meta?.dataTopic===E.w5.Annotations){X.push(ie);continue}q.push(ie)}}const te=N(_,K),se={state:K,series:q,annotations:X,error:Y,errors:k,request:_,timeRange:te},de=new Set([...V.panelData.traceIds??[],...j.traceIds??[]]);return de.size>0&&(se.traceIds=Array.from(de)),{packets:H,panelData:se}}function N(j,V){const _=j.range;return!(0,n.isString)(_.raw.from)||V!==f.Gu.Streaming?_:{..._,from:v.parse(_.raw.from,!1),to:v.parse(_.raw.to,!0)}}function F(j,V,_){let H={panelData:{state:f.Gu.Loading,series:[],request:V,timeRange:V.range},packets:{}};if(!V.targets.length)return V.endTime=Date.now(),H.panelData.state=f.Gu.Done,(0,a.of)(H.panelData);const z=U(j,V,_).pipe((0,g.U)(K=>{if(!(0,n.map)(K.data))throw new Error(`Expected response data to be array, got ${typeof K.data}.`);return V.endTime=Date.now(),H=P(K,H),H.panelData}),(0,u.K)(K=>(console.error("runRequest.catchError",K),(0,p.H)(K),(0,a.of)({...H.panelData,state:f.Gu.Error,error:(0,s.P)(K)}))),(0,l.b)(I(j)),(0,M.V)(b.ae,V.requestId),(0,m.B)());return(0,o.T)((0,r.H)(200).pipe((0,c.h)(H.panelData),(0,d.R)(z)),z)}function U(j,V,_){if(V.targets=V.targets.map(z=>(0,S.vH)(z)?{...j?.getDefaultQuery?.(h.zj.PanelEditor),...z}:z),y.config.publicDashboardAccessToken)return(0,i.D)(j.query(V));for(const z of V.targets)if((0,C.Pr)(z.datasource))return D.mV.query(V);const H=_?_(V):j.query(V);return(0,i.D)(H)}},19252:(G,A,e)=>{"use strict";e.d(A,{E_:()=>h,YQ:()=>m,fy:()=>c,pW:()=>l,qb:()=>E,qi:()=>g,rh:()=>f,to:()=>d,xb:()=>v,yw:()=>i});var n=e(98547);const a=null,o=58,r=8,i={label:"A\u2013Z",value:"alpha-asc"},g="search.sections",u="grafana.search.expanded-folder",l=0,m="general",c="General",d="grafana.search.include.panels",f="grafana.search.layout",E="grafana.search.sort",v={dashboard:n.o.DashDB,folder:n.o.DashFolder,home:n.o.DashHome},h=1e3},40865:(G,A,e)=>{"use strict";e.d(A,{A:()=>i,v:()=>g});var n=e(85960),a=e(64365),o=e(12693),r=e(91);function i(){const u=(0,n.useRef)(new a.x);return{keyboardEvents:u.current,onKeyDown:l=>{switch(l.code){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":case"Enter":u.current.next(l);default:}}}}function g(u,l,m){const c=(0,n.useRef)({x:0,y:-1}),[d,f]=(0,n.useState)({x:0,y:-1}),E=(0,n.useRef)();return(0,n.useEffect)(()=>{E.current=m.view.fields.url,c.current.x=0,c.current.y=-1,f({...c.current})},[m]),(0,n.useEffect)(()=>{const v=u.subscribe({next:h=>{switch(h?.code){case"ArrowDown":{c.current.y++,f({...c.current});break}case"ArrowUp":c.current.y=Math.max(0,c.current.y-1),f({...c.current});break;case"ArrowRight":{l>0&&(c.current.x=Math.min(l,c.current.x+1),f({...c.current}));break}case"ArrowLeft":{l>0&&(c.current.x=Math.max(0,c.current.x-1),f({...c.current}));break}case"Enter":if(!E.current)break;const p=c.current.x*l+c.current.y;if(p<0){c.current.x=0,c.current.y=0,f({...c.current});break}const s=E.current.values?.[p];typeof s=="string"&&r.E1.push(o.u.stripBaseFromUrl(s))}}});return()=>v.unsubscribe()},[u,l]),d}},87129:(G,A,e)=>{"use strict";e.d(A,{Jy:()=>r,Nw:()=>g,OY:()=>o,Qw:()=>a,TP:()=>i});var n=e(43183);const a=(l,m)=>{(0,n.ff)(`${l}_viewed`,u(m))},o=(l,m)=>{(0,n.ff)(`${l}_result_clicked`,u(m))},r=(l,m)=>{(0,n.ff)(`${l}_query_submitted`,u(m))},i=(l,{error:m,...c})=>{(0,n.ff)(`${l}_query_failed`,{...u(c),error:m})},g=(l,m,c)=>{(0,n.ff)(`grafana_panel_inspect_${l}_${m}_clicked`,c)},u=l=>({layout:l.layout,starredFilter:l.starred??!1,sort:l.sortValue??"",tagCount:l.tagCount??0,queryLength:l.query?.length??0,includePanels:l.includePanels??!1})},30824:(G,A,e)=>{"use strict";e.d(A,{getGrafanaSearcher:()=>R});var n=e(90857),a=e(73891),o=e(45878),r=e(64282),i=e(85445),g=e(75169);const u="Loading",l="api/search-v2",m="name_sort";class c{constructor(x){this.fallbackSearcher=x}async search(x){if(x.facet?.length)throw new Error("facets not supported!");return this.doSearchQuery(x)}async starred(x){if(x.facet?.length)throw new Error("facets not supported!");const I=await(0,i.i)().get("api/user/stars");return I?.length?this.doSearchQuery({uid:I,query:x.query??"*"}):{view:new a.U({length:0,fields:[]}),totalRows:0,loadMoreItems:async(L,P)=>{},isItemLoaded:L=>!0}}async tags(x){const I={...x,query:x.query??"*",sort:void 0,facet:[{field:"tag"}],limit:1},P=(await(0,i.i)().post(l,I)).frames.map(N=>(0,o.g0)(N));if(P[0]?.name===u)return this.fallbackSearcher.tags(x);for(const N of P)if(N.fields[0].name==="tag")return E(N);return[]}getSortOptions(){const x=[{value:m,label:"Alphabetically (A-Z)"},{value:"-name_sort",label:"Alphabetically (Z-A)"}];if(n.config.licenseInfo.enabledFeatures.analytics){for(const I of v)x.push({value:`-${I.name}`,label:`${I.display} (most)`}),x.push({value:`${I.name}`,label:`${I.display} (least)`});for(const I of h)x.push({value:`-${I.name}`,label:`${I.display} (recent)`}),x.push({value:`${I.name}`,label:`${I.display} (oldest)`})}return Promise.resolve(x)}async doSearchQuery(x){x=await(0,g.Sd)(x);const I={...x,query:x.query??"*",limit:x.limit??d},P=(await(0,i.i)().post(l,I)).frames.map(H=>(0,o.g0)(H)),N=P.length?(0,o.g0)(P[0]):{fields:[],length:0};if(N.name===u)return this.fallbackSearcher.search(x);for(const H of N.fields)H.display=(0,r.U)({field:H,theme:n.config.theme2});N.meta?.custom||(N.meta={...N.meta,custom:{count:N.length,max_score:1}});const F=N.meta.custom;if(F.locationInfo||(F.locationInfo={}),F.sortBy?.length){const H=N.fields.find(z=>z.name===F.sortBy);if(H){const z=p(H.name);F.sortBy=z,H.name=z}}let U=0,j;const V=async()=>{for(;U>_.dataFrame.length;){const H=_.dataFrame.length;if(H>=F.count)return;const z=await(0,i.i)().post(l,{...I??{},from:H,limit:f}),K=(0,o.g0)(z.frames[0]);if(!K){console.log("no results",K);return}if(K.fields.length!==_.dataFrame.fields.length){console.log("invalid shape",K,_.dataFrame);return}const Y=K.length+_.dataFrame.length;for(let q=0;q<K.fields.length;q++)_.dataFrame.fields[q].values.push(...K.fields[q].values);_.dataFrame.length=Y;const k=K.meta?.custom;if(k?.locationInfo&&F)for(const[q,X]of Object.entries(k.locationInfo))F.locationInfo[q]=X}j=void 0},_=new a.U(N);return{totalRows:F.count??N.length,view:_,loadMoreItems:async(H,z)=>(U=Math.max(U,z),j||(j=V()),j),isItemLoaded:H=>H<_.dataFrame.length}}getFolderViewSort(){return"name_sort"}}const d=50,f=100;function E(O){const x=O.fields[0].values,I=O.fields[1].values,L=[];for(let P=0;P<O.length;P++)L.push({term:x[P],count:I[P]});return L}const v=[{name:"views_total",display:"Views total"},{name:"views_last_30_days",display:"Views 30 days"},{name:"errors_total",display:"Errors total"},{name:"errors_last_30_days",display:"Errors 30 days"}],h=[{name:"created_at",display:"Created time"},{name:"updated_at",display:"Updated time"}];function p(O){for(const x of v)if(x.name===O)return x.display;for(const x of h)if(x.name===O)return x.display;return O}var s=e(51670);class y{constructor(x){this.parent=x,this.cache=new Map,this.sortPlaceholder="Default (Relevance)"}async search(x){if(x.facet?.length)throw new Error("facets not supported!");if(x.sort!=null)throw new Error("custom sorting is not supported yet");if(x.tags?.length||x.ds_uid?.length)return this.parent.search(x);const L=(await this.getCache(x.kind)).search(x.query);return{isItemLoaded:()=>!0,loadMoreItems:async(P,N)=>{},totalRows:L.length,view:L}}async getCache(x){const I=x?x.sort().join(","):"*",L=this.cache.get(I);if(L)try{return await L}catch{return this.cache.delete(I),new C(new a.U({name:"error",fields:[],length:0}))}const P=this.parent.search({kind:x,limit:5e3}).then(N=>new C(N.view));return this.cache.set(I,P),P}async starred(x){return this.parent.starred(x)}async getSortOptions(){return this.parent.getSortOptions()}async tags(x){return this.parent.tags(x)}getFolderViewSort(){return this.parent.getFolderViewSort()}}class C{constructor(x){this.full=x,this.ufuzzy=new s.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),this.names=this.full.fields.name.values,this.empty=new a.U({...this.full.dataFrame,fields:this.full.dataFrame.fields.map(I=>({...I,values:[]})),length:0})}search(x){if(!x?.length||x==="*")return this.full;const I=this.full.dataFrame.fields,L=this.names,P=I.map(j=>[]);let[N,F,U]=this.ufuzzy.search(L,x,!0);for(let j=0;j<I.length;j++){let V=I[j].values,_=P[j];if(F&&U)for(let H=0;H<U.length;H++){let z=F.idx[U[H]];_.push(V[z])}else if(N)for(let H=0;H<N.length;H++){let z=N[H];_.push(V[z])}}return this.empty.dataFrame.fields.forEach((j,V)=>{j.values=P[V]}),this.empty.dataFrame.length=this.empty.dataFrame.fields[0].values.length,this.empty}}var b=e(58309),S=e(46783),D=e(19252);class M{constructor(){this.locationInfo={general:{kind:"folder",name:"General",url:"/dashboards",folderId:0}},this.getFolderViewSort=()=>""}async composeQuery(x,I){const L=await(0,g.Sd)(I);return L.query?.length&&L.query!=="*"&&(x.query=L.query),L.kind?.length===1&&D.xb[L.kind[0]]&&(x.type=D.xb[L.kind[0]]),L.uid?x.dashboardUID=L.uid:L.location?.length&&(x.folderUIDs=[L.location]),x}async search(x){if(x.facet?.length)throw new Error("facets not supported!");if(x.from!==void 0){if(!x.limit)throw new Error("Must specify non-zero limit parameter when using from");if(x.from/x.limit%1!==0)throw new Error("From parameter must be a multiple of limit")}const I=x.limit??(x.from!==void 0?1:D.E_),L=x.from!==void 0?x.from/I+1:void 0,P=await this.composeQuery({limit:I,tag:x.tags,sort:x.sort,page:L},x);return this.doAPIQuery(P)}async starred(x){if(x.facet?.length)throw new Error("facets not supported!");const I=await this.composeQuery({limit:x.limit??D.E_,tag:x.tags,sort:x.sort,starred:x.starred},x);return this.doAPIQuery(I)}async getSortOptions(){return(await S.ae.get("/api/search/sorting")).sortOptions.map(I=>({value:I.name,label:I.displayName}))}async tags(x){return(await S.ae.get("/api/dashboards/tags")).sort((L,P)=>P.count-L.count)}async doAPIQuery(x){const I=await S.ae.get("/api/search",x),L=[],P=[],N=[],F=[],U=[],j=[],V=[];let _;for(let K of I){const Y=K.type==="dash-folder"?"folder":"dashboard";L.push(Y),P.push(K.title),N.push(K.uid),F.push(K.url),U.push(K.tags),V.push(K.sortMeta);let k=K.folderUid;!k&&Y==="dashboard"&&(k="general"),j.push(k),K.sortMetaName?.length&&(_=K.sortMetaName),K.folderUid&&K.folderTitle?this.locationInfo[K.folderUid]={kind:"folder",name:K.folderTitle,url:K.folderUrl,folderId:K.folderId}:Y==="folder"&&(this.locationInfo[K.uid]={kind:Y,name:K.title,url:K.url,folderId:K.id})}const H={fields:[{name:"kind",type:b.fS.string,config:{},values:L},{name:"name",type:b.fS.string,config:{},values:P},{name:"uid",type:b.fS.string,config:{},values:N},{name:"url",type:b.fS.string,config:{},values:F},{name:"tags",type:b.fS.other,config:{},values:U},{name:"location",type:b.fS.string,config:{},values:j}],length:P.length,meta:{custom:{count:P.length,max_score:1,locationInfo:this.locationInfo}}};_?.length&&V.length&&(H.meta.custom.sortBy=_,H.fields.push({name:_,type:b.fS.number,config:{},values:V}));for(const K of H.fields)K.display=(0,r.U)({field:K,theme:n.config.theme2});const z=new a.U(H);return{totalRows:H.length,view:z,loadMoreItems:async(K,Y)=>{},isItemLoaded:K=>!0}}}let T;function R(){if(!T){const O=new M,x=n.config.featureToggles.panelTitleSearch;T=x?new c(O):O,x&&location.search.includes("do-frontend-query")&&(T=new y(T))}return T}},75169:(G,A,e)=>{"use strict";e.d(A,{J6:()=>i,Sd:()=>a,f9:()=>u});var n=e(93657);async function a(l){return l.query&&l.query.indexOf("folder:current")>=0&&(l={...l,location:await o(),query:l.query.replace("folder:current","").trim()},l.query?.length||(l.query="*")),Promise.resolve(l)}async function o(){try{let l=(0,n.h4)().getCurrent();return l||(await r(500),l=(0,n.h4)().getCurrent()),Promise.resolve(l?.meta?.folderUid)}catch(l){console.error(l)}}function r(l){return new Promise(m=>setTimeout(m,l))}function i(l,m){return l==="dashboard"?"apps":l==="folder"?m?"folder-open":"folder":"question-circle"}function g(l){switch(l){case"dashboard":case"folder":case"panel":return l;default:return"dashboard"}}function u(l,m){const c=m?.dataFrame.meta?.custom,d={kind:g(l.kind),uid:l.uid,title:l.name,url:l.url,tags:l.tags??[]},f=c?.sortBy;if(f){const E=l[f];(typeof E=="string"||typeof E=="number")&&(d.sortMetaName=f,d.sortMeta=E)}if(l.location){const E=l.location.split("/"),v=E[E.length-1],h=c?.locationInfo[v];h&&(d.parentTitle=h.name,d.parentKind=h.kind,d.parentUID=v)}return d}},98547:(G,A,e)=>{"use strict";e.d(A,{A:()=>a,o:()=>n});var n=(o=>(o.DashDB="dash-db",o.DashHome="dash-home",o.DashFolder="dash-folder",o))(n||{}),a=(o=>(o.List="list",o.Folders="folders",o))(a||{})},86962:(G,A,e)=>{"use strict";e.d(A,{rb:()=>o,vj:()=>i});var n=e(19252);const a=g=>g?!!(g.query||g.tag?.length>0||g.starred||g.sort):!1,o=()=>{const g=n.qi+".";for(let u=0;u<window.localStorage.length;u++){const l=window.localStorage.key(u);l?.startsWith(g)&&window.localStorage.removeItem(l)}},r=(g="General")=>`${SECTION_STORAGE_KEY}.${g.toLowerCase()}`,i=g=>{const u=Object.entries(g).reduce((l,[m,c])=>{if(c){if(m==="tag"&&!Array.isArray(c))return{...l,tag:[c]}}else return l;return{...l,[m]:c}},{});if(g.folder){const l=`folder:${g.folder}`;return{...u,query:`${l} ${(u.query??"").replace(l,"")}`}}return{...u}}},28970:(G,A,e)=>{"use strict";e.d(A,{BR:()=>d,Dn:()=>y,Fy:()=>c,LA:()=>m,M4:()=>b,P4:()=>g,PJ:()=>C,Ub:()=>s,ZP:()=>D,aj:()=>S,dt:()=>p,e7:()=>u,pN:()=>h,s3:()=>l});var n=e(20079),a=e(95162);const o={serviceAccount:{},isLoading:!0,tokens:[]},r=(0,n.oM)({name:"serviceaccount",initialState:o,reducers:{serviceAccountFetchBegin:M=>({...M,isLoading:!0}),serviceAccountFetchEnd:M=>({...M,isLoading:!1}),serviceAccountLoaded:(M,T)=>({...M,serviceAccount:T.payload,isLoading:!1}),serviceAccountTokensLoaded:(M,T)=>({...M,tokens:T.payload,isLoading:!1}),rolesFetchBegin:M=>({...M,rolesLoading:!0}),rolesFetchEnd:M=>({...M,rolesLoading:!1})}}),i=r.reducer,{serviceAccountLoaded:g,serviceAccountTokensLoaded:u,serviceAccountFetchBegin:l,serviceAccountFetchEnd:m,rolesFetchBegin:c,rolesFetchEnd:d}=r.actions,f={serviceAccounts:[],isLoading:!0,roleOptions:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,serviceAccountStateFilter:a.ServiceAccountStateFilter.All},E=(0,n.oM)({name:"serviceaccounts",initialState:f,reducers:{serviceAccountsFetched:(M,T)=>{const{totalCount:R,perPage:O,...x}=T.payload,I=Math.ceil(R/O);return{...M,...x,totalPages:I,perPage:O,showPaging:I>1,isLoading:!1}},serviceAccountsFetchBegin:M=>({...M,isLoading:!0}),serviceAccountsFetchEnd:M=>({...M,isLoading:!1}),acOptionsLoaded:(M,T)=>({...M,roleOptions:T.payload}),queryChanged:(M,T)=>({...M,query:T.payload,page:0}),pageChanged:(M,T)=>({...M,page:T.payload}),stateFilterChanged:(M,T)=>({...M,serviceAccountStateFilter:T.payload})}}),v=E.reducer,{serviceAccountsFetchBegin:h,serviceAccountsFetchEnd:p,serviceAccountsFetched:s,acOptionsLoaded:y,pageChanged:C,stateFilterChanged:b,queryChanged:S}=E.actions,D={serviceAccountProfile:i,serviceAccounts:v}},23778:(G,A,e)=>{"use strict";e.d(A,{Ii:()=>i,UW:()=>m,ZP:()=>E,cD:()=>u,fT:()=>d,ik:()=>l,ki:()=>g,rI:()=>c,rW:()=>r});var n=e(20079);const a={supportBundles:[],isLoading:!1,supportBundleCollectors:[],createBundlePageLoading:!1,loadBundlesError:"",createBundleError:""},o=(0,n.oM)({name:"supportBundles",initialState:a,reducers:{supportBundlesLoaded:(v,h)=>({...v,supportBundles:h.payload,isLoading:!1}),fetchBegin:v=>({...v,isLoading:!0}),fetchEnd:v=>({...v,isLoading:!1}),collectorsFetchBegin:v=>({...v,createBundlePageLoading:!0}),collectorsFetchEnd:v=>({...v,createBundlePageLoading:!1}),supportBundleCollectorsLoaded:(v,h)=>({...v,supportBundleCollectors:h.payload,createBundlePageLoading:!1}),setLoadBundleError:(v,h)=>({...v,loadBundlesError:h.payload,supportBundleCollectors:[]}),setCreateBundleError:(v,h)=>({...v,createBundleError:h.payload})}}),{supportBundlesLoaded:r,fetchBegin:i,fetchEnd:g,supportBundleCollectorsLoaded:u,collectorsFetchBegin:l,collectorsFetchEnd:m,setLoadBundleError:c,setCreateBundleError:d}=o.actions,E={supportBundles:o.reducer}},98619:(G,A,e)=>{"use strict";e.d(A,{BR:()=>m,Fy:()=>l,PJ:()=>g,PL:()=>r,UL:()=>u,ZP:()=>y,aj:()=>i,iI:()=>v,y$:()=>E});var n=e(20079);const a={teams:[],page:1,query:"",perPage:30,totalPages:0,noTeams:!1,hasFetched:!1},o=(0,n.oM)({name:"teams",initialState:a,reducers:{teamsLoaded:(C,b)=>{const{totalCount:S,perPage:D,...M}=b.payload,T=Math.ceil(S/D);return{...C,...M,totalPages:T,perPage:D,hasFetched:!0}},queryChanged:(C,b)=>({...C,page:1,query:b.payload}),pageChanged:(C,b)=>({...C,page:b.payload}),sortChanged:(C,b)=>({...C,sort:b.payload,page:1}),rolesFetchBegin:C=>({...C,rolesLoading:!0}),rolesFetchEnd:C=>({...C,rolesLoading:!1})}}),{teamsLoaded:r,queryChanged:i,pageChanged:g,sortChanged:u,rolesFetchBegin:l,rolesFetchEnd:m}=o.actions,c=o.reducer,d={team:{},members:[],groups:[],searchMemberQuery:""},f=(0,n.oM)({name:"team",initialState:d,reducers:{teamLoaded:(C,b)=>({...C,team:b.payload}),teamMembersLoaded:(C,b)=>({...C,members:b.payload}),setSearchMemberQuery:(C,b)=>({...C,searchMemberQuery:b.payload}),teamGroupsLoaded:(C,b)=>({...C,groups:b.payload})}}),{teamLoaded:E,teamGroupsLoaded:v,teamMembersLoaded:h,setSearchMemberQuery:p}=f.actions,s=f.reducer,y={teams:c,team:s}},31683:(G,A,e)=>{"use strict";e.d(A,{J:()=>fe});var n=e(56375),a=e(20440),o=e(81502),r=e(12399),i=e(57474),g=e(1713),u=e(81221);function l(ie){const oe=i.ep.getVariables(ie);return(0,u.q)(oe)}var m=e(25648),c=e(74539),d=e(43489),f=e(59084),E=e(10805);let v={};function h(ie){const oe=v[ie];return oe||(v[ie]=(0,n.property)(ie))}class p{constructor(oe,ue,me){this.state={name:oe.name,value:ue,text:me,type:oe.type}}getValue(oe){let{value:ue}=this.state;return ue==="string"||ue==="number"||ue==="boolean"?ue:String(ue)}getValueText(){const{value:oe,text:ue}=this.state;return typeof ue=="string"?oe===c.r2?c.xk:ue:Array.isArray(ue)?ue.join(" + "):(console.log("value",ue),String(ue))}}let s;function y(ie,oe,ue){return s?(s.state.name=ie.name,s.state.type=ie.type,s.state.value=oe,s.state.text=ue):s=new p(ie,oe,ue),s}function C(ie,oe,ue,me){if(ue=ue||{},ie==null||(0,d.Kn)(ue)&&oe!==g.b8.QueryParam)return"";if(!Array.isArray(ie)&&typeof ie=="object"&&(ie=`${ie}`),typeof oe=="function")return oe(ie,ue,C);oe||(oe=g.b8.Glob);let ge=oe.split(":");ge.length>1?(oe=ge[0],ge=ge.slice(1)):ge=[];let Ue=i.Vl.getIfExists(oe);Ue||(console.error(`Variable format ${oe} not found. Using glob format as fallback.`),Ue=i.Vl.get(g.b8.Glob));const De=y(ue,ie,me??ie);return Ue.formatter(ie,ge,De)}var b=e(770),S=e.n(b),D=e(56582),M=e(173),T=e(58715),R=e(45864),O=e(76347),x=e(1930),I=e(58309),L=e(32205),P=e(64282),N=e(94372),F=e(5e4);function U(ie,oe,ue){return new Proxy({},{get:(me,ge)=>{if(ge==="name")return ie.name;if(ge==="displayName")return(0,N.CZ)(ie,oe,ue);if(ge==="labels"||ge==="formattedLabels")return ie.labels?{...ie.labels,__values:Object.values(ie.labels).sort().join(", "),toString:()=>(0,F.aA)(ie.labels,"",!0)}:""}})}function j(ie,oe,ue,me){const ge=V(ie,oe,ue);return C(ge,me)}function V(ie,oe,ue){const me=ue?.__dataContext;if(!me)return ie;const{frame:ge,rowIndex:Ue,field:De,calculatedValue:Pe}=me.value;if(Pe)switch(oe){case"numeric":return Pe.numeric.toString();case"raw":return Pe.numeric;case"time":return"";case"text":default:return(0,x.zc)(Pe)}if(Ue===void 0)return ie;if(oe==="time"){const ct=ge.fields.find(he=>he.type===I.fS.time);return ct?ct.values[Ue]:void 0}const ye=De.values[Ue];if(oe==="raw")return ye;const nt=(De.display??z())(ye);switch(oe){case"numeric":return nt.numeric;case"text":return nt.text;default:return(0,x.zc)(nt)}}function _(ie,oe,ue,me){const ge=ue?.__dataContext;if(!ge||!oe)return ie;const{frame:Ue,rowIndex:De}=ge.value;if(De===void 0||oe===void 0)return ie;const Pe={name:Ue.name,refId:Ue.refId,fields:(0,L.z)({frame:Ue,rowIndex:De})},ye=h(oe)(Pe)??"";return C(ye,me)}let H;function z(){return H||(H=(0,P.U)()),H}function K(ie,oe,ue,me){const ge=ue?.__dataContext;if(!ge||oe!=="name")return ie;const{frame:Ue,frameIndex:De}=ge.value,Pe=(0,N.nf)(Ue,De);return C(Pe,me)}function Y(ie,oe,ue,me){const ge=ue?.__dataContext;if(!ge||oe===void 0||oe==="")return ie;const{frame:Ue,field:De,data:Pe}=ge.value,ye=U(De,Ue,Pe),Te=h(oe)(ye)??"";return C(Te,me)}const k={__value:j,__data:_,__series:K,__field:Y,[D.W.includeVars]:q,[D.W.keepTime]:X,__timezone:te};function q(ie,oe,ue){const me=(0,O.c)(ue);return M.Cj.toUrlParams(me)}function X(){return M.Cj.toUrlParams((0,R.$t)().timeRangeForUrl())}function te(){const ie=(0,T.Z)({timeZone:(0,R.$t)().timeModel?.getTimezone()});return ie==="browser"?S().tz.guess():ie}const se={getFilteredVariables:f.Q4,getVariables:f.ng,getVariableWithName:f._K};class de{constructor(oe=se){this.dependencies=oe,this.regex=E.J7,this.index={},this.grafanaVariables=new Map,this.timeRange=null,this._adhocFiltersDeprecationWarningLogged=new Map,this._variables=[]}init(oe,ue){this._variables=oe,this.timeRange=ue,this.updateIndex()}get variables(){return(0,a.d)("template_srv.ts","variables","getVariables"),this.getVariables()}getVariables(){return window.__grafanaSceneContext?l(window.__grafanaSceneContext):this.dependencies.getVariables()}updateIndex(){const oe=ue=>ue||ue==="";if(this.index=this._variables.reduce((ue,me)=>(me.current&&(me.current.isNone||oe(me.current.value))&&(ue[me.name]=me),ue),{}),this.timeRange){const ue=this.timeRange.from.valueOf().toString(),me=this.timeRange.to.valueOf().toString();this.index={...this.index,__from:{current:{value:ue,text:ue}},__to:{current:{value:me,text:me}}}}}updateTimeRange(oe){this.timeRange=oe,this.updateIndex()}variableInitialized(oe){this.index[oe.name]=oe}getAdhocFilters(oe,ue){let me=[],ge=(0,o.F)().getInstanceSettings(oe);if(!ge)return[];!ue&&!this._adhocFiltersDeprecationWarningLogged.get(ge.type)&&((0,a.d)(`DataSource ${ge.type}`,"templateSrv.getAdhocFilters","filters property on the request (DataQueryRequest). Or if this is called from interpolateVariablesInQueries or applyTemplateVariables it is passed as a new argument"),this._adhocFiltersDeprecationWarningLogged.set(ge.type,!0));for(const Ue of this.getAdHocVariables()){const De=Ue.datasource?.uid;(De===ge.uid||De?.indexOf("$")===0&&this.replace(De)===ge.uid)&&(me=me.concat(Ue.filters))}return me}setGrafanaVariable(oe,ue){this.grafanaVariables.set(oe,ue)}setGlobalVariable(oe,ue){(0,a.d)("template_srv.ts","setGlobalVariable",""),this.index={...this.index,[oe]:{current:ue}}}getVariableName(oe){this.regex.lastIndex=0;const ue=this.regex.exec(oe);return ue?ue.slice(1).find(ge=>ge!==void 0):null}containsTemplate(oe){if(!oe)return!1;const ue=this.getVariableName(oe),me=ue&&this.getVariableAtIndex(ue);return me!=null}variableExists(oe){return(0,a.d)("template_srv.ts","variableExists","containsTemplate"),this.containsTemplate(oe)}highlightVariablesAsHtml(oe){return!oe||!(0,n.isString)(oe)?oe:(oe=(0,n.escape)(oe),this._replaceWithVariableRegex(oe,void 0,(ue,me)=>this.getVariableAtIndex(me)?'<span class="template-variable">'+ue+"</span>":ue))}getAllValue(oe){if(oe.allValue)return oe.allValue;const ue=[];for(let me=1;me<oe.options.length;me++)ue.push(oe.options[me].value);return ue}getVariableValue(oe,ue){return ue?h(ue)(oe.value):oe.value}getVariableText(oe,ue){return oe.value===ue||typeof ue!="string"?oe.text:ue}replace(oe,ue,me,ge){return ue&&ue.__sceneObject?i.ep.interpolate(ue.__sceneObject.value,oe,ue,me):window.__grafanaSceneContext&&window.__grafanaSceneContext.isActive?i.ep.interpolate(window.__grafanaSceneContext,oe,ue,me):oe?(this.regex.lastIndex=0,this._replaceWithVariableRegex(oe,me,(Ue,De,Pe,ye)=>{const Te=this._evaluateVariableExpression(Ue,De,Pe,ye,ue);return ge&&ge.push({match:Ue,variableName:De,fieldPath:Pe,format:ye,value:Te,found:Te!==Ue}),Te})):oe??""}_evaluateVariableExpression(oe,ue,me,ge,Ue){const De=this.getVariableAtIndex(ue),Pe=Ue?.[ue];if(Pe){const ct=this.getVariableValue(Pe,me),he=this.getVariableText(Pe,ct);if(ct!=null)return C(ct,ge,De,he)}if(!De){const ct=k[ue];return ct?ct(oe,me,Ue,ge):oe}if(ge===g.b8.QueryParam||(0,d.Kn)(De)){const ct=m.z.get(De.type).getValueForUrl(De),he=(0,d.Kn)(De)?De.id:De.current.text;return C(ct,ge,De,he)}const ye=this.grafanaVariables.get(De.current.value);if(ye)return C(ye,ge,De);let Te=De.current.value,nt=De.current.text;if(this.isAllValue(Te)&&(Te=this.getAllValue(De),nt=c.xk,De.allValue&&ge!==g.b8.Text&&ge!==g.b8.PercentEncode))return this.replace(Te);if(me){const ct=this.getVariableValue({value:Te,text:nt},me);if(ct!=null)return C(ct,ge,De,nt)}return C(Te,ge,De,nt)}_replaceWithVariableRegex(oe,ue,me){return this.regex.lastIndex=0,oe.replace(this.regex,(ge,Ue,De,Pe,ye,Te,nt)=>me(ge,Ue||De||ye,Te,Pe||nt||ue))}isAllValue(oe){return oe===c.r2||Array.isArray(oe)&&oe[0]===c.r2}replaceWithText(oe,ue){return(0,a.d)("template_srv.ts","replaceWithText()","replace(), and specify the :text format"),this.replace(oe,ue,"text")}getVariableAtIndex(oe){if(oe)return this.index[oe]?this.index[oe]:this.dependencies.getVariableWithName(oe)}getAdHocVariables(){return this.dependencies.getFilteredVariables(d.Kn)}}const re=new de;(0,r.l)(re);const fe=()=>re},53706:(G,A,e)=>{"use strict";e.d(A,{$:()=>r});var n=e(57474),a=e(43454),o=e(49355);function r(m){let c="short",d="avg",f=!1,E=m;if(m.endsWith("seconds_sum"))c="s",d="avg",f=!0;else if(m.endsWith("seconds"))c="s",d="avg",f=!1;else if(m.endsWith("bytes"))c="bytes",d="avg",f=!1;else if(m.endsWith("seconds_count")||m.endsWith("seconds_total"))d="sum",f=!0;else{if(m.endsWith("bucket"))return i(m);(m.endsWith("count")||m.endsWith("total"))&&(d="sum",f=!0)}let v=`${o.y7}${o.uA}`;f&&(v=`rate(${v}[$__rate_interval])`);const h={title:`${E}`,variant:"graph",unit:c,queries:[{refId:"A",expr:`${d}(${v})`}],vizBuilder:g},p={title:`${E}`,variant:"graph",unit:c,queries:[{refId:"A",expr:`${d}(${v}) by(${o.OP})`,legendFormat:`{{${o.OP}}}`}],vizBuilder:g};return{preview:h,main:h,breakdown:p,variants:[]}}function i(m){let c="short";m.endsWith("seconds_bucket")&&(c="s");const d={title:m,variant:"p50",unit:c,queries:[{refId:"A",expr:`histogram_quantile(0.50, sum by(le) (rate(${o.y7}${o.uA}[$__rate_interval])))`}],vizBuilder:g},f={title:m,variant:"p50",unit:c,queries:[{refId:"A",expr:`histogram_quantile(0.50, sum by(le, ${o.OP}) (rate(${o.y7}${o.uA}[$__rate_interval])))`}],vizBuilder:g},E={title:m,variant:"percentiles",unit:c,queries:[{refId:"A",expr:`histogram_quantile(0.99, sum by(le) (rate(${o.y7}${o.uA}[$__rate_interval])))`,legendFormat:"99th Percentile"},{refId:"B",expr:`histogram_quantile(0.90, sum by(le) (rate(${o.y7}${o.uA}[$__rate_interval])))`,legendFormat:"90th Percentile"},{refId:"C",expr:`histogram_quantile(0.50, sum by(le) (rate(${o.y7}${o.uA}[$__rate_interval])))`,legendFormat:"50th Percentile"}],vizBuilder:u},v={title:m,variant:"heatmap",unit:c,queries:[{refId:"A",expr:`sum by(le) (rate(${o.y7}${o.uA}[$__rate_interval]))`,format:"heatmap"}],vizBuilder:l};return{preview:d,main:E,variants:[E,v],breakdown:f}}function g(m){return n.wX.timeseries().setTitle(m.title).setData(new n.uq({datasource:o.mF,maxDataPoints:200,queries:m.queries})).setUnit(m.unit).setOption("legend",{showLegend:!1}).setCustomFieldConfig("fillOpacity",9)}function u(m){return n.wX.timeseries().setTitle(m.title).setData(new n.uq({datasource:o.mF,maxDataPoints:200,queries:m.queries})).setUnit(m.unit).setCustomFieldConfig("fillOpacity",9)}function l(m){return n.wX.heatmap().setTitle(m.title).setUnit(m.unit).setOption("calculate",!1).setOption("color",{mode:a.S_.Scheme,exponent:.5,scheme:"Spectral",steps:32,reverse:!1}).setData(new n.uq({key:o.eh,datasource:o.mF,queries:m.queries}))}},6467:(G,A,e)=>{"use strict";e.d(A,{j:()=>D});var n=e(66681),a=e(85960),o=e(91),r=e(57474),i=e(47257),g=e(5999),u=e(44839),l=e(40235);class m extends r.wx{constructor(I){super({showQuery:I.showQuery??!1,showAdvanced:I.showAdvanced??!1,isOpen:I.isOpen??!1}),this.onToggleShowQuery=()=>{this.setState({showQuery:!this.state.showQuery})},this.onToggleAdvanced=()=>{this.setState({showAdvanced:!this.state.showAdvanced})},this.onToggleMultiValue=()=>{this.setState({multiValueVars:!this.state.multiValueVars})},this.onToggleOpen=L=>{this.setState({isOpen:L})}}}m.Component=({model:x})=>{const{showQuery:I,showAdvanced:L,multiValueVars:P,isOpen:N}=x.useState(),F=(0,i.wW)(c),U=()=>a.createElement("div",{className:F.popover,onClick:j=>j.stopPropagation()},a.createElement("div",{className:F.heading},"Settings"),a.createElement("div",{className:F.options},a.createElement("div",null,"Multi value variables"),a.createElement(g.r,{value:P,onChange:x.onToggleMultiValue}),a.createElement("div",null,"Advanced options"),a.createElement(g.r,{value:L,onChange:x.onToggleAdvanced}),a.createElement("div",null,"Show query"),a.createElement(g.r,{value:I,onChange:x.onToggleShowQuery})));return a.createElement(u.L,{overlay:U,placement:"bottom",onVisibleChange:x.onToggleOpen},a.createElement(l.h,{icon:"cog",variant:"canvas",isOpen:N}))};function c(x){return{popover:(0,n.css)({display:"flex",padding:x.spacing(2),flexDirection:"column",background:x.colors.background.primary,boxShadow:x.shadows.z3,borderRadius:x.shape.borderRadius(),border:`1px solid ${x.colors.border.weak}`,zIndex:1,marginRight:x.spacing(2)}),heading:(0,n.css)({fontWeight:x.typography.fontWeightMedium,paddingBottom:x.spacing(2)}),options:(0,n.css)({display:"grid",gridTemplateColumns:"1fr 50px",rowGap:x.spacing(1),columnGap:x.spacing(2)})}}var d=e(13086),f=e(14607),E=e(49355),v=e(67313);class h extends r.wx{constructor(I){super({steps:I.steps??[],currentStep:I.currentStep??0}),this.stepTransitionInProgress=!1,this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){const I=(0,v.wZ)(this);this.state.steps.length===0&&this.addTrailStep(I,"start"),I.subscribeToState((L,P)=>{L.metric!==P.metric&&(this.state.steps.length===1&&(this.state.steps[0].trailState=r.vp.cloneSceneObjectState(P,{history:this})),L.metric&&this.addTrailStep(I,"metric"))}),I.subscribeToEvent(r.pk,L=>{L.payload.state.name===E.Xu&&this.addTrailStep(I,"filters")}),I.subscribeToEvent(r.QI,L=>{L.payload.changedObject instanceof r.gg&&this.addTrailStep(I,"time")})}addTrailStep(I,L){if(this.stepTransitionInProgress)return;const P=this.state.steps.length,N=L==="start"?-1:this.state.currentStep;this.setState({currentStep:P,steps:[...this.state.steps,{description:"Test",type:L,trailState:r.vp.cloneSceneObjectState(I.state,{history:this}),parentIndex:N}]})}goBackToStep(I){this.stepTransitionInProgress=!0,this.setState({currentStep:I}),this.stepTransitionInProgress=!1}renderStepTooltip(I){return a.createElement(d.K,{direction:"column"},a.createElement("div",null,I.type),I.type==="metric"&&a.createElement("div",null,I.trailState.metric))}}h.Component=({model:x})=>{const{steps:I,currentStep:L}=x.useState(),P=(0,i.wW)(p),{ancestry:N,alternatePredecessorStyle:F}=(0,a.useMemo)(()=>{const U=new Set;let j=L;for(;j>=0;)U.add(j),j=I[j].parentIndex;const V=new Map;return U.forEach(_=>{const H=I[_].parentIndex;H+1!==_&&V.set(_,y(_,H))}),{ancestry:U,alternatePredecessorStyle:V}},[L,I]);return a.createElement("div",{className:P.container},a.createElement("div",{className:P.heading},"Trail"),I.map((U,j)=>a.createElement(f.u,{content:()=>x.renderStepTooltip(U),key:j},a.createElement("button",{className:(0,n.cx)(P.step,P.stepTypes[U.type],x.state.currentStep===j?P.stepSelected:"",F.get(j)??"",j!==U.parentIndex+1?P.stepOmitsDirectLeftLink:"",j===0?P.stepOmitsDirectLeftLink:"",N.has(j)?"":P.stepIsNotAncestorOfCurrent),onClick:()=>x.goBackToStep(j)}))))};function p(x){const I=x.visualization;return{container:(0,n.css)({display:"flex",gap:10,alignItems:"center"}),heading:(0,n.css)({}),step:(0,n.css)({flexGrow:0,cursor:"pointer",border:"none",boxShadow:"none",padding:0,margin:0,width:8,height:8,opacity:.7,borderRadius:x.shape.radius.circle,background:x.colors.primary.main,position:"relative","&:hover":{opacity:1},"&:hover:before":{opacity:.7},"&:before":{content:'""',position:"absolute",width:10,height:2,left:-10,top:3,background:x.colors.primary.border,pointerEvents:"none"}}),stepSelected:(0,n.css)({"&:after":{content:'""',borderStyle:"solid",borderWidth:2,borderRadius:"50%",position:"absolute",width:16,height:16,left:-4,top:-4,boxShadow:`0px 0px 0px 2px inset ${x.colors.background.canvas}`}}),stepOmitsDirectLeftLink:(0,n.css)({"&:before":{background:"none"}}),stepIsNotAncestorOfCurrent:(0,n.css)({opacity:.2,"&:hover:before":{opacity:.2}}),stepTypes:{start:s(I.getColorByName("green")),filters:s(I.getColorByName("purple")),metric:s(I.getColorByName("orange")),time:s(x.colors.primary.main)}}}function s(x){return(0,n.css)({background:x,"&:before":{background:x,borderColor:x},"&:after":{borderColor:x}})}function y(x,I){const N=(x-I)*18;return(0,n.css)({"&:before":{content:'""',width:N+2,height:10,borderStyle:"solid",borderWidth:2,borderBottom:"none",borderTopLeftRadius:8,borderTopRightRadius:8,top:-10,left:3-N,background:"none"}})}var C=e(38265),b=e(97759),S=e(21873);class D extends r.wx{constructor(I){super({$timeRange:I.$timeRange??new r.gg({}),$variables:I.$variables??T(I.initialDS,I.metric,I.initialFilters),controls:I.controls??[new r.dn({layout:"vertical"}),new r.o$,new r.n7({}),new r.vf({})],history:I.history??new h({}),settings:I.settings??new m({}),...I}),this._urlSync=new r.oU(this,{keys:["metric"]}),this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){return this.state.topScene||this.setState({topScene:M(this.state.metric)}),this.subscribeToEvent(E.J_,this._handleMetricSelectedEvent.bind(this)),this.state.history.subscribeToState((I,L)=>{const P=L.steps.length;if(I.steps.length>P||L.currentStep===I.currentStep)return;const U=I.steps[I.currentStep];this.goBackToStep(U)}),()=>{this.state.embedded||((0,r.oo)().cleanUp(this),(0,S.Y)().setRecentTrail(this))}}goBackToStep(I){this.state.embedded||(0,r.oo)().cleanUp(this),I.trailState.metric||(I.trailState.metric=void 0),this.setState(I.trailState),this.state.embedded||(o.E1.replace((0,v.Ho)(this)),(0,r.oo)().initSync(this))}_handleMetricSelectedEvent(I){this.state.embedded?this.setState(this.getSceneUpdatesForNewMetricValue(I.payload)):o.E1.partial({metric:I.payload,actionView:null});const L=r.ep.lookupVariable(E.Xu,this);L instanceof r.HL&&L.state.set.setState({baseFilters:O(I.payload)})}getSceneUpdatesForNewMetricValue(I){const L={};return L.metric=I,L.topScene=M(I),L}getUrlState(){return{metric:this.state.metric}}updateFromUrl(I){const L={};typeof I.metric=="string"?this.state.metric!==I.metric&&Object.assign(L,this.getSceneUpdatesForNewMetricValue(I.metric)):I.metric===null&&(L.metric=void 0,L.topScene=new b.p({showHeading:!0})),this.setState(L)}}D.Component=({model:x})=>{const{controls:I,topScene:L,history:P,settings:N}=x.useState(),F=(0,i.wW)(R);return a.createElement("div",{className:F.container},a.createElement(P.Component,{model:P}),I&&a.createElement("div",{className:F.controls},I.map(U=>a.createElement(U.Component,{key:U.state.key,model:U})),a.createElement(N.Component,{model:N})),a.createElement("div",{className:F.body},L&&a.createElement(L.Component,{model:L})))};function M(x){return x?new C.u({metric:x}):new b.p({showHeading:!0})}function T(x,I,L){return new r.hT({variables:[new r.l3({name:E.CZ,label:"Data source",value:x,pluginId:I===E.vd?"loki":"prometheus"}),r.HL.create({name:"filters",datasource:E.mF,layout:"vertical",filters:L??[],baseFilters:O(I)})]})}function R(x){return{container:(0,n.css)({flexGrow:1,display:"flex",gap:x.spacing(2),minHeight:"100%",flexDirection:"column"}),body:(0,n.css)({flexGrow:1,display:"flex",flexDirection:"column",gap:x.spacing(1)}),controls:(0,n.css)({display:"flex",gap:x.spacing(2),alignItems:"flex-end",flexWrap:"wrap"})}}function O(x){return x?[{key:"__name__",operator:"=",value:x}]:[]}},55126:(G,A,e)=>{"use strict";e.d(A,{A:()=>M,n:()=>O});var n=e(66681),a=e(85960),o=e(30694),r=e(5836),i=e(91),g=e(57474),u=e(47257),l=e(20989),m=e(13086),c=e(29165),d=e(40377),f=e(14607),E=e(49355);function v({trail:I,onSelect:L,onDelete:P}){const N=(0,u.wW)(s),F=g.ep.lookupVariable(E.Xu,I);if(!(F instanceof g.HL))return null;const U=F.state.set.state.filters,j=p(I);return a.createElement("button",{className:N.container,onClick:()=>L(I)},a.createElement("div",{className:N.wrapper},a.createElement("div",{className:N.heading},h(I.state.metric)),P&&a.createElement(f.u,{content:"Remove bookmark"},a.createElement(c.zx,{size:"sm",icon:"trash-alt",variant:"destructive",fill:"text",onClick:P}))),a.createElement(m.K,{gap:1.5},j&&a.createElement(m.K,{direction:"column",gap:.5},a.createElement("div",{className:N.label},"Datasource"),a.createElement("div",{className:N.value},p(I))),U.map((V,_)=>a.createElement(m.K,{key:_,direction:"column",gap:.5},a.createElement("div",{className:N.label},V.key),a.createElement("div",{className:N.value},V.value)))))}function h(I){return I?I===E.vd?"Logs":I:"Select metric"}function p(I){return g.ep.interpolate(I,E.bS)}function s(I){return{container:(0,n.css)({padding:I.spacing(1),flexGrow:1,display:"flex",flexDirection:"column",gap:I.spacing(2),width:"100%",border:`1px solid ${I.colors.border.weak}`,borderRadius:I.shape.radius.default,cursor:"pointer",boxShadow:"none",background:"transparent",textAlign:"left","&:hover":{background:I.colors.emphasize(I.colors.background.primary,.03)}}),label:(0,n.css)({fontWeight:I.typography.fontWeightMedium,fontSize:I.typography.bodySmall.fontSize}),value:(0,n.css)({fontSize:I.typography.bodySmall.fontSize}),heading:(0,n.css)({padding:I.spacing(0),display:"flex",fontWeight:I.typography.fontWeightMedium,overflowX:"hidden"}),body:(0,n.css)({padding:I.spacing(0)}),wrapper:(0,n.css)({position:"relative",display:"flex",gap:I.spacing.x1,justifyContent:"space-between",width:"100%"})}}var y=e(21873),C=e(67313);class b extends g.wx{constructor(L){super(L),this.onNewMetricsTrail=()=>{const P=S(this),N=(0,C.Xk)();(0,y.Y)().setRecentTrail(N),P.goToUrlForTrail(N)},this.onSelectTrail=P=>{const N=S(this);(0,y.Y)().setRecentTrail(P),N.goToUrlForTrail(P)}}}b.Component=({model:I})=>{const[L,P]=(0,a.useState)(Date.now()),N=(0,u.wW)(D),F=U=>{(0,y.Y)().removeBookmark(U),P(Date.now())};return a.createElement("div",{className:N.container},a.createElement(m.K,{direction:"column",gap:1},a.createElement(d.x,{variant:"h2"},"Data trails"),a.createElement(d.x,{color:"secondary"},"Automatically query, explore and navigate your observability data")),a.createElement(m.K,{gap:2},a.createElement(c.zx,{icon:"plus",size:"lg",variant:"secondary",onClick:I.onNewMetricsTrail},"New metric trail")),a.createElement(m.K,{gap:4},a.createElement("div",{className:N.column},a.createElement(d.x,{variant:"h4"},"Recent trails"),a.createElement("div",{className:N.trailList},(0,y.Y)().recent.map((U,j)=>{const V=U.resolve();return a.createElement(v,{key:(V.state.key||"")+j,trail:V,onSelect:I.onSelectTrail})}))),a.createElement("div",{className:N.column},a.createElement(d.x,{variant:"h4"},"Bookmarks"),a.createElement("div",{className:N.trailList},(0,y.Y)().bookmarks.map((U,j)=>{const V=U.resolve();return a.createElement(v,{key:(V.state.key||"")+j,trail:V,onSelect:I.onSelectTrail,onDelete:()=>F(j)})})))))};function S(I){return g.ep.getAncestor(I,M)}function D(I){return{container:(0,n.css)({padding:I.spacing(2),flexGrow:1,display:"flex",flexDirection:"column",gap:I.spacing(3)}),column:(0,n.css)({width:500,display:"flex",flexDirection:"column",gap:I.spacing(2)}),newTrail:(0,n.css)({height:"auto",justifyContent:"center",fontSize:I.typography.h5.fontSize}),trailCard:(0,n.css)({}),trailList:(0,n.css)({display:"flex",flexDirection:"column",gap:I.spacing(2)})}}class M extends g.wx{constructor(L){super(L)}goToUrlForTrail(L){this.setState({trail:L}),i.E1.push((0,C.Ho)(L))}}M.Component=({model:I})=>{const{trail:L,home:P}=I.useState(),N=(0,u.wW)(x);return a.createElement(o.rs,null,a.createElement(o.AW,{exact:!0,path:"/data-trails",render:()=>a.createElement(l.T,{navId:"data-trails",layout:r.Q.Custom},a.createElement("div",{className:N.customPage},a.createElement(P.Component,{model:P})))}),a.createElement(o.AW,{exact:!0,path:"/data-trails/trail",render:()=>a.createElement(l.T,{navId:"data-trails",pageNav:{text:"Trail"},layout:r.Q.Custom},a.createElement("div",{className:N.customPage},a.createElement(T,{trail:L})))}))};function T({trail:I}){const[L,P]=a.useState(!1);return(0,a.useEffect)(()=>{L||((0,g.oo)().initSync(I),(0,y.Y)().setRecentTrail(I),P(!0))},[I,L]),L?a.createElement(I.Component,{model:I}):null}let R;function O(){return R||(R=new M({trail:(0,C.Xk)(),home:new b({})})),R}function x(I){return{customPage:(0,n.css)({padding:I.spacing(2,3,2,3),background:I.isLight?I.colors.background.primary:I.colors.background.canvas,flexGrow:1,display:"flex",flexDirection:"column"})}}},38265:(G,A,e)=>{"use strict";e.d(A,{u:()=>V});var n=e(85960),a=e(57474),o=e(61353),r=e(13086),i=e(40235),g=e(97666),u=e(53706),l=e(66681),m=e(5106),c=e(47257),d=e(20519),f=e(67313);class E extends a.wx{constructor(te){super(te),this.onChangeQuery=se=>{const de=this.state.autoQuery.variants.find(re=>re.variant===se);this.setState({panel:this.getVizPanelFor(de),queryDef:de})},te.panel||this.setState({panel:this.getVizPanelFor(te.autoQuery.main),queryDef:te.autoQuery.main})}getQuerySelector(te){const se=this.state.autoQuery.variants;if(se.length===0)return;const de=se.map(re=>({label:re.variant,value:re.variant}));return n.createElement(m.S,{size:"sm",options:de,value:te.variant,onChange:this.onChangeQuery})}getVizPanelFor(te){return te.vizBuilder(te).setHeaderActions(this.getQuerySelector(te)).build()}}E.Component=({model:X})=>{const{panel:te,queryDef:se}=X.useState(),{showQuery:de}=(0,f.Vy)(X).useState(),re=(0,c.wW)(v);if(te)return de?n.createElement("div",{className:re.wrapper},n.createElement(r.K,{gap:2},n.createElement(d.g,{label:"Query"},n.createElement("div",null,se&&se.queries.map((fe,ie)=>n.createElement("div",{key:ie},fe.expr))))),n.createElement("div",{className:re.panel},n.createElement(te.Component,{model:te}))):n.createElement(te.Component,{model:te})};function v(X){return{wrapper:(0,l.css)({display:"flex",flexDirection:"column",flexGrow:1}),panel:(0,l.css)({position:"relative",flexGrow:1})}}var h=e(29165),p=e(74539);class s extends a.wx{constructor(){super(...arguments),this.onClick=()=>{const te=a.ep.lookupVariable("filters",this);if(!(te instanceof a.HL))return;const se=this.state.frame.fields[1]?.labels??{};if(Object.keys(se).length!==1)return;(0,f.eD)(this).setActionView(void 0);const re=Object.keys(se)[0];te.state.set.setState({filters:[...te.state.set.state.filters,{key:re,operator:"=",value:se[re]}]})}}}s.Component=({model:X})=>n.createElement(h.zx,{variant:"primary",size:"sm",fill:"text",onClick:X.onClick},"Add to filters");var y=e(23757);class C extends a.wx{constructor(te){super(te),this.addActivationHandler(()=>{const se=a.ep.getData(this);this._subs.add(se.subscribeToState(de=>{de.data?.state===y.Gu.Done&&this.performRepeat(de.data)})),se.state.data&&this.performRepeat(se.state.data)})}performRepeat(te){const se=[];for(let de=0;de<te.series.length;de++){const re=this.state.getLayoutChild(te,te.series[de],de);se.push(re)}this.state.body.setState({children:se})}}C.Component=({model:X})=>{const{body:te}=X.useState();return n.createElement(te.Component,{model:te})};class b extends a.wx{constructor(){super(...arguments),this.onLayoutChange=te=>{this.setState({active:te})}}Selector({model:te}){const{active:se,options:de}=te.useState();return n.createElement(d.g,{label:"View"},n.createElement(m.S,{options:de,value:se,onChange:te.onLayoutChange}))}}b.Component=({model:X})=>{const{layouts:te,options:se,active:de}=X.useState(),re=se.findIndex(ie=>ie.value===de);if(re===-1)return null;const fe=te[re];return n.createElement(fe.Component,{model:fe})};var S=e(49355);class D extends a.wx{constructor(te){super({$variables:te.$variables??O(),labels:te.labels??[],...te}),this.onChange=se=>{const de=this.getVariable();se===p.r2?this.setState({body:T(this.getLabelOptions(de),this._query)}):de.hasAllValue()&&this.setState({body:x(this._query)}),de.changeValueTo(se)},this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){const te=this.getVariable();te.subscribeToState((de,re)=>{(de.options!==re.options||de.value!==re.value||de.loading!==re.loading)&&this.updateBody(te)});const se=a.ep.getAncestor(this,V).state.metric;this._query=(0,u.$)(se).breakdown,this.updateBody(te)}getVariable(){const te=a.ep.lookupVariable(S.lF,this);if(!(te instanceof a.$1))throw new Error("Group by variable not found");return te}updateBody(te){const se=this.getLabelOptions(te),de={loading:te.state.loading,value:String(te.state.value),labels:se};!this.state.body&&!te.state.loading&&(de.body=te.hasAllValue()?T(se,this._query):x(this._query)),this.setState(de)}getLabelOptions(te){const se=a.ep.lookupVariable(S.Xu,this),de=[];if(!(se instanceof a.HL))return[];const re=se.state.set.state.filters;for(const fe of te.getOptionsForSelect())re.find(oe=>oe.key===fe.value)||de.push({label:fe.label,value:String(fe.value)});return de}}D.Component=({model:X})=>{const{labels:te,body:se,loading:de,value:re}=X.useState(),fe=(0,c.wW)(M);return n.createElement("div",{className:fe.container},de&&n.createElement("div",null,"Loading..."),n.createElement("div",{className:fe.controls},n.createElement(d.g,{label:"By label"},n.createElement(m.S,{options:te,value:re,onChange:X.onChange})),se instanceof b&&n.createElement("div",{className:fe.controlsRight},n.createElement(se.Selector,{model:se}))),n.createElement("div",{className:fe.content},se&&n.createElement(se.Component,{model:se})))};function M(X){return{container:(0,l.css)({flexGrow:1,display:"flex",minHeight:"100%",flexDirection:"column"}),content:(0,l.css)({flexGrow:1,display:"flex",paddingTop:X.spacing(0)}),tabHeading:(0,l.css)({paddingRight:X.spacing(2),fontWeight:X.typography.fontWeightMedium}),controls:(0,l.css)({flexGrow:0,display:"flex",alignItems:"top",gap:X.spacing(2)}),controlsRight:(0,l.css)({flexGrow:1,display:"flex",justifyContent:"flex-end"})}}function T(X,te){const se=[];for(const de of X){if(de.value===p.r2)continue;const re=te.queries[0].expr.replace(S.OP,String(de.value));se.push(new a.AG({body:a.wX.timeseries().setTitle(de.label).setUnit(te.unit).setData(new a.uq({maxDataPoints:300,datasource:S.mF,queries:[{refId:"A",expr:re,legendFormat:`{{${de.label}}}`}]})).setHeaderActions(new P({labelName:String(de.value)})).build()}))}return new b({options:[{value:"grid",label:"Grid"},{value:"rows",label:"Rows"}],active:"grid",layouts:[new a.PT({templateColumns:R,autoRows:"200px",children:se}),new a.PT({templateColumns:"1fr",autoRows:"200px",children:se})]})}const R="repeat(auto-fit, minmax(400px, 1fr))";function O(){return new a.hT({variables:[new a.$1({name:S.lF,label:"Group by",datasource:S.mF,includeAll:!0,defaultToAll:!0,query:{query:`label_names(${S.y7})`,refId:"A"},value:"",text:""})]})}function x(X){return new b({$data:new a.uq({datasource:S.mF,maxDataPoints:300,queries:X.queries}),options:[{value:"single",label:"Single"},{value:"grid",label:"Grid"},{value:"rows",label:"Rows"}],active:"grid",layouts:[new a.QY({direction:"column",children:[new a.fy({minHeight:300,body:a.wX.timeseries().setTitle("$metric").build()})]}),new C({body:new a.PT({templateColumns:R,autoRows:"200px",children:[]}),getLayoutChild:(te,se,de)=>new a.AG({body:X.vizBuilder(X).setTitle(I(se)).setData(new a.Yt({data:{...te,series:[se]}})).setColor({mode:"fixed",fixedColor:(0,f.Eu)(de)}).setHeaderActions(new s({frame:se})).build()})}),new C({body:new a.PT({templateColumns:"1fr",autoRows:"200px",children:[]}),getLayoutChild:(te,se,de)=>new a.AG({body:X.vizBuilder(X).setTitle(I(se)).setData(new a.Yt({data:{...te,series:[se]}})).setColor({mode:"fixed",fixedColor:(0,f.Eu)(de)}).setHeaderActions(new s({frame:se})).build()})})]})}function I(X){const te=X.fields[1]?.labels;if(!te)return"No labels";const se=Object.keys(te);return se.length===0?"No labels":te[se[0]]}function L(){return new a.fy({body:new D({})})}class P extends a.wx{constructor(){super(...arguments),this.onClick=()=>{N(this).onChange(this.state.labelName)}}}P.Component=({model:X})=>n.createElement(h.zx,{variant:"primary",size:"sm",fill:"text",onClick:X.onClick},"Select");function N(X){if(X instanceof D)return X;if(X.parent)return N(X.parent);throw new Error("Unable to find breakdown scene")}var F=e(97759),U=e(85818),j=e(21873);class V extends a.wx{constructor(te){super({$variables:te.$variables??(0,S.Ut)(te.metric),body:te.body??Y(te.metric),...te}),this._urlSync=new a.oU(this,{keys:["actionView"]})}getUrlState(){return{actionView:this.state.actionView}}updateFromUrl(te){if(typeof te.actionView=="string"){if(this.state.actionView!==te.actionView){const se=_.find(de=>de.value===te.actionView);se&&this.setActionView(se)}}else te.actionView===null&&this.setActionView(void 0)}setActionView(te){const{body:se}=this.state;te&&te.value!==this.state.actionView?(se.state.children[0].setState({maxHeight:z}),se.setState({children:[...se.state.children.slice(0,2),te.getScene()]}),this.setState({actionView:te.value})):(se.state.children[0].setState({maxHeight:K}),se.setState({children:se.state.children.slice(0,2)}),this.setState({actionView:void 0}))}}V.Component=({model:X})=>{const{body:te}=X.useState();return n.createElement(te.Component,{model:te})};const _=[{displayName:"Breakdown",value:"breakdown",getScene:L},{displayName:"Logs",value:"logs",getScene:k},{displayName:"Related metrics",value:"related",getScene:q}];class H extends a.wx{constructor(){super(...arguments),this.onOpenTrail=()=>{this.publishEvent(new S.od,!0)}}getButtonVariant(te,se){return se===te?"active":"canvas"}}H.Component=({model:X})=>{const te=a.ep.getAncestor(X,V),se=(0,f.wZ)(X),[de,re]=(0,n.useState)(!1),{actionView:fe}=te.useState(),ie=()=>{(0,j.Y)().addBookmark(se),re(!de)};return n.createElement(o.x,{paddingY:1},n.createElement(r.K,{gap:2},_.map(oe=>n.createElement(i.h,{key:oe.value,variant:oe.value===fe?"active":"canvas",onClick:()=>te.setActionView(oe)},oe.displayName)),n.createElement(i.h,{variant:"canvas"},"Add to dashboard"),n.createElement(i.h,{variant:"canvas",icon:"compass",tooltip:"Open in explore (todo)",disabled:!0}),n.createElement(i.h,{variant:"canvas",icon:de?n.createElement(g.J,{name:"favorite",type:"mono",size:"lg"}):n.createElement(g.J,{name:"star",type:"default",size:"lg"}),tooltip:"Bookmark",onClick:ie}),n.createElement(i.h,{variant:"canvas",icon:"share-alt",tooltip:"Copy url (todo)",disabled:!0}),se.state.embedded&&n.createElement(i.h,{variant:"canvas",onClick:X.onOpenTrail},"Open")))};const z=280,K="40%";function Y(X){const te=(0,u.$)(X);return new a.QY({direction:"column",children:[new a.fy({minHeight:z,maxHeight:K,body:new E({autoQuery:te})}),new a.fy({ySizing:"content",body:new H({})})]})}function k(){return new a.fy({$data:new a.uq({queries:[{refId:"A",datasource:{uid:"gdev-loki"},expr:"{${filters}} | logfmt"}]}),body:a.wX.logs().setTitle("Logs").setHeaderActions(new U.O({metric:S.vd,title:"Open"})).build()})}function q(){return new a.fy({body:new F.p({})})}},97759:(G,A,e)=>{"use strict";e.d(A,{p:()=>h});var n=e(66681),a=e(85960),o=e(57474),r=e(34166),i=e(47257),g=e(40377),u=e(24956),l=e(5999),m=e(53706),c=e(85818),d=e(49355),f=e(67313);const E="175px",v="64px";class h extends o.wx{constructor(S){super({$variables:S.$variables??p(),body:S.body??new o.PT({children:[],templateColumns:"repeat(auto-fill, minmax(450px, 1fr))",autoRows:E}),showPreviews:!0,...S}),this._variableDependency=new o.JY(this,{variableNames:[d.js],onVariableUpdatesCompleted:this._onVariableChanged.bind(this)}),this.ignoreNextUpdate=!1,this.onSearchChange=D=>{this.setState({searchQuery:D.currentTarget.value}),this.buildLayout()},this.onTogglePreviews=()=>{this.setState({showPreviews:!this.state.showPreviews}),this.buildLayout()},this.addActivationHandler(this._onActivate.bind(this))}_onVariableChanged(S,D){D&&this.buildLayout()}_onActivate(){this.state.body.state.children.length===0?this.buildLayout():this.ignoreNextUpdate=!0}buildLayout(){if(this.ignoreNextUpdate){this.ignoreNextUpdate=!1;return}const S=o.ep.lookupVariable(d.js,this);if(!(S instanceof o.$1)||S.state.loading)return;const D=new RegExp(this.state.searchQuery??".*"),M=S.state.options,T=[],R=this.state.showPreviews,O=20,x=50;for(let L=0;L<M.length;L++){const P=M[L],N=String(P.value);if(N.match(D)){if(T.length>x)break;R&&T.length<O?T.push(new o.AG({$variables:(0,d.Ut)(N),body:s(N,L)})):T.push(new o.AG({$variables:(0,d.Ut)(N),body:y(N)}))}}const I=this.state.showPreviews?E:v;this.state.body.setState({children:T,autoRows:I})}}h.Component=({model:b})=>{const{showHeading:S,searchQuery:D,showPreviews:M}=b.useState(),T=(0,i.wW)(C);return a.createElement("div",{className:T.container},S&&a.createElement("div",{className:T.headingWrapper},a.createElement(g.x,{variant:"h4"},"Select a metric")),a.createElement("div",{className:T.header},a.createElement(u.I,{placeholder:"Search metrics",value:D,onChange:b.onSearchChange}),a.createElement(l.x,{showLabel:!0,label:"Show previews",value:M,onChange:b.onTogglePreviews})),a.createElement(b.state.body.Component,{model:b.state.body}))};function p(){return new o.hT({variables:[new o.$1({name:d.js,datasource:d.mF,hide:r.bU.hideVariable,includeAll:!0,defaultToAll:!0,skipUrlSync:!0,query:{query:`label_values(${d.uA},__name__)`,refId:"A"}})]})}function s(b,S){const D=(0,m.$)(b);return D.preview.vizBuilder(D.preview).setColor({mode:"fixed",fixedColor:(0,f.Eu)(S)}).setHeaderActions(new c.O({metric:b,title:"Select"})).build()}function y(b){return o.wX.text().setTitle(b).setHeaderActions(new c.O({metric:b,title:"Select"})).setOption("content","").build()}function C(b){return{container:(0,n.css)({display:"flex",flexDirection:"column",flexGrow:1}),headingWrapper:(0,n.css)({marginTop:b.spacing(1)}),header:(0,n.css)({flexGrow:0,display:"flex",gap:b.spacing(2),marginBottom:b.spacing(1)})}}},85818:(G,A,e)=>{"use strict";e.d(A,{O:()=>i});var n=e(85960),a=e(57474),o=e(29165),r=e(49355);class i extends a.wx{constructor(){super(...arguments),this.onClick=()=>{this.publishEvent(new r.J_(this.state.metric),!0)}}}i.Component=({model:g})=>n.createElement(o.zx,{variant:"primary",size:"sm",fill:"text",onClick:g.onClick},g.state.title)},21873:(G,A,e)=>{"use strict";e.d(A,{Y:()=>m});var n=e(56375),a=e.n(n),o=e(57474),r=e(6467),i=e(49355);const g=20;class u{constructor(){this._recent=[],this._bookmarks=[],this.load(),this._save=(0,n.debounce)(()=>{const d=this._recent.slice(0,g).map(E=>this._serializeTrail(E.resolve()));localStorage.setItem(i.Nk,JSON.stringify(d));const f=this._bookmarks.map(E=>this._serializeTrail(E.resolve()));localStorage.setItem(i.YT,JSON.stringify(f))},1e3)}_loadFromStorage(d){const f=[],E=localStorage.getItem(d);if(E){const v=JSON.parse(E);for(const h of v){const p=this._deserializeTrail(h);f.push(p.getRef())}}return f}_deserializeTrail(d){const f=new r.j({});d.history.map(v=>{this._loadFromUrl(f,v.urlValues);const h=v.parentIndex??f.state.history.state.steps.length-1;f.state.history.setState({currentStep:h}),f.state.history.addTrailStep(f,v.type)});const E=d.currentStep??f.state.history.state.steps.length-1;return f.state.history.setState({currentStep:E}),f}_serializeTrail(d){return{history:d.state.history.state.steps.map(E=>{const v=new r.j(o.vp.cloneSceneObjectState(E.trailState));return{urlValues:(0,o.oo)().getUrlState(v),type:E.type,description:E.description,parentIndex:E.parentIndex}}),currentStep:d.state.history.state.currentStep}}_loadFromUrl(d,f){d.urlSync?.updateFromUrl(f),d.forEachChild(E=>this._loadFromUrl(E,f))}get recent(){return this._recent}load(){this._recent=this._loadFromStorage(i.Nk),this._bookmarks=this._loadFromStorage(i.YT)}setRecentTrail(d){this._recent=this._recent.filter(f=>f!==d.getRef()),this._recent.unshift(d.getRef()),this._save()}get bookmarks(){return this._bookmarks}addBookmark(d){this._bookmarks.unshift(d.getRef()),this._save()}removeBookmark(d){d<this._bookmarks.length&&(this._bookmarks.splice(d,1),this._save())}}let l;function m(){return l||(l=new u),l}},49355:(G,A,e)=>{"use strict";e.d(A,{CZ:()=>f,J_:()=>b,Nk:()=>s,OP:()=>d,Ut:()=>C,Xu:()=>g,YT:()=>y,bS:()=>E,eh:()=>h,hl:()=>r,js:()=>i,lF:()=>c,mF:()=>p,od:()=>S,uA:()=>u,vd:()=>v,y7:()=>m});var n=e(74442),a=e(57474),o=e(34166);const r="/data-trails/trail",i="metricNames",g="filters",u="{${filters}}",l="metric",m="${metric}",c="groupby",d="${groupby}",f="ds",E="${ds}",v="$__logs__",h="sqr-metric-viz-query",p={uid:E},s="grafana.trails.recent",y="grafana.trails.bookmarks";function C(D){return new a.hT({variables:[new a.M6({name:l,value:D,hide:o.bU.hideVariable})]})}class b extends n.R{}b.type="metric-selected-event";class S extends n.m{}S.type="open-embedded-trail-event"},67313:(G,A,e)=>{"use strict";e.d(A,{Eu:()=>E,Ho:()=>c,Vy:()=>l,Xk:()=>m,eD:()=>f,wZ:()=>u});var n=e(173),a=e(90857),o=e(57474),r=e(6467),i=e(38265),g=e(49355);function u(v){return o.ep.getAncestor(v,r.j)}function l(v){return o.ep.getAncestor(v,r.j).state.settings}function m(){return new r.j({$timeRange:new o.gg({from:"now-1h",to:"now"}),embedded:!1})}function c(v){const h=(0,o.oo)().getUrlState(v);return d(h)}function d(v){return n.Cj.renderUrl(g.hl,v)}function f(v){if(v instanceof i.u)return v;if(v.parent)return f(v.parent);throw console.error("Unable to find graph view for",v),new Error("Unable to find trail")}function E(v){const h=a.config.theme2.visualization;return h.getColorByName(h.palette[v%8])}},98951:(G,A,e)=>{"use strict";e.d(A,{J:()=>h});var n=e(1713),a=e(59864),o=e(85960),r=e(89306),i=e(12399),g=e(90857),u=e(74042),l=e(5106),m=e(24956),c=e(3846),d=e(37600);const f=[{label:"Size",value:n.kW.Size,description:"Split the buckets based on size"},{label:"Count",value:n.kW.Count,description:"Split the buckets based on count"}],E=[{label:"Split",value:n.kW.Size,description:"Split the buckets based on size"}],v=({value:p,onChange:s,item:y})=>{const[C,b]=(0,o.useState)(!1),S=T=>{b(!(0,d.f6)(T)),s({...p,value:T})},M=(0,i.J)().getVariables().map(T=>({value:T.name,label:T.label||T.name,origin:r.L8.Template}));return o.createElement(u.Lh,null,o.createElement(l.S,{value:p?.mode||n.kW.Size,options:p?.scale?.type===n.wf.Log?E:f,onChange:T=>{s({...p,mode:T})}}),g.config.featureToggles.transformationsVariableSupport?o.createElement(c.X,{invalid:C,error:"Value needs to be an integer or a variable",value:p?.value??"",placeholder:"Auto",onChange:S,suggestions:M}):o.createElement(m.I,{value:p?.value??"",placeholder:"Auto",onChange:T=>{s({...p,value:T.currentTarget.value})}}))};function h(p,s,y,C){s.addCustomEditor({id:"xBuckets",path:`${p}xBuckets`,name:"X Bucket",editor:v,category:C,defaultValue:{mode:n.kW.Size}}),s.addCustomEditor({id:"yBuckets",path:`${p}yBuckets`,name:"Y Bucket",editor:v,category:C,defaultValue:{mode:n.kW.Size}}),s.addCustomEditor({id:"yBuckets-scale",path:`${p}yBuckets.scale`,name:"Y Bucket scale",category:C,editor:a.Y,defaultValue:{type:n.wf.Linear}})}},35466:(G,A,e)=>{"use strict";e.d(A,{xf:()=>z,Oy:()=>N,qJ:()=>V,d8:()=>j,Cj:()=>_});var n=e(98231),a=e(61751),o=e(92344),r=e(58309),i=e(94372),g=e(1930),u=e(512),l=e(18678),m=e(87500),c=e(85334),d=e(90857),f=e(1713),E=e(63352);const{abs:v,pow:h}=Math,p=new Map;function s(q,X,te,se){let de=[],re=se.map(E.d);for(let fe=X;fe<te;fe++){let ie=v(fe),oe=(0,E.O)(h(q,fe),ie);for(let ue=0;ue<se.length;ue++){let me=se[ue]*oe,ge=(me>=0&&fe>=0?0:ie)+(fe>=re[ue]?0:re[ue]),Ue=(0,E.O)(me,ge);de.push(Ue),p.set(Ue,ge)}}return de}const y=q=>q%1===0,C=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5],b=s(10,-16,0,C),S=s(10,0,16,C),D=S.filter(y),M=b.concat(S),T=b.concat(D),R=1*1e3,O=60*R,x=60*O,I=24*x,L=365*I,P=[1,2,4,5,10,20,25,40,50,100,200,250,400,500,R,2*R,4*R,5*R,10*R,15*R,20*R,30*R,O,2*O,4*O,5*O,10*O,15*O,20*O,30*O,x,2*x,4*x,6*x,8*x,12*x,18*x,I,2*I,3*I,4*I,5*I,6*I,7*I,10*I,15*I,30*I,45*I,60*I,90*I,180*I,L,2*L,3*L,4*L,5*L,6*L,7*L,8*L,9*L,10*L],N={id:a.W.heatmap,name:"Create heatmap",description:"Generate heatmap data from source data.",defaultOptions:{},isApplicable:q=>{const{xField:X,yField:te,xs:se,ys:de}=K(q);return X||te||!se.length||!de.length?o.s.NotPossible:o.s.Applicable},isApplicableDescription:"The Heatmap transformation requires fields with Heatmap compatible data. No fields with Heatmap data could be found.",operator:(q,X)=>te=>te.pipe((0,n.U)(se=>{if(d.config.featureToggles.transformationsVariableSupport){const de={...q,xBuckets:{...q.xBuckets},yBuckets:{...q.yBuckets}};return de.xBuckets?.value&&(de.xBuckets.value=X.interpolate(de.xBuckets.value)),de.yBuckets?.value&&(de.yBuckets.value=X.interpolate(de.yBuckets.value)),N.transformer(de,X)(se)}else return N.transformer(q,X)(se)})),transformer:q=>X=>{const te=z(X,q);return q.keepOriginalData?[te,...X]:[te]}};function F(q){return q==="+Inf"?1/0:q==="-Inf"?-1/0:+(q??0)}function U(q,X){return F(q)-F(X)}function j(q){return q?.meta?.custom??{}}function V(q){let X=!1;for(let te of q.fields)switch(te.name){case"y":case"yMin":case"yMax":if(X)return!1;X=!0}return X}function _(q){const X=q.frame.fields[0],te=X.values,se=q.frame.fields.filter((De,Pe)=>De.type===r.fS.number&&Pe>0),de=te.length*se.length,re=new Array(de),fe=new Array(de),ie=new Array(de),oe=se.map(De=>De.values.slice());oe.forEach((De,Pe)=>{for(let ye=0;ye<De.length;ye++)ie[oe.length*ye+Pe]=De[ye]});const ue=Array.from({length:se.length},(De,Pe)=>Pe);for(let De=0,Pe=0,ye=0;De<de;Pe=++De%ue.length)fe[De]=ue[Pe],Pe===0&&De>=ue.length&&ye++,re[De]=te[ye];let me=se[0].labels?.le!=null?"yMax":"y";switch(q.layout){case f.kv.le:me="yMax";break;case f.kv.ge:me="yMin";break;case f.kv.unknown:me="y";break}const ge={yOrdinalDisplay:se.map(De=>(0,i.CZ)(De,q.frame)),yMatchWithLabel:Object.keys(se[0].labels??{})[0]};if(ge.yMatchWithLabel&&(ge.yOrdinalLabel=se.map(De=>De.labels?.[ge.yMatchWithLabel]??""),ge.yMatchWithLabel==="le"&&(ge.yMinDisplay="0.0")),q.unit?.length||q.decimals!=null){const De=(0,g.Cf)(q.unit??"short");ge.yMinDisplay&&(ge.yMinDisplay=(0,g.zc)(De(0,q.decimals))),ge.yOrdinalDisplay=ge.yOrdinalDisplay.map(Pe=>{let ye=+Pe;return Number.isNaN(ye)?Pe:(0,g.zc)(De(ye,q.decimals))})}const Ue={...se[0].config};return Ue.displayNameFromDS&&delete Ue.displayNameFromDS,{length:re.length,refId:q.frame.refId,meta:{type:u.P.HeatmapCells,custom:ge},fields:[{name:X.type===r.fS.time?"xMax":"x",type:X.type,values:re,config:X.config},{name:me,type:r.fS.number,values:fe,config:{unit:"short"}},{name:q.value?.length?q.value:"Value",type:r.fS.number,values:ie,config:Ue,display:se[0].display}]}}function H(q){q=q.slice(),q.sort((te,se)=>U(te.name,se.name));const X=q.map(te=>te.fields[1].values.slice());return X.reverse(),X.forEach((te,se)=>{if(se<X.length-1)for(let de=0;de<te.length;de++)te[de]-=X[se+1][de]}),X.reverse(),q.map((te,se)=>({...te,fields:[te.fields[0],{...te.fields[1],values:X[se]}]}))}function z(q,X){const{xField:te,yField:se,xs:de,ys:re}=K(q);if(!te||!se)throw"no heatmap fields found";if(!de.length||!re.length)throw"no values found";const fe=X.xBuckets??{},ie=X.yBuckets??{};if(fe.scale?.type===f.wf.Log)throw"X axis only supports linear buckets";const oe=X.yBuckets?.scale??{type:f.wf.Linear},ue=Y(de,re,{xSorted:(0,c.lP)(de),xTime:te.type===r.fS.time,xMode:fe.mode,xSize:fe.mode===f.kW.Size?(0,l.iX)((0,l.RA)(fe.value??"")):fe.value?+fe.value:void 0,yMode:ie.mode,ySize:ie.value?+ie.value:void 0,yLog:oe?.type===f.wf.Log?oe?.log:void 0});return{length:ue.x.length,name:(0,i.CZ)(se),meta:{type:u.P.HeatmapCells},fields:[{name:"xMin",type:te.type,values:ue.x,config:te.config},{name:"yMin",type:r.fS.number,values:ue.y,config:{...se.config,custom:{scaleDistribution:oe}}},{name:"Count",type:r.fS.number,values:ue.count,config:{unit:"short"}}]}}function K(q){let X,te,se=0;for(let ie of q)ie.fields.find(ue=>ue.type===r.fS.time)&&(se+=ie.length);let de=Array(se),re=Array(se),fe=0;for(let ie of q){const oe=ie.fields.find(me=>me.type===r.fS.time);if(!oe)continue;X||(X=oe);const ue=oe.values;for(let me of ie.fields)if(me!==oe&&me.type===r.fS.number){const ge=me.values;for(let Ue=0;Ue<ue.length;Ue++,fe++)de[fe]=ue[Ue],re[fe]=ge[Ue];te||(te=me)}}return{xField:X,yField:te,xs:de,ys:re}}function Y(q,X,te){let se=q.length,de=te?.xSorted??!1,re=te?.ySorted??!1,fe=de?q[0]:1/0,ie=re?X[0]:1/0,oe=de?q[se-1]:-1/0,ue=re?X[se-1]:-1/0,me=te?.yLog;for(let _e=0;_e<se;_e++)de||(fe=Math.min(fe,q[_e]),oe=Math.max(oe,q[_e])),re||(!me||X[_e]>0)&&(ie=Math.min(ie,X[_e]),ue=Math.max(ue,X[_e]));let ge=te?.xSize??0,Ue=te?.ySize??0,De=te?.xMode,Pe=te?.yMode;if((!Number.isFinite(ge)||ge<=0)&&(De=f.kW.Count,ge=20),(!Number.isFinite(Ue)||Ue<=0)&&(Pe=f.kW.Count,Ue=10),De===f.kW.Count){let _e=(oe-fe)/Math.max(ge-1,1),qe=te?.xTime?P:T,rt=qe.findIndex(mt=>mt>_e)-1;ge=qe[Math.max(rt,0)]}if(Pe===f.kW.Count){let _e=(ue-ie)/Math.max(Ue-1,1),qe=te?.yTime?P:T,rt=qe.findIndex(mt=>mt>_e)-1;Ue=qe[Math.max(rt,0)]}let ye=te?.xCeil?_e=>(0,m.UO)(_e,ge):_e=>(0,m.mB)(_e,ge),Te=te?.yCeil?_e=>(0,m.UO)(_e,Ue):_e=>(0,m.mB)(_e,Ue);if(me){Ue=1/(te?.ySize??1);let _e=me===2?Math.log2:Math.log10;Te=te?.yCeil?qe=>(0,m.UO)(_e(qe),Ue):qe=>(0,m.mB)(_e(qe),Ue)}let nt=ye(fe),ct=ye(oe),he=Te(ie),xe=Te(ue),Me=Math.round((ct-nt)/ge)+1,He=Math.round((xe-he)/Ue)+1,[Ve,Oe,Ne]=k(Me,He,nt,ge,he,Ue,me);for(let _e=0;_e<se;_e++){if(me&&X[_e]<=0)continue;const qe=(ye(q[_e])-nt)/ge,rt=(Te(X[_e])-he)/Ue,mt=qe*He+rt;Ne[mt]++}return{x:Ve,y:Oe,count:Ne}}function k(q,X,te,se,de,re,fe){const ie=q*X,oe=new Array(ie),ue=new Array(ie),me=new Array(ie);for(let ge=0,Ue=0,De=te;ge<ie;Ue=++ge%X)me[ge]=0,fe?ue[ge]=fe**(de+Ue*re):ue[ge]=de+Ue*re,Ue===0&&ge>=X&&(De+=se),oe[ge]=De;return[oe,ue,me]}},70727:(G,A,e)=>{"use strict";e.d(A,{O8:()=>n,Un:()=>a,X:()=>o});var n=(i=>(i.ShortcodeFigure="shortcodeFigure",i.UIImage="uiImage",i))(n||{});const a={calculateField:{name:"Add field from calculation",getHelperDocs:function(i="shortcodeFigure"){return`
  Use this transformation to add a new field calculated from two other fields. Each transformation allows you to add one new field.

  - **Mode** - Select a mode:
    - **Reduce row** - Apply selected calculation on each row of selected fields independently.
    - **Binary operation** - Apply basic binary operations (for example, sum or multiply) on values in a single row from two selected fields.
    - **Unary operation** - Apply basic unary operations on values in a single row from a selected field. The available operations are:
      - **Absolute value (abs)** - Returns the absolute value of a given expression. It represents its distance from zero as a positive number.
      - **Natural exponential (exp)** - Returns _e_ raised to the power of a given expression.
      - **Natural logarithm (ln)** - Returns the natural logarithm of a given expression.
      - **Floor (floor)** - Returns the largest integer less than or equal to a given expression.
      - **Ceiling (ceil)** - Returns the smallest integer greater than or equal to a given expression.
    - **Cumulative functions** - Apply functions on the current row and all preceding rows.
      - **Total** - Calculates the cumulative total up to and including the current row.
      - **Mean** - Calculates the mean up to and including the current row.
    - **Window functions** - Apply window functions. The window can either be **trailing** or **centered**.
      With a trailing window the current row will be the last row in the window. 
      With a centered window the window will be centered on the current row. 
      For even window sizes, the window will be centered between the current row, and the previous row. 
      - **Mean** - Calculates the moving mean or running average.
      - **Stddev** - Calculates the moving standard deviation.
      - **Variance** - Calculates the moving variance.
    - **Row index** - Insert a field with the row index.
  - **Field name** - Select the names of fields you want to use in the calculation for the new field.
  - **Calculation** - If you select **Reduce row** mode, then the **Calculation** field appears. Click in the field to see a list of calculation choices you can use to create the new field. For information about available calculations, refer to [Calculation types][].
  - **Operation** - If you select **Binary operation** or **Unary operation** mode, then the **Operation** fields appear. These fields allow you to apply basic math operations on values in a single row from selected fields. You can also use numerical values for binary operations.
  - **As percentile** - If you select **Row index** mode, then the **As percentile** switch appears. This switch allows you to transform the row index as a percentage of the total number of rows.
  - **Alias** - (Optional) Enter the name of your new field. If you leave this blank, then the field will be named to match the calculation.
  - **Replace all fields** - (Optional) Select this option if you want to hide all other fields and display only your calculated field in the visualization.
  
  > **Note:** **Cumulative functions** and **Window functions** modes are experimental features. Engineering and on-call support is not available. Documentation is either limited or not provided outside of code comments. No SLA is provided. Enable the **addFieldFromCalculationStatFunctions** feature toggle in Grafana to use this feature. Contact Grafana Support to enable this feature in Grafana Cloud.

  In the example below, we added two fields together and named them Sum.

  ${r("/static/img/docs/transformations/add-field-from-calc-stat-example-7-0.png",i,"Add field from calculation")}
  `},links:[{title:"Calculation types",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/calculation-types/"}]},concatenate:{name:"Concatenate fields",getHelperDocs:function(){return`
  Use this transformation to combine all fields from all frames into one result.
  
  For example, if you have separate queries retrieving temperature and uptime data (Query A) and air quality index and error information (Query B), applying the concatenate transformation yields a consolidated data frame with all relevant information in one view.

  Consider the following:

  **Query A:**

  | Temp  | Uptime    |
  | ----- | --------- |
  | 15.4  | 1230233   |

  **Query B:**

  | AQI   | Errors |
  | ----- | ------ |
  | 3.2   | 5      |

  After you concatenate the fields, the data frame would be:

  | Temp  | Uptime   | AQI   | Errors |
  | ----- | -------- | ----- | ------ |
  | 15.4  | 1230233  | 3.2   | 5      |

  This transformation simplifies the process of merging data from different sources, providing a comprehensive view for analysis and visualization.
  `}},configFromData:{name:"Config from query results",getHelperDocs:function(){return`
  Use this transformation to select a query and extract standard options, such as **Min**, **Max**, **Unit**, and **Thresholds**, and apply them to other query results. This feature enables dynamic visualization configuration based on the data returned by a specific query.

  #### Options

  - **Config query** - Select the query that returns the data you want to use as configuration.
  - **Apply to** - Select the fields or series to which the configuration should be applied.
  - **Apply to options** - Specify a field type or use a field name regex, depending on your selection in **Apply to**.

  #### Field mapping table

  Below the configuration options, you'll find the field mapping table. This table lists all fields found in the data returned by the config query, along with **Use as** and **Select** options. It provides control over mapping fields to config properties, and for multiple rows, it allows you to choose which value to select.

  #### Example

  Input[0] (From query: A, name: ServerA)

  | Time          | Value |
  | ------------- | ----- |
  | 1626178119127 | 10    |
  | 1626178119129 | 30    |

  Input[1] (From query: B)

  | Time          | Value |
  | ------------- | ----- |
  | 1626178119127 | 100   |
  | 1626178119129 | 100   |

  Output (Same as Input[0] but now with config on the Value field)

  | Time          | Value (config: Max=100) |
  | ------------- | ----------------------- |
  | 1626178119127 | 10                      |
  | 1626178119129 | 30                      |

  Each row in the source data becomes a separate field. Each field now has a maximum configuration option set. Options such as **Min**, **Max**, **Unit**, and **Thresholds** are part of the field configuration. If set, they are used by the visualization instead of any options manually configured in the panel editor options pane.

  #### Value mappings

  You can also transform a query result into value mappings. With this option, every row in the configuration query result defines a single value mapping row. See the following example.

  Config query result:

  | Value | Text   | Color |
  | ----- | ------ | ----- |
  | L     | Low    | blue  |
  | M     | Medium | green |
  | H     | High   | red   |

  In the field mapping specify:

  | Field | Use as                  | Select     |
  | ----- | ----------------------- | ---------- |
  | Value | Value mappings / Value  | All values |
  | Text  | Value mappings / Text   | All values |
  | Color | Value mappings / Ciolor | All values |

  Grafana builds value mappings from your query result and applies them to the real data query results. You should see values being mapped and colored according to the config query results.
  `}},convertFieldType:{name:"Convert field type",getHelperDocs:function(){return`
  Use this transformation to modify the field type of a specified field. 
  
  This transformation has the following options:

  - **Field** - Select from available fields
  - **as** - Select the FieldType to convert to
    - **Numeric** - attempts to make the values numbers
    - **String** - will make the values strings
    - **Time** - attempts to parse the values as time
      - Will show an option to specify a DateFormat as input by a string like yyyy-mm-dd or DD MM YYYY hh:mm:ss
    - **Boolean** - will make the values booleans
    - **Enum** - will make the values enums
      - Will show a table to manage the enums
    - **Other** - attempts to parse the values as JSON

  For example, consider the following query that could be modified by selecting the time field as Time and specifying Date Format as YYYY.

  #### Sample Query

  | Time       | Mark      | Value |
  |------------|-----------|-------|
  | 2017-07-01 | above     | 25    |
  | 2018-08-02 | below     | 22    |
  | 2019-09-02 | below     | 29    |
  | 2020-10-04 | above     | 22    |

  The result:

  #### Transformed Query

  | Time                | Mark      | Value |
  |---------------------|-----------|-------|
  | 2017-01-01 00:00:00 | above     | 25    |
  | 2018-01-01 00:00:00 | below     | 22    |
  | 2019-01-01 00:00:00 | below     | 29    |
  | 2020-01-01 00:00:00 | above     | 22    |

  This transformation allows you to flexibly adapt your data types, ensuring compatibility and consistency in your visualizations.
  `}},extractFields:{name:"Extract fields",getHelperDocs:function(){return`
  Use this transformation to select a source of data and extract content from it in different formats. This transformation has the following fields:

  - **Source** - Select the field for the source of data.
  - **Format** - Choose one of the following:
    - **JSON** - Parse JSON content from the source.
    - **Key+value pairs** - Parse content in the format 'a=b' or 'c:d' from the source.
    - **Auto** - Discover fields automatically.
  - **Replace All Fields** - (Optional) Select this option to hide all other fields and display only your calculated field in the visualization.
  - **Keep Time** - (Optional) Available only if **Replace All Fields** is true. Keeps the time field in the output.

  Consider the following dataset:

  #### Dataset Example

  | Timestamp         | json_data |
  |-------------------|-----------|
  | 1636678740000000000 | {"value": 1} |
  | 1636678680000000000 | {"value": 5} |
  | 1636678620000000000 | {"value": 12} |

  You could prepare the data to be used by a [Time series panel][] with this configuration:

  - Source: json_data
  - Format: JSON
    - Field: value
    - Alias: my_value
  - Replace all fields: true
  - Keep time: true

  This will generate the following output:

  #### Transformed Data

  | Timestamp         | my_value |
  |-------------------|----------|
  | 1636678740000000000 | 1        |
  | 1636678680000000000 | 5        |
  | 1636678620000000000 | 12       |

  This transformation allows you to extract and format data in various ways. You can customize the extraction format based on your specific data needs.
  `},links:[{title:"Time series panel",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/time-series/"}]},fieldLookup:{name:"Lookup fields from resource",getHelperDocs:function(){return`
  Use this transformation to enrich a field value by looking up additional fields from an external source. 
  
 This transformation has the following fields:

  - **Field** - Select a text field from your dataset.
  - **Lookup** - Choose from **Countries**, **USA States**, and **Airports**.

  This transformation currently supports spatial data.

  For example, if you have this data:

  #### Dataset Example

  | Location  | Values |
  |-----------|--------|
  | AL        | 0      |
  | AK        | 10     |
  | Arizona   | 5      |
  | Arkansas  | 1      |
  | Somewhere | 5      |

  With this configuration:

  - Field: location
  - Lookup: USA States

  You'll get the following output:

  #### Transformed Data

  | Location  | ID | Name      | Lng        | Lat        | Values |
  |-----------|----|-----------|------------|------------|--------|
  | AL        | AL | Alabama   | -80.891064 | 12.448457  | 0      |
  | AK        | AK | Arkansas  | -100.891064| 24.448457  | 10     |
  | Arizona   |    |           |            |            | 5      |
  | Arkansas  |    |           |            |            | 1      |
  | Somewhere |    |           |            |            | 5      |

  This transformation lets you augment your data by fetching additional information from external sources, providing a more comprehensive dataset for analysis and visualization.
  `}},filterByRefId:{name:"Filter data by query refId",getHelperDocs:function(i="shortcodeFigure"){return`
  Use this transformation to hide one or more queries in panels that have multiple queries.

  Grafana displays the query identification letters in dark gray text. Click a query identifier to toggle filtering. If the query letter is white, then the results are displayed. If the query letter is dark, then the results are hidden.

  > **Note:** This transformation is not available for Graphite because this data source does not support correlating returned data with queries.

  In the example below, the panel has three queries (A, B, C). We removed the B query from the visualization.

  ${r("/static/img/docs/transformations/filter-by-query-stat-example-7-0.png",i,"Filter data by query refId")}
  `}},filterByValue:{name:"Filter data by values",getHelperDocs:function(){return`
  Use this transformation to selectively filter data points directly within your visualization. This transformation provides options to include or exclude data based on one or more conditions applied to a selected field.

  This transformation is very useful if your data source does not natively filter by values. You might also use this to narrow values to display if you are using a shared query.

  The available conditions for all fields are:

  - **Regex** - Match a regex expression.
  - **Is Null** - Match if the value is null.
  - **Is Not Null** - Match if the value is not null.
  - **Equal** - Match if the value is equal to the specified value.
  - **Different** - Match if the value is different than the specified value.

  The available conditions for number fields are:

  - **Greater** - Match if the value is greater than the specified value.
  - **Lower** - Match if the value is lower than the specified value.
  - **Greater or equal** - Match if the value is greater or equal.
  - **Lower or equal** - Match if the value is lower or equal.
  - **Range** - Match a range between a specified minimum and maximum, min and max included.

  Consider the following dataset:

  #### Dataset Example

  | Time                | Temperature | Altitude |
  |---------------------|-------------|----------|
  | 2020-07-07 11:34:23 | 32          | 101      |
  | 2020-07-07 11:34:22 | 28          | 125      |
  | 2020-07-07 11:34:21 | 26          | 110      |
  | 2020-07-07 11:34:20 | 23          | 98       |
  | 2020-07-07 10:32:24 | 31          | 95       |
  | 2020-07-07 10:31:22 | 20          | 85       |
  | 2020-07-07 09:30:57 | 19          | 101      |

  If you **Include** the data points that have a temperature below 30\xB0C, the configuration will look as follows:

  - Filter Type: 'Include'
  - Condition: Rows where 'Temperature' matches 'Lower Than' '30'

  And you will get the following result, where only the temperatures below 30\xB0C are included:

  #### Transformed Data

  | Time                | Temperature | Altitude |
  |---------------------|-------------|----------|
  | 2020-07-07 11:34:22 | 28          | 125      |
  | 2020-07-07 11:34:21 | 26          | 110      |
  | 2020-07-07 11:34:20 | 23          | 98       |
  | 2020-07-07 10:31:22 | 20          | 85       |
  | 2020-07-07 09:30:57 | 19          | 101      |

  You can add more than one condition to the filter. For example, you might want to include the data only if the altitude is greater than 100. To do so, add that condition to the following configuration:

  - Filter type: 'Include' rows that 'Match All' conditions
  - Condition 1: Rows where 'Temperature' matches 'Lower' than '30'
  - Condition 2: Rows where 'Altitude' matches 'Greater' than '100'

  When you have more than one condition, you can choose if you want the action (include/exclude) to be applied on rows that **Match all** conditions or **Match any** of the conditions you added.

  In the example above, we chose **Match all** because we wanted to include the rows that have a temperature lower than 30\xB0C *AND* an altitude higher than 100. If we wanted to include the rows that have a temperature lower than 30\xB0C *OR* an altitude higher than 100 instead, then we would select **Match any**. This would include the first row in the original data, which has a temperature of 32\xB0C (does not match the first condition) but an altitude of 101 (which matches the second condition), so it is included.

  Conditions that are invalid or incompletely configured are ignored.

  This versatile data filtering transformation lets you to selectively include or exclude data points based on specific conditions. Customize the criteria to tailor your data presentation to meet your unique analytical needs.
  `}},filterFieldsByName:{name:"Filter fields by name",getHelperDocs:function(i="shortcodeFigure"){return`
  Use this transformation to selectively remove parts of your query results. There are three ways to filter field names:
  
  - [Using a regular expression](#use-a-regular-expression)
  - [Manually selecting included fields](#manually-select-included-fields)
  - [Using a dashboard variable](#use-a-dashboard-variable)
  
  #### Use a regular expression
  
  When you filter using a regular expression, field names that match the regular expression are included. 
  
  For example, from the input data:

  | Time                | dev-eu-west | dev-eu-north | prod-eu-west | prod-eu-north |
  | ------------------- | ----------- | ------------ | ------------ | ------------- |
  | 2023-03-04 23:56:23 | 23.5        | 24.5         | 22.2         | 20.2          |
  | 2023-03-04 23:56:23 | 23.6        | 24.4         | 22.1         | 20.1          |
  
  The result from using the regular expression 'prod.*' would be:
  
  | Time                | prod-eu-west | prod-eu-north |
  | ------------------- | ------------ | ------------- |
  | 2023-03-04 23:56:23 | 22.2         | 20.2          |
  | 2023-03-04 23:56:23 | 22.1         | 20.1          |
  
  The regular expression can include an interpolated dashboard variable by using the \${variableName} syntax.
  
  #### Manually select included fields
  
  Click and uncheck the field names to remove them from the result. Fields that are matched by the regular expression are still included, even if they're unchecked.
  
  #### Use a dashboard variable
  
  Enable 'From variable' to let you select a dashboard variable that's used to include fields. By setting up a [dashboard variable][] with multiple choices, the same fields can be displayed across multiple visualizations.

  ${r("/static/img/docs/transformations/filter-name-table-before-7-0.png",i,"Filter fields by name1")}

  Here's the table after we applied the transformation to remove the Min field.

  ${r("/static/img/docs/transformations/filter-name-table-after-7-0.png",i,"Filter fields by name2")}

  Here is the same query using a Stat visualization.

  ${r("/static/img/docs/transformations/filter-name-stat-after-7-0.png",i,"Filter fields by name3")}

  This transformation provides flexibility in tailoring your query results to focus on the specific fields you need for effective analysis and visualization.
  `}},formatString:{name:"Format string",getHelperDocs:function(){return`
  Use this transformation to customize the output of a string field. This transformation has the following fields:
  
  - **Upper case** - Formats the entire string in uppercase characters.
  - **Lower case** - Formats the entire string in lowercase characters.
  - **Sentence case** - Formats the first character of the string in uppercase.
  - **Title case** - Formats the first character of each word in the string in uppercase.
  - **Pascal case** - Formats the first character of each word in the string in uppercase and doesn't include spaces between words.
  - **Camel case** - Formats the first character of each word in the string in uppercase, except the first word, and doesn't include spaces between words.
  - **Snake case** - Formats all characters in the string in lowercase and uses underscores instead of spaces between words.
  - **Kebab case** - Formats all characters in the string in lowercase and uses dashes instead of spaces between words.
  - **Trim** - Removes all leading and trailing spaces from the string.
  - **Substring** - Returns a substring of the string, using the specified start and end positions.

  This transformation provides a convenient way to standardize and tailor the presentation of string data for better visualization and analysis.

  > **Note:** This transformation is an experimental feature. Engineering and on-call support is not available. Documentation is either limited or not provided outside of code comments. No SLA is provided. Enable the **formatString** feature toggle in Grafana to use this feature. Contact Grafana Support to enable this feature in Grafana Cloud.
  `}},formatTime:{name:"Format time",getHelperDocs:function(){return`
  Use this transformation to customize the output of a time field. Output can be formatted using [Moment.js format strings](https://momentjs.com/docs/#/displaying/). For example, if you want to display only the year of a time field, the format string 'YYYY' can be used to show the calendar year (for example, 1999 or 2012).

  **Before Transformation:**

  | Timestamp           | Event          |
  | ------------------- | -------------- |
  | 1636678740000000000 | System Start   |
  | 1636678680000000000 | User Login     |
  | 1636678620000000000 | Data Updated   |

  **After applying 'YYYY-MM-DD HH:mm:ss':**

  | Timestamp           | Event          |
  | ------------------- | -------------- |
  | 2021-11-12 14:25:40 | System Start   |
  | 2021-11-12 14:24:40 | User Login     |
  | 2021-11-12 14:23:40 | Data Updated   |

  This transformation lets you tailor the time representation in your visualizations, providing flexibility and precision in displaying temporal data.

  > **Note:** This transformation is available in Grafana 10.1+ as an alpha feature.
  `}},groupBy:{name:"Group by",getHelperDocs:function(){return`
  Use this transformation to group the data by a specified field (column) value and process calculations on each group. Click to see a list of calculation choices. For information about available calculations, refer to [Calculation types][].

  Here's an example of original data.

  | Time                | Server ID | CPU Temperature | Server Status |
  | ------------------- | --------- | --------------- | ------------- |
  | 2020-07-07 11:34:20 | server 1  | 80              | Shutdown      |
  | 2020-07-07 11:34:20 | server 3  | 62              | OK            |
  | 2020-07-07 10:32:20 | server 2  | 90              | Overload      |
  | 2020-07-07 10:31:22 | server 3  | 55              | OK            |
  | 2020-07-07 09:30:57 | server 3  | 62              | Rebooting     |
  | 2020-07-07 09:30:05 | server 2  | 88              | OK            |
  | 2020-07-07 09:28:06 | server 1  | 80              | OK            |
  | 2020-07-07 09:25:05 | server 2  | 88              | OK            |
  | 2020-07-07 09:23:07 | server 1  | 86              | OK            |

  This transformation goes in two steps. First you specify one or multiple fields to group the data by. This will group all the same values of those fields together, as if you sorted them. For instance if we group by the Server ID field, then it would group the data this way:

  | Time                | Server ID      | CPU Temperature | Server Status |
  | ------------------- | -------------- | --------------- | ------------- |
  | 2020-07-07 11:34:20 | **server 1**   | 80              | Shutdown      |
  | 2020-07-07 09:28:06 | **server 1**   | 80              | OK            |
  | 2020-07-07 09:23:07 | **server 1**   | 86              | OK            |
  | 2020-07-07 10:32:20 | server 2       | 90              | Overload      |
  | 2020-07-07 09:30:05 | server 2       | 88              | OK            |
  | 2020-07-07 09:25:05 | server 2       | 88              | OK            |
  | 2020-07-07 11:34:20 | **_server 3_** | 62              | OK            |
  | 2020-07-07 10:31:22 | **_server 3_** | 55              | OK            |
  | 2020-07-07 09:30:57 | **_server 3_** | 62              | Rebooting     |

  All rows with the same value of Server ID are grouped together.

  After choosing which field you want to group your data by, you can add various calculations on the other fields, and apply the calculation to each group of rows. For instance, we could want to calculate the average CPU temperature for each of those servers. So we can add the _mean_ calculation applied on the CPU Temperature field to get the following:

  | Server ID | CPU Temperature (mean) |
  | --------- | ---------------------- |
  | server 1  | 82                     |
  | server 2  | 88.6                   |
  | server 3  | 59.6                   |

  And we can add more than one calculation. For instance:

  - For field Time, we can calculate the _Last_ value, to know when the last data point was received for each server
  - For field Server Status, we can calculate the _Last_ value to know what is the last state value for each server
  - For field Temperature, we can also calculate the _Last_ value to know what is the latest monitored temperature for each server

  We would then get:

  | Server ID | CPU Temperature (mean) | CPU Temperature (last) | Time (last)         | Server Status (last) |
  | --------- | ---------------------- | ---------------------- | ------------------- | -------------------- |
  | server 1  | 82                     | 80                     | 2020-07-07 11:34:20 | Shutdown             |
  | server 2  | 88.6                   | 90                     | 2020-07-07 10:32:20 | Overload             |
  | server 3  | 59.6                   | 62                     | 2020-07-07 11:34:20 | OK                   |

  This transformation allows you to extract essential information from your time series and present it conveniently.
  `},links:[{title:"Calculation types",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/calculation-types/"}]},groupingToMatrix:{name:"Grouping to matrix",getHelperDocs:function(){return`
  Use this transformation to combine three fields\u2014which are used as input for the **Column**, **Row**, and **Cell value** fields from the query output\u2014and generate a matrix. The matrix is calculated as follows:

  **Original data**

  | Server ID | CPU Temperature | Server Status |
  | --------- | --------------- | ------------- |
  | server 1  | 82              | OK            |
  | server 2  | 88.6            | OK            |
  | server 3  | 59.6            | Shutdown      |

  We can generate a matrix using the values of 'Server Status' as column names, the 'Server ID' values as row names, and the 'CPU Temperature' as content of each cell. The content of each cell will appear for the existing column ('Server Status') and row combination ('Server ID'). For the rest of the cells, you can select which value to display between: **Null**, **True**, **False**, or **Empty**.

  **Output**

  | Server IDServer Status | OK   | Shutdown |
  | ----------------------- | ---- | -------- |
  | server 1                | 82   |          |
  | server 2                | 88.6 |          |
  | server 3                |      | 59.6     |

  Use this transformation to construct a matrix by specifying fields from your query results. The matrix output reflects the relationships between the unique values in these fields. This helps you present complex relationships in a clear and structured matrix format.
  `}},heatmap:{name:"Create heatmap",getHelperDocs:function(){return`
  Use this transformation to prepare histogram data for visualizing trends over time. Similar to the heatmap visualization, this transformation converts histogram metrics into temporal buckets.

  #### X Bucket

  This setting determines how the x-axis is split into buckets.

  - **Size** - Specify a time interval in the input field. For example, a time range of '1h' creates cells one hour wide on the x-axis.
  - **Count** - For non-time-related series, use this option to define the number of elements in a bucket.

  #### Y Bucket

  This setting determines how the y-axis is split into buckets.

  - **Linear**
  - **Logarithmic** - Choose between log base 2 or log base 10.
  - **Symlog** - Uses a symmetrical logarithmic scale. Choose between log base 2 or log base 10, allowing for negative values.

  Assume you have the following dataset:

  | Timestamp           | Value |
  |-------------------- |-------|
  | 2023-01-01 12:00:00 | 5     |
  | 2023-01-01 12:15:00 | 10    |
  | 2023-01-01 12:30:00 | 15    |
  | 2023-01-01 12:45:00 | 8     |

  - With X Bucket set to 'Size: 15m' and Y Bucket as 'Linear', the histogram organizes values into time intervals of 15 minutes on the x-axis and linearly on the y-axis.
  - For X Bucket as 'Count: 2' and Y Bucket as 'Logarithmic (base 10)', the histogram groups values into buckets of two on the x-axis and use a logarithmic scale on the y-axis.
  `}},histogram:{name:"Histogram",getHelperDocs:function(){return`
  Use this transformation to generate a histogram based on input data, allowing you to visualize the distribution of values.

  - **Bucket size** - The range between the lowest and highest items in a bucket (xMin to xMax).
  - **Bucket offset** - The offset for non-zero-based buckets.
  - **Combine series** - Create a unified histogram using all available series.

  **Original data**

  Series 1:

  | A   | B   | C   |
  | --- | --- | --- |
  | 1   | 3   | 5   |
  | 2   | 4   | 6   |
  | 3   | 5   | 7   |
  | 4   | 6   | 8   |
  | 5   | 7   | 9   |

  Series 2:

  | C   |
  | --- |
  | 5   |
  | 6   |
  | 7   |
  | 8   |
  | 9   |

  **Output**

  | xMin | xMax | A   | B   | C   | C   |
  | ---- | ---- | --- | --- | --- | --- |
  | 1    | 2    | 1   | 0   | 0   | 0   |
  | 2    | 3    | 1   | 0   | 0   | 0   |
  | 3    | 4    | 1   | 1   | 0   | 0   |
  | 4    | 5    | 1   | 1   | 0   | 0   |
  | 5    | 6    | 1   | 1   | 1   | 1   |
  | 6    | 7    | 0   | 1   | 1   | 1   |
  | 7    | 8    | 0   | 1   | 1   | 1   |
  | 8    | 9    | 0   | 0   | 1   | 1   |
  | 9    | 10   | 0   | 0   | 1   | 1   |

  Visualize the distribution of values using the generated histogram, providing insights into the data's spread and density.
  `}},joinByField:{name:"Join by field",getHelperDocs:function(i="shortcodeFigure"){return`
  Use this transformation to merge multiple results into a single table, enabling the consolidation of data from different queries.

  This is especially useful for converting multiple time series results into a single wide table with a shared time field.

  #### Inner join

  An inner join merges data from multiple tables where all tables share the same value from the selected field. This type of join excludes data where values do not match in every result.

  Use this transformation to combine the results from multiple queries (combining on a passed join field or the first time column) into one result, and drop rows where a successful join cannot occur.

  In the following example, two queries return table data. It is visualized as two separate tables before applying the inner join transformation.

  **Query A:**

  | Time                | Job     | Uptime    |
  | ------------------- | ------- | --------- |
  | 2020-07-07 11:34:20 | node    | 25260122  |
  | 2020-07-07 11:24:20 | postgre | 123001233 |
  | 2020-07-07 11:14:20 | postgre | 345001233 |

  **Query B:**

  | Time                | Server   | Errors |
  | ------------------- | -------- | ------ |
  | 2020-07-07 11:34:20 | server 1 | 15     |
  | 2020-07-07 11:24:20 | server 2 | 5      |
  | 2020-07-07 11:04:20 | server 3 | 10     |

  The result after applying the inner join transformation looks like the following:

  | Time                | Job     | Uptime    | Server   | Errors |
  | ------------------- | ------- | --------- | -------- | ------ |
  | 2020-07-07 11:34:20 | node    | 25260122  | server 1 | 15     |
  | 2020-07-07 11:24:20 | postgre | 123001233 | server 2 | 5      |

  #### Outer join

  An outer join includes all data from an inner join and rows where values do not match in every input. While the inner join joins Query A and Query B on the time field, the outer join includes all rows that don't match on the time field.

  In the following example, two queries return table data. It is visualized as two tables before applying the outer join transformation.

  **Query A:**

  | Time                | Job     | Uptime    |
  | ------------------- | ------- | --------- |
  | 2020-07-07 11:34:20 | node    | 25260122  |
  | 2020-07-07 11:24:20 | postgre | 123001233 |
  | 2020-07-07 11:14:20 | postgre | 345001233 |

  **Query B:**

  | Time                | Server   | Errors |
  | ------------------- | -------- | ------ |
  | 2020-07-07 11:34:20 | server 1 | 15     |
  | 2020-07-07 11:24:20 | server 2 | 5      |
  | 2020-07-07 11:04:20 | server 3 | 10     |

  The result after applying the outer join transformation looks like the following:

  | Time                | Job     | Uptime    | Server   | Errors |
  | ------------------- | ------- | --------- | -------- | ------ |
  | 2020-07-07 11:04:20 |         |           | server 3 | 10     |
  | 2020-07-07 11:14:20 | postgre | 345001233 |          |        |
  | 2020-07-07 11:34:20 | node    | 25260122  | server 1 | 15     |
  | 2020-07-07 11:24:20 | postgre | 123001233 | server 2 | 5      |

  In the following example, a template query displays time series data from multiple servers in a table visualization. The results of only one query can be viewed at a time.

  ${r("/static/img/docs/transformations/join-fields-before-7-0.png",i,"Join by field1")}

  I applied a transformation to join the query results using the time field. Now I can run calculations, combine, and organize the results in this new table.

  ${r("/static/img/docs/transformations/join-fields-after-7-0.png",i,"Join by field2")}

  Combine and analyze data from various queries with table joining for a comprehensive view of your information.
  `}},joinByLabels:{name:"Join by labels",getHelperDocs:function(){return`
  Use this transformation to join multiple results into a single table.
  
  This is especially useful for converting multiple time series results into a single wide table with a shared **Label** field.

  - **Join** - Select the label to join by between the labels available or common across all time series.
  - **Value** - The name for the output result.

  #### Example

  ##### Input

  series1{what="Temp", cluster="A", job="J1"}

  | Time | Value |
  | ---- | ----- |
  | 1    | 10    |
  | 2    | 200   |

  series2{what="Temp", cluster="B", job="J1"}

  | Time | Value |
  | ---- | ----- |
  | 1    | 10    |
  | 2    | 200   |

  series3{what="Speed", cluster="B", job="J1"}

  | Time | Value |
  | ---- | ----- |
  | 22   | 22    |
  | 28   | 77    |

  ##### Config

  value: "what"

  ##### Output

  | cluster | job | Temp | Speed |
  | ------- | --- | ---- | ----- |
  | A       | J1  | 10   |       |
  | A       | J1  | 200  |       |
  | B       | J1  | 10   | 22    |
  | B       | J1  | 200  | 77    |

  Combine and organize time series data effectively with this transformation for comprehensive insights.
  `}},labelsToFields:{name:"Labels to fields",getHelperDocs:function(){return`
  Use this transformation to convert time series results with labels or tags into a table, including each label's keys and values in the result. Display labels as either columns or row values for enhanced data visualization.

  Given a query result of two time series:

  - Series 1: labels Server=Server A, Datacenter=EU
  - Series 2: labels Server=Server B, Datacenter=EU

  In "Columns" mode, the result looks like this:

  | Time                | Server   | Datacenter | Value |
  | ------------------- | -------- | ---------- | ----- |
  | 2020-07-07 11:34:20 | Server A | EU         | 1     |
  | 2020-07-07 11:34:20 | Server B | EU         | 2     |

  In "Rows" mode, the result has a table for each series and show each label value like this:

  | label      | value    |
  | ---------- | -------- |
  | Server     | Server A |
  | Datacenter | EU       |

  | label      | value    |
  | ---------- | -------- |
  | Server     | Server B |
  | Datacenter | EU       |

  #### Value field name

  If you selected Server as the **Value field name**, then you would get one field for every value of the Server label.

  | Time                | Datacenter | Server A | Server B |
  | ------------------- | ---------- | -------- | -------- |
  | 2020-07-07 11:34:20 | EU         | 1        | 2        |

  #### Merging behavior

  The labels to fields transformer is internally two separate transformations. The first acts on single series and extracts labels to fields. The second is the [merge](#merge) transformation that joins all the results into a single table. The merge transformation tries to join on all matching fields. This merge step is required and cannot be turned off.

  To illustrate this, here is an example where you have two queries that return time series with no overlapping labels.

  - Series 1: labels Server=ServerA
  - Series 2: labels Datacenter=EU

  This will first result in these two tables:

  | Time                | Server  | Value |
  | ------------------- | ------- | ----- |
  | 2020-07-07 11:34:20 | ServerA | 10    |

  | Time                | Datacenter | Value |
  | ------------------- | ---------- | ----- |
  | 2020-07-07 11:34:20 | EU         | 20    |

  After merge:

  | Time                | Server  | Value | Datacenter |
  | ------------------- | ------- | ----- | ---------- |
  | 2020-07-07 11:34:20 | ServerA | 10    |            |
  | 2020-07-07 11:34:20 |         | 20    | EU         |

  Convert your time series data into a structured table format for a clearer and more organized representation.
  `}},limit:{name:"Limit",getHelperDocs:function(){return`
  Use this transformation to restrict the number of rows displayed, providing a more focused view of your data. This is particularly useful when dealing with large datasets.

  Below is an example illustrating the impact of the **Limit** transformation on a response from a data source:

  | Time                | Metric      | Value |
  | ------------------- | ----------- | ----- |
  | 2020-07-07 11:34:20 | Temperature | 25    |
  | 2020-07-07 11:34:20 | Humidity    | 22    |
  | 2020-07-07 10:32:20 | Humidity    | 29    |
  | 2020-07-07 10:31:22 | Temperature | 22    |
  | 2020-07-07 09:30:57 | Humidity    | 33    |
  | 2020-07-07 09:30:05 | Temperature | 19    |

  Here is the result after adding a Limit transformation with a value of '3':

  | Time                | Metric      | Value |
  | ------------------- | ----------- | ----- |
  | 2020-07-07 11:34:20 | Temperature | 25    |
  | 2020-07-07 11:34:20 | Humidity    | 22    |
  | 2020-07-07 10:32:20 | Humidity    | 29    |

  This transformation helps you tailor the visual presentation of your data to focus on the most relevant information.
  `}},merge:{name:"Merge series/tables",getHelperDocs:function(){return`
  Use this transformation to combine the results from multiple queries into a single result, which is particularly useful when using the table panel visualization. This transformation merges values into the same row if the shared fields contain the same data.
  
  Here's an example illustrating the impact of the **Merge series/tables** transformation on two queries returning table data:

  **Query A:**

  | Time                | Job     | Uptime    |
  | ------------------- | ------- | --------- |
  | 2020-07-07 11:34:20 | node    | 25260122  |
  | 2020-07-07 11:24:20 | postgre | 123001233 |

  **Query B:**

  | Time                | Job     | Errors |
  | ------------------- | ------- | ------ |
  | 2020-07-07 11:34:20 | node    | 15     |
  | 2020-07-07 11:24:20 | postgre | 5      |

  Here is the result after applying the Merge transformation.

  | Time                | Job     | Errors | Uptime    |
  | ------------------- | ------- | ------ | --------- |
  | 2020-07-07 11:34:20 | node    | 15     | 25260122  |
  | 2020-07-07 11:24:20 | postgre | 5      | 123001233 |

  This transformation combines values from Query A and Query B into a unified table, enhancing the presentation of data for better insights.
  `},links:[{title:"Table panel",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/table/"}]},organize:{name:"Organize fields by name",getHelperDocs:function(){return`
  Use this transformation to provide the flexibility to rename, reorder, or hide fields returned by a single query in your panel. This transformation is applicable only to panels with a single query. If your panel has multiple queries, consider using an "Outer join" transformation or removing extra queries.

  #### Transforming fields
  
  Grafana displays a list of fields returned by the query, allowing you to perform the following actions:
  
  - **Change field order** - Hover over a field, and when your cursor turns into a hand, drag the field to its new position.
  - **Hide or show a field** - Use the eye icon next to the field name to toggle the visibility of a specific field.
  - **Rename fields** - Type a new name in the "Rename <field>" box to customize field names.
  
  #### Example:
  
  ##### Original Query Result
  
  | Time                | Metric      | Value |
  | ------------------- | ----------- | ----- |
  | 2020-07-07 11:34:20 | Temperature | 25    |
  | 2020-07-07 11:34:20 | Humidity    | 22    |
  | 2020-07-07 10:32:20 | Humidity    | 29    |
  
  ##### After Applying Field Overrides
  
  | Time                | Sensor      | Reading |
  | ------------------- | ----------- | ------- |
  | 2020-07-07 11:34:20 | Temperature | 25      |
  | 2020-07-07 11:34:20 | Humidity    | 22      |
  | 2020-07-07 10:32:20 | Humidity    | 29      |

  This transformation lets you to tailor the display of query results, ensuring a clear and insightful representation of your data in Grafana.
  `}},partitionByValues:{name:"Partition by values",getHelperDocs:function(){return`
  Use this transformation to streamline the process of graphing multiple series without the need for multiple queries with different 'WHERE' clauses.
  
  This is particularly useful when dealing with a metrics SQL table, as illustrated below:

  | Time                | Region | Value |
  | ------------------- | ------ | ----- |
  | 2022-10-20 12:00:00 | US     | 1520  |
  | 2022-10-20 12:00:00 | EU     | 2936  |
  | 2022-10-20 01:00:00 | US     | 1327  |
  | 2022-10-20 01:00:00 | EU     | 912   |
  
  With the **Partition by values** transformation, you can issue a single query and split the results by unique values in one or more columns (fields) of your choosing. The following example uses 'Region':

  'SELECT Time, Region, Value FROM metrics WHERE Time > "2022-10-20"'

  | Time                | Region | Value |
  | ------------------- | ------ | ----- |
  | 2022-10-20 12:00:00 | US     | 1520  |
  | 2022-10-20 01:00:00 | US     | 1327  |

  | Time                | Region | Value |
  | ------------------- | ------ | ----- |
  | 2022-10-20 12:00:00 | EU     | 2936  |
  | 2022-10-20 01:00:00 | EU     | 912   |

  This transformation simplifies the process and enhances the flexibility of visualizing multiple series within the same time series visualization.
  `}},prepareTimeSeries:{name:"Prepare time series",getHelperDocs:function(){return`
  Use this transformation to address issues when a data source returns time series data in a format that isn't compatible with the desired visualization. This transformation allows you to convert time series data between wide and long formats, providing flexibility in data frame structures.

  #### Available options
  
  ##### Multi-frame time series
  
  Use this option to transform the time series data frame from the wide format to the long format. This is particularly helpful when your data source delivers time series information in a format that needs to be reshaped for optimal compatibility with your visualization.
  
  **Example: Converting from wide to long format**
  
  | Timestamp           | Value1 | Value2 |
  |---------------------|--------|--------|
  | 2023-01-01 00:00:00 | 10     | 20     |
  | 2023-01-01 01:00:00 | 15     | 25     |
  
  **Transformed to:**
  
  | Timestamp           | Variable | Value |
  |---------------------|----------|-------|
  | 2023-01-01 00:00:00 | Value1   | 10    |
  | 2023-01-01 00:00:00 | Value2   | 20    |
  | 2023-01-01 01:00:00 | Value1   | 15    |
  | 2023-01-01 01:00:00 | Value2   | 25    |
  
  
  ##### Wide time series
  
  Select this option to transform the time series data frame from the long format to the wide format. If your data source returns time series data in a long format and your visualization requires a wide format, this transformation simplifies the process.
  
  **Example: Converting from long to wide format**
  
  | Timestamp           | Variable | Value |
  |---------------------|----------|-------|
  | 2023-01-01 00:00:00 | Value1   | 10    |
  | 2023-01-01 00:00:00 | Value2   | 20    |
  | 2023-01-01 01:00:00 | Value1   | 15    |
  | 2023-01-01 01:00:00 | Value2   | 25    |
  
  **Transformed to:**
  
  | Timestamp           | Value1 | Value2 |
  |---------------------|--------|--------|
  | 2023-01-01 00:00:00 | 10     | 20     |
  | 2023-01-01 01:00:00 | 15     | 25     |

  > **Note:** This transformation is available in Grafana 7.5.10+ and Grafana 8.0.6+.
  `},links:[{title:"Data frames",url:"https://grafana.com/docs/grafana/latest/developers/plugins/introduction-to-plugin-development/data-frames/"}]},reduce:{name:"Reduce",getHelperDocs:function(){return`
  Use this transformation to apply a calculation to each field in the data frame and return a single value. This transformation is particularly useful for consolidating multiple time series data into a more compact, summarized format. Time fields are removed when applying this transformation.

  Consider the input:

  **Query A:**

  | Time                | Temp | Uptime  |
  | ------------------- | ---- | ------- |
  | 2020-07-07 11:34:20 | 12.3 | 256122  |
  | 2020-07-07 11:24:20 | 15.4 | 1230233 |

  **Query B:**

  | Time                | AQI | Errors |
  | ------------------- | --- | ------ |
  | 2020-07-07 11:34:20 | 6.5 | 15     |
  | 2020-07-07 11:24:20 | 3.2 | 5      |

  The reduce transformer has two modes:

  - **Series to rows** - Creates a row for each field and a column for each calculation.
  - **Reduce fields** - Keeps the existing frame structure, but collapses each field into a single value.

  For example, if you used the **First** and **Last** calculation with a **Series to rows** transformation, then
  the result would be:

  | Field  | First  | Last    |
  | ------ | ------ | ------- |
  | Temp   | 12.3   | 15.4    |
  | Uptime | 256122 | 1230233 |
  | AQI    | 6.5    | 3.2     |
  | Errors | 15     | 5       |

  The **Reduce fields** with the **Last** calculation,
  results in two frames, each with one row:

  **Query A:**

  | Temp | Uptime  |
  | ---- | ------- |
  | 15.4 | 1230233 |

  **Query B:**

  | AQI | Errors |
  | --- | ------ |
  | 3.2 | 5      |

  This flexible transformation simplifies the process of consolidating and summarizing data from multiple time series into a more manageable and organized format.
  `}},renameByRegex:{name:"Rename by regex",getHelperDocs:function(i="shortcodeFigure"){return`
  Use this transformation to rename parts of the query results using a regular expression and replacement pattern.

  You can specify a regular expression, which is only applied to matches, along with a replacement pattern that support back references. For example, let's imagine you're visualizing CPU usage per host and you want to remove the domain name. You could set the regex to '([^.]+)..+' and the replacement pattern to '$1', 'web-01.example.com' would become 'web-01'.
  
  In the following example, we are stripping the prefix from event types. In the before image, you can see everything is prefixed with 'system.'

  ${r("/static/img/docs/transformations/rename-by-regex-before-7-3.png",i,"Rename by regex1")}

  With the transformation applied, you can see we are left with just the remainder of the string.

  ${r("/static/img/docs/transformations/rename-by-regex-after-7-3.png",i,"Rename by regex2")}

  This transformation lets you to tailor your data to meet your visualization needs, making your dashboards more informative and user-friendly.
  `}},rowsToFields:{name:"Rows to fields",getHelperDocs:function(){return`
  Use this transformation to convert rows into separate fields. This can be useful because fields can be styled and configured individually. It can also use additional fields as sources for dynamic field configuration or map them to field labels. The additional labels can then be used to define better display names for the resulting fields.

  This transformation includes a field table which lists all fields in the data returned by the configuration query. This table gives you control over what field should be mapped to each configuration property (the **Use as** option). You can also choose which value to select if there are multiple rows in the returned data.

  This transformation requires:

  - One field to use as the source of field names.

    By default, the transform uses the first string field as the source. You can override this default setting by selecting **Field name** in the **Use as** column for the field you want to use instead.

  - One field to use as the source of values.

    By default, the transform uses the first number field as the source. But you can override this default setting by selecting **Field value** in the **Use as** column for the field you want to use instead.

  Useful when visualizing data in:

  - Gauge
  - Stat
  - Pie chart

  #### Map extra fields to labels

  If a field does not map to config property Grafana will automatically use it as source for a label on the output field-

  **Example:**

  | Name    | DataCenter | Value |
  | ------- | ---------- | ----- |
  | ServerA | US         | 100   |
  | ServerB | EU         | 200   |

  **Output:**

  | ServerA (labels: DataCenter: US) | ServerB (labels: DataCenter: EU) |
  | -------------------------------- | -------------------------------- |
  | 10                               | 20                               |

  The extra labels can now be used in the field display name provide more complete field names.

  If you want to extract config from one query and apply it to another you should use the config from query results transformation.

  #### Example

  **Input:**

  | Name    | Value | Max |
  | ------- | ----- | --- |
  | ServerA | 10    | 100 |
  | ServerB | 20    | 200 |
  | ServerC | 30    | 300 |

  **Output:**

  | ServerA (config: max=100) | ServerB (config: max=200) | ServerC (config: max=300) |
  | ------------------------- | ------------------------- | ------------------------- |
  | 10                        | 20                        | 30                        |

  As you can see each row in the source data becomes a separate field. Each field now also has a max config option set. Options like **Min**, **Max**, **Unit** and **Thresholds** are all part of field configuration and if set like this will be used by the visualization instead of any options manually configured in the panel editor options pane.

  This transformation enables the conversion of rows into individual fields, facilitates dynamic field configuration, and maps additional fields to labels.
  `}},seriesToRows:{name:"Series to rows",getHelperDocs:function(){return`
  Use this transformation to combine the result from multiple time series data queries into one single result. This is helpful when using the table panel visualization.

  The result from this transformation will contain three columns: Time, Metric, and Value. The Metric column is added so you easily can see from which query the metric originates from. Customize this value by defining Label on the source query.

  In the example below, we have two queries returning time series data. It is visualized as two separate tables before applying the transformation.

  **Query A:**

  | Time                | Temperature |
  | ------------------- | ----------- |
  | 2020-07-07 11:34:20 | 25          |
  | 2020-07-07 10:31:22 | 22          |
  | 2020-07-07 09:30:05 | 19          |

  **Query B:**

  | Time                | Humidity |
  | ------------------- | -------- |
  | 2020-07-07 11:34:20 | 24       |
  | 2020-07-07 10:32:20 | 29       |
  | 2020-07-07 09:30:57 | 33       |

  Here is the result after applying the Series to rows transformation.

  | Time                | Metric      | Value |
  | ------------------- | ----------- | ----- |
  | 2020-07-07 11:34:20 | Temperature | 25    |
  | 2020-07-07 11:34:20 | Humidity    | 22    |
  | 2020-07-07 10:32:20 | Humidity    | 29    |
  | 2020-07-07 10:31:22 | Temperature | 22    |
  | 2020-07-07 09:30:57 | Humidity    | 33    |
  | 2020-07-07 09:30:05 | Temperature | 19    |

  This transformation facilitates the consolidation of results from multiple time series queries, providing a streamlined and unified dataset for efficient analysis and visualization in a tabular format.

  > **Note:** This transformation is available in Grafana 7.1+.
  `}},sortBy:{name:"Sort by",getHelperDocs:function(){return`
  Use this transformation to sort each frame within a query result based on a specified field, making your data easier to understand and analyze. By configuring the desired field for sorting, you can control the order in which the data is presented in the table or visualization.

  Use the **Reverse** switch to inversely order the values within the specified field. This functionality is particularly useful when you want to quickly toggle between ascending and descending order to suit your analytical needs.
  
  For example, in a scenario where time-series data is retrieved from a data source, the **Sort by** transformation can be applied to arrange the data frames based on the timestamp, either in ascending or descending order, depending on the analytical requirements. This capability ensures that you can easily navigate and interpret time-series data, gaining valuable insights from the organized and visually coherent presentation.
  `}},spatial:{name:"Spatial",getHelperDocs:function(){return`
  Use this transformation to apply spatial operations to query results.
  
  - **Action** - Select an action:
    - **Prepare spatial field** - Set a geometry field based on the results of other fields.
      - **Location mode** - Select a location mode (these options are shared by the **Calculate value** and **Transform** modes):
        - **Auto** - Automatically identify location data based on default field names.
        - **Coords** - Specify latitude and longitude fields.
        - **Geohash** - Specify a geohash field.
        - **Lookup** - Specify Gazetteer location fields.
    - **Calculate value** - Use the geometry to define a new field (heading/distance/area).
      - **Function** - Choose a mathematical operation to apply to the geometry:
        - **Heading** - Calculate the heading (direction) between two points.
        - **Area** - Calculate the area enclosed by a polygon defined by the geometry.
        - **Distance** - Calculate the distance between two points.
    - **Transform** - Apply spatial operations to the geometry.
      - **Operation** - Choose an operation to apply to the geometry:
        - **As line** - Create a single line feature with a vertex at each row.
        - **Line builder** - Create a line between two points.
  
  This transformation allows you to manipulate and analyze geospatial data, enabling operations such as creating lines between points, calculating spatial properties, and more.
  `}},timeSeriesTable:{name:"Time series to table transform",getHelperDocs:function(){return`
  Use this transformation to convert time series results into a table, transforming a time series data frame into a **Trend** field. The **Trend** field can then be rendered using the [sparkline cell type][], generating an inline sparkline for each table row. If there are multiple time series queries, each will result in a separate table data frame. These can be joined using join or merge transforms to produce a single table with multiple sparklines per row.

  For each generated **Trend** field value, a calculation function can be selected. The default is **Last non-null value**. This value is displayed next to the sparkline and used for sorting table rows.

  > **Note:** This transformation is available in Grafana 9.5+ as an opt-in beta feature. Modify the Grafana [configuration file][] to use it.
  `},links:[{title:"sparkline cell type",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/table/#sparkline"},{title:"configuration file",url:"https://grafana.com/docs/grafana/latest/setup-grafana/configure-grafana/"}]},regression:{name:"Regression analysis",getHelperDocs:function(i="shortcodeFigure"){return`
  Use this transformation to create a new data frame containing values predicted by a statistical model. This is useful for finding a trend in chaotic data. It works by fitting a mathematical function to the data, using either linear or polynomial regression. The data frame can then be used in a visualization to display a trendline.

  There are two different models:

  - **Linear regression** - Fits a linear function to the data.
  ${r("/static/img/docs/transformations/linear-regression.png",i,"Linear regression")}
  - **Polynomial regression** - Fits a polynomial function to the data.
  ${r("/static/img/docs/transformations/polynomial-regression.png",i,"Polynomial regression")}

  > **Note:** This transformation is an experimental feature. Engineering and on-call support is not available. Documentation is either limited or not provided outside of code comments. No SLA is provided. Enable the \`regressionTransformation\` feature toggle in Grafana to use this feature. Contact Grafana Support to enable this feature in Grafana Cloud.
  `}}};function o(){return`
  Go to the <a href="https://grafana.com/docs/grafana/latest/panels/transformations/?utm_source=grafana" target="_blank" rel="noreferrer">
  transformation documentation
  </a> for more general documentation.
  `}function r(i,g,u){return g==="shortcodeFigure"?`{{< figure src="${i}" class="docs-image--no-shadow" max-width= "1100px" >}}`:`![${u} helper image](https://grafana.com${i})`}},10472:(G,A,e)=>{"use strict";e.d(A,{Ii:()=>o,JJ:()=>a,ac:()=>r});var n=e(1713),a=(g=>(g.Prepare="prepare",g.Calculate="calculate",g.Modify="modify",g))(a||{}),o=(g=>(g.Heading="heading",g.Distance="distance",g.Area="area",g))(o||{}),r=(g=>(g.AsLine="asLine",g.LineBuilder="lineBuilder",g))(r||{});const i={action:"prepare",source:{mode:n.q1.Auto}}},15830:(G,A,e)=>{"use strict";e.d(A,{Lb:()=>c,Lp:()=>l,N7:()=>f});var n=e(1668),a=e(16842),o=e(59284),r=e(51227),i=e(11626),g=e(58309),u=e(10472);function l(E){const v=[];for(const h of E.values)h&&v.push(c(h));return new a.Z(v)}function m(E){const v=new Array(E.length);if(E.length>1){let h=d(E[0]);for(let p=1;p<E.length;p++){let s=d(E[p]);if(h&&s){let y=Math.atan2(s[0]-h[0],s[1]-h[1])*180/Math.PI;y<0&&(y+=360),v[p-1]=v[p]=y}}}else v.fill(0);return v}function c(E){return E instanceof o.Z?E.getCoordinates():(0,n.qg)(E.getExtent())}function d(E){if(E)return(0,r.bU)(c(E))}function f(E,v){const h=E.values,p=new Array(E.values.length),s=v.calc??u.Ii.Heading,y=v.field??s;switch(s){case u.Ii.Area:{for(let C=0;C<h.length;C++){const b=h[C];b&&(p[C]=(0,i.bg)(b))}return{name:y,type:g.fS.number,config:{unit:"areaM2"},values:p}}case u.Ii.Distance:{for(let C=0;C<h.length;C++){const b=h[C];b&&(p[C]=(0,i.xA)(b))}return{name:y,type:g.fS.number,config:{unit:"lengthm"},values:p}}case u.Ii.Heading:default:return{name:y,type:g.fS.number,config:{unit:"degree"},values:m(h)}}}},3846:(G,A,e)=>{"use strict";e.d(A,{X:()=>E});var n=e(66681),a=e(85960),o=e(59878),r=e(47257),i=e(25142),g=e(50263),u=e(74321),l=e(24956),m=e(82076);const c=(h,p)=>h-p*Math.floor(h/p),d=8,f=(h,p)=>({suggestionsWrapper:(0,n.css)({boxShadow:h.shadows.z2}),errorTooltip:(0,n.css)({position:"absolute",top:p+d+"px",zIndex:h.zIndex.tooltip}),inputWrapper:(0,n.css)({position:"relative"})}),E=({value:h="",onChange:p,suggestions:s,placeholder:y,error:C,invalid:b})=>{const[S,D]=(0,a.useState)(!1),[M,T]=(0,a.useState)(0),[R,O]=(0,a.useState)(h.toString()),[x,I]=(0,a.useState)(0),[L,P]=(0,a.useState)(0),[N,F]=(0,a.useState)(0),U=(0,r.l4)(),j=f(U,L),V=(0,a.useRef)(null),_=(0,a.useRef)(null);(0,a.useEffect)(()=>{I(v(_.current,M))},[M]);const H=a.useCallback((k,q=V.current)=>{const X=q.selectionStart,te=q.value;te[N-1]==="$"?q.value=te.slice(0,N)+k.value+te.slice(X):q.value=te.slice(0,N)+"$"+k.value+te.slice(X),O(q.value),D(!1),T(0),p(q.value)},[p,N]),z=a.useCallback(k=>{if(!S){if(k.key==="$"||k.key===" "&&k.ctrlKey){F(V.current.selectionStart||0),D(!0);return}return}switch(k.key){case"Backspace":case"Escape":case"ArrowLeft":case"ArrowRight":return D(!1),T(0);case"Enter":return k.preventDefault(),H(s[M]);case"ArrowDown":case"ArrowUp":k.preventDefault();const q=k.key==="ArrowDown"?1:-1;return T(X=>c(X+q,s.length));default:return}},[S,s,M,H]),K=a.useCallback(k=>{O(k.currentTarget.value)},[]),Y=a.useCallback(k=>{p(k.currentTarget.value)},[p]);return(0,a.useEffect)(()=>{P(V.current.clientHeight)},[]),a.createElement("div",{className:j.inputWrapper},S&&a.createElement(i.h_,null,a.createElement(o.r,{referenceElement:V.current,placement:"bottom-start",modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"arrow",enabled:!1},{name:"offset",options:{offset:[0,0]}}]},({ref:k,style:q,placement:X})=>a.createElement("div",{ref:k,style:q,"data-placement":X,className:j.suggestionsWrapper},a.createElement(g.$,{scrollTop:x,autoHeightMax:"300px",setScrollTop:({scrollTop:te})=>I(te)},a.createElement(m.T,{activeRef:_,suggestions:s,onSuggestionSelect:H,onClose:()=>D(!1),activeIndex:M}))))),b&&C&&a.createElement("div",{className:j.errorTooltip},a.createElement(u.S,null,C)),a.createElement(l.I,{placeholder:y,invalid:b,ref:V,value:R,onChange:K,onBlur:Y,onKeyDown:z}))};E.displayName="SuggestionsInput";function v(h,p){return(h?.clientHeight??0)*p}},37600:(G,A,e)=>{"use strict";e.d(A,{Hg:()=>i,Vx:()=>u,f6:()=>l,jY:()=>g,rm:()=>m});var n=e(85960),a=e(94372),o=e(72623),r=e(90857);function i(c){return(0,n.useMemo)(()=>Array.isArray(c)?Object.keys(c.reduce((d,f)=>!f||!Array.isArray(f.fields)?d:f.fields.reduce((E,v)=>{const h=(0,a.CZ)(v,f,c);return E[h]=!0,E},d),{})):[],[c])}function g(c){const d=new Set;for(const f of c)for(const E of f.fields)if(E.labels)for(const v of Object.keys(E.labels))d.add(v);return d}const u={combine:"Combine",calculateNewFields:"Calculate new fields",createNewVisualization:"Create new visualization",filter:"Filter",performSpatialOperations:"Perform spatial operations",reformat:"Reformat",reorderAndRename:"Reorder and rename"},l=c=>!!(typeof c=="number"||!Number.isNaN(Number(c))||/^\$[A-Za-z0-9_]+$/.test(c)&&r.config.featureToggles.transformationsVariableSupport);function m(c){const d=[];c&&(d.push({label:"Browser",value:"browser"}),d.push({label:"UTC",value:"utc"}));const f=(0,o.ZV)();for(const E of f)d.push({label:E,value:E});return d}},82412:(G,A,e)=>{"use strict";e.d(A,{BR:()=>E,Fy:()=>f,PJ:()=>c,UL:()=>d,ZP:()=>h,eT:()=>u,k7:()=>m,tZ:()=>l,w4:()=>i});var n=e(20079),a=e(67954);const o={users:[],searchQuery:"",page:0,perPage:30,totalPages:1,externalUserMngInfo:a.default.externalUserMngInfo,externalUserMngLinkName:a.default.externalUserMngLinkName,externalUserMngLinkUrl:a.default.externalUserMngLinkUrl,isLoading:!1,rolesLoading:!1},r=(0,n.oM)({name:"users",initialState:o,reducers:{usersLoaded:(p,s)=>{const{totalCount:y,perPage:C,page:b,orgUsers:S}=s.payload,D=Math.ceil(y/C);return{...p,isLoading:!0,users:S,perPage:C,page:b,totalPages:D}},searchQueryChanged:(p,s)=>({...p,searchQuery:s.payload,page:o.page}),setUsersSearchPage:(p,s)=>({...p,page:s.payload}),pageChanged:(p,s)=>({...p,page:s.payload}),sortChanged:(p,s)=>({...p,sort:s.payload}),usersFetchBegin:p=>({...p,isLoading:!0}),usersFetchEnd:p=>({...p,isLoading:!1}),rolesFetchBegin:p=>({...p,rolesLoading:!0}),rolesFetchEnd:p=>({...p,rolesLoading:!1})}}),{searchQueryChanged:i,setUsersSearchPage:g,usersLoaded:u,usersFetchBegin:l,usersFetchEnd:m,pageChanged:c,sortChanged:d,rolesFetchBegin:f,rolesFetchEnd:E}=r.actions,h={users:r.reducer}},25648:(G,A,e)=>{"use strict";e.d(A,{z:()=>a});var n=e(73039);const a=new n.B},72387:(G,A,e)=>{"use strict";e.d(A,{KJ:()=>p,M6:()=>v,Ue:()=>s,Z$:()=>y,ku:()=>h,m2:()=>E});var n=e(56375),a=e.n(n),o=e(65512),r=e(65874),i=e(43489),g=e(99165),u=e(14595),l=e(59084),m=e(22042),c=e(10805),d=e(31659);const f="Filters",E=S=>async(D,M)=>{let T=b(S,M());if(!T&&(D(C(S)),T=b(S,M()),!T))return;const R=T.filters.findIndex(x=>x.key===S.key&&x.value===S.value);if(R===-1){const{value:x,key:I,operator:L}=S,P={value:x,key:I,operator:L};return await D(p((0,c.yQ)(T),P))}const O={...T.filters[R],operator:S.operator};return await D(v((0,c.yQ)(T),{index:R,filter:O}))},v=(S,D)=>async(M,T)=>{const R=(0,l.E0)(S,T());M((0,u.mb)(S.rootStateKey,(0,d.e_)((0,c.Y6)(R,D)))),await M((0,g.MB)((0,c.yQ)(R),!0))},h=(S,D)=>async(M,T)=>{const R=(0,l.E0)(S,T());M((0,u.mb)(S.rootStateKey,(0,d.DO)((0,c.Y6)(R,D)))),await M((0,g.MB)((0,c.yQ)(R),!0))},p=(S,D)=>async(M,T)=>{const R=(0,l.E0)(S,T());M((0,u.mb)(S.rootStateKey,(0,d.QL)((0,c.Y6)(R,D)))),await M((0,g.MB)((0,c.yQ)(R),!0))},s=(S,D)=>async(M,T)=>{const R=(0,l.E0)(S,T());M((0,u.mb)(S.rootStateKey,(0,d.aM)((0,c.Y6)(R,D)))),await M((0,g.MB)((0,c.yQ)(R),!0))},y=(S,D)=>async(M,T)=>{const R=(0,l.E0)(S,T());M((0,u.mb)(S.rootStateKey,(0,m.Pl)((0,c.Y6)(R,{propName:"datasource",propValue:D}))));const x=(await(0,o.ak)().get(D))?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.";M((0,u.mb)(S.rootStateKey,(0,r.z7)({infoText:x})))},C=S=>(D,M)=>{const T=(0,l.S_)(M()),R={...(0,n.cloneDeep)(d.Js),datasource:S.datasource,name:f,id:f,rootStateKey:T},O=!1,x=(0,l.Eo)(T,M()),I={type:"adhoc",id:R.id,rootStateKey:T};D((0,u.mb)(T,(0,m.VN)((0,c.Y6)(I,{global:O,model:R,index:x}))))},b=(S,D)=>{const M=(0,l.S_)(D),T=(0,l.AE)(M,D);return Object.values(T.variables).find(R=>(0,i.Kn)(R)&&R.datasource?.uid===S.datasource.uid)}},88819:(G,A,e)=>{"use strict";e.d(A,{F:()=>D});var n=e(85960),a=e(89703),o=e(95329),r=e(32615),i=e(97666),g=e(65512);const u=90,l=({datasource:M,onChange:T,disabled:R,filterKey:O,allFilters:x})=>{const I=()=>f(M,O,x),L=()=>E(M,O,x);return O===null?n.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-add-key-wrapper"},n.createElement(r.V,{disabled:R,className:"query-segment-key",Component:d,value:O,onChange:T,loadOptions:I,inputMinWidth:u})):n.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-key-wrapper"},n.createElement(r.V,{disabled:R,className:"query-segment-key",value:O,onChange:T,loadOptions:L,inputMinWidth:u}))},m="-- remove filter --",c={label:m,value:m},d=n.createElement("span",{className:"gf-form-label query-part","aria-label":"Add Filter"},n.createElement(i.J,{name:"plus"})),f=async(M,T,R)=>{const O=await(0,g.ak)().get(M);if(!O||!O.getTagKeys)return[];const x=R.filter(L=>L.key!==T);return(await O.getTagKeys({filters:x})).map(L=>({label:L.text,value:L.text}))},E=async(M,T,R)=>{const O=await f(M,T,R);return[c,...O]};var v=e(45864);const h=({datasource:M,disabled:T,onChange:R,filterKey:O,filterValue:x,placeHolder:I,allFilters:L})=>{const P=()=>p(M,O,L);return n.createElement("div",{className:"gf-form","data-testid":"AdHocFilterValue-value-wrapper"},n.createElement(r.V,{className:"query-segment-value",disabled:T,placeholder:I,value:x,onChange:R,loadOptions:P}))},p=async(M,T,R)=>{const O=await(0,g.ak)().get(M);if(!O||!O.getTagValues)return[];const x=(0,v.$t)().timeRange(),I=R.filter(P=>P.key!==T);return(await O.getTagValues({key:T,filters:I,timeRange:x})).map(P=>({label:P.text,value:P.text}))},s=["=","!=","<",">","=~","!~"].map(M=>({label:M,value:M})),y=({value:M,disabled:T,onChange:R})=>n.createElement(a.X,{className:"query-segment-operator",value:M,disabled:T,options:s,onChange:R}),C=({datasource:M,filter:{key:T,operator:R,value:O},onKeyChange:x,onOperatorChange:I,onValueChange:L,placeHolder:P,allFilters:N,disabled:F})=>n.createElement(n.Fragment,null,n.createElement(l,{disabled:F,datasource:M,filterKey:T,onChange:x,allFilters:N}),n.createElement("div",{className:"gf-form"},n.createElement(y,{disabled:F,value:R,onChange:I})),n.createElement(h,{disabled:F,datasource:M,filterKey:T,filterValue:O,allFilters:N,onChange:L,placeHolder:P})),b=({datasource:M,appendBefore:T,onCompleted:R,allFilters:O})=>{const[x,I]=(0,n.useState)(null),[L,P]=(0,n.useState)("="),N=(0,n.useCallback)(j=>{if(j.value!==m){I(j.value??"");return}I(null)},[I]),F=(0,n.useCallback)(j=>P(j.value??""),[P]),U=(0,n.useCallback)(j=>{R({value:j.value??"",operator:L,key:x}),I(null),P("=")},[R,L,x]);return x===null?n.createElement(l,{datasource:M,filterKey:x,onChange:N,allFilters:O}):n.createElement(n.Fragment,{key:"filter-builder"},T,n.createElement(C,{datasource:M,filter:{key:x,value:"",operator:L},placeHolder:(0,o.t)("variable.adhoc.placeholder","Select value"),onKeyChange:N,onOperatorChange:F,onValueChange:U,allFilters:O}))},S=({label:M})=>n.createElement("div",{className:"gf-form"},n.createElement("span",{className:"gf-form-label query-keyword"},M));class D extends n.PureComponent{constructor(){super(...arguments),this.onChange=(T,R)=>O=>{const{filters:x}=this.props,{value:I}=O;return O.value===m?this.props.removeFilter(T):this.props.changeFilter(T,{...x[T],[R]:I})},this.appendFilterToVariable=T=>{this.props.addFilter(T)}}render(){const{filters:T,disabled:R}=this.props;return n.createElement("div",{className:"gf-form-inline"},this.renderFilters(T,R),!R&&n.createElement(b,{datasource:this.props.datasource,appendBefore:T.length>0?n.createElement(S,{label:"AND"}):null,onCompleted:this.appendFilterToVariable,allFilters:this.getAllFilters()}))}getAllFilters(){return this.props.baseFilters?this.props.baseFilters.concat(this.props.filters):this.props.filters}renderFilters(T,R){return T.length===0&&R?n.createElement(a.X,{disabled:R,value:"No filters",options:[],onChange:()=>{}}):T.reduce((O,x,I)=>(O.length>0&&O.push(n.createElement(S,{label:"AND",key:`condition-${I}`})),O.push(this.renderFilterSegments(x,I,R)),O),[])}renderFilterSegments(T,R,O){return n.createElement(n.Fragment,{key:`filter-${R}`},n.createElement(C,{disabled:O,datasource:this.props.datasource,filter:T,onKeyChange:this.onChange(R,"key"),onOperatorChange:this.onChange(R,"operator"),onValueChange:this.onChange(R,"value"),allFilters:this.getAllFilters()}))}}},31659:(G,A,e)=>{"use strict";e.d(A,{DO:()=>l,Js:()=>i,QL:()=>u,aM:()=>c,e_:()=>m,jo:()=>d});var n=e(20079),a=e(81990),o=e(59084),r=e(15806);const i={...a.Eg,type:"adhoc",datasource:null,filters:[]},g=(0,n.oM)({name:"templating/adhoc",initialState:r.s,reducers:{filterAdded:(f,E)=>{const v=(0,o.ir)(f,E.payload.id);v.type==="adhoc"&&v.filters.push(E.payload.data)},filterRemoved:(f,E)=>{const v=(0,o.ir)(f,E.payload.id);if(v.type!=="adhoc")return;const h=E.payload.data;v.filters.splice(h,1)},filterUpdated:(f,E)=>{const v=(0,o.ir)(f,E.payload.id);if(v.type!=="adhoc")return;const{filter:h,index:p}=E.payload.data;v.filters[p]=h},filtersRestored:(f,E)=>{const v=(0,o.ir)(f,E.payload.id);v.type==="adhoc"&&(v.filters=E.payload.data)}}}),{filterAdded:u,filterRemoved:l,filterUpdated:m,filtersRestored:c}=g.actions,d=g.reducer},74539:(G,A,e)=>{"use strict";e.d(A,{BH:()=>r,IG:()=>g,QX:()=>i,UY:()=>n,r2:()=>o,xk:()=>a});const n="00000000-0000-0000-0000-000000000000",a="All",o="$__all",r="None",i="",g="var-"},75:(G,A,e)=>{"use strict";e.d(A,{R:()=>l,z:()=>u});var n=e(29350),a=e(85960),o=e(92369),r=e(47257),i=e(7073),g=e(1030);const u="Grafana-LegacyVariableQueryEditor",l=({onChange:m,query:c})=>{const d=(0,r.wW)(g.w),[f,E]=(0,a.useState)(c),v=s=>{E(s.currentTarget.value)},h=(0,a.useCallback)(s=>{m(s.currentTarget.value,s.currentTarget.value)},[m]),p=(0,n.Me)();return a.createElement(i.K,{id:p,rows:2,value:f,onChange:v,onBlur:h,placeholder:"Metric name or tags query",required:!0,"aria-label":o.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsQueryInput,cols:52,className:d.textarea})};l.displayName=u},1377:(G,A,e)=>{"use strict";e.d(A,{e:()=>i});var n=e(66681),a=e(85960),o=e(47257),r=e(50086);function i({className:u,...l}){const m=(0,o.wW)(g);return a.createElement(r.D,{...l,className:(0,n.cx)(m.legend,u)})}function g(u){return{legend:(0,n.css)({marginTop:u.spacing(3),marginBottom:u.spacing(1)})}}},64210:(G,A,e)=>{"use strict";e.d(A,{u:()=>g});var n=e(66681),a=e(85960),o=e(47257),r=e(20519),i=e(27436);function g({name:l,description:m,value:c,options:d,onChange:f,testId:E,width:v}){const h=(0,o.wW)(u),p=(0,a.useId)(),s=`variable-select-input-${l}-${p}`;return a.createElement(r.g,{label:l,description:m,htmlFor:s},a.createElement("div",{"data-testid":E},a.createElement(i.Ph,{inputId:s,onChange:f,value:c,width:v??30,options:d,className:h.selectContainer})))}function u(l){return{selectContainer:(0,n.css)`
      margin-right: ${l.spacing(.5)};
    `}}},1030:(G,A,e)=>{"use strict";e.d(A,{W:()=>u,w:()=>l});var n=e(66681),a=e(29350),o=e(85960),r=e(47257),i=e(20519),g=e(7073);function u({value:m,name:c,description:d,placeholder:f,onChange:E,onBlur:v,ariaLabel:h,required:p,width:s,testId:y}){const C=(0,r.wW)(l),b=(0,a.Me)();return o.createElement(i.g,{label:c,description:d,htmlFor:b},o.createElement(g.K,{id:b,rows:2,value:m,onChange:E,onBlur:v,placeholder:f,required:p,"aria-label":h,cols:s,className:C.textarea,"data-testid":y}))}function l(m){return{textarea:(0,n.css)`
      white-space: pre-wrap;
      min-height: ${m.spacing(4)};
      height: auto;
      overflow: auto;
      padding: ${m.spacing(.75,1)};
      width: inherit;

      ${m.breakpoints.down("sm")} {
        width: 100%;
      }
    `}}},11606:(G,A,e)=>{"use strict";e.d(A,{V:()=>i});var n=e(29350),a=e(85960),o=e(20519),r=e(24956);function i({value:g,name:u,placeholder:l="",onChange:m,testId:c,width:d,required:f,onBlur:E,grow:v,description:h,invalid:p,error:s,maxLength:y}){const C=(0,n.Me)(u);return a.createElement(o.g,{label:u,description:h,invalid:p,error:s,htmlFor:C},a.createElement(r.I,{type:"text",id:C,placeholder:l,value:g,onChange:m,onBlur:E,width:v?void 0:d??30,"data-testid":c,maxLength:y,required:f}))}},65874:(G,A,e)=>{"use strict";e.d(A,{PF:()=>a,PV:()=>d,QR:()=>f,Sg:()=>c,Yo:()=>i,gl:()=>r,qe:()=>l,wJ:()=>u,y8:()=>g,z7:()=>m});var n=e(20079);const a={id:"",isValid:!0,errors:{},name:"",extended:null},o=(0,n.oM)({name:"templating/editor",initialState:a,reducers:{variableEditorMounted:(E,v)=>{E.name=v.payload.name,E.id=v.payload.id},variableEditorUnMounted:(E,v)=>a,changeVariableNameSucceeded:(E,v)=>{E.name=v.payload.data.newName,delete E.errors.name,E.isValid=Object.keys(E.errors).length===0},changeVariableNameFailed:(E,v)=>{E.name=v.payload.newName,E.errors.name=v.payload.errorText,E.isValid=Object.keys(E.errors).length===0},addVariableEditorError:(E,v)=>{E.errors[v.payload.errorProp]=v.payload.errorText,E.isValid=Object.keys(E.errors).length===0},removeVariableEditorError:(E,v)=>{delete E.errors[v.payload.errorProp],E.isValid=Object.keys(E.errors).length===0},changeVariableEditorExtended:(E,v)=>{E.extended={...E.extended,...v.payload}},cleanEditorState:()=>a}}),r=o.reducer,{changeVariableNameSucceeded:i,changeVariableNameFailed:g,variableEditorMounted:u,variableEditorUnMounted:l,changeVariableEditorExtended:m,addVariableEditorError:c,removeVariableEditorError:d,cleanEditorState:f}=o.actions},76347:(G,A,e)=>{"use strict";e.d(A,{c:()=>r});var n=e(12399),a=e(25648),o=e(74539);function r(i){const g={},u=(0,n.J)().getVariables();for(let l=0;l<u.length;l++){const m=u[l],c=i&&i[m.name];m.skipUrlSync||(c?g[o.IG+m.name]=c.value:g[o.IG+m.name]=a.z.get(m.type).getValueForUrl(m))}return g}},43489:(G,A,e)=>{"use strict";e.d(A,{$7:()=>h,Ju:()=>d,Kn:()=>r,Kr:()=>l,NX:()=>v,R:()=>c,U4:()=>g,VC:()=>i,X7:()=>E,Xh:()=>o,d7:()=>f,eL:()=>u});var n=e(23361),a=e(75);const o=p=>p.type==="query",r=p=>p.type==="adhoc",i=p=>p.type==="constant",g=p=>"multi"in p,u=p=>"options"in p,l=p=>"current"in p;function m(p){return p===null?!1:typeof p=="string"}const c=p=>!!p.metricFindQuery&&!p.variables,d=p=>{if(!p.variables||p.variables.getType()!==n.j2.Standard)return!1;const s=p.variables;return"toDataQuery"in s&&!!s.toDataQuery},f=p=>{if(!p.variables||p.variables.getType()!==n.j2.Custom)return!1;const s=p.variables;return"query"in s&&"editor"in s&&!!s.query&&!!s.editor},E=p=>p.variables?p.variables.getType()===n.j2.Datasource:!1;function v(p,s){return p?p.displayName===a.z||c(s):!1}function h(p,s){return p?p.displayName!==a.z&&(E(s)||d(s)||f(s)):!1}},81127:(G,A,e)=>{"use strict";e.d(A,{Kf:()=>a,iV:()=>r,j4:()=>i});var n=e(20079);const a={usages:[],usagesNetwork:[]},o=(0,n.oM)({name:"templating/inspect",initialState:a,reducers:{initInspect:(g,u)=>{const{usages:l,usagesNetwork:m}=u.payload;g.usages=l,g.usagesNetwork=m}}}),r=o.reducer,{initInspect:i}=o.actions},58348:(G,A,e)=>{"use strict";e.d(A,{MJ:()=>d,GQ:()=>m,V:()=>p,Of:()=>c,PQ:()=>C,dH:()=>O,Yg:()=>s,Rv:()=>T,vI:()=>D});var n=e(56582);function a(x,I){const L=new Set;for(const P of x)L.add(I(P));return L}var o=e(68460),r=e(18815),i=e(27008),g=e(25648),u=e(43489),l=e(10805);const m=x=>{const I=[];for(const L of x)I.push({id:L.id,label:`${L.id}`});return I},c=(x,I)=>x.filter(L=>I.some(P=>P.from===L.id||P.to===L.id)),d=x=>{const I=[];for(const L of x)for(const P of x){if(L===P)continue;g.z.get(L.type).dependsOn(L,P)&&I.push({from:L.id,to:P.id})}return I};function f(x){const I=(0,l.a9)(x);return I?I.slice(1).find(P=>P!==void 0):void 0}const E=(x,I)=>{l.J7.lastIndex=0;const L=[],N=(0,r.Xh)(I,2).match(l.J7);if(!N)return L;for(const F of N){if(!F||F.indexOf("$__")!==-1||F.indexOf("${__")!==-1||F.indexOf("$hashKey")!==-1)continue;const U=f(F);x.some(j=>j.id===U)||L.find(j=>j===U)||U&&L.push(U)}return L},v={alias:[/^m$/,/^measurement$/,/^col$/,/^tag_(\w+|\d+)$/],query:[/^timeFilter$/]},h=(x,I,L)=>{const P=Object.keys(I.value).reduce((F,U)=>{const j=I.value[U];if(!j||typeof j!="string")return F;const V=v[U]?v[U].find(H=>H.test(x)):void 0;let _=(0,l.QI)(j,x);return U==="repeat"&&j===x&&(_=!0),!V&&_&&(F={...F,[U]:j}),F},{}),N=Object.keys(I.value).reduce((F,U)=>{const j=I.value[U];if(j&&typeof j=="object"&&Object.keys(j).length){let V=j.title||j.name||j.id||U;Array.isArray(I.value)&&I.key==="panels"&&(V=`${V}[${j.id}]`);const _=h(x,{key:U,value:j},{});Object.keys(_).length&&(F={...F,[V]:_})}return F},{});return(Object.keys(P).length||Object.keys(N).length)&&(L={...L,...P,...N}),L},p=(x,I)=>{if(!I)return{unUsed:[],usages:[]};const L=[];let P=[];const N=I.getSaveModelCloneOld();for(const F of x){const U=F.id,j=h(U,{key:"model",value:N},{});!Object.keys(j).length&&!(0,u.Kn)(F)&&L.push(F),Object.keys(j).length&&P.push({variable:F,tree:j})}return{unUsed:L,usages:P}};async function s(x,I){return new Promise((L,P)=>{setTimeout(()=>{try{const N=y(x,I);L(D(N))}catch(N){P(N)}},200)})}function y(x,I){if(!I)return[];let L=[];const P=I.getSaveModelCloneOld(),N=E(x,P);for(const F of N){const U=h(F,{key:"model",value:P},{});if(Object.keys(U).length){const j={id:F,name:F};L.push({variable:j,tree:U})}}return L}function C(x,I,L){const P=a(I.descendants(x),F=>F.name);P.add(n.W.includeVars);for(const F of x)P.add(F);return b([...P],L)}function b(x,I){const L=[];for(const P of x)I[P]&&L.push(...I[P]);return new Set(L)}const S=(x,I)=>{const{id:L,value:P}=I,{nodes:N,edges:F}=x;if(P&&typeof P=="string"){const U=`${I.id}-${P}`;return N.push({id:U,label:P}),F.push({from:U,to:L}),x}if(P&&typeof P=="object"){const U=Object.keys(P);for(const j of U){const V=`${I.id}-${j}`;N.push({id:V,label:j}),F.push({from:V,to:L}),x=S(x,{id:V,value:P[j]})}return x}return x},D=x=>{const I=[];for(const L of x){const{variable:P,tree:N}=L,F={variable:P,nodes:[{id:"dashboard",label:"dashboard"}],edges:[],showGraph:!1};I.push(S(F,{id:"dashboard",value:N}))}return I},M=x=>Object.values(x).reduce((L,P)=>typeof P=="object"?L+M(P):L+1,0),T=(x,I)=>{const L=I.find(P=>P.variable.id===x);return L?M(L.tree):0};function R(x){const I=[];for(const L of x)I.push(L),L.panels?.length&&I.push(...R(L.panels.map(P=>new PanelModel(P))));return I}function O(x){const I={};for(const L of x){const P=(0,o.Jg)(L),N=[...P.matchAll(/"repeat":"([^"]+)"/g)].map(j=>j[1]),F=P.match(l.J7)?.map(j=>f(j))??[],U=[...N,...F];for(const j of U)j in I?I[j].add(L.id):I[j]=new Set([L.id])}return I}},86039:(G,A,e)=>{"use strict";e.d(A,{T6:()=>u,kv:()=>c,vH:()=>m});var n=e(20079),a=e(56375),o=e.n(a),r=e(59084),i=e(15806),g=e(81990);const u={...g.Eg,type:"interval",auto_count:30,auto_min:"10s",options:[],auto:!1,query:"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",refresh:g.Bd.onTimeRangeChanged,current:{}},l=(0,n.oM)({name:"templating/interval",initialState:i.s,reducers:{createIntervalOptions:(d,f)=>{const E=(0,r.ir)(d,f.payload.id);if(E.type!=="interval")return;const v=(0,a.map)(E.query.match(/(["'])(.*?)\1|\w+/g),h=>(h=h.replace(/["']+/g,""),{text:h.trim(),value:h.trim(),selected:!1}));E.auto&&v.length&&v[0].text!=="auto"&&v.unshift({text:"auto",value:"$__auto_interval_"+E.name,selected:!1}),E.options=v}}}),m=l.reducer,{createIntervalOptions:c}=l.actions},22360:(G,A,e)=>{"use strict";e.d(A,{XJ:()=>T,nn:()=>y,yy:()=>u,Ew:()=>C,cv:()=>R,aN:()=>s,iQ:()=>b,_M:()=>p,ss:()=>D,wF:()=>M,Ug:()=>S});var n=e(20079),a=e(56375),o=e(48762);const r=(O,...x)=>x.reduce((I,L)=>L(I),O);var i=e(74539),g=e(43489);const u={id:"",highlightIndex:-1,queryValue:"",selectedValues:[],options:[],multi:!1},l=1e3,m=O=>Array.isArray(O)?O.reduce((x,I)=>((0,a.isString)(I.value)&&(x[I.value]=I),x),{}):{},c=O=>{if(!Array.isArray(O.options))return O.options=[],O;const x=m(O.selectedValues);return O.selectedValues=Object.values(x),O.options=O.options.map(I=>{if(!(0,a.isString)(I.value))return I;const L=!!x[I.value];return I.selected===L?I:{...I,selected:L}}),O.options=d(O.options),O},d=O=>Array.isArray(O)?O.length<=l?O:O.slice(0,l):[],f=O=>{const{options:x,selectedValues:I}=O;return x.length===0||I.length>0||!x[0]||x[0].value!==i.r2||(O.selectedValues=[{...x[0],selected:!0}]),O},E=O=>{const{selectedValues:x}=O;return x.length>1&&(O.selectedValues=x.filter(I=>I.value!==i.r2)),O},v=O=>O.filter(x=>x.value!==i.r2).map(x=>({...x,selected:!0})),h=(0,n.oM)({name:"templating/optionsPicker",initialState:u,reducers:{showOptions:(O,x)=>{const{query:I,options:L}=x.payload;if(O.highlightIndex=-1,O.options=(0,a.cloneDeep)(L),O.id=x.payload.id,O.queryValue="",O.multi=!1,(0,g.U4)(x.payload)&&(O.multi=x.payload.multi??!1),(0,g.Xh)(x.payload)){const{queryValue:P}=x.payload,N=(0,o.b)(I);O.queryValue=N&&P?P:""}return O.selectedValues=O.options.filter(P=>P.selected),r(O,f,c)},hideOptions:(O,x)=>({...u}),toggleOption:(O,x)=>{const{option:I,clearOthers:L,forceSelect:P}=x.payload,{multi:N,selectedValues:F}=O;if(I){const U=!F.find(j=>j.value===I.value&&j.text===I.text);if(I.value===i.r2||!N||L)return U||P?O.selectedValues=[{...I,selected:!0}]:O.selectedValues=[],r(O,f,E,c);if(P||U)return O.selectedValues.push({...I,selected:!0}),r(O,f,E,c);O.selectedValues=F.filter(j=>j.value!==I.value&&j.text!==I.text)}else O.selectedValues=[];return r(O,f,E,c)},moveOptionsHighlight:(O,x)=>{let I=O.highlightIndex+x.payload;return I<0?I=-1:I>=O.options.length&&(I=O.options.length-1),{...O,highlightIndex:I}},toggleAllOptions:(O,x)=>{const I=O.selectedValues.find(P=>P.value===i.r2),L=O.options.find(P=>P.value===i.r2);return O.selectedValues.length>0&&L&&!I?(O.selectedValues=[],O.selectedValues.push({text:L.text??"All",value:L.value,selected:!0}),r(O,c)):I&&O.selectedValues.length===1?(O.selectedValues=v(O.options),r(O,c)):O.selectedValues.length>0&&!L?(O.selectedValues=[],r(O,c)):(O.selectedValues=v(O.options),r(O,c))},updateSearchQuery:(O,x)=>(O.queryValue=x.payload,O),updateOptionsAndFilter:(O,x)=>{const I=(0,a.trimStart)((O.queryValue??"").toLowerCase());return O.options=x.payload.filter(L=>{const P=L.text??"";return(Array.isArray(P)?P.toString():P).toLowerCase().indexOf(I)!==-1}),O.highlightIndex=0,r(O,f,c)},updateOptionsFromSearch:(O,x)=>(O.options=x.payload,O.highlightIndex=0,r(O,f,c)),cleanPickerState:()=>u}}),{toggleOption:p,showOptions:s,hideOptions:y,moveOptionsHighlight:C,toggleAllOptions:b,updateSearchQuery:S,updateOptionsAndFilter:D,updateOptionsFromSearch:M,cleanPickerState:T}=h.actions,R=h.reducer},94377:(G,A,e)=>{"use strict";e.d(A,{x:()=>n});const n=(r,i)=>r&&(i&&!Array.isArray(r.value)?{...r,value:o(r.value),text:o(r.text)}:!i&&Array.isArray(r.value)?{...r,value:a(r.value),text:a(r.text)}:r),a=r=>Array.isArray(r)?r.length>0?r[0]:"":r,o=r=>Array.isArray(r)?r:[r]},99165:(G,A,e)=>{"use strict";e.d(A,{wX:()=>rt,Z7:()=>se,LX:()=>Ne,DU:()=>xe,Fz:()=>De,Ci:()=>me,xs:()=>He,Rk:()=>mt,xQ:()=>Ue,MB:()=>ye});var n=e(56375),a=e(50595),o=e(25788),r=e(23757),i=e(52219),g=e(91),u=e(90857),l=e(88492),m=e(41879),c=e(45864),d=e(59767),f=e(93991),E=e(49683),v=e(46783),h=e(18745),p=e(65512),s=e(31683),y=e(25648),C=e(74539),b=e(65874),S=e(43489),D=e(58348),M=e(22360),T=e(94377),R=e(81990),O=e(10805),x=e(91470),I=e(3273),L=e(14595),P=e(19023);const N=(ne,Z=-1,ee=!1,ce=!1)=>{const be={};if(ce){const Ee={...initialVariableModelState,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{name:"A dashboard title",uid:"An dashboard UID",toString:()=>"A dashboard title"}}},Be={...initialVariableModelState,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{name:"An org name",id:1,toString:()=>"1"}}},Le={...initialVariableModelState,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{login:"admin",id:1,email:"admin@test",toString:()=>"1"}}};be[Ee.id]=Ee,be[Be.id]=Be,be[Le.id]=Le}for(let Ee=0;Ee<ne;Ee++)be[Ee]=createQueryVariable({id:Ee.toString(),name:`Name-${Ee}`,label:`Label-${Ee}`,index:Ee});return ee&&(be[NEW_VARIABLE_ID]=createQueryVariable({id:NEW_VARIABLE_ID,name:`Name-${NEW_VARIABLE_ID}`,label:`Label-${NEW_VARIABLE_ID}`,index:ne})),be},F=(ne,Z={})=>{const ee={id:"0",rootStateKey:"key",index:0,name:"0"};return{initialState:{0:{...{...ne.initialState,...ee},...Z}}}},U=()=>combineReducers({dashboard:dashboardReducer,templating:keyedVariablesReducer}),j=()=>combineReducers({templating:keyedVariablesReducer});function V(ne,Z){return{templating:{lastKey:ne,keys:{[ne]:{...getInitialTemplatingState(),...Z}}}}}function _(ne,Z){return ne.find(ce=>ce.name===Z)}function H(ne){return(ne.type==="query"||ne.type==="datasource"||ne.type==="interval")&&ne.refresh===x.Bd.onTimeRangeChanged}var z=e(59084),K=e(22042),Y=e(97536),k=e(95656);const q=(ne,Z)=>(ee,ce)=>{let be=0;const Ee=Z.templating.list;for(let Le=0;Le<Ee.length;Le++){const ze=X(Ee[Le]);ze.rootStateKey=ne,y.z.getIfExists(ze.type)&&ee((0,L.mb)(ne,(0,K.VN)((0,O.Y6)(ze,{global:!1,index:be++,model:ze}))))}(0,s.J)().updateTimeRange((0,c.$t)().timeRange());const Be=(0,z.gt)(ne,ce());for(const Le of Be)ee((0,L.mb)(ne,(0,K.Mn)((0,O.Y6)(Le))))};function X(ne){if(!(0,S.eL)(ne))return ne;let Z=!1;for(const ee of ne.options)if(ee.selected=!1,Array.isArray(ne.current.value))for(const ce of ne.current.value)ee.value===ce&&(ee.selected=Z=!0);else ee.value===ne.current.value&&(ee.selected=Z=!0);return!Z&&ne.options.length&&(ne.options[0].selected=!0),ne}const te=(ne,Z)=>ee=>{const ce={...R.Eg,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:a.bU.hideVariable,current:{value:{name:Z.title,uid:Z.uid,toString:()=>Z.title}}};ee((0,L.mb)(ne,(0,K.VN)((0,O.Y6)(ce,{global:ce.global,index:ce.index,model:ce}))));const be={...R.Eg,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:a.bU.hideVariable,current:{value:{name:m.contextSrv.user.orgName,id:m.contextSrv.user.orgId,toString:()=>m.contextSrv.user.orgId.toString()}}};ee((0,L.mb)(ne,(0,K.VN)((0,O.Y6)(be,{global:be.global,index:be.index,model:be}))));const Ee={...R.Eg,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:a.bU.hideVariable,current:{value:{login:m.contextSrv.user.login,id:m.contextSrv.user.id,email:m.contextSrv.user.email,toString:()=>m.contextSrv.user.id.toString()}}};ee((0,L.mb)(ne,(0,K.VN)((0,O.Y6)(Ee,{global:Ee.global,index:Ee.index,model:Ee}))))},se=(ne,Z)=>(ee,ce)=>{const{rootStateKey:be}=ne,Ee=(0,z.E0)(ne,ce());if(!(0,S.U4)(Ee)||(0,o.Q)(Ee.current))return;const Be=(0,T.x)(Ee.current,Z);ee((0,L.mb)(be,(0,K.Pl)((0,O.Y6)(ne,{propName:"multi",propValue:Z})))),ee((0,L.mb)(be,(0,K.Pl)((0,O.Y6)(ne,{propName:"current",propValue:Be}))))},de=async(ne,Z)=>{if(!ne.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${ne.id}`);if(re(ne,Z))throw new Error("Circular dependency in dashboard variables detected. Dashboard may not work as expected.");const ee=fe(ne,Z);ie(ne.rootStateKey,ee,Z)&&await new Promise(ce=>{const be=d.h.subscribe(()=>{if(!ne.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${ne.id}`);ie(ne.rootStateKey,ee,d.h.getState())||(be(),ce())})})},re=(ne,Z,ee=new Set)=>ee.has(ne.id)?!0:(ee=new Set([...ee,ne.id]),fe(ne,Z).some(ce=>re(ce,Z,ee))),fe=(ne,Z)=>{if(!ne.rootStateKey)return[];const ee=[];for(const ce of(0,z.gt)(ne.rootStateKey,Z))ne!==ce&&y.z.getIfExists(ne.type)&&y.z.get(ne.type).dependsOn(ne,ce)&&ee.push(ce);return ee},ie=(ne,Z,ee)=>{if(Z.length===0)return!1;const ce=(0,z.gt)(ne,ee);return Z.filter(Ee=>ce.some(Be=>Be.id===Ee.id&&(Be.state===r.Gu.NotStarted||Be.state===r.Gu.Loading))).length>0},oe=(ne,Z)=>async(ee,ce)=>{const be=(0,z.E0)(ne,ce());await de(be,ce());const Ee=Z[C.IG+be.name];if(Ee!==void 0){const Be=(0,O.Hi)(Ee);await y.z.get(be.type).setValueFromUrl(be,Be);return}if(be.hasOwnProperty("refresh")){const Be=be;if(Be.refresh===a.Bd.onDashboardLoad||Be.refresh===a.Bd.onTimeRangeChanged){await ee(mt((0,O.yQ)(Be)));return}}if(be.type==="custom"){await ee(mt((0,O.yQ)(be)));return}ee(Ae(ne))},ue=ne=>async(Z,ee)=>{const ce=g.E1.getSearchObject(),be=(0,z.gt)(ne,ee()).map(async Ee=>await Z(oe((0,O.yQ)(Ee),ce)));await Promise.all(be)},me=(ne,Z)=>async(ee,ce)=>{const be=(0,O.Hi)(Z),Ee=(0,z.E0)(ne,ce());(0,O.iD)(Ee)!==a.Bd.never&&await ee(mt((0,O.yQ)(Ee)));const Be=(0,z.E0)((0,O.yQ)(Ee),ce());if(!(0,S.eL)(Be))return;if(!Be)throw new Error(`Couldn't find variable with name: ${Ee.name}`);let Le=Be.options.find(ze=>ze.text===be||ze.value===be);if(!Le&&(0,S.U4)(Be)&&Be.allValue&&be===Be.allValue&&(Le={text:C.xk,value:C.r2,selected:!1}),!Le){let ze=be;const Fe=be;Array.isArray(be)&&(ze=be.reduce(($e,et)=>{const tt=Be.options.find(it=>it.value===et);return tt?[].concat($e,[tt.text]):[].concat($e,[et])},[])),Le={text:ze,value:Fe,selected:!1}}(0,S.U4)(Be)&&(Le=(0,T.x)({text:(0,n.castArray)(Le.text),value:(0,n.castArray)(Le.value),selected:!1},Be.multi)),await y.z.get(Ee.type).setValue(Be,Le)},ge=ne=>{let Z,ee,ce,be;const Ee=[];for(Z=0;Z<ne.options.length;Z++)if(be={...ne.options[Z]},be.selected=!1,Array.isArray(ne.current.value))for(ee=0;ee<ne.current.value.length;ee++)ce=ne.current.value[ee],be.value===ce&&(be.selected=!0,Ee.push(be));else be.value===ne.current.value&&(be.selected=!0,Ee.push(be));return Ee},Ue=(ne,Z)=>(ee,ce)=>{const be=(0,z.E0)(ne,ce());if(!(0,S.eL)(be))return Promise.resolve();const Ee=be.current||{},Be=y.z.get(be.type).setValue;if(Array.isArray(Ee.value)){const $e=ge(be);if($e.length===0){const tt=be.options[0];return Be(be,tt)}const et={value:$e.map(tt=>tt.value),text:$e.map(tt=>tt.text),selected:!0};return Be(be,et)}let Le=null;const ze=(0,O.Tt)(be),Fe=(0,O.N9)(be);if(Le=be.options?.find($e=>$e.text===ze||$e.value===Fe),Le||Z&&(Le=be.options?.find($e=>$e.text===Z||$e.value===Z),Le))return Be(be,Le);if(be.options){const $e=be.options[0];if($e)return Be(be,$e)}return Promise.resolve()},De=(ne,Z,ee)=>async ce=>{const{rootStateKey:be}=ne;return ce((0,L.mb)(be,(0,K.Q8)((0,O.Y6)(ne,{option:Z})))),await ce(ye(ne,ee))},Pe=ne=>{const Z=new h.kJ;return ne.forEach(ee=>{Z.createNode(ee.name)}),ne.forEach(ee=>{ne.forEach(ce=>{ee!==ce&&y.z.get(ee.type).dependsOn(ee,ce)&&Z.link(ee.name,ce.name)})}),Z},ye=(ne,Z,ee=E.h$)=>async(ce,be)=>{const Ee=be(),{rootStateKey:Be}=ne,Le=(0,z.E0)(ne,Ee);if((0,z.AE)(Be,Ee).transaction.status===R.LN.Fetching)return(0,O.iD)(Le)===a.Bd.never&&(await ce(Ke((0,O.yQ)(Le))),ce(Ae(ne))),Promise.resolve();const ze=(0,z.gt)(Be,Ee),Fe=Pe(ze),$e=Ee.dashboard?.getModel()?.panels??[],et=(0,D.dH)($e),tt=Le.type==="adhoc"?{refreshAll:!0,panelIds:[]}:{refreshAll:!1,panelIds:Array.from((0,D.PQ)([Le.id],Fe,et)),variable:(0,z.E0)(ne,Ee)},it=Fe.getNode(Le.name);let vt=[];return it&&(vt=it.getOptimizedInputEdges().map(yt=>{const Wt=ze.find(ut=>ut.name===yt.inputNode?.name);return Wt?ce(mt((0,O.yQ)(Wt))):Promise.resolve()})),Promise.all(vt).then(()=>{Z&&(ee.publish(new R.x9(tt)),g.E1.partial(Oe(Be,be)))})},Te=(ne,Z,ee,ce)=>(Z.includes(ne.name)||Z.push(ne.name),ne.outputEdges.forEach(be=>{const Ee=be.outputNode;if(Ee&&!Z.includes(Ee.name)){const Be=ee.find(Le=>Le.name===Ee.name);Be&&Be.refresh===a.Bd.onTimeRangeChanged&&ce.indexOf(Be)===-1?(ce.push(Be),Z.push(Ee.name)):Te(Ee,Z,ee,ce)}}),ce),nt=(ne,Z)=>ne.outputEdges.every(ee=>{const ce=ee.outputNode;if(ce){const be=_(Z,ce.name);if(be&&be.type==="query")return be.refresh!==a.Bd.onTimeRangeChanged}return!0}),ct=(ne,Z)=>{const ee=(0,z.gt)(ne,Z),ce=Pe(ee),be=[],Ee=[];return ee.forEach(Be=>{const Le=ce.getNode(Be.name);if(!be.includes(Be.name)&&Le){const ze=_(ee,Le.name);if(!ze)return;const Fe=H(ze);Fe&&Le.outputEdges.length===0&&Ee.push(ze),Fe&&Ee.includes(ze)&&Le.outputEdges.length>0&&(Ee.push(ze),Te(Le,be,ee,Ee)),Fe&&Le.outputEdges.length>0&&nt(Le,ee)&&(Ee.includes(ze)||Ee.push(ze)),!Fe&&Le.outputEdges.length>0&&Te(Le,be,ee,Ee)}}),Ee},he=(ne,Z)=>(0,z.gt)(ne,Z).filter(be=>"refresh"in be&&"options"in be?be.refresh===a.Bd.onTimeRangeChanged:!1),xe=(ne,Z,ee={templateSrv:(0,s.J)(),events:E.h$})=>async(ce,be)=>{ee.templateSrv.updateTimeRange(Z);let Ee=[];u.config.featureToggles.refactorVariablesTimeRange?Ee=ct(ne,be()):Ee=he(ne,be());const Be=Ee.map(ze=>ze.id),Le=Ee.map(ze=>ce(Me((0,O.yQ)(ze))));try{await Promise.all(Le),ee.events.publish(new R.eq({variableIds:Be}))}catch(ze){console.error(ze),ce((0,l.$l)(Je("Template variable service failed",ze)))}},Me=ne=>async(Z,ee)=>{const ce=(0,z.E0)(ne,ee());if(!(0,S.eL)(ce))return;const be=ce.options.slice();await Z(mt((0,O.yQ)(ce),!0));const Ee=(0,z.E0)(ne,ee());if(!(0,S.eL)(Ee))return;const Be=Ee.options;JSON.stringify(be)!==JSON.stringify(Be)&&ee().dashboard.getModel()?.templateVariableValueUpdated()},He=(ne,Z,ee=E.h$)=>async(ce,be)=>{const Ee=[],Be=be().dashboard.getModel(),Le=(0,z.gt)(ne,be());for(const tt of Le){const it=C.IG+tt.name;if(!Z.hasOwnProperty(it)||!Ve(tt,Z[it].value))continue;let vt=Z[it].value;if(Z[it].removed){const Wt=Be?.templating.list.find(ut=>ut.name===tt.name);Wt&&(0,S.Kr)(Wt)&&(vt=Wt.current.value),Wt&&Wt.type==="constant"&&(vt=Wt.query)}const yt=y.z.get(tt.type).setValueFromUrl(tt,vt);Ee.push(yt)}const ze=Le.filter(tt=>{const it=C.IG+tt.name;return Z.hasOwnProperty(it)&&Ve(tt,Z[it].value)&&tt.type!=="adhoc"}),Fe=Pe(Le),$e=(0,D.dH)(Be?.panels??[]),et=(0,D.PQ)(ze.map(tt=>tt.id),Fe,$e);Ee.length&&(await Promise.all(Ee),ee.publish(new R.Wy({refreshAll:et.size===0,panelIds:Array.from(et)})))};function Ve(ne,Z){const ee=y.z.get(ne.type).getValueForUrl(ne);let ce=(0,O.Hi)(Z);return Array.isArray(ee)&&!Array.isArray(ce)&&(ce=[ce]),!(0,n.isEqual)(ee,ce)}const Oe=(ne,Z)=>{const ee=g.E1.getSearchObject(),ce=Object.keys(ee).filter(be=>be.indexOf(C.IG)===-1).reduce((be,Ee)=>(be[Ee]=ee[Ee],be),{});for(const be of(0,z.gt)(ne,Z())){if(be.skipUrlSync)continue;const Ee=y.z.get(be.type);ce[C.IG+be.name]=Ee.getValueForUrl(be)}return ce},Ne=(ne,Z)=>async(ee,ce)=>{try{const be=(0,O.mn)(ne),Ee=ce(),Be=(0,z.cp)(Ee);Be&&(0,z.AE)(Be,Ee).transaction.status===R.LN.Fetching&&ee(rt(Be)),ee((0,L.mb)(be,(0,Y.Z9)({uid:be}))),ee(te(be,Z)),ee(q(be,Z)),ee(_e(be)),await ee(ue(be)),ee((0,L.mb)(be,(0,Y.iv)({uid:be})))}catch(be){ee((0,l.$l)(Je("Templating init failed",be))),console.error(be)}};function _e(ne,Z=p.ak){return(ee,ce)=>{const be=(0,z.gt)(ne,ce());for(const Ee of be){if(Ee.type!=="adhoc"&&Ee.type!=="query")continue;const{datasource:Be}=Ee;if((0,i.cv)(Be))continue;const Le=Z().getInstanceSettings(Be),ze=Le?(0,i.iU)(Le):{uid:Be};ee((0,L.mb)(ne,(0,K.Pl)((0,O.Y6)(Ee,{propName:"datasource",propValue:ze}))))}}}const qe=ne=>Z=>{Z((0,L.mb)(ne,(0,k.S)())),Z((0,L.mb)(ne,(0,b.QR)())),Z((0,L.mb)(ne,(0,M.XJ)())),Z((0,L.mb)(ne,(0,Y.p3)()))},rt=(ne,Z={getBackendSrv:v.i})=>ee=>{Z.getBackendSrv().cancelAllInFlightRequests(),ee(qe(ne))},mt=(ne,Z=!1)=>async(ee,ce)=>{const{rootStateKey:be}=ne;try{if(!(0,O.A3)(be,ce()))return;const Ee=(0,z.E0)(ne,ce());ee((0,L.mb)(be,(0,K.$M)((0,O.Y6)(Ee)))),await ee(Ke((0,O.yQ)(Ee))),await y.z.get(Ee.type).updateOptions(Ee),ee(Ae(ne))}catch(Ee){if(ee((0,L.mb)(be,(0,K.Le)((0,O.Y6)(ne,{error:Ee})))),Z||(console.error(Ee),ee((0,l.$l)(Je("Error updating options:",Ee,ne)))),Z)throw Ee}},Je=(ne,Z,ee)=>(0,f.t_)(`${ee?`Templating [${ee.id}]`:"Templating"}`,Z instanceof Error?`${ne} ${Z.message}`:`${ne}`),Ae=ne=>(Z,ee)=>{const{rootStateKey:ce}=ne;if(!(0,O.A3)(ce,ee()))return;const be=(0,z.E0)(ne,ee());be.state!==r.Gu.Done&&Z((0,L.mb)(ne.rootStateKey,(0,K.qQ)((0,O.Y6)(be))))};function Ke(ne,Z=p.ak){return async function(ee,ce){const{id:be,rootStateKey:Ee}=ne;if(!(0,O.A3)(Ee,ce()))return;const Be=(0,z.E0)(ne,ce());if(Be.type==="query")try{const Le=await Z().get(Be.datasource??"");if((0,S.R)(Le)||!(0,S.Ju)(Le)||Xe(Be.query))return;const ze={refId:`${Le.name}-${be}-Variable-Query`,query:Be.query};ee((0,L.mb)(Ee,(0,K.Pl)((0,O.Y6)(ne,{propName:"query",propValue:ze}))))}catch(Le){ee((0,l.$l)(Je("Failed to upgrade legacy queries",Le))),console.error(Le)}}}function Xe(ne){return(0,r.Kn)(ne)&&"refId"in ne&&typeof ne.refId=="string"}},14595:(G,A,e)=>{"use strict";e.d(A,{ZP:()=>m,mb:()=>g,qM:()=>r});var n=e(10805),a=e(19023),o=e(97536);const r={keys:{}},i=c=>({type:`templating/keyed/${c.action.type.replace(/^templating\//,"")}`,payload:c});function g(c,d){const f=(0,n.mn)(c);return i({key:f,action:d})}const u=c=>typeof c.type=="string"&&c.type.startsWith("templating/keyed")&&"payload"in c&&typeof c.payload.key=="string";function l(c=r,d){if(u(d)){const{key:f,action:E}=d.payload,v=(0,n.mn)(f),h=o.Z9.match(E)?v:c.lastKey,p=(0,a.Q)(),s=c.keys[v],y=p(s,E);return{...c,lastKey:h,keys:{...c.keys,[v]:y}}}return c}const m={templating:l}},19023:(G,A,e)=>{"use strict";e.d(A,{L:()=>c,Q:()=>m});var n=e(83205),a=e(65874),o=e(81127),r=e(22360),i=e(97536),g=e(15806),u=e(95656);let l;function m(){return l||(l=(0,n.combineReducers)({editor:a.gl,variables:u.L,optionsPicker:r.cv,transaction:i.vw,inspect:o.iV})),l}function c(){return{editor:a.PF,variables:g.s,optionsPicker:r.yy,transaction:i.xO,inspect:o.Kf}}},59084:(G,A,e)=>{"use strict";e.d(A,{AE:()=>u,E0:()=>i,Eo:()=>f,IV:()=>c,Q4:()=>s,QT:()=>E,S_:()=>p,_K:()=>C,cp:()=>h,gt:()=>l,ir:()=>b,ng:()=>y,xD:()=>d});var n=e(84513),a=e(59767),o=e(10805),r=e(19023);function i(S,D=(0,a.y0)(),M=!0){const{id:T,rootStateKey:R}=S,x=u(R,D).variables[T];if(!x){if(M)throw new Error(`Couldn't find variable with id:${T}`);return}return x}function g(S,D,M=(0,a.y0)()){return Object.values(u(D,M).variables).filter(S).sort((T,R)=>T.index-R.index)}function u(S,D=(0,a.y0)()){return D.templating.keys[(0,o.mn)(S)]??(0,r.L)()}function l(S,D=(0,a.y0)()){return g(m,S,D)}function m(S){return S.type!=="system"}const c=(0,n.Z)((S,D)=>l(S,(0,a.y0)())),d=(S,D)=>l(S,D);function f(S,D=(0,a.y0)()){return E(Object.values(u(S,D).variables))}function E(S){const D=S.filter(m).sort((M,T)=>M.index-T.index);return D.length>0?D[D.length-1].index+1:0}function v(S,D=getState()){return u(S,D).transaction.isDirty}function h(S=(0,a.y0)()){return S.templating?.lastKey}function p(S=(0,a.y0)()){if(!S.templating?.lastKey)throw new Error("Accessing lastKey without initializing it variables");return S.templating.lastKey}function s(S,D=(0,a.y0)()){const M=h(D);return M?g(S,M,D):[]}function y(S=(0,a.y0)()){const D=h(S);return D?l(D,S):[]}function C(S,D=(0,a.y0)()){const M=h(D);if(M)return i({id:S,rootStateKey:M,type:"query"},D,!1)}function b(S,D){return S[D]}},22042:(G,A,e)=>{"use strict";e.d(A,{$M:()=>S,Be:()=>C,Le:()=>M,Mn:()=>b,Pl:()=>h,Q8:()=>y,VN:()=>v,Y9:()=>s,b5:()=>f,gE:()=>p,mZ:()=>E,qQ:()=>D});var n=e(20079),a=e(56375),o=e.n(a),r=e(23757),i=e(25648),g=e(65874),u=e(43489),l=e(10805),m=e(59084),c=e(15806);const d=(0,n.oM)({name:"templating/shared",initialState:c.s,reducers:{addVariable:(T,R)=>{const O=R.payload.id??R.payload.data.model.name,x=i.z.get(R.payload.type),I=(0,a.cloneDeep)(x.initialState),L=x.beforeAdding?x.beforeAdding(R.payload.data.model):(0,a.cloneDeep)(R.payload.data.model),P={...(0,a.defaults)({},L,I),id:O,index:R.payload.data.index,global:R.payload.data.global};T[O]=P},variableStateNotStarted:(T,R)=>{const O=(0,m.ir)(T,R.payload.id);O.state=r.Gu.NotStarted,O.error=null},variableStateFetching:(T,R)=>{const O=(0,m.ir)(T,R.payload.id);O.state=r.Gu.Loading,O.error=null},variableStateCompleted:(T,R)=>{const O=(0,m.ir)(T,R.payload.id);O&&(O.state=r.Gu.Done,O.error=null)},variableStateFailed:(T,R)=>{const O=(0,m.ir)(T,R.payload.id);O&&(O.state=r.Gu.Error,O.error=R.payload.data.error)},removeVariable:(T,R)=>{if(delete T[R.payload.id],!R.payload.data.reIndex)return;const O=Object.values(T).sort((x,I)=>x.index-I.index);for(let x=0;x<O.length;x++)O[x].index=x},duplicateVariable:(T,R)=>{function O(V){return V.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const x=(0,a.cloneDeep)(T[R.payload.id]),I=new RegExp(`^copy_of_${O(x.name)}(_(\\d+))?$`),L=Object.values(T).map(({name:V})=>V.match(I)).filter(V=>V!=null),P=L.map(V=>V[2]).filter(V=>V!=null),N=(()=>L.length===0?null:P.length===0?1:P.map(V=>+V).sort((V,_)=>_-V)[0]+1)(),F=`copy_of_${x.name}${N?`_${N}`:""}`,U=R.payload.data?.newId??F,j=(0,m.QT)(Object.values(T));T[U]={...(0,a.cloneDeep)(i.z.get(R.payload.type).initialState),...x,id:U,name:F,index:j}},changeVariableOrder:(T,R)=>{const{toIndex:O,fromIndex:x}=R.payload.data,I=Object.values(T);for(let L=0;L<I.length;L++){const P=I[L];P.index===x?P.index=O:P.index>x&&P.index<=O?P.index--:P.index<x&&P.index>=O&&P.index++}},changeVariableType:(T,R)=>{const{id:O}=R.payload,{label:x,name:I,index:L,description:P,rootStateKey:N}=T[O];T[O]={...(0,a.cloneDeep)(i.z.get(R.payload.data.newType).initialState),id:O,rootStateKey:N,label:x,name:I,index:L,description:P}},setCurrentVariableValue:(T,R)=>{if(!R.payload.data.option)return;const O=(0,m.ir)(T,R.payload.id);if(!(0,u.eL)(O))return;const{option:x}=R.payload.data,I={...x,text:(0,l.Hi)(x?.text),value:(0,l.Hi)(x?.value)};O.current=I,O.options=O.options.map(L=>{L.value=(0,l.Hi)(L.value),L.text=(0,l.Hi)(L.text);let P=!1;if(Array.isArray(I.value))for(let N=0;N<I.value.length;N++){const F=I.value[N];if(L.value===F){P=!0;break}}else L.value===I.value&&(P=!0);return L.selected=P,L})},changeVariableProp:(T,R)=>{const O=(0,m.ir)(T,R.payload.id);O[R.payload.data.propName]=R.payload.data.propValue}},extraReducers:T=>T.addCase(g.Yo,(R,O)=>{const x=(0,m.ir)(R,O.payload.id);x.name=O.payload.data.newName})}),f=d.reducer,{removeVariable:E,addVariable:v,changeVariableProp:h,changeVariableOrder:p,duplicateVariable:s,setCurrentVariableValue:y,changeVariableType:C,variableStateNotStarted:b,variableStateFetching:S,variableStateCompleted:D,variableStateFailed:M}=d.actions},97536:(G,A,e)=>{"use strict";e.d(A,{Z9:()=>u,iv:()=>m,p3:()=>l,vw:()=>c,xO:()=>r});var n=e(20079),a=e(81990),o=e(22042);const r={uid:null,status:a.LN.NotStarted,isDirty:!1},i=(0,n.oM)({name:"templating/transaction",initialState:r,reducers:{variablesInitTransaction:(d,f)=>{d.uid=f.payload.uid,d.status=a.LN.Fetching},variablesCompleteTransaction:(d,f)=>{d.uid===f.payload.uid&&(d.status=a.LN.Completed)},variablesClearTransaction:(d,f)=>{d.uid=null,d.status=a.LN.NotStarted,d.isDirty=!1}},extraReducers:d=>d.addMatcher(g,(f,E)=>{f.status===a.LN.Completed&&(f.isDirty=!0)})});function g(d){return o.mZ.match(d)||o.VN.match(d)||o.Pl.match(d)||o.gE.match(d)||o.Y9.match(d)||o.Be.match(d)}const{variablesInitTransaction:u,variablesClearTransaction:l,variablesCompleteTransaction:m}=i.actions,c=i.reducer},15806:(G,A,e)=>{"use strict";e.d(A,{s:()=>n});const n={}},95656:(G,A,e)=>{"use strict";e.d(A,{L:()=>g,S:()=>i});var n=e(20079),a=e(25648),o=e(22042),r=e(15806);const i=(0,n.PH)("templating/cleanVariables"),g=(u=r.s,l)=>{if(i.match(l)){const m=Object.values(u).filter(d=>d.global);return m?m.reduce((d,f)=>(d[f.id]=f,d),{}):r.s}return l?.payload?.type&&a.z.getIfExists(l?.payload?.type)?a.z.get(l.payload.type).reducer((0,o.b5)(u,l),l):u}},81990:(G,A,e)=>{"use strict";e.d(A,{$U:()=>n.$U,Bd:()=>n.Bd,Eg:()=>g,LN:()=>i,Wy:()=>m,bU:()=>n.bU,eq:()=>l,x9:()=>u});var n=e(50595),a=e(23757),o=e(74442),r=e(74539),i=(c=>(c.NotStarted="Not started",c.Fetching="Fetching",c.Completed="Completed",c))(i||{});const g={id:r.UY,rootStateKey:null,name:"",type:"query",global:!1,index:-1,hide:n.bU.dontHide,skipUrlSync:!1,state:a.Gu.NotStarted,error:null,description:null};class u extends o.R{}u.type="variables-changed";class l extends o.R{}l.type="variables-time-range-process-done";class m extends o.R{}m.type="variables-changed-in-url"},10805:(G,A,e)=>{"use strict";e.d(A,{A3:()=>T,AQ:()=>y,HY:()=>v,Hi:()=>M,J7:()=>d,N9:()=>p,QI:()=>E,Tt:()=>h,Y6:()=>x,a9:()=>f,bi:()=>b,gR:()=>s,iD:()=>C,mn:()=>R,xT:()=>D,yQ:()=>O});var n=e(56375),a=e.n(n),o=e(50595),r=e(12399),i=e(18815),g=e(59767),u=e(25648),l=e(74539),m=e(59084),c=e(81990);const d=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,f=I=>(d.lastIndex=0,d.exec(I));function E(...I){const L=I[I.length-1];I[0]=typeof I[0]=="string"?I[0]:(0,i.Xh)(I[0]);const N=I.slice(0,-1).join(" ").match(d);return!!(N!==null?N.find(U=>{const j=f(U);return j!==null&&j.indexOf(L)>-1}):!1)}const v=I=>{if(!I||!I.current)return!1;if(I.current.value){const L=Array.isArray(I.current.value);if(L&&I.current.value.length&&I.current.value[0]===l.r2||!L&&I.current.value===l.r2)return!0}if(I.current.text){const L=Array.isArray(I.current.text);if(L&&I.current.text.length&&I.current.text[0]===l.xk||!L&&I.current.text===l.xk)return!0}return!1},h=I=>!I||!I.current||!I.current.text?"":Array.isArray(I.current.text)?I.current.text.toString():typeof I.current.text!="string"?"":I.current.text,p=I=>!I||!I.current||I.current.value===void 0||I.current.value===null?null:Array.isArray(I.current.value)?I.current.value.toString():typeof I.current.value!="string"?null:I.current.value;function s(I,L=(0,r.J)()){return!I||!I.regex?"":L.replace(I.regex,{},"regex")}function y(I,L,P,N){const F={range:void 0,variable:I,searchFilter:L,scopedVars:N};return(I.refresh===o.Bd.onTimeRangeChanged||I.refresh===o.Bd.onDashboardLoad)&&(F.range=P.timeRange()),F}function C(I){if(!I||!I.hasOwnProperty("refresh"))return o.Bd.never;const L=I;return L.refresh!==o.Bd.onTimeRangeChanged&&L.refresh!==o.Bd.onDashboardLoad&&L.refresh!==o.Bd.never?o.Bd.never:L.refresh}function b(){return u.z.list().filter(I=>I.id!=="system").map(({id:I,name:L,description:P})=>({label:L,value:I,description:P}))}function S(I){return(0,n.isArray)(I)&&(I.length===0?I=void 0:I.length===1&&(I=I[0])),I}function D(I,L){let P=0;const N={};for(const F in I){if(!F.startsWith(l.IG))continue;let U=S(L[F]),j=S(I[F]);(0,n.isEqual)(j,U)||(N[F]={value:I[F]},P++)}for(const F in L){if(!F.startsWith(l.IG))continue;const U=L[F];(0,n.isArray)(U)&&U.length===0||I.hasOwnProperty(F)||(N[F]={value:"",removed:!0},P++)}return P?N:void 0}function M(I){return Array.isArray(I)?I.map(String):I==null?"":typeof I=="number"?I.toString(10):typeof I=="string"?I:typeof I=="boolean"?I.toString():""}function T(I,L=(0,g.y0)()){return(0,m.AE)(I,L).transaction.status!==c.LN.NotStarted}function R(I){return String(I)}const O=I=>{if(!I.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${I.id}`);return{type:I.type,id:I.id,rootStateKey:I.rootStateKey}};function x(I,L){return{type:I.type,id:I.id,data:L}}},56512:(G,A,e)=>{"use strict";e.d(A,{H:()=>d});var n=e(66681),a=e(85960),o=e(94372),r=e(1930),i=e(8898),g=e(1713),u=e(47257),l=e(79055),m=e(19513);function c(E,v,h,p,s){const y=E.fields.map((R,O)=>({...R,hovered:O===h})),C=y.filter(R=>!R.config.custom?.hideFrom?.tooltip),b=C.find(R=>R.name==="traceID")||y[0],S=[];if(C.filter(R=>b===R).length>0&&S.push(b),S.push(...C.filter(R=>b!==R)),S.length===0)return null;const D=[],M=[],T=new Set;for(const R of S){if(s===g.f3.Single&&h!=null&&!R.hovered)continue;const O=R.values[v],x=R.display?R.display(O):{text:`${O}`,numeric:+O};R.getLinks&&R.getLinks({calculatedValue:x,valueRowIndex:v}).forEach(P=>{const N=`${P.title}/${P.href}`;T.has(N)||(M.push(P),T.add(N))});const{hovered:I,...L}=R;D.push({name:(0,o.CZ)(L,E),value:O,valueString:(0,r.zc)(x),highlight:R.hovered})}return p&&p!==g.As.None&&D.sort((R,O)=>i.sortValues(p)(R.value,O.value)),{displayValues:D,links:M}}const d=({data:E,rowIndex:v,columnIndex:h,sortOrder:p,mode:s,header:y,padding:C=0})=>{const b=(0,u.wW)(f,C);if(!E||v==null)return null;const S=c(E,v,h,p,s);if(S==null)return null;const{displayValues:D,links:M}=S;return a.createElement("div",{className:b.wrapper},y&&a.createElement("div",{className:b.header},a.createElement("span",{className:b.title},y)),a.createElement("table",{className:b.infoWrap},a.createElement("tbody",null,D.map((T,R)=>a.createElement("tr",{key:`${R}/${v}`},a.createElement("th",null,T.name),a.createElement("td",null,(0,m.Q)(T.valueString)))),M.map((T,R)=>a.createElement("tr",{key:R},a.createElement("th",null,"Link"),a.createElement("td",{colSpan:2},a.createElement(l.h,{href:T.href,external:T.target==="_blank",weight:"medium",inline:!1},T.title)))))))},f=(E,v=0)=>({wrapper:(0,n.css)`
      padding: ${v}px;
      background: ${E.components.tooltip.background};
      border-radius: ${E.shape.borderRadius(2)};
    `,header:(0,n.css)`
      background: ${E.colors.background.secondary};
      align-items: center;
      align-content: center;
      display: flex;
      padding-bottom: ${E.spacing(1)};
    `,title:(0,n.css)`
      font-weight: ${E.typography.fontWeightMedium};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,infoWrap:(0,n.css)`
      padding: ${E.spacing(1)};
      background: transparent;
      border: none;
      th {
        font-weight: ${E.typography.fontWeightMedium};
        padding: ${E.spacing(.25,2,.25,0)};
      }

      tr {
        border-bottom: 1px solid ${E.colors.border.weak};
        &:last-child {
          border-bottom: none;
        }
      }
    `,highlight:(0,n.css)``,link:(0,n.css)`
      color: ${E.colors.text.link};
    `})},89848:(G,A,e)=>{"use strict";var n=e(22654),a=e(59722),o=e(45321),r=e(3800),i=e(78344),g=e(29175),u=e(526),l=e(65512),m=e(6211),c=e(93657),d=e(26733),f=e(52171),E=e(49415),v=e(68114),h=e(56375),p=e.n(h),s=e(85960),y=e(8790),C=e(85745),b=e(58715),S=e(88008),D=e(31674),M=e(35853),T=e(12693),R=e(85445),O=e(4259),x=e(91),I=e(2384),L=e(55471),P=e(65362),N=e(81502),F=e(26141),U=e(94961),j=e(88912),V=e(12593),_=e(30573),H=e(72987),z=e(67954),K=e(12513),Y=e(90857),k=e(58309),q=e(34103),X=e(70274),te=e(94372),se=e(61751),de=e(53615),re=e(34460),fe=e(84933),ie=e(5106),oe=e(61353),ue=e(29165),me=e(70727);function ge(B){if(B in me.Un){const{name:W,getHelperDocs:Q,links:ae}=me.Un[B],ve=Q(me.O8.UIImage),Ce=Ue(ve);if(ae?.length){const Ie=ae.map(ke=>`
  Or visit <a href="${ke.url}" target="_blank">${ke.title}</a>

  `).join("");return{name:W,helperDocs:`
        ${Ce}
        ${(0,me.X)()}
  ${Ie}
        `}}return{name:W,helperDocs:`
      ${Ce}
      ${(0,me.X)()}
      `}}return{name:"No documentation found",helperDocs:(0,me.X)()}}const Ue=B=>B.replace(/\[(.*?)\]\(#.*?\)/g,"$1").replace(/\[[^\]]*\]\[\]/g,"");var De=e(81368),Pe=e(27436),ye=e(73039),Te=e(89306),nt=e(12399),ct=e(24956),he=e(3846),xe=e(37600);function Me(B,W){switch(W.type){case k.fS.boolean:return(0,h.isUndefined)(B)?!1:He(B);case k.fS.number:return isNaN(B)?0:parseFloat(B);case k.fS.string:return B?String(B):"";default:return B}}const He=B=>(0,h.isString)(B)?!(B[0]==="F"||B[0]==="f"||B[0]==="0"):!!B;function Ve(B){return function({options:Q,onChange:ae,field:ve}){const{validator:Ce,converter:Ie=Me}=B,{value:ke}=Q,[je,st]=(0,s.useState)(!Ce(ke)),bt=(0,nt.J)().getVariables().map(Gt=>({value:Gt.name,label:Gt.label||Gt.name,origin:Te.L8.Template})),Vt=(0,s.useCallback)(Gt=>{st(!Ce(Gt.currentTarget.value))},[st,Ce]),Ut=(0,s.useCallback)(Gt=>{if(je)return;const{value:ln}=Gt.currentTarget;ae({...Q,value:Ie(ln,ve)})},[Q,ae,je,ve,Ie]),Ot=(0,s.useCallback)(Gt=>{st(!Ce(Gt)),ae({...Q,value:Gt})},[st,Ce,ae,Q]);return Y.config.featureToggles.transformationsVariableSupport?s.createElement(he.X,{invalid:je,value:ke,error:"Value needs to be an integer or a variable",onChange:Ot,placeholder:"Value or variable",suggestions:bt}):s.createElement(ct.I,{className:"flex-grow-1",invalid:je,defaultValue:String(Q.value),placeholder:"Value",onChange:Vt,onBlur:Ut})}}const Oe=()=>[{name:"Is greater",id:X.mE.greater,component:Ve({validator:xe.f6})},{name:"Is greater or equal",id:X.mE.greaterOrEqual,component:Ve({validator:xe.f6})},{name:"Is lower",id:X.mE.lower,component:Ve({validator:xe.f6})},{name:"Is lower or equal",id:X.mE.lowerOrEqual,component:Ve({validator:xe.f6})},{name:"Is equal",id:X.mE.equal,component:Ve({validator:()=>!0})},{name:"Is not equal",id:X.mE.notEqual,component:Ve({validator:()=>!0})}],Ne=()=>null,_e=()=>[{name:"Is null",id:X.mE.isNull,component:Ne},{name:"Is not null",id:X.mE.isNotNull,component:Ne}];function qe(B){return function({options:Q,onChange:ae,field:ve}){const{validator:Ce}=B,[Ie,ke]=(0,s.useState)({from:!Ce(Q.from),to:!Ce(Q.to)}),st=(0,nt.J)().getVariables().map(Ut=>({value:Ut.name,label:Ut.label||Ut.name,origin:Te.L8.Template})),gt=(0,s.useCallback)((Ut,Ot)=>{ke({...Ie,[Ot]:!Ce(Ut.currentTarget.value)})},[ke,Ce,Ie]),bt=(0,s.useCallback)((Ut,Ot)=>{if(Ie[Ot])return;const{value:Gt}=Ut.currentTarget;ae({...Q,[Ot]:Me(Gt,ve)})},[Q,ae,Ie,ve]),Vt=(0,s.useCallback)((Ut,Ot)=>{const Gt=!Ce(Ut);ke({...Ie,[Ot]:Gt}),!Gt&&ae({...Q,[Ot]:Ut})},[Q,ae,Ie,ke,Ce]);return Y.config.featureToggles.transformationsVariableSupport?s.createElement(s.Fragment,null,s.createElement(he.X,{value:String(Q.from),invalid:Ie.from,error:"Value needs to be an integer or a variable",placeholder:"From",onChange:Ut=>Vt(Ut,"from"),suggestions:st}),s.createElement("div",{className:"gf-form-label"},"and"),s.createElement(he.X,{invalid:Ie.to,error:"Value needs to be an integer or a variable",value:String(Q.to),placeholder:"To",suggestions:st,onChange:Ut=>Vt(Ut,"to")})):s.createElement(s.Fragment,null,s.createElement(ct.I,{className:"flex-grow-1 gf-form-spacing",invalid:Ie.from,defaultValue:String(Q.from),placeholder:"From",onChange:Ut=>gt(Ut,"from"),onBlur:Ut=>bt(Ut,"from")}),s.createElement("div",{className:"gf-form-label"},"and"),s.createElement(ct.I,{className:"flex-grow-1",invalid:Ie.to,defaultValue:String(Q.to),placeholder:"To",onChange:Ut=>gt(Ut,"to"),onBlur:Ut=>bt(Ut,"to")}))}}const rt=()=>[{name:"Is between",id:X.mE.between,component:qe({validator:xe.f6})}];function mt(B){return function({options:Q,onChange:ae,field:ve}){const{validator:Ce,converter:Ie=Me}=B,{value:ke}=Q,[je,st]=(0,s.useState)(!Ce(ke)),gt=(0,s.useCallback)(Vt=>{st(!Ce(Vt.currentTarget.value))},[st,Ce]),bt=(0,s.useCallback)(Vt=>{if(je)return;const{value:Ut}=Vt.currentTarget;ae({...Q,value:Ie(Ut,ve)})},[Q,ae,je,ve,Ie]);return s.createElement(ct.I,{className:"flex-grow-1",invalid:je,defaultValue:String(Q.value),placeholder:"Value",onChange:gt,onBlur:bt})}}const Je=()=>[{name:"Regex",id:X.mE.regex,component:mt({validator:()=>!0,converter:B=>String(B)})}],Ae=new ye.B(()=>[...Oe(),..._e(),...rt(),...Je()]),Ke=B=>{const{onDelete:W,onChange:Q,filter:ae,fieldsInfo:ve}=B,{fieldsAsOptions:Ce,fieldByDisplayName:Ie}=ve,ke=Z(ae,Ce)??"",je=Ie[ke],st=je?Xe(je):[],gt=ne(ae,st),bt=Ae.getIfExists(gt),Vt=(0,s.useCallback)(Gt=>{Gt?.value&&Q({...ae,fieldName:Gt.value})},[Q,ae]),Ut=(0,s.useCallback)(Gt=>{if(!Gt?.value)return;const ln=Gt.value,pa=q.U8.get(ln).getDefaultOptions(je);Q({...ae,config:{id:ln,options:pa}})},[Q,ae,je]),Ot=(0,s.useCallback)(Gt=>{Q({...ae,config:{...ae.config,options:Gt}})},[Q,ae]);return!je||!bt||!bt.component?null:s.createElement(De.Z,null,s.createElement(fe._,{label:"Field",labelWidth:14},s.createElement(Pe.Ph,{className:"min-width-15 max-width-24",placeholder:"Field Name",options:Ce,value:ae.fieldName,onChange:Vt})),s.createElement(fe._,{label:"Match"},s.createElement(Pe.Ph,{className:"width-12",placeholder:"Select test",options:st,value:gt,onChange:Ut})),s.createElement(fe._,{label:"Value",grow:!0},s.createElement(bt.component,{field:je,options:ae.config.options??{},onChange:Ot})),s.createElement(oe.x,{marginBottom:.5},s.createElement(ue.zx,{icon:"times",onClick:W,variant:"secondary"})))},Xe=B=>{const W=[];for(const Q of q.U8.list())!Q.isApplicable(B)||!Ae.getIfExists(Q.id)||W.push({value:Q.id,label:Q.name,description:Q.description});return W},ne=(B,W)=>{const Q=W.find(ae=>ae.value===B.config.id);if(Q&&Q.value)return Q.value;if(W[0]?.value)return W[0]?.value},Z=(B,W)=>{const Q=W.find(ae=>ae.value===B.fieldName);if(Q&&Q.value)return Q.value;if(W[0]?.value)return W[0]?.value},ee=[{label:"Include",value:re.PQ.include},{label:"Exclude",value:re.PQ.exclude}],ce=[{label:"Match all",value:re.ER.all},{label:"Match any",value:re.ER.any}],be=B=>{const{input:W,options:Q,onChange:ae}=B,ve=Be(W),Ce=(0,s.useCallback)(()=>{const gt=W[0],bt=gt.fields.find(Ot=>Ot.type!==k.fS.time);if(!bt)return;const Vt=(0,h.cloneDeep)(Q.filters),Ut=q.U8.get(X.mE.greater);Vt.push({fieldName:(0,te.CZ)(bt,gt,W),config:{id:Ut.id,options:Ut.getDefaultOptions(bt)}}),ae({...Q,filters:Vt})},[ae,Q,W]),Ie=(0,s.useCallback)(gt=>{let bt=(0,h.cloneDeep)(Q.filters);bt.splice(gt,1),ae({...Q,filters:bt})},[Q,ae]),ke=(0,s.useCallback)((gt,bt)=>{let Vt=(0,h.cloneDeep)(Q.filters);Vt[bt]=gt,ae({...Q,filters:Vt})},[Q,ae]),je=(0,s.useCallback)(gt=>{ae({...Q,type:gt??re.PQ.include})},[Q,ae]),st=(0,s.useCallback)(gt=>{ae({...Q,match:gt??re.ER.all})},[Q,ae]);return s.createElement("div",null,s.createElement(fe._,{label:"Filter type",labelWidth:16},s.createElement("div",{className:"width-15"},s.createElement(ie.S,{options:ee,value:Q.type,onChange:je,fullWidth:!0}))),s.createElement(fe._,{label:"Conditions",labelWidth:16},s.createElement("div",{className:"width-15"},s.createElement(ie.S,{options:ce,value:Q.match,onChange:st,fullWidth:!0}))),s.createElement(oe.x,{paddingLeft:2},Q.filters.map((gt,bt)=>s.createElement(Ke,{key:bt,filter:gt,fieldsInfo:ve,onChange:Vt=>ke(Vt,bt),onDelete:()=>Ie(bt)})),s.createElement(ue.zx,{icon:"plus",size:"sm",onClick:Ce,variant:"secondary"},"Add condition")))},Ee={id:se.W.filterByValue,editor:be,transformation:de.Y.filterByValueTransformer,name:de.Y.filterByValueTransformer.name,description:"Removes rows of the query results using user-defined filters. This is useful if you can not filter your data in the data source.",categories:new Set([D.w.Filter]),help:ge(se.W.filterByValue).helperDocs},Be=B=>(0,s.useMemo)(()=>{const W={fieldsAsOptions:[],fieldByDisplayName:{}};return Array.isArray(B)?B.reduce((Q,ae)=>ae.fields.reduce((ve,Ce)=>{const Ie=(0,te.CZ)(Ce,ae,B);return ve.fieldByDisplayName[Ie]||(ve.fieldsAsOptions.push({label:Ie,value:Ie,type:Ce.type}),ve.fieldByDisplayName[Ie]=Ce),ve},Q),W):W},[B]);var Le=e(73667),ze=e(96072),Fe=e(44690),$e=e(73393),et=e(38685);function tt(B,W){const Q={data:B.input,options:B.options},ae=new Fe.j({id:"root",title:"root"}),ve=Ie=>{if(Ie?.length){const ke=Ie[0];let je=ae.categories.find(st=>st.props.id===ke);return je||(je=new Fe.j({id:ke,title:ke}),ae.categories.push(je)),je}return ae},Ce={getValue:Ie=>(0,h.get)(B.options,Ie),onChange:(Ie,ke)=>{B.onChange((0,et.hs)(B.options,Ie,ke))}};return(0,$e.HZ)(W,Ce,ve,Q),ae}function it(B){const W={data:[],options:{}},Q={},ae=new ze.rt;B(ae,W);for(const ve of ae.getItems())ve.defaultValue!=null&&(0,h.set)(Q,ve.path,ve.defaultValue);return Q}var vt=e(98951),yt=e(35466);const Wt=(B,W)=>{const Q=W.options??{};(0,vt.J)("",B,Q)},ut=B=>{(0,s.useEffect)(()=>{if(!B.options.xBuckets?.mode){const Q=it(Wt);B.onChange({...Q,...B.options})}});const W=tt(B,Wt);return s.createElement("div",null,s.createElement("div",null,W.items.map(Q=>Q.render())))},pt={id:yt.Oy.id,editor:ut,transformation:yt.Oy,name:yt.Oy.name,description:yt.Oy.description,state:Le.BV.alpha,categories:new Set([D.w.CreateNewVisualization]),help:ge(yt.Oy.id).helperDocs};var we=e(66681),lt=e(47257),Bt=e(83741),Kt=e(16515),It=e(63326),Zt=e(14345),yn=e(97127),xn=e(37634),An=e(43626);function qt(B,W,Q){const ae={},ve={};for(const Ce of B.fields){const Ie=(0,te.CZ)(Ce,B),je=Q.index[Ie].handler;if(!je)continue;const st=Ce.values[W];if(st==null)continue;const gt=je.processor(st,ae,ve);gt!=null&&(ae[je.targetProperty??je.key]=gt)}return ve.mappingValues&&(ae.mappings=Zn(ve)),ae}var On=(B=>(B.Name="field.name",B.Value="field.value",B.Label="field.label",B.Ignore="__ignore",B))(On||{});const wn=[{key:"field.name",name:"Field name",processor:()=>{}},{key:"field.value",name:"Field value",processor:()=>{}},{key:"field.label",name:"Field label",processor:()=>{}},{key:"__ignore",name:"Ignore",processor:()=>{}},{key:"max",processor:Nt},{key:"min",processor:Nt},{key:"unit",processor:B=>B.toString()},{key:"decimals",processor:Nt},{key:"displayName",name:"Display name",processor:B=>B.toString()},{key:"color",processor:B=>({fixedColor:B,mode:Zt.S.Fixed})},{key:"threshold1",targetProperty:"thresholds",processor:(B,W)=>{const Q=(0,yn.I)(B);if(!isNaN(Q))return W.thresholds||(W.thresholds={mode:xn.H.Absolute,steps:[{value:-1/0,color:"green"}]}),W.thresholds.steps.push({value:Q,color:"red"}),W.thresholds}},{key:"mappings.value",name:"Value mappings / Value",targetProperty:"mappings",defaultReducer:Kt.gz.allValues,processor:(B,W,Q)=>{if((0,h.isArray)(B))return Q.mappingValues=B,W.mappings}},{key:"mappings.color",name:"Value mappings / Color",targetProperty:"mappings",defaultReducer:Kt.gz.allValues,processor:(B,W,Q)=>{if((0,h.isArray)(B))return Q.mappingColors=B,W.mappings}},{key:"mappings.text",name:"Value mappings / Display text",targetProperty:"mappings",defaultReducer:Kt.gz.allValues,processor:(B,W,Q)=>{if((0,h.isArray)(B))return Q.mappingTexts=B,W.mappings}}];function Zn(B){const W={type:An.H.ValueToText,options:{}};if(!B.mappingValues)return[];for(let Q=0;Q<B.mappingValues.length;Q++){const ae=B.mappingValues[Q];ae!=null&&(W.options[ae.toString()]={color:B.mappingColors&&B.mappingColors[Q],text:B.mappingTexts&&B.mappingTexts[Q],index:Q})}return[W]}let Aa=null;function Ea(){if(Aa===null){Aa={};for(const B of wn)Aa[B.key]=B}return Aa}function Nt(B){const W=(0,yn.I)(B);if(!isNaN(W))return W}function en(B,W){for(const Q of W)if(B===Q.fieldName)return Q.handlerKey;return B.toLowerCase()}function rn(B){return B?Ea()[B]:null}function un(B,W,Q){const ae={index:{}};let ve=W.find(Ie=>Ie.handlerKey==="field.name"),Ce=W.find(Ie=>Ie.handlerKey==="field.value");for(const Ie of B.fields){const ke=(0,te.CZ)(Ie,B),je=W.find(bt=>bt.fieldName===ke),st=je?je.handlerKey:ke.toLowerCase();let gt=rn(st);Q&&(gt?(gt.key==="field.name"&&(ae.nameField=Ie),gt.key==="field.value"&&(ae.valueField=Ie)):je||(!ae.nameField&&!ve&&Ie.type===k.fS.string&&(ae.nameField=Ie,gt=rn("field.name")),!ae.valueField&&!Ce&&Ie.type===k.fS.number&&(ae.valueField=Ie,gt=rn("field.value")))),!gt&&Q&&(gt=rn("field.label")),ae.index[ke]={automatic:!je,handler:gt,reducerId:je?.reducerId??gt?.defaultReducer??Kt.gz.lastNotNull}}return ae}function on({frame:B,mappings:W,onChange:Q,withReducers:ae,withNameAndValue:ve}){const Ce=(0,lt.wW)(Ln),Ie=In(B,W,ve),ke=wn.map(gt=>Sn(gt,!1)),je=(gt,bt)=>{const Vt=W.findIndex(Ut=>Ut.fieldName===gt.fieldName);if(bt)if(Vt!==-1){const Ut=[...W];Ut.splice(Vt,1,{...W[Vt],handlerKey:bt.value}),Q(Ut)}else Q([...W,{fieldName:gt.fieldName,handlerKey:bt.value}]);else Q(Vt!==-1?W.filter((Ut,Ot)=>Ot!==Vt):[...W,{fieldName:gt.fieldName,handlerKey:"__ignore"}])},st=(gt,bt)=>{const Vt=W.findIndex(Ut=>Ut.fieldName===gt.fieldName);if(Vt!==-1){const Ut=[...W];Ut.splice(Vt,1,{...W[Vt],reducerId:bt}),Q(Ut)}else Q([...W,{fieldName:gt.fieldName,handlerKey:gt.handlerKey,reducerId:bt}])};return s.createElement("table",{className:Ce.table},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",null,"Field"),s.createElement("th",null,"Use as"),ae&&s.createElement("th",null,"Select"))),s.createElement("tbody",null,Ie.map(gt=>s.createElement("tr",{key:gt.fieldName},s.createElement("td",{className:Ce.labelCell},gt.fieldName),s.createElement("td",{className:Ce.selectCell,"data-testid":`${gt.fieldName}-config-key`},s.createElement(Pe.Ph,{options:ke,value:gt.configOption,placeholder:gt.placeholder,isClearable:!0,onChange:bt=>je(gt,bt)})),ae&&s.createElement("td",{"data-testid":`${gt.fieldName}-reducer`,className:Ce.selectCell},s.createElement(It.m,{stats:[gt.reducerId],defaultStat:gt.reducerId,onChange:bt=>st(gt,bt[0])}))))))}function In(B,W,Q){const ae=[],ve=un(B,W??[],Q);for(const Ce of B.fields){const Ie=(0,te.CZ)(Ce,B),ke=ve.index[Ie],je=Sn(ke.handler,ke.automatic);ae.push({fieldName:Ie,configOption:ke.automatic?null:je,placeholder:ke.automatic?je?.label:"Choose",handlerKey:ke.handler?.key??null,reducerId:ke.reducerId})}for(const Ce of W)if(!ae.find(Ie=>Ie.fieldName===Ce.fieldName)){const Ie=rn(Ce.handlerKey);ae.push({fieldName:Ce.fieldName,handlerKey:Ce.handlerKey,configOption:Sn(Ie,!1),missingInFrame:!0,reducerId:Ce.reducerId??Kt.gz.lastNotNull})}return Object.values(ae)}function Sn(B,W){if(!B)return null;let Q=B.name??(0,h.capitalize)(B.key);return W&&(Q=`${Q} (auto)`),{label:Q,value:B.key}}const Ln=B=>({table:(0,we.css)`
    margin-top: ${B.spacing(1)};

    td,
    th {
      border-right: 4px solid ${B.colors.background.primary};
      border-bottom: 4px solid ${B.colors.background.primary};
      white-space: nowrap;
    }
    th {
      font-size: ${B.typography.bodySmall.fontSize};
      line-height: ${B.spacing(4)};
      padding: ${B.spacing(0,1)};
    }
  `,labelCell:(0,we.css)`
    font-size: ${B.typography.bodySmall.fontSize};
    background: ${B.colors.background.secondary};
    padding: ${B.spacing(0,1)};
    max-width: 400px;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 140px;
  `,selectCell:(0,we.css)`
    padding: 0;
    min-width: 161px;
  `});var hn=e(98231);function Gn(B,W){let Q=null;for(const ke of W)if(ke.refId===B.configRefId){Q=ke;break}if(!Q)return W;const ae={fields:[],length:1},ve=un(Q,B.mappings??[],!1);for(const ke of Q.fields){const je={...ke},st=(0,te.CZ)(ke,Q),gt=ve.index[st],bt=(0,Kt.Kx)({field:ke,reducers:[gt.reducerId]});je.values=[bt[gt.reducerId]],ae.fields.push(je)}const Ce=[],Ie=(0,q.sq)(B.applyTo||{id:X.mi.numeric});for(const ke of W){if(ke===Q&&W.length>1)continue;const je={fields:[],length:ke.length,refId:ke.refId};for(const st of ke.fields)if(Ie(st,ke,W)){const gt=qt(ae,0,ve);je.fields.push({...st,config:{...st.config,...gt}})}else je.fields.push(st);Ce.push(je)}return Ce}const Cn={id:se.W.configFromData,name:"Config from query results",description:"Set unit, min, max and more from data.",defaultOptions:{configRefId:"config",mappings:[]},operator:B=>W=>W.pipe((0,hn.U)(Q=>Gn(B,Q)))};function Yn({input:B,onChange:W,options:Q}){const ae=(0,lt.wW)(Pt),ve=B.map(Ut=>Ut.refId).filter(Ut=>Ut!=null).map(Ut=>({label:Ut,value:Ut})),Ce=Q.configRefId||"config",Ie=Q.applyTo??{id:X.mi.byType,options:"number"},ke=Bt.i.get(Ie.id),je=B.find(Ut=>Ut.refId===Ce),st=Ut=>{W({...Q,configRefId:Ut.value||"config"})},gt=Ut=>{W({...Q,applyTo:{id:Ut.value}})},bt=Ut=>{W({...Q,applyTo:{id:Ie.id,options:Ut}})},Vt=Bt.i.list().filter(Ut=>!Ut.excludeFromPicker).map(Ut=>({label:Ut.name,value:Ut.id,description:Ut.description}));return s.createElement(s.Fragment,null,s.createElement(De.Z,null,s.createElement(fe._,{label:"Config query",labelWidth:20},s.createElement(Pe.Ph,{onChange:st,options:ve,value:Ce,width:30}))),s.createElement(De.Z,null,s.createElement(fe._,{label:"Apply to",labelWidth:20},s.createElement(Pe.Ph,{onChange:gt,options:Vt,value:Ie.id,width:30}))),s.createElement(De.Z,null,s.createElement(fe._,{label:"Apply to options",labelWidth:20,className:ae.matcherOptions},s.createElement(ke.component,{matcher:ke.matcher,data:B,options:Ie.options,onChange:bt}))),s.createElement(De.Z,null,je&&s.createElement(on,{frame:je,mappings:Q.mappings,onChange:Ut=>W({...Q,mappings:Ut}),withReducers:!0})))}const Xn={id:Cn.id,editor:Yn,transformation:Cn,name:Cn.name,description:Cn.description,state:Le.BV.beta,categories:new Set([D.w.CalculateNewFields]),help:ge(Cn.id).helperDocs},Pt=B=>({matcherOptions:(0,we.css)`
    min-width: 404px;
  `});var Dt=e(21964),$t=e(25394),jt=e(89872),mn=e(5999),Dn=e(47302);const vn=16,fa=B=>{const{options:W,onChange:Q}=B,{binary:ae}=W;let ve=!ae?.left,Ce=!ae?.right;const Ie=B.names.map(Ot=>(Ot===ae?.left&&(ve=!0),Ot===ae?.right&&(Ce=!0),{label:Ot,value:Ot})),ke=ve?Ie:[...Ie,{label:ae?.left,value:ae?.left}],je=Ce?Ie:[...Ie,{label:ae?.right,value:ae?.right}],st=Dn.n.list().map(Ot=>({label:Ot.binaryOperationID,value:Ot.binaryOperationID})),gt=Ot=>{Q({...W,mode:jt.ie.BinaryOperation,binary:Ot})},bt=Ot=>{gt({...ae,left:Ot.value})},Vt=Ot=>{gt({...ae,right:Ot.value})},Ut=Ot=>{gt({...ae,operator:Ot.value})};return s.createElement(s.Fragment,null,s.createElement(De.Z,null,s.createElement(fe._,{label:"Operation",labelWidth:vn},s.createElement(Pe.Ph,{allowCustomValue:!0,placeholder:"Field or number",options:ke,className:"min-width-18",value:ae?.left,onChange:bt})),s.createElement(fe._,null,s.createElement(Pe.Ph,{className:"width-4",options:st,value:ae?.operator??st[0].value,onChange:Ut})),s.createElement(fe._,null,s.createElement(Pe.Ph,{allowCustomValue:!0,placeholder:"Field or number",className:"min-width-10",options:je,value:ae?.right,onChange:Vt}))))},Pa=B=>{const{names:W,onChange:Q,options:ae}=B,{cumulative:ve}=ae,Ce=W.map(st=>({label:st,value:st})),Ie=st=>{const gt=st.length?st[0]:Kt.gz.sum;ke({...ve,reducer:gt})},ke=st=>{Q({...ae,mode:jt.ie.CumulativeFunctions,cumulative:st})},je=st=>{ke({...ve,field:st.value})};return s.createElement(s.Fragment,null,s.createElement(fe._,{label:"Field",labelWidth:vn},s.createElement(Pe.Ph,{placeholder:"Field",options:Ce,className:"min-width-18",value:ve?.field,onChange:je})),s.createElement(fe._,{label:"Calculation",labelWidth:vn},s.createElement(It.m,{allowMultiple:!1,className:"width-18",stats:[ve?.reducer||Kt.gz.sum],onChange:Ie,defaultStat:Kt.gz.sum,filterOptions:st=>st.id===Kt.gz.sum||st.id===Kt.gz.mean})))},La=B=>{const{options:W,onChange:Q}=B,{index:ae}=W,ve=Ce=>{Q({...W,index:{asPercentile:Ce.currentTarget.checked}})};return s.createElement(s.Fragment,null,s.createElement(fe._,{labelWidth:vn,label:"As percentile",tooltip:"Transform the row index as a percentile."},s.createElement(mn.x,{value:!!ae?.asPercentile,onChange:ve})))};var Ma=e(74042),ts=e(45564);const ds=B=>{const{names:W,selected:Q,onChange:ae,options:ve}=B,{reduce:Ce}=ve,Ie=gt=>{ae({...ve,reduce:gt})},ke=gt=>{Q.indexOf(gt)>-1?je(Q.filter(bt=>bt!==gt)):je([...Q,gt])},je=gt=>{Ie({...Ce,include:gt})},st=gt=>{const bt=gt.length?gt[0]:Kt.gz.sum,{reduce:Vt}=ve;Ie({...Vt,reducer:bt})};return s.createElement(s.Fragment,null,s.createElement(fe._,{label:"Operation",labelWidth:vn,grow:!0},s.createElement(Ma.Lh,{spacing:"xs",align:"flex-start",wrap:!0},W.map((gt,bt)=>s.createElement(ts.B,{key:`${gt}/${bt}`,onClick:()=>{ke(gt)},label:gt,selected:Q.indexOf(gt)>-1})))),s.createElement(fe._,{label:"Calculation",labelWidth:vn},s.createElement(It.m,{allowMultiple:!1,className:"width-18",stats:[Ce?.reducer||Kt.gz.sum],onChange:st,defaultStat:Kt.gz.sum})))};var ys=e(86468),ns=e(114);const qa=B=>{const{options:W,onChange:Q}=B,{unary:ae}=W,ve=bt=>{Q({...W,mode:jt.ie.UnaryOperation,unary:bt})},Ce=bt=>{ve({...ae,operator:bt.value})},Ie=bt=>{ve({...ae,fieldName:bt.value})};let ke=!ae?.fieldName;const je=B.names.map(bt=>(bt===ae?.fieldName&&(ke=!0),{label:bt,value:bt})),st=ys.m.list().map(bt=>({label:bt.unaryOperationID,value:bt.unaryOperationID})),gt=ke?je:[...je,{label:ae?.fieldName,value:ae?.fieldName}];return s.createElement(s.Fragment,null,s.createElement(De.Z,null,s.createElement(fe._,{label:"Operation",labelWidth:vn},s.createElement(Pe.Ph,{options:st,value:ae?.operator??st[0].value,onChange:Ce})),s.createElement(fe._,{label:"(",labelWidth:2},s.createElement(Pe.Ph,{placeholder:"Field",className:"min-width-11",options:gt,value:ae?.fieldName,onChange:Ie})),s.createElement(ns.W,{width:2},")")))};var Ss=e(98050);const wr=B=>{const{options:W,names:Q,onChange:ae}=B,{window:ve}=W,Ce=Q.map(Ot=>({label:Ot,value:Ot})),Ie=[{label:"Trailing",value:jt.Hx.Trailing},{label:"Centered",value:jt.Hx.Centered}],ke=[{label:"Percentage",value:jt.iO.Percentage},{label:"Fixed",value:jt.iO.Fixed}],je=Ot=>{ae({...W,mode:jt.ie.WindowFunctions,window:Ot})},st=Ot=>{je({...ve,field:Ot.value})},gt=Ot=>{je({...ve,windowSize:Ot&&ve?.windowSizeMode===jt.iO.Percentage?Ot/100:Ot})},bt=Ot=>{const Gt=Ot;je({...ve,windowSize:ve?.windowSize?Gt===jt.iO.Percentage?ve.windowSize/100:ve.windowSize*100:void 0,windowSizeMode:Gt})},Vt=Ot=>{const Gt=Ot.length?Ot[0]:Kt.gz.sum;je({...ve,reducer:Gt})},Ut=Ot=>{je({...ve,windowAlignment:Ot})};return s.createElement(s.Fragment,null,s.createElement(fe._,{label:"Field",labelWidth:vn},s.createElement(Pe.Ph,{placeholder:"Field",options:Ce,className:"min-width-18",value:ve?.field,onChange:st})),s.createElement(fe._,{label:"Calculation",labelWidth:vn},s.createElement(It.m,{allowMultiple:!1,className:"width-18",stats:[ve?.reducer||Kt.gz.mean],onChange:Vt,defaultStat:Kt.gz.mean,filterOptions:Ot=>Ot.id===Kt.gz.mean||Ot.id===Kt.gz.variance||Ot.id===Kt.gz.stdDev})),s.createElement(fe._,{label:"Type",labelWidth:vn},s.createElement(ie.S,{value:ve?.windowAlignment??jt.Hx.Trailing,options:Ie,onChange:Ut})),s.createElement(fe._,{label:"Window size mode"},s.createElement(ie.S,{value:ve?.windowSizeMode??jt.iO.Percentage,options:ke,onChange:bt})),s.createElement(fe._,{label:ve?.windowSizeMode===jt.iO.Percentage?"Window size %":"Window size",labelWidth:vn,tooltip:ve?.windowSizeMode===jt.iO.Percentage?"Set the window size as a percentage of the total data":"Window size"},s.createElement(Ss.Y,{placeholder:"Auto",min:.1,value:ve?.windowSize&&ve.windowSizeMode===jt.iO.Percentage?ve.windowSize*100:ve?.windowSize,onChange:gt})))},ls=[{value:jt.ie.BinaryOperation,label:"Binary operation"},{value:jt.ie.UnaryOperation,label:"Unary operation"},{value:jt.ie.ReduceRow,label:"Reduce row"},{value:jt.ie.Index,label:"Row index"}];Y.config.featureToggles.addFieldFromCalculationStatFunctions&&ls.push({value:jt.ie.CumulativeFunctions,label:"Cumulative functions"},{value:jt.ie.WindowFunctions,label:"Window functions"});const zs=new Set([k.fS.time,k.fS.number,k.fS.string]),ks=B=>{const{options:W,onChange:Q,input:ae}=B,ve=W?.reduce?.include,[Ce,Ie]=(0,s.useState)({names:[],selected:[]});(0,s.useEffect)(()=>{const Ot={interpolate:ln=>ln},Gt=(0,Dt.of)(ae).pipe(de.Y.ensureColumnsTransformer.operator(null,Ot),je(),ke(),st(ve||[])).subscribe(({selected:ln,names:pa})=>{Ie({names:pa,selected:ln})});return()=>{Gt.unsubscribe()}},[ae,ve]);const ke=()=>{if(!Y.config.featureToggles.transformationsVariableSupport)return $t.y;const Ot=(0,nt.J)();return Gt=>Gt.pipe((0,hn.U)(ln=>(ln.push(...Ot.getVariables().map(pa=>"$"+pa.name)),ln)))},je=()=>Ot=>Ot.pipe((0,hn.U)(Gt=>{const ln=[],pa={};for(const Ca of Gt)for(const ca of Ca.fields){if(!zs.has(ca.type))continue;const $a=(0,te.CZ)(ca,Ca,Gt);pa[$a]||(pa[$a]=!0,ln.push($a))}return ln})),st=Ot=>Gt=>Gt.pipe((0,hn.U)(ln=>{if(!Ot.length)return{names:ln,selected:[]};const pa=[],Ca=[];for(const ca of ln)Ot.includes(ca)&&Ca.push(ca),pa.push(ca);return{names:pa,selected:Ca}})),gt=Ot=>{Q({...W,replaceFields:Ot.currentTarget.checked})},bt=Ot=>{const Gt=Ot.value??jt.ie.BinaryOperation;Gt===jt.ie.WindowFunctions&&(W.window=W.window??jt.a1),Q({...W,mode:Gt})},Vt=Ot=>{Q({...W,alias:Ot.target.value})},Ut=W.mode??jt.ie.BinaryOperation;return s.createElement(s.Fragment,null,s.createElement(fe._,{labelWidth:vn,label:"Mode"},s.createElement(Pe.Ph,{className:"width-18",options:ls,value:ls.find(Ot=>Ot.value===Ut),onChange:bt})),Ut===jt.ie.BinaryOperation&&s.createElement(fa,{options:W,names:Ce.names,onChange:B.onChange}),Ut===jt.ie.UnaryOperation&&s.createElement(qa,{names:Ce.names,options:W,onChange:B.onChange}),Ut===jt.ie.ReduceRow&&s.createElement(ds,{names:Ce.names,selected:Ce.selected,options:W,onChange:B.onChange}),Ut===jt.ie.CumulativeFunctions&&s.createElement(Pa,{names:Ce.names,options:W,onChange:B.onChange}),Ut===jt.ie.WindowFunctions&&s.createElement(wr,{names:Ce.names,options:W,onChange:B.onChange}),Ut===jt.ie.Index&&s.createElement(La,{options:W,onChange:B.onChange}),s.createElement(fe._,{labelWidth:vn,label:"Alias"},s.createElement(ct.I,{className:"width-18",value:W.alias??"",placeholder:(0,jt.h)(W),onChange:Vt})),s.createElement(fe._,{labelWidth:vn,label:"Replace all fields"},s.createElement(mn.x,{value:!!W.replaceFields,onChange:gt})))},es={id:se.W.calculateField,editor:ks,transformation:de.Y.calculateFieldTransformer,name:de.Y.calculateFieldTransformer.name,description:"Use the row values to calculate a new field.",categories:new Set([D.w.CalculateNewFields]),help:ge(se.W.calculateField).helperDocs};var za=e(3874);const Ls=[{value:za.HO.FieldName,label:"Copy frame name to field name"},{value:za.HO.Label,label:"Add a label with the frame name"},{value:za.HO.Drop,label:"Ignore the frame name"}];class pr extends s.PureComponent{constructor(W){super(W),this.onModeChanged=Q=>{const{options:ae,onChange:ve}=this.props,Ce=Q.value??za.HO.FieldName;ve({...ae,frameNameMode:Ce})},this.onLabelChanged=Q=>{const{options:ae}=this.props;this.props.onChange({...ae,frameNameLabel:Q.target.value})}}render(){const{options:W}=this.props,Q=W.frameNameMode??za.HO.FieldName;return s.createElement("div",null,s.createElement(fe._,{label:"Name",labelWidth:16,grow:!0},s.createElement(Pe.Ph,{width:36,options:Ls,value:Ls.find(ae=>ae.value===Q),onChange:this.onModeChanged})),Q===za.HO.Label&&s.createElement(fe._,{label:"Label",labelWidth:16,grow:!0},s.createElement(ct.I,{width:36,value:W.frameNameLabel??"",placeholder:"frame",onChange:this.onLabelChanged})))}}const cr={id:se.W.concatenate,editor:pr,transformation:de.Y.concatenateTransformer,name:de.Y.concatenateTransformer.name,description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",categories:new Set([D.w.Combine]),help:ge(se.W.concatenate).helperDocs};var Ns=e(72623),Ur=e(53231),Go=e(9176),sr=e(73115),Qr=e(31173),ka=e(97666),Nr=e(74321),Hs=e(75064);const Do=({transformIndex:B,value:W,index:Q,mappedIndex:ae,onChangeEnumValue:ve,onRemoveEnumRow:Ce,checkIsEnumUniqueValue:Ie})=>{const ke=(0,lt.wW)(oo),[je,st]=(0,s.useState)(W),[gt,bt]=(0,s.useState)(je===""),[Vt,Ut]=(0,s.useState)(null),Ot=(0,s.useRef)(null);(0,s.useEffect)(()=>{Ot.current&&Ot.current.focus()},[Ot]);const Gt=$a=>{$a.currentTarget.value!==""&&Ie($a.currentTarget.value)&&$a.currentTarget.value!==W?Ut("Enum value already exists"):Ut(null),st($a.currentTarget.value)},ln=()=>{if(bt(!1),Ut(null),je===""||Vt!==null){Ce(ae);return}ve(ae,je)},pa=$a=>{$a.key==="Enter"&&($a.preventDefault(),ln())},Ca=()=>{bt(!0)},ca=()=>{Ce(ae)};return s.createElement(Qr._l,{key:`${B}/${W}`,draggableId:`${B}/${W}`,index:Q},$a=>s.createElement("tr",{key:Q,ref:$a.innerRef,...$a.draggableProps},s.createElement("td",null,s.createElement("div",{className:ke.dragHandle,...$a.dragHandleProps},s.createElement(ka.J,{name:"draggabledots",size:"lg"}))),gt?s.createElement("td",null,s.createElement(ct.I,{ref:Ot,type:"text",value:je,onChange:Gt,onBlur:ln,onKeyDown:pa}),Vt&&s.createElement(Nr.S,null,Vt)):s.createElement("td",{onClick:Ca,className:ke.clickableTableCell},W&&W!==""?W:"Click to edit"),s.createElement("td",{className:ke.textAlignCenter},s.createElement(Ma.Lh,{spacing:"sm"},s.createElement(Hs.h,{name:"trash-alt",onClick:ca,"data-testid":"remove-enum-row","aria-label":"Delete enum row",tooltip:"Delete"})))))},oo=B=>({dragHandle:(0,we.css)({cursor:"grab"}),textAlignCenter:(0,we.css)({textAlign:"center"}),clickableTableCell:(0,we.css)({cursor:"pointer",width:"100px","&:hover":{color:B.colors.text.maxContrast}})}),vr=Do,Bo=({input:B,options:W,transformIndex:Q,onChange:ae})=>{const ve=(0,lt.wW)(Ms),[Ce,Ie]=(0,s.useState)(W.conversions[Q].enumConfig?.text??[]);(0,s.useEffect)(()=>{!W.conversions[Q].enumConfig?.text?.length&&B.length&&ke()},[B]),(0,s.useEffect)(()=>{(()=>{const Gt=Ce.map(Ca=>Ca),ln=W.conversions,pa={text:Gt};ln[Q]={...ln[Q],enumConfig:pa},ae({...W,conversions:ln})})()},[Q,Ce]);const ke=()=>{const Ot=B.flatMap(ln=>ln?.fields??[]).find(ln=>ln.name===W.conversions[Q].targetField);if(!Ot)return;const Gt=new Set(Ot?.values);Ce.length>0&&!(0,h.isEqual)(Ce,Array.from(Gt))&&!window.confirm("This action will overwrite the existing configuration. Are you sure you want to continue?")||Ie([...Gt])},je=(Ot,Gt)=>{const ln=[...Ce];ln.splice(Ot,1,Gt),Ie(ln)},st=Ot=>{const Gt=[...Ce];Gt.splice(Ot,1),Ie(Gt)},gt=()=>{Ie(["",...Ce])},bt=(Ot,Gt)=>{Ce.includes(Gt)||je(Ot,Gt)},Vt=Ot=>Ce.includes(Ot),Ut=Ot=>{if(!Ot.destination)return;const Gt=Ce.length-Ot.source.index-1,ln=Ce.length-Ot.destination.index-1,pa=[...Ce],Ca=pa[Gt];pa.splice(Gt,1),pa.splice(ln,0,Ca),Ie(pa)};return s.createElement(De.Z,null,s.createElement(Ma.Lh,null,s.createElement(ue.zx,{size:"sm",icon:"plus",onClick:()=>ke(),className:ve.button},"Generate enum values from data"),s.createElement(ue.zx,{size:"sm",icon:"plus",onClick:()=>gt(),className:ve.button},"Add enum value")),s.createElement(Ma.wc,null,s.createElement("table",{className:ve.compactTable},s.createElement(Qr.Z5,{onDragEnd:Ut},s.createElement(Qr.bK,{droppableId:"sortable-enum-config-mappings",direction:"vertical"},Ot=>s.createElement("tbody",{ref:Ot.innerRef,...Ot.droppableProps},[...Ce].reverse().map((Gt,ln)=>{const pa=Ce.length-ln-1;return s.createElement(vr,{key:`${Q}/${Gt}`,transformIndex:Q,value:Gt,index:ln,mappedIndex:pa,onChangeEnumValue:bt,onRemoveEnumRow:st,checkIsEnumUniqueValue:Vt})}),Ot.placeholder))))))},Ms=B=>({compactTable:(0,we.css)({"tbody td":{padding:B.spacing(.5)},marginTop:B.spacing(1),marginBottom:B.spacing(2)}),button:(0,we.css)({marginTop:B.spacing(1)})}),is={settings:{width:24,isClearable:!1}},ao=({input:B,options:W,onChange:Q})=>{const ae=Go.OL.filter(Vt=>Vt.value!==k.fS.trace),ve=(0,xe.rm)(!0),Ce=(0,Ns.ZV)();ve.push({label:"Browser",value:"browser"}),ve.push({label:"UTC",value:"utc"});for(const Vt of Ce)ve.push({label:Vt,value:Vt});const Ie=(0,s.useCallback)(Vt=>Ut=>{const Ot=W.conversions;Ot[Vt]={...Ot[Vt],targetField:Ut??"",dateFormat:void 0},Q({...W,conversions:Ot})},[Q,W]),ke=(0,s.useCallback)(Vt=>Ut=>{const Ot=W.conversions;Ot[Vt]={...Ot[Vt],destinationType:Ut.value},Q({...W,conversions:Ot})},[Q,W]),je=(0,s.useCallback)(Vt=>Ut=>{const Ot=W.conversions;Ot[Vt]={...Ot[Vt],dateFormat:Ut.currentTarget.value},Q({...W,conversions:Ot})},[Q,W]),st=(0,s.useCallback)(()=>{Q({...W,conversions:[...W.conversions,{targetField:void 0,destinationType:void 0,dateFormat:void 0}]})},[Q,W]),gt=(0,s.useCallback)(Vt=>{const Ut=W.conversions;Ut.splice(Vt,1),Q({...W,conversions:Ut})},[Q,W]),bt=(0,s.useCallback)(Vt=>Ut=>{const Ot=W.conversions;Ot[Vt]={...Ot[Vt],timezone:Ut?.value},Q({...W,conversions:Ot})},[Q,W]);return s.createElement(s.Fragment,null,W.conversions.map((Vt,Ut)=>s.createElement("div",{key:`${Vt.targetField}-${Ut}`},s.createElement(De.Z,null,s.createElement(fe._,{label:"Field"},s.createElement(Ur.b,{context:{data:B},value:Vt.targetField??"",onChange:Ie(Ut),item:is})),s.createElement(fe._,{label:"as"},s.createElement(Pe.Ph,{options:ae,value:Vt.destinationType,placeholder:"Type",onChange:ke(Ut),width:18})),Vt.destinationType===k.fS.time&&s.createElement(fe._,{label:"Input format",tooltip:"Specify the format of the input field so Grafana can parse the date string correctly."},s.createElement(ct.I,{value:Vt.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:je(Ut),width:24})),Vt.destinationType===k.fS.string&&(Vt.dateFormat||(0,sr.findField)(B?.[0],Vt.targetField)?.type===k.fS.time)&&s.createElement(s.Fragment,null,s.createElement(fe._,{label:"Date format",tooltip:"Specify the output format."},s.createElement(ct.I,{value:Vt.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:je(Ut),width:24})),s.createElement(fe._,{label:"Set timezone",tooltip:"Set the timezone of the date manually"},s.createElement(Pe.Ph,{options:ve,value:Vt.timezone,onChange:bt(Ut),isClearable:!0}))),s.createElement(ue.zx,{size:"md",icon:"trash-alt",variant:"secondary",onClick:()=>gt(Ut),"aria-label":"Remove convert field type transformer"})),Vt.destinationType===k.fS.enum&&s.createElement(Bo,{input:B,options:W,transformIndex:Ut,onChange:Q}))),s.createElement(ue.zx,{size:"sm",icon:"plus",onClick:st,variant:"secondary","aria-label":"Add a convert field type transformer"},"Convert field type"))},Na={id:se.W.convertFieldType,editor:ao,transformation:de.Y.convertFieldTypeTransformer,name:de.Y.convertFieldTypeTransformer.name,description:de.Y.convertFieldTypeTransformer.description,categories:new Set([D.w.Reformat]),help:ge(se.W.convertFieldType).helperDocs};var Wa=e(49531);class zn extends s.PureComponent{constructor(W){super(W),this.onFieldToggle=Q=>{const{selected:ae}=this.state;ae.indexOf(Q)>-1?this.onChange(ae.filter(ve=>ve!==Q)):this.onChange([...ae,Q])},this.onChange=Q=>{const{regex:ae,isRegexValid:ve}=this.state,Ce={...this.props.options,include:{names:Q}};ae&&ve&&(Ce.include=Ce.include??{},Ce.include.pattern=ae),this.setState({selected:Q},()=>{this.props.onChange(Ce)})},this.onInputBlur=Q=>{const{selected:ae,regex:ve}=this.state;let Ce=!0;try{ve&&(0,Wa.jO)(ve)}catch{Ce=!1}Ce?this.props.onChange({...this.props.options,include:{pattern:ve}}):this.props.onChange({...this.props.options,include:{names:ae}}),this.setState({isRegexValid:Ce})},this.onVariableChange=Q=>{this.props.onChange({...this.props.options,include:{variable:Q.value}}),this.setState({variable:Q.value})},this.onFromVariableChange=Q=>{const ae=Q.currentTarget.checked;this.props.onChange({...this.props.options,byVariable:ae}),this.setState({byVariable:ae})},this.state={include:W.options.include?.names||[],regex:W.options.include?.pattern,variable:W.options.include?.variable,byVariable:W.options.byVariable||!1,options:[],variables:[],selected:[],isRegexValid:!0}}componentDidMount(){this.initOptions()}componentDidUpdate(W){this.props.input!==W.input&&this.initOptions()}initOptions(){const{input:W,options:Q}=this.props,ae=Array.from(Q.include?.names??[]),ve=(0,nt.J)().getVariables().map(ke=>({label:"$"+ke.name,value:"$"+ke.name})),Ce=[],Ie={};for(const ke of W)for(const je of ke.fields){const st=(0,te.CZ)(je,ke,W);let gt=Ie[st];gt||(gt=Ie[st]={name:st,count:0},Ce.push(gt)),gt.count++}if(Q.include?.pattern)try{const ke=(0,Wa.jO)(Q.include.pattern);for(const je of Ce)ke.test(je.name)&&ae.push(je.name)}catch(ke){console.error(ke)}if(ae.length){const ke=Ce.filter(je=>ae.includes(je.name));this.setState({options:Ce,selected:ke.map(je=>je.name),variables:ve,byVariable:Q.byVariable||!1,variable:Q.include?.variable,regex:Q.include?.pattern})}else this.setState({options:Ce,selected:Ce.map(ke=>ke.name),variables:ve,byVariable:Q.byVariable||!1,variable:Q.include?.variable,regex:Q.include?.pattern})}render(){const{options:W,selected:Q,isRegexValid:ae}=this.state;return s.createElement("div",null,s.createElement(De.Z,{label:"Use variable"},s.createElement(fe._,{label:"From variable"},s.createElement(mn.x,{value:this.state.byVariable,onChange:this.onFromVariableChange}))),this.state.byVariable?s.createElement(De.Z,null,s.createElement(fe._,{label:"Variable"},s.createElement(Pe.Ph,{value:this.state.variable,onChange:this.onVariableChange,options:this.state.variables||[]}))):s.createElement(De.Z,{label:"Identifier"},s.createElement(fe._,{label:"Identifier",invalid:!ae,error:ae?void 0:"Invalid pattern"},s.createElement(ct.I,{placeholder:"Regular expression pattern",value:this.state.regex||"",onChange:ve=>this.setState({regex:ve.currentTarget.value}),onBlur:this.onInputBlur,width:25})),W.map((ve,Ce)=>{const Ie=`${ve.name}${ve.count>1?" ("+ve.count+")":""}`,ke=Q.indexOf(ve.name)>-1;return s.createElement(ts.B,{key:`${ve.name}/${Ce}`,onClick:()=>{this.onFieldToggle(ve.name)},label:Ie,selected:ke})})))}}const Mt={id:se.W.filterFieldsByName,editor:zn,transformation:de.Y.filterFieldsByNameTransformer,name:de.Y.filterFieldsByNameTransformer.name,description:"Removes part of the query results using a regex pattern. The pattern can be inclusive or exclusive.",categories:new Set([D.w.Filter]),help:ge(se.W.filterFieldsByName).helperDocs};class xr extends s.PureComponent{constructor(W){super(W),this.onFieldToggle=Q=>{const{selected:ae}=this.state;ae.indexOf(Q)>-1?this.onChange(ae.filter(ve=>ve!==Q)):this.onChange([...ae,Q])},this.onChange=Q=>{this.setState({selected:Q}),this.props.onChange({...this.props.options,include:Q.join("|")})},this.state={include:W.options.include||"",options:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(W){this.props.input!==W.input&&this.initOptions()}initOptions(){const{input:W,options:Q}=this.props,ae=Q.include?Q.include.split("|"):[],ve=[],Ce={};for(const Ie of W)if(Ie.refId){let ke=Ce[Ie.refId];ke||(ke=Ce[Ie.refId]={refId:Ie.refId,count:0},ve.push(ke)),ke.count++}if(ae.length){const Ie=[],ke=[];for(const je of ve)ae.includes(je.refId)&&ke.push(je),Ie.push(je);this.setState({options:Ie,selected:ke.map(je=>je.refId)})}else this.setState({options:ve,selected:[]})}render(){const{options:W,selected:Q}=this.state,{input:ae}=this.props;return s.createElement(s.Fragment,null,ae.length<=1&&s.createElement("div",null,s.createElement(Nr.S,null,"Filter data by query expects multiple queries in the input.")),s.createElement(fe._,{label:"Series refId",labelWidth:16,shrink:!0},s.createElement(Ma.Lh,{spacing:"xs",align:"flex-start",wrap:!0},W.map((ve,Ce)=>{const Ie=`${ve.refId}${ve.count>1?" ("+ve.count+")":""}`,ke=Q.indexOf(ve.refId)>-1;return s.createElement(ts.B,{key:`${ve.refId}/${Ce}`,onClick:()=>{this.onFieldToggle(ve.refId)},label:Ie,selected:ke})}))))}}const wo={id:se.W.filterByRefId,editor:xr,transformation:de.Y.filterFramesByRefIdTransformer,name:de.Y.filterFramesByRefIdTransformer.name,description:"Filter data by query. This is useful if you are sharing the results from a different panel that has many queries and you want to only visualize a subset of that in this panel.",categories:new Set([D.w.Filter]),help:ge(se.W.filterByRefId).helperDocs};var dr=e(33661);const Wr={settings:{width:30,filter:B=>B.type===k.fS.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null};function ur({input:B,options:W,onChange:Q}){const ae=(0,s.useCallback)(je=>{Q({...W,stringField:je??""})},[Q,W]),ve=(0,s.useCallback)(je=>{const st=je.value??dr.vh.UpperCase;Q({...W,outputFormat:st})},[Q,W]),Ce=(0,s.useCallback)(je=>{Q({...W,substringStart:je??0})},[Q,W]),Ie=(0,s.useCallback)(je=>{Q({...W,substringEnd:je??0})},[Q,W]),ke=Object.values(dr.vh).map(je=>({label:je,value:je}));return s.createElement(s.Fragment,null,s.createElement(De.Z,null,s.createElement(fe._,{label:"Field",labelWidth:10},s.createElement(Ur.b,{context:{data:B},value:W.stringField??"",onChange:ae,item:Wr})),s.createElement(fe._,{label:"Format",labelWidth:10},s.createElement(Pe.Ph,{options:ke,value:W.outputFormat,onChange:ve,width:20}))),W.outputFormat===dr.vh.Substring&&s.createElement(De.Z,null,s.createElement(fe._,{label:"Substring range",labelWidth:15},s.createElement(Ss.Y,{min:0,value:W.substringStart??0,onChange:Ce,width:7})),s.createElement(fe._,null,s.createElement(Ss.Y,{min:0,value:W.substringEnd??0,onChange:Ie,width:7}))))}const io={id:se.W.formatString,editor:ur,transformation:de.Y.formatStringTransformer,name:de.Y.formatStringTransformer.name,state:Le.BV.beta,description:de.Y.formatStringTransformer.description,categories:new Set([D.w.Reformat])};function Uo({input:B,options:W,onChange:Q}){const ae=[],ve=(0,xe.rm)(!0);for(const je of B)for(const st of je.fields)if(st.type==="time"){const gt=(0,te.CZ)(st,je,B);ae.push({label:gt,value:gt})}const Ce=(0,s.useCallback)(je=>{const st=je?.value!==void 0?je.value:"";Q({...W,timeField:st})},[Q,W]),Ie=(0,s.useCallback)(je=>{const st=je.target.value;Q({...W,outputFormat:st})},[Q,W]),ke=(0,s.useCallback)(je=>{const st=je?.value!==void 0?je.value:"";Q({...W,timezone:st})},[Q,W]);return s.createElement(s.Fragment,null,s.createElement(De.Z,null,s.createElement(fe._,{label:"Time Field",labelWidth:15,grow:!0},s.createElement(Pe.Ph,{options:ae,value:W.timeField,onChange:Ce,placeholder:"time",isClearable:!0})),s.createElement(fe._,{label:"Format",labelWidth:10,tooltip:s.createElement(s.Fragment,null,"The output format for the field specified as a"," ",s.createElement("a",{href:"https://momentjs.com/docs/#/displaying/",target:"_blank",rel:"noopener noreferrer"},"Moment.js format string"),"."),interactive:!0},s.createElement(ct.I,{onChange:Ie,value:W.outputFormat})),s.createElement(fe._,{label:"Set Timezone",tooltip:"Set the timezone of the date manually",labelWidth:20},s.createElement(Pe.Ph,{options:ve,value:W.timezone,onChange:ke,isClearable:!0}))))}const lo={id:se.W.formatTime,editor:Uo,transformation:de.Y.formatTimeTransformer,name:de.Y.formatTimeTransformer.name,state:Le.BV.alpha,description:de.Y.formatTimeTransformer.description,help:ge(se.W.formatTime).helperDocs};var xt=e(87762),St=e(13086);const Xt=({input:B,options:W,onChange:Q})=>{const ae=(0,xe.Hg)(B),ve=(0,s.useCallback)(Ce=>Ie=>{Q({...W,fields:{...W.fields,[Ce]:Ie}})},[Q]);return s.createElement("div",null,ae.map(Ce=>s.createElement(sn,{onConfigChange:ve(Ce),fieldName:Ce,config:W.fields[Ce],key:Ce})))},Qt=[{label:"Group by",value:xt.x.groupBy},{label:"Calculate",value:xt.x.aggregate}],sn=({fieldName:B,config:W,onConfigChange:Q})=>{const ae=(0,lt.l4)(),ve=bn(ae),Ce=(0,s.useCallback)(Ie=>{Q({aggregations:W?.aggregations??[],operation:Ie?.value??null})},[W,Q]);return s.createElement(fe._,{className:ve.label,label:B,grow:!0,shrink:!0},s.createElement(St.K,{gap:.5,direction:"row"},s.createElement("div",{className:ve.operation},s.createElement(Pe.Ph,{options:Qt,value:W?.operation,placeholder:"Ignored",onChange:Ce,isClearable:!0})),W?.operation===xt.x.aggregate&&s.createElement(It.m,{className:ve.aggregations,placeholder:"Select Stats",allowMultiple:!0,stats:W.aggregations,onChange:Ie=>{Q({...W,aggregations:Ie})}})))},bn=B=>({label:(0,we.css)`
      label {
        min-width: ${B.spacing(32)};
      }
    `,operation:(0,we.css)`
      flex-shrink: 0;
      height: 100%;
      width: ${B.spacing(24)};
    `,aggregations:(0,we.css)`
      flex-grow: 1;
    `}),Bn={id:se.W.groupBy,editor:Xt,transformation:de.Y.groupByTransformer,name:de.Y.groupByTransformer.name,description:de.Y.groupByTransformer.description,categories:new Set([D.w.Combine,D.w.CalculateNewFields,D.w.Reformat]),help:ge(se.W.groupBy).helperDocs};var _n=e(92344);const jn=({input:B,options:W,onChange:Q})=>{const ae=(0,xe.Hg)(B).map(st=>({label:st,value:st})),ve=(0,s.useCallback)(st=>{Q({...W,columnField:st?.value})},[Q,W]),Ce=(0,s.useCallback)(st=>{Q({...W,rowField:st?.value})},[Q,W]),Ie=(0,s.useCallback)(st=>{Q({...W,valueField:st?.value})},[Q,W]),ke=[{label:"Null",value:_n.U.Null,description:"Null value"},{label:"True",value:_n.U.True,description:"Boolean true value"},{label:"False",value:_n.U.False,description:"Boolean false value"},{label:"Empty",value:_n.U.Empty,description:"Empty string"}],je=(0,s.useCallback)(st=>{Q({...W,emptyValue:st?.value})},[Q,W]);return s.createElement(s.Fragment,null,s.createElement(De.Z,null,s.createElement(fe._,{label:"Column",labelWidth:8},s.createElement(Pe.Ph,{options:ae,value:W.columnField,onChange:ve,isClearable:!0})),s.createElement(fe._,{label:"Row",labelWidth:8},s.createElement(Pe.Ph,{options:ae,value:W.rowField,onChange:Ce,isClearable:!0})),s.createElement(fe._,{label:"Cell Value",labelWidth:10},s.createElement(Pe.Ph,{options:ae,value:W.valueField,onChange:Ie,isClearable:!0})),s.createElement(fe._,{label:"Empty Value"},s.createElement(Pe.Ph,{options:ke,value:W.emptyValue,onChange:je,isClearable:!0}))))},Sa={id:se.W.groupingToMatrix,editor:jn,transformation:de.Y.groupingToMatrixTransformer,name:de.Y.groupingToMatrixTransformer.name,description:"Takes a three fields combination and produces a Matrix.",categories:new Set([D.w.Combine,D.w.Reformat]),help:ge(se.W.groupingToMatrix).helperDocs};var ta=e(87500);const ra=({input:B,options:W,onChange:Q})=>{const[ve,Ce]=(0,s.useState)({bucketSize:!(0,xe.f6)(W.bucketSize||""),bucketOffset:!(0,xe.f6)(W.bucketOffset||"")}),Ie=(0,s.useCallback)(Ut=>{Q({...W,bucketSize:Ut})},[Q,W]),ke=(0,s.useCallback)(Ut=>{Q({...W,bucketOffset:Ut})},[Q,W]),je=(0,s.useCallback)(Ut=>{Ce({...ve,bucketSize:!(0,xe.f6)(Ut)}),Q({...W,bucketSize:Ut})},[Q,W,ve,Ce]),st=(0,s.useCallback)(Ut=>{Ce({...ve,bucketOffset:!(0,xe.f6)(Ut)}),Q({...W,bucketOffset:Ut})},[Q,W,ve,Ce]),gt=(0,s.useCallback)(()=>{Q({...W,combine:!W.combine})},[Q,W]),Vt=(0,nt.J)().getVariables().map(Ut=>({value:Ut.name,label:Ut.label||Ut.name,origin:Te.L8.Template}));if(!Y.config.featureToggles.transformationsVariableSupport){let Ut;typeof W.bucketSize=="string"?Ut=parseInt(W.bucketSize,10):Ut=W.bucketSize;let Ot;return typeof W.bucketOffset=="string"?Ot=parseInt(W.bucketOffset,10):Ot=W.bucketOffset,s.createElement("div",null,s.createElement(De.Z,null,s.createElement(fe._,{labelWidth:18,label:ta.py.bucketSize.name,tooltip:ta.py.bucketSize.description},s.createElement(Ss.Y,{value:Ut,placeholder:"auto",onChange:Ie,min:0}))),s.createElement(De.Z,null,s.createElement(fe._,{labelWidth:18,label:ta.py.bucketOffset.name,tooltip:ta.py.bucketOffset.description},s.createElement(Ss.Y,{value:Ot,placeholder:"none",onChange:ke,min:0}))),s.createElement(De.Z,null,s.createElement(fe._,{labelWidth:18,label:ta.py.combine.name,tooltip:ta.py.combine.description},s.createElement(mn.x,{value:W.combine??!1,onChange:gt}))))}return s.createElement("div",null,s.createElement(De.Z,null,s.createElement(fe._,{invalid:ve.bucketSize,error:"Value needs to be an integer or a variable",labelWidth:18,label:ta.py.bucketSize.name,tooltip:ta.py.bucketSize.description},s.createElement(he.X,{suggestions:Vt,value:W.bucketSize,placeholder:"auto",onChange:je}))),s.createElement(De.Z,null,s.createElement(fe._,{labelWidth:18,label:ta.py.bucketOffset.name,tooltip:ta.py.bucketOffset.description,invalid:ve.bucketOffset,error:"Value needs to be an integer or a variable"},s.createElement(he.X,{suggestions:Vt,value:W.bucketOffset,placeholder:"none",onChange:st}))),s.createElement(De.Z,null,s.createElement(fe._,{labelWidth:18,label:ta.py.combine.name,tooltip:ta.py.combine.description},s.createElement(mn.x,{value:W.combine??!1,onChange:gt}))))},Oa={id:se.W.histogram,editor:ra,transformation:de.Y.histogramTransformer,name:de.Y.histogramTransformer.name,description:de.Y.histogramTransformer.description,categories:new Set([D.w.CreateNewVisualization]),help:ge(se.W.histogram).helperDocs};var Ts=e(73886),Ja=e(60190);const Ks=[{value:Ts.c.outer,label:"OUTER (TIME SERIES)",description:"Keep all rows from any table with a value. Join on distinct field values. Performant and best used for time series."},{value:Ts.c.outerTabular,label:"OUTER (TABULAR)",description:"Join on a field value with duplicated values. Non performant outer join best used for tabular(SQL like) data."},{value:Ts.c.inner,label:"INNER",description:"Drop rows that do not match a value in all tables."}];function us({input:B,options:W,onChange:Q}){const ae=(0,Ja.IX)(B),ve=(0,Ja.nw)(ae),Ce=(0,nt.J)().getVariables().map(je=>({value:"$"+je.name,label:"$"+je.name})),Ie=(0,s.useCallback)(je=>{Q({...W,byField:je?.value})},[Q,W]),ke=(0,s.useCallback)(je=>{Q({...W,mode:je?.value})},[Q,W]);return s.createElement(s.Fragment,null,s.createElement(De.Z,null,s.createElement(fe._,{label:"Mode",labelWidth:8,grow:!0},s.createElement(Pe.Ph,{options:Ks,value:W.mode??Ts.c.outer,onChange:ke}))),s.createElement(De.Z,null,s.createElement(fe._,{label:"Field",labelWidth:8,grow:!0},s.createElement(Pe.Ph,{options:[...ve,...Ce],value:W.byField,onChange:Ie,placeholder:"time",isClearable:!0}))))}const cs={id:se.W.joinByField,aliasIds:[se.W.seriesToColumns],editor:us,transformation:de.Y.joinByFieldTransformer,name:de.Y.joinByFieldTransformer.name,description:de.Y.joinByFieldTransformer.description,categories:new Set([D.w.Combine]),help:ge(se.W.joinByField).helperDocs};var Bs=e(8138);const Fr=[{value:Bs.k.Columns,label:"Columns"},{value:Bs.k.Rows,label:"Rows"}],hs=({input:B,options:W,onChange:Q})=>{const{labelNames:ve,selected:Ce}=(0,s.useMemo)(()=>{let je=[],st={};for(const bt of B)for(const Vt of bt.fields)if(Vt.labels)for(const Ut of Object.keys(Vt.labels))st[Ut]||(je.push({value:Ut,label:Ut}),st[Ut]=!0);const gt=new Set(W.keepLabels?.length?W.keepLabels:Object.keys(st));return{labelNames:je,selected:gt}},[W.keepLabels,B]),Ie=je=>{Q({...W,valueLabel:je?.value})},ke=je=>{if(Ce.has(je)?Ce.delete(je):Ce.add(je),Ce.size===ve.length||!Ce.size){const{keepLabels:st,...gt}=W;Q(gt)}else Q({...W,keepLabels:[...Ce]})};return s.createElement("div",null,s.createElement(De.Z,null,s.createElement(fe._,{label:"Mode",labelWidth:20},s.createElement(ie.S,{options:Fr,value:W.mode??Bs.k.Columns,onChange:je=>Q({...W,mode:je})}))),s.createElement(De.Z,null,s.createElement(fe._,{label:"Labels",labelWidth:20},s.createElement(St.K,{gap:1,wrap:"wrap"},ve.map((je,st)=>{const gt=je.label;return s.createElement(ts.B,{key:`${gt}/${st}`,onClick:()=>ke(gt),label:gt,selected:Ce.has(gt)})})))),W.mode!==Bs.k.Rows&&s.createElement(De.Z,null,s.createElement(fe._,{label:"Value field name",labelWidth:20,tooltip:"Replace the value field name with a label",htmlFor:"labels-to-fields-as-name"},s.createElement(Pe.Ph,{inputId:"labels-to-fields-as-name",isClearable:!0,allowCustomValue:!1,placeholder:"(Optional) Select label",options:ve,value:W?.valueLabel,onChange:Ie,className:"min-width-16"}))))},Ia={id:se.W.labelsToFields,editor:hs,transformation:de.Y.labelsToFieldsTransformer,name:de.Y.labelsToFieldsTransformer.name,description:`Groups series by time and return labels or tags as fields.
                Useful for showing time series with labels in a table where each label key becomes a separate column.`,categories:new Set([D.w.Reformat]),help:ge(se.W.labelsToFields).helperDocs},ms=({options:B,onChange:W})=>{const[Q,ae]=(0,s.useState)(!1),ve=(0,s.useCallback)(je=>{W({...B,limitField:Number(je.currentTarget.value)})},[W,B]),Ce=(0,s.useCallback)(je=>{ae(!(0,xe.f6)(je)),W({...B,limitField:je})},[W,B]),ke=(0,nt.J)().getVariables().map(je=>({value:je.name,label:je.label||je.name,origin:Te.L8.Template}));return Y.config.featureToggles.transformationsVariableSupport?s.createElement(s.Fragment,null,s.createElement(De.Z,null,s.createElement(he.X,{invalid:Q,error:"Value needs to be an integer or a variable",value:String(B.limitField),onChange:Ce,placeholder:"Value or variable",suggestions:ke}))):s.createElement(s.Fragment,null,s.createElement(De.Z,null,s.createElement(fe._,{label:"Limit",labelWidth:8},s.createElement(ct.I,{placeholder:"Limit count",pattern:"[0-9]*",value:B.limitField,onChange:ve,width:25}))))},mr={id:se.W.limit,editor:ms,transformation:de.Y.limitTransformer,name:de.Y.limitTransformer.name,description:"Limit the number of items displayed.",categories:new Set([D.w.Filter]),help:ge(se.W.limit).helperDocs},Ta=({input:B,options:W,onChange:Q})=>B.length<=1?s.createElement(Nr.S,null,"Merge has no effect when applied on a single frame."):null,fr={id:se.W.merge,editor:Ta,transformation:de.Y.mergeTransformer,name:de.Y.mergeTransformer.name,description:`Merge many series/tables and return a single table where mergeable values will be combined into the same row.
                Useful for showing multiple series, tables or a combination of both visualized in a table.`,categories:new Set([D.w.Combine]),help:ge(se.W.merge).helperDocs};var Yr=e(65746);const Zr=({options:B,input:W,onChange:Q})=>{const{indexByName:ae,excludeByName:ve,renameByName:Ce,includeByName:Ie}=B,ke=(0,xe.Hg)(W),je=(0,s.useMemo)(()=>ri(ke,ae),[ke,ae]),st=Ie&&Object.keys(Ie).length>0?"include":"exclude",gt=(0,s.useCallback)((Ot,Gt)=>{Q({...B,excludeByName:{...ve,[Ot]:Gt}})},[Q,B,ve]),bt=(0,s.useCallback)((Ot,Gt)=>{const ln={...B,includeByName:{...Ie,[Ot]:!Gt}};Q(ln)},[Q,B,Ie]),Vt=(0,s.useCallback)(Ot=>{if(!Ot||!Ot.destination)return;const Gt=Ot.source.index,ln=Ot.destination.index;Gt!==ln&&Q({...B,indexByName:Il(ke,Gt,ln)})},[Q,B,ke]),Ut=(0,s.useCallback)((Ot,Gt)=>{Q({...B,renameByName:{...B.renameByName,[Ot]:Gt}})},[Q,B]);return W.length>1?s.createElement(Nr.S,null,"Organize fields only works with a single frame. Consider applying a join transformation or filtering the input first."):s.createElement(Qr.Z5,{onDragEnd:Vt},s.createElement(Qr.bK,{droppableId:"sortable-fields-transformer",direction:"vertical"},Ot=>s.createElement("div",{ref:Ot.innerRef,...Ot.droppableProps},je.map((Gt,ln)=>{const pa=Ie&&Gt in Ie?Ie[Gt]:!1,Ca=st==="include"?pa:!ve[Gt],ca=st==="include"?bt:gt;return s.createElement(co,{fieldName:Gt,renamedFieldName:Ce[Gt],index:ln,onToggleVisibility:ca,onRenameField:Ut,visible:Ca,key:Gt})}),Ot.placeholder)))};Zr.displayName="OrganizeFieldsTransformerEditor";const co=({fieldName:B,renamedFieldName:W,index:Q,visible:ae,onToggleVisibility:ve,onRenameField:Ce})=>{const Ie=(0,lt.wW)(Ol);return s.createElement(Qr._l,{draggableId:B,index:Q},ke=>s.createElement("div",{className:"gf-form-inline",ref:ke.innerRef,...ke.draggableProps},s.createElement("div",{className:"gf-form gf-form--grow"},s.createElement("div",{className:"gf-form-label gf-form-label--justify-left width-30"},s.createElement("span",{...ke.dragHandleProps},s.createElement(ka.J,{name:"draggabledots",title:"Drag and drop to reorder",size:"lg",className:Ie.draggable})),s.createElement(Hs.h,{className:Ie.toggle,size:"md",name:ae?"eye":"eye-slash",onClick:()=>ve(B,ae),tooltip:ae?"Disable":"Enable"}),s.createElement("span",{className:Ie.name,title:B},B)),s.createElement(ct.I,{className:"flex-grow-1",defaultValue:W||"",placeholder:`Rename ${B}`,onBlur:je=>Ce(B,je.currentTarget.value)}))))};co.displayName="DraggableFieldName";const Ol=B=>({toggle:(0,we.css)`
    margin: 0 8px;
    color: ${B.colors.text.secondary};
  `,draggable:(0,we.css)`
    opacity: 0.4;
    &:hover {
      color: ${B.colors.text.maxContrast};
    }
  `,name:(0,we.css)`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: ${B.typography.bodySmall.fontSize};
    font-weight: ${B.typography.fontWeightMedium};
  `}),Il=(B,W,Q)=>{const ae=Array.from(B),[ve]=ae.splice(W,1);return ae.splice(Q,0,ve),ae.reduce((Ce,Ie,ke)=>(Ce[Ie]=ke,Ce),{})},ri=(B,W={})=>{if(!W||Object.keys(W).length===0)return B;const Q=(0,Yr.$)(W);return B.sort(Q)},Gi={id:se.W.organize,editor:Zr,transformation:de.Y.organizeFieldsTransformer,name:de.Y.organizeFieldsTransformer.name,description:"Allows the user to re-order, hide, or rename fields / columns. Useful when data source doesn't allow overrides for visualizing data.",categories:new Set([D.w.ReorderAndRename]),help:ge(se.W.organize).helperDocs};var jo=e(9463),Cs=e(92369);const Rl=({options:B,onChange:W})=>{const Q=[{label:"Series to rows",value:jo.AL.SeriesToRows,description:"Create a table with one row for each series value"},{label:"Reduce fields",value:jo.AL.ReduceFields,description:"Collapse each field into a single value"}],ae=(0,s.useCallback)(Ie=>{const ke=Ie.value;W({...B,mode:ke,includeTimeField:ke===jo.AL.ReduceFields?!!B.includeTimeField:!1})},[W,B]),ve=(0,s.useCallback)(()=>{W({...B,includeTimeField:!B.includeTimeField})},[W,B]),Ce=(0,s.useCallback)(()=>{W({...B,labelsToFields:!B.labelsToFields})},[W,B]);return s.createElement(s.Fragment,null,s.createElement(fe._,{label:"Mode","data-testid":Cs.wl.components.Transforms.Reduce.modeLabel,grow:!0,labelWidth:16},s.createElement(Pe.Ph,{options:Q,value:Q.find(Ie=>Ie.value===B.mode)||Q[0],onChange:ae})),s.createElement(fe._,{label:"Calculations","data-testid":Cs.wl.components.Transforms.Reduce.calculationsLabel,grow:!0,labelWidth:16},s.createElement(It.m,{placeholder:"Choose Stat",allowMultiple:!0,stats:B.reducers||[],onChange:Ie=>{W({...B,reducers:Ie})}})),B.mode===jo.AL.ReduceFields&&s.createElement(fe._,{htmlFor:"include-time-field",labelWidth:16,label:"Include time"},s.createElement(mn.x,{id:"include-time-field",value:!!B.includeTimeField,onChange:ve})),B.mode!==jo.AL.ReduceFields&&s.createElement(fe._,{htmlFor:"labels-to-fields",labelWidth:16,label:"Labels to fields"},s.createElement(mn.x,{id:"labels-to-fields",value:!!B.labelsToFields,onChange:Ce})))},Al={id:se.W.reduce,editor:Rl,transformation:de.Y.reduceTransformer,name:de.Y.reduceTransformer.name,description:de.Y.reduceTransformer.description,categories:new Set([D.w.CalculateNewFields]),help:ge(se.W.reduce).helperDocs};class ji extends s.PureComponent{constructor(W){super(W),this.handleRegexChange=Q=>{const ae=Q.currentTarget.value;let ve=!0;if(ae)try{ae&&(0,Wa.jO)(ae)}catch{ve=!1}this.setState(Ce=>({...Ce,regex:ae,isRegexValid:ve}))},this.handleRenameChange=Q=>{const ae=Q.currentTarget.value;this.setState(ve=>({...ve,renamePattern:ae}))},this.handleRegexBlur=Q=>{const ae=Q.currentTarget.value;let ve=!0;try{ae&&(0,Wa.jO)(ae)}catch{ve=!1}this.setState({isRegexValid:ve},()=>{ve&&this.props.onChange({...this.props.options,regex:ae})})},this.handleRenameBlur=Q=>{const ae=Q.currentTarget.value;this.setState({renamePattern:ae},()=>this.props.onChange({...this.props.options,renamePattern:ae}))},this.state={regex:W.options.regex,renamePattern:W.options.renamePattern,isRegexValid:!0}}render(){const{regex:W,renamePattern:Q,isRegexValid:ae}=this.state;return s.createElement(s.Fragment,null,s.createElement(fe._,{label:"Match",labelWidth:16,invalid:!ae,error:ae?void 0:"Invalid pattern"},s.createElement(ct.I,{placeholder:"Regular expression pattern",value:W||"",onChange:this.handleRegexChange,onBlur:this.handleRegexBlur,width:25})),s.createElement(fe._,{label:"Replace",labelWidth:16},s.createElement(ct.I,{placeholder:"Replacement pattern",value:Q||"",onChange:this.handleRenameChange,onBlur:this.handleRenameBlur,width:25})))}}const Ll={id:se.W.renameByRegex,editor:ji,transformation:de.Y.renameByRegexTransformer,name:de.Y.renameByRegexTransformer.name,description:"Renames part of the query result by using regular expression with placeholders.",categories:new Set([D.w.ReorderAndRename]),help:ge(se.W.renameByRegex).helperDocs},Bl=({input:B,options:W,onChange:Q})=>null,Os={id:se.W.seriesToRows,editor:Bl,transformation:de.Y.seriesToRowsTransformer,name:de.Y.seriesToRowsTransformer.name,description:`Merge many series and return a single series with time, metric and value as columns.
                Useful for showing multiple time series visualized in a table.`,categories:new Set([D.w.Combine,D.w.Reformat]),help:ge(se.W.seriesToRows).helperDocs},Ci=({input:B,options:W,onChange:Q})=>{const ae=(0,xe.Hg)(B).map(je=>({label:je,value:je})),Ce=(0,nt.J)().getVariables().map(je=>({label:"$"+je.name,value:"$"+je.name})),Ie=(0,s.useCallback)((je,st)=>{Q({...W,sort:[st]})},[Q,W]),ke=W.sort?.length?W.sort:[{}];return s.createElement("div",null,ke.map((je,st)=>s.createElement(De.Z,{key:`${je.field}/${st}`},s.createElement(fe._,{label:"Field",labelWidth:10,grow:!0},s.createElement(Pe.Ph,{options:Y.config.featureToggles.transformationsVariableSupport?[...ae,...Ce]:ae,value:je.field,placeholder:"Select field",onChange:gt=>{Ie(st,{...je,field:gt.value})}})),s.createElement(fe._,{label:"Reverse"},s.createElement(mn.x,{value:!!je.desc,onChange:()=>{Ie(st,{...je,desc:!je.desc})}})))))},wl={id:se.W.sortBy,editor:Ci,transformation:de.Y.sortByTransformer,name:de.Y.sortByTransformer.name,description:de.Y.sortByTransformer.description,categories:new Set([D.w.ReorderAndRename]),help:ge(se.W.sortBy).helperDocs};function oi({options:B,onChange:W}){const[Q,ae]=(0,s.useState)(B),ve=Co(),Ce=ii(),Ie=()=>{Q.push({path:""}),ae([...Q]),st()},ke=gt=>{Q&&(Q.splice(gt,1),ae([...Q]),st())},je=(gt,bt,Vt)=>{Q&&(Vt==="alias"?Q[bt].alias=gt.currentTarget.value??"":Q[bt].path=gt.currentTarget.value??"",ae([...Q]))},st=()=>{W(Q)};return s.createElement("ol",{className:(0,we.cx)(Ce.list)},Q&&Q.map((gt,bt)=>s.createElement("li",{key:bt},s.createElement(De.Z,null,s.createElement(fe._,{label:"Field",tooltip:ve.field,grow:!0},s.createElement(ct.I,{onBlur:st,onChange:Vt=>je(Vt,bt,"path"),value:gt.path,placeholder:'A valid json path, e.g. "object.value1" or "object.value2[0]"'})),s.createElement(fe._,{label:"Alias",tooltip:ve.alias},s.createElement(ct.I,{width:12,value:gt.alias,onBlur:st,onChange:Vt=>je(Vt,bt,"alias")})),s.createElement(fe._,{className:(0,we.cx)(Ce.removeIcon)},s.createElement(Hs.h,{onClick:()=>ke(bt),name:"trash-alt",tooltip:"Remove path"}))))),s.createElement(fe._,null,s.createElement(ue.zx,{icon:"plus",onClick:()=>Ie(),variant:"secondary"},"Add path")))}const Co=()=>{const B=[{path:"object",description:"=> extract fields from object"},{path:"object.value1",description:"=> extract value1"},{path:"object.value2",description:"=> extract value2"},{path:"object.value2[0]",description:"=> extract value2 first element"},{path:"object.value2[1]",description:"=> extract value2 second element"}];return{field:s.createElement("div",null,"A valid path of an json object.",s.createElement("div",null,s.createElement("strong",null,"JSON Value:")),s.createElement("pre",null,s.createElement("code",null,["{",'  "object": {','    "value1": "hello world"','    "value2": [1, 2, 3, 4]',"  }","}"].join(`
`))),s.createElement("strong",null,"Valid Paths:"),B.map((W,Q)=>s.createElement("p",{key:Q},s.createElement("code",null,W.path),s.createElement("i",null,W.description)))),alias:"An alias name for the variable in the dashboard. If left blank the given path will be used."}};function ii(){return{list:(0,we.css)`
      margin-left: 20px;
    `,removeIcon:(0,we.css)`
      margin: 0 0 0 4px;
      align-items: center;
    `}}var Er=e(45878),Po=(B=>(B.JSON="json",B.KeyValues="kvp",B.Auto="auto",B))(Po||{});const li={id:Po.JSON,name:"JSON",description:"Parse JSON string",parse:B=>JSON.parse(B)};function Ul(B){const W=[];let Q="",ae="";const ve={};for(let Ce=0;Ce<B.length;Ce++){let Ie=B[Ce];Ie===Q&&(Q="",Ie=B[++Ce]);const ke=Ie==="\\";if(ke&&(Ie=B[++Ce]),ke||Q.length){W.push(Ie);continue}switch((Ie==='"'||Ie==="'")&&(Q=Ie),Ie){case":":case"=":W.length&&(ae&&(ve[ae]=""),ae=W.join(""),W.length=0);break;case'"':case"'":case" ":case`
`:case"	":case"\r":case`
`:W.length&&ae===""&&(ve[W.join("")]="",W.length=0);case",":case";":case"&":case"{":case"}":if(W.length){const je=W.join("");ae.length?(ve[ae]=je,ae=""):ae=je,W.length=0}break;default:W.push(Ie),Ce===B.length-1&&ae===""&&W.length&&(ve[W.join("")]="",W.length=0)}}return ae.length&&(ve[ae]=W.join("")),ve}const Qi={id:Po.KeyValues,name:"Key+value pairs",description:"Look for a=b, c: d values in the line",parse:Ul},so=[li,Qi],ci={id:Po.Auto,name:"Auto",description:"parse new fields automatically",parse:B=>{for(const W of so)try{const Q=W.parse(B);if(Q!=null)return Q}catch{}}},Pi=new ye.B(()=>[...so,ci]),Qo={id:se.W.extractFields,name:"Extract fields",description:"Parse fields from the contends of another",defaultOptions:{},operator:(B,W)=>Q=>Q.pipe((0,hn.U)(ae=>Qo.transformer(B,W)(ae))),transformer:B=>W=>W.map(Q=>Nl(Q,B))};function Nl(B,W){if(!W.source)return B;const Q=(0,sr.findField)(B,W.source);if(!Q)return B;const ae=Pi.getIfExists(W.format??Po.Auto);if(!ae)throw new Error("unkonwn extractor");const ve=B.length,Ce=[],Ie=new Map;for(let je=0;je<ve;je++){let st=Q.values[je];if((0,h.isString)(st))try{st=ae.parse(st)}catch{st={}}if(st!=null){if(W.format===Po.JSON&&W.jsonPaths&&W.jsonPaths?.length>0){const gt={},bt=W.jsonPaths.filter(Vt=>Vt.path);bt.length>0&&(bt.forEach(Vt=>{const Ut=Vt.alias&&Vt.alias.length>0?Vt.alias:Vt.path;gt[Ut]=(0,h.get)(st,Vt.path)??"Not Found"}),st=gt)}for(const[gt,bt]of Object.entries(st)){let Vt=Ie.get(gt);Vt==null&&(Vt=new Array(ve).fill(void 0),Ie.set(gt,Vt),Ce.push(gt)),Vt[je]=bt}}}const ke=Ce.map(je=>{const st=Ie.get(je),gt={name:je,values:st,type:st?(0,Er.DP)(st.find(bt=>bt!=null)):k.fS.other,config:{}};return Y.config.featureToggles.extractFieldsNameDeduplication&&(gt.name=(0,te.U$)(gt,B)),gt});if(W.keepTime){const je=(0,sr.findField)(B,"Time")||(0,sr.findField)(B,"time");je&&ke.unshift(je)}return W.replace||ke.unshift(...B.fields),{...B,fields:ke}}const Ha={settings:{width:30,placeholderText:"Select field"},name:"",id:"",editor:()=>null},Si=({input:B,options:W,onChange:Q})=>{const ae=st=>{Q({...W,source:st})},ve=st=>{Q({...W,format:st?.value})},Ce=st=>{Q({...W,jsonPaths:st})},Ie=()=>{W.replace&&(W.keepTime=!1),Q({...W,replace:!W.replace})},ke=()=>{Q({...W,keepTime:!W.keepTime})},je=Pi.selectOptions(W.format?[W.format]:void 0);return s.createElement("div",null,s.createElement(De.Z,null,s.createElement(fe._,{label:"Source",labelWidth:16},s.createElement(Ur.b,{context:{data:B},value:W.source??"",onChange:ae,item:Ha}))),s.createElement(De.Z,null,s.createElement(fe._,{label:"Format",labelWidth:16},s.createElement(Pe.Ph,{value:je.current[0],options:je.options,onChange:ve,width:24,placeholder:"Auto"}))),W.format==="json"&&s.createElement(oi,{options:W.jsonPaths??[],onChange:Ce}),s.createElement(De.Z,null,s.createElement(fe._,{label:"Replace all fields",labelWidth:16},s.createElement(mn.x,{value:W.replace??!1,onChange:Ie}))),W.replace&&s.createElement(De.Z,null,s.createElement(fe._,{label:"Keep time",labelWidth:16},s.createElement(mn.x,{value:W.keepTime??!1,onChange:ke}))))},xi={id:se.W.extractFields,editor:Si,transformation:Qo,name:Qo.name,description:"Parse fields from content (JSON, labels, etc).",categories:new Set([D.w.Reformat]),help:ge(se.W.extractFields).helperDocs};var yr=e(49199),di=e(66008);const uo={id:se.W.joinByLabels,name:"Join by labels",description:"Flatten labeled results into a table joined by labels.",defaultOptions:{},operator:(B,W)=>Q=>Q.pipe((0,hn.U)(ae=>uo.transformer(B,W)(ae))),transformer:B=>W=>!W||!W.length?W:[Wl(B,W)]};function Wl(B,W){if(!B.value?.length)return No("No value labele configured");const Q=(0,xe.jY)(W);if(Q.size<1)return No("No labels in result");if(!Q.has(B.value))return No("Value label not found");let ae=B.join?.length?B.join:Array.from(Q);ae=ae.filter(bt=>bt!==B.value);const ve=new Set,Ce=new Map,Ie={};for(const bt of W)for(const Vt of bt.fields)if(Vt.labels&&Vt.type!==k.fS.time){const Ut=ae.map(ca=>Vt.labels[ca]),Ot=Ut.join(",");let Gt=Ce.get(Ot);Gt||(Gt={keys:Ut,values:{}},Ce.set(Ot,Gt));const ln=Vt.labels[B.value],pa=Vt.values,Ca=Gt.values[ln];Ca?Gt.values[ln]=Ca.concat(pa):Gt.values[ln]=pa,Ie[ln]||(Ie[ln]=Vt),ve.add(ln)}const ke=Array.from(ve),je=ae.map(()=>[]),st=ke.map(()=>[]);for(const bt of Ce.values()){let Vt=-1,Ut=!1;for(;!Ut;){Vt++,Ut=!0;for(let Ot=0;Ot<ae.length;Ot++)je[Ot].push(bt.keys[Ot]);for(let Ot=0;Ot<ke.length;Ot++){const Gt=ke[Ot],ln=bt.values[Gt]??[];st[Ot].push(ln[Vt]),ln.length>Vt+1&&(Ut=!1)}}}const gt={fields:[],length:st[0].length};for(let bt=0;bt<ae.length;bt++)gt.fields.push({name:ae[bt],config:{},type:k.fS.string,values:je[bt]});for(let bt=0;bt<ke.length;bt++){const Vt=Ie[ke[bt]];gt.fields.push({name:ke[bt],config:{},type:Vt.type??k.fS.number,values:st[bt]})}return gt}function No(B){return{meta:{notices:[{severity:"error",text:B}]},fields:[{name:"Error",type:k.fS.string,config:{},values:[B]}],length:0}}function mo({input:B,options:W,onChange:Q}){const ae=(0,s.useMemo)(()=>{let je;const st=(0,xe.jY)(B),gt=Array.from(st).map(ln=>({label:ln,value:ln}));let bt=gt.find(ln=>ln.value===W.value);!bt&&W.value&&(bt={label:`${W.value} (not found)`,value:W.value},gt.push(bt)),B.length?st.size===0&&(je=s.createElement(yr.b,{title:"No labels found"},"The input does not contain any labels")):je=s.createElement(yr.b,{title:"No input found"},"No input (or labels) found"),st.delete(W.value);const Vt=Array.from(st).map(ln=>({label:ln,value:ln}));let Ut=Vt;const Ot=!!W.join?.length;let Gt="Join";return Ot?Ut=Vt.filter(ln=>!W.join.includes(ln.value)):Gt=Vt.map(ln=>ln.value).join(", "),{warn:je,valueOptions:gt,valueOption:bt,joinOptions:Vt,addOptions:Ut,addText:Gt,hasJoin:Ot,key:Date.now()}},[W,B]),ve=(je,st)=>{if(!W.join)return;const gt=W.join.slice();if(st)gt[je]=st;else if(gt.splice(je,1),!gt.length){Q({...W,join:void 0});return}const bt=new Set(gt);W.value&&bt.delete(W.value),Q({...W,join:Array.from(bt)})},Ce=je=>{const st=je?.value;if(!st)return;const gt=W.join?W.join.slice():[];gt.push(st),Q({...W,join:gt})},Ie=10,ke="No labels found";return s.createElement("div",null,ae.warn,s.createElement(De.Z,null,s.createElement(fe._,{error:"required",invalid:!W.value?.length,label:"Value",labelWidth:Ie,tooltip:"Select the label indicating the values name"},s.createElement(Pe.Ph,{options:ae.valueOptions,value:ae.valueOption,onChange:je=>Q({...W,value:je.value}),noOptionsMessage:ke}))),ae.hasJoin?W.join.map((je,st)=>s.createElement(De.Z,{key:je+st},s.createElement(fe._,{label:"Join",labelWidth:Ie,error:"Unable to join by the value label",invalid:je===W.value},s.createElement(Ma.Lh,null,s.createElement(Pe.Ph,{options:ae.joinOptions,value:ae.joinOptions.find(gt=>gt.value===je),isClearable:!0,onChange:gt=>ve(st,gt?.value),noOptionsMessage:ke}),!!(ae.addOptions.length&&st===W.join.length-1)&&s.createElement(di.b,{icon:"plus",label:"",options:ae.addOptions,onChange:Ce,variant:"secondary"}))))):s.createElement(s.Fragment,null,!!ae.addOptions.length&&s.createElement(De.Z,null,s.createElement(fe._,{label:"Join",labelWidth:Ie},s.createElement(Pe.Ph,{options:ae.addOptions,placeholder:ae.addText,onChange:Ce,noOptionsMessage:ke})))))}const Fl={id:uo.id,editor:mo,transformation:uo,name:uo.name,description:uo.description,state:Le.BV.beta,categories:new Set([D.w.Combine]),help:ge(uo.id).helperDocs};var Yi=e(14867),br=e(25066),Jr=e(16226),Yo=e(31139);const Kr={id:se.W.fieldLookup,name:"Lookup fields from resource",description:"Retrieve matching data based on specified field",defaultOptions:{},operator:B=>W=>W.pipe((0,br.z)(Q=>(0,Jr.D)(Wo(Q,B))))};async function Wo(B,W){const Q=q.Ls.get(X.mi.byName).get(W?.lookupField),ae=await(0,Yo.so)(W?.gazetteer??Yo.LI);return ae.frame?Xr(B,ae,Q):Promise.reject("missing frame in gazetteer")}function Xr(B,W,Q){const ae=W.frame()?.fields;return ae?B.map(ve=>{const Ce=ve.length,Ie=[];for(const ke of ve.fields)if(Ie.push(ke),Q(ke,ve,B)){const je=ke.values,st=[];for(const gt of ae){const bt=new Array(Ce);st.push(bt),Ie.push({...gt,values:bt})}for(let gt=0;gt<W.count;gt++){const bt=W.find(je[gt]);if(bt?.index!=null)for(let Vt=0;Vt<ae.length;Vt++)st[Vt][gt]=ae[Vt].values[bt.index]}}return{...ve,fields:Ie}}):B}const Mi={settings:{width:30,filter:B=>B.type===k.fS.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null},Kl={settings:{}},Vl=({input:B,options:W,onChange:Q})=>{const ae=(0,s.useCallback)(Ce=>{Q({...W,lookupField:Ce})},[Q,W]),ve=(0,s.useCallback)(Ce=>{Q({...W,gazetteer:Ce})},[Q,W]);return s.createElement("div",null,s.createElement(De.Z,null,s.createElement(fe._,{label:"Field",labelWidth:12},s.createElement(Ur.b,{context:{data:B},value:W?.lookupField??"",onChange:ae,item:Mi}))),s.createElement(De.Z,null,s.createElement(fe._,{label:"Lookup",labelWidth:12},s.createElement(Yi.Q,{value:W?.gazetteer??"",context:{data:B},item:Kl,onChange:ve}))))},Gc={id:se.W.fieldLookup,editor:Vl,transformation:Kr,name:Kr.name,description:"Use a field value to lookup additional fields from an external source. This currently supports spatial data, but will eventually support more formats.",state:Le.BV.alpha,categories:new Set([D.w.PerformSpatialOperations]),help:ge(se.W.fieldLookup).helperDocs};var Zi=e(19285),jc=e(77582);const Ti=(B,W,Q=[])=>(W===0?Q.push(B):B.forEach(ae=>{Ti(ae,W-1,Q)}),Q);function ui(B){const W=B[0].length,Q=B.length,ae=new Map;for(let ve=0;ve<W;ve++){let Ce=ae;for(let Ie=0;Ie<Q;Ie++){let ke=B[Ie][ve],je=Ce.get(ke);je==null&&(je=Ie===Q-1?[]:new Map,Ce.set(ke,je)),Ce=je}Ce.push(ve)}return Ti(ae,Q)}const _l={asLabels:!0,append:!1,withNames:!1,separator1:"=",separator2:" "};function Zo(B,W,Q){return W.map((ae,ve)=>B.withNames?`${ae}${B.separator1}${Q[ve]}`:Q[ve]).join(B.separator2)}function Oi(B,W){const Q={};return B.forEach((ae,ve)=>{Q[ae]=String(W[ve])}),Q}const Qe={id:se.W.partitionByValues,name:"Partition by values",description:"Splits a one-frame dataset into multiple series discriminated by unique/enum values in one or more fields.",defaultOptions:{},operator:(B,W)=>Q=>Q.pipe((0,hn.U)(ae=>Qe.transformer(B,W)(ae))),transformer:(B,W)=>{const Q=(0,Zi.f)(W,{names:B.fields});if(!Q)return jc.d.transformer({},W);const ae=(0,q.sq)(Q);return ve=>ve.length?Ye(ve[0],ae,B):ve}};function Ye(B,W,Q){const ae=B.fields.filter(ke=>W(ke,B,[B]));if(!ae.length)return[B];const ve=ae.map(ke=>ke.values),Ce=ae.map(ke=>ke.name),Ie={..._l,...Q?.naming};return ui(ve).map(ke=>{let je=B.name,st={};if(Ie.asLabels)st=Oi(Ce,ae.map((bt,Vt)=>ve[Vt][ke[0]]));else{let bt=Zo(Ie,Ce,ae.map((Vt,Ut)=>ve[Ut][ke[0]]));Ie?.append&&B.name&&(bt=`${B.name} ${bt}`),je=bt}let gt=B.fields;if(!Q?.keepFields){const bt=new Set(Ce);gt=B.fields.filter(Vt=>!bt.has(Vt.name))}return{name:je,meta:B.meta,length:ke.length,fields:gt.map(bt=>{const Vt=bt.values,Ut=Array(ke.length);for(let Ot=0;Ot<ke.length;Ot++)Ut[Ot]=Vt[ke[Ot]];return{name:bt.name,type:bt.type,config:bt.config,labels:{...bt.labels,...st},values:Ut}})}})}function Ze({input:B,options:W,onChange:Q}){const ae=(0,Ja.IX)(B),ve=(0,Ja.nw)(ae),Ce=(0,s.useMemo)(()=>{const bt=new Set(W.fields);return bt.size<1?ve:ve.filter(Vt=>!bt.has(Vt.value))},[ve,W]),Ie=(0,s.useCallback)(bt=>{if(!bt.value)return;const Vt=new Set(W.fields);Vt.add(bt.value),Q({...W,fields:[...Vt]})},[Q,W]);let ke;(bt=>{bt[bt.asLabels=0]="asLabels",bt[bt.frameName=1]="frameName"})(ke||(ke={}));const je=[{label:"As label",value:0},{label:"As frame name",value:1}],st=(0,s.useCallback)(bt=>{if(!bt)return;const Vt=new Set(W.fields);Vt.delete(bt),Q({...W,fields:[...Vt]})},[Q,W]);if(B.length>1)return s.createElement(Nr.S,null,"Partition by values only works with a single frame.");const gt=[...new Set(W.fields)];return s.createElement("div",null,s.createElement(De.Z,null,s.createElement(fe._,{label:"Field",labelWidth:10,grow:!0},s.createElement(Ma.Lh,null,gt.map(bt=>s.createElement(ue.zx,{key:bt,icon:"times",variant:"secondary",size:"md",onClick:()=>st(bt)},bt)),Ce.length&&s.createElement(di.b,{variant:"secondary",size:"md",options:Ce,onChange:Ie,label:"Select field",icon:"plus"})))),s.createElement(De.Z,null,s.createElement(fe._,{tooltip:"Sets how the names of the selected fields are displayed. As frame name is usually better for tabular data",label:"Naming",labelWidth:10},s.createElement(ie.S,{options:je,value:W.naming?.asLabels===void 0||W.naming.asLabels?0:1,onChange:bt=>Q({...W,naming:{...W.naming,asLabels:bt===0}})}))))}const dt={id:se.W.partitionByValues,editor:Ze,transformation:Qe,name:Qe.name,description:Qe.description,state:Le.BV.alpha,categories:new Set([D.w.Reformat]),help:ge(se.W.partitionByValues).helperDocs};var Ct=e(512),Lt=e(38070),Ft=e(85334),Yt=(B=>(B.TimeSeriesWide="wide",B.TimeSeriesLong="long",B.TimeSeriesMulti="multi",B.TimeSeriesMany="many",B))(Yt||{});function nn(B){if(!Array.isArray(B)||B.length===0)return B;const W=[];for(const Q of an(B)){const ae=Q.fields[0];if(!ae||ae.type!==k.fS.time)continue;const ve=[],Ce=[];for(const Ie of Q.fields)switch(Ie.type){case k.fS.number:case k.fS.boolean:ve.push(Ie);break;case k.fS.string:Ce.push(Ie);break}for(const Ie of ve)if(Ce.length){const ke=new Map;for(let je=0;je<Q.length;je++){const st=ae.values[je],gt=Ie.values[je];if(gt===void 0||st==null)continue;const bt=Ce.map(Ut=>Ut.values[je]).join("/");let Vt=ke.get(bt);if(!Vt){Vt={key:bt,time:[],value:[],labels:{}};for(const Ut of Ce)Vt.labels[Ut.name]=Ut.values[je];ke.set(bt,Vt)}Vt.time.push(st),Vt.value.push(gt)}for(const je of ke.values())W.push({name:Q.name,refId:Q.refId,meta:{...Q.meta,type:Ct.P.TimeSeriesMulti},fields:[{...ae,values:je.time},{...Ie,values:je.value,labels:je.labels}],length:je.time.length})}else W.push({name:Q.name,refId:Q.refId,meta:{...Q.meta,type:Ct.P.TimeSeriesMulti},fields:[ae,Ie],length:Q.length})}return W}function an(B){if(!Array.isArray(B)||B.length===0)return B;const W=[];for(const Q of B){let ae;const ve=[],Ce={},Ie={},ke={},je={};for(let Ot=0;Ot<Q.fields.length;Ot++){const Gt=Q.fields[Ot];switch(Gt.type){case k.fS.string:case k.fS.boolean:Gt.name in je||(je[Gt.name]=Ot,Ie[Gt.name]=!0);break;case k.fS.time:if(!ae){ae=Gt;break}default:if(Gt.name in Ce){const Ca=Ce[Gt.name];if(Gt.type!==Ca)continue}else Ce[Gt.name]=Gt.type,ve.push(Gt.name);const ln=JSON.stringify(Gt.labels),pa=ke[ln];if(pa!==void 0?pa.push(Ot):ke[ln]=[Ot],Gt.labels!=null)for(const Ca in Gt.labels)Ie[Ca]=!0}}if(!ae)continue;const st=[],gt=[],bt=[],Vt=[];for(let Ot=0;Ot<Q.length;Ot++)st.push({time:ae.values[Ot],wideRowIndex:Ot});for(const Ot in ke)gt.push(Ot);for(const Ot in Ie)bt.push(Ot);for(const Ot in je)Vt.push(Ot);st.sort((Ot,Gt)=>Ot.time-Gt.time),gt.sort(),bt.sort(),ve.sort();const Ut=new Lt.v({...Q,meta:{...Q.meta,type:Ct.P.TimeSeriesLong},fields:[{name:ae.name,type:ae.type}]});for(const Ot of ve)Ut.addField({name:Ot,type:Ce[Ot]});for(const Ot of bt)Ut.addField({name:Ot,type:k.fS.string});for(const Ot of st){const{time:Gt,wideRowIndex:ln}=Ot;for(const pa of gt){const Ca={};for(const $a of Vt)Ca[$a]=Q.fields[je[$a]].values[ln];let ca=0;for(const $a of ke[pa]){const lr=Q.fields[$a];if(ca++===0&&lr.labels!=null)for(const Di in lr.labels)Ca[Di]=lr.labels[Di];Ca[lr.name]=lr.values[ln]}Ca[ae.name]=Gt,Ut.add(Ca)}}W.push(Ut)}return W}function Nn(B){return Ye(B,Q=>Q.type===k.fS.string).map(Q=>(Q.meta||(Q.meta={}),Q.meta.type=Ct.P.TimeSeriesMulti,Q))}const Kn={id:se.W.prepareTimeSeries,name:"Prepare time series",description:"Will stretch data frames from the wide format into the long format. This is really helpful to be able to keep backwards compatibility for panels not supporting the new wide format.",defaultOptions:{},operator:(B,W)=>Q=>Q.pipe((0,hn.U)(ae=>Kn.transformer(B,W)(ae))),transformer:B=>{const W=B?.format??"wide";if(W==="many"||W==="multi")return nn;if(W==="long")return an;const Q=q.Ls.get(X.mi.firstTimeField).get({});return ae=>{if(!ae.length)return[];const ve=[];for(const Ie of ae)Ie.meta?.type===Ct.P.TimeSeriesLong?Nn(Ie).forEach(ke=>ve.push(ke)):ve.push(Ie);const Ce=(0,Ft._9)({frames:ve,joinBy:Q,keepOriginIndices:!0});return Ce?(Ce.meta||(Ce.meta={}),Ce.meta.type=Ct.P.TimeSeriesWide,[Ce]):[]}}},Vn={label:"Wide time series",value:Yt.TimeSeriesWide,description:"Creates a single frame joined by time",info:s.createElement("ul",null,s.createElement("li",null,"Single frame"),s.createElement("li",null,"1st field is shared time field"),s.createElement("li",null,"Time in ascending order"),s.createElement("li",null,"Multiple value fields of any type"))},Hn={label:"Multi-frame time series",value:Yt.TimeSeriesMulti,description:"Creates a new frame for each time/number pair",info:s.createElement("ul",null,s.createElement("li",null,"Multiple frames"),s.createElement("li",null,"Each frame has two fields: time, value"),s.createElement("li",null,"Time in ascending order"),s.createElement("li",null,"String values are represented as labels"),s.createElement("li",null,"All values are numeric"))},ua={label:"Long time series",value:Yt.TimeSeriesLong,description:"Convert each frame to long format",info:s.createElement("ul",null,s.createElement("li",null,"Single frame"),s.createElement("li",null,"1st field is time field"),s.createElement("li",null,"Time in ascending order, but may have duplictes"),s.createElement("li",null,"String values are represented as separate fields rather than as labels"),s.createElement("li",null,"Multiple value fields may exist"))},Qn=[Vn,Hn,ua];function ha(B){const{options:W,onChange:Q}=B,ae=(0,lt.wW)(oa),ve=(0,s.useCallback)(Ce=>{Q({...W,format:Ce.value})},[Q,W]);return s.createElement(s.Fragment,null,s.createElement(De.Z,null,s.createElement(fe._,{label:"Format",labelWidth:12},s.createElement(Pe.Ph,{width:35,options:Qn,value:Qn.find(Ce=>Ce.value===Yt.TimeSeriesMulti&&W.format===Yt.TimeSeriesMany?!0:Ce.value===W.format)||Qn[0],onChange:ve,className:"flex-grow-1"}))),s.createElement(De.Z,null,s.createElement(fe._,{label:"Info",labelWidth:12},s.createElement("div",{className:ae.info},(Qn.find(Ce=>Ce.value===W.format)||Qn[0]).info))))}const oa=B=>({info:(0,we.css)`
    margin-left: 20px;
  `}),xa={id:Kn.id,editor:ha,transformation:Kn,name:Kn.name,description:Kn.description,categories:new Set([D.w.Reformat]),help:ge(Kn.id).helperDocs};var Ba=e(65811),na=e(31956),Fa=(B=>(B.linear="linear",B.polynomial="polynomial",B))(Fa||{});const ja={predictionCount:100,modelType:"linear",degree:2},ps={id:se.W.regression,name:"Regression analysis",operator:(B,W)=>Q=>Q.pipe((0,hn.U)(ae=>ps.transformer(B,W)(ae))),transformer:(B,W)=>Q=>{const{predictionCount:ae,modelType:ve,degree:Ce}={...ja,...B};if(Q.length===0)return Q;const Ie=q.Ls.get(X.mi.byName).get(B.yFieldName),ke=q.Ls.get(X.mi.byName).get(B.xFieldName);let je,st;for(const ca of Q){const $a=ca.fields.find(lr=>Ie(lr,ca,Q));if($a){st=$a;const lr=ca.fields.find(Di=>ke(Di,ca,Q));if(lr){je=lr;break}else throw"X and Y fields must be part of the same frame"}}if(!je||!st)return Q;let gt=je.values[0],bt=je.values[0];for(let ca=1;ca<je.values.length;ca++)je.values[ca]<gt&&(gt=je.values[ca]),je.values[ca]>bt&&(bt=je.values[ca]);const Vt=(bt-gt)/(ae-1),Ut=[...[...Array(ae-1).keys()].map((ca,$a)=>$a*Vt+gt),bt],Ot=je.type===k.fS.time?gt:0,Gt=[],ln=[];for(let ca=0;ca<je.values.length;ca++)st.values[ca]!==null&&(ln.push(je.values[ca]-Ot),Gt.push(st.values[ca]));let pa;switch(ve){case"linear":pa=new na.H(ln,Gt);break;case"polynomial":pa=new Ba.P(ln,Gt,Ce);break;default:return Q}const Ca={name:`${ve} regression`,length:Ut.length,fields:[{name:je.name,type:je.type,values:Ut,config:{}},{name:`${st.name} predicted`,type:st.type,values:Ut.map(ca=>pa.predict(ca-Ot)),config:{}}]};return[...Q,Ca]}},Is={editor:Ur.b,id:"",name:"",settings:{width:24,isClearable:!1}},bs=20,vs=({input:B,options:W,onChange:Q})=>{const ae=[{label:"Linear",value:Fa.linear},{label:"Polynomial",value:Fa.polynomial}];return(0,s.useEffect)(()=>{let ve,Ce;if(!W.xFieldName){const Ie=q.Ls.get(X.mi.firstTimeField).get({});for(const ke of B)if(ve=ke.fields.find(je=>Ie(je,ke,B)),ve)break;if(!ve){const ke=q.Ls.get(X.mi.numeric).get({});for(const je of B)if(ve=je.fields.find(st=>ke(st,je,B)),ve)break}}if(!W.yFieldName){const Ie=q.Ls.get(X.mi.numeric).get({});for(const ke of B)if(Ce=ke.fields.find(je=>Ie(je,ke,B)&&je!==ve),Ce)break}ve&&Ce&&Q({...W,xFieldName:ve.name,yFieldName:Ce.name})}),s.createElement(s.Fragment,null,s.createElement(fe._,{labelWidth:bs,label:"X field"},s.createElement(Ur.b,{context:{data:B},value:W.xFieldName??"",item:Is,onChange:ve=>{Q({...W,xFieldName:ve})}})),s.createElement(fe._,{labelWidth:bs,label:"Y field"},s.createElement(Ur.b,{context:{data:B},value:W.yFieldName??"",item:Is,onChange:ve=>{Q({...W,yFieldName:ve})}})),s.createElement(fe._,{labelWidth:bs,label:"Model type"},s.createElement(Pe.Ph,{value:W.modelType??ja.modelType,onChange:ve=>{Q({...W,modelType:ve.value??ja.modelType})},options:ae})),s.createElement(fe._,{labelWidth:bs,label:"Predicted points",tooltip:"Number of X,Y points to predict"},s.createElement(Ss.Y,{value:W.predictionCount??ja.predictionCount,onChange:ve=>{Q({...W,predictionCount:ve})}})),W.modelType===Fa.polynomial&&s.createElement(fe._,{labelWidth:bs,label:"Degree"},s.createElement(Pe.Ph,{value:W.degree??ja.degree,options:[{label:"Quadratic",value:2},{label:"Cubic",value:3},{label:"Quartic",value:4},{label:"Quintic",value:5}],onChange:ve=>{Q({...W,degree:ve.value})}})))},qs={id:se.W.regression,editor:vs,transformation:ps,name:ps.name,description:ps.description,categories:new Set([D.w.CalculateNewFields]),help:ge(se.W.regression).helperDocs},Rs={id:se.W.rowsToFields,name:"Rows to fields",description:"Convert each row into a field with dynamic config.",defaultOptions:{},operator:B=>W=>W.pipe((0,hn.U)(Q=>Q.map(ae=>Dr(B,ae))))};function Dr(B,W){const Q=un(W,B.mappings??[],!0),{nameField:ae,valueField:ve}=Q;if(!ae||!ve)return W;const Ce=[];for(let Ie=0;Ie<ae.values.length;Ie++){const ke=ae.values[Ie],je=ve.values[Ie],st=qt(W,Ie,Q),gt=qr(W,Ie,Q),bt={name:`${ke}`,type:ve.type,values:[je],config:st,labels:gt};Ce.push(bt)}return{fields:Ce,length:1}}function qr(B,W,Q){const ae={...Q.nameField.labels};for(let ve=0;ve<B.fields.length;ve++){const Ce=B.fields[ve],Ie=(0,te.CZ)(Ce,B),ke=Q.index[Ie];if(ke.handler&&ke.handler.key!==On.Label)continue;const je=Ce.values[W];je!=null&&(ae[Ie]=je)}return ae}function Vr({input:B,options:W,onChange:Q}){return B.length===0?null:s.createElement("div",null,s.createElement(on,{frame:B[0],mappings:W.mappings??[],onChange:ae=>Q({...W,mappings:ae}),withNameAndValue:!0}))}const Qa={id:Rs.id,editor:Vr,transformation:Rs,name:Rs.name,description:Rs.description,state:Le.BV.beta,categories:new Set([D.w.Reformat]),help:ge(Rs.id).helperDocs};var gr=e(1713),Gs=e(1853),Wn=e(10472),aa=e(7094),ya=e(10871),Ya=e(15830);const ws={id:se.W.spatial,name:"Spatial operations",description:"Apply spatial operations to query results.",defaultOptions:{},operator:B=>W=>W.pipe((0,br.z)(Q=>(0,Jr.D)(eo(Q,B))))};function as(B){return B.action===Wn.JJ.Modify&&B.modify?.op===Wn.ac.LineBuilder}async function eo(B,W){const Q=await(0,ya.cJ)(W.source);if(as(W)){const ae=await(0,ya.cJ)(W.modify?.target);return B.map(ve=>{const Ce=(0,ya.g6)(ve,Q),Ie=(0,ya.g6)(ve,ae);if(Ce.field&&Ie.field){const ke=[...ve.fields],je=(0,aa.Fh)(Ce.field,Ie.field),st=ke[0];return st.type===k.fS.geo&&st!==Ce.field&&st!==Ie.field?ke[0]=(0,aa.EK)(st,je):ke.unshift(je),{...ve,fields:ke}}return ve})}return B.map(ae=>{let ve=(0,ya.g6)(ae,Q);if(ve.field){if(W.action===Wn.JJ.Modify){switch(W.modify?.op){case Wn.ac.AsLine:let Ie=ve.field.name;return(!Ie||Ie==="Point")&&(Ie="Line"),{...ae,length:1,fields:[{...ve.field,name:Ie,type:k.fS.geo,values:[(0,Ya.Lp)(ve.field)]}]}}return ae}const Ce=ve.derived?[ve.field,...ae.fields]:ae.fields.slice(0);if(W.action===Wn.JJ.Calculate&&(Ce.push((0,Ya.N7)(ve.field,W.calculate??{})),ve.derived=!0),ve.derived)return{...ae,fields:Ce}}return ae})}const Es=(B,W)=>{const Q=W.options??{};B.addSelect({path:"action",name:"Action",description:"",defaultValue:Wn.JJ.Prepare,settings:{options:[{value:Wn.JJ.Prepare,label:"Prepare spatial field",description:"Set a geometry field based on the results of other fields"},{value:Wn.JJ.Calculate,label:"Calculate value",description:"Use the geometry to define a new field (heading/distance/area)"},{value:Wn.JJ.Modify,label:"Transform",description:"Apply spatial operations to the geometry"}]}}),Q.action===Wn.JJ.Calculate?B.addSelect({path:"calculate.calc",name:"Function",description:"",defaultValue:Wn.Ii.Heading,settings:{options:[{value:Wn.Ii.Heading,label:"Heading"},{value:Wn.Ii.Area,label:"Area"},{value:Wn.Ii.Distance,label:"Distance"}]}}):Q.action===Wn.JJ.Modify&&B.addSelect({path:"modify.op",name:"Operation",description:"",defaultValue:Wn.ac.AsLine,settings:{options:[{value:Wn.ac.AsLine,label:"As line",description:"Create a single line feature with a vertex at each row"},{value:Wn.ac.LineBuilder,label:"Line builder",description:"Create a line between two points"}]}}),as(Q)?(B.addNestedOptions({category:["Source"],path:"source",build:(ae,ve)=>{const Ce=Q.source??{mode:gr.q1.Auto};(0,Gs.C)("Point","",ae,Ce)}}),B.addNestedOptions({category:["Target"],path:"modify",build:(ae,ve)=>{const Ce=Q.modify?.target??{mode:gr.q1.Auto};(0,Gs.C)("Point","target.",ae,Ce)}})):(0,Gs.C)("Location","source.",B,Q.source)},So=B=>{(0,s.useEffect)(()=>{if(!B.options.source?.mode){const ae=it(Es);B.onChange({...ae,...B.options}),console.log("geometry useEffect",ae)}},[]);const W=_r((0,lt.l4)()),Q=tt(B,Es);return s.createElement("div",null,s.createElement("div",null,Q.items.map(ae=>ae.render())),s.createElement("div",null,Q.categories.map(ae=>s.createElement("div",{key:ae.props.id,className:W.wrap},s.createElement("h5",null,ae.props.title),s.createElement("div",{className:W.item},ae.items.map(ve=>ve.render()))))))},_r=B=>({wrap:(0,we.css)`
      margin-bottom: 20px;
    `,item:(0,we.css)`
      border-left: 4px solid ${B.colors.border.strong};
      padding-left: 10px;
    `}),ss={id:se.W.spatial,editor:So,transformation:ws,name:ws.name,description:ws.description,state:Le.BV.alpha,categories:new Set([D.w.PerformSpatialOperations]),help:ge(se.W.spatial).helperDocs};var Mr=e(24677);const Tr={id:se.W.timeSeriesTable,name:"Time series to table",description:"Convert time series data to table rows so that they can be viewed in tabular or sparkline format.",defaultOptions:{},isApplicable:B=>{for(const W of B)if((0,Mr.pP)(W))return _n.s.Applicable;return _n.s.NotApplicable},isApplicableDescription:"The Time series to table transformation requires at least one time series frame to function. You currently have none.",operator:B=>W=>W.pipe((0,hn.U)(Q=>fo(B,Q)))};function fo(B,W){const Q={},ae={},ve=[];let Ce=$l(W);for(const Ie of Object.keys(Ce)){const ke=W.filter(st=>st.refId===Ie);Q[Ie]={},ae[Ie]={};const je=[];ke.forEach(st=>{st.fields.forEach(gt=>{gt.type===k.fS.number&&gt.labels&&Object.keys(gt.labels).forEach(bt=>{je.includes(bt)||(ae[Ie][bt]=Ji(bt,k.fS.string),je.push(bt))})})});for(let st=0;st<ke.length;st++){const gt=ke[st];let bt=null,Vt=B[Ie]?.timeField;if(Vt&&Vt.length>0?bt=gt.fields.find(Ut=>Ut.name===Vt):bt=gt.fields.find(Ut=>(0,Mr.jM)(Ut)),!(0,Mr.pP)(gt)){ve.push(gt);continue}for(const Ut of gt.fields){if(Ut.type!==k.fS.number)continue;const Ot=B[Ie]?.stat??Kt.gz.lastNotNull,Gt=(0,Kt.Kx)({field:Ut,reducers:[Ot]})[Ot]??null,ln=new Lt.v;bt!==void 0&&(ln.addField(bt),ln.addField(Ut),Q[Ie][`Trend #${Ie}`]===void 0&&(Q[Ie][`Trend #${Ie}`]=Ji(`Trend #${Ie}`,k.fS.frame)),Q[Ie][`Trend #${Ie}`].values.push({...ln,value:Gt,length:Ut.values.length})),je.forEach(pa=>{ae[Ie][pa].values.push(Ut.labels?.[pa]??"")})}}}for(const Ie of Object.keys(Ce)){const ke={},je=new Lt.v;je.refId=Ie;const st=ae[Ie];if(st!==void 0)for(const[bt,Vt]of Object.entries(st))ke[bt]===void 0&&(ke[bt]=Vt);for(const bt of Object.values(ke))je.addField(bt);const gt=Q[Ie];for(const bt of Object.values(gt))je.addField(bt);je.fields.length>0&&ve.push(je)}return ve}function Ji(B,W){return{name:B,type:W,config:{},values:[]}}function $l(B){let W={};for(const Q of B)Q.refId!==void 0&&(W[Q.refId]===void 0?W[Q.refId]=1:W[Q.refId]++);return W}function zl({input:B,options:W,onChange:Q}){const ae=$l(B),ve=(0,s.useCallback)((ke,je)=>{const st=je?.value!==void 0?je.value:"";Q({...W,[ke]:{...W[ke],timeField:st}})},[Q,W]),Ce=(0,s.useCallback)((ke,je)=>{const st=je[0];st&&(0,Kt.CC)(st)&&Q({...W,[ke]:{...W[ke],stat:st}})},[Q,W]);let Ie=[];for(const ke of Object.keys(ae)){const je={},st=[];for(const gt of B)if(gt.refId===ke)for(const bt of gt.fields)(0,Mr.jM)(bt)&&(je[bt.name]=bt);for(const gt of Object.values(je)){const{name:bt}=gt;st.push({label:bt,value:bt})}Ie.push(s.createElement(De.Z,{key:ke},s.createElement(fe._,null,s.createElement(ns.W,null,`Trend #${ke}`)),s.createElement(fe._,{label:"Time field",tooltip:"The time field that will be used for the time series. If not selected the first found will be used."},s.createElement(Pe.Ph,{onChange:ve.bind(null,ke),options:st,value:W[ke]?.timeField,isClearable:!0})),s.createElement(fe._,{label:"Stat",tooltip:"The statistic that should be calculated for this time series."},s.createElement(It.m,{stats:[W[ke]?.stat??Kt.gz.lastNotNull],onChange:Ce.bind(null,ke),filterOptions:gt=>gt.id!==Kt.gz.allValues&&gt.id!==Kt.gz.uniqueValues}))))}return s.createElement(s.Fragment,null,Ie)}const Qc={id:Tr.id,editor:zl,transformation:Tr,name:Tr.name,description:Tr.description,state:Le.BV.beta,help:ge(Tr.id).helperDocs},Yc=()=>[Al,Mt,Ll,wo,Ee,Gi,cs,Os,cr,es,Ia,Bn,wl,fr,Oa,Qa,Xn,xa,Na,ss,Gc,xi,pt,Sa,mr,Fl,dt,...Y.config.featureToggles.formatString?[io]:[],...Y.config.featureToggles.regressionTransformation?[qs]:[],lo,Qc];function ku(){return new Promise(B=>require(["vs/language/kusto/monaco.contribution"],()=>B()))}function Hu(){return[{id:"kusto",name:"kusto",init:ku}]}var js=e(19310),$r=e(36752),Qs=e(30694),Zc=e(71690),zr=e(43183),kl=e(8958),rr=e(93349),Xi=e(81237),Fo=e(25142),Vs=e(23757),Jc=e(95454),Ka=e(95329),Jo=e(82426),Gu=e(19630),Hl=e(12043),Ii=e(60049),ju=e(94864);const Qu=()=>{const B=!!z.default.oauth;return{saml:{bgColor:"#464646",enabled:z.default.samlEnabled,name:z.default.samlName||ju.bm,icon:"key-skeleton-alt"},google:{bgColor:"#e84d3c",enabled:B&&!!z.default.oauth.google,name:z.default.oauth?.google?.name||"Google",icon:z.default.oauth?.google?.icon||"google"},azuread:{bgColor:"#2f2f2f",enabled:B&&!!z.default.oauth.azuread,name:z.default.oauth?.azuread?.name||"Microsoft",icon:z.default.oauth?.azuread?.icon||"microsoft"},github:{bgColor:"#464646",enabled:B&&!!z.default.oauth.github,name:z.default.oauth?.github?.name||"GitHub",icon:z.default.oauth?.github?.icon||"github"},gitlab:{bgColor:"#fc6d26",enabled:B&&!!z.default.oauth.gitlab,name:z.default.oauth?.gitlab?.name||"GitLab",icon:z.default.oauth?.gitlab?.icon||"gitlab"},grafanacom:{bgColor:"#262628",enabled:B&&!!z.default.oauth.grafana_com,name:z.default.oauth?.grafana_com?.name||"Grafana.com",icon:z.default.oauth?.grafana_com?.icon||"grafana",hrefName:"grafana_com"},okta:{bgColor:"#2f2f2f",enabled:B&&!!z.default.oauth.okta,name:z.default.oauth?.okta?.name||"Okta",icon:z.default.oauth?.okta?.icon||"okta"},oauth:{bgColor:"#262628",enabled:B&&!!z.default.oauth.generic_oauth,name:z.default.oauth?.generic_oauth?.name||"OAuth",icon:z.default.oauth?.generic_oauth?.icon||"signin",hrefName:"generic_oauth"}}},Xc=B=>({button:(0,we.css)({color:"#d8d9da",position:"relative"}),buttonIcon:(0,we.css)({position:"absolute",left:B.spacing(1),top:"50%",transform:"translateY(-50%)"}),divider:{base:(0,we.css)({color:B.colors.text.primary,display:"flex",marginBottom:B.spacing(1),justifyContent:"space-between",textAlign:"center",width:"100%"}),line:(0,we.css)({width:100,height:10,borderBottom:`1px solid ${B.colors.text}`})}}),Yu=()=>{const B=(0,lt.wW)(Xc);return s.createElement(s.Fragment,null,s.createElement("div",{className:B.divider.base},s.createElement("div",null,s.createElement("div",{className:B.divider.line})),s.createElement("div",null,s.createElement("span",null,!z.default.disableLoginForm&&s.createElement("span",null,"or"))),s.createElement("div",null,s.createElement("div",{className:B.divider.line}))),s.createElement("div",{className:"clearfix"}))};function Zu(B,W,Q){return(0,we.cx)(W.button,(0,we.css)({backgroundColor:B.bgColor,color:Q.colors.getContrastText(B.bgColor),["&:hover"]:{backgroundColor:Q.colors.emphasize(B.bgColor,.15),boxShadow:Q.shadows.z1}}))}const Ju=()=>{const B=(0,h.pickBy)(Qu(),ve=>ve.enabled),W=Object.keys(B).length>0,Q=(0,lt.l4)(),ae=(0,lt.wW)(Xc);return W?s.createElement(Ma.wc,null,s.createElement(Yu,null),Object.entries(B).map(([ve,Ce])=>s.createElement(ue.Qj,{key:ve,className:Zu(Ce,ae,Q),href:`login/${Ce.hrefName?Ce.hrefName:ve}`,target:"_self",fullWidth:!0},s.createElement(ka.J,{className:ae.buttonIcon,name:Ce.icon}),"Sign in with ",Ce.name))):null},Xu=()=>{const B=(0,z.iE)().verifyEmailEnabled?`${(0,z.iE)().appSubUrl}/verify`:`${(0,z.iE)().appSubUrl}/signup`,W=(0,we.css)({paddingTop:"16px"});return s.createElement(Ma.wc,null,s.createElement("div",{className:W},"New to Grafana?"),s.createElement(ue.Qj,{className:(0,we.css)({width:"100%",justifyContent:"center"}),href:B,variant:"secondary",fill:"outline"},"Sign up"))},Ri=()=>{const B=(0,lt.wW)(qu);return document.title=Jc.c.AppTitle,s.createElement(Gu.Z,null,({loginHint:W,passwordHint:Q,disableLoginForm:ae,disableUserSignUp:ve,login:Ce,isLoggingIn:Ie,changePassword:ke,skipPasswordChange:je,isChangingPassword:st,showDefaultPasswordWarning:gt,loginErrorMessage:bt})=>s.createElement(Ii.dd,{isChangingPassword:st},!st&&s.createElement(Ii.$s,null,bt&&s.createElement(yr.b,{className:B.alert,severity:"error",title:(0,Ka.t)("login.error.title","Login failed")},bt),!ae&&s.createElement(Hl.U,{onSubmit:Ce,loginHint:W,passwordHint:Q,isLoggingIn:Ie},s.createElement(Ma.Lh,{justify:"flex-end"},s.createElement(ue.Qj,{className:B.forgottenPassword,fill:"text",href:`${z.default.appSubUrl}/user/password/send-reset-email`},"Forgot your password?"))),s.createElement(Ju,null),!ve&&s.createElement(Xu,null)),st&&s.createElement(Ii.$s,null,s.createElement(Jo.G,{showDefaultPasswordWarning:gt,onSubmit:ke,onSkip:()=>je()}))))},qu=B=>({forgottenPassword:(0,we.css)({padding:0,marginTop:B.spacing(.5)}),alert:(0,we.css)({width:"100%"})});var Cr=e(20989),qc=e(6119),qi=e(72435);function Ai({description:B,text:W,url:Q}){const ae=(0,lt.wW)(em);return s.createElement(qi.Z,{className:ae.card,href:Q},s.createElement(qi.Z.Heading,null,W),s.createElement(qi.Z.Description,{className:ae.description},B))}const em=B=>({card:(0,we.css)({marginBottom:0,gridTemplateRows:"1fr 0 2fr"}),description:(0,we.css)({WebkitLineClamp:3,WebkitBoxOrient:"vertical",display:"-webkit-box",overflow:"hidden"})});function go({navId:B,header:W}){const{node:Q}=(0,qc.q)(B),ae=(0,lt.wW)(Ko),ve=Q.children?.filter(Ce=>!Ce.hideFromTabs);return s.createElement(Cr.T,{navId:Q.id},s.createElement(Cr.T.Contents,null,s.createElement("div",{className:ae.content},W,ve&&ve.length>0&&s.createElement("section",{className:ae.grid},ve?.map(Ce=>s.createElement(Ai,{key:Ce.id,description:Ce.subTitle,text:Ce.text,url:Ce.url??""}))))))}const Ko=B=>({content:(0,we.css)({display:"flex",flexDirection:"column",gap:B.spacing(2)}),grid:(0,we.css)({display:"grid",gap:B.spacing(3),gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gridAutoRows:"138px",padding:B.spacing(2,0)})});var mi=e(5836),ed=e(1225);function tm(){return s.createElement(Cr.T,{navId:"home",layout:mi.Q.Canvas,pageNav:{text:"Page not found"}},s.createElement(ed.j,{entity:"Page"}))}var As=e(41879),td=e(11855),Xa=e(49683),En=e(95162),nd=e(12537);const xo="dddd YYYY-MM-DD HH:mm zz",nm="/admin/authentication/ldap";class kr extends s.PureComponent{constructor(){super(...arguments),this.onUserSync=()=>{this.props.onUserSync()}}render(){const{ldapSyncInfo:W,user:Q}=this.props,ve=W&&W.nextSync?(0,nd.dq)(W.nextSync,{format:xo}):"",Ce=`${nm}?user=${Q&&Q.login}`,Ie=Xa.Vt.hasPermission(En.AccessControlAction.LDAPUsersRead),ke=Xa.Vt.hasPermission(En.AccessControlAction.LDAPUsersSync);return s.createElement(s.Fragment,null,s.createElement("h3",{className:"page-heading"},"LDAP Synchronisation"),s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",null,"External sync"),s.createElement("td",null,"User synced via LDAP. Some changes must be done in LDAP or mappings."),s.createElement("td",null,s.createElement("span",{className:"label label-tag"},"LDAP"))),s.createElement("tr",null,W.enabled?s.createElement(s.Fragment,null,s.createElement("td",null,"Next scheduled synchronization"),s.createElement("td",{colSpan:2},ve)):s.createElement(s.Fragment,null,s.createElement("td",null,"Next scheduled synchronization"),s.createElement("td",{colSpan:2},"Not enabled")))))),s.createElement("div",{className:"gf-form-button-row"},ke&&s.createElement(ue.zx,{variant:"secondary",onClick:this.onUserSync},"Sync user"),Ie&&s.createElement(ue.Qj,{variant:"secondary",href:Ce},"Debug LDAP Mapping"))))}}var xs=e(33808),el=e(16783),ad=e(7288),fi=e(20519),ho=e(14607),_s=e(84184),Gl=e(80932),am=e(85954);function sm({onSelected:B,className:W,inputId:Q,autoFocus:ae,excludeOrgs:ve}){(0,s.useEffect)(()=>{ae&&Q&&document.getElementById(Q)?.focus()},[ae,Q]);const[Ce,Ie]=(0,am.Z)(async()=>{const je=(await(0,R.i)().get("/api/orgs")).map(st=>({value:{id:st.id,name:st.name},label:st.name}));if(ve){let st=ve.map(bt=>bt.orgId);return je.filter(bt=>!st.includes(bt.value.id))}else return je});return s.createElement(Pe.qb,{inputId:Q,className:W,isLoading:Ce.loading,defaultOptions:!0,isSearchable:!1,loadOptions:Ie,onChange:B,placeholder:"Select organization",noOptionsMessage:"No organizations found"})}var rm=e(95831);class om extends s.PureComponent{constructor(){super(...arguments),this.addToOrgButtonRef=s.createRef(),this.state={showAddOrgModal:!1},this.showOrgAddModal=()=>{this.setState({showAddOrgModal:!0})},this.dismissOrgAddModal=()=>{this.setState({showAddOrgModal:!1},()=>{this.addToOrgButtonRef.current?.focus()})}}render(){const{user:W,orgs:Q,isExternalUser:ae,onOrgRoleChange:ve,onOrgRemove:Ce,onOrgAdd:Ie}=this.props,{showAddOrgModal:ke}=this.state,je=(0,we.css)`
      margin-top: 0.8rem;
    `,st=Xa.Vt.hasPermission(En.AccessControlAction.OrgUsersAdd)&&!ae;return s.createElement(s.Fragment,null,s.createElement("h3",{className:"page-heading"},"Organizations"),s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("tbody",null,Q.map((gt,bt)=>s.createElement(cm,{key:`${gt.orgId}-${bt}`,isExternalUser:ae,user:W,org:gt,onOrgRoleChange:ve,onOrgRemove:Ce}))))),s.createElement("div",{className:je},st&&s.createElement(ue.zx,{variant:"secondary",onClick:this.showOrgAddModal,ref:this.addToOrgButtonRef},"Add user to organization")),s.createElement(um,{user:W,userOrgs:Q,isOpen:ke,onOrgAdd:Ie,onDismiss:this.dismissOrgAddModal})))}}const im=(0,xs.B)(B=>({removeButton:(0,we.css)`
      margin-right: 0.6rem;
      text-decoration: underline;
      color: ${B.v1.palette.blue95};
    `,label:(0,we.css)`
      font-weight: 500;
    `,disabledTooltip:(0,we.css)`
      display: flex;
    `,tooltipItem:(0,we.css)`
      margin-left: 5px;
    `,tooltipItemLink:(0,we.css)`
      color: ${B.v1.palette.blue95};
    `,rolePickerWrapper:(0,we.css)`
      display: flex;
    `,rolePicker:(0,we.css)`
      flex: auto;
      margin-right: ${B.spacing(1)};
    `}));class lm extends s.PureComponent{constructor(){super(...arguments),this.state={currentRole:this.props.org.role,isChangingRole:!1,roleOptions:[]},this.onOrgRemove=async()=>{const{org:W}=this.props;this.props.onOrgRemove(W.orgId)},this.onChangeRoleClick=()=>{const{org:W}=this.props;this.setState({isChangingRole:!0,currentRole:W.role})},this.onOrgRoleChange=W=>{this.setState({currentRole:W})},this.onOrgRoleSave=()=>{this.props.onOrgRoleChange(this.props.org.orgId,this.state.currentRole)},this.onCancelClick=()=>{this.setState({isChangingRole:!1})},this.onBasicRoleChange=W=>{this.props.onOrgRoleChange(this.props.org.orgId,W)}}componentDidMount(){Xa.Vt.licensedAccessControlEnabled()&&Xa.Vt.hasPermission(En.AccessControlAction.ActionRolesList)&&(0,Gl.ul)(this.props.org.orgId).then(W=>this.setState({roleOptions:W})).catch(W=>console.error(W))}render(){const{user:W,org:Q,isExternalUser:ae,theme:ve}=this.props,Ce=W?.authLabels?.length&&W?.authLabels[0],Ie=Ce?`Synced via ${Ce}`:"",{currentRole:ke,isChangingRole:je}=this.state,st=im(ve),gt=(0,we.cx)("width-16",st.label),bt=Xa.Vt.hasPermission(En.AccessControlAction.OrgUsersWrite),Vt=Xa.Vt.hasPermission(En.AccessControlAction.OrgUsersRemove)&&!ae,Ut=ae||!bt,Ot=`${Q.name}-input`;return s.createElement("tr",null,s.createElement("td",{className:gt},s.createElement("label",{htmlFor:Ot},Q.name)),Xa.Vt.licensedAccessControlEnabled()?s.createElement("td",null,s.createElement("div",{className:st.rolePickerWrapper},s.createElement("div",{className:st.rolePicker},s.createElement(_s.R,{userId:W?.id||0,orgId:Q.orgId,basicRole:Q.role,roleOptions:this.state.roleOptions,onBasicRoleChange:this.onBasicRoleChange,basicRoleDisabled:Ut,basicRoleDisabledMessage:`This user's role is not editable because it is synchronized from your auth provider.
                    Refer to the Grafana authentication docs for details.`})),ae&&s.createElement(sd,{lockMessage:Ie}))):s.createElement(s.Fragment,null,je?s.createElement("td",null,s.createElement(rm.A,{inputId:Ot,value:ke,onChange:this.onOrgRoleChange,autoFocus:!0})):s.createElement("td",{className:"width-25"},Q.role),s.createElement("td",{colSpan:1},s.createElement("div",{className:"pull-right"},bt&&s.createElement(Fs,{lockMessage:Ie,isExternalUser:ae,onChangeRoleClick:this.onChangeRoleClick,onCancelClick:this.onCancelClick,onOrgRoleSave:this.onOrgRoleSave})))),s.createElement("td",{colSpan:1},s.createElement("div",{className:"pull-right"},Vt&&s.createElement(el.p,{confirmText:"Confirm removal",confirmVariant:"destructive",onCancel:this.onCancelClick,onConfirm:this.onOrgRemove,autoFocus:!0},"Remove from organization"))))}}const cm=(0,lt.HE)(lm),dm=(0,xs.B)(()=>({modal:(0,we.css)`
    width: 500px;
  `,buttonRow:(0,we.css)`
    text-align: center;
  `,modalContent:(0,we.css)`
    overflow: visible;
  `}));class um extends s.PureComponent{constructor(){super(...arguments),this.state={selectedOrg:null,role:En.OrgRole.Viewer,roleOptions:[],pendingOrgId:null,pendingUserId:null,pendingRoles:[]},this.onOrgSelect=W=>{const Q=this.props.userOrgs.find(ae=>ae.orgId===W.value?.id);this.setState({selectedOrg:W.value,role:Q?.role||En.OrgRole.Viewer}),Xa.Vt.licensedAccessControlEnabled()&&Xa.Vt.hasPermission(En.AccessControlAction.ActionRolesList)&&(0,Gl.ul)(W.value?.id).then(ae=>this.setState({roleOptions:ae})).catch(ae=>console.error(ae))},this.onOrgRoleChange=W=>{this.setState({role:W})},this.onAddUserToOrg=async()=>{const{selectedOrg:W,role:Q}=this.state;this.props.onOrgAdd(W.id,Q),Xa.Vt.licensedAccessControlEnabled()&&Xa.Vt.hasPermission(En.AccessControlAction.ActionUserRolesAdd)&&this.state.pendingUserId&&(await(0,Gl.hB)(this.state.pendingRoles,this.state.pendingUserId,this.state.pendingOrgId),this.setState({pendingOrgId:null,pendingRoles:[],pendingUserId:null}))},this.onCancel=()=>{this.setState({selectedOrg:null,pendingRoles:[],pendingOrgId:null,pendingUserId:null}),this.props.onDismiss&&this.props.onDismiss()},this.onRoleUpdate=async(W,Q,ae)=>{this.setState({pendingRoles:W,pendingOrgId:ae,pendingUserId:Q})}}render(){const{isOpen:W,user:Q,userOrgs:ae}=this.props,{role:ve,roleOptions:Ce,selectedOrg:Ie}=this.state,ke=dm();return s.createElement(ad.u,{className:ke.modal,contentClassName:ke.modalContent,title:"Add to an organization",isOpen:W,onDismiss:this.onCancel},s.createElement(fi.g,{label:"Organization"},s.createElement(sm,{inputId:"new-org-input",onSelected:this.onOrgSelect,excludeOrgs:ae,autoFocus:!0})),s.createElement(fi.g,{label:"Role",disabled:Ie===null},s.createElement(_s.R,{userId:Q?.id||0,orgId:Ie?.id,basicRole:ve,onBasicRoleChange:this.onOrgRoleChange,basicRoleDisabled:!1,roleOptions:Ce,apply:!0,onApplyRoles:this.onRoleUpdate,pendingRoles:this.state.pendingRoles})),s.createElement(ad.u.ButtonRow,null,s.createElement(Ma.Lh,{spacing:"md",justify:"center"},s.createElement(ue.zx,{variant:"secondary",fill:"outline",onClick:this.onCancel},"Cancel"),s.createElement(ue.zx,{variant:"primary",disabled:Ie===null,onClick:this.onAddUserToOrg},"Add to organization"))))}}const Ws=B=>({disabledTooltip:(0,we.css)`
    display: flex;
  `,tooltipItemLink:(0,we.css)`
    color: ${B.v1.palette.blue95};
  `,lockMessageClass:(0,we.css)`
    font-style: italic;
    margin-left: 1.8rem;
    margin-right: 0.6rem;
  `,icon:(0,we.css)`
    line-height: 2;
  `});function Fs({lockMessage:B,onChangeRoleClick:W,isExternalUser:Q,onOrgRoleSave:ae,onCancelClick:ve}){const Ce=(0,lt.wW)(Ws);return s.createElement("div",{className:Ce.disabledTooltip},Q?s.createElement(s.Fragment,null,s.createElement("span",{className:Ce.lockMessageClass},B),s.createElement(ho.u,{placement:"right-end",interactive:!0,content:s.createElement("div",null,"This user's role is not editable because it is synchronized from your auth provider. Refer to the\xA0",s.createElement("a",{className:Ce.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},s.createElement("div",{className:Ce.icon},s.createElement(ka.J,{name:"question-circle"})))):s.createElement(el.p,{confirmText:"Save",onClick:W,onCancel:ve,onConfirm:ae,disabled:Q},"Change role"))}const sd=({lockMessage:B})=>{const W=(0,lt.wW)(mm);return s.createElement("div",{className:W.disabledTooltip},s.createElement("span",{className:W.lockMessageClass},B),s.createElement(ho.u,{placement:"right-end",interactive:!0,content:s.createElement("div",null,"This user's built-in role is not editable because it is synchronized from your auth provider. Refer to the\xA0",s.createElement("a",{className:W.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer noopener",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},s.createElement(ka.J,{name:"question-circle"})))},mm=B=>({disabledTooltip:(0,we.css)`
    display: flex;
  `,tooltipItemLink:(0,we.css)`
    color: ${B.v1.palette.blue95};
  `,lockMessageClass:(0,we.css)`
    font-style: italic;
    margin-left: 1.8rem;
    margin-right: 0.6rem;
  `}),rd=[{label:"Yes",value:!0},{label:"No",value:!1}];function fm({isGrafanaAdmin:B,isExternalUser:W,lockMessage:Q,onGrafanaAdminChange:ae}){const[ve,Ce]=(0,s.useState)(!1),[Ie,ke]=(0,s.useState)(B),je=()=>Ce(!0),st=()=>{Ce(!1),ke(B)},gt=()=>ae(Ie),bt=Xa.Vt.hasPermission(En.AccessControlAction.UsersPermissionsUpdate)&&!W,Vt=(0,lt.wW)(gm);return s.createElement(s.Fragment,null,s.createElement("h3",{className:"page-heading"},"Permissions"),s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",{className:"width-16"},"Grafana Admin"),ve?s.createElement("td",{colSpan:2},s.createElement(ie.S,{options:rd,value:Ie,onChange:ke,autoFocus:!0})):s.createElement("td",{colSpan:2},B?s.createElement(s.Fragment,null,s.createElement(ka.J,{name:"shield"})," Yes"):s.createElement(s.Fragment,null,"No")),s.createElement("td",null,bt&&s.createElement(el.p,{onClick:je,onConfirm:gt,onCancel:st,confirmText:"Change"},"Change"),W&&s.createElement("div",{className:Vt.lockMessageClass},s.createElement(sd,{lockMessage:Q})))))))))}const gm=B=>({lockMessageClass:(0,we.css)`
    display: flex;
    justify-content: flex-end;
    font-style: italic;
    margin-right: ${B.spacing(.6)};
  `});var Hr=e(77980),jl=e(56152);function hm({user:B,onUserUpdate:W,onUserDelete:Q,onUserDisable:ae,onUserEnable:ve,onPasswordChange:Ce}){const[Ie,ke]=(0,s.useState)(!1),[je,st]=(0,s.useState)(!1),gt=(0,s.useRef)(null),bt=Lo=>()=>{ke(Lo),!Lo&&gt.current&&gt.current.focus()},Vt=(0,s.useRef)(null),Ut=Lo=>()=>{st(Lo),!Lo&&Vt.current&&Vt.current.focus()},Ot=()=>Q(B.id),Gt=()=>ae(B.id),ln=()=>ve(B.id),pa=Lo=>{W({...B,name:Lo})},Ca=Lo=>{W({...B,email:Lo})},ca=Lo=>{W({...B,login:Lo})},$a=B.authLabels?.length&&B.authLabels[0],lr=$a?`Synced via ${$a}`:"",Di=B.isExternal||!Xa.Vt.hasPermissionInMetadata(En.AccessControlAction.UsersWrite,B),gb=B.isExternal||!Xa.Vt.hasPermissionInMetadata(En.AccessControlAction.UsersPasswordUpdate,B),hb=Xa.Vt.hasPermissionInMetadata(En.AccessControlAction.UsersDelete,B),pb=Xa.Vt.hasPermissionInMetadata(En.AccessControlAction.UsersDisable,B),vb=Xa.Vt.hasPermissionInMetadata(En.AccessControlAction.UsersEnable,B);return s.createElement(s.Fragment,null,s.createElement("h3",{className:"page-heading"},"User information"),s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("tbody",null,s.createElement(Li,{label:"Name",value:B.name,locked:Di,lockMessage:lr,onChange:pa}),s.createElement(Li,{label:"Email",value:B.email,locked:Di,lockMessage:lr,onChange:Ca}),s.createElement(Li,{label:"Username",value:B.login,locked:Di,lockMessage:lr,onChange:ca}),s.createElement(Li,{label:"Password",value:"********",inputType:"password",locked:gb,lockMessage:lr,onChange:Ce})))),s.createElement("div",{className:tl.buttonRow},hb&&s.createElement(s.Fragment,null,s.createElement(ue.zx,{variant:"destructive",onClick:bt(!0),ref:gt},"Delete user"),s.createElement(Hr.s,{isOpen:Ie,title:"Delete user",body:"Are you sure you want to delete this user?",confirmText:"Delete user",onConfirm:Ot,onDismiss:bt(!1)})),B.isDisabled&&vb&&s.createElement(ue.zx,{variant:"secondary",onClick:ln},"Enable user"),!B.isDisabled&&pb&&s.createElement(s.Fragment,null,s.createElement(ue.zx,{variant:"secondary",onClick:Ut(!0),ref:Vt},"Disable user"),s.createElement(Hr.s,{isOpen:je,title:"Disable user",body:"Are you sure you want to disable this user?",confirmText:"Disable user",onConfirm:Gt,onDismiss:Ut(!1)})))))}const tl={buttonRow:(0,we.css)`
    margin-top: 0.8rem;
    > * {
      margin-right: 16px;
    }
  `};class Li extends s.PureComponent{constructor(){super(...arguments),this.state={editing:!1,value:this.props.value||""},this.setInputElem=W=>{this.inputElem=W},this.onEditClick=()=>{this.props.inputType==="password"?this.setState({editing:!0,value:""},this.focusInput):this.setState({editing:!0},this.focusInput)},this.onCancelClick=()=>{this.setState({editing:!1,value:this.props.value||""})},this.onInputChange=(W,Q)=>{Q!==jl.G.Invalid&&this.setState({value:W.target.value})},this.onInputBlur=(W,Q)=>{Q!==jl.G.Invalid&&this.setState({value:W.target.value})},this.focusInput=()=>{this.inputElem&&this.inputElem.focus&&this.inputElem.focus()},this.onSave=()=>{this.props.onChange&&this.props.onChange(this.state.value)}}render(){const{label:W,locked:Q,lockMessage:ae,inputType:ve}=this.props,{value:Ce}=this.state,Ie=(0,we.cx)("width-16",(0,we.css)`
        font-weight: 500;
      `);if(Q)return s.createElement(pm,{label:W,value:Ce,lockMessage:ae});const ke=`${W}-input`;return s.createElement("tr",null,s.createElement("td",{className:Ie},s.createElement("label",{htmlFor:ke},W)),s.createElement("td",{className:"width-25",colSpan:2},this.state.editing?s.createElement(ct.I,{id:ke,type:ve,defaultValue:Ce,onBlur:this.onInputBlur,onChange:this.onInputChange,ref:this.setInputElem,width:30}):s.createElement("span",null,this.props.value)),s.createElement("td",null,s.createElement(el.p,{confirmText:"Save",onClick:this.onEditClick,onConfirm:this.onSave,onCancel:this.onCancelClick},"Edit")))}}Li.defaultProps={value:"",locked:!1,lockMessage:"",inputType:"text"};const pm=({label:B,value:W,lockMessage:Q})=>{const ae=(0,we.css)`
    font-style: italic;
    margin-right: 0.6rem;
  `,ve=(0,we.cx)("width-16",(0,we.css)`
      font-weight: 500;
    `);return s.createElement("tr",null,s.createElement("td",{className:ve},B),s.createElement("td",{className:"width-25",colSpan:2},W),s.createElement("td",null,s.createElement("span",{className:ae},Q)))};class vm extends s.PureComponent{constructor(){super(...arguments),this.forceAllLogoutButton=s.createRef(),this.state={showLogoutModal:!1},this.showLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!0})},this.dismissLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!1},()=>{this.forceAllLogoutButton.current?.focus()})},this.onSessionRevoke=W=>()=>{this.props.onSessionRevoke(W)},this.onAllSessionsRevoke=()=>{this.setState({showLogoutModal:!1}),this.props.onAllSessionsRevoke()}}render(){const{sessions:W}=this.props,{showLogoutModal:Q}=this.state,ae=(0,we.css)`
      margin-top: 0.8rem;
    `,ve=Xa.Vt.hasPermission(En.AccessControlAction.UsersLogout);return s.createElement(s.Fragment,null,s.createElement("h3",{className:"page-heading"},"Sessions"),s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",null,"Last seen"),s.createElement("th",null,"Logged on"),s.createElement("th",null,"IP address"),s.createElement("th",{colSpan:2},"Browser and OS"))),s.createElement("tbody",null,W&&W.map((Ce,Ie)=>s.createElement("tr",{key:`${Ce.id}-${Ie}`},s.createElement("td",null,Ce.isActive?"Now":Ce.seenAt),s.createElement("td",null,(0,Ka.$q)(Ce.createdAt,{dateStyle:"long"})),s.createElement("td",null,Ce.clientIp),s.createElement("td",null,`${Ce.browser} on ${Ce.os} ${Ce.osVersion}`),s.createElement("td",null,s.createElement("div",{className:"pull-right"},ve&&s.createElement(el.p,{confirmText:"Confirm logout",confirmVariant:"destructive",onConfirm:this.onSessionRevoke(Ce.id),autoFocus:!0},"Force logout")))))))),s.createElement("div",{className:ae},ve&&W.length>0&&s.createElement(ue.zx,{variant:"secondary",onClick:this.showLogoutConfirmationModal,ref:this.forceAllLogoutButton},"Force logout from all devices"),s.createElement(Hr.s,{isOpen:Q,title:"Force logout from all devices",body:"Are you sure you want to force logout from all devices?",confirmText:"Force logout",onConfirm:this.onAllSessionsRevoke,onDismiss:this.dismissLogoutConfirmationModal}))))}}const Em=vm;var er=e(72634);class od extends s.PureComponent{constructor(){super(...arguments),this.onUserUpdate=W=>{this.props.updateUser(W)},this.onPasswordChange=W=>{const{user:Q,setUserPassword:ae}=this.props;Q&&ae(Q.id,W)},this.onUserDelete=W=>{this.props.deleteUser(W)},this.onUserDisable=W=>{this.props.disableUser(W)},this.onUserEnable=W=>{this.props.enableUser(W)},this.onGrafanaAdminChange=W=>{const{user:Q,updateUserPermissions:ae}=this.props;Q&&ae(Q.id,W)},this.onOrgRemove=W=>{const{user:Q,deleteOrgUser:ae}=this.props;Q&&ae(Q.id,W)},this.onOrgRoleChange=(W,Q)=>{const{user:ae,updateOrgUserRole:ve}=this.props;ae&&ve(ae.id,W,Q)},this.onOrgAdd=(W,Q)=>{const{user:ae,addOrgUser:ve}=this.props;ae&&ve(ae,W,Q)},this.onSessionRevoke=W=>{const{user:Q,revokeSession:ae}=this.props;Q&&ae(W,Q.id)},this.onAllSessionsRevoke=()=>{const{user:W,revokeAllSessions:Q}=this.props;W&&Q(W.id)},this.onUserSync=()=>{const{user:W,syncLdapUser:Q}=this.props;W&&Q(W.id)}}async componentDidMount(){const{match:W,loadAdminUserPage:Q}=this.props;Q(parseInt(W.params.id,10))}render(){const{user:W,orgs:Q,sessions:ae,ldapSyncInfo:ve,isLoading:Ce}=this.props,Ie=W?.isExternal&&W?.authLabels?.includes("LDAP"),ke=Xa.Vt.hasPermission(En.AccessControlAction.UsersAuthTokenList),je=Xa.Vt.hasPermission(En.AccessControlAction.LDAPStatusRead),st=W?.authLabels?.[0],gt=st?`Synced via ${st}`:"",bt={text:W?.login??"",icon:"shield",subTitle:"Manage settings for an individual user."};return s.createElement(Cr.T,{navId:"global-users",pageNav:bt},s.createElement(Cr.T.Contents,{isLoading:Ce},W&&s.createElement(s.Fragment,null,s.createElement(hm,{user:W,onUserUpdate:this.onUserUpdate,onUserDelete:this.onUserDelete,onUserDisable:this.onUserDisable,onUserEnable:this.onUserEnable,onPasswordChange:this.onPasswordChange}),Ie&&W?.isExternallySynced&&(0,td.v)("ldapsync")&&ve&&je&&s.createElement(kr,{ldapSyncInfo:ve,user:W,onUserSync:this.onUserSync}),s.createElement(fm,{isGrafanaAdmin:W.isGrafanaAdmin,isExternalUser:W?.isGrafanaAdminExternallySynced,lockMessage:gt,onGrafanaAdminChange:this.onGrafanaAdminChange})),Q&&s.createElement(om,{user:W,orgs:Q,isExternalUser:W?.isExternallySynced,onOrgRemove:this.onOrgRemove,onOrgRoleChange:this.onOrgRoleChange,onOrgAdd:this.onOrgAdd}),ae&&ke&&s.createElement(Em,{sessions:ae,onSessionRevoke:this.onSessionRevoke,onAllSessionsRevoke:this.onAllSessionsRevoke})))}}const Ys=B=>({user:B.userAdmin.user,sessions:B.userAdmin.sessions,orgs:B.userAdmin.orgs,ldapSyncInfo:B.ldap.syncInfo,isLoading:B.userAdmin.isLoading,error:B.userAdmin.error}),ym={loadAdminUserPage:er.PK,updateUser:er.Nq,setUserPassword:er.tQ,disableUser:er.B9,enableUser:er.Dx,deleteUser:er.h8,updateUserPermissions:er.Xx,addOrgUser:er.bN,updateOrgUserRole:er.Jk,deleteOrgUser:er.uV,revokeSession:er._1,revokeAllSessions:er.Fm,syncLdapUser:er.CP},bm=(0,$r.connect)(Ys,ym)(od);var Dm=e(66596);const Cm=({ldapConnectionInfo:B})=>s.createElement(s.Fragment,null,s.createElement("h3",{className:"page-heading"},"LDAP Connection"),s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",null,"Host"),s.createElement("th",{colSpan:2},"Port"))),s.createElement("tbody",null,B&&B.map((W,Q)=>s.createElement("tr",{key:Q},s.createElement("td",null,W.host),s.createElement("td",null,W.port),s.createElement("td",null,W.available?s.createElement(ka.J,{name:"check",className:"pull-right"}):s.createElement(ka.J,{name:"exclamation-triangle",className:"pull-right"}))))))),s.createElement("div",{className:"gf-form-group"},s.createElement(Pm,{ldapConnectionInfo:B})))),Pm=({ldapConnectionInfo:B})=>{if(!B.some(ve=>ve.error))return null;const Q=[];B.forEach(ve=>{ve.error&&Q.push(ve)});const ae=Q.map((ve,Ce)=>s.createElement("div",{key:Ce},s.createElement("span",{style:{fontWeight:500}},ve.host,":",ve.port,s.createElement("br",null)),s.createElement("span",null,ve.error),Ce!==Q.length-1&&s.createElement(s.Fragment,null,s.createElement("br",null),s.createElement("br",null))));return s.createElement(yr.b,{title:"Connection error",severity:En.AppNotificationSeverity.Error},ae)};var id=e(75682);const Sm="dddd YYYY-MM-DD HH:mm zz";class xm extends s.PureComponent{constructor(){super(...arguments),this.state={isSyncing:!1},this.handleSyncClick=()=>{this.setState({isSyncing:!this.state.isSyncing})}}render(){const{ldapSyncInfo:W}=this.props,{isSyncing:Q}=this.state,ae=(0,nd.dq)(W.nextSync,{format:Sm});return s.createElement(s.Fragment,null,s.createElement("h3",{className:"page-heading"},"LDAP Synchronisation",s.createElement(ue.zx,{className:"pull-right",onClick:this.handleSyncClick,hidden:!0},s.createElement("span",{className:"btn-title"},"Bulk-sync now"),Q&&s.createElement(id.$,{inline:!0}))),s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",null,"Active synchronisation"),s.createElement("td",{colSpan:2},W.enabled?"Enabled":"Disabled")),s.createElement("tr",null,s.createElement("td",null,"Scheduled"),s.createElement("td",null,W.schedule)),s.createElement("tr",null,s.createElement("td",null,"Next scheduled synchronisation"),s.createElement("td",null,ae)))))))}}const Mm=({groups:B,showAttributeMapping:W})=>{const Q=W?B:B.filter(ae=>ae.orgRole);return s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("thead",null,s.createElement("tr",null,W&&s.createElement("th",null,"LDAP Group"),s.createElement("th",null,"Organization",s.createElement(ho.u,{placement:"top",content:"Only the first match for an Organization will be used",theme:"info"},s.createElement(ka.J,{name:"info-circle"}))),s.createElement("th",null,"Role"))),s.createElement("tbody",null,Q.map((ae,ve)=>s.createElement("tr",{key:`${ae.orgId}-${ve}`},W&&s.createElement("td",null,ae.groupDN),ae.orgName&&ae.orgRole?s.createElement("td",null,ae.orgName):s.createElement("td",null),ae.orgRole?s.createElement("td",null,ae.orgRole):s.createElement("td",null,s.createElement("span",{className:"text-warning"},"No match"),s.createElement(ho.u,{placement:"top",content:"No matching groups found",theme:"info"},s.createElement(ka.J,{name:"info-circle"})))))))))},Ql=({info:B,showAttributeMapping:W})=>s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",{colSpan:2},"User information"),W&&s.createElement("th",null,"LDAP attribute"))),s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",{className:"width-16"},"First name"),s.createElement("td",null,B.name.ldapValue),W&&s.createElement("td",null,B.name.cfgAttrValue)),s.createElement("tr",null,s.createElement("td",{className:"width-16"},"Surname"),s.createElement("td",null,B.surname.ldapValue),W&&s.createElement("td",null,B.surname.cfgAttrValue)),s.createElement("tr",null,s.createElement("td",{className:"width-16"},"Username"),s.createElement("td",null,B.login.ldapValue),W&&s.createElement("td",null,B.login.cfgAttrValue)),s.createElement("tr",null,s.createElement("td",{className:"width-16"},"Email"),s.createElement("td",null,B.email.ldapValue),W&&s.createElement("td",null,B.email.cfgAttrValue)))))),Tm=({permissions:B})=>s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",{colSpan:1},"Permissions"))),s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",{className:"width-16"}," Grafana admin"),s.createElement("td",null,B.isGrafanaAdmin?s.createElement(s.Fragment,null,s.createElement(ka.J,{name:"shield"})," Yes"):"No")),s.createElement("tr",null,s.createElement("td",{className:"width-16"},"Status"),s.createElement("td",null,B.isDisabled?s.createElement(s.Fragment,null,s.createElement(ka.J,{name:"times"})," Inactive"):s.createElement(s.Fragment,null,s.createElement(ka.J,{name:"check"})," Active"))))))),Or=({teams:B,showAttributeMapping:W})=>{const Q=W?B:B.filter(ae=>ae.teamName);return s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("thead",null,s.createElement("tr",null,W&&s.createElement("th",null,"LDAP Group"),s.createElement("th",null,"Organisation"),s.createElement("th",null,"Team"))),s.createElement("tbody",null,Q.map((ae,ve)=>s.createElement("tr",{key:`${ae.teamName}-${ve}`},W&&s.createElement(s.Fragment,null,s.createElement("td",null,ae.groupDN),!ae.orgName&&s.createElement(s.Fragment,null,s.createElement("td",null),s.createElement("td",null,s.createElement("span",{className:"text-warning"},"No match"),s.createElement(ho.u,{placement:"top",content:"No matching teams found",theme:"info"},s.createElement(ka.J,{name:"info-circle"}))))),ae.orgName&&s.createElement(s.Fragment,null,s.createElement("td",null,ae.orgName),s.createElement("td",null,ae.teamName))))))))},Om=({ldapUser:B,showAttributeMapping:W})=>s.createElement(s.Fragment,null,s.createElement(Ql,{info:B.info,showAttributeMapping:W}),s.createElement(Tm,{permissions:B.permissions}),B.roles&&B.roles.length>0&&s.createElement(Mm,{groups:B.roles,showAttributeMapping:W}),B.teams&&B.teams.length>0?s.createElement(Or,{teams:B.teams,showAttributeMapping:W}):s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",null,"No teams found via LDAP"))))))),Im={text:"LDAP",subTitle:"Verify your LDAP and user mapping configuration.",icon:"book",id:"LDAP"};class Rm extends s.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0},this.search=W=>{W&&this.fetchUserMapping(W)},this.onClearUserError=()=>{this.props.clearUserError()}}async componentDidMount(){const{clearUserMappingInfo:W,queryParams:Q}=this.props;await W(),await this.fetchLDAPStatus(),Q.username&&await this.fetchUserMapping(Q.username),this.setState({isLoading:!1})}async fetchLDAPStatus(){const{loadLdapState:W,loadLdapSyncStatus:Q}=this.props;return Promise.all([W(),Q()])}async fetchUserMapping(W){const{loadUserMapping:Q}=this.props;return await Q(W)}render(){const{ldapUser:W,userError:Q,ldapError:ae,ldapSyncInfo:ve,ldapConnectionInfo:Ce,queryParams:Ie}=this.props,{isLoading:ke}=this.state,je=Xa.Vt.hasPermission(En.AccessControlAction.LDAPUsersRead);return s.createElement(Cr.T,{navId:"authentication",pageNav:Im},s.createElement(Cr.T.Contents,{isLoading:ke},s.createElement(s.Fragment,null,ae&&ae.title&&s.createElement(yr.b,{title:ae.title,severity:En.AppNotificationSeverity.Error},ae.body),s.createElement(Cm,{ldapConnectionInfo:Ce}),(0,td.v)("ldapsync")&&ve&&s.createElement(xm,{ldapSyncInfo:ve}),je&&s.createElement(s.Fragment,null,s.createElement("h3",null,"Test user mapping"),s.createElement(Dm.l,{onSubmit:st=>this.search(st.username)},({register:st})=>s.createElement(Ma.Lh,null,s.createElement(fi.g,{label:"Username"},s.createElement(ct.I,{...st("username",{required:!0}),id:"username",type:"text",defaultValue:Ie.username})),s.createElement(ue.zx,{variant:"primary",type:"submit"},"Run"))),Q&&Q.title&&s.createElement(yr.b,{title:Q.title,severity:En.AppNotificationSeverity.Error,onRemove:this.onClearUserError},Q.body),W&&s.createElement(Om,{ldapUser:W,showAttributeMapping:!0})))))}}const Am=B=>({ldapConnectionInfo:B.ldap.connectionInfo,ldapUser:B.ldap.user,ldapSyncInfo:B.ldap.syncInfo,userError:B.ldap.userError,ldapError:B.ldap.ldapError}),hr={loadLdapState:er.Y3,loadLdapSyncStatus:er.j4,loadUserMapping:er.b_,clearUserError:er.V0,clearUserMappingInfo:er.IS},Lm=(0,$r.connect)(Am,hr)(Rm);var Mn=e(3693),Zs=e(5907);const Bi=[],ld=[...Bi,{path:"/alerting",component:()=>s.createElement(go,{navId:"alerting-legacy"})},{path:"/alerting/list",component:(0,Mn.Q)(()=>Promise.all([e.e(3638),e.e(8525),e.e(1884),e.e(8061),e.e(2461)]).then(e.bind(e,4860)))},{path:"/alerting/ng/list",component:(0,Mn.Q)(()=>e.e(4286).then(e.bind(e,4860)))},{path:"/alerting/notifications",roles:z.config.unifiedAlertingEnabled?()=>["Editor","Admin"]:void 0,component:(0,Mn.Q)(()=>e.e(6618).then(e.bind(e,80372)))},{path:"/alerting/notifications/templates/new",roles:()=>["Editor","Admin"],component:(0,Mn.Q)(()=>e.e(6618).then(e.bind(e,80372)))},{path:"/alerting/notifications/templates/:id/edit",roles:()=>["Editor","Admin"],component:(0,Mn.Q)(()=>e.e(6618).then(e.bind(e,80372)))},{path:"/alerting/notifications/receivers/new",roles:()=>["Editor","Admin"],component:(0,Mn.Q)(()=>e.e(6618).then(e.bind(e,80372)))},{path:"/alerting/notifications/receivers/:id/edit",roles:()=>["Editor","Admin"],component:(0,Mn.Q)(()=>e.e(6618).then(e.bind(e,80372)))},{path:"/alerting/notifications/global-config",roles:()=>["Admin","Editor"],component:(0,Mn.Q)(()=>e.e(6618).then(e.bind(e,80372)))},{path:"/alerting/notification/new",component:(0,Mn.Q)(()=>e.e(476).then(e.bind(e,67375)))},{path:"/alerting/notification/:id/edit",component:(0,Mn.Q)(()=>e.e(7384).then(e.bind(e,17931)))}],cd=[...Bi,{path:"/alerting",component:(0,Mn.Q)(()=>e.e(6034).then(e.bind(e,57489)))},{path:"/alerting/home",exact:!1,component:(0,Mn.Q)(()=>e.e(6034).then(e.bind(e,57489)))},{path:"/alerting/list",roles:(0,Zs.ql)([En.AccessControlAction.AlertingRuleRead,En.AccessControlAction.AlertingRuleExternalRead]),component:(0,Mn.Q)(()=>Promise.all([e.e(3638),e.e(8525),e.e(1884),e.e(8061),e.e(2461)]).then(e.bind(e,14388)))},{path:"/alerting/routes",roles:(0,Zs.ql)([En.AccessControlAction.AlertingNotificationsRead,En.AccessControlAction.AlertingNotificationsExternalRead]),component:(0,Mn.Q)(()=>Promise.all([e.e(8525),e.e(4339),e.e(8648)]).then(e.bind(e,59730)))},{path:"/alerting/routes/mute-timing/new",roles:(0,Zs.ql)([En.AccessControlAction.AlertingNotificationsWrite,En.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Mn.Q)(()=>e.e(9355).then(e.bind(e,29431)))},{path:"/alerting/routes/mute-timing/edit",roles:(0,Zs.ql)([En.AccessControlAction.AlertingNotificationsWrite,En.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Mn.Q)(()=>e.e(9355).then(e.bind(e,29431)))},{path:"/alerting/silences",roles:(0,Zs.ql)([En.AccessControlAction.AlertingInstanceRead,En.AccessControlAction.AlertingInstancesExternalRead]),component:(0,Mn.Q)(()=>e.e(1783).then(e.bind(e,52410)))},{path:"/alerting/silence/new",roles:(0,Zs.ql)([En.AccessControlAction.AlertingInstanceCreate,En.AccessControlAction.AlertingInstancesExternalWrite]),component:(0,Mn.Q)(()=>e.e(1783).then(e.bind(e,52410)))},{path:"/alerting/silence/:id/edit",roles:(0,Zs.ql)([En.AccessControlAction.AlertingInstanceUpdate,En.AccessControlAction.AlertingInstancesExternalWrite]),component:(0,Mn.Q)(()=>e.e(1783).then(e.bind(e,52410)))},{path:"/alerting/notifications",roles:(0,Zs.ql)([En.AccessControlAction.AlertingNotificationsRead,En.AccessControlAction.AlertingNotificationsExternalRead]),component:(0,Mn.Q)(()=>e.e(6618).then(e.bind(e,17589)))},{path:"/alerting/notifications/:type/new",roles:(0,Zs.ql)([En.AccessControlAction.AlertingNotificationsWrite,En.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Mn.Q)(()=>e.e(6618).then(e.bind(e,17589)))},{path:"/alerting/notifications/receivers/:id/edit",roles:(0,Zs.ql)([En.AccessControlAction.AlertingNotificationsWrite,En.AccessControlAction.AlertingNotificationsExternalWrite,En.AccessControlAction.AlertingNotificationsRead,En.AccessControlAction.AlertingNotificationsExternalRead]),component:(0,Mn.Q)(()=>e.e(6618).then(e.bind(e,17589)))},{path:"/alerting/notifications/:type/:id/edit",roles:(0,Zs.ql)([En.AccessControlAction.AlertingNotificationsWrite,En.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Mn.Q)(()=>e.e(6618).then(e.bind(e,17589)))},{path:"/alerting/notifications/:type/:id/duplicate",roles:(0,Zs.ql)([En.AccessControlAction.AlertingNotificationsWrite,En.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Mn.Q)(()=>e.e(6618).then(e.bind(e,17589)))},{path:"/alerting/notifications/:type",roles:(0,Zs.ql)([En.AccessControlAction.AlertingNotificationsWrite,En.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Mn.Q)(()=>e.e(6618).then(e.bind(e,17589)))},{path:"/alerting/groups/",roles:(0,Zs.ql)([En.AccessControlAction.AlertingInstanceRead,En.AccessControlAction.AlertingInstancesExternalRead]),component:(0,Mn.Q)(()=>e.e(2415).then(e.bind(e,49653)))},{path:"/alerting/new/:type?",pageClass:"page-alerting",roles:(0,Zs.ql)([En.AccessControlAction.AlertingRuleCreate,En.AccessControlAction.AlertingRuleExternalWrite]),component:(0,Mn.Q)(()=>Promise.all([e.e(3638),e.e(3258),e.e(8525),e.e(4339),e.e(9210),e.e(2323),e.e(8061),e.e(2273),e.e(5372)]).then(e.bind(e,84157)))},{path:"/alerting/:id/edit",pageClass:"page-alerting",roles:(0,Zs.ql)([En.AccessControlAction.AlertingRuleUpdate,En.AccessControlAction.AlertingRuleExternalWrite]),component:(0,Mn.Q)(()=>Promise.all([e.e(3638),e.e(3258),e.e(8525),e.e(4339),e.e(9210),e.e(2323),e.e(8061),e.e(2273),e.e(5372)]).then(e.bind(e,84157)))},{path:"/alerting/:id/modify-export",pageClass:"page-alerting",roles:(0,Zs.ql)([En.AccessControlAction.AlertingRuleRead]),component:(0,Mn.Q)(()=>Promise.all([e.e(3638),e.e(3258),e.e(8525),e.e(4339),e.e(9210),e.e(2323),e.e(8061),e.e(2273),e.e(5372)]).then(e.bind(e,80448)))},{path:"/alerting/:sourceName/:id/view",pageClass:"page-alerting",roles:(0,Zs.ql)([En.AccessControlAction.AlertingRuleRead,En.AccessControlAction.AlertingRuleExternalRead]),component:(0,Mn.Q)(()=>e.e(4679).then(e.bind(e,73632)))},{path:"/alerting/:sourceName/:name/find",pageClass:"page-alerting",roles:(0,Zs.ql)([En.AccessControlAction.AlertingRuleRead,En.AccessControlAction.AlertingRuleExternalRead]),component:(0,Mn.Q)(()=>e.e(7918).then(e.bind(e,78272)))},{path:"/alerting/admin",roles:()=>["Admin"],component:(0,Mn.Q)(()=>e.e(7680).then(e.bind(e,19135)))}];function Bm(B=z.config){return B.unifiedAlertingEnabled?cd:B.alertingEnabled?ld:(0,h.uniq)([...ld,...cd].map(Q=>Q.path)).map(Q=>({path:Q,component:(0,Mn.Q)(()=>e.e(1333).then(e.bind(e,24552)))}))}var gi=e(82955);const wm=B=>({alertContent:(0,we.css)`
    display: flex;
    flex-direction: row;
    padding: 0;
    justify-content: space-between;
    align-items: center;
  `,alertParagraph:(0,we.css)`
    margin: 0 ${B.spacing(1)} 0 0;
    line-height: ${B.spacing(B.components.height.sm)};
  `});function dd(){const B=(0,lt.wW)(wm),[W,Q]=(0,s.useState)(!0);return W?s.createElement(yr.b,{severity:"info",title:"",onRemove:()=>Q(!1)},s.createElement("div",{className:B.alertContent},s.createElement("p",{className:B.alertParagraph},"Data sources have a new home! You can discover new data sources or manage existing ones in the Connections page, accessible from the main menu."),s.createElement(ue.Qj,{"aria-label":"Link to Connections",icon:"arrow-right",href:gi.Z.DataSources,fill:"text"},"Go to connections"))):s.createElement(s.Fragment,null)}function ud(){return[{path:`/${gi.D}`,exact:!1,component:(0,Mn.Q)(()=>Promise.all([e.e(7544),e.e(7217),e.e(5981)]).then(e.bind(e,77638)))}]}var wi=e(96053),Yl=e(87809);const Um=[{path:"/plugins",navId:"plugins",roles:hi([En.AccessControlAction.PluginsInstall,En.AccessControlAction.PluginsWrite],["Admin","ServerAdmin"]),routeName:Yl.cd.Home,component:(0,Mn.Q)(()=>e.e(94).then(e.bind(e,13923)))},{path:"/plugins/browse",navId:"plugins",roles:hi([En.AccessControlAction.PluginsInstall,En.AccessControlAction.PluginsWrite],["Admin","ServerAdmin"]),routeName:Yl.cd.Browse,component:(0,Mn.Q)(()=>e.e(94).then(e.bind(e,13923)))},{path:"/plugins/:pluginId/",navId:"plugins",roles:hi([En.AccessControlAction.PluginsInstall,En.AccessControlAction.PluginsWrite],["Admin","ServerAdmin"]),routeName:Yl.cd.Details,component:(0,Mn.Q)(()=>Promise.all([e.e(7544),e.e(7217),e.e(2417)]).then(e.bind(e,39962)))}];function hi(B,W){return()=>B.some(Q=>Xa.Vt.hasPermission(Q))?[]:W}function Nm(){return Um}var Wm=e(87947),Vo=e(20079),Fm=e(77786),Zl=e(98521),pi=e(47475),md=e(55415),Mo=e(6005);function Km(B){return console.error(B),Ui("Exception thrown","See console for details")}function fd(){return Ui("Page not found","404 Error")}function Ui(B,W){const Q={text:B,subTitle:W,icon:"exclamation-triangle"};return{node:Q,main:Q}}var gd=e(67552),Jl=e(73243),Vm=e(84482),Xl=e(66706);const Pr={loading:!0,loadingError:!1,pluginNav:null,plugin:null};function hd({pluginId:B,pluginNavSection:W}){const Q=(0,Qs.$B)(),ae=(0,Qs.TH)(),[ve,Ce]=(0,s.useReducer)(Xo.reducer,Pr),Ie=Y.config.appSubUrl+ae.pathname+ae.search,{plugin:ke,loading:je,loadingError:st,pluginNav:gt}=ve,bt=(0,Vm.d)(W,gt,Ie),Vt=(0,s.useMemo)(()=>(0,x.Ox)(ae.search),[ae.search]),Ut=(0,s.useMemo)(()=>(0,Xl.a)(bt),[bt]),Ot=(0,Mo.p)();(0,s.useEffect)(()=>{pd(B,Ce)},[B]);const Gt=(0,s.useCallback)(ca=>Ce(Xo.actions.changeNav(ca)),[]);if(!ke||B!==ke.meta.id){const ca=Ot.chrome.state.getValue().layout;return s.createElement(Cr.T,{navModel:bt,pageNav:{text:""},layout:ca},je&&s.createElement(md.Z,null),!je&&st&&s.createElement(ed.j,{entity:"App"}))}if(!ke.root)return s.createElement(Cr.T,{navModel:bt??Ui("Plugin load error")},s.createElement("div",null,"No root app page component found"));const ln=ke.root&&s.createElement(Fm.b,{meta:ke.meta},s.createElement(ke.root,{meta:ke.meta,basename:Q.url,onNavChanged:Gt,query:Vt,path:ae.pathname})),pa=()=>{if(!ke.meta?.includes||Xa.Vt.isGrafanaAdmin||Xa.Vt.user.orgRole===Zl.B.Admin)return!0;const ca=ke.meta?.includes.find(lr=>lr.path===ae.pathname);if(!ca)return!0;const $a=ca?.role||"";return!$a||Xa.Vt.isEditor&&$a===Zl.B.Viewer?!0:Xa.Vt.hasRole($a)},Ca=()=>s.createElement(yr.b,{severity:"warning",title:"Access denied"},"You do not have permission to see this page.");return pa()?gt?s.createElement(s.Fragment,null,bt?s.createElement(Cr.T,{navModel:bt,pageNav:gt?.node},s.createElement(Cr.T.Contents,{isLoading:je},ln)):s.createElement(Cr.T,null,ln)):s.createElement(Xl.v.Provider,{value:Ut},ln):s.createElement(Ca,null)}const Xo=(0,Vo.oM)({name:"prom-builder-container",initialState:Pr,reducers:{setState:(B,W)=>{Object.assign(B,W.payload)},changeNav:(B,W)=>{let Q=W.payload;Q&&Q.node.children&&(Q={...Q,node:{...Q.main,hideFromBreadcrumbs:!0}}),B.pluginNav=Q}}});async function pd(B,W){try{const Q=await(0,gd.a)(B).then(ae=>{const ve=vd(ae);return ve?(Xa.h$.emit(pi.SI.alertError,[ve]),W(Xo.actions.setState({pluginNav:Ui(ve)})),null):(0,Jl.Av)(ae)});W(Xo.actions.setState({plugin:Q,loading:!1,loadingError:!1,pluginNav:null}))}catch{W(Xo.actions.setState({plugin:null,loading:!1,loadingError:!0,pluginNav:fd()}))}}function vd(B){return B?B.type!==Le.zV.app?"Plugin must be an app":B.enabled?null:"Application Not Enabled":"Unknown Plugin"}const ql=hd;var rs=e(59767);function _m(){const B=(0,rs.y0)(),{navIndex:W}=B,Q=Ce=>Ce.startsWith("standalone-plugin-page-/"),ae=Ce=>"pluginId"in Ce&&"id"in Ce;return[...Object.values(W).filter(ae).map(Ce=>{const Ie=(0,Wm.vw)(Ce),ke=`/a/${Ce.pluginId}`,je=Q(Ce.id)&&Ce.url||ke,st=Q(Ce.id)&&!Ce.url?.startsWith("/a/");return{path:je,exact:!1,sensitive:st,component:()=>s.createElement(ql,{pluginId:Ce.pluginId,pluginNavSection:Ie})}}),{path:"/a/:pluginId",exact:!1,component:({match:Ce})=>s.createElement(ql,{pluginId:Ce.params.pluginId,pluginNavSection:W.home})}]}const ec=[{path:"/profile",component:(0,Mn.Q)(()=>e.e(7323).then(e.bind(e,16246)))},{path:"/profile/password",component:(0,Mn.Q)(()=>e.e(2203).then(e.bind(e,42203)))},{path:"/profile/select-org",component:(0,Mn.Q)(()=>e.e(1456).then(e.bind(e,90113)))},{path:"/profile/notifications",component:(0,Mn.Q)(()=>e.e(743).then(e.bind(e,47196)))}];function $m(B=z.config){return B.profileEnabled?ec:(0,h.uniq)(ec.map(Q=>Q.path)).map(Q=>({path:Q,component:(0,Mn.Q)(()=>e.e(3395).then(e.bind(e,66565)))}))}const zm=()=>z.config.featureToggles.publicDashboards?[{path:"/dashboard/public",pageClass:"page-dashboard",routeName:En.DashboardRoutes.Public,component:(0,Mn.Q)(()=>e.e(1344).then(e.bind(e,47345)))},{path:"/public-dashboards/:accessToken",pageClass:"page-dashboard",routeName:En.DashboardRoutes.Public,chromeless:!0,component:(0,Mn.Q)(()=>Promise.all([e.e(6408),e.e(4532),e.e(3964),e.e(5770),e.e(2613)]).then(e.bind(e,54829)))}]:[],km=[];function nl(){return[..._m(),{path:"/",pageClass:"page-dashboard",routeName:En.DashboardRoutes.Home,component:(0,Mn.Q)(()=>Promise.all([e.e(6408),e.e(4532),e.e(3964),e.e(5770),e.e(9392),e.e(7181),e.e(1884),e.e(8443)]).then(e.bind(e,34601)))},{path:"/d/:uid/:slug?",pageClass:"page-dashboard",routeName:En.DashboardRoutes.Normal,component:(0,Mn.Q)(()=>Promise.all([e.e(6408),e.e(4532),e.e(3964),e.e(5770),e.e(9392),e.e(7181),e.e(1884),e.e(8443)]).then(e.bind(e,34601)))},{path:"/dashboard/new",roles:()=>As.contextSrv.evaluatePermission([En.AccessControlAction.DashboardsCreate]),pageClass:"page-dashboard",routeName:En.DashboardRoutes.New,component:(0,Mn.Q)(()=>Promise.all([e.e(6408),e.e(4532),e.e(3964),e.e(5770),e.e(9392),e.e(7181),e.e(1884),e.e(8443),e.e(5296)]).then(e.bind(e,34601)))},{path:"/dashboard/new-with-ds/:datasourceUid",roles:()=>As.contextSrv.evaluatePermission([En.AccessControlAction.DashboardsCreate]),component:(0,Mn.Q)(()=>Promise.all([e.e(6408),e.e(4532),e.e(3964),e.e(5770),e.e(9392),e.e(7181),e.e(1884),e.e(8443),e.e(5296)]).then(e.bind(e,26684)))},{path:"/dashboard/:type/:slug",pageClass:"page-dashboard",routeName:En.DashboardRoutes.Normal,component:(0,Mn.Q)(()=>Promise.all([e.e(6408),e.e(4532),e.e(3964),e.e(5770),e.e(9392),e.e(7181),e.e(1884),e.e(8443),e.e(5296)]).then(e.bind(e,34601)))},{path:"/d-solo/:uid/:slug",pageClass:"dashboard-solo",routeName:En.DashboardRoutes.Normal,chromeless:!0,component:(0,Mn.Q)(()=>Promise.all([e.e(3964),e.e(1034)]).then(e.bind(e,57393)))},{path:"/dashboard-solo/:type/:slug",pageClass:"dashboard-solo",routeName:En.DashboardRoutes.Normal,chromeless:!0,component:(0,Mn.Q)(()=>Promise.all([e.e(3964),e.e(1034)]).then(e.bind(e,57393)))},{path:"/d-solo/:uid",pageClass:"dashboard-solo",routeName:En.DashboardRoutes.Normal,chromeless:!0,component:(0,Mn.Q)(()=>Promise.all([e.e(3964),e.e(1034)]).then(e.bind(e,57393)))},{path:"/dashboard/import",component:(0,Mn.Q)(()=>e.e(8808).then(e.bind(e,63381)))},{path:wi.n.List,component:()=>s.createElement(Qs.l_,{to:gi.Z.DataSources})},{path:wi.n.Edit,component:B=>s.createElement(Qs.l_,{to:gi.Z.DataSourcesEdit.replace(":uid",B.match.params.uid)})},{path:wi.n.Dashboards,component:B=>s.createElement(Qs.l_,{to:gi.Z.DataSourcesDashboards.replace(":uid",B.match.params.uid)})},{path:wi.n.New,component:()=>s.createElement(Qs.l_,{to:gi.Z.DataSourcesNew})},{path:"/datasources/correlations",component:(0,Mn.Q)(()=>z.default.featureToggles.correlations?e.e(413).then(e.bind(e,41494)):e.e(2093).then(e.bind(e,77473)))},{path:"/dashboards",component:(0,Mn.Q)(()=>Promise.all([e.e(7544),e.e(4074)]).then(e.bind(e,37260)))},{path:"/dashboards/f/:uid/:slug",component:(0,Mn.Q)(()=>Promise.all([e.e(7544),e.e(4074)]).then(e.bind(e,37260)))},{path:"/dashboards/f/:uid",component:(0,Mn.Q)(()=>Promise.all([e.e(7544),e.e(4074)]).then(e.bind(e,37260)))},{path:"/explore",pageClass:"page-explore",roles:()=>As.contextSrv.evaluatePermission([En.AccessControlAction.DataSourcesExplore]),component:(0,Mn.Q)(()=>z.default.exploreEnabled?Promise.all([e.e(3638),e.e(9392),e.e(9210),e.e(9782)]).then(e.bind(e,79348)):e.e(172).then(e.bind(e,1095)))},{path:"/apps",component:()=>s.createElement(go,{navId:"apps"})},{path:"/alerts-and-incidents",component:()=>s.createElement(go,{navId:"alerts-and-incidents"})},{path:"/monitoring",component:()=>s.createElement(go,{navId:"monitoring"})},{path:"/infrastructure",component:()=>s.createElement(go,{navId:"infrastructure"})},{path:"/frontend",component:()=>s.createElement(go,{navId:"frontend"})},{path:"/admin/general",component:()=>s.createElement(go,{navId:"cfg/general"})},{path:"/admin/plugins",component:()=>s.createElement(go,{navId:"cfg/plugins"})},{path:"/admin/access",component:()=>s.createElement(go,{navId:"cfg/access"})},{path:"/org",component:(0,Mn.Q)(()=>e.e(529).then(e.bind(e,54447)))},{path:"/org/new",component:(0,Mn.Q)(()=>e.e(950).then(e.bind(e,99576)))},{path:"/org/users",component:(0,Mn.Q)(()=>e.e(8039).then(e.bind(e,87644)))},{path:"/org/users/invite",component:(0,Mn.Q)(()=>e.e(7707).then(e.bind(e,4786)))},{path:"/org/apikeys",roles:()=>As.contextSrv.evaluatePermission([En.AccessControlAction.ActionAPIKeysRead]),component:(0,Mn.Q)(()=>e.e(3082).then(e.bind(e,2365)))},{path:"/org/serviceaccounts",roles:()=>As.contextSrv.evaluatePermission([En.AccessControlAction.ServiceAccountsRead,En.AccessControlAction.ServiceAccountsCreate]),component:(0,Mn.Q)(()=>e.e(1337).then(e.bind(e,53614)))},{path:"/org/serviceaccounts/create",component:(0,Mn.Q)(()=>e.e(9738).then(e.bind(e,14598)))},{path:"/org/serviceaccounts/:id",component:(0,Mn.Q)(()=>e.e(687).then(e.bind(e,21906)))},{path:"/org/teams",roles:()=>As.contextSrv.evaluatePermission([En.AccessControlAction.ActionTeamsRead,En.AccessControlAction.ActionTeamsCreate]),component:(0,Mn.Q)(()=>e.e(9671).then(e.bind(e,56011)))},{path:"/org/teams/new",roles:()=>As.contextSrv.evaluatePermission([En.AccessControlAction.ActionTeamsCreate]),component:(0,Mn.Q)(()=>e.e(8715).then(e.bind(e,48386)))},{path:"/org/teams/edit/:id/:page?",roles:()=>As.contextSrv.evaluatePermission([En.AccessControlAction.ActionTeamsRead,En.AccessControlAction.ActionTeamsCreate]),component:(0,Mn.Q)(()=>e.e(8612).then(e.bind(e,64752)))},{path:"/admin",component:()=>s.createElement(go,{navId:"cfg",header:s.createElement(dd,null)})},{path:"/admin/authentication",roles:()=>As.contextSrv.evaluatePermission([En.AccessControlAction.SettingsWrite]),component:z.default.licenseInfo.enabledFeatures?.saml||z.default.ldapEnabled||z.default.featureToggles.ssoSettingsApi?(0,Mn.Q)(()=>e.e(8741).then(e.bind(e,48187))):()=>s.createElement(Qs.l_,{to:"/admin"})},{path:"/admin/settings",component:(0,Mn.Q)(()=>e.e(9603).then(e.bind(e,84252)))},{path:"/admin/upgrading",component:(0,Mn.Q)(()=>e.e(7329).then(e.bind(e,77329)))},{path:"/admin/users",component:(0,Mn.Q)(()=>e.e(7497).then(e.bind(e,63868)))},{path:"/admin/users/create",component:(0,Mn.Q)(()=>e.e(2508).then(e.bind(e,33677)))},{path:"/admin/users/edit/:id",component:bm},{path:"/admin/orgs",component:(0,Mn.Q)(()=>e.e(3798).then(e.bind(e,87162)))},{path:"/admin/orgs/edit/:id",component:(0,Mn.Q)(()=>e.e(2721).then(e.bind(e,45528)))},{path:"/admin/featuretoggles",component:z.default.featureToggles.featureToggleAdminPage?(0,Mn.Q)(()=>e.e(7129).then(e.bind(e,53125))):()=>s.createElement(Qs.l_,{to:"/admin"})},{path:"/admin/storage/:path*",roles:()=>["Admin"],component:(0,Mn.Q)(()=>e.e(7675).then(e.bind(e,24047)))},{path:"/admin/stats",component:(0,Mn.Q)(()=>e.e(7641).then(e.bind(e,77977)))},{path:"/admin/authentication/ldap",component:Lm},{path:"/login",component:Ri,pageClass:"login-page",chromeless:!0},{path:"/invite/:code",component:(0,Mn.Q)(()=>e.e(7429).then(e.bind(e,58723))),chromeless:!0},{path:"/verify",component:z.default.verifyEmailEnabled?(0,Mn.Q)(()=>e.e(8390).then(e.bind(e,18390))):()=>s.createElement(Qs.l_,{to:"/signup"}),pageClass:"login-page",chromeless:!0},{path:"/signup",component:z.default.disableUserSignUp?()=>s.createElement(Qs.l_,{to:"/login"}):(0,Mn.Q)(()=>e.e(318).then(e.bind(e,35718))),pageClass:"login-page",chromeless:!0},{path:"/user/password/send-reset-email",chromeless:!0,component:(0,Mn.Q)(()=>e.e(133).then(e.bind(e,61899)))},{path:"/user/password/reset",component:(0,Mn.Q)(()=>e.e(6848).then(e.bind(e,16313))),pageClass:"login-page",chromeless:!0},{path:"/dashboard/snapshots",component:(0,Mn.Q)(()=>e.e(5295).then(e.bind(e,40410)))},{path:"/playlists",component:(0,Mn.Q)(()=>e.e(9218).then(e.bind(e,25816)))},{path:"/playlists/play/:uid",component:(0,Mn.Q)(()=>e.e(3090).then(e.bind(e,89401)))},{path:"/playlists/new",component:(0,Mn.Q)(()=>e.e(9975).then(e.bind(e,18248)))},{path:"/playlists/edit/:uid",component:(0,Mn.Q)(()=>e.e(2341).then(e.bind(e,73474)))},{path:"/sandbox/benchmarks",component:(0,Mn.Q)(()=>e.e(4908).then(e.bind(e,82597)))},{path:"/sandbox/test",component:(0,Mn.Q)(()=>Promise.all([e.e(7181),e.e(8595)]).then(e.bind(e,67291)))},{path:"/dashboards/f/:uid/:slug/library-panels",component:(0,Mn.Q)(()=>Promise.all([e.e(6408),e.e(3778)]).then(e.bind(e,8145)))},{path:"/dashboards/f/:uid/:slug/alerting",roles:()=>As.contextSrv.evaluatePermission([En.AccessControlAction.AlertingRuleRead]),component:(0,Mn.Q)(()=>e.e(1324).then(e.bind(e,61660)))},{path:"/library-panels",component:(0,Mn.Q)(()=>Promise.all([e.e(6408),e.e(7878)]).then(e.bind(e,22803)))},{path:"/notifications",component:(0,Mn.Q)(()=>e.e(743).then(e.bind(e,47196)))},{path:"/data-trails",chromeless:!1,exact:!1,component:(0,Mn.Q)(()=>e.e(1108).then(e.bind(e,77341)))},...Gr(),...Nm(),...Hm(),...Bm(),...$m(),...km,...zm(),...ud(),{path:"/*",component:tm}].filter(Vs.fQ)}function Hm(B=z.default){return B.supportBundlesEnabled?[{path:"/support-bundles",component:(0,Mn.Q)(()=>e.e(9939).then(e.bind(e,84875)))},{path:"/support-bundles/create",component:(0,Mn.Q)(()=>e.e(539).then(e.bind(e,3867)))}]:[]}function Gr(B=z.default){return B.featureToggles.scenes?[{path:"/scenes",component:(0,Mn.Q)(()=>e.e(207).then(e.bind(e,27370)))},{path:"/scenes/dashboard/:uid",component:(0,Mn.Q)(()=>e.e(207).then(e.bind(e,5429)))},{path:"/scenes/dashboard/:uid/panel-edit/:panelId",component:(0,Mn.Q)(()=>e.e(207).then(e.bind(e,35871)))},{path:"/scenes/grafana-monitoring",exact:!1,component:(0,Mn.Q)(()=>e.e(207).then(e.bind(e,17502)))},{path:"/scenes/:name",component:(0,Mn.Q)(()=>e.e(207).then(e.bind(e,21532)))}]:[]}const al=s.forwardRef((B,W)=>s.createElement("div",{id:"ngRoot",ref:W,dangerouslySetInnerHTML:{__html:"<grafana-app ng-cloak></grafana-app>"}}));al.displayName="AngularRoot";var To=e(20440),Gm=e(92289),jm=e(18362),qo=e(45864),Ed=e(5192),yd=e(43282);async function tc(){if(Y.config.angularSupportEnabled){const{AngularApp:B}=await Promise.all([e.e(6783),e.e(1188),e.e(6533),e.e(4704)]).then(e.bind(e,6533)),W=new B;W.init(),W.bootstrap()}else(0,Gm.W)({load:(B,W,Q)=>({destroy:()=>{},digest:()=>{},getScope:()=>({})})}),(0,jm.t)({get:B=>{switch(B){case"backendSrv":return(0,To.d)("getLegacyAngularInjector","backendSrv","use getBackendSrv() in @grafana/runtime"),(0,R.i)();case"contextSrv":return(0,To.d)("getLegacyAngularInjector","contextSrv"),Xa.Vt;case"dashboardSrv":return(0,To.d)("getLegacyAngularInjector","getDashboardSrv"),(0,c.h4)();case"datasourceSrv":return(0,To.d)("getLegacyAngularInjector","datasourceSrv","use getDataSourceSrv() in @grafana/runtime"),(0,N.F)();case"linkSrv":return(0,To.d)("getLegacyAngularInjector","linkSrv"),(0,yd.Bq)();case"validationSrv":return(0,To.d)("getLegacyAngularInjector","validationSrv"),Ed.t;case"timeSrv":return(0,To.d)("getLegacyAngularInjector","timeSrv"),(0,qo.$t)();case"templateSrv":return(0,To.d)("getLegacyAngularInjector","templateSrv","use getTemplateSrv() in @grafana/runtime"),(0,nt.J)()}throw"Angular is disabled.  Unable to expose: "+B}})}var Qm=e(70318),sl=e.n(Qm),po=e(57529),nc=e(89344),_o=e(48925),bd=e(23615),Dd=e(96118),Ym=e(78290);const rl=0,Zm=B=>{const W=s.useRef(null),Q=s.useRef(null),ae=s.useRef(B.items);ae.current=B.items;const ve=(0,Ym.useVirtual)({size:ae.current.length,parentRef:Q}),{query:Ce,search:Ie,currentRootActionId:ke,activeIndex:je,options:st}=(0,js.useKBar)(Ut=>({search:Ut.searchQuery,currentRootActionId:Ut.currentRootActionId,activeIndex:Ut.activeIndex}));s.useEffect(()=>{const Ut=Ot=>{Ot.key==="ArrowUp"||Ot.ctrlKey&&Ot.key==="p"?(Ot.preventDefault(),Ce.setActiveIndex(Gt=>{let ln=Gt>rl?Gt-1:Gt;if(typeof ae.current[ln]=="string"){if(ln===0)return Gt;ln-=1}return ln})):Ot.key==="ArrowDown"||Ot.ctrlKey&&Ot.key==="n"?(Ot.preventDefault(),Ce.setActiveIndex(Gt=>{let ln=Gt<ae.current.length-1?Gt+1:Gt;if(typeof ae.current[ln]=="string"){if(ln===ae.current.length-1)return Gt;ln+=1}return ln})):Ot.key==="Enter"&&(Ot.preventDefault(),W.current?.click())};return window.addEventListener("keydown",Ut),()=>window.removeEventListener("keydown",Ut)},[Ce]);const{scrollToIndex:gt}=ve;s.useEffect(()=>{gt(je,{align:je<=1?"end":"auto"})},[je,gt]),s.useEffect(()=>{Ce.setActiveIndex(typeof B.items[rl]=="string"?rl+1:rl)},[Ie,ke,B.items,Ce]);const bt=s.useCallback((Ut,Ot)=>{if(typeof Ot=="string")return;const Gt=Ot.url;Ot.command?(Ot.command.perform(Ot),Ce.toggle()):Gt?Ut.ctrlKey||Ut.metaKey||Ut.shiftKey||Ce.toggle():(Ce.setSearch(""),Ce.setCurrentRootAction(Ot.id)),st.callbacks?.onSelectAction?.(Ot)},[Ce,st]),Vt=(0,Dd.usePointerMovedSinceMount)();return s.createElement("div",{ref:Q,style:{maxHeight:B.maxHeight||400,position:"relative",overflow:"auto"}},s.createElement("div",{role:"listbox",id:js.KBAR_LISTBOX,style:{height:`${ve.totalSize}px`,width:"100%"}},ve.virtualItems.map(Ut=>{const Ot=ae.current[Ut.index],{target:Gt,url:ln}=Ot,pa=typeof Ot!="string"&&{onPointerMove:()=>Vt&&je!==Ut.index&&Ce.setActiveIndex(Ut.index),onPointerDown:()=>Ce.setActiveIndex(Ut.index),onClick:lr=>bt(lr,Ot)},Ca=Ut.index===je,ca={id:(0,js.getListboxItemId)(Ut.index),role:"option","aria-selected":Ca,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${Ut.start}px)`},...pa},$a=s.cloneElement(B.onRender({item:Ot,active:Ca}),{ref:Ut.measureRef});return ln?s.createElement("a",{key:Ut.index,href:ln,target:Gt,ref:Ca?W:null,...ca},$a):s.createElement("div",{key:Ut.index,ref:Ca?W:null,...ca},$a)})))},ac=s.forwardRef(({action:B,active:W,currentRootActionId:Q},ae)=>{const ve=s.useMemo(()=>{if(!Q)return B.ancestors;const je=B.ancestors.findIndex(st=>st.id===Q);return B.ancestors.slice(je+1)},[B.ancestors,Q]),Ce=(0,lt.wW)(vo);let Ie=B.name;const ke=je=>!!(je.command?.perform||je.url);return B.children.length&&!ke(B)&&!Ie.endsWith("...")&&(Ie+="..."),s.createElement("div",{ref:ae,className:(0,we.cx)(Ce.row,W&&Ce.activeRow)},s.createElement("div",{className:Ce.actionContainer},B.icon,s.createElement("div",{className:Ce.textContainer},ve.map(je=>s.createElement(s.Fragment,{key:je.id},!ke(je)&&s.createElement(s.Fragment,null,s.createElement("span",{className:Ce.breadcrumbAncestor},je.name),s.createElement("span",{className:Ce.breadcrumbSeparator},"\u203A")))),s.createElement("span",null,Ie)),B.subtitle&&s.createElement("span",{className:Ce.subtitleText},B.subtitle)))});ac.displayName="ResultItem";const vo=B=>({row:(0,we.css)({padding:B.spacing(1,2),display:"flex",alightItems:"center",justifyContent:"space-between",cursor:"pointer",position:"relative",borderRadius:B.shape.radius.default,margin:B.spacing(0,1)}),activeRow:(0,we.css)({color:B.colors.text.maxContrast,background:B.colors.emphasize(B.colors.background.primary,.03),"&:before":{display:"block",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:B.spacing(.5),borderRadius:B.shape.radius.default,backgroundImage:B.colors.gradients.brandVertical}}),actionContainer:(0,we.css)({display:"flex",gap:B.spacing(1),alignItems:"baseline",fontSize:B.typography.fontSize,width:"100%"}),textContainer:(0,we.css)({display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),breadcrumbAncestor:(0,we.css)({color:B.colors.text.secondary}),breadcrumbSeparator:(0,we.css)({color:B.colors.text.secondary,marginLeft:B.spacing(1),marginRight:B.spacing(1)}),subtitleText:(0,we.css)({...B.typography.bodySmall,color:B.colors.text.secondary,display:"block",flexBasis:"20%",flexGrow:1,flexShrink:0,maxWidth:"fit-content",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})});var Jm=e(97812),Xm=e.n(Jm),qm=e(81182),Ni=e(30824);const sc=5,ef=4,tf=3,rc=2,oc=1,nf=100,Cd=5,af=Xm()(rf,200);async function sf(){if(!As.contextSrv.user.isSignedIn)return[];const B=(await qm.Z.getDashboardOpened()).slice(0,Cd),Q=(await(0,Ni.getGrafanaSearcher)().search({kind:["dashboard"],limit:Cd,uid:B})).view.toArray();return Q.sort((ve,Ce)=>{const Ie=B.indexOf(ve.uid),ke=B.indexOf(Ce.uid);return Ie-ke}),Q.map(ve=>{const{url:Ce,name:Ie}=ve;return{id:`recent-dashboards${Ce}`,name:`${Ie}`,section:(0,Ka.t)("command-palette.section.recent-dashboards","Recent dashboards"),priority:sc,url:Ce}})}async function rf(B){if(B.length===0||!As.contextSrv.user.isSignedIn&&!Y.config.bootData.settings.anonymousEnabled)return[];const W=await(0,Ni.getGrafanaSearcher)().search({kind:["dashboard","folder"],query:B,limit:nf});return W.view.map(ae=>{const{url:ve,name:Ce,kind:Ie,location:ke}=ae;return{id:`go/${Ie}${ve}`,name:`${Ce}`,section:Ie==="dashboard"?(0,Ka.t)("command-palette.section.dashboard-search-results","Dashboards"):(0,Ka.t)("command-palette.section.folder-search-results","Folders"),priority:oc,url:ve,subtitle:W.view.dataFrame.meta?.custom?.locationInfo[ke]?.name}})}function Pd(B,W){const[Q,ae]=(0,s.useState)([]),[ve,Ce]=(0,s.useState)(!1),Ie=(0,s.useRef)(0);return(0,s.useEffect)(()=>{const ke=Date.now();W&&B.length>0?(Ce(!0),af(B).then(je=>{ke>Ie.current&&(ae(je),Ce(!1),Ie.current=ke)})):(ae([]),Ce(!1),Ie.current=ke)},[W,B]),{searchResults:Q,isFetchingSearchResults:ve}}var Ir=e(14914),tr=e(60484),Sd=e(53479),xd=e(45969);const Md=B=>{let W=B.children||[];if(B.id==="help"){const Q=()=>{tr.Z.publish(new Ir.Dn({component:xd.B}))};B.children=[...W,...(0,Sd.dP)(),...lf(),{id:"keyboard-shortcuts",text:(0,Ka.t)("nav.help/keyboard-shortcuts","Keyboard shortcuts"),icon:"keyboard",onClick:Q}]}return B},ic=(B,W)=>{const Q=B.onClick;return B.onClick=()=>{(0,zr.ff)("grafana_navigation_item_clicked",{path:B.url??B.id,state:W?"expanded":"collapsed"}),Q?.()},B.children&&(B.children=B.children.map(ae=>ic(ae,W))),B},of=(B,W)=>!!(B===W||ol(B,W)),ol=(B,W)=>!!B.children?.some(Q=>Q===W?!0:ol(Q,W)),il=B=>B?.split("?")[0]??"",ll=(B,W)=>{const Q=il(W?.url),ae=il(B.url);return ae&&ae.length>Q?.length},lc=(B,W,Q)=>{const ae="/dashboards";for(const ve of B){const Ce=il(ve.url),Ie=T.u.stripBaseFromUrl(Ce);if(Ie&&ve.id!=="starred")if(Ie===W){Q=ve;break}else if(Ie!=="/"&&W.startsWith(Ie))ll(ve,Q)&&(Q=ve);else if(Ie==="/alerting/list"&&W.startsWith("/alerting/notification/")){Q=ve;break}else Ie===ae&&W.startsWith("/d/")&&ll(ve,Q)&&(Q=ve);if(ve.children&&(Q=lc(ve.children,W,Q)),il(Q?.url)===W)return Q}return Q};function lf(){const{buildInfo:B,licenseInfo:W}=Y.config,Q=W.stateInfo?` (${W.stateInfo})`:"",ae=[];return ae.push({target:"_blank",id:"version",text:`${B.edition}${Q}`,url:W.licenseUrl,icon:"external-link-alt"}),B.hasUpdate&&ae.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),ae}var cl=e(25199);function Td(B){return"navModel."+B.id}function Od(B,W=[]){const Q=[];for(let ae of B){ae.id==="help"&&(ae=Md({...ae}),delete ae.url);const{url:ve,target:Ce,text:Ie,isCreateAction:ke,children:je,onClick:st}=ae,gt=!!je?.length;if(!(ve||st||gt))continue;const bt=ke?(0,Ka.t)("command-palette.section.actions","Actions"):(0,Ka.t)("command-palette.section.pages","Pages"),Vt=ke?ef:tf,Ut=W.map(Gt=>Gt.text).join(" > "),Ot={id:Td(ae),name:Ie,section:bt,url:ve,target:Ce,parent:W.length>0&&!ke?Td(W[W.length-1]):void 0,perform:st,priority:Vt,subtitle:ke?void 0:Ut};if(Q.push(Ot),je?.length){const Gt=Od(je,[...W,ae]);Q.push(...Gt)}}return Q}const cf=B=>{const W=[{id:"preferences/theme",name:(0,Ka.t)("command-palette.action.change-theme","Change theme..."),keywords:"interface color dark light",section:(0,Ka.t)("command-palette.section.preferences","Preferences"),priority:rc},{id:"preferences/dark-theme",name:(0,Ka.t)("command-palette.action.dark-theme","Dark"),keywords:"dark theme",perform:()=>(0,cl.L)("dark"),parent:"preferences/theme",priority:rc},{id:"preferences/light-theme",name:(0,Ka.t)("command-palette.action.light-theme","Light"),keywords:"light theme",perform:()=>(0,cl.L)("light"),parent:"preferences/theme",priority:rc}],Q=Od(B);return[...W,...Q]};function df(B){const[W,Q]=(0,s.useState)([]),[ae,ve]=(0,s.useState)([]),Ce=(0,En.useSelector)(Ie=>Ie.navBarTree);return(0,s.useEffect)(()=>{const Ie=cf(Ce);Q(Ie)},[Ce]),(0,s.useEffect)(()=>{B||sf().then(Ie=>ve(Ie)).catch(Ie=>{console.error("Error loading recent dashboard actions",Ie)})},[B]),B?W:[...ae,...W]}var uf=e(51670);const Id={name:"none",priority:js.Priority.NORMAL};function cc(B,W){return W.priority-B.priority}function mf(){const{search:B,actions:W,rootActionId:Q}=(0,js.useKBar)(gt=>({search:gt.searchQuery,actions:gt.actions,rootActionId:gt.currentRootActionId})),ae=s.useMemo(()=>Object.keys(W).reduce((gt,bt)=>{const Vt=W[bt];if(!Vt.parent&&!Q&&gt.push(Vt),Vt.id===Q)for(let Ut=0;Ut<Vt.children.length;Ut++)gt.push(Vt.children[Ut]);return gt},[]).sort(cc),[W,Q]),ve=s.useCallback(gt=>{let bt=[];for(let Vt=0;Vt<gt.length;Vt++)bt.push(gt[Vt]);return function Vt(Ut,Ot=bt){for(let Gt=0;Gt<Ut.length;Gt++)if(Ut[Gt].children.length>0){let ln=Ut[Gt].children;for(let pa=0;pa<ln.length;pa++)Ot.push(ln[pa]);Vt(Ut[Gt].children,Ot)}return Ot}(gt)},[]),Ce=!B,Ie=s.useMemo(()=>Ce?ae:ve(ae),[ve,ae,Ce]),ke=dc(Ie,B),je=s.useMemo(()=>{let gt={},bt=[],Vt=[];for(let Ot=0;Ot<ke.length;Ot++){const Gt=ke[Ot],ln=Gt.action,pa=Gt.score||js.Priority.NORMAL,Ca={name:typeof ln.section=="string"?ln.section:ln.section?.name||Id.name,priority:typeof ln.section=="string"?pa:ln.section?.priority||0+pa};gt[Ca.name]||(gt[Ca.name]=[],bt.push(Ca)),gt[Ca.name].push({priority:ln.priority+pa,action:ln})}Vt=bt.sort(cc).map(Ot=>({name:Ot.name,actions:gt[Ot.name].sort(cc).map(Gt=>Gt.action)}));let Ut=[];for(let Ot=0;Ot<Vt.length;Ot++){let Gt=Vt[Ot];Gt.name!==Id.name&&Ut.push(Gt.name);for(let ln=0;ln<Gt.actions.length;ln++)Ut.push(Gt.actions[ln])}return Ut},[ke]),st=s.useMemo(()=>Q,[je]);return s.useMemo(()=>({results:je,rootActionId:st}),[st,je])}function dc(B,W){const Q=uc(),ae=s.useMemo(()=>({filtered:B,search:W}),[B,W]),{filtered:ve,search:Ce}=(0,Dd.useThrottledValue)(ae);return s.useMemo(()=>{if(Ce.trim()==="")return ve.map(je=>({score:0,action:je}));const Ie=ve.map(({name:je,keywords:st})=>`${je} ${st??""}`.toLowerCase()),ke=[];if(Ce.length>ff){const je=Ce.toLowerCase();for(let st=0;st<Ie.length;st++){const bt=Ie[st].indexOf(je);if(bt>-1){const Vt=bt*-1,Ut=ve[st];ke.push({score:Vt,action:Ut})}}}else{const je=Q.split(Ce).length,st=1/0,gt=je<5,[,bt,Vt]=Q.search(Ie,Ce,gt,st);if(bt&&Vt)for(let Ut=0;Ut<Vt.length;Ut++){const Ot=Vt[Ut],Gt=Vt.length-Ut,ln=ve[bt.idx[Ot]];ke.push({score:Gt,action:ln})}}return ke},[ve,Ce,Q])}const ff=25;function uc(){const B=s.useRef();return B.current||(B.current=new uf.Z({intraMode:0,intraIns:0})),B.current}function gf(){const B=(0,lt.wW)(Rd),{query:W,showing:Q,searchQuery:ae}=(0,js.useKBar)(gt=>({showing:gt.visualState===js.VisualState.showing,searchQuery:gt.searchQuery})),ve=df(ae);(0,js.useRegisterActions)(ve,[ve]);const{searchResults:Ce,isFetchingSearchResults:Ie}=Pd(ae,Q),ke=(0,s.useRef)(null),{overlayProps:je}=(0,_o.Ir)({isOpen:Q,onClose:()=>W.setVisualState(js.VisualState.animatingOut)},ke),{dialogProps:st}=(0,po.R)({},ke);return(0,s.useEffect)(()=>{Q&&(0,zr.ff)("command_palette_opened")},[Q]),ve.length>0?s.createElement(js.KBarPortal,null,s.createElement(js.KBarPositioner,{className:B.positioner},s.createElement(js.KBarAnimator,{className:B.animator},s.createElement(nc.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},s.createElement("div",{...je,...st},s.createElement("div",{className:B.searchContainer},s.createElement(ka.J,{name:"search",size:"md"}),s.createElement(js.KBarSearch,{defaultPlaceholder:(0,Ka.t)("command-palette.search-box.placeholder","Search or jump to..."),className:B.search}),s.createElement("div",{className:B.loadingBarContainer},Ie&&s.createElement(bd.F,{width:500,delay:0}))),s.createElement("div",{className:B.resultsContainer},s.createElement(hf,{searchResults:Ce}))))))):null}const hf=({searchResults:B})=>{const{results:W,rootActionId:Q}=mf(),ae=(0,lt.wW)(Rd),ve=(0,Ka.t)("command-palette.section.dashboard-search-results","Dashboards"),Ce=(0,Ka.t)("command-palette.section.folder-search-results","Folders"),Ie=(0,s.useMemo)(()=>B.filter(st=>st.id.startsWith("go/dashboard")).map(st=>new js.ActionImpl(st,{store:{}})),[B]),ke=(0,s.useMemo)(()=>B.filter(st=>st.id.startsWith("go/folder")).map(st=>new js.ActionImpl(st,{store:{}})),[B]),je=(0,s.useMemo)(()=>{const st=[...W];return ke.length>0&&(st.push(Ce),st.push(...ke)),Ie.length>0&&(st.push(ve),st.push(...Ie)),st},[W,ve,Ie,Ce,ke]);return s.createElement(Zm,{items:je,maxHeight:650,onRender:({item:st,active:gt})=>{const bt=je[0]===st;return typeof st=="string"?s.createElement("div",{className:(0,we.cx)(ae.sectionHeader,bt&&ae.sectionHeaderFirst)},st):s.createElement(ac,{action:st,active:gt,currentRootActionId:Q})}})},Rd=B=>({positioner:(0,we.css)({zIndex:B.zIndex.portal,marginTop:"0px",paddingTop:"4px !important","&::before":{content:'""',position:"fixed",top:0,right:0,bottom:0,left:0,background:B.components.overlay.background,backdropFilter:"blur(1px)"}}),animator:(0,we.css)({maxWidth:B.breakpoints.values.md,width:"100%",background:B.colors.background.primary,color:B.colors.text.primary,borderRadius:B.shape.radius.default,border:`1px solid ${B.colors.border.weak}`,overflow:"hidden",boxShadow:B.shadows.z3}),loadingBarContainer:(0,we.css)({position:"absolute",left:0,right:0,bottom:0}),searchContainer:(0,we.css)({alignItems:"center",background:B.components.input.background,borderBottom:`1px solid ${B.colors.border.weak}`,display:"flex",gap:B.spacing(1),padding:B.spacing(1,2),position:"relative"}),search:(0,we.css)({fontSize:B.typography.fontSize,width:"100%",boxSizing:"border-box",outline:"none",border:"none",color:B.components.input.text}),spinner:(0,we.css)({height:"22px"}),resultsContainer:(0,we.css)({paddingBottom:B.spacing(1)}),sectionHeader:(0,we.css)({padding:B.spacing(1.5,2,2,2),fontSize:B.typography.bodySmall.fontSize,fontWeight:B.typography.fontWeightMedium,color:B.colors.text.secondary,borderTop:`1px solid ${B.colors.border.weak}`,marginTop:B.spacing(1)}),sectionHeaderFirst:(0,we.css)({paddingBottom:B.spacing(1),borderTop:"none",marginTop:0})});var to=e(54278),Rr=e(50263),Eo=e(6753),hp=e(6556),mc=e(40377),Ad=e(40604);const Ld=({children:B})=>{const W=(0,lt.wW)(pf);return s.createElement(s.Fragment,null,B,s.createElement("span",{className:W.highlight}))},pf=B=>({highlight:(0,we.css)({backgroundColor:B.colors.success.main,borderRadius:B.shape.radius.circle,width:"6px",height:"6px",display:"inline-block;",position:"absolute",top:"50%",transform:"translateY(-50%)"})});var fc=e(59672);function Bd({children:B,isActive:W,onClick:Q,target:ae,url:ve}){const Ce=(0,lt.l4)(),Ie=vf(Ce,W),ke=!ae&&ve.startsWith("/")?fc.r:"a",je=s.createElement("div",{className:Ie.linkContent},B,ae==="_blank"&&s.createElement(ka.J,{"data-testid":"external-link-icon",name:"external-link-alt"}));return s.createElement(ke,{"data-testid":Cs.wl.components.NavMenu.item,className:(0,we.cx)(Ie.container,{[Ie.containerActive]:W}),href:ve,target:ae,onClick:Q},je)}Bd.displayName="MegaMenuItemText";const vf=(B,W)=>({container:(0,we.css)({alignItems:"center",color:W?B.colors.text.primary:B.colors.text.secondary,height:"100%",position:"relative",width:"100%","&:hover, &:focus-visible":{color:B.colors.text.primary,textDecoration:"underline"},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${B.colors.primary.main}`,outlineOffset:"-2px",transition:"none"}}),containerActive:(0,we.css)({backgroundColor:B.colors.background.secondary,borderTopRightRadius:B.shape.radius.default,borderBottomRightRadius:B.shape.radius.default,position:"relative","&::before":{backgroundImage:B.colors.gradients.brandVertical,borderRadius:B.shape.radius.default,content:'" "',display:"block",height:"100%",position:"absolute",transform:"translateX(-50%)",width:B.spacing(.5)}}),linkContent:(0,we.css)({alignItems:"center",display:"flex",gap:"0.5rem",height:"100%",width:"100%"})}),pp=B=>{let W=B.children||[];if(B.id==="help"){const Q=()=>{appEvents.publish(new ShowModalReactEvent({component:HelpModal}))};B.children=[...W,...getFooterLinks(),...vc(),{id:"keyboard-shortcuts",text:t("nav.help/keyboard-shortcuts","Keyboard shortcuts"),icon:"keyboard",onClick:Q}]}return B},wd=(B,W)=>{const Q={...B},ae=Q.onClick;return Q.onClick=()=>{(0,zr.ff)("grafana_navigation_item_clicked",{path:Q.url??Q.id,state:W}),ae?.()},Q.children&&(Q.children=Q.children.map(ve=>wd(ve,W))),Q},vp=(B,W)=>!!(B===W||gc(B,W)),gc=(B,W)=>!!B.children?.some(Q=>Q===W?!0:gc(Q,W)),dl=B=>B?.split("?")[0]??"",hc=(B,W)=>{const Q=dl(W?.url),ae=dl(B.url);return ae&&ae.length>Q?.length},pc=(B,W,Q)=>{const ae="/dashboards";for(const ve of B){const Ce=dl(ve.url),Ie=T.u.stripBaseFromUrl(Ce);if(Ie&&ve.id!=="starred")if(Ie===W){Q=ve;break}else if(Ie!=="/"&&W.startsWith(Ie))hc(ve,Q)&&(Q=ve);else if(Ie==="/alerting/list"&&W.startsWith("/alerting/notification/")){Q=ve;break}else Ie===ae&&W.startsWith("/d/")&&hc(ve,Q)&&(Q=ve);if(ve.children&&(Q=pc(ve.children,W,Q)),dl(Q?.url)===W)return Q}return Q};function vc(){const{buildInfo:B,licenseInfo:W}=config,Q=W.stateInfo?` (${W.stateInfo})`:"",ae=[];return ae.push({target:"_blank",id:"version",text:`${B.edition}${Q}`,url:W.licenseUrl,icon:"external-link-alt"}),B.hasUpdate&&ae.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),ae}const ul=2;function Ud({link:B,activeItem:W,level:Q=0,onClick:ae}){const{chrome:ve}=(0,Mo.p)(),Ie=ve.useState().megaMenu==="docked",ke=(0,Qs.TH)(),je=B.highlightText?Ld:s.Fragment,st=gc(B,W),gt=B===W||Q===ul&&st,[bt,Vt]=(0,Eo.Z)(`grafana.navigation.expanded[${B.text}]`,!!st),Ut=Q<ul&&!!(Nd(B)||B.emptyMessage),Ot=(0,s.useRef)(null),Gt=(0,lt.wW)(Ef);return(0,s.useEffect)(()=>{st&&Vt(!0)},[st,ke,Ie,Vt]),(0,s.useEffect)(()=>{Ie&&gt&&Ot.current&&yf(Ot.current)&&Ot.current.scrollIntoView({block:"center"})},[gt,Ie]),B.url?s.createElement("li",{ref:Ot,className:Gt.listItem},s.createElement("div",{className:(0,we.cx)(Gt.menuItem,{[Gt.menuItemWithIcon]:!!(Q===0&&B.icon)})},Q!==0&&s.createElement(Ad.A,{level:Q===ul?Q-1:Q,spacing:3}),Q===ul&&s.createElement("div",{className:Gt.itemConnector}),s.createElement("div",{className:Gt.collapseButtonWrapper},Ut&&s.createElement(Hs.h,{"aria-label":`${bt?"Collapse":"Expand"} section ${B.text}`,className:Gt.collapseButton,onClick:()=>Vt(!bt),name:bt?"angle-down":"angle-right",size:"md",variant:"secondary"})),s.createElement("div",{className:Gt.collapsibleSectionWrapper},s.createElement(Bd,{isActive:gt,onClick:()=>{B.onClick?.(),ae?.()},target:B.target,url:B.url},s.createElement("div",{className:(0,we.cx)(Gt.labelWrapper,{[Gt.hasActiveChild]:st,[Gt.labelWrapperWithIcon]:!!(Q===0&&B.icon)})},Q===0&&B.icon&&s.createElement(je,null,s.createElement(ka.J,{className:Gt.icon,name:(0,hp.iJ)(B.icon)??"link",size:"lg"})),s.createElement(mc.x,{truncate:!0},B.text))))),Ut&&bt&&s.createElement("ul",{className:Gt.children},Nd(B)?B.children.filter(ln=>!ln.isCreateAction).map(ln=>s.createElement(Ud,{key:`${B.text}-${ln.text}`,link:ln,activeItem:W,onClick:ae,level:Q+1})):s.createElement("div",{className:Gt.emptyMessage},B.emptyMessage))):null}const Ef=B=>({icon:(0,we.css)({width:B.spacing(3)}),listItem:(0,we.css)({flex:1,maxWidth:"100%"}),menuItem:(0,we.css)({display:"flex",alignItems:"center",gap:B.spacing(1),height:B.spacing(4),paddingLeft:B.spacing(.5),position:"relative"}),menuItemWithIcon:(0,we.css)({paddingLeft:B.spacing(0)}),collapseButtonWrapper:(0,we.css)({display:"flex",justifyContent:"center",width:B.spacing(3),flexShrink:0}),itemConnector:(0,we.css)({position:"relative",height:"100%",width:B.spacing(1.5),"&::before":{borderLeft:`1px solid ${B.colors.border.medium}`,content:'""',height:"100%",right:0,position:"absolute",transform:"translateX(50%)"}}),collapseButton:(0,we.css)({margin:0}),collapsibleSectionWrapper:(0,we.css)({alignItems:"center",display:"flex",flex:1,height:"100%",minWidth:0}),labelWrapper:(0,we.css)({display:"flex",alignItems:"center",gap:B.spacing(2),minWidth:0,paddingLeft:B.spacing(1)}),labelWrapperWithIcon:(0,we.css)({paddingLeft:B.spacing(.5)}),hasActiveChild:(0,we.css)({color:B.colors.text.primary}),children:(0,we.css)({display:"flex",listStyleType:"none",flexDirection:"column"}),emptyMessage:(0,we.css)({color:B.colors.text.secondary,fontStyle:"italic",padding:B.spacing(1,1.5,1,7)})});function Nd(B){return!!(B.children&&B.children.length>0)}function yf(B){const W=B.getBoundingClientRect();return W.bottom<0||W.top>=window.innerHeight}const Wd="300px",Ec=s.memo((0,s.forwardRef)(({onClose:B,...W},Q)=>{const ae=(0,En.useSelector)(bt=>bt.navBarTree),ve=(0,lt.wW)(bf),Ce=(0,Qs.TH)(),{chrome:Ie}=(0,Mo.p)(),ke=Ie.useState(),je=ae.filter(bt=>bt.id!=="profile"&&bt.id!=="help").map(bt=>wd(bt,ke.megaMenu)),st=pc(je,Ce.pathname),gt=()=>{Ie.setMegaMenu(ke.megaMenu==="docked"?"open":"docked"),setTimeout(()=>{document.getElementById("dock-menu-button")?.focus()})};return s.createElement("div",{"data-testid":Cs.wl.components.NavMenu.Menu,ref:Q,...W},s.createElement("div",{className:ve.mobileHeader},s.createElement(ka.J,{name:"bars",size:"xl"}),s.createElement(Hs.h,{tooltip:(0,Ka.t)("navigation.megamenu.close","Close menu"),name:"times",onClick:B,size:"xl",variant:"secondary"})),s.createElement("nav",{className:ve.content},s.createElement(Rr.$,{showScrollIndicators:!0,hideHorizontalTrack:!0},s.createElement("ul",{className:ve.itemList},je.map((bt,Vt)=>s.createElement(St.K,{key:bt.text,direction:Vt===0?"row-reverse":"row",alignItems:"center"},Vt===0&&s.createElement(Hs.h,{id:"dock-menu-button",className:ve.dockMenuButton,tooltip:ke.megaMenu==="docked"?(0,Ka.t)("navigation.megamenu.undock","Undock menu"):(0,Ka.t)("navigation.megamenu.dock","Dock menu"),name:"web-section-alt",onClick:gt,variant:"secondary"}),s.createElement(Ud,{link:bt,onClick:ke.megaMenu==="open"?B:void 0,activeItem:st})))))))}));Ec.displayName="MegaMenu";const bf=B=>({content:(0,we.css)({display:"flex",flexDirection:"column",height:"100%",minHeight:0,position:"relative"}),mobileHeader:(0,we.css)({display:"flex",justifyContent:"space-between",padding:B.spacing(1,1,1,2),borderBottom:`1px solid ${B.colors.border.weak}`,[B.breakpoints.up("md")]:{display:"none"}}),itemList:(0,we.css)({boxSizing:"border-box",display:"flex",flexDirection:"column",listStyleType:"none",padding:B.spacing(1),[B.breakpoints.up("md")]:{width:Wd}}),dockMenuButton:(0,we.css)({display:"none",[B.breakpoints.up("xl")]:{display:"inline-flex"}})});var ml=e(25997),$o=e(40235);function ei({breakpoint:B,onChange:W}){(0,s.useEffect)(()=>{const Q=window.matchMedia(`(min-width: ${B}px)`),ae=ve=>W(ve);return Q.addEventListener("change",ae),()=>Q.removeEventListener("change",ae)},[B,W])}var fl=e(24344);function Fd({href:B,isCurrent:W,text:Q,index:ae,flexGrow:ve}){const Ce=(0,lt.wW)(gl),Ie=()=>{(0,zr.ff)("grafana_breadcrumb_clicked",{url:B})};return s.createElement("li",{className:Ce.breadcrumbWrapper,style:{flexGrow:ve}},W?s.createElement("span",{"data-testid":ml.z.Breadcrumbs.breadcrumb(Q),className:Ce.breadcrumb,"aria-current":"page",title:Q},Q):s.createElement(s.Fragment,null,s.createElement("a",{onClick:Ie,"data-testid":ml.z.Breadcrumbs.breadcrumb(Q),className:(0,we.cx)(Ce.breadcrumb,Ce.breadcrumbLink),title:Q,href:B},Q),s.createElement("div",{className:Ce.separator,"aria-hidden":!0},s.createElement(ka.J,{name:"angle-right"}))))}const gl=B=>({breadcrumb:(0,we.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",padding:B.spacing(0,.5),whiteSpace:"nowrap",color:B.colors.text.secondary}),breadcrumbLink:(0,we.css)({color:B.colors.text.primary,"&:hover":{textDecoration:"underline"}}),breadcrumbWrapper:(0,we.css)({alignItems:"center",color:B.colors.text.primary,display:"flex",flex:1,minWidth:0,maxWidth:"max-content",[B.breakpoints.down("sm")]:{display:"none","&:nth-last-child(2)":{display:"flex",minWidth:"40px"},"&:last-child":{display:"flex"}}}),separator:(0,we.css)({color:B.colors.text.secondary})});function Df({breadcrumbs:B,className:W}){const Q=(0,lt.wW)(Cf);return s.createElement("nav",{"aria-label":"Breadcrumbs",className:W},s.createElement("ol",{className:Q.breadcrumbs},B.map((ae,ve)=>s.createElement(Fd,{...ae,isCurrent:ve===B.length-1,key:ve,index:ve,flexGrow:Kd(ve,B.length)}))))}function Kd(B,W){return W<5&&B>0&&B<W-2||W>6&&B>1&&B<W-3?4:10}const Cf=B=>({breadcrumbs:(0,we.css)({display:"flex",alignItems:"center",flexWrap:"nowrap",overflow:"hidden"})});var hl=e(65946),jr=e(27737),Vd=e(35304);const _d="mega-menu-toggle";function Wi({actions:B,searchBarHidden:W,sectionNav:Q,pageNav:ae,onToggleMegaMenu:ve,onToggleSearchBar:Ce,onToggleKioskMode:Ie}){const{chrome:ke}=(0,Mo.p)(),je=ke.useState(),st=(0,En.useSelector)(ln=>ln.navIndex)[fl.Qz],gt=(0,lt.l4)(),bt=(0,lt.wW)($d),Vt=(0,hl.t)(Q,ae,st),Ut=gt.breakpoints.values.xl,[Ot,Gt]=(0,s.useState)(!window.matchMedia(`(min-width: ${Ut}px)`).matches);return ei({breakpoint:Ut,onChange:ln=>{Gt(!ln.matches)}}),s.createElement("div",{"data-testid":ml.z.NavToolbar.container,className:bt.pageToolbar},s.createElement("div",{className:bt.menuButton},s.createElement(Hs.h,{id:_d,name:"bars",tooltip:je.megaMenu==="closed"||je.megaMenu==="docked"&&Ot?(0,Ka.t)("navigation.toolbar.open-menu","Open menu"):(0,Ka.t)("navigation.toolbar.close-menu","Close menu"),tooltipPlacement:"bottom",size:"xl",onClick:ve,"data-testid":ml.z.NavBar.Toggle.button})),s.createElement(Df,{breadcrumbs:Vt,className:bt.breadcrumbsWrapper}),s.createElement("div",{className:bt.actions},B,B&&s.createElement(Vd.M,null),W&&s.createElement($o.h,{onClick:Ie,narrow:!0,title:(0,Ka.t)("navigation.toolbar.enable-kiosk","Enable kiosk mode"),icon:"monitor"}),s.createElement($o.h,{onClick:Ce,narrow:!0,title:(0,Ka.t)("navigation.toolbar.toggle-search-bar","Toggle top search bar")},s.createElement(ka.J,{name:W?"angle-down":"angle-up",size:"xl"}))))}const $d=B=>({breadcrumbsWrapper:(0,we.css)({display:"flex",overflow:"hidden",[B.breakpoints.down("sm")]:{minWidth:"50%"}}),pageToolbar:(0,we.css)({height:jr.$,display:"flex",padding:B.spacing(0,1,0,2),alignItems:"center"}),menuButton:(0,we.css)({display:"flex",alignItems:"center",marginRight:B.spacing(1)}),actions:(0,we.css)({label:"NavToolbar-actions",display:"flex",alignItems:"center",flexWrap:"nowrap",justifyContent:"flex-end",paddingLeft:B.spacing(1),flexGrow:1,gap:B.spacing(.5),minWidth:0,".body-drawer-open &":{display:"none"}})});function zd({}){const B=(0,lt.l4)(),{chrome:W}=(0,Mo.p)(),Q=W.useState(),ae=(0,s.useRef)(Q.megaMenu),ve=Q.searchBarHidden||Q.kioskMode===En.KioskMode.TV;(0,s.useEffect)(()=>{ae.current=Q.megaMenu},[Q.megaMenu]);const Ce=(0,s.useRef)(null),Ie=(0,s.useRef)(null),ke=ae.current==="docked"&&Q.megaMenu==="open"?0:B.transitions.duration.shortest,je=(0,lt.wW)(kd,ke),st=Q.megaMenu==="open",gt=()=>W.setMegaMenu("closed"),{overlayProps:bt,underlayProps:Vt}=(0,_o.Ir)({isDismissable:!0,isOpen:!0,onClose:gt,shouldCloseOnInteractOutside:Gt=>!document.getElementById(_d)?.contains(Gt)},Ce),{dialogProps:Ut}=(0,po.R)({},Ce),Ot=(0,lt.wW)(Pf,ve);return s.createElement("div",{className:Ot.wrapper},s.createElement(_o.Xj,null,s.createElement(to.Z,{nodeRef:Ce,in:st,unmountOnExit:!0,classNames:je.overlay,timeout:{enter:ke,exit:0}},s.createElement(nc.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},s.createElement(Ec,{className:Ot.menu,onClose:gt,ref:Ce,...bt,...Ut}))),s.createElement(to.Z,{nodeRef:Ie,in:st,unmountOnExit:!0,classNames:je.backdrop,timeout:{enter:ke,exit:0}},s.createElement("div",{ref:Ie,className:Ot.backdrop,...Vt}))))}const Pf=(B,W)=>{const Q=(W?jr.$:jr.$*2)+1;return{backdrop:(0,we.css)({backdropFilter:"blur(1px)",backgroundColor:B.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:W?0:jr.$,zIndex:B.zIndex.modalBackdrop,[B.breakpoints.up("md")]:{top:Q}}),menu:(0,we.css)({display:"flex",bottom:0,flexDirection:"column",left:0,right:0,zIndex:B.zIndex.modal,position:"fixed",top:W?0:jr.$,backgroundColor:B.colors.background.primary,boxSizing:"content-box",flex:"1 1 0",[B.breakpoints.up("md")]:{right:"unset",borderRight:`1px solid ${B.colors.border.weak}`,top:Q}}),wrapper:(0,we.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:B.zIndex.sidemenu})}},kd=(B,W)=>{const Q={transitionDuration:`${W}ms`,transitionTimingFunction:B.transitions.easing.easeInOut,[B.breakpoints.down("md")]:{overflow:"hidden"}},ae={...Q,transitionProperty:"box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},ve={...Q,transitionProperty:"opacity"},Ce={width:"100%",[B.breakpoints.up("md")]:{boxShadow:B.shadows.z3,width:Wd}},Ie={boxShadow:"none",width:0},ke={opacity:1},je={opacity:0};return{backdrop:{enter:(0,we.css)(je),enterActive:(0,we.css)(ve,ke),enterDone:(0,we.css)(ke)},overlay:{enter:(0,we.css)(Ie),enterActive:(0,we.css)(ae,Ce),enterDone:(0,we.css)(Ce)}}};function pl({children:B,icon:W,isActive:Q,isChild:ae,onClick:ve,target:Ce,url:Ie}){const ke=(0,lt.l4)(),je=Fi(ke,Q,ae),st=s.createElement("div",{className:je.linkContent},W&&s.createElement(ka.J,{"data-testid":"dropdown-child-icon",name:W}),s.createElement("div",{className:je.linkText},B),Ce==="_blank"&&s.createElement(ka.J,{"data-testid":"external-link-icon",name:"external-link-alt",className:je.externalLinkIcon}));let gt=s.createElement("button",{"data-testid":Cs.wl.components.NavMenu.item,className:(0,we.cx)(je.button,je.element),onClick:ve},st);return Ie&&(gt=!Ce&&Ie.startsWith("/")?s.createElement(fc.r,{"data-testid":Cs.wl.components.NavMenu.item,className:je.element,href:Ie,target:Ce,onClick:ve},st):s.createElement("a",{"data-testid":Cs.wl.components.NavMenu.item,href:Ie,target:Ce,className:je.element,onClick:ve},st)),s.createElement("li",{className:je.listItem},gt)}pl.displayName="NavBarMenuItem";const Fi=(B,W,Q)=>({button:(0,we.css)({backgroundColor:"unset",borderStyle:"unset"}),linkContent:(0,we.css)({alignItems:"center",display:"flex",gap:"0.5rem",height:"100%",width:"100%"}),linkText:(0,we.css)({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),externalLinkIcon:(0,we.css)({color:B.colors.text.secondary}),element:(0,we.css)({alignItems:"center",boxSizing:"border-box",position:"relative",color:W?B.colors.text.primary:B.colors.text.secondary,padding:B.spacing(1,1,1,Q?5:0),...Q&&{borderRadius:B.shape.radius.default},width:"100%","&:hover, &:focus-visible":{...Q&&{background:B.colors.emphasize(B.colors.background.primary,.03)},textDecoration:"underline",color:B.colors.text.primary},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${B.colors.primary.main}`,outlineOffset:"-2px",transition:"none"},"&::before":{display:W?"block":"none",content:'" "',height:B.spacing(3),position:"absolute",left:B.spacing(1),top:"50%",transform:"translateY(-50%)",width:B.spacing(.5),borderRadius:B.shape.radius.default,backgroundImage:B.colors.gradients.brandVertical}}),listItem:(0,we.css)({boxSizing:"border-box",position:"relative",display:"flex",width:"100%",...Q&&{padding:B.spacing(0,2)}})});var Sf=e(42202);function yc({link:B}){const W=(0,lt.l4)(),Q=xf(W);if(B.icon==="grafana")return s.createElement(Jc.c.MenuLogo,{className:Q.img});if(B.icon){const ae=(0,Sf.toIconName)(B.icon);return s.createElement(ka.J,{name:ae??"link",size:"xl"})}else return s.createElement("img",{className:(0,we.cx)(Q.img,B.roundIcon&&Q.round),src:B.img,alt:""})}function xf(B){return{img:(0,we.css)({height:B.spacing(3),width:B.spacing(3)}),round:(0,we.css)({borderRadius:B.shape.radius.circle})}}const Mf=({children:B})=>{const W=(0,lt.wW)(Hd);return s.createElement("div",null,B,s.createElement("span",{className:W.highlight}))},Hd=B=>({highlight:(0,we.css)({backgroundColor:B.colors.success.main,borderRadius:B.shape.radius.circle,width:"6px",height:"6px",display:"inline-block",position:"absolute",top:"50%",transform:"translateY(-50%)"})});function Gd({link:B,activeItem:W,children:Q,className:ae,onClose:ve}){const Ce=(0,lt.wW)(Ep),Ie=B.highlightText?Mf:s.Fragment,ke=B===W,je=ol(B,W),[st,gt]=(0,Eo.Z)(`grafana.navigation.expanded[${B.text}]`,!1)??!!je;return s.createElement(s.Fragment,null,s.createElement("div",{className:(0,we.cx)(Ce.collapsibleSectionWrapper,ae)},s.createElement(pl,{isActive:B===W,onClick:()=>{B.onClick?.(),ve?.()},target:B.target,url:B.url},s.createElement("div",{className:(0,we.cx)(Ce.labelWrapper,{[Ce.isActive]:ke,[Ce.hasActiveChild]:je})},s.createElement(Ie,null,s.createElement(yc,{link:B})),B.text)),Q&&s.createElement(ue.zx,{"aria-label":`${st?"Collapse":"Expand"} section ${B.text}`,variant:"secondary",fill:"text",className:Ce.collapseButton,onClick:()=>gt(!st)},s.createElement(ka.J,{name:st?"angle-up":"angle-down",size:"xl"}))),st&&Q)}const Ep=B=>({collapsibleSectionWrapper:(0,we.css)({alignItems:"center",display:"flex"}),collapseButton:(0,we.css)({color:B.colors.text.disabled,padding:B.spacing(0,.5),marginRight:B.spacing(1)}),collapseWrapperActive:(0,we.css)({backgroundColor:B.colors.action.disabledBackground}),collapseContent:(0,we.css)({padding:0}),labelWrapper:(0,we.css)({display:"grid",fontSize:B.typography.pxToRem(14),gridAutoFlow:"column",gridTemplateColumns:`${B.spacing(7)} auto`,placeItems:"center",fontWeight:B.typography.fontWeightMedium}),isActive:(0,we.css)({color:B.colors.text.primary,"&::before":{display:"block",content:'" "',height:B.spacing(3),position:"absolute",left:B.spacing(1),top:"50%",transform:"translateY(-50%)",width:B.spacing(.5),borderRadius:B.shape.radius.default,backgroundImage:B.colors.gradients.brandVertical}}),hasActiveChild:(0,we.css)({color:B.colors.text.primary})});function jd({link:B,activeItem:W,onClose:Q}){const ae=(0,lt.wW)(Tf);return B.emptyMessage&&!Qd(B)?s.createElement(Gd,{onClose:Q,link:B,activeItem:W},s.createElement("ul",{className:ae.children},s.createElement("div",{className:ae.emptyMessage},B.emptyMessage))):s.createElement(Gd,{onClose:Q,link:B,activeItem:W},Qd(B)&&s.createElement("ul",{className:ae.children},B.children.map(ve=>!ve.isCreateAction&&s.createElement(pl,{key:`${B.text}-${ve.text}`,isActive:of(ve,W),isChild:!0,onClick:()=>{ve.onClick?.(),Q()},target:ve.target,url:ve.url},ve.text))))}const Tf=B=>({children:(0,we.css)({display:"flex",flexDirection:"column"}),flex:(0,we.css)({display:"flex"}),itemWithoutMenu:(0,we.css)({position:"relative",placeItems:"inherit",justifyContent:"start",display:"flex",flexGrow:1,alignItems:"center"}),fullWidth:(0,we.css)({height:"100%",width:"100%"}),iconContainer:(0,we.css)({display:"flex",placeContent:"center"}),itemWithoutMenuContent:(0,we.css)({display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${B.spacing(7)} auto`,alignItems:"center",height:"100%"}),linkText:(0,we.css)({fontSize:B.typography.pxToRem(14),justifySelf:"start"}),emptyMessage:(0,we.css)({color:B.colors.text.secondary,fontStyle:"italic",padding:B.spacing(1,1.5,1,7)})});function Qd(B){return!!(B.children&&B.children.length>0)}const bc="350px";function vi({activeItem:B,navItems:W,searchBarHidden:Q,onClose:ae}){const ve=(0,lt.l4)(),Ce=Of(ve,Q),Ie=ve.transitions.duration.shortest,ke=If(ve,Ie),{chrome:je}=(0,Mo.p)(),st=je.useState(),gt=(0,s.useRef)(null),bt=(0,s.useRef)(null),{dialogProps:Vt}=(0,po.R)({},gt),[Ut,Ot]=(0,s.useState)(!1),Gt=()=>Ot(!1),{overlayProps:ln,underlayProps:pa}=(0,_o.Ir)({isDismissable:!0,isOpen:!0,onClose:Gt},gt);return(0,s.useEffect)(()=>{st.megaMenu==="open"&&Ot(!0)},[st.megaMenu]),s.createElement(_o.Xj,null,s.createElement(to.Z,{nodeRef:gt,in:Ut,unmountOnExit:!0,classNames:ke.overlay,timeout:{enter:Ie,exit:0},onExited:ae},s.createElement(nc.MT,{contain:!0,autoFocus:!0},s.createElement("div",{"data-testid":Cs.wl.components.NavMenu.Menu,ref:gt,...ln,...Vt,className:Ce.container},s.createElement("div",{className:Ce.mobileHeader},s.createElement(ka.J,{name:"bars",size:"xl"}),s.createElement(Hs.h,{"aria-label":"Close navigation menu",tooltip:"Close menu",name:"times",onClick:Gt,size:"xl",variant:"secondary"})),s.createElement("nav",{className:Ce.content},s.createElement(Rr.$,{showScrollIndicators:!0,hideHorizontalTrack:!0},s.createElement("ul",{className:Ce.itemList},W.map(Ca=>s.createElement(jd,{link:Ca,onClose:Gt,activeItem:B,key:Ca.text})))))))),s.createElement(to.Z,{nodeRef:bt,in:Ut,unmountOnExit:!0,classNames:ke.backdrop,timeout:{enter:Ie,exit:0}},s.createElement("div",{ref:bt,className:Ce.backdrop,...pa})))}vi.displayName="NavBarMenu";const Of=(B,W)=>{const Q=(W?jr.$:jr.$*2)+1;return{backdrop:(0,we.css)({backdropFilter:"blur(1px)",backgroundColor:B.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:W?0:jr.$,zIndex:B.zIndex.modalBackdrop,[B.breakpoints.up("md")]:{top:Q}}),container:(0,we.css)({display:"flex",bottom:0,flexDirection:"column",left:0,marginRight:B.spacing(1.5),right:0,zIndex:B.zIndex.modal,position:"fixed",top:W?0:jr.$,backgroundColor:B.colors.background.primary,boxSizing:"content-box",flex:"1 1 0",[B.breakpoints.up("md")]:{borderRight:`1px solid ${B.colors.border.weak}`,right:"unset",top:Q}}),content:(0,we.css)({display:"flex",flexDirection:"column",flexGrow:1,minHeight:0}),mobileHeader:(0,we.css)({display:"flex",justifyContent:"space-between",padding:B.spacing(1,1,1,2),borderBottom:`1px solid ${B.colors.border.weak}`,[B.breakpoints.up("md")]:{display:"none"}}),itemList:(0,we.css)({display:"grid",gridAutoRows:`minmax(${B.spacing(6)}, auto)`,gridTemplateColumns:`minmax(${bc}, auto)`,minWidth:bc})}},If=(B,W)=>{const Q={transitionDuration:`${W}ms`,transitionTimingFunction:B.transitions.easing.easeInOut,[B.breakpoints.down("md")]:{overflow:"hidden"}},ae={...Q,transitionProperty:"box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},ve={...Q,transitionProperty:"opacity"},Ce={width:"100%",[B.breakpoints.up("md")]:{boxShadow:B.shadows.z3,width:bc}},Ie={boxShadow:"none",width:0},ke={opacity:1},je={opacity:0};return{backdrop:{enter:(0,we.css)(je),enterActive:(0,we.css)(ve,ke),enterDone:(0,we.css)(ke)},overlay:{enter:(0,we.css)(Ie),enterActive:(0,we.css)(ae,Ce),enterDone:(0,we.css)(Ce)}}},Yd=s.memo(({onClose:B,searchBarHidden:W})=>{const Q=(0,En.useSelector)(st=>st.navBarTree),ae=(0,lt.l4)(),ve=Rf(ae),Ce=(0,Qs.TH)(),ke=(0,h.cloneDeep)(Q).filter(st=>st.id!=="profile"&&st.id!=="help").map(st=>ic(st,!0)),je=lc(ke,Ce.pathname);return s.createElement("div",{className:ve.menuWrapper},s.createElement(vi,{activeItem:je,navItems:ke,onClose:B,searchBarHidden:W}))});Yd.displayName="MegaMenu";const Rf=B=>({menuWrapper:(0,we.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:B.zIndex.sidemenu})}),Dc=2;function Zd({item:B,isSectionRoot:W=!1,level:Q=0}){const ae=(0,lt.wW)(Af),ve=B.children?.filter(gt=>!gt.hideFromTabs),Ce=B.children&&lc(B.children,location.pathname),Ie=W&&!!B.children[0].children?.length,ke=(0,we.cx)({[ae.link]:!0,[ae.activeStyle]:B.active||Q===Dc&&ol(B,Ce),[ae.isSection]:Q<Dc&&(!!ve?.length||B.isSection),[ae.isSectionRoot]:W,[ae.noRootMargin]:Ie});let je=null;B.img?je=s.createElement("img",{"data-testid":"section-image",className:ae.sectionImg,src:B.img,alt:""}):B.icon&&(je=s.createElement(ka.J,{"data-testid":"section-icon",className:ae.sectionImg,name:B.icon}));const st=()=>{(0,zr.ff)("grafana_navigation_item_clicked",{path:B.url??B.id,sectionNav:!0})};return s.createElement(s.Fragment,null,s.createElement("a",{onClick:st,href:B.url,className:ke,"aria-label":Cs.wl.components.Tab.title(B.text),role:"tab","aria-selected":B.active},W&&je,B.text,B.tabSuffix&&s.createElement(B.tabSuffix,{className:ae.suffix})),Q<Dc&&ve?.map((gt,bt)=>s.createElement(Zd,{item:gt,key:bt,level:Q+1})))}const Af=B=>({link:(0,we.css)`
      padding: ${B.spacing(1,0,1,1.5)};
      display: flex;
      align-items: flex-start;
      border-radius: ${B.shape.radius.default};
      gap: ${B.spacing(1)};
      height: 100%;
      position: relative;
      color: ${B.colors.text.secondary};

      &:hover,
      &:focus {
        text-decoration: underline;
        z-index: 1;
      }
    `,activeStyle:(0,we.css)`
      label: activeTabStyle;
      color: ${B.colors.text.primary};
      font-weight: ${B.typography.fontWeightMedium};
      background: ${B.colors.emphasize(B.colors.background.canvas,.03)};

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: ${B.shape.radius.default};
        background-image: ${B.colors.gradients.brandVertical};
      }
    `,suffix:(0,we.css)`
      margin-left: ${B.spacing(1)};
    `,sectionImg:(0,we.css)({margin:"6px 0",width:B.spacing(2)}),isSectionRoot:(0,we.css)({fontSize:B.typography.h4.fontSize,marginTop:0,marginBottom:B.spacing(2),fontWeight:B.typography.fontWeightMedium}),isSection:(0,we.css)({color:B.colors.text.primary,fontSize:B.typography.h5.fontSize,marginTop:B.spacing(2),fontWeight:B.typography.fontWeightMedium}),noRootMargin:(0,we.css)({marginBottom:0})}),Jd=({isExpanded:B,onClick:W})=>{const Q=(0,lt.l4)(),ae=Xd(Q);return s.createElement(ue.zx,{title:"Toggle section navigation","aria-label":B?"Close section navigation":"Open section navigation",icon:"arrow-to-right",className:sl()(ae.icon,{[ae.iconExpanded]:B}),variant:"secondary",fill:"text",size:"md",onClick:W})};Jd.displayName="SectionNavToggle";const Xd=B=>({icon:(0,we.css)({alignSelf:"center",margin:B.spacing(1,0),transform:"rotate(90deg)",transition:B.transitions.create("opacity"),color:B.colors.text.secondary,zIndex:1,[B.breakpoints.up("md")]:{alignSelf:"flex-start",position:"relative",left:0,margin:B.spacing(0,0,0,1),top:B.spacing(2),transform:"none"},"div:hover > &, &:focus":{opacity:1}}),iconExpanded:(0,we.css)({rotate:"180deg",[B.breakpoints.up("md")]:{opacity:0,margin:0,position:"absolute",right:0,left:"initial"}})});function Lf({model:B}){const W=(0,lt.wW)(wf),{isExpanded:Q,onToggleSectionNav:ae}=Bf();return B.main?.children?.length?s.createElement("div",{className:W.navContainer},s.createElement("nav",{className:(0,we.cx)(W.nav,{[W.navExpanded]:Q})},s.createElement(Rr.$,{showScrollIndicators:!0},s.createElement("div",{className:W.items,role:"tablist"},s.createElement(Zd,{item:B.main,isSectionRoot:!0})))),s.createElement(Jd,{isExpanded:Q,onClick:ae})):null}function Bf(){const B=(0,lt.l4)(),W=window.matchMedia(`(max-width: ${B.breakpoints.values.lg}px)`).matches,[Q,ae]=(0,Eo.Z)("grafana.sectionNav.expanded",!W),[ve,Ce]=(0,s.useState)(!W&&Q);return(0,s.useEffect)(()=>{const ke=window.matchMedia(`(max-width: ${B.breakpoints.values.lg}px)`),je=st=>Ce(st.matches?!1:Q);return ke.addEventListener("change",je),()=>ke.removeEventListener("change",je)},[Q,B.breakpoints.values.lg]),{isExpanded:ve,onToggleSectionNav:()=>{ae(!ve),Ce(!ve)}}}const wf=B=>({navContainer:(0,we.css)({display:"flex",flexDirection:"column",position:"relative",[B.breakpoints.up("md")]:{flexDirection:"row"}}),nav:(0,we.css)({display:"flex",flexDirection:"column",background:B.colors.background.canvas,flexShrink:0,transition:B.transitions.create(["width","max-height"]),maxHeight:0,visibility:"hidden",[B.breakpoints.up("md")]:{width:0,maxHeight:"unset"}}),navExpanded:(0,we.css)({maxHeight:"50vh",visibility:"visible",[B.breakpoints.up("md")]:{width:"250px",maxHeight:"unset"}}),items:(0,we.css)({display:"flex",flexDirection:"column",padding:B.spacing(2,1,2,2),minWidth:"250px",[B.breakpoints.up("md")]:{padding:B.spacing(4.5,1,2,2)}})});var Cc=e(86734),Pc=e(44839),qd=e(45220),eu=e(63153),Uf=e(35912),vl=e(66137),tu=e(79468),El=e(95953),nu=e(23758);function Nf({feedUrl:B}){const W=(0,lt.wW)(Wf),{state:Q,getNews:ae}=(0,nu.j)(B),[ve,Ce]=(0,vl.Z)();return(0,s.useEffect)(()=>{ae()},[ae]),Q.loading||Q.error?s.createElement("div",{className:W.innerWrapper},Q.loading&&s.createElement(tu.u,{text:"Loading..."}),Q.error&&Q.error.message):Q.value?s.createElement("div",{ref:ve},Ce.width>0&&Q.value.map((Ie,ke)=>s.createElement(El.S,{key:ke,index:ke,showImage:!0,width:Ce.width,data:Q.value})),s.createElement("div",{className:W.grot},s.createElement("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:"Go to Grafana labs blog"},s.createElement("img",{src:"public/img/grot-news.svg",alt:"Grot reading news"})))):null}const Wf=B=>({innerWrapper:(0,we.css)({width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}),grot:(0,we.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:B.spacing(5,0),img:{width:"186px",height:"186px"}})});function Ff({className:B}){const[W,Q]=(0,qd.Z)(!1),ae=(0,lt.wW)(Kf);return s.createElement(s.Fragment,null,s.createElement($o.h,{className:B,onClick:Q,iconOnly:!0,icon:"rss","aria-label":"News"}),W&&s.createElement(eu.d,{title:s.createElement("div",{className:ae.title},s.createElement(mc.x,{element:"h3"},(0,Ka.t)("news.title","Latest from the blog")),s.createElement("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:"Go to Grafana labs blog",className:ae.grot},s.createElement("img",{src:"public/img/grot-news.svg",alt:"Grot reading news"})),s.createElement("div",{className:ae.actions},s.createElement(ue.zx,{icon:"times",variant:"secondary",fill:"text",onClick:Q,"aria-label":Cs.wl.components.Drawer.General.close}))),onClose:Q,size:"md"},s.createElement(Nf,{feedUrl:Uf.k})))}const Kf=B=>({title:(0,we.css)({display:"flex",alignItems:"center",justifyContent:"center",gap:B.spacing(2),borderBottom:`1px solid ${B.colors.border.weak}`}),grot:(0,we.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:B.spacing(2,0),img:{width:"75px",height:"75px"}}),actions:(0,we.css)({position:"absolute",right:B.spacing(1),top:B.spacing(2)})});var or=e(58796);function au({orgs:B,onSelectChange:W}){const Q=(0,lt.wW)(yp);return s.createElement(di.b,{"aria-label":"Change organization",variant:"secondary",buttonCss:Q.buttonCss,size:"md",label:"",fill:"text",isFullWidth:!1,options:B.map(ae=>({label:ae.name,description:ae.role,value:ae})),onChange:W,icon:"building"})}const yp=B=>({buttonCss:(0,we.css)({color:B.colors.text.secondary,"&:hover":{color:B.colors.text.primary}})});function Ki({orgs:B,onSelectChange:W}){const Q=(0,lt.wW)(su),{orgName:ae,orgId:ve,orgRole:Ce}=As.contextSrv.user,[Ie,ke]=(0,s.useState)(()=>({label:ae,value:{role:Ce,orgId:ve,name:ae},description:Ce})),je=st=>{ke(st),W(st)};return s.createElement(Pe.Ph,{"aria-label":"Change organization",width:"auto",value:Ie,prefix:s.createElement(ka.J,{className:"prefix-icon",name:"building"}),className:Q.select,options:B.map(st=>({label:st.name,description:st.role,value:st})),onChange:je})}const su=B=>({select:(0,we.css)({border:"none",background:"none",color:B.colors.text.secondary,"&:hover":{color:B.colors.text.primary,"& .prefix-icon":(0,we.css)({color:B.colors.text.primary})}})});function Vf(){const B=(0,lt.l4)(),W=(0,En.useDispatch)(),Q=(0,En.useSelector)(je=>je.organization.userOrgs),ae=je=>{je.value&&((0,or.Q$)(je.value.orgId),x.E1.push(`/?orgId=${je.value.orgId}`),window.location.reload())};(0,s.useEffect)(()=>{As.contextSrv.isSignedIn&&W((0,or.JE)())},[W]);const ve=B.breakpoints.values.sm,[Ce,Ie]=(0,s.useState)(!window.matchMedia(`(min-width: ${ve}px)`).matches);if(ei({breakpoint:ve,onChange:je=>{Ie(!je.matches)}}),Q?.length<=1)return null;const ke=Ce?au:Ki;return s.createElement(ke,{orgs:Q,onSelectChange:ae})}var yl=e(54635);function ru(B){const W=[];for(const Q of B)Q.isCreateAction&&W.push(Q),Q.children&&W.push(...ru(Q.children));return W}const _f=({})=>{const B=(0,lt.wW)($f),W=(0,lt.l4)(),Q=(0,En.useSelector)(gt=>gt.navBarTree),ae=W.breakpoints.values.sm,[ve,Ce]=(0,s.useState)(!1),[Ie,ke]=(0,s.useState)(!window.matchMedia(`(min-width: ${ae}px)`).matches),je=(0,s.useMemo)(()=>ru(Q),[Q]);ei({breakpoint:ae,onChange:gt=>{ke(!gt.matches)}});const st=()=>s.createElement(yl.v,null,je.map((gt,bt)=>s.createElement(yl.v.Item,{key:bt,url:gt.url,label:gt.text,onClick:()=>(0,zr.ff)("grafana_menu_item_clicked",{url:gt.url,from:"quickadd"})})));return je.length>0?s.createElement(s.Fragment,null,s.createElement(Pc.L,{overlay:st,placement:"bottom-end",onVisibleChange:Ce},s.createElement($o.h,{iconOnly:!0,icon:Ie?"plus-circle":"plus",isOpen:Ie?void 0:ve,"aria-label":"New"})),s.createElement(Vd.M,{className:B.separator})):null},$f=B=>({buttonContent:(0,we.css)({alignItems:"center",display:"flex"}),buttonText:(0,we.css)({[B.breakpoints.down("md")]:{display:"none"}}),separator:(0,we.css)({[B.breakpoints.down("sm")]:{display:"none"}})});function zf(){const B=(0,Qs.TH)(),W=(0,lt.wW)(kf),Q=Cc.QX.sanitizeUrl(T.u.getUrlForPartial(B,{forceLogin:"true"}));return s.createElement("a",{className:W.link,href:Q,target:"_self"},"Sign in")}const kf=B=>({link:(0,we.css)({paddingRight:B.spacing(1),whiteSpace:"nowrap","&:hover":{textDecoration:"underline"}})});var ou=e(69707);function iu({node:B}){const W=(0,lt.wW)(Hf),Q=ic((0,h.cloneDeep)(B),!1);return Q?s.createElement(yl.v,{header:s.createElement("div",{onClick:ae=>ae.stopPropagation(),className:W.header},s.createElement("div",null,Q.text),Q.subTitle&&s.createElement("div",{className:W.subTitle},Q.subTitle))},Q.children?.map(ae=>ae.url?s.createElement(ou.s,{url:ae.url,label:ae.text,icon:ae.icon,target:ae.target,key:ae.id}):s.createElement(ou.s,{icon:ae.icon,onClick:ae.onClick,label:ae.text,key:ae.id}))):null}const Hf=B=>({header:(0,we.css)({fontSize:B.typography.h5.fontSize,fontWeight:B.typography.h5.fontWeight,padding:B.spacing(.5,1),whiteSpace:"nowrap"}),subTitle:(0,we.css)({color:B.colors.text.secondary,fontSize:B.typography.bodySmall.fontSize})});var lu=e(55182),Gf=e(55953);function jf(){const B=(0,lt.l4)(),{query:W}=(0,js.useKBar)(Ie=>({kbarSearchQuery:Ie.searchQuery,kbarIsOpen:Ie.visualState===js.VisualState.showing})),Q=B.breakpoints.values.sm,[ae,ve]=(0,s.useState)(!window.matchMedia(`(min-width: ${Q}px)`).matches);ei({breakpoint:Q,onChange:Ie=>{ve(!Ie.matches)}});const Ce=()=>{W.toggle()};return ae?s.createElement($o.h,{iconOnly:!0,icon:"search","aria-label":(0,Ka.t)("nav.search.placeholderCommandPalette","Search or jump to..."),onClick:Ce}):s.createElement(Qf,{onClick:Ce})}function Qf({onClick:B}){const W=(0,lt.wW)(Yf),Q=(0,s.useMemo)(()=>(0,Gf.vl)(),[]);return s.createElement("div",{className:W.wrapper},s.createElement("div",{className:W.inputWrapper},s.createElement("div",{className:W.prefix},s.createElement(ka.J,{name:"search"})),s.createElement("button",{className:W.fakeInput,onClick:B},(0,Ka.t)("nav.search.placeholderCommandPalette","Search or jump to...")),s.createElement("div",{className:W.suffix},s.createElement(ka.J,{name:"keyboard"}),s.createElement("span",{className:W.shortcut},Q,"+k"))))}const Yf=B=>{const W=(0,ct.H)({theme:B});return{wrapper:W.wrapper,inputWrapper:W.inputWrapper,prefix:W.prefix,suffix:(0,we.css)([W.suffix,{display:"flex",gap:B.spacing(.5)}]),shortcut:(0,we.css)({fontSize:B.typography.bodySmall.fontSize}),fakeInput:(0,we.css)([W.input,{textAlign:"left",paddingLeft:28,color:B.colors.text.disabled,"&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":(0,we.css)`
          ${(0,lu.focusCss)(B)}
        `}]),button:(0,we.css)({width:"100%",textAlign:"center","> *":{width:"100%",textAlign:"center",justifyContent:"center",gap:"1ch"}})}};function Vi({children:B,align:W="left"}){const Q=(0,lt.wW)(Zf),ve=(0,lt.l4)().breakpoints.values.sm,[Ce,Ie]=(0,s.useState)(!window.matchMedia(`(min-width: ${ve}px)`).matches);return ei({breakpoint:ve,onChange:ke=>{Ie(!ke.matches)}}),Ce?s.createElement(s.Fragment,null,B):s.createElement("div",{"data-testid":"wrapper",className:(0,we.cx)(Q.wrapper,{[Q[W]]:W==="right"})},B)}const Zf=B=>({wrapper:(0,we.css)({display:"flex",gap:B.spacing(.5),alignItems:"center"}),right:(0,we.css)({justifyContent:"flex-end"}),left:(0,we.css)({}),center:(0,we.css)({})}),Jf=s.memo(function(){const W=(0,lt.wW)(Xf),Q=(0,En.useSelector)(je=>je.navIndex),ae=(0,Qs.TH)(),ve=(0,h.cloneDeep)(Q.help),Ce=ve?Md(ve):void 0,Ie=Q.profile;let ke=z.config.appSubUrl||"/";return!z.config.bootData.user.isSignedIn&&!z.config.anonymousEnabled&&(ke=Cc.QX.sanitizeUrl(T.u.getUrlForPartial(ae,{forceLogin:"true"}))),s.createElement("div",{className:W.layout},s.createElement(Vi,null,s.createElement("a",{className:W.logo,href:ke,title:"Go to home"},s.createElement(Jc.c.MenuLogo,{className:W.img})),s.createElement(Vf,null)),s.createElement(Vi,null,s.createElement(jf,null)),s.createElement(Vi,{align:"right"},s.createElement(_f,null),Ce&&s.createElement(Pc.L,{overlay:()=>s.createElement(iu,{node:Ce}),placement:"bottom-end"},s.createElement($o.h,{iconOnly:!0,icon:"question-circle","aria-label":"Help"})),z.config.newsFeedEnabled&&s.createElement(Ff,null),!Xa.Vt.user.isSignedIn&&s.createElement(zf,null),Ie&&s.createElement(Pc.L,{overlay:()=>s.createElement(iu,{node:Ie}),placement:"bottom-end"},s.createElement($o.h,{className:W.profileButton,imgSrc:Xa.Vt.user.gravatarUrl,imgAlt:"User avatar","aria-label":"Profile"}))))}),Xf=B=>({layout:(0,we.css)({height:jr.$,display:"flex",gap:B.spacing(1),alignItems:"center",padding:B.spacing(0,1,0,2),borderBottom:`1px solid ${B.colors.border.weak}`,justifyContent:"space-between",[B.breakpoints.up("sm")]:{gridTemplateColumns:"1.5fr minmax(240px, 1fr) 1.5fr",display:"grid",justifyContent:"flex-start"}}),img:(0,we.css)({height:B.spacing(3),width:B.spacing(3)}),logo:(0,we.css)({display:"flex"}),profileButton:(0,we.css)({padding:B.spacing(0,.25),img:{borderRadius:B.shape.radius.circle,height:"24px",marginRight:0,width:"24px"}})});function qf({children:B}){const{chrome:W}=(0,Mo.p)(),Q=W.useState(),ae=Q.searchBarHidden||Q.kioskMode===En.KioskMode.TV,ve=(0,lt.l4)(),Ce=(0,lt.wW)(eg),Ie=(0,we.cx)({[Ce.content]:!0,[Ce.contentNoSearchBar]:ae,[Ce.contentChromeless]:Q.chromeless}),ke=()=>{switch(Q.megaMenu){case"closed":W.setMegaMenu("open");break;case"open":W.setMegaMenu("closed");break;case"docked":window.innerWidth>=ve.breakpoints.values.xl?W.setMegaMenu("closed"):W.setMegaMenu("open");break}};return s.createElement("div",{className:sl()("main-view",{"main-view--search-bar-hidden":ae&&!Q.chromeless,"main-view--chrome-hidden":Q.chromeless})},!Q.chromeless&&s.createElement(s.Fragment,null,s.createElement(ue.Qj,{className:Ce.skipLink,href:"#pageContent"},"Skip to main content"),s.createElement("div",{className:(0,we.cx)(Ce.topNav)},!ae&&s.createElement(Jf,null),s.createElement(Wi,{searchBarHidden:ae,sectionNav:Q.sectionNav.node,pageNav:Q.pageNav,actions:Q.actions,onToggleSearchBar:W.onToggleSearchBar,onToggleMegaMenu:ke,onToggleKioskMode:W.onToggleKioskMode}))),s.createElement("main",{className:Ie},s.createElement("div",{className:Ce.panes},Q.layout===mi.Q.Standard&&Q.sectionNav&&!z.default.featureToggles.dockedMegaMenu&&s.createElement(Lf,{model:Q.sectionNav}),z.default.featureToggles.dockedMegaMenu&&!Q.chromeless&&Q.megaMenu==="docked"&&s.createElement(Ec,{className:Ce.dockedMegaMenu,onClose:()=>W.setMegaMenu("closed")}),s.createElement("div",{className:Ce.pageContainer,id:"pageContent"},B))),!Q.chromeless&&s.createElement(s.Fragment,null,z.default.featureToggles.dockedMegaMenu&&Q.megaMenu!=="docked"?s.createElement(zd,null):s.createElement(Yd,{searchBarHidden:ae,onClose:()=>W.setMegaMenu("closed")}),s.createElement(gf,null)))}const eg=B=>{const W=B.isDark?"0 0.6px 1.5px rgb(0 0 0), 0 2px 4px rgb(0 0 0 / 40%), 0 5px 10px rgb(0 0 0 / 23%)":"0 4px 8px rgb(0 0 0 / 4%)";return{content:(0,we.css)({display:"flex",flexDirection:"column",paddingTop:jr.$*2,flexGrow:1,height:"100%"}),contentNoSearchBar:(0,we.css)({paddingTop:jr.$}),contentChromeless:(0,we.css)({paddingTop:0}),dockedMegaMenu:(0,we.css)({background:B.colors.background.primary,borderRight:`1px solid ${B.colors.border.weak}`,borderTop:`1px solid ${B.colors.border.weak}`,display:"none",zIndex:B.zIndex.navbarFixed,[B.breakpoints.up("xl")]:{display:"block"}}),topNav:(0,we.css)({display:"flex",position:"fixed",zIndex:B.zIndex.navbarFixed,left:0,right:0,boxShadow:z.default.featureToggles.dockedMegaMenu?void 0:W,background:B.colors.background.primary,flexDirection:"column",borderBottom:`1px solid ${B.colors.border.weak}`}),panes:(0,we.css)({label:"page-panes",display:"flex",height:"100%",width:"100%",flexGrow:1,minHeight:0,flexDirection:"column",[B.breakpoints.up("md")]:{flexDirection:"row"}}),pageContainer:(0,we.css)({label:"page-container",flexGrow:1,minHeight:0,minWidth:0,overflow:"auto"}),skipLink:(0,we.css)({position:"absolute",top:-1e3,":focus":{left:B.spacing(1),top:B.spacing(1),zIndex:B.zIndex.portal}})}};var bl=e(88492),Dl=e(12263),Sc=e(93991),tg=e(33067);function xc({appNotification:B,onClearNotification:W}){const Q=(0,lt.wW)(cu);(0,tg.Z)(()=>{setTimeout(()=>{W(B.id)},En.timeoutMap[B.severity])});const ae=B.component||B.text||B.traceId;return s.createElement(yr.b,{severity:B.severity,title:B.title,onRemove:()=>W(B.id),elevated:!0},ae&&s.createElement("div",{className:Q.wrapper},s.createElement("span",null,B.component||B.text),B.traceId&&s.createElement("span",{className:Q.trace},"Trace ID: ",B.traceId)))}function cu(B){return{wrapper:(0,we.css)({display:"flex",flexDirection:"column"}),trace:(0,we.css)({fontSize:B.typography.pxToRem(10)})}}function ng(){const B=(0,En.useSelector)(ve=>(0,Dl.vo)(ve.appNotifications)),W=(0,En.useDispatch)(),Q=(0,lt.wW)(Mc);(0,s.useEffect)(()=>{tr.Z.on(pi.SI.alertWarning,ve=>W((0,bl.$l)((0,Sc.ZR)(...ve)))),tr.Z.on(pi.SI.alertSuccess,ve=>W((0,bl.$l)((0,Sc.AT)(...ve)))),tr.Z.on(pi.SI.alertError,ve=>W((0,bl.$l)((0,Sc.t_)(...ve))))},[W]);const ae=ve=>{W((0,bl.ad)(ve))};return s.createElement("div",{className:Q.wrapper},s.createElement(Ma.wc,null,B.map((ve,Ce)=>s.createElement(xc,{key:`${ve.id}-${Ce}`,appNotification:ve,onClearNotification:ae}))))}function Mc(B){return{wrapper:(0,we.css)({label:"app-notifications-list",zIndex:B.zIndex.portal,minWidth:400,maxWidth:600,position:"fixed",right:6,top:88})}}var ag=e(50932),sg=e.n(ag),Tc=e(2855);function rg({error:B,errorInfo:W}){const Q=(0,Qs.TH)(),ae=B?.name==="ChunkLoadError",ve=(0,lt.wW)(og);return(0,s.useEffect)(()=>{ae&&Q.search.indexOf("chunkNotFound")===-1&&(window.location.href=T.u.getUrlForPartial(Q,{chunkNotFound:!0}))},[Q,ae]),s.createElement(Cr.T,{navId:"error",layout:mi.Q.Canvas},s.createElement("div",{className:ve.container},ae&&s.createElement("div",null,s.createElement("h2",null,"Unable to find application file"),s.createElement("br",null),s.createElement("h2",{className:"page-heading"},"Grafana has likely been updated. Please try reloading the page."),s.createElement("br",null),s.createElement(ue.zx,{size:"md",variant:"secondary",icon:"repeat",onClick:()=>window.location.reload()},"Reload"),s.createElement(Tc.X,{title:"Error details",error:B,errorInfo:W})),!ae&&s.createElement(Tc.X,{title:"An unexpected error happened",error:B,errorInfo:W})))}const og=B=>({container:(0,we.css)({width:"500px",margin:B.spacing(8,"auto")})});function ig(){const B=(0,lt.wW)(lg);return s.createElement("div",{className:B.loadingPage},s.createElement(tu.u,{text:"Loading..."}))}const lg=()=>({loadingPage:(0,we.css)({height:"100%",flexDrection:"column",display:"flex",justifyContent:"center",alignItems:"center"})});function cg(B){const{chrome:W,keybindings:Q}=(0,Mo.p)();return W.setMatchedRoute(B.route),(0,s.useLayoutEffect)(()=>{Q.clearAndInitGlobalBindings(B.route)},[Q,B.route]),(0,s.useEffect)(()=>(uu(B.route),mu(),(0,x.GQ)("GrafanaRoute",!1,"Mounted",B.match),()=>{(0,x.GQ)("GrafanaRoute",!1,"Unmounted",B.route),uu(B.route,!0)}),[]),(0,s.useEffect)(()=>{mu(),(0,zr.sm)(),(0,x.GQ)("GrafanaRoute",!1,"Updated",B)}),(0,x.GQ)("GrafanaRoute",!1,"Rendered",B.route),s.createElement(kl.SV,null,({error:ae,errorInfo:ve})=>ae?s.createElement(rg,{error:ae,errorInfo:ve}):s.createElement(s.Suspense,{fallback:s.createElement(ig,null)},s.createElement(B.route.component,{...B,queryParams:(0,x.Ox)(B.location.search)})))}function du(B){return B.pageClass?B.pageClass.split(" "):[]}function uu(B,W=!1){for(const Q of du(B))W?document.body.classList.remove(Q):document.body.classList.add(Q)}function mu(){document.body.classList.remove("sidemenu-open--xs");const B=document.getElementById("tooltip");B?.parentElement?.removeChild(B);const W=document.querySelectorAll(".tooltip");for(let Q=0;Q<W.length;Q++){const ae=W[Q];ae.parentElement?.removeChild(ae)}for(const Q of sg().drops)Q.destroy()}var Oc=e(50805),fu=e(78942);class dg extends s.PureComponent{constructor(){super(...arguments),this.styles=gu(Y.config.theme2),this.state={},this.initListener=()=>{const W=(0,fu.gj)();W&&(this.subscription=W.getConnectionState().subscribe({next:Q=>{this.setState({show:!Q})}}))}}componentDidMount(){}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const{show:W}=this.state;return W?!As.contextSrv.isSignedIn||!Y.config.liveEnabled||As.contextSrv.user.orgRole===Zl.B.None?null:s.createElement("div",{className:this.styles.foot},s.createElement(yr.b,{severity:"warning",className:this.styles.warn,title:"connection to server is lost..."})):null}}const gu=(0,xs.B)(B=>({foot:(0,we.css)`
      position: absolute;
      bottom: 0px;
      left: 0px;
      right: 0px;
      z-index: 10000;
      cursor: wait;
      margin: 16px;
    `,warn:(0,we.css)`
      max-width: 400px;
      margin: auto;
    `}));let hu=[],pu=[];function bp(B){hu.push(B)}function Dp(B){pu.push(B)}class ug extends s.Component{constructor(W){super(W),this.renderRoute=Q=>{const ae=Q.roles?Q.roles():[];return s.createElement(Zc.CompatRoute,{exact:Q.exact===void 0?!0:Q.exact,sensitive:Q.sensitive===void 0?!1:Q.sensitive,path:Q.path,key:Q.path,render:ve=>ae?.length&&!ae.some(Ce=>As.contextSrv.hasRole(Ce))?s.createElement(Qs.l_,{to:"/"}):s.createElement(cg,{...ve,route:Q})})},this.state={}}async componentDidMount(){await tc(),this.setState({ready:!0}),$(".preloader").remove()}renderRoutes(){return s.createElement(Qs.rs,null,nl().map(W=>this.renderRoute(W)))}render(){const{app:W}=this.props,{ready:Q}=this.state;(0,x.GQ)("AppWrapper",!1,"rendering");const ae=ve=>{(0,zr.ff)("command_palette_action_selected",{actionId:ve.id,actionName:ve.name})};return s.createElement($r.Provider,{store:rs.h},s.createElement(kl.z4,{style:"page"},s.createElement(Mo.h.Provider,{value:W.context},s.createElement(Oc.f,{value:Y.config.theme2},s.createElement(js.KBarProvider,{actions:[],options:{enableHistory:!0,callbacks:{onSelectAction:ae}}},s.createElement(rr.$i,null,s.createElement(Xi.n,null),s.createElement("div",{className:"grafana-app"},s.createElement(Qs.F0,{history:x.E1.getHistory()},s.createElement(Zc.CompatRouter,null,s.createElement(qf,null,pu.map((ve,Ce)=>s.createElement(ve,{key:Ce.toString()})),s.createElement(al,null),s.createElement(ng,null),Q&&this.renderRoutes(),hu.map((ve,Ce)=>s.createElement(ve,{key:Ce.toString()})))))),s.createElement(dg,null),s.createElement(rr.Y0,null),s.createElement(Fo.lO,null)))))))}}var mg=e(16162),fg=e(81517),Cl=e(20994);function gg(B,W){if(B===W)return!0;if(!(B instanceof Object)||!(W instanceof Object))return!1;const Q=Object.keys(B),ae=Q.length;for(let ve=0;ve<ae;ve++)if(!(Q[ve]in W))return!1;for(let ve=0;ve<ae;ve++)if(B[Q[ve]]!==W[Q[ve]])return!1;return ae===Object.keys(W).length}const vu="grafana.navigation.docked";class Pl{constructor(){this.searchBarStorageKey="SearchBar_Hidden",this.routeChangeHandled=!0,this.state=new fg.X({chromeless:!0,sectionNav:{node:{text:(0,Ka.t)("nav.home.title","Home")},main:{text:""}},searchBarHidden:Cl.Z.getBool(this.searchBarStorageKey,!1),megaMenu:Y.config.featureToggles.dockedMegaMenu&&Cl.Z.getBool(vu,window.innerWidth>=Y.config.theme2.breakpoints.values.xxl)?"docked":"closed",kioskMode:null,layout:mi.Q.Canvas}),this.setMegaMenu=W=>{Y.config.featureToggles.dockedMegaMenu?(Cl.Z.set(vu,W==="docked"),(0,zr.ff)("grafana_mega_menu_state",{state:W})):(0,zr.ff)("grafana_toggle_menu_clicked",{action:W==="open"?"open":"close"}),this.update({megaMenu:W})},this.onToggleSearchBar=()=>{const{searchBarHidden:W,kioskMode:Q}=this.state.getValue(),ae=!W;Cl.Z.set(this.searchBarStorageKey,ae),Q&&x.E1.partial({kiosk:null}),this.update({searchBarHidden:ae,kioskMode:null})},this.onToggleKioskMode=()=>{const W=this.getNextKioskMode();this.update({kioskMode:W}),x.E1.partial({kiosk:this.getKioskUrlValue(W)})}}setMatchedRoute(W){this.currentRoute!==W&&(this.currentRoute=W,this.routeChangeHandled=!1)}update(W){const Q=this.state.getValue(),ae={...Q};this.routeChangeHandled||(ae.actions=void 0,ae.pageNav=void 0,ae.sectionNav={node:{text:(0,Ka.t)("nav.home.title","Home")},main:{text:""}},ae.chromeless=this.currentRoute?.chromeless,ae.layout=mi.Q.Standard,this.routeChangeHandled=!0),Object.assign(ae,W),ae.chromeless=ae.kioskMode===En.KioskMode.Full||this.currentRoute?.chromeless,this.ignoreStateUpdate(ae,Q)||this.state.next(ae)}ignoreStateUpdate(W,Q){return!!(gg(W,Q)||(W.sectionNav!==Q.sectionNav||W.pageNav!==Q.pageNav)&&W.actions===Q.actions&&W.layout===Q.layout&&Ic(W.sectionNav.node,Q.sectionNav.node)&&Ic(W.pageNav,Q.pageNav))}useState(){return(0,mg.Z)(this.state,this.state.getValue())}exitKioskMode(){this.update({kioskMode:void 0}),x.E1.partial({kiosk:null})}setKioskModeFromUrl(W){switch(W){case"tv":this.update({kioskMode:En.KioskMode.TV});break;case"1":case!0:this.update({kioskMode:En.KioskMode.Full})}}getKioskUrlValue(W){switch(W){case En.KioskMode.TV:return"tv";case En.KioskMode.Full:return!0;default:return null}}getNextKioskMode(){const{kioskMode:W,searchBarHidden:Q}=this.state.getValue();return Q||W===En.KioskMode.TV?(tr.Z.emit(pi.SI.alertSuccess,[(0,Ka.t)("navigation.kiosk.tv-alert","Press ESC to exit kiosk mode")]),En.KioskMode.Full):W?null:En.KioskMode.TV}}function Ic(B,W){if(B===W)return!0;const Q=B?.children?.find(ve=>ve.active),ae=W?.children?.find(ve=>ve.active);return B?.text===W?.text&&B?.url===W?.url&&Q?.url===ae?.url&&Ic(B?.parentItem,W?.parentItem)}var Rc=e(72933);function hg({actions:B,children:W,info:Q,pageNav:ae,layout:ve,renderTitle:Ce,subTitle:Ie}){const ke=(0,s.useContext)(Xl.v);return s.createElement(Cr.T,{navModel:ke.sectionNav,pageNav:ae,layout:ve,actions:B,renderTitle:Ce,info:Q,subTitle:Ie},s.createElement(Cr.T.Contents,null,W))}var pg=e(88960),vg=e(72707),Eg=e(32511),Eu=e(25716),Ac=e(43095),Oo=e(55728),Cp=e(14716),Lc=e(51575),Pp=e(53330),yg=e(84863),bg=e(39126),yu=e(46661),Dg=e(39138),Bc=e(63684),Cg=e(4392),bu=e(64807),Du=e(20261),Pg=e(21969),Sg=e(28308),Cu=e(76895),xg=e(63936),Mg=e(939),Pu=e(64058),Tg=e(87805),Og=e(18095),Su=e(59983),Ig=e(84010),Rg=e(13147),Sp=e(23629),xp=e(58258),Mp=e(23198),Tp=e(72295),Op=e(99064),Ip=e(1476),Rp=e(60742),Ap=e(96338),Lp=e(86285),Bp=e(39064),wp=e(12069),Up=e(88619),Np=e(3125),Wp=e(24121),Fp=e(84679),Kp=e(87001),Vp=e(40942),_p=e(85823),$p=e(99437),zp=e(67401),kp=e(2692),Hp=e(26782),Gp=e(95687),jp=e(35727),Qp=e(94431),Yp=e(57692),Zp=e(60807),Jp=e(38273),Ag=e(97982),wc=e(69326),Lg=e(24653),Bg=e(50579),wg=e(90080),Ug=e(38839),Ng=e(28760),Wg=e(65572),Fg=e(51210),Kg=e(25281),xu=e(35873),Vg=e(46026),_g=e(93086),$g=e(6656),zg=e(56962),kg=e(36196),Hg=e(40665),Gg=e(99834),jg=e(72432),Qg=e(40140),Yg=e(91190),Mu=e(9786),Xp=e(63180),qp=e(75763),e0=e(71306),t0=e(70734),n0=e(83916),a0=e(11317),s0=e(73603),r0=e(39222),o0=e(20538),Zg=e(38811),Jg=e(40599),Xg=e(95373),qg=e(2094),Tu=e(83650),eh=e(89368),th=e(73677),nh=e(57573),_i=e(46597),ah=e(21102),sh=e(77734),$i=e(79130),Sl=e(92392),zi=e(78747),rh=e(24548),oh=e(88136),ih=e(46978),lh=e(17927),ch=e(82585),dh=e(53120),Uc=e(54623),uh=e(93517),Ou=e(43352),Iu=e(28589),mh=e(92182),fh=e(45980),gh=e(3873),Ru=e(27704),hh=e(65418),zo=e(20984),Au=e(5663),xl=e(17497),Lu=e(61888),ph=e(21381),i0=e(76755),vh=e(49898),ro=e(17642),Nc=e(93141),Eh=e(19496),yh=e(37407),Wc=e(59403),Ar=e(47078),yo=e(27457),Bu=e(87899),bh=e(4627),Ml=e(3895),Dh=e(89899),Ch=e(82246),Ph=e(38814),Sh=e(62639),xh=e(17762),Mh=e(33324),Th=e(13476),Oh=e(70774),Ih=e(76248),wu=e(44006),Rh=e(60706),Ah=e(43960),Ei=e(11744),Uu=e(97418),Lh=e(64223),Bh=e(74662),wh=e(2293),Uh=e(51134),Nh=e(48937),Wh=e(93263),no=e(83301),l0=e(59011),Nu=e(34235),Fh=e(58690),Kh=e(48764),Vh=e(55563),_h=e(17486),ki=e(18754),Fc=e(20570),Wu=e(6887),$h=e(1750),zh=e(68843),kh=e(67888),Hh=e(85592),ti=e(11863),Gh=e(49071),jh=e(49665),Kc=e(37347),Qh=e(20863),Yh=e(18747);let w=!1;function J(B,W){pg.cacheStore[W]={content:B,status:"loaded"}}function le(){let B="public/img/icons/";const W=typeof window<"u"&&window.__grafana_public_path__;return W&&(B=W+"img/icons/"),Q=>B+Q}function pe(){if(w)return;w=!0;const B=le();J(vg,B("unicons/at.svg")),J(Eg,B("unicons/adjust-circle.svg")),J(Eu,B("unicons/align-left.svg")),J(Ac,B("unicons/align-right.svg")),J(Oo,B("unicons/angle-double-down.svg")),J(Cp,B("unicons/angle-double-right.svg")),J(Lc,B("unicons/angle-down.svg")),J(Pp,B("unicons/angle-left.svg")),J(yg,B("unicons/angle-right.svg")),J(bg,B("unicons/angle-up.svg")),J(yu,B("unicons/apps.svg")),J(Dg,B("unicons/arrow.svg")),J(Bc,B("unicons/arrow-down.svg")),J(Cg,B("unicons/arrow-from-right.svg")),J(bu,B("unicons/arrow-left.svg")),J(Du,B("unicons/arrow-random.svg")),J(Pg,B("unicons/arrow-right.svg")),J(Sg,B("unicons/arrow-to-right.svg")),J(Cu,B("unicons/arrow-up.svg")),J(xg,B("unicons/arrows-h.svg")),J(Mg,B("unicons/backward.svg")),J(Pu,B("unicons/bars.svg")),J(Tg,B("unicons/bell.svg")),J(Og,B("unicons/bell-slash.svg")),J(Su,B("unicons/bolt.svg")),J(Ig,B("unicons/book.svg")),J(Rg,B("unicons/book-open.svg")),J(Sp,B("unicons/brackets-curly.svg")),J(xp,B("unicons/bug.svg")),J(Mp,B("unicons/building.svg")),J(Tp,B("unicons/calculator-alt.svg")),J(Op,B("unicons/calendar-alt.svg")),J(Ip,B("unicons/calendar-slash.svg")),J(Rp,B("unicons/camera.svg")),J(Ap,B("unicons/channel-add.svg")),J(Lp,B("unicons/chart-line.svg")),J(Bp,B("unicons/check.svg")),J(wp,B("unicons/check-circle.svg")),J(Up,B("unicons/circle.svg")),J(Np,B("unicons/clipboard-alt.svg")),J(Wp,B("unicons/clock-nine.svg")),J(Fp,B("unicons/cloud.svg")),J(Kp,B("unicons/cloud-download.svg")),J(Vp,B("unicons/code-branch.svg")),J(_p,B("unicons/cog.svg")),J($p,B("unicons/columns.svg")),J(zp,B("unicons/comment-alt.svg")),J(kp,B("unicons/comment-alt-share.svg")),J(Hp,B("unicons/comments-alt.svg")),J(Gp,B("unicons/compass.svg")),J(jp,B("unicons/copy.svg")),J(Qp,B("unicons/corner-down-right-alt.svg")),J(Yp,B("unicons/cube.svg")),J(Zp,B("unicons/dashboard.svg")),J(Jp,B("unicons/database.svg")),J(Ag,B("unicons/document-info.svg")),J(wc,B("unicons/download-alt.svg")),J(Lg,B("unicons/draggabledots.svg")),J(Bg,B("unicons/edit.svg")),J(wg,B("unicons/ellipsis-v.svg")),J(Ug,B("unicons/ellipsis-h.svg")),J(Ng,B("unicons/envelope.svg")),J(Wg,B("unicons/exchange-alt.svg")),J(Fg,B("unicons/exclamation-circle.svg")),J(Kg,B("unicons/exclamation-triangle.svg")),J(xu,B("unicons/external-link-alt.svg")),J(Vg,B("unicons/eye.svg")),J(_g,B("unicons/eye-slash.svg")),J($g,B("unicons/file-alt.svg")),J(zg,B("unicons/file-blank.svg")),J(kg,B("unicons/filter.svg")),J(Hg,B("unicons/folder.svg")),J(Gg,B("unicons/folder-open.svg")),J(jg,B("unicons/folder-plus.svg")),J(Qg,B("unicons/folder-upload.svg")),J(Yg,B("unicons/forward.svg")),J(Mu,B("unicons/graph-bar.svg")),J(Xp,B("unicons/history.svg")),J(qp,B("unicons/history-alt.svg")),J(e0,B("unicons/home-alt.svg")),J(t0,B("unicons/import.svg")),J(n0,B("unicons/info.svg")),J(a0,B("unicons/info-circle.svg")),J(s0,B("unicons/k6.svg")),J(r0,B("unicons/key-skeleton-alt.svg")),J(o0,B("unicons/keyboard.svg")),J(Zg,B("unicons/link.svg")),J(Jg,B("unicons/list-ul.svg")),J(Xg,B("unicons/lock.svg")),J(qg,B("unicons/minus.svg")),J(Tu,B("unicons/minus-circle.svg")),J(eh,B("unicons/mobile-android.svg")),J(th,B("unicons/monitor.svg")),J(nh,B("unicons/pause.svg")),J(_i,B("unicons/pen.svg")),J(ah,B("unicons/play.svg")),J(sh,B("unicons/plug.svg")),J($i,B("unicons/plus.svg")),J(Sl,B("unicons/plus-circle.svg")),J(zi,B("unicons/power.svg")),J(rh,B("unicons/presentation-play.svg")),J(oh,B("unicons/process.svg")),J(ih,B("unicons/question-circle.svg")),J(lh,B("unicons/repeat.svg")),J(ch,B("unicons/rocket.svg")),J(dh,B("unicons/rss.svg")),J(Uc,B("unicons/save.svg")),J(uh,B("unicons/search.svg")),J(Ou,B("unicons/search-minus.svg")),J(Iu,B("unicons/search-plus.svg")),J(mh,B("unicons/share-alt.svg")),J(fh,B("unicons/shield.svg")),J(gh,B("unicons/signal.svg")),J(Ru,B("unicons/signin.svg")),J(hh,B("unicons/signout.svg")),J(zo,B("unicons/sitemap.svg")),J(Au,B("unicons/slack.svg")),J(xl,B("unicons/sliders-v-alt.svg")),J(Lu,B("unicons/sort-amount-down.svg")),J(ph,B("unicons/sort-amount-up.svg")),J(i0,B("unicons/square-shape.svg")),J(vh,B("unicons/star.svg")),J(ro,B("unicons/step-backward.svg")),J(Nc,B("unicons/sync.svg")),J(Eh,B("unicons/stopwatch.svg")),J(yh,B("unicons/table.svg")),J(Wc,B("unicons/tag-alt.svg")),J(Ar,B("unicons/times.svg")),J(yo,B("unicons/trash-alt.svg")),J(Bu,B("unicons/unlock.svg")),J(bh,B("unicons/upload.svg")),J(Ml,B("unicons/user.svg")),J(Dh,B("unicons/users-alt.svg")),J(Ch,B("unicons/wrap-text.svg")),J(Ph,B("unicons/cloud-upload.svg")),J(Sh,B("unicons/credit-card.svg")),J(xh,B("unicons/file-copy-alt.svg")),J(Mh,B("unicons/fire.svg")),J(Th,B("unicons/hourglass.svg")),J(Oh,B("unicons/layer-group.svg")),J(Ih,B("unicons/layers-alt.svg")),J(wu,B("unicons/line-alt.svg")),J(Rh,B("unicons/list-ui-alt.svg")),J(Ah,B("unicons/message.svg")),J(Ei,B("unicons/palette.svg")),J(Uu,B("unicons/percentage.svg")),J(Lh,B("unicons/shield-exclamation.svg")),J(Bh,B("unicons/plus-square.svg")),J(wh,B("unicons/x.svg")),J(Uh,B("unicons/capture.svg")),J(Nh,B("custom/gf-grid.svg")),J(Wh,B("custom/gf-landscape.svg")),J(no,B("custom/gf-layout-simple.svg")),J(l0,B("custom/gf-portrait.svg")),J(Nu,B("custom/gf-show-context.svg")),J(Fh,B("custom/gf-bar-alignment-after.svg")),J(Kh,B("custom/gf-bar-alignment-before.svg")),J(Vh,B("custom/gf-bar-alignment-center.svg")),J(_h,B("custom/gf-interpolation-linear.svg")),J(ki,B("custom/gf-interpolation-smooth.svg")),J(Fc,B("custom/gf-interpolation-step-after.svg")),J(Wu,B("custom/gf-interpolation-step-before.svg")),J($h,B("custom/gf-logs.svg")),J(zh,B("custom/gf-movepane-left.svg")),J(kh,B("custom/gf-movepane-right.svg")),J(Hh,B("mono/favorite.svg")),J(ti,B("mono/grafana.svg")),J(Gh,B("mono/heart.svg")),J(jh,B("mono/heart-break.svg")),J(Kc,B("mono/panel-add.svg")),J(Qh,B("mono/library-panel.svg")),J(Yh,B("unicons/record-audio.svg"))}var Se=e(173);function Re(B){const W=B.target instanceof Element&&We(B.target);if(!(B.ctrlKey||B.metaKey||B.defaultPrevented)&&W){let Q=W.getAttribute("href");const ae=W.getAttribute("target");if(Q&&!ae){const ve=Se.Cj.parseKeyValue(Q.split("?")[1]),Ce=ve.orgId&&Number(ve.orgId)!==z.config.bootData.user.orgId;if((0,x.GQ)("utils",!1,"intercepting link click",B),B.preventDefault(),Q=T.u.stripBaseFromUrl(Q),Q[0]!=="/"||Ce)if(Q.indexOf("://")>0||Q.indexOf("mailto:")===0||Ce){window.location.href=Q;return}else if(Q.indexOf("#")===0){window.location.hash=Q;return}else Q=`/${Q}`;x.E1.push(Q)}}}function We(B){for(;B!==null&&B.tagName;){if(B.tagName.toUpperCase()==="A")return B;B=B.parentElement}return null}var Ge=e(8808);function at(B,...W){const Q=(0,$r.connect)(...W)(B);return ae=>s.createElement(Q,{...ae,store:rs.h})}function ot(B,...W){const Q=(0,$r.connect)(...W)(B);return ae=>s.createElement($r.Provider,{store:rs.h},s.createElement(Q,{...ae,store:rs.h}))}const ft=ot(B=>s.createElement(s.Fragment,null,s.createElement(rr.$i,{...B},s.createElement(rr.Y0,null))));class ht{constructor(){this.reactModalRoot=document.body,this.reactModalNode=document.createElement("div"),this.root=(0,y.s)(this.reactModalNode),this.onReactModalDismiss=()=>{this.root.render(null),this.reactModalRoot.removeChild(this.reactModalNode)}}init(){tr.Z.subscribe(Ir.VJ,W=>this.showConfirmModal(W.payload)),tr.Z.subscribe(Ir.Dn,W=>this.showModalReact(W.payload)),tr.Z.subscribe(I.EK,W=>(0,Ge.bY)(W.payload))}showModalReact(W){const{component:Q,props:ae}=W,ve={component:Q,props:{...ae,isOpen:!0,onDismiss:this.onReactModalDismiss}},Ce=s.createElement((0,Oc.E)(ft,Y.config.theme2),ve);this.reactModalRoot.appendChild(this.reactModalNode),this.root.render(Ce)}showConfirmModal(W){const{confirmText:Q,onConfirm:ae=()=>{},onDismiss:ve,text2:Ce,altActionText:Ie,onAltAction:ke,noText:je,text:st,text2htmlBind:gt,yesText:bt="Yes",icon:Vt,title:Ut="Confirm",yesButtonVariant:Ot}=W,Gt={confirmText:bt,confirmButtonVariant:Ot,confirmationText:Q,icon:Vt,title:Ut,body:st,description:Ce&&gt?Cc.QX.sanitize(Ce):Ce,isOpen:!0,dismissText:je,onConfirm:()=>{ae(),this.onReactModalDismiss()},onDismiss:()=>{ve?.(),this.onReactModalDismiss()},onAlternative:ke?()=>{ke(),this.onReactModalDismiss()}:void 0,alternativeText:Ie},ln={component:Hr.s,props:Gt},pa=s.createElement((0,Oc.E)(ft,Y.config.theme2),ln);this.reactModalRoot.appendChild(this.reactModalNode),this.root.render(pa)}}var wt=e(46783),Et=e(95288),At=e(50284);function zt(B,W=!1){return new Promise(Q=>{const ae=document.createElement("script");ae.onload=Q,ae.src=B,ae.async=W,document.head.appendChild(ae)})}const Rt=(0,Et.h)("EchoSrv"),Tt=Rt.logger;(0,At.x)("echo",void 0,Rt);class _t{constructor(W){this.config={flushInterval:1e4,debug:!1},this.backends=[],this.flush=()=>{for(const Q of this.backends)Q.flush()},this.addBackend=Q=>{Tt("Adding backend",!1,Q),this.backends.push(Q)},this.addEvent=(Q,ae)=>{const ve=this.getMeta(),Ce={...Q,meta:{...ve,...ae}};for(const Ie of this.backends)(Ie.supportedEvents.length===0||Ie.supportedEvents.indexOf(Ce.type)>-1)&&Ie.addEvent(Ce);Tt(`${Q.type} event`,!1,{...Q.payload,meta:Ce.meta})},this.getMeta=()=>({sessionId:"",userId:As.contextSrv.user.id,userLogin:As.contextSrv.user.login,userSignedIn:As.contextSrv.user.isSignedIn,screenSize:{width:window.innerWidth,height:window.innerHeight},windowSize:{width:window.screen.width,height:window.screen.height},userAgent:window.navigator.userAgent,ts:new Date().getTime(),timeSinceNavigationStart:performance.now(),path:window.location.pathname,url:window.location.href}),this.config={...this.config,...W},setInterval(this.flush,this.config.flushInterval)}}const Jt=(B,W)=>{(0,U.RP)().addEvent({type:U.ee.Performance,payload:{name:B,value:W}})},Ht=B=>faro?.api?.pushError(B);class fn{constructor(W){this.options=W,this.buffer=[],this.supportedEvents=[U.ee.Performance],this.addEvent=Q=>{this.buffer.push(Q.payload)},this.flush=()=>{this.buffer.length!==0&&(wt.ae.post("/api/frontend-metrics",{events:this.buffer}),this.buffer=[])}}}var kt=e(49641);class gn{constructor(W){this.options=W,this.supportedEvents=[U.ee.Pageview,U.ee.Interaction],this.addEvent=ve=>{window.applicationInsights&&((0,kt.Si)(ve)&&window.applicationInsights.trackPageView?.(),(0,kt.fV)(ve)&&window.applicationInsights.trackEvent?.({name:ve.payload.interactionName,properties:ve.payload.properties}))},this.flush=()=>{};const Q={config:{connectionString:W.connectionString,endpointUrl:W.endpointUrl}};zt("https://js.monitor.azure.com/scripts/b/ai.2.min.js").then(()=>{const ve=new window.Microsoft.ApplicationInsights.ApplicationInsights(Q);window.applicationInsights=ve.loadAppInsights()})}}class cn{constructor(W){this.options=W,this.supportedEvents=[U.ee.Pageview],this.googleAnalytics4SendManualPageViews=!1,this.addEvent=ve=>{window.gtag&&this.googleAnalytics4SendManualPageViews&&window.gtag("event","page_view",{page_path:ve.payload.page})},this.flush=()=>{};const Q=`https://www.googletagmanager.com/gtag/js?id=${W.googleAnalyticsId}`;zt(Q,!0),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date);const ae={page_path:window.location.pathname};W.user&&(ae.user_id=W.user.analytics.identifier),this.googleAnalytics4SendManualPageViews=W.googleAnalytics4SendManualPageViews,window.gtag("config",W.googleAnalyticsId,ae)}}class tn{constructor(W){this.options=W,this.supportedEvents=[U.ee.Pageview],this.trackedUserId=null,this.addEvent=ve=>{if(!window.ga)return;window.ga("set",{page:ve.payload.page}),window.ga("send","pageview");const{userSignedIn:Ce,userId:Ie}=ve.meta;Ce&&Ie!==this.trackedUserId&&(this.trackedUserId=Ie,window.ga("set","userId",Ie))},this.flush=()=>{};const Q=`https://www.google-analytics.com/analytics${W.debug?"_debug":""}.js`;zt(Q);const ae=window.ga=window.ga||function(){(ae.q=ae.q||[]).push(arguments)};ae.l=+new Date,ae("create",W.googleAnalyticsId,"auto"),ae("set","anonymizeIp",!0)}}class pn{constructor(W){this.options=W,this.supportedEvents=[U.ee.Pageview,U.ee.Interaction,U.ee.ExperimentView],this.addEvent=Ce=>{window.rudderanalytics&&((0,kt.Si)(Ce)&&window.rudderanalytics.page?.(),(0,kt.fV)(Ce)&&window.rudderanalytics.track?.(Ce.payload.interactionName,Ce.payload.properties),(0,kt.mR)(Ce)&&window.rudderanalytics.track?.("experiment_viewed",{experiment_id:Ce.payload.experimentId,experiment_group:Ce.payload.experimentGroup,experiment_variant:Ce.payload.experimentVariant}))},this.flush=()=>{};const Q=W.sdkUrl||"https://cdn.rudderlabs.com/v1/rudder-analytics.min.js";zt(Q);const ae=window.rudderanalytics=[],ve=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"];for(let Ce=0;Ce<ve.length;Ce++){const Ie=ve[Ce];ae[Ie]=function(ke){return function(){ae.push([ke].concat(Array.prototype.slice.call(arguments)))}}(Ie)}if(window.rudderanalytics?.load?.(W.writeKey,W.dataPlaneUrl,{configUrl:W.configUrl,destSDKBaseURL:W.integrationsUrl}),W.user){const{identifier:Ce,intercomIdentifier:Ie}=W.user.analytics,ke={};Ie&&(ke.Intercom={user_hash:Ie}),window.rudderanalytics?.identify?.(Ce,{email:W.user.email,orgId:W.user.orgId,language:W.user.language,version:W.buildInfo.version,edition:W.buildInfo.edition},ke)}}}var dn=e(52892),Un=e(9400),qn=e(76995),Fn=e(48742),Tn=e(65289),sa=e(88774),ia=e(9405);class Ga extends ia.d{constructor(){super(...arguments),this.name="EchoSrvTransport",this.version=Y.config.buildInfo.version}send(W){(0,U.RP)().addEvent({type:U.ee.GrafanaJavascriptAgent,payload:W})}isBatched(){return!0}getIgnoreUrls(){return[]}}class Za{constructor(W){this.options=W,this.supportedEvents=[U.ee.GrafanaJavascriptAgent],this.addEvent=ve=>{this.transports.forEach(Ce=>Ce.send(ve.payload))},this.flush=()=>{};const Q=[];this.transports=[],W.customEndpoint&&this.transports.push(new dn.V({url:W.customEndpoint,apiKey:W.apiKey})),W.errorInstrumentalizationEnabled&&Q.push(new Un.w),W.consoleInstrumentalizationEnabled&&Q.push(new qn.J),W.webVitalsInstrumentalizationEnabled&&Q.push(new Fn.P);const ae={globalObjectKey:W.globalObjectKey||"faro",preventGlobalExposure:W.preventGlobalExposure||!1,app:{version:W.buildInfo.version,environment:W.buildInfo.env},instrumentations:Q,transports:[new Ga],ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"],metas:[...Tn.i,{session:{id:(Math.random()+1).toString(36).substring(2)}}]};this.faroInstance=(0,sa.p)(ae),W.user&&this.faroInstance.api.setUser({id:W.user.id,attributes:{orgId:String(W.user.orgId)||""}})}}var Va=e(37517),_a=e.n(Va),da=e(41247),Rn=e(93095),Jn=e(18815),ea=e(58434),la=e(5312);function ba(B){return()=>{const W=document.querySelectorAll(":hover");for(let Q=W.length-1;Q>0;Q--){const ae=W[Q];ae instanceof HTMLElement&&ae.dataset?.panelid&&B(parseInt(ae.dataset?.panelid,10))}}}class wa{constructor(W,Q){this.locationService=W,this.chromeService=Q}clearAndInitGlobalBindings(W){_a().reset(),W.chromeless||(this.bind(["?","h"],this.showHelpModal),this.bind("g h",this.goToHome),this.bind("g d",this.goToDashboards),this.bind("g e",this.goToExplore),this.bind("g a",this.openAlerting),this.bind("g p",this.goToProfile),this.bind("esc",this.exit),this.bindGlobalEsc()),this.bind("c t",()=>(0,cl.X)(!1)),this.bind("c r",()=>(0,cl.X)(!0))}bindGlobalEsc(){this.bindGlobal("esc",this.globalEsc)}globalEsc(){const Q=document.activeElement;if(!(document.querySelectorAll(".slate-typeahead--open").length>0)){if(Q&&Q instanceof HTMLElement&&(Q.nodeName==="INPUT"||Q.nodeName==="TEXTAREA"||Q.hasAttribute("data-slate-editor"))){Q.blur();return}this.exit()}}closeSearch(){this.locationService.partial({search:null})}openAlerting(){this.locationService.push("/alerting")}goToDashboards(){this.locationService.push("/dashboards")}goToHome(){this.locationService.push("/")}goToProfile(){this.locationService.push("/profile")}goToExplore(){this.locationService.push("/explore")}showHelpModal(){tr.Z.publish(new Ir.Dn({component:xd.B}))}exit(){const W=this.locationService.getSearchObject();if(W.editview){this.locationService.partial({editview:null,editIndex:null});return}if(W.inspect){this.locationService.partial({inspect:null,inspectTab:null});return}if(W.editPanel){this.locationService.partial({editPanel:null,tab:null});return}if(W.viewPanel){this.locationService.partial({viewPanel:null,tab:null});return}const{kioskMode:Q}=this.chromeService.state.getValue();Q&&this.chromeService.exitKioskMode(),W.search&&this.closeSearch()}showDashEditView(){this.locationService.partial({editview:"settings"})}bind(W,Q){_a().bind(W,ae=>{ae.preventDefault(),ae.stopPropagation(),ae.returnValue=!1,Q.call(this)},"keydown")}bindGlobal(W,Q){_a().bindGlobal(W,ae=>{ae.preventDefault(),ae.stopPropagation(),ae.returnValue=!1,Q.call(this)},"keydown")}unbind(W,Q){_a().unbind(W,Q)}bindWithPanelId(W,Q){this.bind(W,ba(Q))}setupTimeRangeBindings(W=!0){this.bind("t a",()=>{tr.Z.publish(new Ir.QI({updateUrl:W}))}),this.bind("t z",()=>{tr.Z.publish(new Ir.p8({scale:2,updateUrl:W}))}),this.bind("ctrl+z",()=>{tr.Z.publish(new Ir.p8({scale:2,updateUrl:W}))}),this.bind("t left",()=>{tr.Z.publish(new Ir.Qt({direction:Ir.Im.Left,updateUrl:W}))}),this.bind("t right",()=>{tr.Z.publish(new Ir.Qt({direction:Ir.Im.Right,updateUrl:W}))})}setupDashboardBindings(W){this.bind("mod+o",()=>{W.graphTooltip=(W.graphTooltip+1)%3,W.events.publish(new pi.oi),W.startRefresh()}),this.bind("mod+s",()=>{W.meta.canSave&&tr.Z.publish(new Ir.Dn({component:ea.d,props:{dashboard:W}}))}),this.setupTimeRangeBindings(),this.bindWithPanelId("e",Q=>{if(W.canEditPanelById(Q)){const ae=this.locationService.getSearchObject().editPanel!==void 0;this.locationService.partial({editPanel:ae?null:Q})}}),this.bindWithPanelId("v",Q=>{const ae=this.locationService.getSearchObject().viewPanel!==void 0;this.locationService.partial({viewPanel:ae?null:Q})}),this.bindWithPanelId("p l",Q=>{const ae=W.getPanelById(Q),ve={...ae.options};ve.legend.showLegend?ve.legend.showLegend=!1:ve.legend.showLegend=!0,ae.updateOptions(ve)}),this.bindWithPanelId("i",Q=>{this.locationService.partial({inspect:Q})}),Xa.Vt.hasAccessToExplore()&&this.bindWithPanelId("p x",async Q=>{const ae=W.getPanelById(Q),ve=await(0,Jn.H6)({queries:ae.targets,dsRef:ae.datasource,scopedVars:ae.scopedVars,timeRange:(0,qo.$t)().timeRange()});if(ve){const Ce=T.u.stripBaseFromUrl(ve);Ce&&this.locationService.push(Ce)}}),this.bindWithPanelId("p r",Q=>{W.canEditPanelById(Q)&&!(W.panelInView||W.panelInEdit)&&tr.Z.publish(new Ir.Eb(Q))}),this.bindWithPanelId("p d",Q=>{if(W.canEditPanelById(Q)){const ae=W.getPanelInfoById(Q).index;W.duplicatePanel(W.panels[ae])}}),this.bindWithPanelId("p s",Q=>{const ae=W.getPanelInfoById(Q);tr.Z.publish(new Ir.Dn({component:la.ShareModal,props:{dashboard:W,panel:ae?.panel}}))}),this.bind("d l",()=>{W.toggleLegendsForAll()}),this.bind("d x",()=>{W.toggleExemplarsForAll()}),this.bind("d shift+c",()=>{W.collapseRows()}),this.bind("d shift+e",()=>{W.expandRows()}),this.bind("d n",()=>{this.locationService.push("/dashboard/new")}),this.bind("d r",()=>{W.startRefresh()}),this.bind("d s",()=>{this.showDashEditView()}),this.bind("d k",()=>{this.chromeService.onToggleKioskMode()}),this.bind("d a",()=>{const ae=this.locationService.getSearchObject().autofitpanels?"":"&autofitpanels";window.location.href=window.location.href+ae})}}function Da(B){if(performance)try{performance.mark(`${B}_started`)}catch(W){console.error(`[Metrics] Failed to startMeasure ${B}`,W)}}function Pn(B){if(performance)try{const W=`${B}_started`,Q=`${B}_completed`,ae=`${B}_measured`;performance.mark(Q);const ve=performance.measure(ae,W,Q);Jt(`${B}_ms`,ve.duration),performance.clearMarks(W),performance.clearMarks(Q),performance.clearMeasures(ae)}catch(W){console.error(`[Metrics] Failed to stopMeasure ${B}`,W)}}async function $n(){if(window.location.search.indexOf("why-render")!==-1){const{default:B}=await e.e(510).then(e.t.bind(e,60510,23));B(React,{trackAllPureComponents:!0})}}var kn=e(67368),va=e(26515),ma=e(49766),Ra=e(14712),Ua=e(74813),Ds=e(5894),fs=e(38849),nr=e(72863),ar=e(34834);const Io=()=>new ar.q(new URL(e.p+e.u(1511),e.b));var ko=e(1050),ni=e(94290);const Lr=B=>new ko.y(W=>{const Q=B.subscribe(Ds.sj(ae=>{W.next(ae)}),Ds.sj(ae=>{W.error(ae)}),Ds.sj(()=>{W.complete()}));return{unsubscribe:()=>{Q.then(ae=>ae.unsubscribe())}}}),Br=B=>(0,Jr.D)(B).pipe((0,ni.w)(W=>Lr(W)));class ir{constructor(W){this.getConnectionState=()=>Br(this.centrifugeWorker.getConnectionState()),this.getDataStream=Q=>Br(this.centrifugeWorker.getDataStream(Q)).pipe((0,fs.Q)(nr.z)),this.getQueryData=async Q=>{const ae=JSON.parse(JSON.stringify(Q));return this.centrifugeWorker.getQueryData(ae)},this.getPresence=Q=>this.centrifugeWorker.getPresence(Q),this.getStream=Q=>Br(this.centrifugeWorker.getStream(Q)),this.centrifugeWorker=Ds.Ud(Io()),this.centrifugeWorker.initialize(W,Ds.sj(W.dataStreamSubscriberReadiness))}}var Ps=e(28870),Ro=e(68898),bo=e(43071),Hi=e(32063),ai=e(26233);class k0{constructor(W){this.deps=W,this.getConnectionState=()=>this.deps.centrifugeSrv.getConnectionState(),this.getDataStream=Q=>{let ae;const ve=Ce=>{const Ie=Ce.data[0];if(!ae&&!(0,ai.A1)(Ie,ai.g0.FullFrame)){console.warn(`expected first packet to contain a full frame, received ${Ie?.type}`);return}switch(Ie.type){case ai.g0.FullFrame:{ae=Ps.Av.deserialize(Ie.frame);return}case ai.g0.NewValuesSameSchema:{ae.pushNewValues(Ie.values);return}}};return this.deps.centrifugeSrv.getDataStream(Q).pipe((0,hn.U)(Ce=>(ve(Ce),{...Ce,data:[ae??Ps.Av.empty()]})))},this.getStream=Q=>this.deps.centrifugeSrv.getStream(Q),this.getQueryData=Q=>(0,Jr.D)(this.deps.centrifugeSrv.getQueryData(Q)).pipe((0,ni.w)(ae=>{const ve=(0,bo.z1)(ae,Q.request.targets);return ve.data?.length&&ve.data.find(Ie=>Ie.meta?.channel)?(0,Hi.B9)(ve,Q.request,Hi.PI):(0,Dt.of)(ve)})),this.publish=async(Q,ae)=>this.deps.backendSrv.post("api/live/publish",{channel:(0,Ro.Aj)(Q),data:ae}),this.getPresence=Q=>this.deps.centrifugeSrv.getPresence(Q)}}function H0(){const B={appUrl:`${window.location.origin}${Y.config.appSubUrl}`,orgId:As.contextSrv.user.orgId,orgRole:As.contextSrv.user.orgRole,liveEnabled:Y.config.liveEnabled,dataStreamSubscriberReadiness:va.A.ok.asObservable(),grafanaAuthToken:(0,ma.v)()},W=Y.config.featureToggles["live-service-web-worker"]?new ir(B):new Ra.R(B);(0,fu.cA)(new k0({centrifugeSrv:W,backendSrv:(0,R.i)()}))}function Eb(){return getGrafanaLiveSrv()}var G0=e(70797),j0=e(33088),Js=e(23280);function yb(B,W="extension is not a link extension"){if(!isPluginExtensionLink(B))throw new Error(W)}function bb(B,W="extension is not a command extension config"){if(!isPluginExtensionLinkConfig(B))throw new Error(W)}function c0(B,W){if(!J0(B,W))throw new Error(`Invalid link extension. The "path" is required and should start with "/a/${B}/" (currently: "${W}"). Skipping the extension.`)}function d0(B){if(!nv(B))throw new Error('Invalid component extension, the "component" property needs to be a valid React component.')}function Q0(B){if(!X0(B))throw new Error(`Invalid extension "${B.title}". The extensionPointId should start with either "grafana/" or "plugins/" (currently: "${B.extensionPointId}"). Skipping the extension.`)}function Y0(B){if(!q0(B))throw new Error(`Invalid extension "${B.title}". The "configure" property must be a function. Skipping the extension.`)}function u0(B,W){for(const Q of W)if(!ev(B[Q]))throw new Error(`Invalid extension "${B.title}". Property "${Q}" must be a string and cannot be empty. Skipping the extension.`)}function Z0(B,W="The provided value is a Promise."){if(m0(B))throw new Error(W)}function J0(B,W){return!!(typeof W=="string"&&W.length>0&&W.startsWith(`/a/${B}/`))}function X0(B){return!!(B.extensionPointId?.startsWith("grafana/")||B.extensionPointId?.startsWith("plugins/"))}function q0(B){return B.configure?typeof B.configure=="function":!0}function ev(B){return typeof B=="string"&&B.length>0}function tv(B,W){try{if(u0(W,["title","description","extensionPointId"]),Q0(W),(0,Js.IX)(W)){if(Y0(W),!W.path&&!W.onClick)return(0,Js.KE)(`Invalid extension "${W.title}". Either "path" or "onClick" is required.`),!1;W.path&&c0(B,W.path)}return(0,Js.eP)(W)&&d0(W.component),!0}catch(Q){return Q instanceof Error&&(0,Js.KE)(Q.message),!1}}function m0(B){return B instanceof Promise||typeof B=="object"&&B!==null&&"then"in B&&"catch"in B}function nv(B){const W=ae=>typeof ae=="object"&&ae!==null&&"$$typeof"in ae;return typeof B=="function"||(ae=>W(ae)&&ae.$$typeof===Symbol.for("react.memo"))(B)}function av(B){const W={};for(const{pluginId:Q,extensionConfigs:ae,error:ve}of B){if(ve){(0,Js.KE)(`"${Q}" plugin failed to load, skip registering its extensions.`);continue}for(const Ce of ae){const{extensionPointId:Ie}=Ce;if(!Ce||!tv(Q,Ce))continue;let ke={config:Ce,pluginId:Q};Array.isArray(W[Ie])?W[Ie].push(ke):W[Ie]=[ke]}}return(0,Js._A)(W)}var Fu=e(73999),f0=e(20764),sv=e(67900),rv=e(54310),ov=e(44658);function iv(){try{return[(0,Js.CR)({title:"Add to dashboard",description:"Use the query and panel from explore and create/add it to a dashboard",extensionPointId:Fu.y.ExploreToolbarAction,icon:"apps",category:"Dashboards",configure:()=>{if(Xa.Vt.hasPermission(En.AccessControlAction.DashboardsCreate)||Xa.Vt.hasPermission(En.AccessControlAction.DashboardsWrite))return{}},onClick:(B,{context:W,openModal:Q})=>{Q({title:(0,ov.k)(),body:({onDismiss:ae})=>s.createElement(rv.U,{onClose:ae,exploreId:W?.exploreId})})}}),(0,Js.CR)({title:"Add correlation",description:"Create a correlation from this query",extensionPointId:Fu.y.ExploreToolbarAction,icon:"link",configure:B=>B?.shouldShowAddCorrelation?{}:void 0,onClick:(B,{context:W})=>{(0,rs.WI)((0,f0.Hg)({editorMode:!0})),(0,rs.WI)((0,sv.aA)({exploreId:W.exploreId}))}})]}catch(B){return(0,Js.KE)(`Could not configure extensions for Explore due to: "${B}"`),[]}}function lv(){return[...iv()]}const cv=({context:B,extensionPointId:W,limitPerPlugin:Q,registry:ae})=>{const ve=B?(0,Js.fD)(B):{},Ce=ae[W]??[],Ie=[],ke={};for(const je of Ce)try{const st=je.config,{pluginId:gt}=je;if(Q&&ke[gt]>=Q)continue;if(ke[gt]===void 0&&(ke[gt]=0),(0,Js.IX)(st)){const bt=dv(gt,st,ve);if(st.configure&&bt===void 0)continue;const Vt=bt?.path||st.path,Ut={id:(0,Js.lu)(gt,st),type:Fu.D.link,pluginId:gt,onClick:uv(gt,st,ve),icon:bt?.icon||st.icon,title:bt?.title||st.title,description:bt?.description||st.description,path:(0,h.isString)(Vt)?mv(gt,Vt,st):void 0,category:bt?.category||st.category};Ie.push(Ut),ke[gt]+=1}if((0,Js.eP)(st)){d0(st.component);const bt={id:(0,Js.lu)(je.pluginId,st),type:Fu.D.component,pluginId:je.pluginId,title:st.title,description:st.description,component:(0,Js.DQ)(gt,st.component)};Ie.push(bt),ke[gt]+=1}}catch(st){st instanceof Error&&(0,Js.KE)(st.message)}return{extensions:Ie}};function dv(B,W,Q){try{const ae=W.configure?.(Q);if(ae===void 0)return;let{title:ve=W.title,description:Ce=W.description,path:Ie=W.path,icon:ke=W.icon,category:je=W.category,...st}=ae;return Z0(ae,`The configure() function for "${W.title}" returned a promise, skipping updates.`),Ie&&c0(B,Ie),u0({title:ve,description:Ce},["title","description"]),Object.keys(st).length>0&&(0,Js.KE)(`Extension "${W.title}", is trying to override restricted properties: ${Object.keys(st).join(", ")} which will be ignored.`),{title:ve,description:Ce,path:Ie,icon:ke,category:je}}catch(ae){ae instanceof Error&&(0,Js.KE)(ae.message);return}}function uv(B,W,Q){const{onClick:ae}=W;if(ae)return function(Ce){try{(0,zr.ff)("ui_extension_link_clicked",{pluginId:B,extensionPointId:W.extensionPointId,title:W.title,category:W.category});const Ie=ae(Ce,(0,Js.Ch)(B,Q));m0(Ie)&&Ie.catch(ke=>{ke instanceof Error&&(0,Js.KE)(ke.message)})}catch(Ie){Ie instanceof Error&&(0,Js.KE)(Ie.message)}}}function mv(B,W,Q){return Se.Cj.appendQueryToUrl(W,Se.Cj.toUrlParams({uel_pid:B,uel_epid:Q.extensionPointId}))}var g0=e(20229);async function fv(B={}){Da("frontend_plugins_preload");const W=Object.values(B).filter(ae=>ae.preload),Q=await Promise.all(W.map(gv));return Pn("frontend_plugins_preload"),Q}async function gv(B){const{path:W,version:Q,id:ae}=B;try{Da(`frontend_plugin_preload_${ae}`);const{plugin:ve}=await Jl.N$({path:W,version:Q,isAngular:B.angular.detected,pluginId:ae}),{extensionConfigs:Ce=[]}=ve;return(0,gd.a)(ae),{pluginId:ae,extensionConfigs:Ce}}catch(ve){return console.error(`[Plugins] Failed to preload plugin: ${W} (version: ${Q})`,ve),{pluginId:ae,extensionConfigs:[],error:ve}}finally{Pn(`frontend_plugin_preload_${ae}`)}}var hv=e(93231),pv=e(70472),h0=e(81223),p0=e(71244),vv=e(17771),Ev=e(80833),Zh=e(98659);class yv{constructor(){this.subject=new hv.t(1)}get(){return this.subject.asObservable()}run(W){const{queries:Q,timezone:ae,datasource:ve,panelId:Ce,app:Ie,dashboardUID:ke,timeRange:je,timeInfo:st,cacheTimeout:gt,queryCachingTTL:bt,maxDataPoints:Vt,scopedVars:Ut,minInterval:Ot}=W;this.subscription&&this.subscription.unsubscribe();const Gt={app:Ie??h0.zj.Unknown,requestId:(0,vv.t)(),timezone:ae,panelId:Ce,dashboardUID:ke,range:je,timeInfo:st,interval:"",intervalMs:0,targets:(0,h.cloneDeep)(Q),maxDataPoints:Vt,scopedVars:Ut||{},cacheTimeout:gt,queryCachingTTL:bt,startTime:Date.now()};Gt.rangeRaw=je.raw,(0,Jr.D)(bv(ve,Gt.scopedVars)).pipe((0,pv.P)()).subscribe({next:ln=>{Gt.targets=Gt.targets.map(ca=>(ca.datasource||(ca.datasource=ln.getRef()),ca));const pa=Ot?(0,nt.J)().replace(Ot,Gt.scopedVars):ln.interval,Ca=p0.calculateInterval(je,Vt,pa);Gt.scopedVars=Object.assign({},Gt.scopedVars,{__interval:{text:Ca.interval,value:Ca.interval},__interval_ms:{text:Ca.intervalMs.toString(),value:Ca.intervalMs}}),Gt.interval=Ca.interval,Gt.intervalMs=Ca.intervalMs,this.subscription=(0,Zh.v7)(ln,Gt).subscribe({next:ca=>{const $a=(0,Er.zR)(ca,this.lastResult);this.lastResult=(0,Ev.C)($a,this.lastResult),this.subject.next(this.lastResult)}})},error:ln=>console.error("PanelQueryRunner Error",ln)})}cancel(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===Vs.Gu.Loading&&this.subject.next({...this.lastResult,state:Vs.Gu.Done}))}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}}async function bv(B,W){return B&&"query"in B?B:(0,l.ak)().get(B,W)}function Dv(){window.grafanaRuntime={getDashboardSaveModel:()=>{const B=(0,c.h4)().getCurrent();if(B)return B.getSaveModelCloneOld()},getDashboardTimeRange:()=>{const B=(0,qo.$t)().timeRange();return{from:B.from.valueOf(),to:B.to.valueOf(),raw:B.raw}},getPanelData:()=>{const B=(0,c.h4)().getCurrent();if(B)return B.panels.reduce((W,Q)=>(W[Q.id]=Q.getQueryRunner().getLastResult(),W),{})}}}var Cv=e(86962),Vc=e(25648),ga=e(10805),v0=e(52219),E0=e(40715),Ho=e(1377),si=e(65874);function y0(B){return B.extended&&"infoText"in B.extended?B.extended:null}function b0(B){return B.extended&&"dataSourceTypes"in B.extended?B.extended:null}function Jh(B){return B.extended&&"dataSource"in B.extended?B.extended:null}var os=e(59084),_c=e(72387);const Pv=(B,W)=>{const{rootStateKey:Q}=W.variable;if(!Q)return console.error("AdHocVariableEditor: variable has no rootStateKey"),{extended:y0(si.PF)};const{editor:ae}=(0,os.AE)(Q,B);return{extended:y0(ae)}},Sv={changeVariableDatasource:_c.Z$},xv=(0,$r.connect)(Pv,Sv);class Mv extends s.PureComponent{constructor(){super(...arguments),this.onDatasourceChanged=W=>{this.props.changeVariableDatasource((0,ga.yQ)(this.props.variable),(0,v0.iU)(W))}}componentDidMount(){const{rootStateKey:W}=this.props.variable;if(!W){console.error("AdHocVariableEditor: variable has no rootStateKey");return}}render(){const{variable:W,extended:Q}=this.props,ae=Q?.infoText??null;return s.createElement(s.Fragment,null,s.createElement(Ho.e,null,"Ad-hoc options"),s.createElement(fi.g,{label:"Data source",htmlFor:"data-source-picker"},s.createElement(E0.q,{current:W.datasource,onChange:this.onDatasourceChanged,width:30,variables:!0,noDefault:!0})),ae?s.createElement(yr.b,{title:ae,severity:"info"}):null)}}const Tv=xv(Mv);var Ov=e(88819);const Iv={addFilter:_c.KJ,removeFilter:_c.ku,changeFilter:_c.M6},Rv=(0,$r.connect)(null,Iv);class Av extends s.PureComponent{constructor(){super(...arguments),this.addFilter=W=>{this.props.addFilter((0,ga.yQ)(this.props.variable),W)},this.removeFilter=W=>{this.props.removeFilter((0,ga.yQ)(this.props.variable),W)},this.changeFilter=(W,Q)=>{this.props.changeFilter((0,ga.yQ)(this.props.variable),{index:W,filter:Q})}}render(){const{filters:W,datasource:Q,baseFilters:ae}=this.props.variable;return s.createElement(Ov.F,{datasource:Q,filters:W,baseFilters:ae,disabled:this.props.readOnly,addFilter:this.addFilter,removeFilter:this.removeFilter,changeFilter:this.changeFilter})}}const D0=Rv(Av);D0.displayName="AdHocPicker";var C0=e(31659);const Lv=B=>B.map(W=>Nv(W).map(wv).join("|")),Bv=B=>{if((0,h.isArray)(B))return B.map(P0).filter(Wv);const W=P0(B);return W===null?[]:[W]};function wv(B){return B==null?"":/\|/g[Symbol.replace](B,"__gfp__")}function Uv(B){return B==null?"":/__gfp__/g[Symbol.replace](B,"|")}function Nv(B){return[B.key,B.operator,B.value]}function P0(B){if(!(0,h.isString)(B)||B.length===0)return null;const W=B.split("|").map(Uv);return{key:W[0],operator:W[1],value:W[2]}}function Wv(B){return B!==null&&(0,h.isString)(B.value)}const S0=async()=>{},Fv=()=>({id:"adhoc",description:"Add key/value filters on the fly.",name:"Ad hoc filters",initialState:C0.Js,reducer:C0.jo,picker:D0,editor:Tv,dependsOn:()=>!1,setValue:S0,setValueFromUrl:async(B,W)=>{const Q=Bv(W);await(0,rs.WI)((0,_c.Ue)((0,ga.yQ)(B),Q))},updateOptions:S0,getSaveModel:B=>{const{index:W,id:Q,state:ae,global:ve,rootStateKey:Ce,...Ie}=(0,h.cloneDeep)(B);return Ie},getValueForUrl:B=>{const W=B?.filters??[];return Lv(W)}});var x0=e(83205),Kv=e(18975),Sr=e(74539),Us=e(43489),Xh=e(64365),M0=e(9360),Vv=e(59069),Ku=e(18719),_v=e(16980),$v=e(23136),zv=e(85431),kv=e(87550),Hv=e(90308),Xs=e(99165),gs=e(14595),$c=e(15806),$s=e(81990);const Gv={...$s.Eg,type:"query",datasource:null,query:"",regex:"",sort:$s.$U.disabled,refresh:$s.Bd.onDashboardLoad,multi:!1,includeAll:!1,allValue:null,options:[],current:{},definition:""},jv=(B,W)=>{if(W===$s.$U.disabled)return B;const Q=Math.ceil(W/2),ae=W%2===0;return Q===1?B=(0,h.sortBy)(B,"text"):Q===2?B=(0,h.sortBy)(B,ve=>{if(!ve.text)return-1;const Ce=ve.text.match(/.*?(\d+).*/);return!Ce||Ce.length<2?-1:parseInt(Ce[1],10)}):Q===3?B=(0,h.sortBy)(B,ve=>(0,h.toLower)(ve.text)):Q===4&&B.sort((ve,Ce)=>ve.text?Ce.text?ve.text.localeCompare(Ce.text,void 0,{numeric:!0}):1:-1),ae&&(B=B.reverse()),B},Qv=(B,W)=>{const Q=[];let ae=null;W.lastIndex=0;do ae=W.exec(B),ae&&Q.push(ae);while(W.global&&ae&&ae[0]!==""&&ae[0]!==void 0);return Q},Yv=(B,W,Q)=>{let ae,ve=[];B&&(ae=(0,Wa.jO)(B));for(let Ce=0;Ce<Q.length;Ce++){const Ie=Q[Ce];let ke=Ie.text===void 0||Ie.text===null?Ie.value:Ie.text,je=Ie.value===void 0||Ie.value===null?Ie.text:Ie.value;if((0,h.isNumber)(je)&&(je=je.toString()),(0,h.isNumber)(ke)&&(ke=ke.toString()),ae){const st=Qv(je,ae);if(!st.length)continue;const gt=st.find(Ot=>Ot.groups&&Ot.groups.value),bt=st.find(Ot=>Ot.groups&&Ot.groups.text),Vt=st.find(Ot=>Ot.length>1),Ut=st.length>1&&Vt;if(gt||bt)je=gt?.groups?.value??bt?.groups?.text,ke=bt?.groups?.text??gt?.groups?.value;else if(Ut){for(let Ot=0;Ot<st.length;Ot++){const Gt=st[Ot];ve.push({text:Gt[1],value:Gt[1],selected:!1})}continue}else Vt&&(ke=Vt[1],je=Vt[1])}ve.push({text:ke,value:je,selected:!1})}return ve=(0,h.uniqBy)(ve,"value"),jv(ve,W)},T0=(0,Vo.oM)({name:"templating/query",initialState:$c.s,reducers:{updateVariableOptions:(B,W)=>{const{results:Q,templatedRegex:ae}=W.payload.data,ve=(0,os.ir)(B,W.payload.id);if(ve.type!=="query")return;const{includeAll:Ce,sort:Ie}=ve,ke=Yv(ae,Ie,Q);Ce&&ke.unshift({text:Sr.xk,value:Sr.r2,selected:!1}),ke.length||ke.push({text:Sr.BH,value:Sr.QX,isNone:!0,selected:!1}),ve.options=ke}}}),Zv=T0.reducer,{updateVariableOptions:Jv}=T0.actions;function Xv(){return B=>B.pipe((0,hn.U)(qv))}function qv(B){const W=B.series;if(!W||!W.length)return[];if(nE(W))return W;const Q=(0,Er.F9)(W),ae=[];let ve=-1,Ce=-1,Ie=-1,ke=-1;for(const je of Q)for(let st=0;st<je.fields.length;st++){const gt=je.fields[st],bt=(0,te.CZ)(gt,je,W).toLowerCase();gt.type===k.fS.string&&Ie===-1&&(Ie=st),bt==="text"&&gt.type===k.fS.string&&Ce===-1&&(Ce=st),bt==="value"&&gt.type===k.fS.string&&ve===-1&&(ve=st),bt==="expandable"&&(gt.type===k.fS.boolean||gt.type===k.fS.number)&&ke===-1&&(ke=st)}if(Ie===-1)throw new Error("Couldn't find any field of type string in the results.");for(const je of Q)for(let st=0;st<je.length;st++){const gt=ke!==-1?je.fields[ke].values[st]:void 0,bt=je.fields[Ie].values[st],Vt=Ce!==-1?je.fields[Ce].values[st]:null,Ut=ve!==-1?je.fields[ve].values[st]:null;if(ve===-1&&Ce===-1){ae.push({text:bt,value:bt,expandable:gt});continue}if(ve===-1&&Ce!==-1){ae.push({text:Vt,value:Vt,expandable:gt});continue}if(ve!==-1&&Ce===-1){ae.push({text:Ut,value:Ut,expandable:gt});continue}ae.push({text:Vt,value:Ut,expandable:gt})}return ae}function eE(B){return W=>W.pipe((0,hn.U)(Q=>{const{variable:ae,dispatch:ve,getTemplatedRegexFunc:Ce}=B;if(!ae.rootStateKey){console.error("updateOptionsState: variable.rootStateKey is not defined");return}const Ie=Ce(ae),ke=(0,ga.Y6)(ae,{results:Q,templatedRegex:Ie});ve((0,gs.mb)(ae.rootStateKey,Jv(ke)))}))}function tE(B){return W=>W.pipe((0,br.z)(()=>{const{dispatch:Q,variable:ae,searchFilter:ve}=B;return ve?(0,Dt.of)():(0,Jr.D)(Q((0,Xs.xQ)((0,ga.yQ)(ae))))}))}function nE(B){if(!B)return!1;if(!B.length)return!0;const W=B[0];if((0,Er.aY)(W))return!1;for(const Q in W){if(!W.hasOwnProperty(Q)||W[Q]!==null&&typeof W[Q]!="string"&&typeof W[Q]!="number")continue;const ae=Q.toLowerCase();if(ae==="text"||ae==="value")return!0}return!1}var Vu=e(23361),aE=e(9833);class sE{constructor(){this.runners=[new rE,new oE,new iE,new cE]}getRunnerForDatasource(W){const Q=this.runners.find(ae=>ae.canRun(W));if(Q)return Q;throw new Error("Couldn't find a query runner that matches supplied arguments.")}}class rE{constructor(){this.type=Vu.j2.Legacy}canRun(W){return(0,Us.R)(W)}getTarget({datasource:W,variable:Q}){if((0,Us.R)(W))return Q.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:W,variable:Q,searchFilter:ae,timeSrv:ve},Ce){if(!(0,Us.R)(W))return zc();const Ie=(0,ga.AQ)(Q,ae,ve,Ce.scopedVars);return(0,Jr.D)(W.metricFindQuery(Q.query,Ie)).pipe((0,br.z)(ke=>{if(!ke||!ke.length)return zc();const je=ke;return(0,Dt.of)({series:je,state:Vs.Gu.Done,timeRange:Ie.range})}))}}class oE{constructor(){this.type=Vu.j2.Standard}canRun(W){return(0,Us.Ju)(W)}getTarget({datasource:W,variable:Q}){if((0,Us.Ju)(W))return W.variables.toDataQuery(Q.query);throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:W,runRequest:Q},ae){return(0,Us.Ju)(W)?W.variables.query?Q(W,ae,W.variables.query.bind(W.variables)):Q(W,ae):zc()}}class iE{constructor(){this.type=Vu.j2.Custom}canRun(W){return(0,Us.d7)(W)}getTarget({datasource:W,variable:Q}){if((0,Us.d7)(W))return Q.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:W,runRequest:Q},ae){return(0,Us.d7)(W)?Q(W,ae,W.variables.query.bind(W.variables)):zc()}}const lE="variable-query";class cE{constructor(){this.type=Vu.j2.Datasource}canRun(W){return(0,Us.X7)(W)}getTarget({datasource:W,variable:Q}){if((0,Us.X7)(W))return{...Q.query,refId:Q.query.refId??lE};throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:W,runRequest:Q},ae){return(0,Us.X7)(W)?Q(W,ae):zc()}}function zc(){return(0,Dt.of)({state:Vs.Gu.Done,series:[],timeRange:(0,aE.JK)()})}class dE{constructor(W={dispatch:rs.WI,getState:rs.y0,getVariable:os.E0,getTemplatedRegex:ga.gR,getTimeSrv:qo.$t,queryRunners:new sE,runRequest:Zh.v7}){this.dependencies=W,this.updateOptionsRequests=new Xh.x,this.updateOptionsResults=new Xh.x,this.cancelRequests=new Xh.x,this.onNewRequest=this.onNewRequest.bind(this),this.subscription=this.updateOptionsRequests.subscribe(this.onNewRequest)}queueRequest(W){this.updateOptionsRequests.next(W)}getResponse(W){return this.updateOptionsResults.asObservable().pipe((0,Ku.h)(Q=>Q.identifier===W))}cancelRequest(W){this.cancelRequests.next({identifier:W})}destroy(){this.subscription.unsubscribe()}onNewRequest(W){const{datasource:Q,identifier:ae,searchFilter:ve}=W;try{const{dispatch:Ce,runRequest:Ie,getTemplatedRegex:ke,getVariable:je,queryRunners:st,getTimeSrv:gt,getState:bt}=this.dependencies,Vt=(0,os.S_)(bt());this.updateOptionsResults.next({identifier:ae,state:Vs.Gu.Loading});const Ut=je(ae,bt());if(Ut.type!=="query")return;const Ot=gt(),Gt={variable:Ut,datasource:Q,searchFilter:ve,timeSrv:Ot,runRequest:Ie},ln=st.getRunnerForDatasource(Q),pa=ln.getTarget({datasource:Q,variable:Ut}),Ca=this.getRequest(Ut,W,pa);ln.runRequest(Gt,Ca).pipe((0,Ku.h)(()=>{const ca=(0,os.S_)(bt());return Vt===ca}),(0,Ku.h)(ca=>ca.state===Vs.Gu.Done||ca.state===Vs.Gu.Error),(0,_v.q)(1),(0,br.z)(ca=>ca.state===Vs.Gu.Error?(0,M0._)(()=>ca.error):(0,Dt.of)(ca)),Xv(),eE({variable:Ut,dispatch:Ce,getTemplatedRegexFunc:ke}),tE({variable:Ut,dispatch:Ce,searchFilter:ve}),(0,$v.R)((0,Vv.T)(this.updateOptionsRequests,this.cancelRequests).pipe((0,Ku.h)(ca=>{let $a=!1;return ca.identifier.id===ae.id&&($a=!0,this.updateOptionsResults.next({identifier:ae,state:Vs.Gu.Loading,cancelled:$a})),$a}))),(0,zv.K)(ca=>ca.cancelled?(0,Dt.of)({}):(this.updateOptionsResults.next({identifier:ae,state:Vs.Gu.Error,error:ca}),(0,M0._)(()=>ca))),(0,kv.x)(()=>{this.updateOptionsResults.next({identifier:ae,state:Vs.Gu.Done})})).subscribe()}catch(Ce){this.updateOptionsResults.next({identifier:ae,state:Vs.Gu.Error,error:Ce})}}getRequest(W,Q,ae){const{searchFilter:ve}=Q,Ce={variable:{text:W.current.text,value:W.current.value}},je={...ve?{searchFilter:{text:ve,value:ve}}:{},...Ce},st=this.dependencies.getTimeSrv().timeRange();return{app:h0.zj.Dashboard,requestId:(0,Hv.Z)(),timezone:"",range:st,interval:"",intervalMs:0,targets:[ae],scopedVars:je,startTime:Date.now()}}}let O0;function uE(B){O0=B}function qh(){return O0}const mE=B=>{if(!fE(B))return B.name;const{current:W}=B;return Array.isArray(W.text)?W.text.join(" + "):W.text},fE=B=>Array.isArray(B?.options)||typeof B?.current=="object";var yi=(B=>(B[B.moveUp=38]="moveUp",B[B.moveDown=40]="moveDown",B[B.select=32]="select",B[B.cancel=27]="cancel",B[B.selectAndClose=13]="selectAndClose",B))(yi||{});class gE extends s.PureComponent{constructor(){super(...arguments),this.onKeyDown=W=>{if(yi[W.keyCode]&&W.keyCode!==yi.select){const Q=W.ctrlKey||W.metaKey||W.shiftKey;this.props.onNavigate(W.keyCode,Q),W.preventDefault()}},this.onChange=W=>{this.props.onChange(W.target.value)}}render(){const{value:W,id:Q,onNavigate:ae,...ve}=this.props;return s.createElement("input",{...ve,ref:Ce=>{Ce&&(Ce.focus(),Ce.setAttribute("style",`width:${Math.max(Ce.width,150)}px`))},type:"text",className:"gf-form-input",value:W??"",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:(0,Ka.t)("variable.dropdown.placeholder","Enter variable value")})}}const hE=({loading:B,disabled:W,onClick:Q,text:ae,onCancel:ve,id:Ce})=>{const Ie=(0,lt.wW)(R0),ke=(0,s.useCallback)(je=>{je.stopPropagation(),je.preventDefault(),Q()},[Q]);return B?s.createElement("div",{className:Ie.container,"data-testid":Cs.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${ae}`),title:ae,id:Ce},s.createElement(I0,{text:ae}),s.createElement(pE,{onCancel:ve})):s.createElement("button",{onClick:ke,className:Ie.container,"data-testid":Cs.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${ae}`),"aria-expanded":!1,"aria-controls":`options-${Ce}`,id:Ce,title:ae,disabled:W},s.createElement(I0,{text:ae}),s.createElement(ka.J,{"aria-hidden":!0,name:"angle-down",size:"sm"}))},I0=({text:B})=>{const W=(0,lt.wW)(R0);return s.createElement("span",{className:W.textAndTags},B===Sr.xk?(0,Ka.t)("variable.picker.link-all","All"):B)},pE=({onCancel:B})=>{const W=(0,s.useCallback)(Q=>{Q.preventDefault(),B()},[B]);return s.createElement(ho.u,{content:"Cancel query"},s.createElement(ka.J,{className:"spin-clockwise",name:"sync",size:"sm",onClick:W,"aria-label":Cs.wl.components.LoadingIndicator.icon}))},R0=B=>({container:(0,we.css)`
    max-width: 500px;
    padding-right: 10px;
    padding: 0 ${B.spacing(1)};
    background-color: ${B.components.input.background};
    border: 1px solid ${B.components.input.borderColor};
    border-radius: ${B.shape.radius.default};
    display: flex;
    align-items: center;
    color: ${B.colors.text};
    height: ${B.spacing(B.components.height.md)};

    .label-tag {
      margin: 0 5px;
    }

    &:disabled {
      background-color: ${B.colors.action.disabledBackground};
      color: ${B.colors.action.disabledText};
      border: 1px solid ${B.colors.action.disabledBackground};
    }
  `,textAndTags:(0,we.css)`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-right: ${B.spacing(.25)};
    user-select: none;
  `});class vE extends s.PureComponent{constructor(){super(...arguments),this.onToggle=W=>Q=>{const ae=Q.shiftKey||Q.ctrlKey||Q.metaKey;this.handleEvent(Q),this.props.onToggle(W,ae)},this.onToggleAll=W=>{this.handleEvent(W),this.props.onToggleAll()}}handleEvent(W){W.preventDefault(),W.stopPropagation()}render(){const{multi:W,values:Q,highlightIndex:ae,selectedValues:ve,onToggle:Ce,onToggleAll:Ie,theme:ke,...je}=this.props,st=ep(ke);return s.createElement("div",{className:st.variableValueDropdown},s.createElement("div",{className:st.variableOptionsWrapper},s.createElement("ul",{className:st.variableOptionsColumn,"aria-label":Cs.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownDropDown,...je},this.renderMultiToggle(),Q.map((gt,bt)=>this.renderOption(gt,bt)))))}renderOption(W,Q){const{highlightIndex:ae,multi:ve,theme:Ce}=this.props,Ie=ep(Ce),ke=W.value===Sr.r2;return s.createElement("li",{key:`${W.value}`},s.createElement("button",{"data-testid":Cs.wl.components.Variables.variableOption,role:"checkbox",type:"button","aria-checked":W.selected,className:(0,we.cx)((0,ue.gN)(Ce),Ie.variableOption,{[Ie.highlighted]:Q===ae,[Ie.variableAllOption]:ke},Ie.noStyledButton),onClick:this.onToggle(W)},s.createElement("span",{className:(0,we.cx)(Ie.variableOptionIcon,{[Ie.variableOptionIconSelected]:W.selected,[Ie.hideVariableOptionIcon]:!ve})}),s.createElement("span",{"data-testid":Cs.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(`${W.text}`)},ke?(0,Ka.t)("variable.picker.option-all","All"):W.text)))}renderMultiToggle(){const{multi:W,selectedValues:Q,theme:ae,values:ve}=this.props,Ce=ep(ae),Ie=ve.some(je=>je.value===Sr.r2);if(!W)return null;const ke=()=>s.createElement(Ka.cC,{i18nKey:"variable.picker.option-tooltip"},"Clear selections");return s.createElement(ho.u,{content:ke,placement:"top"},s.createElement("button",{className:(0,we.cx)((0,ue.gN)(ae),Ce.variableOption,Ce.variableOptionColumnHeader,Ce.noStyledButton,{[Ce.noPaddingBotton]:Ie}),role:"checkbox","aria-checked":Q.length>1?"mixed":"false",onClick:this.onToggleAll,"aria-label":"Toggle all values","data-placement":"top"},s.createElement("span",{className:(0,we.cx)(Ce.variableOptionIcon,{[Ce.variableOptionIconManySelected]:Q.length>1})}),s.createElement(Ka.cC,{i18nKey:"variable.picker.option-selected-values"},"Selected")," (",Q.length,")"))}}const ep=(0,xs.B)(B=>{const W=B.isDark?"public/img/checkbox.png":"public/img/checkbox_white.png";return{hideVariableOptionIcon:(0,we.css)({display:"none"}),highlighted:(0,we.css)({backgroundColor:B.colors.action.hover}),noStyledButton:(0,we.css)({width:"100%",textAlign:"left"}),variableOption:(0,we.css)({display:"block",padding:"2px 27px 0 8px",position:"relative",whiteSpace:"nowrap",minWidth:"115px",["&:hover"]:{backgroundColor:B.colors.action.hover}}),variableOptionColumnHeader:(0,we.css)({paddingTop:"5px",paddingBottom:"5px",marginBottom:"5px"}),variableOptionIcon:(0,we.css)({display:"inline-block",width:"24px",height:"18px",position:"relative",top:"4px",background:`url(${W}) left top no-repeat`}),variableOptionIconManySelected:(0,we.css)({background:`url(${W}) 0px -36px no-repeat`}),variableOptionIconSelected:(0,we.css)({background:`url(${W}) 0px -18px no-repeat`}),variableValueDropdown:(0,we.css)({backgroundColor:B.colors.background.primary,border:`1px solid ${B.colors.border.weak}`,borderRadius:B.shape.borderRadius(2),boxShadow:B.shadows.z2,position:"absolute",top:B.spacing(B.components.height.md),maxHeight:"400px",minHeight:"150px",minWidth:"150px",overflowY:"auto",overflowX:"hidden",zIndex:B.zIndex.typeahead}),variableOptionsColumn:(0,we.css)({maxHeight:"350px",display:"table-cell",lineHeight:"26px",listStyleType:"none"}),variableOptionsWrapper:(0,we.css)({display:"table",width:"100%"}),variableAllOption:(0,we.css)({borderBottom:`1px solid ${B.colors.border.weak}`,paddingBottom:B.spacing(1)}),noPaddingBotton:(0,we.css)({paddingBottom:0})}}),EE=(0,lt.HE)(vE);var yE=e(48762),A0=e(25788),bi=e(22042),Ao=e(22360);const bE=(B,W,Q)=>async(ae,ve)=>{if(W===yi.cancel)return await ae(_u(B));if(W===yi.select)return ae(tp(B,Q));if(W===yi.selectAndClose)return(0,os.AE)(B,ve()).optionsPicker.multi?ae(tp(B,Q)):(ae(tp(B,Q,!0)),ae(_u(B)));if(W===yi.moveDown)return ae((0,gs.mb)(B,(0,Ao.Ew)(1)));if(W===yi.moveUp)return ae((0,gs.mb)(B,(0,Ao.Ew)(-1)))},DE=(B,W="")=>async(Q,ae)=>{const{rootStateKey:ve}=B,{id:Ce,queryValue:Ie}=(0,os.AE)(ve,ae()).optionsPicker,ke={id:Ce,rootStateKey:ve,type:"query"},je=(0,os.E0)(ke,ae());if(!("options"in je)||(Q((0,gs.mb)(ve,(0,Ao.Ug)(W))),(0,h.trim)(Ie)===(0,h.trim)(W)))return;const{query:st,options:gt}=je,bt=typeof st=="string"?st:st.target;return(0,yE.b)(bt)?xE(Q,ae,W,ve):Q((0,gs.mb)(ve,(0,Ao.ss)(gt)))},CE=async B=>{if((0,A0.Q)(B.current))return;await Vc.z.get(B.type).setValue(B,B.current,!0)},_u=(B,W)=>async(Q,ae)=>{const ve=(0,os.AE)(B,ae()).optionsPicker,Ce={id:ve.id,rootStateKey:B,type:"query"},Ie=(0,os.E0)(Ce,ae());if(!(0,Us.eL)(Ie))return;const ke={option:ME(ve)},je={propName:"queryValue",propValue:ve.queryValue};Q((0,gs.mb)(B,(0,bi.Q8)((0,ga.Y6)(Ie,ke)))),Q((0,gs.mb)(B,(0,bi.Pl)((0,ga.Y6)(Ie,je))));const st=(0,os.E0)(Ce,ae());if((0,Us.eL)(st)&&(Q((0,gs.mb)(B,(0,Ao.nn)())),(0,ga.N9)(Ie)!==(0,ga.N9)(st)))return W?W(st):await CE(st)},PE=(B,W)=>async(Q,ae)=>{const{id:ve,rootStateKey:Ce}=B,Ie=(0,os.AE)(Ce,ae()).optionsPicker;Ie.id&&Ie.id!==ve&&await Q(_u(Ce,W));const ke=(0,os.E0)(B,ae());(0,Us.eL)(ke)&&Q((0,gs.mb)(Ce,(0,Ao.aN)(ke)))},tp=(B,W,Q=!1)=>(ae,ve)=>{const{highlightIndex:Ce,options:Ie}=(0,os.AE)(B,ve()).optionsPicker,ke=Ie[Ce];ae((0,gs.mb)(B,(0,Ao._M)({option:ke,forceSelect:Q,clearOthers:W})))},SE=async(B,W,Q,ae)=>{try{const{id:ve}=(0,os.AE)(ae,W()).optionsPicker,Ce={id:ve,rootStateKey:ae,type:"query"},Ie=(0,os.E0)(Ce,W());if(!(0,Us.eL)(Ie))return;await Vc.z.get(Ie.type).updateOptions(Ie,Q);const je=(0,os.E0)(Ce,W());if(!(0,Us.eL)(je))return;B((0,gs.mb)(ae,(0,Ao.wF)(je.options)))}catch(ve){console.error(ve)}},xE=(0,h.debounce)(SE,500);function ME(B){const{options:W,selectedValues:Q,queryValue:ae,multi:ve}=B;if(W.length===0&&ae&&ae.length>0)return{text:ae,value:ae,selected:!1};if(!ve)return Q.find(ke=>ke.selected);const Ce=[],Ie=[];for(const ke of Q)ke.selected&&(Ce.push(ke.text.toString()),Ie.push(ke.value.toString()));return{value:Ie,text:Ce,selected:!0}}const kc=()=>{const B=Ce=>({...(0,x0.bindActionCreators)({openOptions:PE,commitChangesToVariable:_u,navigateOptions:bE},Ce),filterOrSearchOptions:(Ie,ke="")=>{Ce(DE(Ie,ke))},toggleAllOptions:Ie=>Ce((0,gs.mb)(Ie.rootStateKey,(0,Ao.iQ)())),toggleOption:(Ie,ke,je,st)=>Ce((0,gs.mb)(Ie.rootStateKey,(0,Ao._M)({option:ke,clearOthers:je,forceSelect:st})))}),W=(Ce,Ie)=>{const{rootStateKey:ke}=Ie.variable;return ke?{picker:(0,os.AE)(ke,Ce).optionsPicker}:(console.error("OptionPickerFactory: variable has no rootStateKey"),{picker:Ao.yy})},Q=(0,$r.connect)(W,B);class ae extends s.PureComponent{constructor(){super(...arguments),this.onShowOptions=()=>this.props.openOptions((0,ga.yQ)(this.props.variable),this.props.onVariableChange),this.onHideOptions=()=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.commitChangesToVariable(this.props.variable.rootStateKey,this.props.onVariableChange)},this.onToggleOption=(Ie,ke)=>{((0,Us.U4)(this.props.variable)&&this.props.variable.multi?this.onToggleMultiValueVariable:this.onToggleSingleValueVariable)(Ie,ke)},this.onToggleSingleValueVariable=(Ie,ke)=>{this.props.toggleOption((0,ga.yQ)(this.props.variable),Ie,ke,!1),this.onHideOptions()},this.onToggleMultiValueVariable=(Ie,ke)=>{this.props.toggleOption((0,ga.yQ)(this.props.variable),Ie,ke,!1)},this.onToggleAllOptions=()=>{this.props.toggleAllOptions((0,ga.yQ)(this.props.variable))},this.onFilterOrSearchOptions=Ie=>{this.props.filterOrSearchOptions((0,ga.yQ)(this.props.variable),Ie)},this.onNavigate=(Ie,ke)=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.navigateOptions(this.props.variable.rootStateKey,Ie,ke)},this.onCancel=()=>{qh().cancelRequest((0,ga.yQ)(this.props.variable))}}render(){const{variable:Ie,picker:ke}=this.props,je=ke.id===Ie.id;return s.createElement("div",{className:"variable-link-wrapper"},je?this.renderOptions(ke):this.renderLink(Ie))}renderLink(Ie){const ke=mE(Ie),je=Ie.state===Vs.Gu.Loading;return s.createElement(hE,{id:Sr.IG+Ie.id,text:ke,onClick:this.onShowOptions,loading:je,onCancel:this.onCancel,disabled:this.props.readOnly})}renderOptions(Ie){const{id:ke}=this.props.variable;return s.createElement(Kv.L,{onClick:this.onHideOptions},s.createElement(gE,{id:Sr.IG+ke,value:Ie.queryValue,onChange:this.onFilterOrSearchOptions,onNavigate:this.onNavigate,"aria-expanded":!0,"aria-controls":`options-${ke}`}),s.createElement(EE,{values:Ie.options,onToggle:this.onToggleOption,onToggleAll:this.onToggleAllOptions,highlightIndex:Ie.highlightIndex,multi:Ie.multi,selectedValues:Ie.selectedValues,id:`options-${ke}`}))}}const ve=Q(ae);return ve.displayName="OptionsPicker",ve};var Tl=e(11606);class TE extends s.PureComponent{constructor(){super(...arguments),this.onChange=W=>{this.props.onPropChange({propName:"query",propValue:W.currentTarget.value})},this.onBlur=W=>{this.props.onPropChange({propName:"query",propValue:W.currentTarget.value,updateOptions:!0})}}render(){return s.createElement(s.Fragment,null,s.createElement(Ho.e,null,"Constant options"),s.createElement(Tl.V,{value:this.props.variable.query,name:"Value",placeholder:"your metric prefix",onChange:this.onChange,onBlur:this.onBlur,testId:Cs.wl.pages.Dashboard.Settings.Variables.Edit.ConstantVariable.constantOptionsQueryInputV2,width:30}))}}const OE={...$s.Eg,type:"constant",hide:$s.bU.hideVariable,query:"",current:{},options:[]},L0=(0,Vo.oM)({name:"templating/constant",initialState:$c.s,reducers:{createConstantOptionsFromQuery:(B,W)=>{const Q=(0,os.ir)(B,W.payload.id);Q.type==="constant"&&(Q.options=[{text:Q.query.trim(),value:Q.query.trim(),selected:!1}])}}}),IE=L0.reducer,{createConstantOptionsFromQuery:RE}=L0.actions,AE=B=>async W=>{const{rootStateKey:Q}=B;await W((0,gs.mb)(Q,RE((0,ga.Y6)(B)))),await W((0,Xs.xQ)(B))},LE=()=>({id:"constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share.",name:"Constant",initialState:OE,reducer:IE,picker:kc(),editor:TE,dependsOn:()=>!1,setValue:async(B,W,Q=!1)=>{await(0,rs.WI)((0,Xs.Fz)((0,ga.yQ)(B),W,Q))},setValueFromUrl:async(B,W)=>{await(0,rs.WI)((0,Xs.Ci)((0,ga.yQ)(B),W))},updateOptions:async B=>{await(0,rs.WI)(AE((0,ga.yQ)(B)))},getSaveModel:B=>{const{index:W,id:Q,state:ae,global:ve,current:Ce,options:Ie,rootStateKey:ke,...je}=(0,h.cloneDeep)(B);return je},getValueForUrl:B=>B.current.value,beforeAdding:B=>{const{current:W,options:Q,query:ae,...ve}=(0,h.cloneDeep)(B),Ce={selected:!0,text:ae,value:ae};return{...ve,current:Ce,options:[Ce],query:ae}}});var BE=e(29350),wE=e(55973);function np({value:B,name:W,description:Q,onChange:ae,ariaLabel:ve}){const Ce=(0,BE.Me)();return s.createElement(wE.X,{id:Ce,label:W,description:Q,value:B,onChange:ae,"aria-label":ve})}const $u=({onMultiChanged:B,onPropChange:W,variable:Q})=>{const ae=(0,s.useCallback)(Ie=>{B((0,ga.yQ)(Q),Ie.target.checked)},[B,Q]),ve=(0,s.useCallback)(Ie=>{W({propName:"includeAll",propValue:Ie.target.checked})},[W]),Ce=(0,s.useCallback)(Ie=>{W({propName:"allValue",propValue:Ie.currentTarget.value})},[W]);return s.createElement(Ma.wc,{spacing:"md",height:"inherit"},s.createElement(np,{value:Q.multi,name:"Multi-value",description:"Enables multiple values to be selected at the same time",onChange:ae}),s.createElement(np,{value:Q.includeAll,name:"Include All option",description:"Enables an option to include all variables",onChange:ve}),Q.includeAll&&s.createElement(Tl.V,{value:Q.allValue??"",onChange:Ce,name:"Custom all value",placeholder:"blank = auto",testId:Cs.wl.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsCustomAllInputV2}))};$u.displayName="SelectionOptionsEditor";var B0=e(1030);class UE extends s.PureComponent{constructor(){super(...arguments),this.onChange=W=>{this.props.onPropChange({propName:"query",propValue:W.currentTarget.value})},this.onSelectionOptionsChange=async({propName:W,propValue:Q})=>{this.props.onPropChange({propName:W,propValue:Q,updateOptions:!0})},this.onBlur=W=>{this.props.onPropChange({propName:"query",propValue:W.currentTarget.value,updateOptions:!0})}}render(){return s.createElement(s.Fragment,null,s.createElement(Ho.e,null,"Custom options"),s.createElement(B0.W,{name:"Values separated by comma",value:this.props.variable.query,placeholder:"1, 10, mykey : myvalue, myvalue, escaped\\,value",onChange:this.onChange,onBlur:this.onBlur,required:!0,width:52,testId:Cs.wl.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput}),s.createElement(Ho.e,null,"Selection options"),s.createElement($u,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const NE=(B,W)=>({}),WE={changeVariableMultiValue:Xs.Z7},FE=at(UE,NE,WE),KE={...$s.Eg,type:"custom",multi:!1,includeAll:!1,allValue:null,query:"",options:[],current:{}},w0=(0,Vo.oM)({name:"templating/custom",initialState:$c.s,reducers:{createCustomOptionsFromQuery:(B,W)=>{const Q=(0,os.ir)(B,W.payload.id);if(Q.type!=="custom")return;const{includeAll:ae,query:ve}=Q,Ie=(ve.match(/(?:\\,|[^,])+/g)??[]).map(ke=>{ke=ke.replace(/\\,/g,",");const je=/^(.+)\s:\s(.+)$/g.exec(ke)??[];if(je.length===3){const[,st,gt]=je;return{text:st.trim(),value:gt.trim(),selected:!1}}else return{text:ke.trim(),value:ke.trim(),selected:!1}});ae&&Ie.unshift({text:Sr.xk,value:Sr.r2,selected:!1}),Q.options=Ie}}}),VE=w0.reducer,{createCustomOptionsFromQuery:_E}=w0.actions,$E=B=>async W=>{const{rootStateKey:Q}=B;await W((0,gs.mb)(Q,_E((0,ga.Y6)(B)))),await W((0,Xs.xQ)(B))},zE=()=>({id:"custom",description:"Define variable values manually",name:"Custom",initialState:KE,reducer:VE,picker:kc(),editor:FE,dependsOn:()=>!1,setValue:async(B,W,Q=!1)=>{await(0,rs.WI)((0,Xs.Fz)((0,ga.yQ)(B),W,Q))},setValueFromUrl:async(B,W)=>{await(0,rs.WI)((0,Xs.Ci)((0,ga.yQ)(B),W))},updateOptions:async B=>{await(0,rs.WI)($E((0,ga.yQ)(B)))},getSaveModel:B=>{const{index:W,id:Q,state:ae,global:ve,rootStateKey:Ce,...Ie}=(0,h.cloneDeep)(B);return Ie},getValueForUrl:B=>(0,ga.HY)(B)?Sr.xk:B.current.value});var ap=e(64210),kE=e(16218);const HE={...$s.Eg,type:"datasource",current:{},regex:"",options:[],query:"",multi:!1,includeAll:!1,refresh:$s.Bd.onDashboardLoad},U0=(0,Vo.oM)({name:"templating/datasource",initialState:$c.s,reducers:{createDataSourceOptions:(B,W)=>{const{sources:Q,regex:ae}=W.payload.data,ve=[],Ce=(0,os.ir)(B,W.payload.id);if(Ce.type==="datasource"){for(let Ie=0;Ie<Q.length;Ie++){const ke=Q[Ie];(0,kE.S)(Ce.query,ke.meta)&&(GE(ke,ae)&&ve.push({text:ke.name,value:ke.uid,selected:!1}),jE(ke,ae)&&ve.push({text:"default",value:"default",selected:!1}))}ve.length===0&&ve.push({text:"No data sources found",value:"",selected:!1}),Ce.includeAll&&ve.unshift({text:Sr.xk,value:Sr.r2,selected:!1}),Ce.options=ve}}}});function GE(B,W){return W?W.exec(B.name):!0}function jE(B,W){return B.isDefault?W?W.exec("default"):!0:!1}const QE=U0.reducer,{createDataSourceOptions:YE}=U0.actions,ZE=(B,W={getDatasourceSrv:l.ak})=>async(Q,ae)=>{const{rootStateKey:ve}=B,Ce=W.getDatasourceSrv().getList({metrics:!0,variables:!1}),Ie=(0,os.E0)(B,ae());if(Ie.type!=="datasource")return;let ke;Ie.regex&&(ke=(0,nt.J)().replace(Ie.regex,void 0,"regex"),ke=(0,Wa.jO)(ke)),Q((0,gs.mb)(ve,YE((0,ga.Y6)(B,{sources:Ce,regex:ke})))),await Q((0,Xs.xQ)(B))},JE=(B,W={getDatasourceSrv:l.ak})=>Q=>{const ae=W.getDatasourceSrv().getList({metrics:!0,variables:!0}),ve=(0,h.chain)(ae).uniqBy("meta.id").map(Ce=>({text:Ce.meta.name,value:Ce.meta.id})).value();ve.unshift({text:"",value:""}),Q((0,gs.mb)(B,(0,si.z7)({dataSourceTypes:ve})))},XE=(B,W)=>{const{variable:{rootStateKey:Q}}=W;if(!Q)return console.error("DataSourceVariableEditor: variable has no rootStateKey"),{extended:b0(si.PF)};const{editor:ae}=(0,os.AE)(Q,B);return{extended:b0(ae)}},qE={initDataSourceVariableEditor:JE,changeVariableMultiValue:Xs.Z7},ey=(0,$r.connect)(XE,qE);class ty extends s.PureComponent{constructor(){super(...arguments),this.onRegExChange=W=>{this.props.onPropChange({propName:"regex",propValue:W.currentTarget.value})},this.onRegExBlur=W=>{this.props.onPropChange({propName:"regex",propValue:W.currentTarget.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:W,propName:Q})=>{this.props.onPropChange({propName:Q,propValue:W,updateOptions:!0})},this.getSelectedDataSourceTypeValue=()=>{const{extended:W}=this.props;if(!W?.dataSourceTypes.length)return"";const Q=W.dataSourceTypes.find(ve=>ve.value===this.props.variable.query);return(Q?Q.value:W.dataSourceTypes[0].value)??""},this.onDataSourceTypeChanged=W=>{this.props.onPropChange({propName:"query",propValue:W.value,updateOptions:!0})}}componentDidMount(){const{rootStateKey:W}=this.props.variable;if(!W){console.error("DataSourceVariableEditor: variable has no rootStateKey");return}this.props.initDataSourceVariableEditor(W)}render(){const{variable:W,extended:Q,changeVariableMultiValue:ae}=this.props,ve=Q?.dataSourceTypes?.length?Q.dataSourceTypes?.map(Ie=>({value:Ie.value??"",label:Ie.text})):[],Ce=ve.find(Ie=>Ie.value===W.query)??ve[0];return s.createElement(s.Fragment,null,s.createElement(Ho.e,null,"Data source options"),s.createElement(ap.u,{name:"Type",value:Ce,options:ve,onChange:this.onDataSourceTypeChanged,testId:Cs.wl.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.datasourceSelect}),s.createElement(Tl.V,{value:this.props.variable.regex,name:"Instance name filter",placeholder:"/.*-(.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,description:s.createElement("div",null,"Regex filter for which data source instances to choose from in the variable value list. Leave empty for all.",s.createElement("br",null),s.createElement("br",null),"Example: ",s.createElement("code",null,"/^prod/"))}),s.createElement(Ho.e,null,"Selection options"),s.createElement($u,{variable:W,onPropChange:this.onSelectionOptionsChange,onMultiChanged:ae}))}}const ny=ey(ty),ay=()=>({id:"datasource",description:"Enables you to dynamically switch the data source for multiple panels.",name:"Data source",initialState:HE,reducer:QE,picker:kc(),editor:ny,dependsOn:(B,W)=>B.regex?(0,ga.QI)(B.regex,W.name):!1,setValue:async(B,W,Q=!1)=>{await(0,rs.WI)((0,Xs.Fz)((0,ga.yQ)(B),W,Q))},setValueFromUrl:async(B,W)=>{await(0,rs.WI)((0,Xs.Ci)((0,ga.yQ)(B),W))},updateOptions:async B=>{await(0,rs.WI)(ZE((0,ga.yQ)(B)))},getSaveModel:B=>{const{index:W,id:Q,state:ae,global:ve,rootStateKey:Ce,...Ie}=(0,h.cloneDeep)(B);return{...Ie,options:[]}},getValueForUrl:B=>(0,ga.HY)(B)?Sr.xk:B.current.value});var sy=e(76347);const sp=[1,2,3,4,5,10,20,30,40,50,100,200,300,400,500].map(B=>({label:`${B}`,value:B})),N0=s.memo(({onPropChange:B,variable:W})=>{const Q=st=>{B({propName:"auto",propValue:st.target.checked,updateOptions:!0})},ae=st=>{B({propName:"query",propValue:st.currentTarget.value})},ve=st=>{B({propName:"query",propValue:st.currentTarget.value,updateOptions:!0})},Ce=st=>{B({propName:"auto_count",propValue:st.value,updateOptions:!0})},Ie=st=>{B({propName:"auto_min",propValue:st.currentTarget.value,updateOptions:!0})},ke=sp.find(st=>st.value===W.auto_count)??sp[0],je=(0,lt.wW)(ry);return s.createElement(s.Fragment,null,s.createElement(Ho.e,null,"Interval options"),s.createElement(Tl.V,{value:W.query,name:"Values",placeholder:"1m,10m,1h,6h,1d,7d",onChange:ae,onBlur:ve,testId:Cs.wl.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.intervalsValueInput,width:32,required:!0}),s.createElement(np,{value:W.auto,name:"Auto option",description:"Dynamically calculates interval by dividing time range by the count specified",onChange:Q}),W.auto&&s.createElement("div",{className:je.autoFields},s.createElement(ap.u,{name:"Step count",description:"How many times the current time range should be divided to calculate the value",value:ke,options:sp,onChange:Ce,width:9}),s.createElement(Tl.V,{value:W.auto_min,name:"Min interval",description:"The calculated value will not go below this threshold",placeholder:"10s",onChange:Ie,width:11})))});N0.displayName="IntervalVariableEditor";function ry(B){return{autoFields:(0,we.css)({marginTop:B.spacing(2),display:"flex",flexDirection:"column"})}}var oy=e(31683),rp=e(86039);const iy=B=>async W=>{const{rootStateKey:Q}=B;await W((0,gs.mb)(Q,(0,rp.kv)((0,ga.Y6)(B)))),await W(op(B)),await W((0,Xs.xQ)(B))},op=(B,W={calculateInterval:p0.calculateInterval,getTimeSrv:qo.$t,templateSrv:(0,oy.J)()})=>(Q,ae)=>{const ve=(0,os.E0)(B,ae());if(ve.type==="interval"&&ve.auto){const Ce=W.calculateInterval(W.getTimeSrv().timeRange(),ve.auto_count,ve.auto_min);W.templateSrv.setGrafanaVariable("$__auto_interval_"+ve.name,Ce.interval),W.templateSrv.setGrafanaVariable("$__auto_interval",Ce.interval)}},ly=()=>({id:"interval",description:"Define a timespan interval (ex 1m, 1h, 1d)",name:"Interval",initialState:rp.T6,reducer:rp.vH,picker:kc(),editor:N0,dependsOn:()=>!1,setValue:async(B,W,Q=!1)=>{await(0,rs.WI)(op((0,ga.yQ)(B))),await(0,rs.WI)((0,Xs.Fz)((0,ga.yQ)(B),W,Q))},setValueFromUrl:async(B,W)=>{await(0,rs.WI)(op((0,ga.yQ)(B))),await(0,rs.WI)((0,Xs.Ci)((0,ga.yQ)(B),W))},updateOptions:async B=>{await(0,rs.WI)(iy((0,ga.yQ)(B)))},getSaveModel:B=>{const{index:W,id:Q,state:ae,global:ve,rootStateKey:Ce,...Ie}=(0,h.cloneDeep)(B);return Ie},getValueForUrl:B=>B.current.value});var W0=e(50595);const ip=[{label:"On dashboard load",value:W0.Bd.onDashboardLoad},{label:"On time range change",value:W0.Bd.onTimeRangeChanged}];function cy({onChange:B,refresh:W}){const Q=(0,lt.l4)(),[ae,ve]=(0,s.useState)(!1);ei({breakpoint:Q.breakpoints.values.sm,onChange:Ie=>{ve(!Ie.matches)}});const Ce=(0,s.useMemo)(()=>ip.find(Ie=>Ie.value===W)?.value??ip[0].value,[W]);return s.createElement(fi.g,{label:"Refresh",description:"When to update the values of this variable"},s.createElement(ie.S,{options:ip,onChange:B,value:Ce,size:ae?"sm":"md"}))}const lp=[{label:"Disabled",value:$s.$U.disabled},{label:"Alphabetical (asc)",value:$s.$U.alphabeticalAsc},{label:"Alphabetical (desc)",value:$s.$U.alphabeticalDesc},{label:"Numerical (asc)",value:$s.$U.numericalAsc},{label:"Numerical (desc)",value:$s.$U.numericalDesc},{label:"Alphabetical (case-insensitive, asc)",value:$s.$U.alphabeticalCaseInsensitiveAsc},{label:"Alphabetical (case-insensitive, desc)",value:$s.$U.alphabeticalCaseInsensitiveDesc},{label:"Natural (asc)",value:$s.$U.naturalAsc},{label:"Natural (desc)",value:$s.$U.naturalDesc}];function dy({onChange:B,sort:W}){const Q=(0,s.useMemo)(()=>lp.find(ae=>ae.value===W)??lp[0],[W]);return s.createElement(ap.u,{name:"Sort",description:"How to sort the values of this variable",value:Q,options:lp,onChange:B,testId:Cs.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelectV2,width:25})}var uy=e(34269),my=e(4479),F0=e(75);async function fy(B,W=Jl.nL){if((0,Us.d7)(B))return B.variables.editor;if((0,Us.X7)(B)){const Q=await W(B.meta);if(!Q.components.QueryEditor)throw new Error("Missing QueryEditor in plugin definition.");return Q.components.QueryEditor??null}return(0,Us.Ju)(B)?gy:(0,Us.R)(B)?(await W(B.meta)).components.VariableQueryEditor??F0.R:null}function gy({datasource:B,query:W,onChange:Q}){const ae=(0,s.useCallback)(ve=>{Q({refId:"StandardVariableQuery",query:ve})},[Q]);return s.createElement(F0.R,{query:W.query,onChange:ae,datasource:B,templateSrv:(0,nt.J)()})}function hy(B,W,Q){return{next:ve=>{if(ve.state===Vs.Gu.Error){Q.unsubscribe(),W(ve.error);return}if(ve.state===Vs.Gu.Done){Q.unsubscribe(),B();return}},error:ve=>{Q.unsubscribe(),W(ve)},complete:()=>{Q.unsubscribe(),B()}}}const py=(B,W)=>async(Q,ae)=>{try{const{rootStateKey:ve}=B;if(!(0,ga.A3)(ve,ae()))return;const Ce=(0,os.E0)(B,ae());if(Ce.type!=="query")return;(0,os.AE)(ve,ae()).editor.id===Ce.id&&Q((0,gs.mb)(ve,(0,si.PV)({errorProp:"update"})));const Ie=await(0,N.F)().get(Ce.datasource??"");await new Promise((ke,je)=>{const st=new uy.w0,gt=hy(ke,je,st),bt=qh().getResponse(B).subscribe(gt);st.add(bt),qh().queueRequest({identifier:B,datasource:Ie,searchFilter:W})})}catch(ve){if(ve instanceof Error){const Ce=(0,my.P)(ve),{rootStateKey:Ie}=B;throw(0,os.AE)(Ie,ae()).editor.id===B.id&&Q((0,gs.mb)(Ie,(0,si.Sg)({errorProp:"update",errorText:Ce.message}))),Ce}}},vy=B=>async(W,Q)=>{const ae=(0,os.E0)(B,Q());ae.type==="query"&&await W(K0((0,ga.yQ)(ae),ae.datasource))},K0=(B,W)=>async(Q,ae)=>{try{const{rootStateKey:ve}=B,{editor:Ce}=(0,os.AE)(ve,ae()),ke=Jh(Ce)?.dataSource,je=await(0,N.F)().get(W??"");ke&&ke.type!==je?.type&&Q((0,gs.mb)(ve,(0,bi.Pl)((0,ga.Y6)(B,{propName:"query",propValue:""}))));const st=await fy(je);Q((0,gs.mb)(ve,(0,si.z7)({dataSource:je,VariableQueryEditor:st})))}catch(ve){console.error(ve)}},Ey=(B,W,Q)=>async(ae,ve)=>{const{rootStateKey:Ce}=B,Ie=(0,os.E0)(B,ve());if(Ie.type==="query"){if(yy(Ie.name,W)){const ke="Query cannot contain a reference to itself. Variable: $"+Ie.name;ae((0,gs.mb)(Ce,(0,si.Sg)({errorProp:"query",errorText:ke})));return}ae((0,gs.mb)(Ce,(0,si.PV)({errorProp:"query"}))),ae((0,gs.mb)(Ce,(0,bi.Pl)((0,ga.Y6)(B,{propName:"query",propValue:W})))),Q!==void 0?ae((0,gs.mb)(Ce,(0,bi.Pl)((0,ga.Y6)(B,{propName:"definition",propValue:Q})))):typeof W=="string"&&ae((0,gs.mb)(Ce,(0,bi.Pl)((0,ga.Y6)(B,{propName:"definition",propValue:W})))),await ae((0,Xs.Rk)(B))}};function yy(B,W){if(typeof W=="string"&&W.match(new RegExp("\\$"+B+"(/| |$)")))return!0;const Q=V0(W);for(let ae in Q)if(Q.hasOwnProperty(ae)){const ve=Q[ae];if(typeof ve=="string"&&ve.match(new RegExp("\\$"+B+"(/| |$)")))return!0}return!1}function V0(B){return typeof B!="object"||B===null?{query:B}:Object.keys(B).reduce((ae,ve)=>{const Ce=B[ve];if(typeof Ce!="object"||Ce===null)return ae[ve]=Ce,ae;const Ie=V0(Ce);for(let ke in Ie)Ie.hasOwnProperty(ke)&&(ae[`${ve}_${ke}`]=Ie[ke]);return ae},{})}const by=(B,W)=>{const{rootStateKey:Q}=W.variable;if(!Q)return console.error("QueryVariableEditor: variable has no rootStateKey"),{extended:Jh(si.PF)};const{editor:ae}=(0,os.AE)(Q,B);return{extended:Jh(ae)}},Dy={initQueryVariableEditor:vy,changeQueryVariableDataSource:K0,changeQueryVariableQuery:Ey,changeVariableMultiValue:Xs.Z7},Cy=(0,$r.connect)(by,Dy);class Py extends s.PureComponent{constructor(){super(...arguments),this.state={regex:null,tagsQuery:null,tagValuesQuery:null},this.onDataSourceChange=W=>{this.props.onPropChange({propName:"datasource",propValue:W.isDefault?null:(0,v0.iU)(W)})},this.onLegacyQueryChange=async(W,Q)=>{this.props.variable.query!==W&&this.props.changeQueryVariableQuery((0,ga.yQ)(this.props.variable),W,Q)},this.onQueryChange=async W=>{if(this.props.variable.query!==W){let Q="";W&&W.hasOwnProperty("query")&&typeof W.query=="string"&&(Q=W.query),this.props.changeQueryVariableQuery((0,ga.yQ)(this.props.variable),W,Q)}},this.onRegExChange=W=>{this.setState({regex:W.currentTarget.value})},this.onRegExBlur=async W=>{const Q=W.currentTarget.value;this.props.variable.regex!==Q&&this.props.onPropChange({propName:"regex",propValue:Q,updateOptions:!0})},this.onRefreshChange=W=>{this.props.onPropChange({propName:"refresh",propValue:W})},this.onSortChange=async W=>{this.props.onPropChange({propName:"sort",propValue:W.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:W,propName:Q})=>{this.props.onPropChange({propName:Q,propValue:W,updateOptions:!0})},this.renderQueryEditor=()=>{const{extended:W,variable:Q}=this.props;if(!W||!W.dataSource||!W.VariableQueryEditor)return null;const ae=W.dataSource,ve=W.VariableQueryEditor;let Ce=Q.query;if(typeof Ce=="string"?Ce=Ce||(ae.variables?.getDefaultQuery?.()??""):Ce={...ae.variables?.getDefaultQuery?.(),...Q.query},(0,Us.NX)(ve,ae))return s.createElement(oe.x,{marginBottom:2},s.createElement(mc.x,{element:"h4"},"Query"),s.createElement(oe.x,{marginTop:1},s.createElement(ve,{key:ae.uid,datasource:ae,query:Ce,templateSrv:(0,nt.J)(),onChange:this.onLegacyQueryChange})));const Ie=(0,qo.$t)().timeRange();return(0,Us.$7)(ve,ae)?s.createElement(oe.x,{marginBottom:2},s.createElement(mc.x,{element:"h4"},"Query"),s.createElement(oe.x,{marginTop:1},s.createElement(ve,{key:ae.uid,datasource:ae,query:Ce,onChange:this.onQueryChange,onRunQuery:()=>{},data:{series:[],state:Vs.Gu.Done,timeRange:Ie},range:Ie,onBlur:()=>{},history:[]}))):null}}async componentDidMount(){await this.props.initQueryVariableEditor((0,ga.yQ)(this.props.variable))}componentDidUpdate(W){W.variable.datasource!==this.props.variable.datasource&&this.props.changeQueryVariableDataSource((0,ga.yQ)(this.props.variable),this.props.variable.datasource)}render(){return s.createElement(s.Fragment,null,s.createElement(Ho.e,null,"Query options"),s.createElement(fi.g,{label:"Data source",htmlFor:"data-source-picker"},s.createElement(E0.q,{current:this.props.variable.datasource,onChange:this.onDataSourceChange,variables:!0,width:30})),this.renderQueryEditor(),s.createElement(B0.W,{value:this.state.regex??this.props.variable.regex,name:"Regex",description:s.createElement("div",null,"Optional, if you want to extract part of a series name or metric node segment.",s.createElement("br",null),"Named capture groups can be used to separate the display text and value (",s.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",target:"__blank"},"see examples"),")."),placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,testId:Cs.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInputV2,width:52}),s.createElement(dy,{onChange:this.onSortChange,sort:this.props.variable.sort}),s.createElement(cy,{onChange:this.onRefreshChange,refresh:this.props.variable.refresh}),s.createElement(Ho.e,null,"Selection options"),s.createElement($u,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const Sy=Cy(Py),xy=()=>({id:"query",description:"Variable values are fetched from a datasource query",name:"Query",initialState:Gv,reducer:Zv,picker:kc(),editor:Sy,dependsOn:(B,W)=>(0,ga.QI)(B.query,B.datasource?.uid,B.regex,W.name),setValue:async(B,W,Q=!1)=>{await(0,rs.WI)((0,Xs.Fz)((0,ga.yQ)(B),W,Q))},setValueFromUrl:async(B,W)=>{await(0,rs.WI)((0,Xs.Ci)((0,ga.yQ)(B),W))},updateOptions:async(B,W)=>{await(0,rs.WI)(py((0,ga.yQ)(B),W))},getSaveModel:B=>{const{index:W,id:Q,state:ae,global:ve,queryValue:Ce,rootStateKey:Ie,...ke}=(0,h.cloneDeep)(B);return B.refresh!==$s.Bd.never?{...ke,options:[]}:ke},getValueForUrl:B=>(0,ga.HY)(B)?Sr.xk:B.current.value}),My=()=>({id:"system",description:"",name:"system",initialState:{...$s.Eg,type:"system",hide:$s.bU.hideVariable,skipUrlSync:!0,current:{value:{toString:()=>""}},state:Vs.Gu.Done},reducer:B=>B,picker:null,editor:null,dependsOn:()=>!1,setValue:async(B,W,Q=!1)=>{},setValueFromUrl:async(B,W)=>{},updateOptions:async B=>{},getSaveModel:B=>({}),getValueForUrl:B=>""});function Ty({onPropChange:B,variable:{query:W}}){const Q=(0,s.useCallback)((Ce,Ie)=>{Ce.preventDefault(),B({propName:"originalQuery",propValue:Ce.currentTarget.value,updateOptions:!1}),B({propName:"query",propValue:Ce.currentTarget.value,updateOptions:Ie})},[B]),ae=(0,s.useCallback)(Ce=>Q(Ce,!1),[Q]),ve=(0,s.useCallback)(Ce=>Q(Ce,!0),[Q]);return s.createElement(s.Fragment,null,s.createElement(Ho.e,null,"Text options"),s.createElement(Tl.V,{value:W,name:"Default value",placeholder:"default value, if any",onChange:ae,onBlur:ve,width:30,testId:Cs.wl.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2}))}function Oy({variable:B,onVariableChange:W,readOnly:Q}){const ae=(0,En.useDispatch)(),[ve,Ce]=(0,s.useState)(B.current.value);(0,s.useEffect)(()=>{Ce(B.current.value)},[B]);const Ie=(0,s.useCallback)(()=>{if(!B.rootStateKey){console.error("Cannot update variable without rootStateKey");return}if(B.current.value!==ve){if(ae((0,gs.mb)(B.rootStateKey,(0,bi.Pl)((0,ga.Y6)({id:B.id,type:B.type},{propName:"query",propValue:ve})))),W){W({...B,current:(0,A0.Q)(B.current)?{}:{...B.current,value:ve}});return}Vc.z.get(B.type).updateOptions(B)}},[B,ve,ae,W]),ke=(0,s.useCallback)(gt=>Ce(gt.target.value),[Ce]),je=gt=>Ie(),st=gt=>{gt.keyCode===13&&(gt.preventDefault(),Ie())};return s.createElement(ct.I,{type:"text",value:ve,onChange:ke,onBlur:je,disabled:Q,onKeyDown:st,placeholder:(0,Ka.t)("variable.textbox.placeholder","Enter variable value"),id:Sr.IG+B.id})}const Iy={...$s.Eg,type:"textbox",query:"",current:{},options:[],originalQuery:null},_0=(0,Vo.oM)({name:"templating/textbox",initialState:$c.s,reducers:{createTextBoxOptions:(B,W)=>{const Q=(0,os.ir)(B,W.payload.id);if(Q.type!=="textbox")return;const ae={text:Q.query.trim(),value:Q.query.trim(),selected:!1};Q.options=[ae],Q.current=ae}}}),Ry=_0.reducer,{createTextBoxOptions:Ay}=_0.actions,Ly=B=>async(W,Q)=>{const{rootStateKey:ae,type:ve}=B;W((0,gs.mb)(ae,Ay((0,ga.Y6)(B))));const Ce=(0,os.E0)(B,Q());Ce.type==="textbox"&&await Vc.z.get(ve).setValue(Ce,Ce.options[0],!0)},By=(B,W)=>async(Q,ae)=>{const{rootStateKey:ve}=B,Ce=(0,os.E0)(B,ae());if(Ce.type!=="textbox")return;const Ie=(0,ga.Hi)(W);Q((0,gs.mb)(ve,(0,bi.Pl)((0,ga.Y6)(Ce,{propName:"query",propValue:Ie})))),await Q((0,Xs.Ci)((0,ga.yQ)(Ce),Ie))},wy=()=>({id:"textbox",description:"Define a textbox variable, where users can enter any arbitrary string",name:"Text box",initialState:Iy,reducer:Ry,picker:Oy,editor:Ty,dependsOn:(B,W)=>!1,setValue:async(B,W,Q=!1)=>{await(0,rs.WI)((0,Xs.Fz)((0,ga.yQ)(B),W,Q))},setValueFromUrl:async(B,W)=>{await(0,rs.WI)(By((0,ga.yQ)(B),W))},updateOptions:async B=>{await(0,rs.WI)(Ly((0,ga.yQ)(B)))},getSaveModel:(B,W)=>{const{index:Q,id:ae,state:ve,global:Ce,originalQuery:Ie,rootStateKey:ke,...je}=(0,h.cloneDeep)(B);if(B.query!==Ie&&!W){const st=Ie??"",gt={selected:!1,text:st,value:st};return{...je,query:st,current:gt,options:[gt]}}return je},getValueForUrl:B=>B.current.value,beforeAdding:B=>({...(0,h.cloneDeep)(B),originalQuery:B.query})});var Uy=e(51980),cp=e(95918),dp=e(42321),up=e(37287),Ny=e(62293);const Wy={navBarTree:Ny.V4,navIndex:fl.G4,appNotifications:Dl.VW};var Fy=e(44064),Ky=e(76151),Vy=e(27849),_y=e(99848),$y=e(21992),zy=e(53301),ky=e(3273),Hy=e(26025),Gy=e(43001),jy=e(8538),Qy=e(1864),Yy=e(60025),Zy=e(79248),Jy=e(14746),Xy=e(21644),qy=e(28970),eb=e(23778),tb=e(98619),nb=e(82412),mp=e(58712),ab=e(1992);const sb={...Wy,...Ky.ZP,...tb.ZP,...Vy.ZP,...Gy.ZP,...ky.ZP,...f0.ZP,...Hy.ZP,...nb.ZP,...qy.ZP,...Xy.ZP,...jy.ZP,...Yy.ZP,...$y.ZP,...Fy.ZP,...Qy.ZP,...zy.ZP,...Zy.ZP,...gs.ZP,...eb.ZP,..._y.ZP,plugins:Jy.I6,[mp.C.reducerPath]:mp.C.reducer,[up.Rh.reducerPath]:up.Rh.reducer,[dp.Zi.reducerPath]:dp.Zi.reducer,[cp.ep.reducerPath]:cp.ep.reducer},$0={},Db=B=>{Object.assign($0,B)},rb=()=>{const B=(0,x0.combineReducers)({...sb,...$0});return(W,Q)=>{if(Q.type!==ab.e.type)return B(W,Q);const{cleanupAction:ae}=Q.payload;return ae(W),B(W,Q)}};function Cb(B){addReducer(B)}const ob=(0,Vo.e)();function ib(B){const W=(0,Vo.xC)({reducer:rb(),middleware:Q=>Q({thunk:!0,serializableCheck:!1,immutableCheck:!1}).concat(ob.middleware,mp.C.middleware,up.Rh.middleware,dp.Zi.middleware,cp.ep.middleware),devTools:!1,preloadedState:{navIndex:(0,fl.Cu)(),...B}});return(0,Uy.sj)(W.dispatch),(0,rs.PQ)(W),W}p().move=K.R;const z0=e(72866),zu=z0.keys().map(B=>z0(B));class lb{async init(){try{parent.postMessage("GrafanaAppInit","*");const W=(0,Ka.uC)(z.default.bootData.user.language);(0,R.jW)(wt.ae),ub(),pe(),Da("frontend_app_init"),mb(),(0,C.i_)(z.default.bootData.user.locale),(0,C.Ls)(z.default.bootData.user.weekStart),(0,V.L)(j0.$),(0,_.t)(hg),(0,j.$)(G0.Z),(0,O.x)(x.E1),(0,b.K)(()=>z.default.bootData.user.timezone),H0(),(0,kn.initAuthConfig)(),(0,I.Xw)(tr.Z),await W,cb(),ib(),db(),S.S.setInit(Rc.u),S.N.setInit(Rc.l),D.Z.setInit(Yc),Vc.z.setInit(()=>[xy(),zE(),wy(),LE(),ay(),ly(),Fv(),My()]),M.F.setInit(Hu),(0,L.pD)(()=>new yv),uE(new dE),(0,L.Iw)(Zh.v7),(0,P.Qf)({importPanelPlugin:g0.Ub,getPanelPluginFromCache:g0.q1}),T.u.initialize({config:z.default,getTimeRangeForUrl:(0,qo.$t)().timeRangeForUrl,getVariablesUrlParams:sy.c}),document.addEventListener("click",Re);const Q=new l.ND;Q.init(z.default.datasources,z.default.defaultDatasource),(0,N.w)(Q),Dv(),new ht().init();let ve=[];As.contextSrv.user.orgRole!==""&&(ve=await fv(z.default.apps));const Ce=av([{pluginId:"grafana",extensionConfigs:lv()},...ve]),Ie=bt=>cv({...bt,registry:Ce});(0,F.oI)(Ie);const ke=x.E1.getSearchObject(),je=new Pl,st=new wa(x.E1,je);je.setKioskModeFromUrl(ke.kiosk);try{(0,Cv.rb)()}catch(bt){console.warn("Failed to clean up old expanded folders",bt)}this.context={backend:wt.ae,location:x.E1,chrome:je,keybindings:st,config:z.default},(0,y.s)(document.getElementById("reactRoot")).render(s.createElement(ug,{app:this}))}catch(W){console.error("Failed to start Grafana",W),window.__grafana_load_failed()}finally{Pn("frontend_app_init")}}}function cb(){zu.length>0&&zu[0].addExtensionReducers()}function db(){zu.length>0&&zu[0].init()}function ub(){(0,U.tz)(new _t({debug:!1})),window.addEventListener("load",B=>{const W="frontend_boot_load_time_seconds",Q="frontend_boot_js_done_time_seconds",ae="frontend_boot_css_time_seconds";performance&&(performance.mark(W),Hc("first-paint","frontend_boot_","_time_seconds"),Hc("first-contentful-paint","frontend_boot_","_time_seconds"),Hc(W),Hc(Q),Hc(ae))}),As.contextSrv.user.orgRole!==""&&(0,U.e6)(new fn({})),z.default.grafanaJavascriptAgent.enabled&&(0,U.e6)(new Za({...z.default.grafanaJavascriptAgent,app:{version:z.default.buildInfo.version,environment:z.default.buildInfo.env},buildInfo:z.default.buildInfo,user:{id:String(z.default.bootData.user?.id),email:z.default.bootData.user?.email}})),z.default.googleAnalyticsId&&(0,U.e6)(new tn({googleAnalyticsId:z.default.googleAnalyticsId})),z.default.googleAnalytics4Id&&(0,U.e6)(new cn({googleAnalyticsId:z.default.googleAnalytics4Id,googleAnalytics4SendManualPageViews:z.default.googleAnalytics4SendManualPageViews})),z.default.rudderstackWriteKey&&z.default.rudderstackDataPlaneUrl&&(0,U.e6)(new pn({writeKey:z.default.rudderstackWriteKey,dataPlaneUrl:z.default.rudderstackDataPlaneUrl,user:z.default.bootData.user,sdkUrl:z.default.rudderstackSdkUrl,configUrl:z.default.rudderstackConfigUrl,integrationsUrl:z.default.rudderstackIntegrationsUrl,buildInfo:z.default.buildInfo})),z.default.applicationInsightsConnectionString&&(0,U.e6)(new gn({connectionString:z.default.applicationInsightsConnectionString,endpointUrl:z.default.applicationInsightsEndpointUrl}))}function mb(){(0,H.n)()>0&&document.body.classList.add("no-overlay-scrollbar")}function Hc(B,W="",Q=""){const ae=p().first(performance.getEntriesByName(B));if(ae){const ve=ae.name.replace(/-/g,"_");Jt(`${W}${ve}${Q}`,Math.round(ae.startTime)/1e3)}}const fb=new lb;window.public_cdn_path&&(e.p=window.public_cdn_path),window.__grafana_public_path__=e.p.substring(0,e.p.lastIndexOf("build/"))||e.p,window.nonce&&(e.nc=window.nonce),window.__grafana_app_bundle_loaded=!0,fb.init()},16901:(G,A,e)=>{"use strict";e.d(A,{As:()=>n,TE:()=>r,Z9:()=>a,_M:()=>o,sK:()=>i});var n=(g=>(g.Active="active",g.Expired="expired",g.Pending="pending",g))(n||{}),a=(g=>(g.Unprocessed="unprocessed",g.Active="active",g.Suppressed="suppressed",g))(a||{}),o=(g=>(g.equal="=",g.notEqual="!=",g.regex="=~",g.notRegex="!~",g))(o||{}),r=(g=>(g.Internal="internal",g.External="external",g.All="all",g))(r||{}),i=(g=>(g.cortex="cortex",g.mimir="mimir",g.prometheus="prometheus",g))(i||{})},29158:(G,A,e)=>{"use strict";e.d(A,{$5:()=>a,MQ:()=>o,Rv:()=>g,az:()=>i});const n={statistics:[]};var a=(l=>(l[l.Query=1]="Query",l[l.Search=0]="Search",l))(a||{}),o=(l=>(l[l.Builder=0]="Builder",l[l.Code=1]="Code",l))(o||{});const r={parameters:[]};var i=(l=>(l.And="and",l.Function="function",l.FunctionParameter="functionParameter",l.GroupBy="groupBy",l.Operator="operator",l.Or="or",l.Property="property",l))(i||{}),g=(l=>(l.String="string",l))(g||{});const u={logGroupNames:[],logGroups:[],statsGroups:[]}},67992:(G,A,e)=>{"use strict";e.d(A,{$5:()=>n.$5,KB:()=>a,MQ:()=>n.MQ,wf:()=>o});var n=e(29158),a=(r=>(r.Scheduled="Scheduled",r.Running="Running",r.Complete="Complete",r.Failed="Failed",r.Cancelled="Cancelled",r.Timeout="Timeout",r))(a||{}),o=(r=>(r.Regions="regions",r.Namespaces="namespaces",r.Metrics="metrics",r.DimensionKeys="dimensionKeys",r.DimensionValues="dimensionValues",r.EBSVolumeIDs="ebsVolumeIDs",r.EC2InstanceAttributes="ec2InstanceAttributes",r.ResourceArns="resourceARNs",r.Statistics="statistics",r.LogGroups="logGroups",r.Accounts="accounts",r))(o||{})},61815:(G,A,e)=>{"use strict";e.d(A,{hD:()=>P,oe:()=>g.o,yl:()=>u,AK:()=>l});var n=e(1050),a=e(34921),o=e(23757),r=e(9833),i=e(93657),g=e(60443);function u(F){return F?typeof F=="string"?F===g.o:"meta"in F&&F.meta.name===g.o||F.uid===g.o:!1}function l(F,U){return new n.y(j=>{const V=(0,i.h4)().getCurrent(),_=m(F.queries);if(!_){j.next(c("Missing panel reference ID"));return}const H=V?.getPanelById(_);if(!H){j.next(c("Unknown Panel: "+_));return}const z=H.getQueryRunner(),K=z.getData({withTransforms:!!U?.withTransforms,withFieldConfig:!1}).subscribe({next:Y=>{U?.topic===a.w5.Annotations&&(Y={...Y,series:Y.annotations??[],annotations:void 0}),j.next(Y)}});if(!H.isInView&&H.refreshWhenInView||V?.otherPanelInFullscreen(H)){const{datasource:Y,targets:k}=H,q={...F,datasource:Y,panelId:_,queries:k};H.refreshWhenInView=!1,z.run(q)}return()=>{K.unsubscribe()}})}function m(F){if(!(!F||!F.length))return F[0].panelId}function c(F){return{state:o.Gu.Error,series:[],request:{},error:{message:F},timeRange:(0,r.JK)()}}var d=e(66681),f=e(29350),E=e(53136),v=e.n(E),h=e(85960),p=e(81445),s=e(47257),y=e(20519),C=e(27436),b=e(74042),S=e(5106),D=e(5999),M=e(75682),T=e(72435),R=e(67954),O=e(65512),x=e(84457);function I(F){return JSON.stringify(F)}const L=[{label:"All data",value:!1},{label:"Annotations",value:!0,description:"Include annotations as regular data"}];function P({panelData:F,queries:U,onChange:j,onRunQueries:V}){const{value:_}=(0,p.Z)(()=>(0,O.ak)().get()),H=U[0],z=(0,h.useMemo)(()=>(0,i.h4)().getCurrent()?.getPanelById(H.panelId??-124134),[H.panelId]),{value:K,loading:Y}=(0,p.Z)(async()=>{if(!z)return[];const me=await(0,O.ak)().get(z.datasource);return Promise.all(z.targets.map(async ge=>{const Ue=ge.datasource?await(0,O.ak)().get(ge.datasource):me,De=Ue.getQueryDisplayText||I,Pe=(0,x.t)(F,ge.refId)??F;return{refId:ge.refId,query:De(ge),name:Ue.name,img:Ue.meta.info.logos.small,data:Pe.series,error:Pe.error}}))},[F,z]),k=(0,h.useCallback)(me=>{j([me]),V()},[j,V]),q=(0,h.useCallback)(me=>{k({...H,panelId:me})},[H,k]),X=(0,h.useCallback)(()=>{k({...H,withTransforms:!H.withTransforms})},[H,k]),te=(0,h.useCallback)(me=>{k({...H,topic:me?a.w5.Annotations:void 0})},[H,k]),se=(0,h.useCallback)(me=>{const ge=me.datasource??_,Ue=(0,O.ak)().getInstanceSettings(ge)?.name,De=me.targets.length;return`${De} ${v()("query",De)} to ${Ue}`},[_]),de=(0,i.h4)().getCurrent(),re=!!(H.withTransforms||z?.transformations?.length),fe=(0,h.useMemo)(()=>de?.panels.filter(me=>R.default.panels[me.type]&&me.targets&&me.id!==de.panelInEdit?.id&&me.datasource?.uid!==g.o).map(me=>({value:me.id,label:me.title??"Panel "+me.id,description:se(me),imgUrl:R.default.panels[me.type].info.logos.small}))??[],[de,se]),ie=(0,s.wW)(N),oe=(0,f.Me)();if(!de)return null;if(fe.length<1)return h.createElement("p",{className:ie.noQueriesText},"This dashboard does not have any other panels. Add queries to other panels and try again.");const ue=fe.find(me=>me.value===H.panelId);return h.createElement(h.Fragment,null,h.createElement(y.g,{label:"Source",description:"Use the same results as panel"},h.createElement(C.Ph,{inputId:oe,placeholder:"Choose panel",isSearchable:!0,options:fe,value:ue,onChange:me=>q(me.value)})),h.createElement(b.Lh,{height:"auto",wrap:!0,align:"flex-start"},h.createElement(y.g,{label:"Data Source",description:"Use data or annotations from the panel",className:ie.horizontalField},h.createElement(S.S,{options:L,value:H.topic===a.w5.Annotations,onChange:te})),re&&h.createElement(y.g,{label:"Transform",description:"Apply panel transformations from the source panel"},h.createElement(D.r,{value:!!H.withTransforms,onChange:X}))),Y?h.createElement(M.$,null):h.createElement(h.Fragment,null,K&&!!K.length&&h.createElement(y.g,{label:"Queries from panel"},h.createElement(b.wc,{spacing:"sm"},K.map((me,ge)=>h.createElement(T.Z,{key:`DashboardQueryRow-${ge}`},h.createElement(T.Z.Heading,null,me.refId),h.createElement(T.Z.Figure,null,h.createElement("img",{src:me.img,alt:me.name,title:me.name,width:40})),h.createElement(T.Z.Meta,null,me.query)))))))}function N(F){return{horizontalField:(0,d.css)({marginRight:F.spacing(2)}),noQueriesText:(0,d.css)({padding:F.spacing(1.25)})}}},60443:(G,A,e)=>{"use strict";e.d(A,{o:()=>n});const n="-- Dashboard --",a="dashboard"},77172:(G,A,e)=>{"use strict";e.d(A,{E:()=>i,o:()=>o});var n=e(85960),a=e(30379);function o(g){const u=r(g.profileTypes);return n.createElement(a.v,{placeholder:g.placeholder,separator:"-",displayAllSelectedLevels:!0,initialValue:g.initialProfileTypeId,allowCustomValue:!0,onSelect:g.onChange,options:u,changeOnSelect:!1,width:g.width??26})}function r(g){return(0,n.useMemo)(()=>{if(!g)return[];let u=new Map;for(let l of g){let m=[];l.id.indexOf(":")>-1&&(m=l.id.split(":"));const[c,d]=m;u.has(c)||u.set(c,{label:c,value:c,items:[]}),u.get(c)?.items.push({label:d,value:l.id})}return Array.from(u.values())},[g])}function i(g){const[u,l]=(0,n.useState)();return(0,n.useEffect)(()=>{(async()=>{const m=await g.getProfileTypes();l(m)})()},[g]),u}},87877:(G,A,e)=>{"use strict";e.d(A,{tF:()=>T,Up:()=>O});var n=e(19609),a=e.n(n),o=e(21964),r=e(81223),i=e(32063),g=e(12399),u=e(64065),l=e(16226),m=e(98231),c=e(23361),d=e(45864),f=e(85960),E=e(81368),v=e(84933),h=e(27436),p=e(79468),s=e(77172);function y(I){return f.createElement(f.Fragment,null,f.createElement(E.Z,null,f.createElement(v._,{label:"Query type",labelWidth:20,tooltip:f.createElement("div",null,"The Prometheus data source plugin provides the following query types for template variables")},f.createElement(h.Ph,{placeholder:"Select query type","aria-label":"Query type",width:25,options:[{label:"Profile type",value:"profileType"},{label:"Label",value:"label"},{label:"Label value",value:"labelValue"}],onChange:L=>{L.value==="profileType"&&I.onChange({...I.query,type:L.value}),L.value==="label"&&I.onChange({...I.query,type:L.value,profileTypeId:""}),L.value==="labelValue"&&I.onChange({...I.query,type:L.value,profileTypeId:"",labelName:""})},value:I.query.type}))),(I.query.type==="labelValue"||I.query.type==="label")&&f.createElement(b,{datasource:I.datasource,initialValue:I.query.profileTypeId,onChange:L=>{(I.query.type==="label"||I.query.type==="labelValue")&&I.onChange({...I.query,profileTypeId:L})}}),I.query.type==="labelValue"&&f.createElement(C,{value:I.query.labelName,datasource:I.datasource,profileTypeId:I.query.profileTypeId,onChange:L=>{I.query.type==="labelValue"&&I.onChange({...I.query,labelName:L})},from:I.range?.from.valueOf()||Date.now().valueOf()-1e3*60*60*24,to:I.range?.to.valueOf()||Date.now().valueOf()}))}function C(I){const[L,P]=(0,f.useState)();(0,f.useEffect)(()=>{(async()=>P(await I.datasource.getLabelNames((I.profileTypeId||"")+"{}",I.from,I.to)))()},[I.datasource,I.profileTypeId,I.to,I.from]);const N=L?L.map(F=>({label:F,value:F})):[];return L&&I.value&&!L.find(F=>F===I.value)&&N.push({value:I.value,label:I.value}),f.createElement(E.Z,null,f.createElement(v._,{label:"Label",labelWidth:20,tooltip:f.createElement("div",null,"Select label for which to retrieve available values")},f.createElement(h.Ph,{allowCustomValue:!0,placeholder:"Select label","aria-label":"Select label",width:25,options:N,onChange:F=>I.onChange(F.value),value:I.value})))}function b(I){const L=(0,s.E)(I.datasource);return f.createElement(E.Z,null,f.createElement(v._,{label:"Profile type","aria-label":"Profile type",labelWidth:20,tooltip:f.createElement("div",null,"Select profile type for which to retrieve available labels")},L?f.createElement(s.o,{onChange:I.onChange,profileTypes:L,initialProfileTypeId:I.initialValue}):f.createElement(p.u,{text:"Loading"})))}class S extends c.Mg{constructor(L,P=(0,d.$t)()){super(),this.dataAPI=L,this.timeSrv=P,this.editor=y}query(L){return L.targets[0].type==="profileType"?(0,l.D)(this.dataAPI.getProfileTypes()).pipe((0,m.U)(P=>({data:P.map(N=>({text:N.label,value:N.id}))}))):L.targets[0].type==="label"?L.targets[0].profileTypeId?(0,l.D)(this.dataAPI.getLabelNames(L.targets[0].profileTypeId+"{}",this.timeSrv.timeRange().from.valueOf(),this.timeSrv.timeRange().to.valueOf())).pipe((0,m.U)(P=>({data:P.map(N=>({text:N}))}))):(0,o.of)({data:[]}):L.targets[0].type==="labelValue"?!L.targets[0].labelName||!L.targets[0].profileTypeId?(0,o.of)({data:[]}):(0,l.D)(this.dataAPI.getLabelValues(L.targets[0].profileTypeId+"{}",L.targets[0].labelName,this.timeSrv.timeRange().from.valueOf(),this.timeSrv.timeRange().to.valueOf())).pipe((0,m.U)(P=>({data:P.map(N=>({text:N}))}))):(0,o.of)({data:[]})}}const D="both",M={groupBy:[],labelSelector:"{}",spanSelector:[]};class T extends i.CK{constructor(L,P=(0,g.J)()){super(L),this.templateSrv=P,this.variables=new S(this)}query(L){const P=L.targets.filter(N=>N.profileTypeId).map(N=>N.labelSelector===""?{...N,labelSelector:"{}"}:O(N,L.app));return P.length?super.query({...L,targets:P}):(0,o.of)({data:[]})}async getProfileTypes(){return await this.getResource("profileTypes")}async getLabelNames(L,P,N){return await this.getResource("labelNames",{query:this.templateSrv.replace(L),start:P,end:N})}async getLabelValues(L,P,N,F){return await this.getResource("labelValues",{label:this.templateSrv.replace(P),query:this.templateSrv.replace(L),start:N,end:F})}applyTemplateVariables(L,P){return{...L,labelSelector:this.templateSrv.replace(L.labelSelector??"",P),profileTypeId:this.templateSrv.replace(L.profileTypeId??"",P)}}async importFromAbstractQueries(L){return L.map(P=>this.importFromAbstractQuery(P))}importFromAbstractQuery(L){return{refId:L.refId,labelSelector:(0,u.PL)(L),queryType:"both",profileTypeId:"",groupBy:[]}}async exportToAbstractQueries(L){return L.map(P=>this.exportToAbstractQuery(P))}exportToAbstractQuery(L){const P=L.labelSelector;if(!P||P.length===0)return{refId:L.refId,labelMatchers:[]};const N=a().tokenize(P,x);return{refId:L.refId,labelMatchers:(0,u.UO)(N)}}getDefaultQuery(L){return R}}const R={...M,queryType:D};function O(I,L){let P={...R,...I};return L!==r.zj.Explore&&P.queryType==="both"&&(P.queryType="profile"),P}const x={"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-zA-Z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},punctuation:/[{}(),.]/}},8124:(G,A,e)=>{"use strict";e.d(A,{k:()=>nt,e:()=>ct});var n=e(56375),a=e(16226),o=e(21964),r=e(59069),i=e(98231),g=e(79739),u=e(23757),l=e(68898),m=e(38070),c=e(73891),d=e(45878),f=e(32063),E=e(12399),v=e(78942),h=e(85445),p=e(81502),s=e(56575),y=e(93657),C=e(66681),b=e(85960),S=e(47257),D=e(51637),M=e(20519),T=e(27436),R=e(5999),O=e(82894),x=e(71785),I=e(43310),L=e(55104),P=e.n(L),N=e(72623),F=e(76310),U=e(29165),j=e(74042),V=e(95642),_=e(28269),H=e(14063),z=e(97666),K=e(18151),Y=e(55182);const k="time-of-day-picker-panel",q=({minuteStep:he=1,showHour:xe=!0,showSeconds:Me=!1,onChange:He,value:Ve,size:Oe="auto",disabled:Ne,disabledHours:_e,disabledMinutes:qe,disabledSeconds:rt,placeholder:mt,format:Je="HH:mm",defaultValue:Ae=void 0,allowEmpty:Ke=!1,width:Xe})=>{const ne=(0,S.wW)(te),Z=()=>Xe?(0,C.css)`
        width: ${Xe}px;
      `:(0,K.ht)()[Oe];return b.createElement(H.Z,{value:Ve,defaultValue:Ae,onChange:ee=>He(ee),showHour:xe,showSecond:Me,format:Je,allowEmpty:Ke,className:(0,C.cx)(Z(),ne.input),popupClassName:(0,C.cx)(ne.picker,k),minuteStep:he,inputIcon:b.createElement(X,{wrapperStyle:ne.caretWrapper}),disabled:Ne,disabledHours:_e,disabledMinutes:qe,disabledSeconds:rt,placeholder:mt})},X=({wrapperStyle:he=""})=>b.createElement("div",{className:he},b.createElement(z.J,{name:"angle-down"})),te=he=>{const xe=he.components.input.background,Me=he.v1.palette.black,He=he.colors.background.secondary,Ve=he.shape.radius.default,Oe=he.components.input.borderColor;return{caretWrapper:(0,C.css)`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${he.colors.text.secondary};
    `,picker:(0,C.css)`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${xe};
        border-color: ${Oe};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${he.v1.palette.orange};
            border-radius: ${Ve};
          }

          &:hover {
            background: ${He};
          }

          &.rc-time-picker-panel-select-option-disabled {
            color: ${he.colors.action.disabledText};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${Me};
        background-color: ${xe};
        border-color: ${Oe};
        border-radius: ${Ve};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${xe};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:(0,C.css)`
      .rc-time-picker-input {
        background-color: ${xe};
        border-radius: ${Ve};
        border-color: ${Oe};
        height: ${he.spacing(4)};

        &:focus {
          ${(0,Y.focusCss)(he)}
        }

        &:disabled {
          background-color: ${he.colors.action.disabledBackground};
          color: ${he.colors.action.disabledText};
          border: 1px solid ${he.colors.action.disabledBackground};
          &:focus {
            box-shadow: none;
          }
        }
      }

      .rc-time-picker-clear {
        position: absolute;
        right: 20px;
        top: 50%;
        cursor: pointer;
        overflow: hidden;
        transform: translateY(-50%);
        color: ${he.colors.text.secondary};
      }
    `}},se=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((he,xe)=>({label:he,value:xe+1})),de=({value:he,onChange:xe})=>{const Me=(0,S.wW)(re),He=Date.now(),Ve=(0,N.Pr)(he.timezone??"utc",He),Oe=(0,y.h4)().getCurrent()?.getTimezone()===he.timezone,[Ne,_e]=(0,b.useState)(!1),qe=()=>{_e(!Ne)},rt=ee=>{if(!ee)return;const ce=P()();if(ee){const be=ee.split(":");ce.set("hour",parseInt(be[0],10)),ce.set("minute",parseInt(be[1],10))}return ce},mt=()=>{let ee="Everyday";return he.fromDayOfWeek&&!he.toDayOfWeek&&(ee=se[he.fromDayOfWeek-1].label),ee},Je=()=>{const ee=b.createElement(b.Fragment,null,b.createElement(_.d,{title:Ve?.name}),b.createElement(V.v,{timeZone:he.timezone,timestamp:He}));return Oe?b.createElement(b.Fragment,null,"Dashboard timezone (",ee,")"):ee},Ae=(ee,ce)=>{const be=ee?ee.format("HH:mm"):void 0;xe(ce==="from"?{...he,from:be}:{...he,to:be})},Ke=ee=>{xe({...he,timezone:ee})},Xe=ee=>{const ce=ee?ee.value:void 0,be=ee?he.toDayOfWeek:void 0;xe({...he,fromDayOfWeek:ce,toDayOfWeek:be})},ne=ee=>{xe({...he,toDayOfWeek:ee?ee.value:void 0})},Z=()=>Ne?b.createElement(F.O,{value:he.timezone,includeInternal:!0,onChange:ee=>Ke(ee),onBlur:()=>_e(!1),openMenuOnFocus:!1,width:100,autoFocus:!0}):b.createElement("div",{className:Me.timezoneContainer},b.createElement("div",{className:Me.timezone},Je()),b.createElement(U.zx,{variant:"secondary",onClick:qe,size:"sm"},"Change timezone"));return b.createElement(D.C,{className:Me.wrapper},b.createElement(M.g,{label:"From"},b.createElement(j.Lh,{spacing:"xs"},b.createElement(T.Ph,{options:se,isClearable:!0,placeholder:"Everyday",value:he.fromDayOfWeek??null,onChange:ee=>Xe(ee),width:20}),b.createElement(q,{value:rt(he.from),onChange:ee=>Ae(ee,"from"),allowEmpty:!0,placeholder:"HH:mm",width:100}))),b.createElement(M.g,{label:"To"},b.createElement(j.Lh,{spacing:"xs"},(he.fromDayOfWeek||he.toDayOfWeek)&&b.createElement(T.Ph,{options:se,isClearable:!0,placeholder:mt(),value:he.toDayOfWeek??null,onChange:ee=>ne(ee),width:20}),b.createElement(q,{value:rt(he.to),onChange:ee=>Ae(ee,"to"),allowEmpty:!0,placeholder:"HH:mm",width:100}))),b.createElement(M.g,{label:"Timezone"},Z()))},re=he=>({wrapper:(0,C.css)({maxWidth:he.spacing(60),marginBottom:he.spacing(2)}),timezoneContainer:(0,C.css)`
      padding: 5px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
    `,timezone:(0,C.css)`
      margin-right: 5px;
    `}),fe="Enabling this returns annotations that match any of the tags specified below",ie=b.createElement("div",null,"Specify a list of tags to match. To specify a key and value tag use `key:value` syntax."),oe=[{label:"Dashboard",value:I._$.Dashboard,description:"Query for events created on this dashboard and show them in the panels where they where created"},{label:"Tags",value:I._$.Tags,description:"This will fetch any annotation events that match the tags filter"}],ue=[{label:"Annotations & Alerts",value:I.hR.Annotations,description:"Show annotations or alerts managed by grafana"},{label:"Time regions",value:I.hR.TimeRegions,description:"Configure a repeating time region"}],me=[10,50,100,200,300,500,1e3,2e3].map(he=>({label:String(he),value:he}));function ge({query:he,onChange:xe}){const Me=he,{limit:He,matchAny:Ve,tags:Oe,type:Ne,queryType:_e}=Me;let qe=_e??I.hR.Annotations;const rt=(0,b.useMemo)(()=>(0,y.h4)().dashboard?.getTimezone(),[]),mt=(0,S.wW)(Ue),Je=ee=>xe({...Me,type:ee.value}),Ae=ee=>xe({...Me,limit:ee.value}),Ke=ee=>xe({...Me,matchAny:ee.target.checked}),Xe=ee=>xe({...Me,tags:ee}),ne=ee=>{const ce={...Me,queryType:ee.value};ce.queryType===I.hR.TimeRegions?ce.timeRegion||(ce.timeRegion={timezone:rt}):delete ce.timeRegion,xe(ce)},Z=ee=>{xe({...Me,timeRegion:ee})};return b.createElement(D.C,{className:mt.container},b.createElement(M.g,{label:"Query type"},b.createElement(T.Ph,{inputId:"grafana-annotations__query-type",options:ue,value:qe,onChange:ne})),qe===I.hR.Annotations&&b.createElement(b.Fragment,null,b.createElement(M.g,{label:"Filter by"},b.createElement(T.Ph,{inputId:"grafana-annotations__filter-by",options:oe,value:Ne,onChange:Je})),b.createElement(M.g,{label:"Max limit"},b.createElement(T.Ph,{inputId:"grafana-annotations__limit",width:16,options:me,value:He,onChange:Ae})),Ne===I._$.Tags&&b.createElement(b.Fragment,null,b.createElement(M.g,{label:"Match any",description:fe},b.createElement(R.r,{id:"grafana-annotations__match-any",value:Ve,onChange:Ke})),b.createElement(M.g,{label:"Tags",description:ie},b.createElement(O.D,{allowCustomValue:!0,inputId:"grafana-annotations__tags",onChange:Xe,tagOptions:x.lK,tags:Oe??[]})))),qe===I.hR.TimeRegions&&Me.timeRegion&&b.createElement(de,{value:Me.timeRegion,onChange:Z}))}const Ue=he=>({container:(0,C.css)({maxWidth:he.spacing(60),marginBottom:he.spacing(2)})});var De=e(58309),Pe=e(60517);function ye(he,xe,Me,He){if(!xe)return;const Ve=(0,Pe.q7)(xe,Me);if(!Ve.length)return;const Oe=[],Ne=[],_e=[],qe=xe.timezone??He;for(const rt of Ve){let mt=rt.from,Je=rt.to;const Ae=(0,N.Pr)(qe,mt);if(Ae){const Ke=Ae.offsetInMins*60*1e3;mt+=Ke,Je+=Ke}Oe.push(mt),Ne.push(Je),_e.push(he)}return{fields:[{name:"time",type:De.fS.time,values:Oe,config:{}},{name:"timeEnd",type:De.fS.time,values:Ne,config:{}},{name:"text",type:De.fS.string,values:_e,config:{}}],length:Oe.length}}let Te=100;class nt extends f.CK{constructor(xe){super(xe),this.annotations={QueryEditor:ge,prepareAnnotation(Me){return Me.target=Me.target??{type:Me.type??I._$.Dashboard,limit:Me.limit??100,tags:Me.tags??[],matchAny:Me.matchAny??!1},Me},prepareQuery(Me){let He;if((0,n.isString)(Me.datasource)){const Ne=(0,s.pR)(Me.datasource,{returnDefaultAsNull:!1});Ne&&(He=Ne)}else He=Me.datasource;const{filter:Ve,...Oe}=Me;return{...Oe,refId:Me.name,queryType:I.hR.Annotations,datasource:He}}}}getDefaultQuery(){return{queryType:I.hR.RandomWalk}}query(xe){const Me=[],He=[],Ve=(0,E.J)();for(const Oe of xe.targets){if(Oe.queryType===I.hR.Annotations)return(0,a.D)(this.getAnnotations({range:xe.range,rangeRaw:xe.range.raw,annotation:Oe,dashboard:(0,y.h4)().getCurrent()}));if(!Oe.hide){if(Oe.queryType===I.hR.Snapshot){Me.push((0,o.of)({data:(Oe.snapshot??[]).map(Ne=>(0,g.vP)(Ne)),state:u.Gu.Done}));continue}if(Oe.queryType===I.hR.TimeRegions){const Ne=ye("",Oe.timeRegion,xe.range,xe.timezone);Me.push((0,o.of)({data:Ne?[Ne]:[],state:u.Gu.Done}));continue}if(Oe.queryType===I.hR.LiveMeasurements){let Ne=Ve.replace(Oe.channel,xe.scopedVars);const{filter:_e}=Oe,qe=(0,l.H7)(Ne);if(!(0,l.nU)(qe))continue;const rt={maxLength:xe.maxDataPoints??500};Oe.buffer?(rt.maxDelta=Oe.buffer,rt.maxLength=rt.maxLength*2):xe.rangeRaw?.to==="now"&&(rt.maxDelta=xe.range.to.valueOf()-xe.range.from.valueOf()),Me.push((0,v.gj)().getDataStream({key:`${xe.requestId}.${Te++}`,addr:qe,filter:_e,buffer:rt}))}else Oe.queryType||(Oe.queryType=I.hR.RandomWalk),He.push(Oe)}}return He.length&&Me.push(super.query({...xe,targets:He})),Me.length?Me.length===1?Me[0]:(0,r.T)(...Me):(0,o.of)()}listFiles(xe,Me){return this.query({targets:[{refId:"A",queryType:I.hR.List,path:xe}],maxDataPoints:Me}).pipe((0,i.U)(He=>{const Ve=He.data[0]??new m.v;return new c.U(Ve)}))}metricFindQuery(){return Promise.resolve([])}async getAnnotations(xe){const Me=xe.annotation.target;if(Me?.queryType===I.hR.TimeRegions){const _e=ye(xe.annotation.name,Me.timeRegion,xe.range,(0,y.h4)().getCurrent()?.timezone);return Promise.resolve({data:_e?[_e]:[]})}const He=xe.annotation,Ve=He.target,Oe={from:xe.range.from.valueOf(),to:xe.range.to.valueOf(),limit:Ve.limit,tags:Ve.tags,matchAny:Ve.matchAny};if(Ve.type===I._$.Dashboard){if(!xe.dashboard.uid)return Promise.resolve({data:[]});Oe.dashboardUID=xe.dashboard.uid,delete Oe.tags}else{if(!Array.isArray(Ve.tags)||Ve.tags.length===0)return Promise.resolve({data:[]});const _e=(0,E.J)(),qe="__delimiter__",rt=[];for(const mt of Oe.tags){const Je=_e.replace(mt,{},Ae=>typeof Ae=="string"?Ae:Ae.join(qe));for(const Ae of Je.split(qe))rt.push(Ae)}Oe.tags=rt}const Ne=await(0,h.i)().get("/api/annotations",Oe,`grafana-data-source-annotations-${He.name}-${xe.dashboard?.uid}`);return{data:[(0,d.g0)(Ne)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}async function ct(){return await(0,p.F)().get("-- Grafana --")}},43310:(G,A,e)=>{"use strict";e.d(A,{_$:()=>r,hR:()=>n,ip:()=>o,wi:()=>a});var n=(i=>(i.LiveMeasurements="measurements",i.Annotations="annotations",i.Snapshot="snapshot",i.TimeRegions="timeRegions",i.RandomWalk="randomWalk",i.List="list",i.Read="read",i.Search="search",i))(n||{});const a={refId:"A",queryType:"randomWalk"},o={refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:"snapshot",snapshot:[]};var r=(i=>(i.Dashboard="dashboard",i.Tags="tags",i))(r||{})},8345:(G,A,e)=>{"use strict";e.d(A,{F:()=>u,k:()=>m});var n=e(79739),a=e(60484),o=e(76679),r=e(71005),i=e(14914),g=e(43310);function u(c,d){return new Promise(f=>{if(c.datasource?.uid===o.JY){l(d,c),f(!0);return}a.Z.publish(new i.VJ({title:"Change to panel embedded data",text:"If you want to change the data shown in this panel Grafana will need to remove the panels current query and replace it with a snapshot of the current data. This enables you to edit the data.",yesText:"Continue",icon:"pen",onConfirm:()=>{l(d,c),f(!0)},onDismiss:()=>{f(!1)}}))})}function l(c,d){const f=c.map(v=>(0,n.Y)(v)),E={refId:"A",queryType:g.hR.Snapshot,snapshot:f,datasource:{uid:o.JY}};d.updateQueries({dataSource:{uid:o.JY},queries:[E]}),d.refresh()}function m(c){return(d,f,E)=>{r.eM(d).subscribe(async v=>{const h=[];v.dataFrames.forEach(p=>{const s=(0,n.Y)(p);h.push(s)}),c({...g.ip,snapshot:h,file:v.file},f)})}}},85916:(G,A,e)=>{"use strict";e.d(A,{Wp:()=>g,c6:()=>l,xM:()=>r});var n=e(38070),a=e(58309),o=e(7997);function r(m){const c=m.spans.map(f=>i(f,m.processes)),d=new n.v({fields:[{name:"traceID",type:a.fS.string},{name:"spanID",type:a.fS.string},{name:"parentSpanID",type:a.fS.string},{name:"operationName",type:a.fS.string},{name:"serviceName",type:a.fS.string},{name:"serviceTags",type:a.fS.other},{name:"startTime",type:a.fS.number},{name:"duration",type:a.fS.number},{name:"logs",type:a.fS.other},{name:"tags",type:a.fS.other},{name:"warnings",type:a.fS.other},{name:"stackTraces",type:a.fS.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"jaeger"}}});for(const f of c)d.add(f);return d}function i(m,c){return{spanID:m.spanID,traceID:m.traceID,parentSpanID:m.references?.find(d=>d.refType==="CHILD_OF")?.spanID,operationName:m.operationName,startTime:m.startTime/1e3,duration:m.duration/1e3,logs:m.logs.map(d=>({...d,timestamp:d.timestamp/1e3})),tags:m.tags,warnings:m.warnings??void 0,stackTraces:m.stackTraces,serviceName:c[m.processID].serviceName,serviceTags:c[m.processID].tags}}function g(m,c){const d=new n.v({fields:[{name:"traceID",type:a.fS.string,config:{unit:"string",displayNameFromDS:"Trace ID",links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:c.uid,datasourceName:c.name,query:{query:"${__value.raw}"}}}]}},{name:"traceName",type:a.fS.string,config:{displayNameFromDS:"Trace name"}},{name:"startTime",type:a.fS.time,config:{displayNameFromDS:"Start time"}},{name:"duration",type:a.fS.number,config:{displayNameFromDS:"Duration",unit:"\xB5s"}}],meta:{preferredVisualisationType:"table"}}),f=m.map(u).sort((E,v)=>v?.startTime-E?.startTime);for(const E of f)d.add(E);return d}function u(m){const c=(0,o.transformTraceData)(m);if(c)return{traceID:c.traceID,startTime:c.startTime/1e3,duration:c.duration,traceName:c.traceName}}function l(m){let c={traceID:"",spans:[],processes:{},warnings:null},d=[];for(let f=0;f<m.length;f++){const E=m.get(f);c.traceID||(c.traceID=E.traceID),d.find(v=>v===E.serviceName)||(d.push(E.serviceName),c.processes[`p${d.length}`]={serviceName:E.serviceName,tags:E.serviceTags}),c.spans.push({traceID:E.traceID,spanID:E.spanID,duration:E.duration*1e3,references:E.parentSpanID?[{refType:"CHILD_OF",spanID:E.parentSpanID,traceID:E.traceID}]:[],flags:0,logs:E.logs.map(v=>({...v,timestamp:v.timestamp*1e3})),operationName:E.operationName,processID:Object.keys(c.processes).find(v=>c.processes[v].serviceName===E.serviceName)||"",startTime:E.startTime*1e3,tags:E.tags,warnings:E.warnings?E.warnings:null})}return{data:[c],total:0,limit:0,offset:0,errors:null}}},35055:(G,A,e)=>{"use strict";e.d(A,{$5:()=>n,EH:()=>r,ZP:()=>l,md:()=>i,r8:()=>g,xY:()=>u});const n=[{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"}],a=[{label:"json",insertText:"json",documentation:"Extracting labels from the log line using json parser."},{label:"regexp",insertText:'regexp ""',documentation:"Extracting labels from the log line using regexp parser.",move:-1},{label:"logfmt",insertText:"logfmt",documentation:"Extracting labels from the log line using logfmt parser."},{label:"pattern",insertText:"pattern",documentation:"Extracting labels from the log line using pattern parser. Only available in Loki 2.3+."},{label:"unpack",insertText:"unpack",detail:"unpack identifier",documentation:'Parses a JSON log line, unpacking all embedded labels in the pack stage. A special property "_entry" will also be used to replace the original log line. Only available in Loki 2.2+.'}],o=[{label:"unwrap",insertText:"unwrap",detail:"unwrap identifier",documentation:"Take labels and use the values as sample data for metric aggregations."},{label:"label_format",insertText:"label_format",documentation:"Use to rename, modify or add labels. For example, | label_format foo=bar ."},{label:"line_format",insertText:"line_format",documentation:'Rewrites log line content. For example, | line_format "{{.query}} {{.duration}}" .'}],r=[{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average of all values in the specified interval."},{insertText:"bytes_over_time",label:"bytes_over_time",detail:"bytes_over_time(range-vector)",documentation:"Counts the amount of bytes used by each log stream for a given range"},{insertText:"bytes_rate",label:"bytes_rate",detail:"bytes_rate(range-vector)",documentation:"Calculates the number of bytes per second for each stream."},{insertText:"first_over_time",label:"first_over_time",detail:"first_over_time(range-vector)",documentation:"The first of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The last of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum of all values in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the number of entries per second."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."}],i=[{insertText:"vector",label:"vector",detail:"vector(scalar)",documentation:"Returns the scalar as a vector with no labels."}],g=[...n,...r,...i],u={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((without|by)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-zA-Z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},"context-pipe":{pattern:/\s\|[^=~]\s?\w*/i,inside:{"pipe-operator":{pattern:/\|/i,alias:"operator"},"pipe-operations":{pattern:new RegExp(`${[...a,...o].map(m=>m.label).join("|")}`,"i"),alias:"keyword"}}},function:new RegExp(`\\b(?:${g.map(m=>m.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=\])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],quote:{pattern:/"(?:\\.|[^\\"])*"/,alias:"string",greedy:!0},backticks:{pattern:/`(?:\\.|[^\\`])*`/,alias:"string",greedy:!0},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:/\s?(\|[=~]?|!=?|<(?:=>?|<|>)?|>[>=]?)\s?/i,punctuation:/[{}(),.]/},l=u},63459:(G,A,e)=>{"use strict";e.d(A,{D:()=>p,w:()=>s});var n=e(56375),a=e.n(n),o=e(21964),r=e(16226),i=e(82846),g=e(25066),u=e(98231),l=e(76793),m=e(85431),c=e(15055),d=e(53773),f=e(41466),E=e(23757),v=e(81502),h=e(4479);const p="-- Mixed --";class s extends f.MF{constructor(b){super(b)}query(b){const S=b.targets.filter(T=>T.datasource?.uid!==p);if(!S.length)return(0,o.of)({data:[]});const D=(0,n.groupBy)(S,"datasource.uid"),M=[];for(const T in D){const R=D[T];M.push({datasource:(0,v.F)().get(R[0].datasource,b.scopedVars),targets:R})}return M.length?this.batchQueries(M,b):(0,o.of)({data:[]})}batchQueries(b,S){const D=b.filter(this.isQueryable).map((M,T)=>(0,r.D)(M.datasource).pipe((0,g.z)(R=>{const O=(0,n.cloneDeep)(S);return O.requestId=`mixed-${T}-${O.requestId||""}`,O.targets=M.targets,(0,r.D)(R.query(O)).pipe((0,u.U)(x=>({...x,data:x.data||[],state:E.Gu.Loading,key:`mixed-${T}-${x.key||""}`})),(0,l.q)(),(0,m.K)(x=>(x=(0,h.P)(x),x.message=`${R.name}: ${x.message}`,(0,o.of)([{data:[],state:E.Gu.Error,error:x,key:`mixed-${T}-${O.requestId||""}`}]))))})));return(0,i.D)(D).pipe(y(),(0,u.U)(this.finalizeResponses),(0,c.J)())}testDatasource(){return Promise.resolve({message:"",status:""})}isQueryable(b){return b&&Array.isArray(b.targets)&&b.targets.length>0}finalizeResponses(b){const{length:S}=b;if(S===0)return b;const D=b.find(M=>M.state===E.Gu.Error);return D?b.push(D):b[S-1].state=E.Gu.Done,b}}function y(){return(0,d.u)((C,b)=>b.reduce((S,D)=>(S.push.apply(S,D),S),C),[])}},51811:(G,A,e)=>{"use strict";e.d(A,{F:()=>r});var n=e(88190),a=e(77530),o=e(98100);function r(m,c,d,f="="){if(!c||!d)throw new Error("Need label to add to query.");const E=i(m);if(!E.length)return m;const v=g(c,d,f);return u(m,E,v)}function i(m){const c=n.E2.parse(m),d=[];return c.iterate({enter:({to:f,from:E,type:v})=>{if(v.id===n.m6){const h=(0,o._)(m.substring(E,f));return d.push({query:h.query,from:E,to:f}),!1}}}),d}function g(m,c,d){const f=c===1/0?"+Inf":c.toString();return{label:m,op:d,value:f}}function u(m,c,d){const f=new a.K;let E="",v=0;for(let h=0;h<c.length;h++){const p=c[h],s=h===c.length-1,y=m.substring(v,p.from),C=s?m.substring(p.to):"";l(p.query.labels,d)||p.query.labels.push(d);const b=f.renderQuery(p.query);E+=y+b+C,v=p.to}return E}function l(m,c){return m.find(d=>d.label===c.label&&d.value===c.value)}},8864:(G,A,e)=>{"use strict";e.d(A,{Z:()=>U});var n=e(66681),a=e(85960),o=e(45878),r=e(43183),i=e(97666),g=e(29165),u=e(47257),l=e(52248);function m(j){return typeof j=="object"&&j!==null&&"isCanceled"in j}const c=j=>{let V=!1;return{promise:new Promise((H,z)=>{const K={isCanceled:!0};j.then(Y=>V?z(K):H(Y)),j.catch(Y=>z(V?K:Y))}),cancel(){V=!0}}};var d=e(64065),f=e(403),E=e(33808),v=e(79468),h=e(74042),p=e(57445),s=e(24956),y=e(11389);const C="{}",b="__name__",S=25;function D(j){let V="";const _=[];for(const H of j)if((H.name===b||H.selected)&&H.values&&H.values.length>0){const z=H.values.filter(K=>K.selected).map(K=>K.name);z.length>1?_.push(`${H.name}=~"${z.map(d.tU).join("|")}"`):z.length===1&&(H.name===b?V=z[0]:_.push(`${H.name}="${(0,d.U9)(z[0])}"`))}return[V,"{",_.join(","),"}"].join("")}function M(j,V,_){return j.map(H=>{const z=V[H.name];if(z){let K;if(H.name===_&&H.values)K=H.values;else{const Y=new Set(H.values?.filter(k=>k.selected).map(k=>k.name)||[]);K=z.map(k=>({name:k,selected:Y.has(k)}))}return{...H,loading:!1,values:K,hidden:!z,facets:K.length}}return{...H,loading:!1,hidden:!z,values:void 0,facets:0}})}const T=(0,E.B)(j=>({wrapper:(0,n.css)`
    background-color: ${j.colors.background.secondary};
    padding: ${j.spacing(1)};
    width: 100%;
  `,list:(0,n.css)`
    margin-top: ${j.spacing(1)};
    display: flex;
    flex-wrap: wrap;
    max-height: 200px;
    overflow: auto;
    align-content: flex-start;
  `,section:(0,n.css)`
    & + & {
      margin: ${j.spacing(2)} 0;
    }
    position: relative;
  `,selector:(0,n.css)`
    font-family: ${j.typography.fontFamilyMonospace};
    margin-bottom: ${j.spacing(1)};
  `,status:(0,n.css)`
    padding: ${j.spacing(.5)};
    color: ${j.colors.text.secondary};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    /* using absolute positioning because flex interferes with ellipsis */
    position: absolute;
    width: 50%;
    right: 0;
    text-align: right;
    transition: opacity 100ms linear;
    opacity: 0;
  `,statusShowing:(0,n.css)`
    opacity: 1;
  `,error:(0,n.css)`
    color: ${j.colors.error.main};
  `,valueList:(0,n.css)`
    margin-right: ${j.spacing(1)};
    resize: horizontal;
  `,valueListWrapper:(0,n.css)`
    border-left: 1px solid ${j.colors.border.medium};
    margin: ${j.spacing(1)} 0;
    padding: ${j.spacing(1)} 0 ${j.spacing(1)} ${j.spacing(1)};
  `,valueListArea:(0,n.css)`
    display: flex;
    flex-wrap: wrap;
    margin-top: ${j.spacing(1)};
  `,valueTitle:(0,n.css)`
    margin-left: -${j.spacing(.5)};
    margin-bottom: ${j.spacing(1)};
  `,validationStatus:(0,n.css)`
    padding: ${j.spacing(.5)};
    margin-bottom: ${j.spacing(1)};
    color: ${j.colors.text.maxContrast};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `}));class R extends a.Component{constructor(){super(...arguments),this.valueListsRef=a.createRef(),this.state={labels:[],labelSearchTerm:"",metricSearchTerm:"",status:"Ready",error:"",validationStatus:"",valueSearchTerm:""},this.onChangeLabelSearch=V=>{this.setState({labelSearchTerm:V.target.value})},this.onChangeMetricSearch=V=>{this.setState({metricSearchTerm:V.target.value})},this.onChangeValueSearch=V=>{this.setState({valueSearchTerm:V.target.value})},this.onClickRunQuery=()=>{const V=D(this.state.labels);this.props.onChange(V)},this.onClickRunRateQuery=()=>{const _=`rate(${D(this.state.labels)}[$__rate_interval])`;this.props.onChange(_)},this.onClickClear=()=>{this.setState(V=>({labels:V.labels.map(H=>({...H,values:void 0,selected:!1,loading:!1,hidden:!1,facets:void 0})),labelSearchTerm:"",metricSearchTerm:"",status:"",error:"",validationStatus:"",valueSearchTerm:""})),this.props.deleteLastUsedLabels(),this.fetchValues(b,C)},this.onClickLabel=(V,_,H)=>{const z=this.state.labels.find(k=>k.name===V);if(!z)return;const K=!z.selected;let Y={selected:K};if(z.values&&!K){const k=z.values.map(q=>({...q,selected:!1}));Y={...Y,facets:0,values:k}}this.setState({labelSearchTerm:""}),this.updateLabelState(V,Y,"",()=>this.doFacettingForLabel(V))},this.onClickValue=(V,_,H)=>{const z=this.state.labels.find(Y=>Y.name===V);if(!z||!z.values)return;this.setState({labelSearchTerm:""});const K=z.values.map(Y=>({...Y,selected:Y.name===_?!Y.selected:Y.selected}));this.updateLabelState(V,{values:K},"",()=>this.doFacetting(V))},this.onClickMetric=(V,_,H)=>{const z=this.state.labels.find(k=>k.name===V);if(!z||!z.values)return;this.setState({metricSearchTerm:""});const K=z.values.map(k=>({...k,selected:k.name===_||k.selected?!k.selected:k.selected})),Y=K.some(k=>k.selected);this.updateLabelState(V,{selected:Y,values:K},"",()=>this.doFacetting(V))},this.onClickValidate=()=>{const V=D(this.state.labels);this.validateSelector(V)},this.doFacetting=V=>{const _=D(this.state.labels);if(_===C){const H=this.state.labels.map(z=>({...z,facets:0,values:void 0,hidden:!1}));this.setState({labels:H},()=>{this.state.labels.forEach(z=>(z.selected||z.name===b)&&this.fetchValues(z.name,_))})}else this.fetchSeries(_,V)}}updateLabelState(V,_,H="",z){this.setState(K=>{const Y=K.labels.map(q=>q.name===V?{...q,..._}:q),k=H?"":K.error;return{labels:Y,status:H,error:k,validationStatus:""}},z)}componentDidMount(){const{languageProvider:V,lastUsedLabels:_}=this.props;if(V){const H=_;V.start(this.props.timeRange).then(()=>{let z=V.getLabelKeys();this.fetchValues(b,C);const K=z.map((Y,k,q)=>({name:Y,selected:H.includes(Y),loading:!1}));this.setState({labels:K},()=>{this.state.labels.forEach(Y=>{Y.selected&&this.fetchValues(Y.name,C)})})})}}doFacettingForLabel(V){const _=this.state.labels.find(z=>z.name===V);if(!_)return;const H=this.state.labels.filter(z=>z.selected).map(z=>z.name);this.props.storeLastUsedLabels(H),_.selected?_.values||this.fetchValues(V,D(this.state.labels)):this.doFacetting()}async fetchValues(V,_){const{languageProvider:H}=this.props;this.updateLabelState(V,{loading:!0},`Fetching values for ${V}`);try{let z=await H.getLabelValues(V);if(_!==D(this.state.labels)){this.updateLabelState(V,{loading:!1});return}const K=[],{metricsMetadata:Y}=H;for(const k of z){const q={name:k};if(V===b&&Y){const X=Y[k];X&&(q.details=`(${X.type}) ${X.help}`)}K.push(q)}this.updateLabelState(V,{values:K,loading:!1})}catch(z){console.error(z)}}async fetchSeries(V,_){const{languageProvider:H}=this.props;_&&this.updateLabelState(_,{loading:!0},`Facetting labels for ${V}`);try{const z=await H.fetchSeriesLabels(V,!0);if(V!==D(this.state.labels)){_&&this.updateLabelState(_,{loading:!1});return}if(Object.keys(z).length===0){this.setState({error:`Empty results, no matching label for ${V}`});return}const K=M(this.state.labels,z,_);this.setState({labels:K,error:""}),_&&this.updateLabelState(_,{loading:!1})}catch(z){console.error(z)}}async validateSelector(V){const{languageProvider:_}=this.props;this.setState({validationStatus:`Validating selector ${V}`,error:""});const H=await _.fetchSeries(V);this.setState({validationStatus:`Selector is valid (${H.length} series found)`})}render(){const{theme:V}=this.props,{labels:_,labelSearchTerm:H,metricSearchTerm:z,status:K,error:Y,validationStatus:k,valueSearchTerm:q}=this.state,X=T(V);if(_.length===0)return a.createElement("div",{className:X.wrapper},a.createElement(v.u,{text:"Loading labels..."}));let te=_.find(oe=>oe.name===b);te&&z&&(te={...te,values:te.values?.filter(oe=>oe.selected||oe.name.includes(z))});let se=_.filter(oe=>!oe.hidden&&oe.name!==b);H&&(se=se.filter(oe=>oe.selected||oe.name.includes(H)));let de=se.filter(oe=>oe.selected&&oe.values);q&&(de=de.map(oe=>({...oe,values:oe.values?.filter(ue=>ue.selected||ue.name.includes(q))})));const re=D(this.state.labels),fe=re===C,ie=te?.values?.length||0;return a.createElement("div",{className:X.wrapper},a.createElement(h.Lh,{align:"flex-start",spacing:"lg"},a.createElement("div",null,a.createElement("div",{className:X.section},a.createElement(p._,{description:"Once a metric is selected only possible labels are shown."},"1. Select a metric"),a.createElement("div",null,a.createElement(s.I,{onChange:this.onChangeMetricSearch,"aria-label":"Filter expression for metric",value:z})),a.createElement("div",{role:"list",className:X.valueListWrapper},a.createElement(f.t7,{height:Math.min(450,ie*S),itemCount:ie,itemSize:S,itemKey:oe=>te.values[oe].name,width:300,className:X.valueList},({index:oe,style:ue})=>{const me=te?.values?.[oe];return me?a.createElement("div",{style:ue},a.createElement(y._,{name:te.name,value:me?.name,title:me.details,active:me?.selected,onClick:this.onClickMetric,searchTerm:z})):null})))),a.createElement("div",null,a.createElement("div",{className:X.section},a.createElement(p._,{description:"Once label values are selected, only possible label combinations are shown."},"2. Select labels to search in"),a.createElement("div",null,a.createElement(s.I,{onChange:this.onChangeLabelSearch,"aria-label":"Filter expression for label",value:H})),a.createElement("div",{className:X.list,style:{height:120}},se.map(oe=>a.createElement(y._,{key:oe.name,name:oe.name,loading:oe.loading,active:oe.selected,hidden:oe.hidden,facets:oe.facets,onClick:this.onClickLabel,searchTerm:H})))),a.createElement("div",{className:X.section},a.createElement(p._,{description:"Use the search field to find values across selected labels."},"3. Select (multiple) values for your labels"),a.createElement("div",null,a.createElement(s.I,{onChange:this.onChangeValueSearch,"aria-label":"Filter expression for label values",value:q})),a.createElement("div",{className:X.valueListArea,ref:this.valueListsRef},de.map(oe=>a.createElement("div",{role:"list",key:oe.name,"aria-label":`Values for ${oe.name}`,className:X.valueListWrapper},a.createElement("div",{className:X.valueTitle},a.createElement(y._,{name:oe.name,loading:oe.loading,active:oe.selected,hidden:oe.hidden,facets:oe.facets||oe.values?.length,onClick:this.onClickLabel})),a.createElement(f.t7,{height:Math.min(200,S*(oe.values?.length||0)),itemCount:oe.values?.length||0,itemSize:28,itemKey:ue=>oe.values[ue].name,width:200,className:X.valueList},({index:ue,style:me})=>{const ge=oe.values?.[ue];return ge?a.createElement("div",{style:me},a.createElement(y._,{name:oe.name,value:ge?.name,active:ge?.selected,onClick:this.onClickValue,searchTerm:q})):null}))))))),a.createElement("div",{className:X.section},a.createElement(p._,null,"4. Resulting selector"),a.createElement("div",{"aria-label":"selector",className:X.selector},re),k&&a.createElement("div",{className:X.validationStatus},k),a.createElement(h.Lh,null,a.createElement(g.zx,{"aria-label":"Use selector for query button",disabled:fe,onClick:this.onClickRunQuery},"Use query"),a.createElement(g.zx,{"aria-label":"Use selector as metrics button",variant:"secondary",disabled:fe,onClick:this.onClickRunRateQuery},"Use as rate query"),a.createElement(g.zx,{"aria-label":"Validate submit button",variant:"secondary",disabled:fe,onClick:this.onClickValidate},"Validate selector"),a.createElement(g.zx,{"aria-label":"Selector clear button",variant:"secondary",onClick:this.onClickClear},"Clear"),a.createElement("div",{className:(0,n.cx)(X.status,(K||Y)&&X.statusShowing)},a.createElement("span",{className:Y?X.error:""},Y||K)))))}}const O=(0,u.HE)(R),x=a.lazy(()=>e.e(6031).then(e.bind(e,63562))),I=j=>a.createElement(a.Suspense,{fallback:null},a.createElement(x,{...j})),L=j=>{const V=(0,a.useRef)(null),{onRunQuery:_,onChange:H,...z}=j,K=q=>{V.current=q,H(q),_()},Y=q=>{H(q)},k=q=>{H(q)};return a.createElement(I,{onChange:k,onRunQuery:K,onBlur:Y,...z})},P="grafana.datasources.prometheus.browser.labels";function N(j,V,_){return j?"(Disabled)":V?_?"Metrics browser":"(No metrics found)":"Loading metrics..."}class F extends a.PureComponent{constructor(V){super(V),this.refreshHint=()=>{const{datasource:_,query:H,data:z}=this.props,K=_.getInitHints(),Y=K.length>0?K[0]:null;if(!z||z.series.length===0){this.setState({hint:Y});return}const k=(0,o.aY)(z.series[0])?z.series.map(o.Zr):z.series,q=_.getQueryHints(H,k);let X=q.length>0?q[0]:null;this.setState({hint:X??Y})},this.refreshMetrics=async()=>{const{range:_,datasource:{languageProvider:H}}=this.props;this.languageProviderInitializationPromise=c(H.start(_));try{const z=await this.languageProviderInitializationPromise.promise;await Promise.all(z),this.onUpdateLanguage()}catch(z){if(!(m(z)&&z.isCanceled))throw z}},this.onChangeLabelBrowser=_=>{this.onChangeQuery(_,!0),this.setState({labelBrowserVisible:!1})},this.onChangeQuery=(_,H)=>{const{query:z,onChange:K,onRunQuery:Y}=this.props;if(K){const k={...z,expr:_};K(k),H&&Y&&Y()}},this.onClickChooserButton=()=>{this.setState(_=>({labelBrowserVisible:!_.labelBrowserVisible})),(0,r.ff)("user_grafana_prometheus_metrics_browser_clicked",{editorMode:this.state.labelBrowserVisible?"metricViewClosed":"metricViewOpen",app:this.props?.app??""})},this.onClickHintFix=()=>{const{datasource:_,query:H,onChange:z,onRunQuery:K}=this.props,{hint:Y}=this.state;Y?.fix?.action&&z(_.modifyQuery(H,Y.fix.action)),K()},this.onUpdateLanguage=()=>{const{datasource:{languageProvider:_}}=this.props,{metrics:H}=_;H&&this.setState({syntaxLoaded:!0})},this.state={labelBrowserVisible:!1,syntaxLoaded:!1,hint:null}}componentDidMount(){this.props.datasource.languageProvider&&this.refreshMetrics(),this.refreshHint()}componentWillUnmount(){this.languageProviderInitializationPromise&&this.languageProviderInitializationPromise.cancel()}componentDidUpdate(V){const{data:_,datasource:{languageProvider:H},range:z}=this.props;H!==V.datasource.languageProvider&&this.setState({syntaxLoaded:!1});const K=this.rangeChangedToRefresh(z,V.range);(H!==V.datasource.languageProvider||K)&&this.refreshMetrics(),_&&V.data&&V.data.series!==_.series&&this.refreshHint()}rangeChangedToRefresh(V,_){if(V&&_){const H=(0,d.o8)(V.from.valueOf())===(0,d.o8)(_.from.valueOf()),z=(0,d.o8)(V.to.valueOf())===(0,d.o8)(_.to.valueOf());return!(H&&z)}return!1}render(){const{datasource:V,datasource:{languageProvider:_},query:H,ExtraFieldElement:z,history:K=[],theme:Y}=this.props,{labelBrowserVisible:k,syntaxLoaded:q,hint:X}=this.state,te=_.metrics.length>0,se=N(V.lookupsDisabled,q,te),de=!(q&&te);return a.createElement(l.G,{storageKey:P,defaultValue:[]},(re,fe,ie)=>a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-inline gf-form-inline--xs-view-flex-column flex-grow-1","data-testid":this.props["data-testid"]},a.createElement("button",{className:"gf-form-label query-keyword pointer",onClick:this.onClickChooserButton,disabled:de,type:"button"},se,a.createElement(i.J,{name:k?"angle-down":"angle-right"})),a.createElement("div",{className:"gf-form gf-form--grow flex-shrink-1 min-width-15"},a.createElement(L,{languageProvider:_,history:K,onChange:this.onChangeQuery,onRunQuery:this.props.onRunQuery,initialValue:H.expr??"",placeholder:"Enter a PromQL query\u2026",datasource:V}))),k&&a.createElement("div",{className:"gf-form"},a.createElement(O,{languageProvider:_,onChange:this.onChangeLabelBrowser,lastUsedLabels:re||[],storeLastUsedLabels:fe,deleteLastUsedLabels:ie,timeRange:this.props.range})),z,X?a.createElement("div",{className:"query-row-break"},a.createElement("div",{className:"prom-query-field-info text-warning"},X.label," ",X.fix?a.createElement("button",{type:"button",className:(0,n.cx)((0,g.gN)(Y),"text-link","muted"),onClick:this.onClickHintFix},X.fix.label):null)):null))}}const U=(0,u.HE)(F)},28017:(G,A,e)=>{"use strict";e.d(A,{Z5:()=>Je,Fu:()=>mt,Zg:()=>Ae,lj:()=>Xe,b0:()=>Ke});var n=e(66681),a=e(85960),o=e(89574),r=e(83743),i=e(57773),g=e(47257),u=e(49199),l=e(42337),m=e(74321),c=e(67954),d=e(15889),f=e(90857),E=e(84933),v=e(5999);function h({options:ne,onOptionsChange:Z}){const ee=(0,g.l4)(),ce=Xe(ee),be=f.config.featureToggles.prometheusConfigOverhaulAuth;return a.createElement(d._,{title:"Alerting",className:(0,n.cx)(ce.container,{[ce.alertingTop]:be})},a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(E._,{labelWidth:30,label:"Manage alerts via Alerting UI",disabled:ne.readOnly,tooltip:a.createElement(a.Fragment,null,"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source. ",Ae()),interactive:!0,className:ce.switchField},a.createElement(v.r,{value:ne.jsonData.manageAlerts!==!1,onChange:Ee=>Z({...ne,jsonData:{...ne.jsonData,manageAlerts:Ee.currentTarget.checked}})}))))))}var p=e(81368),s=e(24956),y=(ne=>(ne.Public="AzureCloud",ne.China="AzureChinaCloud",ne.USGovernment="AzureUSGovernment",ne.None="",ne))(y||{});const C=[{value:"AzureCloud",label:"Azure"},{value:"AzureChinaCloud",label:"Azure China"},{value:"AzureUSGovernment",label:"Azure US Government"}];function b(ne){switch(ne.authType){case"msi":case"workloadidentity":return!0;case"clientsecret":return!!(ne.azureCloud&&ne.tenantId&&ne.clientId&&ne.clientSecret)}}const S=Symbol("Concealed client secret");function D(){return f.config.azure.cloud||y.Public}function M(ne){if(ne.secureJsonFields.azureClientSecret)return S;{const Z=ne.secureJsonData?.azureClientSecret;return typeof Z=="string"&&Z.length>0?Z:void 0}}function T(ne){return!!ne.jsonData.azureCredentials}function R(){return f.config.azure.managedIdentityEnabled?{authType:"msi"}:{authType:"clientsecret",azureCloud:D()}}function O(ne){const Z=ne.jsonData.azureCredentials;if(!Z)return R();switch(Z.authType){case"msi":case"workloadidentity":return Z.authType==="msi"&&f.config.azure.managedIdentityEnabled||Z.authType==="workloadidentity"&&f.config.azure.workloadIdentityEnabled?{authType:Z.authType}:{authType:"clientsecret",azureCloud:D()};case"clientsecret":return{authType:"clientsecret",azureCloud:Z.azureCloud||D(),tenantId:Z.tenantId,clientId:Z.clientId,clientSecret:M(ne)}}}function x(ne,Z){switch(Z.authType){case"msi":case"workloadidentity":if(Z.authType==="msi"&&!f.config.azure.managedIdentityEnabled)throw new Error("Managed Identity authentication is not enabled in Grafana config.");if(Z.authType==="workloadidentity"&&!f.config.azure.workloadIdentityEnabled)throw new Error("Workload Identity authentication is not enabled in Grafana config.");return ne={...ne,jsonData:{...ne.jsonData,azureAuthType:Z.authType,azureCredentials:{authType:Z.authType}}},ne;case"clientsecret":return ne={...ne,jsonData:{...ne.jsonData,azureCredentials:{authType:"clientsecret",azureCloud:Z.azureCloud||D(),tenantId:Z.tenantId,clientId:Z.clientId}},secureJsonData:{...ne.secureJsonData,azureClientSecret:typeof Z.clientSecret=="string"&&Z.clientSecret.length>0?Z.clientSecret:void 0},secureJsonFields:{...ne.secureJsonFields,azureClientSecret:typeof Z.clientSecret=="symbol"}},ne}}function I(ne){return{jsonData:{...ne.jsonData,azureCredentials:R()}}}function L(ne){return{jsonData:{...ne.jsonData,azureAuth:void 0,azureCredentials:void 0,azureEndpointResourceId:void 0}}}var P=e(68921),N=e(27436),F=e(29165);const U=ne=>{const{credentials:Z,azureCloudOptions:ee,onCredentialsChange:ce,getSubscriptions:be,disabled:Ee,managedIdentityEnabled:Be,workloadIdentityEnabled:Le}=ne,ze=b(Z),[Fe,$e]=(0,a.useState)([]),[et,tt]=(0,a.useReducer)(It=>It+1,0),it=(0,a.useMemo)(()=>{let It=[{value:"clientsecret",label:"App Registration"}];return Be&&It.push({value:"msi",label:"Managed Identity"}),Le&&It.push({value:"workloadidentity",label:"Workload Identity"}),It},[Be,Le]);(0,a.useEffect)(()=>{if(!be||!ze){vt([]);return}let It=!1;return be().then(Zt=>{It||vt(Zt,et)}),()=>{It=!0}},[et]);const vt=(It,Zt=!1)=>{$e(It),be&&(Zt&&!Z.defaultSubscriptionId&&It.length>0?Bt(It[0]):Z.defaultSubscriptionId&&(It.find(xn=>xn.value===Z.defaultSubscriptionId)||Bt(void 0)))},yt=It=>{$e([]);const Zt=Be?"msi":Le?"workloadidentity":"clientsecret",yn={...Z,authType:It.value||Zt,defaultSubscriptionId:void 0};ce(yn)},Wt=It=>{if(Z.authType==="clientsecret"){$e([]);const Zt={...Z,azureCloud:It.value,defaultSubscriptionId:void 0};ce(Zt)}},ut=It=>{if(Z.authType==="clientsecret"){$e([]);const Zt={...Z,tenantId:It.target.value,defaultSubscriptionId:void 0};ce(Zt)}},pt=It=>{if(Z.authType==="clientsecret"){$e([]);const Zt={...Z,clientId:It.target.value,defaultSubscriptionId:void 0};ce(Zt)}},we=It=>{if(Z.authType==="clientsecret"){$e([]);const Zt={...Z,clientSecret:It.target.value,defaultSubscriptionId:void 0};ce(Zt)}},lt=()=>{if(Z.authType==="clientsecret"){$e([]);const It={...Z,clientSecret:"",defaultSubscriptionId:void 0};ce(It)}},Bt=It=>{const Zt={...Z,defaultSubscriptionId:It?.value};ce(Zt)},Kt=f.config.featureToggles.prometheusConfigOverhaulAuth;return a.createElement("div",{className:"gf-form-group"},it.length>1&&a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(P.c,{className:"width-12",tooltip:"Choose the type of authentication to Azure services"},"Authentication"),a.createElement(N.Ph,{className:"width-15",value:it.find(It=>It.value===Z.authType),options:it,onChange:yt,isDisabled:Ee}))),Z.authType==="clientsecret"&&a.createElement(a.Fragment,null,ee&&a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(P.c,{className:"width-12",tooltip:"Choose an Azure Cloud"},"Azure Cloud"),a.createElement(N.Ph,{className:"width-15",value:ee.find(It=>It.value===Z.azureCloud),options:ee,onChange:Wt,isDisabled:Ee}))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(P.c,{className:"width-12"},"Directory (tenant) ID"),a.createElement("div",{className:"width-15"},a.createElement(s.I,{className:(0,n.cx)(Kt?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:Z.tenantId||"",onChange:ut,disabled:Ee})))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(P.c,{className:"width-12"},"Application (client) ID"),a.createElement("div",{className:"width-15"},a.createElement(s.I,{className:(0,n.cx)(Kt?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:Z.clientId||"",onChange:pt,disabled:Ee})))),typeof Z.clientSecret=="symbol"?a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(P.c,{htmlFor:"azure-client-secret",className:"width-12"},"Client Secret"),a.createElement(s.I,{id:"azure-client-secret",className:(0,n.cx)(Kt?"width-20":"width-25"),placeholder:"configured",disabled:!0})),!Ee&&a.createElement("div",{className:"gf-form"},a.createElement("div",{className:(0,n.cx)(Kt?"max-width-20 gf-form-inline":"max-width-30 gf-form-inline")},a.createElement(F.zx,{variant:"secondary",type:"button",onClick:lt},"reset")))):a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(P.c,{className:"width-12"},"Client Secret"),a.createElement("div",{className:"width-15"},a.createElement(s.I,{className:(0,n.cx)(Kt?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:Z.clientSecret||"",onChange:we,disabled:Ee}))))),be&&a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(P.c,{className:"width-12"},"Default Subscription"),a.createElement("div",{className:(0,n.cx)(Kt?"width-20":"width-25")},a.createElement(N.Ph,{value:Z.defaultSubscriptionId?Fe.find(It=>It.value===Z.defaultSubscriptionId):void 0,options:Fe,onChange:Bt,isDisabled:Ee})))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"max-width-30 gf-form-inline"},a.createElement(F.zx,{variant:"secondary",size:"sm",type:"button",onClick:tt,disabled:!ze},"Load Subscriptions"))))))},j=null,V=ne=>{const{dataSourceConfig:Z,onChange:ee}=ne,[ce,be]=(0,a.useState)(!!Z.jsonData.azureEndpointResourceId),Ee=(0,a.useMemo)(()=>O(Z),[Z]),Be=et=>{ee(x(Z,et))},Le=et=>{be(et.currentTarget.checked),et.currentTarget.checked||ee({...Z,jsonData:{...Z.jsonData,azureEndpointResourceId:void 0}})},ze=et=>{ce&&ee({...Z,jsonData:{...Z.jsonData,azureEndpointResourceId:et.currentTarget.value}})},Fe=f.config.featureToggles.prometheusConfigOverhaulAuth,$e=Fe?24:26;return a.createElement(a.Fragment,null,a.createElement("h6",null,"Azure authentication"),a.createElement(U,{managedIdentityEnabled:f.config.azure.managedIdentityEnabled,workloadIdentityEnabled:f.config.azure.workloadIdentityEnabled,credentials:Ee,azureCloudOptions:C,onCredentialsChange:Be,disabled:Z.readOnly}),a.createElement("h6",null,"Azure configuration"),a.createElement("div",{className:"gf-form-group"},a.createElement(p.Z,null,a.createElement(E._,{labelWidth:$e,label:"Override AAD audience",disabled:Z.readOnly},a.createElement(v.x,{value:ce,onChange:Le}))),ce&&a.createElement(p.Z,null,a.createElement(E._,{labelWidth:$e,label:"Resource ID",disabled:Z.readOnly},a.createElement(s.I,{className:(0,n.cx)(Fe?"width-20":"width-30"),value:Z.jsonData.azureEndpointResourceId||"",onChange:ze})))))},_=null;var H=e(30743),z=e(55857),K=e(99323),Y=e(12281),k=e(9011);const q=ne=>{const{options:Z,onOptionsChange:ee,azureAuthSettings:ce,sigV4AuthToggleEnabled:be,renderSigV4Editor:Ee,secureSocksDSProxyEnabled:Be}=ne,Le=(0,H.T2)({config:Z,onChange:ee}),ze=(0,g.l4)(),Fe=Xe(ze);let $e=[];const[et,tt]=(0,a.useState)(Z.jsonData.sigV4Auth||!1),it="custom-sigV4Id",vt={id:it,label:"SigV4 auth",description:"This is SigV4 auth description",component:a.createElement(a.Fragment,null,Ee)};be&&$e.push(vt);const yt=ce?.azureAuthSupported&&ce.getAzureAuthEnabled(Z)||!1,[Wt,ut]=(0,a.useState)(yt),pt="custom-azureAuthId",we={id:pt,label:"Azure auth",description:"This is Azure auth description",component:a.createElement(a.Fragment,null,ce.azureSettingsUI&&a.createElement(ce.azureSettingsUI,{dataSourceConfig:Z,onChange:ee}))};ce?.azureAuthSupported&&$e.push(we);function lt(){return et?it:Wt?pt:Le.selectedMethod}let Bt;switch(Z.access){case"direct":Bt=a.createElement(a.Fragment,null,"Your access method is ",a.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.",Ae());break;case"proxy":Bt=a.createElement(a.Fragment,null,"Your access method is ",a.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.",Ae());break;default:Bt=a.createElement(a.Fragment,null,"Specify a complete HTTP URL (for example http://your_server:8080) ",Ae())}return a.createElement(a.Fragment,null,a.createElement(z.f,{urlPlaceholder:"http://localhost:9090",config:Z,onChange:ee,urlLabel:"Prometheus server URL",urlTooltip:Bt}),a.createElement("hr",{className:`${Fe.hrTopSpace} ${Fe.hrBottomSpace}`}),a.createElement(K.g,{...Le,customMethods:$e,onAuthMethodSelect:Kt=>{be&&tt(Kt===it),ce?.azureAuthSupported&&(ut(Kt===pt),ce.setAzureAuthEnabled(Z,Kt===pt)),ee({...Z,basicAuth:Kt===Y.H.BasicAuth,withCredentials:Kt===Y.H.CrossSiteCredentials,jsonData:{...Z.jsonData,sigV4Auth:Kt===it,oauthPassThru:Kt===Y.H.OAuthForward}})},selectedMethod:lt()}),a.createElement("div",{className:Fe.sectionBottomPadding}),Be&&a.createElement(a.Fragment,null,a.createElement(k.i,{options:Z,onOptionsChange:ee}),a.createElement("div",{className:Fe.sectionBottomPadding})))};var X=e(47293),te=e.n(X),se=e(52219),de=e(85445),re=e(80150),fe=e(33485),ie=e(12117),oe=e(43190),ue=e(92369),me=e(40715);function ge({value:ne,onChange:Z,onDelete:ee,disabled:ce}){const[be,Ee]=(0,a.useState)(!!ne.datasourceUid),Be=(0,g.l4)(),Le=Xe(Be);return a.createElement("div",{className:"gf-form-group"},a.createElement(E._,{label:"Internal link",labelWidth:mt,disabled:ce,tooltip:a.createElement(a.Fragment,null,"Enable this option if you have an internal link. When enabled, this reveals the data source selector. Select the backend tracing data store for your exemplar data. ",Ae()),interactive:!0,className:Le.switchField},a.createElement(a.Fragment,null,a.createElement(v.r,{value:be,"aria-label":ue.wl.components.DataSource.Prometheus.configPage.internalLinkSwitch,onChange:ze=>Ee(ze.currentTarget.checked)}))),be?a.createElement(E._,{label:"Data source",labelWidth:mt,tooltip:a.createElement(a.Fragment,null,"The data source the exemplar is going to navigate to. ",Ae()),disabled:ce,interactive:!0},a.createElement(me.q,{tracing:!0,current:ne.datasourceUid,noDefault:!0,width:40,onChange:ze=>Z({...ne,datasourceUid:ze.uid,url:void 0})})):a.createElement(E._,{label:"URL",labelWidth:mt,tooltip:a.createElement(a.Fragment,null,"The URL of the trace backend the user would go to see its trace. ",Ae()),disabled:ce,interactive:!0},a.createElement(s.I,{placeholder:"https://example.com/${__value.raw}",spellCheck:!1,width:40,value:ne.url,onChange:ze=>Z({...ne,datasourceUid:void 0,url:ze.currentTarget.value})})),a.createElement(E._,{label:"URL Label",labelWidth:mt,tooltip:a.createElement(a.Fragment,null,"Use to override the button label on the exemplar traceID field. ",Ae()),disabled:ce,interactive:!0},a.createElement(s.I,{placeholder:"Go to example.com",spellCheck:!1,width:40,value:ne.urlDisplayLabel,onChange:ze=>Z({...ne,urlDisplayLabel:ze.currentTarget.value})})),a.createElement(E._,{label:"Label name",labelWidth:mt,tooltip:a.createElement(a.Fragment,null,"The name of the field in the labels object that should be used to get the traceID. ",Ae()),disabled:ce,interactive:!0},a.createElement(s.I,{placeholder:"traceID",spellCheck:!1,width:40,value:ne.name,onChange:ze=>Z({...ne,name:ze.currentTarget.value})})),!ce&&a.createElement(E._,{label:"Remove exemplar link",labelWidth:mt,disabled:ce},a.createElement(F.zx,{variant:"destructive",title:"Remove exemplar link",icon:"times",onClick:ze=>{ze.preventDefault(),ee()}})))}function Ue({options:ne,onChange:Z,disabled:ee}){const ce=(0,g.l4)(),be=Xe(ce);return a.createElement("div",{className:be.sectionBottomPadding},a.createElement(d._,{title:"Exemplars",className:be.container},ne&&ne.map((Ee,Be)=>a.createElement(ge,{key:Be,value:Ee,onChange:Le=>{const ze=[...ne];ze.splice(Be,1,Le),Z(ze)},onDelete:()=>{const Le=[...ne];Le.splice(Be,1),Z(Le)},disabled:ee})),!ee&&a.createElement(F.zx,{variant:"secondary","aria-label":ue.wl.components.DataSource.Prometheus.configPage.exemplarsAddButton,className:(0,n.css)`
              margin-bottom: 10px;
            `,icon:"plus",onClick:Ee=>{Ee.preventDefault();const Be=[...ne||[],{name:"traceID"}];Z(Be)}},"Add"),ee&&!ne&&a.createElement("i",null,"No exemplars configurations")))}const De={Prometheus:[{value:void 0,label:"Please select"},{value:"2.0.0",label:"< 2.14.x"},{value:"2.14.0",label:"2.14.x"},{value:"2.15.0",label:"2.15.x"},{value:"2.16.0",label:"2.16.x"},{value:"2.17.0",label:"2.17.x"},{value:"2.18.0",label:"2.18.x"},{value:"2.19.0",label:"2.19.x"},{value:"2.20.0",label:"2.20.x"},{value:"2.21.0",label:"2.21.x"},{value:"2.22.0",label:"2.22.x"},{value:"2.23.0",label:"2.23.x"},{value:"2.24.0",label:"2.24.x"},{value:"2.25.0",label:"2.25.x"},{value:"2.26.0",label:"2.26.x"},{value:"2.27.0",label:"2.27.x"},{value:"2.28.0",label:"2.28.x"},{value:"2.29.0",label:"2.29.x"},{value:"2.30.0",label:"2.30.x"},{value:"2.31.0",label:"2.31.x"},{value:"2.32.0",label:"2.32.x"},{value:"2.33.0",label:"2.33.x"},{value:"2.34.0",label:"2.34.x"},{value:"2.35.0",label:"2.35.x"},{value:"2.36.0",label:"2.36.x"},{value:"2.37.0",label:"2.37.x"},{value:"2.38.0",label:"2.38.x"},{value:"2.39.0",label:"2.39.x"},{value:"2.40.0",label:"2.40.x"},{value:"2.41.0",label:"2.41.x"},{value:"2.42.0",label:"2.42.x"},{value:"2.43.0",label:"2.43.x"},{value:"2.44.0",label:"2.44.x"},{value:"2.45.0",label:"2.45.x"},{value:"2.46.0",label:"2.46.x"},{value:"2.47.0",label:"2.47.x"},{value:"2.48.0",label:"2.48.x"},{value:"2.49.0",label:"2.49.x"},{value:"2.50.0",label:"2.50.x"},{value:"2.50.1",label:"> 2.50.x"}],Mimir:[{value:void 0,label:"Please select"},{value:"2.0.0",label:"2.0.x"},{value:"2.1.0",label:"2.1.x"},{value:"2.2.0",label:"2.2.x"},{value:"2.3.0",label:"2.3.x"},{value:"2.4.0",label:"2.4.x"},{value:"2.5.0",label:"2.5.x"},{value:"2.6.0",label:"2.6.x"},{value:"2.7.0",label:"2.7.x"},{value:"2.8.0",label:"2.8.x"},{value:"2.9.0",label:"2.9.x"},{value:"2.9.1",label:"> 2.9.x"}],Thanos:[{value:void 0,label:"Please select"},{value:"0.0.0",label:"< 0.16.x"},{value:"0.16.0",label:"0.16.x"},{value:"0.17.0",label:"0.17.x"},{value:"0.18.0",label:"0.18.x"},{value:"0.19.0",label:"0.19.x"},{value:"0.20.0",label:"0.20.x"},{value:"0.21.0",label:"0.21.x"},{value:"0.22.0",label:"0.22.x"},{value:"0.23.0",label:"0.23.x"},{value:"0.24.0",label:"0.24.x"},{value:"0.25.0",label:"0.25.x"},{value:"0.26.0",label:"0.26.x"},{value:"0.27.0",label:"0.27.x"},{value:"0.28.0",label:"0.28.x"},{value:"0.29.0",label:"0.29.x"},{value:"0.30.0",label:"0.30.x"},{value:"0.31.0",label:"0.31.x"},{value:"0.31.1",label:"> 0.31.x"}],Cortex:[{value:void 0,label:"Please select"},{value:"0.0.0",label:"< 1.0.0"},{value:"1.0.0",label:"1.0.0"},{value:"1.1.0",label:"1.1.x"},{value:"1.2.0",label:"1.2.x"},{value:"1.3.0",label:"1.3.x"},{value:"1.4.0",label:"1.4.x"},{value:"1.5.0",label:"1.5.x"},{value:"1.6.0",label:"1.6.x"},{value:"1.7.0",label:"1.7.x"},{value:"1.8.0",label:"1.8.x"},{value:"1.9.0",label:"1.9.x"},{value:"1.10.0",label:"1.10.x"},{value:"1.11.0",label:"1.11.x"},{value:"1.13.0",label:"1.13.x"},{value:"1.14.0",label:"> 1.13.x"}]},Pe=[{value:"POST",label:"POST"},{value:"GET",label:"GET"}],ye=[{value:fe.c.Builder,label:"Builder"},{value:fe.c.Code,label:"Code"}],Te=[{value:oe.x3.Low,label:"Low"},{value:oe.x3.Medium,label:"Medium"},{value:oe.x3.High,label:"High"},{value:oe.x3.None,label:"None"}],nt=[{value:oe.T8.Prometheus,label:oe.T8.Prometheus},{value:oe.T8.Cortex,label:oe.T8.Cortex},{value:oe.T8.Mimir,label:oe.T8.Mimir},{value:oe.T8.Thanos,label:oe.T8.Thanos}],ct=/^$|^\d+(ms|[Mwdhmsy])$/,he=/(\d+)(.+)/,xe="Value is not valid, you can use number with time unit specifier: y, M, w, d, h, m, s",Me=(ne,Z)=>{if(!Z||!De[Z])return;const ce=De[Z]?.filter(Ee=>!!Ee.value&&te().lte(Ee.value,ne)).map(Ee=>Ee.value),be=ce[ce.length-1];if(be){const Ee=te().diff(be,ne);if(["patch","prepatch","prerelease",null].includes(Ee))return be}},He=ne=>{console.warn("Error fetching version from buildinfo API, must manually select version!",ne)},Ve=(ne,Z,ee)=>{ee(ne).then(ce=>{(0,de.i)().get(`/api/datasources/uid/${ce.uid}/resources/version-detect`).then(be=>{const Ee=be.data?.version??"";if(Ee&&te().valid(Ee)){const Be=Me(Ee,ce.jsonData.prometheusType);Be&&ee({...ce,jsonData:{...ce.jsonData,prometheusVersion:Be}}).then(Le=>{Z(Le)})}else He()})}).catch(ce=>{He(ce)})},Oe=ne=>{const{options:Z,onOptionsChange:ee}=ne,ce=(0,re.qj)();Z.jsonData.httpMethod||(Z.jsonData.httpMethod="POST");const be=(0,g.l4)(),Ee=Xe(be),[Be,Le]=(0,a.useState)({timeInterval:"",queryTimeout:"",incrementalQueryOverlapWindow:""});return a.createElement(a.Fragment,null,a.createElement(d._,{title:"Interval behaviour",className:Ee.container},a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(E._,{label:"Scrape interval",labelWidth:mt,tooltip:a.createElement(a.Fragment,null,"This interval is how frequently Prometheus scrapes targets. Set this to the typical scrape and evaluation interval configured in your Prometheus config file. If you set this to a greater value than your Prometheus config file interval, Grafana will evaluate the data according to this interval and you will see less data points. Defaults to 15s. ",Ae()),interactive:!0,disabled:Z.readOnly},a.createElement(a.Fragment,null,a.createElement(s.I,{className:"width-20",value:Z.jsonData.timeInterval,spellCheck:!1,placeholder:"15s",onChange:_e("timeInterval",Z,ee),onBlur:ze=>Le({...Be,timeInterval:ze.currentTarget.value})}),Ke(Be.timeInterval,ct,xe))))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(E._,{label:"Query timeout",labelWidth:mt,tooltip:a.createElement(a.Fragment,null,"Set the Prometheus query timeout. ",Ae()),interactive:!0,disabled:Z.readOnly},a.createElement(a.Fragment,null,a.createElement(s.I,{className:"width-20",value:Z.jsonData.queryTimeout,onChange:_e("queryTimeout",Z,ee),spellCheck:!1,placeholder:"60s",onBlur:ze=>Le({...Be,queryTimeout:ze.currentTarget.value})}),Ke(Be.queryTimeout,ct,xe))))))),a.createElement(d._,{title:"Query editor",className:Ee.container},a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement(E._,{label:"Default editor",labelWidth:mt,tooltip:a.createElement(a.Fragment,null,"Set default editor option for all users of this data source. ",Ae()),interactive:!0,disabled:Z.readOnly},a.createElement(N.Ph,{"aria-label":"Default Editor (Code or Builder)",options:ye,value:ye.find(ze=>ze.value===Z.jsonData.defaultEditor)??ye.find(ze=>ze.value===fe.c.Builder),onChange:_e("defaultEditor",Z,ee),width:40}))),a.createElement("div",{className:"gf-form"},a.createElement(E._,{labelWidth:mt,label:"Disable metrics lookup",tooltip:a.createElement(a.Fragment,null,"Checking this option will disable the metrics chooser and metric/label support in the query field's autocomplete. This helps if you have performance issues with bigger Prometheus instances."," ",Ae()),interactive:!0,disabled:Z.readOnly,className:Ee.switchField},a.createElement(v.r,{value:Z.jsonData.disableMetricsLookup??!1,onChange:(0,se.hz)(ne,"disableMetricsLookup")}))))),a.createElement(d._,{title:"Performance",className:Ee.container},!Z.jsonData.prometheusType&&!Z.jsonData.prometheusVersion&&Z.readOnly&&a.createElement("div",{className:Ee.versionMargin},"For more information on configuring prometheus type and version in data sources, see the"," ",a.createElement("a",{className:Ee.textUnderline,href:"https://grafana.com/docs/grafana/latest/administration/provisioning/"},"provisioning documentation"),"."),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(E._,{label:"Prometheus type",labelWidth:mt,tooltip:a.createElement(a.Fragment,null,"Set this to the type of your prometheus database, e.g. Prometheus, Cortex, Mimir or Thanos. Changing this field will save your current settings, and attempt to detect the version. Certain types of Prometheus supports or does not support various APIs. For example, some types support regex matching for label queries to improve performance. Some types have an API for metadata. If you set this incorrectly you may experience odd behavior when querying metrics and labels. Please check your Prometheus documentation to ensure you enter the correct type. ",Ae()),interactive:!0,disabled:Z.readOnly},a.createElement(N.Ph,{"aria-label":"Prometheus type",options:nt,value:nt.find(ze=>ze.value===Z.jsonData.prometheusType),onChange:_e("prometheusType",{...Z,jsonData:{...Z.jsonData,prometheusVersion:void 0}},ze=>(Ve(ze,ee,ce),ee({...ze,jsonData:{...ze.jsonData,prometheusVersion:void 0}}))),width:40})))),a.createElement("div",{className:"gf-form-inline"},Z.jsonData.prometheusType&&a.createElement("div",{className:"gf-form"},a.createElement(E._,{label:`${Z.jsonData.prometheusType} version`,labelWidth:mt,tooltip:a.createElement(a.Fragment,null,"Use this to set the version of your ",Z.jsonData.prometheusType," instance if it is not automatically configured. ",Ae()),interactive:!0,disabled:Z.readOnly},a.createElement(N.Ph,{"aria-label":`${Z.jsonData.prometheusType} type`,options:De[Z.jsonData.prometheusType],value:De[Z.jsonData.prometheusType]?.find(ze=>ze.value===Z.jsonData.prometheusVersion),onChange:_e("prometheusVersion",Z,ee),width:40})))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form max-width-30"},a.createElement(E._,{label:"Cache level",labelWidth:mt,tooltip:a.createElement(a.Fragment,null,"Sets the browser caching level for editor queries. Higher cache settings are recommended for high cardinality data sources."),interactive:!0,disabled:Z.readOnly},a.createElement(N.Ph,{width:40,onChange:_e("cacheLevel",Z,ee),options:Te,value:Te.find(ze=>ze.value===Z.jsonData.cacheLevel)??oe.x3.Low})))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form max-width-30"},a.createElement(E._,{label:"Incremental querying (beta)",labelWidth:mt,tooltip:a.createElement(a.Fragment,null,"This feature will change the default behavior of relative queries to always request fresh data from the prometheus instance, instead query results will be cached, and only new records are requested. Turn this on to decrease database and network load."),interactive:!0,className:Ee.switchField,disabled:Z.readOnly},a.createElement(v.r,{value:Z.jsonData.incrementalQuerying??!1,onChange:(0,se.hz)(ne,"incrementalQuerying")})))),a.createElement("div",{className:"gf-form-inline"},Z.jsonData.incrementalQuerying&&a.createElement(E._,{label:"Query overlap window",labelWidth:mt,tooltip:a.createElement(a.Fragment,null,"Set a duration like 10m or 120s or 0s. Default of 10 minutes. This duration will be added to the duration of each incremental request."),interactive:!0,disabled:Z.readOnly},a.createElement(a.Fragment,null,a.createElement(s.I,{onBlur:ze=>Le({...Be,incrementalQueryOverlapWindow:ze.currentTarget.value}),className:"width-20",value:Z.jsonData.incrementalQueryOverlapWindow??ie.Ji,onChange:_e("incrementalQueryOverlapWindow",Z,ee),spellCheck:!1}),Ke(Be.incrementalQueryOverlapWindow,he,xe)))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form max-width-30"},a.createElement(E._,{label:"Disable recording rules (beta)",labelWidth:mt,tooltip:a.createElement(a.Fragment,null,"This feature will disable recording rules. Turn this on to improve dashboard performance"),interactive:!0,className:Ee.switchField,disabled:Z.readOnly},a.createElement(v.r,{value:Z.jsonData.disableRecordingRules??!1,onChange:(0,se.hz)(ne,"disableRecordingRules")})))))),a.createElement(d._,{title:"Other",className:Ee.container},a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form max-width-30"},a.createElement(E._,{label:"Custom query parameters",labelWidth:mt,tooltip:a.createElement(a.Fragment,null,"Add custom parameters to the Prometheus query URL. For example timeout, partial_response, dedup, or max_source_resolution. Multiple parameters should be concatenated together with an \u2018&\u2019. ",Ae()),interactive:!0,disabled:Z.readOnly},a.createElement(s.I,{className:"width-20",value:Z.jsonData.customQueryParameters,onChange:_e("customQueryParameters",Z,ee),spellCheck:!1,placeholder:"Example: max_source_resolution=5m&timeout=10"})))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(E._,{labelWidth:mt,tooltip:a.createElement(a.Fragment,null,"You can use either POST or GET HTTP method to query your Prometheus data source. POST is the recommended method as it allows bigger queries. Change this to GET if you have a Prometheus version older than 2.1 or if POST requests are restricted in your network. ",Ae()),interactive:!0,label:"HTTP method",disabled:Z.readOnly},a.createElement(N.Ph,{width:40,"aria-label":"Select HTTP method",options:Pe,value:Pe.find(ze=>ze.value===Z.jsonData.httpMethod),onChange:_e("httpMethod",Z,ee)})))))),a.createElement(Ue,{options:Z.jsonData.exemplarTraceIdDestinations,onChange:ze=>(0,se.tp)({onOptionsChange:ee,options:Z},"exemplarTraceIdDestinations",ze),disabled:Z.readOnly}))},Ne=ne=>ne?"currentTarget"in ne?ne.currentTarget.value:ne.value:"",_e=(ne,Z,ee)=>ce=>{ee({...Z,jsonData:{...Z.jsonData,[ne]:Ne(ce)}})};var qe=e(6089);const rt=({config:ne,onChange:Z,className:ee})=>{const ce=Be=>{Z({...ne,jsonData:{...ne.jsonData,keepCookies:Be}})},be=Be=>{Z({...ne,jsonData:{...ne.jsonData,timeout:parseInt(Be.currentTarget.value,10)}})},Ee={container:(0,n.css)({maxWidth:578})};return a.createElement(a.Fragment,null,a.createElement(d._,{title:"Advanced HTTP settings",className:(0,n.cx)(Ee.container,ee)},a.createElement(E._,{htmlFor:"advanced-http-cookies",label:"Allowed cookies",labelWidth:mt,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source.",disabled:ne.readOnly,grow:!0},a.createElement(qe.B,{className:"width-20",id:"advanced-http-cookies",placeholder:"New cookie (hit enter to add)",tags:ne.jsonData.keepCookies,onChange:ce})),a.createElement(E._,{htmlFor:"advanced-http-timeout",label:"Timeout",labelWidth:mt,tooltip:"HTTP request timeout in seconds",disabled:ne.readOnly,grow:!0},a.createElement(s.I,{className:"width-20",id:"advanced-http-timeout",type:"number",min:0,placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:ne.jsonData.timeout,onChange:be}))))},mt=30,Je=ne=>{const{options:Z,onOptionsChange:ee}=ne,ce=c.config.featureToggles.prometheusConfigOverhaulAuth,be=(0,a.useRef)(ne.options.access==="direct"),Ee={azureAuthSupported:c.config.azureAuthEnabled,getAzureAuthEnabled:ze=>T(ze),setAzureAuthEnabled:(ze,Fe)=>Fe?I(ze):L(ze),azureSettingsUI:V},Be=(0,g.l4)(),Le=Xe(Be);return a.createElement(a.Fragment,null,Z.access==="direct"&&a.createElement(u.b,{title:"Error",severity:"error"},"Browser access mode in the Prometheus data source is no longer available. Switch to server access mode."),ce?a.createElement(a.Fragment,null,a.createElement(r.j,{dataSourceName:"Prometheus",docsLink:"https://grafana.com/docs/grafana/latest/datasources/prometheus/configure-prometheus-data-source/"}),a.createElement("hr",{className:`${Le.hrTopSpace} ${Le.hrBottomSpace}`}),a.createElement(q,{options:Z,onOptionsChange:ee,azureAuthSettings:Ee,sigV4AuthToggleEnabled:c.config.sigV4AuthEnabled,renderSigV4Editor:a.createElement(o.IW,{inExperimentalAuthComponent:!0,...ne}),secureSocksDSProxyEnabled:c.config.secureSocksDSProxyEnabled})):a.createElement(l.E,{defaultUrl:"http://localhost:9090",dataSourceConfig:Z,showAccessOptions:be.current,onChange:ee,sigV4AuthToggleEnabled:c.config.sigV4AuthEnabled,azureAuthSettings:Ee,renderSigV4Editor:a.createElement(o.IW,{...ne}),secureSocksDSProxyEnabled:c.config.secureSocksDSProxyEnabled,urlLabel:"Prometheus server URL",urlDocs:Ae()}),ce?a.createElement(a.Fragment,null,a.createElement("hr",null),a.createElement(i.K,{className:Le.advancedSettings,title:"Advanced settings",description:"Additional settings are optional settings that can be configured for more control over your data source."},a.createElement(rt,{className:Le.advancedHTTPSettingsMargin,config:Z,onChange:ee}),a.createElement(h,{options:Z,onOptionsChange:ee}),a.createElement(Oe,{options:Z,onOptionsChange:ee}))):a.createElement(a.Fragment,null,a.createElement("hr",{className:Le.hrTopSpace}),a.createElement("h3",{className:Le.sectionHeaderPadding},"Additional settings"),a.createElement("p",{className:`${Le.secondaryGrey} ${Le.subsectionText}`},"Additional settings are optional settings that can be configured for more control over your data source."),a.createElement(h,{options:Z,onOptionsChange:ee}),a.createElement(Oe,{options:Z,onOptionsChange:ee})))};function Ae(ne){const Z="https://grafana.com/docs/grafana/latest/datasources/prometheus/#configure-the-data-source";return a.createElement("a",{href:ne||Z,target:"_blank",rel:"noopener noreferrer"},"Visit docs for more details here.")}const Ke=(ne,Z,ee)=>{const ce="Value is not valid";return ne&&!ne.match(Z)?a.createElement(m.S,null,ee||ce):!0};function Xe(ne){return{additionalSettings:(0,n.css)`
      margin-bottom: 25px;
    `,secondaryGrey:(0,n.css)`
      color: ${ne.colors.secondary.text};
      opacity: 65%;
    `,inlineError:(0,n.css)`
      margin: 0px 0px 4px 245px;
    `,switchField:(0,n.css)`
      align-items: center;
    `,sectionHeaderPadding:(0,n.css)`
      padding-top: 32px;
    `,sectionBottomPadding:(0,n.css)`
      padding-bottom: 28px;
    `,subsectionText:(0,n.css)`
      font-size: 12px;
    `,hrBottomSpace:(0,n.css)`
      margin-bottom: 56px;
    `,hrTopSpace:(0,n.css)`
      margin-top: 50px;
    `,textUnderline:(0,n.css)`
      text-decoration: underline;
    `,versionMargin:(0,n.css)`
      margin-bottom: 12px;
    `,advancedHTTPSettingsMargin:(0,n.css)`
      margin: 24px 0 8px 0;
    `,advancedSettings:(0,n.css)`
      padding-top: 32px;
    `,alertingTop:(0,n.css)`
      margin-top: 40px !important;
    `,overhaulPageHeading:(0,n.css)`
      font-weight: 400;
    `,container:(0,n.css)`
      maxwidth: 578;
    `}}},63779:(G,A,e)=>{"use strict";e.d(A,{QG:()=>Oe,vQ:()=>Ne});var n=e(56375),a=e(9360),o=e(81838),r=e(98231),i=e(42958),g=e(47293),u=e.n(g),l=e(71244),m=e(70313),c=e(9833),d=e(85745),f=e(81223),E=e(32063),v=e(12399),h=e(43071),p=e(85445),s=e(51811),y=e(85960),C=e(23270),b=e(82564),S=e(73688),D=e(98181),M=e(44294),T=e(15910),R=e(24956),O=e(68513);function x(Je){const Ae=Je.annotation,Ke=Je.onAnnotationChange,Xe={expr:Ae.expr,refId:Ae.name,interval:Ae.step};return y.createElement(y.Fragment,null,y.createElement(C._,null,y.createElement(O.j,{...Je,query:Xe,showExplain:!1,onChange:ne=>{Ke({...Ae,expr:ne.expr})}}),y.createElement(b.p,null,y.createElement(S.S,{label:"Min step",tooltip:y.createElement(y.Fragment,null,"An additional lower limit for the step parameter of the Prometheus query and for the"," ",y.createElement("code",null,"$__interval")," and ",y.createElement("code",null,"$__rate_interval")," variables.")},y.createElement(T.H,{type:"text","aria-label":"Set lower limit for the step parameter",placeholder:"auto",minWidth:10,onCommitChange:ne=>{Ke({...Ae,step:ne.currentTarget.value})},defaultValue:Xe.interval})))),y.createElement(D.T,{v:.5}),y.createElement(b.p,null,y.createElement(S.S,{label:"Title",tooltip:"Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance."},y.createElement(R.I,{type:"text",placeholder:"{{alertname}}",value:Ae.titleFormat,onChange:ne=>{Ke({...Ae,titleFormat:ne.currentTarget.value})}})),y.createElement(S.S,{label:"Tags"},y.createElement(R.I,{type:"text",placeholder:"label1,label2",value:Ae.tagKeys,onChange:ne=>{Ke({...Ae,tagKeys:ne.currentTarget.value})}})),y.createElement(S.S,{label:"Text",tooltip:"Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance."},y.createElement(R.I,{type:"text",placeholder:"{{instance}}",value:Ae.textFormat,onChange:ne=>{Ke({...Ae,textFormat:ne.currentTarget.value})}})),y.createElement(S.S,{label:"Series value as timestamp",tooltip:"The unit of timestamp is milliseconds. If the unit of the series value is seconds, multiply its range vector by 1000."},y.createElement(M.r,{value:Ae.useValueForTime,onChange:ne=>{Ke({...Ae,useValueForTime:ne.currentTarget.value})}}))))}var I=e(27170),L=e(64065),P=e(77530),N=e(98100),F=e(43190);const U=/^label_names\(\)\s*$/,j=/^label_values\((?:(.+),\s*)?([a-zA-Z_$][a-zA-Z0-9_]*)\)\s*$/,V=/^metrics\((.+)\)\s*$/,_=/^query_result\((.+)\)\s*$/,H=/^label_names\((.+)\)\s*$/;function z(Je){if(typeof Je!="string")return Je;const Ae={refId:"PrometheusDatasource-VariableQuery",qryType:F.jo.LabelNames},Ke=Je.match(H);if(Ke)return{...Ae,qryType:F.jo.LabelNames,match:Ke[1]};const Xe=Je.match(U);if(Xe)return{...Ae,qryType:F.jo.LabelNames};const ne=Je.match(/^label_values\(/);if(ne){const ce=Je.match(j),be=ce?ce[2]:"",Ee=ce?ce[1]:"";if(Ee){const Be=(0,N._)(Ee);return{...Ae,qryType:F.jo.LabelValues,label:be,metric:Be.query.metric,labelFilters:Be.query.labels}}else return{...Ae,qryType:F.jo.LabelValues,label:be}}const Z=Je.match(/^metrics\(/);if(Z){const ce=Je.match(V),be=ce?ce[1]:"";return{...Ae,qryType:F.jo.MetricNames,metric:be}}const ee=Je.match(/^query_result\(/);if(ee){const ce=Je.match(_),be=ce?ce[1]:"";return{...Ae,qryType:F.jo.VarQueryResult,varQuery:be}}return!Xe&&!ne&&!Z&&!ee?{...Ae,qryType:F.jo.SeriesQuery,seriesQuery:Je}:Ae}function K(Je){switch(Je.qryType){case F.jo.LabelNames:return Je.match?`label_names(${Je.match})`:"label_names()";case F.jo.LabelValues:if(Je.metric||Je.labelFilters&&Je.labelFilters.length!==0){const Ke={metric:Je.metric,labels:Je.labelFilters??[],operations:[]};return`label_values(${P.Z.renderQuery(Ke)},${Je.label})`}else return`label_values(${Je.label})`;case F.jo.MetricNames:return`metrics(${Je.metric})`;case F.jo.VarQueryResult:return`query_result(${Y(Je.varQuery)})`;case F.jo.SeriesQuery:return Je.seriesQuery??"";case F.jo.ClassicQuery:return Je.classicQuery??""}return""}function Y(Je){return Je?Je.replace(/[\r\n]+/gm,""):""}class k{constructor(Ae,Ke){this.datasource=Ae,this.query=Ke,this.datasource=Ae,this.query=Ke,this.range=(0,c.JK)()}process(Ae){this.range=Ae;const Ke=U,Xe=H,ne=/^label_values\((?:(.+),\s*)?([a-zA-Z_][a-zA-Z0-9_]*)\)\s*$/,Z=V,ee=_,ce=this.query.match(Ke),be=this.query.match(Xe);if(be){const Fe=`{__name__=~".*${be[1]}.*"}`;return this.datasource.languageProvider.getSeriesLabels(Fe,[]).then($e=>$e.map(et=>({text:et})))}if(ce)return this.datasource.getTagKeys({filters:[],timeRange:Ae});const Ee=this.query.match(ne);if(Ee){const Fe=Ee[1],$e=Ee[2];return q(Fe)?this.labelValuesQuery($e,Fe):this.labelValuesQuery($e)}const Be=this.query.match(Z);if(Be)return this.metricNameQuery(Be[1]);const Le=this.query.match(ee);return Le?this.queryResultQuery(Le[1]):["label_values()","metrics()","query_result()"].includes(this.query)?Promise.resolve([]):this.metricNameAndLabelsQuery(this.query)}labelValuesQuery(Ae,Ke){const Xe=(0,L.jj)(this.range.from,!1),ne=(0,L.jj)(this.range.to,!0),Z={...Ke&&{"match[]":Ke},start:Xe.toString(),end:ne.toString()};if(!Ke||this.datasource.hasLabelsMatchAPISupport()){const ee=`/api/v1/label/${Ae}/values`;return this.datasource.metadataRequest(ee,Z).then(ce=>(0,n.map)(ce.data.data,be=>({text:be})))}else{const ee="/api/v1/series";return this.datasource.metadataRequest(ee,Z).then(ce=>{const be=(0,n.map)(ce.data.data,Ee=>Ee[Ae]||"").filter(Ee=>Ee!=="");return(0,n.uniq)(be).map(Ee=>({text:Ee,expandable:!0}))})}}metricNameQuery(Ae){const Ke=(0,L.jj)(this.range.from,!1),Xe=(0,L.jj)(this.range.to,!0),ne={start:Ke.toString(),end:Xe.toString()},Z="/api/v1/label/__name__/values";return this.datasource.metadataRequest(Z,ne).then(ee=>(0,n.chain)(ee.data.data).filter(ce=>new RegExp(Ae).test(ce)).map(ce=>({text:ce,expandable:!0})).value())}queryResultQuery(Ae){const Ke="/api/v1/query",Xe={query:Ae};return this.datasource.metadataRequest(Ke,Xe).then(ne=>{switch(ne.data.data.resultType){case"scalar":case"string":return[{text:ne.data.data.result[1]||"",expandable:!1}];case"vector":return(0,n.map)(ne.data.data.result,Z=>{let ee=Z.metric.__name__||"";return delete Z.metric.__name__,ee+="{"+(0,n.map)(Z.metric,(ce,be)=>be+'="'+ce+'"').join(",")+"}",ee+=" "+Z.value[1]+" "+Z.value[0]*1e3,{text:ee,expandable:!0}});default:throw Error(`Unknown/Unhandled result type: [${ne.data.data.resultType}]`)}})}metricNameAndLabelsQuery(Ae){const Ke=(0,L.jj)(this.range.from,!1),Xe=(0,L.jj)(this.range.to,!0),ne={"match[]":Ae,start:Ke.toString(),end:Xe.toString()},Z="/api/v1/series",ee=this;return this.datasource.metadataRequest(Z,ne).then(ce=>(0,n.map)(ce.data.data,be=>({text:ee.datasource.getOriginalMetricName(be),expandable:!0})))}}function q(Je){return Je&&Je.split(" ").join("")!=="{}"}const X=20;function te(Je,Ae,Ke){const Xe=[];if(Je.trim().match(/^\w+_bucket$|^\w+_bucket{.*}$/)){const Z="Selected metric has buckets.";Xe.push({type:"HISTOGRAM_QUANTILE",label:Z,fix:{label:"Consider calculating aggregated quantile by adding histogram_quantile().",action:{type:"ADD_HISTOGRAM_QUANTILE",query:Je}}})}if(Je.indexOf("rate(")===-1&&Je.indexOf("increase(")===-1){const Z=Je.match(new RegExp("\\b((?<!:)\\w+_(total|sum|count)(?!:))\\b"));let ee=Z?Z[1]:"";const ce=Ke?.languageProvider?.metricsMetadata;let be=!1;if(ce&&(ee=Array.from(Je.matchAll(/\$?[a-zA-Z_:][a-zA-Z0-9_:]*/g)).map(([Be])=>Be).filter(Be=>!Be.startsWith("$")).flatMap(Be=>Be.split(":")).find(Be=>{const Le=ce[Be];return Le&&Le.type.toLowerCase()==="counter"?(be=!0,!0):!1})??""),ee){const Ee=Je.trim().match(/^\w+$|^\w+{.*}$/);let Le=`Selected metric ${be?"is":"looks like"} a counter.`,ze;Ee?ze={label:"Consider calculating rate of counter by adding rate().",action:{type:"ADD_RATE",query:Je}}:Le=`${Le} Consider calculating rate of counter by adding rate().`,Xe.push({type:"APPLY_RATE",label:Le,fix:ze})}}if(Ke&&Ke.ruleMappings){const Z=Ke.ruleMappings,ee=Object.keys(Z).reduce((ce,be)=>Je.search(be)>-1?{...ce,[be]:Z[be]}:ce,{});if((0,n.size)(ee)>0){const ce="Query contains recording rules.";Xe.push({type:"EXPAND_RULES",label:ce,fix:{label:"Expand rules",action:{type:"EXPAND_RULES",query:Je,options:ee}}})}}return Ae&&Ae.length>=X&&Je.trim().match(/^\w+$/)&&Xe.push({type:"ADD_SUM",label:"Many time series results returned.",fix:{label:"Consider aggregating with sum().",action:{type:"ADD_SUM",query:Je,preventSubmit:!0}}}),Xe}function se(Je){const Ae=[];return Je.lookupsDisabled&&Ae.push({label:"Labels and metrics lookup was disabled in data source settings.",type:"INFO"}),Ae}var de=e(12117),re=e(63764),fe=e(43183),ie=e(90857);function oe(Je,Ae,Ke){const{app:Xe,targets:ne}=Ae;if(!(Xe===f.zj.Dashboard||Xe===f.zj.PanelViewer))for(const Z of ne)(0,fe.ff)("grafana_prometheus_query_executed",{app:Xe,grafana_version:ie.config.buildInfo.version,has_data:Je.data.some(ee=>ee.length>0),has_error:Je.error!==void 0,expr:Z.expr,format:Z.format,instant:Z.instant,range:Z.range,exemplar:Z.exemplar,hinting:Z.hinting,interval:Z.interval,intervalFactor:Z.intervalFactor,utcOffsetSec:Z.utcOffsetSec,legend:Z.legendFormat,valueWithRefId:Z.valueWithRefId,requestId:Ae.requestId,showingGraph:Z.showingGraph,showingTable:Z.showingTable,editor_mode:Z.editorMode,simultaneously_sent_query_count:ne.length,time_range_from:Ae?.range?.from?.toISOString(),time_range_to:Ae?.range?.to?.toISOString(),time_taken:Date.now()-Ke.getTime()})}var ue=e(21964),me=e(16226),ge=e(23361),Ue=e(81368),De=e(84933),Pe=e(27436),ye=e(7073),Te=e(62254);const nt=[{label:"Label names",value:F.jo.LabelNames},{label:"Label values",value:F.jo.LabelValues},{label:"Metrics",value:F.jo.MetricNames},{label:"Query result",value:F.jo.VarQueryResult},{label:"Series query",value:F.jo.SeriesQuery},{label:"Classic query",value:F.jo.ClassicQuery}],ct="PrometheusVariableQueryEditor-VariableQuery",he=({onChange:Je,query:Ae,datasource:Ke,range:Xe})=>{const[ne,Z]=(0,y.useState)(void 0),[ee,ce]=(0,y.useState)(""),[be,Ee]=(0,y.useState)(""),[Be,Le]=(0,y.useState)(""),[ze,Fe]=(0,y.useState)(""),[$e,et]=(0,y.useState)(""),[tt,it]=(0,y.useState)(""),[vt,yt]=(0,y.useState)([]),[Wt,ut]=(0,y.useState)([]);(0,y.useEffect)(()=>{Ke.languageProvider.start(Xe)},[Ke.languageProvider,Xe]),(0,y.useEffect)(()=>{if(Ae)if(Ae.qryType===F.jo.ClassicQuery)Z(Ae.qryType),it(Ae.query??"");else{const qt=xe(Ae);Ee(qt.match??""),Z(qt.qryType),ce(qt.label??""),Le(qt.metric??""),ut(qt.labelFilters??[]),Fe(qt.varQuery??""),et(qt.seriesQuery??""),it(qt.classicQuery??"")}},[Ae]),(0,y.useEffect)(()=>{if(ne!==F.jo.LabelValues)return;const qt=Ke.getVariables().map(On=>({label:On,value:On}));if(!Be)Ke.getTagKeys({filters:[]}).then(On=>{const wn=On.map(({text:Zn})=>({label:Zn,value:Zn}));yt([...qt,...wn])});else{const On=[{label:"__name__",op:"=",value:Be}],wn=P.Z.renderLabels(On);Ke.hasLabelsMatchAPISupport()?Ke.languageProvider.fetchSeriesLabelsMatch(wn).then(Zn=>{const Ea=Object.keys(Zn).map(Nt=>({label:Nt,value:Nt}));yt([...qt,...Ea])}):Ke.languageProvider.fetchSeriesLabels(wn).then(Zn=>{const Ea=Object.keys(Zn).map(Nt=>({label:Nt,value:Nt}));yt([...qt,...Ea])})}},[Ke,ne,Be]);const pt=(qt,On)=>{const Aa={...{qryType:ne,label:ee,metric:Be,match:be,varQuery:ze,seriesQuery:$e,classicQuery:tt,refId:"PrometheusVariableQueryEditor-VariableQuery"},...qt,...On?{labelFilters:On}:{labelFilters:Wt}},Ea=K(Aa);Je({query:Ea,qryType:Aa.qryType,refId:ct})},we=qt=>{Z(qt.value),qt.value!==F.jo.SeriesQuery&&pt({qryType:qt.value??0})},lt=qt=>{const On=qt&&qt.value?qt.value:"";ce(On),ne===F.jo.LabelValues&&On&&pt({label:On})},Bt=qt=>{Le(qt.metric),ut(qt.labels);const On=qt.metric,wn=qt.labels??[];ne===F.jo.LabelValues&&ee&&(On||wn)&&pt({qryType:ne,metric:On},wn)},Kt=qt=>{ne===F.jo.LabelNames&&pt({qryType:ne,match:qt})},It=qt=>{ne===F.jo.MetricNames&&qt&&pt({metric:qt})},Zt=qt=>{Fe(qt.currentTarget.value)},yn=qt=>{et(qt.currentTarget.value)},xn=qt=>{it(qt.currentTarget.value)},An=(0,y.useCallback)(()=>({metric:Be,labels:Wt,operations:[]}),[Be,Wt]);return y.createElement(y.Fragment,null,y.createElement(Ue.Z,null,y.createElement(De._,{label:"Query type",labelWidth:20,tooltip:y.createElement("div",null,"The Prometheus data source plugin provides the following query types for template variables.")},y.createElement(Pe.Ph,{placeholder:"Select query type","aria-label":"Query type",onChange:we,value:ne,options:nt,width:25}))),ne===F.jo.LabelValues&&y.createElement(y.Fragment,null,y.createElement(Ue.Z,null,y.createElement(De._,{label:"Label",labelWidth:20,required:!0,"aria-labelledby":"label-select",tooltip:y.createElement("div",null,"Returns a list of label values for the label name in all metrics unless the metric is specified.")},y.createElement(Pe.Ph,{"aria-label":"label-select",onChange:lt,value:ee,options:vt,width:25,allowCustomValue:!0,isClearable:!0}))),y.createElement(Te.U,{query:An(),datasource:Ke,onChange:Bt,variableEditor:!0})),ne===F.jo.LabelNames&&y.createElement(Ue.Z,null,y.createElement(De._,{label:"Metric regex",labelWidth:20,"aria-labelledby":"Metric regex",tooltip:y.createElement("div",null,"Returns a list of label names, optionally filtering by specified metric regex.")},y.createElement(R.I,{type:"text","aria-label":"Metric regex",placeholder:"Metric regex",value:be,onBlur:qt=>{Ee(qt.currentTarget.value),Kt(qt.currentTarget.value)},onChange:qt=>{Ee(qt.currentTarget.value)},width:25}))),ne===F.jo.MetricNames&&y.createElement(Ue.Z,null,y.createElement(De._,{label:"Metric regex",labelWidth:20,"aria-labelledby":"Metric selector",tooltip:y.createElement("div",null,"Returns a list of metrics matching the specified metric regex.")},y.createElement(R.I,{type:"text","aria-label":"Metric selector",placeholder:"Metric regex",value:Be,onChange:qt=>{Le(qt.currentTarget.value)},onBlur:qt=>{Le(qt.currentTarget.value),It(qt.currentTarget.value)},width:25}))),ne===F.jo.VarQueryResult&&y.createElement(Ue.Z,null,y.createElement(De._,{label:"Query",labelWidth:20,tooltip:y.createElement("div",null,"Returns a list of Prometheus query results for the query. This can include Prometheus functions, i.e. sum(go_goroutines).")},y.createElement(ye.K,{type:"text","aria-label":"Prometheus Query",placeholder:"Prometheus Query",value:ze,onChange:Zt,onBlur:()=>{ne===F.jo.VarQueryResult&&ze&&pt({qryType:ne})},cols:100}))),ne===F.jo.SeriesQuery&&y.createElement(Ue.Z,null,y.createElement(De._,{label:"Series Query",labelWidth:20,tooltip:y.createElement("div",null,'Enter enter a metric with labels, only a metric or only labels, i.e. go_goroutines{instance="localhost:9090"}, go_goroutines, or {instance="localhost:9090"}. Returns a list of time series associated with the entered data.')},y.createElement(R.I,{type:"text","aria-label":"Series Query",placeholder:"Series Query",value:$e,onChange:yn,onBlur:()=>{ne===F.jo.SeriesQuery&&$e&&pt({qryType:ne})},width:100}))),ne===F.jo.ClassicQuery&&y.createElement(Ue.Z,null,y.createElement(De._,{label:"Classic Query",labelWidth:20,tooltip:y.createElement("div",null,"The original implemetation of the Prometheus variable query editor. Enter a string with the correct query type and parameters as described in these docs. For example, label_values(label, metric).")},y.createElement(R.I,{type:"text","aria-label":"Classic Query",placeholder:"Classic Query",value:tt,onChange:xn,onBlur:()=>{ne===F.jo.ClassicQuery&&tt&&pt({qryType:ne})},width:100}))))};function xe(Je){return typeof Je=="string"?z(Je):Je.query?z(Je.query):Je}class Me extends ge.Mg{constructor(Ae,Ke=(0,v.J)()){super(),this.datasource=Ae,this.templateSrv=Ke,this.editor=he}query(Ae){let Ke;if(typeof Ae.targets[0]=="string"?Ke=Ae.targets[0]:Ke=Ae.targets[0].query,!Ke)return(0,ue.of)({data:[]});const Xe={...Ae.scopedVars,__interval:{text:this.datasource.interval,value:this.datasource.interval},__interval_ms:{text:l.intervalToMs(this.datasource.interval),value:l.intervalToMs(this.datasource.interval)},...this.datasource.getRangeScopedVars(Ae.range)},ne=this.templateSrv.replace(Ke,Xe,this.datasource.interpolateQueryExpr),Z=new k(this.datasource,ne);return(0,me.D)(Z.process(Ae.range)).pipe((0,r.U)(ce=>({data:ce})))}}const He="60s",Ve=["api/v1/query","api/v1/query_range","api/v1/series","api/v1/labels"],Oe="-Instant";class Ne extends E.CK{constructor(Ae,Ke=(0,v.J)(),Xe){super(Ae),this.templateSrv=Ke,this.init=async()=>{this.disableRecordingRules||this.loadRules(),this.exemplarsAvailable=await this.areExemplarsAvailable()},this.processAnnotationResponse=(ne,Z)=>{const ee=(0,h.z1)({data:Z}).data;if(!ee||!ee.length)return[];const ce=ne.annotation,{tagKeys:be="",titleFormat:Ee="",textFormat:Be=""}=ce,Le=l.intervalToSeconds(ce.step||He)*1e3,ze=be.split(","),Fe=[];for(const $e of ee){if($e.fields.length===0)continue;const et=$e.fields[0],tt=$e.fields[1],it=tt?.labels||{},vt=Object.keys(it).filter(lt=>ze.includes(lt)).map(lt=>it[lt]),yt=[];let Wt=0;tt.values.forEach(lt=>{let Bt,Kt;const It=et.values[Wt];ne.annotation.useValueForTime?(Bt=Math.floor(parseFloat(lt)),Kt=1):(Bt=Math.floor(parseFloat(It)),Kt=parseFloat(lt)),Wt++,yt.push([Bt,Kt])});const pt=yt.filter(lt=>lt[1]>0).map(lt=>lt[0]);let we=null;for(const lt of pt){if(we&&(we.timeEnd??0)+Le>=lt){we.timeEnd=lt;continue}we&&Fe.push(we),we={time:lt,timeEnd:lt,annotation:ce,title:(0,m.W)(Ee,it),tags:vt,text:(0,m.W)(Be,it)}}we&&(we.timeEnd=pt[pt.length-1],Fe.push(we))}return Fe},this.type="prometheus",this.id=Ae.id,this.url=Ae.url,this.access=Ae.access,this.basicAuth=Ae.basicAuth,this.withCredentials=Ae.withCredentials,this.interval=Ae.jsonData.timeInterval||"15s",this.queryTimeout=Ae.jsonData.queryTimeout,this.httpMethod=Ae.jsonData.httpMethod||"GET",this.exemplarTraceIdDestinations=Ae.jsonData.exemplarTraceIdDestinations,this.hasIncrementalQuery=Ae.jsonData.incrementalQuerying??!1,this.ruleMappings={},this.languageProvider=Xe??new I.ZP(this),this.lookupsDisabled=Ae.jsonData.disableMetricsLookup??!1,this.customQueryParameters=new URLSearchParams(Ae.jsonData.customQueryParameters),this.datasourceConfigurationPrometheusFlavor=Ae.jsonData.prometheusType,this.datasourceConfigurationPrometheusVersion=Ae.jsonData.prometheusVersion,this.defaultEditor=Ae.jsonData.defaultEditor,this.disableRecordingRules=Ae.jsonData.disableRecordingRules??!1,this.variables=new Me(this,this.templateSrv),this.exemplarsAvailable=!0,this.cacheLevel=Ae.jsonData.cacheLevel??F.x3.Low,this.cache=new de.tQ({getTargetSignature:this.getPrometheusTargetSignature.bind(this),overlapString:Ae.jsonData.incrementalQueryOverlapWindow??de.Ji,profileFunction:this.getPrometheusProfileData.bind(this)}),this.annotations={QueryEditor:x}}getQueryDisplayText(Ae){return Ae.expr}getPrometheusProfileData(Ae,Ke){return{interval:Ke.interval??Ae.interval,expr:this.interpolateString(Ke.expr),datasource:"Prometheus"}}getPrometheusTargetSignature(Ae,Ke){return`${this.interpolateString(Ke.expr)}|${Ke.interval??Ae.interval}|${JSON.stringify(Ae.rangeRaw??"")}|${Ke.exemplar}`}hasLabelsMatchAPISupport(){return this._isDatasourceVersionGreaterOrEqualTo("2.24.0",F.T8.Prometheus)||this._isDatasourceVersionGreaterOrEqualTo("2.0.0",F.T8.Mimir)||this._isDatasourceVersionGreaterOrEqualTo("1.11.0",F.T8.Cortex)||this._isDatasourceVersionGreaterOrEqualTo("0.18.0",F.T8.Thanos)}_isDatasourceVersionGreaterOrEqualTo(Ae,Ke){return!this.datasourceConfigurationPrometheusVersion||!this.datasourceConfigurationPrometheusFlavor||Ke!==this.datasourceConfigurationPrometheusFlavor?!1:u().gte(this.datasourceConfigurationPrometheusVersion,Ae)}_addTracingHeaders(Ae,Ke){Ae.headers={},this.access==="proxy"&&(Ae.headers["X-Dashboard-UID"]=Ke.dashboardUID,Ae.headers["X-Panel-Id"]=Ke.panelId)}directAccessError(){return(0,a._)(()=>new Error("Browser access mode in the Prometheus datasource is no longer available. Switch to server access mode."))}_request(Ae,Ke,Xe={}){if(this.access==="direct")return this.directAccessError();Ke=Ke||{};for(const[ee,ce]of this.customQueryParameters)Ke[ee]==null&&(Ke[ee]=ce);let ne=this.url+Ae;Ae.startsWith(`/api/datasources/uid/${this.uid}`)&&(ne=Ae);const Z=(0,n.defaults)(Xe,{url:ne,method:this.httpMethod,headers:{}});return Z.method==="GET"?Ke&&Object.keys(Ke).length&&(Z.url=Z.url+(Z.url.search(/\?/)>=0?"&":"?")+Object.entries(Ke).map(([ee,ce])=>`${encodeURIComponent(ee)}=${encodeURIComponent(ce)}`).join("&")):(Z.headers["Content-Type"]="application/x-www-form-urlencoded",Z.data=Ke),(this.basicAuth||this.withCredentials)&&(Z.withCredentials=!0),this.basicAuth&&(Z.headers.Authorization=this.basicAuth),(0,p.i)().fetch(Z)}async importFromAbstractQueries(Ae){return Ae.map(Ke=>this.languageProvider.importFromAbstractQuery(Ke))}async exportToAbstractQueries(Ae){return Ae.map(Ke=>this.languageProvider.exportToAbstractQuery(Ke))}async metadataRequest(Ae,Ke={},Xe){if(Ve.some(ne=>Ae.includes(ne)))try{return await(0,o.n)(this._request(`/api/datasources/uid/${this.uid}/resources${Ae}`,Ke,{method:this.httpMethod,hideFromInspector:!0,showErrorAlert:!1,...Xe}))}catch(ne){if(this.httpMethod==="POST"&&(0,p.kW)(ne)&&(ne.status===405||ne.status===400))console.warn("Couldn't use configured POST HTTP method for this request. Trying to use GET method instead.");else throw ne}return await(0,o.n)(this._request(`/api/datasources/uid/${this.uid}/resources${Ae}`,Ke,{method:"GET",hideFromInspector:!0,...Xe}))}interpolateQueryExpr(Ae=[],Ke){if(!Ke.multi&&!Ke.includeAll)return rt(Ae);if(typeof Ae=="string")return mt(Ae);const Xe=Ae.map(ne=>mt(ne));return Xe.length===1?Xe[0]:"("+Xe.join("|")+")"}targetContainsTemplate(Ae){return this.templateSrv.containsTemplate(Ae.expr)}shouldRunExemplarQuery(Ae,Ke){if(Ae.exemplar){const Xe=this.languageProvider.histogramMetrics.find(ee=>Ae.expr.includes(ee)),ne=Ke.targets.findIndex(ee=>ee.refId===Ae.refId),Z=Ke.targets.slice(0,ne).filter(ee=>!ee.hide);return!!(!Xe||Xe&&!Z.some(ee=>ee.expr.includes(Xe)))}return!1}processTargetV2(Ae,Ke){const Xe=[],ne={...Ae,exemplar:this.shouldRunExemplarQuery(Ae,Ke),requestId:Ke.panelId+Ae.refId,utcOffsetSec:Ke.range.to.utcOffset()*60};return Ae.instant&&Ae.range?Xe.push({...ne,refId:ne.refId,instant:!1},{...ne,refId:ne.refId+Oe,range:!1}):Xe.push(ne),Xe}query(Ae){if(this.access==="direct")return this.directAccessError();let Ke,Xe;const ne=Ae.targets.some(ce=>ce.instant);this.hasIncrementalQuery&&!ne?(Xe=this.cache.requestInfo(Ae),Ke=Xe.requests[0]):Ke=Ae;const Z=Ke.targets.map(ce=>this.processTargetV2(ce,Ke)),ee=new Date;return super.query({...Ke,targets:Z.flat()}).pipe((0,r.U)(ce=>{const be={...ce,data:this.cache.procFrames(Ae,Xe,ce.data)};return(0,re.n)(be,Ae,{exemplarTraceIdDestinations:this.exemplarTraceIdDestinations})}),(0,i.b)(ce=>{oe(ce,Ae,ee)}))}createQuery(Ae,Ke,Xe,ne){const Z={hinting:Ae.hinting,instant:Ae.instant,exemplar:Ae.exemplar,step:0,expr:"",refId:Ae.refId,start:0,end:0},ee=Math.ceil(ne-Xe);let ce=l.intervalToSeconds(Ke.interval);const be=l.intervalToSeconds(this.templateSrv.replace(Ae.interval||Ke.interval,Ke.scopedVars)),Ee=Ae.interval?l.intervalToSeconds(this.templateSrv.replace(Ae.interval,Ke.scopedVars)):l.intervalToSeconds(this.interval),Be=Ae.intervalFactor||1,Le=this.adjustInterval(ce,be,ee,Be);let ze={...Ke.scopedVars,...this.getRangeScopedVars(Ke.range),...this.getRateIntervalScopedVariable(Le,Ee)};ce!==Le&&(ce=Le,ze=Object.assign({},Ke.scopedVars,{__interval:{text:ce+"s",value:ce+"s"},__interval_ms:{text:ce*1e3,value:ce*1e3},...this.getRateIntervalScopedVariable(ce,Ee),...this.getRangeScopedVars(Ke.range)})),Z.step=ce;let Fe=Ae.expr;Fe=this.enhanceExprWithAdHocFilters(Ke.filters,Fe),Z.expr=this.templateSrv.replace(Fe,ze,this.interpolateQueryExpr);const $e=_e(Xe,ne,Z.step,Ke.range.to.utcOffset()*60);return Z.start=$e.start,Z.end=$e.end,this._addTracingHeaders(Z,Ke),Z}getRateIntervalScopedVariable(Ae,Ke){Ke===0&&(Ke=15);const Xe=Math.max(Ae+Ke,4*Ke);return{__rate_interval:{text:Xe+"s",value:Xe+"s"}}}adjustInterval(Ae,Ke,Xe,ne){let Z=Xe/11e3;return Z>1&&(Z=Math.ceil(Z)),Math.max(Ae*ne,Ke,Z)}metricFindQuery(Ae,Ke){if(!Ae)return Promise.resolve([]);const Xe={__interval:{text:this.interval,value:this.interval},__interval_ms:{text:l.intervalToMs(this.interval),value:l.intervalToMs(this.interval)},...this.getRangeScopedVars(Ke?.range??(0,c.JK)())},ne=this.templateSrv.replace(Ae,Xe,this.interpolateQueryExpr);return new k(this,ne).process(Ke?.range??(0,c.JK)())}getRangeScopedVars(Ae){const Ke=Ae.to.diff(Ae.from),Xe=Math.round(Ke/1e3);return{__range_ms:{text:Ke,value:Ke},__range_s:{text:Xe,value:Xe},__range:{text:Xe+"s",value:Xe+"s"}}}async annotationQuery(Ae){if(this.access==="direct"){const ee=new Error("Browser access mode in the Prometheus datasource is no longer available. Switch to server access mode.");return Promise.reject(ee)}const Ke=Ae.annotation,{expr:Xe=""}=Ke;if(!Xe)return Promise.resolve([]);const ne=Ae.annotation.step||He,Z={expr:Xe,range:!0,instant:!1,exemplar:!1,interval:ne,refId:"X",datasource:this.getRef()};return await(0,o.n)((0,p.i)().fetch({url:"/api/ds/query",method:"POST",headers:this.getRequestHeaders(),data:{from:((0,L.jj)(Ae.range.from,!1)*1e3).toString(),to:((0,L.jj)(Ae.range.to,!0)*1e3).toString(),queries:[this.applyTemplateVariables(Z,{})]},requestId:`prom-query-${Ke.name}`}).pipe((0,r.U)(ee=>this.processAnnotationResponse(Ae,ee.data))))}async getTagKeys(Ae){if(!Ae||Ae.filters.length===0)return await this.languageProvider.fetchLabels(Ae.timeRange),this.languageProvider.getLabelKeys().map(Z=>({value:Z,text:Z}));const Ke=Ae.filters.map(Z=>({label:Z.key,value:Z.value,op:Z.operator})),Xe=P.Z.renderLabels(Ke);let ne;return this.hasLabelsMatchAPISupport()?ne=await this.languageProvider.fetchSeriesLabelsMatch(Xe):ne=await this.languageProvider.fetchSeriesLabels(Xe),Object.keys(ne).filter(Z=>!Ae.filters.find(ee=>ee.key===Z)).map(Z=>({value:Z,text:Z}))}async getTagValues(Ae){const Ke=Ae.filters.map(ee=>({label:ee.key,value:ee.value,op:ee.operator})),Xe=P.Z.renderLabels(Ke);if(this.hasLabelsMatchAPISupport())return(await this.languageProvider.fetchSeriesValuesWithMatch(Ae.key,Xe)).map(ee=>({value:ee,text:ee}));const ne=this.getTimeRangeParams(Ae.timeRange??(0,c.JK)());return(await this.metadataRequest(`/api/v1/label/${Ae.key}/values`,ne))?.data?.data?.map(ee=>({text:ee}))??[]}interpolateVariablesInQueries(Ae,Ke,Xe){let ne=Ae;return Ae&&Ae.length&&(ne=Ae.map(Z=>{const ee=this.templateSrv.replace(Z.expr,Ke,this.interpolateQueryExpr),ce=this.enhanceExprWithAdHocFilters(Xe,ee);return{...Z,datasource:this.getRef(),expr:ce,interval:this.templateSrv.replace(Z.interval,Ke)}})),ne}getQueryHints(Ae,Ke){return te(Ae.expr??"",Ke,this)}getInitHints(){return se(this)}async loadRules(){try{const Ke=(await this.metadataRequest("/api/v1/rules",{},{showErrorAlert:!1})).data?.data?.groups;Ke&&(this.ruleMappings=qe(Ke))}catch(Ae){console.log("Rules API is experimental. Ignore next error."),console.error(Ae)}}async areExemplarsAvailable(){try{return(await this.metadataRequest("/api/v1/query_exemplars",{query:"test",start:(0,d.CQ)().subtract(30,"minutes").valueOf().toString(),end:(0,d.CQ)().valueOf().toString()},{showErrorAlert:!1})).data.status==="success"}catch{return!1}}modifyQuery(Ae,Ke){let Xe=Ae.expr??"";switch(Ke.type){case"ADD_FILTER":{const{key:ne,value:Z}=Ke.options??{};ne&&Z&&(Xe=(0,s.F)(Xe,ne,Z));break}case"ADD_FILTER_OUT":{const{key:ne,value:Z}=Ke.options??{};ne&&Z&&(Xe=(0,s.F)(Xe,ne,Z,"!="));break}case"ADD_HISTOGRAM_QUANTILE":{Xe=`histogram_quantile(0.95, sum(rate(${Xe}[$__rate_interval])) by (le))`;break}case"ADD_RATE":{Xe=`rate(${Xe}[$__rate_interval])`;break}case"ADD_SUM":{Xe=`sum(${Xe.trim()}) by ($1)`;break}case"EXPAND_RULES":{Ke.options&&(Xe=(0,L.ll)(Xe,Ke.options));break}default:break}return{...Ae,expr:Xe}}getAdjustedInterval(Ae){return(0,L.wY)(this.cacheLevel,Ae)}getTimeRangeParams(Ae){return{start:(0,L.jj)(Ae.from,!1).toString(),end:(0,L.jj)(Ae.to,!0).toString()}}getOriginalMetricName(Ae){return(0,re.nM)(Ae)}enhanceExprWithAdHocFilters(Ae,Ke){return!Ae||Ae.length===0?Ke:Ae.reduce((ne,Z)=>{const{key:ee,operator:ce}=Z;let{value:be}=Z;return(ce==="=~"||ce==="!~")&&(be=rt(be)),(0,s.F)(ne,ee,be,ce)},Ke)}filterQuery(Ae){return!(Ae.hide||!Ae.expr)}applyTemplateVariables(Ae,Ke,Xe){const ne=(0,n.cloneDeep)(Ke);delete ne.__interval,delete ne.__interval_ms;const Z=this.templateSrv.replace(Ae.expr,ne,this.interpolateQueryExpr),ee=this.enhanceExprWithAdHocFilters(Xe,Z);return{...Ae,expr:ee,interval:this.templateSrv.replace(Ae.interval,ne),legendFormat:this.templateSrv.replace(Ae.legendFormat,ne)}}getVariables(){return this.templateSrv.getVariables().map(Ae=>`$${Ae.name}`)}interpolateString(Ae,Ke){return this.templateSrv.replace(Ae,Ke,this.interpolateQueryExpr)}getDebounceTimeInMilliseconds(){switch(this.cacheLevel){case F.x3.Medium:return 600;case F.x3.High:return 1200;default:return 350}}getDaysToCacheMetadata(){switch(this.cacheLevel){case F.x3.Medium:return 7;case F.x3.High:return 30;default:return 1}}getCacheDurationInMinutes(){return(0,L.l3)(this.cacheLevel)}getDefaultQuery(Ae){const Ke={refId:"A",expr:"",range:!0,instant:!1};return Ae===f.zj.UnifiedAlerting?{...Ke,instant:!0,range:!1}:Ae===f.zj.Explore?{...Ke,instant:!0,range:!0}:Ke}}function _e(Je,Ae,Ke,Xe){const ne=Math.floor((Ae+Xe)/Ke)*Ke-Xe,Z=Math.floor((Je+Xe)/Ke)*Ke-Xe;return{end:ne,start:Z}}function qe(Je){return Je.reduce((Ae,Ke)=>Ke.rules.filter(Xe=>Xe.type==="recording").reduce((Xe,ne)=>({...Xe,[ne.name]:ne.query}),Ae),{})}function rt(Je){return typeof Je=="string"?Je.replace(/\\/g,"\\\\").replace(/'/g,"\\\\'"):Je}function mt(Je){return typeof Je=="string"?Je.replace(/\\/g,"\\\\\\\\").replace(/[$^*{}\[\]\'+?.()|]/g,"\\\\$&"):Je}},27170:(G,A,e)=>{"use strict";e.d(A,{UQ:()=>h,ZK:()=>E,ZP:()=>b,nW:()=>s,ws:()=>p});var n=e(56375),a=e.n(n),o=e(19609),r=e.n(o),i=e(41466),g=e(9833),u=e(34921),l=e(64065),m=e(87438),c=e(43190);const d=["job","instance"],f="{}",E=1e4,v=D=>({headers:{"X-Grafana-Cache":`private, max-age=${D}`}});function h(D,M){if(!M[D])return;const{type:T,help:R}=M[D];return`${T.toUpperCase()}: ${R}`}function p(D,M){if(M[D])return M[D].help}function s(D,M){if(M[D])return M[D].type}const y=/(="|!="|=~"|!~"|\{|\[|\(|\+|-|\/|\*|%|\^|\band\b|\bor\b|\bunless\b|==|>=|!=|<=|>|<|=|~|,)/,C=86400;class b extends i.iL{constructor(M,T){super(),this.labelKeys=[],this.request=async(R,O,x={},I)=>{try{return(await this.datasource.metadataRequest(R,x,I)).data.data}catch(L){console.error(L)}return O},this.start=async R=>(this.timeRange=R??(0,g.JK)(),this.datasource.lookupsDisabled?[]:(this.metrics=await this.fetchLabelValues("__name__")||[],this.histogramMetrics=(0,l.NO)(this.metrics).sort(),Promise.all([this.loadMetricsMetadata(),this.fetchLabels()]))),this.fetchLabelValues=async R=>{const O=this.datasource.getAdjustedInterval(this.timeRange),I=`/api/v1/label/${this.datasource.interpolateString(R)}/values`;return await this.request(I,[],O,this.getDefaultCacheHeaders())??[]},this.getSeriesValues=async(R,O)=>this.datasource.hasLabelsMatchAPISupport()?await this.fetchSeriesValuesWithMatch(R,O):(await this.getSeries(O))[R]??[],this.fetchSeriesValuesWithMatch=async(R,O)=>{const x=R?this.datasource.interpolateString(R):null,I=O?this.datasource.interpolateString(O):null,P={...this.datasource.getAdjustedInterval(this.timeRange),...I&&{"match[]":I}};return await this.request(`/api/v1/label/${x}/values`,[],P,this.getDefaultCacheHeaders())??[]},this.getSeriesLabels=async(R,O)=>{let x,I;this.datasource.hasLabelsMatchAPISupport()?(O.push({name:"__name__",value:"",op:"!="}),I=await this.fetchSeriesLabelsMatch(R),x=Object.keys(I)):(I=await this.getSeries(R),x=Object.keys(I));const L=new Set(O.map(P=>P.name));return x.filter(P=>!L.has(P))},this.fetchSeriesLabels=async(R,O)=>{const x=this.datasource.interpolateString(R),L={...this.datasource.getAdjustedInterval(this.timeRange),"match[]":x},P="/api/v1/series",N=await this.request(P,[],L,this.getDefaultCacheHeaders()),{values:F}=(0,l.DY)(N,O);return F},this.fetchSeriesLabelsMatch=async(R,O)=>{const x=this.datasource.interpolateString(R),L={...this.datasource.getAdjustedInterval(this.timeRange),"match[]":x},P="/api/v1/labels";return(await this.request(P,[],L,this.getDefaultCacheHeaders())).reduce((F,U)=>({...F,[U]:""}),{})},this.fetchSeries=async R=>{const O="/api/v1/series",I={...this.datasource.getTimeRangeParams(this.timeRange),"match[]":R};return await this.request(O,{},I,this.getDefaultCacheHeaders())},this.fetchDefaultSeries=(0,n.once)(async()=>{const R=await Promise.all(d.map(O=>this.fetchLabelValues(O)));return d.reduce((O,x,I)=>({...O,[x]:R[I]}),{})}),this.datasource=M,this.histogramMetrics=[],this.timeRange=(0,g.JK)(),this.metrics=[],Object.assign(this,T)}getDefaultCacheHeaders(){if(this.datasource.cacheLevel!==c.x3.None)return v(this.datasource.getCacheDurationInMinutes()*60)}cleanText(M){return M.split(y).pop().trimLeft().replace(/"$/,"").replace(/^"/,"")}get syntax(){return m.ZP}async loadMetricsMetadata(){const M=v(this.datasource.getDaysToCacheMetadata()*C);this.metricsMetadata=(0,l.I4)(await this.request("/api/v1/metadata",{},{},{showErrorAlert:!1,...M}))}getLabelKeys(){return this.labelKeys}importFromAbstractQuery(M){return(0,l.e5)(M)}exportToAbstractQuery(M){const T=M.expr;if(!T||T.length===0)return{refId:M.refId,labelMatchers:[]};const R=r().tokenize(T,m.ZP),O=(0,l.UO)(R),x=S(T,R);return x&&x.length>0&&O.push({name:"__name__",operator:u.K2.Equal,value:x}),{refId:M.refId,labelMatchers:O}}async getSeries(M,T){if(this.datasource.lookupsDisabled)return{};try{return M===f?await this.fetchDefaultSeries():await this.fetchSeriesLabels(M,T)}catch(R){return console.error(R),{}}}async getLabelValues(M){return await this.fetchLabelValues(M)}async fetchLabels(M){M&&(this.timeRange=M);const T="/api/v1/labels",R=this.datasource.getAdjustedInterval(this.timeRange);this.labelFetchTs=Date.now().valueOf();const O=await this.request(T,[],R,this.getDefaultCacheHeaders());return Array.isArray(O)&&(this.labelKeys=O.slice().sort()),[]}}function S(D,M){let T="";for(const R of M)if(typeof R=="string"){T=R;break}return T}},64065:(G,A,e)=>{"use strict";e.d(A,{DY:()=>E,I4:()=>C,My:()=>z,NO:()=>f,PL:()=>N,U9:()=>x,UO:()=>j,e5:()=>F,jj:()=>H,l3:()=>_,ll:()=>s,o8:()=>b,tU:()=>I,wY:()=>V});var n=e(56375),a=e.n(n),o=e(19609),r=e.n(o),i=e(34921),g=e(87500),u=e(13446),l=e(51811),m=e(27170),c=e(10566),d=e(43190);const f=K=>{const Y=new Set,k=new RegExp("_bucket($|:)");for(let q=0;q<K.length;q++){const X=K[q];k.test(X)&&Y.add(X)}return[...Y]};function E(K,Y=!1){const k={};K.forEach(X=>{const{__name__:te,...se}=X;Y&&(k.__name__=k.__name__||new Set,k.__name__.has(te)||k.__name__.add(te)),Object.keys(se).forEach(de=>{k[de]||(k[de]=new Set),k[de].has(se[de])||k[de].add(se[de])})});const q={};return M(Object.keys(k)).forEach(X=>{q[X]=M(Array.from(k[X]))}),{values:q,keys:Object.keys(q)}}const v=/\{[^}]*?(\}|$)/,h=/\b(\w+)(!?=~?)("[^"\n]*?")/g;function p(K,Y=1){if(!K.match(v)){if(K.match(/^[A-Za-z:][\w:]*$/))return{selector:`{__name__="${K}"}`,labelKeys:["__name__"]};throw new Error("Query must contain a selector: "+K)}const k=K.slice(0,Y),q=k.lastIndexOf("{"),X=k.lastIndexOf("}");if(q===-1)throw new Error("Not inside selector, missing open brace: "+k);if(X>-1&&X>q)throw new Error("Not inside selector, previous selector already closed: "+k);const te=K.slice(Y),de=te.indexOf("}")+Y,re=te.indexOf("{"),fe=re+Y;if(de===-1)throw new Error("Not inside selector, missing closing brace in suffix: "+te);if(re>-1&&fe<de)throw new Error("Not inside selector, next selector opens before this one closed: "+te);const ie=K.slice(q,de),oe={};ie.replace(h,(Pe,ye,Te,nt)=>{const ct=K.indexOf(Pe),he=ct+ye.length+Te.length+1,xe=ct+ye.length+Te.length+nt.length-1;return(Y<he||Y>xe)&&(oe[ye]={value:nt,operator:Te}),""});const me=K.slice(0,q).match(/[A-Za-z:][\w:]*$/);me&&(oe.__name__={value:`"${me[0]}"`,operator:"="});const ge=Object.keys(oe).sort(),De=["{",ge.map(Pe=>`${Pe}${oe[Pe].operator}${oe[Pe].value}`).join(","),"}"].join("");return{labelKeys:ge,selector:De}}function s(K,Y){const k=Object.keys(Y),q=new RegExp(`(\\s|^)(${k.join("|")})(\\s|$|\\(|\\[|\\{)`,"ig"),te=K.replace(q,(re,fe,ie,oe)=>`${fe}${Y[ie]}${oe}`).split(/(\+|\-|\*|\/|\%|\^)/),se=/(\)\{|\}\{|\]\{)/;return te.map(re=>y(re,se)).join("")}function y(K,Y){const k=K.match(Y);if(!k)return K;const q=k.index??0,X=K.slice(0,q+1),te=K.slice(q+1),se=[];te.replace(h,(re,fe,ie,oe)=>(se.push({key:fe,operator:ie,value:oe}),""));let de=X;return se.filter(Boolean).forEach(re=>{const fe=re.value.slice(1,-1);de=(0,l.F)(de,re.key,fe,re.operator)}),de}function C(K){if(!K)return K;const Y={},k={};for(const X in K){const te=K[X][0];Y[X]=te,te.type==="histogram"&&(k[`${X}_bucket`]={type:"counter",help:`Cumulative counters for the observation buckets (${te.help})`},k[`${X}_count`]={type:"counter",help:`Count of events that have been observed for the histogram metric (${te.help})`},k[`${X}_sum`]={type:"counter",help:`Total sum of all observed values for the histogram metric (${te.help})`}),te.type==="summary"&&(k[`${X}_count`]={type:"counter",help:`Count of events that have been observed for the base metric (${te.help})`},k[`${X}_sum`]={type:"counter",help:`Total sum of all observed values for the base metric (${te.help})`})}const q={};return q.ALERTS={type:"counter",help:"Time series showing pending and firing alerts. The sample value is set to 1 as long as the alert is in the indicated active (pending or firing) state."},{...Y,...k,...q}}function b(K){return S(K/1e3)}function S(K){return Math.floor(K/60)}function D(K,Y=1){return Math.ceil(K/60)-Math.ceil(K/60)%Y}function M(K){return K.slice(0,m.ZK)}function T(K){return K&&K.length>=SUGGESTIONS_LIMIT?`, limited to the first ${SUGGESTIONS_LIMIT} received items`:""}const R=/[*+?()|\\.\[\]{}^$]/g;function O(K){return K.replace(R,"\\$&")}function x(K){return K.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"')}function I(K){return x(O(K))}const L={"=":i.K2.Equal,"!=":i.K2.NotEqual,"=~":i.K2.EqualRegEx,"!~":i.K2.NotEqualRegEx},P=(0,n.invert)(L);function N(K){const Y=K.labelMatchers.map(k=>{const q=P[k.operator];return q?`${k.name}${q}"${k.value}"`:""}).filter(k=>k!=="").join(", ");return Y?`{${Y}}`:""}function F(K){return{refId:K.refId,expr:N(K),range:!0}}function U(K){return typeof K.content=="string"?K.content:""}function j(K){const Y=[];for(const k of K)if(k instanceof o.Token&&k.type==="context-labels"){let q="",X="",te="";const se=Array.isArray(k.content)?k.content:[k.content];for(let de of se)if(typeof de=="string"){let re;re=de,(re==="="||re==="!="||re==="=~"||re==="!~")&&(te=re)}else if(de instanceof o.Token)switch(de.type){case"label-key":q=U(de);break;case"label-value":X=U(de),X=X.substring(1,X.length-1);const re=L[te];re&&Y.push({name:q,operator:re,value:X});break}}return Y}function V(K,Y){if(K===d.x3.None)return{start:H(Y.from,!1).toString(),end:H(Y.to,!0).toString()};const k=H(Y.from,!1),q=(0,g.mB)(k,_(K)*60),X=H(Y.to,!0),te=D(X,_(K))*60;if(q===te){const re=te+_(K)*60;return{start:q.toString(),end:re.toString()}}const se=q.toString(),de=te.toString();return{start:se,end:de}}function _(K){switch(K){case d.x3.Medium:return 10;case d.x3.High:return 60;default:return 1}}function H(K,Y){return typeof K=="string"&&(K=u.parse(K,Y)),Math.ceil(K.valueOf()/1e3)}function z(K,Y){return Y===void 0&&(Y=c.A5),K.length=Math.min(K.length,Y),K}},87438:(G,A,e)=>{"use strict";e.d(A,{ZP:()=>m,r8:()=>g});const n=[{label:"$__interval",sortValue:"$__interval"},{label:"$__rate_interval",sortValue:"$__rate_interval"},{label:"$__range",sortValue:"$__range"},{label:"1m",sortValue:"00:01:00"},{label:"5m",sortValue:"00:05:00"},{label:"10m",sortValue:"00:10:00"},{label:"30m",sortValue:"00:30:00"},{label:"1h",sortValue:"01:00:00"},{label:"1d",sortValue:"24:00:00"}],a=["by","group_left","group_right","ignoring","on","offset","without"],o=null,r=[{label:"acos",insertText:"acos",detail:"acos(v instant-vector)",documentation:"calculates the arccosine of all elements in v"},{label:"acosh",insertText:"acosh",detail:"acosh(v instant-vector)",documentation:"calculates the inverse hyperbolic cosine of all elements in v"},{label:"asin",insertText:"asin",detail:"asin(v instant-vector)",documentation:"calculates the arcsine of all elements in v"},{label:"asinh",insertText:"asinh",detail:"asinh(v instant-vector)",documentation:"calculates the inverse hyperbolic sine of all elements in v"},{label:"atan",insertText:"atan",detail:"atan(v instant-vector)",documentation:"calculates the arctangent of all elements in v"},{label:"atanh",insertText:"atanh",detail:"atanh(v instant-vector)",documentation:"calculates the inverse hyperbolic tangent of all elements in v"},{label:"cos",insertText:"cos",detail:"cos(v instant-vector)",documentation:"calculates the cosine of all elements in v"},{label:"cosh",insertText:"cosh",detail:"cosh(v instant-vector)",documentation:"calculates the hyperbolic cosine of all elements in v"},{label:"sin",insertText:"sin",detail:"sin(v instant-vector)",documentation:"calculates the sine of all elements in v"},{label:"sinh",insertText:"sinh",detail:"sinh(v instant-vector)",documentation:"calculates the hyperbolic sine of all elements in v"},{label:"tan",insertText:"tan",detail:"tan(v instant-vector)",documentation:"calculates the tangent of all elements in v"},{label:"tanh",insertText:"tanh",detail:"tanh(v instant-vector)",documentation:"calculates the hyperbolic tangent of all elements in v"}],g=[...[{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"group",insertText:"group",documentation:"All values in the resulting vector are 1"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"count_values",insertText:"count_values",documentation:"Count number of elements with the same value"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"},{label:"quantile",insertText:"quantile",documentation:"Calculate \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) over dimensions"}],...r,{insertText:"abs",label:"abs",detail:"abs(v instant-vector)",documentation:"Returns the input vector with all sample values converted to their absolute value."},{insertText:"absent",label:"absent",detail:"absent(v instant-vector)",documentation:"Returns an empty vector if the vector passed to it has any elements and a 1-element vector with the value 1 if the vector passed to it has no elements. This is useful for alerting on when no time series exist for a given metric name and label combination."},{insertText:"absent_over_time",label:"absent_over_time",detail:"absent(v range-vector)",documentation:"Returns an empty vector if the range vector passed to it has any elements and a 1-element vector with the value 1 if the range vector passed to it has no elements."},{insertText:"ceil",label:"ceil",detail:"ceil(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` up to the nearest integer."},{insertText:"changes",label:"changes",detail:"changes(v range-vector)",documentation:"For each input time series, `changes(v range-vector)` returns the number of times its value has changed within the provided time range as an instant vector."},{insertText:"clamp",label:"clamp",detail:"clamp(v instant-vector, min scalar, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min` and an upper limit of `max`."},{insertText:"clamp_max",label:"clamp_max",detail:"clamp_max(v instant-vector, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have an upper limit of `max`."},{insertText:"clamp_min",label:"clamp_min",detail:"clamp_min(v instant-vector, min scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min`."},{insertText:"count_scalar",label:"count_scalar",detail:"count_scalar(v instant-vector)",documentation:"Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause."},{insertText:"deg",label:"deg",detail:"deg(v instant-vector)",documentation:"Converts radians to degrees for all elements in v"},{insertText:"day_of_month",label:"day_of_month",detail:"day_of_month(v=vector(time()) instant-vector)",documentation:"Returns the day of the month for each of the given times in UTC. Returned values are from 1 to 31."},{insertText:"day_of_week",label:"day_of_week",detail:"day_of_week(v=vector(time()) instant-vector)",documentation:"Returns the day of the week for each of the given times in UTC. Returned values are from 0 to 6, where 0 means Sunday etc."},{insertText:"day_of_year",label:"day_of_year",detail:"day_of_year(v=vector(time()) instant-vector)",documentation:"Returns the day of the year for each of the given times in UTC. Returned values are from 1 to 365 for non-leap years, and 1 to 366 in leap years."},{insertText:"days_in_month",label:"days_in_month",detail:"days_in_month(v=vector(time()) instant-vector)",documentation:"Returns number of days in the month for each of the given times in UTC. Returned values are from 28 to 31."},{insertText:"delta",label:"delta",detail:"delta(v range-vector)",documentation:"Calculates the difference between the first and last value of each time series element in a range vector `v`, returning an instant vector with the given deltas and equivalent labels. The delta is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if the sample values are all integers."},{insertText:"deriv",label:"deriv",detail:"deriv(v range-vector)",documentation:"Calculates the per-second derivative of the time series in a range vector `v`, using simple linear regression."},{insertText:"drop_common_labels",label:"drop_common_labels",detail:"drop_common_labels(instant-vector)",documentation:"Drops all labels that have the same name and value across all series in the input vector."},{insertText:"exp",label:"exp",detail:"exp(v instant-vector)",documentation:"Calculates the exponential function for all elements in `v`.\nSpecial cases are:\n* `Exp(+Inf) = +Inf` \n* `Exp(NaN) = NaN`"},{insertText:"floor",label:"floor",detail:"floor(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` down to the nearest integer."},{insertText:"histogram_quantile",label:"histogram_quantile",detail:"histogram_quantile(\u03C6 float, b instant-vector)",documentation:"Calculates the \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) from the buckets `b` of a histogram. The samples in `b` are the counts of observations in each bucket. Each sample must have a label `le` where the label value denotes the inclusive upper bound of the bucket. (Samples without such a label are silently ignored.) The histogram metric type automatically provides time series with the `_bucket` suffix and the appropriate labels."},{insertText:"holt_winters",label:"holt_winters",detail:"holt_winters(v range-vector, sf scalar, tf scalar)",documentation:"Produces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1."},{insertText:"hour",label:"hour",detail:"hour(v=vector(time()) instant-vector)",documentation:"Returns the hour of the day for each of the given times in UTC. Returned values are from 0 to 23."},{insertText:"idelta",label:"idelta",detail:"idelta(v range-vector)",documentation:"Calculates the difference between the last two samples in the range vector `v`, returning an instant vector with the given deltas and equivalent labels."},{insertText:"increase",label:"increase",detail:"increase(v range-vector)",documentation:"Calculates the increase in the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. The increase is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if a counter increases only by integer increments."},{insertText:"irate",label:"irate",detail:"irate(v range-vector)",documentation:"Calculates the per-second instant rate of increase of the time series in the range vector. This is based on the last two data points. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for."},{insertText:"label_join",label:"label_join",detail:"label_join(v instant-vector, dst_label string, separator string, src_label_1 string, src_label_2 string, ...)",documentation:"For each timeseries in `v`, joins all the values of all the `src_labels` using `separator` and returns the timeseries with the label `dst_label` containing the joined value. There can be any number of `src_labels` in this function."},{insertText:"label_replace",label:"label_replace",detail:"label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)",documentation:"For each timeseries in `v`, `label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)`  matches the regular expression `regex` against the label `src_label`.  If it matches, then the timeseries is returned with the label `dst_label` replaced by the expansion of `replacement`. `$1` is replaced with the first matching subgroup, `$2` with the second etc. If the regular expression doesn't match then the timeseries is returned unchanged."},{insertText:"ln",label:"ln",detail:"ln(v instant-vector)",documentation:"Calculates the natural logarithm for all elements in `v`.\nSpecial cases are:\n * `ln(+Inf) = +Inf`\n * `ln(0) = -Inf`\n * `ln(x < 0) = NaN`\n * `ln(NaN) = NaN`"},{insertText:"log2",label:"log2",detail:"log2(v instant-vector)",documentation:"Calculates the binary logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"log10",label:"log10",detail:"log10(v instant-vector)",documentation:"Calculates the decimal logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"minute",label:"minute",detail:"minute(v=vector(time()) instant-vector)",documentation:"Returns the minute of the hour for each of the given times in UTC. Returned values are from 0 to 59."},{insertText:"month",label:"month",detail:"month(v=vector(time()) instant-vector)",documentation:"Returns the month of the year for each of the given times in UTC. Returned values are from 1 to 12, where 1 means January etc."},{insertText:"pi",label:"pi",detail:"pi()",documentation:"Returns pi"},{insertText:"predict_linear",label:"predict_linear",detail:"predict_linear(v range-vector, t scalar)",documentation:"Predicts the value of time series `t` seconds from now, based on the range vector `v`, using simple linear regression."},{insertText:"rad",label:"rad",detail:"rad(v instant-vector)",documentation:"Converts degrees to radians for all elements in v"},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the per-second average rate of increase of the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. Also, the calculation extrapolates to the ends of the time range, allowing for missed scrapes or imperfect alignment of scrape cycles with the range's time period."},{insertText:"resets",label:"resets",detail:"resets(v range-vector)",documentation:"For each input time series, `resets(v range-vector)` returns the number of counter resets within the provided time range as an instant vector. Any decrease in the value between two consecutive samples is interpreted as a counter reset."},{insertText:"round",label:"round",detail:"round(v instant-vector, to_nearest=1 scalar)",documentation:"Rounds the sample values of all elements in `v` to the nearest integer. Ties are resolved by rounding up. The optional `to_nearest` argument allows specifying the nearest multiple to which the sample values should be rounded. This multiple may also be a fraction."},{insertText:"scalar",label:"scalar",detail:"scalar(v instant-vector)",documentation:"Given a single-element input vector, `scalar(v instant-vector)` returns the sample value of that single element as a scalar. If the input vector does not have exactly one element, `scalar` will return `NaN`."},{insertText:"sgn",label:"sgn",detail:"sgn(v instant-vector)",documentation:"Returns a vector with all sample values converted to their sign, defined as this: 1 if v is positive, -1 if v is negative and 0 if v is equal to zero."},{insertText:"sort",label:"sort",detail:"sort(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in ascending order."},{insertText:"sort_desc",label:"sort_desc",detail:"sort_desc(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in descending order."},{insertText:"sqrt",label:"sqrt",detail:"sqrt(v instant-vector)",documentation:"Calculates the square root of all elements in `v`."},{insertText:"time",label:"time",detail:"time()",documentation:"Returns the number of seconds since January 1, 1970 UTC. Note that this does not actually return the current time, but the time at which the expression is to be evaluated."},{insertText:"timestamp",label:"timestamp",detail:"timestamp(v instant-vector)",documentation:"Returns the timestamp of each of the samples of the given vector as the number of seconds since January 1, 1970 UTC."},{insertText:"vector",label:"vector",detail:"vector(s scalar)",documentation:"Returns the scalar `s` as a vector with no labels."},{insertText:"year",label:"year",detail:"year(v=vector(time()) instant-vector)",documentation:"Returns the year for each of the given times in UTC."},{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average value of all points in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum value of all points in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum value of all points in the specified interval."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The most recent point value in specified interval."},{insertText:"present_over_time",label:"present_over_time",detail:"present_over_time(range-vector)",documentation:"The value 1 for any series in the specified interval."}],u=g.map(c=>c.label),m={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((by|without)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},function:new RegExp(`\\b(?:${g.map(c=>c.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],idList:{pattern:/\d+(\|\d+)+/,alias:"number"},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:new RegExp(`/[-+*/=%^~]|&&?|\\|?\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\b(?:${a.join("|")})\\b`,"i"),punctuation:/[{};()`,.]/}},77530:(G,A,e)=>{"use strict";e.d(A,{K:()=>C,Z:()=>b});var n=e(87438),a=e(62989),o=e(18537),r=e(80988),i=e(10596);function g(){return[{id:i.G3.HistogramQuantile,name:"Histogram quantile",params:[{name:"Quantile",type:"number",options:[.99,.95,.9,.75,.5,.25]}],defaultParams:[.9],category:i.CM.Functions,renderer:r.pS,addOperationHandler:r.PP},{id:i.G3.LabelReplace,name:"Label replace",params:[{name:"Destination label",type:"string"},{name:"Replacement",type:"string"},{name:"Source label",type:"string"},{name:"Regex",type:"string"}],category:i.CM.Functions,defaultParams:["","$1","","(.*)"],renderer:r.zJ,addOperationHandler:r.PP},{id:i.G3.Ln,name:"Ln",params:[],defaultParams:[],category:i.CM.Functions,renderer:r.pS,addOperationHandler:r.PP},l(i.G3.Changes),l(i.G3.Rate,!0),l(i.G3.Irate),l(i.G3.Increase,!0),l(i.G3.Idelta),l(i.G3.Delta),u({id:i.G3.HoltWinters,params:[(0,r.kq)(),{name:"Smoothing Factor",type:"number"},{name:"Trend Factor",type:"number"}],defaultParams:["$__interval",.5,.5],alternativesKey:"range function",category:i.CM.RangeFunctions,renderer:r.e8,addOperationHandler:d,changeTypeHandler:m}),u({id:i.G3.PredictLinear,params:[(0,r.kq)(),{name:"Seconds from now",type:"number"}],defaultParams:["$__interval",60],alternativesKey:"range function",category:i.CM.RangeFunctions,renderer:r.e8,addOperationHandler:d,changeTypeHandler:m}),u({id:i.G3.QuantileOverTime,params:[(0,r.kq)(),{name:"Quantile",type:"number"}],defaultParams:["$__interval",.5],alternativesKey:"overtime function",category:i.CM.RangeFunctions,renderer:r.NZ,addOperationHandler:d,changeTypeHandler:m}),...a.EX,{id:i.G3.NestedQuery,name:"Binary operation with query",params:[],defaultParams:[],category:i.CM.BinaryOps,renderer:(D,M,T)=>T,addOperationHandler:f},u({id:i.G3.Abs}),u({id:i.G3.Absent}),u({id:i.G3.Acos,category:i.CM.Trigonometric}),u({id:i.G3.Acosh,category:i.CM.Trigonometric}),u({id:i.G3.Asin,category:i.CM.Trigonometric}),u({id:i.G3.Asinh,category:i.CM.Trigonometric}),u({id:i.G3.Atan,category:i.CM.Trigonometric}),u({id:i.G3.Atanh,category:i.CM.Trigonometric}),u({id:i.G3.Ceil}),u({id:i.G3.Clamp,name:"Clamp",params:[{name:"Minimum Scalar",type:"number"},{name:"Maximum Scalar",type:"number"}],defaultParams:[1,1]}),u({id:i.G3.ClampMax,params:[{name:"Maximum Scalar",type:"number"}],defaultParams:[1]}),u({id:i.G3.ClampMin,params:[{name:"Minimum Scalar",type:"number"}],defaultParams:[1]}),u({id:i.G3.Cos,category:i.CM.Trigonometric}),u({id:i.G3.Cosh,category:i.CM.Trigonometric}),u({id:i.G3.DayOfMonth,category:i.CM.Time}),u({id:i.G3.DayOfWeek,category:i.CM.Time}),u({id:i.G3.DayOfYear,category:i.CM.Time}),u({id:i.G3.DaysInMonth,category:i.CM.Time}),u({id:i.G3.Deg}),l(i.G3.Deriv),u({id:i.G3.Exp}),u({id:i.G3.Floor}),u({id:i.G3.Group}),u({id:i.G3.Hour}),u({id:i.G3.LabelJoin,params:[{name:"Destination Label",type:"string",editor:o.g},{name:"Separator",type:"string"},{name:"Source Label",type:"string",restParam:!0,optional:!0,editor:o.g}],defaultParams:["",",",""],renderer:E,addOperationHandler:v}),u({id:i.G3.Log10}),u({id:i.G3.Log2}),u({id:i.G3.Minute}),u({id:i.G3.Month}),u({id:i.G3.Pi,renderer:D=>`${D.id}()`}),u({id:i.G3.Quantile,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:r.pS}),u({id:i.G3.Rad}),l(i.G3.Resets),u({id:i.G3.Round,category:i.CM.Functions,params:[{name:"To Nearest",type:"number"}],defaultParams:[1]}),u({id:i.G3.Scalar}),u({id:i.G3.Sgn}),u({id:i.G3.Sin,category:i.CM.Trigonometric}),u({id:i.G3.Sinh,category:i.CM.Trigonometric}),u({id:i.G3.Sort}),u({id:i.G3.SortDesc}),u({id:i.G3.Sqrt}),u({id:i.G3.Stddev}),u({id:i.G3.Tan,category:i.CM.Trigonometric}),u({id:i.G3.Tanh,category:i.CM.Trigonometric}),u({id:i.G3.Time,renderer:D=>`${D.id}()`}),u({id:i.G3.Timestamp}),u({id:i.G3.Vector,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:D=>`${D.id}(${D.params[0]})`}),u({id:i.G3.Year})]}function u(S){return{...S,id:S.id,name:S.name??(0,r.t7)(S.id),params:S.params??[],defaultParams:S.defaultParams??[],category:S.category??i.CM.Functions,renderer:S.renderer??(S.params?r.zJ:r.pS),addOperationHandler:S.addOperationHandler??r.PP}}function l(S,D=!1){return{id:S,name:(0,r.t7)(S),params:[(0,r.kq)(D)],defaultParams:[D?"$__rate_interval":"$__interval"],alternativesKey:"range function",category:i.CM.RangeFunctions,renderer:c,addOperationHandler:d,changeTypeHandler:m}}function m(S,D){return(S.params[0]==="$__rate_interval"&&D.defaultParams[0]!=="$__rate_interval"||S.params[0]==="$__interval"&&D.defaultParams[0]!=="$__interval")&&(S.params=D.defaultParams),S}function c(S,D,M){let T=(S.params??[])[0]??"5m";return`${D.id}(${M}[${T}])`}function d(S,D,M){const T={id:S.id,params:S.defaultParams};return D.operations.length>0&&M.getOperationDef(D.operations[0].id).addOperationHandler===d?{...D,operations:[T,...D.operations.slice(1)]}:{...D,operations:[T,...D.operations]}}function f(S,D){return{...D,binaryQueries:[...D.binaryQueries??[],{operator:"/",query:D}]}}function E(S,D,M){if(typeof S.params[1]!="string")throw"The separator must be a string";const T=`"${S.params[1]}"`;return`${S.id}(${M}, "${S.params[0]}", ${T}, "${S.params.slice(2).join(T)}")`}function v(S,D){const M={id:S.id,params:S.defaultParams};return{...D,operations:[...D.operations,M]}}function h(){return[...(0,r.IT)(i.G3.Sum),...(0,r.IT)(i.G3.Avg),...(0,r.IT)(i.G3.Min),...(0,r.IT)(i.G3.Max),...(0,r.IT)(i.G3.Count),...(0,r.Z3)(i.G3.TopK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,r.Z3)(i.G3.BottomK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,r.Z3)(i.G3.CountValues,{params:[{name:"Identifier",type:"string"}],defaultParams:["count"]}),p(i.G3.SumOverTime),p(i.G3.AvgOverTime),p(i.G3.MinOverTime),p(i.G3.MaxOverTime),p(i.G3.CountOverTime),p(i.G3.LastOverTime),p(i.G3.PresentOverTime),p(i.G3.AbsentOverTime),p(i.G3.StddevOverTime)]}function p(S){return{id:S,name:(0,r.t7)(S),params:[(0,r.kq)()],defaultParams:["$__interval"],alternativesKey:"overtime function",category:i.CM.RangeFunctions,renderer:s,addOperationHandler:d}}function s(S,D,M){let T=(S.params??[])[0]??"$__interval";return`${D.id}(${M}[${T}])`}var y=e(61746);class C extends y.x{constructor(){super(()=>{const D=[...g(),...h()];for(const M of D){const T=n.r8.find(R=>R.insertText===M.id);T&&(M.documentation=T.documentation)}return D}),this.setOperationCategories([i.CM.Aggregations,i.CM.RangeFunctions,i.CM.Functions,i.CM.BinaryOps,i.CM.Trigonometric,i.CM.Time])}getQueryPatterns(){return[{name:"Rate then sum",type:i.Fz.Rate,operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]},{name:"Rate then sum by(label) then avg",type:i.Fz.Rate,operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:[""]},{id:"avg",params:[]}]},{name:"Histogram quantile on rate",type:i.Fz.Histogram,operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Histogram quantile on increase",type:i.Fz.Histogram,operations:[{id:"increase",params:["$__rate_interval"]},{id:"__max_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Binary Query",type:i.Fz.Binary,operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}],binaryQueries:[{operator:"/",query:{metric:"",labels:[],operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]}}]}]}}const b=new C},62989:(G,A,e)=>{"use strict";e.d(A,{EX:()=>i,PX:()=>r,iQ:()=>o});var n=e(80988),a=e(10596);const o=[{id:a.G3.Addition,name:"Add scalar",sign:"+"},{id:a.G3.Subtraction,name:"Subtract scalar",sign:"-"},{id:a.G3.MultiplyBy,name:"Multiply by scalar",sign:"*"},{id:a.G3.DivideBy,name:"Divide by scalar",sign:"/"},{id:a.G3.Modulo,name:"Modulo by scalar",sign:"%"},{id:a.G3.Exponent,name:"Exponent",sign:"^"},{id:a.G3.EqualTo,name:"Equal to",sign:"==",comparison:!0},{id:a.G3.NotEqualTo,name:"Not equal to",sign:"!=",comparison:!0},{id:a.G3.GreaterThan,name:"Greater than",sign:">",comparison:!0},{id:a.G3.LessThan,name:"Less than",sign:"<",comparison:!0},{id:a.G3.GreaterOrEqual,name:"Greater or equal to",sign:">=",comparison:!0},{id:a.G3.LessOrEqual,name:"Less or equal to",sign:"<=",comparison:!0}],r=o.reduce((u,l)=>(u[l.sign]={id:l.id,comparison:l.comparison},u),{}),i=o.map(u=>{const l=[{name:"Value",type:"number"}],m=[2];return u.comparison&&(l.push({name:"Bool",type:"boolean",description:"If checked comparison will return 0 or 1 for the value rather than filtering."}),m.push(!1)),{id:u.id,name:u.name,params:l,defaultParams:m,alternativesKey:"binary scalar operations",category:a.CM.BinaryOps,renderer:g(u.sign),addOperationHandler:n.PP}});function g(u){return function(m,c,d){let f=m.params[0],E="";return m.params.length===2&&(E=m.params[1]?" bool":""),`${d} ${u}${E} ${f}`}}},18537:(G,A,e)=>{"use strict";e.d(A,{g:()=>g});var n=e(85960),a=e(11248),o=e(27436),r=e(77530),i=e(80988);function g({onChange:l,index:m,operationId:c,value:d,query:f,datasource:E}){const[v,h]=(0,n.useState)({});return n.createElement(o.Ph,{inputId:(0,i.i1)(c,m),autoFocus:d===""?!0:void 0,openMenuOnFocus:!0,onOpenMenu:async()=>{h({isLoading:!0});const p=await u(f,E);h({options:p,isLoading:void 0})},isLoading:v.isLoading,allowCustomValue:!0,noOptionsMessage:"No labels found",loadingMessage:"Loading labels",options:v.options,value:(0,a.E)(d),onChange:p=>l(m,p.value)})}async function u(l,m){let c=l.labels;m.type==="prometheus"&&(c=[{label:"__name__",op:"=",value:l.metric},...l.labels]);const d=r.Z.renderLabels(c),f=await m.languageProvider.fetchSeriesLabels(d);return Object.keys(f).map(E=>({label:E,value:E}))}},10566:(G,A,e)=>{"use strict";e.d(A,{kU:()=>Z,A5:()=>ne});var n=e(66681),a=e(97812),o=e.n(a),r=e(85960),i=e(83795),g=e.n(i),u=e(11248),l=e(33614),m=e(73688),c=e(90857),d=e(47257),f=e(29165),E=e(97666),v=e(12260),h=e(50263),p=e(27436),s=e(81368),y=e(84933),C=e(70484),b=e(64065),S=e(36862),D=e(7288),M=e(24956),T=e(75682),R=e(57652),O=e(82541),x=e(44574),I=e(5999),L=e(14607),P=e(43183),N=e(27170),F=e(74463);const{setFilteredMetricCount:U}=F.stateSlice.actions;async function j(Ee,Be,Le){let ze=!0;const Fe=Ee.languageProvider.metricsMetadata;Fe&&Object.keys(Fe).length===0&&(ze=!1);let $e={},et={},tt;return tt=Le?.map(it=>{const vt=V(it,Ee),yt=`${it}\xA6${vt.description}`;return $e[it]=vt,et[yt]=vt,vt}),{isLoading:!1,hasMetadata:ze,metrics:tt??[],metaHaystackDictionary:et,nameHaystackDictionary:$e,totalMetricCount:tt?.length??0,filteredMetricCount:tt?.length??0}}function V(Ee,Be){let Le=(0,N.nW)(Ee,Be.languageProvider.metricsMetadata);const ze=(0,N.ws)(Ee,Be.languageProvider.metricsMetadata);return["histogram","summary"].forEach($e=>{ze?.toLowerCase().includes($e)&&Le!==$e&&(Le+=` (${$e})`)}),{value:Ee,type:Le,description:ze}}function _(Ee,Be){const Le=H(Ee);return!Ee.isLoading&&Ee.filteredMetricCount!==Le.length&&Be(U(Le.length)),K(Le,Ee.pageNum,Ee.resultsPerPage)}function H(Ee){let Be=Ee.metrics;return Ee.fuzzySearchQuery&&!Ee.useBackend&&(Ee.fullMetaSearch?Be=Ee.metaHaystackOrder.map(Le=>Ee.metaHaystackDictionary[Le]):Be=Ee.nameHaystackOrder.map(Le=>Ee.nameHaystackDictionary[Le])),Ee.selectedTypes.length>0&&(Be=Be.filter((Le,ze)=>Ee.selectedTypes.some($e=>Le.type&&$e.value?Le.type.includes($e.value):!Le.type&&$e.value==="no type"))),Ee.includeNullMetadata||(Be=Be.filter(Le=>Le.type!==void 0&&Le.description!==void 0)),Be}function z(Ee){if(!Ee.metrics.length)return[];const Be=Ee.resultsPerPage===0?1:Ee.resultsPerPage,Le=Math.floor(H(Ee).length/Be)+1;return[...Array(Le).keys()].map(ze=>ze+1)}function K(Ee,Be,Le){const ze=Le===0?1:Le,Fe=Be===1?0:(Be-1)*ze,$e=Fe+ze;return Ee.slice(Fe,$e)}const Y=(Ee,Be,Le)=>Ee<1?1:Ee>Le?Le:Ee??Be;async function k(Ee,Be,Le){const ze=(0,S.Vl)(Ee),Fe=Be.map(tt=>`,${tt.label}="${tt.value}"`),$e=`label_values({__name__=~".*${ze}"${Be?Fe.join():""}},__name__)`;return await Le.metricFindQuery($e).then(tt=>tt.map(it=>V(it.text,Le)))}function q(Ee,Be,Le,ze){switch(Ee){case"grafana_prom_metric_encycopedia_tracking":(0,P.ff)(Ee,{metric:Le,hasMetadata:Be?.hasMetadata,totalMetricCount:Be?.totalMetricCount,fuzzySearchQuery:Be?.fuzzySearchQuery,fullMetaSearch:Be?.fullMetaSearch,selectedTypes:Be?.selectedTypes,useRegexSearch:Be?.useBackend,includeResultsWithoutMetadata:Be?.includeNullMetadata});case"grafana_prom_metric_encycopedia_disable_text_wrap_interaction":(0,P.ff)(Ee,{disableTextWrap:Be?.disableTextWrap});case"grafana_prometheus_metric_encyclopedia_open":(0,P.ff)(Ee,{query:ze})}}const X=[{value:"counter",description:"A cumulative metric that represents a single monotonically increasing counter whose value can only increase or be reset to zero on restart."},{value:"gauge",description:"A metric that represents a single numerical value that can arbitrarily go up and down."},{value:"histogram",description:"A histogram samples observations (usually things like request durations or response sizes) and counts them in configurable buckets."},{value:"summary",description:"A summary samples observations (usually things like request durations and response sizes) and can calculate configurable quantiles over a sliding time window."},{value:"unknown",description:"These metrics have been given the type unknown in the metadata."},{value:"no type",description:"These metrics have no defined type in the metadata."}],te={browse:"Search metrics by name",metadataSearchSwitch:"Include description in search",type:"Filter by type",includeNullMetadata:"Include results with no metadata",setUseBackend:"Enable regex search"};function se(Ee){const{state:Be,onChangeFullMetaSearch:Le,onChangeIncludeNullMetadata:ze,onChangeDisableTextWrap:Fe,onChangeUseBackend:$e}=Ee,et=(0,d.l4)(),tt=de(et);return r.createElement(r.Fragment,null,r.createElement("div",{className:tt.selectItem},r.createElement(I.r,{"data-testid":Ke.searchWithMetadata,value:Be.fullMetaSearch,disabled:Be.useBackend||!Be.hasMetadata,onChange:()=>Le()}),r.createElement("div",{className:tt.selectItemLabel},te.metadataSearchSwitch)),r.createElement("div",{className:tt.selectItem},r.createElement(I.r,{value:Be.includeNullMetadata,disabled:!Be.hasMetadata,onChange:()=>ze()}),r.createElement("div",{className:tt.selectItemLabel},te.includeNullMetadata)),r.createElement("div",{className:tt.selectItem},r.createElement(I.r,{value:Be.disableTextWrap,onChange:()=>Fe()}),r.createElement("div",{className:tt.selectItemLabel},"Disable text wrap")),r.createElement("div",{className:tt.selectItem},r.createElement(I.r,{"data-testid":Ke.setUseBackend,value:Be.useBackend,onChange:()=>$e()}),r.createElement("div",{className:tt.selectItemLabel},te.setUseBackend,"\xA0"),r.createElement(L.u,{content:"Filter metric names by regex search, using an additional call on the Prometheus API.",placement:"bottom-end"},r.createElement(E.J,{name:"info-circle",size:"xs",className:tt.settingsIcon}))))}function de(Ee){return{settingsIcon:(0,n.css)`
      color: ${Ee.colors.text.secondary};
    `,selectItem:(0,n.css)`
      display: flex;
      flex-direction: row;
      align-items: center;
      padding: 4px 0;
    `,selectItemLabel:(0,n.css)`
      margin: 0 0 0 ${Ee.spacing(1)};
      align-self: center;
      color: ${Ee.colors.text.secondary};
      font-size: 12px;
    `}}var re=e(13086);function fe({feedbackUrl:Ee}){const Be=(0,d.wW)(ie);return r.createElement(re.K,null,r.createElement("a",{href:Ee,className:Be.link,title:"The metrics explorer is new, please let us know how we can improve it",target:"_blank",rel:"noreferrer noopener"},r.createElement(E.J,{name:"comment-alt-message"})," Give feedback"))}function ie(Ee){return{link:(0,n.css)({color:Ee.colors.text.secondary,fontSize:Ee.typography.bodySmall.fontSize,":hover":{color:Ee.colors.text.link},margin:"-25px 0 30px 0"})}}var oe=e(28017);function ue(Ee){const{metrics:Be,onChange:Le,onClose:ze,query:Fe,state:$e,disableTextWrap:et}=Ee,tt=(0,d.l4)(),it=me(tt,et);function vt(lt){lt.value&&(Le({...Fe,metric:lt.value}),q("grafana_prom_metric_encycopedia_tracking",$e,lt.value),ze())}function yt(lt){return $e.fullMetaSearch&&lt?r.createElement(r.Fragment,null,r.createElement("td",null,ut(lt.type??"")),r.createElement("td",null,r.createElement(g(),{textToHighlight:lt.description??"",searchWords:$e.metaHaystackMatches,autoEscape:!0,highlightClassName:it.matchHighLight}))):r.createElement(r.Fragment,null,r.createElement("td",null,ut(lt.type??"")),r.createElement("td",null,lt.description??""))}function Wt(lt,Bt,Kt){return r.createElement(r.Fragment,null,lt,r.createElement("span",{className:it.tooltipSpace},r.createElement(L.u,{content:r.createElement(r.Fragment,null,"When creating a ",Bt,", Prometheus exposes multiple series with the type counter."," ",(0,oe.Zg)(Kt)),placement:"bottom-start",interactive:!0},r.createElement(E.J,{name:"info-circle",size:"xs"}))))}function ut(lt){return lt?lt.includes("(summary)")?Wt(lt,"summary","https://prometheus.io/docs/concepts/metric_types/#summary"):lt.includes("(histogram)")?Wt(lt,"histogram","https://prometheus.io/docs/concepts/metric_types/#histogram"):lt:""}function pt(){let lt;return $e.fuzzySearchQuery||(lt="There are no metrics found in the data source."),Fe.labels.length>0&&(lt="There are no metrics found. Try to expand your label filters."),($e.fuzzySearchQuery||$e.selectedTypes.length>0)&&(lt="There are no metrics found. Try to expand your search and filters."),r.createElement("tr",{className:it.noResults},r.createElement("td",{colSpan:3},lt))}function we(lt){return lt.useBackend?[lt.fuzzySearchQuery]:lt.fullMetaSearch?lt.metaHaystackMatches:lt.nameHaystackMatches}return r.createElement("table",{className:it.table},r.createElement("thead",{className:it.stickyHeader},r.createElement("tr",null,r.createElement("th",{className:`${it.nameWidth} ${it.tableHeaderPadding}`},"Name"),$e.hasMetadata&&r.createElement(r.Fragment,null,r.createElement("th",{className:`${it.typeWidth} ${it.tableHeaderPadding}`},"Type"),r.createElement("th",{className:`${it.descriptionWidth} ${it.tableHeaderPadding}`},"Description")),r.createElement("th",{className:it.selectButtonWidth}," "))),r.createElement("tbody",null,r.createElement(r.Fragment,null,Be.length>0&&Be.map((lt,Bt)=>r.createElement("tr",{key:lt?.value??Bt,className:it.row},r.createElement("td",{className:it.nameOverflow},r.createElement(g(),{textToHighlight:lt?.value??"",searchWords:we($e),autoEscape:!0,highlightClassName:it.matchHighLight})),$e.hasMetadata&&yt(lt),r.createElement("td",null,r.createElement(f.zx,{size:"md",variant:"secondary",onClick:()=>vt(lt),className:it.centerButton},"Select")))),Be.length===0&&!$e.isLoading&&pt())))}const me=(Ee,Be)=>({table:(0,n.css)`
      ${Be?"":"table-layout: fixed;"}
      border-radius: ${Ee.shape.radius.default};
      width: 100%;
      white-space: ${Be?"nowrap":"normal"};
      td {
        padding: ${Ee.spacing(1)};
      }

      td,
      th {
        min-width: ${Ee.spacing(3)};
        border-bottom: 1px solid ${Ee.colors.border.weak};
      }
    `,row:(0,n.css)`
      label: row;
      border-bottom: 1px solid ${Ee.colors.border.weak}
      &:last-child {
        border-bottom: 0;
      }
    `,tableHeaderPadding:(0,n.css)`
      padding: 8px;
    `,matchHighLight:(0,n.css)`
      background: inherit;
      color: ${Ee.components.textHighlight.text};
      background-color: ${Ee.components.textHighlight.background};
    `,nameWidth:(0,n.css)`
      ${Be?"":"width: 37.5%;"}
    `,nameOverflow:(0,n.css)`
      ${Be?"":"overflow-wrap: anywhere;"}
    `,typeWidth:(0,n.css)`
      ${Be?"":"width: 15%;"}
    `,descriptionWidth:(0,n.css)`
      ${Be?"":"width: 35%;"}
    `,selectButtonWidth:(0,n.css)`
      ${Be?"":"width: 12.5%;"}
    `,stickyHeader:(0,n.css)`
      position: sticky;
      top: 0;
      background-color: ${Ee.colors.background.primary};
    `,noResults:(0,n.css)`
      text-align: center;
      color: ${Ee.colors.text.secondary};
    `,tooltipSpace:(0,n.css)`
      margin-left: 4px;
    `,centerButton:(0,n.css)`
      display: block;
      margin: auto;
      border: none;
    `}),ge=(Ee,Be)=>({modal:(0,n.css)`
      width: 85vw;
      ${Ee.breakpoints.down("md")} {
        width: 100%;
      }
      ${Ee.breakpoints.up("xl")} {
        width: 60%;
      }
    `,inputWrapper:(0,n.css)`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
    `,inputItemFirst:(0,n.css)`
      flex-basis: 40%;
      padding-right: 16px;
      ${Ee.breakpoints.down("md")} {
        padding-right: 0px;
        padding-bottom: 16px;
      }
    `,inputItem:(0,n.css)`
      flex-grow: 1;
      flex-basis: 20%;
      ${Ee.breakpoints.down("md")} {
        min-width: 100%;
      }
    `,selectWrapper:(0,n.css)`
      margin-bottom: ${Ee.spacing(1)};
    `,resultsAmount:(0,n.css)`
      color: ${Ee.colors.text.secondary};
      font-size: 0.85rem;
      padding: 0 0 4px 0;
    `,resultsData:(0,n.css)`
      margin: 4px 0 ${Ee.spacing(2)} 0;
    `,resultsDataCount:(0,n.css)`
      margin: 0;
    `,resultsDataFiltered:(0,n.css)`
      color: ${Ee.colors.text.secondary};
      text-align: center;
      border: solid 1px rgba(204, 204, 220, 0.25);
      padding: 7px;
    `,resultsDataFilteredText:(0,n.css)`
      display: inline;
      vertical-align: text-top;
    `,results:(0,n.css)`
      height: calc(80vh - 310px);
      overflow-y: scroll;
    `,resultsFooter:(0,n.css)`
      margin-top: 24px;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      position: sticky;
    `,currentlySelected:(0,n.css)`
      color: grey;
      opacity: 75%;
      font-size: 0.75rem;
    `,loadingSpinner:(0,n.css)`
      visibility: hidden;
    `,visible:(0,n.css)`
      visibility: visible;
    `,settingsBtn:(0,n.css)`
      float: right;
    `,noBorder:(0,n.css)`
      border: none;
    `,resultsPerPageLabel:(0,n.css)`
      color: ${Ee.colors.text.secondary};
      opacity: 75%;
      padding-top: 5px;
      font-size: 0.85rem;
      margin-right: 8px;
    `,resultsPerPageWrapper:(0,n.css)`
      display: flex;
    `});var Ue=e(51670),De=e(56375);const Pe=new Ue.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1});function ye(Ee,Be,Le){const[ze,Fe,$e]=Pe.search(Ee,Be,!1,1e5);let et=[],tt=new Set;if(ze&&$e){const it=(vt,yt)=>{yt&&tt.add(vt)};for(let vt=0;vt<$e.length;vt++){let yt=$e[vt];Ue.Z.highlight(Ee[Fe.idx[yt]],Fe.ranges[yt],it),et.push(Ee[Fe.idx[yt]])}Le([et,[...tt]])}else Be||Le([[],[]])}const Te=(0,De.debounce)(ye,300),{setIsLoading:nt,buildMetrics:ct,filterMetricsBackend:he,setResultsPerPage:xe,setPageNum:Me,setFuzzySearchQuery:He,setNameHaystack:Ve,setMetaHaystack:Oe,setFullMetaSearch:Ne,setIncludeNullMetadata:_e,setSelectedTypes:qe,setUseBackend:rt,setDisableTextWrap:mt,showAdditionalSettings:Je}=F.stateSlice.actions,Ae=Ee=>{const{datasource:Be,isOpen:Le,onClose:ze,onChange:Fe,query:$e,initialMetrics:et}=Ee,[tt,it]=(0,r.useReducer)(F.stateSlice.reducer,(0,F.E3)($e)),vt=(0,d.l4)(),yt=ge(vt,tt.disableTextWrap),Wt=(0,r.useCallback)(async()=>{it(nt(!0));const It=await j(Be,$e,et);it(ct({isLoading:!1,hasMetadata:It.hasMetadata,metrics:It.metrics,metaHaystackDictionary:It.metaHaystackDictionary,nameHaystackDictionary:It.nameHaystackDictionary,totalMetricCount:It.metrics.length,filteredMetricCount:It.metrics.length}))},[$e,Be,et]);(0,r.useEffect)(()=>{Wt()},[Wt]);const ut=X.map(It=>({value:It.value,label:It.value,description:It.description})),pt=(0,r.useMemo)(()=>o()(async It=>{it(nt(!0));const Zt=await k(It,$e.labels,Be);it(he({metrics:Zt,filteredMetricCount:Zt.length,isLoading:!1}))},Be.getDebounceTimeInMilliseconds()),[Be,$e]);function we(It){it(Ve(It))}function lt(It){it(Oe(It))}function Bt(It,Zt){tt.useBackend&&It===""?Wt():tt.useBackend?pt(It):Zt?Te(Object.keys(tt.metaHaystackDictionary),It,lt):Te(Object.keys(tt.nameHaystackDictionary),It,we)}const Kt=r.createElement(se,{state:tt,onChangeFullMetaSearch:()=>{const It=!tt.fullMetaSearch;it(Ne(It)),Fe({...$e,fullMetaSearch:It}),Bt(tt.fuzzySearchQuery,It)},onChangeIncludeNullMetadata:()=>{it(_e(!tt.includeNullMetadata)),Fe({...$e,includeNullMetadata:!tt.includeNullMetadata})},onChangeDisableTextWrap:()=>{it(mt()),Fe({...$e,disableTextWrap:!tt.disableTextWrap}),q("grafana_prom_metric_encycopedia_disable_text_wrap_interaction",tt,"")},onChangeUseBackend:()=>{const It=!tt.useBackend;it(rt(It)),Fe({...$e,useBackend:It}),It===!1?Wt():tt.fuzzySearchQuery!==""&&pt(tt.fuzzySearchQuery)}});return r.createElement(D.u,{"data-testid":Ke.metricModal,isOpen:Le,title:"Metrics explorer",onDismiss:ze,"aria-label":"Browse metrics",className:yt.modal},r.createElement(fe,{feedbackUrl:"https://forms.gle/DEMAJHoAMpe3e54CA"}),r.createElement("div",{className:yt.inputWrapper},r.createElement("div",{className:(0,n.cx)(yt.inputItem,yt.inputItemFirst)},r.createElement(M.I,{autoFocus:!0,"data-testid":Ke.searchMetric,placeholder:te.browse,value:tt.fuzzySearchQuery,onInput:It=>{const Zt=It.currentTarget.value??"";it(He(Zt)),Bt(Zt,tt.fullMetaSearch)}})),tt.hasMetadata&&r.createElement("div",{className:yt.inputItem},r.createElement(p.NU,{"data-testid":Ke.selectType,inputId:"my-select",options:ut,value:tt.selectedTypes,placeholder:te.type,onChange:It=>it(qe(It))})),r.createElement("div",null,r.createElement(T.$,{className:`${yt.loadingSpinner} ${tt.isLoading?yt.visible:""}`})),r.createElement("div",{className:yt.inputItem},r.createElement(R.P,{"aria-label":"Additional settings",content:Kt,placement:"bottom-end",closeButton:!1},r.createElement(O.h,{className:yt.settingsBtn},r.createElement(f.zx,{variant:"secondary",size:"md",onClick:()=>it(Je()),"data-testid":Ke.showAdditionalSettings,className:yt.noBorder},"Additional Settings"),r.createElement(f.zx,{className:yt.noBorder,variant:"secondary",icon:tt.showAdditionalSettings?"angle-up":"angle-down"}))))),r.createElement("div",{className:yt.resultsData},$e.metric&&r.createElement("i",{className:yt.currentlySelected},"Currently selected: ",$e.metric),$e.labels.length>0&&r.createElement("div",{className:yt.resultsDataFiltered},r.createElement(E.J,{name:"info-circle",size:"sm"}),r.createElement("div",{className:yt.resultsDataFilteredText},"\xA0These metrics have been pre-filtered by labels chosen in the label filters."))),r.createElement("div",{className:yt.results},tt.metrics&&r.createElement(ue,{metrics:_(tt,it),onChange:Fe,onClose:ze,query:$e,state:tt,disableTextWrap:tt.disableTextWrap})),r.createElement("div",{className:yt.resultsFooter},r.createElement("div",{className:yt.resultsAmount},"Showing ",tt.filteredMetricCount," of ",tt.totalMetricCount," results"),r.createElement(x.t,{currentPage:tt.pageNum??1,numberOfPages:z(tt).length,onNavigate:It=>{it(Me(It??1))}}),r.createElement("div",{className:yt.resultsPerPageWrapper},r.createElement("p",{className:yt.resultsPerPageLabel},"# Results per page\xA0"),r.createElement(M.I,{"data-testid":Ke.resultsPerPage,value:Y(tt.resultsPerPage,F.Xc,F.s6),placeholder:"results per page",width:10,title:"The maximum results per page is "+F.s6,type:"number",onInput:It=>{const Zt=+It.currentTarget.value;isNaN(Zt)||Zt>=F.s6||it(xe(Zt))}}))))},Ke={metricModal:"metric-modal",searchMetric:"search-metric",searchWithMetadata:"search-with-metadata",selectType:"select-type",metricCard:"metric-card",useMetric:"use-metric",searchPage:"search-page",resultsPerPage:"results-per-page",setUseBackend:"set-use-backend",showAdditionalSettings:"show-additional-settings"},Xe=" ",ne=1e3;function Z({datasource:Ee,query:Be,onChange:Le,onGetMetrics:ze,labelsFilters:Fe,metricLookupDisabled:$e,onBlur:et,variableEditor:tt}){const it=(0,d.wW)(ee),[vt,yt]=(0,r.useState)({}),Wt=c.config.featureToggles.prometheusMetricEncyclopedia,ut=[{value:"BrowseMetrics",label:"Metrics explorer",description:"Browse and filter all metrics and metadata with a fuzzy search"}],pt=(0,r.useCallback)((An,qt)=>{const On=An.label??An.value;return On?On.toLowerCase?qt.split(Xe).reduce((Zn,Aa)=>{const Ea=On.toLowerCase().includes(Aa.toLowerCase());let Nt=!1;return Wt&&(Nt=On==="Metrics explorer"),Zn&&(Ea||Nt)},!0):!0:!1},[Wt]),we=(0,r.useCallback)((An,qt)=>An.__isNew__?An.label:r.createElement(g(),{searchWords:qt.inputValue.split(Xe),textToHighlight:An.label??"",highlightClassName:it.highlight}),[it.highlight]),lt=(An,qt)=>{const On=(0,S.Vl)(An);return ce(On,qt)},Bt=An=>Ee.metricFindQuery(lt(An,Fe)).then(On=>{const wn=On.length;(0,b.My)(On),wn>On.length?yt({...vt,resultsTruncated:!0}):yt({...vt,resultsTruncated:!1});const Zn=On.map(Aa=>({label:Aa.text,value:Aa.text}));return Wt?[...ut,...Zn]:Zn}),Kt=()=>Promise.resolve([]),It=o()(An=>Bt(An),Ee.getDebounceTimeInMilliseconds()),Zt=An=>{const qt=An.data;if(qt.value==="BrowseMetrics"){const On=An.isFocused?it.focus:"";return r.createElement("div",{...An.innerProps,ref:An.innerRef,className:`${it.customOptionWidth} metric-encyclopedia-open`,onKeyDown:wn=>{wn.code==="Enter"&&yt({...vt,metricsModalOpen:!0})}},r.createElement("div",{className:`${it.customOption} ${On} metric-encyclopedia-open`},r.createElement("div",null,r.createElement("div",{className:"metric-encyclopedia-open"},qt.label),r.createElement("div",{className:`${it.customOptionDesc} metric-encyclopedia-open`},qt.description)),r.createElement(f.zx,{fill:"text",size:"sm",variant:"secondary",onClick:()=>yt({...vt,metricsModalOpen:!0}),className:"metric-encyclopedia-open"},"Open",r.createElement(E.J,{name:"arrow-right"}))))}return(0,C.Qn)(An)},yn=({children:An,maxHeight:qt,innerRef:On,innerProps:wn})=>{const Zn=(0,d.l4)(),Aa=(0,v.D)(Zn),Ea=!r.isValidElement(An)&&vt.resultsTruncated;return r.createElement("div",{...wn,className:`${Aa.menu} ${it.customMenuContainer}`,style:{maxHeight:qt},"aria-label":"Select options menu"},r.createElement(h.$,{scrollRefCallback:On,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},An),Ea&&r.createElement("div",{className:it.customMenuFooter},r.createElement("div",null,"Only the top 1000 metrics are displayed in the metric select. Use the metrics explorer to view all metrics.")))},xn=()=>r.createElement(p.qb,{isClearable:!!tt,inputId:"prometheus-metric-select",className:it.select,value:Be.metric?(0,u.E)(Be.metric):void 0,placeholder:"Select metric",allowCustomValue:!0,formatOptionLabel:we,filterOption:pt,onOpenMenu:async()=>{if($e)return;yt({isLoading:!0});const An=await ze(),qt=An.map(wn=>wn.value),On=An.length;An.length>ne&&(0,b.My)(An),yt(Wt?{metrics:[...ut,...An],isLoading:void 0,initialMetrics:qt,resultsTruncated:On>An.length}:{metrics:An,isLoading:void 0,resultsTruncated:On>An.length})},loadOptions:$e?Kt:It,isLoading:vt.isLoading,defaultOptions:vt.metrics,onChange:An=>{const qt=An?.value;qt?Wt&&qt==="BrowseMetrics"?(q("grafana_prometheus_metric_encyclopedia_open",null,"",Be),yt({...vt,metricsModalOpen:!0})):Le({...Be,metric:qt}):Le({...Be,metric:""})},components:Wt?{Option:Zt,MenuList:yn}:{MenuList:yn},onBlur:et||(()=>{})});return r.createElement(r.Fragment,null,Wt&&!Ee.lookupsDisabled&&vt.metricsModalOpen&&r.createElement(Ae,{datasource:Ee,isOpen:vt.metricsModalOpen,onClose:()=>yt({...vt,metricsModalOpen:!1}),query:Be,onChange:Le,initialMetrics:vt.initialMetrics??[]}),tt?r.createElement(s.Z,null,r.createElement(y._,{label:"Metric",labelWidth:20,tooltip:r.createElement("div",null,"Optional: returns a list of label values for the label name in the specified metric.")},xn())):r.createElement(l.s,null,r.createElement(m.S,{label:"Metric"},xn())))}const ee=Ee=>({select:(0,n.css)`
    min-width: 125px;
  `,highlight:(0,n.css)`
    label: select__match-highlight;
    background: inherit;
    padding: inherit;
    color: ${Ee.colors.warning.contrastText};
    background-color: ${Ee.colors.warning.main};
  `,customOption:(0,n.css)`
    padding: 8px;
    display: flex;
    justify-content: space-between;
    cursor: pointer;
    :hover {
      background-color: ${Ee.colors.emphasize(Ee.colors.background.primary,.1)};
    }
  `,customOptionlabel:(0,n.css)`
    color: ${Ee.colors.text.primary};
  `,customOptionDesc:(0,n.css)`
    color: ${Ee.colors.text.secondary};
    font-size: ${Ee.typography.size.xs};
    opacity: 50%;
  `,focus:(0,n.css)`
    background-color: ${Ee.colors.emphasize(Ee.colors.background.primary,.1)};
  `,customOptionWidth:(0,n.css)`
    min-width: 400px;
  `,customMenuFooter:(0,n.css)`
    flex: 0;
    display: flex;
    justify-content: space-between;
    padding: ${Ee.spacing(1.5)};
    border-top: 1px solid ${Ee.colors.border.weak};
    color: ${Ee.colors.text.secondary};
  `,customMenuContainer:(0,n.css)`
    display: flex;
    flex-direction: column;
    background: ${Ee.colors.background.primary};
    box-shadow: ${Ee.shadows.z3};
  `}),ce=(Ee,Be)=>{const Le=Be?be(Be):[];return`label_values({__name__=~".*${Ee}"${Le?Le.join(""):""}},__name__)`},be=Ee=>Ee.map(Be=>`,${Be.label}="${Be.value}"`)},62254:(G,A,e)=>{"use strict";e.d(A,{U:()=>R});var n=e(85960),a=e(27170),o=e(64065),r=e(77530),i=e(36862),g=e(66681),u=e(56375),l=e(25673),m=e(33614),c=e(73688),d=e(81368),f=e(114),E=e(97812),v=e.n(E),h=e(11248),p=e(92369),s=e(70613),y=e(37890),C=e(27436);function b({item:x,defaultOp:I,onChange:L,onDelete:P,onGetLabelNames:N,onGetLabelValues:F,invalidLabel:U,invalidValue:j,getLabelValuesAutofillSuggestions:V,debounceDuration:_}){const[H,z]=(0,n.useState)({}),[K,Y]=(0,n.useState)(!1),[k,q]=(0,n.useState)(!1),X=(re=x.op)=>S.find(fe=>fe.label===re)?.isMultiValue,te=re=>{if(re){const fe=/\(([^)]+)\)/,ie=re?.match(fe);return ie&&ie[0].indexOf("|")>0?[re]:re.indexOf("|")>0?re.split("|"):[re]}return[]},se=v()(re=>V(re,x.label),_),de=x?.value??"";return n.createElement("div",{key:de,"data-testid":"prometheus-dimensions-filter-item"},n.createElement(s.B,null,n.createElement(C.Ph,{placeholder:"Select label","aria-label":p.wl.components.QueryBuilder.labelSelect,inputId:"prometheus-dimensions-filter-item-key",width:"auto",value:x.label?(0,h.E)(x.label):null,allowCustomValue:!0,onOpenMenu:async()=>{z({isLoadingLabelNames:!0});const re=await N(x);Y(!0),z({labelNames:re,isLoadingLabelNames:void 0})},onCloseMenu:()=>{Y(!1)},isOpen:K,isLoading:H.isLoadingLabelNames??!1,options:H.labelNames,onChange:re=>{re.label&&L({...x,op:x.op??I,label:re.label})},invalid:U}),n.createElement(C.Ph,{"aria-label":p.wl.components.QueryBuilder.matchOperatorSelect,className:"query-segment-operator",value:(0,h.E)(x.op??I),options:S,width:"auto",onChange:re=>{re.value!=null&&L({...x,op:re.value,value:X(re.value)?x.value:te(x?.value)[0]})}}),n.createElement(C.qb,{placeholder:"Select value","aria-label":p.wl.components.QueryBuilder.valueSelect,inputId:"prometheus-dimensions-filter-item-value",width:"auto",value:X()?te(de).map(h.E):te(de).map(h.E)[0],allowCustomValue:!0,onOpenMenu:async()=>{z({isLoadingLabelValues:!0});const re=await F(x);(0,o.My)(re),q(!0),z({...H,labelValues:re,isLoadingLabelValues:void 0})},onCloseMenu:()=>{q(!1)},isOpen:k,defaultOptions:H.labelValues,isMulti:X(),isLoading:H.isLoadingLabelValues,loadOptions:se,onChange:re=>{if(re.value)L({...x,value:re.value,op:x.op??I});else{const fe=re.map(ie=>ie.label).join("|");L({...x,value:fe,op:x.op??I})}},invalid:j}),n.createElement(y._,{"aria-label":`remove-${x.label}`,icon:"times",variant:"secondary",onClick:P})))}const S=[{label:"=",value:"=",isMultiValue:!1},{label:"!=",value:"!=",isMultiValue:!1},{label:"<",value:"<",isMultiValue:!1},{label:">",value:">",isMultiValue:!1},{label:"=~",value:"=~",isMultiValue:!0},{label:"!~",value:"!~",isMultiValue:!0}],D="Select at least 1 label filter (label and value)";function M({labelsFilters:x,onChange:I,onGetLabelNames:L,onGetLabelValues:P,labelFilterRequired:N,getLabelValuesAutofillSuggestions:F,debounceDuration:U,variableEditor:j}){const V="=",[_,H]=(0,n.useState)([{op:V}]);(0,n.useEffect)(()=>{x.length>0?H(x):H([{op:V}])},[x]);const z=k=>{H(k);const q=k.filter(X=>X.label!=null&&X.value!=null);(0,u.isEqual)(q,x)||I(q)},K=_.some(k=>k.label&&k.value),Y=()=>n.createElement(l.k,{items:_,onChange:z,renderItem:(k,q,X)=>n.createElement(b,{debounceDuration:U,item:k,defaultOp:V,onChange:q,onDelete:X,onGetLabelNames:L,onGetLabelValues:P,invalidLabel:N&&!k.label,invalidValue:N&&!k.value,getLabelValuesAutofillSuggestions:F})});return n.createElement(n.Fragment,null,j?n.createElement(d.Z,null,n.createElement("div",{className:(0,g.cx)((0,g.css)`
              display: flex;
            `)},n.createElement(f.W,{width:20,tooltip:n.createElement("div",null,"Optional: used to filter the metric select for this query type.")},"Label filters"),Y())):n.createElement(m.s,null,n.createElement(c.S,{label:"Label filters",error:D,invalid:N&&!K},Y())))}var T=e(10566);function R({datasource:x,query:I,onChange:L,onBlur:P,variableEditor:N}){const F=Y=>{L({...I,labels:Y})},U=(0,n.useCallback)(async Y=>{const k=x.getVariables(),q=await Y;return[...k.map(X=>({label:X,value:X})),...q.map(X=>({label:X.value,value:X.value,title:X.description}))]},[x]),j=async Y=>{if(!I.metric)return await x.languageProvider.fetchLabels(),x.languageProvider.getLabelKeys().map(te=>({value:te}));const k=I.labels.filter(te=>te!==Y);k.push({label:"__name__",op:"=",value:I.metric});const q=r.Z.renderLabels(k);let X;return x.hasLabelsMatchAPISupport()?X=await x.languageProvider.fetchSeriesLabelsMatch(q):X=await x.languageProvider.fetchSeriesLabels(q),Object.keys(X).filter(te=>!k.find(se=>se.label===te)).map(te=>({value:te}))},V=(Y,k)=>{const q={label:k??"__name__",op:"=~",value:(0,i.Vl)(`.*${Y}`)},X=I.labels.filter(re=>re.label!==q.label);X.push(q),I.metric&&X.push({label:"__name__",op:"=",value:I.metric});const te=X.map(re=>({...re,label:x.interpolateString(re.label),value:x.interpolateString(re.value)})),se=r.Z.renderLabels(te);let de;return x.hasLabelsMatchAPISupport()?de=H(q,se):de=_(q,se),de.then(re=>((0,o.My)(re),re))},_=(Y,k)=>{if(!Y.label)return Promise.resolve([]);const q=x.languageProvider.fetchSeries(k),X=x.interpolateString(Y.label);return q.then(te=>{const se=new Set;return te.forEach(de=>{const re=de[X];se.add(re)}),Array.from(se).map(de=>({label:de,value:de}))})},H=(Y,k)=>Y.label?x.languageProvider.fetchSeriesValuesWithMatch(Y.label,k).then(q=>q.map(X=>({value:X,label:X}))):Promise.resolve([]),z=async Y=>{if(!Y.label)return[];if(!I.metric)return(await x.languageProvider.getLabelValues(Y.label)).map(te=>({value:te}));const k=I.labels.filter(te=>te!==Y);k.push({label:"__name__",op:"=",value:I.metric});const q=k.map(te=>({...te,label:x.interpolateString(te.label),value:x.interpolateString(te.value)})),X=r.Z.renderLabels(q);return x.hasLabelsMatchAPISupport()?H(Y,X):_(Y,X)},K=(0,n.useCallback)(()=>U(O(x,I)),[x,I,U]);return n.createElement(n.Fragment,null,n.createElement(T.kU,{query:I,onChange:L,onGetMetrics:K,datasource:x,labelsFilters:I.labels,metricLookupDisabled:x.lookupsDisabled,onBlur:P||(()=>{}),variableEditor:N}),n.createElement(M,{debounceDuration:x.getDebounceTimeInMilliseconds(),getLabelValuesAutofillSuggestions:V,labelsFilters:I.labels,onChange:F,onGetLabelNames:Y=>U(j(Y)),onGetLabelValues:Y=>U(z(Y)),variableEditor:N}))}async function O(x,I){x.languageProvider.metricsMetadata||await x.languageProvider.loadMetricsMetadata(),x.languageProvider.metricsMetadata||(x.languageProvider.metricsMetadata={});let L;if(I.labels.length>0){const P=r.Z.renderLabels(I.labels);L=(await x.languageProvider.getSeries(P,!0)).__name__??[]}else L=await x.languageProvider.getLabelValues("__name__")??[];return L.map(P=>({value:P,description:(0,a.UQ)(P,x.languageProvider.metricsMetadata)}))}},91248:(G,A,e)=>{"use strict";e.d(A,{A:()=>m,n:()=>c});var n=e(85960),a=e(13086),o=e(87438),r=e(77530),i=e(98100),g=e(88556),u=e(99149),l=e(16972);const m="Fetch all series matching metric name and label filters.",c=n.memo(({query:d})=>{const f=(0,i._)(d||"").query,E={grammar:o.ZP,name:"promql"};return n.createElement(a.K,{gap:.5,direction:"column"},n.createElement(g.B,{stepNumber:1,title:n.createElement(l.U,{query:`${f.metric} ${r.Z.renderLabels(f.labels)}`,lang:E})},m),n.createElement(u.V,{stepNumber:2,queryModeller:r.Z,query:f,lang:E}))});c.displayName="PromQueryBuilderExplained"},68513:(G,A,e)=>{"use strict";e.d(A,{j:()=>g});var n=e(66681),a=e(85960),o=e(47257),r=e(8864),i=e(91248);function g(l){const{query:m,datasource:c,range:d,onRunQuery:f,onChange:E,data:v,app:h,showExplain:p}=l,s=(0,o.wW)(u);return a.createElement("div",{className:s.wrapper},a.createElement(r.Z,{datasource:c,query:m,range:d,onRunQuery:f,onChange:E,history:[],data:v,app:h}),p&&a.createElement(i.n,{query:m.expr}))}const u=l=>({wrapper:(0,n.css)`
      .gf-form {
        margin-bottom: 0;
      }
    `})},74463:(G,A,e)=>{"use strict";e.d(A,{E3:()=>i,Gw:()=>g,Xc:()=>a,s6:()=>o,stateSlice:()=>r});var n=e(20079);const a=100,o=1e3,r=(0,n.oM)({name:"metrics-modal-state",initialState:i(),reducers:{filterMetricsBackend:(u,l)=>{u.metrics=l.payload.metrics,u.filteredMetricCount=l.payload.filteredMetricCount,u.isLoading=l.payload.isLoading},buildMetrics:(u,l)=>{u.isLoading=l.payload.isLoading,u.metrics=l.payload.metrics,u.hasMetadata=l.payload.hasMetadata,u.metaHaystackDictionary=l.payload.metaHaystackDictionary,u.nameHaystackDictionary=l.payload.nameHaystackDictionary,u.totalMetricCount=l.payload.totalMetricCount,u.filteredMetricCount=l.payload.filteredMetricCount},setIsLoading:(u,l)=>{u.isLoading=l.payload},setFilteredMetricCount:(u,l)=>{u.filteredMetricCount=l.payload},setResultsPerPage:(u,l)=>{u.resultsPerPage=l.payload},setPageNum:(u,l)=>{u.pageNum=l.payload},setFuzzySearchQuery:(u,l)=>{u.fuzzySearchQuery=l.payload,u.pageNum=1},setNameHaystack:(u,l)=>{u.nameHaystackOrder=l.payload[0],u.nameHaystackMatches=l.payload[1]},setMetaHaystack:(u,l)=>{u.metaHaystackOrder=l.payload[0],u.metaHaystackMatches=l.payload[1]},setFullMetaSearch:(u,l)=>{u.fullMetaSearch=l.payload,u.pageNum=1},setIncludeNullMetadata:(u,l)=>{u.includeNullMetadata=l.payload,u.pageNum=1},setSelectedTypes:(u,l)=>{u.selectedTypes=l.payload,u.pageNum=1},setUseBackend:(u,l)=>{u.useBackend=l.payload,u.fullMetaSearch=!1,u.pageNum=1},setDisableTextWrap:u=>{u.disableTextWrap=!u.disableTextWrap},showAdditionalSettings:u=>{u.showAdditionalSettings=!u.showAdditionalSettings}}});function i(u){return{isLoading:!0,metrics:[],hasMetadata:!0,metaHaystackDictionary:{},metaHaystackMatches:[],metaHaystackOrder:[],nameHaystackDictionary:{},nameHaystackOrder:[],nameHaystackMatches:[],totalMetricCount:0,filteredMetricCount:null,resultsPerPage:a,pageNum:1,fuzzySearchQuery:"",fullMetaSearch:u?.fullMetaSearch??!1,includeNullMetadata:u?.includeNullMetadata??!0,selectedTypes:[],useBackend:u?.useBackend??!1,disableTextWrap:u?.disableTextWrap??!1,showAdditionalSettings:!1}}function g(u){return{useBackend:u?.useBackend??!1,disableTextWrap:u?.disableTextWrap??!1,fullMetaSearch:u?.fullMetaSearch??!1,includeNullMetadata:u.includeNullMetadata??!1}}},98100:(G,A,e)=>{"use strict";e.d(A,{_:()=>r});var n=e(88190),a=e(62989),o=e(36862);function r(p){const s=(0,o.bU)(p),C=n.E2.parse(s).topNode,S={query:{metric:"",labels:[],operations:[]},errors:[]};try{g(s,C,S)}catch(D){console.error(D),D instanceof Error&&S.errors.push({text:D.message})}return h(S.query)&&(S.errors=[]),i(p)&&(S.errors=[]),S}function i(p){const s={query:{metric:"",labels:[],operations:[]},errors:[]};p=p.replace(/\$__interval/g,"1s"),p=p.replace(/\$__interval_ms/g,"1000"),p=p.replace(/\$__rate_interval/g,"1s"),p=p.replace(/\$__range_ms/g,"1000"),p=p.replace(/\$__range_s/g,"1"),p=p.replace(/\$__range/g,"1s");const C=n.E2.parse(p).topNode;try{g(p,C,s)}catch{return!1}return s.errors.length===0}function g(p,s,y){const C=y.query;switch(s.type.id){case n.tz:{C.metric=(0,o.KF)(p,s);break}case n.Zm:{C.labels.push(l(p,s));const b=s.getChild(o._A);b&&y.errors.push((0,o.wf)(p,b));break}case n.lX:{c(p,s,y);break}case n.aZ:{d(p,s,y);break}case n.vU:{E(p,s,y);break}case o._A:{if(u(s))break;y.errors.push((0,o.wf)(p,s));break}default:{s.type.id===n.Om&&y.errors.push((0,o.wf)(p,s));let b=s.firstChild;for(;b;)g(p,b,y),b=b.nextSibling}}}function u(p){return p.prevSibling?.type.id===n.wi&&p.prevSibling?.firstChild?.type.id===n.m6}function l(p,s){const y=(0,o.KF)(p,s.getChild(n.m0)),C=(0,o.KF)(p,s.getChild(n.e8)),b=(0,o.KF)(p,s.getChild(n.nv)).replace(/"/g,"");return{label:y,op:C,value:b}}const m=["changes","rate","irate","increase","delta"];function c(p,s,y){const C=y.query,b=s.getChild(n.hT),S=(0,o.KF)(p,b),M=s.getChild(n.yY).getChild(n.mW),T=[];let R="";if(m.includes(S)||S.endsWith("_over_time")){let x=(0,o.KF)(p,s).match(/\[(.+)\]/);x?.[1]&&(R=x[1],T.push(x[1]))}const O={id:S,params:T};if(C.operations.unshift(O),M){if((0,o.KF)(p,M)===R+"]")return;f(p,M,y,O)}}function d(p,s,y){const C=y.query,b=s.getChild(n.Ki);let S=(0,o.KF)(p,b);const D=s.getChild(n.Ip),M=[];D&&(D.getChild("By")&&S&&(S=`__${S}_by`),D.getChild(n.yN)&&(S=`__${S}_without`),M.push(...(0,o.ff)(p,D,n.Tm)));const R=s.getChild(n.yY).getChild(n.mW),x=R?.getChild(n.wi)?.getChild(n.vU);x&&y.errors.push({text:"Query parsing is ambiguous.",from:x.from,to:x.to});const I={id:S,params:[]};C.operations.unshift(I),f(p,R,y,I),I.params.push(...M)}function f(p,s,y,C){if(s)switch(s.type.id){case n.wi:case n.mW:{let b=s.firstChild;for(;b;){const D=b.getChild(n.wi)?.getChild(n.vU);D&&y.errors.push({text:"Query parsing is ambiguous.",from:D.from,to:D.to}),f(p,b,y,C),b=b.nextSibling}break}case n.iy:{C.params.push(parseFloat((0,o.KF)(p,s)));break}case n.nv:{C.params.push((0,o.KF)(p,s).replace(/"/g,""));break}default:g(p,s,y)}}function E(p,s,y){const C=y.query,b=s.firstChild,S=(0,o.KF)(p,b.nextSibling),D=v(p,s.getChild(n.v3)),M=s.lastChild,T=a.PX[S],R=b.getChild(n.iy),O=M.getChild(n.iy),x=M.getChild(n.vU);if(R||g(p,b,y),O)C.operations.push((0,o.Es)(T,p,M,!!D?.isBool));else if(x){const I=(0,o.ge)(M);I?.type.id===n.iy&&C.operations.push((0,o.Es)(T,p,I,!!D?.isBool)),g(p,M,y)}else{C.binaryQueries=C.binaryQueries||[];const I={operator:S,query:{metric:"",labels:[],operations:[]}};D?.isMatcher&&(I.vectorMatchesType=D.matchType,I.vectorMatches=D.matches),C.binaryQueries.push(I),g(p,M,{query:I.query,errors:y.errors})}}function v(p,s){if(s){if(s.getChild("Bool"))return{isBool:!0,isMatcher:!1};{const y=s.getChild(n.Wc);return y?{isMatcher:!0,isBool:!1,matches:(0,o.KF)(p,y.getChild(n.XT)?.getChild(n.pQ)),matchType:y.getChild(n.On)?"on":"ignoring"}:void 0}}}function h(p){return p.labels.length===0&&p.operations.length===0&&!p.metric}},61746:(G,A,e)=>{"use strict";e.d(A,{x:()=>o});var n=e(73039),a=e(10596);class o{constructor(i){this.categories=[],this.operationsRegistry=new n.B(i)}setOperationCategories(i){this.categories=i}getOperationsForCategory(i){return this.operationsRegistry.list().filter(g=>g.category===i&&!g.hideFromList)}getAlternativeOperations(i){return this.operationsRegistry.list().filter(g=>g.alternativesKey&&g.alternativesKey===i)}getCategories(){return this.categories}getOperationDef(i){return this.operationsRegistry.getIfExists(i)}renderOperations(i,g){for(const u of g){const l=this.operationsRegistry.getIfExists(u.id);if(!l)throw new Error(`Could not find operation ${u.id} in the registry`);i=l.renderer(u,l,i)}return i}renderBinaryQueries(i,g){if(g)for(const u of g)i=`${this.renderBinaryQuery(i,u)}`;return i}renderBinaryQuery(i,g){let u=i+` ${g.operator} `;return g.vectorMatches&&(u+=`${g.vectorMatchesType}(${g.vectorMatches}) `),u+this.renderQuery(g.query,!0)}renderLabels(i){if(i.length===0)return"";let g="{";for(const u of i)g!=="{"&&(g+=", "),g+=`${u.label}${u.op}"${u.value}"`;return g+"}"}renderQuery(i,g){let u=`${i.metric??""}${this.renderLabels(i.labels)}`;return u=this.renderOperations(u,i.operations),!g&&this.hasBinaryOp(i)&&i.binaryQueries?.length&&(u=`(${u})`),u=this.renderBinaryQueries(u,i.binaryQueries),g&&(this.hasBinaryOp(i)||i.binaryQueries?.length)&&(u=`(${u})`),u}hasBinaryOp(i){return i.operations.find(g=>this.getOperationDef(g.id)?.category===a.CM.BinaryOps)!==void 0}}},88556:(G,A,e)=>{"use strict";e.d(A,{B:()=>i});var n=e(66681),a=e(85960),o=e(55583),r=e(47257);function i({title:u,stepNumber:l,markdown:m,children:c}){const d=(0,r.wW)(g);return a.createElement("div",{className:d.box},l!==void 0&&a.createElement("div",{className:d.stepNumber},l),a.createElement("div",{className:d.boxInner},u&&a.createElement("div",{className:d.header},a.createElement("span",null,u)),a.createElement("div",{className:d.body},m&&a.createElement("div",{dangerouslySetInnerHTML:{__html:(0,o.a)(m)}}),c)))}const g=u=>({box:(0,n.css)({background:u.colors.background.secondary,padding:u.spacing(1),borderRadius:u.shape.radius.default,position:"relative"}),boxInner:(0,n.css)({marginLeft:u.spacing(4)}),stepNumber:(0,n.css)({fontWeight:u.typography.fontWeightMedium,background:u.colors.secondary.main,width:"20px",height:"20px",borderRadius:u.shape.radius.circle,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"10px",left:"11px",fontSize:u.typography.bodySmall.fontSize}),header:(0,n.css)({paddingBottom:u.spacing(.5),display:"flex",alignItems:"center",fontFamily:u.typography.fontFamilyMonospace}),body:(0,n.css)({color:u.colors.text.secondary,"p:last-child":{margin:0},a:{color:u.colors.text.link,textDecoration:"underline"}})})},99149:(G,A,e)=>{"use strict";e.d(A,{V:()=>r});var n=e(85960),a=e(88556),o=e(16972);function r({query:i,queryModeller:g,stepNumber:u,lang:l,onMouseEnter:m,onMouseLeave:c}){return n.createElement(n.Fragment,null,i.operations.map((d,f)=>{const E=g.getOperationDef(d.id);if(!E)return`Operation ${d.id} not found`;const v=E.renderer(d,E,"<expr>"),h=E.explainHandler?E.explainHandler(d,E):E.documentation??"no docs";return n.createElement("div",{key:f,onMouseEnter:()=>m?.(d,f),onMouseLeave:()=>c?.(d,f)},n.createElement(a.B,{stepNumber:f+u,title:n.createElement(o.U,{query:v,lang:l}),markdown:h}))}))}},16972:(G,A,e)=>{"use strict";e.d(A,{U:()=>g});var n=e(66681),a=e(19609),o=e.n(a),r=e(85960),i=e(47257);function g({query:l,lang:m,className:c}){const d=(0,i.l4)(),f=u(d),E=o().highlight(l,m.grammar,m.name);return r.createElement("div",{className:(0,n.cx)(f.editorField,"prism-syntax-highlight",c),"aria-label":"selector",dangerouslySetInnerHTML:{__html:E}})}const u=l=>({editorField:(0,n.css)({fontFamily:l.typography.fontFamilyMonospace,fontSize:l.typography.bodySmall.fontSize})})},80988:(G,A,e)=>{"use strict";e.d(A,{IT:()=>s,NZ:()=>d,PP:()=>E,Sp:()=>S,Z3:()=>y,ZI:()=>T,Zc:()=>R,e8:()=>c,i1:()=>h,j8:()=>M,kq:()=>p,pS:()=>u,t7:()=>v,zJ:()=>l});var n=e(56375),a=e.n(n),o=e(53136),r=e.n(o),i=e(18537),g=e(10596);function u(O,x,I){const L=f(O,x,I),P=O.id+"(";return I&&L.push(I),P+L.join(", ")+")"}function l(O,x,I){const L=f(O,x,I),P=O.id+"(";return I&&L.unshift(I),P+L.join(", ")+")"}function m(O,x,I,L){if(x.params.length<2)throw`Cannot render a function with params of length [${x.params.length}]`;let P=(O.params??[])[0]??"5m";const N=f({...O,params:O.params.slice(1)},{...x,params:x.params.slice(1),defaultParams:x.defaultParams.slice(1)},I),F=O.id+"(";return I&&(L?N.push(`${I}[${P}]`):N.unshift(`${I}[${P}]`)),F+N.join(", ")+")"}function c(O,x,I){return m(O,x,I,!1)}function d(O,x,I){return m(O,x,I,!0)}function f(O,x,I){return(O.params??[]).map((L,P)=>x.params[P].type==="string"?'"'+L+'"':L)}function E(O,x){const I={id:O.id,params:O.defaultParams};return{...x,operations:[...x.operations,I]}}function v(O){return(0,n.capitalize)(O.replace(/_/g," "))}function h(O,x){return`operations.${O}.param.${x}`}function p(O=!1){const x={name:"Range",type:"string",options:[{label:"$__interval",value:"$__interval"},{label:"1m",value:"1m"},{label:"5m",value:"5m"},{label:"10m",value:"10m"},{label:"1h",value:"1h"},{label:"24h",value:"24h"}]};return O&&x.options.unshift({label:"$__rate_interval",value:"$__rate_interval"}),x}function s(O,x={}){return[{id:O,name:v(O),params:[{name:"By label",type:"string",restParam:!0,optional:!0}],defaultParams:[],alternativesKey:"plain aggregations",category:g.CM.Aggregations,renderer:u,paramChangedHandler:T(`__${O}_by`),explainHandler:S(O,""),addOperationHandler:E,...x},{id:`__${O}_by`,name:`${v(O)} by`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:i.g}],defaultParams:[""],alternativesKey:"aggregations by",category:g.CM.Aggregations,renderer:C(O),paramChangedHandler:M(O),explainHandler:S(O,"by"),addOperationHandler:E,hideFromList:!0,...x},{id:`__${O}_without`,name:`${v(O)} without`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:i.g}],defaultParams:[""],alternativesKey:"aggregations by",category:g.CM.Aggregations,renderer:b(O),paramChangedHandler:M(O),explainHandler:S(O,"without"),addOperationHandler:E,hideFromList:!0,...x}]}function y(O,x,I={}){const L=s(O,I);return L[0].params.unshift(...x.params),L[1].params.unshift(...x.params),L[2].params.unshift(...x.params),L[0].defaultParams=x.defaultParams,L[1].defaultParams=[...x.defaultParams,""],L[2].defaultParams=[...x.defaultParams,""],L[1].renderer=D(O),L[2].renderer=D(O),L}function C(O){return function(I,L,P){return`${O} by(${I.params.join(", ")}) (${P})`}}function b(O){return function(I,L,P){return`${O} without(${I.params.join(", ")}) (${P})`}}function S(O,x){return function(L){const P=L.params.map(F=>`\`${F}\``).join(" and "),N=r()("label",L.params.length);switch(x){case"by":return`Calculates ${O} over dimensions while preserving ${N} ${P}.`;case"without":return`Calculates ${O} over the dimensions ${P}. All other labels are preserved.`;default:return`Calculates ${O} over the dimensions.`}}}function D(O){return function(I,L,P){const N=L.params.findIndex(j=>j.restParam),F=I.params.slice(0,N),U=I.params.slice(N);return`${O} by(${U.join(", ")}) (${F.map((j,V)=>L.params[V].type==="string"?`"${j}"`:j).join(", ")}, ${P})`}}function M(O){return function(I,L,P){return L.params.length<P.params.length?{...L,id:O}:L}}function T(O){return function(I,L,P){return L.params.length===P.params.length?{...L,id:O}:L}}function R(O,x){if(!O.label||!O.op||!O.value||x.length<2)return!1;const I=O.op.toString().startsWith("!");return x.filter(N=>N.label===O.label&&N.value===O.value&&N.op!==O.op).some(N=>!!(I&&N?.op?.toString().startsWith("!")===!1||I===!1&&N?.op?.toString().startsWith("!")))}},36862:(G,A,e)=>{"use strict";e.d(A,{Es:()=>m,KF:()=>l,Tt:()=>u,Vl:()=>h,_A:()=>n,bU:()=>i,ff:()=>c,ge:()=>a,wf:()=>o});const n=0;function a(p){return p.firstChild?a(p.firstChild):p}function o(p,s){return{text:l(p,s),from:s.from,to:s.to,parentType:s.parent?.name}}const r=/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g;function i(p){return p.replace(r,(s,y,C,b,S,D,M)=>{const T=b||M;let R=y,O="0";return C&&(R=C,O="1"),S&&(R=S,O="2"),`__V_${O}__`+R+"__V__"+(T?"__F__"+T+"__F__":"")})}const g=[(p,s)=>`$${p}`,(p,s)=>`[[${p}${s?`:${s}`:""}]]`,(p,s)=>`\${${p}${s?`:${s}`:""}}`];function u(p){return p.replace(/__V_(\d)__(.+?)__V__(?:__F__(\w+)__F__)?/g,(s,y,C,b)=>g[parseInt(y,10)](C,b))}function l(p,s){return s?u(p.substring(s.from,s.to)):""}function m(p,s,y,C){const b=[parseFloat(l(s,y))];return p.comparison&&b.push(C),{id:p.id,params:b}}function c(p,s,y){if(s.type.id===y||s.name===y)return[l(p,s)];const C=[];let b=0,S=s.childAfter(b);for(;S;)C.push(...c(p,S,y)),b=S.to,S=s.childAfter(b);return C}function d(p,s){if(!s){console.log("<empty>");return}const y=f(p,s),C=E(y);if(!C){console.log("<empty>");return}console.log(C)}function f(p,s){const y={},C=v(p,s),b=[];let S=0,D=s.childAfter(S);for(;D;)b.push(f(p,D)),S=D.to,D=s.childAfter(S);return y.name=C,y.children=b,y}function E(p,s={lastChild:!0,indent:""}){const y=p.name,{lastChild:C,indent:b}=s;let D=(b!==""?b+(C?"\u2514\u2500":"\u251C\u2500"):"")+y;const M=p.children;return M.forEach((T,R)=>{const O=R===M.length-1;D+=`
`+E(T,{lastChild:O,indent:b+(C?"  ":"\u2502 ")})}),D}function v(p,s){return s.name+": "+l(p,s)}const h=p=>p.split(" ").map(y=>`${y}.*`).join("")},33485:(G,A,e)=>{"use strict";e.d(A,{c:()=>n});var n=(a=>(a.Code="code",a.Builder="builder",a))(n||{})},10596:(G,A,e)=>{"use strict";e.d(A,{CM:()=>n,Fz:()=>o,G3:()=>a});var n=(r=>(r.Aggregations="Aggregations",r.RangeFunctions="Range functions",r.Functions="Functions",r.BinaryOps="Binary operations",r.Trigonometric="Trigonometric",r.Time="Time Functions",r))(n||{}),a=(r=>(r.Abs="abs",r.Absent="absent",r.AbsentOverTime="absent_over_time",r.Acos="acos",r.Acosh="acosh",r.Asin="asin",r.Asinh="asinh",r.Atan="atan",r.Atanh="atanh",r.Avg="avg",r.AvgOverTime="avg_over_time",r.BottomK="bottomk",r.Ceil="ceil",r.Changes="changes",r.Clamp="clamp",r.ClampMax="clamp_max",r.ClampMin="clamp_min",r.Cos="cos",r.Cosh="cosh",r.Count="count",r.CountOverTime="count_over_time",r.CountScalar="count_scalar",r.CountValues="count_values",r.DayOfMonth="day_of_month",r.DayOfWeek="day_of_week",r.DayOfYear="day_of_year",r.DaysInMonth="days_in_month",r.Deg="deg",r.Delta="delta",r.Deriv="deriv",r.DropCommonLabels="drop_common_labels",r.Exp="exp",r.Floor="floor",r.Group="group",r.HistogramQuantile="histogram_quantile",r.HoltWinters="holt_winters",r.Hour="hour",r.Idelta="idelta",r.Increase="increase",r.Irate="irate",r.LabelJoin="label_join",r.LabelReplace="label_replace",r.Last="last",r.LastOverTime="last_over_time",r.Ln="ln",r.Log10="log10",r.Log2="log2",r.Max="max",r.MaxOverTime="max_over_time",r.Min="min",r.MinOverTime="min_over_time",r.Minute="minute",r.Month="month",r.Pi="pi",r.PredictLinear="predict_linear",r.Present="present",r.PresentOverTime="present_over_time",r.Quantile="quantile",r.QuantileOverTime="quantile_over_time",r.Rad="rad",r.Rate="rate",r.Resets="resets",r.Round="round",r.Scalar="scalar",r.Sgn="sgn",r.Sin="sin",r.Sinh="sinh",r.Sort="sort",r.SortDesc="sort_desc",r.Sqrt="sqrt",r.Stddev="stddev",r.StddevOverTime="stddev_over_time",r.Sum="sum",r.SumOverTime="sum_over_time",r.Tan="tan",r.Tanh="tanh",r.Time="time",r.Timestamp="timestamp",r.TopK="topk",r.Vector="vector",r.Year="year",r.Addition="__addition",r.Subtraction="__subtraction",r.MultiplyBy="__multiply_by",r.DivideBy="__divide_by",r.Modulo="__modulo",r.Exponent="__exponent",r.NestedQuery="__nested_query",r.EqualTo="__equal_to",r.NotEqualTo="__not_equal_to",r.GreaterThan="__greater_than",r.LessThan="__less_than",r.GreaterOrEqual="__greater_or_equal",r.LessOrEqual="__less_or_equal",r))(a||{}),o=(r=>(r.Rate="rate",r.Histogram="histogram",r.Binary="binary",r))(o||{})},12117:(G,A,e)=>{"use strict";e.d(A,{tQ:()=>f,Ji:()=>c});var n=e(18678),a=e(85745),o=e(87500),r=e(74091),i=e(90857),g=e(43183),u=e(28870);function l(E,v){let[h]=E,[p]=v,s=h.length,y=h[0],C=h[s-1],b=p.length,S=p[0],D=p[b-1],M;if(s)if(b){if(S>C)M=E.map((T,R)=>E[R].concat(v[R]));else if(D<y)M=v.map((T,R)=>v[R].concat(E[R]));else if(S<=y&&D>=C)M=v;else if(!(S>y&&D<C)){if(S>=y){let T=(0,u.Ko)(S,h);T=h[T]<S?T-1:T,M=E.map((R,O)=>E[O].slice(0,T).concat(v[O]))}else if(D>=y){let T=(0,u.Ko)(D,h);T=h[T]<D?T:T+1,M=v.map((R,O)=>v[O].concat(E[O].slice(T)))}}}else M=E;else b?M=v:M=[[]];return M}function m(E,v,h){let[p,...s]=E,y,C;return p[0]<v&&(y=(0,u.Ko)(v,p),p[y]<v&&y++),p[p.length-1]>h&&(C=(0,u.Ko)(h,p),p[C]>h&&C--),(y!=null||C!=null)&&(p=p.slice(y??0,C),s=s.map(b=>b.slice(y??0,C))),[p,...s]}const c="10m",d=E=>`${E.type}|${E.name}|${JSON.stringify(E.labels??"")}`;class f{constructor(v){this.sendEventsInterval=6e4*10,this.pendingRequestIdsToTargSigs=new Map,this.pendingAccumulatedEvents=new Map,this.cache=new Map,this.sendPendingTrackingEvents=()=>{const p=this.pendingAccumulatedEvents.entries();for(let[s,y]of p)if(!y.sent){const C={datasource:y.datasource.toString(),requestCount:y.requestCount.toString(),savedBytesTotal:y.savedBytesTotal.toString(),initialRequestSize:y.initialRequestSize.toString(),lastRequestSize:y.lastRequestSize.toString(),panelId:y.panelId.toString(),dashId:y.dashId.toString(),expr:y.expr.toString(),refreshIntervalMs:y.refreshIntervalMs.toString(),from:y.from.toString(),queryRangeSeconds:y.queryRangeSeconds.toString()};i.config.featureToggles.prometheusIncrementalQueryInstrumentation?(0,g.ff)("grafana_incremental_queries_profile",C):r.s.api.pushEvent&&r.s.api.pushEvent("incremental query response size",C,"no-interaction",{skipDedupe:!0}),this.pendingAccumulatedEvents.set(s,{...y,sent:!0,requestCount:0,savedBytesTotal:0,initialRequestSize:0,lastRequestSize:0})}};const h=v.overlapString;if((0,n.jO)(h)){const p=(0,n.RA)(h);this.overlapWindowMs=(0,n.iX)(p)}else{const p=(0,n.RA)(c);this.overlapWindowMs=(0,n.iX)(p)}(i.config.grafanaJavascriptAgent.enabled||i.config.featureToggles?.prometheusIncrementalQueryInstrumentation)&&v.profileFunction!==void 0?(this.profile(),this.shouldProfile=!0):this.shouldProfile=!1,this.getProfileData=v.profileFunction,this.getTargetSignature=v.getTargetSignature}profile(){typeof PerformanceObserver=="function"&&(this.perfObeserver=new PerformanceObserver(v=>{v.getEntries().forEach(h=>{const p=h,s=typeof p?.transferSize=="number";if(p?.initiatorType==="fetch"&&s){let y=p.name;if(y.includes("/api/ds/query")){let C=y.match(/requestId=([a-z\d]+)/i);if(C){let b=C[1];const S=Math.round(p.transferSize),D=this.pendingRequestIdsToTargSigs.get(b);if(D){const M=this.pendingRequestIdsToTargSigs.entries();for(let[,T]of M)if(T.identity===D.identity&&T.bytes!==null){const R=this.pendingAccumulatedEvents.get(T.identity),O=T.bytes-S;this.pendingAccumulatedEvents.set(T.identity,{datasource:T.datasource??"N/A",requestCount:(R?.requestCount??0)+1,savedBytesTotal:(R?.savedBytesTotal??0)+O,initialRequestSize:T.bytes,lastRequestSize:S,panelId:D.panelId?.toString()??"",dashId:D.dashboardUID??"",expr:D.expr??"",refreshIntervalMs:D.refreshIntervalMs??0,sent:!1,from:D.from??"",queryRangeSeconds:D.queryRangeSeconds??0}),this.pendingRequestIdsToTargSigs.delete(b);return}this.pendingRequestIdsToTargSigs.set(b,{...D,bytes:S})}}}}})}),this.perfObeserver.observe({type:"resource",buffered:!1}),setInterval(this.sendPendingTrackingEvents,this.sendEventsInterval),window.addEventListener("beforeunload",this.sendPendingTrackingEvents))}requestInfo(v){const h=v.range.from.valueOf(),p=v.range.to.valueOf(),s=v.rangeRaw?.to?.toString()==="now";let y=s,C;const b=v.intervalMs,S=new Map;v.targets.forEach(D=>{let M=`${v.dashboardUID}|${v.panelId}|${D.refId}`,T=this.getTargetSignature(v,D);this.shouldProfile&&this.getProfileData&&this.pendingRequestIdsToTargSigs.set(v.requestId,{...this.getProfileData(v,D),identity:M+"|"+T,bytes:null,panelId:v.panelId,dashboardUID:v.dashboardUID??"",from:v.rangeRaw?.from.toString()??"",queryRangeSeconds:v.range.to.diff(v.range.from,"seconds")??"",refreshIntervalMs:b??0}),S.set(M,T)});for(const[D,M]of S){let T=this.cache.get(D);if(T?.sig!==M?y=!1:(C=T?.prevTo??1/0,y=p>C&&h<=C),!y)break}if(y&&C){let D=Math.max(C-this.overlapWindowMs,h);const M=(0,a.CQ)(p),T=(0,a.CQ)((0,o.mB)(D,v.intervalMs));v={...v,range:{...v.range,from:T,to:M}}}else S.forEach((D,M)=>{this.cache.delete(M)});return{requests:[v],targSigs:S,shouldCache:s}}procFrames(v,h,p){if(h?.shouldCache){const s=v.range.from.valueOf(),y=v.range.to.valueOf(),C=new Map;p.forEach(S=>{let D=`${v.dashboardUID}|${v.panelId}|${S.refId}`,M=C.get(D);M||(M=[],C.set(D,M)),M.push(S)});let b=[];C.forEach((S,D)=>{let M=(D?this.cache.get(D)?.frames:null)??[];S.forEach(R=>{if(R.length===0||R.fields.length===0)return;let O=d(R.fields[1]),x=M.find(I=>d(I.fields[1])===O);if(!x)M.push(R);else{let I=x.fields.map(N=>N.values),L=R.fields.map(N=>N.values),P=l(I,L);if(P){for(let N=0;N<P.length;N++)x.fields[N].values=P[N];x.length=x.fields[0].values.length}}});let T=[];M.forEach(R=>{let O=R.fields.map(I=>I.values),x=m(O,s,y);if(x[0].length>0){for(let I=0;I<x.length;I++)R.fields[I].values=x[I];T.push(R)}}),this.cache.set(D,{sig:h.targSigs.get(D),frames:T,prevTo:y}),b.push(...T)}),p=b.map(S=>({...S,fields:S.fields.map(D=>({...D,config:{...D.config},values:D.values.slice()}))}))}return p}}},63764:(G,A,e)=>{"use strict";e.d(A,{Ky:()=>O,n:()=>v,nM:()=>D,nf:()=>R});var n=e(56375),a=e.n(n),o=e(81223),r=e(512),i=e(58309),g=e(94372),u=e(34921),l=e(64282),m=e(90857),c=e(81502);const d=/^[+-]?inf(?:inity)?$/i,f=(x,I)=>I.app===o.zj.Explore&&(x.meta?.custom?.resultType==="vector"||x.meta?.custom?.resultType==="scalar")?!0:I.targets.find(P=>P.refId===x.refId)?.format==="table",E=(x,I)=>x.meta?.type===r.P.HeatmapCells?!1:I.targets.find(P=>P.refId===x.refId)?.format==="heatmap";function v(x,I,L){m.config.featureToggles.prometheusDataplane&&x.data.forEach(X=>{const te=I.targets.find(se=>se.refId===X.refId);te&&te.legendFormat==="__auto"&&X.fields.forEach(se=>{if(se.labels?.__name__&&se.labels?.__name__===se.name){const de={...se,name:i.M5};se.config.displayNameFromDS=(0,g.CZ)(de,X,x.data)}})});const[P,N]=(0,n.partition)(x.data,X=>f(X,I)),F=p(P),[U,j]=(0,n.partition)(N,X=>X.meta?.custom?.resultType==="exemplar"),{exemplarTraceIdDestinations:V}=L,_=U.map(X=>{if(V?.length)for(const te of V){const se=X.fields.find(de=>de.name===te.name);if(se){const de=y(te);se.config.links=se.config.links?.length?[...se.config.links,...de]:de}}return{...X,meta:{...X.meta,dataTopic:u.w5.Annotations}}}),[H,z]=(0,n.partition)(j,X=>E(X,I));H.forEach(X=>{if(X.name==null){let te=X.fields.find(se=>se.type===i.fS.number);if(te){let se=te.labels?.le;se&&(X.name=se,te.config.displayNameFromDS=se)}}});const K=(0,n.groupBy)(H,X=>X.refId);let Y=[];for(const X in K){const te=K[X],se=(0,n.groupBy)(te,de=>{const re=de.fields.find(fe=>fe.type===i.fS.number);if(re?.labels&&h in re.labels){const{le:fe,...ie}=re?.labels;return Object.values(ie).join()}return Object.values(re?.labels??[]).join()});(0,n.forOwn)(se,(de,re)=>{const fe=de.sort(R);Y.push(M(T(fe)))})}const k=z.map(X=>({...X,meta:{...X.meta,preferredVisualisationType:"graph"}})),q=(0,n.flatten)(Y);return{...x,data:[...k,...F,...q,..._]}}const h="le";function p(x){if(x.length===0||x.length===1&&x[0].length===0)return x;const I=(0,n.groupBy)(x,"refId"),L=Object.keys(I);return L.map(N=>{const F=s(L.length,N),U=S({data:[],valueName:F}),j=b([]),V=[];I[N].forEach(H=>{const K=H.fields[1]?.labels??{};Object.keys(K).sort().forEach(Y=>{if(!V.some(k=>k.name===Y)){const k=Y===h;V.push({name:Y,config:{filterable:!0},type:k?i.fS.number:i.fS.string,values:[]})}})}),I[N].forEach(H=>{const z=H.fields[0]?.values??[],K=H.fields[1]?.values??[];z.forEach(Y=>j.values.push(Y)),K.forEach(Y=>{U.values.push(O(Y));const k=H.fields[1].labels??{};V.forEach(q=>q.values.push(C(k,q.name)))})});const _=[j,...V,U];return{refId:N,fields:_,meta:{...I[N][0].meta,preferredVisualisationType:"rawPrometheus"},length:j.values.length}})}function s(x,I=""){return x>1?`Value #${I}`:"Value"}function y(x){const I=[];if(x.datasourceUid){const P=(0,c.F)().getInstanceSettings(x.datasourceUid);P&&I.push({title:x.urlDisplayLabel||`Query with ${P?.name}`,url:"",internal:{query:{query:"${__value.raw}",queryType:"traceql"},datasourceUid:x.datasourceUid,datasourceName:P?.name??"Data source not found"}})}return x.url&&I.push({title:x.urlDisplayLabel||`Go to ${x.url}`,url:x.url,targetBlank:!0}),I}function C(x,I){return x.hasOwnProperty(I)?I===h?O(x[I]):x[I]:""}function b(x,I=!1){return{name:i.Ls,type:i.fS.time,config:{},values:x.map(L=>I?L[0]:L[0]*1e3)}}function S({data:x,valueName:I=i.M5,parseValue:L=!0,labels:P,displayNameFromDS:N}){return{name:I,type:i.fS.number,display:(0,l.U)(),config:{displayNameFromDS:N},labels:P,values:x.map(F=>L?O(F[1]):F[1])}}function D(x){const I=x.__name__||"";delete x.__name__;const L=Object.entries(x).map(P=>`${P[0]}="${P[1]}"`).join(",");return`${I}{${L}}`}function M(x){if(x.length===0||x.length===1&&x[0].length===0)return[];const I=x[0].fields.find(P=>P.type===i.fS.time),L=x.map(P=>{let N=P.fields.find(F=>F.type===i.fS.number);return{...N,name:N.config.displayNameFromDS}});return[{...x[0],meta:{...x[0].meta,type:r.P.HeatmapRows},fields:[I,...L]}]}function T(x){for(let I=x.length-1;I>0;I--){const L=x[I].fields.find(N=>N.type===i.fS.number),P=x[I-1].fields.find(N=>N.type===i.fS.number);if(!L||!P)throw new Error("Prometheus heatmap transform error: data should be a time series");for(let N=0;N<L.values.length;N++){const F=P.values[N]||[0];L.values[N]-=F}}return x}function R(x,I){let L,P;try{L=O(x.fields[1].state?.displayName??x.name??x.fields[1].name),P=O(I.fields[1].state?.displayName??I.name??I.fields[1].name)}catch(N){return console.error(N),0}return L>P?1:L<P?-1:0}function O(x){return d.test(x)?x[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:parseFloat(x)}},43190:(G,A,e)=>{"use strict";e.d(A,{T8:()=>a,jo:()=>r,pD:()=>o,x3:()=>n});var n=(i=>(i.Low="Low",i.Medium="Medium",i.High="High",i.None="None",i))(n||{}),a=(i=>(i.Cortex="Cortex",i.Mimir="Mimir",i.Prometheus="Prometheus",i.Thanos="Thanos",i))(a||{}),o=(i=>(i.Auto="__auto",i.Verbose="__verbose",i.Custom="__custom",i))(o||{}),r=(i=>(i[i.LabelNames=0]="LabelNames",i[i.LabelValues=1]="LabelValues",i[i.MetricNames=2]="MetricNames",i[i.VarQueryResult=3]="VarQueryResult",i[i.SeriesQuery=4]="SeriesQuery",i[i.ClassicQuery=5]="ClassicQuery",i))(r||{})},11738:(G,A,e)=>{"use strict";e.d(A,{Mt:()=>o,NM:()=>r,sY:()=>a});const n={filters:[],groupBy:[]};var a=(i=>(i.Done="done",i.Error="error",i.Pending="pending",i.Streaming="streaming",i))(a||{}),o=(i=>(i.Spans="spans",i.Traces="traces",i))(o||{}),r=(i=>(i.Intrinsic="intrinsic",i.Resource="resource",i.Span="span",i.Unscoped="unscoped",i))(r||{})},40449:(G,A,e)=>{"use strict";e.d(A,{$C:()=>p,BC:()=>b,M7:()=>l,NZ:()=>v,T1:()=>y,Yt:()=>f,rB:()=>h,t3:()=>C,vO:()=>s,yf:()=>E});var n=e(73891),a=e(68619),o=e(38070),r=e(58309),i=e(14345),g=e(45878),u=e(98149);function l(O){const{nodes:x,edges:I}=m(O),[L,P]=(0,u.np)();for(const N of x)L.add(N);for(const N of I)P.add(N);return[L,P]}function m(O){const x=[],I=[],L=new n.U(O),P=c(L),N=(0,u.nO)(F=>{if(F>=O.length)return;const U=L.get(F);return{span:{...U},id:U.spanID,parentIds:U.parentSpanID?[U.parentSpanID]:[]}});for(let F=0;F<L.length;F++){const U=L.get(F),j=N[U.spanID].children.map(z=>{const K=N[z].span;return[K.startTime,K.startTime+K.duration]}),V=(0,u.et)(j),_=U.duration-V,H=(0,u.fy)(U.duration,P,_);x.push({[a.z.id]:U.spanID,[a.z.title]:U.serviceName??"",[a.z.subTitle]:U.operationName,[a.z.mainStat]:H.main,[a.z.secondaryStat]:H.secondary,[a.z.color]:_/P}),U.parentSpanID&&N[U.parentSpanID].span&&I.push({[a.z.id]:U.parentSpanID+"--"+U.spanID,[a.z.target]:U.spanID,[a.z.source]:U.parentSpanID})}return{nodes:x,edges:I}}function c(O){let x=0,I=1/0;for(let L=0;L<O.length;L++){const P=O.get(L);P.startTime<I&&(I=P.startTime),P.startTime+P.duration>x&&(x=P.startTime+P.duration)}return x-I}const d="traces_service_graph_request_server_seconds_sum",f="traces_service_graph_request_total",E="traces_service_graph_request_failed_total",v="traces_service_graph_request_server_seconds_bucket",h={expr:"topk(5, sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name))",params:[]},p={expr:"topk(5, sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name))",params:['status_code="STATUS_CODE_ERROR"']},s={expr:"histogram_quantile(.9, sum(rate(traces_spanmetrics_latency_bucket{}[$__range])) by (le))",params:[]},y='span_kind="SPAN_KIND_SERVER"',C=[d,f,E,v];function b(O,x){const I=D(O),L={},P={};return T(I[f],"total",f,L,P),T(I[d],"seconds",d,L,P),T(I[E],"failed",E,L,P),R(L,P,x)}function S(){function O(L,P){return new o.v({name:L,fields:P,meta:{preferredVisualisationType:"nodeGraph"}})}const x=O("Nodes",[{name:a.z.id,type:r.fS.string,values:[]},{name:a.z.title,type:r.fS.string,config:{displayName:"Service name"},values:[]},{name:a.z.subTitle,type:r.fS.string,config:{displayName:"Service namespace"},values:[]},{name:a.z.mainStat,type:r.fS.number,config:{unit:"ms/r",displayName:"Average response time"},values:[]},{name:a.z.secondaryStat,type:r.fS.number,config:{unit:"r/sec",displayName:"Requests per second"},values:[]},{name:a.z.arc+"success",type:r.fS.number,config:{displayName:"Success",color:{fixedColor:"green",mode:i.S.Fixed}},values:[]},{name:a.z.arc+"failed",type:r.fS.number,config:{displayName:"Failed",color:{fixedColor:"red",mode:i.S.Fixed}},values:[]}]),I=O("Edges",[{name:a.z.id,type:r.fS.string,values:[]},{name:a.z.source,type:r.fS.string,values:[]},{name:"sourceName",type:r.fS.string,values:[]},{name:"sourceNamespace",type:r.fS.string,values:[]},{name:a.z.target,type:r.fS.string,values:[]},{name:"targetName",type:r.fS.string,values:[]},{name:"targetNamespace",type:r.fS.string,values:[]},{name:a.z.mainStat,type:r.fS.number,config:{unit:"ms/r",displayName:"Average response time"},values:[]},{name:a.z.secondaryStat,type:r.fS.number,config:{unit:"r/sec",displayName:"Requests per second"},values:[]}]);return[x,I]}function D(O){return(O[0]?.data||[]).reduce((x,I)=>{const L=(0,g.g0)(I);return x[L.refId??"A"]=new n.U(L),x},{})}var M=(O=>(O.sourceName="sourceName",O.sourceNamespace="sourceNamespace",O.targetName="targetName",O.targetNamespace="targetNamespace",O))(M||{});function T(O,x,I,L,P){if(!O)return;const N=`Value #${I}`;for(let F=0;F<O.length;F++){const U=O.get(F),j=U.server_service_namespace?`${U.server_service_namespace}/${U.server}`:U.server,V=U.client_service_namespace?`${U.client_service_namespace}/${U.client}`:U.client,_=`${V}_${j}`;P[_]?P[_][x]=(P[_][x]||0)+U[N]:P[_]={target:j,targetName:U.server,targetNamespace:U.server_service_namespace,source:V,sourceName:U.client,sourceNamespace:U.client_service_namespace,[x]:U[N]},L[j]?L[j][x]=(L[j][x]||0)+U[N]:L[j]={name:U.server,namespace:U.server_service_namespace,[x]:U[N]},L[V]||(L[V]={name:U.client,namespace:U.client_service_namespace,[x]:0})}}function R(O,x,I){const[L,P]=S();for(const N of Object.keys(O)){const F=O[N];L.add({[a.z.id]:N,[a.z.title]:F.name,[a.z.subTitle]:F.namespace,[a.z.mainStat]:F.total?F.seconds/F.total*1e3:Number.NaN,[a.z.secondaryStat]:F.total?Math.round(F.total*100)/100:Number.NaN,[a.z.arc+"success"]:F.total?(F.total-Math.min(F.failed||0,F.total))/F.total:1,[a.z.arc+"failed"]:F.total?Math.min(F.failed||0,F.total)/F.total:0})}for(const N of Object.keys(x)){const F=x[N];P.add({[a.z.id]:N,[a.z.source]:F.source,sourceName:F.sourceName,sourceNamespace:F.sourceNamespace,[a.z.target]:F.target,targetName:F.targetName,targetNamespace:F.targetNamespace,[a.z.mainStat]:F.total?F.seconds/F.total*1e3:Number.NaN,[a.z.secondaryStat]:F.total?Math.round(F.total*100)/100:Number.NaN})}return{nodes:L,edges:P}}},29262:(G,A,e)=>{"use strict";e.d(A,{IM:()=>b,Jk:()=>L,KZ:()=>F,RY:()=>E,g9:()=>S,n4:()=>P,vM:()=>I});var n=e(1983),a=e(38070),o=e(58309),r=e(89306),i=e(45878),g=e(40354),u=e(64282),l=e(90857),m=e(65512),c=e(11738),d=e(40449);function f(z,K,Y,k){const q=new a.v({fields:[{name:"Time",type:o.fS.time,config:{custom:{width:200}},values:[]},{name:"traceID",type:o.fS.string,config:{displayNameFromDS:"Trace ID",custom:{width:180},links:[{title:"Click to open trace ${__value.raw}",url:"",internal:{datasourceUid:K,datasourceName:Y,query:{query:"${__value.raw}"}}}]},values:[]},{name:"Message",type:o.fS.string,values:[]}],meta:{preferredVisualisationType:"table"}});if(!z||k.length===0)return q;const X=z.fields.find(te=>te.type===o.fS.time);for(let te of z.fields){let se=!1;if(te.type===o.fS.string){const de=te.values;for(let re=0;re<de.length;re++){const fe=de[re];if(fe)for(let ie of k){const oe=fe.match(ie);if(oe){const ue=oe[1],me=X?X.values[re]:null;q.fields[0].values.push(me),q.fields[1].values.push(ue),q.fields[2].values.push(fe),se=!0}}}}if(se)break}return q}function E(z,K,Y,k){return z.data.forEach((q,X)=>{const te=f(q,K,Y,k);z.data[X]=te}),z}function v(z){if(z.stringValue)return z.stringValue;if(z.boolValue!==void 0)return!!z.boolValue;if(z.intValue!==void 0)return Number.parseInt(z.intValue,10);if(z.doubleValue)return Number.parseFloat(z.doubleValue);if(z.arrayValue){const K=[];for(const Y of z.arrayValue.values)K.push(v(Y));return K}return""}function h(z){const K=[];let Y="OTLPResourceNoServiceName";if(!z)return{serviceName:Y,serviceTags:K};for(const k of z.attributes)k.key===n.R9.SERVICE_NAME&&(Y=k.value.stringValue||Y),K.push({key:k.key,value:v(k.value)});return{serviceName:Y,serviceTags:K}}function p(z){const K=[];if(z.attributes)for(const Y of z.attributes)K.push({key:Y.key,value:v(Y.value)});return K}function s(z){let K;if(z.kind){const Y=z.kind.toString().toLowerCase().split("_");K=Y.length?Y[Y.length-1]:z.kind.toString()}return K}function y(z){const K=[];if(z.links)for(const Y of z.links){const{traceId:k,spanId:q}=Y,X=[];if(Y.attributes)for(const te of Y.attributes)X.push({key:te.key,value:v(te.value)});K.push({traceID:k,spanID:q,tags:X})}return K}function C(z){const K=[];if(z.events)for(const Y of z.events){const k=[];if(Y.attributes)for(const q of Y.attributes)k.push({key:q.key,value:v(q.value)});K.push({fields:k,timestamp:Y.timeUnixNano/1e6})}return K}function b(z,K=!1){const Y=new a.v({fields:[{name:"traceID",type:o.fS.string,values:[]},{name:"spanID",type:o.fS.string,values:[]},{name:"parentSpanID",type:o.fS.string,values:[]},{name:"operationName",type:o.fS.string,values:[]},{name:"serviceName",type:o.fS.string,values:[]},{name:"kind",type:o.fS.string,values:[]},{name:"statusCode",type:o.fS.number,values:[]},{name:"statusMessage",type:o.fS.string,values:[]},{name:"instrumentationLibraryName",type:o.fS.string,values:[]},{name:"instrumentationLibraryVersion",type:o.fS.string,values:[]},{name:"traceState",type:o.fS.string,values:[]},{name:"serviceTags",type:o.fS.other,values:[]},{name:"startTime",type:o.fS.number,values:[]},{name:"duration",type:o.fS.number,values:[]},{name:"logs",type:o.fS.other,values:[]},{name:"references",type:o.fS.other,values:[]},{name:"tags",type:o.fS.other,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}});try{for(const q of z){const{serviceName:X,serviceTags:te}=h(q.resource);for(const se of q.instrumentationLibrarySpans)for(const de of se.spans)Y.add({traceID:de.traceId.length>16?de.traceId.slice(16):de.traceId,spanID:de.spanId,parentSpanID:de.parentSpanId||"",operationName:de.name||"",serviceName:X,kind:s(de),statusCode:de.status?.code,statusMessage:de.status?.message,instrumentationLibraryName:se.instrumentationLibrary?.name,instrumentationLibraryVersion:se.instrumentationLibrary?.version,traceState:de.traceState,serviceTags:te,startTime:de.startTimeUnixNano/1e6,duration:(de.endTimeUnixNano-de.startTimeUnixNano)/1e6,tags:p(de),logs:C(de),references:y(de)})}}catch(q){return console.error(q),{error:{message:"JSON is not valid OpenTelemetry format: "+q},data:[]}}let k=[Y];return K&&k.push(...(0,d.M7)(Y)),{data:k}}function S(z){let K={batches:[]},Y={};for(let k=0;k<z.length;k++){const q=z.get(k);Y[q.serviceName]||(Y[q.serviceName]=K.batches.length,K.batches.push({resource:{attributes:[],droppedAttributesCount:0},instrumentationLibrarySpans:[{spans:[]}]}));let X=Y[q.serviceName];K.batches[X].resource.attributes.length===0&&(K.batches[X].resource.attributes=M(q.serviceTags)),K.batches[X].instrumentationLibrarySpans[0].instrumentationLibrary||q.instrumentationLibraryName&&(K.batches[X].instrumentationLibrarySpans[0].instrumentationLibrary={name:q.instrumentationLibraryName,version:q.instrumentationLibraryVersion?q.instrumentationLibraryVersion:""}),K.batches[X].instrumentationLibrarySpans[0].spans.push({traceId:q.traceID.padStart(32,"0"),spanId:q.spanID,parentSpanId:q.parentSpanID||"",traceState:q.traceState||"",name:q.operationName,kind:D(q.kind),startTimeUnixNano:q.startTime*1e6,endTimeUnixNano:(q.startTime+q.duration)*1e6,attributes:q.tags?M(q.tags):[],droppedAttributesCount:0,droppedEventsCount:0,droppedLinksCount:0,status:R(q),events:O(q.logs),links:x(q.references)})}return K}function D(z){let K;if(z)switch(z){case"server":K="SPAN_KIND_SERVER";break;case"client":K="SPAN_KIND_CLIENT";break;case"producer":K="SPAN_KIND_PRODUCER";break;case"consumer":K="SPAN_KIND_CONSUMER";break;case"internal":K="SPAN_KIND_INTERNAL";break}return K}function M(z){return z.reduce((K,Y)=>[...K,{key:Y.key,value:T(Y)}],[])}function T(z){if(typeof z.value=="string")return{stringValue:z.value};if(typeof z.value=="boolean")return{boolValue:z.value};if(typeof z.value=="number")return z.value%1===0?{intValue:z.value}:{doubleValue:z.value};if(typeof z.value=="object"&&Array.isArray(z.value)){const K=[];for(const Y of z.value)K.push(T(Y));return{arrayValue:{values:K}}}return{stringValue:z.value}}function R(z){let K;return z.statusCode!==void 0&&(K={code:z.statusCode,message:z.statusMessage?z.statusMessage:""}),K}function O(z){if(!z||!z.length)return;let K=[];for(const Y of z){let k={timeUnixNano:Y.timestamp*1e6,attributes:[],droppedAttributesCount:0,name:""};for(const q of Y.fields)k.attributes.push({key:q.key,value:T(q)});K.push(k)}return K}function x(z){if(!z||!z.length)return;let K=[];for(const Y of z){let k={traceId:Y.traceID,spanId:Y.spanID,attributes:[],droppedAttributesCount:0};if(Y.tags?.length)for(const q of Y.tags)k.attributes?.push({key:q.key,value:T(q)});K.push(k)}return K}const I="Related profiles";function L(z,K,Y=!1){const k=z.data[0];if(!k)return H;if(l.config.featureToggles.traceToProfiles){const te=K?.jsonData?.tracesToProfiles;let se;if(te?.datasourceUid&&(se=(0,m.ak)().getInstanceSettings(te.datasourceUid)),te&&se){const de=te.customQuery?te.query:void 0,re={title:I,url:"",internal:{datasourceUid:se.uid,datasourceName:se.name,query:{labelSelector:de||"{${__tags}}",groupBy:[],profileTypeId:te.profileTypeId??"",queryType:"profile",spanSelector:['${__span.tags["pyroscope.profile.id"]}'],refId:"profile"}},origin:r.n1.Datasource};k.fields.forEach(fe=>{fe.name==="tags"&&(fe.config.links=[re])})}}let q=[...z.data];return Y&&q.push(...(0,d.M7)((0,i.g0)(k))),{...z,data:q}}function P(z,K){const Y=new a.v({name:"Traces",refId:"traces",fields:[{name:"traceID",type:o.fS.string,values:[],config:{unit:"string",displayNameFromDS:"Trace ID",links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:K.uid,datasourceName:K.name,query:{query:"${__value.raw}",queryType:"traceql"}}}]}},{name:"traceService",type:o.fS.string,config:{displayNameFromDS:"Trace service"},values:[]},{name:"traceName",type:o.fS.string,config:{displayNameFromDS:"Trace name"},values:[]},{name:"startTime",type:o.fS.time,config:{displayNameFromDS:"Start time"},values:[]},{name:"traceDuration",type:o.fS.number,config:{displayNameFromDS:"Duration",unit:"ms"},values:[]}],meta:{preferredVisualisationType:"table"}});if(!z?.length)return Y;const k=z.sort((q,X)=>parseInt(X?.startTimeUnixNano,10)/1e6-parseInt(q?.startTimeUnixNano,10)/1e6).map(N);for(const q of k)Y.add(q);return Y}function N(z){return{traceID:z.traceID,startTime:parseInt(z.startTimeUnixNano,10)/1e6,traceDuration:z.durationMs,traceService:z.rootServiceName||"",traceName:z.rootTraceName||""}}function F(z,K,Y){return Y===c.Mt.Spans?j(z,K):U(z,K)}function U(z,K){const Y=(0,i.at)({name:"Traces",refId:"traces",fields:[{name:"traceID",type:o.fS.string,config:{unit:"string",displayNameFromDS:"Trace ID",custom:{width:200},links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:K.uid,datasourceName:K.name,query:{query:"${__value.raw}",queryType:"traceql"}}}]}},{name:"startTime",type:o.fS.time,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"traceService",type:o.fS.string,config:{displayNameFromDS:"Service"}},{name:"traceName",type:o.fS.string,config:{displayNameFromDS:"Name"}},{name:"traceDuration",type:o.fS.number,config:{displayNameFromDS:"Duration",unit:"ms",custom:{width:120}}},{name:"nested",type:o.fS.nestedFrames}],meta:{preferredVisualisationType:"table"}});return z?.length?(Y.length=z.length,z.sort((k,q)=>parseInt(q?.startTimeUnixNano,10)/1e6-parseInt(k?.startTimeUnixNano,10)/1e6).forEach(k=>{const q=N(k);Y.fields[0].values.push(q.traceID),Y.fields[1].values.push(q.startTime),Y.fields[2].values.push(q.traceService),Y.fields[3].values.push(q.traceName),Y.fields[4].values.push(q.traceDuration),k.spanSets?Y.fields[5].values.push(k.spanSets.map(X=>V(k,X,K))):k.spanSet&&Y.fields[5].values.push([V(k,k.spanSet,K)])}),[Y]):[Y]}function j(z,K){const Y={};let k=!1;z?.forEach(X=>X.spanSets?.forEach(te=>{te.attributes?.forEach(se=>{Y[se.key]={name:se.key,type:o.fS.string,config:{displayNameFromDS:se.key}}}),te.spans.forEach(se=>{se.name&&(k=!0),se.attributes?.forEach(de=>{Y[de.key]={name:de.key,type:o.fS.string,config:{displayNameFromDS:de.key}}})})}));const q=new a.v({name:"Spans",refId:"traces",fields:[{name:"traceIdHidden",type:o.fS.string,config:{custom:{hidden:!0}}},{name:"traceService",type:o.fS.string,config:{displayNameFromDS:"Trace Service",custom:{width:200}}},{name:"traceName",type:o.fS.string,config:{displayNameFromDS:"Trace Name",custom:{width:200}}},{name:"spanID",type:o.fS.string,config:{unit:"string",displayNameFromDS:"Span ID",custom:{width:200},links:[{title:"Span: ${__value.raw}",url:"",internal:{datasourceUid:K.uid,datasourceName:K.name,query:{query:"${__data.fields.traceIdHidden}",queryType:"traceql"},panelsState:{trace:{spanId:"${__value.raw}"}}}}]}},{name:"time",type:o.fS.time,config:{displayNameFromDS:"Start time"}},{name:"name",type:o.fS.string,config:{displayNameFromDS:"Name",custom:{hidden:!k}}},...Object.values(Y).sort((X,te)=>X.name.localeCompare(te.name)),{name:"duration",type:o.fS.number,config:{displayNameFromDS:"Duration",unit:"ns",custom:{width:120}}}],meta:{preferredVisualisationType:"table"}});return z?.length?(z.sort((X,te)=>parseInt(te?.startTimeUnixNano,10)/1e6-parseInt(X?.startTimeUnixNano,10)/1e6).forEach(X=>{X.spanSets?.forEach(te=>{te.spans.forEach(se=>{q.add(_(se,te,X))})})}),[q]):[q]}const V=(z,K,Y)=>{const k={};let q=!1;K.attributes?.map(se=>{k[se.key]={name:se.key,type:o.fS.string,config:{displayNameFromDS:se.key},values:[]}}),K.spans.forEach(se=>{se.name&&(q=!0),se.attributes?.forEach(de=>{k[de.key]={name:de.key,type:o.fS.string,config:{displayNameFromDS:de.key},values:[]}})});const X=new a.v({fields:[{name:"traceIdHidden",type:o.fS.string,config:{custom:{hidden:!0}},values:[]},{name:"spanID",type:o.fS.string,values:[],config:{unit:"string",displayNameFromDS:"Span ID",custom:{width:200},links:[{title:"Span: ${__value.raw}",url:"",internal:{datasourceUid:Y.uid,datasourceName:Y.name,query:{query:"${__data.fields.traceIdHidden}",queryType:"traceql"},panelsState:{trace:{spanId:"${__value.raw}"}}}}]}},{name:"time",type:o.fS.time,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"name",type:o.fS.string,values:[],config:{displayNameFromDS:"Name",custom:{hidden:!q}}},...Object.values(k).sort((se,de)=>se.name.localeCompare(de.name)),{name:"duration",type:o.fS.number,values:[],config:{displayNameFromDS:"Duration",unit:"ns",custom:{width:120}}}],meta:{preferredVisualisationType:"table"}}),te=(0,g.j)();for(const se of X.fields)se.display=(0,u.U)({field:se,theme:te});return K.spans.forEach(se=>{X.add(_(se,K,z))}),X};function _(z,K,Y){const k=parseInt(z.startTimeUnixNano,10)/1e6,q={traceIdHidden:Y.traceID,traceService:Y.rootServiceName||"",traceName:Y.rootTraceName||"",spanID:z.spanID,time:k,duration:parseInt(z.durationNanos,10),name:z.name};let X=[];return K.attributes&&(X=X.concat(K.attributes)),z.attributes&&(X=X.concat(z.attributes)),X.forEach(te=>{(te.value.boolValue||te.value.Value?.bool_value)&&(q[te.key]=te.value.boolValue||te.value.Value?.bool_value),(te.value.doubleValue||te.value.Value?.double_value)&&(q[te.key]=te.value.doubleValue||te.value.Value?.double_value),(te.value.intValue||te.value.Value?.int_value)&&(q[te.key]=te.value.intValue||te.value.Value?.int_value),(te.value.stringValue||te.value.Value?.string_value)&&(q[te.key]=te.value.stringValue||te.value.Value?.string_value)}),q}const H={data:[new a.v({fields:[{name:"trace",type:o.fS.trace,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}})]}},67824:(G,A,e)=>{"use strict";e.d(A,{H:()=>l,m:()=>o});var n=e(38070),a=e(58309);function o(c){const d=c.map(r),f=new n.v({fields:[{name:"traceID",type:a.fS.string,values:[]},{name:"spanID",type:a.fS.string,values:[]},{name:"parentSpanID",type:a.fS.string,values:[]},{name:"operationName",type:a.fS.string,values:[]},{name:"serviceName",type:a.fS.string,values:[]},{name:"serviceTags",type:a.fS.other,values:[]},{name:"startTime",type:a.fS.number,values:[]},{name:"duration",type:a.fS.number,values:[]},{name:"logs",type:a.fS.other,values:[]},{name:"tags",type:a.fS.other,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"zipkin"}}});for(const E of d)f.add(E);return f}function r(c){const d={traceID:c.traceId,spanID:c.id,parentSpanID:c.parentId,operationName:c.name,serviceName:c.localEndpoint?.serviceName||c.remoteEndpoint?.serviceName||"unknown",serviceTags:g(c),startTime:c.timestamp/1e3,duration:c.duration/1e3,logs:c.annotations?.map(i)??[],tags:Object.keys(c.tags||{}).reduce((f,E)=>E==="error"?(f.push({key:"error",value:!0}),f.push({key:"errorValue",value:c.tags.error}),f):(f.push({key:E,value:c.tags[E]}),f),[])};return c.kind&&(d.tags=[{key:"kind",value:c.kind},...d.tags??[]]),c.shared&&(d.tags=[{key:"shared",value:c.shared},...d.tags??[]]),d}function i(c){return{timestamp:c.timestamp,fields:[{key:"annotation",value:c.value}]}}function g(c){const d=c.localEndpoint||c.remoteEndpoint;return d?[u("ipv4",d.ipv4),u("ipv6",d.ipv6),u("port",d.port),u("endpointType",c.localEndpoint?"local":"remote")].filter(f=>!!f):[]}function u(c,d){if(d)return{key:c,value:d}}const l=c=>{let d=[];for(let f=0;f<c.length;f++){const E=c.get(f);d.push({traceId:E.traceID,parentId:E.parentSpanID,name:E.operationName,id:E.spanID,timestamp:E.startTime*1e3,duration:E.duration*1e3,...m(E),annotations:E.logs.length?E.logs.map(v=>({timestamp:v.timestamp,value:v.fields[0].value})):void 0,tags:E.tags.length?E.tags.filter(v=>v.key!=="kind"&&v.key!=="endpointType"&&v.key!=="shared").reduce((v,h)=>h.key==="error"?{...v,[h.key]:E.tags.find(p=>p.key==="errorValue").value||""}:{...v,[h.key]:h.value},{}):void 0,kind:E.tags.find(v=>v.key==="kind")?.value,shared:E.tags.find(v=>v.key==="shared")?.value})}return d},m=c=>{const d=c.serviceTags.find(f=>f.key==="endpointType")?.value==="local"?"localEndpoint":"remoteEndpoint";return c.serviceName!=="unknown"?{[d]:{serviceName:c.serviceName,ipv4:c.serviceTags.find(f=>f.key==="ipv4")?.value,ipv6:c.serviceTags.find(f=>f.key==="ipv6")?.value,port:c.serviceTags.find(f=>f.key==="port")?.value}}:void 0}},62567:(G,A,e)=>{"use strict";e.d(A,{As:()=>n,LM:()=>o,kx:()=>a,wO:()=>r});var n=(i=>(i[i.AlphaAsc=1]="AlphaAsc",i[i.AlphaDesc=2]="AlphaDesc",i[i.Importance=3]="Importance",i[i.TimeAsc=4]="TimeAsc",i[i.TimeDesc=5]="TimeDesc",i))(n||{}),a=(i=>(i.Current="current",i.RecentChanges="changes",i))(a||{}),o=(i=>(i.Default="default",i.Custom="custom",i))(o||{}),r=(i=>(i.List="list",i.Stat="stat",i))(r||{})},31639:(G,A,e)=>{"use strict";e.d(A,{Gj:()=>a,Qm:()=>g});var n=e(63352);const a=1,o=2,r=3,i=(u,l,m,c)=>(0,n.O)(l+u*(m+c),6);function g(u,l,m,c,d){let f=1-l,E=m===a?f/(u-1):m===o?f/u:m===r?f/(u+1):0;(isNaN(E)||E===1/0)&&(E=0);let v=m===a?0:m===o?E/2:m===r?E:0,h=l/u,p=(0,n.O)(h,6);if(c==null)for(let s=0;s<u;s++)d(s,i(s,v,h,E),p);else d(c,i(c,v,h,E),p)}},36148:(G,A,e)=>{"use strict";e.d(A,{Pn:()=>o,kK:()=>i,lW:()=>g,zZ:()=>r});const n=10,a=4;function o(u,l,m,c,d,f){return u>=m&&u<=d&&l>=c&&l<=f}function r(u,l,m){let c;if(u.o.length&&(c=u.o.find(d=>d.sidx===l&&d.didx===m)),c==null&&u.q)for(let d=0;d<u.q.length&&(c=r(u.q[d],l,m),!c);d++);return c}function i(u,l){return u.x<=l.x+l.w&&u.x+u.w>=l.x&&u.y+u.h>=l.y&&u.y<=l.y+l.h}class g{constructor(l,m,c,d,f=0){this.x=l,this.y=m,this.w=c,this.h=d,this.l=f,this.o=[],this.q=null}split(){let l=this,m=l.x,c=l.y,d=l.w/2,f=l.h/2,E=l.l+1;l.q=[new g(m+d,c,d,f,E),new g(m,c,d,f,E),new g(m,c+f,d,f,E),new g(m+d,c+f,d,f,E)]}quads(l,m,c,d,f){let E=this,v=E.q,h=E.x+E.w/2,p=E.y+E.h/2,s=m<p,y=l<h,C=l+c>h,b=m+d>p;s&&C&&f(v[0]),y&&s&&f(v[1]),y&&b&&f(v[2]),C&&b&&f(v[3])}add(l){let m=this;if(m.q!=null)m.quads(l.x,l.y,l.w,l.h,c=>{c.add(l)});else{let c=m.o;if(c.push(l),c.length>n&&m.l<a){m.split();for(let d=0;d<c.length;d++){let f=c[d];m.quads(f.x,f.y,f.w,f.h,E=>{E.add(f)})}m.o.length=0}}}get(l,m,c,d,f){let E=this,v=E.o;for(let h=0;h<v.length;h++)f(v[h]);E.q!=null&&E.quads(l,m,c,d,h=>{h.get(l,m,c,d,f)})}clear(){this.o.length=0,this.q=null}}},76935:(G,A,e)=>{"use strict";e.d(A,{M:()=>f,l:()=>E});var n=e(56375),a=e.n(n),o=e(85960),r=e(11795),i=e(98068),g=e(1713),u=e(70265),l=e(15324),m=e(42273),c=e(67954),d=e(6498);class f extends o.PureComponent{constructor(){super(...arguments),this.renderComponent=(h,p)=>{const{options:s,fieldConfig:y}=this.props,{value:C,alignmentFactors:b,orientation:S,width:D,height:M,count:T}=h,{field:R,display:O,view:x,colIndex:I}=C,{openMenu:L,targetClassName:P}=p;let N;return x&&(0,n.isNumber)(I)&&(N=x.getFieldDisplayProcessor(I)),o.createElement(u.xf,{value:E(T,y.defaults,O),width:D,height:M,orientation:S,field:R,text:s.text,display:N,theme:c.config.theme2,itemSpacing:this.getItemSpacing(),displayMode:s.displayMode,onClick:L,className:P,alignmentFactors:T>1?b:void 0,showUnfilled:s.showUnfilled,valueDisplayMode:s.valueMode,namePlacement:s.namePlacement})},this.renderValue=h=>{const{value:p,orientation:s}=h,{hasLinks:y,getLinks:C}=p;return y&&C?o.createElement("div",{style:{width:"100%",display:s===r.wm.Vertical?"flex":"initial"}},o.createElement(l.V,{style:{height:"100%"},links:C},b=>this.renderComponent(h,b))):this.renderComponent(h,{})},this.getValues=()=>{const{data:h,options:p,replaceVariables:s,fieldConfig:y,timeZone:C}=this.props;return(0,i.nG)({fieldConfig:y,reduceOptions:p.reduceOptions,replaceVariables:s,theme:c.config.theme2,data:h.series,timeZone:C})}}getItemSpacing(){return this.props.options.displayMode==="lcd"?2:10}getOrientation(){const{options:h,width:p,height:s}=this.props,{orientation:y}=h;return y===r.wm.Auto?p>s?r.wm.Vertical:r.wm.Horizontal:y}calcBarSize(){const{options:h}=this.props,p=this.getOrientation(),s=h.sizing===g.o.Manual,y=p===r.wm.Vertical,C=p===r.wm.Horizontal,b=s&&y?h.minVizWidth:d.v.minVizWidth,S=s&&C?h.minVizHeight:d.v.minVizHeight,D=s&&C?h.maxVizHeight:d.v.maxVizHeight;return{minVizWidth:b,minVizHeight:S,maxVizHeight:D}}render(){const{height:h,width:p,options:s,data:y,renderCounter:C}=this.props,{minVizWidth:b,minVizHeight:S,maxVizHeight:D}=this.calcBarSize();return o.createElement(m.Q,{source:y,getAlignmentFactors:i.sg,getValues:this.getValues,renderValue:this.renderValue,renderCounter:C,width:p,height:h,maxVizHeight:D,minVizWidth:b,minVizHeight:S,itemSpacing:this.getItemSpacing(),orientation:s.orientation})}}function E(v,h,p){return v===1&&!h.displayName?{...p,title:void 0}:p}},6498:(G,A,e)=>{"use strict";e.d(A,{v:()=>a});var n=e(1713);const a={displayMode:n.QH.Gradient,maxVizHeight:300,minVizHeight:75,minVizWidth:75,namePlacement:n.L3.Auto,showUnfilled:!0,sizing:n.o.Auto,valueMode:n.M8.Color}},2637:(G,A,e)=>{"use strict";e.r(A),e.d(A,{plugin:()=>S});var n=e(12932),a=e(1713),o=e(58541),r=e(43505),i=e(16090);const g=D=>(0,i.rD)(D),u=(D,M,T)=>{const R=(0,i.ZH)(D,M,T);if(M==="singlestat"&&T.angular){const O=T.angular.gauge;O&&(R.showThresholdMarkers=O.thresholdMarkers,R.showThresholdLabels=O.thresholdLabels)}return R};var l=e(85960),m=e(64282),c=e(98068),d=e(45002),f=e(15324),E=e(42273),v=e(67954),h=e(76935);const p={minVizHeight:200,minVizWidth:200,showThresholdLabels:!1,showThresholdMarkers:!0,sizing:a.o.Auto};class s extends l.PureComponent{constructor(){super(...arguments),this.renderComponent=(M,T)=>{const{options:R,fieldConfig:O}=this.props,{width:x,height:I,count:L,value:P}=M,{field:N,display:F}=P,{openMenu:U,targetClassName:j}=T;return l.createElement(d.a,{value:(0,h.l)(L,O.defaults,F),width:x,height:I,field:N,text:R.text,showThresholdLabels:R.showThresholdLabels,showThresholdMarkers:R.showThresholdMarkers,theme:v.config.theme2,onClick:U,className:j,orientation:R.orientation})},this.renderValue=M=>{const{value:T}=M,{getLinks:R,hasLinks:O}=T;return O&&R?l.createElement(f.V,{links:R,style:{flexGrow:1}},x=>this.renderComponent(M,x)):this.renderComponent(M,{})},this.getValues=()=>{const{data:M,options:T,replaceVariables:R,fieldConfig:O,timeZone:x}=this.props;for(let I of M.series)for(let L of I.fields)if(L.config.unit==="percent"||L.config.unit==="percentunit"){const P=L.config.min??0,N=L.config.max??(L.config.unit==="percent"?100:1);L.state=L.state??{},L.state.range={min:P,max:N,delta:N-P},L.display=(0,m.U)({field:L,theme:v.config.theme2})}return(0,c.nG)({fieldConfig:O,reduceOptions:T.reduceOptions,replaceVariables:R,theme:v.config.theme2,data:M.series,timeZone:x})},this.calculateGaugeSize=()=>{const{options:M}=this.props,T=M.orientation,R=M.sizing===a.o.Manual,O=T===a.wm.Vertical,x=T===a.wm.Horizontal,I=R&&O?M.minVizWidth:p.minVizWidth,L=R&&x?M.minVizHeight:p.minVizHeight;return{minVizWidth:I,minVizHeight:L}}}render(){const{height:M,width:T,data:R,renderCounter:O,options:x}=this.props,{minVizHeight:I,minVizWidth:L}=this.calculateGaugeSize();return l.createElement(E.Q,{getValues:this.getValues,renderValue:this.renderValue,width:T,height:M,source:R,autoGrid:!0,renderCounter:O,orientation:x.orientation,minVizHeight:I,minVizWidth:L})}}var y=e(37634),C=e(12802);class b{getSuggestionsForData(M){const{dataSummary:T}=M;if(!T.hasData||!T.hasNumberField||T.numberFieldCount>=50)return;const R=M.getListAppender({name:C.y.Gauge,pluginId:"gauge",options:{},fieldConfig:{defaults:{thresholds:{steps:[{value:-1/0,color:"green"},{value:70,color:"orange"},{value:85,color:"red"}],mode:y.H.Percentage},custom:{}},overrides:[]},cardOptions:{previewModifier:O=>{O.options.reduceOptions.values&&(O.options.reduceOptions.limit=2)}}});T.hasStringField&&T.frameCount===1&&T.rowCountTotal<10?(R.append({name:C.y.Gauge,options:{reduceOptions:{values:!0,calcs:[]}}}),R.append({name:C.y.GaugeNoThresholds,options:{reduceOptions:{values:!0,calcs:[]},showThresholdMarkers:!1}})):(R.append({name:C.y.Gauge,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),R.append({name:C.y.GaugeNoThresholds,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},showThresholdMarkers:!1}}))}}const S=new n.c(s).useFieldConfig({useCustomConfig:D=>{D.addNumberInput({path:"neutral",name:"Neutral",description:"Leave empty to use Min as neutral point",category:["Gauge"],settings:{placeholder:"auto"}})}}).setPanelOptions(D=>{(0,r.j)(D),(0,r.h)(D),D.addBooleanSwitch({path:"showThresholdLabels",name:"Show threshold labels",description:"Render the threshold values around the gauge bar",defaultValue:p.showThresholdLabels}).addBooleanSwitch({path:"showThresholdMarkers",name:"Show threshold markers",description:"Renders the thresholds as an outer bar",defaultValue:p.showThresholdMarkers}).addRadio({path:"sizing",name:"Gauge size",settings:{options:[{value:a.o.Auto,label:"Auto"},{value:a.o.Manual,label:"Manual"}]},defaultValue:p.sizing,showIf:M=>M.orientation!==a.wm.Auto}).addSliderInput({path:"minVizWidth",name:"Min width",description:"Minimum column width (vertical orientation)",defaultValue:p.minVizWidth,settings:{min:0,max:600,step:1},showIf:M=>M.sizing===a.o.Manual&&M.orientation===a.wm.Vertical}).addSliderInput({path:"minVizHeight",name:"Min height",description:"Minimum row height (horizontal orientation)",defaultValue:p.minVizHeight,settings:{min:0,max:600,step:1},showIf:M=>M.sizing===a.o.Manual&&M.orientation===a.wm.Horizontal}),o.Z(D)}).setPanelChangeHandler(u).setSuggestionsSupplier(new b).setMigrationHandler(g)},60452:(G,A,e)=>{"use strict";e.d(A,{Cg:()=>o,EQ:()=>i,Er:()=>l,H:()=>r,Kq:()=>g,bD:()=>a,g$:()=>u});var n=e(1713),a=(m=>(m.Point="point",m.Line="line",m.Polygon="polygon",m.Any="*any*",m))(a||{});const o=5;var r=(m=>(m.Left="left",m.Center="center",m.Right="right",m))(r||{}),i=(m=>(m.Top="top",m.Middle="middle",m.Bottom="bottom",m))(i||{}),g=(m=>(m.Left="left",m.Center="center",m.Right="right",m))(g||{}),u=(m=>(m.Top="top",m.Center="center",m.Bottom="bottom",m))(u||{});const l=Object.freeze({size:{fixed:o,min:2,max:15},color:{fixed:"dark-green"},opacity:.4,symbol:{mode:n.Q8.Fixed,fixed:"img/icons/marker/circle.svg"},symbolAlign:{horizontal:"center",vertical:"center"},textConfig:{fontSize:12,textAlign:"center",textBaseline:"middle",offsetX:0,offsetY:0},rotation:{fixed:0,mode:n.eK.Mod,min:-360,max:360}})},19513:(G,A,e)=>{"use strict";e.d(A,{Q:()=>r});var n=e(66681),a=e(85960),o=e(38165);const r=i=>(0,o.CB)(i)?a.createElement("a",{href:i,target:"_blank",className:(0,n.cx)("external-link"),rel:"noreferrer"},i):i},38165:(G,A,e)=>{"use strict";e.d(A,{B1:()=>l,CB:()=>h,FB:()=>E,gE:()=>f,n_:()=>c,sA:()=>d,uH:()=>v,vV:()=>g});var n=e(76178),a=e(28273),o=e(73115),r=e(8124),i=e(60452);function g(p,s,y,C){const b={};return C&&Object.keys(C).length?(b.color=(0,o.getColorDimension)(p,C.color??i.Er.color,y),b.size=(0,o.getScaledDimension)(p,C.size??i.Er.size),b.rotation=(0,o.getScalarDimension)(p,C.rotation??i.Er.rotation),C.text&&(C.text.field||C.text.fixed)&&(b.text=(0,o.getTextDimension)(p,C.text))):s.fields&&(s.fields.color&&(b.color=(0,o.getColorDimension)(p,s.config.color??i.Er.color,y)),s.fields.size&&(b.size=(0,o.getScaledDimension)(p,s.config.size??i.Er.size)),s.fields.text&&(b.text=(0,o.getTextDimension)(p,s.config.text)),s.fields.rotation&&(b.rotation=(0,o.getScalarDimension)(p,s.config.rotation??i.Er.rotation))),b}let u;function l(){return u||(u=[],m()),u}async function m(){const p=await(0,r.e)();for(let s of["maps","gazetteer"])p.listFiles(s).subscribe({next:y=>{y.forEach(C=>{if(C.name.endsWith(".geojson")){const b=`public/${s}/${C.name}`;u.push({value:b,label:b})}})}})}const c=(p,s,y)=>{const C=p.initMapView(s.view);return p.map=new n.Z({view:C,pixelRatio:1,layers:[],controls:[],target:y,interactions:(0,a.c)({mouseWheelZoom:!1})})},d=(p,s)=>{p.initControls(s.controls),p.forceUpdate()},f=(p,s,y)=>{p.panelContext&&p.panelContext.onInstanceStateChange&&p.panelContext.onInstanceStateChange({map:p.map,layers:s,selected:y,actions:p.actions})},E=p=>{let s=p.layers.length;for(;s<100;){const y=`Layer ${s++}`;if(!p.byName.has(y))return y}return`Layer ${Date.now()}`};function v(p,s,y,C){const b=p.getPixelFromCoordinate(y),S=p.getPixelFromCoordinate(C),D=Math.abs(b[0]-S[0]),M=Math.abs(b[1]-S[1]);return D>s||M>s}const h=p=>{try{return new URL(p).protocol.includes("http")}catch{return!1}}},52208:(G,A,e)=>{"use strict";e.d(A,{o:()=>o});var n=e(85960),a=e(88940);function o(r){return n.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",paddingBottom:"6px"}},n.createElement(a.P,{onClick:r.onClick,style:{position:"relative",top:"auto",right:"auto",marginRight:0}}))}},43454:(G,A,e)=>{"use strict";e.d(A,{S_:()=>a,YG:()=>o,vC:()=>i});var n=e(1713),a=(g=>(g.Opacity="opacity",g.Scheme="scheme",g))(a||{}),o=(g=>(g.Exponential="exponential",g.Linear="linear",g))(o||{});const r={calculate:!1,cellGap:1,cellValues:{},color:{scheme:"Oranges",fill:"dark-orange",reverse:!1,exponent:.5,steps:64},exemplars:{color:"rgba(255,0,255,0.7)"},filterValues:{le:1e-9},legend:{show:!0},showValue:n.Jp.Auto,tooltip:{show:!0,yHistogram:!1,showColorScale:!1}},i={...r,color:{...r.color,mode:a.Scheme,scale:o.Exponential},yAxis:{...r.yAxis,axisPlacement:n.LB.Left},rowsFrame:{...r.rowsFrame,layout:n.kv.auto}}},95953:(G,A,e)=>{"use strict";e.d(A,{S:()=>g});var n=e(66681),a=e(85960),o=e(86734),r=e(12537),i=e(47257);function g({width:l,showImage:m,data:c,index:d}){const f=(0,i.wW)(u),E=l>600,v=c.get(d);return a.createElement("article",{className:(0,n.cx)(f.item,E&&f.itemWide)},m&&v.ogImage&&a.createElement("a",{tabIndex:-1,href:o.QX.sanitizeUrl(v.link),target:"_blank",rel:"noopener noreferrer",className:(0,n.cx)(f.socialImage,E&&f.socialImageWide),"aria-hidden":!0},a.createElement("img",{src:v.ogImage,alt:v.title})),a.createElement("div",{className:f.body},a.createElement("time",{className:f.date,dateTime:(0,r.dq)(v.date,{format:"MMM DD"})},(0,r.dq)(v.date,{format:"MMM DD"})," "),a.createElement("a",{className:f.link,href:o.QX.sanitizeUrl(v.link),target:"_blank",rel:"noopener noreferrer"},a.createElement("h3",{className:f.title},v.title)),a.createElement("div",{className:f.content,dangerouslySetInnerHTML:{__html:o.QX.sanitize(v.content)}})))}const u=l=>({container:(0,n.css)`
    height: 100%;
  `,item:(0,n.css)`
    display: flex;
    padding: ${l.spacing(1)};
    position: relative;
    margin-bottom: 4px;
    margin-right: ${l.spacing(1)};
    border-bottom: 2px solid ${l.colors.border.weak};
    background: ${l.colors.background.primary};
    flex-direction: column;
    flex-shrink: 0;
  `,itemWide:(0,n.css)`
    flex-direction: row;
  `,body:(0,n.css)`
    display: flex;
    flex-direction: column;
  `,socialImage:(0,n.css)`
    display: flex;
    align-items: center;
    margin-bottom: ${l.spacing(1)};
    > img {
      width: 100%;
      border-radius: ${l.shape.radius.default} ${l.shape.radius.default} 0 0;
    }
  `,socialImageWide:(0,n.css)`
    margin-right: ${l.spacing(2)};
    margin-bottom: 0;
    > img {
      width: 250px;
      border-radius: ${l.shape.radius.default};
    }
  `,link:(0,n.css)`
    color: ${l.colors.text.link};
    display: inline-block;

    &:hover {
      color: ${l.colors.text.link};
      text-decoration: underline;
    }
  `,title:(0,n.css)`
    font-size: 16px;
    margin-bottom: ${l.spacing(.5)};
  `,content:(0,n.css)`
    p {
      margin-bottom: 4px;
      color: ${l.colors.text};
    }
  `,date:(0,n.css)`
    margin-bottom: ${l.spacing(.5)};
    font-weight: 500;
    border-radius: 0 0 0 ${l.shape.radius.default};
    color: ${l.colors.text.secondary};
  `})},35912:(G,A,e)=>{"use strict";e.d(A,{k:()=>n});const n="https://grafana.com/blog/news.xml"},23758:(G,A,e)=>{"use strict";e.d(A,{j:()=>f});var n=e(85954),a=e(73891);function o(E){const h=new DOMParser().parseFromString(E,"text/xml");return{items:Array.from(h.querySelectorAll("entry")).map(s=>({title:u(s,"title"),link:s.querySelector("link")?.getAttribute("href")??"",content:u(s,"content"),pubDate:u(s,"published"),ogImage:s.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}function r(E){const h=new DOMParser().parseFromString(E,"text/xml");return{items:Array.from(h.querySelectorAll("item")).map(s=>({title:u(s,"title"),link:u(s,"link"),content:u(s,"description"),pubDate:u(s,"pubDate"),ogImage:s.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}async function i(E){return await(await fetch(E)).text()}function g(E){return new DOMParser().parseFromString(E,"text/xml").querySelector("feed")!==null}function u(E,v){return E.querySelector(v)?.textContent??""}async function l(E){const v=await i(E);return g(v)?o(v):r(v)}var m=e(85745),c=e(58309);function d(E){const v=[],h=[],p=[],s=[],y=[];for(const C of E.items){const b=(0,m.CQ)(C.pubDate);try{if(v.push(b.valueOf()),h.push(C.title),p.push(C.link),y.push(C.ogImage),C.content){const S=C.content.replace(/<\/?[^>]+(>|$)/g,"");s.push(S)}}catch(S){console.warn("Error reading news item:",S,C)}}return{fields:[{name:"date",type:c.fS.time,config:{displayName:"Date"},values:v},{name:"title",type:c.fS.string,config:{},values:h},{name:"link",type:c.fS.string,config:{},values:p},{name:"content",type:c.fS.string,config:{},values:s},{name:"ogImage",type:c.fS.string,config:{},values:y}],length:v.length}}function f(E){const[v,h]=(0,n.Z)(async()=>{const p=await l(E),s=d(p);return new a.U(s)},[E],{loading:!0});return{state:v,getNews:h}}},46544:(G,A,e)=>{"use strict";e.d(A,{NB:()=>v,UN:()=>c,r6:()=>E});var n=e(66681),a=e(70318),o=e.n(a),r=e(85960),i=e(19737),g=e(73859),u=e(47257),l=e(97666),m=e(25002);const c=40,d="#a00",f=(C,b)=>({mainGroup:(0,n.css)`
    cursor: pointer;
    font-size: 10px;
    transition: opacity 300ms;
    opacity: ${b==="inactive"?.5:1};
  `,mainCircle:(0,n.css)`
    fill: ${C.components.panel.background};
  `,filledCircle:(0,n.css)`
    fill: ${d};
  `,hoverCircle:(0,n.css)`
    opacity: 0.5;
    fill: transparent;
    stroke: ${C.colors.primary.text};
  `,text:(0,n.css)`
    fill: ${C.colors.text.primary};
    pointer-events: none;
  `,titleText:(0,n.css)`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    background-color: ${(0,i.Z)(C.colors.background.primary).setAlpha(.6).toHex8String()};
    width: 140px;
  `,statsText:(0,n.css)`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    width: 70px;
  `,textHovering:(0,n.css)`
    width: 200px;
    & span {
      background-color: ${(0,i.Z)(C.colors.background.primary).setAlpha(.8).toHex8String()};
    }
  `,clickTarget:(0,n.css)`
    fill: none;
    stroke: none;
    pointer-events: fill;
  `}),E=C=>Math.ceil(C*.075),v=(0,r.memo)(function(b){const{node:S,onMouseEnter:D,onMouseLeave:M,onClick:T,hovering:R}=b,O=(0,u.l4)(),x=f(O,R),I=R==="active",L=S.nodeRadius?.values[S.dataFrameRowIndex]||c,P=E(L);return S.x!==void 0&&S.y!==void 0?r.createElement("g",{"data-node-id":S.id,className:x.mainGroup,"aria-label":`Node: ${S.title}`},r.createElement("circle",{"data-testid":`node-circle-${S.id}`,className:S.highlighted?x.filledCircle:x.mainCircle,r:L,cx:S.x,cy:S.y}),I&&r.createElement("circle",{className:x.hoverCircle,r:L-3,cx:S.x,cy:S.y,strokeWidth:P}),r.createElement(p,{node:S}),r.createElement("g",{className:x.text,style:{pointerEvents:"none"}},r.createElement(h,{node:S,hovering:R}),r.createElement("foreignObject",{x:S.x-(I?100:70),y:S.y+L+5,width:I?"200":"140",height:"40"},r.createElement("div",{className:o()(x.titleText,I&&x.textHovering)},r.createElement("span",null,S.title),r.createElement("br",null),r.createElement("span",null,S.subTitle)))),r.createElement("rect",{"data-testid":`node-click-rect-${S.id}`,onMouseEnter:()=>{D(S.id)},onMouseLeave:()=>{M(S.id)},onClick:N=>{T(N,S)},className:x.clickTarget,x:S.x-L-5,y:S.y-L-5,width:L*2+10,height:L*2+50})):null});function h({node:C,hovering:b}){const S=(0,u.l4)(),D=f(S,b),M=b==="active";return C.x!==void 0&&C.y!==void 0?C.icon?r.createElement("foreignObject",{x:C.x-35,y:C.y-20,width:"70",height:"40"},r.createElement("div",{style:{width:70,overflow:"hidden",display:"flex",justifyContent:"center",marginTop:-4}},r.createElement(l.J,{"data-testid":`node-icon-${C.icon}`,name:C.icon,size:"xxxl"}))):r.createElement("foreignObject",{x:C.x-(M?100:35),y:C.y-15,width:M?"200":"70",height:"40"},r.createElement("div",{className:o()(D.statsText,M&&D.textHovering)},r.createElement("span",null,C.mainStat&&(0,m.Ew)(C.mainStat.config,C.mainStat.values[C.dataFrameRowIndex])),r.createElement("br",null),r.createElement("span",null,C.secondaryStat&&(0,m.Ew)(C.secondaryStat.config,C.secondaryStat.values[C.dataFrameRowIndex])))):null}function p(C){const{node:b}=C,S=b.arcSections.find(x=>x.values[b.dataFrameRowIndex]>=1),D=(0,u.l4)(),M=b.nodeRadius?.values[b.dataFrameRowIndex]||c,T=E(M);if(S)return r.createElement("circle",{fill:"none",stroke:D.visualization.getColorByName(S.config.color?.fixedColor||""),strokeWidth:T,r:M,cx:b.x,cy:b.y});const R=b.arcSections.filter(x=>x.values[b.dataFrameRowIndex]!==0);if(R.length===0)return r.createElement("circle",{fill:"none",stroke:b.color?y(b.color,b.dataFrameRowIndex,D):"gray",strokeWidth:T,r:M,cx:b.x,cy:b.y});const{elements:O}=R.reduce((x,I,L)=>{const P=I.config.color?.fixedColor||"",N=I.values[b.dataFrameRowIndex],F=r.createElement(s,{key:L,r:M,x:b.x,y:b.y,startPercent:x.percent,percent:N+x.percent>1?1-x.percent:N,color:D.visualization.getColorByName(P),strokeWidth:T});return x.elements.push(F),x.percent=x.percent+N,x},{elements:[],percent:0});return r.createElement(r.Fragment,null,O)}function s({r:C,x:b,y:S,startPercent:D,percent:M,color:T,strokeWidth:R=2}){const O=D+M,x=b+Math.sin(2*Math.PI*D)*C,I=S-Math.cos(2*Math.PI*D)*C,L=b+Math.sin(2*Math.PI*O)*C,P=S-Math.cos(2*Math.PI*O)*C,N=M>.5?"1":"0";return r.createElement("path",{fill:"none",d:`M ${x} ${I} A ${C} ${C} 0 ${N} 1 ${L} ${P}`,stroke:T,strokeWidth:R})}function y(C,b,S){return C.config.color?(0,g.fD)(C).getCalculator(C,S)(0,C.values[b]):C.values[b]}},59691:(G,A,e)=>{"use strict";e.d(A,{E:()=>qe});var n=e(66681),a=e(70318),o=e.n(a),r=e(85960),i=e(60339),g=e(47257),u=e(75682),l=e(97666);function m({id:ne="triangle",fill:Z=E,headHeight:ee=10}){return r.createElement("defs",null,r.createElement("marker",{id:ne,viewBox:"0 0 10 10",refX:"1",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:ee,markerHeight:ee,orient:"auto"},r.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:Z})))}var c=e(46544),d=e(25002);const f="#a00",E="#999",v=(0,r.memo)(function(Z){const{edge:ee,onClick:ce,onMouseEnter:be,onMouseLeave:Ee,hovering:Be}=Z,{source:Le,target:ze,sourceNodeRadius:Fe,targetNodeRadius:$e}=ee,et=10+ee.thickness*2,tt=(0,d.dM)({x1:Le.x,y1:Le.y,x2:ze.x,y2:ze.y},Fe+(0,c.r6)(Fe)/2||c.UN,$e+(0,c.r6)($e)/2||c.UN,et),it=`triangle-${ee.id}`,vt=`triangle-colored-${ee.id}`;return r.createElement(r.Fragment,null,r.createElement(m,{id:it,headHeight:et}),r.createElement(m,{id:vt,fill:f,headHeight:et}),r.createElement("g",{onClick:yt=>ce(yt,ee),style:{cursor:"pointer"},"aria-label":`Edge from: ${Le.id} to: ${ze.id}`},r.createElement("line",{strokeWidth:(Be?1:0)+(ee.highlighted?1:0)+ee.thickness,stroke:ee.highlighted?f:E,x1:tt.x1,y1:tt.y1,x2:tt.x2,y2:tt.y2,markerEnd:`url(#${ee.highlighted?vt:it})`}),r.createElement("line",{stroke:"transparent",x1:tt.x1,y1:tt.y1,x2:tt.x2,y2:tt.y2,strokeWidth:20,onMouseEnter:()=>{be(ee.id)},onMouseLeave:()=>{Ee(ee.id)}})))}),h=ne=>({mainGroup:(0,n.css)`
      pointer-events: none;
      font-size: 8px;
    `,background:(0,n.css)`
      fill: ${ne.components.tooltip.background};
    `,text:(0,n.css)`
      fill: ${ne.components.tooltip.text};
    `}),p=(0,r.memo)(function(Z){const{edge:ee}=Z,{source:ce,target:be,sourceNodeRadius:Ee,targetNodeRadius:Be}=ee,Le=(0,d.dM)({x1:ce.x,y1:ce.y,x2:be.x,y2:be.y},Ee||c.UN,Be||c.UN),ze={x:Le.x1+(Le.x2-Le.x1)/2,y:Le.y1+(Le.y2-Le.y1)/2},Fe=(0,g.wW)(h),$e=[ee.mainStat,ee.secondaryStat].filter(yt=>yt),et=$e.length>1?"30":"15",tt=$e.length>1?15:7.5;let it=$e.length>1?-5:2.5;const vt=[];return $e.forEach((yt,Wt)=>{vt.push(r.createElement("text",{key:Wt,className:Fe.text,x:ze.x,y:ze.y+it,textAnchor:"middle"},yt)),it+=15}),r.createElement("g",{className:Fe.mainGroup},r.createElement("rect",{className:Fe.background,x:ze.x-40,y:ze.y-tt,width:"80",height:et,rx:"5"}),vt)});var s=e(14345),y=e(1713),C=e(33012),b=e(81283);function S(){return{item:(0,n.css)`
      label: LegendItem;
      flex-grow: 0;
    `,legend:(0,n.css)`
      label: Legend;
      pointer-events: all;
    `}}const D=function(Z){const{nodes:ee,onSort:ce,sort:be,sortable:Ee}=Z,Be=(0,g.l4)(),Le=(0,g.wW)(S),ze=M(ee,Be),Fe=(0,r.useCallback)($e=>{ce({field:$e.data.field,ascending:$e.data.field===be?.field?!be?.ascending:!1})},[be,ce]);return r.createElement(C.l,{className:Le.legend,displayMode:y.jK.List,placement:"bottom",items:ze,itemRenderer:$e=>r.createElement(r.Fragment,null,r.createElement(b.e,{item:$e,className:Le.item,onLabelClick:Ee?Fe:void 0}),Ee&&(be?.field===$e.data.field?r.createElement(l.J,{name:be.ascending?"arrow-up":"arrow-down"}):""))})};function M(ne,Z){if(!ne.length)return[];const ee=[ne[0].mainStat,ne[0].secondaryStat].filter(be=>!!be),ce=ne.find(be=>be.arcSections.length>0);return ce&&ce.arcSections[0].config?.color?.mode===s.S.Fixed&&ee.push(...new Set(ne.map(be=>be.arcSections).flat())),ne[0].color&&ee.push(ne[0].color),ee.map(be=>{const Ee={label:be.config.displayName||be.name,yAxis:0,data:{field:be}};return be.config.color?.mode===s.S.Fixed&&be.config.color?.fixedColor?Ee.color=Z.visualization.getColorByName(be.config.color?.fixedColor||""):be.config.color?.mode&&(Ee.gradient=be.config.color?.mode),Ee.color||Ee.gradient||(Ee.color=Z.visualization.getColorByName("")),Ee})}const T=40,R=ne=>({mainGroup:(0,n.css)`
    cursor: pointer;
    font-size: 10px;
  `,mainCircle:(0,n.css)`
    fill: ${ne.components.panel.background};
    stroke: ${ne.colors.border.strong};
  `,text:(0,n.css)`
    width: 50px;
    height: 50px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),O=(0,r.memo)(function(Z){const{marker:ee,onClick:ce}=Z,{node:be}=ee,Ee=(0,g.wW)(R);return be.x!==void 0&&be.y!==void 0?r.createElement("g",{"data-node-id":be.id,className:Ee.mainGroup,onClick:Be=>{ce?.(Be,ee)},"aria-label":`Hidden nodes marker: ${be.id}`},r.createElement("circle",{className:Ee.mainCircle,r:T,cx:be.x,cy:be.y}),r.createElement("g",null,r.createElement("foreignObject",{x:be.x-25,y:be.y-25,width:"50",height:"50"},r.createElement("div",{className:Ee.text},r.createElement("span",null,ee.count>100?">100":ee.count," nodes"))))):null});var x=e(74042),I=e(29165);function L(){return{wrapper:(0,n.css)`
      label: wrapper;
      pointer-events: all;
    `}}function P(ne){const{config:Z,onConfigChange:ee,onPlus:ce,onMinus:be,disableZoomOut:Ee,disableZoomIn:Be}=ne,[Le,ze]=(0,r.useState)(!1),Fe=!1,$e=(0,g.wW)(L);return r.createElement("div",{className:$e.wrapper},r.createElement(x.wc,{spacing:"sm"},r.createElement(x.Lh,{spacing:"xs"},r.createElement(I.zx,{icon:"plus-circle",onClick:ce,size:"md",title:"Zoom in",variant:"secondary",disabled:Be}),r.createElement(I.zx,{icon:"minus-circle",onClick:be,size:"md",title:"Zoom out",variant:"secondary",disabled:Ee})),r.createElement(x.Lh,{spacing:"xs"},r.createElement(I.zx,{icon:"code-branch",onClick:()=>ee({...Z,gridLayout:!1}),size:"md",title:"Default layout",variant:"secondary",disabled:!Z.gridLayout}),r.createElement(I.zx,{icon:"apps",onClick:()=>ee({...Z,gridLayout:!0}),size:"md",title:"Grid layout",variant:"secondary",disabled:Z.gridLayout}))),Fe&&r.createElement(I.zx,{size:"xs",fill:"text",onClick:()=>ze(et=>!et)},Le?"Hide config":"Show config"),Fe&&Le&&Object.keys(Z).filter(et=>et!=="show").map(et=>r.createElement("div",{key:et},et,r.createElement("input",{style:{width:50},type:"number",value:Z[et],onChange:tt=>{ee({...Z,[et]:parseFloat(tt.target.value)})}}))))}var N=e(86098),F=e(39584),U=e(34834);const j=()=>new U.q(new URL(e.p+e.u(6732),e.b));var V=e(56375);function _(ne,Z,ee,ce,be){const[Ee,Be]=(0,r.useMemo)(()=>{if(!(ne.length&&Z.length))return[{},{}];const Le=Z.reduce((Fe,$e)=>(Fe[$e.source.id]=[...Fe[$e.source.id]??[],$e],Fe[$e.target.id]=[...Fe[$e.target.id]??[],$e],Fe),{}),ze=ne.reduce((Fe,$e)=>(Fe[$e.id]=$e,Fe),{});return[Le,ze]},[Z,ne]);return(0,r.useMemo)(()=>ne.length<=ee?{nodes:ne,edges:Z}:ce.gridLayout?z(ne,ee,be):H(ne,Z,Be,Ee,ee,be),[Z,Ee,ee,ne,Be,be,ce.gridLayout])}function H(ne,Z,ee,ce,be,Ee){let Be;Ee?Be=[ee[Ee]]:(Be=ne.filter(tt=>tt.incoming===0),Be.length||(Be=[ne[0]]));const{visibleNodes:Le,markers:ze}=K(be,Be,ee,ce),Fe=Y(ze,Le,ee,ce),$e=(0,V.fromPairs)(Fe.map(tt=>[tt.node.id,tt]));for(const tt of Fe)tt.count===1&&(delete $e[tt.node.id],Le[tt.node.id]=tt.node);const et=Z.filter(tt=>(Le[tt.source.id]||$e[tt.source.id])&&(Le[tt.target.id]||$e[tt.target.id]));return{nodes:Object.values(Le),edges:et,markers:Object.values($e)}}function z(ne,Z,ee){let ce=0,be=Z,Ee=[];if(ee){const Be=ne.findIndex(Fe=>Fe.id===ee),Le=Math.floor(Z/2);let ze=Le;ce=Be-Le,ce<0&&(ze+=Math.abs(ce),ce=0),be=Be+ze+1,be>ne.length&&(ce>0&&(ce=Math.max(0,ce-(be-ne.length))),be=ne.length),ce>1&&Ee.push({node:ne[ce-1],count:ce}),ne.length-be>1&&Ee.push({node:ne[be],count:ne.length-be})}else ne.length-Z>1&&(Ee=[{node:ne[Z],count:ne.length-Z}]);return{nodes:ne.slice(ce,be),edges:[],markers:Ee}}function K(ne,Z,ee,ce){const be={};let Ee=[...Z];for(;Object.keys(be).length<ne&&Ee.length>0;){let Le=Ee.shift();if(be[Le.id])continue;be[Le.id]=Le;const Fe=(ce[Le.id]||[]).map($e=>{const et=$e.source.id===Le.id?$e.target.id:$e.source.id;return ee[et]});Ee=Ee.concat(Fe)}const Be=(0,V.uniq)(Ee.filter(Le=>!be[Le.id]));return{visibleNodes:be,markers:Be}}function Y(ne,Z,ee,ce){return ne.map(be=>{const Ee={};let Be=0,Le=[be];for(;Le.length>0&&Be<=101;){let ze=Le.shift();if(Z[ze.id]||Ee[ze.id])continue;Ee[ze.id]||Be++,Ee[ze.id]=ze;const $e=(ce[ze.id]||[]).map(et=>{const tt=et.source.id===ze.id?et.target.id:et.source.id;return ee[tt]});Le=Le.concat($e)}return{node:be,count:Be}})}const k={linkDistance:150,linkStrength:.5,forceX:2e3,forceXStrength:.02,forceCollide:100,tick:300,gridLayout:!1};function q(ne,Z,ee=k,ce,be,Ee){const[Be,Le]=(0,r.useState)([]),[ze,Fe]=(0,r.useState)([]),[$e,et]=(0,r.useState)(!1),tt=(0,F.default)(),it=(0,r.useRef)();(0,N.Z)(()=>{it.current&&it.current()}),(0,r.useEffect)(()=>{if(ne.length===0){Le([]),Fe([]),et(!1);return}et(!0);const lt=X(ne,Z,({nodes:Bt,edges:Kt})=>{tt()&&(Le(Bt),Fe(Kt),et(!1))});return it.current=lt,lt},[ne,Z,tt]);const[vt,yt]=(0,r.useMemo)(()=>{if(ne.length===0)return[[],[]];const lt=ne.map(Kt=>({...Kt})),Bt=Z.map(Kt=>({...Kt}));return te(lt,be,ee.sort),[lt,Bt]},[ee.sort,ne,Z,be]),{nodes:Wt,edges:ut,markers:pt}=_(ee.gridLayout?vt:Be,ee.gridLayout?yt:ze,ce,ee,Ee),we=(0,r.useMemo)(()=>(0,d.Tz)([...Wt,...(pt||[]).map(lt=>lt.node)]),[Wt,pt]);return{nodes:Wt,edges:ut,markers:pt,bounds:we,hiddenNodesCount:ne.length-Wt.length,loading:$e}}function X(ne,Z,ee){const ce=j();return ce.onmessage=be=>{for(let Ee=0;Ee<ne.length;Ee++)be.data.nodes[Ee]={...ne[Ee],...be.data.nodes[Ee]};ee(be.data)},ce.postMessage({nodes:ne.map(be=>({id:be.id,incoming:be.incoming})),edges:Z,config:k}),()=>{ce.terminate()}}function te(ne,Z,ee){const Be=Math.min(Math.floor((Z-120)/140),ne.length),Le=Math.floor((Be-1)*120/2);ee&&ne.sort((ze,Fe)=>{const $e=ee.field.values[ze.dataFrameRowIndex],et=ee.field.values[Fe.dataFrameRowIndex];return ee.ascending?$e-et:et-$e});for(const[ze,Fe]of ne.entries()){const $e=Math.floor(ze/Be),et=ze%Be;Fe.x=et*120-Le,Fe.y=-60+$e*140}}var se=e(30415),de=e(19841),re=e(71862),fe=e(69707);function ie(ne,Z,ee,ce,be,Ee){const[Be,Le]=(0,r.useState)(void 0),ze=(0,r.useCallback)(($e,et)=>{const[tt,it]=ce.gridLayout?["Show in Graph layout",!1]:["Show in Grid layout",!0],vt=[{label:tt,onClick:ut=>{Ee(ut.id),be({...ce,gridLayout:it}),Le(void 0)}}],yt=Z?ne(Z,et.dataFrameRowIndex):[],Wt=ue(yt,et,vt);Le(oe(r.createElement(Pe,{node:et,nodes:Z}),$e,Le,Wt))},[ce,Z,ne,Le,be,Ee]);return{onEdgeOpen:(0,r.useCallback)(($e,et)=>{if(!ee)return;const tt=ne(ee,et.dataFrameRowIndex),it=ue(tt,et);Le(oe(r.createElement(ye,{edge:et,edges:ee}),$e,Le,it))},[ee,ne,Le]),onNodeOpen:ze,MenuComponent:Be}}function oe(ne,Z,ee,ce){return r.createElement(de.x,{renderHeader:()=>ne,renderMenuItems:ce,onClose:()=>ee(void 0),x:Z.pageX,y:Z.pageY})}function ue(ne,Z,ee){if(!(ne.length||ee?.length))return;const ce=ge(ne);return()=>{let be=ce?.map((Ee,Be)=>r.createElement(re.k,{key:`${Ee.label}${Be}`,label:Ee.label},(Ee.items||[]).map(me(Z))));return ee&&(be=[...ee.map(me(Z)),...be]),be}}function me(ne){return function(ee){return r.createElement(fe.s,{key:ee.label,url:ee.url,label:ee.label,ariaLabel:ee.ariaLabel,onClick:ee.onClick?ce=>{ce?.ctrlKey||ce?.metaKey||ce?.shiftKey||(ce?.preventDefault(),ce?.stopPropagation(),ee.onClick?.(ne))}:void 0,target:"_self"})}}function ge(ne){const Z="Open in Explore",ee=ne.reduce((ce,be)=>{let Ee,Be;return be.title.indexOf("/")!==-1?(Ee=be.title.split("/")[0],Be=be.title.split("/")[1],ce[Ee]=ce[Ee]||[],ce[Ee].push({l:be,newTitle:Be})):(ce[Z]=ce[Z]||[],ce[Z].push({l:be})),ce},{});return Object.keys(ee).map(ce=>({label:ce,ariaLabel:ce,items:ee[ce].map(be=>({label:be.newTitle||be.l.title,ariaLabel:be.newTitle||be.l.title,url:be.l.href,onClick:be.l.onClick}))}))}function Ue({field:ne,index:Z}){return r.createElement(De,{label:ne.config?.displayName||ne.name,value:(0,d.Ew)(ne.config,ne.values[Z]||"")})}function De({label:ne,value:Z}){const ee=(0,g.wW)(Te);return r.createElement("tr",null,r.createElement("td",{className:ee.label},ne,": "),r.createElement("td",{className:ee.value},Z))}function Pe({node:ne,nodes:Z}){const ee=[];if(Z){const ce=(0,d.F)(Z);for(const be of[ce.title,ce.subTitle,ce.mainStat,ce.secondaryStat,...ce.details])be&&be.values[ne.dataFrameRowIndex]&&ee.push(r.createElement(Ue,{key:be.name,field:be,index:ne.dataFrameRowIndex}))}else ne.title&&ee.push(r.createElement(De,{key:"title",label:"Title",value:ne.title})),ne.subTitle&&ee.push(r.createElement(De,{key:"subtitle",label:"Subtitle",value:ne.subTitle}));return r.createElement("table",{style:{width:"100%"}},r.createElement("tbody",null,ee))}function ye(ne){const Z=ne.edge.dataFrameRowIndex,ee=(0,d.lr)(ne.edges),ce=ee.source?.values[Z]||"",be=ee.target?.values[Z]||"",Ee=[];ce&&be&&Ee.push(r.createElement(De,{key:"header-row",label:"Source \u2192 Target",value:`${ce} \u2192 ${be}`}));for(const Be of[ee.mainStat,ee.secondaryStat,...ee.details])Be&&Be.values[Z]&&Ee.push(r.createElement(Ue,{key:`field-row-${Z}`,field:Be,index:Z}));return r.createElement("table",{style:{width:"100%"}},r.createElement("tbody",null,Ee))}const Te=ne=>({label:(0,n.css)`
      label: Label;
      line-height: 1.25;
      color: ${ne.colors.text.disabled};
      font-size: ${ne.typography.size.sm};
      font-weight: ${ne.typography.fontWeightMedium};
      padding-right: ${ne.spacing(1)};
    `,value:(0,n.css)`
      label: Value;
      font-size: ${ne.typography.size.sm};
      font-weight: ${ne.typography.fontWeightMedium};
      color: ${ne.colors.text.primary};
    `});var nt=e(3517);function ct(ne,Z,ee){const ce=(0,nt.Z)(ne.gridLayout);let be;if(ce===!0&&!ne.gridLayout&&ee){const Ee=Z.find(Be=>Be.id===ee);Ee&&(be={x:-Ee.x,y:-Ee.y})}return be}function he(ne){const[Z,ee]=(0,r.useState)(),ce=(0,F.default)();return(0,r.useEffect)(()=>{ne&&(ee(ne),setTimeout(()=>{ce()&&ee(void 0)},500))},[ne,ce]),Z}function xe({scale:ne=1,bounds:Z,focus:ee}={}){const ce=(0,F.default)(),be=(0,r.useRef)(!1),Ee=(0,r.useRef)(0),Be=(0,r.useRef)(null),Le={x:0,y:0},ze=(0,r.useMemo)(()=>({right:Z?-Z.left:1/0,left:Z?-Z.right:-1/0,bottom:Z?-Z.top:-1/0,top:Z?-Z.bottom:1/0}),[Z]),Fe=(0,r.useRef)(Le),$e=(0,r.useRef)(Le),et=(0,r.useRef)(Le),[tt,it]=(0,r.useState)({isPanning:!1,position:Le});(0,r.useEffect)(()=>{const Wt=It=>{!be.current&&ce()&&(be.current=!0,Fe.current=He(It),$e.current={...et.current},it(Zt=>({...Zt,isPanning:!0})),we())},ut=()=>{be.current&&ce()&&(be.current=!1,it(It=>({...It,isPanning:!1})),lt())},pt=It=>{Wt(It),Bt(It)},we=()=>{document.addEventListener("mousemove",Bt),document.addEventListener("mouseup",ut),document.addEventListener("touchmove",Bt),document.addEventListener("touchend",ut)},lt=()=>{document.removeEventListener("mousemove",Bt),document.removeEventListener("mouseup",ut),document.removeEventListener("touchmove",Bt),document.removeEventListener("touchend",ut)},Bt=It=>{cancelAnimationFrame(Ee.current);const Zt=He(It);Ee.current=requestAnimationFrame(()=>{if(ce()&&Be.current){let yn=Zt.x-Fe.current.x,xn=Zt.y-Fe.current.y;et.current={x:Me($e.current.x+yn/ne,ze.left,ze.right),y:Me($e.current.y+xn/ne,ze.top,ze.bottom)},it(An=>({...An,position:{...et.current}}))}})},Kt=Be.current;return Kt&&(Kt.addEventListener("mousedown",pt),Kt.addEventListener("touchstart",pt)),()=>{Kt&&(Kt.removeEventListener("mousedown",pt),Kt.removeEventListener("touchstart",pt))}},[ne,ze,ce]);const vt=(0,nt.Z)(ee);(0,r.useEffect)(()=>{if(ee&&vt?.x!==ee.x&&vt?.y!==ee.y){const Wt={x:Me(ee.x,ze.left,ze.right),y:Me(ee.y,ze.top,ze.bottom)};it({position:Wt,isPanning:!1}),et.current=Wt,$e.current=Wt}},[ee,vt,ze,et,$e]);let yt=tt.position;return ee&&vt?.x!==ee.x&&vt?.y!==ee.y&&(yt=ee),{state:{...tt,position:{x:Me(yt.x,ze.left,ze.right),y:Me(yt.y,ze.top,ze.bottom)}},ref:Be}}function Me(ne,Z,ee){return Math.min(Math.max(ne,Z??-1/0),ee??1/0)}function He(ne){return ne instanceof TouchEvent?{x:ne.changedTouches[0].clientX,y:ne.changedTouches[0].clientY}:ne instanceof MouseEvent?{x:ne.clientX,y:ne.clientY}:{x:0,y:0}}const Ve={stepDown:ne=>ne/1.5,stepUp:ne=>ne*1.5,min:.13,max:2.25};function Oe({stepUp:ne,stepDown:Z,min:ee,max:ce}=Ve){const be=(0,r.useRef)(null),[Ee,Be]=(0,r.useState)(1),Le=(0,r.useCallback)(()=>{Ee<(ce??1/0)&&Be(ne(Ee))},[Ee,ne,ce]),ze=(0,r.useCallback)(()=>{Ee>(ee??-1/0)&&Be(Z(Ee))},[Ee,Z,ee]),Fe=(0,r.useCallback)(function($e){if($e.ctrlKey||$e.metaKey){if($e.preventDefault(),Be(Math.min(Math.max(ee??-1/0,Ee+Math.min($e.deltaY,2)*-.01),ce??1/0)),$e.deltaY<0){const et=Ee+Math.max($e.deltaY,-4)*-.015;Be(Math.max(ee??-1/0,et))}else if($e.deltaY>0){const et=Ee+Math.min($e.deltaY,4)*-.015;Be(Math.min(ce??1/0,et))}}},[ee,ce,Ee]);return(0,r.useEffect)(()=>{if(!be.current)return;const $e=be.current;return $e.addEventListener("wheel",Fe,{passive:!1}),()=>{$e&&$e.removeEventListener("wheel",Fe)}},[Fe]),{onStepUp:Le,onStepDown:ze,scale:Math.max(Math.min(Ee,ce??1/0),ee??-1/0),isMax:Ee>=(ce??1/0),isMin:Ee<=(ee??-1/0),ref:be}}const Ne=ne=>({wrapper:(0,n.css)`
    label: wrapper;
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: relative;
  `,svg:(0,n.css)`
    label: svg;
    height: 100%;
    width: 100%;
    overflow: visible;
    font-size: 10px;
    cursor: move;
  `,svgPanning:(0,n.css)`
    label: svgPanning;
    user-select: none;
  `,noDataMsg:(0,n.css)`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${ne.typography.h4.fontSize};
    color: ${ne.colors.text.secondary};
  `,mainGroup:(0,n.css)`
    label: mainGroup;
    will-change: transform;
  `,viewControls:(0,n.css)`
    label: viewControls;
    position: absolute;
    left: 2px;
    bottom: 3px;
    right: 0;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    pointer-events: none;
  `,legend:(0,n.css)`
    label: legend;
    background: ${ne.colors.background.secondary};
    box-shadow: ${ne.shadows.z1};
    padding-bottom: 5px;
    margin-right: 10px;
  `,viewControlsWrapper:(0,n.css)`
    margin-left: auto;
  `,alert:(0,n.css)`
    label: alert;
    padding: 5px 8px;
    font-size: 10px;
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
    border-radius: ${ne.shape.radius.default};
    align-items: center;
    position: absolute;
    top: 0;
    right: 0;
    background: ${ne.colors.warning.main};
    color: ${ne.colors.warning.contrastText};
  `,loadingWrapper:(0,n.css)`
    label: loadingWrapper;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),_e=200;function qe({getLinks:ne,dataFrames:Z,nodeLimit:ee}){const ce=ee||_e,{edges:be,nodes:Ee}=(0,se.Y)(Z),[Be,{width:Le,height:ze}]=(0,i.Z)(),[Fe,$e]=(0,r.useState)(k),et=Ee[0],tt=be[0],it=(0,r.useMemo)(()=>(0,d.HB)(et,tt),[tt,et]),{nodeHover:vt,setNodeHover:yt,clearNodeHover:Wt,edgeHover:ut,setEdgeHover:pt,clearEdgeHover:we}=Xe(),[lt,Bt]=(0,r.useState)([]);(0,r.useEffect)(()=>{let Pt=[];vt?Pt=(0,d.uX)(it.nodes,it.edges,vt):ut&&(Pt=(0,d.MP)(it.nodes,it.edges,ut)),Bt(Pt)},[vt,ut,it]);const[Kt,It]=(0,r.useState)(),Zt=(0,r.useCallback)((Pt,Dt)=>It(Dt.node.id),[It]),{nodes:yn,edges:xn,markers:An,bounds:qt,hiddenNodesCount:On,loading:wn}=q(it.nodes,it.edges,Fe,ce,Le,Kt),Zn=ct(Fe,yn,Kt),{panRef:Aa,zoomRef:Ea,onStepUp:Nt,onStepDown:en,isPanning:rn,position:un,scale:on,isMaxZoom:In,isMinZoom:Sn}=Ke(qt,Zn),{onEdgeOpen:Ln,onNodeOpen:hn,MenuComponent:Gn}=ie(ne,et,tt,Fe,$e,It),Cn=(0,g.wW)(Ne),Yn=(0,r.useCallback)(Pt=>{Be(Pt),Ea.current=Pt},[Be,Ea]),Xn=he(Kt);return r.createElement("div",{ref:Yn,className:Cn.wrapper},wn?r.createElement("div",{className:Cn.loadingWrapper},"Computing layout\xA0",r.createElement(u.$,null)):null,Z.length&&it.nodes.length?r.createElement("svg",{ref:Aa,viewBox:`${-(Le/2)} ${-(ze/2)} ${Le} ${ze}`,className:o()(Cn.svg,rn&&Cn.svgPanning)},r.createElement("g",{className:Cn.mainGroup,style:{transform:`scale(${on}) translate(${Math.floor(un.x)}px, ${Math.floor(un.y)}px)`}},!Fe.gridLayout&&r.createElement(Je,{edges:xn,nodeHoveringId:vt,edgeHoveringId:ut,onClick:Ln,onMouseEnter:pt,onMouseLeave:we}),r.createElement(rt,{nodes:yn,onMouseEnter:yt,onMouseLeave:Wt,onClick:hn,hoveringIds:lt||[Xn]}),r.createElement(mt,{markers:An||[],onClick:Zt}),!Fe.gridLayout&&r.createElement(Ae,{edges:xn,nodeHoveringId:vt,edgeHoveringId:ut}))):r.createElement("div",{className:Cn.noDataMsg},"No data"),r.createElement("div",{className:Cn.viewControls},yn.length?r.createElement("div",{className:Cn.legend},r.createElement(D,{sortable:Fe.gridLayout,nodes:yn,sort:Fe.sort,onSort:Pt=>{$e({...Fe,sort:Pt})}})):null,r.createElement("div",{className:Cn.viewControlsWrapper},r.createElement(P,{config:Fe,onConfigChange:Pt=>{Pt.gridLayout!==Fe.gridLayout&&It(void 0),$e(Pt)},onMinus:en,onPlus:Nt,scale:on,disableZoomIn:In,disableZoomOut:Sn}))),On>0&&r.createElement("div",{className:Cn.alert,"aria-label":"Nodes hidden warning"},r.createElement(l.J,{size:"sm",name:"info-circle"})," ",On," nodes are hidden for performance reasons."),Gn)}const rt=(0,r.memo)(function(Z){return r.createElement(r.Fragment,null,Z.nodes.map(ee=>r.createElement(c.NB,{key:ee.id,node:ee,onMouseEnter:Z.onMouseEnter,onMouseLeave:Z.onMouseLeave,onClick:Z.onClick,hovering:!Z.hoveringIds||Z.hoveringIds.length===0?"default":Z.hoveringIds?.includes(ee.id)?"active":"inactive"})))}),mt=(0,r.memo)(function(Z){return r.createElement(r.Fragment,null,Z.markers.map(ee=>r.createElement(O,{key:"marker-"+ee.node.id,marker:ee,onClick:Z.onClick})))}),Je=(0,r.memo)(function(Z){return r.createElement(r.Fragment,null,Z.edges.map(ee=>r.createElement(v,{key:ee.id,edge:ee,hovering:ee.source.id===Z.nodeHoveringId||ee.target.id===Z.nodeHoveringId||Z.edgeHoveringId===ee.id,onClick:Z.onClick,onMouseEnter:Z.onMouseEnter,onMouseLeave:Z.onMouseLeave})))}),Ae=(0,r.memo)(function(Z){return r.createElement(r.Fragment,null,Z.edges.map((ee,ce)=>{const be=ee.source.id===Z.nodeHoveringId||ee.target.id===Z.nodeHoveringId||Z.edgeHoveringId===ee.id,Ee=ee.mainStat||ee.secondaryStat;return be&&Ee&&r.createElement(p,{key:ee.id,edge:ee})}))});function Ke(ne,Z){const{scale:ee,onStepDown:ce,onStepUp:be,ref:Ee,isMax:Be,isMin:Le}=Oe(),{state:ze,ref:Fe}=xe({scale:ee,bounds:ne,focus:Z}),{position:$e,isPanning:et}=ze;return{zoomRef:Ee,panRef:Fe,position:$e,isPanning:et,scale:ee,onStepDown:ce,onStepUp:be,isMaxZoom:Be,isMinZoom:Le}}function Xe(){const[ne,Z]=(0,r.useState)(void 0),ee=(0,r.useCallback)(()=>Z(void 0),[Z]),[ce,be]=(0,r.useState)(void 0),Ee=(0,r.useCallback)(()=>be(void 0),[be]);return{nodeHover:ne,setNodeHover:Z,clearNodeHover:ee,edgeHover:ce,setEdgeHover:be,clearEdgeHover:Ee}}},30415:(G,A,e)=>{"use strict";e.d(A,{Y:()=>o});var n=e(85960),a=e(25002);function o(r){return(0,n.useMemo)(()=>(0,a.E_)(r),[r])}},25002:(G,A,e)=>{"use strict";e.d(A,{E_:()=>I,Ee:()=>T,Ew:()=>s,F:()=>u,HB:()=>c,MP:()=>O,Tz:()=>M,dM:()=>g,lr:()=>l,uX:()=>x});var n=e(30215),a=e(68619),o=e(58309),r=e(14345),i=e(46544);function g(L,P,N,F=1){const U=L.x2-L.x1,j=L.y2-L.y1,V=Math.sqrt(U*U+j*j),_=(L.x2-L.x1)/V,H=(L.y2-L.y1)/V,z=F-F/10;return{x1:L.x1+_*(P+5),y1:L.y1+H*(P+5),x2:L.x2-_*(N+3+z),y2:L.y2-H*(N+3+z)}}function u(L){const P={...L,fields:L.fields.map(F=>({...F,name:F.name.toLowerCase()}))},N=new n.N(P);return{id:N.getFieldByName(a.z.id.toLowerCase()),title:N.getFieldByName(a.z.title.toLowerCase()),subTitle:N.getFieldByName(a.z.subTitle.toLowerCase()),mainStat:N.getFieldByName(a.z.mainStat.toLowerCase()),secondaryStat:N.getFieldByName(a.z.secondaryStat.toLowerCase()),arc:m(L,a.z.arc),details:m(L,a.z.detail),color:N.getFieldByName(a.z.color),icon:N.getFieldByName(a.z.icon),nodeRadius:N.getFieldByName(a.z.nodeRadius.toLowerCase()),highlighted:N.getFieldByName(a.z.highlighted.toLowerCase())}}function l(L){const P={...L,fields:L.fields.map(F=>({...F,name:F.name.toLowerCase()}))},N=new n.N(P);return{id:N.getFieldByName(a.z.id.toLowerCase()),source:N.getFieldByName(a.z.source.toLowerCase()),target:N.getFieldByName(a.z.target.toLowerCase()),mainStat:N.getFieldByName(a.z.mainStat.toLowerCase()),secondaryStat:N.getFieldByName(a.z.secondaryStat.toLowerCase()),details:m(L,a.z.detail.toLowerCase()),highlighted:N.getFieldByName(a.z.highlighted.toLowerCase()),thickness:N.getFieldByName(a.z.thickness.toLowerCase())}}function m(L,P){return L.fields.filter(N=>N.name.match(new RegExp("^"+P)))}function c(L,P){if(!(P||L))return{nodes:[],edges:[]};if(L){const N=u(L);if(!N.id)throw new Error("id field is required for nodes data frame.");const F={};for(let j=0;j<N.id.values.length;j++){const V=N.id.values[j];F[V]=p(V,N,j)}let U=P?d(P,l(P),F):[];for(const j of U)F[j.target].incoming++;return{nodes:Object.values(F),edges:U,legend:N.arc.map(j=>({color:j.config.color?.fixedColor??"",name:j.config.displayName||j.name}))}}else{P=P;const N={},F=l(P);for(let V=0;V<P.length;V++){const{source:_,target:H}=v(F,V);N[H.id]=N[H.id]||H,N[_.id]=N[_.id]||_,f(F.mainStat)&&(N[H.id].mainStatNumeric=(N[H.id].mainStatNumeric??0)+F.mainStat.values[V]),f(F.secondaryStat)&&(N[H.id].secondaryStatNumeric=(N[H.id].secondaryStatNumeric??0)+F.secondaryStat.values[V]),N[H.id].incoming++}let U=d(P,F,N);return{nodes:E(N,F),edges:U}}}function d(L,P,N){if(!P.id)throw new Error("id field is required for edges data frame.");return P.id.values.map((F,U)=>{const j=P.target?.values[U],V=P.source?.values[U],_=N[V],H=N[j];return{id:F,dataFrameRowIndex:U,source:V,target:j,sourceNodeRadius:_.nodeRadius?_.nodeRadius.values[_.dataFrameRowIndex]:i.UN,targetNodeRadius:H.nodeRadius?H.nodeRadius.values[H.dataFrameRowIndex]:i.UN,mainStat:P.mainStat?s(P.mainStat.config,P.mainStat.values[U]):"",secondaryStat:P.secondaryStat?s(P.secondaryStat.config,P.secondaryStat.values[U]):"",highlighted:P.highlighted?.values[U]||!1,thickness:P.thickness?.values[U]||1}})}function f(L){return L&&L.type===o.fS.number}function E(L,P){const N=[],F=[],U=f(P.secondaryStat)?{...P.secondaryStat,values:N}:void 0,j=f(P.mainStat)?{...P.mainStat,values:F}:void 0;return Object.values(L).map((V,_)=>{if(j||U){const H={...V};return j&&(H.mainStat=j,F.push(V.mainStatNumeric),H.dataFrameRowIndex=_),U&&(H.secondaryStat=U,N.push(V.secondaryStatNumeric),H.dataFrameRowIndex=_),H}return V})}function v(L,P){const N=L.target?.values[P],F=L.source?.values[P];return{target:h(N,P),source:h(F,P)}}function h(L,P){return{id:L,title:L,subTitle:"",dataFrameRowIndex:P,incoming:0,arcSections:[],highlighted:!1}}function p(L,P,N){return{id:L,title:P.title?.values[N]||"",subTitle:P.subTitle?.values[N]||"",dataFrameRowIndex:N,incoming:0,mainStat:P.mainStat,secondaryStat:P.secondaryStat,arcSections:P.arc,color:P.color,icon:P.icon?.values[N]||"",nodeRadius:P.nodeRadius,highlighted:P.highlighted?.values[N]||!1}}function s(L,P){if(typeof P=="string")return P;{const N=L.decimals||2;return Number.isFinite(P)?P.toFixed(N)+(L.unit?" "+L.unit:""):""}}function y(L){const P=b();for(let N=0;N<L;N++)P.add(C(N));return P}function C(L){return{id:L.toString(),title:`service:${L}`,subtitle:"service",arc__success:.5,arc__errors:.5,mainstat:.1,secondarystat:2,color:.5,icon:"database",noderadius:40}}function b(){const L={[NodeGraphDataFrameFieldNames.id]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.title]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.subTitle]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.arc+"success"]:{values:[],type:FieldType.number,config:{color:{fixedColor:"green"}}},[NodeGraphDataFrameFieldNames.arc+"errors"]:{values:[],type:FieldType.number,config:{color:{fixedColor:"red"}}},[NodeGraphDataFrameFieldNames.color]:{values:[],type:FieldType.number,config:{color:{mode:"continuous-GrYlRd"}}},[NodeGraphDataFrameFieldNames.icon]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.nodeRadius]:{values:[],type:FieldType.number}};return new MutableDataFrame({name:"nodes",fields:Object.keys(L).map(P=>({...L[P],name:P}))})}function S(L){const P=D();for(const N of L)P.add({id:N.source+"--"+N.target,...N});return P}function D(){const L={[NodeGraphDataFrameFieldNames.id]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.source]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.target]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:[],type:FieldType.number}};return new MutableDataFrame({name:"edges",fields:Object.keys(L).map(P=>({...L[P],name:P}))})}function M(L){if(L.length===0)return{top:0,right:0,bottom:0,left:0,center:{x:0,y:0}};const P=L.reduce((U,j)=>(j.x>U.right&&(U.right=j.x),j.x<U.left&&(U.left=j.x),j.y>U.bottom&&(U.bottom=j.y),j.y<U.top&&(U.top=j.y),U),{top:1/0,right:-1/0,bottom:-1/0,left:1/0}),N=P.top+(P.bottom-P.top)/2,F=P.left+(P.right-P.left)/2;return{...P,center:{x:F,y:N}}}function T(L,P){let N=L.filter(F=>!!(F.meta?.preferredVisualisationType==="nodeGraph"||F.name==="nodes"||F.name==="edges"||F.refId==="nodes"||F.refId==="edges"||new n.N(F).getFieldByName(a.z.id)));return P&&(N=R(N,P)),N}const R=(L,P)=>L.map(N=>{if(new n.N(N).getFieldByName(a.z.source.toLowerCase())){if(P?.edges?.mainStatUnit){const U=N.fields.find(j=>j.name.toLowerCase()===a.z.mainStat);U&&(U.config={...U.config,unit:P.edges.mainStatUnit})}if(P?.edges?.secondaryStatUnit){const U=N.fields.find(j=>j.name.toLowerCase()===a.z.secondaryStat);U&&(U.config={...U.config,unit:P.edges.secondaryStatUnit})}}else{if(P?.nodes?.mainStatUnit){const U=N.fields.find(j=>j.name.toLowerCase()===a.z.mainStat);U&&(U.config={...U.config,unit:P.nodes.mainStatUnit})}if(P?.nodes?.secondaryStatUnit){const U=N.fields.find(j=>j.name.toLowerCase()===a.z.secondaryStat);U&&(U.config={...U.config,unit:P.nodes.secondaryStatUnit})}if(P?.nodes?.arcs?.length)for(const U of P.nodes.arcs){const j=N.fields.find(V=>V.name.toLowerCase()===U.field);j&&U.color&&(j.config={...j.config,color:{fixedColor:U.color,mode:r.S.Fixed}})}}return N}),O=(L,P,N)=>{const F=P.find(U=>U.id===N);return F?[...new Set(L.filter(U=>F.source===U.id||F.target===U.id).map(U=>U.id))]:[]},x=(L,P,N)=>{const F=L.find(U=>U.id===N);if(F){const U=P.filter(j=>j.source===F.id||j.target===F.id);return[...new Set(U.flatMap(j=>L.filter(V=>j.source===V.id||j.target===V.id).map(V=>V.id)))]}return[]},I=L=>L.reduce((P,N)=>{const F=N.fields.filter(U=>U.name==="source");return N.name==="edges"||F.length?P.edges.push(N):P.nodes.push(N),P},{edges:[],nodes:[]})},43505:(G,A,e)=>{"use strict";e.d(A,{h:()=>u,j:()=>g});var n=e(88008),a=e(16515),o=e(94372),r=e(49531),i=e(1713);function g(l,m=!0){const c=["Value options"];l.addRadio({path:"reduceOptions.values",name:"Show",description:"Calculate a single value per column or series or show each row",settings:{options:[{value:!1,label:"Calculate"},{value:!0,label:"All values"}]},category:c,defaultValue:!1}),l.addNumberInput({path:"reduceOptions.limit",name:"Limit",description:"Max number of rows to display",category:c,settings:{placeholder:"25",integer:!0,min:1,max:5e3},showIf:d=>d.reduceOptions.values===!0}),l.addCustomEditor({id:"reduceOptions.calcs",path:"reduceOptions.calcs",name:"Calculation",description:"Choose a reducer function / calculation",category:c,editor:n.S.get("stats-picker").editor,defaultValue:[a.gz.lastNotNull],showIf:d=>d.reduceOptions.values===!1}),m&&l.addSelect({path:"reduceOptions.fields",name:"Fields",description:"Select the fields that should be included in the panel",category:c,settings:{allowCustomValue:!0,options:[],getOptions:async d=>{const f=[{value:"",label:"Numeric Fields"},{value:"/.*/",label:"All Fields"}];if(d&&d.data)for(const E of d.data)for(const v of E.fields){const h=(0,o.CZ)(v,E,d.data),p=`/^${(0,r.GE)(h)}$/`;f.push({value:p,label:h})}return Promise.resolve(f)}},defaultValue:""})}function u(l,m){l.addRadio({path:"orientation",name:"Orientation",description:"Layout orientation",category:m,settings:{options:[{value:i.wm.Auto,label:"Auto"},{value:i.wm.Horizontal,label:"Horizontal"},{value:i.wm.Vertical,label:"Vertical"}]},defaultValue:i.wm.Auto})}},44293:(G,A,e)=>{"use strict";e.r(A),e.d(A,{plugin:()=>S});var n=e(12932),a=e(1713),o=e(58541),r=e(16090),i=e(14345);const g=(D,M,T)=>{const R=(0,r.ZH)(D,M,T);if(T.angular&&(M==="singlestat"||M==="grafana-singlestat-panel")){const O=T.angular;if(R.graphMode=a.IG.None,O.sparkline&&O.sparkline.show&&(R.graphMode=a.IG.Area),O.colorBackground)R.colorMode=a.pc.Background;else if(O.colorValue)R.colorMode=a.pc.Value;else if(R.colorMode=a.pc.None,O.sparkline?.lineColor&&R.graphMode===a.IG.Area){const x=D.fieldConfig??{};x.defaults.color={mode:i.S.Fixed,fixedColor:O.sparkline.lineColor},D.fieldConfig=x}O.valueName==="name"&&(R.textMode=a.jG.Name)}return R};var u=e(56375),l=e(85960),m=e(58309),c=e(98068),d=e(17338),f=e(72264),E=e(15324),v=e(42273),h=e(67954);class p extends l.PureComponent{constructor(){super(...arguments),this.renderComponent=(M,T)=>{const{timeRange:R,options:O}=this.props,{value:x,alignmentFactors:I,width:L,height:P,count:N,orientation:F}=M,{openMenu:U,targetClassName:j}=T;let V=x.sparkline;return V&&(V.timeRange=R),l.createElement(f.w6,{value:x.display,count:N,sparkline:V,colorMode:O.colorMode,graphMode:O.graphMode,justifyMode:O.justifyMode,textMode:this.getTextMode(),alignmentFactors:I,parentOrientation:F,text:O.text,width:L,height:P,theme:h.config.theme2,onClick:U,className:j,disableWideLayout:!O.wideLayout})},this.renderValue=M=>{const{value:T}=M,{getLinks:R,hasLinks:O}=T;return O&&R?l.createElement(E.V,{links:R},x=>this.renderComponent(M,x)):this.renderComponent(M,{})},this.getValues=()=>{const{data:M,options:T,replaceVariables:R,fieldConfig:O,timeZone:x}=this.props;let I;for(let L of M.series)for(let P of L.fields){let{config:N}=P;if(P.type===m.fS.number){if(P.state?.range)continue;!I&&(!(0,u.isNumber)(N.min)||!(0,u.isNumber)(N.max))&&(I=(0,d.Xu)(M.series));const F=N.min??I.min,U=N.max??I.max;P.state=P.state??{},P.state.range={min:F,max:U,delta:U-F}}}return(0,c.nG)({fieldConfig:O,reduceOptions:T.reduceOptions,replaceVariables:R,theme:h.config.theme2,data:M.series,sparkline:T.graphMode!==a.IG.None,timeZone:x})}}getTextMode(){const{options:M,fieldConfig:T,title:R}=this.props;return M.textMode===a.jG.Auto&&(T.defaults.displayName||!R)?a.jG.ValueAndName:M.textMode}render(){const{height:M,options:T,width:R,data:O,renderCounter:x}=this.props;return l.createElement(v.Q,{getValues:this.getValues,getAlignmentFactors:c.sg,renderValue:this.renderValue,width:R,height:M,source:O,itemSpacing:3,renderCounter:x,autoGrid:!0,orientation:T.orientation})}}var s=e(43505);const y={colorMode:a.pc.Value,graphMode:a.IG.Area,justifyMode:a.ap.Auto,textMode:a.jG.Auto,wideLayout:!0};var C=e(12802);class b{getSuggestionsForData(M){const{dataSummary:T}=M;if(!T.hasData)return;const R=M.getListAppender({name:C.y.Stat,pluginId:"stat",options:{},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:O=>{O.options.reduceOptions.values&&(O.options.reduceOptions.limit=1)}}});T.hasStringField&&T.hasNumberField&&T.frameCount===1&&T.rowCountTotal<10&&(R.append({name:C.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"}}}),R.append({name:C.y.StatColoredBackground,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:a.pc.Background}})),T.stringFieldCount===1&&T.frameCount===1&&T.rowCountTotal<10&&T.fieldCount===1&&R.append({name:C.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:a.pc.None}}),T.hasNumberField&&T.hasTimeField&&(R.append({options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),R.append({name:C.y.StatColoredBackground,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},graphMode:a.IG.None,colorMode:a.pc.Background}}))}}const S=new n.c(p).useFieldConfig().setPanelOptions(D=>{const M=["Stat styles"];(0,s.j)(D),(0,s.h)(D,M),o.Z(D),D.addSelect({path:"textMode",name:"Text mode",description:"Control if name and value is displayed or just name",category:M,settings:{options:[{value:a.jG.Auto,label:"Auto"},{value:a.jG.Value,label:"Value"},{value:a.jG.ValueAndName,label:"Value and name"},{value:a.jG.Name,label:"Name"},{value:a.jG.None,label:"None"}]},defaultValue:y.textMode}).addRadio({path:"wideLayout",name:"Wide layout",category:M,settings:{options:[{value:!0,label:"On"},{value:!1,label:"Off"}]},defaultValue:y.wideLayout,showIf:T=>T.textMode===a.jG.ValueAndName}),D.addSelect({path:"colorMode",name:"Color mode",defaultValue:a.pc.Value,category:M,settings:{options:[{value:a.pc.None,label:"None"},{value:a.pc.Value,label:"Value"},{value:a.pc.Background,label:"Background Gradient"},{value:a.pc.BackgroundSolid,label:"Background Solid"}]}}).addRadio({path:"graphMode",name:"Graph mode",description:"Stat panel graph / sparkline mode",category:M,defaultValue:y.graphMode,settings:{options:[{value:a.IG.None,label:"None"},{value:a.IG.Area,label:"Area"}]}}).addRadio({path:"justifyMode",name:"Text alignment",defaultValue:y.justifyMode,category:M,settings:{options:[{value:a.ap.Auto,label:"Auto"},{value:a.ap.Center,label:"Center"}]}})}).setNoPadding().setPanelChangeHandler(g).setSuggestionsSupplier(new b).setMigrationHandler(r.rD)},24298:(G,A,e)=>{"use strict";e.d(A,{Bc:()=>p,I0:()=>v,OF:()=>g,yR:()=>s});var n=e(56375),a=e.n(n),o=e(70274),r=e(37634),i=e(58309);const g=y=>(!y.pluginVersion&&"columns"in y&&console.log("Was angular table",y),y.options),u={timeseries_to_rows:"seriesToRows",timeseries_to_columns:"seriesToColumns",timeseries_aggregations:"reduce",table:"merge"},l={avg:"mean",min:"min",max:"max",total:"sum",current:"lastNotNull",count:"count"},m={cell:"color-background",row:"color-background",value:"color-text"},c=(y,C)=>[-1/0,...y].map((b,S)=>({color:C[S],value:(0,n.isNumber)(b)?b:parseInt(b,10)})),d=(y,C)=>{const b=y.transformations??[];if(Object.keys(u).includes(C.transform)){const S={reducers:[]};C.transform==="timeseries_aggregations"&&(S.includeTimeField=!1,S.reducers=C.columns.map(D=>l[D.value])),b.push({id:u[C.transform],options:S})}return b},f=y=>{const b={matcher:{id:/^\/.*\/$/.test(y.pattern)?o.mi.byRegexp:o.mi.byName,options:y.pattern},properties:[]};return y.alias&&b.properties.push({id:"displayName",value:y.alias}),y.unit&&b.properties.push({id:"unit",value:y.unit}),y.decimals&&b.properties.push({id:"decimals",value:y.decimals}),y.type==="date"&&b.properties.push({id:"unit",value:`time: ${y.dateFormat}`}),y.link&&b.properties.push({id:"links",value:[{title:(0,n.defaultTo)(y.linkTooltip,""),url:(0,n.defaultTo)(y.linkUrl,""),targetBlank:(0,n.defaultTo)(y.linkTargetBlank,!1)}]}),y.colorMode&&b.properties.push({id:"custom.cellOptions",value:{type:m[y.colorMode]}}),y.align&&b.properties.push({id:"custom.align",value:y.align==="auto"?null:y.align}),y.thresholds?.length&&b.properties.push({id:"thresholds",value:{mode:r.H.Absolute,steps:c(y.thresholds,y.colors)}}),b},E=y=>{let C={custom:{}};if(y){if(C=(0,n.omitBy)({unit:y.unit,decimals:y.decimals,displayName:y.alias,custom:{align:y.align==="auto"?null:y.align}},n.isNil),y.thresholds.length){const b={mode:r.H.Absolute,steps:c(y.thresholds,y.colors)};C.thresholds=b}y.colorMode&&(C.custom.cellOptions={type:m[y.colorMode]})}return C},v=(y,C,b)=>{if(C==="table-old"&&b.angular){const S=b.angular,D=d(y,S),M=S.styles.find(O=>O.pattern==="/.*/"),T=E(M),R=S.styles.filter(O=>O.pattern!=="/.*/").map(f);y.transformations=D,y.fieldConfig={defaults:T,overrides:R}}return{}},h=y=>y?.filter(C=>C.meta?.custom?.parentRowIndex===void 0)||[y?.[0]],p=y=>{const C=[];return h(y).filter(S=>!!S&&S.length!==0)?.forEach(S=>{const D=y?.filter(O=>S.refId===O.refId&&O.meta?.custom?.parentRowIndex!==void 0),M=(0,n.groupBy)(D,O=>O.meta?.custom?.parentRowIndex),T=Object.keys(M).map(O=>M[O]),R={...S};D&&D.length>0&&R.fields.push({name:"nested",type:i.fS.nestedFrames,config:{},values:T}),C.push(R)}),C},s=y=>y?.some(C=>C.meta?.custom?.parentRowIndex!==void 0)},70555:(G,A,e)=>{"use strict";e.d(A,{M:()=>g});var n=e(85960),a=e(74042),o=e(5106),r=e(18892);const i=[{label:"Never",value:!1},{label:"Threshold",value:36e5}],g=({value:u,onChange:l,item:m})=>{const c=typeof u=="number";return i[1].value=c?u:36e5,n.createElement(a.Lh,null,n.createElement(o.S,{value:u,options:i,onChange:l}),c&&n.createElement(r.C,{value:u,onChange:l,inputPrefix:r.Z.GreaterThan,isTime:m.settings?.isTime??!1}))}},77425:(G,A,e)=>{"use strict";e.d(A,{j:()=>m});var n=e(85960),a=e(74042),o=e(5106),r=e(27436),i=e(75064);const g=[{label:"Solid",value:"solid"},{label:"Dash",value:"dash"},{label:"Dots",value:"dot"}],u=["10, 10","10, 15","10, 20","10, 25","10, 30","10, 40","15, 10","20, 10","25, 10","30, 10","40, 10","50, 10","5, 10","30, 3, 3"].map(d=>({label:d,value:d})),l=["0, 10","0, 20","0, 30","0, 40","0, 3, 3"].map(d=>({label:d,value:d})),m=({value:d,onChange:f})=>{const E=(0,n.useMemo)(()=>d?.fill==="dash"?u:l,[d]),v=(0,n.useMemo)(()=>{if(!d?.dash?.length)return E[0];const h=d.dash?.join(", "),p=E.find(s=>s.value===h);return p||{label:h,value:h}},[d,E]);return n.createElement(a.Lh,null,n.createElement(o.S,{value:d?.fill||"solid",options:g,onChange:h=>{let p;h==="dot"?p=c(l[0].value):h==="dash"&&(p=c(u[0].value)),f({...d,fill:h,dash:p})}}),d?.fill&&d?.fill!=="solid"&&n.createElement(n.Fragment,null,n.createElement(r.Ph,{allowCustomValue:!0,options:E,value:v,width:20,onChange:h=>{f({...d,dash:c(h.value??"")})},formatCreateLabel:h=>`Segments: ${c(h).join(", ")}`}),n.createElement("div",null,"\xA0",n.createElement("a",{title:"The input expects a segment list",href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Parameters",target:"_blank",rel:"noreferrer"},n.createElement(i.h,{name:"question-circle",tooltip:"Help"})))))};function c(d){const f=[];for(const E of d.split(/(?:,| )+/)){const v=Number.parseInt(E,10);isNaN(v)||f.push(v)}return f}},18892:(G,A,e)=>{"use strict";e.d(A,{C:()=>i,Z:()=>r});var n=e(85960),a=e(71244),o=e(24956),r=(g=>(g.LessThan="lessthan",g.GreaterThan="greaterthan",g))(r||{});const i=({value:g,onChange:u,inputPrefix:l,isTime:m})=>{let c=a.secondsToHms(g/1e3);m||(c="10");const d=h=>{let p=!1;if(h)try{m&&a.isValidTimeSpan(h)?p=a.intervalToMs(h):p=Number(h)}catch(s){console.warn("ERROR",s)}u(p)},f=h=>{h.key==="Enter"&&d(h.currentTarget.value)},E=h=>{d(h.currentTarget.value)},v=l==="greaterthan"?n.createElement("div",null,">"):l==="lessthan"?n.createElement("div",null,"<"):null;return n.createElement(o.I,{autoFocus:!1,placeholder:"never",width:10,defaultValue:c,onKeyDown:f,onBlur:E,prefix:v,spellCheck:!1})}},4586:(G,A,e)=>{"use strict";e.d(A,{c:()=>g});var n=e(85960),a=e(74042),o=e(5106),r=e(18892);const i=[{label:"Never",value:!1},{label:"Always",value:!0},{label:"Threshold",value:36e5}],g=({value:u,onChange:l,item:m})=>{const c=typeof u=="number";return i[2].value=c?u:36e5,n.createElement(a.Lh,null,n.createElement(o.S,{value:u,options:i,onChange:l}),c&&n.createElement(r.C,{value:u,onChange:l,inputPrefix:r.Z.LessThan,isTime:m.settings?.isTime??!1}))}},25503:(G,A,e)=>{"use strict";e.d(A,{F:()=>o});var n=e(85960),a=e(27436);const o=({item:r,value:i,onChange:g,id:u})=>{const l=(0,n.useCallback)(m=>{g({mode:m.value})},[g]);return n.createElement(a.Ph,{inputId:u,value:i.mode,options:r.settings?.options??[],onChange:l})}},58976:(G,A,e)=>{"use strict";e.d(A,{F:()=>p,r:()=>v});var n=e(37496),a=e(14345),o=e(58309),r=e(17945),i=e(1713),g=e(90646),u=e(73427),l=e(59864),m=e(36438),c=e(70555),d=e(77425),f=e(4586),E=e(25503);const v={drawStyle:i.l8.Line,lineInterpolation:i.KC.Linear,lineWidth:1,fillOpacity:0,gradientMode:i.FI.None,barAlignment:i.pu.Center,stacking:{mode:i.o0.None,group:"A"},axisGridShow:!0,axisCenteredZero:!1,axisBorderShow:!1},h=["Graph styles"];function p(s,y=!0){return{standardOptions:{[n.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:a.S.PaletteClassic}}},useCustomConfig:C=>{C.addRadio({path:"drawStyle",name:"Style",category:h,defaultValue:s.drawStyle,settings:{options:g.q.drawStyle}}).addRadio({path:"lineInterpolation",name:"Line interpolation",category:h,defaultValue:s.lineInterpolation,settings:{options:g.q.lineInterpolation},showIf:b=>b.drawStyle===i.l8.Line}).addRadio({path:"barAlignment",name:"Bar alignment",category:h,defaultValue:s.barAlignment,settings:{options:g.q.barAlignment},showIf:b=>b.drawStyle===i.l8.Bars}).addSliderInput({path:"lineWidth",name:"Line width",category:h,defaultValue:s.lineWidth,settings:{min:0,max:10,step:1,ariaLabelForHandle:"Line width"},showIf:b=>b.drawStyle!==i.l8.Points}).addSliderInput({path:"fillOpacity",name:"Fill opacity",category:h,defaultValue:s.fillOpacity,settings:{min:0,max:100,step:1,ariaLabelForHandle:"Fill opacity"},showIf:b=>b.drawStyle!==i.l8.Points}).addRadio({path:"gradientMode",name:"Gradient mode",category:h,defaultValue:g.q.fillGradient[0].value,settings:{options:g.q.fillGradient},showIf:b=>b.drawStyle!==i.l8.Points}).addFieldNamePicker({path:"fillBelowTo",name:"Fill below to",category:h,hideFromDefaults:!0,settings:{filter:b=>b.type===o.fS.number}}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:h,showIf:b=>b.drawStyle===i.l8.Line,editor:d.j,override:d.j,process:r.kG,shouldApply:b=>b.type===o.fS.number}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",category:h,defaultValue:!1,editor:f.c,override:f.c,showIf:b=>b.drawStyle===i.l8.Line,shouldApply:b=>b.type!==o.fS.time,process:r.kG,settings:{isTime:y}}).addCustomEditor({id:"insertNulls",path:"insertNulls",name:"Disconnect values",category:h,defaultValue:!1,editor:c.M,override:c.M,showIf:b=>b.drawStyle===i.l8.Line,shouldApply:b=>b.type!==o.fS.time,process:r.kG,settings:{isTime:y}}).addRadio({path:"showPoints",name:"Show points",category:h,defaultValue:g.q.showPoints[0].value,settings:{options:g.q.showPoints},showIf:b=>b.drawStyle!==i.l8.Points}).addSliderInput({path:"pointSize",name:"Point size",category:h,defaultValue:5,settings:{min:1,max:40,step:1,ariaLabelForHandle:"Point size"},showIf:b=>b.showPoints!==i.Jp.Never||b.drawStyle===i.l8.Points}),u.V(C,s.stacking,h),C.addSelect({category:h,name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:i.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:i.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),l.r(C,s),m.B(C),C.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:i.i3.Off},settings:{options:g.q.thresholdsDisplayModes},editor:E.F,override:E.F,process:r.kG,shouldApply:()=>!0})}}}},59767:(G,A,e)=>{"use strict";e.d(A,{PQ:()=>o,WI:()=>i,h:()=>a,y0:()=>r});var n=e(14595);let a;function o(g){a=g}function r(){return!a||!a.getState?{templating:{...n.qM,lastKey:"key"}}:a.getState()}function i(g){if(!(!a||!a.getState))return a.dispatch(g)}},84337:(G,A,e)=>{"use strict";e.d(A,{B5:()=>n.B,bf:()=>o,hw:()=>a,n8:()=>r});var n=e(98521),a=(i=>(i[i.Admin=4]="Admin",i[i.Editor=2]="Editor",i[i.Member=0]="Member",i[i.Viewer=1]="Viewer",i))(a||{}),o=(i=>(i.View="View",i.Edit="Edit",i.Admin="Admin",i))(o||{}),r=(i=>(i.Folder="dash-folder",i.Dashboard="dash-db",i.AlertFolder="dash-folder-alerting",i))(r||{})},10390:()=>{"use strict"},21971:()=>{"use strict"},14092:()=>{"use strict"},3009:()=>{"use strict"},14914:(G,A,e)=>{"use strict";e.d(A,{Dn:()=>D,Eb:()=>C,GL:()=>u,GT:()=>E,Im:()=>p,Jd:()=>T,OW:()=>M,QI:()=>y,Qt:()=>s,RB:()=>O,VJ:()=>S,Wj:()=>c,Xw:()=>m,Yr:()=>I,_B:()=>d,_z:()=>v,hS:()=>f,le:()=>b,nq:()=>i,p8:()=>h,pO:()=>l,xF:()=>x,xt:()=>g,z:()=>R});var n=e(47064),a=e(74442);const o=(0,n.X)("ds-request-response"),r=(0,n.X)("ds-request-error"),i=(0,n.X)("template-variable-value-updated"),g=(0,n.X)("graph-click"),u=(0,n.X)("threshold-changed");class l extends a.m{}l.type="panel-queries-changed";class m extends a.m{}m.type="panel-transformations-changed";class c extends a.m{}c.type="panels-options-changed";class d extends a.m{}d.type="dashboard-panels-changed";class f extends a.m{}f.type="dashboard-meta-changed";class E extends a.m{}E.type="panel-directive-ready";class v extends a.m{}v.type="render";class h extends a.R{}h.type="zoom-out";var p=(L=>(L[L.Left=-1]="Left",L[L.Right=1]="Right",L))(p||{});class s extends a.R{}s.type="shift-time";class y extends a.R{}y.type="absolute-time";class C extends a.R{}C.type="remove-panel";class b extends a.R{}b.type="show-modal";class S extends a.R{}S.type="show-confirm-modal";class D extends a.R{}D.type="show-react-modal";class M extends a.m{}M.type="hide-modal";class T extends a.m{}T.type="dashboard-saved";class R extends a.R{}R.type="annotation-query-started";class O extends a.R{}O.type="annotation-query-finished";class x extends a.R{}x.type="panel-edit-started";class I extends a.R{}I.type="panel-edit-finished"},92713:(G,A,e)=>{"use strict";e.d(A,{f0:()=>a,iJ:()=>n,zN:()=>r,zQ:()=>o});var n=(i=>(i[i.CLOSE_PANE=0]="CLOSE_PANE",i[i.CHANGE_DATASOURCE=1]="CHANGE_DATASOURCE",i[i.CLOSE_EDITOR=2]="CLOSE_EDITOR",i))(n||{});const a=["lines","bars","points","stacked_lines","stacked_bars"];var o=(i=>(i.table="table",i.raw="raw",i))(o||{});const r=["table","raw"]},26052:()=>{"use strict"},95162:(G,A,e)=>{"use strict";e.d(A,{AccessControlAction:()=>D,AppNotificationSeverity:()=>v,AppNotificationTimeout:()=>h,CORRELATION_EDITOR_POST_CONFIRM_ACTION:()=>s.iJ,CoreEvents:()=>M,DashboardInitPhase:()=>i,DashboardRoutes:()=>r,EXPLORE_GRAPH_STYLES:()=>s.f0,KioskMode:()=>g,OrgRole:()=>u.B5,PermissionLevelString:()=>u.bf,SearchQueryType:()=>u.n8,ServiceAccountStateFilter:()=>c,TABLE_RESULTS_STYLE:()=>s.zQ,TeamPermissionLevel:()=>u.hw,addListener:()=>y.NH,createAsyncThunk:()=>y.hg,timeoutMap:()=>p,useDispatch:()=>y.I0,useSelector:()=>y.v9});var n=e(10390),a=e(46793),o=e(26052),r=(T=>(T.Home="home-dashboard",T.New="new-dashboard",T.Normal="normal-dashboard",T.Path="path-dashboard",T.Scripted="scripted-dashboard",T.Public="public-dashboard",T.Embedded="embedded-dashboard",T))(r||{}),i=(T=>(T.NotStarted="Not started",T.Fetching="Fetching",T.Services="Services",T.Failed="Failed",T.Completed="Completed",T))(i||{}),g=(T=>(T.TV="tv",T.Full="full",T))(g||{}),u=e(84337),l=e(21971),m=e(54033),c=(T=>(T.All="All",T.WithExpiredTokens="WithExpiredTokens",T.External="External",T.Disabled="Disabled",T))(c||{}),d=e(3009),f=e(20337),E=e(30488),v=(T=>(T.Success="success",T.Warning="warning",T.Error="error",T.Info="info",T))(v||{}),h=(T=>(T[T.Success=3e3]="Success",T[T.Warning=5e3]="Warning",T[T.Error=7e3]="Error",T))(h||{});const p={success:3e3,warning:5e3,error:7e3,info:3e3};var s=e(92713),y=e(21128),C=e(85293),b=e(14092),S=e(518),D=(T=>(T.UsersRead="users:read",T.UsersWrite="users:write",T.UsersAuthTokenList="users.authtoken:read",T.UsersAuthTokenUpdate="users.authtoken:write",T.UsersPasswordUpdate="users.password:write",T.UsersDelete="users:delete",T.UsersCreate="users:create",T.UsersEnable="users:enable",T.UsersDisable="users:disable",T.UsersPermissionsUpdate="users.permissions:write",T.UsersLogout="users:logout",T.UsersQuotasList="users.quotas:read",T.UsersQuotasUpdate="users.quotas:write",T.ServiceAccountsRead="serviceaccounts:read",T.ServiceAccountsCreate="serviceaccounts:create",T.ServiceAccountsWrite="serviceaccounts:write",T.ServiceAccountsDelete="serviceaccounts:delete",T.ServiceAccountsPermissionsRead="serviceaccounts.permissions:read",T.ServiceAccountsPermissionsWrite="serviceaccounts.permissions:write",T.OrgsRead="orgs:read",T.OrgsPreferencesRead="orgs.preferences:read",T.OrgsWrite="orgs:write",T.OrgsPreferencesWrite="orgs.preferences:write",T.OrgsCreate="orgs:create",T.OrgsDelete="orgs:delete",T.OrgUsersRead="org.users:read",T.OrgUsersAdd="org.users:add",T.OrgUsersRemove="org.users:remove",T.OrgUsersWrite="org.users:write",T.LDAPUsersRead="ldap.user:read",T.LDAPUsersSync="ldap.user:sync",T.LDAPStatusRead="ldap.status:read",T.DataSourcesExplore="datasources:explore",T.DataSourcesRead="datasources:read",T.DataSourcesCreate="datasources:create",T.DataSourcesWrite="datasources:write",T.DataSourcesDelete="datasources:delete",T.DataSourcesPermissionsRead="datasources.permissions:read",T.DataSourcesCachingRead="datasources.caching:read",T.DataSourcesInsightsRead="datasources.insights:read",T.ActionServerStatsRead="server.stats:read",T.ActionTeamsCreate="teams:create",T.ActionTeamsDelete="teams:delete",T.ActionTeamsRead="teams:read",T.ActionTeamsWrite="teams:write",T.ActionTeamsPermissionsRead="teams.permissions:read",T.ActionTeamsPermissionsWrite="teams.permissions:write",T.ActionRolesList="roles:read",T.ActionTeamsRolesList="teams.roles:read",T.ActionTeamsRolesAdd="teams.roles:add",T.ActionTeamsRolesRemove="teams.roles:remove",T.ActionUserRolesList="users.roles:read",T.ActionUserRolesAdd="users.roles:add",T.ActionUserRolesRemove="users.roles:remove",T.DashboardsRead="dashboards:read",T.DashboardsWrite="dashboards:write",T.DashboardsDelete="dashboards:delete",T.DashboardsCreate="dashboards:create",T.DashboardsPermissionsRead="dashboards.permissions:read",T.DashboardsPermissionsWrite="dashboards.permissions:write",T.DashboardsPublicWrite="dashboards.public:write",T.FoldersRead="folders:read",T.FoldersWrite="folders:write",T.FoldersDelete="folders:delete",T.FoldersCreate="folders:create",T.FoldersPermissionsRead="folders.permissions:read",T.FoldersPermissionsWrite="folders.permissions:write",T.ActionSupportBundlesCreate="support.bundles:create",T.ActionSupportBundlesRead="support.bundles:read",T.ActionSupportBundlesDelete="support.bundles:delete",T.AlertingRuleCreate="alert.rules:create",T.AlertingRuleRead="alert.rules:read",T.AlertingRuleUpdate="alert.rules:write",T.AlertingRuleDelete="alert.rules:delete",T.AlertingInstanceCreate="alert.instances:create",T.AlertingInstanceUpdate="alert.instances:write",T.AlertingInstanceRead="alert.instances:read",T.AlertingNotificationsRead="alert.notifications:read",T.AlertingNotificationsWrite="alert.notifications:write",T.AlertingRuleExternalWrite="alert.rules.external:write",T.AlertingRuleExternalRead="alert.rules.external:read",T.AlertingInstancesExternalWrite="alert.instances.external:write",T.AlertingInstancesExternalRead="alert.instances.external:read",T.AlertingNotificationsExternalWrite="alert.notifications.external:write",T.AlertingNotificationsExternalRead="alert.notifications.external:read",T.AlertingProvisioningReadSecrets="alert.provisioning.secrets:read",T.AlertingProvisioningRead="alert.provisioning:read",T.AlertingProvisioningWrite="alert.provisioning:write",T.ActionAPIKeysRead="apikeys:read",T.ActionAPIKeysCreate="apikeys:create",T.ActionAPIKeysDelete="apikeys:delete",T.PluginsInstall="plugins:install",T.PluginsWrite="plugins:write",T.SettingsRead="settings:read",T.SettingsWrite="settings:write",T))(D||{}),M=e(14914)},85293:()=>{"use strict"},46793:()=>{"use strict"},30488:()=>{"use strict"},20337:()=>{"use strict"},518:()=>{"use strict"},21128:(G,A,e)=>{"use strict";e.d(A,{I0:()=>o,NH:()=>g,hg:()=>i,v9:()=>r});var n=e(20079),a=e(36752);const o=a.useDispatch,r=a.useSelector,i=(u,l,m)=>(0,n.hg)(u,l,m),g=n.NH},12802:(G,A,e)=>{"use strict";e.d(A,{y:()=>n});var n=(a=>(a.LineChart="Line chart",a.LineChartSmooth="Line chart smooth",a.LineChartGradientColorScheme="Line chart with gradient color scheme",a.AreaChart="Area chart",a.AreaChartStacked="Area chart stacked",a.AreaChartStackedPercent="Area chart 100% stacked",a.BarChart="Bar chart",a.BarChartGradientColorScheme="Bar chart with gradient color scheme",a.BarChartStacked="Bar chart stacked",a.BarChartStackedPercent="Bar chart 100% stacked",a.BarChartHorizontal="Bar chart horizontal",a.BarChartHorizontalStacked="Bar chart horizontal stacked",a.BarChartHorizontalStackedPercent="Bar chart horizontal 100% stacked",a.Candlestick="Candlestick",a.PieChart="Pie chart",a.PieChartDonut="Pie chart donut",a.Stat="Stat",a.StatColoredBackground="Stat colored background",a.Gauge="Gauge",a.GaugeNoThresholds="Gauge no thresholds",a.BarGaugeBasic="Bar gauge basic",a.BarGaugeLCD="Bar gauge LCD",a.Table="Table",a.StateTimeline="State timeline",a.StatusHistory="Status history",a.TextPanel="Text",a.DashboardList="Dashboard list",a.Logs="Logs",a.FlameGraph="Flame graph",a))(n||{})},25119:(G,A,e)=>{"use strict";e.d(A,{ED:()=>g,I9:()=>o,T8:()=>l,Yb:()=>r,bj:()=>a,g0:()=>m,pz:()=>u,x_:()=>n});var n=(c=>(c.Firing="firing",c.Inactive="inactive",c.Pending="pending",c))(n||{}),a=(c=>(c.Normal="Normal",c.Alerting="Alerting",c.Pending="Pending",c.NoData="NoData",c.Error="Error",c))(a||{});function o(c){return Object.values(n).includes(c)}function r(c){return Object.values(a).some(d=>d===c)}function i(c){const d=Object.values(n);return c!=null&&!d.includes(c)}function g(c){return i(c)?c.split(" ")[0]:c}var u=(c=>(c.Alerting="alerting",c.Recording="recording",c))(u||{}),l=(c=>(c.Cortex="Cortex",c.Mimir="Mimir",c.Prometheus="Prometheus",c.Thanos="Thanos",c))(l||{}),m=(c=>(c.Alerting="Alerting",c.NoData="NoData",c.KeepLastState="KeepLastState",c.OK="OK",c.Error="Error",c))(m||{})},10178:(G,A,e)=>{"use strict";e.d(A,{P:()=>r,j:()=>a});var n=e(25119);function a(i,g){return(0,n.ED)(i.state)===g}var o=(i=>(i.Firing="firing",i))(o||{}),r=(i=>(i.Alerting="alerting",i.Pending="pending",i.Normal="inactive",i.NoData="nodata",i.Error="error",i))(r||{})},54033:()=>{"use strict"},23932:G=>{const A="    ";function e(r){let i="";return r&&Object.keys(r).forEach(function(g){i+=g+":"+r[g]+";"}),i}function n(r){function i(u){return'class="'+u+'"'}function g(u){return'style="'+e(r["."+u])+'"'}return r?g:i}function a(r){return r===null?"null":Array.isArray(r)?"array":typeof r=="string"&&/^https?:/.test(r)?"link":typeof r=="object"&&typeof r.toISOString=="function"?"date":typeof r}function o(r){return r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}G.exports=function(r,i){let g="";const u=n(i);let l=function(c,d,f,E){if(!c.length)return d+" "+f;let v=d+`
`;return g+=A,c.forEach(function(h,p){v+=g+E(h)+(p<c.length-1?",":"")+`
`}),g=g.slice(0,-A.length),v+g+f};function m(c){if(c===void 0)return"";switch(a(c)){case"boolean":return"<span "+u("json-markup-bool")+">"+c+"</span>";case"number":return"<span "+u("json-markup-number")+">"+c+"</span>";case"date":return'<span class="json-markup-string">"'+o(c.toISOString())+'"</span>';case"null":return"<span "+u("json-markup-null")+">null</span>";case"string":return"<span "+u("json-markup-string")+'>"'+o(c.replace(/\n/g,`
`+g))+'"</span>';case"link":return"<span "+u("json-markup-string")+'>"<a href="'+encodeURI(c)+'">'+o(c)+'</a>"</span>';case"array":return l(c,"[","]",m);case"object":const d=Object.keys(c).filter(function(f){return c[f]!==void 0});return l(d,"{","}",function(f){return"<span "+u("json-markup-key")+'>"'+o(f)+'":</span> '+m(c[f])})}return""}return"<div "+u("json-markup")+">"+m(r)+"</div>"}},526:()=>{(function(G){"use strict";G(function(){G.support.transition=function(){var A=function(){var e=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},a;for(a in n)if(e.style[a]!==void 0)return n[a]}();return A&&{end:A}}()})})(window.jQuery),function(G){"use strict";var A="[data-toggle=dropdown]",e=function(r){var i=G(r).on("click.dropdown.data-api",this.toggle);G("html").on("click.dropdown.data-api",function(){i.parent().removeClass("open")})};e.prototype={constructor:e,toggle:function(r){var i=G(this),g,u;if(!i.is(".disabled, :disabled"))return g=a(i),u=g.hasClass("open"),n(),u||("ontouchstart"in document.documentElement&&G('<div class="dropdown-backdrop"/>').insertBefore(G(this)).on("click",n),g.toggleClass("open")),i.focus(),!1},keydown:function(r){var i,g,u,l,m,c;if(/(38|40|27)/.test(r.keyCode)&&(i=G(this),r.preventDefault(),r.stopPropagation(),!i.is(".disabled, :disabled"))){if(l=a(i),m=l.hasClass("open"),!m||m&&r.keyCode==27)return r.which==27&&l.find(A).focus(),i.click();g=G("[role=menu] li:not(.divider):visible a",l),g.length&&(c=g.index(g.filter(":focus")),r.keyCode==38&&c>0&&c--,r.keyCode==40&&c<g.length-1&&c++,~c||(c=0),g.eq(c).focus())}}};function n(){G(".dropdown-backdrop").remove(),G(A).each(function(){a(G(this)).removeClass("open")})}function a(r){var i=r.attr("data-target"),g;return i||(i=r.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),g=i&&G.find(i),(!g||!g.length)&&(g=r.parent()),g}var o=G.fn.dropdown;G.fn.dropdown=function(r){return this.each(function(){var i=G(this),g=i.data("dropdown");g||i.data("dropdown",g=new e(this)),typeof r=="string"&&g[r].call(i)})},G.fn.dropdown.Constructor=e,G.fn.dropdown.noConflict=function(){return G.fn.dropdown=o,this},G(document).on("click.dropdown.data-api",n).on("click.dropdown.data-api",".dropdown form",function(r){r.stopPropagation()}).on("click.dropdown.data-api",A,e.prototype.toggle).on("keydown.dropdown.data-api",A+", [role=menu]",e.prototype.keydown)}(window.jQuery),function(G){"use strict";var A=function(n,a){this.options=a,this.$element=G(n).delegate('[data-dismiss="modal"]',"click.dismiss.modal",G.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};A.prototype={constructor:A,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var n=this,a=G.Event("show");this.$element.trigger(a),!(this.isShown||a.isDefaultPrevented())&&(this.isShown=!0,this.escape(),this.backdrop(function(){var o=G.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show(),o&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus(),o?n.$element.one(G.support.transition.end,function(){n.$element.focus().trigger("shown")}):n.$element.focus().trigger("shown")}))},hide:function(n){n&&n.preventDefault();var a=this;n=G.Event("hide"),this.$element.trigger(n),!(!this.isShown||n.isDefaultPrevented())&&(this.isShown=!1,this.escape(),G(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),G.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var n=this;G(document).on("focusin.modal",function(a){n.$element[0]!==a.target&&!n.$element.has(a.target).length&&n.$element.focus()})},escape:function(){var n=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(a){a.which==27&&n.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var n=this,a=setTimeout(function(){n.$element.off(G.support.transition.end),n.hideModal()},500);this.$element.one(G.support.transition.end,function(){clearTimeout(a),n.hideModal()})},hideModal:function(){var n=this;this.$element.hide(),this.backdrop(function(){n.removeBackdrop(),n.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(n){var a=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=G.support.transition&&o;if(this.$backdrop=G('<div class="modal-backdrop '+o+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?G.proxy(this.$element[0].focus,this.$element[0]):G.proxy(this.hide,this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!n)return;r?this.$backdrop.one(G.support.transition.end,n):n()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),G.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(G.support.transition.end,n):n()):n&&n()}};var e=G.fn.modal;G.fn.modal=function(n){return this.each(function(){var a=G(this),o=a.data("modal"),r=G.extend({},G.fn.modal.defaults,a.data(),typeof n=="object"&&n);o||a.data("modal",o=new A(this,r)),typeof n=="string"?o[n]():r.show&&o.show()})},G.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},G.fn.modal.Constructor=A,G.fn.modal.noConflict=function(){return G.fn.modal=e,this},G(document).on("click.modal.data-api",'[data-toggle="modal"]',function(n){var a=G(this),o=a.attr("href"),r=G.find(a.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),i=r.data("modal")?"toggle":G.extend({remote:!/#/.test(o)&&o},r.data(),a.data());n.preventDefault(),r.modal(i).one("hide",function(){a.focus()})})}(window.jQuery),function(G){"use strict";var A=function(n,a){this.init("tooltip",n,a)};A.prototype={constructor:A,init:function(n,a,o){var r,i,g,u,l;for(this.type=n,this.$element=G(a),this.options=this.getOptions(o),this.enabled=!0,g=this.options.trigger.split(" "),l=g.length;l--;)u=g[l],u=="click"?this.$element.on("click."+this.type,this.options.selector,G.proxy(this.toggle,this)):u!="manual"&&(r=u=="hover"?"mouseenter":"focus",i=u=="hover"?"mouseleave":"blur",this.$element.on(r+"."+this.type,this.options.selector,G.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,G.proxy(this.leave,this)));this.options.selector?this._options=G.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(n){return n=G.extend({},G.fn[this.type].defaults,this.$element.data(),n),n.delay&&typeof n.delay=="number"&&(n.delay={show:n.delay,hide:n.delay}),n},enter:function(n){var a=G.fn[this.type].defaults,o={},r;if(this._options&&G.each(this._options,function(i,g){a[i]!=g&&(o[i]=g)},this),r=G(n.currentTarget)[this.type](o).data(this.type),!r.options.delay||!r.options.delay.show)return r.show();clearTimeout(this.timeout),r.hoverState="in",this.timeout=setTimeout(function(){r.hoverState=="in"&&r.show()},r.options.delay.show)},leave:function(n){var a=G(n.currentTarget)[this.type](this._options).data(this.type);if(this.timeout&&clearTimeout(this.timeout),!a.options.delay||!a.options.delay.hide)return a.hide();a.hoverState="out",this.timeout=setTimeout(function(){a.hoverState=="out"&&a.hide()},a.options.delay.hide)},show:function(){var n,a,o,r,i,g,u=G.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(u),u.isDefaultPrevented())return;switch(n=this.tip(),this.setContent(),this.options.animation&&n.addClass("fade"),i=typeof this.options.placement=="function"?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,n.detach().css({top:0,left:0,display:"block"}),this.options.container?n.appendTo(G.find(this.options.container)):n.insertAfter(this.$element),a=this.getPosition(),o=n[0].offsetWidth,r=n[0].offsetHeight,i){case"bottom":g={top:a.top+a.height,left:a.left+a.width/2-o/2};break;case"top":g={top:a.top-r,left:a.left+a.width/2-o/2};break;case"left":g={top:a.top+a.height/2-r/2,left:a.left-o};break;case"right":g={top:a.top+a.height/2-r/2,left:a.left+a.width};break;case"topLeft":g={top:a.top-r,left:a.left+a.width/2-o*.1};break;case"topRight":g={top:a.top-r,left:a.left+a.width/2-o*.9};break;case"rightTop":g={top:a.top+a.height/2-r*.1,left:a.left+a.width};break;case"rightBottom":g={top:a.top+a.height/2-r*.9,left:a.left+a.width};break;case"bottomLeft":g={top:a.top+a.height,left:a.left+a.width/2-o*.1};break;case"bottomRight":g={top:a.top+a.height,left:a.left+a.width/2-o*.9};break;case"leftTop":g={top:a.top+a.height/2-r*.1,left:a.left-o};break;case"leftBottom":g={top:a.top+a.height/2-r*.9,left:a.left-o};break}this.applyPlacement(g,i),this.$element.trigger("shown")}},applyPlacement:function(n,a){var o=this.tip(),r=o[0].offsetWidth,i=o[0].offsetHeight,g,u,l,m;o.offset(n).addClass(a).addClass("in"),g=o[0].offsetWidth,u=o[0].offsetHeight,a=="top"&&u!=i&&(n.top=n.top+i-u,m=!0),a=="bottom"||a=="top"?(l=0,n.left<0&&(l=n.left*-2,n.left=0,o.offset(n),g=o[0].offsetWidth,u=o[0].offsetHeight),this.replaceArrow(l-r+g,g,"left")):this.replaceArrow(u-i,u,"top"),m&&o.offset(n)},replaceArrow:function(n,a,o){this.arrow().css(o,n?50*(1-n/a)+"%":"")},setContent:function(){var n=this.tip(),a=this.getTitle();n.find(".tooltip-inner").text(a),n.removeClass("fade in top bottom left right")},hide:function(){var n=this,a=this.tip(),o=G.Event("hide");if(this.$element.trigger(o),o.isDefaultPrevented())return;a.removeClass("in");function r(){var i=setTimeout(function(){a.off(G.support.transition.end).detach()},500);a.one(G.support.transition.end,function(){clearTimeout(i),a.detach()})}return G.support.transition&&this.$tip.hasClass("fade")?r():a.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var n=this.$element;(n.attr("title")||typeof n.attr("data-original-title")!="string")&&n.attr("data-original-title",n.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var n=this.$element[0];return G.extend({},typeof n.getBoundingClientRect=="function"?n.getBoundingClientRect():{width:n.offsetWidth,height:n.offsetHeight},this.$element.offset())},getTitle:function(){var n,a=this.$element,o=this.options;return n=a.attr("data-original-title")||(typeof o.title=="function"?o.title.call(a[0]):o.title),n},tip:function(){return this.$tip=this.$tip||G(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(n){var a=n?G(n.currentTarget)[this.type](this._options).data(this.type):this;a.tip().hasClass("in")?a.hide():a.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var e=G.fn.tooltip;G.fn.tooltip=function(n){return this.each(function(){var a=G(this),o=a.data("tooltip"),r=typeof n=="object"&&n;o||a.data("tooltip",o=new A(this,r)),typeof n=="string"&&o[n]()})},G.fn.tooltip.Constructor=A,G.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},G.fn.tooltip.noConflict=function(){return G.fn.tooltip=e,this}}(window.jQuery),function(G){"use strict";var A=function(n){this.element=G(n)};A.prototype={constructor:A,show:function(){var n=this.element,a=n.closest("ul:not(.dropdown-menu)"),o=n.attr("data-target"),r,i,g;o||(o=n.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),!n.parent("li").hasClass("active")&&(r=a.find(".active:last a")[0],g=G.Event("show",{relatedTarget:r}),n.trigger(g),!g.isDefaultPrevented()&&(i=G.find(o),this.activate(n.parent("li"),a),this.activate(i,i.parent(),function(){n.trigger({type:"shown",relatedTarget:r})})))},activate:function(n,a,o){var r=a.find("> .active"),i=o&&G.support.transition&&r.hasClass("fade");function g(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),n.addClass("active"),i?(n[0].offsetWidth,n.addClass("in")):n.removeClass("fade"),n.parent(".dropdown-menu")&&n.closest("li.dropdown").addClass("active"),o&&o()}i?r.one(G.support.transition.end,g):g(),r.removeClass("in")}};var e=G.fn.tab;G.fn.tab=function(n){return this.each(function(){var a=G(this),o=a.data("tab");o||a.data("tab",o=new A(this)),typeof n=="string"&&o[n]()})},G.fn.tab.Constructor=A,G.fn.tab.noConflict=function(){return G.fn.tab=e,this},G(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(n){n.preventDefault(),G(this).tab("show")})}(window.jQuery),function(G){"use strict";var A=function(n,a){this.$element=G(n),this.options=G.extend({},G.fn.typeahead.defaults,a),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=G(this.options.menu),this.shown=!1,this.listen()};A.prototype={constructor:A,select:function(){var n=this.$menu.find(".active").attr("data-value")||this.$element.val();return this.$element.val(this.updater(n)).change(),this.hide()},updater:function(n){return n},show:function(){var n=G.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:n.top+n.height,left:n.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(n){var a;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(a=G.isFunction(this.source)?this.source(this.query,G.proxy(this.process,this)):this.source,a?this.process(a):this)},process:function(n){var a=this;return n=G.grep(n,function(o){return a.matcher(o)}),n=this.sorter(n),n.length?this.render(n.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(n){return~n.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(n){for(var a=[],o=[],r=[],i;i=n.shift();)i.toLowerCase().indexOf(this.query.toLowerCase())?~i.indexOf(this.query)?o.push(i):r.push(i):a.push(i);return a.concat(o,r)},highlighter:function(n){var a=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a?n.replace(new RegExp("("+a+")","ig"),function(o,r){return"<strong>"+r+"</strong>"}):n},render:function(n){var a=this;return n=G(n).map(function(o,r){return o=G(a.options.item).attr("data-value",r),o.find("a").html(a.highlighter(r)),o[0]}),this.$menu.html(n),this},next:function(n){var a=this.$menu.find(".active").removeClass("active"),o=a.next();o.length||(o=G(this.$menu.find("li")[0])),o.addClass("active")},prev:function(n){var a=this.$menu.find(".active").removeClass("active"),o=a.prev();o.length||(o=this.$menu.find("li").last()),o.addClass("active")},listen:function(){this.$element.on("focus",G.proxy(this.focus,this)).on("blur",G.proxy(this.blur,this)).on("keypress",G.proxy(this.keypress,this)).on("keyup",G.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",G.proxy(this.keydown,this)),this.$menu.on("click",G.proxy(this.click,this)).on("mouseenter","li",G.proxy(this.mouseenter,this)).on("mouseleave","li",G.proxy(this.mouseleave,this))},destroy:function(){this.$element.off().removeData("typeahead"),this.$menu.off()},eventSupported:function(n){var a=n in this.$element;return a||(this.$element.setAttribute(n,"return;"),a=typeof this.$element[n]=="function"),a},move:function(n){if(this.shown&&!(n.shiftKey&&n.keyCode===40)){switch(n.keyCode){case 9:case 13:case 27:n.preventDefault();break;case 38:n.preventDefault(),this.prev();break;case 40:n.preventDefault(),this.next();break}n.stopPropagation()}},keydown:function(n){this.suppressKeyPressRepeat=~G.inArray(n.keyCode,[40,38,9,13,27,57]),this.move(n)},keypress:function(n){this.suppressKeyPressRepeat||this.move(n)},keyup:function(n){switch(n.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}n.keyCode===13&&typeof this.$menu.find(".active").attr("data-value")>"u"?this.$element.submit():(n.stopPropagation(),n.preventDefault())},focus:function(n){this.focused=!0},blur:function(n){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(n){n.stopPropagation(),n.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(n){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),G(n.currentTarget).addClass("active")},mouseleave:function(n){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var e=G.fn.typeahead;G.fn.typeahead=function(n){return this.each(function(){var a=G(this),o=a.data("typeahead"),r=typeof n=="object"&&n;o||a.data("typeahead",o=new A(this,r)),typeof n=="string"&&o[n]()})},G.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},G.fn.typeahead.Constructor=A,G.fn.typeahead.noConflict=function(){return G.fn.typeahead=e,this},G(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(n){var a=G(this);a.data("typeahead")||a.typeahead(a.data())})}(window.jQuery),function(G){"use strict";var A=function(n,a){this.options=G.extend({},G.fn.affix.defaults,a),this.$window=G(window).on("scroll.affix.data-api",G.proxy(this.checkPosition,this)).on("click.affix.data-api",G.proxy(function(){setTimeout(G.proxy(this.checkPosition,this),1)},this)),this.$element=G(n),this.checkPosition()};A.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=G(document).height(),a=this.$window.scrollTop(),o=this.$element.offset(),r=this.options.offset,i=r.bottom,g=r.top,u="affix affix-top affix-bottom",l;typeof r!="object"&&(i=g=r),typeof g=="function"&&(g=r.top()),typeof i=="function"&&(i=r.bottom()),l=this.unpin!=null&&a+this.unpin<=o.top?!1:i!=null&&o.top+this.$element.height()>=n-i?"bottom":g!=null&&a<=g?"top":!1,this.affixed!==l&&(this.affixed=l,this.unpin=l=="bottom"?o.top-a:null,this.$element.removeClass(u).addClass("affix"+(l?"-"+l:"")))}};var e=G.fn.affix;G.fn.affix=function(n){return this.each(function(){var a=G(this),o=a.data("affix"),r=typeof n=="object"&&n;o||a.data("affix",o=new A(this,r)),typeof n=="string"&&o[n]()})},G.fn.affix.Constructor=A,G.fn.affix.defaults={offset:0},G.fn.affix.noConflict=function(){return G.fn.affix=e,this},G(window).on("load",function(){G('[data-spy="affix"]').each(function(){var n=G(this),a=n.data();a.offset=a.offset||{},a.offsetBottom&&(a.offset.bottom=a.offsetBottom),a.offsetTop&&(a.offset.top=a.offsetTop),n.affix(a)})})}(window.jQuery)},26189:()=>{(function(G){var A={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function e(n){var a={x:-1,y:-1,locked:!1};n.setCrosshair=function(g){if(!g)a.x=-1;else{var u=n.p2c(g);a.x=Math.max(0,Math.min(u.left,n.width())),a.y=Math.max(0,Math.min(u.top,n.height()))}n.triggerRedrawOverlay()},n.clearCrosshair=n.setCrosshair,n.lockCrosshair=function(g){g&&n.setCrosshair(g),a.locked=!0},n.unlockCrosshair=function(){a.locked=!1};function o(i){a.locked||a.x!=-1&&(a.x=-1,n.triggerRedrawOverlay())}function r(i){if(!a.locked){if(n.getSelection&&n.getSelection()){a.x=-1;return}var g=n.offset();a.x=Math.max(0,Math.min(i.pageX-g.left,n.width())),a.y=Math.max(0,Math.min(i.pageY-g.top,n.height())),n.triggerRedrawOverlay()}}n.hooks.bindEvents.push(function(i,g){i.getOptions().crosshair.mode&&(g.mouseout(o),g.mousemove(r))}),n.hooks.drawOverlay.push(function(i,g){var u=i.getOptions().crosshair;if(u.mode){var l=i.getPlotOffset();if(g.save(),g.translate(l.left,l.top),a.x!=-1){var m=i.getOptions().crosshair.lineWidth%2?.5:0;if(g.strokeStyle=u.color,g.lineWidth=u.lineWidth,g.lineJoin="round",g.beginPath(),u.mode.indexOf("x")!=-1){var c=Math.floor(a.x)+m;g.moveTo(c,0),g.lineTo(c,i.height())}if(u.mode.indexOf("y")!=-1){var d=Math.floor(a.y)+m;g.moveTo(0,d),g.lineTo(i.width(),d)}g.stroke()}g.restore()}}),n.hooks.shutdown.push(function(i,g){g.unbind("mouseout",o),g.unbind("mousemove",r)})}G.plot.plugins.push({init:e,options:A,name:"crosshair",version:"1.0"})})(jQuery)},47825:()=>{(function(G){function A(e){e.hooks.processDatapoints.push(function(n,a,o){a.dashes.show&&n.hooks.draw.push(function(r,i){var g=r.getPlotOffset(),u=a.xaxis,l=a.yaxis;function m(E,v){var h=o.points,p=o.pointsize,s=null,y=null,C=0,b=!0,S,D;a.dashes.dashLength[0]?(S=a.dashes.dashLength[0],a.dashes.dashLength[1]?D=a.dashes.dashLength[1]:D=S):D=S=a.dashes.dashLength,i.beginPath();for(var M=p;M<h.length;M+=p){let j=function(V){var _=Math.sqrt(Math.pow(P-I,2)+Math.pow(N-L,2));if(_<=V)return{deltaX:P-I,deltaY:N-L,distance:_,remainder:V-_};var H=P>I?1:-1,z=N>L?1:-1;return{deltaX:H*Math.sqrt(Math.pow(V,2)/(1+Math.pow((N-L)/(P-I),2))),deltaY:z*Math.sqrt(Math.pow(V,2)-Math.pow(V,2)/(1+Math.pow((N-L)/(P-I),2))),distance:V,remainder:0}};var U=j,T=h[M-p],R=h[M-p+1],O=h[M],x=h[M+1];if(!(T==null||O==null)){if(R<=x&&R<l.min){if(x<l.min)continue;T=(l.min-R)/(x-R)*(O-T)+T,R=l.min}else if(x<=R&&x<l.min){if(R<l.min)continue;O=(l.min-R)/(x-R)*(O-T)+T,x=l.min}if(R>=x&&R>l.max){if(x>l.max)continue;T=(l.max-R)/(x-R)*(O-T)+T,R=l.max}else if(x>=R&&x>l.max){if(R>l.max)continue;O=(l.max-R)/(x-R)*(O-T)+T,x=l.max}if(T<=O&&T<u.min){if(O<u.min)continue;R=(u.min-T)/(O-T)*(x-R)+R,T=u.min}else if(O<=T&&O<u.min){if(T<u.min)continue;x=(u.min-T)/(O-T)*(x-R)+R,O=u.min}if(T>=O&&T>u.max){if(O>u.max)continue;R=(u.max-T)/(O-T)*(x-R)+R,T=u.max}else if(O>=T&&O>u.max){if(T>u.max)continue;x=(u.max-T)/(O-T)*(x-R)+R,O=u.max}(T!=s||R!=y)&&i.moveTo(u.p2c(T)+E,l.p2c(R)+v);var I=u.p2c(T)+E,L=l.p2c(R)+v,P=u.p2c(O)+E,N=l.p2c(x)+v,F;do F=j(C>0?C:b?S:D),(F.deltaX!=0||F.deltaY!=0)&&(b?i.lineTo(I+F.deltaX,L+F.deltaY):i.moveTo(I+F.deltaX,L+F.deltaY)),b=!b,C=F.remainder,I+=F.deltaX,L+=F.deltaY;while(F.distance>0);s=O,y=x}}i.stroke()}i.save(),i.translate(g.left,g.top),i.lineJoin="round";var c=a.dashes.lineWidth,d=a.shadowSize;if(c>0&&d>0){i.lineWidth=d,i.strokeStyle="rgba(0,0,0,0.1)";var f=Math.PI/18;m(Math.sin(f)*(c/2+d/2),Math.cos(f)*(c/2+d/2)),i.lineWidth=d/2,m(Math.sin(f)*(c/2+d/4),Math.cos(f)*(c/2+d/4))}i.lineWidth=c,i.strokeStyle=a.color,c>0&&m(0,0),i.restore()})})}G.plot.plugins.push({init:A,options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})})(jQuery)},28844:()=>{(function(G){"use strict";var A={series:{fillBelowTo:null}};function e(n){function a(i,g){var u;for(u=0;u<g.length;++u)if(g[u].id===i.fillBelowTo)return g[u];return null}function o(i,g,u,l,m,c,d,f){var E,v,h,p,s,y;return E=u-i,v=l-g,h=d-m,p=f-c,s=(-v*(i-m)+E*(g-c))/(-h*v+E*p),y=(h*(g-c)-p*(i-m))/(-h*v+E*p),s>=0&&s<=1&&y>=0&&y<=1?[i+y*E,g+y*v]:null}function r(i,g,u){if(u.fillBelowTo===null)return;var l,m,c,d,f,E,v;function h(D,M){g.beginPath(),g.moveTo(u.xaxis.p2c(D)+E.left,u.yaxis.p2c(M)+E.top)}function p(){g.closePath(),g.fill()}function s(){if(c.length/m!==f.length/d)return console.error("Refusing to graph inconsistent number of points"),!1;var D;for(D=0;D<c.length/m;D++)if(c[D*m]!==null&&f[D*d]!==null&&c[D*m]!==f[D*d])return console.error("Refusing to graph points without matching value"),!1;return!0}function y(D,M){console.assert(M>D,"expects the end index to be greater than the start index");var T=D===0||c[D-1]===null||f[D-1]===null,R=!1,O,x;for(O=D;O<M;O++)if(c[O*m+1]===null||f[O*m+1]===null)R=!1,T=!0;else if(c[O*m+1]===f[O*d+1])R=!0,T=!1;else if(c[O*m+1]>f[O*d+1]){T?h(c[O*m],c[O*m+1]):R?h(c[(O-1)*m],c[(O-1)*m+1]):(x=C(O),h(x[0],x[1])),S(O,M);return}else T=!1,R=!1}function C(D){console.assert(D>0,"expects the second point in the series line segment");var M,T;for(M=1;M<f.length/d;M++)if(T=o(c[(D-1)*m],c[(D-1)*m+1],c[D*m],c[D*m+1],f[(M-1)*d],f[(M-1)*d+1],f[M*d],f[M*d+1]),T!==null)return T;console.error("intersectionPoint() should only be called when an intersection happens")}function b(D,M){console.assert(D>=M,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var T;for(T=D;T>=M;T--)g.lineTo(l.xaxis.p2c(f[T*d])+E.left,l.yaxis.p2c(f[T*d+1])+E.top);p()}function S(D,M){console.assert(D<=M,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var T,R;for(T=D;T<M;T++)if(c[T*m+1]===null&&T>D){b(T-1,D),y(T,M);return}else if(c[T*m+1]===f[T*d+1]){b(T,D),y(T,M);return}else if(c[T*m+1]<f[T*d+1]){R=C(T),g.lineTo(u.xaxis.p2c(R[0])+E.left,u.yaxis.p2c(R[1])+E.top),b(T,D),y(T,M);return}else g.lineTo(u.xaxis.p2c(c[T*m])+E.left,u.yaxis.p2c(c[T*m+1])+E.top);b(M,D)}l=a(u,i.getData()),l&&(m=u.datapoints.pointsize,c=u.datapoints.points,d=l.datapoints.pointsize,f=l.datapoints.points,E=i.getPlotOffset(),s()&&(v=G.color.parse(u.color),v.a=.4,v.normalize(),g.fillStyle=v.toString(),y(0,c.length/m)))}n.hooks.drawSeries.push(r)}G.plot.plugins.push({init:e,options:A,name:"fillbelow",version:"0.1.0"})})(jQuery)},7540:()=>{/*!
 * jquery.flot.gauge v1.1.0 *
 *
 * Flot plugin for rendering gauge charts.
 *
 * Copyright (c) 2015 @toyoty99.
 * Licensed under the MIT license.
 */(function(G){var A=function(){var u,l,m,c,d,f,E=function(D,M){u=M,l=D.getPlaceholder(),m=D.getOptions(),c=m.series.gauges,d=D.getData(),f=e(c.debug)};E.prototype.calculateLayout=function(){var D=l.width(),M=l.height(),T=Math.min(d.length,c.layout.columns),R=Math.ceil(d.length/T),O=c.layout.margin,x=c.layout.hMargin,I=c.layout.vMargin,L=(D-O*2-x*(T-1))/T,P=(M-O*2-I*(R-1))/R;if(c.layout.square){var N=Math.min(L,P);L=N,P=N}v(c,L);var F=c.cell.margin,U=0,j=0;c.label.show&&(U=c.label.margin,j=c.label.font.size);var V=0,_=0;c.value.show&&(V=c.value.margin,_=c.value.font.size);var H=0;c.threshold.show&&(H=c.threshold.width);var z=0,K=0;c.threshold.label.show&&(z=c.threshold.label.margin,K=c.threshold.label.font.size);for(var Y=L/2-F-H-z*2-K,k=c.gauge.startAngle,q=c.gauge.endAngle,X=(q-k)/100,te=-1,se=k;se<q;se+=X)te=Math.max(te,Math.sin(o(se)));te=Math.max(te,Math.sin(o(q)));var de=(P-F*2-U*2-j)/(1+te);de*te<V+_/2&&(de=P-F*2-U*2-j-V-_/2);var re=de-z*2-K-H,fe=Math.min(Y,re),ie=c.gauge.width;ie>=fe&&(ie=Math.max(3,fe/3));var oe=z*2+K+H+fe,ue=Math.max(oe*(1+te),oe+V+_/2);return{canvasWidth:D,canvasHeight:M,margin:O,hMargin:x,vMargin:I,columns:T,rows:R,cellWidth:L,cellHeight:P,cellMargin:F,labelMargin:U,labelFontSize:j,valueMargin:V,valueFontSize:_,width:ie,radius:fe,thresholdWidth:H,thresholdLabelMargin:z,thresholdLabelFontSize:K,gaugeOuterHeight:ue}};function v(D,M){D.gauge.width==="auto"&&(D.gauge.width=Math.max(5,M/8)),D.label.margin==="auto"&&(D.label.margin=Math.max(1,M/20)),D.label.font.size==="auto"&&(D.label.font.size=Math.max(5,M/8)),D.value.margin==="auto"&&(D.value.margin=Math.max(1,M/30)),D.value.font.size==="auto"&&(D.value.font.size=Math.max(5,M/9)),D.threshold.width==="auto"&&(D.threshold.width=Math.max(3,M/100)),D.threshold.label.margin==="auto"&&(D.threshold.label.margin=Math.max(3,M/40)),D.threshold.label.font.size==="auto"&&(D.threshold.label.font.size=Math.max(5,M/15))}E.prototype.calculateAutoValues=v,E.prototype.calculateCellLayout=function(D,M,T){var R=n(M.columns,T),O=a(M.columns,T),x=M.margin+(M.cellWidth+M.hMargin)*R,I=M.margin+(M.cellHeight+M.vMargin)*O,L=x+M.cellWidth/2,P=I+M.cellMargin+M.labelMargin*2+M.labelFontSize+M.thresholdWidth+M.thresholdLabelFontSize+M.thresholdLabelMargin*2+M.radius,N=M.cellHeight-M.cellMargin*2-M.labelMargin*2-M.labelFontSize-M.gaugeOuterHeight,F=0;return D.cell.vAlign==="middle"?F=N/2:D.cell.vAlign==="bottom"&&(F=N),P+=F,{col:R,row:O,x,y:I,offsetY:F,cellWidth:M.cellWidth,cellHeight:M.cellHeight,cellMargin:M.cellMargin,cx:L,cy:P}},E.prototype.drawBackground=function(D){c.frame.show&&(u.save(),u.strokeStyle=m.grid.borderColor,u.lineWidth=m.grid.borderWidth,u.strokeRect(0,0,D.canvasWidth,D.canvasHeight),m.grid.backgroundColor&&(u.fillStyle=m.grid.backgroundColor,u.fillRect(0,0,D.canvasWidth,D.canvasHeight)),u.restore())},E.prototype.drawCellBackground=function(D,M){u.save(),D.cell.border&&D.cell.border.show&&D.cell.border.color&&D.cell.border.width&&(u.strokeStyle=D.cell.border.color,u.lineWidth=D.cell.border.width,u.strokeRect(M.x,M.y,M.cellWidth,M.cellHeight)),D.cell.background&&D.cell.background.color&&(u.fillStyle=D.cell.background.color,u.fillRect(M.x,M.y,M.cellWidth,M.cellHeight)),u.restore()},E.prototype.drawGauge=function(D,M,T,R,O){var x=D.gauge.shadow.show?D.gauge.shadow.blur:0,I=s(D,O),L=h(D,M,O);C(T.cx,T.cy,M.radius,M.width,o(D.gauge.startAngle),o(D.gauge.endAngle),D.gauge.border.color,D.gauge.border.width,D.gauge.background.color,x),C(T.cx,T.cy,M.radius-1,M.width-2,o(L.a1),o(L.a2),I,1,I,x),D.gauge.neutralValue!=null&&p(D,M,T,I)};function h(D,M,T){let R={};var O=D.gauge.neutralValue;return O!=null?T<O?(R.a1=y(D,M,T),R.a2=y(D,M,O)):(R.a1=y(D,M,O),R.a2=y(D,M,T)):(R.a1=D.gauge.startAngle,R.a2=y(D,M,T)),R}function p(D,M,T,R){var O=(D.gauge.max-D.gauge.min)/600;r(u,T.cx,T.cy,M.radius-2,M.width-4,o(y(D,M,D.gauge.neutralValue-O)),o(y(D,M,D.gauge.neutralValue+O)),R,2,D.gauge.background.color)}function s(D,M){for(var T,R=0;R<D.threshold.values.length;R++){var O=D.threshold.values[R];if(T=O.color,M<O.value)break}return T}function y(D,M,T){var R=D.gauge.startAngle+(D.gauge.endAngle-D.gauge.startAngle)*((T-D.gauge.min)/(D.gauge.max-D.gauge.min));return R<D.gauge.startAngle?R=D.gauge.startAngle:R>D.gauge.endAngle&&(R=D.gauge.endAngle),R}E.prototype.drawThreshold=function(D,M,T){for(var R=D.gauge.startAngle,O=0;O<D.threshold.values.length;O++){var x=D.threshold.values[O];c1=x.color,a2=y(D,M,x.value),r(u,T.cx,T.cy,M.radius+M.thresholdWidth,M.thresholdWidth-2,o(R),o(a2),c1,1,c1),R=a2}};function C(D,M,T,R,O,x,I,L,P,N){O!==x&&(u.save(),r(u,D,M,T,R,O,x,I,L,P),N&&(r(u,D,M,T,R,O,x),u.clip(),u.shadowOffsetX=0,u.shadowOffsetY=0,u.shadowBlur=10,u.shadowColor="gray",r(u,D,M,T+1,R+2,O,x,I,1)),u.restore())}E.prototype.drawLable=function(D,M,T,R,O){S(T.cx,T.y+T.cellMargin+M.labelMargin+T.offsetY,"flotGaugeLabel"+R,D.label.formatter?D.label.formatter(O.label,O.data[0][1]):text,D.label)},E.prototype.drawValue=function(D,M,T,R,O){S(T.cx,T.cy-D.value.font.size/2,"flotGaugeValue"+R,D.value.formatter?D.value.formatter(O.label,O.data[0][1]):text,D.value)},E.prototype.drawThresholdValues=function(D,M,T,R){b(D,M,T,"Min"+R,D.gauge.min,D.gauge.startAngle),b(D,M,T,"Max"+R,D.gauge.max,D.gauge.endAngle);for(var O=0;O<D.threshold.values.length;O++){var x=D.threshold.values[O];if(x.value>D.gauge.min&&x.value<D.gauge.max){var I=y(D,M,x.value);b(D,M,T,R+"_"+O,x.value,I)}}var L=D.gauge.neutralValue;L!=null&&L>D.gauge.min&&L<D.gauge.max&&b(D,M,T,"Neutral"+R,L,y(D,M,L))};function b(D,M,T,R,O,x){S(T.cx+(M.thresholdLabelMargin+M.thresholdLabelFontSize/2+M.radius)*Math.cos(o(x)),T.cy+(M.thresholdLabelMargin+M.thresholdLabelFontSize/2+M.radius)*Math.sin(o(x)),"flotGaugeThresholdValue"+R,D.threshold.label.formatter?D.threshold.label.formatter(O):O,D.threshold.label,x)}function S(D,M,T,R,O,x){var I=G(l).find("#"+T),L=I.length;L||(I=G("<span></span>"),I.attr("id",T),I.attr("class","flot-temp-elem"),l.append(I)),I.css("position","absolute"),I.css("top",M+"px"),I.css("white-space","nowrap"),O.font.size&&I.css("font-size",O.font.size+"px"),O.font.family&&I.css("font-family",O.font.family),O.color&&I.css("color",O.color),O.background.color&&I.css("background-color",O.background.color),O.background.opacity&&I.css("opacity",O.background.opacity),I.text(R),I.css("left",D+"px"),I.css("left",parseInt(I.css("left"))-I.width()/2+"px"),!L&&x&&(I.css("top",parseInt(I.css("top"))-I.height()/2+"px"),I.css("transform","rotate("+(180*x+90)+"deg)"))}return E}();function e(u){return typeof Logger<"u"?new Logger(u):null}function n(u,l){return l%u}function a(u,l){return Math.floor(l/u)}function o(u){return u*Math.PI}function r(u,l,m,c,d,f,E,v,h,p){if(f!==E){var s=!1;u.save(),u.beginPath(),u.arc(l,m,c,f,E,s),u.lineTo(l+(c-d)*Math.cos(E),m+(c-d)*Math.sin(E)),u.arc(l,m,c-d,E,f,!s),u.closePath(),h&&(u.lineWidth=h),v&&(u.strokeStyle=v,u.stroke()),p&&(u.fillStyle=p,u.fill()),u.restore()}}function i(u){u.hooks.processOptions.push(function(l,m){var c=e(m.series.gauges.debug);m.series.gauges.show&&(m.grid.show=!1,m.legend.show=!1);var d=m.series.gauges.threshold.values;d.sort(function(f,E){return f.value<E.value?-1:f.value>E.value?1:0})}),u.hooks.draw.push(function(l,m){var c=l.getOptions(),d=c.series.gauges,f=e(d.debug);if(d.show){var E=l.getData();if(!(!E||!E.length)){var v=new A(l,m),h=v.calculateLayout();d.debug.layout,v.drawBackground(h);for(var p=0;p<E.length;p++){var s=E[p],y=G.extend({},d,s.gauges);s.gauges&&v.calculateAutoValues(y,h.cellWidth);var C=v.calculateCellLayout(y,h,p);v.drawCellBackground(y,C),y.debug.layout,y.label.show&&v.drawLable(y,h,C,p,s),v.drawGauge(y,h,C,s.label,s.data[0][1]),y.threshold.show&&v.drawThreshold(y,h,C),y.threshold.label.show&&v.drawThresholdValues(y,h,C,p),y.value.show&&v.drawValue(y,h,C,p,s)}}}})}var g={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(u,l){return u}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(u,l){return parseInt(l)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(u){return u}},values:[]}}}};G.plot.plugins.push({init:i,options:g,name:"gauge",version:"1.1.0"})})(jQuery)},89377:()=>{(function(G){G.color={},G.color.make=function(e,n,a,o){var r={};return r.r=e||0,r.g=n||0,r.b=a||0,r.a=o??1,r.add=function(i,g){for(var u=0;u<i.length;++u)r[i.charAt(u)]+=g;return r.normalize()},r.scale=function(i,g){for(var u=0;u<i.length;++u)r[i.charAt(u)]*=g;return r.normalize()},r.toString=function(){return r.a>=1?"rgb("+[r.r,r.g,r.b].join(",")+")":"rgba("+[r.r,r.g,r.b,r.a].join(",")+")"},r.normalize=function(){function i(g,u,l){return u<g?g:u>l?l:u}return r.r=i(0,parseInt(r.r),255),r.g=i(0,parseInt(r.g),255),r.b=i(0,parseInt(r.b),255),r.a=i(0,r.a,1),r},r.clone=function(){return G.color.make(r.r,r.b,r.g,r.a)},r.normalize()},G.color.extract=function(e,n){var a;do{if(a=e.css(n).toLowerCase(),a!=""&&a!="transparent")break;e=e.parent()}while(e.length&&!G.nodeName(e.get(0),"body"));return a=="rgba(0, 0, 0, 0)"&&(a="transparent"),G.color.parse(a)},G.color.parse=function(e){var n,a=G.color.make;if(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return a(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10));if(n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return a(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),parseFloat(n[4]));if(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return a(parseFloat(n[1])*2.55,parseFloat(n[2])*2.55,parseFloat(n[3])*2.55);if(n=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return a(parseFloat(n[1])*2.55,parseFloat(n[2])*2.55,parseFloat(n[3])*2.55,parseFloat(n[4]));if(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return a(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16));if(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return a(parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16));var o=G.trim(e).toLowerCase();return o=="transparent"?a(255,255,255,0):(n=A[o]||[0,0,0],a(n[0],n[1],n[2]))};var A={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery),function(G){var A=Object.prototype.hasOwnProperty;G.fn.detach||(G.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});function e(o,r){var i=r.children("."+o)[0];if(i==null&&(i=document.createElement("canvas"),i.className=o,G(i).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(r),!i.getContext))if(window.G_vmlCanvasManager)i=window.G_vmlCanvasManager.initElement(i);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=i;var g=this.context=i.getContext("2d"),u=window.devicePixelRatio||1,l=g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1;this.pixelRatio=u/l,this.resize(r.width(),r.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}e.prototype.resize=function(o,r){if(o<=0||r<=0)throw new Error("Invalid dimensions for plot, width = "+o+", height = "+r);var i=this.element,g=this.context,u=this.pixelRatio;this.width!=o&&(i.width=o*u,i.style.width=o+"px",this.width=o),this.height!=r&&(i.height=r*u,i.style.height=r+"px",this.height=r),g.restore(),g.save(),g.scale(u,u)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var o=this._textCache;for(var r in o)if(A.call(o,r)){var i=this.getTextLayer(r),g=o[r];i.hide();for(var u in g)if(A.call(g,u)){var l=g[u];for(var m in l)if(A.call(l,m)){for(var c=l[m].positions,d=0,f;f=c[d];d++)f.active?f.rendered||(i.append(f.element),f.rendered=!0):(c.splice(d--,1),f.rendered&&f.element.detach());c.length==0&&delete l[m]}}i.show()}},e.prototype.getTextLayer=function(o){var r=this.text[o];return r==null&&(this.textContainer==null&&(this.textContainer=G("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),r=this.text[o]=G("<div></div>").addClass(o).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),r},e.prototype.getTextInfo=function(o,r,i,g,u){var l,m,c,d;if(r=""+r,typeof i=="object"?l=i.style+" "+i.variant+" "+i.weight+" "+i.size+"px/"+i.lineHeight+"px "+i.family:l=i,m=this._textCache[o],m==null&&(m=this._textCache[o]={}),c=m[l],c==null&&(c=m[l]={}),d=c[r],d==null){var f=G("<div></div>").html(r).css({position:"absolute","max-width":u,top:-9999}).appendTo(this.getTextLayer(o));typeof i=="object"?f.css({font:l,color:i.color}):typeof i=="string"&&f.addClass(i),d=c[r]={element:f,positions:[]};var E=this._textSizeCache[r];E?(d.width=E.width,d.height=E.height):(d.width=f.outerWidth(!0),d.height=f.outerHeight(!0),this._textSizeCache[r]={width:d.width,height:d.height}),f.detach()}return d},e.prototype.addText=function(o,r,i,g,u,l,m,c,d){var f=this.getTextInfo(o,g,u,l,m),E=f.positions;c=="center"?r-=f.width/2:c=="right"&&(r-=f.width),d=="middle"?i-=f.height/2:d=="bottom"&&(i-=f.height);for(var v=0,h;h=E[v];v++)if(h.x==r&&h.y==i){h.active=!0;return}h={active:!0,rendered:!1,element:E.length?f.element.clone():f.element,x:r,y:i},E.push(h),h.element.css({top:Math.round(i),left:Math.round(r),"text-align":c})},e.prototype.removeText=function(o,r,i,g,u,l){if(g==null){var m=this._textCache[o];if(m!=null){for(var c in m)if(A.call(m,c)){var d=m[c];for(var f in d)if(A.call(d,f))for(var E=d[f].positions,v=0,h;h=E[v];v++)h.active=!1}}}else for(var E=this.getTextInfo(o,g,u,l).positions,v=0,h;h=E[v];v++)h.x==r&&h.y==i&&(h.active=!1)};function n(o,r,i,g){var u=[],l={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:16.666666666666668},hooks:{}},m=null,c=null,d=null,f=null,E=null,v=[],h=[],p={left:0,right:0,top:0,bottom:0},s=0,y=0,C={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},b=this;b.setData=T,b.setupGrid=k,b.draw=re,b.getPlaceholder=function(){return o},b.getCanvas=function(){return m.element},b.getPlotOffset=function(){return p},b.width=function(){return s},b.height=function(){return y},b.offset=function(){var Z=d.offset();return Z.left+=p.left,Z.top+=p.top,Z},b.getData=function(){return u},b.getAxes=function(){var Z={},ee;return G.each(v.concat(h),function(ce,be){be&&(Z[be.direction+(be.n!=1?be.n:"")+"axis"]=be)}),Z},b.getXAxes=function(){return v},b.getYAxes=function(){return h},b.c2p=I,b.p2c=L,b.getOptions=function(){return l},b.highlight=mt,b.unhighlight=Je,b.triggerRedrawOverlay=qe,b.pointOffset=function(Z){return{left:parseInt(v[O(Z,"x")-1].p2c(+Z.x)+p.left,10),top:parseInt(h[O(Z,"y")-1].p2c(+Z.y)+p.top,10)}},b.shutdown=V,b.destroy=function(){V(),o.removeData("plot").empty(),u=[],l=null,m=null,c=null,d=null,f=null,E=null,v=[],h=[],C=null,ct=[],b=null},b.resize=function(){var Z=o.width(),ee=o.height();m.resize(Z,ee),c.resize(Z,ee)},b.hooks=C,D(b),M(i),U(),T(r),k(),re(),j();function S(Z,ee){ee=[b].concat(ee);for(var ce=0;ce<Z.length;++ce)Z[ce].apply(this,ee)}function D(){for(var Z={Canvas:e},ee=0;ee<g.length;++ee){var ce=g[ee];ce.init(b,Z),ce.options&&G.extend(!0,l,ce.options)}}function M(Z){G.extend(!0,l,Z),Z&&Z.colors&&(l.colors=Z.colors),l.xaxis.color==null&&(l.xaxis.color=G.color.parse(l.grid.color).scale("a",.22).toString()),l.yaxis.color==null&&(l.yaxis.color=G.color.parse(l.grid.color).scale("a",.22).toString()),l.xaxis.tickColor==null&&(l.xaxis.tickColor=l.grid.tickColor||l.xaxis.color),l.yaxis.tickColor==null&&(l.yaxis.tickColor=l.grid.tickColor||l.yaxis.color),l.grid.borderColor==null&&(l.grid.borderColor=l.grid.color),l.grid.tickColor==null&&(l.grid.tickColor=G.color.parse(l.grid.color).scale("a",.22).toString());var ee,ce,be,Ee=o.css("font-size"),Be=Ee?+Ee.replace("px",""):13,Le={style:o.css("font-style"),size:Math.round(.8*Be),variant:o.css("font-variant"),weight:o.css("font-weight"),family:o.css("font-family")};for(be=l.xaxes.length||1,ee=0;ee<be;++ee)ce=l.xaxes[ee],ce&&!ce.tickColor&&(ce.tickColor=ce.color),ce=G.extend(!0,{},l.xaxis,ce),l.xaxes[ee]=ce,ce.font&&(ce.font=G.extend({},Le,ce.font),ce.font.color||(ce.font.color=ce.color),ce.font.lineHeight||(ce.font.lineHeight=Math.round(ce.font.size*1.15)));for(be=l.yaxes.length||1,ee=0;ee<be;++ee)ce=l.yaxes[ee],ce&&!ce.tickColor&&(ce.tickColor=ce.color),ce=G.extend(!0,{},l.yaxis,ce),l.yaxes[ee]=ce,ce.font&&(ce.font=G.extend({},Le,ce.font),ce.font.color||(ce.font.color=ce.color),ce.font.lineHeight||(ce.font.lineHeight=Math.round(ce.font.size*1.15)));for(l.xaxis.noTicks&&l.xaxis.ticks==null&&(l.xaxis.ticks=l.xaxis.noTicks),l.yaxis.noTicks&&l.yaxis.ticks==null&&(l.yaxis.ticks=l.yaxis.noTicks),l.x2axis&&(l.xaxes[1]=G.extend(!0,{},l.xaxis,l.x2axis),l.xaxes[1].position="top",l.x2axis.min==null&&(l.xaxes[1].min=null),l.x2axis.max==null&&(l.xaxes[1].max=null)),l.y2axis&&(l.yaxes[1]=G.extend(!0,{},l.yaxis,l.y2axis),l.yaxes[1].position="right",l.y2axis.min==null&&(l.yaxes[1].min=null),l.y2axis.max==null&&(l.yaxes[1].max=null)),l.grid.coloredAreas&&(l.grid.markings=l.grid.coloredAreas),l.grid.coloredAreasColor&&(l.grid.markingsColor=l.grid.coloredAreasColor),l.lines&&G.extend(!0,l.series.lines,l.lines),l.points&&G.extend(!0,l.series.points,l.points),l.bars&&G.extend(!0,l.series.bars,l.bars),l.shadowSize!=null&&(l.series.shadowSize=l.shadowSize),l.highlightColor!=null&&(l.series.highlightColor=l.highlightColor),ee=0;ee<l.xaxes.length;++ee)P(v,ee+1).options=l.xaxes[ee];for(ee=0;ee<l.yaxes.length;++ee)P(h,ee+1).options=l.yaxes[ee];for(var ze in C)l.hooks[ze]&&l.hooks[ze].length&&(C[ze]=C[ze].concat(l.hooks[ze]));S(C.processOptions,[l])}function T(Z){u=R(Z),N(),F()}function R(Z){for(var ee=[],ce=0;ce<Z.length;++ce){var be=G.extend(!0,{},l.series);Z[ce].data!=null?(be.data=Z[ce].data,delete Z[ce].data,G.extend(!0,be,Z[ce]),Z[ce].data=be.data):be.data=Z[ce],ee.push(be)}return ee}function O(Z,ee){var ce=Z[ee+"axis"];return typeof ce=="object"&&(ce=ce.n),typeof ce!="number"&&(ce=1),ce}function x(){return G.grep(v.concat(h),function(Z){return Z})}function I(Z){var ee={},ce,be;for(ce=0;ce<v.length;++ce)be=v[ce],be&&(ee["x"+be.n]=be.c2p(Z.left));for(ce=0;ce<h.length;++ce)be=h[ce],be&&(ee["y"+be.n]=be.c2p(Z.top));return ee.x1!==void 0&&(ee.x=ee.x1),ee.y1!==void 0&&(ee.y=ee.y1),ee}function L(Z){var ee={},ce,be,Ee;for(ce=0;ce<v.length;++ce)if(be=v[ce],be&&be.used&&(Ee="x"+be.n,Z[Ee]==null&&be.n==1&&(Ee="x"),Z[Ee]!=null)){ee.left=be.p2c(Z[Ee]);break}for(ce=0;ce<h.length;++ce)if(be=h[ce],be&&be.used&&(Ee="y"+be.n,Z[Ee]==null&&be.n==1&&(Ee="y"),Z[Ee]!=null)){ee.top=be.p2c(Z[Ee]);break}return ee}function P(Z,ee){return Z[ee-1]||(Z[ee-1]={n:ee,direction:Z==v?"x":"y",options:G.extend(!0,{},Z==v?l.xaxis:l.yaxis)}),Z[ee-1]}function N(){var Z=u.length,ee=-1,ce;for(ce=0;ce<u.length;++ce){var be=u[ce].color;be!=null&&(Z--,typeof be=="number"&&be>ee&&(ee=be))}Z<=ee&&(Z=ee+1);var Ee,Be=[],Le=l.colors,ze=Le.length,Fe=0;for(ce=0;ce<Z;ce++)Ee=G.color.parse(Le[ce%ze]||"#666"),ce%ze==0&&ce&&(Fe>=0?Fe<.5?Fe=-Fe-.2:Fe=0:Fe=-Fe),Be[ce]=Ee.scale("rgb",1+Fe);var $e=0,et;for(ce=0;ce<u.length;++ce){if(et=u[ce],et.color==null?(et.color=Be[$e].toString(),++$e):typeof et.color=="number"&&(et.color=Be[et.color].toString()),et.lines.show==null){var tt,it=!0;for(tt in et)if(et[tt]&&et[tt].show){it=!1;break}it&&(et.lines.show=!0)}et.lines.zero==null&&(et.lines.zero=!!et.lines.fill),et.xaxis=P(v,O(et,"x")),et.yaxis=P(h,O(et,"y"))}}function F(){var Z=Number.POSITIVE_INFINITY,ee=Number.NEGATIVE_INFINITY,ce=Number.MAX_VALUE,be,Ee,Be,Le,ze,Fe,$e,et,tt,it,vt,yt,Wt,ut,pt,we;function lt(On,wn,Zn){wn<On.datamin&&wn!=-ce&&(On.datamin=wn),Zn>On.datamax&&Zn!=ce&&(On.datamax=Zn)}for(G.each(x(),function(On,wn){wn.datamin=Z,wn.datamax=ee,wn.used=!1}),be=0;be<u.length;++be)Fe=u[be],Fe.datapoints={points:[]},S(C.processRawData,[Fe,Fe.data,Fe.datapoints]);for(be=0;be<u.length;++be){if(Fe=u[be],pt=Fe.data,we=Fe.datapoints.format,!we){if(we=[],we.push({x:!0,number:!0,required:!0}),we.push({y:!0,number:!0,required:!0}),Fe.stack||Fe.bars.show||Fe.lines.show&&Fe.lines.fill){var Bt=!!(Fe.bars.show&&Fe.bars.zero||Fe.lines.show&&Fe.lines.zero);we.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:Bt}),Fe.bars.horizontal&&(delete we[we.length-1].y,we[we.length-1].x=!0)}Fe.datapoints.format=we}if(Fe.datapoints.pointsize==null){Fe.datapoints.pointsize=we.length,et=Fe.datapoints.pointsize,$e=Fe.datapoints.points;var Kt=Fe.lines.show&&Fe.lines.steps;for(Fe.xaxis.used=Fe.yaxis.used=!0,Ee=Be=0;Ee<pt.length;++Ee,Be+=et){ut=pt[Ee];var It=ut==null;if(!It)for(Le=0;Le<et;++Le)yt=ut[Le],Wt=we[Le],Wt&&(Wt.number&&yt!=null&&(yt=+yt,isNaN(yt)?yt=null:yt==1/0?yt=ce:yt==-1/0&&(yt=-ce)),yt==null&&(Wt.required&&(It=!0),Wt.defaultValue!=null&&(yt=Wt.defaultValue))),$e[Be+Le]=yt;if(It)for(Le=0;Le<et;++Le)yt=$e[Be+Le],yt!=null&&(Wt=we[Le],Wt.autoscale!==!1&&(Wt.x&&lt(Fe.xaxis,yt,yt),Wt.y&&lt(Fe.yaxis,yt,yt))),$e[Be+Le]=null;if(Kt&&Be>0&&(!It||$e[Be-et]!=null)){for(Le=0;Le<et;++Le)$e[Be+et+Le]=$e[Be+Le];$e[Be+1]=$e[Be-et+1]||0,It&&($e[Be]=ut[0]),Be+=et}}}}for(be=0;be<u.length;++be){if(Fe=u[be],$e=Fe.datapoints.points,et=Fe.datapoints.pointsize,Fe.transform==="negative-Y")for(Ee=0;Ee<$e.length;Ee+=et)$e[Ee]!=null&&(yt=$e[Ee+1],$e[Ee+1]=-yt);S(C.processDatapoints,[Fe,Fe.datapoints])}for(be=0;be<u.length;++be){Fe=u[be],$e=Fe.datapoints.points,et=Fe.datapoints.pointsize,we=Fe.datapoints.format;var Zt=Z,yn=Z,xn=ee,An=ee;for(Ee=0;Ee<$e.length;Ee+=et)if($e[Ee]!=null)for(Le=0;Le<et;++Le)yt=$e[Ee+Le],Wt=we[Le],!(!Wt||Wt.autoscale===!1||yt==ce||yt==-ce)&&(Wt.x&&(yt<Zt&&(Zt=yt),yt>xn&&(xn=yt)),Wt.y&&(yt<yn&&(yn=yt),yt>An&&(An=yt)));if(Fe.bars.show){var qt;switch(Fe.bars.align){case"left":qt=0;break;case"right":qt=-Fe.bars.barWidth;break;default:qt=-Fe.bars.barWidth/2}Fe.bars.horizontal?(yn+=qt,An+=qt+Fe.bars.barWidth):(Zt+=qt,xn+=qt+Fe.bars.barWidth)}lt(Fe.xaxis,Zt,xn),lt(Fe.yaxis,yn,An)}G.each(x(),function(On,wn){wn.datamin==Z&&(wn.datamin=null),wn.datamax==ee&&(wn.datamax=null)})}function U(){o.find(".flot-temp-elem").remove(),o.css("position")=="static"&&o.css("position","relative"),m=new e("flot-base",o),c=new e("flot-overlay",o),f=m.context,E=c.context,d=G(c.element).unbind();var Z=o.data("plot");Z&&(Z.shutdown(),c.clear()),o.data("plot",b)}function j(){l.grid.hoverable&&(d.mousemove(Me),d.bind("mouseleave",He),G(document).bind("touchend",Oe)),l.grid.clickable&&d.click(Ve),S(C.bindEvents,[d])}function V(){he&&clearTimeout(he),d.unbind("mousemove",Me),d.unbind("mouseleave",He),d.unbind("click",Ve),G(document).unbind("touchend",Oe),S(C.shutdown,[d])}function _(Z){function ee(Le){return Le}var ce,be,Ee=Z.options.transform||ee,Be=Z.options.inverseTransform;Z.direction=="x"?(ce=Z.scale=s/Math.abs(Ee(Z.max)-Ee(Z.min)),be=Math.min(Ee(Z.max),Ee(Z.min))):(ce=Z.scale=y/Math.abs(Ee(Z.max)-Ee(Z.min)),ce=-ce,be=Math.max(Ee(Z.max),Ee(Z.min))),Ee==ee?Z.p2c=function(Le){return(Le-be)*ce}:Z.p2c=function(Le){return(Ee(Le)-be)*ce},Be?Z.c2p=function(Le){return Be(be+Le/ce)}:Z.c2p=function(Le){return be+Le/ce}}function H(Z){for(var ee=Z.options,ce=Z.ticks||[],be=ee.labelWidth||0,Ee=ee.labelHeight||0,Be=be||(Z.direction=="x"?Math.floor(m.width/(ce.length||1)):null),Le=Z.direction+"Axis "+Z.direction+Z.n+"Axis",ze="flot-"+Z.direction+"-axis flot-"+Z.direction+Z.n+"-axis "+Le,Fe=ee.font||"flot-tick-label tickLabel",$e=0;$e<ce.length;++$e){var et=ce[$e];if(et.label){var tt=m.getTextInfo(ze,et.label,Fe,null,Be);be=Math.max(be,tt.width+1),Ee=Math.max(Ee,tt.height)}}Z.labelWidth=ee.labelWidth||be,Z.labelHeight=ee.labelHeight||Ee}function z(Z){var ee=Z.labelWidth,ce=Z.labelHeight,be=Z.options.position,Ee=Z.direction==="x",Be=Z.options.tickLength,Le=l.grid.axisMargin,ze=l.grid.labelMargin,Fe=l.grid.eventSectionHeight,$e=!0,et=!0,tt=!0,it=!1;G.each(Ee?v:h,function(vt,yt){yt&&(yt.show||yt.reserveSpace)&&(yt===Z?it=!0:yt.options.position===be&&(it?et=!1:$e=!1),it||(tt=!1))}),et&&(Le=0),Be==null&&(Be=tt?"full":5),isNaN(+Be)||(ze+=+Be),Ee?(ce+=ze,ce+=Fe,be=="bottom"?(p.bottom+=ce+Le,Z.box={top:m.height-p.bottom,height:ce}):(Z.box={top:p.top+Le,height:ce},p.top+=ce+Le)):(ee+=ze,be=="left"?(Z.box={left:p.left+Le,width:ee},p.left+=ee+Le):(p.right+=ee+Le,Z.box={left:m.width-p.right,width:ee})),Z.position=be,Z.tickLength=Be,Z.box.padding=ze,Z.box.eventSectionPadding=Fe,Z.innermost=$e}function K(Z){Z.direction=="x"?(Z.box.left=p.left-Z.labelWidth/2,Z.box.width=m.width-p.left-p.right+Z.labelWidth):(Z.box.top=p.top-Z.labelHeight/2,Z.box.height=m.height-p.bottom-p.top+Z.labelHeight)}function Y(){var Z=l.grid.minBorderMargin,ee,ce;if(Z==null)for(Z=0,ce=0;ce<u.length;++ce)Z=Math.max(Z,2*(u[ce].points.radius+u[ce].points.lineWidth/2));var be={left:Z,right:Z,top:Z,bottom:Z};G.each(x(),function(Ee,Be){Be.reserveSpace&&Be.ticks&&Be.ticks.length&&(Be.direction==="x"?(be.left=Math.max(be.left,Be.labelWidth/2),be.right=Math.max(be.right,Be.labelWidth/2)):(be.bottom=Math.max(be.bottom,Be.labelHeight/2),be.top=Math.max(be.top,Be.labelHeight/2)))}),p.left=Math.ceil(Math.max(be.left,p.left)),p.right=Math.ceil(Math.max(be.right,p.right)),p.top=Math.ceil(Math.max(be.top,p.top)),p.bottom=Math.ceil(Math.max(be.bottom,p.bottom))}function k(){var Z,ee=x(),ce=l.grid.show;for(var be in p){var Ee=l.grid.margin||0;p[be]=typeof Ee=="number"?Ee:Ee[be]||0}S(C.processOffset,[p]);for(var be in p)typeof l.grid.borderWidth=="object"?p[be]+=ce?l.grid.borderWidth[be]:0:p[be]+=ce?l.grid.borderWidth:0;if(G.each(ee,function(ze,Fe){var $e=Fe.options;Fe.show=$e.show==null?Fe.used:$e.show,Fe.reserveSpace=$e.reserveSpace==null?Fe.show:$e.reserveSpace,q(Fe)}),S(C.processRange,[]),ce){for(var Be=G.grep(ee,function(ze){return ze.show||ze.reserveSpace}),Le=!1,Z=0;Z<2&&(G.each(Be,function(Fe,$e){te($e),se($e),Le=de($e,$e.ticks)||Le,H($e)}),Le&&C.processRange.length>0);Z++)S(C.processRange,[]),Le=!1;for(Z=Be.length-1;Z>=0;--Z)z(Be[Z]);Y(),G.each(Be,function(ze,Fe){K(Fe)})}s=m.width-p.left-p.right,y=m.height-p.bottom-p.top,G.each(ee,function(ze,Fe){_(Fe)}),ce&&ue(),nt()}function q(Z){var ee=Z.options,ce=+(ee.min!=null?ee.min:Z.datamin),be=+(ee.max!=null?ee.max:Z.datamax),Ee=be-ce;if(Ee==0){var Be=.25,Le=Math.abs(be==0?1:be*Be);ee.min==null&&(ce-=Le),(ee.max==null||ee.min!=null)&&(be+=Le)}else{var ze=ee.autoscaleMargin;ze!=null&&(ee.min==null&&(ce-=Ee*ze,ce<0&&Z.datamin!=null&&Z.datamin>=0&&(ce=0)),ee.max==null&&(be+=Ee*ze,be>0&&Z.datamax!=null&&Z.datamax<=0&&(be=0)))}Z.min=ce,Z.max=be}function X(Z){if(Z=Math.abs(String(Z).replace(".","")),Z==0)return 0;for(;Z!=0&&Z%10==0;)Z/=10;return Math.floor(Math.log(Z)/Math.LN10)+1}function te(Z){var ee=Z.options,ce;typeof ee.ticks=="number"&&ee.ticks>0?ce=ee.ticks:ce=.3*Math.sqrt(Z.direction=="x"?m.width:m.height);var be=(Z.max-Z.min)/ce,Ee=-Math.floor(Math.log(be)/Math.LN10),Be=ee.tickDecimals;Be!=null&&Ee>Be&&(Ee=Be);var Le=Math.pow(10,-Ee),ze=be/Le,Fe;if(ze<1.5?Fe=1:ze<3?(Fe=2,ze>2.25&&(Be==null||Ee+1<=Be)&&(Fe=2.5,++Ee)):ze<7.5?Fe=5:Fe=10,Fe*=Le,ee.minTickSize!=null&&Fe<ee.minTickSize&&(Fe=ee.minTickSize),Z.delta=be,Z.tickDecimals=Math.max(0,Be??Ee),Z.tickSize=ee.tickSize||Fe,ee.mode=="time"&&!Z.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(Z.tickGenerator||(Z.tickGenerator=function(vt){var yt=[],Wt=a(vt.min,vt.tickSize),ut=0,pt=Number.NaN,we;do we=pt,pt=Wt+ut*vt.tickSize,yt.push(pt),++ut;while(pt<vt.max&&pt!=we);return yt},Z.tickFormatter=function(vt,yt){var Wt=yt.tickDecimals?Math.pow(10,yt.tickDecimals):1,ut=""+Math.round(vt*Wt)/Wt;if(yt.tickDecimals!=null){var pt=ut.indexOf("."),we=pt==-1?0:ut.length-pt-1;if(we<yt.tickDecimals)return(we?ut:ut+".")+(""+Wt).substr(1,yt.tickDecimals-we)}return ut}),G.isFunction(ee.tickFormatter)&&(Z.tickFormatter=function(vt,yt){return""+ee.tickFormatter(vt,yt)}),ee.alignTicksWithAxis!=null){var $e=(Z.direction=="x"?v:h)[ee.alignTicksWithAxis-1];if($e&&$e.used&&$e!=Z){var et=Z.tickGenerator(Z);if(et.length>0&&(ee.min==null&&(Z.min=Math.min(Z.min,et[0])),ee.max==null&&et.length>1&&(Z.max=Math.max(Z.max,et[et.length-1]))),Z.tickGenerator=function(vt){var yt=[],Wt,ut;for(ut=0;ut<$e.ticks.length;++ut)Wt=($e.ticks[ut].v-$e.min)/($e.max-$e.min),Wt=vt.min+Wt*(vt.max-vt.min),yt.push(Wt);return yt},!Z.mode&&ee.tickDecimals==null){var tt=Math.max(0,-Math.floor(Math.log(Z.delta)/Math.LN10)+1),it=Z.tickGenerator(Z);it.length>1&&/\..*0$/.test((it[1]-it[0]).toFixed(tt))||(Z.tickDecimals=tt)}}}}function se(Z){var ee=Z.options.ticks,ce=[];ee==null||typeof ee=="number"&&ee>0?ce=Z.tickGenerator(Z):ee&&(G.isFunction(ee)?ce=ee(Z):ce=ee);var be,Ee;for(Z.ticks=[],be=0;be<ce.length;++be){var Be=null,Le=ce[be];typeof Le=="object"?(Ee=+Le[0],Le.length>1&&(Be=Le[1])):Ee=+Le,Be==null&&(Be=Z.tickFormatter(Ee,Z)),isNaN(Ee)||Z.ticks.push({v:Ee,label:Be})}}function de(Z,ee){var ce=!1;return Z.options.autoscaleMargin&&ee.length>0&&(Z.options.min==null&&(Z.min=Math.min(Z.min,ee[0].v),ce=!0),Z.options.max==null&&ee.length>1&&(Z.max=Math.max(Z.max,ee[ee.length-1].v),ce=!0)),ce}function re(){m.clear(),S(C.drawBackground,[f]);var Z=l.grid;Z.show&&Z.backgroundColor&&ie(),Z.show&&!Z.aboveData&&oe();for(var ee=0;ee<u.length;++ee)S(C.drawSeries,[f,u[ee]]),ge(u[ee]);S(C.draw,[f]),Z.show&&Z.aboveData&&oe(),m.render(),qe()}function fe(Z,ee){for(var ce,be,Ee,Be,Le=x(),ze=0;ze<Le.length;++ze)if(ce=Le[ze],ce.direction==ee&&(Be=ee+ce.n+"axis",!Z[Be]&&ce.n==1&&(Be=ee+"axis"),Z[Be])){be=Z[Be].from,Ee=Z[Be].to;break}if(Z[Be]||(ce=ee=="x"?v[0]:h[0],be=Z[ee+"1"],Ee=Z[ee+"2"]),be!=null&&Ee!=null&&be>Ee){var Fe=be;be=Ee,Ee=Fe}return{from:be,to:Ee,axis:ce}}function ie(){f.save(),f.translate(p.left,p.top),f.fillStyle=ne(l.grid.backgroundColor,y,0,"rgba(255, 255, 255, 0)"),f.fillRect(0,0,s,y),f.restore()}function oe(){var Z,ee,ce,be;f.save(),f.translate(p.left,p.top);var Ee=l.grid.markings;if(Ee)for(G.isFunction(Ee)&&(ee=b.getAxes(),ee.xmin=ee.xaxis.min,ee.xmax=ee.xaxis.max,ee.ymin=ee.yaxis.min,ee.ymax=ee.yaxis.max,Ee=Ee(ee)),Z=0;Z<Ee.length;++Z){var Be=Ee[Z],Le=fe(Be,"x"),ze=fe(Be,"y");if(Le.from==null&&(Le.from=Le.axis.min),Le.to==null&&(Le.to=Le.axis.max),ze.from==null&&(ze.from=ze.axis.min),ze.to==null&&(ze.to=ze.axis.max),!(Le.to<Le.axis.min||Le.from>Le.axis.max||ze.to<ze.axis.min||ze.from>ze.axis.max)){Le.from=Math.max(Le.from,Le.axis.min),Le.to=Math.min(Le.to,Le.axis.max),ze.from=Math.max(ze.from,ze.axis.min),ze.to=Math.min(ze.to,ze.axis.max);var Fe=Le.from===Le.to,$e=ze.from===ze.to;if(!(Fe&&$e))if(Le.from=Math.floor(Le.axis.p2c(Le.from)),Le.to=Math.floor(Le.axis.p2c(Le.to)),ze.from=Math.floor(ze.axis.p2c(ze.from)),ze.to=Math.floor(ze.axis.p2c(ze.to)),Fe||$e){var et=Be.lineWidth||l.grid.markingsLineWidth,tt=et%2?.5:0;f.beginPath(),f.strokeStyle=Be.color||l.grid.markingsColor,f.lineWidth=et,Fe?(f.moveTo(Le.to+tt,ze.from),f.lineTo(Le.to+tt,ze.to)):(f.moveTo(Le.from,ze.to+tt),f.lineTo(Le.to,ze.to+tt)),f.stroke()}else f.fillStyle=Be.color||l.grid.markingsColor,f.fillRect(Le.from,ze.to,Le.to-Le.from,ze.from-ze.to)}}ee=x(),ce=l.grid.borderWidth;for(var it=0;it<ee.length;++it){var vt=ee[it],yt=vt.box,Wt=vt.tickLength,ut,pt,we,lt;if(!(!vt.show||vt.ticks.length==0)){for(f.lineWidth=1,vt.direction=="x"?(ut=0,Wt=="full"?pt=vt.position=="top"?0:y:pt=yt.top-p.top+(vt.position=="top"?yt.height:0)):(pt=0,Wt=="full"?ut=vt.position=="left"?0:s:ut=yt.left-p.left+(vt.position=="left"?yt.width:0)),vt.innermost||(f.strokeStyle=vt.options.color,f.beginPath(),we=lt=0,vt.direction=="x"?we=s+1:lt=y+1,f.lineWidth==1&&(vt.direction=="x"?pt=Math.floor(pt)+.5:ut=Math.floor(ut)+.5),f.moveTo(ut,pt),f.lineTo(ut+we,pt+lt),f.stroke()),f.strokeStyle=vt.options.tickColor,f.beginPath(),Z=0;Z<vt.ticks.length;++Z){var Bt=vt.ticks[Z].v;we=lt=0,!(isNaN(Bt)||Bt<vt.min||Bt>vt.max||Wt=="full"&&(typeof ce=="object"&&ce[vt.position]>0||ce>0)&&(Bt==vt.min||Bt==vt.max))&&(vt.direction=="x"?(ut=vt.p2c(Bt),lt=Wt=="full"?-y:Wt,vt.position=="top"&&(lt=-lt)):(pt=vt.p2c(Bt),we=Wt=="full"?-s:Wt,vt.position=="left"&&(we=-we)),f.lineWidth==1&&(vt.direction=="x"?ut=Math.floor(ut)+.5:pt=Math.floor(pt)+.5),f.moveTo(ut,pt),f.lineTo(ut+we,pt+lt))}f.stroke()}}ce&&(be=l.grid.borderColor,typeof ce=="object"||typeof be=="object"?(typeof ce!="object"&&(ce={top:ce,right:ce,bottom:ce,left:ce}),typeof be!="object"&&(be={top:be,right:be,bottom:be,left:be}),ce.top>0&&(f.strokeStyle=be.top,f.lineWidth=ce.top,f.beginPath(),f.moveTo(0-ce.left,0-ce.top/2),f.lineTo(s,0-ce.top/2),f.stroke()),ce.right>0&&(f.strokeStyle=be.right,f.lineWidth=ce.right,f.beginPath(),f.moveTo(s+ce.right/2,0-ce.top),f.lineTo(s+ce.right/2,y),f.stroke()),ce.bottom>0&&(f.strokeStyle=be.bottom,f.lineWidth=ce.bottom,f.beginPath(),f.moveTo(s+ce.right,y+ce.bottom/2),f.lineTo(0,y+ce.bottom/2),f.stroke()),ce.left>0&&(f.strokeStyle=be.left,f.lineWidth=ce.left,f.beginPath(),f.moveTo(0-ce.left/2,y+ce.bottom),f.lineTo(0-ce.left/2,0),f.stroke())):(f.lineWidth=ce,f.strokeStyle=l.grid.borderColor,f.strokeRect(-ce/2,-ce/2,s+ce,y+ce))),f.restore()}function ue(){G.each(x(),function(Z,ee){var ce=ee.box,be=ee.direction+"Axis "+ee.direction+ee.n+"Axis",Ee="flot-"+ee.direction+"-axis flot-"+ee.direction+ee.n+"-axis "+be,Be=ee.options.font||"flot-tick-label tickLabel",Le,ze,Fe,$e,et;if(m.removeText(Ee),!(!ee.show||ee.ticks.length==0))for(var tt=0;tt<ee.ticks.length;++tt)Le=ee.ticks[tt],!(!Le.label||Le.v<ee.min||Le.v>ee.max)&&(ee.direction=="x"?($e="center",ze=p.left+ee.p2c(Le.v),ee.position=="bottom"?Fe=ce.top+ce.padding+ce.eventSectionPadding:(Fe=ce.top+ce.height-ce.padding,et="bottom")):(et="middle",Fe=p.top+ee.p2c(Le.v),ee.position=="left"?(ze=ce.left+ce.width-ce.padding,$e="right"):ze=ce.left+ce.padding),m.addText(Ee,ze,Fe,Le.label,Be,null,null,$e,et))})}function me(Z){for(var ee=[],ce=null,be=null,Ee=Z.datapoints,Be=[],Le=0;Le<Ee.pointsize-2;Le++)Be.push(0);for(var ze=0;ze<Ee.points.length;ze+=Ee.pointsize){var Fe=Ee.points[ze],$e=Ee.points[ze+1];ze===Ee.points.length-Ee.pointsize?be=null:be=Ee.points[ze+Ee.pointsize],Fe!==null&&$e!==null&&ce===null&&be===null&&(ee.push(Fe),ee.push($e),ee.push.apply(ee,Be)),ce=Fe}var et=Ee.points;Ee.points=ee,Z.points.radius=Z.lines.lineWidth/2,De(Z),Ee.points=et}function ge(Z){Z.lines.show&&(Ue(Z),!Z.points.show&&!Z.bars.show&&me(Z)),Z.bars.show&&ye(Z),Z.points.show&&De(Z)}function Ue(Z){function ee(ze,Fe,$e,et,tt){var it=ze.points,vt=ze.pointsize,yt=null,Wt=null;f.beginPath();for(var ut=vt;ut<it.length;ut+=vt){var pt=it[ut-vt],we=it[ut-vt+1],lt=it[ut],Bt=it[ut+1];if(!(pt==null||lt==null)){if(we<=Bt&&we<tt.min){if(Bt<tt.min)continue;pt=(tt.min-we)/(Bt-we)*(lt-pt)+pt,we=tt.min}else if(Bt<=we&&Bt<tt.min){if(we<tt.min)continue;lt=(tt.min-we)/(Bt-we)*(lt-pt)+pt,Bt=tt.min}if(we>=Bt&&we>tt.max){if(Bt>tt.max)continue;pt=(tt.max-we)/(Bt-we)*(lt-pt)+pt,we=tt.max}else if(Bt>=we&&Bt>tt.max){if(we>tt.max)continue;lt=(tt.max-we)/(Bt-we)*(lt-pt)+pt,Bt=tt.max}if(pt<=lt&&pt<et.min){if(lt<et.min)continue;we=(et.min-pt)/(lt-pt)*(Bt-we)+we,pt=et.min}else if(lt<=pt&&lt<et.min){if(pt<et.min)continue;Bt=(et.min-pt)/(lt-pt)*(Bt-we)+we,lt=et.min}if(pt>=lt&&pt>et.max){if(lt>et.max)continue;we=(et.max-pt)/(lt-pt)*(Bt-we)+we,pt=et.max}else if(lt>=pt&&lt>et.max){if(pt>et.max)continue;Bt=(et.max-pt)/(lt-pt)*(Bt-we)+we,lt=et.max}(pt!=yt||we!=Wt)&&f.moveTo(et.p2c(pt)+Fe,tt.p2c(we)+$e),yt=lt,Wt=Bt,f.lineTo(et.p2c(lt)+Fe,tt.p2c(Bt)+$e)}}f.stroke()}function ce(ze,Fe,$e){for(var et=ze.points,tt=ze.pointsize,it=Math.min(Math.max(0,$e.min),$e.max),vt=0,yt,Wt=!1,ut=1,pt=0,we=0;!(tt>0&&vt>et.length+tt);){vt+=tt;var lt=et[vt-tt],Bt=et[vt-tt+ut],Kt=et[vt],It=et[vt+ut];if(Wt){if(tt>0&&lt!=null&&Kt==null){we=vt,tt=-tt,ut=2;continue}if(tt<0&&vt==pt+tt){f.fill(),Wt=!1,tt=-tt,ut=1,vt=pt=we+tt;continue}}if(!(lt==null||Kt==null)){if(lt<=Kt&&lt<Fe.min){if(Kt<Fe.min)continue;Bt=(Fe.min-lt)/(Kt-lt)*(It-Bt)+Bt,lt=Fe.min}else if(Kt<=lt&&Kt<Fe.min){if(lt<Fe.min)continue;It=(Fe.min-lt)/(Kt-lt)*(It-Bt)+Bt,Kt=Fe.min}if(lt>=Kt&&lt>Fe.max){if(Kt>Fe.max)continue;Bt=(Fe.max-lt)/(Kt-lt)*(It-Bt)+Bt,lt=Fe.max}else if(Kt>=lt&&Kt>Fe.max){if(lt>Fe.max)continue;It=(Fe.max-lt)/(Kt-lt)*(It-Bt)+Bt,Kt=Fe.max}if(Wt||(f.beginPath(),f.moveTo(Fe.p2c(lt),$e.p2c(it)),Wt=!0),Bt>=$e.max&&It>=$e.max){f.lineTo(Fe.p2c(lt),$e.p2c($e.max)),f.lineTo(Fe.p2c(Kt),$e.p2c($e.max));continue}else if(Bt<=$e.min&&It<=$e.min){f.lineTo(Fe.p2c(lt),$e.p2c($e.min)),f.lineTo(Fe.p2c(Kt),$e.p2c($e.min));continue}var Zt=lt,yn=Kt;Bt<=It&&Bt<$e.min&&It>=$e.min?(lt=($e.min-Bt)/(It-Bt)*(Kt-lt)+lt,Bt=$e.min):It<=Bt&&It<$e.min&&Bt>=$e.min&&(Kt=($e.min-Bt)/(It-Bt)*(Kt-lt)+lt,It=$e.min),Bt>=It&&Bt>$e.max&&It<=$e.max?(lt=($e.max-Bt)/(It-Bt)*(Kt-lt)+lt,Bt=$e.max):It>=Bt&&It>$e.max&&Bt<=$e.max&&(Kt=($e.max-Bt)/(It-Bt)*(Kt-lt)+lt,It=$e.max),lt!=Zt&&f.lineTo(Fe.p2c(Zt),$e.p2c(Bt)),f.lineTo(Fe.p2c(lt),$e.p2c(Bt)),f.lineTo(Fe.p2c(Kt),$e.p2c(It)),Kt!=yn&&(f.lineTo(Fe.p2c(Kt),$e.p2c(It)),f.lineTo(Fe.p2c(yn),$e.p2c(It)))}}}f.save(),f.translate(p.left,p.top),f.lineJoin="round";var be=Z.lines.lineWidth,Ee=Z.shadowSize;if(be>0&&Ee>0){f.lineWidth=Ee,f.strokeStyle="rgba(0,0,0,0.1)";var Be=Math.PI/18;ee(Z.datapoints,Math.sin(Be)*(be/2+Ee/2),Math.cos(Be)*(be/2+Ee/2),Z.xaxis,Z.yaxis),f.lineWidth=Ee/2,ee(Z.datapoints,Math.sin(Be)*(be/2+Ee/4),Math.cos(Be)*(be/2+Ee/4),Z.xaxis,Z.yaxis)}f.lineWidth=be,f.strokeStyle=Z.color;var Le=Te(Z.lines,Z.color,0,y);Le&&(f.fillStyle=Le,ce(Z.datapoints,Z.xaxis,Z.yaxis)),be>0&&ee(Z.datapoints,0,0,Z.xaxis,Z.yaxis),f.restore()}function De(Z){function ee(ze,Fe,$e,et,tt,it,vt,yt){for(var Wt=ze.points,ut=ze.pointsize,pt=0;pt<Wt.length;pt+=ut){var we=Wt[pt],lt=Wt[pt+1];we==null||we<it.min||we>it.max||lt<vt.min||lt>vt.max||(f.beginPath(),we=it.p2c(we),lt=vt.p2c(lt)+et,yt=="circle"?f.arc(we,lt,Fe,0,tt?Math.PI:Math.PI*2,!1):yt(f,we,lt,Fe,tt),f.closePath(),$e&&(f.fillStyle=$e,f.fill()),f.stroke())}}f.save(),f.translate(p.left,p.top);var ce=Z.points.lineWidth,be=Z.shadowSize,Ee=Z.points.radius,Be=Z.points.symbol;if(ce==0&&(ce=1e-4),ce>0&&be>0){var Le=be/2;f.lineWidth=Le,f.strokeStyle="rgba(0,0,0,0.1)",ee(Z.datapoints,Ee,null,Le+Le/2,!0,Z.xaxis,Z.yaxis,Be),f.strokeStyle="rgba(0,0,0,0.2)",ee(Z.datapoints,Ee,null,Le/2,!0,Z.xaxis,Z.yaxis,Be)}f.lineWidth=ce,f.strokeStyle=Z.color,ee(Z.datapoints,Ee,Te(Z.points,Z.color),0,!1,Z.xaxis,Z.yaxis,Be),f.restore()}function Pe(Z,ee,ce,be,Ee,Be,Le,ze,Fe,$e,et){var tt,it,vt,yt,Wt,ut,pt,we,lt;$e?(we=ut=pt=!0,Wt=!1,tt=ce,it=Z,yt=ee+be,vt=ee+Ee,it<tt&&(lt=it,it=tt,tt=lt,Wt=!0,ut=!1)):(Wt=ut=pt=!0,we=!1,tt=Z+be,it=Z+Ee,vt=ce,yt=ee,yt<vt&&(lt=yt,yt=vt,vt=lt,we=!0,pt=!1)),!(it<Le.min||tt>Le.max||yt<ze.min||vt>ze.max)&&(tt<Le.min&&(tt=Le.min,Wt=!1),it>Le.max&&(it=Le.max,ut=!1),vt<ze.min&&(vt=ze.min,we=!1),yt>ze.max&&(yt=ze.max,pt=!1),tt=Le.p2c(tt),vt=ze.p2c(vt),it=Le.p2c(it),yt=ze.p2c(yt),Be&&(Fe.fillStyle=Be(vt,yt),Fe.fillRect(tt,yt,it-tt,vt-yt)),et>0&&(Wt||ut||pt||we)&&(Fe.beginPath(),Fe.moveTo(tt,vt),Wt?Fe.lineTo(tt,yt):Fe.moveTo(tt,yt),pt?Fe.lineTo(it,yt):Fe.moveTo(it,yt),ut?Fe.lineTo(it,vt):Fe.moveTo(it,vt),we?Fe.lineTo(tt,vt):Fe.moveTo(tt,vt),Fe.stroke()))}function ye(Z){function ee(Ee,Be,Le,ze,Fe,$e){for(var et=Ee.points,tt=Ee.pointsize,it=0;it<et.length;it+=tt)et[it]!=null&&Pe(et[it],et[it+1],et[it+2],Be,Le,ze,Fe,$e,f,Z.bars.horizontal,Z.bars.lineWidth)}f.save(),f.translate(p.left,p.top),f.lineWidth=Z.bars.lineWidth,f.strokeStyle=Z.color;var ce;switch(Z.bars.align){case"left":ce=0;break;case"right":ce=-Z.bars.barWidth;break;default:ce=-Z.bars.barWidth/2}var be=Z.bars.fill?function(Ee,Be){return Te(Z.bars,Z.color,Ee,Be)}:null;ee(Z.datapoints,ce,ce+Z.bars.barWidth,be,Z.xaxis,Z.yaxis),f.restore()}function Te(Z,ee,ce,be){var Ee=Z.fill;if(!Ee)return null;if(Z.fillColor)return ne(Z.fillColor,ce,be,ee);var Be=G.color.parse(ee);return Be.a=typeof Ee=="number"?Ee:.4,Be.normalize(),Be.toString()}function nt(){if(l.legend.container!=null?G.find(l.legend.container).html(""):o.find(".legend").remove(),!!l.legend.show){for(var Z=[],ee=[],ce=!1,be=l.legend.labelFormatter,Ee,Be,Le=0;Le<u.length;++Le)Ee=u[Le],Ee.label&&(Be=be?be(Ee.label,Ee):Ee.label,Be&&ee.push({label:Be,color:Ee.color}));if(l.legend.sorted)if(G.isFunction(l.legend.sorted))ee.sort(l.legend.sorted);else if(l.legend.sorted=="reverse")ee.reverse();else{var ze=l.legend.sorted!="descending";ee.sort(function(ut,pt){return ut.label==pt.label?0:ut.label<pt.label!=ze?1:-1})}for(var Le=0;Le<ee.length;++Le){var Fe=ee[Le];Le%l.legend.noColumns==0&&(ce&&Z.push("</tr>"),Z.push("<tr>"),ce=!0),Z.push('<td class="legendColorBox"><div style="border:1px solid '+l.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+Fe.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+Fe.label+"</td>")}if(ce&&Z.push("</tr>"),Z.length!=0){var $e='<table style="font-size:smaller;color:'+l.grid.color+'">'+Z.join("")+"</table>";if(l.legend.container!=null)G(l.legend.container).html($e);else{var et="",tt=l.legend.position,it=l.legend.margin;it[0]==null&&(it=[it,it]),tt.charAt(0)=="n"?et+="top:"+(it[1]+p.top)+"px;":tt.charAt(0)=="s"&&(et+="bottom:"+(it[1]+p.bottom)+"px;"),tt.charAt(1)=="e"?et+="right:"+(it[0]+p.right)+"px;":tt.charAt(1)=="w"&&(et+="left:"+(it[0]+p.left)+"px;");var vt=G('<div class="legend">'+$e.replace('style="','style="position:absolute;'+et+";")+"</div>").appendTo(o);if(l.legend.backgroundOpacity!=0){var yt=l.legend.backgroundColor;yt==null&&(yt=l.grid.backgroundColor,yt&&typeof yt=="string"?yt=G.color.parse(yt):yt=G.color.extract(vt,"background-color"),yt.a=1,yt=yt.toString());var Wt=vt.children();G('<div style="position:absolute;width:'+Wt.width()+"px;height:"+Wt.height()+"px;"+et+"background-color:"+yt+';"> </div>').prependTo(vt).css("opacity",l.legend.backgroundOpacity)}}}}}var ct=[],he=null;function xe(Z,ee,ce){var be=l.grid.mouseActiveRadius,Ee=be*be+1,Be=null,Le=!1,ze,Fe,$e;for(ze=u.length-1;ze>=0;--ze)if(ce(u[ze])){var et=u[ze],tt=et.xaxis,it=et.yaxis,vt=et.datapoints.points,yt=tt.c2p(Z),Wt=it.c2p(ee),ut=be/tt.scale,pt=be/it.scale;if($e=et.datapoints.pointsize,tt.options.inverseTransform&&(ut=Number.MAX_VALUE),it.options.inverseTransform&&(pt=Number.MAX_VALUE),et.lines.show||et.points.show)for(Fe=0;Fe<vt.length;Fe+=$e){var we=vt[Fe],lt=vt[Fe+1];if(we!=null&&!(we-yt>ut||we-yt<-ut||lt-Wt>pt||lt-Wt<-pt)){var Bt=Math.abs(tt.p2c(we)-Z),Kt=Math.abs(it.p2c(lt)-ee),It=Bt*Bt+Kt*Kt;It<Ee&&(Ee=It,Be=[ze,Fe/$e])}}if(et.bars.show&&!Be){var Zt,yn;switch(et.bars.align){case"left":Zt=0;break;case"right":Zt=-et.bars.barWidth;break;default:Zt=-et.bars.barWidth/2}for(yn=Zt+et.bars.barWidth,Fe=0;Fe<vt.length;Fe+=$e){var we=vt[Fe],lt=vt[Fe+1],xn=vt[Fe+2];we!=null&&(u[ze].bars.horizontal?yt<=Math.max(xn,we)&&yt>=Math.min(xn,we)&&Wt>=lt+Zt&&Wt<=lt+yn:yt>=we+Zt&&yt<=we+yn&&Wt>=Math.min(xn,lt)&&Wt<=Math.max(xn,lt))&&(Be=[ze,Fe/$e])}}}return Be?(ze=Be[0],Fe=Be[1],$e=u[ze].datapoints.pointsize,{datapoint:u[ze].datapoints.points.slice(Fe*$e,(Fe+1)*$e),dataIndex:Fe,series:u[ze],seriesIndex:ze}):null}function Me(Z){l.grid.hoverable&&_e("plothover",Z,function(ee){return ee.hoverable!=!1})}function He(Z){l.grid.hoverable&&_e("plothover",Z,function(ee){return!1})}function Ve(Z){b.isSelecting||_e("plotclick",Z,function(ee){return ee.clickable!=!1})}function Oe(Z){if(Z.cancelable){if(!d.is(Z.target)&&d.has(Z.target).length===0){_e("plotleave",Z,function(ee){});return}Me(Ne(Z)),Z.preventDefault()}}function Ne(Z){if(!Z||!Z.originalEvent||Z.pageX&&Z.pageY)return Z;var ee=Z.originalEvent;if(ee.changedTouches.length===0)return Z;var ce=ee.changedTouches[0];return Z.pageX=ce.pageX,Z.pageY=ce.pageY,Z}function _e(Z,ee,ce){var be=d.offset(),Ee=ee.pageX-be.left-p.left,Be=ee.pageY-be.top-p.top,Le=I({left:Ee,top:Be});Le.pageX=ee.pageX,Le.pageY=ee.pageY,Le.ctrlKey=ee.ctrlKey,Le.metaKey=ee.metaKey;var ze=xe(Ee,Be,ce);if(ze&&(ze.pageX=parseInt(ze.series.xaxis.p2c(ze.datapoint[0])+be.left+p.left,10),ze.pageY=parseInt(ze.series.yaxis.p2c(ze.datapoint[1])+be.top+p.top,10)),l.grid.autoHighlight){for(var Fe=0;Fe<ct.length;++Fe){var $e=ct[Fe];$e.auto==Z&&!(ze&&$e.series==ze.series&&$e.point[0]==ze.datapoint[0]&&$e.point[1]==ze.datapoint[1])&&Je($e.series,$e.point)}ze&&mt(ze.series,ze.datapoint,Z)}o.trigger(Z,[Le,ze])}function qe(){var Z=l.interaction.redrawOverlayInterval;if(Z==-1){rt();return}he||(he=setTimeout(rt,Z))}function rt(){he=null,E.save(),c.clear(),E.translate(p.left,p.top);var Z,ee;for(Z=0;Z<ct.length;++Z)ee=ct[Z],ee.series.bars.show?Xe(ee.series,ee.point):Ke(ee.series,ee.point);E.restore(),S(C.drawOverlay,[E])}function mt(Z,ee,ce){if(typeof Z=="number"&&(Z=u[Z]),typeof ee=="number"){var be=Z.datapoints.pointsize;ee=Z.datapoints.points.slice(be*ee,be*(ee+1))}var Ee=Ae(Z,ee);Ee==-1?(ct.push({series:Z,point:ee,auto:ce}),qe()):ce||(ct[Ee].auto=!1)}function Je(Z,ee){if(Z==null&&ee==null){ct=[],qe();return}if(typeof Z=="number"&&(Z=u[Z]),typeof ee=="number"){var ce=Z.datapoints.pointsize;ee=Z.datapoints.points.slice(ce*ee,ce*(ee+1))}var be=Ae(Z,ee);be!=-1&&(ct.splice(be,1),qe())}function Ae(Z,ee){for(var ce=0;ce<ct.length;++ce){var be=ct[ce];if(be.series==Z&&be.point[0]==ee[0]&&be.point[1]==ee[1])return ce}return-1}function Ke(Z,ee){var ce=ee[0],be=ee[1],Ee=Z.xaxis,Be=Z.yaxis,Le=typeof Z.highlightColor=="string"?Z.highlightColor:G.color.parse(Z.color).scale("a",.5).toString();if(!(ce<Ee.min||ce>Ee.max||be<Be.min||be>Be.max)){var ze=Z.points.radius+Z.points.lineWidth/2;E.lineWidth=ze,E.strokeStyle=Le;var Fe=1.5*ze;ce=Ee.p2c(ce),be=Be.p2c(be),E.beginPath(),Z.points.symbol=="circle"?E.arc(ce,be,Fe,0,2*Math.PI,!1):Z.points.symbol(E,ce,be,Fe,!1),E.closePath(),E.stroke()}}function Xe(Z,ee){var ce=typeof Z.highlightColor=="string"?Z.highlightColor:G.color.parse(Z.color).scale("a",.5).toString(),be=ce,Ee;switch(Z.bars.align){case"left":Ee=0;break;case"right":Ee=-Z.bars.barWidth;break;default:Ee=-Z.bars.barWidth/2}E.lineWidth=Z.bars.lineWidth,E.strokeStyle=ce,Pe(ee[0],ee[1],ee[2]||0,Ee,Ee+Z.bars.barWidth,function(){return be},Z.xaxis,Z.yaxis,E,Z.bars.horizontal,Z.bars.lineWidth)}function ne(Z,ee,ce,be){if(typeof Z=="string")return Z;for(var Ee=f.createLinearGradient(0,ce,0,ee),Be=0,Le=Z.colors.length;Be<Le;++Be){var ze=Z.colors[Be];if(typeof ze!="string"){var Fe=G.color.parse(be);ze.brightness!=null&&(Fe=Fe.scale("rgb",ze.brightness)),ze.opacity!=null&&(Fe.a*=ze.opacity),ze=Fe.toString()}Ee.addColorStop(Be/(Le-1),ze)}return Ee}}G.plot=function(o,r,i){var g=new n(G(o),r,i,G.plot.plugins);return g},G.plot.version="0.8.3",G.plot.plugins=[],G.fn.plot=function(o,r){return this.each(function(){G.plot(this,o,r)})};function a(o,r){return r*Math.floor(o/r)}}(jQuery)},4027:()=>{(function(G){function A(e){var n={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},a={},o=null;function r(p){n.active&&(d(p),e.getPlaceholder().trigger("plotselecting",[u()]))}function i(p){p.which==1&&(document.body.focus(),document.onselectstart!==void 0&&a.onselectstart==null&&(a.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),document.ondrag!==void 0&&a.ondrag==null&&(a.ondrag=document.ondrag,document.ondrag=function(){return!1}),c(n.first,p),n.active=!0,o=function(s){g(s)},G(document).one("mouseup",o))}function g(p){return o=null,document.onselectstart!==void 0&&(document.onselectstart=a.onselectstart),document.ondrag!==void 0&&(document.ondrag=a.ondrag),n.active=!1,d(p),h()?l(p):(e.getPlaceholder().trigger("plotunselected",[]),e.getPlaceholder().trigger("plotselecting",[null])),setTimeout(function(){e.isSelecting=!1},10),!1}function u(){if(!h()||!n.show)return null;var p={},s=n.first,y=n.second,C=e.getAxes(),b=!0;return G.each(C,function(S,D){D.used&&(anyUsed=!1)}),G.each(C,function(S,D){if(D.used||b){var M=D.c2p(s[D.direction]),T=D.c2p(y[D.direction]);p[S]={from:Math.min(M,T),to:Math.max(M,T)}}}),p}function l(p){var s=u();s.ctrlKey=p.ctrlKey,s.metaKey=p.metaKey,e.getPlaceholder().trigger("plotselected",[s]),s.xaxis&&s.yaxis&&e.getPlaceholder().trigger("selected",[{x1:s.xaxis.from,y1:s.yaxis.from,x2:s.xaxis.to,y2:s.yaxis.to}])}function m(p,s,y){return s<p?p:s>y?y:s}function c(p,s){var y=e.getOptions(),C=e.getPlaceholder().offset(),b=e.getPlotOffset();p.x=m(0,s.pageX-C.left-b.left,e.width()),p.y=m(0,s.pageY-C.top-b.top,e.height()),y.selection.mode=="y"&&(p.x=p==n.first?0:e.width()),y.selection.mode=="x"&&(p.y=p==n.first?0:e.height())}function d(p){p.pageX!=null&&(c(n.second,p),h()?(e.isSelecting=!0,n.show=!0,e.triggerRedrawOverlay()):f(!0))}function f(p){n.show&&(n.show=!1,e.triggerRedrawOverlay(),p||e.getPlaceholder().trigger("plotunselected",[]))}function E(p,s){var y,C,b,S,D=e.getAxes();for(var M in D)if(y=D[M],y.direction==s&&(S=s+y.n+"axis",!p[S]&&y.n==1&&(S=s+"axis"),p[S])){C=p[S].from,b=p[S].to;break}if(p[S]||(y=s=="x"?e.getXAxes()[0]:e.getYAxes()[0],C=p[s+"1"],b=p[s+"2"]),C!=null&&b!=null&&C>b){var T=C;C=b,b=T}return{from:C,to:b,axis:y}}function v(p,s){var y,C,b=e.getOptions();b.selection.mode=="y"?(n.first.x=0,n.second.x=e.width()):(C=E(p,"x"),n.first.x=C.axis.p2c(C.from),n.second.x=C.axis.p2c(C.to)),b.selection.mode=="x"?(n.first.y=0,n.second.y=e.height()):(C=E(p,"y"),n.first.y=C.axis.p2c(C.from),n.second.y=C.axis.p2c(C.to)),n.show=!0,e.triggerRedrawOverlay(),!s&&h()&&l()}function h(){var p=e.getOptions().selection.minSize;return Math.abs(n.second.x-n.first.x)>=p&&Math.abs(n.second.y-n.first.y)>=p}e.clearSelection=f,e.setSelection=v,e.getSelection=u,e.hooks.bindEvents.push(function(p,s){var y=p.getOptions();y.selection.mode!=null&&(s.mousemove(r),s.mousedown(i))}),e.hooks.drawOverlay.push(function(p,s){if(n.show&&h()){var y=p.getPlotOffset(),C=p.getOptions();s.save(),s.translate(y.left,y.top);var b=G.color.parse(C.selection.color);s.strokeStyle=b.scale("a",.8).toString(),s.lineWidth=1,s.lineJoin=C.selection.shape,s.fillStyle=b.scale("a",.4).toString();var S=Math.min(n.first.x,n.second.x)+.5,D=Math.min(n.first.y,n.second.y)+.5,M=Math.abs(n.second.x-n.first.x)-1,T=Math.abs(n.second.y-n.first.y)-1;s.fillRect(S,D,M,T),s.strokeRect(S,D,M,T),s.restore()}}),e.hooks.shutdown.push(function(p,s){s.unbind("mousemove",r),s.unbind("mousedown",i),o&&(G(document).unbind("mouseup",o),document.onselectstart!==void 0&&(document.onselectstart=a.onselectstart),document.ondrag!==void 0&&(document.ondrag=a.ondrag))})}G.plot.plugins.push({init:A,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},65103:()=>{(function(G){var A={series:{stack:null}};function e(n){function a(r,i){for(var g=null,u=0;u<i.length&&r!=i[u];++u)i[u].stack==r.stack&&(g=i[u]);return g}function o(r,i,g){if(!(i.stack==null||i.stack===!1)){var u=a(i,r.getData());if(u){for(var l=g.pointsize,m=g.points,c=u.datapoints.pointsize,d=u.datapoints.points,f=[],E,v,h,p,s,y,C=i.lines.show,b=i.bars.horizontal,S=l>2&&(b?g.format[2].x:g.format[2].y),D=C&&i.lines.steps,M=b?1:0,T=b?0:1,R=0,O=0,x,I;!(R>=m.length&&O>=d.length);){if(x=f.length,R<m.length&&m[R]==null){for(I=0;I<l;++I)f.push(m[R+I]);R+=l}else if(R>=m.length){for(I=0;I<l;++I)f.push(d[O+I]);S&&(f[x+2]=d[O+T]),O+=c}else if(O>=d.length){for(I=0;I<l;++I)f.push(m[R+I]);R+=l}else if(O<d.length&&d[O]==null)O+=c;else{if(E=m[R+M],v=m[R+T],p=d[O+M],s=d[O+T],y=0,E==p){for(I=0;I<l;++I)f.push(m[R+I]);f[x+T]+=s,y=s,R+=l,O+=c}else if(E>p){if(R==0){for(I=0;I<l;++I)f.push(d[O+I]);y=s}if(R>0&&m[R-l]!=null){for(h=0,f.push(p),f.push(h+s),I=2;I<l;++I)f.push(m[R+I]);y=s}O+=c}else{for(I=0;I<l;++I)f.push(m[R+I]);O>0&&d[O-c]!=null&&(y=0),f[x+T]+=y,R+=l}fromgap=!1,x!=f.length&&S&&(f[x+2]=y)}if(D&&x!=f.length&&x>0&&f[x]!=null&&f[x]!=f[x-l]&&f[x+1]!=f[x-l+1]){for(I=0;I<l;++I)f[x+l+I]=f[x+I];f[x+1]=f[x-l+1]}}g.points=f}}}n.hooks.processDatapoints.push(o)}G.plot.plugins.push({init:e,options:A,name:"stack",version:"1.2"})})(jQuery)},85095:()=>{(function(G){var A={series:{stackpercent:null}};function e(n){var a={},o=!1,r={};function i(l,m,c,d){if(o||(o=!0,r=g(l.getData())),m.stackpercent==!0){var f=c.length;m.percents=[];var E=0,v=1;m.bars&&m.bars.horizontal&&m.bars.horizontal===!0&&(E=1,v=0);for(var h=0;h<f;h++){var p=r[c[h][E]+""];p>0?m.percents.push(c[h][v]*100/p):m.percents.push(0)}}}function g(l){var m=l.length,c={};if(m>0){for(var d=0;d<m;d++)if(l[d].stackpercent){var f=0,E=1;l[d].bars&&l[d].bars.horizontal&&l[d].bars.horizontal===!0&&(f=1,E=0);for(var v=l[d].data.length,h=0;h<v;h++){var p=0;l[d].data[h][1]!=null&&(p=l[d].data[h][E]),c[l[d].data[h][f]+""]?c[l[d].data[h][f]+""]+=p:c[l[d].data[h][f]+""]=p}}}return c}function u(l,m,c){if(m.stackpercent){o||(r=g(l.getData()));var d=[],f=0,E=1;m.bars&&m.bars.horizontal&&m.bars.horizontal===!0&&(f=1,E=0);for(var v=0;v<c.points.length;v+=3)a[c.points[v+f]]||(a[c.points[v+f]]=0),d[v+f]=c.points[v+f],d[v+E]=c.points[v+E]+a[c.points[v+f]],d[v+2]=a[c.points[v+f]],a[c.points[v+f]]+=c.points[v+E],r[d[v+f]+""]>0?(d[v+E]=d[v+E]*100/r[d[v+f]+""],d[v+2]=d[v+2]*100/r[d[v+f]+""]):(d[v+E]=0,d[v+2]=0);c.points=d}}n.hooks.processRawData.push(i),n.hooks.processDatapoints.push(u)}G.plot.plugins.push({init:e,options:A,name:"stackpercent",version:"0.1"})})(jQuery)},59554:()=>{(function(G){var A={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}};function e(m,c){return c*Math.floor(m/c)}function n(m,c,d,f){if(typeof m.strftime=="function")return m.strftime(c);var E=function(S,D){return S=""+S,D=""+(D??"0"),S.length==1?D+S:S},v=[],h=!1,p=m.getHours(),s=p<12;d==null&&(d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),f==null&&(f=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var y;p>12?y=p-12:p==0?y=12:y=p;for(var C=0;C<c.length;++C){var b=c.charAt(C);if(h){switch(b){case"a":b=""+f[m.getDay()];break;case"b":b=""+d[m.getMonth()];break;case"d":b=E(m.getDate(),"");break;case"e":b=E(m.getDate()," ");break;case"h":case"H":b=E(p);break;case"I":b=E(y);break;case"l":b=E(y," ");break;case"m":b=E(m.getMonth()+1,"");break;case"M":b=E(m.getMinutes());break;case"q":b=""+(Math.floor(m.getMonth()/3)+1);break;case"S":b=E(m.getSeconds());break;case"y":b=E(m.getFullYear()%100);break;case"Y":b=""+m.getFullYear();break;case"p":b=s?"am":"pm";break;case"P":b=s?"AM":"PM";break;case"w":b=""+m.getDay();break}v.push(b),h=!1}else b=="%"?h=!0:v.push(b)}return v.join("")}function a(m){function c(v,h,p,s){v[h]=function(){return p[s].apply(p,arguments)}}var d={date:m};m.strftime!=null&&c(d,"strftime",m,"strftime"),c(d,"getTime",m,"getTime"),c(d,"setTime",m,"setTime");for(var f=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],E=0;E<f.length;E++)c(d,"get"+f[E],m,"getUTC"+f[E]),c(d,"set"+f[E],m,"setUTC"+f[E]);return d}function o(m,c){if(c.timezone=="browser")return new Date(m);if(!c.timezone||c.timezone=="utc")return a(new Date(m));if(typeof timezoneJS<"u"&&typeof timezoneJS.Date<"u"){var d=new timezoneJS.Date;return d.setTimezone(c.timezone),d.setTime(m),d}else return a(new Date(m))}var r={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:30*24*60*60*1e3,quarter:3*30*24*60*60*1e3,year:365.2425*24*60*60*1e3},i=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],g=i.concat([[3,"month"],[6,"month"],[1,"year"]]),u=i.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function l(m){m.hooks.processOptions.push(function(c,d){G.each(c.getAxes(),function(f,E){var v=E.options;v.mode=="time"&&(E.tickGenerator=function(h){var p=[],s=o(h.min,v),y=0,C=v.tickSize&&v.tickSize[1]==="quarter"||v.minTickSize&&v.minTickSize[1]==="quarter"?u:g;v.minTickSize!=null&&(typeof v.tickSize=="number"?y=v.tickSize:y=v.minTickSize[0]*r[v.minTickSize[1]]);for(var b=0;b<C.length-1&&!(h.delta<(C[b][0]*r[C[b][1]]+C[b+1][0]*r[C[b+1][1]])/2&&C[b][0]*r[C[b][1]]>=y);++b);var S=C[b][0],D=C[b][1];if(D=="year"){if(v.minTickSize!=null&&v.minTickSize[1]=="year")S=Math.floor(v.minTickSize[0]);else{var M=Math.pow(10,Math.floor(Math.log(h.delta/r.year)/Math.LN10)),T=h.delta/r.year/M;T<1.5?S=1:T<3?S=2:T<7.5?S=5:S=10,S*=M}S<1&&(S=1)}h.tickSize=v.tickSize||[S,D];var R=h.tickSize[0];D=h.tickSize[1];var O=R*r[D];D=="second"?s.setSeconds(e(s.getSeconds(),R)):D=="minute"?s.setMinutes(e(s.getMinutes(),R)):D=="hour"?s.setHours(e(s.getHours(),R)):D=="month"?s.setMonth(e(s.getMonth(),R)):D=="quarter"?s.setMonth(3*e(s.getMonth()/3,R)):D=="year"&&s.setFullYear(e(s.getFullYear(),R)),s.setMilliseconds(0),O>=r.minute&&s.setSeconds(0),O>=r.hour&&s.setMinutes(0),O>=r.day&&s.setHours(0),O>=r.day*4&&s.setDate(1),O>=r.month*2&&s.setMonth(e(s.getMonth(),3)),O>=r.quarter*2&&s.setMonth(e(s.getMonth(),6)),O>=r.year&&s.setMonth(0);var x=0,I=Number.NaN,L;do if(L=I,I=s.getTime(),p.push(I),D=="month"||D=="quarter")if(R<1){s.setDate(1);var P=s.getTime();s.setMonth(s.getMonth()+(D=="quarter"?3:1));var N=s.getTime();s.setTime(I+x*r.hour+(N-P)*R),x=s.getHours(),s.setHours(0)}else s.setMonth(s.getMonth()+R*(D=="quarter"?3:1));else D=="year"?s.setFullYear(s.getFullYear()+R):s.setTime(I+O);while(I<h.max&&I!=L);return p},E.tickFormatter=function(h,p){var s=o(h,p.options);if(v.timeformat!=null)return n(s,v.timeformat,v.monthNames,v.dayNames);var y=p.options.tickSize&&p.options.tickSize[1]=="quarter"||p.options.minTickSize&&p.options.minTickSize[1]=="quarter",C=p.tickSize[0]*r[p.tickSize[1]],b=p.max-p.min,S=v.twelveHourClock?" %p":"",D=v.twelveHourClock?"%I":"%H",M;C<r.minute?M=D+":%M:%S"+S:C<r.day?b<2*r.day?M=D+":%M"+S:M="%b %d "+D+":%M"+S:C<r.month?M="%b %d":y&&C<r.quarter||!y&&C<r.year?b<r.year?M="%b":M="%b %Y":y&&C<r.year?b<r.year?M="Q%q":M="Q%q %Y":M="%Y";var T=n(s,M,v.monthNames,v.dayNames);return T})})})}G.plot.plugins.push({init:l,options:A,name:"time",version:"1.0"}),G.plot.formatDate=n})(jQuery)}}]);

//# sourceMappingURL=368.08fa689dcaf8b1f563ad.js.map