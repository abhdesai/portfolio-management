"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7641],{77977:(j,u,s)=>{s.r(u),s.d(u,{ServerStats:()=>x});var r=s(66681),t=s(85960),f=s(90857),g=s(47257),o=s(29165),c=s(95162),l=s(41879),S=s(34785),y=s(3913),h=s(13086);const i=({content:e,footer:v,isLoading:a})=>{const d=(0,g.wW)(A);return t.createElement(y._,{className:d.container,disableHover:!0},e.map((n,m)=>t.createElement(h.K,{key:m,justifyContent:"space-between",alignItems:"center"},t.createElement("span",null,n.name),a?t.createElement(S.Z,{width:60}):t.createElement("span",null,n.value))),v&&t.createElement("div",null,v))},A=e=>({container:(0,r.css)({display:"flex",flexDirection:"column",gap:e.spacing(2),padding:e.spacing(2)})});var E=s(85445);const p=async()=>(0,E.i)().get("api/admin/stats").catch(e=>(console.error(e),null)),x=()=>{const[e,v]=(0,t.useState)(null),[a,d]=(0,t.useState)(!0),n=(0,g.wW)(C),m=l.contextSrv.hasPermission(c.AccessControlAction.DataSourcesRead),D=l.contextSrv.hasPermission(c.AccessControlAction.UsersRead);return(0,t.useEffect)(()=>{l.contextSrv.hasPermission(c.AccessControlAction.ActionServerStatsRead)&&p().then(R=>{v(R),d(!1)})},[]),l.contextSrv.hasPermission(c.AccessControlAction.ActionServerStatsRead)?t.createElement(t.Fragment,null,t.createElement("h2",{className:n.title},"Instance statistics"),!a&&!e?t.createElement("p",{className:n.notFound},"No stats found."):t.createElement("div",{className:n.row},t.createElement(i,{isLoading:a,content:[{name:"Dashboards (starred)",value:`${e?.dashboards} (${e?.stars})`},{name:"Tags",value:e?.tags},{name:"Playlists",value:e?.playlists},{name:"Snapshots",value:e?.snapshots}],footer:t.createElement(o.Qj,{href:"/dashboards",variant:"secondary"},"Manage dashboards")}),t.createElement("div",{className:n.doubleRow},t.createElement(i,{isLoading:a,content:[{name:"Data sources",value:e?.datasources}],footer:m&&t.createElement(o.Qj,{href:"/datasources",variant:"secondary"},"Manage data sources")}),t.createElement(i,{isLoading:a,content:[{name:"Alerts",value:e?.alerts}],footer:t.createElement(o.Qj,{href:"/alerting/list",variant:"secondary"},"Alerts")})),t.createElement(i,{isLoading:a,content:[{name:"Organisations",value:e?.orgs},{name:"Users total",value:e?.users},{name:"Active users in last 30 days",value:e?.activeUsers},...f.config.featureToggles.displayAnonymousStats&&e?.activeDevices?[{name:"Active anonymous devices in last 30 days",value:e?.activeDevices},{name:"Active anonymous users in last 30 days",value:Math.floor(e?.activeDevices/3)}]:[],{name:"Active sessions",value:e?.activeSessions}],footer:D&&t.createElement(o.Qj,{href:"/admin/users",variant:"secondary"},"Manage users")}))):null},C=e=>({title:(0,r.css)({marginBottom:e.spacing(4)}),row:(0,r.css)({display:"flex",justifyContent:"space-between",width:"100%","& > div:not(:last-of-type)":{marginRight:e.spacing(2)},"& > div":{width:"33.3%"}}),doubleRow:(0,r.css)({display:"flex",flexDirection:"column","& > div:first-of-type":{marginBottom:e.spacing(2)}}),notFound:(0,r.css)({fontSize:e.typography.h6.fontSize,textAlign:"center",height:"290px"})})}}]);

//# sourceMappingURL=ServerStats.23a58b4c31fbba232270.js.map