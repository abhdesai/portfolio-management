"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[9218],{97603:(W,S,e)=>{e.d(S,{Z:()=>C});var t=e(85960),M=e(84933),d=e(96535),T=e(29165),O=e(68440);class C extends t.PureComponent{render(){const{searchQuery:l,linkButton:r,setSearchQuery:i,target:y,placeholder:f="Search by name or type",sortPicker:E}=this.props,p={href:r?.href,disabled:r?.disabled};return y&&(p.target=y),t.createElement("div",{className:"page-action-bar"},t.createElement(M._,{grow:!0},t.createElement(d.H,{value:l,onChange:i,placeholder:f})),E&&t.createElement(O.P,{onChange:E.onChange,value:E.value,getSortOptions:E.getSortOptions}),r&&t.createElement(T.Qj,{...p},r.title))}}},68440:(W,S,e)=>{e.d(S,{P:()=>l});var t=e(85960),M=e(81445),d=e(27436),T=e(97666),O=e(19252),C=e(30824);const L=()=>(0,C.getGrafanaSearcher)().getSortOptions();function l({onChange:r,value:i,placeholder:y,filter:f,getSortOptions:E,isClearable:p}){const u=(0,M.Z)(async()=>{const D=await(E??L)();return f?D.filter(x=>f.includes(x.value)):D},[E,f]);if(u.loading)return null;const K=!!(i?.includes("desc")||i?.startsWith("-"));return t.createElement(d.Ph,{key:i,width:28,onChange:r,value:u.value?.find(D=>D.value===i)??null,options:u.value,"aria-label":"Sort",placeholder:y??`Sort (Default ${O.yw.label})`,prefix:t.createElement(T.J,{name:K?"sort-amount-down":"sort-amount-up"}),isClearable:p})}},25816:(W,S,e)=>{e.r(S),e.d(S,{PlaylistPage:()=>$,default:()=>_});var t=e(85960),M=e(81445),d=e(29165),T=e(77980),O=e(64409),C=e(20989),L=e(97603),l=e(95329),r=e(41879),i=e(66681),y=e(47257);const f=()=>{const a=(0,y.wW)(E);return t.createElement("div",{className:a.noResult},"No playlist found!")},E=a=>({noResult:(0,i.css)`
      padding: ${a.spacing(2)};
      background: ${a.colors.secondary.main};
      font-style: italic;
      margin-top: ${a.spacing(2)};
    `});var p=e(34785),u=e(72435),K=e(93349),D=e(13086),x=e(10632),k=e(173),I=e(7288),Z=e(51637),B=e(20519),N=e(5106),b=e(55973),z=e(24956),H=e(55855),G=e(94849);const V=({playlistUid:a,onDismiss:m})=>{const[s,n]=(0,t.useState)(!1),[o,g]=(0,t.useState)(!1),v=[{label:(0,l.t)("share-playlist.mode-normal","Normal"),value:!1},{label:(0,l.t)("share-playlist.mode-tv","TV"),value:"tv"},{label:(0,l.t)("share-playlist.mode-kiosk","Kiosk"),value:!0}],h={};s&&(h.kiosk=s),o&&(h.autofitpanels=!0);const c=k.Cj.renderUrl(`${(0,G.OS)()}/play/${a}`,h);return t.createElement(I.u,{isOpen:!0,title:(0,l.t)("share-playlist.title","Share playlist"),onDismiss:m},t.createElement(Z.C,null,t.createElement(B.g,{label:(0,l.t)("share-playlist.mode","Mode")},t.createElement(N.S,{value:s,options:v,onChange:n})),t.createElement(B.g,null,t.createElement(b.X,{label:(0,l.t)("share-playlist.checkbox-label","Autofit"),description:(0,l.t)("share-playlist.checkbox-description","Panel heights will be adjusted to fit screen size"),name:"autofix",value:o,onChange:P=>g(P.currentTarget.checked)})),t.createElement(B.g,{label:(0,l.t)("share-playlist.link-url-label","Link URL")},t.createElement(z.I,{id:"link-url-input",value:c,readOnly:!0,addonAfter:t.createElement(H.m,{icon:"copy",variant:"primary",getText:()=>c},t.createElement(l.cC,{i18nKey:"share-playlist.copy-link-button"},"Copy"))}))))},A=({playlist:a,setStartPlaylist:m,setPlaylistToDelete:s})=>t.createElement(u.Z,null,t.createElement(u.Z.Heading,null,a.name,t.createElement(K.JY,{key:"button-share"},({showModal:n,hideModal:o})=>t.createElement(x.u,{tooltip:(0,l.t)("playlist-page.card.tooltip","Share playlist"),icon:"share-alt",iconSize:"lg",onClick:()=>{n(V,{playlistUid:a.uid,onDismiss:o})}}))),t.createElement(u.Z.Actions,null,t.createElement(d.zx,{variant:"secondary",icon:"play",onClick:()=>m(a)},t.createElement(l.cC,{i18nKey:"playlist-page.card.start"},"Start playlist")),r.contextSrv.isEditor&&t.createElement(t.Fragment,null,t.createElement(d.Qj,{key:"edit",variant:"secondary",href:`/playlists/edit/${a.uid}`,icon:"cog"},t.createElement(l.cC,{i18nKey:"playlist-page.card.edit"},"Edit playlist")),t.createElement(d.zx,{disabled:!1,onClick:()=>s(a),icon:"trash-alt",variant:"destructive"},t.createElement(l.cC,{i18nKey:"playlist-page.card.delete"},"Delete playlist"))))),J=()=>{const a=(0,y.wW)(X);return t.createElement(u.Z,null,t.createElement(u.Z.Heading,null,t.createElement(p.Z,{width:140})),t.createElement(u.Z.Actions,null,t.createElement(D.K,{direction:"row",wrap:"wrap"},t.createElement(p.Z,{containerClassName:a.button,width:142,height:32}),r.contextSrv.isEditor&&t.createElement(t.Fragment,null,t.createElement(p.Z,{containerClassName:a.button,width:135,height:32}),t.createElement(p.Z,{containerClassName:a.button,width:153,height:32})))))};A.Skeleton=J;function X(a){return{button:(0,i.css)({lineHeight:1})}}const R=({playlists:a,setStartPlaylist:m,setPlaylistToDelete:s})=>{const n=(0,y.wW)(F);return t.createElement("ul",{className:n.list},a.map(o=>t.createElement("li",{className:n.listItem,key:o.uid},t.createElement(A,{playlist:o,setStartPlaylist:m,setPlaylistToDelete:s}))))},Y=()=>{const a=(0,y.wW)(F);return t.createElement("div",{"data-testid":"playlist-page-list-skeleton",className:a.list},t.createElement(A.Skeleton,null),t.createElement(A.Skeleton,null),t.createElement(A.Skeleton,null))};R.Skeleton=Y;function F(a){return{list:(0,i.css)({display:"grid"}),listItem:(0,i.css)({listStyle:"none"})}}var w=e(91);const q=({playlist:a,onDismiss:m})=>{const[s,n]=(0,t.useState)(!1),[o,g]=(0,t.useState)(!1),v=[{label:"Normal",value:!1},{label:"TV",value:"tv"},{label:"Kiosk",value:!0}],h=()=>{const c={};s&&(c.kiosk=s),o&&(c.autofitpanels=!0),w.E1.push(k.Cj.renderUrl(`/playlists/play/${a.uid}`,c))};return t.createElement(I.u,{isOpen:!0,icon:"play",title:"Start playlist",onDismiss:m},t.createElement(Z.C,null,t.createElement(B.g,{label:"Mode"},t.createElement(N.S,{value:s,options:v,onChange:n})),t.createElement(b.X,{label:"Autofit",description:"Panel heights will be adjusted to fit screen size",name:"autofix",value:o,onChange:c=>g(c.currentTarget.checked)})),t.createElement(I.u.ButtonRow,null,t.createElement(d.zx,{variant:"primary",onClick:h},"Start ",a.name)))};var Q=e(76825);const $=()=>{const a=(0,Q.K9)(),[m,s]=(0,t.useState)(0),[n,o]=(0,t.useState)(""),g=(0,M.Z)(()=>a.getAllPlaylist(),[m]),v=(0,t.useMemo)(()=>(0,Q.Ds)(g.value??[],n),[n,g]),[h,c]=(0,t.useState)(),[P,U]=(0,t.useState)(),tt=v&&v.length>0,et=()=>U(void 0),at=()=>{P&&a.deletePlaylist(P.uid).finally(()=>{s(m+1),U(void 0)})},lt=t.createElement(O.Z,{title:(0,l.t)("playlist-page.empty.title","There are no playlists created yet"),buttonIcon:"plus",buttonLink:"playlists/new",buttonTitle:(0,l.t)("playlist-page.empty.button","Create Playlist"),buttonDisabled:!r.contextSrv.isEditor,proTip:(0,l.t)("playlist-page.empty.pro-tip","You can use playlists to cycle dashboards on TVs without user control"),proTipLink:"http://docs.grafana.org/reference/playlist/",proTipLinkTitle:(0,l.t)("playlist-page.empty.pro-tip-link-title","Learn more"),proTipTarget:"_blank"}),j=g.loading||v.length>0||n.length>0;return t.createElement(C.T,{actions:r.contextSrv.isEditor?t.createElement(d.Qj,{href:"/playlists/new"},t.createElement(l.cC,{i18nKey:"playlist-page.create-button.title"},"New playlist")):void 0,navId:"dashboards/playlists"},t.createElement(C.T.Contents,null,j&&t.createElement(L.Z,{searchQuery:n,setSearchQuery:o}),g.loading?t.createElement(R.Skeleton,null):t.createElement(t.Fragment,null,!tt&&n?t.createElement(f,null):t.createElement(R,{playlists:v,setStartPlaylist:c,setPlaylistToDelete:U}),!j&&lt,P&&t.createElement(T.s,{title:P.name,confirmText:(0,l.t)("playlist-page.delete-modal.confirm-text","Delete"),body:(0,l.t)("playlist-page.delete-modal.body","Are you sure you want to delete {{name}} playlist?",{name:P.name}),onConfirm:at,isOpen:!!P,onDismiss:et}),h&&t.createElement(q,{playlist:h,onDismiss:()=>c(void 0)}))))},_=$}}]);

//# sourceMappingURL=PlaylistPage.37c749bb6a4c8afcc662.js.map