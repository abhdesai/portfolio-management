"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7217],{64611:(_,V,a)=>{a.d(V,{Z:()=>v});var o=a(85960),e=a(97666),S=a(29165);function m({dashboards:x,onImport:I,onRemove:E}){function y(g){return g.revision!==g.importedRevision?"Update":"Re-import"}return o.createElement("table",{className:"filter-table"},o.createElement("tbody",null,x.map((g,W)=>o.createElement("tr",{key:`${g.dashboardId}-${W}`},o.createElement("td",{className:"width-1"},o.createElement(e.J,{name:"apps"})),o.createElement("td",null,g.imported?o.createElement("a",{href:g.importedUrl},g.title):o.createElement("span",null,g.title)),o.createElement("td",{style:{textAlign:"right"}},g.imported?o.createElement(S.zx,{variant:"secondary",size:"sm",onClick:()=>I(g,!0)},y(g)):o.createElement(S.zx,{variant:"secondary",size:"sm",onClick:()=>I(g,!1)},"Import"),g.imported&&o.createElement(S.zx,{"aria-label":"Delete dashboard",icon:"trash-alt",variant:"destructive",size:"sm",onClick:()=>E(g)}))))))}const v=m},57636:(_,V,a)=>{a.d(V,{Nq:()=>$,Do:()=>R,SX:()=>m,IF:()=>O,oZ:()=>y,xh:()=>z});var o=a(85960),e=a(73667),S=a(67192);function m({error:h}){const M=v(h);return o.createElement(S.C,{icon:"exclamation-triangle",text:"Disabled",color:"red",tooltip:M})}function v(h){switch(h){case e.w2.modifiedSignature:return"Plugin disabled due to modified content";case e.w2.invalidSignature:return"Plugin disabled due to invalid plugin signature";case e.w2.missingSignature:return"Plugin disabled due to missing plugin signature";case null:case void 0:return"Plugin disabled";default:return`Plugin disabled due to unknown error${h?`: ${h}`:""}`}}var x=a(47257),I=a(66681);const E=h=>(0,I.css)`
  background: ${h.colors.background.primary};
  border-color: ${h.colors.border.strong};
  color: ${h.colors.text.secondary};
`;function y(){const h=(0,x.wW)(E);return o.createElement(S.C,{text:"Installed",color:"orange",className:h})}var g=a(11855),W=a(74042),F=a(15343),w=a(29165);function O({plugin:h}){const M=(0,x.wW)(E),k=c=>{c.preventDefault(),window.open(`https://grafana.com/grafana/plugins/${h.id}?utm_source=grafana_catalog_learn_more`,"_blank","noopener,noreferrer")};return(0,g.v)("enterprise.plugins")?o.createElement(S.C,{text:"Enterprise",color:"blue"}):o.createElement(W.Lh,null,o.createElement(F.o,{status:h.signature}),o.createElement(S.C,{icon:"lock","aria-label":"lock icon",text:"Enterprise",color:"blue",className:M}),o.createElement(w.zx,{size:"sm",fill:"text",icon:"external-link-alt",onClick:k},"Learn more"))}function z({plugin:h}){const M=(0,x.wW)(b);return o.createElement("p",{className:M.hasUpdate},"Update available!")}const b=h=>({hasUpdate:(0,I.css)`
      color: ${h.colors.text.secondary};
      font-size: ${h.typography.bodySmall.fontSize};
      margin-bottom: 0;
    `});function $(){return o.createElement(S.C,{icon:"exclamation-triangle",text:"Angular",color:"orange",tooltip:"This plugin uses deprecated functionality, support for which is being removed."})}function R(){return o.createElement(S.C,{icon:"exclamation-triangle",text:"Deprecated",color:"orange",tooltip:"This plugin is deprecated and no longer receives updates."})}},17217:(_,V,a)=>{a.d(V,{Q:()=>gt});var o=a(66681),e=a(85960),S=a(30694),m=a(90857),v=a(47257),x=a(10305),I=a(49199),E=a(74042),y=a(20989),g=a(95162),W=a(91032),F=a(79468);const w=({text:t="Loading..."})=>e.createElement("div",{className:"page-loader-wrapper"},e.createElement(F.u,{text:t}));var O=a(77786),z=a(12537),b=a(67187);const $=({versions:t=[],installedVersion:s})=>{const n=(0,v.wW)(R),r=(0,b.RU)(t);return t.length===0?e.createElement("p",null,"No version history was found."):e.createElement("table",{className:n.table},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Version"),e.createElement("th",null,"Last updated"),e.createElement("th",null,"Grafana Dependency"))),e.createElement("tbody",null,t.map(l=>{const d=s===l.version;return e.createElement("tr",{key:l.version},d?e.createElement("td",{className:n.currentVersion},l.version," (installed version)"):l.version===r?.version?e.createElement("td",null,l.version," (latest compatible version)"):e.createElement("td",null,l.version),e.createElement("td",{className:d?n.currentVersion:""},(0,z.E8)(l.createdAt)),e.createElement("td",{className:d?n.currentVersion:""},l.grafanaDependency||"N/A"))})))},R=t=>({container:(0,o.css)`
    padding: ${t.spacing(2,4,3)};
  `,table:(0,o.css)`
    table-layout: fixed;
    width: 100%;
    td,
    th {
      padding: ${t.spacing()} 0;
    }
    th {
      font-size: ${t.typography.h5.fontSize};
    }
  `,currentVersion:(0,o.css)`
    font-weight: ${t.typography.fontWeightBold};
  `});var h=a(81445),M=a(84482);const k=t=>(0,h.Z)(async()=>t&&t.isFullyInstalled&&!t.isDisabled?(0,M.O)(t.id):null,[t?.id,t?.isInstalled,t?.isDisabled]);var c=a(87809),j=a(56375),ne=a(20440),J=a(85445),ae=a(92289),C=a(29165);class se extends e.PureComponent{constructor(s){super(s),this.element=null,this.preUpdateHook=()=>Promise.resolve(),this.postUpdateHook=()=>Promise.resolve(),this.update=()=>{const n=this.model.id;this.preUpdateHook().then(()=>{const r=(0,j.extend)({enabled:this.model.enabled,pinned:this.model.pinned,jsonData:this.model.jsonData,secureJsonData:this.model.secureJsonData},{});return(0,J.i)().post(`/api/plugins/${n}/settings`,r)}).then(this.postUpdateHook).then(r=>{window.location.href=window.location.href})},this.setPreUpdateHook=n=>{this.preUpdateHook=n},this.setPostUpdateHook=n=>{this.postUpdateHook=n},this.importDashboards=()=>((0,ne.d)("AppConfig","importDashboards()"),Promise.resolve()),this.enable=()=>{this.model.enabled=!0,this.model.pinned=!0,this.update()},this.disable=()=>{this.model.enabled=!1,this.model.pinned=!1,this.update()},this.state={angularCtrl:null,refresh:0}}componentDidMount(){setTimeout(()=>{this.setState({refresh:this.state.refresh+1})},5)}componentDidUpdate(s){if(!this.element||this.state.angularCtrl)return;this.model=(0,j.cloneDeep)(this.props.app.meta);const n=(0,ae.w)(),r='<plugin-component type="app-config-ctrl"></plugin-component>',l={ctrl:this,isAppConfigCtrl:!0},d=n.load(this.element,l,r);this.setState({angularCtrl:d})}render(){const s=this.model,n=(0,o.css)({marginRight:"8px"});return e.createElement("div",null,e.createElement("div",{ref:r=>this.element=r}),e.createElement("br",null),e.createElement("br",null),s&&e.createElement("div",{className:"gf-form"},!s.enabled&&e.createElement(C.zx,{variant:"primary",onClick:this.enable,className:n},"Enable"),s.enabled&&e.createElement(C.zx,{variant:"primary",onClick:this.update,className:n},"Update"),s.enabled&&e.createElement(C.zx,{variant:"destructive",onClick:this.disable,className:n},"Disable")))}}var K=a(47475),G=a(49683),re=a(64611);class le extends e.PureComponent{constructor(s){super(s),this.importAll=()=>{this.importNext(0)},this.importNext=n=>{const{dashboards:r}=this.state;return this.import(r[n],!0).then(()=>n+1<r.length?new Promise(l=>{setTimeout(()=>{this.importNext(n+1).then(()=>{l()})},500)}):Promise.resolve())},this.import=(n,r)=>{const{plugin:l,datasource:d}=this.props,p={pluginId:l.id,path:n.path,overwrite:r,inputs:d?[{name:"*",type:"datasource",pluginId:d.meta.id,value:d.name}]:[]};return(0,J.i)().post("/api/dashboards/import",p).then(P=>{G.h$.emit(K.SI.alertSuccess,["Dashboard Imported",n.title]),(0,j.extend)(n,P),this.setState({dashboards:[...this.state.dashboards]})})},this.remove=n=>{(0,J.i)().delete("/api/dashboards/uid/"+n.uid).then(()=>{n.imported=!1,this.setState({dashboards:[...this.state.dashboards]})})},this.state={loading:!0,dashboards:[]}}async componentDidMount(){const s=this.props.plugin.id;(0,J.i)().get(`/api/plugins/${s}/dashboards`).then(n=>{this.setState({dashboards:n,loading:!1})})}render(){const{loading:s,dashboards:n}=this.state;return s?e.createElement("div",null,"loading..."):!n||!n.length?e.createElement("div",null,"No dashboards are included with this plugin"):e.createElement("div",{className:"gf-form-group"},e.createElement(re.Z,{dashboards:n,onImport:this.import,onRemove:this.remove}))}}var X=a(53565),ie=a(21964),oe=a(75682),ce=a(64409),ue=a(57544),i=a(30824);function u({plugin:t}){const s=(0,v.wW)(A),n=(0,e.useMemo)(()=>({query:"*",panel_type:t.id,kind:["panel"]}),[t]),r=(0,h.Z)(()=>(0,i.getGrafanaSearcher)().search(n),[n]),l=r.value;return l?.totalRows?e.createElement("div",{className:s.wrap},e.createElement("div",{className:s.info},t.name," is used ",e.createElement("b",null,l.totalRows)," times."),e.createElement(X.Z,null,({width:d,height:p})=>e.createElement(ue.Q,{response:l,width:d,height:p,clearSelection:()=>{},keyboardEvents:(0,ie.of)(),onTagSelected:()=>{}}))):r.loading?e.createElement(oe.$,null):m.config.featureToggles.panelTitleSearch?e.createElement(ce.Z,{title:`${t.name} is not used in any dashboards yet`,buttonIcon:"plus",buttonTitle:"Create Dashboard",buttonLink:`dashboard/new?panelType=${t.id}&editPanel=1`}):e.createElement(I.b,{title:"Missing feature toggle: panelTitleSearch"},"Plugin usage requires the new search index to find usage across dashboards")}const A=t=>({wrap:(0,o.css)`
      width: 100%;
      height: 100%;
    `,info:(0,o.css)`
      padding-bottom: 30px;
    `});function N({plugin:t,queryParams:s,pageId:n}){const r=(0,v.wW)(H),{value:l}=k(t);if(n===c.tu.OVERVIEW)return e.createElement("div",{className:(0,o.cx)(r.readme,r.container),dangerouslySetInnerHTML:{__html:t.details?.readme??"No plugin help or readme markdown file was found"}});if(n===c.tu.VERSIONS)return e.createElement("div",{className:r.container},e.createElement($,{versions:t.details?.versions,installedVersion:t.installedVersion}));if(n===c.tu.CONFIG&&l?.angularConfigCtrl)return e.createElement("div",{className:r.container},e.createElement(se,{app:l}));if(l?.configPages){for(const d of l.configPages)if(n===d.id)return e.createElement("div",{className:r.container},e.createElement(O.b,{meta:l.meta},e.createElement(d.body,{plugin:l,query:s})))}return n===c.tu.USAGE&&l?e.createElement("div",{className:r.container},e.createElement(u,{plugin:l?.meta})):n===c.tu.DASHBOARDS&&l?e.createElement("div",{className:r.container},e.createElement(le,{plugin:l?.meta})):e.createElement("div",{className:r.container},e.createElement("p",null,"Page not found."))}const H=t=>({container:(0,o.css)``,readme:(0,o.css)`
    & img {
      max-width: 100%;
    }

    h1,
    h2,
    h3 {
      margin-top: ${t.spacing(3)};
      margin-bottom: ${t.spacing(2)};
    }

    *:first-child {
      margin-top: 0;
    }

    li {
      margin-left: ${t.spacing(2)};
      & > p {
        margin: ${t.spacing()} 0;
      }
    }

    a {
      color: ${t.colors.text.link};

      &:hover {
        color: ${t.colors.text.link};
        text-decoration: underline;
      }
    }

    table {
      table-layout: fixed;
      width: 100%;

      td,
      th {
        overflow-x: auto;
        padding: ${t.spacing(.5)} ${t.spacing(1)};
      }

      table,
      th,
      td {
        border: 1px solid ${t.colors.border.medium};
        border-collapse: collapse;
      }
    }
  `});var f=a(73667),ee=a(92369);function Ne({className:t,plugin:s}){return s.isDisabled?e.createElement(I.b,{severity:"error",title:"Plugin disabled",className:t,"aria-label":ee.wl.pages.PluginPage.disabledInfo},Ce(s.error),e.createElement("p",null,"Please contact your server administrator to get this resolved."),e.createElement("a",{href:"https://grafana.com/docs/grafana/latest/administration/cli/#plugins-commands",className:"external-link",target:"_blank",rel:"noreferrer"},"Read more about managing plugins")):null}function Ce(t){switch(t){case f.w2.modifiedSignature:return e.createElement("p",null,"Grafana Labs checks each plugin to verify that it has a valid digital signature. While doing this, we discovered that the content of this plugin does not match its signature. We can not guarantee the trustworthy of this plugin and have therefore disabled it. We recommend you to reinstall the plugin to make sure you are running a verified version of this plugin.");case f.w2.invalidSignature:return e.createElement("p",null,"Grafana Labs checks each plugin to verify that it has a valid digital signature. While doing this, we discovered that it was invalid. We can not guarantee the trustworthy of this plugin and have therefore disabled it. We recommend you to reinstall the plugin to make sure you are running a verified version of this plugin.");case f.w2.missingSignature:return e.createElement("p",null,"Grafana Labs checks each plugin to verify that it has a valid digital signature. While doing this, we discovered that there is no signature for this plugin. We can not guarantee the trustworthy of this plugin and have therefore disabled it. We recommend you to reinstall the plugin to make sure you are running a verified version of this plugin.");default:return e.createElement("p",null,"We failed to run this plugin due to an unkown reason and have therefore disabled it. We recommend you to reinstall the plugin to make sure you are running a working version of this plugin.")}}function Ae({className:t,plugin:s}){const n=s.signature===f.Xy.valid,r=s.signature===f.Xy.internal,l=s.isDisabled&&Te(s.error);return n||r||l?null:e.createElement(I.b,{severity:"warning",title:"Invalid plugin signature","aria-label":ee.wl.pages.PluginPage.signatureInfo,className:t},e.createElement("p",null,"Grafana Labs checks each plugin to verify that it has a valid digital signature. Plugin signature verification is part of our security measures to ensure plugins are safe and trustworthy. Grafana Labs can\u2019t guarantee the integrity of this unsigned plugin. Ask the plugin author to request it to be signed."),e.createElement("a",{href:"https://grafana.com/docs/grafana/latest/plugins/plugin-signatures/",className:"external-link",target:"_blank",rel:"noreferrer"},"Read more about plugins signing."))}function Te(t){switch(t){case f.w2.invalidSignature:case f.w2.missingSignature:case f.w2.modifiedSignature:return!0;default:return!1}}const Le=(t,s)=>{const{loading:n,error:r,value:l}=k(t),{pathname:d}=(0,S.TH)(),p=Ue(t,l),P=!!t?.isPublished,D=s||p,B=(0,e.useMemo)(()=>{const q=t&&G.Vt.hasPermissionInMetadata(g.AccessControlAction.PluginsWrite,t),L=[];if(P&&L.push({text:c.xc.VERSIONS,id:c.tu.VERSIONS,icon:"history",url:`${d}?page=${c.tu.VERSIONS}`,active:c.tu.VERSIONS===D}),!l||(m.config.featureToggles.panelTitleSearch&&l.meta.type===f.zV.panel&&L.push({text:c.xc.USAGE,icon:"list-ul",id:c.tu.USAGE,url:`${d}?page=${c.tu.USAGE}`,active:c.tu.USAGE===D}),!q))return L;if(l.meta.type===f.zV.app){if(l.angularConfigCtrl&&L.push({text:"Config",icon:"cog",id:c.tu.CONFIG,url:`${d}?page=${c.tu.CONFIG}`,active:c.tu.CONFIG===D}),l.configPages)for(const U of l.configPages)L.push({text:U.title,icon:U.icon,id:U.id,url:`${d}?page=${U.id}`,active:U.id===D});l.meta.includes?.find(U=>U.type===f.$_.dashboard)&&L.push({text:"Dashboards",icon:"apps",id:c.tu.DASHBOARDS,url:`${d}?page=${c.tu.DASHBOARDS}`,active:c.tu.DASHBOARDS===D})}return L},[t,l,d,P,D]),Z={text:t?.name??"",img:t?.info.logos.small,children:[{text:c.xc.OVERVIEW,icon:"file-alt",id:c.tu.OVERVIEW,url:`${d}?page=${c.tu.OVERVIEW}`,active:c.tu.OVERVIEW===D},...B]};return{error:r,loading:n,navModel:Z,activePageId:D}};function Ue(t,s){return!t||!s||!G.Vt.hasPermissionInMetadata(g.AccessControlAction.PluginsWrite,t)||s.meta.type!==f.zV.app?c.tu.OVERVIEW:s.angularConfigCtrl?c.tu.CONFIG:s.configPages?.length?s.configPages[0].id:c.tu.OVERVIEW}var Y=a(97666),me=a(67954),$e=a(3453);function Re({plugin:t}){const{value:s}=k(t);if(!s||!G.Vt.hasPermissionInMetadata(g.AccessControlAction.PluginsWrite,t))return null;const{enabled:n,jsonData:r}=s?.meta,l=()=>fe(t.id,{enabled:!0,pinned:!0,jsonData:r}),d=()=>{fe(t.id,{enabled:!1,pinned:!1,jsonData:r})};return e.createElement(e.Fragment,null,!n&&e.createElement(C.zx,{variant:"primary",onClick:l},"Enable"),n&&e.createElement(C.zx,{variant:"destructive",onClick:d},"Disable"))}const fe=async(t,s)=>{try{await(0,$e.P6)(t,s),window.location.reload()}catch(n){console.error("Error while updating the plugin",n)}};var pe=a(80150),he=a(41879);function St(){return config.bootData.user.isGrafanaAdmin}function bt(){return contextSrv.hasRole("Admin")}function Ve(){return he.contextSrv.hasPermission(g.AccessControlAction.DataSourcesCreate)&&he.contextSrv.hasPermission(g.AccessControlAction.DataSourcesWrite)}function We({plugin:t}){const s=(0,g.useDispatch)(),n=(0,pe.d7)(),r=(0,e.useCallback)(()=>{const l={name:t.name,id:t.id};s((0,pe.J_)(l,n.Edit))},[s,t,n]);return Ve()?e.createElement(C.zx,{variant:"primary",onClick:r},"Add new data source"):null}function we({plugin:t}){if(!t.isInstalled||t.isDisabled)return null;switch(t.type){case f.zV.datasource:return e.createElement(We,{plugin:t});case f.zV.app:return e.createElement(Re,{plugin:t});default:return null}}var Me=a(11855),T=a(95991);const Be=({plugin:t,pluginStatus:s,latestCompatibleVersion:n})=>{const r=(0,v.wW)(Fe),l=m.config.pluginAdminExternalManageEnabled,d=G.Vt.hasPermission(g.AccessControlAction.PluginsInstall),p=(0,T.y9)(),P=!!n;return t.type===f.zV.renderer?e.createElement("div",{className:r.message},"Renderer plugins cannot be managed by the Plugin Catalog."):t.type===f.zV.secretsmanager?e.createElement("div",{className:r.message},"Secrets manager plugins cannot be managed by the Plugin Catalog."):t.isEnterprise&&!(0,Me.v)("enterprise.plugins")?e.createElement(E.Lh,{height:"auto",align:"center"},e.createElement("span",{className:r.message},"No valid Grafana Enterprise license detected."),e.createElement(C.Qj,{href:`${(0,b.Uj)(t.id)}?utm_source=grafana_catalog_learn_more`,target:"_blank",rel:"noopener noreferrer",size:"sm",fill:"text",icon:"external-link-alt"},"Learn more")):t.isDev?e.createElement("div",{className:r.message},"This is a development build of the plugin and can't be uninstalled."):!d&&!l?e.createElement("div",{className:r.message},Oe(s)):t.isPublished?P?p?null:e.createElement("div",{className:r.message},"The install controls have been disabled because the Grafana server cannot access grafana.com."):e.createElement("div",{className:r.message},e.createElement(Y.J,{name:"exclamation-triangle"}),"\xA0This plugin doesn't support your version of Grafana."):e.createElement("div",{className:r.message},e.createElement(Y.J,{name:"exclamation-triangle"})," This plugin is not published to"," ",e.createElement("a",{href:"https://www.grafana.com/plugins",target:"__blank",rel:"noreferrer"},"grafana.com/plugins")," ","and can't be managed via the catalog.")},Fe=t=>({message:(0,o.css)`
      color: ${t.colors.text.secondary};
    `});function Oe(t){switch(t){case c.vF.INSTALL:case c.vF.REINSTALL:return"You do not have permission to install this plugin.";case c.vF.UNINSTALL:return"You do not have permission to uninstall this plugin.";case c.vF.UPDATE:return"You do not have permission to update this plugin.";default:return"You do not have permission to manage this plugin."}}var ze=a(91),ke=a(77980),de=a(60484),Ge=a(763),He=a(62293),Ee=a(43183);const Ze=t=>{(0,Ee.ff)("grafana_plugin_install_clicked",t)},Qe=t=>{(0,Ee.ff)("grafana_plugin_uninstall_clicked",t)};function je({plugin:t,pluginStatus:s,latestCompatibleVersion:n,hasInstallWarning:r,setNeedReload:l}){const d=(0,g.useDispatch)(),[p]=(0,Ge.K)(),P=(0,S.TH)(),{isInstalling:D,error:B}=(0,T.IS)(),{isUninstalling:Z,error:q}=(0,T.wq)(),L=(0,T.x3)(),U=(0,T.S1)(),Q=(0,T.kH)(),pt=(0,T.or)(),[ht,Se]=(0,e.useState)(!1),Et=()=>Se(!0),be=()=>Se(!1),De=Z?"Uninstalling":"Uninstall",xe={plugin_id:t.id,plugin_type:t.type,path:P.pathname};(0,e.useEffect)(()=>()=>{Q()},[]);const vt=async()=>{Ze(xe);const te=await L(t.id,n?.version);if(!B&&!("error"in te)){let ge=`Installed ${t.name}`;m.config.pluginAdminExternalManageEnabled&&me.default.featureToggles.managedPluginsInstall&&(ge="Install requested, this may take a few minutes."),de.Z.emit(K.SI.alertSuccess,[ge]),t.type==="app"&&l?.(!0),await pt(t.id)}},Ie=async()=>{if(be(),Qe(xe),await U(t.id),!q){const te=p.page;te!==c.tu.OVERVIEW&&te!==c.tu.VERSIONS&&ze.E1.replace(`${P.pathname}?page=${c.tu.OVERVIEW}`),de.Z.emit(K.SI.alertSuccess,[`Uninstalled ${t.name}`]),t.type==="app"&&(d((0,He.Lk)({pluginID:t.id})),l?.(!1))}},yt=async()=>{await L(t.id,n?.version,!0),B||de.Z.emit(K.SI.alertSuccess,[`Updated ${t.name}`])};if(s===c.vF.UNINSTALL)return e.createElement(e.Fragment,null,e.createElement(ke.s,{isOpen:ht,title:`Uninstall ${t.name}`,body:"Are you sure you want to uninstall this plugin?",confirmText:"Confirm",icon:"exclamation-triangle",onConfirm:Ie,onDismiss:be}),e.createElement(E.Lh,{align:"flex-start",width:"auto",height:"auto"},e.createElement(C.zx,{variant:"destructive",disabled:Z,onClick:Et},De)));if(!t.isPublished||r)return null;if(s===c.vF.UPDATE)return e.createElement(E.Lh,{align:"flex-start",width:"auto",height:"auto"},e.createElement(C.zx,{disabled:D,onClick:yt},D?"Updating":"Update"),e.createElement(C.zx,{variant:"destructive",disabled:Z,onClick:Ie},De));const Pt=D||B||!m.config.angularSupportEnabled&&t.angularDetected;return e.createElement(C.zx,{disabled:Pt,onClick:vt},D?"Installing":"Install")}function Je({pluginId:t,pluginStatus:s,angularDetected:n}){const r=`${(0,b.Uj)(t)}/?tab=installation`;return s===c.vF.UPDATE?e.createElement(E.Lh,{height:"auto"},e.createElement(C.Qj,{href:r,target:"_blank",rel:"noopener noreferrer"},"Update via grafana.com"),e.createElement(C.Qj,{variant:"destructive",href:r,target:"_blank",rel:"noopener noreferrer"},"Uninstall via grafana.com")):s===c.vF.UNINSTALL?e.createElement(C.Qj,{variant:"destructive",href:r,target:"_blank",rel:"noopener noreferrer"},"Uninstall via grafana.com"):e.createElement(C.Qj,{disabled:!m.config.angularSupportEnabled&&n,href:r,target:"_blank",rel:"noopener noreferrer"},"Install via grafana.com")}const Ke=({plugin:t})=>{const s=(0,v.wW)(Ye),n=(0,T.y9)(),r=(0,b.RU)(t?.details?.versions),[l,d]=(0,e.useState)(!1);if(!t)return null;const p=(0,b.HT)(t,n,r),P=m.config.pluginAdminExternalManageEnabled,D=t.isInstalled?t.hasUpdate?c.vF.UPDATE:c.vF.UNINSTALL:c.vF.INSTALL,B=t.isCore||t.isDisabled||!(0,b.fG)();return e.createElement(E.wc,null,e.createElement(E.Lh,null,!B&&e.createElement(e.Fragment,null,P&&!p&&!me.default.featureToggles.managedPluginsInstall?e.createElement(Je,{pluginId:t.id,pluginStatus:D,angularDetected:t.angularDetected}):e.createElement(je,{plugin:t,latestCompatibleVersion:r,pluginStatus:D,setNeedReload:d,hasInstallWarning:p})),e.createElement(we,{plugin:t})),l&&e.createElement(E.Lh,null,e.createElement(Y.J,{name:"exclamation-triangle"}),e.createElement("span",{className:s.message},"Refresh the page to see the changes")))},Ye=t=>({message:(0,o.css)`
      color: ${t.colors.text.secondary};
    `}),Xe=({plugin:t})=>{const s=(0,T.y9)(),n=(0,v.wW)(qe),{error:r}=(0,T.IS)();if(!t)return null;const l=(0,b.RU)(t.details?.versions),d=t.isInstalled?t.hasUpdate?c.vF.UPDATE:c.vF.UNINSTALL:c.vF.INSTALL;return e.createElement("div",{className:n.subtitle},r&&e.createElement(I.b,{title:"message"in r?r.message:""},typeof r=="string"?r:r.error),t?.description&&e.createElement("div",null,t?.description),t?.details?.links&&t.details.links.length>0&&e.createElement("span",null,t.details.links.map((p,P)=>e.createElement(e.Fragment,{key:P},P>0&&" | ",e.createElement("a",{href:p.url,className:"external-link"},p.name)))),(0,b.HT)(t,s,l)&&e.createElement(Be,{plugin:t,pluginStatus:d,latestCompatibleVersion:l}))},qe=t=>({subtitle:(0,o.css)`
      display: flex;
      flex-direction: column;
      gap: ${t.spacing(1)};
    `});var _e=a(57636),et=a(13086);function tt({plugin:t,grafanaDependency:s}){const n=(0,v.wW)(nt),r=t.details?.pluginDependencies;return!s&&(!r||!r.length)?null:e.createElement(et.K,{gap:1},!!s&&e.createElement("div",{className:n.depBadge},e.createElement(Y.J,{name:"grafana",className:n.icon}),"Grafana ",s),r&&r.length>0&&e.createElement("div",null,r.map(d=>e.createElement("span",{className:n.depBadge,key:d.name},e.createElement(Y.J,{name:c.Co[d.type],className:n.icon}),d.name," ",d.version))))}const nt=t=>({dependencyTitle:(0,o.css)`
      margin-right: ${t.spacing(.5)};

      &::after {
        content: '';
        padding: 0;
      }
    `,depBadge:(0,o.css)({display:"flex",alignItems:"flex-start"}),icon:(0,o.css)`
      color: ${t.colors.text.secondary};
      margin-right: ${t.spacing(.5)};
    `});var at=a(15343),st=a(67192);const ve={[f._Z.grafana]:"grafana",[f._Z.commercial]:"shield",[f._Z.community]:"shield",DEFAULT:"shield-exclamation"};function rt({signatureType:t,signatureOrg:s=""}){const n=(0,v.wW)(Pe);if(!t&&!s)return null;const r=t===f._Z.grafana?"Grafana Labs":(0,j.capitalize)(t),l=ve[t||""]||ve.DEFAULT;return e.createElement(e.Fragment,null,e.createElement(ye,null,e.createElement("div",{className:n.detailsWrapper},e.createElement("strong",{className:n.strong},"Level:\xA0"),e.createElement(Y.J,{size:"xs",name:l}),"\xA0",r)),e.createElement(ye,null,e.createElement("strong",{className:n.strong},"Signed by:")," ",s))}const ye=({children:t})=>{const s=(0,v.wW)(Pe);return e.createElement(st.C,{color:"green",className:s.badge,text:t})},Pe=t=>({badge:(0,o.css)`
    background-color: ${t.colors.background.canvas};
    border-color: ${t.colors.border.strong};
    color: ${t.colors.text.secondary};
    white-space: nowrap;
  `,detailsWrapper:(0,o.css)`
    align-items: center;
    display: flex;
  `,strong:(0,o.css)`
    color: ${t.colors.text.primary};
  `,icon:(0,o.css)`
    margin-right: ${t.spacing(.5)};
  `});function lt({plugin:t}){const s=(0,v.wW)(it),n=t.signature===f.Xy.valid;return e.createElement("div",{className:s.container},e.createElement("a",{href:"https://grafana.com/docs/grafana/latest/plugins/plugin-signatures/",target:"_blank",rel:"noreferrer",className:s.link},e.createElement(at.o,{status:t.signature})),n&&e.createElement(rt,{signatureType:t.signatureType,signatureOrg:t.signatureOrg}))}const it=t=>({container:(0,o.css)`
      display: flex;
      flex-wrap: wrap;
      gap: ${t.spacing(.5)};
    `,link:(0,o.css)`
      display: inline-flex;
      align-items: center;
    `}),ot=t=>{const s=[];if(!t)return s;const n=(0,b.RU)(t.details?.versions),r=!t.isInstalled;let l=t.installedVersion;!l&&r&&n?.version&&(l=n?.version),l&&s.push({label:"Version",value:l}),t.orgName&&s.push({label:"From",value:t.orgName}),(!t.signatureType||t.signatureType===f._Z.community||t.signatureType===f._Z.commercial)&&t.downloads>0&&s.push({label:"Downloads",value:new Intl.NumberFormat().format(t.downloads)});const p=t.details?.pluginDependencies;let P=t.details?.grafanaDependency;return r&&n?.grafanaDependency&&(P=n?.grafanaDependency),!P&&(!p||!p.length)||s.push({label:"Dependencies",value:e.createElement(tt,{plugin:t,grafanaDependency:P})}),t.isDisabled&&s.push({label:"Status",value:e.createElement(_e.SX,{error:t.error})}),s.push({label:"Signature",value:e.createElement(lt,{plugin:t})}),s},Dt=t=>({subtitle:css`
      display: flex;
      flex-direction: column;
      gap: ${t.spacing(1)};
    `}),ct=t=>{const s=ot(t);return{actions:e.createElement(Ke,{plugin:t}),info:s,subtitle:e.createElement(Xe,{plugin:t})}};var ut=a(55583);function dt(t){const{className:s,plugin:n}=t,[r,l]=(0,e.useState)(!1);return n.isDeprecated&&!r?e.createElement(I.b,{severity:"warning",title:"Deprecated",className:s,onRemove:()=>l(!0)},e.createElement("p",null,"This ",n.type," plugin is"," ",e.createElement("a",{className:"external-link",href:"https://grafana.com/legal/plugin-deprecation/",rel:"noreferrer",target:"_blank"},"deprecated")," ","and has been removed from the catalog."),n.details?.statusContext&&e.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:(0,ut.a)(n.details.statusContext)}})):null}function gt({pluginId:t,navId:s="plugins",notFoundComponent:n=e.createElement(ft,null),notFoundNavModel:r={text:"Unknown plugin",subTitle:"The requested ID does not belong to any plugin",active:!0}}){const l=(0,S.TH)(),d=new URLSearchParams(l.search),p=(0,T.bJ)(t),{navModel:P,activePageId:D}=Le(p,d.get("page")),{actions:B,info:Z,subtitle:q}=ct(p),{isLoading:L}=(0,T.ZV)(),{isLoading:U}=(0,T.bt)(),Q=(0,v.wW)(mt);return L||U?e.createElement(y.T,{navId:s,pageNav:{text:"",active:!0}},e.createElement(w,null)):p?e.createElement(y.T,{navId:s,pageNav:P,actions:B,subTitle:q,info:Z},e.createElement(y.T.Contents,null,e.createElement(x.I,{className:Q.tabContent},p.angularDetected&&e.createElement(W.Y,{className:Q.alert,angularSupportEnabled:m.config?.angularSupportEnabled,pluginId:p.id,pluginType:p.type,showPluginDetailsLink:!1,interactionElementId:"plugin-details-page"}),e.createElement(Ae,{plugin:p,className:Q.alert}),e.createElement(Ne,{plugin:p,className:Q.alert}),e.createElement(dt,{plugin:p,className:Q.alert}),e.createElement(N,{queryParams:Object.fromEntries(d),plugin:p,pageId:D})))):e.createElement(y.T,{navId:s,pageNav:r},n)}const mt=t=>({alert:(0,o.css)`
      margin-bottom: ${t.spacing(2)};
    `,subtitle:(0,o.css)`
      display: flex;
      flex-direction: column;
      gap: ${t.spacing(1)};
    `,tabContent:(0,o.css)`
      overflow: auto;
      height: 100%;
      padding-left: 5px;
    `});function ft(){return e.createElement(E.Ar,{justify:"center",align:"center"},e.createElement(I.b,{severity:g.AppNotificationSeverity.Warning,title:"Plugin not found"},"That plugin cannot be found. Please check the url is correct or ",e.createElement("br",null),"go to the ",e.createElement("a",{href:"/plugins"},"plugin catalog"),"."))}},95991:(_,V,a)=>{a.d(V,{iY:()=>ue,or:()=>ce,bt:()=>G,ZV:()=>K,Pj:()=>M,UQ:()=>j,bJ:()=>k,x3:()=>ne,IS:()=>re,y9:()=>C,S1:()=>ae,wq:()=>le,kH:()=>J});var o=a(85960),e=a(95162),S=a(67187),m=a(69396),v=a(14746),x=a(8111),I=a(49531),E=a(87809);const y=i=>i.plugins,g=(0,x.P1)(y,({items:i})=>i),W=(0,x.P1)(y,({settings:i})=>i.displayMode),{selectAll:F,selectById:w}=v.CD.getSelectors(g),O=i=>(0,x.P1)(F,u=>{const A=i.keyword?(0,I.x6)(i.keyword.toLowerCase()):"";return u.filter(N=>{const H=[N.name,N.orgName].filter(Boolean).map(f=>f.toLowerCase());return!(A&&!H.some(f=>f.includes(A))||i.type&&N.type!==i.type||i.isInstalled!==void 0&&N.isInstalled!==i.isInstalled||i.isEnterprise!==void 0&&N.isEnterprise!==i.isEnterprise)})}),z=i=>(0,x.P1)(F,u=>{const A=[];for(const N of u)N.error&&(!i||N.type===i)&&A.push({pluginId:N.id,errorCode:N.error,pluginType:N.type});return A}),b=i=>(0,x.P1)(y,({requests:u={}})=>u[i]),$=i=>(0,x.P1)(b(i),u=>u?.status===E.eE.Pending),R=i=>(0,x.P1)(b(i),u=>u?.status===E.eE.Rejected?u?.error:null),h=i=>(0,x.P1)(b(i),u=>u===void 0),M=(i,u=S.Nh.nameAsc)=>{X();const A=(0,o.useMemo)(()=>O(i),[i]),N=(0,e.useSelector)(A),{isLoading:H,error:f}=se(),ee=(0,S.AA)(N,u);return{isLoading:H,error:f,plugins:ee}},k=i=>(X(),oe(i),(0,e.useSelector)(u=>w(u,i))),c=i=>(ie(),useSelector(u=>selectById(u,i))),j=i=>(X(),(0,e.useSelector)(z(i))),ne=()=>{const i=(0,e.useDispatch)();return(u,A,N)=>i((0,m.N9)({id:u,version:A,isUpdating:N}))},J=()=>{const i=(0,e.useDispatch)();return()=>i((0,m.bQ)())},ae=()=>{const i=(0,e.useDispatch)();return u=>i((0,m.Tz)(u))},C=()=>(0,e.useSelector)(R(m.tQ.typePrefix))===null,se=()=>{const i=(0,e.useSelector)($("plugins/fetchLocal")),u=(0,e.useSelector)(R("plugins/fetchLocal"));return{isLoading:i,error:u}},K=()=>{const i=(0,e.useSelector)($(m.Qd.typePrefix)),u=(0,e.useSelector)(R(m.Qd.typePrefix));return{isLoading:i,error:u}},G=()=>{const i=(0,e.useSelector)($(m.DD.typePrefix)),u=(0,e.useSelector)(R(m.DD.typePrefix));return{isLoading:i,error:u}},re=()=>{const i=(0,e.useSelector)($(m.N9.typePrefix)),u=(0,e.useSelector)(R(m.N9.typePrefix));return{isInstalling:i,error:u}},le=()=>{const i=(0,e.useSelector)($(m.Tz.typePrefix)),u=(0,e.useSelector)(R(m.Tz.typePrefix));return{isUninstalling:i,error:u}},X=()=>{const i=(0,e.useDispatch)(),u=(0,e.useSelector)(h(m.Qd.typePrefix));(0,o.useEffect)(()=>{u&&i((0,m.Qd)())},[])},ie=()=>{const i=useDispatch(),u=useSelector(selectIsRequestNotFetched(fetchAllLocal.typePrefix));useEffect(()=>{u&&i(fetchAllLocal())},[])},oe=i=>{const u=(0,e.useDispatch)(),A=(0,e.useSelector)(f=>w(f,i)),H=!(0,e.useSelector)($(m.DD.typePrefix))&&A&&!A.details;(0,o.useEffect)(()=>{H&&u((0,m.DD)(i))},[A])},ce=()=>{const i=(0,e.useDispatch)();return u=>i((0,m.DD)(u))},ue=()=>{const i=(0,e.useDispatch)();return{displayMode:(0,e.useSelector)(W),setDisplayMode:A=>i((0,v.UC)(A))}}},91032:(_,V,a)=>{a.d(V,{Y:()=>x});var o=a(85960),e=a(73667),S=a(43183),m=a(49199);function v(I,E){let y;switch(I){case e.zV.app:y="app plugin";break;case e.zV.panel:y="panel plugin";break;case e.zV.datasource:y="data source plugin";break;default:y="plugin"}let g=`This ${y} uses a deprecated, legacy platform based on AngularJS and `;return E===void 0?g+" may be incompatible depending on your Grafana configuration.":E?g+" will stop working in future releases of Grafana.":g+" is incompatible with your current Grafana configuration."}function x(I){const{className:E,angularSupportEnabled:y,pluginId:g,pluginType:W,showPluginDetailsLink:F,interactionElementId:w}=I,[O,z]=(0,o.useState)(!1),b={};return g&&(b.pluginId=g),w&&(b.elementId=w),O?null:o.createElement(m.b,{severity:"warning",title:"Angular plugin",className:E,onRemove:()=>z(!0)},o.createElement("p",null,v(W,y)),o.createElement("div",{className:"markdown-html"},o.createElement("ul",null,o.createElement("li",null,o.createElement("a",{href:"https://grafana.com/docs/grafana/latest/developers/angular_deprecation/",className:"external-link",target:"_blank",rel:"noreferrer",onClick:()=>{(0,S.ff)("angular_deprecation_docs_clicked",b)}},"Read our deprecation notice and migration advice.")),F&&g?o.createElement("li",null,o.createElement("a",{href:`plugins/${encodeURIComponent(g)}`,className:"external-link",target:"_blank",rel:"noreferrer"},"View plugin details")):null)))}}}]);

//# sourceMappingURL=7217.6d5c5b4c7c87e7699fa3.js.map