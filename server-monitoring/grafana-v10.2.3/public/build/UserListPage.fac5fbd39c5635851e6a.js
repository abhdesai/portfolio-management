"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7497,8039],{63868:(xe,G,n)=>{n.r(G),n.d(G,{default:()=>Se});var a=n(66681),e=n(85960),R=n(92369),B=n(90857),S=n(11855),L=n(94439),N=n(47257),W=n(70523),K=n(41879),$=n(20989),j=n(95162),X=n(87644),k=n(36752),ae=n(96535),se=n(5106),h=n(29165),H=n(49683),re=n(71679),D=n(13086),f=n(14607),b=n(97666),q=n(40377),T=n(69977),P=n(23940),z=n(44574),le=n(35511),_=n(61353);const Q=({units:t,icon:o})=>t?.length?t.length>1?e.createElement(f.u,{placement:"top",content:e.createElement(D.K,{direction:"column"},t?.map(s=>e.createElement("span",{key:s.name},s.name)))},e.createElement(Y,{icon:o},t.length)):e.createElement(Y,{icon:o},t[0].name):null,Y=(0,e.forwardRef)(({children:t,icon:o},s)=>e.createElement(_.x,{ref:s,display:"flex",alignItems:"center",marginRight:1},e.createElement(b.J,{name:o})," ",e.createElement(_.x,{marginLeft:1},t)));Y.displayName="TooltipContent";const v=({users:t,showPaging:o,totalPages:s,onChangePage:A,currentPage:E,fetchData:m})=>{const w=(0,e.useMemo)(()=>t.some(c=>c.licensedRole),[t]),Ce=(0,e.useMemo)(()=>[{id:"avatarUrl",header:"",cell:({cell:{value:c}})=>c&&e.createElement(re.q,{src:c,alt:"User avatar"})},{id:"login",header:"Login",cell:({cell:{value:c}})=>c,sortType:"string"},{id:"email",header:"Email",cell:({cell:{value:c}})=>c,sortType:"string"},{id:"name",header:"Name",cell:({cell:{value:c}})=>c,sortType:"string"},{id:"orgs",header:"Belongs to",cell:({cell:{value:c,row:Z}})=>e.createElement(D.K,{alignItems:"center"},e.createElement(Q,{units:c,icon:"building"}),Z.original.isAdmin&&e.createElement(f.u,{placement:"top",content:"Grafana Admin"},e.createElement(b.J,{name:"shield"}))),sortType:(c,Z)=>(c.original.orgs?.length||0)-(Z.original.orgs?.length||0)},...w?[{id:"licensedRole",header:"Licensed role",cell:({cell:{value:c}})=>c==="None"?e.createElement(q.x,{color:"disabled"},"Not assigned"," ",e.createElement(f.u,{placement:"top",content:"A licensed role will be assigned when this user signs in"},e.createElement(b.J,{name:"question-circle"}))):c,sortType:"string"}]:[],{id:"lastSeenAtAge",header:"Last active",headerTooltip:{content:"Time since user was seen using Grafana",iconName:"question-circle"},cell:({cell:{value:c}})=>e.createElement(e.Fragment,null,c&&e.createElement(e.Fragment,null,c==="10 years"?e.createElement(q.x,{color:"disabled"},"Never"):c)),sortType:(c,Z)=>new Date(c.original.lastSeenAt).getTime()-new Date(Z.original.lastSeenAt).getTime()},{id:"authLabels",header:"Origin",cell:({cell:{value:c}})=>e.createElement(e.Fragment,null,Array.isArray(c)&&c.length>0&&e.createElement(le.e,{label:c[0],removeIcon:!1,count:0}))},{id:"isDisabled",header:"",cell:({cell:{value:c}})=>e.createElement(e.Fragment,null,c&&e.createElement(T.V,{colorIndex:9,name:"Disabled"}))},{id:"edit",header:"",cell:({row:{original:c}})=>e.createElement("a",{href:`admin/users/edit/${c.id}`,"aria-label":`Edit team ${c.name}`},e.createElement(f.u,{content:"Edit user"},e.createElement(b.J,{name:"pen"})))}],[w]);return e.createElement(D.K,{direction:"column",gap:2},e.createElement(P.e,{columns:Ce,data:t,getRowId:c=>String(c.id),fetchData:m}),o&&e.createElement(D.K,{justifyContent:"flex-end"},e.createElement(z.t,{numberOfPages:s,currentPage:E,onNavigate:A})))};var g=n(72634);const I=[],ee=t=>{I.push(t)},te=R.wl.pages.UserListPage.UserListAdminPage,oe={fetchUsers:g.uh,changeQuery:g.R5,changePage:g.oO,changeFilter:g.M6,changeSort:g.nt},ce=t=>({users:t.userListAdmin.users,query:t.userListAdmin.query,showPaging:t.userListAdmin.showPaging,totalPages:t.userListAdmin.totalPages,page:t.userListAdmin.page,filters:t.userListAdmin.filters}),C=(0,k.connect)(ce,oe)(({fetchUsers:t,query:o,changeQuery:s,users:A,showPaging:E,changeFilter:m,filters:w,totalPages:Ce,page:c,changePage:Z,changeSort:We})=>{const ve=(0,N.wW)(fe);return(0,e.useEffect)(()=>{t()},[t]),e.createElement($.T.Contents,null,e.createElement("div",{className:ve.actionBar,"data-testid":te.container},e.createElement("div",{className:ve.row},e.createElement(ae.H,{placeholder:"Search user by login, email, or name.",autoFocus:!0,value:o,onChange:s}),e.createElement(se.S,{options:[{label:"All users",value:!1},{label:"Active last 30 days",value:!0}],onChange:de=>m({name:"activeLast30Days",value:de}),value:w.find(de=>de.name==="activeLast30Days")?.value,className:ve.filter}),I.map((de,Ke)=>e.createElement(de,{key:Ke,filters:w,onChange:m,className:ve.filter})),H.Vt.hasPermission(j.AccessControlAction.UsersCreate)&&e.createElement(h.Qj,{href:"admin/users/create",variant:"primary"},"New user"))),e.createElement(v,{users:A,showPaging:E,totalPages:Ce,onChangePage:Z,currentPage:c,fetchData:We}))});function ne(){return React.createElement(Page,{navId:"global-users"},React.createElement(C,null))}const fe=t=>({filter:(0,a.css)({margin:t.spacing(0,1),[t.breakpoints.down("sm")]:{margin:0}}),actionBar:(0,a.css)({marginBottom:t.spacing(2),display:"flex",alignItems:"flex-start",gap:t.spacing(2),[t.breakpoints.down("sm")]:{flexWrap:"wrap"}}),row:(0,a.css)({display:"flex",alignItems:"flex-start",textAlign:"left",marginBottom:t.spacing(.5),flexGrow:1,[t.breakpoints.down("sm")]:{flexWrap:"wrap",gap:t.spacing(2),width:"100%"}})}),Re=null;var Oe=n(67192);const Pe=t=>({browser:t.split(" ")[0],computer:t.split(" ")[1]}),me=(t,o)=>t.length>o?t.substring(0,o)+"...":t,pe=({value:t})=>{const o=Pe(t);return e.createElement(f.u,{theme:"info-alt",content:t,placement:"top-end",interactive:!0},e.createElement("span",null,me(o.browser,10),me(o.computer,10)))},Ue=({devices:t})=>{const o=(0,e.useMemo)(()=>[{id:"avatarUrl",header:"",cell:({cell:{value:s}})=>s&&e.createElement(re.q,{src:s,alt:"User avatar"})},{id:"login",header:"Login",cell:({cell:{value:s}})=>"Anonymous"},{id:"userAgent",header:"User Agent",cell:({cell:{value:s}})=>e.createElement(pe,{value:s}),sortType:"string"},{id:"lastSeenAt",header:"Last active",cell:({cell:{value:s}})=>s,sortType:(s,A)=>new Date(s.original.updatedAt).getTime()-new Date(A.original.updatedAt).getTime()},{id:"clientIp",header:"Origin IP (address)",cell:({cell:{value:s}})=>s&&e.createElement(Oe.C,{text:s,color:"orange"})}],[]);return e.createElement(D.K,{direction:"column",gap:2},e.createElement(P.e,{columns:o,data:t,getRowId:s=>s.deviceId}))},ge={fetchUsersAnonymousDevices:g.xP},ue=t=>({devices:t.userListAnonymousDevices.devices}),l=(0,k.connect)(ue,ge)(({devices:t,fetchUsersAnonymousDevices:o})=>((0,e.useEffect)(()=>{o()},[o]),e.createElement($.T.Contents,null,e.createElement(Ue,{devices:t}))));function d(){return React.createElement(Page,{navId:"anonymous-users"},React.createElement(l,null))}const y=null;var p=n(74042),x=n(37287),U=n(7288),F=n(79468),V=n(93349),O=n(28817);const J=R.wl.pages.UserListPage.UsersListPublicDashboardsPage.DashboardsListModal,ye=({email:t,onDismiss:o})=>{const s=(0,N.wW)(ie),{data:A,isLoading:E}=(0,x.Bl)(t);return e.createElement(U.u,{className:s.modal,isOpen:!0,title:"Public dashboards",onDismiss:o},E?e.createElement("div",{className:s.loading},e.createElement(F.u,{text:"Loading..."})):A?.map(m=>e.createElement("div",{key:m.dashboardUid,className:s.listItem,"data-testid":J.listItem(m.dashboardUid)},e.createElement("p",{className:s.dashboardTitle},m.dashboardTitle),e.createElement("div",{className:s.urlsContainer},e.createElement("a",{rel:"noreferrer",target:"_blank",className:(0,a.cx)("external-link",s.url),href:(0,O._M)(m.publicDashboardAccessToken),onClick:o},"Public dashboard URL"),e.createElement("span",{className:s.urlsDivider},"\u2022"),e.createElement("a",{className:(0,a.cx)("external-link",s.url),href:(0,O.Ez)(m.dashboardUid),onClick:o},"Public dashboard settings")),e.createElement("hr",{className:s.divider}))))},Ae=({email:t})=>e.createElement(V.JY,null,({showModal:o,hideModal:s})=>e.createElement(h.zx,{variant:"secondary",size:"sm",icon:"question-circle",title:"Open dashboards list","aria-label":"Open dashboards list",onClick:()=>o(ye,{email:t,onDismiss:s})})),ie=t=>({modal:(0,a.css)`
    width: 590px;
  `,loading:(0,a.css)`
    display: flex;
    justify-content: center;
  `,listItem:(0,a.css)`
    display: flex;
    flex-direction: column;
    gap: ${t.spacing(.5)};
  `,divider:(0,a.css)`
    margin: ${t.spacing(1.5,0)};
    color: ${t.colors.text.secondary};
  `,urlsContainer:(0,a.css)`
    display: flex;
    gap: ${t.spacing(.5)};

    ${t.breakpoints.down("sm")} {
      flex-direction: column;
    }
  `,urlsDivider:(0,a.css)`
    color: ${t.colors.text.secondary};
    ${t.breakpoints.down("sm")} {
      display: none;
    }
  `,dashboardTitle:(0,a.css)`
    font-size: ${t.typography.body.fontSize};
    font-weight: ${t.typography.fontWeightBold};
    margin-bottom: 0;
  `,url:(0,a.css)`
    font-size: ${t.typography.body.fontSize};
  `}),Le=({user:t,onDismiss:o})=>{const s=(0,N.wW)(De);return e.createElement(U.u,{className:s.modal,isOpen:!0,title:"Delete",onDismiss:o},e.createElement("p",{className:s.description},"The user ",t.email," is currently present in ",t.totalDashboards," public dashboard(s). If you wish to remove this user, please navigate to the settings of the corresponding public dashboard."),e.createElement(U.u.ButtonRow,null,e.createElement(h.zx,{type:"button",variant:"secondary",onClick:o,fill:"outline"},"Close")))},Ee=({user:t})=>e.createElement(V.JY,null,({showModal:o,hideModal:s})=>e.createElement(h.zx,{size:"sm",variant:"destructive",onClick:()=>o(Le,{user:t,onDismiss:s}),icon:"times","aria-label":"Delete user",title:"Delete user"})),De=t=>({modal:(0,a.css)`
    width: 500px;
  `,description:(0,a.css)`
    font-size: ${t.typography.body.fontSize};
    margin: 0;
  `}),be=R.wl.pages.UserListPage.publicDashboards,Te=()=>{const{data:t,isLoading:o}=(0,x.jI)();return e.createElement($.T.Contents,{isLoading:o},e.createElement("table",{className:"filter-table form-inline","data-testid":be.container},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Email"),e.createElement("th",null,e.createElement("span",null,"Activated "),e.createElement(f.u,{placement:"top",content:"Earliest time user has been an active user to a dashboard"},e.createElement(b.J,{name:"question-circle"}))),e.createElement("th",null,"Last active"),e.createElement("th",null,"Origin"),e.createElement("th",null,"Role"),e.createElement("th",null))),e.createElement("tbody",null,t?.map(s=>e.createElement("tr",{key:s.email},e.createElement("td",{className:"max-width-10"},e.createElement("span",{className:"ellipsis",title:s.email},s.email)),e.createElement("td",{className:"max-width-10"},s.firstSeenAtAge),e.createElement("td",{className:"max-width-10"},s.lastSeenAtAge),e.createElement("td",{className:"max-width-10"},e.createElement(p.Lh,{spacing:"sm"},e.createElement("span",null,s.totalDashboards," dashboard(s)"),e.createElement(Ae,{email:s.email}))),e.createElement("td",{className:"max-width-10"},e.createElement(T.V,{name:"Viewer",colorIndex:19})),e.createElement("td",{className:"text-right"},e.createElement(Ee,{user:s})))))))};var Ie=(t=>(t.ADMIN="admin",t.ORG="org",t.PUBLIC_DASHBOARDS="public-dashboards",t.ANON="anon",t))(Ie||{});const M=R.wl.pages.UserListPage,he=({view:t,setView:o})=>e.createElement(L.O,{label:"Public dashboard users",active:t==="public-dashboards",onChangeTab:()=>o("public-dashboards"),"data-testid":M.tabs.publicDashboardsUsers}),Be={admin:e.createElement(C,null),org:e.createElement(X.UsersListPageContent,null),["public-dashboards"]:e.createElement(Te,null),anon:e.createElement(l,null)};function Se(){const t=(0,N.wW)(Ne),o=K.contextSrv.hasPermission(j.AccessControlAction.UsersRead),s=K.contextSrv.hasPermission(j.AccessControlAction.OrgUsersRead),A=!!B.config.featureToggles.publicDashboards&&!!B.config.featureToggles.publicDashboardsEmailSharing&&(0,S.v)("publicDashboardsEmailSharing"),[E,m]=(0,e.useState)(()=>o?"admin":s?"org":null),w=s&&o;return e.createElement($.T,{navId:"global-users"},w?e.createElement(W.J,{className:t.tabsMargin},e.createElement(L.O,{label:"All users",active:E==="admin",onChangeTab:()=>m("admin"),"data-testid":M.tabs.allUsers}),e.createElement(L.O,{label:"Organization users",active:E==="org",onChangeTab:()=>m("org"),"data-testid":M.tabs.orgUsers}),B.config.featureToggles.displayAnonymousStats&&e.createElement(L.O,{label:"Anonymous devices",active:E==="anon",onChangeTab:()=>m("anon"),"data-testid":M.tabs.anonUserDevices}),A&&e.createElement(he,{view:E,setView:m})):A&&e.createElement(W.J,{className:t.tabsMargin},e.createElement(L.O,{label:"Users",active:E==="org",onChangeTab:()=>m("org"),"data-testid":M.tabs.users}),e.createElement(he,{view:E,setView:m})),E?Be[E]:e.createElement(X.UsersListPageContent,null))}const Ne=t=>({tabsMargin:(0,a.css)({marginBottom:t.spacing(3)})})},81350:(xe,G,n)=>{n.d(G,{q:()=>q});var a=n(85960),e=n(92369),R=n(71679),B=n(61353),S=n(14607),L=n(97666),N=n(69977),W=n(29165),K=n(13086),$=n(23940),j=n(44574),X=n(77980),k=n(84184),ae=n(80932),se=n(35511),h=n(49683),H=n(95162),re=n(95831);const D=`This user's role is not editable because it is synchronized from your auth provider.
Refer to the Grafana authentication docs for details.`,f=T=>{const P=T?.isExternallySynced;return!h.Vt.hasPermissionInMetadata(H.AccessControlAction.OrgUsersWrite,T)||P},b=e.wl.pages.UserListPage.UsersListPage,q=({users:T,orgId:P,onRoleChange:z,onRemoveUser:le,fetchData:_,changePage:Q,page:Y,totalPages:v,rolesLoading:g})=>{const[I,ee]=(0,a.useState)(null),[te,oe]=(0,a.useState)([]);(0,a.useEffect)(()=>{async function i(){try{if(h.Vt.hasPermission(H.AccessControlAction.ActionRolesList)){let u=await(0,ae.ul)(P);oe(u)}}catch{console.error("Error loading options")}}h.Vt.licensedAccessControlEnabled()&&i()},[P]);const ce=(0,a.useMemo)(()=>[{id:"avatarUrl",header:"",cell:({cell:{value:i}})=>i&&a.createElement(R.q,{src:i,alt:"User avatar"})},{id:"login",header:"Login",cell:({cell:{value:i}})=>a.createElement("div",null,i),sortType:"string"},{id:"email",header:"Email",cell:({cell:{value:i}})=>i,sortType:"string"},{id:"name",header:"Name",cell:({cell:{value:i}})=>i,sortType:"string"},{id:"lastSeenAtAge",header:"Last active",cell:({cell:{value:i}})=>i,sortType:(i,u)=>new Date(i.original.lastSeenAt).getTime()-new Date(u.original.lastSeenAt).getTime()},{id:"role",header:"Role",cell:({cell:{value:i},row:{original:u}})=>{const C=f(u);return h.Vt.licensedAccessControlEnabled()?a.createElement(k.R,{userId:u.userId,roles:u.roles||[],isLoading:g,orgId:P,roleOptions:te,basicRole:i,onBasicRoleChange:ne=>z(ne,u),basicRoleDisabled:C,basicRoleDisabledMessage:D,width:40}):a.createElement(re.A,{"aria-label":"Role",value:i,disabled:C,onChange:ne=>z(ne,u)})}},{id:"info",header:"",cell:({row:{original:i}})=>f(i)&&a.createElement(B.x,{display:"flex",alignItems:"center",marginLeft:1},a.createElement(S.u,{interactive:!0,content:a.createElement("div",null,"This user's role is not editable because it is synchronized from your auth provider. Refer to the\xA0",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/administration/user-management/manage-org-users/#change-a-users-organization-permissions",rel:"noreferrer",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},a.createElement(L.J,{name:"question-circle"})))},{id:"authLabels",header:"Origin",cell:({cell:{value:i}})=>a.createElement(a.Fragment,null,Array.isArray(i)&&i.length>0&&a.createElement(se.e,{label:i[0],removeIcon:!1,count:0}))},{id:"isDisabled",header:"",cell:({cell:{value:i}})=>a.createElement(a.Fragment,null,i&&a.createElement(N.V,{colorIndex:9,name:"Disabled"}))},{id:"delete",header:"",cell:({row:{original:i}})=>h.Vt.hasPermissionInMetadata(H.AccessControlAction.OrgUsersRemove,i)&&a.createElement(W.zx,{size:"sm",variant:"destructive",onClick:()=>{ee(i)},icon:"times","aria-label":`Delete user ${i.name}`})}],[g,P,te,z]);return a.createElement(K.K,{direction:"column",gap:2,"data-testid":b.container},a.createElement($.e,{columns:ce,data:T,getRowId:i=>String(i.userId),fetchData:_}),a.createElement(K.K,{justifyContent:"flex-end"},a.createElement(j.t,{onNavigate:Q,currentPage:Y,numberOfPages:v,hideWhenSinglePage:!0})),!!I&&a.createElement(X.s,{body:`Are you sure you want to delete user ${I?.login}?`,confirmText:"Delete",title:"Delete",onDismiss:()=>{ee(null)},isOpen:!0,onConfirm:()=>{I&&(le(I),ee(null))}}))}},87644:(xe,G,n)=>{n.r(G),n.d(G,{UsersListPageContent:()=>ue,UsersListPageUnconnected:()=>ge,default:()=>Me});var a=n(85960),e=n(36752),R=n(55583),B=n(20989),S=n(49683),L=n(81350),N=n(55855),W=n(29165),K=n(84003);const $={revokeInvite:K.GY},j=(0,e.connect)(null,$);class X extends a.PureComponent{render(){const{invitee:l,revokeInvite:d}=this.props;return a.createElement("tr",null,a.createElement("td",null,l.email),a.createElement("td",null,l.name),a.createElement("td",{className:"text-right"},a.createElement(N.m,{icon:"copy",variant:"secondary",size:"sm",getText:()=>l.url},"Copy Invite"),"\xA0"),a.createElement("td",null,a.createElement(W.zx,{variant:"destructive",size:"sm",icon:"times",onClick:()=>d(l.code),"aria-label":"Revoke Invite"})))}}const k=j(X);class ae extends a.PureComponent{render(){const{invitees:l}=this.props;return a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Email"),a.createElement("th",null,"Name"),a.createElement("th",null),a.createElement("th",{style:{width:"34px"}}))),a.createElement("tbody",{"data-testid":"InviteesTable-body"},l.map((d,y)=>a.createElement(k,{key:`${d.id}-${y}`,invitee:d}))))}}var se=n(8111),h=n(8538);const{selectAll:H,selectById:re,selectTotal:D}=h.selectors,f=(r,l)=>l,b=(0,se.P1)([H,f],(r,l)=>{const d=new RegExp(l,"i");return r.filter(p=>d.test(p.name)||d.test(p.email))});var q=n(84933),T=n(96535),P=n(5106),z=n(67954),le=n(95162),_=n(56375),Q=n(85445),Y=n(78105),v=n(82412);function g(){return async(r,l)=>{try{r((0,v.tZ)());const{perPage:d,page:y,searchQuery:p,sort:x}=l().users,U=await(0,Q.i)().get("/api/org/users/search",(0,Y.y)({perpage:d,page:y,query:p,sort:x}));if(S.Vt.licensedAccessControlEnabled()){r((0,v.Fy)());const F=S.Vt.user.orgId,V=U?.orgUsers.map(J=>J.userId),O=await(0,Q.i)().post("/api/access-control/users/roles/search",{userIds:V,orgId:F});U.orgUsers.forEach(J=>{J.roles=O?O[J.userId]||[]:[]}),r((0,v.BR)())}r((0,v.eT)(U))}catch{(0,v.k7)()}}}const I=(0,_.debounce)(r=>r(g()),300);function ee(r){return async l=>{await(0,Q.i)().patch(`/api/org/users/${r.userId}`,{role:r.role}),l(g())}}function te(r){return async l=>{await(0,Q.i)().delete(`/api/org/users/${r}`),l(g())}}function oe(r){return async l=>{l((0,v.PJ)(r)),l(g())}}function ce({sortBy:r}){const l=r.length?`${r[0].id}-${r[0].desc?"desc":"asc"}`:void 0;return async d=>{d((0,v.UL)(l)),d(g())}}function i(r){return async l=>{l((0,v.w4)(r)),I(l)}}const u=r=>{const l=new RegExp(r.searchQuery,"i");return r.users.filter(d=>l.test(d.login)||l.test(d.email)||l.test(d.name))},C=r=>r.searchQuery;function ne(r){return{searchQuery:C(r.users),pendingInvitesCount:D(r.invites),externalUserMngLinkName:r.users.externalUserMngLinkName,externalUserMngLinkUrl:r.users.externalUserMngLinkUrl}}const fe={changeSearchQuery:i},Pe=(0,e.connect)(ne,fe)(({externalUserMngLinkName:r,externalUserMngLinkUrl:l,searchQuery:d,pendingInvitesCount:y,changeSearchQuery:p,onShowInvites:x,showInvites:U})=>{const F=[{label:"Users",value:"users"},{label:`Pending Invites (${y})`,value:"invites"}],O=S.Vt.hasPermission(le.AccessControlAction.OrgUsersAdd)&&!(z.default.disableLoginForm&&z.default.externalUserMngInfo);return a.createElement("div",{className:"page-action-bar","data-testid":"users-action-bar"},a.createElement(q._,{grow:!0},a.createElement(T.H,{value:d,onChange:p,placeholder:"Search user by login, email or name"})),y>0&&a.createElement("div",{style:{marginLeft:"1rem"}},a.createElement(P.S,{value:U?"invites":"users",options:F,onChange:x})),O&&a.createElement(W.Qj,{href:"org/users/invite"},"Invite"),l&&a.createElement(W.Qj,{href:l,target:"_blank",rel:"noopener"},r))});function me(r){const l=C(r.users);return{users:u(r.users),searchQuery:C(r.users),page:r.users.page,totalPages:r.users.totalPages,perPage:r.users.perPage,invitees:b(r.invites,l),externalUserMngInfo:r.users.externalUserMngInfo,isLoading:r.users.isLoading,rolesLoading:r.users.rolesLoading}}const pe={loadUsers:g,fetchInvitees:K.nW,changePage:oe,changeSort:ce,updateUser:ee,removeUser:te},Ue=(0,e.connect)(me,pe),ge=({users:r,page:l,totalPages:d,invitees:y,externalUserMngInfo:p,isLoading:x,rolesLoading:U,loadUsers:F,fetchInvitees:V,changePage:O,updateUser:J,removeUser:ye,changeSort:Ae})=>{const[ie,Le]=(0,a.useState)(!1),Ee=p?(0,R.a)(p):"";(0,a.useEffect)(()=>{F(),V()},[V,F]);const De=(M,he)=>{J({...he,role:M})},be=M=>ye(M.userId),Te=()=>{Le(!ie)},Ie=()=>ie?a.createElement(ae,{invitees:y}):a.createElement(L.q,{users:r,orgId:S.Vt.user.orgId,rolesLoading:U,onRoleChange:De,onRemoveUser:be,fetchData:Ae,changePage:O,page:l,totalPages:d});return a.createElement(B.T.Contents,{isLoading:!x},a.createElement(Pe,{onShowInvites:Te,showInvites:ie}),Ee&&a.createElement("div",{className:"grafana-info-box",dangerouslySetInnerHTML:{__html:Ee}}),x&&Ie())},ue=Ue(ge);function Me(){return a.createElement(B.T,{navId:"users"},a.createElement(ue,null))}}}]);

//# sourceMappingURL=UserListPage.fac5fbd39c5635851e6a.js.map