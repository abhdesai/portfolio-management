"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8715],{28393:(f,_,e)=>{e.d(_,{f:()=>E});var a=e(85960),O=e(85954),s=e(49683),r=e(95162),D=e(477),n=e(80932);const E=({teamId:o,roleOptions:l,disabled:A,roles:c,onApplyRoles:M,pendingRoles:t,apply:i=!1,maxWidth:u,width:R,isLoading:I})=>{const[{loading:v,value:C=c||[]},d]=(0,O.Z)(async()=>{try{if(c)return c;if(i&&t?.length)return t;if(s.Vt.hasPermission(r.AccessControlAction.ActionTeamsRolesList))return await(0,n._C)(o)}catch(m){console.error("Error loading options",m)}return[]},[o,t,c]);(0,a.useEffect)(()=>{d()},[d]);const U=async m=>{i?M&&M(m):(await(0,n.u7)(m,o),await d())},g=s.Vt.hasPermission(r.AccessControlAction.ActionTeamsRolesAdd)&&s.Vt.hasPermission(r.AccessControlAction.ActionTeamsRolesRemove);return a.createElement(D.I,{apply:i,onRolesChange:U,roleOptions:l,appliedRoles:C,isLoading:v||I,disabled:A,basicRoleDisabled:!0,canUpdateRoles:g,maxWidth:u,width:R})}},23164:(f,_,e)=>{e.d(_,{C:()=>n});var a=e(85960),O=e(84041),s=e(49683),r=e(95162),D=e(80932);const n=E=>{const[o,l]=(0,a.useState)(E),{value:A=[]}=(0,O.Z)(async()=>s.Vt.licensedAccessControlEnabled()&&s.Vt.hasPermission(r.AccessControlAction.ActionRolesList)?(0,D.ul)(o):Promise.resolve([]),[o]);return[{roleOptions:A},l]}},48386:(f,_,e)=>{e.r(_),e.d(_,{CreateTeam:()=>R,default:()=>I});var a=e(85960),O=e(85445),s=e(91),r=e(66596),D=e(51637),n=e(20519),E=e(24956),o=e(29165),l=e(20989),A=e(28393),c=e(80932),M=e(23164),t=e(49683),i=e(95162);const u={icon:"users-alt",id:"team-new",text:"New team",subTitle:"Create a new team. Teams let you grant permissions to a group of users."},R=()=>{const v=t.Vt.user.orgId,[C,d]=(0,a.useState)([]),[{roleOptions:U}]=(0,M.C)(v),g=t.Vt.hasPermission(i.AccessControlAction.ActionUserRolesAdd)&&t.Vt.hasPermission(i.AccessControlAction.ActionUserRolesRemove),m=async T=>{const P=await(0,O.i)().post("/api/teams",T);if(P.teamId){try{await t.Vt.fetchUserPermissions(),t.Vt.licensedAccessControlEnabled()&&g&&await(0,c.u7)(C,P.teamId,P.orgId)}catch(L){console.error(L)}s.E1.push(`/org/teams/edit/${P.teamId}`)}};return a.createElement(l.T,{navId:"teams",pageNav:u},a.createElement(l.T.Contents,null,a.createElement(r.l,{onSubmit:m},({register:T,errors:P})=>a.createElement(a.Fragment,null,a.createElement(D.C,null,a.createElement(n.g,{label:"Name",required:!0,invalid:!!P.name,error:"Team name is required"},a.createElement(E.I,{...T("name",{required:!0}),id:"team-name"})),t.Vt.licensedAccessControlEnabled()&&a.createElement(n.g,{label:"Role"},a.createElement(A.f,{teamId:0,roleOptions:U,disabled:!1,apply:!0,onApplyRoles:d,pendingRoles:C,maxWidth:"100%"})),a.createElement(n.g,{label:"Email",description:"This is optional and is primarily used for allowing custom team avatars."},a.createElement(E.I,{...T("email"),type:"email",id:"team-email",placeholder:"email@test.com"}))),a.createElement(o.zx,{type:"submit",variant:"primary"},"Create")))))},I=R}}]);

//# sourceMappingURL=CreateTeam.cda13d648cb21e34ba61.js.map