"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[207],{58922:(S,d,a)=>{a.d(d,{UV:()=>e});var e=(n=>(n.Annotations="annotations",n.Arrow="arrow",n.CSVContent="csv_content",n.CSVFile="csv_file",n.CSVMetricValues="csv_metric_values",n.DataPointsOutsideRange="datapoints_outside_range",n.ExponentialHeatmapBucketData="exponential_heatmap_bucket_data",n.FlameGraph="flame_graph",n.GrafanaAPI="grafana_api",n.LinearHeatmapBucketData="linear_heatmap_bucket_data",n.Live="live",n.Logs="logs",n.ManualEntry="manual_entry",n.NoDataPoints="no_data_points",n.NodeGraph="node_graph",n.PredictableCSVWave="predictable_csv_wave",n.PredictablePulse="predictable_pulse",n.RandomWalk="random_walk",n.RandomWalkTable="random_walk_table",n.RandomWalkWithError="random_walk_with_error",n.RawFrame="raw_frame",n.ServerError500="server_error_500",n.Simulation="simulation",n.SlowQuery="slow_query",n.StreamingClient="streaming_client",n.TableStatic="table_static",n.Trace="trace",n.USA="usa",n.VariablesQuery="variables-query",n))(e||{});const t={fields:[],states:[]},o={csvWave:[],points:[],scenarioId:"random_walk"}},5429:(S,d,a)=>{a.r(d),a.d(d,{DashboardScenePage:()=>u,default:()=>l});var e=a(85960),t=a(5836),o=a(20989),n=a(55415),f=a(95162),b=a(51012);function u({match:w,route:m}){const h=(0,b.wc)(),{dashboard:c,isLoading:R,loadError:O}=h.useState();return(0,e.useEffect)(()=>(m.routeName===f.DashboardRoutes.Home?h.loadDashboard(m.routeName):h.loadDashboard(w.params.uid),()=>{h.clearState()}),[h,w.params.uid,m.routeName]),c?e.createElement(c.Component,{model:c}):e.createElement(o.T,{layout:t.Q.Canvas,"data-testid":"dashboard-scene-page"},R&&e.createElement(n.Z,null),O&&e.createElement("h2",null,O))}const l=u},35871:(S,d,a)=>{a.r(d),a.d(d,{PanelEditPage:()=>b,default:()=>u});var e=a(85960),t=a(5836),o=a(20989),n=a(55415),f=a(51012);function b({match:l}){const w=(0,f.wc)(),{panelEditor:m,isLoading:h,loadError:c}=w.useState();return(0,e.useEffect)(()=>(w.loadPanelEdit(l.params.uid,l.params.panelId),()=>{w.clearState()}),[w,l.params.uid,l.params.panelId]),m?e.createElement(m.Component,{model:m}):e.createElement(o.T,{layout:t.Q.Canvas},h&&e.createElement(n.Z,null),c&&e.createElement("h2",null,c))}const u=b},27370:(S,d,a)=>{a.r(d),a.d(d,{SceneListPage:()=>l,default:()=>w});var e=a(85960),t=a(81445),o=a(13086),n=a(72435),f=a(20989),b=a(30824),u=a(66246);const l=({})=>{const m=(0,u.F)(),h=(0,t.Z)(()=>(0,b.getGrafanaSearcher)().starred({starred:!0}),[]);return e.createElement(f.T,{navId:"scenes",subTitle:"Experimental new runtime and state model for dashboards"},e.createElement(f.T.Contents,null,e.createElement(o.K,{direction:"column",gap:1},e.createElement("h5",null,"Apps"),e.createElement(o.K,{direction:"column",gap:0},e.createElement(n.Z,{href:"/scenes/grafana-monitoring"},e.createElement(n.Z.Heading,null,"Grafana monitoring"))),e.createElement("h5",null,"Test scenes"),e.createElement(o.K,{direction:"column",gap:0},m.map(c=>e.createElement(n.Z,{key:c.title,href:`/scenes/${c.title}`},e.createElement(n.Z.Heading,null,c.title)))),h.value&&e.createElement(e.Fragment,null,e.createElement("h5",null,"Starred dashboards"),e.createElement(o.K,{direction:"column",gap:0},h.value.view.map(c=>e.createElement(n.Z,{href:`/scenes/dashboard/${c.uid}`,key:c.uid},e.createElement(n.Z.Heading,null,c.name))))))))},w=l},21532:(S,d,a)=>{a.r(d),a.d(d,{ScenePage:()=>n,default:()=>f});var e=a(85960),t=a(57474),o=a(66246);const n=b=>{const u=(0,o.H)(b.match.params.name),[l,w]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{u&&!l&&((0,t.oo)().initSync(u),w(!0))},[l,u]),u?l?e.createElement(u.Component,{model:u}):null:e.createElement("h2",null,"Scene not found")},f=n},17502:(S,d,a)=>{a.r(d),a.d(d,{GrafanaMonitoringApp:()=>H,default:()=>q,getHandlerDrilldownPage:()=>V,getMainPageScene:()=>K});var e=a(85960),t=a(57474),o=a(9106),n=a(66706),f=a(94372),b=a(14345),u=a(91),l=a(1713),w=a(29165),m=a(5106);class h extends t.wx{constructor(){super(...arguments),this.onChange=i=>{this.setState({value:i}),this.state.onChange(i)}}}h.Component=({model:r})=>{const{options:i,value:s}=r.useState();return e.createElement(m.S,{options:i,value:s,onChange:r.onChange})};var c=a(24956);class R extends t.wx{constructor(){super(...arguments),this.onChange=i=>{this.setState({value:i.currentTarget.value})}}}R.Component=({model:r})=>{const{value:i}=r.useState();return e.createElement(c.I,{width:25,placeholder:"Search...",value:i,onChange:r.onChange})};var O=a(98231),B=a(70274),I=a(61751),$=a(34460);function D(r){const i={id:B.mE.regex,options:{value:r}};return{id:I.W.filterByValue,options:{type:$.PQ.include,match:$.ER.all,filters:[{fieldName:"handler",config:i}]}}}function P(r){return()=>i=>i.pipe((0,O.U)(s=>s.filter(p=>(0,f.nf)(p).toLowerCase().includes(r.toLowerCase()))))}var A=a(173);function _(){const r=useLocation();return locationSearchToObject(r.search||"")}function M(r,i){return A.Cj.renderUrl(r,i)}function g(r){return new t.uq({datasource:{uid:"gdev-prometheus"},queries:[{refId:"A",instant:!0,format:"table",maxDataPoints:500,...r}]})}function v(r){return new t.uq({datasource:{uid:"gdev-prometheus"},queries:[{refId:"A",range:!0,format:"time_series",maxDataPoints:500,...r}]})}function y(){return new t.hT({variables:[new t.$1({name:"instance",datasource:{uid:"gdev-prometheus"},query:{query:"label_values(grafana_http_request_duration_seconds_sum, instance)",refId:"A"}})]})}function L(){const r=new R({value:""}),i=g({expr:"sort_desc(avg without(job, instance) (rate(grafana_http_request_duration_seconds_sum[$__rate_interval]) * 1e3)) "}),s=new t.bM({$data:i,transformations:[D("")]});s.addActivationHandler(()=>{const E=r.subscribeToState(C=>{s.setState({transformations:[D(C.value)]}),s.reprocessTransformations()});return()=>E.unsubscribe()});const p=t.wX.table().setTitle("Handlers").setData(s).setOption("footer",{enablePagination:!0}).setOverrides(E=>E.matchFieldsWithNameByRegex(".*").overrideFilterable(!1).matchFieldsWithName("Time").overrideCustomFieldConfig("hidden",!0).matchFieldsWithName("Value").overrideDisplayName("Duration (Avg)").matchFieldsWithName("handler").overrideLinks([{title:"Go to handler drilldown view",url:"",onBuildUrl:()=>{const C=u.E1.getSearchObject();return M("/scenes/grafana-monitoring/handlers/${__value.text:percentencode}",C)}}])).build(),j=new t.uq({datasource:{uid:"gdev-prometheus"},queries:[{refId:"A",expr:"topk(20, avg without(job, instance) (rate(grafana_http_request_duration_seconds_sum[$__rate_interval])) * 1e3)",range:!0,format:"time_series",legendFormat:"{{method}} {{handler}} (status = {{status_code}})",maxDataPoints:500}]}),x=new t.bM({$data:j,transformations:[P("")]});x.addActivationHandler(()=>{const E=r.subscribeToState(C=>{x.setState({transformations:[P(C.value)]}),x.reprocessTransformations()});return()=>E.unsubscribe()});const Z=new t.$M({$data:x,body:new t.QY({direction:"column",children:[]}),getLayoutChild:(E,C,U)=>new t.fy({key:`panel-${U}`,minHeight:200,$data:new t.Yt({data:{...E,series:[C]}}),body:new t.QY({direction:"row",key:`row-${U}`,children:[new t.fy({key:`flex1-${U}`,body:t.wX.timeseries().setTitle((0,f.nf)(C)).setOption("legend",{showLegend:!1}).setHeaderActions(e.createElement(w.Qj,{fill:"text",size:"sm",icon:"arrow-right",href:z(C.fields[1].labels.handler)},"Details")).build()}),new t.fy({key:`flex2-${U}`,width:200,body:t.wX.stat().setTitle("Last").setOption("graphMode",l.IG.None).setOption("textMode",l.jG.Value).setDisplayName("Last").build()})]})})}),W=new t.QY({children:[new t.fy({body:p})]}),J=new h({options:[{value:"table",label:"Table"},{value:"graphs",label:"Graphs"}],value:"table",onChange:E=>{E==="table"?W.setState({children:[new t.fy({body:p})]}):W.setState({children:[Z]})}});return new t.U4({$variables:y(),$data:i,$timeRange:new t.gg({from:"now-1h",to:"now"}),controls:[new t.dn({}),r,new t.o$,J,new t.n7({isOnCanvas:!0}),new t.vf({isOnCanvas:!0})],body:W})}function z(r){const i=u.E1.getSearchObject();return M(`/scenes/grafana-monitoring/handlers/${encodeURIComponent(r)}`,i)}function X(r){const i=v({expr:`avg without(job, instance) (rate(grafana_http_request_duration_seconds_sum{handler="${r}"}[$__rate_interval])) * 1e3`,legendFormat:"{{method}} {{handler}} (status = {{status_code}})"}),s=v({expr:`sum without(job, instance) (rate(grafana_http_request_duration_seconds_count{handler="${r}"}[$__rate_interval])) `,legendFormat:"{{method}} {{handler}} (status = {{status_code}})"});return new t.U4({$variables:y(),$timeRange:new t.gg({from:"now-1h",to:"now"}),controls:[new t.dn({}),new t.o$,new t.n7({isOnCanvas:!0}),new t.vf({isOnCanvas:!0})],body:new t.QY({direction:"column",children:[new t.fy({body:t.wX.timeseries().setData(i).setTitle("Request duration avg (ms)").build()}),new t.fy({body:t.wX.timeseries().setData(s).setTitle("Request count/s").build()})]})})}function F(){return new t.U4({$variables:y(),$timeRange:new t.gg({from:"now-1h",to:"now"}),controls:[new t.dn({}),new t.o$,new t.n7({isOnCanvas:!0}),new t.vf({isOnCanvas:!0})],body:new t.QY({direction:"column",children:[new t.fy({height:150,body:new t.QY({children:[new t.fy({body:T("grafana_stat_totals_dashboard","Dashboards")}),new t.fy({body:T("grafana_stat_total_users","Users")}),new t.fy({body:T("sum(grafana_stat_totals_datasource)","Data sources")}),new t.fy({body:T("grafana_stat_total_service_account_tokens","Service account tokens")})]})}),new t.fy({body:t.wX.timeseries().setData(new t.uq({datasource:{uid:"gdev-prometheus"},queries:[{refId:"A",expr:'sum(process_resident_memory_bytes{job="grafana", instance=~"$instance"})',range:!0,format:"time_series",maxDataPoints:500}]})).setTitle("Memory usage").setOption("legend",{showLegend:!1}).setUnit("bytes").setMin(0).setCustomFieldConfig("lineWidth",2).setCustomFieldConfig("fillOpacity",6).build()}),new t.fy({body:t.wX.timeseries().setData(new t.uq({datasource:{uid:"gdev-prometheus"},queries:[{refId:"A",expr:'sum(go_goroutines{job="grafana", instance=~"$instance"})',range:!0,format:"time_series",maxDataPoints:500}]})).setOption("legend",{showLegend:!1}).setMin(0).setCustomFieldConfig("lineWidth",2).setCustomFieldConfig("fillOpacity",6).setTitle("Go routines").build()})]})})}function T(r,i){return t.wX.stat().setData(g({expr:r})).setTitle(i).setColor({fixedColor:"text",mode:b.S.Fixed}).build()}function G(r){const i=new t.uq({datasource:{uid:"gdev-loki"},queries:[{refId:"A",expr:`{job="grafana"} | logfmt | handler=\`${r}\` | __error__=\`\``,queryType:"range",maxDataPoints:5e3}]});return new t.U4({$variables:y(),$timeRange:new t.gg({from:"now-1h",to:"now"}),controls:[new t.dn({}),new t.o$,new t.n7({isOnCanvas:!0}),new t.vf({isOnCanvas:!0})],body:new t.QY({direction:"column",children:[new t.fy({body:t.wX.logs().setData(i).setTitle("").setOption("showTime",!0).setOption("showLabels",!1).setOption("showCommonLabels",!1).setOption("wrapLogMessage",!0).setOption("prettifyLogMessage",!1).setOption("enableLogDetails",!0).setOption("dedupStrategy",l.Y4.none).setOption("sortOrder",l.UV.Descending).build()})]})})}function Y(){const r=new t.uq({datasource:{uid:"gdev-loki"},queries:[{refId:"A",expr:'{job="grafana"} | logfmt | __error__=``',queryType:"range",maxDataPoints:5e3}]});return new t.U4({$variables:y(),$timeRange:new t.gg({from:"now-1h",to:"now"}),controls:[new t.dn({}),new t.o$,new t.n7({isOnCanvas:!0}),new t.vf({isOnCanvas:!0})],body:new t.QY({direction:"column",children:[new t.fy({body:t.wX.logs().setTitle("").setData(r).setOption("showTime",!0).setOption("showLabels",!1).setOption("showCommonLabels",!1).setOption("wrapLogMessage",!0).setOption("prettifyLogMessage",!1).setOption("enableLogDetails",!0).setOption("dedupStrategy",l.Y4.none).setOption("sortOrder",l.UV.Descending).build()})]})})}function N(){const r=t.wX.table().setData(g({expr:"sort_desc(avg without(job, instance) (rate(grafana_http_request_duration_seconds_sum[$__rate_interval]) * 1e3)) "})).setTitle("Handlers").setOption("footer",{enablePagination:!0}).setOverrides(s=>s.matchFieldsWithNameByRegex(".*").overrideFilterable(!1).matchFieldsWithName("Time").overrideCustomFieldConfig("hidden",!0).matchFieldsWithName("Value").overrideDisplayName("Duration (Avg)").matchFieldsWithName("handler").overrideLinks([{title:"Go to handler drilldown view",url:"/scenes/grafana-monitoring/traffic?handler=${__value.text:percentencode}"}])).build();return new t.U4({$variables:y(),$timeRange:new t.gg({from:"now-1h",to:"now"}),controls:[new t.dn({}),new t.o$,new t.n7({isOnCanvas:!0}),new t.vf({isOnCanvas:!0})],body:new t.QY({$behaviors:[new Q],children:[new t.fy({body:r})]})})}class Q extends t.wx{constructor(){super({}),this._urlSync=new t.oU(this,{keys:["handler"]}),this.addActivationHandler(()=>{this._subs.add(this.subscribeToState(i=>this.onHandlerChanged(i.handler))),this.onHandlerChanged(this.state.handler)})}onHandlerChanged(i){const s=this.getLayout();i==null?s.setState({children:s.state.children.slice(0,1)}):s.setState({children:[s.state.children[0],this.getDrilldownView(i)]})}getDrilldownView(i){return new t.fy({key:"drilldown-flex",body:t.wX.timeseries().setData(v({expr:`rate(grafana_http_request_duration_seconds_sum{handler="${i}"}[$__rate_interval]) * 1e3`})).setTitle(`Handler: ${i} details`).setHeaderActions(e.createElement(w.zx,{size:"sm",variant:"secondary",icon:"times",onClick:()=>this.setState({handler:void 0})})).build()})}getUrlState(){return{handler:this.state.handler}}updateFromUrl(i){(typeof i.handler=="string"||i.handler===void 0)&&this.setState({handler:i.handler})}getLayout(){if(this.parent instanceof t.QY)return this.parent;throw new Error("Invalid parent")}}function H(){const r=(0,e.useMemo)(()=>new t.mt({pages:[K()]}),[]),i=(0,o.P)("scenes"),[s]=(0,e.useState)({sectionNav:i});return e.createElement(n.v.Provider,{value:s},e.createElement(r.Component,{model:r}))}function K(){return new t.yH({title:"Grafana Monitoring",subTitle:"A custom app with embedded scenes to monitor your Grafana server",url:"/scenes/grafana-monitoring",hideFromBreadcrumbs:!1,getScene:F,tabs:[new t.yH({title:"Overview",url:"/scenes/grafana-monitoring",getScene:F,preserveUrlKeys:["from","to","var-instance"]}),new t.yH({title:"HTTP handlers",url:"/scenes/grafana-monitoring/handlers",getScene:L,preserveUrlKeys:["from","to","var-instance"],drilldowns:[{routePath:"/scenes/grafana-monitoring/handlers/:handler",getPage:V}]}),new t.yH({title:"Traffic",url:"/scenes/grafana-monitoring/traffic",getScene:N,preserveUrlKeys:["from","to","var-instance"]}),new t.yH({title:"Logs",url:"/scenes/grafana-monitoring/logs",getScene:Y,preserveUrlKeys:["from","to","var-instance"]})]})}function V(r,i){const s=decodeURIComponent(r.params.handler),p=`/scenes/grafana-monitoring/handlers/${encodeURIComponent(s)}`;return new t.yH({title:s,subTitle:"A grafana http handler is responsible for service a specific API request",url:p,getParentPage:()=>i,getScene:()=>X(s),tabs:[new t.yH({title:"Metrics",url:p,routePath:"/scenes/grafana-monitoring/handlers/:handler",getScene:()=>X(s),preserveUrlKeys:["from","to","var-instance"]}),new t.yH({title:"Logs",url:p+"/logs",routePath:"/scenes/grafana-monitoring/handlers/:handler/logs",getScene:()=>G(s),preserveUrlKeys:["from","to","var-instance"]})]})}const q=H},66246:(S,d,a)=>{a.d(d,{H:()=>M,F:()=>A});var e=a(57474),t=a(58922),o=a(14798);function n(g,v){return new e.uq({queries:[{refId:"A",datasource:{uid:"gdev-testdata",type:"testdata"},scenarioId:"random_walk",...g}],...v})}function f(){const g=new e.gg,v=new e.gg({from:"now-1y",to:"now"});return new o.WI({title:"Grid with rows and different queries and time ranges",body:new e.Qh({children:[new e.I_({$timeRange:v,$data:n({scenarioId:t.UV.RandomWalkTable}),title:"Row A - has its own query, last year time range",key:"Row A",isCollapsed:!0,y:0,children:[new e.bO({x:0,y:1,width:12,height:5,isResizable:!0,isDraggable:!0,body:e.wX.timeseries().setTitle("Row A Child1").build()}),new e.bO({x:0,y:5,width:6,height:5,isResizable:!0,isDraggable:!0,body:e.wX.timeseries().setTitle("Row A Child2").build()})]}),new e.bO({x:0,y:12,width:6,height:10,isResizable:!0,isDraggable:!0,body:e.wX.timeseries().setTitle("Outsider, has its own query").setData(n()).build()})]}),$timeRange:g,$data:n(),actions:[new e.n7({}),new e.vf({})]})}function b(){return new o.WI({title:"Multiple grid layouts test",body:new e.QY({children:[new e.fy({body:new e.Qh({children:[new e.bO({x:0,y:0,width:12,height:10,isDraggable:!0,isResizable:!0,body:e.wX.timeseries().setTitle("Dragabble and resizable").build()}),new e.bO({x:12,y:0,width:12,height:10,isResizable:!1,isDraggable:!0,body:e.wX.timeseries().setTitle("Draggable only").build()}),new e.bO({x:6,y:11,width:12,height:10,isResizable:!1,isDraggable:!0,body:new e.QY({direction:"column",children:[new e.fy({ySizing:"fill",body:e.wX.timeseries().setTitle("Fill height").build()}),new e.fy({ySizing:"fill",body:e.wX.timeseries().setTitle("Fill height").build()})]})})]})}),new e.fy({body:new e.Qh({children:[new e.bO({x:0,y:0,width:12,height:10,isDraggable:!0,isResizable:!0,body:e.wX.timeseries().setTitle("Dragabble and resizable").build()}),new e.bO({x:12,y:0,width:12,height:10,isResizable:!1,isDraggable:!0,body:e.wX.timeseries().setTitle("Draggable only").build()}),new e.bO({x:6,y:11,width:12,height:10,isResizable:!1,isDraggable:!0,body:new e.QY({direction:"column",children:[new e.fy({ySizing:"fill",body:e.wX.timeseries().setTitle("Fill height").build()}),new e.fy({ySizing:"fill",body:e.wX.timeseries().setTitle("Fill height").build()})]})})]})})]}),$timeRange:new e.gg,$data:n(),actions:[new e.n7({}),new e.vf({})]})}function u(){return new o.WI({title:"Grid with rows and different queries",body:new e.Qh({children:[new e.I_({$timeRange:new e.gg,$data:n({scenarioId:t.UV.RandomWalkTable}),title:"Row A - has its own query",key:"Row A",isCollapsed:!0,y:0,children:[new e.bO({x:0,y:1,width:12,height:5,isResizable:!0,isDraggable:!0,body:e.wX.timeseries().setTitle("Row A Child1").build()}),new e.bO({x:0,y:5,width:6,height:5,isResizable:!0,isDraggable:!0,body:e.wX.timeseries().setTitle("Row A Child2").build()})]}),new e.I_({title:"Row B - uses global query",key:"Row B",isCollapsed:!0,y:1,children:[new e.bO({x:0,y:2,width:12,height:5,isResizable:!1,isDraggable:!0,body:e.wX.timeseries().setTitle("Row B Child1").build()}),new e.bO({x:0,y:7,width:6,height:5,isResizable:!1,isDraggable:!0,body:e.wX.timeseries().setTitle("Row B Child2 with data").setData(n({seriesCount:10})).build()})]}),new e.bO({x:0,y:12,width:6,height:10,isResizable:!0,isDraggable:!0,body:e.wX.timeseries().setTitle("Outsider, has its own query").setData(n({seriesCount:10})).build()}),new e.bO({x:6,y:12,width:12,height:10,isResizable:!0,isDraggable:!0,body:e.wX.timeseries().setTitle("Outsider, uses global query").build()})]}),$timeRange:new e.gg,$data:n(),actions:[new e.n7({}),new e.vf({})]})}var l=a(50595);function w(){return new o.WI({title:"Query variable",$variables:new e.hT({variables:[new e.eO({name:"metric",query:"job : job, instance : instance"}),new e.l3({name:"datasource",pluginId:"prometheus"}),new e.$1({name:"instance (using datasource variable)",refresh:l.Bd.onTimeRangeChanged,query:{query:"label_values(go_gc_duration_seconds, ${metric})",refId:"A"},datasource:{uid:"${datasource}"}}),new e.$1({name:"label values (on time range refresh)",refresh:l.Bd.onTimeRangeChanged,query:{query:"label_values(go_gc_duration_seconds, ${metric})",refId:"B"},datasource:{uid:"gdev-prometheus",type:"prometheus"}}),new e.$1({name:"legacy (graphite)",refresh:l.Bd.onTimeRangeChanged,query:{queryType:"Default",target:"stats.response.*",refId:"C"},datasource:{uid:"gdev-graphite",type:"graphite"}})]}),body:new e.QY({direction:"row",children:[new e.fy({width:"40%",body:new e.S$({text:"metric: ${metric}",fontSize:20,align:"center"})})]}),$timeRange:new e.gg,actions:[new e.n7({}),new e.vf({})],controls:[new e.dn({})]})}var m=a(91470),h=a(31326),c=a(17067);function R(){return new o.WI({title:"Variables - Repeating panels",$variables:new e.hT({variables:[new e.gU({name:"server",query:"AB",value:"server",text:"",delayMs:2e3,isMulti:!0,includeAll:!0,refresh:m.Bd.onTimeRangeChanged,optionsToReturn:[{label:"A",value:"A"},{label:"B",value:"B"}],options:[],$behaviors:[O]})]}),body:new e.Qh({isDraggable:!0,isResizable:!0,children:[new h.o({variableName:"server",x:0,y:0,width:24,height:8,itemHeight:8,source:e.wX.timeseries().setTitle("server = $server").setData(n({alias:"server = $server"})).build()})]}),$timeRange:new e.gg,actions:[],controls:[new e.dn({}),new e.o$,new e.n7({}),new e.vf({})]})}function O(g){const v=g.subscribeToState((y,L)=>{!y.loading&&L.loading&&(g.state.optionsToReturn?.length===2?g.setState({query:"ABC",optionsToReturn:[{label:"A",value:"A"},{label:"B",value:"B"},{label:"C",value:"C"}]}):g.setState({query:"AB",optionsToReturn:[{label:"A",value:"A"},{label:"B",value:"B"}]}))});return()=>{v.unsubscribe()}}function B(){return new o.WI({title:"Variables - Repeating rows",$variables:new e.hT({variables:[new e.gU({name:"server",query:"AB",value:["A","B","C"],text:["A","B","C"],delayMs:2e3,isMulti:!0,includeAll:!0,refresh:m.Bd.onTimeRangeChanged,optionsToReturn:[{label:"A",value:"A"},{label:"B",value:"B"},{label:"C",value:"C"}],options:[]}),new e.gU({name:"pod",query:"AB",value:["Mu","Ma","Mi"],text:["Mu","Ma","Mi"],delayMs:2e3,isMulti:!0,includeAll:!0,refresh:m.Bd.onTimeRangeChanged,optionsToReturn:[{label:"Mu",value:"Mu"},{label:"Ma",value:"Ma"},{label:"Mi",value:"Mi"}],options:[]})]}),body:new e.Qh({isDraggable:!0,isResizable:!0,children:[new e.I_({title:"Row $server",key:"Row A",isCollapsed:!1,y:0,x:0,$behaviors:[new c.a({variableName:"server",sources:[new h.o({variableName:"pod",x:0,y:0,width:24,height:5,itemHeight:5,source:e.wX.timeseries().setTitle("server = $server, pod = $pod").setData(n({alias:"server = $server, pod = $pod"})).build()})]})]})]}),$timeRange:new e.gg,actions:[],controls:[new e.dn({}),new e.o$,new e.n7({}),new e.vf({})]})}function I(){return new o.WI({title:"Scene with rows",body:new e.QY({direction:"column",children:[new e.Gb({title:"Overview",canCollapse:!0,body:new e.QY({direction:"row",children:[new e.fy({body:e.wX.timeseries().setTitle("Fill height").build()}),new e.fy({body:e.wX.timeseries().setTitle("Fill height").build()})]})}),new e.Gb({title:"More server details",canCollapse:!0,body:new e.QY({direction:"row",children:[new e.fy({body:e.wX.timeseries().setTitle("Fill height").build()}),new e.fy({body:e.wX.timeseries().setTitle("Fill height").build()})]})})]}),$timeRange:new e.gg,$data:n(),actions:[new e.n7({}),new e.vf({})]})}function $(){return new o.WI({title:"Transformations demo",body:new e.QY({direction:"row",children:[new e.fy({body:new e.QY({direction:"column",children:[new e.fy({body:new e.QY({direction:"row",children:[new e.fy({body:e.wX.timeseries().setTitle("Source data (global query)").build()}),new e.fy({body:e.wX.stat().setTitle("Transformed data").setData(new e.bM({transformations:[{id:"reduce",options:{reducers:["last","mean"]}}]})).build()})]})}),new e.fy({body:e.wX.stat().setTitle("Query with predefined transformations").setData(new e.bM({$data:n(),transformations:[{id:"reduce",options:{reducers:["mean"]}}]})).build()})]})})]}),$timeRange:new e.gg,$data:n(),actions:[new e.n7({}),new e.vf({})]})}function D(){return new o.WI({title:"Variables",$variables:new e.hT({variables:[new e.gU({name:"server",query:"A.*",value:"server",text:"",delayMs:1e3,options:[]}),new e.gU({name:"pod",query:"A.$server.*",value:"pod",delayMs:1e3,isMulti:!0,text:"",options:[]}),new e.gU({name:"handler",query:"A.$server.$pod.*",value:"handler",delayMs:1e3,text:"",options:[]}),new e.eO({name:"custom",query:"A : 10,B : 20"}),new e.l3({name:"ds",pluginId:"testdata"}),new e.Dm({name:"textbox",value:"default value"})]}),body:new e.QY({direction:"row",children:[new e.fy({body:new e.QY({direction:"column",children:[new e.fy({body:new e.QY({children:[new e.fy({body:e.wX.timeseries().setTitle("handler: $handler").setData(n({alias:"handler: $handler"})).build()}),new e.fy({body:new e.S$({text:"Text: ${textbox}",fontSize:20,align:"center"})}),new e.fy({width:"40%",body:new e.S$({text:"server: ${server} pod:${pod}",fontSize:20,align:"center"})})]})}),new e.fy({body:new e.Gb({title:"Collapsable inner scene",canCollapse:!0,body:new e.QY({direction:"row",children:[new e.fy({body:e.wX.timeseries().setTitle("handler: $handler").setData(n({alias:"handler: $handler"})).build()})]})})})]})})]}),$timeRange:new e.gg,actions:[new e.n7({}),new e.vf({})],controls:[new e.dn({})]})}function P(){return new o.WI({title:"Variables with All values",$variables:new e.hT({variables:[new e.gU({name:"server",query:"A.*",value:"AA",text:"AA",includeAll:!0,defaultToAll:!0,delayMs:1e3,options:[]}),new e.gU({name:"pod",query:"A.$server.*",value:[],delayMs:1e3,isMulti:!0,includeAll:!0,defaultToAll:!0,text:"",options:[]}),new e.gU({name:"handler",query:"A.$server.$pod.*",value:[],delayMs:1e3,includeAll:!0,defaultToAll:!1,isMulti:!0,text:"",options:[]})]}),body:new e.QY({direction:"row",children:[new e.fy({body:e.wX.timeseries().setTitle("handler: $handler").setData(n({alias:"handler: $handler"})).build()}),new e.fy({width:"40%",body:new e.S$({text:"server: ${server} pod:${pod}",fontSize:20,align:"center"})})]}),$timeRange:new e.gg,actions:[new e.n7({}),new e.vf({})],controls:[new e.dn({})]})}function A(){return[{title:"Scene with rows",getScene:I},{title:"Grid with rows and different queries",getScene:u},{title:"Grid with rows and different queries and time ranges",getScene:f},{title:"Multiple grid layouts test",getScene:b},{title:"Variables",getScene:D},{title:"Variables with All values",getScene:P},{title:"Variables - Repeating panels",getScene:R},{title:"Variables - Repeating rows",getScene:B},{title:"Query variable",getScene:w},{title:"Transformations demo",getScene:$}]}const _={};function M(g){if(_[g])return _[g];const v=A().find(y=>y.title===g);return v&&(_[g]=v.getScene()),_[g]}}}]);

//# sourceMappingURL=scenes.45f000684bf1326d8d5a.js.map