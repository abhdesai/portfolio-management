"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3330],{60115:(Gu,xn,G)=>{G.d(xn,{f:()=>he});var wa=G(85960),ka=G(66008);const he=({onChange:y,options:ot,label:st})=>wa.createElement(ka.b,{icon:"plus",label:st,variant:"secondary",options:ot,onChange:y,isFullWidth:!0})},92859:(Gu,xn,G)=>{G.r(xn),G.d(xn,{addStandardCanvasEditorOptions:()=>Po,plugin:()=>a1});var wa=G(12932),ka=G(37496),he=G(56375),y=G(85960),ot=(t=>(t.Center="center",t.Left="left",t.LeftRight="leftright",t.Right="right",t.Scale="scale",t))(ot||{}),st=(t=>(t.Bottom="bottom",t.Center="center",t.Scale="scale",t.Top="top",t.TopBottom="topbottom",t))(st||{}),ee=(t=>(t.Contain="contain",t.Cover="cover",t.Fill="fill",t.Original="original",t.Tile="tile",t))(ee||{}),re=(t=>(t.GET="GET",t.POST="POST",t.PUT="PUT",t))(re||{}),Fu=(t=>(t.Straight="straight",t))(Fu||{});const u1={connections:[]},d1={inlineEditing:!0,showAdvancedTypes:!0};var ne=(t=>(t.Top="top",t.Bottom="bottom",t.Left="left",t.Right="right",t.HorizontalCenter="hcenter",t.VerticalCenter="vcenter",t))(ne||{}),vt=(t=>(t.Left="left",t.Center="center",t.Right="right",t))(vt||{}),Ct=(t=>(t.Top="top",t.Middle="middle",t.Bottom="bottom",t))(Ct||{}),Pe=G(67954),Io=(t=>(t.Straight="straight",t))(Io||{});const zt="#D9D9D9",Ma="#000000",Ku="#F0F4FD",Wu=Pe.config.theme2.colors.text.primary;var Vu=G(73039),U=G(66681),Bo=G(73667),Nr=G(1713),St=G(47257),Ir=G(29165),Hu=G(75682),It=G(1431),Br=G(12457),Yu=G(92904),hr=G(81368),gr=G(84933),_o=G(5106),Sn=G(27436),_r=G(20519),zo=G(13094),De=G(74042),zr=G(24956),ce=G(75064);const Go=({value:t,onChange:e})=>{const[n,r]=(0,y.useState)(""),[a,i]=(0,y.useState)(""),s=({currentTarget:d})=>{i(d.value)},o=({currentTarget:d})=>{r(d.value)},l=d=>()=>{const f=t.filter(p=>p[0]!==d);e(f)},c=()=>{const d=n;let f;t?f=t.filter(p=>p[0]!==d):f=[],f.push([d,a]),f.sort((p,v)=>p[0].localeCompare(v[0])),r(""),i(""),e(f)},u=!n&&!a;return y.createElement("div",null,y.createElement(De.Lh,null,y.createElement(zr.I,{placeholder:"Key",value:n,onChange:o}),y.createElement(zr.I,{placeholder:"Value",value:a,onChange:s}),y.createElement(ce.h,{"aria-label":"add",name:"plus-circle",onClick:c,disabled:u})),y.createElement(De.wc,null,Array.from(t||[]).map(d=>y.createElement(De.Lh,{key:d[0]},y.createElement(zr.I,{disabled:!0,value:d[0]}),y.createElement(zr.I,{disabled:!0,value:d[1]}),y.createElement(ce.h,{"aria-label":"delete",onClick:l(d[0]),name:"trash-alt"})))))};var Gr=G(47475),$u=G(85445),Xu=G(12399),Ta=G(49683),Zu=G(93657);const Fo=(t,e)=>{if(t&&t.endpoint){if(Qu(t.endpoint)){Ta.h$.emit(Gr.SI.alertError,["Cannot call API at Grafana origin."]),e&&e(!1);return}const n=Uu(t);(0,$u.i)().fetch(n).subscribe({error:r=>{Ta.h$.emit(Gr.SI.alertError,["An error has occurred. Check console output for more details."]),console.error("API call error: ",r),e&&e(!1)},complete:()=>{Ta.h$.emit(Gr.SI.alertSuccess,["API call was successful"]),e&&e(!1)}})}},Xe=t=>{const e=(0,Zu.h4)().getCurrent()?.panelInEdit;return(0,Xu.J)().replace(t,e?.scopedVars)},Uu=t=>{const e=[],n=new URL(Xe(t.endpoint));let r={url:n.toString(),method:t.method,data:ju(t),headers:e};return t.headerParams&&t.headerParams.forEach(a=>{e.push([Xe(a[0]),Xe(a[1])])}),t.queryParams&&(t.queryParams?.forEach(a=>{n.searchParams.append(Xe(a[0]),Xe(a[1]))}),r.url=n.toString()),t.method===re.POST&&e.push(["Content-Type",t.contentType]),r.headers=e,r},ju=t=>{let e=t.data?Xe(t.data):"{}";return t.method===re.GET&&(e=void 0),e},Qu=t=>{const e=new URL(t),n=new URL(window.location.origin);return e.origin===n.origin},Ko={settings:{}},qu=[{label:re.GET,value:re.GET},{label:re.POST,value:re.POST},{label:re.PUT,value:re.PUT}],Ju=[{label:"JSON",value:"application/json"},{label:"Text",value:"text/plain"},{label:"JavaScript",value:"application/javascript"},{label:"HTML",value:"text/html"},{label:"XML",value:"application/XML"},{label:"x-www-form-urlencoded",value:"application/x-www-form-urlencoded"}];function td({value:t,context:e,onChange:n}){t||(t=Fr);const a=(0,y.useCallback)((p="")=>{n({...t,endpoint:p})},[n,t]),i=(0,y.useCallback)(p=>{n({...t,data:p})},[n,t]),s=(0,y.useCallback)(p=>{n({...t,method:p})},[n,t]),o=(0,y.useCallback)(p=>{n({...t,contentType:p?.value})},[n,t]),l=p=>p,c=(0,y.useCallback)(p=>{n({...t,queryParams:p})},[n,t]),u=(0,y.useCallback)(p=>{n({...t,headerParams:p})},[n,t]),d=p=>{try{const v=JSON.parse(Xe(p));return y.createElement(Yu.g,{json:v})}catch(v){return v instanceof Error?`Invalid JSON provided: ${v.message}`:"Invalid JSON provided"}},f=p=>{if(p&&p.endpoint)return y.createElement(Ir.zx,{onClick:()=>Fo(p),title:"Test API"},"Test API")};return y.createElement(y.Fragment,null,y.createElement(hr.Z,null,y.createElement(gr._,{label:"Endpoint",labelWidth:13,grow:!0},y.createElement(zo.A,{context:e,value:t?.endpoint,onChange:a,item:Ko}))),y.createElement(hr.Z,null,y.createElement(gr._,{label:"Method",labelWidth:13,grow:!0},y.createElement(_o.S,{value:t?.method,options:qu,onChange:s,fullWidth:!0}))),t?.method!==re.GET&&y.createElement(hr.Z,null,y.createElement(gr._,{label:"Content-Type",labelWidth:13,grow:!0},y.createElement(Sn.Ph,{options:Ju,allowCustomValue:!0,formatCreateLabel:l,value:t?.contentType,onChange:o}))),y.createElement("br",null),y.createElement(_r.g,{label:"Query parameters"},y.createElement(Go,{value:t?.queryParams??[],onChange:c})),y.createElement(_r.g,{label:"Header parameters"},y.createElement(Go,{value:t?.headerParams??[],onChange:u})),t?.method!==re.GET&&t?.contentType&&y.createElement(_r.g,{label:"Payload"},y.createElement(zo.A,{context:e,value:t?.data??"{}",onChange:i,item:{...Ko,settings:{useTextarea:!0}}})),f(t),y.createElement("br",null),t?.method!==re.GET&&t?.contentType===Fr.contentType&&d(t?.data??"{}"))}const ed=[{label:"primary",value:"primary"},{label:"secondary",value:"secondary"},{label:"success",value:"success"},{label:"destructive",value:"destructive"}],rd=({value:t,onChange:e})=>{t||(t=Dn);const n=(0,y.useCallback)(r=>{e({...t,variant:r?.value??Dn.variant})},[e,t]);return y.createElement(y.Fragment,null,y.createElement(hr.Z,null,y.createElement(gr._,{label:"Variant",grow:!0},y.createElement(Sn.Ph,{options:ed,value:t?.variant,onChange:n}))))},Fr={endpoint:"",method:re.POST,data:"{}",contentType:"application/json",queryParams:[],headerParams:[]},Dn={variant:"primary"},nd=({data:t})=>{const e=(0,St.wW)(ad,t),[n,r]=y.useState(!1),a=s=>{r(s)},i=()=>{t?.api&&t?.api?.endpoint&&(r(!0),Fo(t.api,a))};return y.createElement(Ir.zx,{type:"submit",variant:t?.style?.variant,onClick:i,className:e.button},y.createElement("span",null,n&&y.createElement(Hu.$,{inline:!0,className:e.buttonSpinner}),t?.text))},ad=(t,e)=>({button:(0,U.css)({height:"100%",width:"100%",display:"grid","> span":{display:"inline-grid",gridAutoFlow:"column",textAlign:e?.align,fontSize:`${e?.size}px`,color:e?.color}}),buttonSpinner:(0,U.css)({marginRight:t.spacing(.5)})}),id={id:"button",name:"Button",description:"Button",state:Bo.BV.beta,standardEditorConfig:{background:!1},display:nd,defaultSize:{width:150,height:45},getNewOptions:t=>({...t,config:{text:{mode:Nr.xy.Fixed,fixed:"Button"},align:vt.Center,color:{fixed:Ku},size:14,api:Fr,style:Dn},background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??32,height:t?.placement?.height??78,top:t?.placement?.top??100,left:t?.placement?.left??100}}),prepareData:(t,e)=>{const n=()=>{if(e?.api)return e.api={...e.api,method:e.api.method??Fr.method,contentType:e.api.contentType??Fr.contentType},e.api},r={text:e?.text?t.getText(e.text).value():"",align:e.align??vt.Center,size:e.size??14,api:n(),style:e?.style??Dn};return e.color&&(r.color=t.getColor(e.color).value()),r},registerOptionsUI:t=>{const e=["Button"];t.addCustomEditor({category:e,id:"styleSelector",path:"config.style",name:"Style",editor:rd}).addCustomEditor({category:e,id:"textSelector",path:"config.text",name:"Text",editor:Br.$}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:"Text color",editor:It.Lm,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:"Align text",settings:{options:[{value:vt.Left,label:"Left"},{value:vt.Center,label:"Center"},{value:vt.Right,label:"Right"}]},defaultValue:vt.Left}).addNumberInput({category:e,path:"config.size",name:"Text size",settings:{placeholder:"Auto"}}).addCustomEditor({category:e,id:"apiSelector",path:"config.api",name:"API",editor:td})}},od={id:"droneFront",name:"Drone Front",description:"Drone front",display:({data:t})=>{const e=(0,St.wW)(sd),n=`rotate(${t?.rollAngle?t.rollAngle:0}deg)`;return y.createElement("svg",{className:e.droneFront,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 1300 290",style:{transform:n,stroke:zt}},y.createElement("g",{className:"arms",stroke:zt,strokeWidth:"28px"},y.createElement("line",{x1:"510",x2:"320",y1:"100",y2:"150"}),y.createElement("line",{x1:"510",x2:"320",y1:"190",y2:"210"}),y.createElement("line",{x1:"790",x2:"980",y1:"190",y2:"210"}),y.createElement("line",{x1:"790",x2:"980",y1:"100",y2:"150"})),y.createElement("g",{className:"body",stroke:zt,strokeWidth:"28px"},y.createElement("path",{fill:"none",d:" M 510 130 C 510 124 510 110 510 100 C 510 90 530 71 540 70 C 640 61 670 60 760 70 C 770 71 790 90 790 100 Q 790 120 790 130 L 790 130 Q 790 177 790 196 C 790 207 770 225 760 226 C 670 236 640 236 540 226 C 530 226 510 206 510 196 Q 510 177 510 130 Q 510 133 510 130 Z "}),y.createElement("circle",{cx:"650",cy:"160",r:"40",fill:"none"})),y.createElement("g",{className:"motors",stroke:zt,strokeWidth:"28px"},y.createElement("path",{className:"motor",fill:"none",d:" M 320 60 L 250 60 L 250 230 L 260 290 L 310 290 L 320 230 L 320 60 Z "}),y.createElement("path",{className:"motor",fill:"none",d:" M 1050 60 L 980 60 L 980 230 L 990 290 L 1040 290 L 1050 230 L 1050 60 Z "})),y.createElement("g",{className:"propellers",fill:zt},y.createElement("path",{className:"prop",d:" M 270 60 L 300 60 L 300 20 Q 311 30 330 30 Q 349 30 570 10 L 300 10 Q 300 0 290 0 C 286 0 284 0 280 0 Q 270 0 270 10 L 0 10 Q 220 30 240 30 Q 260 30 270 20 L 270 60 Z "}),y.createElement("path",{className:"prop",d:" M 1000 60 L 1030 60 L 1030 20 Q 1041 30 1060 30 Q 1079 30 1300 10 L 1030 10 Q 1030 0 1020 0 C 1016 0 1014 0 1010 0 Q 1000 0 1000 10 L 730 10 Q 950 30 970 30 Q 990 30 1000 20 L 1000 60 Z "})))},defaultSize:{width:100,height:26},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??26,top:t?.placement?.top,left:t?.placement?.left}}),prepareData:(t,e)=>({rollAngle:e?.rollAngle?t.getScalar(e.rollAngle).value():0}),registerOptionsUI:t=>{const e=["Drone Front"];t.addCustomEditor({category:e,id:"rollAngle",path:"config.rollAngle",name:"Roll Angle",editor:It.k9})}},sd=t=>({droneFront:(0,U.css)({transition:"transform 0.4s"})}),ld={id:"droneSide",name:"Drone Side",description:"Drone Side",display:({data:t})=>{const e=(0,St.wW)(cd),n=`rotate(${t?.pitchAngle?t.pitchAngle:0}deg)`;return y.createElement("svg",{className:e.droneSide,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 1300 290",style:{transform:n,stroke:zt}},y.createElement("g",{className:"arms",stroke:zt,strokeWidth:"28px"},y.createElement("line",{x1:"510",x2:"320",y1:"100",y2:"150"}),y.createElement("line",{x1:"510",x2:"320",y1:"190",y2:"210"}),y.createElement("line",{x1:"790",x2:"980",y1:"190",y2:"210"}),y.createElement("line",{x1:"790",x2:"980",y1:"100",y2:"150"})),y.createElement("g",{className:"body",stroke:zt,strokeWidth:"28px"},y.createElement("path",{fill:"none",d:" M 510 130 C 510 124 510 110 510 100 C 510 90 530 71 540 70 C 640 61 670 60 760 70 C 770 71 790 90 790 100 Q 790 120 790 130 L 790 130 Q 790 177 790 196 C 790 207 770 225 760 226 C 670 236 640 236 540 226 C 530 226 510 206 510 196 Q 510 177 510 130 Q 510 133 510 130 Z "})),y.createElement("g",{className:"motors",stroke:zt,strokeWidth:"28px"},y.createElement("path",{className:"motor",fill:"none",d:" M 320 60 L 250 60 L 250 230 L 260 290 L 310 290 L 320 230 L 320 60 Z "}),y.createElement("path",{className:"motor",fill:"none",d:" M 1050 60 L 980 60 L 980 230 L 990 290 L 1040 290 L 1050 230 L 1050 60 Z "})),y.createElement("g",{className:"propellers",fill:zt},y.createElement("path",{className:"prop",d:" M 270 60 L 300 60 L 300 20 Q 311 30 330 30 Q 349 30 570 10 L 300 10 Q 300 0 290 0 C 286 0 284 0 280 0 Q 270 0 270 10 L 0 10 Q 220 30 240 30 Q 260 30 270 20 L 270 60 Z "}),y.createElement("path",{className:"prop",d:" M 1000 60 L 1030 60 L 1030 20 Q 1041 30 1060 30 Q 1079 30 1300 10 L 1030 10 Q 1030 0 1020 0 C 1016 0 1014 0 1010 0 Q 1000 0 1000 10 L 730 10 Q 950 30 970 30 Q 990 30 1000 20 L 1000 60 Z "})))},defaultSize:{width:100,height:26},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??26,top:t?.placement?.top,left:t?.placement?.left}}),prepareData:(t,e)=>({pitchAngle:e?.pitchAngle?t.getScalar(e.pitchAngle).value():0}),registerOptionsUI:t=>{const e=["Drone Side"];t.addCustomEditor({category:e,id:"pitchAngle",path:"config.pitchAngle",name:"Pitch Angle",editor:It.k9})}},cd=t=>({droneSide:(0,U.css)({transition:"transform 0.4s"})}),ud={id:"droneTop",name:"Drone Top",description:"Drone top",display:({data:t})=>{const e=(0,St.wW)(dd),n=`spin ${t?.fRightRotorRPM?60/Math.abs(t.fRightRotorRPM):0}s linear infinite`,r=`spin ${t?.fLeftRotorRPM?60/Math.abs(t.fLeftRotorRPM):0}s linear infinite`,a=`spin ${t?.bRightRotorRPM?60/Math.abs(t.bRightRotorRPM):0}s linear infinite`,i=`spin ${t?.bLeftRotorRPM?60/Math.abs(t.bLeftRotorRPM):0}s linear infinite`,s=`rotate(${t?.yawAngle?t.yawAngle:0}deg)`;return y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"-43 -43 640 640",xmlSpace:"preserve",style:{transform:s,fill:zt}},y.createElement("path",{fillRule:"evenodd",d:" M 137.95 127.967 C 137.14 127.157 136.189 126.58 135.178 126.218 C 138.173 121.545 139.967 116.036 140.125 110.123 L 217.64 151.862 C 214.049 157.411 211.8 163.922 211.386 170.95 L 209.694 199.712 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 Z  M 134.268 426.981 C 130.211 421.314 124.328 417.045 117.482 415.041 L 201.999 330.523 L 201.385 340.955 C 200.67 353.107 202.829 364.914 207.563 375.673 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 Z  M 324.765 373.673 L 228.527 373.673 Q 215.374 358.611 216.361 341.835 L 226.361 171.832 C 226.825 163.94 231.012 157.096 237.146 152.957 L 316.146 152.957 C 322.28 157.096 326.466 163.94 326.931 171.832 L 336.931 341.835 Q 337.918 358.611 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 Z  M 435.81 415.041 C 428.964 417.045 423.081 421.314 419.024 426.981 L 345.727 375.673 C 350.461 364.914 352.62 353.107 351.905 340.955 L 351.291 330.523 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 Z  M 343.596 199.713 L 341.904 170.951 C 341.49 163.923 339.242 157.411 335.651 151.863 L 413.167 110.124 C 413.325 116.037 415.119 121.546 418.114 126.219 C 417.103 126.581 416.152 127.158 415.342 127.968 L 343.596 199.713 L 343.596 199.713 L 343.596 199.713 L 343.596 199.713 L 343.596 199.713 Z  M 444.646 92.771 C 453.744 92.771 461.146 100.172 461.146 109.271 C 461.146 118.369 453.744 125.771 444.646 125.771 C 435.548 125.771 428.146 118.369 428.146 109.271 C 428.146 100.172 435.548 92.771 444.646 92.771 L 444.646 92.771 L 444.646 92.771 L 444.646 92.771 Z  M 108.647 92.771 C 117.745 92.771 125.147 100.172 125.147 109.271 C 125.147 118.369 117.745 125.771 108.647 125.771 C 99.549 125.771 92.147 118.369 92.147 109.271 C 92.147 100.172 99.549 92.771 108.647 92.771 L 108.647 92.771 L 108.647 92.771 Z  M 108.647 461.771 C 99.549 461.771 92.147 454.369 92.147 445.271 C 92.147 436.172 99.549 428.771 108.647 428.771 C 117.745 428.771 125.147 436.172 125.147 445.271 C 125.147 454.369 117.745 461.771 108.647 461.771 L 108.647 461.771 Z  M 92.322 136.202 C 97.086 139.1 102.675 140.771 108.647 140.771 C 114.883 140.771 120.697 138.941 125.594 135.802 C 125.956 136.813 126.534 137.764 127.343 138.573 L 207.342 218.573 C 207.711 218.942 208.109 219.264 208.528 219.54 L 203.212 309.908 C 201.794 310.182 200.44 310.869 199.342 311.967 L 95.343 415.967 C 94.954 416.356 94.62 416.779 94.335 417.224 C 93.651 417.575 92.976 417.942 92.322 418.34 Q 84.615 424.182 81.716 428.946 C 78.817 433.71 77.147 439.299 77.147 445.271 C 77.147 462.64 91.278 476.771 108.647 476.771 C 114.619 476.771 120.208 475.1 124.972 472.202 C 129.736 469.304 132.678 466.36 135.577 461.596 C 138.476 456.832 140.147 451.243 140.147 445.271 C 140.147 443.943 140.055 442.637 139.895 441.352 L 214.997 388.78 C 217.05 391.677 336.242 391.678 338.295 388.78 L 413.398 441.352 C 413.238 442.637 413.146 443.943 413.146 445.271 C 413.146 451.243 414.817 456.832 417.715 461.596 C 420.613 466.36 423.557 469.304 428.321 472.202 C 433.085 475.1 438.674 476.771 444.646 476.771 C 462.015 476.771 476.146 462.64 476.146 445.271 C 476.146 439.299 474.475 433.71 471.577 428.946 C 468.679 424.182 459.642 417.575 458.958 417.224 C 458.672 416.779 458.339 416.356 457.95 415.967 L 353.95 311.967 C 352.852 310.869 351.498 310.182 350.08 309.908 L 344.764 219.54 C 345.183 219.264 345.581 218.942 345.95 218.573 L 425.95 138.573 C 426.76 137.763 427.337 136.812 427.699 135.802 C 432.596 138.941 438.409 140.771 444.646 140.771 C 450.618 140.771 456.207 139.1 460.971 136.202 C 465.735 133.304 468.679 130.36 471.577 125.596 C 474.475 120.832 476.146 115.243 476.146 109.271 C 476.146 91.903 462.015 77.772 444.646 77.772 C 438.674 77.772 433.085 79.442 428.321 82.34 L 416.215 91.446 L 324.765 140.688 C 318.402 136.324 310.718 133.771 302.473 133.771 L 250.819 133.771 C 242.574 133.771 234.89 136.324 228.527 140.688 L 137.078 91.446 L 124.972 82.34 C 120.208 79.442 114.619 77.772 108.647 77.772 C 91.278 77.772 77.147 91.903 77.147 109.271 C 77.147 115.243 78.818 120.832 81.716 125.595 C 84.614 130.358 87.558 133.304 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 Z  M 444.646 461.771 C 435.548 461.771 428.146 454.369 428.146 445.271 C 428.146 436.172 435.548 428.771 444.646 428.771 C 453.744 428.771 461.146 436.172 461.146 445.271 C 461.146 454.369 453.744 461.771 444.646 461.771 Z "}),y.createElement("path",{fillRule:"evenodd",d:" M 259.458 334.235 L 259.458 337.211 L 254.514 337.211 L 254.514 350.795 L 250.842 350.795 L 250.842 337.211 L 245.898 337.211 L 245.898 334.235 L 259.458 334.235 Z  M 266.226 347.939 L 272.586 347.939 L 272.754 350.627 L 272.754 350.627 Q 270.498 350.867 265.074 350.867 L 265.074 350.867 L 265.074 350.867 Q 263.418 350.867 262.434 349.967 L 262.434 349.967 L 262.434 349.967 Q 261.45 349.067 261.426 347.531 L 261.426 347.531 L 261.426 337.499 L 261.426 337.499 Q 261.45 335.963 262.434 335.063 L 262.434 335.063 L 262.434 335.063 Q 263.418 334.163 265.074 334.163 L 265.074 334.163 L 265.074 334.163 Q 270.498 334.163 272.754 334.403 L 272.754 334.403 L 272.586 337.115 L 266.226 337.115 L 266.226 337.115 Q 265.626 337.115 265.362 337.403 L 265.362 337.403 L 265.362 337.403 Q 265.098 337.691 265.098 338.339 L 265.098 338.339 L 265.098 340.859 L 271.698 340.859 L 271.698 343.499 L 265.098 343.499 L 265.098 346.691 L 265.098 346.691 Q 265.098 347.363 265.362 347.651 L 265.362 347.651 L 265.362 347.651 Q 265.626 347.939 266.226 347.939 L 266.226 347.939 Z  M 275.202 333.995 L 278.73 333.995 L 278.73 346.931 L 278.73 346.931 Q 278.73 348.131 280.074 348.131 L 280.074 348.131 L 281.034 348.131 L 281.442 350.603 L 281.442 350.603 Q 280.53 351.083 278.61 351.083 L 278.61 351.083 L 278.61 351.083 Q 277.026 351.083 276.114 350.231 L 276.114 350.231 L 276.114 350.231 Q 275.202 349.379 275.202 347.819 L 275.202 347.819 L 275.202 333.995 Z  M 283.05 333.995 L 286.578 333.995 L 286.578 346.931 L 286.578 346.931 Q 286.578 348.131 287.922 348.131 L 287.922 348.131 L 288.882 348.131 L 289.29 350.603 L 289.29 350.603 Q 288.378 351.083 286.458 351.083 L 286.458 351.083 L 286.458 351.083 Q 284.874 351.083 283.962 350.231 L 283.962 350.231 L 283.962 350.231 Q 283.05 349.379 283.05 347.819 L 283.05 347.819 L 283.05 333.995 Z  M 292.086 335.759 L 292.086 335.759 L 292.086 335.759 Q 293.634 333.923 297.618 333.923 L 297.618 333.923 L 297.618 333.923 Q 301.602 333.923 303.162 335.759 L 303.162 335.759 L 303.162 335.759 Q 304.722 337.595 304.722 342.515 L 304.722 342.515 L 304.722 342.515 Q 304.722 347.435 303.162 349.271 L 303.162 349.271 L 303.162 349.271 Q 301.602 351.107 297.618 351.107 L 297.618 351.107 L 297.618 351.107 Q 293.634 351.107 292.086 349.271 L 292.086 349.271 L 292.086 349.271 Q 290.538 347.435 290.538 342.515 L 290.538 342.515 L 290.538 342.515 Q 290.538 337.595 292.086 335.759 Z  M 300.174 338.051 L 300.174 338.051 L 300.174 338.051 Q 299.49 336.875 297.618 336.875 L 297.618 336.875 L 297.618 336.875 Q 295.746 336.875 295.062 338.051 L 295.062 338.051 L 295.062 338.051 Q 294.378 339.227 294.378 342.515 L 294.378 342.515 L 294.378 342.515 Q 294.378 345.803 295.062 346.979 L 295.062 346.979 L 295.062 346.979 Q 295.746 348.155 297.618 348.155 L 297.618 348.155 L 297.618 348.155 Q 299.49 348.155 300.174 346.979 L 300.174 346.979 L 300.174 346.979 Q 300.858 345.803 300.858 342.515 L 300.858 342.515 L 300.858 342.515 Q 300.858 339.227 300.174 338.051 Z "}),y.createElement("g",{className:"propeller-group"},y.createElement("path",{className:`${e.propeller} ${e.propellerCW}`,style:{animation:a},d:" M 461.563 418.77 L 463.992 416.34 Q 465.495 407.116 466.461 400.395 C 467.426 393.675 469.363 388.087 474.731 383.284 Q 533.862 341.514 538.196 338.859 C 542.529 336.203 548.345 334.299 551.492 338.29 C 554.639 342.282 553.481 346.02 549.419 350.082 L 471.147 428.354 L 461.563 418.77 Z  M 427.729 471.772 L 425.299 474.202 Q 423.797 483.426 422.831 490.146 C 421.866 496.867 419.929 502.454 414.561 507.257 Q 355.43 549.028 351.096 551.683 C 346.763 554.338 340.947 556.243 337.8 552.251 C 334.653 548.26 335.811 544.522 339.873 540.46 L 418.145 462.187 L 427.729 471.772 Z "}),y.createElement("path",{className:`${e.propeller} ${e.propellerCCW}`,style:{animation:n},d:" M 461.563 135.773 L 463.992 138.203 Q 465.495 147.426 466.461 154.147 C 467.426 160.868 469.363 166.455 474.731 171.258 Q 533.862 213.028 538.196 215.684 C 542.529 218.339 548.345 220.244 551.492 216.252 C 554.639 212.26 553.481 208.523 549.419 204.46 L 471.147 126.188 L 461.563 135.773 Z  M 427.729 82.77 L 425.299 80.34 Q 423.797 71.117 422.831 64.396 C 421.866 57.675 419.929 52.088 414.561 47.285 Q 355.43 5.515 351.096 2.859 C 346.763 0.204 340.947 -1.701 337.8 2.291 C 334.653 6.282 335.811 10.02 339.873 14.082 L 418.145 92.355 L 427.729 82.77 Z "}),y.createElement("path",{className:`${e.propeller} ${e.propellerCCW}`,style:{animation:i},d:" M 125.563 471.772 L 127.993 474.202 Q 129.496 483.426 130.461 490.146 C 131.427 496.867 133.363 502.454 138.731 507.257 Q 197.863 549.028 202.196 551.683 C 206.53 554.338 212.345 556.243 215.492 552.251 C 218.639 548.26 217.482 544.522 213.419 540.46 L 135.148 462.187 L 125.563 471.772 Z  M 91.73 418.77 L 89.3 416.34 Q 87.797 407.116 86.832 400.395 C 85.866 393.675 83.93 388.087 78.562 383.284 Q 19.431 341.514 15.097 338.859 C 10.763 336.203 4.948 334.299 1.801 338.29 C -1.346 342.282 -0.189 346.02 3.874 350.082 L 82.146 428.354 L 91.73 418.77 Z "}),y.createElement("path",{className:`${e.propeller} ${e.propellerCW}`,style:{animation:r},d:" M 125.563 82.77 L 127.993 80.34 Q 129.496 71.117 130.461 64.396 C 131.427 57.675 133.363 52.088 138.731 47.285 Q 197.863 5.515 202.196 2.859 C 206.53 0.204 212.345 -1.701 215.492 2.291 C 218.639 6.282 217.482 10.02 213.419 14.083 L 135.147 92.355 L 125.563 82.77 Z  M 91.73 135.773 L 89.3 138.203 Q 87.797 147.426 86.832 154.147 C 85.866 160.868 83.93 166.455 78.562 171.258 Q 19.431 213.028 15.097 215.684 C 10.763 218.339 4.948 220.243 1.801 216.252 C -1.346 212.26 -0.189 208.523 3.874 204.46 L 82.146 126.188 L 91.73 135.773 Z "})))},defaultSize:{width:100,height:100},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}}}),prepareData:(t,e)=>({bRightRotorRPM:e?.bRightRotorRPM?t.getScalar(e.bRightRotorRPM).value():0,bLeftRotorRPM:e?.bLeftRotorRPM?t.getScalar(e.bLeftRotorRPM).value():0,fRightRotorRPM:e?.fRightRotorRPM?t.getScalar(e.fRightRotorRPM).value():0,fLeftRotorRPM:e?.fLeftRotorRPM?t.getScalar(e.fLeftRotorRPM).value():0,yawAngle:e?.yawAngle?t.getScalar(e.yawAngle).value():0}),registerOptionsUI:t=>{const e=["Drone Top"];t.addCustomEditor({category:e,id:"yawAngle",path:"config.yawAngle",name:"Yaw Angle",editor:It.k9}).addCustomEditor({category:e,id:"fRightRotorRPM",path:"config.fRightRotorRPM",name:"Front Right Rotor RPM",editor:It.k9}).addCustomEditor({category:e,id:"fLeftRotorRPM",path:"config.fLeftRotorRPM",name:"Front Left Rotor RPM",editor:It.k9}).addCustomEditor({category:e,id:"bRightRotorRPM",path:"config.bRightRotorRPM",name:"Back Right Rotor RPM",editor:It.k9}).addCustomEditor({category:e,id:"bLeftRotorRPM",path:"config.bLeftRotorRPM",name:"Back Left Rotor RPM",editor:It.k9})}},dd=t=>({propeller:(0,U.css)({transformOrigin:"50% 50%",transformBox:"fill-box",display:"block","@keyframes spin":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}}),propellerCW:(0,U.css)({animationDirection:"normal"}),propellerCCW:(0,U.css)({animationDirection:"reverse"})});var mr=G(86855);class fd extends y.PureComponent{render(){const{data:e}=this.props,n=pd(Pe.config.theme2,e);return y.createElement("div",{className:n.container},y.createElement("span",{className:n.span},e?.text))}}const pd=(t,e)=>({container:(0,U.css)({display:"table",position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",height:"100%",backgroundColor:e?.backgroundColor,border:`${e?.width}px solid ${e?.borderColor}`,borderRadius:"50%"}),span:(0,U.css)({display:"table-cell",verticalAlign:e?.valign,textAlign:e?.align,fontSize:`${e?.size}px`,color:e?.color})}),vd={id:"ellipse",name:"Ellipse",description:"Ellipse",display:fd,defaultSize:{width:160,height:160},getNewOptions:t=>({...t,config:{backgroundColor:{fixed:zt},borderColor:{fixed:"transparent"},width:1,align:vt.Center,valign:Ct.Middle,color:{fixed:Ma}},background:{color:{fixed:"transparent"}}}),prepareData:(t,e)=>{const n={width:e.width,text:e.text?t.getText(e.text).value():"",align:e.align??vt.Center,valign:e.valign??Ct.Middle,size:e.size};return e.backgroundColor&&(n.backgroundColor=t.getColor(e.backgroundColor).value()),e.borderColor&&(n.borderColor=t.getColor(e.borderColor).value()),e.color&&(n.color=t.getColor(e.color).value()),n},registerOptionsUI:t=>{const e=["Ellipse"];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:"Text",editor:Br.$}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:"Text color",editor:mr.L,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:"Align text",settings:{options:[{value:vt.Left,label:"Left"},{value:vt.Center,label:"Center"},{value:vt.Right,label:"Right"}]},defaultValue:vt.Left}).addCustomEditor({category:e,id:"config.borderColor",path:"config.borderColor",name:"Ellipse border color",editor:mr.L,settings:{},defaultValue:{}}).addNumberInput({category:e,path:"config.width",name:"Ellipse border width",settings:{placeholder:"Auto"}}).addCustomEditor({category:e,id:"config.backgroundColor",path:"config.backgroundColor",name:"Ellipse background color",editor:mr.L,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.valign",name:"Vertical align",settings:{options:[{value:Ct.Top,label:"Top"},{value:Ct.Middle,label:"Middle"},{value:Ct.Bottom,label:"Bottom"}]},defaultValue:Ct.Middle}).addNumberInput({category:e,path:"config.size",name:"Text size",settings:{placeholder:"Auto"}})}};var hd=G(91861),Ra=G(73115);const gd=(0,U.css)({path:{vectorEffect:"non-scaling-stroke"}});function md(t){const{data:e}=t;if(!e?.path)return null;const n={fill:e?.fill,stroke:e?.strokeColor,strokeWidth:e?.stroke,height:"100%",width:"100%"};return y.createElement(hd.V,{src:e.path,style:n,className:n.strokeWidth?gd:void 0})}const yd={id:"icon",name:"Icon",description:"SVG Icon display",display:md,getNewOptions:t=>({...t,config:{path:{mode:Nr.Q8.Fixed,fixed:"img/icons/unicons/question-circle.svg"},fill:{fixed:zt}},background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??100,top:t?.placement?.top??100,left:t?.placement?.left??100}}),prepareData:(t,e)=>{let n;e.path&&(n=t.getResource(e.path).value()),(!n||!(0,he.isString)(n))&&(n=(0,Ra.getPublicOrAbsoluteUrl)("img/icons/unicons/question-circle.svg"));const r={path:n,fill:e.fill?t.getColor(e.fill).value():zt};return e.stroke?.width&&e.stroke.color&&e.stroke.width>0&&(r.stroke=e.stroke?.width,r.strokeColor=t.getColor(e.stroke.color).value()),r},registerOptionsUI:t=>{const e=["Icon"];t.addCustomEditor({category:e,id:"iconSelector",path:"config.path",name:"SVG Path",editor:It.Lv,settings:{resourceType:"icon",maxFiles:2e3}}).addCustomEditor({category:e,id:"config.fill",path:"config.fill",name:"Fill color",editor:It.Lm,settings:{},defaultValue:{fixed:"grey"}})}};var wn=G(16162),Wo=G(21964),Kr=G(76738),Ed=G(53231),Vo=G(60190),Ho=G(94372),Yo=G(60484);class bd extends y.PureComponent{render(){const{config:e}=this.props;return y.createElement("div",null,y.createElement("h3",null,"NOT FOUND:"),y.createElement("pre",null,JSON.stringify(e,null,2)))}}const Oa={id:"not-found",name:"Not found",description:"Display when element type is not found in the registry",display:bd,defaultSize:{width:100,height:100},getNewOptions:()=>({config:{}})};let Cd=0;class kn{constructor(e,n,r){this.item=e,this.options=n,this.parent=r,this.UID=Cd++,this.revId=0,this.sizeStyle={},this.dataStyle={},this.initElement=s=>{this.div=s,this.applyLayoutStylesToDiv()},this.applyDrag=s=>{const o=this.options.constraint?.horizontal===ot.Center,l=this.options.constraint?.vertical===st.Center;if((o||l)&&!((this.getScene()?.selecto?.getSelectedTargets().length??0)>1)){const f=this.div?.getBoundingClientRect()?.height??100,p=l?f/4:0;s.target.style.transform=`translate(${s.translate[0]}px, ${s.translate[1]-p}px)`;return}s.target.style.transform=s.transform},this.applyResize=s=>{const o=this.options.placement,l=s.target.style,c=s.delta[0],u=s.delta[1],d=s.direction[0],f=s.direction[1];d===1?(o.width=s.width,l.width=`${o.width}px`):d===-1&&(o.left-=c,o.width=s.width,l.left=`${o.left}px`,l.width=`${o.width}px`),f===-1?(o.top-=u,o.height=s.height,l.top=`${o.top}px`,l.height=`${o.height}px`):f===1&&(o.height=s.height,l.height=`${o.height}px`)},this.handleMouseEnter=(s,o)=>{const l=this.getScene();l?.isEditingEnabled?o||l?.connections.handleMouseEnter(s):this.handleTooltip(s)},this.handleTooltip=s=>{const o=this.getScene();if(o?.tooltipCallback){const l=this.div?.getBoundingClientRect();o.tooltipCallback({anchorPoint:{x:l?.right??s.pageX,y:l?.top??s.pageY},element:this,isOpen:!1})}},this.handleMouseLeave=s=>{const o=this.getScene();o?.tooltipCallback&&!o?.tooltip?.isOpen&&o.tooltipCallback(void 0)},this.onElementClick=s=>{this.onTooltipCallback()},this.onElementKeyDown=s=>{s.key==="Enter"&&(s.currentTarget instanceof HTMLElement||s.currentTarget instanceof SVGElement)&&this.getScene()?.select({targets:[s.currentTarget]})},this.onTooltipCallback=()=>{const s=this.getScene();s?.tooltipCallback&&s.tooltip?.anchorPoint&&s.tooltipCallback({anchorPoint:{x:s.tooltip.anchorPoint.x,y:s.tooltip.anchorPoint.y},element:this,isOpen:!0})};const a=`Element ${Date.now()}`;n||(this.options={type:e.id,name:a}),n.constraint=n.constraint??{vertical:st.Top,horizontal:ot.Left},n.placement=n.placement??{width:100,height:100,top:0,left:0},n.background=n.background??{color:{fixed:"transparent"}},n.border=n.border??{color:{fixed:"dark-green"}};const i=this.getScene();if(!n.name){const s=i?.getNextElementName();n.name=s??a}i?.byName.set(n.name,this)}getScene(){let e=this.parent;for(;e;){if(e.isRoot())return e.scene;e=e.parent}}getName(){return this.options.name}applyLayoutStylesToDiv(e){if(this.isRoot())return;const{constraint:n}=this.options,{vertical:r,horizontal:a}=n??{},i=this.options.placement??{},o={cursor:this.getScene()?.isEditingEnabled?"grab":"auto",pointerEvents:e?"none":"auto",position:"absolute",minWidth:"10px",minHeight:"10px"},l=["0px","0px"];switch(r){case st.Top:i.top=i.top??0,i.height=i.height??100,o.top=`${i.top}px`,o.height=`${i.height}px`,delete i.bottom;break;case st.Bottom:i.bottom=i.bottom??0,i.height=i.height??100,o.bottom=`${i.bottom}px`,o.height=`${i.height}px`,delete i.top;break;case st.TopBottom:i.top=i.top??0,i.bottom=i.bottom??0,o.top=`${i.top}px`,o.bottom=`${i.bottom}px`,delete i.height,o.height="";break;case st.Center:i.top=i.top??0,i.height=i.height??100,l[1]="-50%",o.top=`calc(50% - ${i.top}px)`,o.height=`${i.height}px`,delete i.bottom;break;case st.Scale:i.top=i.top??0,i.bottom=i.bottom??0,o.top=`${i.top}%`,o.bottom=`${i.bottom}%`,delete i.height,o.height="";break}switch(a){case ot.Left:i.left=i.left??0,i.width=i.width??100,o.left=`${i.left}px`,o.width=`${i.width}px`,delete i.right;break;case ot.Right:i.right=i.right??0,i.width=i.width??100,o.right=`${i.right}px`,o.width=`${i.width}px`,delete i.left;break;case ot.LeftRight:i.left=i.left??0,i.right=i.right??0,o.left=`${i.left}px`,o.right=`${i.right}px`,delete i.width,o.width="";break;case ot.Center:i.left=i.left??0,i.width=i.width??100,l[0]="-50%",o.left=`calc(50% - ${i.left}px)`,o.width=`${i.width}px`,delete i.right;break;case ot.Scale:i.left=i.left??0,i.right=i.right??0,o.left=`${i.left}%`,o.right=`${i.right}%`,delete i.width,o.width="";break}if(o.transform=`translate(${l[0]}, ${l[1]})`,this.options.placement=i,this.sizeStyle=o,this.div){for(const c in this.sizeStyle)this.div.style[c]=this.sizeStyle[c];for(const c in this.dataStyle)this.div.style[c]=this.dataStyle[c]}}setPlacementFromConstraint(e,n){const{constraint:r}=this.options,{vertical:a,horizontal:i}=r??{};e||(e=this.div&&this.div.getBoundingClientRect());let s=0;n||(n=this.div&&this.div.parentElement?.getBoundingClientRect(),s=this.parent?.isRoot()?0:parseFloat(getComputedStyle(this.div?.parentElement).borderWidth));const o=e&&n?Math.round(e.top-n.top-s):0,l=e&&n?Math.round(n.bottom-s-e.bottom):0,c=e&&n?Math.round(e.left-n.left-s):0,u=e&&n?Math.round(n.right-s-e.right):0,d={},f=e?.width??100,p=e?.height??100;switch(a){case st.Top:d.top=o,d.height=p;break;case st.Bottom:d.bottom=l,d.height=p;break;case st.TopBottom:d.top=o,d.bottom=l;break;case st.Center:const v=e?o+p/2:0,g=(n?n.height/2:0)-v;d.top=g,d.height=p;break;case st.Scale:d.top=o/(n?.height??p)*100,d.bottom=l/(n?.height??p)*100;break}switch(i){case ot.Left:d.left=c,d.width=f;break;case ot.Right:d.right=u,d.width=f;break;case ot.LeftRight:d.left=c,d.right=u;break;case ot.Center:const v=e?c+f/2:0,g=(n?n.width/2:0)-v;d.left=g,d.width=f;break;case ot.Scale:d.left=c/(n?.width??f)*100,d.right=u/(n?.width??f)*100;break}this.options.placement=d,this.applyLayoutStylesToDiv(),this.revId++,this.getScene()?.save()}updateData(e){this.item.prepareData&&(this.data=this.item.prepareData(e,this.options.config),this.revId++);const{background:n,border:r}=this.options,a={};if(n){if(n.color){const i=e.getColor(n.color);a.backgroundColor=i.value()}if(n.image){const i=e.getResource(n.image);if(i){const s=i.value();if(s)switch(a.backgroundImage=`url("${s}")`,n.size??ee.Contain){case ee.Contain:a.backgroundSize="contain",a.backgroundRepeat="no-repeat";break;case ee.Cover:a.backgroundSize="cover",a.backgroundRepeat="no-repeat";break;case ee.Original:a.backgroundRepeat="no-repeat";break;case ee.Tile:a.backgroundRepeat="repeat";break;case ee.Fill:a.backgroundSize="100% 100%";break}else a.backgroundImage=""}}}if(r&&r.color&&r.width!==void 0){const i=e.getColor(r.color);a.borderWidth=`${r.width}px`,a.borderStyle="solid",a.borderColor=i.value(),a.backgroundImage&&(a.backgroundOrigin="padding-box")}this.dataStyle=a,this.applyLayoutStylesToDiv()}isRoot(){return!1}visit(e){e(this)}onChange(e){this.item.id!==e.type&&(this.item=Vr.getIfExists(e.type)??Oa);const n=this.options.name,r=e.name;this.revId++,this.options={...e};let a=this.parent;for(;a;){if(a.isRoot()){a.scene.save();break}a.revId++,a=a.parent}const i=this.getScene();n!==r&&i&&(Uo(this,i.byName)&&Qo(this,i).forEach(s=>{s.info.targetName=r}),i.byName.delete(n),i.byName.set(r,this))}getSaveModel(){return{...this.options}}render(){const{item:e,div:n}=this,r=this.getScene(),a=n&&r&&r.selecto&&r.selecto.getSelectedTargets().includes(n);return y.createElement("div",{key:this.UID,ref:this.initElement,onMouseEnter:i=>this.handleMouseEnter(i,a),onMouseLeave:r?.isEditingEnabled?void 0:this.handleMouseLeave,onClick:r?.isEditingEnabled?void 0:this.onElementClick,onKeyDown:r?.isEditingEnabled?void 0:this.onElementKeyDown,role:"button",tabIndex:0},y.createElement(e.display,{key:`${this.UID}/${this.revId}`,config:this.options.config,data:this.data,isSelected:a}))}}function $o(t,e){try{let n={targets:[]};if(e instanceof Qt){const r=[];r.push(e?.div),n.targets=r,n.frame=e,t.select(n)}else t.currentLayer=e.parent,n.targets=[e?.div],t.select(n)}catch{Yo.Z.emit(Gr.SI.alertError,["Unable to select element, try selecting element in panel instead"])}}function Mn(t,e){return Xo(t?[...Rn,...rs]:[...Rn],e)}function Xo(t,e){const n={options:[],current:[]},r=[];for(const a of t){const i={label:a.name,value:a.id,description:a.description};if(a.state===Bo.BV.alpha){if(!Pe.Oh)continue;i.label=`${a.name} (Alpha)`,r.push(i)}else n.options.push(i);a.id===e&&n.current.push(i)}for(const a of r)n.options.push(a);return n}function Pa(t,e,n){const r=Vr.getIfExists(t.value)??Oa,a={...r.getNewOptions(),type:r.id,name:""};if(n&&(a.placement={...a.placement,top:n.y,left:n.x}),r.defaultSize&&(a.placement={...a.placement,...r.defaultSize}),e){const i=new kn(r,a,e);i.updateData(e.scene.context),e.elements.push(i),e.scene.save(),e.reinitializeMoveable(),setTimeout(()=>$o(e.scene,i))}}function Zo(t,e,n){const a=t.getPanelData()?.series,i=[],s=new Set;return a?.forEach(o=>{const l=o.fields.filter(c=>!c.config.custom?.hideFrom?.tooltip);if(e.text?.field&&l.some(c=>(0,Ho.CZ)(c,o)===e.text?.field)){const c=l.filter(u=>(0,Ho.CZ)(u,o)===e.text?.field)[0];if(c?.getLinks){const u=c.display?c.display(n):{text:`${n}`,numeric:+n};c.getLinks({calculatedValue:u}).forEach(d=>{const f=`${d.title}/${d.href}`;s.has(f)||(i.push(d),s.add(f))})}}}),i}function xd(t){return t.options.connections&&t.options.connections.length>0}function Uo(t,e){return jo(e).some(r=>r.target===t)}function jo(t){const e=[];for(let n of t.values())n.options.connections&&n.options.connections.forEach((r,a)=>{(0,he.isString)(r.color)&&(r.color={fixed:r.color}),(0,he.isNumber)(r.size)&&(r.size={fixed:2,min:1,max:10});const i=r.targetName?t.get(r.targetName):n.parent;i&&e.push({index:a,source:n,target:i,info:r})});return e}function Qo(t,e){return e.connections.state.filter(n=>n.target===t)}function Sd(t,e){Qo(t,e).forEach(r=>{const i=(r.source.options.connections?.splice(0)??[]).filter(s=>s.targetName!==t.getName());r.source.onChange({...r.source.options,connections:i})})}const Dd=(t,e,n,r)=>{const a=t.left-e.left+t.width/2,i=t.top-e.top+t.height/2,s=a+n.source.x*t.width/2,o=i-n.source.y*t.height/2;let l,c;if(n.targetName){const u=r.div?.getBoundingClientRect();if(u){const d=u.left-e.left+u.width/2,f=u.top-e.top+u.height/2;l=d+n.target.x*u.width/2,c=f-n.target.y*u.height/2}}else{const u=e.width/2,d=e.height/2;l=u+n.target.x*e.width/2,c=d-n.target.y*e.height/2}return{x1:s,y1:o,x2:l,y2:c}},wd=(t,e)=>{if(t){const a=e.context.getPanelData()?.series[0]?.fields.find(i=>i.name=t)?.values;return a?a.length-1:0}return 0},kd=(t,e,n)=>{const r=Pe.config.theme2.colors.text.primary,a=wd(t.size?.field,e),i=t.color?e.context.getColor(t.color).value():r,s=t.size?e.context.getScale(t.size).get(a):n;return{strokeColor:i,strokeWidth:s}},Md={settings:{}},Td=t=>{const{data:e,isSelected:n,config:r}=t,a=(0,St.wW)(qo(e)),i=(0,Kr.R9)(),s=i.instanceState?.scene;let o;o=i.instanceState?.scene?.data.series;const l=(0,wn.Z)(s?.editModeEnabled??(0,Wo.of)(!1)),c=()=>o&&r.text?.field&&u()?"Field not found":o&&r.text?.field&&!e?.text?"No data":e?.text?e.text:"Double click to set field",u=()=>{const d=(0,Vo.g2)(o);return!(0,Vo.w3)(r.text?.field,d)};return l&&n?y.createElement(Rd,{...t}):y.createElement("div",{className:a.container},y.createElement("span",{className:a.span},c()))},Rd=t=>{let{data:e,config:n}=t;const r=(0,Kr.R9)();let a;a=r.instanceState?.scene?.data.series;const i=(0,y.useCallback)(o=>{let l;if(l=r.instanceState?.selected[0],l){const c=l.options;l.onChange({...c,config:{...c.config,text:{fixed:"",field:o,mode:Nr.xy.Field}},background:{color:{field:o,fixed:c.background?.color?.fixed??""}}});const u=r.instanceState?.scene;u&&(u.editModeEnabled.next(!1),u.updateData(u.data))}},[r.instanceState?.scene,r.instanceState?.selected]),s=(0,St.wW)(qo(e));return y.createElement("div",{className:s.inlineEditorContainer},a&&y.createElement(Ed.b,{context:{data:a},value:n.text?.field??"",onChange:i,item:Md}))},qo=t=>e=>({container:(0,U.css)({position:"absolute",height:"100%",width:"100%",display:"table"}),inlineEditorContainer:(0,U.css)({height:"100%",width:"100%",display:"flex",alignItems:"center",padding:e.spacing(1)}),span:(0,U.css)({display:"table-cell",verticalAlign:t?.valign,textAlign:t?.align,fontSize:`${t?.size}px`,color:t?.color})}),Wr={id:"metric-value",name:"Metric Value",description:"Display a field value",display:Td,hasEditMode:!0,defaultSize:{width:260,height:50},getNewOptions:t=>({...t,config:{align:vt.Center,valign:Ct.Middle,color:{fixed:Ma},text:{mode:Nr.xy.Field,fixed:"",field:""},size:20},background:{color:{fixed:zt}},placement:{width:t?.placement?.width,height:t?.placement?.height,top:t?.placement?.top??100,left:t?.placement?.left??100}}),prepareData:(t,e)=>{const n={text:e.text?t.getText(e.text).value():"",align:e.align??vt.Center,valign:e.valign??Ct.Middle,size:e.size};return e.color&&(n.color=t.getColor(e.color).value()),n.links=Zo(t,e,n.text),n},registerOptionsUI:t=>{const e=["Metric value"];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:"Text",editor:Br.$}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:"Text color",editor:mr.L,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:"Align text",settings:{options:[{value:vt.Left,label:"Left"},{value:vt.Center,label:"Center"},{value:vt.Right,label:"Right"}]},defaultValue:vt.Left}).addRadio({category:e,path:"config.valign",name:"Vertical align",settings:{options:[{value:Ct.Top,label:"Top"},{value:Ct.Middle,label:"Middle"},{value:Ct.Bottom,label:"Bottom"}]},defaultValue:Ct.Middle}).addNumberInput({category:e,path:"config.size",name:"Text size",settings:{placeholder:"Auto"}})}};var Jo=G(33808);class Od extends y.PureComponent{render(){const{data:e}=this.props,n=Pd(Pe.config.theme2,e);return y.createElement("div",{className:n.container},y.createElement("span",{className:n.span},e?.text))}}const Pd=(0,Jo.B)((t,e)=>({container:(0,U.css)({position:"absolute",height:"100%",width:"100%",display:"table"}),span:(0,U.css)({display:"table-cell",verticalAlign:e?.valign,textAlign:e?.align,fontSize:`${e?.size}px`,color:e?.color})})),Ld={id:"rectangle",name:"Rectangle",description:"Rectangle",display:Od,defaultSize:{width:240,height:160},getNewOptions:t=>({...t,config:{align:vt.Center,valign:Ct.Middle,color:{fixed:Ma}},background:{color:{fixed:zt}}}),prepareData:(t,e)=>{const n={text:e.text?t.getText(e.text).value():"",align:e.align??vt.Center,valign:e.valign??Ct.Middle,size:e.size};return e.color&&(n.color=t.getColor(e.color).value()),n},registerOptionsUI:t=>{const e=["Rectangle"];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:"Text",editor:Br.$}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:"Text color",editor:mr.L,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:"Align text",settings:{options:[{value:vt.Left,label:"Left"},{value:vt.Center,label:"Center"},{value:vt.Right,label:"Right"}]},defaultValue:vt.Left}).addRadio({category:e,path:"config.valign",name:"Vertical align",settings:{options:[{value:Ct.Top,label:"Top"},{value:Ct.Middle,label:"Middle"},{value:Ct.Bottom,label:"Bottom"}]},defaultValue:Ct.Middle}).addNumberInput({category:e,path:"config.size",name:"Text size",settings:{placeholder:"Auto"}})}},Ad=t=>{const e=(0,St.wW)(Tn(t));return y.createElement("g",{className:e.outline},y.createElement("g",{className:e.server},y.createElement("path",{d:"m2.6953 37.5v20.883c0 7.6725 15.592 13.922 34.805 13.922s34.805-6.2493 34.805-13.922v-20.883"}),y.createElement("path",{d:"m2.6953 16.617v20.883c0 7.7035 15.592 13.922 34.805 13.922s34.805-6.2184 34.805-13.922v-20.883"}),y.createElement("path",{d:"m37.5 30.539c19.212 0 34.805-6.2185 34.805-13.922 0-7.7034-15.592-13.922-34.805-13.922s-34.805 6.2184-34.805 13.922c0 7.7035 15.592 13.922 34.805 13.922z"})),y.createElement("g",{className:e.circleBack},y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -132.86 -110.58)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -122.04 -111.7)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -111.21 -114.77)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})),y.createElement("g",{className:e.circle},y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -52.337 -30.65)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -41.518 -31.769)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -30.688 -34.842)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})))},Nd=t=>{const e=(0,St.wW)(Tn(t));return y.createElement("g",null,y.createElement("g",{className:e.outline,transform:"matrix(1.01 0 0 1.01 -.375 -.375)"},y.createElement("g",{className:e.server},y.createElement("path",{d:"m3.2812 55.659 9.125-52.377h50.188l9.125 52.377"}),y.createElement("path",{d:"m3.2812 56.328c0-2.5246 2.0379-4.5625 4.5625-4.5625h59.313c2.5245 0 4.5625 2.0379 4.5625 4.5625v10.828c0 2.5245-2.038 4.5625-4.5625 4.5625h-59.313c-2.5246 0-4.5625-2.038-4.5625-4.5625z"})),y.createElement("path",{d:"m12.406 61.742h30.69"}),y.createElement("path",{d:"m52.8 51.765v19.953"}),y.createElement("path",{className:e.circleBack,transform:"matrix(2.7592 0 0 2.7592 -109.42 -108.61)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{className:e.circle,transform:"matrix(1.4775 0 0 1.4775 -29.697 -29.479)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})))},Id=t=>{const e=(0,St.wW)(Tn(t));return y.createElement("g",{className:e.outline,transform:"translate(.5 .49865)"},y.createElement("g",{className:e.server},y.createElement("path",{d:"m3.4834 21.768 8.0783-19.456h50.875l8.0784 19.456"}),y.createElement("path",{d:"m2.3125 24.852c0-2.5592 2.0658-4.625 4.625-4.625h60.125c2.5592 0 4.625 2.0658 4.625 4.625v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z"}),y.createElement("path",{d:"m2.3125 42.031c0-2.5592 2.0658-4.6251 4.625-4.6251h60.125c2.5592 0 4.625 2.0659 4.625 4.6251v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z"}),y.createElement("path",{d:"m2.3125 59.172c0-2.5592 2.0658-4.625 4.625-4.625h60.125c2.5592 0 4.625 2.0658 4.625 4.625v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z"})),y.createElement("path",{d:"m11.562 28.797h31.111"}),y.createElement("path",{d:"m52.508 20.227v17.143"}),y.createElement("path",{d:"m11.562 63.117h31.111"}),y.createElement("path",{d:"m52.508 54.547v17.143"}),y.createElement("path",{d:"m11.562 45.977h31.111"}),y.createElement("path",{d:"m52.508 37.406v17.143"}),y.createElement("g",{className:e.circleBack},y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -111.31 -143.2)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -111.31 -126.14)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -111.31 -108.86)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})),y.createElement("g",{className:e.circle},y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -30.794 -63.277)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -30.794 -46.209)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -30.794 -28.93)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})))},Bd=t=>{const e=(0,St.wW)(Tn(t));return y.createElement("g",{className:e.outline},y.createElement("g",{className:e.server},y.createElement("path",{d:"m5.3125 9.6562c0-3.5621 2.8754-6.4375 6.4375-6.4375h51.5c3.5621 0 6.4375 2.8754 6.4375 6.4375v28.625c0 3.5621-2.8754 6.4375-6.4375 6.4375h-51.5c-3.5621 0-6.4375-2.8754-6.4375-6.4375z"}),y.createElement("path",{d:"m2.8125 59.859c0-2.5592 2.0658-4.625 4.625-4.625h60.125c2.5592 0 4.625 2.0658 4.625 4.625v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z"})),y.createElement("path",{d:"m37.5 46.719v2.875"}),y.createElement("path",{d:"m24.625 51.343h25.75"}),y.createElement("path",{d:"m12.062 63.804h31.111"}),y.createElement("path",{d:"m53.008 55.234v17.143"}),y.createElement("path",{className:e.circleBack,transform:"matrix(2.7868 0 0 2.7868 -110.81 -108.2)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{className:e.circle,transform:"matrix(1.4922 0 0 1.4922 -30.294 -28.27)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}))};var _d=(t=>(t.Single="Single",t.Stack="Stack",t.Database="Database",t.Terminal="Terminal",t))(_d||{});const ts=Pe.default.theme2.colors.text.primary,zd={id:"server",name:"Server",description:"Basic server with status",display:({data:t})=>t?y.createElement("svg",{viewBox:"0 0 75 75"},t.type==="Single"?y.createElement(Nd,{...t}):t.type==="Stack"?y.createElement(Id,{...t}):t.type==="Database"?y.createElement(Ad,{...t}):t.type==="Terminal"?y.createElement(Bd,{...t}):null):null,defaultSize:{width:100,height:100},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??100,top:t?.placement?.top,left:t?.placement?.left},config:{type:"Single"}}),prepareData:(t,e)=>({blinkRate:e?.blinkRate?t.getScalar(e.blinkRate).value():0,statusColor:e?.statusColor?t.getColor(e.statusColor).value():"transparent",bulbColor:e?.bulbColor?t.getColor(e.bulbColor).value():"green",type:e.type}),registerOptionsUI:t=>{const e=["Server"];t.addSelect({category:e,path:"config.type",name:"Type",settings:{options:[{value:"Single",label:"Single"},{value:"Stack",label:"Stack"},{value:"Database",label:"Database"},{value:"Terminal",label:"Terminal"}]},defaultValue:"Single"}).addCustomEditor({category:e,id:"statusColor",path:"config.statusColor",name:"Status color",editor:It.Lm,settings:{},defaultValue:{fixed:"transparent"}}).addCustomEditor({category:e,id:"bulbColor",path:"config.bulbColor",name:"Bulb color",editor:It.Lm,settings:{},defaultValue:{fixed:"green"}}).addCustomEditor({category:e,id:"blinkRate",path:"config.blinkRate",name:"Blink rate [hz] (0 = off)",editor:It.k9,settings:{min:0,max:100}})}},Tn=t=>e=>({bulb:(0,U.css)({"@keyframes blink":{"0%":{fillOpacity:0},"50%":{fillOpacity:1},"100%":{fillOpacity:0}}}),server:(0,U.css)({fill:t?.statusColor??"transparent"}),circle:(0,U.css)({animation:`blink ${t?.blinkRate?1/t.blinkRate:0}s infinite step-end`,fill:t?.bulbColor,stroke:"none"}),circleBack:(0,U.css)({fill:ts,stroke:"none",opacity:1}),outline:(0,U.css)({stroke:ts,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4px"})}),Gd=t=>{const{data:e,isSelected:n}=t,r=(0,St.wW)(es(e)),i=(0,Kr.R9)().instanceState?.scene;return(0,wn.Z)(i?.editModeEnabled??(0,Wo.of)(!1))&&n?y.createElement(Fd,{...t}):y.createElement("div",{className:r.container},y.createElement("span",{className:r.span},e?.text?e.text:"Double click to set text"))},Fd=t=>{let{data:e,config:n}=t;const r=(0,Kr.R9)();let a;a=r.instanceState?.scene?.data.series;const i=(0,y.useRef)(n.text?.fixed??"");(0,y.useEffect)(()=>()=>{l(i.current)});const s=u=>{if(u.key==="Enter"){u.preventDefault();const d=r.instanceState?.scene;d&&d.editModeEnabled.next(!1)}},o=u=>{i.current=u.currentTarget.value},l=(0,y.useCallback)(u=>{let d;if(d=r.instanceState?.selected[0],d){const f=d.options;d.onChange({...f,config:{...f.config,text:{...d.options.config.text,fixed:u}}});const p=r.instanceState?.scene;p&&p.updateData(p.data)}},[r.instanceState?.scene,r.instanceState?.selected]),c=(0,St.wW)(es(e));return y.createElement("div",{className:c.inlineEditorContainer},a&&y.createElement(zr.I,{defaultValue:n.text?.fixed??"",onKeyDown:s,onKeyUp:o,autoFocus:!0}))},es=t=>e=>({container:(0,U.css)({position:"absolute",height:"100%",width:"100%",display:"table"}),inlineEditorContainer:(0,U.css)({height:"100%",width:"100%",display:"flex",alignItems:"center",padding:e.spacing(1)}),span:(0,U.css)({display:"table-cell",verticalAlign:t?.valign,textAlign:t?.align,fontSize:`${t?.size}px`,color:t?.color})}),Kd={id:"text",name:"Text",description:"Display text",display:Gd,hasEditMode:!0,defaultSize:{width:100,height:50},getNewOptions:t=>({...t,config:{align:vt.Center,valign:Ct.Middle,color:{fixed:Wu},size:16},placement:{width:t?.placement?.width??100,height:t?.placement?.height??100,top:t?.placement?.top,left:t?.placement?.left}}),prepareData:(t,e)=>{const n={text:e.text?t.getText(e.text).value():"",align:e.align??vt.Center,valign:e.valign??Ct.Middle,size:e.size};return e.color&&(n.color=t.getColor(e.color).value()),n.links=Zo(t,e,n.text),n},registerOptionsUI:t=>{const e=["Text"];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:"Text",editor:Br.$}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:"Text color",editor:mr.L,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:"Align text",settings:{options:[{value:vt.Left,label:"Left"},{value:vt.Center,label:"Center"},{value:vt.Right,label:"Right"}]},defaultValue:vt.Left}).addRadio({category:e,path:"config.valign",name:"Vertical align",settings:{options:[{value:Ct.Top,label:"Top"},{value:Ct.Middle,label:"Middle"},{value:Ct.Bottom,label:"Bottom"}]},defaultValue:Ct.Middle}).addNumberInput({category:e,path:"config.size",name:"Text size",settings:{placeholder:"Auto"}})}},Wd={id:"windTurbine",name:"Wind Turbine",description:"Spinny spinny",display:({data:t})=>{const e=(0,St.wW)(Vd),n=`spin ${t?.rpm?60/Math.abs(t.rpm):0}s linear infinite`;return y.createElement("svg",{viewBox:"0 0 189.326 283.989",preserveAspectRatio:"xMidYMid meet",style:{fill:zt}},y.createElement("symbol",{id:"blade"},y.createElement("path",{fill:"#e6e6e6",id:"blade-front",d:"M14.6491879,1.85011601 C14.2684455,-0.0535962877 10.7150812,-0.815081206 9.06473318,3.37308585 L0.434338747,70.7658933 L8.93805104,91.9607889 L15.4106729,90.437819 L17.5684455,78.3807425 L14.5218097,1.97679814 L14.6491879,1.85011601 Z"}),y.createElement("path",{fill:"#d0d6d7",id:"blade-side",d:"M11.0951276,0.581206497 C10.3336427,0.961948956 9.57215777,1.85011601 8.93735499,3.24640371 L0.306960557,70.6392111 L8.81067285,91.8341067 L3.35359629,70.0044084 L11.0951276,0.581206497 Z"})),y.createElement("g",null,y.createElement("g",{id:"structure",transform:"translate(58.123, 82.664)",fillRule:"nonzero"},y.createElement("polygon",{id:"tower",fill:"#e6e6e6",points:"33.111,10.984 39.965,10.984 44.28,196.176 28.796,196.176"}),y.createElement("path",{id:"yaw",fill:"rgba(0,0,0,0.25)",d:"M40.3454756,23.2948956 L40.7262181,34.8445476 C38.8225058,35.0986079 35.7765661,35.0986079 32.349884,34.337123 L32.7306265,23.2955916 L40.3454756,23.2955916 L40.3454756,23.2948956 Z"}),y.createElement("path",{id:"base",fill:"#d0d6d7",transform:"translate(0 42)",d:"M26.3846868,150.591647 L46.5640371,150.591647 C48.8484919,150.591647 50.7522042,152.49536 50.7522042,154.779814 L50.7522042,158.967981 L22.0691415,158.967981 L22.0691415,154.779814 C22.0691415,152.49536 23.9728538,150.591647 26.2573086,150.591647 L26.3846868,150.591647 Z"}),y.createElement("circle",{id:"nacelle",fill:"#e6e6e6",cx:"36.54",cy:"12",r:"11.93"}),y.createElement("circle",{id:"gearbox",fill:"none",stroke:"#d0d6d7",strokeWidth:"2.75",cx:"36.538",cy:"11.999",r:"5.8"})),y.createElement("g",{className:e.blade,style:{animation:n}},y.createElement("use",{id:"blade1",href:"#blade",x:"83.24",y:"0"}),y.createElement("use",{id:"blade2",href:"#blade",x:"83.24",y:"0",transform:"rotate(120 94.663 94.663)"}),y.createElement("use",{id:"blade3",href:"#blade",x:"83.24",y:"0",transform:"rotate(-120 94.663 94.663)"}))))},defaultSize:{width:100,height:155},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??155,top:t?.placement?.top,left:t?.placement?.left}}),prepareData:(t,e)=>({rpm:e?.rpm?t.getScalar(e.rpm).value():0}),registerOptionsUI:t=>{const e=["Wind Turbine"];t.addCustomEditor({category:e,id:"rpm",path:"config.rpm",name:"RPM",editor:It.k9})}},Vd=t=>({blade:(0,U.css)({transformOrigin:"94.663px 94.663px",transform:"rotate(15deg)","@keyframes spin":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}})}),La={...Wr.getNewOptions(),placement:{...Wr.getNewOptions().placement,...Wr.defaultSize},type:Wr.id,name:"Element 1"},Rn=[Wr,Kd,vd,Ld,yd,zd],rs=[id,Wd,ud,od,ld],Vr=new Vu.B(()=>[...Rn,...rs]);var Vt=(t=>(t.Delete="delete",t.Duplicate="duplicate",t.MoveTop="move-top",t.MoveBottom="move-bottom",t))(Vt||{}),Le=(t=>(t.ElementManagement="element-management",t.SelectedElement="selected-element",t.SelectedConnection="selected-connection",t))(Le||{});const ge=10,On=50,Hd={id:"frame",name:"Frame",description:"Frame",getNewOptions:()=>({config:{}}),display:()=>y.createElement("div",null,"FRAME!")};class Qt extends kn{constructor(e,n,r){super(Hd,e,r),this.options=e,this.parent=r,this.elements=[],this.doAction=(i,s,o=!0,l=!0)=>{switch(i){case Vt.Delete:this.elements=this.elements.filter(d=>d!==s),Sd(s,this.scene),this.scene.byName.delete(s.options.name),this.scene.save(),this.reinitializeMoveable();break;case Vt.Duplicate:if(s.item.id==="frame"){console.log("Can not duplicate frames (yet)",i,s);return}const c=(0,he.cloneDeep)(s.options);if(l){const{constraint:d,placement:f}=s.options,{vertical:p,horizontal:v}=d??{},h={...f};switch(p){case st.Top:h.top==null?h.top=25:h.top+=ge;break;case st.Bottom:h.bottom==null?h.bottom=100:h.bottom-=ge;break;case st.TopBottom:h.top==null?h.top=25:h.top+=ge,h.bottom==null?h.bottom=100:h.bottom-=ge;break;case st.Center:h.top!=null&&(h.top-=ge);break}switch(v){case ot.Left:h.left==null?h.left=On:h.left+=ge;break;case ot.Right:h.right==null?h.right=On:h.right-=ge;break;case ot.LeftRight:h.left==null?h.left=On:h.left+=ge,h.right==null?h.right=On:h.right-=ge;break;case ot.Center:h.left!=null&&(h.left-=ge);break}c.placement=h}c.connections=void 0;const u=new kn(s.item,c,this);u.updateData(this.scene.context),o&&(u.options.name=this.scene.getNextElementName()),this.elements.push(u),this.scene.byName.set(u.options.name,u),this.scene.byName.set(s.options.name,s),this.scene.save(),this.reinitializeMoveable(),setTimeout(()=>{this.scene.targetsToSelect.add(u.div)});break;case Vt.MoveTop:case Vt.MoveBottom:s.parent?.doMove(s,i);break;default:console.log("DO action",i,s);return}},this.scene=n;let{elements:a}=this.options;a||(this.options.elements=a=[]);for(const i of a)if(i.type==="frame")this.elements.push(new Qt(i,n,this));else{const s=Vr.getIfExists(i.type)??Oa;this.elements.push(new kn(s,i,this))}}isRoot(){return!1}updateData(e){super.updateData(e);for(const n of this.elements)n.updateData(e)}reorder(e,n){const r=Array.from(this.elements),[a]=r.splice(e,1);r.splice(n,0,a),this.elements=r,this.reinitializeMoveable()}reorderTree(e,n,r=!1){const a=Array.from(this.elements),i=this.elements.indexOf(e),s=r?this.elements.length-1:this.elements.indexOf(n),[o]=a.splice(i,1);a.splice(s,0,o),this.elements=a,this.reinitializeMoveable()}doMove(e,n){const r=this.elements.filter(a=>a!==e);n===Vt.MoveBottom?r.unshift(e):r.push(e),this.elements=r,this.scene.save(),this.reinitializeMoveable()}reinitializeMoveable(){this.scene.clearCurrentSelection(),setTimeout(()=>this.scene.initMoveable(!0,this.scene.isEditingEnabled))}render(){return y.createElement("div",{key:this.UID,ref:this.initElement},this.elements.map(e=>e.render()))}visit(e){super.visit(e);for(const n of this.elements)e(n)}getSaveModel(){return{...this.options,elements:this.elements.map(e=>e.getSaveModel())}}}var ns=G(93231),Yd=G(34269),as=G(91);function $d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(a){return a?""+t+a:""}).join(" ")}).join(" ")}function Xd(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function me(t,e){return function(n){n&&(t[e]=n)}}function is(t,e,n){return function(r){r&&(t[e][n]=r)}}function Aa(t,e){return function(n){var r=n.prototype;t.forEach(function(a){e(r,a)})}}function Zd(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(a){var i=e[a]||a;i in n||(n[i]=function(){for(var s,o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];var c=(s=this[r])[a].apply(s,o);return c===this[r]?this:c})})}}var Ud=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var a=this.keys,i=this.values,s=a.indexOf(n),o=s===-1?a.length:s;a[o]=n,i[o]=r},t}(),jd=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t}(),Qd=typeof Map=="function",qd=function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t}();function Jd(t,e){var n=[],r=[];return t.forEach(function(a){var i=a[0],s=a[1],o=new qd;n[i]=o,r[s]=o}),n.forEach(function(a,i){a.connect(n[i-1])}),t.filter(function(a,i){return!e[i]}).map(function(a,i){var s=a[0],o=a[1];if(s===o)return[0,0];var l=n[s],c=r[o-1],u=l.getIndex();l.disconnect(),c?l.connect(c,c.next):l.connect(void 0,n[0]);var d=l.getIndex();return[u,d]})}var tf=function(){function t(n,r,a,i,s,o,l,c){this.prevList=n,this.list=r,this.added=a,this.removed=i,this.changed=s,this.maintained=o,this.changedBeforeAdded=l,this.fixed=c}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=Jd(this.changedBeforeAdded,this.fixed),r=this.changed,a=[];this.cacheOrdered=n.filter(function(i,s){var o=i[0],l=i[1],c=r[s],u=c[0],d=c[1];if(o!==l)return a.push([u,d]),!0}),this.cachePureChanged=a},t}();function Hr(t,e,n){var r=Qd?Map:n?jd:Ud,a=n||function(E){return E},i=[],s=[],o=[],l=t.map(a),c=e.map(a),u=new r,d=new r,f=[],p=[],v={},h=[],g=0,m=0;return l.forEach(function(E,b){u.set(E,b)}),c.forEach(function(E,b){d.set(E,b)}),l.forEach(function(E,b){var C=d.get(E);typeof C>"u"?(++m,s.push(b)):v[C]=m}),c.forEach(function(E,b){var C=u.get(E);typeof C>"u"?(i.push(b),++g):(o.push([C,b]),m=v[b]||0,f.push([C-m,b-g]),p.push(b===C),C!==b&&h.push([C,b]))}),s.reverse(),new tf(t,e,i,s,h,o,f,p)}var ef=function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),a=Hr(this.list,r,this.findKeyCallback);return this.list=r,a},t}();const rf=ef;var os="rgb",ss="rgba",ls="hsl",cs="hsla",m1=[os,ss,ls,cs],nf="function",y1="property",E1="array",af="object",of="string",sf="number",Yr="undefined",us=typeof window!==Yr,Ze=typeof document!==Yr&&document,ds=null,b1=function(t){if(!Ze)return"";var e=(Ze.body||Ze.documentElement).style,n=ds.length;if(typeof e[t]!==Yr)return t;for(var r=0;r<n;++r){var a="-"+ds[r]+"-"+t;if(typeof e[a]!==Yr)return a}return""},C1=null,x1=null,S1=null,D1=null,lf=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Rt=1e-7,w1=1/Rt,Pn={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function cf(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}function Ue(t,e,n,r){return(t*r+e*n)/(n+r)}function Ln(t){return typeof t===Yr}function qt(t){return t&&typeof t===af}function wt(t){return Array.isArray(t)}function Ht(t){return typeof t===of}function Na(t){return typeof t===sf}function An(t){return typeof t===nf}function uf(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function fs(t,e,n,r,a){var i=Ia(t,e,n);return i?n:df(t,e,n+1,r,a)}function Ia(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function df(t,e,n,r,a){for(var i=function(c){var u=e[c].trim();if(u===t.close&&!Ia(t,e,c))return{value:c};var d=c,f=ke(a,function(p){var v=p.open;return v===u});if(f&&(d=fs(f,e,c,r,a)),d===-1)return s=c,"break";c=d,s=c},s,o=n;o<r;++o){var l=i(o);if(o=s,typeof l=="object")return l.value;if(l==="break")break}return-1}function Ba(t,e){var n=Ht(e)?{separator:e}:e,r=n.separator,a=r===void 0?",":r,i=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,l=o===void 0?s:o,c=n.openCloseCharacters,u=c===void 0?lf:c,d=u.map(function(S){var M=S.open,w=S.close;return M===w?M:M+"|"+w}).join("|"),f="(\\s*"+a+"\\s*|"+d+"|\\s+)",p=new RegExp(f,"g"),v=t.split(p).filter(function(S){return S&&S!=="undefined"}),h=v.length,g=[],m=[];function E(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var b=function(S){var M=v[S].trim(),w=S,T=ke(u,function(P){var L=P.open;return L===M}),R=ke(u,function(P){var L=P.close;return L===M});if(T){if(w=fs(T,v,S,h,u),w!==-1&&l)return E()&&i||(g.push(v.slice(S,w+1).join("")),S=w,i)?(C=S,"break"):(C=S,"continue")}else if(R&&!Ia(R,v,S)){var k=cf(u);return k.splice(u.indexOf(R),1),{value:Ba(t,{separator:a,isSeparateFirst:i,isSeparateOnlyOpenClose:s,isSeparateOpenClose:l,openCloseCharacters:k})}}else if(uf(M,a)&&!s)return E(),i?(C=S,"break"):(C=S,"continue");w===-1&&(w=h-1),m.push(v.slice(S,w+1).join("")),S=w,C=S},C,D=0;D<h;++D){var x=b(D);if(D=C,typeof x=="object")return x.value;if(x==="break")break}return m.length&&g.push(m.join("")),g}function Ae(t){return Ba(t,"")}function Ne(t){return Ba(t,",")}function _a(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function je(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],a=e[3];return{prefix:n,unit:a,value:parseFloat(r)}}function za(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,n){return n.toUpperCase()})}function Nn(t,e){return e===void 0&&(e="-"),t.replace(/([a-z])([A-Z])/g,function(n,r,a){return""+r+e+a.toLowerCase()})}function k1(t){return[].slice.call(t)}function $r(){return Date.now?Date.now():new Date().getTime()}function we(t,e,n){n===void 0&&(n=-1);for(var r=t.length,a=0;a<r;++a)if(e(t[a],a,t))return a;return n}function ff(t,e,n){n===void 0&&(n=-1);for(var r=t.length,a=r-1;a>=0;--a)if(e(t[a],a,t))return a;return n}function M1(t,e,n){var r=ff(t,e);return r>-1?t[r]:n}function ke(t,e,n){var r=we(t,e);return r>-1?t[r]:n}var ps=function(){var t=$r(),e=us&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=$r(),a=setTimeout(function(){n(r-t)},1e3/60);return a}}(),pf=function(){var t=us&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}}();function Ie(t){return Object.keys(t)}function T1(t){var e=Ie(t);return e.map(function(n){return t[n]})}function R1(t){var e=Ie(t);return e.map(function(n){return[n,t[n]]})}function O1(t,e){e===void 0&&(e=[]),t.sort(function(n,r){var a=e.indexOf(n),i=e.indexOf(r);return i===-1&&a===-1?0:a===-1?1:i===-1?-1:a-i})}function Et(t,e){var n=je(t),r=n.value,a=n.unit;if(qt(e)){var i=e[a];if(i){if(An(i))return i(r);if(Pn[a])return Pn[a](r,i)}}else if(a==="%")return r*e/100;return Pn[a]?Pn[a](r):r}function In(t,e,n){return Math.max(e,Math.min(t,n))}function vs(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[rt(e[0],Rt),rt(e[0]/r,Rt)],[rt(e[1]*r,Rt),rt(e[1],Rt)]].filter(function(a){return a.every(function(i,s){var o=e[s],l=rt(o,Rt);return n?i<=o||i<=l:i>=o||i>=l})})[0]||t}function hs(t,e,n,r){if(!r)return t.map(function(p,v){return In(p,e[v],n[v])});var a=t[0],i=t[1],s=r===!0?a/i:r,o=vs(t,e,!1,s),l=o[0],c=o[1],u=vs(t,n,!0,s),d=u[0],f=u[1];return a<l||i<c?(a=l,i=c):(a>d||i>f)&&(a=d,i=f),[a,i]}function vf(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function Ga(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function kt(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=Math.atan2(r,n);return a>=0?a:a+Math.PI*2}function hf(t){return[0,1].map(function(e){return Ga(t.map(function(n){return n[e]}))})}function Fa(t){var e=hf(t),n=kt(e,t[0]),r=kt(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function oe(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function rt(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function gs(t,e){return t.forEach(function(n,r){t[r]=rt(t[r],e)}),t}function P1(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function L1(t,e,n){var r=!1;return t.replace(e,function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return r?a[0]:(r=!0,Ht(n)?n:n.apply(void 0,a))})}function A1(t){return t.reduce(function(e,n){return e.concat(n)},[])}function gf(t){return t.reduce(function(e,n){return wt(n)?e.push.apply(e,gf(n)):e.push(n),e},[])}function N1(t,e){t.indexOf(e)===-1&&t.push(e)}function mf(t){return t.replace("#","")}function ms(t){var e=mf(t),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16),i=parseInt(e.substring(6,8),16)/255;return isNaN(i)&&(i=1),[n,r,a,i]}function yf(t){var e=t.charAt(1),n=t.charAt(2),r=t.charAt(3),a=t.charAt(4),i=["#",e,e,n,n,r,r,a,a];return i.join("")}function Ef(t){var e,n=t[0],r=t[1],a=t[2];n<0&&(n+=Math.floor((Math.abs(n)+360)/360)*360),n%=360;var i=(1-Math.abs(2*a-1))*r,s=i*(1-Math.abs(n/60%2-1)),o=a-i/2,l;return n<60?l=[i,s,0]:n<120?l=[s,i,0]:n<180?l=[0,i,s]:n<240?l=[0,s,i]:n<300?l=[s,0,i]:n<360?l=[i,0,s]:l=[0,0,0],[Math.round((l[0]+o)*255),Math.round((l[1]+o)*255),Math.round((l[2]+o)*255),(e=t[3])!==null&&e!==void 0?e:1]}function I1(t){if(t.charAt(0)==="#")return t.length===4||t.length===5?ms(yf(t)):ms(t);if(t.indexOf("(")!==-1){var e=_a(t),n=e.prefix,r=e.value;if(!n||!r)return;var a=Ne(r),i=[0,0,0,1],s=a.length;switch(n){case os:case ss:for(var o=0;o<s;++o)i[o]=parseFloat(a[o]);return i;case ls:case cs:for(var o=0;o<s;++o)a[o].indexOf("%")!==-1?i[o]=parseFloat(a[o])/100:i[o]=parseFloat(a[o]);return Ef(i)}}}function B1(t,e){return Ze?e?Ze.querySelectorAll(t):Ze.querySelector(t):e?[]:null}function Pt(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function Ka(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function ys(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function _1(t,e){if(!t||!e||!e.length)return{};var n;if(t instanceof Element)n=t;else if(t.length)n=t[0];else return{};for(var r={},a=Be(n).getComputedStyle(n),i=e.length,s=0;s<i;++s)r[e[s]]=a[e[s]];return r}function Gt(t,e,n,r){t.addEventListener(e,n,r)}function _t(t,e,n,r){t.removeEventListener(e,n,r)}function ue(t){return t?.ownerDocument||Ze}function z1(t){return ue(t).documentElement}function G1(t){return ue(t).body}function Be(t){var e;return((e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function bf(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function Es(t){return qt(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Wa=function(t,e){return Wa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},Wa(t,e)};function Qe(t,e){Wa(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var _e=function(){return _e=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_e.apply(this,arguments)};function bs(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function Cf(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}function Va(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function Ha(t,e){var n=Object.keys(t),r=Object.keys(e),a=Hr(n,r,function(l){return l}),i={},s={},o={};return a.added.forEach(function(l){var c=r[l];i[c]=e[c]}),a.removed.forEach(function(l){var c=n[l];s[c]=t[c]}),a.maintained.forEach(function(l){var c=l[0],u=n[c],d=[t[u],e[u]];t[u]!==e[u]&&(o[u]=d)}),{added:i,removed:s,changed:o}}function Cs(t){t.forEach(function(e){e()})}function xs(t){var e=0;return t.map(function(n){return n==null?"$compat"+ ++e:""+n})}function Ss(t,e,n,r){if(Ht(t)||Na(t))return new wf("text_"+t,e,n,r,null,{});var a=typeof t.type=="string"?kf:t.type.prototype.render?Tf:Mf;return new a(t.type,e,n,r,t.ref,t.props)}function Ds(t){var e=[];return t.forEach(function(n){e=e.concat(wt(n)?Ds(n):n)}),e}function ws(t){var e=t.className,n=bs(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function Ya(t,e){if(!e)return t;for(var n in e)Ln(t[n])&&(t[n]=e[n]);return t}function se(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=e||{},i=a.key,s=a.ref,o=bs(a,["key","ref"]);return{type:t,key:i,ref:s,props:_e(_e({},o),{children:Ds(n).filter(function(l){return l!=null&&l!==!1})})}}var Xr=function(){function t(n,r,a,i,s,o){o===void 0&&(o={}),this.type=n,this.key=r,this.index=a,this.container=i,this.ref=s,this.props=o,this._providers=[]}var e=t.prototype;return e._should=function(n,r){return!0},e._update=function(n,r,a,i){if(this.base&&!Ht(r)&&!i&&!this._should(r.props,a))return!1;this.original=r,this._setState(a);var s=this.props;return Ht(r)||(this.props=r.props,this.ref=r.ref),this._render(n,this.base?s:{},a),!0},e._mounted=function(){var n=this.ref;n&&n(this.base)},e._setState=function(n){},e._updated=function(){var n=this.ref;n&&n(this.base)},e._destroy=function(){var n=this.ref;n&&n(null)},t}();function xf(t,e,n){var r=Ha(t,e),a=r.added,i=r.removed,s=r.changed;for(var o in a)n.setAttribute(o,a[o]);for(var o in s)n.setAttribute(o,s[o][1]);for(var o in i)n.removeAttribute(o)}function Sf(t,e,n){var r=Ha(t,e),a=r.added,i=r.removed,s=r.changed;for(var o in i)n.removeEventListener(o);for(var o in a)n.addEventListener(o,a[o]);for(var o in s)n.removeEventListener(o),n.addEventListener(o,s[o][1]);for(var o in i)n.removeEventListener(o)}function Df(t,e,n){var r=n.style,a=Ha(t,e),i=a.added,s=a.removed,o=a.changed;for(var l in i){var c=Nn(l,"-");r.setProperty?r.setProperty(c,i[l]):r[c]=i[l]}for(var l in o){var c=Nn(l,"-");r.setProperty?r.setProperty(c,o[l][1]):r[c]=o[l][1]}for(var l in s){var c=Nn(l,"-");r.removeProperty?r.removeProperty(c):r[c]=""}}function ks(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r.replace("on","").toLowerCase()]=t[r]:e[r]=t[r];return{attributes:e,events:n}}var wf=function(t){Qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n._render=function(r){var a=this,i=!this.base;return i&&(this.base=document.createTextNode(this.type.replace("text_",""))),r.push(function(){i?a._mounted():a._updated()}),!0},n._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(Xr),kf=function(t){Qe(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.events={},r._isSVG=!1,r}var n=e.prototype;return n.addEventListener=function(r,a){var i=this.events;i[r]=function(s){s.nativeEvent=s,a(s)},this.base.addEventListener(r,i[r])},n.removeEventListener=function(r){var a=this.events;this.base.removeEventListener(r,a[r]),delete a[r]},n._should=function(r){return Va(this.props,r)},n._render=function(r,a){var i=this,s=!this.base;if(s){var o=this._hasSVG();this._isSVG=o;var l=this.props.portalContainer;if(!l){var c=this.type;o?l=document.createElementNS("http://www.w3.org/2000/svg",c):l=document.createElement(c)}this.base=l}Ur(this,this._providers,this.props.children,r,null);var u=this.base,d=ks(a),f=d.attributes,p=d.events,v=ks(this.props),h=v.attributes,g=v.events;return xf(ws(f),ws(h),u),Sf(p,g,this),Df(a.style||{},this.props.style||{},u),r.push(function(){s?i._mounted():i._updated()}),!0},n._unmount=function(){var r=this.events,a=this.base;for(var i in r)a.removeEventListener(i,r[i]);this._providers.forEach(function(s){s._unmount()}),this.events={},this.props.portalContainer||a.parentNode.removeChild(a)},n._hasSVG=function(){if(this._isSVG||this.type==="svg")return!0;var r=$a(this.container);return r&&"ownerSVGElement"in r},e}(Xr);function $a(t){if(!t)return null;var e=t.base;return e instanceof Node?e:$a(t.container)}function Zr(t){if(!t)return null;if(t instanceof Node)return t;var e=t.$_provider._providers;return e.length?Zr(e[0].base):null}var Mf=function(t){Qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n._render=function(r){var a=this.type(this.props);return Ur(this,this._providers,a?[a]:[],r),!0},n._unmount=function(){this._providers.forEach(function(r){r._unmount()})},e}(Xr),Ms=function(t){Qe(e,t);function e(r){var a=t.call(this,"container","container",0,null)||this;return a.base=r,a}var n=e.prototype;return n._render=function(){return!0},n._unmount=function(){},e}(Xr),Tf=function(t){Qe(e,t);function e(r,a,i,s,o,l){return l===void 0&&(l={}),t.call(this,r,a,i,s,o,Ya(l,r.defaultProps))||this}var n=e.prototype;return n._should=function(r,a){return this.base.shouldComponentUpdate(Ya(r,this.type.defaultProps),a||this.base.state)},n._render=function(r,a){var i=this;this.props=Ya(this.props,this.type.defaultProps);var s=!this.base;s?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props;var o=this.base,l=o.state,c=o.render();c&&c.props&&!c.props.children.length&&(c.props.children=this.props.children),Ur(this,this._providers,c?[c]:[],r),r.push(function(){s?(i._mounted(),o.componentDidMount()):(i._updated(),o.componentDidUpdate(a,l))})},n._setState=function(r){var a=this.base;!a||!r||(a.state=r)},n._unmount=function(){this._providers.forEach(function(r){r._unmount()}),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},e}(Xr),Xa=function(){function t(n){n===void 0&&(n={}),this.props=n,this.state={},this.$_timer=0,this.$_state={}}var e=t.prototype;return e.shouldComponentUpdate=function(n,r){return!0},e.render=function(){return null},e.setState=function(n,r,a){var i=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=_e(_e({},this.$_state),n),a?this.$_setState(r,a):this.$_timer=setTimeout(function(){i.$_timer=0,i.$_setState(r,a)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var a=[],i=this.$_provider,s=Ur(i.container,[i],[i.original],a,_e(_e({},this.state),this.$_state),r);s&&(n&&a.push(n),Cs(a))},t}(),Za=function(t){Qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,a){return Va(this.props,r)||Va(this.state,a)},e}(Xa),Rf=function(t){Qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.componentDidMount=function(){var r=this.props,a=r.element,i=r.container;this._portalProvider=new Ms(i),Bn(a,i,this._portalProvider)},n.componentDidUpdate=function(){var r=this.props,a=r.element,i=r.container;Bn(a,i,this._portalProvider)},n.componentWillUnmount=function(){var r=this.props.container;Bn(null,r,this._portalProvider),this._portalProvider=null},e}(Za);function Of(t,e,n){var r=[];Ur(t,t._providers,e,r,n),Cs(r)}function Pf(t,e){for(var n=t._providers,r=n.length,a=e.index+1;a<r;++a){var i=Zr(n[a].base);if(i)return i}return null}function Lf(t,e,n){var r=n.map(function(l){return Ht(l)?null:l.key}),a=xs(e.map(function(l){return l.key})),i=xs(r),s=Hr(a,i,function(l){return l});s.removed.forEach(function(l){e.splice(l,1)[0]._unmount()}),s.ordered.forEach(function(l){var c=l[0],u=l[1],d=e.splice(c,1)[0];e.splice(u,0,d);var f=Zr(d.base),p=Zr(e[u+1]&&e[u+1].base);f&&f.parentNode.insertBefore(f,p)}),s.added.forEach(function(l){e.splice(l,0,Ss(n[l],r[l],l,t))});var o=s.maintained.filter(function(l){var c=l[0],u=l[1],d=n[u],f=e[u],p=Ht(d)?"text_"+d:d.type;return p!==f.type?(f._unmount(),e.splice(u,1,Ss(d,r[u],u,t)),!0):(f.index=u,!1)});return Cf(s.added,o.map(function(l){var c=l[0],u=l[1];return u}))}function Ur(t,e,n,r,a,i){var s=Lf(t,e,n),o=e.filter(function(c,u){return c._update(r,n[u],a,i)}),l=$a(t);return l&&s.reverse().forEach(function(c){var u=e[c],d=Zr(u.base);if(d&&l!==d&&!d.parentNode){var f=Pf(t,u);l.insertBefore(d,f)}}),o.length>0}function Bn(t,e,n){n===void 0&&(n=e.__REACT_COMPAT__);var r=!!n;return n||(n=new Ms(e)),Of(n,t?[t]:[]),r||(e.__REACT_COMPAT__=n),n}function Ts(t,e,n){var r=e.__REACT_COMPAT__;t&&!r&&(e.innerHTML=""),Bn(t,e,r),n&&n()}function Af(t,e){return se(Rf,{element:t,container:e})}var Nf="simple-1.1.0";function Ua(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function Rs(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function If(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function ja(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function Os(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function Bf(t,e){var n=ja("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function Qa(t){return t.replace(/_/g,".")}function jr(t,e){var n=null,r="-1";return Ua(t,function(a){var i=ja("("+a.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!i||a.brand?!1:(n=a,r=i[3]||"-1",a.versionAlias?r=a.versionAlias:a.versionTest&&(r=Bf(a.versionTest.toLowerCase(),e)||r),r=Qa(r),!0)}),{preset:n,version:r}}function _n(t,e){var n={brand:"",version:"-1"};return Ua(t,function(r){var a=Ps(e,r);return a?(n.brand=r.id,n.version=r.versionAlias||a.version,n.version!=="-1"):!1}),n}function Ps(t,e){return Rs(t,function(n){var r=n.brand;return ja(""+e.test,r.toLowerCase())})}var Ls=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],As=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],qa=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Ns=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Is=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"mac os x",id:"mac"},{test:"android",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Bs(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,a=n[0],i={name:a.brand,version:a.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!_n(Ns,n).brand},s={name:"unknown",version:"-1",majorVersion:-1};i.webkit=!i.chromium&&Ua(qa,function(f){return Ps(n,f)});var o=_n(As,n);if(i.chromium=!!o.brand,i.chromiumVersion=o.version,!i.chromium){var l=_n(qa,n);i.webkit=!!l.brand,i.webkitVersion=l.version}if(t){var c=t.platform.toLowerCase(),u=Rs(Is,function(f){return new RegExp(""+f.test,"g").exec(c)});s.name=u?u.id:c,s.version=t.platformVersion}var d=_n(Ls,n);return d.brand&&(i.name=d.brand,i.version=t?t.uaFullVersion:d.version),navigator.platform==="Linux armv8l"?s.name="android":i.webkit&&(s.name=r?"ios":"mac"),s.name==="ios"&&i.webview&&(i.version="-1"),s.version=Qa(s.version),i.version=Qa(i.version),s.majorVersion=parseInt(s.version,10),i.majorVersion=parseInt(i.version,10),{browser:i,os:s,isMobile:r,isHints:!0}}function _f(t){var e=If(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:!!jr(Ns,e).preset,chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},a={name:"unknown",version:"-1",majorVersion:-1},i=jr(Ls,e),s=i.preset,o=i.version,l=jr(Is,e),c=l.preset,u=l.version,d=jr(As,e);if(r.chromium=!!d.preset,r.chromiumVersion=d.version,!r.chromium){var f=jr(qa,e);r.webkit=!!f.preset,r.webkitVersion=f.version}return c&&(a.name=c.id,a.version=u,a.majorVersion=parseInt(u,10)),s&&(r.name=s.id,r.version=o,r.webview&&a.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:a,isMobile:n,isHints:!1}}function F1(t){return Os()?navigator.userAgentData.getHighEntropyValues(["architecture","model","platform","platformVersion","uaFullVersion"]).then(function(e){var n=Bs(e);return t&&t(n),n}):(t&&t(Ja()),typeof Promise>"u"||!Promise?null:Promise.resolve(Ja()))}function Ja(t){return typeof t>"u"&&Os()?Bs():_f(t)}const zf=Ja;function Gf(t,e,n,r,a,i){for(var s=0;s<a;++s){var o=n+s*a,l=r+s*a;t[o]+=t[l]*i,e[o]+=e[l]*i}}function Ff(t,e,n,r,a){for(var i=0;i<a;++i){var s=n+i*a,o=r+i*a,l=t[s],c=e[s];t[s]=t[o],t[o]=l,e[s]=e[o],e[o]=c}}function Kf(t,e,n,r,a){for(var i=0;i<r;++i){var s=n+i*r;t[s]/=a,e[s]/=a}}function _s(t,e,n){n===void 0&&(n=Math.sqrt(t.length));for(var r=t.slice(),a=0;a<n;++a)r[a*n+e-1]=0,r[(e-1)*n+a]=0;return r[(e-1)*(n+1)]=1,r}function de(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=Dt(e),a=0;a<e;++a){var i=e*a+a;if(!rt(n[i],Rt)){for(var s=a+1;s<e;++s)if(n[e*a+s]){Ff(n,r,a,s,e);break}}if(!rt(n[i],Rt))return[];Kf(n,r,a,e,n[i]);for(var s=0;s<e;++s){var o=s,l=s+a*e,c=n[l];!rt(c,Rt)||a===s||Gf(n,r,o,a,e,-c)}}return r}function Wf(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var a=0;a<e;++a)n[a*e+r]=t[e*r+a];return n}function zs(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],a=0;a<e-1;++a)n[a]=t[e*(e-1)+a]/r;return n[e-1]=0,n}function Vf(t,e){for(var n=Dt(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function qe(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function ye(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=Dt(n),a=Math.min(e,n),i=0;i<a-1;++i){for(var s=0;s<a-1;++s)r[i*n+s]=t[i*e+s];r[(i+1)*n-1]=t[(i+1)*e-1],r[(n-1)*n+i]=t[(e-1)*e+i]}return r[n*n-1]=t[e*e-1],r}function ti(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Dt(t);return e.forEach(function(a){r=mt(r,a,t)}),r}function mt(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],a=t.length/n,i=e.length/a;if(a){if(!i)return t}else return e;for(var s=0;s<n;++s)for(var o=0;o<i;++o){r[o*n+s]=0;for(var l=0;l<a;++l)r[o*n+s]+=t[l*n+s]*e[o*a+l]}return r}function ct(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),a=0;a<n;++a)r[a]=r[a]+e[a];return r}function j(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),a=0;a<n;++a)r[a]=r[a]-e[a];return r}function Hf(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function Gs(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function Ft(t,e,n){n===void 0&&(n=e.length);var r=mt(t,e,n),a=r[n-1];return r.map(function(i){return i/a})}function Yf(t,e){return mt(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function $f(t,e){return mt(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function Xf(t,e){return mt(t,yr(e,4))}function zn(t,e){var n=e[0],r=n===void 0?1:n,a=e[1],i=a===void 0?1:a,s=e[2],o=s===void 0?1:s;return mt(t,[r,0,0,0,0,i,0,0,0,0,o,0,0,0,0,1],4)}function Qr(t,e){return Ft(yr(e,3),qe(t,3))}function ei(t,e){var n=e[0],r=n===void 0?0:n,a=e[1],i=a===void 0?0:a,s=e[2],o=s===void 0?0:s;return mt(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,i,o,1],4)}function ri(t,e){return mt(t,e,4)}function yr(t,e){var n=Math.cos(t),r=Math.sin(t),a=Dt(e);return a[0]=n,a[1]=r,a[e]=-r,a[e+1]=n,a}function Dt(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function ni(t,e){for(var n=Dt(e),r=Math.min(t.length,e-1),a=0;a<r;++a)n[(e+1)*a]=t[a];return n}function qr(t,e){for(var n=Dt(e),r=Math.min(t.length,e-1),a=0;a<r;++a)n[e*(e-1)+a]=t[a];return n}function ai(t,e,n,r,a,i,s,o){var l=t[0],c=t[1],u=e[0],d=e[1],f=n[0],p=n[1],v=r[0],h=r[1],g=a[0],m=a[1],E=i[0],b=i[1],C=s[0],D=s[1],x=o[0],S=o[1],M=[l,0,u,0,f,0,v,0,c,0,d,0,p,0,h,0,1,0,1,0,1,0,1,0,0,l,0,u,0,f,0,v,0,c,0,d,0,p,0,h,0,1,0,1,0,1,0,1,-g*l,-m*l,-E*u,-b*u,-C*f,-D*f,-x*v,-S*v,-g*c,-m*c,-E*d,-b*d,-C*p,-D*p,-x*h,-S*h],w=de(M,8);if(!w.length)return[];var T=mt(w,[g,m,E,b,C,D,x,S],8);return T[8]=1,ye(Wf(T),3,4)}function K1(t){return[0,1].map(function(e){return average(t.map(function(n){return n[e]}))})}var Jr=function(){return Jr=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Jr.apply(this,arguments)};function ii(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function tn(t,e){return e===void 0&&(e=0),Er(Je(t,e))}function W1(t){return tn(getComputedStyle(t).transform)}function Gn(t,e){var n=Ft(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function Zf(t,e){e===void 0&&(e=document.body);for(var n=t,r=ii();n;){var a=getComputedStyle(n).transform;if(r=ri(tn(a),r),n===e)break;n=n.parentElement}return r=de(r,4),r[12]=0,r[13]=0,r[14]=0,r}function Er(t){var e=ii();return t.forEach(function(n){var r=n.matrixFunction,a=n.functionValue;r&&(e=r(e,a))}),e}function Je(t,e){e===void 0&&(e=0);var n=wt(t)?t:Ae(t);return n.map(function(r){var a=_a(r),i=a.prefix,s=a.value,o=null,l=i,c="";if(i==="translate"||i==="translateX"||i==="translate3d"){var u=qt(e)?Jr(Jr({},e),{"o%":e["%"]}):{"%":e,"o%":e},d=Ne(s).map(function(P,L){return L===0&&"x%"in u?u["%"]=e["x%"]:L===1&&"y%"in u?u["%"]=e["y%"]:u["%"]=e["o%"],Et(P,u)}),f=d[0],p=d[1],v=p===void 0?0:p,h=d[2],g=h===void 0?0:h;o=ei,c=[f,v,g]}else if(i==="translateY"){var m=qt(e)?Jr({"%":e["y%"]},e):{"%":e},v=Et(s,m);o=ei,c=[0,v,0]}else if(i==="translateZ"){var g=parseFloat(s);o=ei,c=[0,0,g]}else if(i==="scale"||i==="scale3d"){var E=Ne(s).map(function(P){return parseFloat(P)}),b=E[0],C=E[1],D=C===void 0?b:C,x=E[2],S=x===void 0?1:x;o=zn,c=[b,D,S]}else if(i==="scaleX"){var b=parseFloat(s);o=zn,c=[b,1,1]}else if(i==="scaleY"){var D=parseFloat(s);o=zn,c=[1,D,1]}else if(i==="scaleZ"){var S=parseFloat(s);o=zn,c=[1,1,S]}else if(i==="rotate"||i==="rotateZ"||i==="rotateX"||i==="rotateY"){var M=je(s),w=M.unit,T=M.value,R=w==="rad"?T:T*Math.PI/180;i==="rotate"||i==="rotateZ"?(l="rotateZ",o=Xf):i==="rotateX"?o=Yf:i==="rotateY"&&(o=$f),c=R}else if(i==="matrix3d")o=ri,c=Ne(s).map(function(P){return parseFloat(P)});else if(i==="matrix"){var k=Ne(s).map(function(P){return parseFloat(P)});o=ri,c=[k[0],k[1],0,0,k[2],k[3],0,0,0,0,1,0,k[4],k[5],0,1]}else l="";return{name:i,functionName:l,value:s,matrixFunction:o,functionValue:c}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var oi=function(t,e){return oi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},oi(t,e)};function Uf(t,e){oi(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Fs=typeof Map=="function"?void 0:function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}}(),jf=function(t){Uf(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,Fs)||this}return e}(rf);function br(t,e){return Hr(t,e,Fs)}const Ks=jf;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function tr(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}function Yt(t){return rt(t,Rt)}function Qf(t,e){return t.every(function(n,r){return Yt(n-e[r])===0})}function qf(t,e){return!Yt(t[0]-e[0])&&!Yt(t[1]-e[1])}function Jf(t){return t.reduce(function(e,n){return e.push.apply(e,n),e},[])}function en(t){return t.length<3?0:Math.abs(vf(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function si(t,e){var n=e.width,r=e.height,a=e.left,i=e.top,s=ze(t),o=s.minX,l=s.minY,c=s.maxX,u=s.maxY,d=n/(c-o),f=r/(u-l);return t.map(function(p){return[a+(p[0]-o)*d,i+(p[1]-l)*f]})}function ze(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function Fn(t,e,n){var r=t[0],a=t[1],i=ze(e),s=i.minX,o=i.maxX,l=[[s,a],[o,a]],c=er(l[0],l[1]),u=ci(e),d=[];if(u.forEach(function(v){var h=er(v[0],v[1]),g=v[0];if(Qf(c,h))d.push({pos:t,line:v,type:"line"});else{var m=li(Kn(c,h),[l,v]);m.forEach(function(E){v.some(function(b){return qf(b,E)})?d.push({pos:E,line:v,type:"point"}):Yt(g[1]-a)!==0&&d.push({pos:E,line:v,type:"intersection"})})}}),!n&&ke(d,function(v){return v[0]===r}))return!0;var f=0,p={};return d.forEach(function(v){var h=v.pos,g=v.type,m=v.line;if(!(h[0]>r))if(g==="intersection")++f;else{if(g==="line")return;if(g==="point"){var E=ke(m,function(D){return D[1]!==a}),b=p[h[0]],C=E[1]>a?1:-1;b?b!==C&&++f:p[h[0]]=C}}}),f%2===1}function tp(t,e){var n=t[0],r=t[1],a=t[2];return(n*e[0]+r*e[1]+a)/(n*n+r*r)}function er(t,e){var n=t[0],r=t[1],a=e[0],i=e[1],s=a-n,o=i-r;Math.abs(s)<Rt&&(s=0),Math.abs(o)<Rt&&(o=0);var l=0,c=0,u=0;return s?o?(l=-o/s,c=1,u=-l*n-r):(c=1,u=-r):o&&(l=-1,u=n),[l,c,u]}function Kn(t,e){var n=t[0],r=t[1],a=t[2],i=e[0],s=e[1],o=e[2],l=n===0&&i===0,c=r===0&&s===0,u=[];if(l&&c)return[];if(l){var d=-a/r,f=-o/s;return d!==f?[]:[[-1/0,d],[1/0,d]]}else if(c){var p=-a/n,v=-o/i;return p!==v?[]:[[p,-1/0],[p,1/0]]}else if(n===0){var h=-a/r,g=-(s*h+o)/i;u=[[g,h]]}else if(i===0){var h=-o/s,g=-(r*h+a)/n;u=[[g,h]]}else if(r===0){var g=-a/n,h=-(i*g+o)/s;u=[[g,h]]}else if(s===0){var g=-o/i,h=-(n*g+a)/r;u=[[g,h]]}else{var g=(r*o-s*a)/(s*n-r*i),h=-(n*g+a)/r;u=[[g,h]]}return u.map(function(m){return[m[0],m[1]]})}function V1(t,e,n){var r=Kn(er(t[0],t[1]),er(e[0],e[1]));return n?li(r,[t,e]):r}function ep(t,e){var n=er(e[0],e[1]);return Yt(tp(n,t))===0}function li(t,e){var n=e.map(function(d){return[0,1].map(function(f){return[Math.min(d[0][f],d[1][f]),Math.max(d[0][f],d[1][f])]})}),r=[];if(t.length===2){var a=t[0],i=a[0],s=a[1];if(Yt(i-t[1][0])){if(!Yt(s-t[1][1])){var c=Math.max.apply(Math,n.map(function(d){return d[0][0]})),u=Math.min.apply(Math,n.map(function(d){return d[0][1]}));if(Yt(c-u)>0)return[];r=[[c,s],[u,s]]}}else{var o=Math.max.apply(Math,n.map(function(d){return d[1][0]})),l=Math.min.apply(Math,n.map(function(d){return d[1][1]}));if(Yt(o-l)>0)return[];r=[[i,o],[i,l]]}}return r.length||(r=t.filter(function(d){var f=d[0],p=d[1];return n.every(function(v){return 0<=Yt(f-v[0][0])&&0<=Yt(v[0][1]-f)&&0<=Yt(p-v[1][0])&&0<=Yt(v[1][1]-p)})})),r.map(function(d){return[Yt(d[0]),Yt(d[1])]})}function ci(t){return tr(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function ui(t,e){var n=t.slice(),r=e.slice();Fa(n)===-1&&n.reverse(),Fa(r)===-1&&r.reverse();var a=ci(n),i=ci(r),s=a.map(function(u){return er(u[0],u[1])}),o=i.map(function(u){return er(u[0],u[1])}),l=[];s.forEach(function(u,d){var f=a[d],p=[];o.forEach(function(v,h){var g=Kn(u,v),m=li(g,[f,i[h]]);p.push.apply(p,m.map(function(E){return{index1:d,index2:h,pos:E,type:"intersection"}}))}),p.sort(function(v,h){return oe(f[0],v.pos)-oe(f[0],h.pos)}),l.push.apply(l,p),Fn(f[1],r)&&l.push({index1:d,index2:-1,pos:f[1],type:"inside"})}),i.forEach(function(u,d){if(Fn(u[1],n)){var f=!1,p=we(l,function(v){var h=v.index2;return h===d?(f=!0,!1):!!f});p===-1&&(f=!1,p=we(l,function(v){var h=v.index1,g=v.index2;return h===-1&&g+1===d?(f=!0,!1):!!f})),p===-1?l.push({index1:-1,index2:d,pos:u[1],type:"inside"}):l.splice(p,0,{index1:-1,index2:d,pos:u[1],type:"inside"})}});var c={};return l.filter(function(u){var d=u.pos,f=d[0]+"x"+d[1];return c[f]?!1:(c[f]=!0,!0)})}function di(t,e){var n=ui(t,e);return n.map(function(r){var a=r.pos;return a})}function rp(t){var e=t[0],n=e.index1,r=e.index2,a=t[1],i=a.index1,s=a.index2;return n!==-1&&(n===i||n+1===i)||r!==-1&&(r===s||r+1===s)}function np(t,e){var n=ui(t,e),r=[],a;return ui(t,e).forEach(function(i,s,o){s===0||!rp([o[s-1],i])?(a=[i],r.push(a)):a.push(i)}),r.map(function(i){return i.map(function(s){var o=s.pos;return o})})}function Wn(t,e,n,r){n===void 0&&(n=0),r===void 0&&(r=[]);for(var a=r.length===0,i=t.length,s=t[n]?n:0,o=tr(t.slice(s),t.slice(0,s)),l=function(d){var f=o[d];if(find(e,function(m){return m[0]===f[0]&&m[1]===f[1]}))return"continue";if(r.some(function(m){return find(m,function(E){return E[0]===f[0]&&E[1]===f[1]})}))return a?"continue":"break";var p=void 0;a?(p=[],r.push(p)):p=r[r.length-1],p.push(f);var v=[f,t[n+1]||t[0]],h=e.filter(function(m){return ep(m,v)}).sort(function(m,E){return getDist(f,m)-getDist(f,E)})[0];if(h){var g=e.indexOf(h);if(Wn(e,t,g,r),!a)return"break"}else return Wn(o,e,d+1,r),"break"},c=0;c<i;++c){var u=l(c);if(u==="break")break}return r}function H1(t,e){return Wn(t,tr(e).reverse())}function Y1(t,e){if(!e.length)return[tr(t)];var n=np(t,e),r=[t];return n.forEach(function(a){var i=tr(a).reverse();r=Jf(r.map(function(s){var o=Wn(s,i),l=o[0];if(o.length===1&&i.every(function(f){return l.indexOf(f)===-1})){var c=l[l.length-1],u=tr(i).sort(function(f,p){return getDist(c,f)-getDist(c,p)})[0],d=i.indexOf(u);l.push.apply(l,tr(i.slice(d),i.slice(0,d),[i[d],c]))}return o}))}),r}function ap(t,e){var n=di(t,e);return en(n)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var fi=function(){return fi=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},fi.apply(this,arguments)};function ip(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}var op=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(qt(n))for(var a in n)this.on(a,n[a]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(qt(n))for(var a in n)this.off(a);else if(!r)this._events[n]=[];else{var i=this._events[n];if(i){var s=we(i,function(o){return o.listener===r});s>-1&&i.splice(s,1)}}return this},e.once=function(n,r){var a=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(i){a._addEvent(n,i,{once:!0})})},e.emit=function(n,r){var a=this;r===void 0&&(r={});var i=this._events[n];if(!n||!i)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,ip(i).forEach(function(o){o.listener(r),o.once&&a.off(n,o.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,a){var i=this._events;i[n]=i[n]||[];var s=i[n];s.push(fi({listener:r},a))},t}();const rn=op;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var pi=function(t,e){return pi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},pi(t,e)};function sp(t,e){pi(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Cr=function(){return Cr=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Cr.apply(this,arguments)};function lp(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function Ws(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function Vn(t){if(t){if(Ht(t))return document.querySelector(t)}else return null;if(An(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var cp=function(t){sp(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var a=r._currentOptions;r._lock||!a||r.emit("scrollDrag",{next:function(i){r.checkScroll({container:a.container,inputEvent:i})}})},r}var n=e.prototype;return n.dragStart=function(r,a){var i=Vn(a.container);if(!i){this._flag=!1;return}var s=0,o=0,l=0,c=0;if(i===document.body)l=window.innerWidth,c=window.innerHeight;else{var u=i.getBoundingClientRect();s=u.top,o=u.left,l=u.width,c=u.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:s,left:o,width:l,height:c},this._prevScrollPos=this._getScrollPosition([0,0],a),this._currentOptions=a,this._registerScrollEvent(a)},n.drag=function(r,a){if(clearTimeout(this._timer),!!this._flag){var i=r.clientX,s=r.clientY,o=a.threshold,l=o===void 0?0:o,c=this,u=c._startRect,d=c._startPos;this._currentOptions=a;var f=[0,0];return u.top>s-l?(d[1]>u.top||s<d[1])&&(f[1]=-1):u.top+u.height<s+l&&(d[1]<u.top+u.height||s>d[1])&&(f[1]=1),u.left>i-l?(d[0]>u.left||i<d[0])&&(f[0]=-1):u.left+u.width<i+l&&(d[0]<u.left+u.width||i>d[0])&&(f[0]=1),!f[0]&&!f[1]?!1:this._continueDrag(Cr(Cr({},a),{direction:f,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var a=this;if(this._isWait)return!1;var i=r.prevScrollPos,s=i===void 0?this._prevScrollPos:i,o=r.direction,l=r.throttleTime,c=l===void 0?0:l,u=r.inputEvent,d=r.isDrag,f=this._getScrollPosition(o||[0,0],r),p=f[0]-s[0],v=f[1]-s[1],h=o||[p?Math.abs(p)/p:0,v?Math.abs(v)/v:0];return this._prevScrollPos=f,this._lock=!1,!p&&!v?!1:(this.emit("move",{offsetX:h[0]?p:0,offsetY:h[1]?v:0,inputEvent:u}),c&&d&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){a._continueDrag(r)},c)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,a){var i=a.container,s=a.getScrollPosition,o=s===void 0?lp:s;return o({container:Vn(i),direction:r})},n._continueDrag=function(r){var a=this,i,s=r.container,o=r.direction,l=r.throttleTime,c=r.useScroll,u=r.isDrag,d=r.inputEvent;if(!(!this._flag||u&&this._isWait)){var f=$r(),p=Math.max(l+this._prevTime-f,0);if(p>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){a._continueDrag(r)},p),!1;this._prevTime=f;var v=this._getScrollPosition(o,r);this._prevScrollPos=v,u&&(this._isWait=!0),c||(this._lock=!0);var h={container:Vn(s),direction:o,inputEvent:d};return(i=r.requestScroll)===null||i===void 0||i.call(r,h),this.emit("scroll",h),this._isWait=!1,c||this.checkScroll(Cr(Cr({},r),{prevScrollPos:v,direction:o,inputEvent:d}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var a=r.checkScrollEvent;if(a){var i=a===!0?Ws:a,s=Vn(r.container);a===!0&&(s===document.body||s===document.documentElement)?this._unregister=Ws(window,this._onScroll):this._unregister=i(s,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e}(rn);const Vs=cp;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vi=function(t,e){return vi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},vi(t,e)};function up(t,e){vi(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Lt=function(){return Lt=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Lt.apply(this,arguments)};function dp(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=Math.atan2(r,n);return a>=0?a:a+Math.PI*2}function hi(t){return dp([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function fp(t){return t.touches&&t.touches.length>=2}function Hn(t){return t?t.touches?vp(t.touches):[Ys(t)]:[]}function pp(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function Hs(t,e,n){var r=n.length,a=nn(t,r),i=a.clientX,s=a.clientY,o=a.originalClientX,l=a.originalClientY,c=nn(e,r),u=c.clientX,d=c.clientY,f=nn(n,r),p=f.clientX,v=f.clientY,h=i-u,g=s-d,m=i-p,E=s-v;return{clientX:o,clientY:l,deltaX:h,deltaY:g,distX:m,distY:E}}function gi(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function vp(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(Ys(t[r]));return n}function Ys(t){return{clientX:t.clientX,clientY:t.clientY}}function nn(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<e;++r){var a=t[r];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var mi=function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),hi(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),hi(e)-hi(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=Hs(e||this.prevClients,this.prevClients,this.startClients),a=r.deltaX,i=r.deltaY;return this.movement+=Math.sqrt(a*a+i*i),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);var n=this.prevClients;return this.startClients.map(function(r,a){return Hs([e[a]],[n[a]],[r])})},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=nn(e,this.length),a=nn(this.prevClients,this.length),i=r.clientX-a.clientX,s=r.clientY-a.clientY;return Math.sqrt(i*i+s*s)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),gi(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),gi(e)/gi(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t}(),$s=["textarea","input"],Xs=function(t){up(e,t);function e(n,r){r===void 0&&(r={});var a=t.call(this)||this;a.options={},a.flag=!1,a.pinchFlag=!1,a.data={},a.isDrag=!1,a.isPinch=!1,a.clientStores=[],a.targets=[],a.prevTime=0,a.doubleFlag=!1,a._useMouse=!1,a._useTouch=!1,a._useDrag=!1,a._dragFlag=!1,a._isTrusted=!1,a._isMouseEvent=!1,a._isSecondaryButton=!1,a._preventMouseEvent=!1,a._prevInputEvent=null,a._isDragAPI=!1,a._isIdle=!0,a._window=window,a.onDragStart=function(f,p){if(p===void 0&&(p=!0),!(!a.flag&&f.cancelable===!1)){var v=f.type.indexOf("drag")>=-1;if(!(a.flag&&v)){a._isDragAPI=!0;var h=a.options,g=h.container,m=h.pinchOutside,E=h.preventWheelClick,b=h.preventRightClick,C=h.preventDefault,D=h.checkInput,x=h.dragFocusedInput,S=h.preventClickEventOnDragStart,M=h.preventClickEventOnDrag,w=h.preventClickEventByCondition,T=a._useTouch,R=!a.flag;if(a._isSecondaryButton=f.which===3||f.button===2,E&&(f.which===2||f.button===1)||b&&(f.which===3||f.button===2))return a.stop(),!1;if(R){var k=a._window.document.activeElement,P=f.target;if(P){var L=P.tagName.toLowerCase(),A=$s.indexOf(L)>-1,I=P.isContentEditable;if(A||I){if(D||!x&&k===P)return!1;if(k&&(k===P||I&&k.isContentEditable&&k.contains(P)))if(x)P.blur();else return!1}else if((C||f.type==="touchstart")&&k){var _=k.tagName.toLowerCase();(k.isContentEditable||$s.indexOf(_)>-1)&&k.blur()}(S||M||w)&&Gt(a._window,"click",a._onClick,!0)}a.clientStores=[new mi(Hn(f))],a._isIdle=!1,a.flag=!0,a.isDrag=!1,a._isTrusted=p,a._dragFlag=!0,a._prevInputEvent=f,a.data={},a.doubleFlag=$r()-a.prevTime<200,a._isMouseEvent=pp(f),!a._isMouseEvent&&a._preventMouseEvent&&(a._preventMouseEvent=!1);var B=a._preventMouseEvent||a.emit("dragStart",Lt(Lt({data:a.data,datas:a.data,inputEvent:f,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,isTrusted:p,isDouble:a.doubleFlag},a.getCurrentStore().getPosition()),{preventDefault:function(){f.preventDefault()},preventDrag:function(){a._dragFlag=!1}}));B===!1&&a.stop(),a._isMouseEvent&&a.flag&&C&&f.preventDefault()}if(!a.flag)return!1;var z=0;if(R?(a._attchDragEvent(),T&&m&&(z=setTimeout(function(){Gt(g,"touchstart",a.onDragStart,{passive:!1})}))):T&&m&&_t(g,"touchstart",a.onDragStart),a.flag&&fp(f)){if(clearTimeout(z),R&&f.touches.length!==f.changedTouches.length)return;a.pinchFlag||a.onPinchStart(f)}}}},a.onDrag=function(f,p){if(a.flag){var v=a.options.preventDefault;!a._isMouseEvent&&v&&f.preventDefault(),a._prevInputEvent=f;var h=Hn(f),g=a.moveClients(h,f,!1);if(a._dragFlag){if(a.pinchFlag||g.deltaX||g.deltaY){var m=a._preventMouseEvent||a.emit("drag",Lt(Lt({},g),{isScroll:!!p,inputEvent:f}));if(m===!1){a.stop();return}}a.pinchFlag&&a.onPinch(f,h)}a.getCurrentStore().getPosition(h,!0)}},a.onDragEnd=function(f){if(a.flag){var p=a.options,v=p.pinchOutside,h=p.container,g=p.preventClickEventOnDrag,m=p.preventClickEventOnDragStart,E=p.preventClickEventByCondition,b=a.isDrag;(g||m||E)&&requestAnimationFrame(function(){a._allowClickEvent()}),!E&&!m&&g&&!b&&a._allowClickEvent(),a._useTouch&&v&&_t(h,"touchstart",a.onDragStart),a.pinchFlag&&a.onPinchEnd(f);var C=f?.touches?Hn(f):[],D=C.length;D===0||!a.options.keepDragging?a.flag=!1:a._addStore(new mi(C));var x=a._getPosition(),S=$r(),M=!b&&a.doubleFlag;a._prevInputEvent=null,a.prevTime=b||M?0:S,a.flag||(a._dettachDragEvent(),a._preventMouseEvent||a.emit("dragEnd",Lt({data:a.data,datas:a.data,isDouble:M,isDrag:b,isClick:!b,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,inputEvent:f,isTrusted:a._isTrusted},x)),a.clientStores=[],a._isMouseEvent||(a._preventMouseEvent=!0,requestAnimationFrame(function(){requestAnimationFrame(function(){a._preventMouseEvent=!1})})),a._isIdle=!0)}},a.onBlur=function(){a.onDragEnd()},a._allowClickEvent=function(){_t(a._window,"click",a._onClick,!0)},a._onClick=function(f){a._allowClickEvent(),a._preventMouseEvent=!1;var p=a.options.preventClickEventByCondition;p?.(f)||(f.stopPropagation(),f.preventDefault())},a._onContextMenu=function(f){var p=a.options;p.preventRightClick?a.onDragEnd(f):f.preventDefault()},a._passCallback=function(){};var i=[].concat(n),s=i[0];a._window=bf(s)?s:Be(s),a.options=Lt({checkInput:!1,container:s&&!("document"in s)?Be(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var o=a.options,l=o.container,c=o.events,u=o.checkWindowBlur;if(a._useDrag=c.indexOf("drag")>-1,a._useTouch=c.indexOf("touch")>-1,a._useMouse=c.indexOf("mouse")>-1,a.targets=i,a._useDrag&&i.forEach(function(f){Gt(f,"dragstart",a.onDragStart)}),a._useMouse&&(i.forEach(function(f){Gt(f,"mousedown",a.onDragStart),Gt(f,"mousemove",a._passCallback)}),Gt(l,"contextmenu",a._onContextMenu)),u&&Gt(Be(),"blur",a.onBlur),a._useTouch){var d={passive:!1};i.forEach(function(f){Gt(f,"touchstart",a.onDragStart,d),Gt(f,"touchmove",a._passCallback,d)})}return a}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,a){return r+a.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,a,i){i===void 0&&(i=!0),this.flag&&(this.clientStores[0].move(n,r),i&&this.onDrag(a,!0))},e.prototype.move=function(n,r){var a=n[0],i=n[1],s=this.getCurrentStore(),o=s.prevClients;return this.moveClients(o.map(function(l){var c=l.clientX,u=l.clientY;return{clientX:c+a,clientY:u+i,originalClientX:c,originalClientY:u}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var a in n)r[a]=n[a];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),Lt(Lt({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,a=this.options.container;this.off(),_t(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(i){_t(i,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(i){_t(i,"mousedown",n.onDragStart)}),_t(a,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(i){_t(i,"touchstart",n.onDragStart)}),_t(a,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,a=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>a)){var i=new mi(Hn(n));this.pinchFlag=!0,this._addStore(i);var s=this.emit("pinchStart",Lt(Lt({data:this.data,datas:this.data,angle:i.getAngle(),touches:this.getCurrentStore().getPositions()},i.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var a=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Lt(Lt({data:this.data,datas:this.data,movement:this.getMovement(r),angle:a.getAngle(r),rotation:a.getRotation(r),touches:a.getPositions(r),scale:a.getScale(r),distance:a.getDistance(r)},a.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var a=this.getCurrentStore();this.emit("pinchEnd",Lt(Lt({data:this.data,datas:this.data,isPinch:r,touches:a.getPositions()},a.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,a){var i=this._getPosition(n,a),s=this.isDrag;(i.deltaX||i.deltaY)&&(this.isDrag=!0);var o=!1;return!s&&this.isDrag&&(o=!0),Lt(Lt({data:this.data,datas:this.data},i),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:o})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var a=this.getCurrentStore(),i=a.getPosition(n,r),s=this.clientStores.slice(1).reduce(function(c,u){var d=u.getPosition();return c.distX+=d.distX,c.distY+=d.distY,c},i),o=s.distX,l=s.distY;return Lt(Lt({},i),{distX:o,distY:l})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,a={passive:!1};this._isDragAPI&&(Gt(r,"dragover",this.onDrag,a),Gt(n,"dragend",this.onDragEnd)),this._useMouse&&(Gt(r,"mousemove",this.onDrag),Gt(n,"mouseup",this.onDragEnd)),this._useTouch&&(Gt(r,"touchmove",this.onDrag,a),Gt(n,"touchend",this.onDragEnd,a),Gt(n,"touchcancel",this.onDragEnd,a))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(_t(r,"dragover",this.onDrag),_t(n,"dragend",this.onDragEnd)),this._useMouse&&(_t(r,"mousemove",this.onDrag),_t(n,"mouseup",this.onDragEnd)),this._useTouch&&(_t(r,"touchstart",this.onDragStart),_t(r,"touchmove",this.onDrag),_t(n,"touchend",this.onDragEnd),_t(n,"touchcancel",this.onDragEnd))},e}(rn);function hp(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var gp=hp;function mp(t){return gp(t).toString(36)}function yp(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function Ep(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,a){var i=a.trim();return(i?Ne(i):[""]).map(function(s){var o=s.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?"".concat(o.replace(/\:host/g,".".concat(t))):o?".".concat(t," ").concat(o):".".concat(t)}).join(", ")+" {"})}function bp(t,e,n,r,a){var i=ue(r),s=i.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",t),s.setAttribute("data-styled-count","1"),n.nonce&&s.setAttribute("nonce",n.nonce),s.innerHTML=Ep(t,e,n),(a||i.head||i.body).appendChild(s),s}function Cp(t){var e="rCS"+mp(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var a=yp(n),i=(a||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!i)i=bp(e,t,r,n,a);else{var s=parseFloat(i.getAttribute("data-styled-count"))||0;i.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var o,l=parseFloat(i.getAttribute("data-styled-count"))||0;l<=1?(i.remove?i.remove():(o=i.parentNode)===null||o===void 0||o.removeChild(i),i=null):i.setAttribute("data-styled-count","".concat(l-1))}}}}}const Zs=Cp;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var yi=function(t,e){return yi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},yi(t,e)};function Us(t,e){yi(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ei=function(){return Ei=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ei.apply(this,arguments)};function xp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}var Sp=function(t){Us(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.injectResult=null,r.tag="div",r}var n=e.prototype;return n.render=function(){var r=this.props,a=r.className,i=a===void 0?"":a,s=r.cspNonce,o=r.portalContainer,l=xp(r,["className","cspNonce","portalContainer"]),c=this.injector.className,u=this.tag,d={};return(Nf||"").indexOf("simple")>-1&&o&&(d={portalContainer:o}),se(u,Ei({ref:me(this,"element"),"data-styled-id":c,className:i+" "+c},d,l))},n.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},n.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},n.getElement=function(){return this.element},e}(Xa);function Dp(t,e){var n=Zs(e);return function(r){Us(a,r);function a(){var i=r!==null&&r.apply(this,arguments)||this;return i.injector=n,i.tag=t,i}return a}(Sp)}const js=Dp;var bi=function(t,e){return bi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},bi(t,e)};function xr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");bi(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var O=function(){return O=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},O.apply(this,arguments)};function wp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function kp(t,e,n,r){var a=arguments.length,i=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(i=(a<3?s(i):a>3?s(e,n,i):s(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i}function J(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,i;r<a;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function an(t,e){var n;return O({events:{},props:(n={},n[t]=Boolean,n),name:t},e)}function Mp(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function Tp(t){var e=Mp(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var Yn=zf(),Qs=Yn.browser.webkit,qs=Qs&&function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1}(),Rp=Yn.browser.name==="firefox",Op=parseInt(Yn.browser.webkitVersion,10)>=612||parseInt(Yn.browser.version,10)>=15,Ci="moveable-",Pp=`
{
	position: absolute;
	width: 1px;
	height: 1px;
	left: 0;
	top: 0;
    z-index: 3000;
    --moveable-color: #4af;
    --zoom: 1;
    --zoompx: 1px;
    will-change: transform;
    outline: 1px solid transparent;
}
.control-box {
    z-index: 0;
}
.line, .control {
    position: absolute;
	left: 0;
    top: 0;
    will-change: transform;
}
.control {
	width: 14px;
	height: 14px;
	border-radius: 50%;
	border: 2px solid #fff;
	box-sizing: border-box;
    background: #4af;
    background: var(--moveable-color);
	margin-top: -7px;
    margin-left: -7px;
    border: 2px solid #fff;
    z-index: 10;
}
.padding {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100px;
    height: 100px;
    transform-origin: 0 0;
}
.line {
	width: 1px;
    height: 1px;
    background: #4af;
    background: var(--moveable-color);
	transform-origin: 0px 50%;
}
.line.edge {
    z-index: 1;
    background: transparent;
}
.line.dashed {
    box-sizing: border-box;
    background: transparent;
}
.line.dashed.horizontal {
    border-top: 1px dashed #4af;
    border-top-color: #4af;
    border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
    border-left: 1px dashed #4af;
    border-left-color: #4af;
    border-left-color: var(--moveable-color);
}
.line.vertical {
    transform: translateX(-50%);
}
.line.horizontal {
    transform: translateY(-50%);
}
.line.vertical.bold {
    width: 2px;
}
.line.horizontal.bold {
    height: 2px;
}

.control.origin {
	border-color: #f55;
	background: #fff;
	width: 12px;
	height: 12px;
	margin-top: -6px;
    margin-left: -6px;
	pointer-events: none;
}
`.concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
	`).concat(Tp(t),`
}
`)}).join(`
`),`

.line.direction:before {
    content: "";
    position: absolute;
    width: 100%;
    height: calc(var(--moveable-line-padding, 0) * 1px);
    bottom: 0;
    left: 0;
}
.group {
    z-index: -1;
}
.area {
    position: absolute;
}
.area-pieces {
    position: absolute;
    top: 0;
    left: 0;
    display: none;
}
.area.avoid, .area.pass {
    pointer-events: none;
}
.area.avoid+.area-pieces {
    display: block;
}
.area-piece {
    position: absolute;
}

`).concat(qs?`:global svg *:before {
	content:"";
	transform-origin: inherit;
}`:"",`
`),Lp=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],xi=1e-4,$t=1e-7,$n=1e-9,Si=Math.pow(10,10),Js=-Si,Ap=["n","w","s","e"],Di=["n","w","s","e","nw","ne","sw","se"],Np={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},wi={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},tl={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},el=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag"];function on(t,e,n,r,a,i){var s,o;i===void 0&&(i="draggable");var l=(o=(s=e.gestos[i])===null||s===void 0?void 0:s.move(n,t.inputEvent))!==null&&o!==void 0?o:{},c=l.originalDatas||l.datas,u=c[i]||(c[i]={});return O(O({},a?wl(e,l):l),{isPinch:!!r,parentEvent:!0,datas:u,originalDatas:t.originalDatas})}var Sr=function(){function t(n){var r;n===void 0&&(n="draggable"),this.ableName=n,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(r={},r[n]={},r)}var e=t.prototype;return e.dragStart=function(n,r){this.isDrag=!1,this.isFlag=!1;var a=r.originalDatas;return this.datas=a,a[this.ableName]||(a[this.ableName]={}),O(O({},this.move(n,r.inputEvent)),{type:"dragstart"})},e.drag=function(n,r){return this.move([n[0]-this.prevX,n[1]-this.prevY],r)},e.move=function(n,r){var a,i,s=!1;if(!this.isFlag)this.prevX=n[0],this.prevY=n[1],this.startX=n[0],this.startY=n[1],a=n[0],i=n[1],this.isFlag=!0;else{var o=this.isDrag;a=this.prevX+n[0],i=this.prevY+n[1],(n[0]||n[1])&&(this.isDrag=!0),!o&&this.isDrag&&(s=!0)}return this.prevX=a,this.prevY=i,{type:"drag",clientX:a,clientY:i,inputEvent:r,isFirstDrag:s,isDrag:this.isDrag,distX:a-this.startX,distY:i-this.startY,deltaX:n[0],deltaY:n[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function rl(t,e){var n=e.clientX,r=e.clientY,a=e.datas,i=t.state,s=i.moveableClientRect,o=i.rootMatrix,l=i.is3d,c=i.pos1,u=s.left,d=s.top,f=l?4:3,p=j(ar(o,[n-u,r-d],f),c),v=p[0],h=p[1],g=Ee({datas:a,distX:v,distY:h}),m=g[0],E=g[1];return[m,E]}function rr(t,e){var n=e.datas,r=t.state,a=r.allMatrix,i=r.beforeMatrix,s=r.is3d,o=r.left,l=r.top,c=r.origin,u=r.offsetMatrix,d=r.targetMatrix,f=r.transformOrigin,p=s?4:3;n.is3d=s,n.matrix=a,n.targetMatrix=d,n.beforeMatrix=i,n.offsetMatrix=u,n.transformOrigin=f,n.inverseMatrix=de(a,p),n.inverseBeforeMatrix=de(i,p),n.absoluteOrigin=qe(ct([o,l],c),p),n.startDragBeforeDist=Ft(n.inverseBeforeMatrix,n.absoluteOrigin,p),n.startDragDist=Ft(n.inverseMatrix,n.absoluteOrigin,p)}function Ip(t){return wr(t.datas.beforeTransform,[50,50],100,100).direction}function Xn(t,e){var n=t.datas,r=t.originalDatas.beforeRenderable,a=n.transformIndex,i=r.nextTransforms,s=i.length,o=r.nextTransformAppendedIndexes,l=0;a===-1?(e==="translate"?l=0:e==="rotate"&&(l=we(i,function(f){return f.match(/scale\(/g)})),l===-1&&(l=i.length),n.transformIndex=l):ke(o,function(f){return f.index===a&&f.functionName===e})?l=a:l=a+o.filter(function(f){return f.index<a}).length;var c=sv(i,l),u=c.targetFunction,d=e==="rotate"?"rotateZ":e;n.beforeFunctionTexts=c.beforeFunctionTexts,n.afterFunctionTexts=c.afterFunctionTexts,n.beforeTransform=c.beforeFunctionMatrix,n.beforeTransform2=c.beforeFunctionMatrix2,n.targetTansform=c.targetFunctionMatrix,n.afterTransform=c.afterFunctionMatrix,n.afterTransform2=c.afterFunctionMatrix2,n.targetAllTransform=c.allFunctionMatrix,u.functionName===d?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):s>l&&(n.isAppendTransform=!0,r.nextTransformAppendedIndexes=J(J([],o,!0),[{functionName:e,index:l,isAppend:!0}],!1))}function Zn(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function Bp(t){var e=t.datas,n=t.distX,r=t.distY,a=al({datas:e,distX:n,distY:r}),i=a[0],s=a[1],o=nl(e,Vf([i,s],4));return Ft(o,qe([0,0,0],4),4)}function nl(t,e,n){var r=t.beforeTransform,a=t.afterTransform,i=t.beforeTransform2,s=t.afterTransform2,o=t.targetAllTransform,l=n?mt(o,e,4):mt(e,o,4),c=mt(de(n?i:r,4),l,4),u=mt(c,de(n?s:a,4),4);return u}function al(t){var e=t.datas,n=t.distX,r=t.distY,a=e.inverseBeforeMatrix,i=e.is3d,s=e.startDragBeforeDist,o=e.absoluteOrigin,l=i?4:3;return j(Ft(a,ct(o,[n,r]),l),s)}function Ee(t,e){var n=t.datas,r=t.distX,a=t.distY,i=n.inverseBeforeMatrix,s=n.inverseMatrix,o=n.is3d,l=n.startDragBeforeDist,c=n.startDragDist,u=n.absoluteOrigin,d=o?4:3;return j(Ft(e?i:s,ct(u,[r,a]),d),e?l:c)}function _p(t,e){var n=t.datas,r=t.distX,a=t.distY,i=n.beforeMatrix,s=n.matrix,o=n.is3d,l=n.startDragBeforeDist,c=n.startDragDist,u=n.absoluteOrigin,d=o?4:3;return j(Ft(e?i:s,ct(e?l:c,[r,a]),d),u)}function zp(t,e,n,r,a,i){return r===void 0&&(r=e),a===void 0&&(a=n),i===void 0&&(i=[0,0]),t?t.map(function(s,o){var l=je(s),c=l.value,u=l.unit,d=o?a:r,f=o?n:e;if(s==="%"||isNaN(c)){var p=d?i[o]/d:0;return f*p}else if(u!=="%")return c;return f*c/100}):i}function il(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function Gp(t,e){return il(e).map(function(n){return t[n]})}function Mt(t,e){var n=(e[0]+1)/2,r=(e[1]+1)/2,a=[Ue(t[0][0],t[1][0],n,1-n),Ue(t[0][1],t[1][1],n,1-n)],i=[Ue(t[2][0],t[3][0],n,1-n),Ue(t[2][1],t[3][1],n,1-n)];return[Ue(a[0],i[0],r,1-r),Ue(a[1],i[1],r,1-r)]}function Fp(t,e,n,r,a,i){var s=Ge(e,n,r,a),o=Mt(s,i),l=t[0]-o[0],c=t[1]-o[1];return[l,c]}function sn(t,e,n,r){return mt(t,Jn(e,r,n),r)}function Kp(t,e,n){var r=t.transformOrigin,a=t.offsetMatrix,i=t.is3d,s=e.beforeTransform,o=e.afterTransform,l=i?4:3,c=tn([n]);return sn(a,ye(mt(mt(s,c,4),o,4),4,l),r,l)}function Wp(t,e){var n=t.transformOrigin,r=t.offsetMatrix,a=t.is3d,i=t.targetMatrix,s=a?4:3;return sn(r,mt(i,ni(e,s),s),n,s)}function Un(t){var e=Dr(t);return{setTransform:function(n,r){r===void 0&&(r=-1),e.startTransforms=wt(n)?n:Ae(n),ki(t,r)},setTransformIndex:function(n){ki(t,n)}}}function jn(t,e){var n=Dr(t),r=n.startTransforms;ki(t,we(r,function(a){return a.indexOf("".concat(e,"("))===0}))}function ki(t,e){var n=Dr(t),r=t.datas;if(r.transformIndex=e,e!==-1){var a=n.startTransforms[e];if(a){var i=Je([a]);r.startValue=i[0].functionValue}}}function Mi(t,e){var n=Dr(t);n.nextTransforms=Ae(e)}function Dr(t){return t.originalDatas.beforeRenderable}function ol(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function Qn(t){return ol(t).join(" ")}function qn(t){return Dr(t).nextStyle}function sl(t,e,n,r,a){Mi(a,e);var i=Zt.drag(t,on(a,t.state,n,r,!1)),s=i?i.transform:e;return O(O({transform:e,drag:i},Xt({transform:s},a)),{afterTransform:s})}function ll(t,e,n,r,a){var i=t.state,s=i.left,o=i.top,l=t.props.groupable,c=Kp(t.state,a,e),u=l?s:0,d=l?o:0,f=ul(t,n,c),p=j(r,f);return j(p,[u,d])}function Vp(t,e,n,r,a){var i=ll(t,"scale(".concat(e.join(", "),")"),n,r,a);return i}function cl(t,e,n){return[-1+t[0]/(e/2),-1+t[1]/(n/2)]}function ul(t,e,n){n===void 0&&(n=t.state.allMatrix);var r=t.state,a=r.width,i=r.height,s=r.is3d,o=s?4:3,l=[a/2*(1+e[0]),i/2*(1+e[1])];return Bt(n,l,o)}function Hp(t,e,n){var r=n.fixedDirection,a=n.fixedPosition;return ll(t,"rotate(".concat(e,"deg)"),r,a,n)}function Yp(t,e,n,r,a,i){var s=t.props.groupable,o=t.state,l=o.transformOrigin,c=o.offsetMatrix,u=o.is3d,d=o.width,f=o.height,p=o.left,v=o.top,h=i.fixedDirection,g=i.nextTargetMatrix||o.targetMatrix,m=u?4:3,E=zp(a,e,n,d,f,l),b=s?p:0,C=s?v:0,D=sn(c,g,E,m),x=Fp(r,D,e,n,m,h);return j(x,[b,C])}function dl(t,e){return Mt(Jt(t.state),e)}function $p(t,e){var n=t.targetGesto,r=t.controlGesto,a;return n?.isFlag()&&(a=n.getEventData()[e]),!a&&r?.isFlag()&&(a=r.getEventData()[e]),a||{}}function Xp(t,e){return[t[0]*e[0],t[1]*e[1]]}function Q(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return $d.apply(void 0,J([Ci],t,!1))}function fl(t){t()}function Zp(t){return!t||t==="none"?[1,0,0,1,0,0]:qt(t)?t:tn(t)}function Jn(t,e,n){return ti(e,qr(n,e),t,qr(n.map(function(r){return-r}),e))}function Up(t,e,n){if(e==="%"){var r=Ri(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function jp(t){var e=ta(Me(t,":before"));return e.map(function(n,r){var a=je(n),i=a.value,s=a.unit;return i*Up(t,s,r===0)})}function ta(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function pl(t,e){e===void 0&&(e=Me(t));var n=e.transform;if(n&&n!=="none")return e.transform;if("transform"in t){var r=t.transform,a=r.baseVal;if(!a)return"";var i=a.length;if(!i)return"";for(var s=[],o=function(c){var u=a[c].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(d){return u[d]}).join(", "),")"))},l=0;l<i;++l)o(l);return s.join(" ")}return""}function ln(t,e,n,r,a){var i,s,o,l=t&&t.ownerDocument?t.ownerDocument:document,c=l.documentElement||l.body,u=!1,d,f;if(!t||n)d=t;else{var p=(i=t?.assignedSlot)===null||i===void 0?void 0:i.parentElement,v=t.parentElement;p?(u=!0,f=v,d=p):d=v}for(var h=!1,g=t===e||d===e,m="relative",E=1,b=parseFloat((s=a)===null||s===void 0?void 0:s.zoom)||1,C=a?.position;d&&d!==c;){e===d&&(g=!0);var D=Me(d),x=d.tagName.toLowerCase(),S=pl(d,D),M=D.willChange,w=parseFloat(D.zoom)||1;if(m=D.position,r&&w!==1){E=w;break}if(!n&&r&&b!==1&&C&&C!=="absolute"||x==="svg"||m!=="static"||S&&S!=="none"||M==="transform")break;var T=(o=t?.assignedSlot)===null||o===void 0?void 0:o.parentNode,R=d.parentNode;T&&(u=!0,f=R);var k=T||R;if(k&&k.nodeType===11){d=k.host,h=!0;break}d=k,m="relative"}return{offsetZoom:E,hasSlot:u,parentSlotElement:f,isCustomElement:h,isStatic:m==="static",isEnd:g||!d||d===c,offsetParent:d||c}}function Qp(t,e,n){var r,a=t.tagName.toLowerCase(),i=t.offsetLeft,s=t.offsetTop,o=Ln(i),l=!o,c,u;return!l&&a!=="svg"?(c=qs?jp(t):ta(n).map(function(d){return parseFloat(d)}),u=c.slice(),l=!0,r=tv(t,c,t===e&&e.tagName.toLowerCase()==="g"),i=r[0],s=r[1],c[0]=r[2],c[1]=r[3]):(c=ta(n).map(function(d){return parseFloat(d)}),u=c.slice()),{tagName:a,isSVG:o,hasOffset:l,offset:[i||0,s||0],origin:c,targetOrigin:u}}function vl(t,e,n){n===void 0&&(n=Me(t));var r=Me(document.body),a=r.position;if(!e&&(!a||a==="static"))return[0,0];var i=parseInt(r.marginLeft,10),s=parseInt(r.marginTop,10);return n.position==="absolute"&&((n.top!=="auto"||n.bottom!=="auto")&&(s=0),(n.left!=="auto"||n.right!=="auto")&&(i=0)),[i,s]}function Ti(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=ye(n,3,4))})}function qp(t){for(var e=t.parentElement,n=!1;e;){var r=Me(e).transform;if(r&&r!=="none"){n=!0;break}if(e===document.body)break;e=e.parentElement}return{fixedContainer:e||document.body,hasTransform:n}}function ea(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(Gs(t,!e).join(","),")")}function Ri(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,a=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:a.x,y:a.y,width:a.width||e,height:a.height||n,clientWidth:e,clientHeight:n}}function Jp(t,e){var n=Ri(t),r=n.width,a=n.height,i=n.clientWidth,s=n.clientHeight,o=i/r,l=s/a,c=t.preserveAspectRatio.baseVal,u=c.align,d=c.meetOrSlice,f=[0,0],p=[o,l],v=[0,0];if(u!==1){var h=(u-2)%3,g=Math.floor((u-2)/3);f[0]=r*h/2,f[1]=a*g/2;var m=d===2?Math.max(l,o):Math.min(o,l);p[0]=m,p[1]=m,v[0]=(i-r)/2*h,v[1]=(s-a)/2*g}var E=ni(p,e);return E[e*(e-1)]=v[0],E[e*(e-1)+1]=v[1],Jn(E,e,f)}function tv(t,e,n){if(!t.getBBox||!n&&t.tagName.toLowerCase()==="g")return[0,0,0,0];var r=t.getBBox(),a=Ri(t.ownerSVGElement),i=r.x-a.x,s=r.y-a.y;return[i,s,e[0]-i,e[1]-s]}function Bt(t,e,n){return Ft(t,qe(e,n),n)}function Ge(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(a){return Bt(t,a,r)})}function le(t){var e=t.map(function(c){return c[0]}),n=t.map(function(c){return c[1]}),r=Math.min.apply(Math,e),a=Math.min.apply(Math,n),i=Math.max.apply(Math,e),s=Math.max.apply(Math,n),o=i-r,l=s-a;return{left:r,top:a,right:i,bottom:s,width:o,height:l}}function hl(t,e,n,r){var a=Ge(t,e,n,r);return le(a)}function ev(t,e,n,r,a){var i,s=t.target,o=t.origin,l=e.matrix,c=ml(s),u=c.offsetWidth,d=c.offsetHeight,f=n.getBoundingClientRect(),p=[0,0];n===document.body&&(p=vl(s,!0));for(var v=s.getBoundingClientRect(),h=v.left-f.left+n.scrollLeft-(n.clientLeft||0)+p[0],g=v.top-f.top+n.scrollTop-(n.clientTop||0)+p[1],m=v.width,E=v.height,b=ti(r,a,l),C=hl(b,u,d,r),D=C.left,x=C.top,S=C.width,M=C.height,w=Bt(b,o,r),T=j(w,[D,x]),R=[h+T[0]*m/S,g+T[1]*E/M],k=[0,0],P=0;++P<10;){var L=de(a,r);i=j(Bt(L,R,r),Bt(L,w,r)),k[0]=i[0],k[1]=i[1];var A=ti(r,a,qr(k,r),l),I=hl(A,u,d,r),_=I.left,B=I.top,z=_-h,N=B-g;if(Math.abs(z)<2&&Math.abs(N)<2)break;R[0]-=z,R[1]-=N}return k.map(function(F){return Math.round(F)})}function rv(t,e,n){var r=t.length===16,a=r?4:3,i=e.map(function(l){return Bt(t,l,a)}),s=n.left,o=n.top;return i.map(function(l){return[l[0]+s,l[1]+o]})}function wr(t,e,n,r){var a=t.length===16,i=a?4:3,s=Ge(t,n,r,i),o=s[0],l=o[0],c=o[1],u=s[1],d=u[0],f=u[1],p=s[2],v=p[0],h=p[1],g=s[3],m=g[0],E=g[1],b=Bt(t,e,i),C=b[0],D=b[1],x=Math.min(l,d,v,m),S=Math.min(c,f,h,E),M=Math.max(l,d,v,m),w=Math.max(c,f,h,E);l=l-x||0,d=d-x||0,v=v-x||0,m=m-x||0,c=c-S||0,f=f-S||0,h=h-S||0,E=E-S||0,C=C-x||0,D=D-S||0;var T=Fa(Ge(t,100,100,i));return{left:x,top:S,right:M,bottom:w,origin:[C,D],pos1:[l,c],pos2:[d,f],pos3:[v,h],pos4:[m,E],direction:T}}function fe(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function gl(t,e){return fe([e[0]-t[0],e[1]-t[1]])}function cn(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=kt(t,e));var a=gl(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(a,"px")}}function Oi(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=n.length,i=n.reduce(function(o,l){return o+l[0]},0)/a,s=n.reduce(function(o,l){return o+l[1]},0)/a;return{transform:"translateZ(0px) translate(".concat(i,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function nr(t,e){var n=t[e];return qt(n)?O(O({},t),n):t}function ml(t,e){e===void 0&&(e=t?Me(t):null);var n=t&&!Ln(t.offsetWidth),r=0,a=0,i=0,s=0,o=0,l=0,c=0,u=0,d=0,f=0,p=0,v=0,h=1/0,g=1/0,m=1/0,E=1/0,b=0,C=0,D=!1;if(t)if(!n&&t.tagName.toLowerCase()!=="svg"){var x=t.getBBox();D=!0,r=x.width,a=x.height,o=r,l=a,c=r,u=a,i=r,s=a}else{var S=t.style,M=e.boxSizing==="border-box",w=parseFloat(e.borderLeftWidth)||0,T=parseFloat(e.borderRightWidth)||0,R=parseFloat(e.borderTopWidth)||0,k=parseFloat(e.borderBottomWidth)||0,P=parseFloat(e.paddingLeft)||0,L=parseFloat(e.paddingRight)||0,A=parseFloat(e.paddingTop)||0,I=parseFloat(e.paddingBottom)||0,_=P+L,B=A+I,z=w+T,N=R+k,F=_+z,W=B+N,$=e.position,V=0,K=0;if("clientLeft"in t){var X=null;if($==="absolute"){var q=ln(t,document.body);X=q.offsetParent}else X=t.parentElement;if(X){var tt=Me(X);V=parseFloat(tt.width),K=parseFloat(tt.height)}}d=Math.max(_,Et(e.minWidth,V)||0),f=Math.max(B,Et(e.minHeight,K)||0),h=Et(e.maxWidth,V),g=Et(e.maxHeight,K),isNaN(h)&&(h=1/0),isNaN(g)&&(g=1/0),b=Et(S.width,0)||0,C=Et(S.height,0)||0,o=parseFloat(e.width)||0,l=parseFloat(e.height)||0,c=Math.abs(o-b)<1?In(d,b||o,h):o,u=Math.abs(l-C)<1?In(f,C||l,g):l,r=c,a=u,i=c,s=u,M?(m=h,E=g,p=d,v=f,c=r-F,u=a-W):(m=h+F,E=g+W,p=d+F,v=f+W,r=c+F,a=u+W),i=c+_,s=u+B}return{svg:D,offsetWidth:r,offsetHeight:a,clientWidth:i,clientHeight:s,contentWidth:c,contentHeight:u,inlineCSSWidth:b,inlineCSSHeight:C,cssWidth:o,cssHeight:l,minWidth:d,minHeight:f,maxWidth:h,maxHeight:g,minOffsetWidth:p,minOffsetHeight:v,maxOffsetWidth:m,maxOffsetHeight:E}}function yl(t,e){return kt(e>0?t[0]:t[1],e>0?t[1]:t[0])}function ra(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function El(t,e){var n=t===document.body||t===document.documentElement,r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=Me(t).overflow!=="visible",O(O({},e),r)}function Pi(t,e,n,r){var a=t.left,i=t.right,s=t.top,o=t.bottom,l=e.top,c=e.left,u={left:c+a,top:l+s,right:c+i,bottom:l+o,width:i-a,height:o-s};return n&&r?El(n,u):u}function un(t,e){var n=0,r=0,a=0,i=0;if(t){var s=t.getBoundingClientRect();n=s.left,r=s.top,a=s.width,i=s.height}var o={left:n,top:r,width:a,height:i,right:n+a,bottom:r+i};return t&&e?El(t,o):o}function bl(t,e,n,r){var a;if(t)a=t;else if(e)a=[0,0];else{var i=n.target;a=Cl(i,r)}return a}function Cl(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var a=[0,0];return r.indexOf("w")>-1&&(a[0]=-1),r.indexOf("e")>-1&&(a[0]=1),r.indexOf("n")>-1&&(a[1]=-1),r.indexOf("s")>-1&&(a[1]=1),a}}}function Li(t,e){return[ct(e,t[0]),ct(e,t[1]),ct(e,t[2]),ct(e,t[3])]}function Jt(t){var e=t.left,n=t.top,r=t.pos1,a=t.pos2,i=t.pos3,s=t.pos4;return Li([r,a,i,s],[e,n])}function nv(t){return Math.round(t%1===-.5?t-1:t)}function kr(t,e){var n;(n=t[e])===null||n===void 0||n.unset(),t[e]=null}function Xt(t,e){if(e){var n=Dr(e);n.nextStyle=O(O({},n.nextStyle),t)}return{style:t,cssText:Ie(t).map(function(r){return"".concat(Nn(r,"-"),": ").concat(t[r],";")}).join("")}}function xl(t,e,n){var r=e.afterTransform||e.transform;return O(O({},Xt(O(O(O({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function nt(t,e,n,r){var a=e.datas;a.datas||(a.datas={});var i=O(O({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:a.datas,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){a.isEventStart=!1},stopDrag:function(){var s;(s=e.stop)===null||s===void 0||s.call(e)}});return a.isStartEvent?r||(a.lastEvent=i):a.isStartEvent=!0,i}function ae(t,e,n){var r=e.datas,a="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),O(O({isDrag:a},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function na(t,e,n){t._emitter.on(e,n)}function Y(t,e,n,r){return t.triggerEvent(e,n,r)}function Me(t,e){return window.getComputedStyle(t,e)}function aa(t,e,n){var r={},a={};return t.filter(function(i){var s=i.name;if(r[s]||!e.some(function(o){return i[o]}))return!1;if(!n&&i.ableGroup){if(a[i.ableGroup])return!1;a[i.ableGroup]=!0}return r[s]=!0,!0})}function Ai(t,e){return t===e||t==null&&e==null}function av(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var a=t[r];if(!Ln(a))return a}return t[n]}function Sl(t,e){var n=[],r=[];return t.forEach(function(a,i){var s=e(a,i,t),o=r.indexOf(s),l=n[o]||[];o===-1&&(r.push(s),n.push(l)),l.push(a)}),n}function iv(t,e){var n=[],r={};return t.forEach(function(a,i){var s=e(a,i,t),o=r[s];o||(o=[],r[s]=o,n.push(o)),o.push(a)}),n}function Dl(t){return t.reduce(function(e,n){return e.concat(n)},[])}function Mr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return Math.abs(r)-Math.abs(n)}),t[0]}function ar(t,e,n){return Ft(de(t,n),qe(e,n),n)}function wl(t,e){var n,r=t.is3d,a=t.rootMatrix,i=r?4:3;return n=ar(a,[e.distX,e.distY],i),e.distX=n[0],e.distY=n[1],e}function ia(t,e,n,r,a){return j(Bt(t,ct(n,e),a),r)}function pe(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function oa(t){return Math.abs(t)<=$t?0:t}function Ni(t){return function(e){if(!e.isDragging(t))return"";var n=$p(e,t),r=n.deg;return r?Q("view-control-rotation".concat(r)):""}}function Ii(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(i){return r.requestAble===i})?r.parentDirection:!1;var a=r.inputEvent.target;return Pt(a,Q("direction"))&&(!t||Pt(a,Q(t)))}}function ov(t){var e={};for(var n in t)e[t[n]]=n;return e}function sv(t,e){var n=t.slice(0,e<0?void 0:e),r=t.slice(0,e<0?void 0:e+1),a=t[e]||"",i=e<0?[]:t.slice(e),s=e<0?[]:t.slice(e+1),o=Je(n),l=Je(r),c=Je([a]),u=Je(i),d=Je(s),f=Er(o),p=Er(l),v=Er(u),h=Er(d),g=mt(f,v,4);return{transforms:t,beforeFunctionMatrix:f,beforeFunctionMatrix2:p,targetFunctionMatrix:Er(c),afterFunctionMatrix:v,afterFunctionMatrix2:h,allFunctionMatrix:g,beforeFunctions:o,beforeFunctions2:l,targetFunction:c[0],afterFunctions:u,afterFunctions2:d,beforeFunctionTexts:n,beforeFunctionTexts2:r,targetFunctionText:a,afterFunctionTexts:i,afterFunctionTexts2:s}}function lv(t){return!t||!qt(t)||t instanceof Element?!1:wt(t)||"length"in t}function ir(t,e){return t?t instanceof Element?t:Ht(t)?e?document.querySelector(t):t:An(t)?t():"current"in t?t.current:t:null}function Bi(t,e){if(!t)return[];var n=lv(t)?[].slice.call(t):[t];return n.reduce(function(r,a){return Ht(a)&&e?J(J([],r,!0),[].slice.call(document.querySelectorAll(a)),!0):(wt(a)?r.push(Bi(a,e)):r.push(ir(a,e)),r)},[])}function cv(t,e,n){var r=kt(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function kl(t,e){var n=t.rootMatrix,r=t.is3d,a=r?4:3,i=de(n,a);return r||(i=ye(i,3,4)),i[12]=0,i[13]=0,i[14]=0,Gn(i,e)}function Ml(t,e,n,r,a){var i=t[0],s=t[1],o=0,l=0;if(a&&i&&s){var c=kt([0,0],e),u=kt([0,0],r),d=fe(e),f=Math.cos(c-u)*d;if(!r[0])l=f,o=l*n;else if(!r[1])o=f,l=o/n;else{var p=r[0]*2*i,v=r[1]*2*s,h=fe([p+e[0],v+e[1]])-fe([p,v]),g=kt([0,0],[n,1]);o=Math.cos(g)*h,l=Math.sin(g)*h}}else o=r[0]*e[0],l=r[1]*e[1];return[o,l]}function Tl(t,e,n,r){var a,i=n.ratio,s=n.startOffsetWidth,o=n.startOffsetHeight,l=0,c=0,u=r.distX,d=r.distY,f=r.parentDistance,p=r.parentDist,v=r.parentScale,h=n.fixedDirection,g=[0,1].map(function(x){return Math.abs(t[x]-h[x])}),m=[0,1].map(function(x){var S=g[x];return S!==0&&(S=2/S),S});if(p)l=p[0],c=p[1],e&&(l?c||(c=l/i):l=c*i);else if(v)l=(v[0]-1)*s,c=(v[1]-1)*o;else if(f){var E=s*g[0],b=o*g[1],C=fe([E,b]);l=f/C*E*m[0],c=f/C*b*m[1]}else{var D=Ee({datas:n,distX:u,distY:d});D=m.map(function(x,S){return D[S]*x}),a=Ml([s,o],D,i,t,e),l=a[0],c=a[1]}return{distWidth:l,distHeight:c}}function _i(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=t.split(" "),r=n[0],a=n[1],i=_i(r||""),s=_i(a||""),o=O(O({},i),s),l={x:"50%",y:"50%"};return o.x&&(l.x=o.x),o.y&&(l.y=o.y),o.value&&(o.x&&!o.y&&(l.y=o.value),!o.x&&o.y&&(l.x=o.value)),l}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function uv(t,e,n){var r=_i(t,!0),a=r.x,i=r.y;return[Et(a,e)||0,Et(i,n)||0]}function dv(t,e,n){var r=t.map(function(i){return j(i,e)}),a=r.map(function(i){return Qr(i,n)});return{prev:r,next:a,result:a.map(function(i){return ct(i,e)})}}function Rl(t,e){return t.length===e.length&&t.every(function(n,r){var a=e[r],i=wt(n),s=wt(a);return i&&s?Rl(n,a):!i&&!s?n===a:!1})}var fv=an("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,a=e.angle,i=e.originalDatas,s=t.props,o=s.pinchable,l=s.ables;if(!o)return!1;var c="onPinch".concat(r?"Group":"","Start"),u="drag".concat(r?"Group":"","ControlStart"),d=(o===!0?t.controlAbles:l.filter(function(h){return o.indexOf(h.name)>-1})).filter(function(h){return h.canPinch&&h[u]}),f=nt(t,e,{});r&&(f.targets=r);var p=Y(t,c,f);n.isPinch=p!==!1,n.ables=d;var v=n.isPinch;return v?(d.forEach(function(h){if(i[h.name]=i[h.name]||{},!!h[u]){var g=O(O({},e),{datas:i[h.name],parentRotate:a,isPinch:!0});h[u](t,g)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},v):!1},pinch:function(t,e){var n=e.datas,r=e.scale,a=e.distance,i=e.originalDatas,s=e.inputEvent,o=e.targets,l=e.angle;if(n.isPinch){var c=a*(1-1/r),u=nt(t,e,{});o&&(u.targets=o);var d="onPinch".concat(o?"Group":"");Y(t,d,u);var f=n.ables,p="drag".concat(o?"Group":"","Control");return f.forEach(function(v){v[p]&&v[p](t,O(O({},e),{datas:i[v.name],inputEvent:s,parentDistance:c,parentRotate:l,isPinch:!0}))}),u}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,a=e.inputEvent,i=e.targets,s=e.originalDatas;if(n.isPinch){var o="onPinch".concat(i?"Group":"","End"),l=ae(t,e,{isDrag:r});i&&(l.targets=i),Y(t,o,l);var c=n.ables,u="drag".concat(i?"Group":"","ControlEnd");return c.forEach(function(d){d[u]&&d[u](t,O(O({},e),{isDrag:r,datas:s[d.name],inputEvent:a,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,O(O({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,O(O({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,O(O({},e),{targets:t.props.targets}))}});function ve(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var a=r.groupable;a.childDatas=a.childDatas||[];var i=a.childDatas;return t.moveables.map(function(s,o){return i[o]=i[o]||{},i[o][e]=i[o][e]||{},O(O({},n),{datas:i[o][e],originalDatas:i[o]})})}function zi(t,e,n,r,a,i,s){var o=!!n.match(/Start$/g),l=!!n.match(/End$/g),c=a.isPinch,u=a.datas,d=ve(t,e.name,a),f=t.moveables,p=d.map(function(v,h){var g=f[h],m=g.state,E=m.gestos,b=v;if(o)b=new Sr(s).dragStart(r,v);else{if(E[s]||(E[s]=u.childGestos[h]),!E[s])return;b=on(v,m,r,c,i,s)}var C=e[n](g,O(O({},b),{parentFlag:!0}));return l&&(E[s]=null),C});return o&&(u.childGestos=f.map(function(v){return v.state.gestos[s]})),p}function Te(t,e,n,r,a,i){a===void 0&&(a=function(u,d){return d});var s=!!n.match(/End$/g),o=ve(t,e.name,r),l=t.moveables,c=o.map(function(u,d){var f=l[d],p=u;p=a(f,u);var v=e[n](f,O(O({},p),{parentFlag:!0}));return v&&i&&i(f,u,v,d),s&&(f.state.gestos={}),v});return c}var pv=["left","right","center"],vv=["top","bottom","middle"],Fe={start:"left",end:"right",center:"center"},Ke={start:"top",end:"bottom",center:"middle"};function Tr(t,e){var n=t.props,r=n.snappable,a=n.bounds,i=n.innerBounds,s=n.verticalGuidelines,o=n.horizontalGuidelines,l=n.snapGridWidth,c=n.snapGridHeight,u=t.state,d=u.guidelines,f=u.enableSnap;return!r||!f||e&&r!==!0&&r.indexOf(e)<0?!1:!!(l||c||a||i||d&&d.length||s&&s.length||o&&o.length)}function Gi(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function hv(t,e){var n=Gi(t),r={};for(var a in n)a in e&&n[a]&&(r[a]=e[a]);return r}function Fi(t,e){var n=hv(t,e),r=vv.filter(function(i){return i in n}),a=pv.filter(function(i){return i in n});return{horizontal:r.map(function(i){return n[i]}),vertical:a.map(function(i){return n[i]})}}function gv(t,e,n){var r=Bt(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function mv(t){var e=t[0],n=t[1],r=n[0]-e[0],a=n[1]-e[1];Math.abs(r)<Rt&&(r=0),Math.abs(a)<Rt&&(a=0);var i=0,s=0,o=0;return r?a?(i=-a/r,s=1,o=i*e[0]-e[1]):(s=1,o=-e[1]):(i=-1,o=e[0]),[i,s,o].map(function(l){return rt(l,Rt)})}function sa(t,e,n,r){var a=t.props,i=av(r,a.snapThreshold,5);return Ol(t.state.guidelines,e,n,i)}function Ol(t,e,n,r){return{vertical:Ll(t,"vertical",e,r),horizontal:Ll(t,"horizontal",n,r)}}function yv(t,e,n){var r=n[0],a=n[1],i=e[0],s=e[1],o=j(n,e),l=o[0],c=o[1],u=c>0,d=l>0;l=oa(l),c=oa(c);var f={isSnap:!1,offset:0,pos:0},p={isSnap:!1,offset:0,pos:0};if(l===0&&c===0)return{vertical:f,horizontal:p};var v=sa(t,l?[r]:[],c?[a]:[]),h=v.vertical,g=v.horizontal;h.posInfos.filter(function(L){var A=L.pos;return d?A>=i:A<=i}),g.posInfos.filter(function(L){var A=L.pos;return u?A>=s:A<=s}),h.isSnap=h.posInfos.length>0,g.isSnap=g.posInfos.length>0;var m=Ki(h),E=m.isSnap,b=m.guideline,C=Ki(g),D=C.isSnap,x=C.guideline,S=D?x.pos[1]:0,M=E?b.pos[0]:0;if(l===0)D&&(p.isSnap=!0,p.pos=x.pos[1],p.offset=a-p.pos);else if(c===0)E&&(f.isSnap=!0,f.pos=M,f.offset=r-M);else{var w=c/l,T=n[1]-w*r,R=0,k=0,P=!1;E?(k=M,R=w*k+T,P=!0):D&&(R=S,k=(R-T)/w,P=!0),P&&(f.isSnap=!0,f.pos=k,f.offset=r-k,p.isSnap=!0,p.pos=R,p.offset=a-R)}return{vertical:f,horizontal:p}}function Pl(t,e,n){var r=Fi(t.props.snapDirections,e);return sa(t,r.vertical,r.horizontal,n)}function Ki(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],a=r.offset,i=r.dist,s=r.guideline;return{isSnap:e,offset:a,dist:i,pos:n.pos,guideline:s}}function Ll(t,e,n,r){if(!t||!t.length)return{isSnap:!1,index:-1,posInfos:[]};var a=e==="vertical",i=a?0:1,s=n.map(function(l,c){var u=t.map(function(d){var f=d.pos,p=l-f[i];return{offset:p,dist:Math.abs(p),guideline:d}}).filter(function(d){var f=d.guideline,p=d.dist,v=f.type;return!(v!==e||p>r)}).sort(function(d,f){return d.dist-f.dist});return{pos:l,index:c,guidelineInfos:u}}).filter(function(l){return l.guidelineInfos.length>0}).sort(function(l,c){return l.guidelineInfos[0].dist-c.guidelineInfos[0].dist}),o=s.length>0;return{isSnap:o,index:o?s[0].index:-1,posInfos:s}}function Ev(t,e,n,r){r===void 0&&(r=1);var a=[];if(n[0]&&n[1])a=[n,[-n[0],n[1]],[n[0],-n[1]]].map(function(o){return Mt(e,o)});else if(!n[0]&&!n[1])for(var i=[e[0],e[1],e[3],e[2],e[0]],s=0;s<4;++s)a.push(i[s]),a.push([(i[s][0]+i[s+1][0])/2,(i[s][1]+i[s+1][1])/2]);else t.props.keepRatio?a=[[-1,-1],[-1,1],[1,-1],[1,1],n].map(function(o){return Mt(e,o)}):(a=Gp(e,n),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));return sa(t,a.map(function(o){return o[0]}),a.map(function(o){return o[1]}),r)}function Al(t,e){var n=Math.abs(t.offset),r=Math.abs(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<$t?1:r<$t?-1:n-r}function la(t,e){return t.slice().sort(function(n,r){var a=n.sign[e],i=r.sign[e],s=n.offset[e],o=r.offset[e];if(a){if(!i)return-1}else return 1;return Al({isBound:n.isBound,isSnap:n.isSnap,offset:s},{isBound:r.isBound,isSnap:r.isSnap,offset:o})})[0]}function bv(t,e,n){var r=[];if(n)Math.abs(e[0])!==1||Math.abs(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var a=t[0]?t:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(o){var l=[s*a[0],o*a[1]];e[0]===l[0]&&e[1]===l[1]||r.push([e,l])})})}else if(t[0]){var i=Math.abs(e[0])===1?[1]:[1,-1];i.forEach(function(s){r.push([[e[0],-1],[s*t[0],-1]],[[e[0],0],[s*t[0],0]],[[e[0],1],[s*t[0],1]])})}else if(t[1]){var i=Math.abs(e[1])===1?[1]:[1,-1];i.forEach(function(o){r.push([[-1,e[1]],[-1,o*t[1]]],[[0,e[1]],[0,o*t[1]]],[[1,e[1]],[1,o*t[1]]])})}return r}function Nl(t,e){var n=Ga([e[0][0],e[1][0]]),r=Ga([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function Wi(t,e){var n=e[0],r=e[1],a=r[0]-n[0],i=r[1]-n[1];Math.abs(a)<$t&&(a=0),Math.abs(i)<$t&&(i=0);var s,o;if(!a)s=n[0],o=t[0];else if(!i)s=n[1],o=t[1];else{var l=i/a;s=l*(t[0]-n[0])+n[1],o=t[1]}return s-o}function Il(t,e,n,r){return r===void 0&&(r=$t),t.every(function(a){var i=Wi(a,e),s=i<=0;return s===n||Math.abs(i)<=r})}function Bl(t,e,n,r,a){return a===void 0&&(a=0),r&&e-a<=t||!r&&t<=n+a?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function Cv(t,e){var n=e.line,r=e.centerSign,a=e.verticalSign,i=e.horizontalSign,s=e.lineConstants,o=t.props.innerBounds;if(!o)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=o.left,c=o.top,u=o.width,d=o.height,f=[[l,c],[l,c+d]],p=[[l,c],[l+u,c]],v=[[l+u,c],[l+u,c+d]],h=[[l,c+d],[l+u,c+d]];if(Il([[l,c],[l+u,c],[l,c+d],[l+u,c+d]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=We(n,s,p,a),m=We(n,s,h,a),E=We(n,s,f,i),b=We(n,s,v,i),C=g.isBound&&m.isBound,D=g.isBound||m.isBound,x=E.isBound&&b.isBound,S=E.isBound||b.isBound,M=Mr(g.offset,m.offset),w=Mr(E.offset,b.offset),T=[0,0],R=!1,k=!1;return Math.abs(w)<Math.abs(M)?(T=[M,0],R=D,k=C):(T=[0,w],R=S,k=x),{isAllBound:k,isVerticalBound:D,isHorizontalBound:S,isBound:R,offset:T}}function We(t,e,n,r,a,i){var s=e[0],o=e[1],l=t[0],c=n[0],u=n[1],d=oa(u[1]-c[1]),f=oa(u[0]-c[0]),p=o,v=s,h=-s/o;if(f){if(!d){if(i&&!p)return{isBound:!1,offset:0};if(v){var b=(c[1]-l[1])/h+l[0];return Bl(b,c[0],u[0],r,a)}else{var m=c[1]-l[1],E=Math.abs(m)<=(a||0);return{isBound:E,offset:E?m:0}}}}else{if(i&&!v)return{isBound:!1,offset:0};if(p){var g=h*(c[0]-l[0])+l[1];return Bl(g,c[1],u[1],r,a)}else{var m=c[0]-l[0],E=Math.abs(m)<=(a||0);return{isBound:E,offset:E?m:0}}}return{isBound:!1,offset:0}}function _l(t,e,n){return e.map(function(r){var a=Cv(t,r),i=a.isBound,s=a.offset,o=a.isVerticalBound,l=a.isHorizontalBound,c=r.multiple,u=Ee({datas:n,distX:s[0],distY:s[1]}).map(function(d,f){return d*(c[f]?2/c[f]:0)});return{sign:c,isBound:i,isVerticalBound:o,isHorizontalBound:l,isSnap:!1,offset:u}})}function xv(t,e,n){var r,a=Vi(t,e,[0,0],!1).map(function(f){return O(O({},f),{multiple:f.multiple.map(function(p){return Math.abs(p)*2})})}),i=_l(t,a,n),s=la(i,0),o=la(i,1),l=0,c=0,u=s.isVerticalBound||o.isVerticalBound,d=s.isHorizontalBound||o.isHorizontalBound;return(u||d)&&(r=_p({datas:n,distX:-s.offset[0],distY:-o.offset[1]}),l=r[0],c=r[1]),{vertical:{isBound:u,offset:l},horizontal:{isBound:d,offset:c}}}function Sv(t,e){var n=[],r=t[0],a=t[1];return r&&a?n.push([[0,a*2],t,[-r,a]],[[r*2,0],t,[r,-a]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):a?(n.push([[0,a*2],[1,a],[-1,a]]),e&&n.push([[-1,0],[-1,a],[-1,-a]],[[1,0],[1,a],[1,-a]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function Vi(t,e,n,r){var a=t.state,i=a.allMatrix,s=a.is3d,o=Ge(i,100,100,s?4:3),l=Mt(o,[0,0]);return Sv(n,r).map(function(c){var u=c[0],d=c[1],f=c[2],p=[Mt(o,d),Mt(o,f)],v=mv(p),h=Nl(l,p),g=h.vertical,m=h.horizontal,E=Wi(l,p)<=0;return{multiple:u,centerSign:E,verticalSign:g,horizontalSign:m,lineConstants:v,line:[Mt(e,d),Mt(e,f)]}})}function zl(t,e,n,r){var a=r?t.map(function(i){return Qr(i,r)}):t;return[[a[0],a[1]],[a[1],a[3]],[a[3],a[2]],[a[2],a[0]]].some(function(i){var s=Wi(n,i)<=0;return!Il(e,i,s)})}function Dv(t){var e=t[0],n=t[1],r=n[0]-e[0],a=n[1]-e[1];if(!r)return Math.abs(e[0]);if(!a)return Math.abs(e[1]);var i=a/r;return Math.abs((-i*e[0]+e[1])/Math.sqrt(Math.pow(i,2)+1))}function wv(t){var e=t[0],n=t[1],r=n[0]-e[0],a=n[1]-e[1];if(!r)return[e[0],0];if(!a)return[0,e[1]];var i=a/r,s=-i*e[0]+e[1];return[-s/(i+1/i),s/(i*i+1)]}function kv(t,e,n,r,a){var i=t.props.innerBounds,s=a*Math.PI/180;if(!i)return[];var o=i.left,l=i.top,c=i.width,u=i.height,d=o-r[0],f=o+c-r[0],p=l-r[1],v=l+u-r[1],h=[[d,p],[f,p],[d,v],[f,v]],g=Mt(n,[0,0]);if(!zl(n,h,g,0))return[];var m=[],E=h.map(function(b){return[fe(b),kt([0,0],b)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(b){var C=kt([0,0],wv(b)),D=Dv(b);m.push.apply(m,E.filter(function(x){var S=x[0];return S&&D<=S}).map(function(x){var S=x[0],M=x[1],w=Math.acos(S?D/S:0),T=M+w,R=M-w;return[s+T-C,s+R-C]}).reduce(function(x,S){return x.push.apply(x,S),x},[]).filter(function(x){return!zl(e,h,g,x)}).map(function(x){return rt(x*180/Math.PI,$t)}))}),m}function Mv(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var n=t.getRect(),r=n.pos1,a=n.pos2,i=n.pos3,s=n.pos4,o=[r,a,i,s],l=Mt(o,[0,0]),c=e.left,u=e.top,d=e.width,f=e.height,p=[[c,u],[c,u+f]],v=[[c,u],[c+d,u]],h=[[c+d,u],[c+d,u+f]],g=[[c,u+f],[c+d,u+f]],m=Vi(t,o,[0,0],!1),E=[],b=[],C={top:!1,bottom:!1,left:!1,right:!1};return m.forEach(function(D){var x=D.line,S=D.lineConstants,M=Nl(l,x),w=M.horizontal,T=M.vertical,R=We(x,S,v,T,1,!0),k=We(x,S,g,T,1,!0),P=We(x,S,p,w,1,!0),L=We(x,S,h,w,1,!0);R.isBound&&!C.top&&(E.push(u),C.top=!0),k.isBound&&!C.bottom&&(E.push(u+f),C.bottom=!0),P.isBound&&!C.left&&(b.push(c),C.left=!0),L.isBound&&!C.right&&(b.push(c+d),C.right=!0)}),{horizontal:E,vertical:b}}function Hi(t,e,n){var r=t||{},a=r.position,i=a===void 0?"client":a,s=r.left,o=s===void 0?-1/0:s,l=r.top,c=l===void 0?-1/0:l,u=r.right,d=u===void 0?1/0:u,f=r.bottom,p=f===void 0?1/0:f,v={position:i,left:o,top:c,right:d,bottom:p};return{vertical:Gl(v,e,!0),horizontal:Gl(v,n,!1)}}function ca(t,e){var n=t.state,r=n.containerClientRect,a=r.clientHeight,i=r.clientWidth,s=r.clientLeft,o=r.clientTop,l=n.snapOffset,c=l.left,u=l.top,d=l.right,f=l.bottom,p=e||t.props.bounds||{},v=p.position||"client",h=v==="css",g=p.left,m=g===void 0?-1/0:g,E=p.top,b=E===void 0?-1/0:E,C=p.right,D=C===void 0?h?-1/0:1/0:C,x=p.bottom,S=x===void 0?h?-1/0:1/0:x;return h&&(D=i+d-c-D,S=a+f-u-S),{left:m+c-s,right:D+c-s,top:b+u-o,bottom:S+u-o}}function Tv(t,e,n){var r=ca(t),a=r.left,i=r.top,s=r.right,o=r.bottom,l=n[0],c=n[1],u=j(n,e),d=u[0],f=u[1];Math.abs(d)<$t&&(d=0),Math.abs(f)<$t&&(f=0);var p=f>0,v=d>0,h={isBound:!1,offset:0,pos:0},g={isBound:!1,offset:0,pos:0};if(d===0&&f===0)return{vertical:h,horizontal:g};if(d===0)p?o<c&&(g.pos=o,g.offset=c-o):i>c&&(g.pos=i,g.offset=c-i);else if(f===0)v?s<l&&(h.pos=s,h.offset=l-s):a>l&&(h.pos=a,h.offset=l-a);else{var m=f/d,E=n[1]-m*l,b=0,C=0,D=!1;v&&s<=l?(b=m*s+E,C=s,D=!0):!v&&l<=a&&(b=m*a+E,C=a,D=!0),D&&(b<i||b>o)&&(D=!1),D||(p&&o<=c?(b=o,C=(b-E)/m,D=!0):!p&&c<=i&&(b=i,C=(b-E)/m,D=!0)),D&&(h.isBound=!0,h.pos=C,h.offset=l-C,g.isBound=!0,g.pos=b,g.offset=c-b)}return{vertical:h,horizontal:g}}function Gl(t,e,n){var r=t[n?"left":"top"],a=t[n?"right":"bottom"],i=Math.min.apply(Math,e),s=Math.max.apply(Math,e),o=[];return r+1>i&&o.push({isBound:!0,offset:i-r,pos:r}),a-1<s&&o.push({isBound:!0,offset:s-a,pos:a}),o.length||o.push({isBound:!1,offset:0,pos:0}),o.sort(function(l,c){return Math.abs(c.offset)-Math.abs(l.offset)})}function Fl(t,e,n){var r=n?t.map(function(a){return Qr(a,n)}):t;return r.some(function(a){return a[0]<e.left&&Math.abs(a[0]-e.left)>.1||a[0]>e.right&&Math.abs(a[0]-e.right)>.1||a[1]<e.top&&Math.abs(a[1]-e.top)>.1||a[1]>e.bottom&&Math.abs(a[1]-e.bottom)>.1})}function Rv(t,e,n){var r=fe(t),a=Math.sqrt(r*r-e*e)||0;return[a,-a].sort(function(i,s){return Math.abs(i-t[n?0:1])-Math.abs(s-t[n?0:1])}).map(function(i){return kt([0,0],n?[i,e]:[e,i])})}function Ov(t,e,n,r,a){if(!t.props.bounds)return[];var i=a*Math.PI/180,s=ca(t),o=s.left,l=s.top,c=s.right,u=s.bottom,d=o-r[0],f=c-r[0],p=l-r[1],v=u-r[1],h={left:d,top:p,right:f,bottom:v};if(!Fl(n,h,0))return[];var g=[];return[[d,0],[f,0],[p,1],[v,1]].forEach(function(m){var E=m[0],b=m[1];n.forEach(function(C){var D=kt([0,0],C);g.push.apply(g,Rv(C,E,b).map(function(x){return i+x-D}).filter(function(x){return!Fl(e,h,x)}).map(function(x){return rt(x*180/Math.PI,$t)}))})}),g}function Pv(t,e){var n,r=t.direction,a=t.classNames,i=t.size,s=t.pos,o=t.zoom,l=t.key,c=r==="horizontal",u=c?"Y":"X";return e.createElement("div",{key:l,className:a.join(" "),style:(n={},n[c?"width":"height"]="".concat(i),n.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(u,"(-50%) scale").concat(u,"(").concat(o,")"),n)})}function Yi(t,e){return Pv(O(O({},t),{classNames:J([Q("line","guideline",t.direction)],t.classNames,!0).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(rt(n,.1),"px")})}),e)}function Kl(t,e,n,r,a,i,s,o){var l=t.props.zoom;return n.map(function(c,u){var d=c.type,f=c.pos,p=[0,0];return p[s]=r,p[s?0:1]=-a+f,Yi({key:"".concat(e,"TargetGuideline").concat(u),classNames:[Q("target","bold",d)],posValue:p,sizeValue:i,zoom:l,direction:e},o)})}function Wl(t,e,n,r,a,i){var s=t.props,o=s.zoom,l=s.isDisplayInnerSnapDigit,c=e==="horizontal"?Fe:Ke,u=a[c.start],d=a[c.end];return n.filter(function(f){var p=f.hide,v=f.elementRect;if(p)return!1;if(l&&v){var h=v.rect;if(h[c.start]<=u&&d<=h[c.end])return!1}return!0}).map(function(f,p){var v=f.pos,h=f.size,g=f.element,m=f.className,E=[-r[0]+v[0],-r[1]+v[1]];return Yi({key:"".concat(e,"-default-guideline-").concat(p),classNames:g?[Q("bold"),m]:[Q("normal"),m],direction:e,posValue:E,sizeValue:h,zoom:o},i)})}function dn(t,e,n,r,a,i,s,o){var l,c=t.props,u=c.snapDigit,d=u===void 0?0:u,f=c.isDisplaySnapDigit,p=f===void 0?!0:f,v=c.snapDistFormat,h=v===void 0?function(D,x){return D}:v,g=c.zoom,m=e==="horizontal"?"X":"Y",E=e==="vertical"?"height":"width",b=Math.abs(a),C=p?parseFloat(b.toFixed(d)):0;return o.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:Q("guideline-group",e),style:(l={left:"".concat(i[0],"px"),top:"".concat(i[1],"px")},l[E]="".concat(b,"px"),l)},Yi({direction:e,classNames:[Q(n),s],size:"100%",posValue:[0,0],sizeValue:b,zoom:g},o),o.createElement("div",{className:Q("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(g,")")}},C>0?h(C,e):""))}function Lv(t,e,n,r){var a=t==="vertical"?0:1,i=t==="vertical"?1:0,s=a?Fe:Ke,o=n[s.start],l=n[s.end];return Sl(e,function(c){return c.pos[a]}).map(function(c){var u=[],d=[],f=[];return c.forEach(function(p){var v,h,g=p.element,m=p.elementRect.rect;if(m[s.end]<o)u.push(p);else if(l<m[s.start])d.push(p);else if(m[s.start]<=o&&l<=m[s.end]&&r){var E=p.pos,b={element:g,rect:O(O({},m),(v={},v[s.end]=m[s.start],v))},C={element:g,rect:O(O({},m),(h={},h[s.start]=m[s.end],h))},D=[0,0],x=[0,0];D[a]=E[a],D[i]=E[i],x[a]=E[a],x[i]=E[i]+p.size,u.push({type:t,pos:D,size:0,elementRect:b}),d.push({type:t,pos:x,size:0,elementRect:C})}}),u.sort(function(p,v){return v.pos[i]-p.pos[i]}),d.sort(function(p,v){return p.pos[i]-v.pos[i]}),{total:c,start:u,end:d,inner:f}})}function Av(t,e,n,r,a){var i=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(o){var l=e.filter(function(g){return g.type===o}),c=o==="vertical"?1:0,u=c?0:1,d=Lv(o,l,r,i),f=c?Ke:Fe,p=c?Fe:Ke,v=r[f.start],h=r[f.end];d.forEach(function(g){var m=g.total,E=g.start,b=g.end,C=g.inner,D=n[u]+m[0].pos[u]-r[p.start],x=r;E.forEach(function(S){var M=S.elementRect.rect,w=x[f.start]-M[f.end];if(w>0){var T=[0,0];T[c]=n[c]+x[f.start]-v-w,T[u]=D,s.push(dn(t,o,"dashed",s.length,w,T,S.className,a))}x=M}),x=r,b.forEach(function(S){var M=S.elementRect.rect,w=M[f.start]-x[f.end];if(w>0){var T=[0,0];T[c]=n[c]+x[f.end]-v,T[u]=D,s.push(dn(t,o,"dashed",s.length,w,T,S.className,a))}x=M}),C.forEach(function(S){var M=S.elementRect.rect,w=v-M[f.start],T=M[f.end]-h,R=[0,0],k=[0,0];R[c]=n[c]-w,R[u]=D,k[c]=n[c]+h-v,k[u]=D,s.push(dn(t,o,"dashed",s.length,w,R,S.className,a)),s.push(dn(t,o,"dashed",s.length,T,k,S.className,a))})})}),s}function Nv(t,e,n,r,a){var i=[];return["horizontal","vertical"].forEach(function(s){var o=e.filter(function(g){return g.type===s}).slice(0,1),l=s==="vertical"?0:1,c=l?0:1,u=l?Ke:Fe,d=l?Fe:Ke,f=r[u.start],p=r[u.end],v=r[d.start],h=r[d.end];o.forEach(function(g){var m=g.gap,E=g.gapRects,b=Math.max.apply(Math,J([v],E.map(function(x){var S=x.rect;return S[d.start]}),!1)),C=Math.min.apply(Math,J([h],E.map(function(x){var S=x.rect;return S[d.end]}),!1)),D=(b+C)/2;b===C||D===(v+h)/2||E.forEach(function(x){var S=x.rect,M=x.className,w=[n[0],n[1]];if(S[u.end]<f)w[l]+=S[u.end]-f;else if(p<S[u.start])w[l]+=S[u.start]-f-m;else return;w[c]+=D-v,i.push(dn(t,l?"vertical":"horizontal","gap",i.length,m,w,M,a))})})}),i}function Iv(t,e,n,r){var a=e[0]-t[0],i=e[1]-t[1];if(Math.abs(a)<Rt&&(a=0),Math.abs(i)<Rt&&(i=0),!a)return r?[0,0]:[0,n];if(!i)return r?[n,0]:[0,0];var s=i/a,o=t[1]-s*t[0];if(r){var l=s*(e[0]+n)+o;return[n,l-e[1]]}else{var c=(e[1]+n-o)/s;return[c-e[0],n]}}function $i(t,e,n,r,a){var i=Iv(t,e,n,r);if(!i)return{isOutside:!1,offset:[0,0]};var s=oe(t,e),o=oe(i,t),l=oe(i,e),c=o>s||l>s,u=Ee({datas:a,distX:i[0],distY:i[1]}),d=u[0],f=u[1];return{offset:[d,f],isOutside:c}}function ua(t,e){return t.isBound?t.offset:e.isSnap?Ki(e).offset:0}function Bv(t,e,n,r,a){var i=e[0],s=e[1],o=n[0],l=n[1],c=r[0],u=r[1],d=a[0],f=a[1],p=-d,v=-f;if(t&&i&&s){p=0,v=0;var h=[];if(o&&l?h.push([0,f],[d,0]):o?h.push([d,0]):l?h.push([0,f]):c&&u?h.push([0,f],[d,0]):c?h.push([d,0]):u&&h.push([0,f]),h.length){h.sort(function(b,C){return fe(j([i,s],b))-fe(j([i,s],C))});var g=h[0];if(g[0]&&Math.abs(i)>Rt)p=-g[0],v=s*Math.abs(i+p)/Math.abs(i)-s;else if(g[1]&&Math.abs(s)>Rt){var m=s;v=-g[1],p=i*Math.abs(s+v)/Math.abs(m)-i}if(t&&l&&o)if(Math.abs(p)>Rt&&Math.abs(p)<Math.abs(d)){var E=Math.abs(d)/Math.abs(p);p*=E,v*=E}else if(Math.abs(v)>Rt&&Math.abs(v)<Math.abs(f)){var E=Math.abs(f)/Math.abs(v);p*=E,v*=E}else p=Mr(-d,p),v=Mr(-f,v)}}else p=i||o?-d:0,v=s||l?-f:0;return[p,v]}function _v(t,e,n,r,a,i){if(!Tr(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=Li(i.absolutePoses,[e,n]),o=le(s),l=o.left,c=o.right,u=o.top,d=o.bottom,f={horizontal:s.map(function(L){return L[1]}),vertical:s.map(function(L){return L[0]})},p=Gi(t.props.snapDirections),v=Fi(p,{left:l,right:c,top:u,bottom:d,center:(l+c)/2,middle:(u+d)/2}),h=da(t,a,v,f),g=h.vertical,m=h.horizontal,E=xv(t,s,i),b=E.vertical,C=E.horizontal,D=g.isSnap,x=m.isSnap,S=g.isBound||b.isBound,M=m.isBound||C.isBound,w=Mr(g.offset,b.offset),T=Mr(m.offset,C.offset),R=Bv(r,[e,n],[S,M],[D,x],[w,T]),k=R[0],P=R[1];return[{isBound:S,isSnap:D,offset:k},{isBound:M,isSnap:x,offset:P}]}function da(t,e,n,r){r===void 0&&(r=n);var a=Hi(ca(t),r.vertical,r.horizontal),i=a.horizontal,s=a.vertical,o=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:sa(t,n.vertical,n.horizontal),l=o.horizontal,c=o.vertical,u=ua(i[0],l),d=ua(s[0],c),f=Math.abs(u),p=Math.abs(d);return{horizontal:{isBound:i[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:u,dist:f,bounds:i,snap:l},vertical:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:d,dist:p,bounds:s,snap:c}}}function Vl(t,e,n,r,a){var i=Hi(e,n,r),s=i.horizontal,o=i.vertical,l=Ol(t,n,r,a),c=l.horizontal,u=l.vertical,d=ua(s[0],c),f=ua(o[0],u),p=Math.abs(d),v=Math.abs(f);return{horizontal:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:d,dist:p,bounds:s,snap:c},vertical:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:f,dist:v,bounds:o,snap:u}}}function zv(t,e,n,r){var a=kt(t,e)/Math.PI*180,i=n.vertical,s=i.isBound,o=i.isSnap,l=i.dist,c=n.horizontal,u=c.isBound,d=c.isSnap,f=c.dist,p=a%180,v=p<3||p>177,h=p>87&&p<93;return f<l&&(s||o&&!h&&(!r||!v))?"vertical":u||d&&!v&&(!r||!h)?"horizontal":""}function Gv(t,e,n,r,a,i){return n.map(function(s){var o=s[0],l=s[1],c=Mt(e,o),u=Mt(e,l),d=r?Fv(t,c,u,a):da(t,a,{vertical:[u[0]],horizontal:[u[1]]}),f=d.horizontal,p=f.offset,v=f.isBound,h=f.isSnap,g=d.vertical,m=g.offset,E=g.isBound,b=g.isSnap,C=j(l,o);if(!m&&!p)return{isBound:E||v,isSnap:b||h,sign:C,offset:[0,0]};var D=zv(c,u,d,r);if(!D)return{sign:C,isBound:!1,isSnap:!1,offset:[0,0]};var x=D==="vertical",S=[0,0];return!r&&Math.abs(l[0])===1&&Math.abs(l[1])===1&&o[0]!==l[0]&&o[1]!==l[1]?S=Ee({datas:i,distX:-m,distY:-p}):S=$i(c,u,-(x?m:p),x,i).offset,S=S.map(function(M,w){return M*(C[w]?2/C[w]:0)}),{sign:C,isBound:x?E:v,isSnap:x?b:h,offset:S}})}function Hl(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function Fv(t,e,n,r){var a=Tv(t,e,n),i=a.horizontal,s=a.vertical,o=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:yv(t,e,n),l=o.horizontal,c=o.vertical,u=Hl(i,l),d=Hl(s,c),f=Math.abs(u),p=Math.abs(d);return{horizontal:{isBound:i.isBound,isSnap:l.isSnap,offset:u,dist:f},vertical:{isBound:s.isBound,isSnap:c.isSnap,offset:d,dist:p}}}function Kv(t,e,n,r,a){var i=[-n[0],-n[1]],s=t.state,o=s.width,l=s.height,c=t.props.bounds,u=1/0,d=1/0;if(c){var f=[[n[0],-n[1]],[-n[0],n[1]]],p=c.left,v=p===void 0?-1/0:p,h=c.top,g=h===void 0?-1/0:h,m=c.right,E=m===void 0?1/0:m,b=c.bottom,C=b===void 0?1/0:b;f.forEach(function(D){var x=D[0]!==i[0],S=D[1]!==i[1],M=Mt(e,D),w=kt(r,M)*360/Math.PI;if(S){var T=M.slice();(Math.abs(w-360)<2||Math.abs(w-180)<2)&&(T[1]=r[1]);var R=$i(r,T,(r[1]<M[1]?C:g)-M[1],!1,a),k=R.offset,P=k[1],L=R.isOutside;isNaN(P)||(d=l+(L?1:-1)*Math.abs(P))}if(x){var T=M.slice();(Math.abs(w-90)<2||Math.abs(w-270)<2)&&(T[0]=r[0]);var A=$i(r,T,(r[0]<M[0]?E:v)-M[0],!0,a),I=A.offset[0],_=A.isOutside;isNaN(I)||(u=o+(_?1:-1)*Math.abs(I))}})}return{maxWidth:u,maxHeight:d}}function Xi(t){var e=t.state,n=e.containerClientRect,r=e.hasFixed,a=n.overflow,i=n.scrollHeight,s=n.scrollWidth,o=n.clientHeight,l=n.clientWidth,c=n.clientLeft,u=n.clientTop,d=t.props,f=d.snapGap,p=f===void 0?!0:f,v=d.verticalGuidelines,h=d.horizontalGuidelines,g=d.snapThreshold,m=g===void 0?5:g,E=d.snapGridWidth,b=E===void 0?0:E,C=d.snapGridHeight,D=C===void 0?0:C,x=d.maxSnapElementGuidelineDistance,S=x===void 0?1/0:x,M=le(Jt(t.state)),w=M.top,T=M.left,R=M.bottom,k=M.right,P={top:w,left:T,bottom:R,right:k,center:(T+k)/2,middle:(w+R)/2},L=Hv(t),A=J([],L,!0);p&&A.push.apply(A,Wv(t,P,m)),A.push.apply(A,Vv(b,D,a?s:l,a?i:o,c,u));var I=O({},e.snapOffset||{left:0,top:0,bottom:0,right:0});if(r){var _=n.left,B=n.top;I.left+=_,I.top+=B,I.right+=_,I.bottom+=B}return A.push.apply(A,$l(h||!1,v||!1,a?s:l,a?i:o,c,u,I)),A=A.filter(function(z){var N=z.element,F=z.elementRect,W=z.type;if(!N||!F)return!0;var $=F.rect;return Yl(P,$,W,S)}),A}function Wv(t,e,n){var r=t.props,a=r.maxSnapElementGuidelineDistance,i=a===void 0?1/0:a,s=r.maxSnapElementGapDistance,o=s===void 0?1/0:s,l=t.state.elementRects,c=[];return[["vertical",Fe,Ke],["horizontal",Ke,Fe]].forEach(function(u){var d=u[0],f=u[1],p=u[2],v=e[f.start],h=e[f.end],g=e[f.center],m=e[p.start],E=e[p.end];function b(x){var S=x.rect;return S[f.end]<v+n?v-S[f.end]:h-n<S[f.start]?S[f.start]-h:-1}var C=l.filter(function(x){var S=x.rect;return S[p.start]>E||S[p.end]<m?!1:b(x)>0}).sort(function(x,S){return b(x)-b(S)}),D=[];C.forEach(function(x){C.forEach(function(S){if(x!==S){var M=x.rect,w=S.rect,T=M[p.start],R=M[p.end],k=w[p.start],P=w[p.end];T>P||k>R||D.push([x,S])}})}),D.forEach(function(x){var S=x[0],M=x[1],w=S.rect,T=M.rect,R=w[f.start],k=w[f.end],P=T[f.start],L=T[f.end],A=0,I=0,_=!1,B=!1,z=!1;if(k<=v&&h<=P){if(B=!0,A=(P-k-(h-v))/2,I=k+A+(h-v)/2,Math.abs(I-g)>n)return}else if(k<P&&L<v+n){if(_=!0,A=P-k,I=L+A,Math.abs(I-v)>n)return}else if(k<P&&h-n<R){if(z=!0,A=P-k,I=R-A,Math.abs(I-h)>n)return}else return;A&&Yl(e,T,d,i)&&(A>o||c.push({type:d,pos:d==="vertical"?[I,0]:[0,I],element:M.element,size:0,className:M.className,isStart:_,isCenter:B,isEnd:z,gap:A,hide:!0,gapRects:[S,M]}))})}),c}function Vv(t,e,n,r,a,i){a===void 0&&(a=0),i===void 0&&(i=0);var s=[];if(e)for(var o=0;o<=r;o+=e)s.push({type:"horizontal",pos:[0,rt(o-i,.1)],size:n,hide:!0});if(t)for(var o=0;o<=n;o+=t)s.push({type:"vertical",pos:[rt(o-a,.1),0],size:r,hide:!0});return s}function Yl(t,e,n,r){return n==="horizontal"?Math.abs(t.right-e.left)<=r||Math.abs(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?Math.abs(t.bottom-e.top)<=r||Math.abs(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function Hv(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var a=(e.elementRects||[]).filter(function(f){return!f.refresh}),i=r.map(function(f){return qt(f)&&"element"in f?O(O({},f),{element:ir(f.element,!0)}):{element:ir(f,!0)}}).filter(function(f){return f.element}),s=br(a.map(function(f){return f.element}),i.map(function(f){return f.element})),o=s.maintained,l=s.added,c=[];o.forEach(function(f){var p=f[0],v=f[1];c[v]=a[p]}),Yv(t,l.map(function(f){return i[f]})).map(function(f,p){c[l[p]]=f}),e.elementRects=c;var u=Gi(t.props.elementSnapDirections),d=[];return c.forEach(function(f){var p=f.element,v=f.top,h=v===void 0?u.top:v,g=f.left,m=g===void 0?u.left:g,E=f.right,b=E===void 0?u.right:E,C=f.bottom,D=C===void 0?u.bottom:C,x=f.center,S=x===void 0?u.center:x,M=f.middle,w=M===void 0?u.middle:M,T=f.className,R=f.rect,k=Fi({top:h,right:b,left:m,bottom:D,center:S,middle:w},R),P=k.horizontal,L=k.vertical,A=R.top,I=R.left,_=R.right-I,B=R.bottom-A,z=[_,B];L.forEach(function(N){d.push({type:"vertical",element:p,pos:[rt(N,.1),A],size:B,sizes:z,className:T,elementRect:f})}),P.forEach(function(N){d.push({type:"horizontal",element:p,pos:[I,rt(N,.1)],size:_,sizes:z,className:T,elementRect:f})})}),d}function $l(t,e,n,r,a,i,s){a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var o=[],l=s.left,c=s.top,u=s.bottom,d=s.right,f=n+d-l,p=r+u-c;return t&&t.forEach(function(v){var h=qt(v)?v:{pos:v};o.push({type:"horizontal",pos:[l,rt(h.pos-i+c,.1)],size:f,className:h.className})}),e&&e.forEach(function(v){var h=qt(v)?v:{pos:v};o.push({type:"vertical",pos:[rt(h.pos-a+l,.1),c],size:p,className:h.className})}),o}function Yv(t,e){if(!e.length)return[];var n=t.state,r=n.containerClientRect,a=n.targetClientRect,i=a.top,s=a.left,o=n.rootMatrix,l=n.is3d,c=l?4:3,u=gv(o,r,c),d=u[0],f=u[1],p=Jt(n),v=ze(p),h=v.minX,g=v.minY,m=j([h,g],ar(o,[s-d,i-f],c)).map(function(C){return nv(C)}),E=m[0],b=m[1];return e.map(function(C){var D=C.element.getBoundingClientRect(),x=D.left-d,S=D.top-f,M=S+D.height,w=x+D.width,T=ar(o,[x,S],c),R=T[0],k=T[1],P=ar(o,[w,M],c),L=P[0],A=P[1];return O(O({},C),{rect:{left:R+E,right:L+E,top:k+b,bottom:A+b,center:(R+L)/2+E,middle:(k+A)/2+b}})})}function fa(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var a=e.containerClientRect,i={left:0,top:0,bottom:0,right:0};if(n!==r){var s=ir(r,!0);if(s){var o=un(s),l=kl(e,[o.left-a.left,o.top-a.top]),c=kl(e,[o.right-a.right,o.bottom-a.bottom]);i.left=rt(l[0],1e-5),i.top=rt(l[1],1e-5),i.right=rt(c[0],1e-5),i.bottom=rt(c[1],1e-5)}}return e.snapContainer=r,e.snapOffset=i,e.guidelines=Xi(t),e.enableSnap=!0,!0}function Xl(t,e,n,r,a,i){var s=Ge(t,e,n,i?4:3),o=Mt(s,r);return Li(s,j(a,o))}function $v(t,e,n,r,a,i){var s=i.fixedDirection,o=bv(n,s,r),l=Vi(t,e,n,r),c=J(J([],Gv(t,e,o,r,a,i),!0),_l(t,l,i),!0),u=la(c,0),d=la(c,1);return{width:{isBound:u.isBound,offset:u.offset[0]},height:{isBound:d.isBound,offset:d.offset[1]}}}function Xv(t,e,n,r,a,i,s,o,l){var c=Mt(e,s),u=da(t,o,{vertical:[c[0]],horizontal:[c[1]]}),d=u.horizontal.offset,f=u.vertical.offset;if(rt(f,xi)||rt(d,xi)){var p=Ee({datas:l,distX:-f,distY:-d}),v=p[0],h=p[1],g=Math.min(a||1/0,n+s[0]*v),m=Math.min(i||1/0,r+s[1]*h);return[g-n,m-r]}return[0,0]}function Zl(t,e,n,r,a,i,s,o){for(var l=Jt(t.state),c=t.props.keepRatio,u=0,d=0,f=0;f<2;++f){var p=e(u,d),v=$v(t,p,a,c,s,o),h=v.width,g=v.height,m=h.isBound,E=g.isBound,b=h.offset,C=g.offset;if(f===1&&(m||(b=0),E||(C=0)),f===0&&s&&!m&&!E)return[0,0];if(c){var D=Math.abs(b)*(n?1/n:1),x=Math.abs(C)*(r?1/r:1),S=m&&E?D<x:E||!m&&D<x;S?b=n*C/r:C=r*b/n}u+=b,d+=C}if(a[0]&&a[1]){var M=Kv(t,l,a,i,o),w=M.maxWidth,T=M.maxHeight,R=Xv(t,e(u,d).map(function(L){return L.map(function(A){return rt(A,xi)})}),n+u,r+d,w,T,a,s,o),b=R[0],C=R[1];u+=b,d+=C}return[u,d]}function Zv(t,e,n){if(!Tr(t,"rotatable"))return{isSnap:!1,rotation:n};var r=e.pos1,a=e.pos2,i=e.pos3,s=e.pos4,o=e.origin,l=n*Math.PI/180,c=[r,a,i,s].map(function(p){return j(p,o)}),u=c.map(function(p){return Qr(p,l)}),d=J(J([],Ov(t,c,u,o,n),!0),kv(t,c,u,o,n),!0);d.sort(function(p,v){return Math.abs(p-n)-Math.abs(v-n)});var f=d.length>0;return{isSnap:f,rotation:f?d[0]:n}}function Uv(t,e,n,r,a,i,s){if(!Tr(t,"resizable"))return[0,0];var o=s.fixedDirection,l=s.nextAllMatrix,c=t.state,u=c.allMatrix,d=c.is3d;return Zl(t,function(f,p){return Xl(l||u,e+f,n+p,o,a,d)},e,n,r,a,i,s)}function jv(t,e,n,r,a){if(!Tr(t,"scalable"))return[0,0];var i=a.startOffsetWidth,s=a.startOffsetHeight,o=a.fixedPosition,l=a.fixedDirection,c=a.is3d,u=Zl(t,function(d,f){return Xl(Wp(a,ct(e,[d/i,f/s])),i,s,l,o,c)},i,s,n,o,r,a);return[u[0]/i,u[1]/s]}function Qv(t,e){e.absolutePoses=Jt(t.state)}function Ul(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var a=r.guideline;e.indexOf(a)>-1||e.push(a)})}),e}function jl(t,e,n,r,a,i){var s=Hi(ca(t,i),e,n),o=s.vertical,l=s.horizontal;o.forEach(function(f){f.isBound&&r.push({type:"bounds",pos:f.pos})}),l.forEach(function(f){f.isBound&&a.push({type:"bounds",pos:f.pos})});var c=Mv(t),u=c.vertical,d=c.horizontal;u.forEach(function(f){we(r,function(p){var v=p.type,h=p.pos;return v==="bounds"&&h===f})>=0||r.push({type:"bounds",pos:f})}),d.forEach(function(f){we(a,function(p){var v=p.type,h=p.pos;return v==="bounds"&&h===f})>=0||a.push({type:"bounds",pos:f})})}var qv=Ii("",["resizable","scalable"]),Jv={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,snapRenderThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function,maxSnapElementGuidelineDistance:Number,maxSnapElementGapDistance:Number},events:{onSnap:"snap"},css:[`:host {
    --bounds-color: #d66;
}
.guideline {
    pointer-events: none;
    z-index: 2;
}
.guideline.bounds {
    background: #d66;
    background: var(--bounds-color);
}
.guideline-group {
    position: absolute;
    top: 0;
    left: 0;
}
.guideline-group .size-value {
    position: absolute;
    color: #f55;
    font-size: 12px;
    font-weight: bold;
}
.guideline-group.horizontal .size-value {
    transform-origin: 50% 100%;
    transform: translateX(-50%);
    left: 50%;
    bottom: 5px;
}
.guideline-group.vertical .size-value {
    transform-origin: 0% 50%;
    top: 50%;
    transform: translateY(-50%);
    left: 5px;
}
.guideline.gap {
    background: #f55;
}
.size-value.gap {
    color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,a=n.left,i=n.pos1,s=n.pos2,o=n.pos3,l=n.pos4,c=n.snapRenderInfo,u=t.props.snapRenderThreshold,d=u===void 0?1:u;if(!c||!c.render||!Tr(t,""))return[];n.guidelines=Xi(t);var f=Math.min(i[0],s[0],o[0],l[0]),p=Math.min(i[1],s[1],o[1],l[1]),v=c.externalPoses||[],h=Jt(t.state),g=[],m=[],E=[],b=[],C=[],D=le(h),x=D.width,S=D.height,M=D.top,w=D.left,T=D.bottom,R=D.right,k={left:w,right:R,top:M,bottom:T,center:(w+R)/2,middle:(M+T)/2},P=v.length>0,L=P?le(v):{};if(!c.request){if(c.direction&&C.push(Ev(t,h,c.direction,d)),c.snap){var A=le(h);c.center&&(A.middle=(A.top+A.bottom)/2,A.center=(A.left+A.right)/2),C.push(Pl(t,A,d))}P&&(c.center&&(L.middle=(L.top+L.bottom)/2,L.center=(L.left+L.right)/2),C.push(Pl(t,L,d))),C.forEach(function(z){var N=z.vertical.posInfos,F=z.horizontal.posInfos;g.push.apply(g,N.filter(function(W){var $=W.guidelineInfos;return $.some(function(V){var K=V.guideline;return!K.hide})}).map(function(W){return{type:"snap",pos:W.pos}})),m.push.apply(m,F.filter(function(W){var $=W.guidelineInfos;return $.some(function(V){var K=V.guideline;return!K.hide})}).map(function(W){return{type:"snap",pos:W.pos}})),E.push.apply(E,Ul(N)),b.push.apply(b,Ul(F))})}jl(t,[w,R],[M,T],g,m),P&&jl(t,[L.left,L.right],[L.top,L.bottom],g,m,c.externalBounds);var I=J(J([],E,!0),b,!0),_=I.filter(function(z){return z.element&&!z.gapRects}),B=I.filter(function(z){return z.gapRects}).sort(function(z,N){return z.gap-N.gap});return Y(t,"onSnap",{guidelines:I.filter(function(z){var N=z.element;return!N}),elements:_,gaps:B},!0),J(J(J(J(J(J([],Av(t,_,[f,p],k,e),!0),Nv(t,B,[f,p],k,e),!0),Wl(t,"horizontal",b,[a,r],k,e),!0),Wl(t,"vertical",E,[a,r],k,e),!0),Kl(t,"horizontal",m,f,r,x,0,e),!0),Kl(t,"vertical",g,p,a,S,1,e),!0)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},fa(t)},drag:function(t){var e=t.state;fa(t)||(e.guidelines=Xi(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(qv(t,e)||qi(t,e))return!0;if(!e.isRequest&&e.inputEvent)return Pt(e.inputEvent.target,Q("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,fa(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,fa(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function Ql(t,e,n,r){var a=t.getState(),i=a.renderPoses,s=a.rotation,o=a.direction,l=nr(t.props,e).zoom,c=o>0?1:-1,u=s/Math.PI*180,d={},f=t.renderState;f.renderDirectionMap||(f.renderDirectionMap={});var p=f.renderDirectionMap;return n.forEach(function(v){var h=v.dir;d[h]=!0}),n.map(function(v){var h=v.data,g=v.classNames,m=v.dir,E=wi[m];if(!E||!d[m])return null;p[m]=!0;var b=(rt(u,15)+c*tl[m]+720)%180,C={};return Ie(h).forEach(function(D){C["data-".concat(D)]=h[D]}),r.createElement("div",O({className:Q.apply(void 0,J(["control","direction",m,e],g,!1)),"data-rotation":b,"data-direction":m},C,{key:"direction-".concat(m),style:Oi.apply(void 0,J([s,l],E.map(function(D){return i[D]}),!1))}))})}function ql(t,e,n,r){var a=nr(t.props,n).renderDirections,i=a===void 0?e:a;if(!i)return[];var s=i===!0?Di:i;return Ql(t,n,s.map(function(o){return{data:{},classNames:[],dir:o}}),r)}function th(t,e){var n=t.renderState;n.renderDirectionMap||(n.renderDirectionMap={});var r=t.getState(),a=r.renderPoses,i=r.rotation,s=r.direction,o=n.renderDirectionMap,l=t.props.zoom,c=s>0?1:-1,u=i/Math.PI*180;return Ie(o).map(function(d){var f=wi[d];if(!f)return null;var p=(rt(u,15)+c*tl[d]+720)%180;return e.createElement("div",{className:Q("around-control"),"data-rotation":p,"data-direction":d,key:"direction-around-".concat(d),style:Oi.apply(void 0,J([i,l],f.map(function(v){return a[v]}),!1))})})}function fn(t,e,n,r,a,i){for(var s=[],o=6;o<arguments.length;o++)s[o-6]=arguments[o];var l=kt(n,r),c=e?rt(l/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(i),className:Q.apply(void 0,J(["line","direction",e?"edge":"",e],s,!1)),"data-rotation":c,"data-line-key":i,"data-direction":e,style:cn(n,r,a,l)})}function Jl(t,e,n,r,a){var i=n===!0?Ap:n;return i.map(function(s,o){var l=wi[s],c=l[0],u=l[1];if(u!=null)return fn(t,s,r[c],r[u],a,"".concat(e,"Edge").concat(o),e)}).filter(Boolean)}function tc(t){return function(e,n){var r=nr(e.props,t).edge;return r&&(r===!0||r.length)?J(J([],Jl(n,t,r,e.getState().renderPoses,e.props.zoom),!0),eh(e,t,n),!0):ec(e,t,n)}}function ec(t,e,n){return ql(t,Di,e,n)}function eh(t,e,n){return ql(t,["nw","ne","sw","se"],e,n)}var Zt={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},requestStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.throttleDragRotate,a=n.zoom,i=t.getState(),s=i.dragInfo,o=i.beforeOrigin;if(!r||!s)return[];var l=s.dist;if(!l[0]&&!l[1])return[];var c=fe(l),u=kt(l,[0,0]);return[e.createElement("div",{className:Q("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(c,"px"),transform:"translate(".concat(o[0],"px, ").concat(o[1],"px) rotate(").concat(u,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,a=e.parentGesto,i=t.state,s=i.gestos,o=i.style;if(s.draggable)return!1;s.draggable=a||t.targetGesto,n.datas={},n.left=parseFloat(o.left||"")||0,n.top=parseFloat(o.top||"")||0,n.bottom=parseFloat(o.bottom||"")||0,n.right=parseFloat(o.right||"")||0,n.startValue=[0,0],rr(t,e),jn(e,"translate"),Qv(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var l=nt(t,e,O({set:function(u){n.startValue=u}},Un(e))),c=r||Y(t,"onDragStart",l);return c!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,n.isPinch=!1),n.isDrag?l:!1},drag:function(t,e){if(e){Xn(e,"translate");var n=e.datas,r=e.parentEvent,a=e.parentFlag,i=e.isPinch,s=e.isRequest,o=e.deltaOffset,l=e.distX,c=e.distY,u=n.isDrag,d=n.prevDist,f=n.prevBeforeDist,p=n.startValue;if(u){o&&(l+=o[0],c+=o[1]);var v=t.props,h=v.parentMoveable,g=r?0:v.throttleDrag||0,m=r?0:v.throttleDragRotate||0,E=0,b=!1,C=!1,D=!1,x=!1;if(!r&&m>0&&(l||c)){var S=v.startDragRotate||0,M=rt(S+kt([0,0],[l,c])*180/Math.PI,m)-S,w=c*Math.abs(Math.cos((M-90)/180*Math.PI)),T=l*Math.abs(Math.cos(M/180*Math.PI)),R=fe([T,w]);E=M*Math.PI/180,l=R*Math.cos(E),c=R*Math.sin(E)}if(!i&&!r&&!a){var k=_v(t,l,c,m,s||o,n),P=k[0],L=k[1];b=P.isSnap,C=P.isBound,D=L.isSnap,x=L.isBound;var A=P.offset,I=L.offset;l+=A,c+=I}var _=ct(al({datas:n,distX:l,distY:c}),p),B=ct(Bp({datas:n,distX:l,distY:c}),p);gs(B,$t),gs(_,$t),m||(!b&&!C&&(B[0]=rt(B[0],g),_[0]=rt(_[0],g)),!D&&!x&&(B[1]=rt(B[1],g),_[1]=rt(_[1],g)));var z=j(_,p),N=j(B,p),F=j(N,d),W=j(z,f);n.prevDist=N,n.prevBeforeDist=z,n.passDelta=F,n.passDist=N;var $=n.left+z[0],V=n.top+z[1],K=n.right-z[0],X=n.bottom-z[1],q=Zn(n,"translate(".concat(B[0],"px, ").concat(B[1],"px)"),"translate(".concat(N[0],"px, ").concat(N[1],"px)"));if(Mi(e,q),t.state.dragInfo.dist=r?[0,0]:N,!(!r&&!h&&F.every(function(ut){return!ut})&&W.some(function(ut){return!ut}))){var tt=t.state,et=tt.width,H=tt.height,Z=nt(t,e,O({transform:q,dist:N,delta:F,translate:B,beforeDist:z,beforeDelta:W,beforeTranslate:_,left:$,top:V,right:K,bottom:X,width:et,height:H,isPinch:i},Xt({transform:q},e)));return!r&&Y(t,"onDrag",Z),Z}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,O(O({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var a=ae(t,e,{});return!n&&Y(t,"onDragEnd",a),a}},dragGroupStart:function(t,e){var n=e.datas,r=e.clientX,a=e.clientY,i=this.dragStart(t,e);if(!i)return!1;var s=zi(t,this,"dragStart",[r||0,a||0],e,!1,"draggable"),o=O(O({},i),{targets:t.props.targets,events:s}),l=Y(t,"onDragGroupStart",o);return n.isDrag=l!==!1,n.isDrag?i:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,e),a=e.datas.passDelta,i=zi(t,this,"drag",a,e,!1,"draggable");if(r){var s=O({targets:t.props.targets,events:i},r);return Y(t,"onDragGroup",s),s}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var a=zi(t,this,"dragEnd",[0,0],e,!1,"draggable");return Y(t,"onDragGroupEnd",ae(t,e,{targets:t.props.targets,events:a})),n}},request:function(t){var e={},n=t.getRect(),r=0,a=0;return{isControl:!1,requestStart:function(){return{datas:e}},request:function(i){return"x"in i?r=i.x-n.left:"deltaX"in i&&(r+=i.deltaX),"y"in i?a=i.y-n.top:"deltaY"in i&&(a+=i.deltaY),{datas:e,distX:r,distY:a}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}},rc=Ii("resizable"),Zi={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function,keepRatioFinally:Boolean,edge:Boolean,checkResizableError:Boolean},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:tc("resizable"),dragControlCondition:rc,viewClassName:Ni("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,a=e.isPinch,i=e.isGroup,s=e.parentDirection,o=e.parentGesto,l=e.datas,c=e.parentFixedDirection,u=e.parentEvent,d=bl(s,a,r,l),f=t.state,p=f.target,v=f.width,h=f.height,g=f.gestos;if(!d||!p||g.resizable)return!1;g.resizable=o||t.controlGesto,!a&&rr(t,e),l.datas={},l.direction=d,l.startOffsetWidth=v,l.startOffsetHeight=h,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=f.inlineCSSWidth||f.cssWidth,l.startHeight=f.inlineCSSHeight||f.cssHeight,l.maxSize=[1/0,1/0],i||(l.minSize=[f.minOffsetWidth,f.minOffsetHeight],l.maxSize=[f.maxOffsetWidth,f.maxOffsetHeight]);var m=t.props.transformOrigin||"% %";l.transformOrigin=m&&Ht(m)?m.split(" "):m,l.startOffsetMatrix=f.offsetMatrix,l.startTransformOrigin=f.transformOrigin,l.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!d[0]&&!d[1]||d[0]||!d[1];function E(w){l.ratio=w&&isFinite(w)?w:0}l.startPositions=Jt(t.state);function b(w){l.fixedDirection=w,l.fixedPosition=Mt(l.startPositions,w)}function C(w){var T=t.state,R=T.width,k=T.height;l.fixedPosition=w,l.fixedDirection=cl(w,R,k)}function D(w){l.minSize=[Et("".concat(w[0]),0)||0,Et("".concat(w[1]),0)||0]}function x(w){var T=[w[0]||1/0,w[1]||1/0];(!Na(T[0])||isFinite(T[0]))&&(T[0]=Et("".concat(T[0]),0)||1/0),(!Na(T[1])||isFinite(T[1]))&&(T[1]=Et("".concat(T[1]),0)||1/0),l.maxSize=T}E(v/h),b(c||[-d[0],-d[1]]),l.setFixedDirection=b,l.setFixedPosition=C,l.setMin=D,l.setMax=x;var S=nt(t,e,{direction:d,startRatio:l.ratio,set:function(w){var T=w[0],R=w[1];l.startWidth=T,l.startHeight=R},setMin:D,setMax:x,setRatio:E,setFixedDirection:b,setFixedPosition:C,setOrigin:function(w){l.transformOrigin=w},dragStart:Zt.dragStart(t,new Sr().dragStart([0,0],e))}),M=u||Y(t,"onResizeStart",S);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,M!==!1&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:d}),l.isResize?S:!1},dragControl:function(t,e){var n,r=e.datas,a=e.parentFlag,i=e.isPinch,s=e.parentKeepRatio,o=e.dragClient,l=e.parentDist,c=e.isRequest,u=e.isGroup,d=e.parentEvent,f=e.resolveMatrix,p=r.isResize,v=r.transformOrigin,h=r.startWidth,g=r.startHeight,m=r.prevWidth,E=r.prevHeight,b=r.minSize,C=r.maxSize,D=r.ratio,x=r.startOffsetWidth,S=r.startOffsetHeight,M=r.isWidth;if(!p)return;if(f){var w=t.state.is3d,T=r.startOffsetMatrix,R=r.startTransformOrigin,k=w?4:3,P=tn(ol(e)),L=Math.sqrt(P.length);k!==L&&(P=ye(P,L,k));var A=sn(T,P,R,k),I=Ge(A,x,S,k);r.startPositions=I,r.nextTargetMatrix=P,r.nextAllMatrix=A}var _=nr(t.props,"resizable"),B=_.resizeFormat,z=_.throttleResize,N=z===void 0?a?0:1:z,F=_.parentMoveable,W=_.keepRatioFinally,$=r.direction,V=$,K=0,X=0;!$[0]&&!$[1]&&(V=[1,1]);var q=D&&(s??_.keepRatio)||!1;function tt(){var yt=r.fixedDirection,xt=Tl(V,q,r,e);K=xt.distWidth,X=xt.distHeight;var Ut=V[0]-yt[0]||q?Math.max(x+K,$t):x,te=V[1]-yt[1]||q?Math.max(S+X,$t):S;return q&&x&&S&&(M?te=Ut/D:Ut=te*D),[Ut,te]}var et=tt(),H=et[0],Z=et[1];d||(r.setFixedDirection(r.fixedDirection),Y(t,"onBeforeResize",nt(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(yt){var xt;return r.setFixedDirection(yt),xt=tt(),H=xt[0],Z=xt[1],[H,Z]},setFixedPosition:function(yt){var xt;return r.setFixedPosition(yt),xt=tt(),H=xt[0],Z=xt[1],[H,Z]},boundingWidth:H,boundingHeight:Z,setSize:function(yt){H=yt[0],Z=yt[1]}},!0)));var ut=o;o||(!a&&i?ut=dl(t,[0,0]):ut=r.fixedPosition);var at=[0,0];i||(at=Uv(t,H,Z,$,ut,c,r)),l&&(!l[0]&&(at[0]=0),!l[1]&&(at[1]=0));function Ot(){var yt;B&&(yt=B([H,Z]),H=yt[0],Z=yt[1]),H=rt(H,N),Z=rt(Z,N)}if(q){V[0]&&V[1]&&at[0]&&at[1]&&(Math.abs(at[0])>Math.abs(at[1])?at[1]=0:at[0]=0);var pt=!at[0]&&!at[1];pt&&Ot(),V[0]&&!V[1]||at[0]&&!at[1]||pt&&M?(H+=at[0],Z=H/D):(!V[0]&&V[1]||!at[0]&&at[1]||pt&&!M)&&(Z+=at[1],H=Z*D)}else H+=at[0],Z+=at[1],H=Math.max(0,H),Z=Math.max(0,Z);n=hs([H,Z],b,C,q?D:!1),H=n[0],Z=n[1],Ot(),q&&(u||W)&&(M?Z=H/D:H=Z*D),K=H-x,X=Z-S;var dt=[K-m,X-E];r.prevWidth=K,r.prevHeight=X;var gt=Yp(t,H,Z,ut,v,r);if(!(!F&&dt.every(function(yt){return!yt})&&gt.every(function(yt){return!yt}))){var it=Zt.drag(t,on(e,t.state,gt,!!i,!1,"draggable")),lt=it.transform,ft=h+K,Wt=g+X,ht=nt(t,e,O({width:ft,height:Wt,offsetWidth:Math.round(H),offsetHeight:Math.round(Z),startRatio:D,boundingWidth:H,boundingHeight:Z,direction:$,dist:[K,X],delta:dt,isPinch:!!i,drag:it},xl({style:{width:"".concat(ft,"px"),height:"".concat(Wt,"px")},transform:lt},it,e)));return!d&&Y(t,"onResize",ht),ht}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,a=n.startOffsetWidth,i=n.startOffsetHeight,s=n.prevWidth,o=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var l=t.state,c=l.width,u=l.height,d=c-(a+s),f=u-(i+o),p=Math.abs(d)>3,v=Math.abs(f)>3;if(p&&(n.startWidth+=d,n.startOffsetWidth+=d,n.prevWidth+=d),v&&(n.startHeight+=f,n.startOffsetHeight+=f,n.prevHeight+=f),p||v)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var a=ae(t,e,{});return!r&&Y(t,"onResizeEnd",a),a}},dragGroupControlCondition:rc,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,O(O({},e),{isGroup:!0}));if(!r)return!1;var a=ve(t,"resizable",e);function i(v,h){var g=n.fixedDirection,m=n.fixedPosition,E=h.datas.startPositions||Jt(v.state),b=Mt(E,g),C=Ft(yr(-t.rotation/180*Math.PI,3),[b[0]-m[0],b[1]-m[1],1],3),D=C[0],x=C[1];return h.datas.originalX=D,h.datas.originalY=x,h}var s=n.startOffsetWidth,o=n.startOffsetHeight;function l(){var v=n.minSize;a.forEach(function(h){var g=h.datas,m=g.minSize,E=g.startOffsetWidth,b=g.startOffsetHeight,C=s*(E?m[0]/E:0),D=o*(b?m[1]/b:0);v[0]=Math.max(v[0],C),v[1]=Math.max(v[1],D)})}function c(){var v=n.maxSize;a.forEach(function(h){var g=h.datas,m=g.maxSize,E=g.startOffsetWidth,b=g.startOffsetHeight,C=s*(E?m[0]/E:0),D=o*(b?m[1]/b:0);v[0]=Math.min(v[0],C),v[1]=Math.min(v[1],D)})}var u=Te(t,this,"dragControlStart",e,function(v,h){return i(v,h)});l(),c();var d=function(v){r.setFixedDirection(v),u.forEach(function(h,g){h.setFixedDirection(v),i(h.moveable,a[g])})};n.setFixedDirection=d;var f=O(O({},r),{targets:t.props.targets,events:u.map(function(v){return O(O({},v),{setMin:function(h){v.setMin(h),l()},setMax:function(h){v.setMax(h),c()}})}),setFixedDirection:d,setMin:function(v){r.setMin(v),l()},setMax:function(v){r.setMax(v),c()}}),p=Y(t,"onResizeGroupStart",f);return n.isResize=p!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=nr(t.props,"resizable");na(t,"onBeforeResize",function(p){Y(t,"onBeforeResizeGroup",nt(t,e,O(O({},p),{targets:r.targets}),!0))});var a=this.dragControl(t,O(O({},e),{isGroup:!0}));if(a){var i=a.boundingWidth,s=a.boundingHeight,o=a.dist,l=r.keepRatio,c=[i/(i-o[0]),s/(s-o[1])],u=n.fixedPosition,d=Te(t,this,"dragControl",e,function(p,v){var h=Ft(yr(t.rotation/180*Math.PI,3),[v.datas.originalX*c[0],v.datas.originalY*c[1],1],3),g=h[0],m=h[1];return O(O({},v),{parentDist:null,parentScale:c,dragClient:ct(u,[g,m]),parentKeepRatio:l})}),f=O({targets:r.targets,events:d},a);return Y(t,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var a=Te(t,this,"dragControlEnd",e),i=ae(t,e,{targets:t.props.targets,events:a});return Y(t,"onResizeGroupEnd",i),n}},request:function(t){var e={},n=0,r=0,a=t.getRect();return{isControl:!0,requestStart:function(i){var s;return{datas:e,parentDirection:i.direction||[1,1],parentIsWidth:(s=i?.horizontal)!==null&&s!==void 0?s:!0}},request:function(i){return"offsetWidth"in i?n=i.offsetWidth-a.offsetWidth:"deltaWidth"in i&&(n+=i.deltaWidth),"offsetHeight"in i?r=i.offsetHeight-a.offsetHeight:"deltaHeight"in i&&(r+=i.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:i.keepRatio}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.gestos.resizable=null}};function Ui(t,e,n,r,a){var i=t.props.groupable,s=t.state,o=s.is3d?4:3,l=e.origin,c=Bt(t.state.rootMatrix,j([l[0],l[1]],i?[0,0]:[s.left,s.top]),o),u=ct([a.left,a.top],c);e.startAbsoluteOrigin=u,e.prevDeg=kt(u,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=oe(u,[n,r])}function pa(t,e,n){var r=n.defaultDeg,a=n.prevDeg,i=a%360,s=Math.floor(a/360);i<0&&(i+=360),i>t&&i>270&&t<90?++s:i<t&&i<90&&t>270&&--s;var o=e*(s*360+t-r);return n.prevDeg=r+o,o}function ji(t,e,n,r){return pa(kt(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function Qi(t,e,n,r,a,i){var s=t.props.throttleRotate,o=s===void 0?0:s,l=n.prevSnapDeg,c=0,u=!1;if(i){var d=Zv(t,e,r);u=d.isSnap,c=a+d.rotation}u||(c=rt(a+r,o));var f=c-a;return n.prevSnapDeg=f,[f-l,f,c]}function nc(t,e,n){var r=e[0],a=e[1],i=e[2],s=e[3];if(t==="none")return[];if(wt(t))return t.map(function(h){return nc(h,[r,a,i,s],n)[0]});var o=(t||"top").split("-"),l=o[0],c=o[1],u=[r,a];l==="left"?u=[i,r]:l==="right"?u=[a,s]:l==="bottom"&&(u=[s,i]);var d=[(u[0][0]+u[1][0])/2,(u[0][1]+u[1][1])/2],f=yl(u,n);if(c){var p=c==="top"||c==="left",v=l==="bottom"||l==="left";d=u[p&&!v||!p&&v?0:1]}return[[d,f]]}function qi(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(Pt(n,Q("rotation-control"))||Pt(n,Q("around-control"))||Pt(n,Q("control"))&&Pt(n,Q("rotatable")))return!0;var r=t.props.rotationTarget;return r?Bi(r,!0).some(function(a){return a?n===a||n.contains(a):!1}):!1}var rh=Di.map(function(t){var e="",n="",r="center",a="center";return t.indexOf("n")>-1&&(e="top: -20px;",a="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",a="top"),t.indexOf("w")>-1&&(n="left: -20px;",r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(a,`;
    }`)}).join(`
`),nh=`.rotation {
    position: absolute;
    height: 40px;
    width: 1px;
    transform-origin: 50% 100%;
    height: calc(40px * var(--zoom));
    top: auto;
    left: 0;
    bottom: 100%;
    will-change: transform;
}
.rotation .rotation-line {
    display: block;
    width: 100%;
    height: 100%;
    transform-origin: 50% 50%;
}
.rotation .rotation-control {
    border-color: #4af;
    border-color: var(--moveable-color);
    background:#fff;
    cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
    cursor: alias;
}
.around-control {
    position: absolute;
    will-change: transform;
    width: 20px;
    height: 20px;
    left: -10px;
    top: -10px;
    box-sizing: border-box;
    background: transparent;
    z-index: 8;
    cursor: alias;
    transform-origin: center center;
}
.rotatable.direction.control.move {
    cursor: move;
}
`.concat(rh,`
`),ah={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object,rotateAroundControls:Boolean,edge:Boolean,resolveAblesWithRotatable:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[nh],viewClassName:function(t){return t.isDragging("rotatable")?Q("view-rotation-dragging"):""},render:function(t,e){var n=nr(t.props,"rotatable"),r=n.rotatable,a=n.rotationPosition,i=n.zoom,s=n.renderDirections,o=n.rotateAroundControls,l=n.resolveAblesWithRotatable,c=t.getState(),u=c.renderPoses,d=c.direction;if(!r)return null;var f=nc(a,u,d),p=[];if(f.forEach(function(m,E){var b=m[0],C=m[1];p.push(e.createElement("div",{key:"rotation".concat(E),className:Q("rotation"),style:{transform:"translate(-50%) translate(".concat(b[0],"px, ").concat(b[1],"px) rotate(").concat(C,"rad)")}},e.createElement("div",{className:Q("line rotation-line"),style:{transform:"scaleX(".concat(i,")")}}),e.createElement("div",{className:Q("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(i,")")}})))}),s){var v=Ie(l||{}),h={};v.forEach(function(m){l[m].forEach(function(E){h[E]=m})});var g=[];wt(s)&&(g=s.map(function(m){var E=h[m];return{data:E?{resolve:E}:{},classNames:E?["move"]:[],dir:m}})),p.push.apply(p,Ql(t,"rotatable",g,e))}return o&&p.push.apply(p,th(t,e)),p},dragControlCondition:qi,dragControlStart:function(t,e){var n,r,a=e.datas,i=e.clientX,s=e.clientY,o=e.parentRotate,l=e.parentFlag,c=e.isPinch,u=e.isRequest,d=t.state,f=d.target,p=d.left,v=d.top,h=d.direction,g=d.beforeDirection,m=d.targetTransform,E=d.moveableClientRect,b=d.offsetMatrix,C=d.targetMatrix,D=d.allMatrix,x=d.width,S=d.height;if(!u&&!f)return!1;var M=t.getRect();a.rect=M,a.transform=m,a.left=p,a.top=v;var w=function(K){var X=t.state,q=X.allMatrix,tt=X.is3d,et=X.width,H=X.height,Z=cl(K,et,H);a.fixedDirection=Z,a.fixedPosition=Bt(q,K,tt?4:3),F&&F.setFixedPosition(K)},T=function(K){a.fixedDirection=K,a.fixedPosition=ul(t,K),F&&F.setFixedDirection(K)},R=i,k=s;if(u||c||l){var P=o||0;a.beforeInfo={origin:M.beforeOrigin,prevDeg:P,defaultDeg:P,prevSnapDeg:0,startDist:0},a.afterInfo=O(O({},a.beforeInfo),{origin:M.origin}),a.absoluteInfo=O(O({},a.beforeInfo),{origin:M.origin,startValue:P})}else{var L=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(L){var A=L.getAttribute("data-direction")||"",I=Np[A];if(I){a.isControl=!0,a.isAroundControl=Pt(L,Q("around-control")),a.controlDirection=I;var _=L.getAttribute("data-resolve");_&&(a.resolveAble=_);var B=rv(d.rootMatrix,d.renderPoses,E);n=Mt(B,I),R=n[0],k=n[1]}}a.beforeInfo={origin:M.beforeOrigin},a.afterInfo={origin:M.origin},a.absoluteInfo={origin:M.origin,startValue:M.rotation};var z=w;w=function(K){var X=d.is3d?4:3,q=ct(zs(C,X),K),tt=q[0],et=q[1],H=Ft(b,qe([tt,et],X)),Z=Ft(D,qe([K[0],K[1]],X));z(K);var ut=d.posDelta;a.beforeInfo.origin=j(H,ut),a.afterInfo.origin=j(Z,ut),a.absoluteInfo.origin=j(Z,ut),Ui(t,a.beforeInfo,R,k,E),Ui(t,a.afterInfo,R,k,E),Ui(t,a.absoluteInfo,R,k,E)},T=function(K){var X=Mt([[0,0],[x,0],[0,S],[x,S]],K);w(X)}}a.startClientX=R,a.startClientY=k,a.direction=h,a.beforeDirection=g,a.startValue=0,a.datas={},jn(e,"rotate");var N=!1,F=!1;if(a.isControl&&a.resolveAble){var W=a.resolveAble;W==="resizable"&&(F=Zi.dragControlStart(t,O(O({},new Sr("resizable").dragStart([0,0],e)),{parentPosition:a.controlPosition,parentFixedPosition:a.fixedPosition})))}F||(N=Zt.dragStart(t,new Sr().dragStart([0,0],e))),w(d.transformOrigin);var $=nt(t,e,O(O({set:function(K){a.startValue=K*Math.PI/180},setFixedDirection:T,setFixedPosition:w},Un(e)),{dragStart:N,resizeStart:F})),V=Y(t,"onRotateStart",$);return a.isRotate=V!==!1,d.snapRenderInfo={request:e.isRequest},a.isRotate?$:!1},dragControl:function(t,e){var n,r,a,i=e.datas,s=e.clientDistX,o=e.clientDistY,l=e.parentRotate,c=e.parentFlag,u=e.isPinch,d=e.groupDelta,f=i.beforeDirection,p=i.beforeInfo,v=i.afterInfo,h=i.absoluteInfo,g=i.isRotate,m=i.startValue,E=i.rect,b=i.startClientX,C=i.startClientY;if(g){Xn(e,"rotate");var D=Ip(e),x=f*D,S=t.props.parentMoveable,M=0,w,T,R=0,k,P,L=0,A,I,_=180/Math.PI*m,B=h.startValue,z=!1,N=b+s,F=C+o;if(!c&&"parentDist"in e){var W=e.parentDist;w=W,k=W,A=W}else u||c?(w=pa(l,f,p),k=pa(l,x,v),A=pa(l,x,h)):(w=ji(N,F,f,p),k=ji(N,F,x,v),A=ji(N,F,x,h),z=!0);if(T=_+w,P=_+k,I=B+A,Y(t,"onBeforeRotate",nt(t,e,{beforeRotation:T,rotation:P,absoluteRotation:I,setRotation:function(ut){k=ut-_,w=k,A=k}},!0)),n=Qi(t,E,p,w,_,z),M=n[0],w=n[1],T=n[2],r=Qi(t,E,v,k,_,z),R=r[0],k=r[1],P=r[2],a=Qi(t,E,h,A,B,z),L=a[0],A=a[1],I=a[2],!(!L&&!R&&!M&&!S)){var $=Zn(i,"rotate(".concat(P,"deg)"),"rotate(".concat(k,"deg)")),V=Hp(t,k,i),K=j(ct(d||[0,0],V),i.prevInverseDist||[0,0]);i.prevInverseDist=V,i.requestValue=null;var X=sl(t,$,K,u,e),q=X,tt=oe([N,F],h.startAbsoluteOrigin)-h.startDist,et=void 0;if(i.resolveAble==="resizable"){var H=Zi.dragControl(t,O(O({},on(e,t.state,[e.deltaX,e.deltaY],!!u,!1,"resizable")),{resolveMatrix:!0,parentDistance:tt}));H&&(et=H,q=xl(q,H,e))}var Z=nt(t,e,O(O({delta:R,dist:k,rotate:P,rotation:P,beforeDist:w,beforeDelta:M,beforeRotate:T,beforeRotation:T,absoluteDist:A,absoluteDelta:L,absoluteRotate:I,absoluteRotation:I,isPinch:!!u,resize:et},X),q));return Y(t,"onRotate",Z),Z}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=ae(t,e,{});return Y(t,"onRotateEnd",r),r}},dragGroupControlCondition:qi,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,a=r.left,i=r.top,s=r.beforeOrigin,o=this.dragControlStart(t,e);if(!o)return!1;o.set(n.beforeDirection*t.rotation);var l=Te(t,this,"dragControlStart",e,function(d,f){var p=d.state,v=p.left,h=p.top,g=p.beforeOrigin,m=ct(j([v,h],[a,i]),j(g,s));return f.datas.startGroupClient=m,f.datas.groupClient=m,O(O({},f),{parentRotate:0})}),c=O(O({},o),{targets:t.props.targets,events:l}),u=Y(t,"onRotateGroupStart",c);return n.isRotate=u!==!1,n.isRotate?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){na(t,"onBeforeRotate",function(c){Y(t,"onBeforeRotateGroup",nt(t,e,O(O({},c),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var a=n.beforeDirection,i=r.beforeDist,s=i/180*Math.PI,o=Te(t,this,"dragControl",e,function(c,u){var d=u.datas.startGroupClient,f=u.datas.groupClient,p=f[0],v=f[1],h=Qr(d,s*a),g=h[0],m=h[1],E=[g-p,m-v];return u.datas.groupClient=[g,m],O(O({},u),{parentRotate:i,groupDelta:E})});t.rotation=a*r.beforeRotation;var l=O({targets:t.props.targets,events:o,set:function(c){t.rotation=c},setGroupRotation:function(c){t.rotation=c}},r);return Y(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var a=Te(t,this,"dragControlEnd",e),i=ae(t,e,{targets:t.props.targets,events:a});return Y(t,"onRotateGroupEnd",i),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(a){return"deltaRotate"in a?n+=a.deltaRotate:"rotate"in a&&(n=a.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},ac=Ii("scalable"),ih={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean,edge:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:tc("scalable"),dragControlCondition:ac,viewClassName:Ni("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,a=e.inputEvent,i=e.parentDirection,s=bl(i,r,a,n),o=t.state,l=o.width,c=o.height,u=o.targetTransform,d=o.target,f=o.pos1,p=o.pos2,v=o.pos4;if(!s||!d)return!1;r||rr(t,e),n.datas={},n.transform=u,n.prevDist=[1,1],n.direction=s,n.startOffsetWidth=l,n.startOffsetHeight=c,n.startValue=[1,1];var h=oe(f,p),g=oe(p,v),m=!s[0]&&!s[1]||s[0]||!s[1];n.scaleWidth=h,n.scaleHeight=g,n.scaleXRatio=h/l,n.scaleYRatio=g/c,jn(e,"scale"),n.isWidth=m;function E(x){n.ratio=x&&isFinite(x)?x:0}n.startPositions=Jt(t.state);function b(x){n.fixedDirection=x,n.fixedPosition=Mt(n.startPositions,x)}n.setFixedDirection=b,E(oe(f,p)/oe(p,v)),b([-s[0],-s[1]]);var C=nt(t,e,O(O({direction:s,set:function(x){n.startValue=x},setRatio:E,setFixedDirection:b},Un(e)),{dragStart:Zt.dragStart(t,new Sr().dragStart([0,0],e))})),D=Y(t,"onScaleStart",C);return n.startFixedDirection=n.fixedDirection,D!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),n.isScale?C:!1},dragControl:function(t,e){Xn(e,"scale");var n=e.datas,r=e.parentKeepRatio,a=e.parentFlag,i=e.isPinch,s=e.dragClient,o=e.isRequest,l=n.prevDist,c=n.direction,u=n.startOffsetWidth,d=n.startOffsetHeight,f=n.isScale,p=n.startValue,v=n.isWidth,h=n.ratio;if(!f)return!1;var g=t.props,m=g.throttleScale,E=g.parentMoveable,b=c;!c[0]&&!c[1]&&(b=[1,1]);var C=h&&(r??g.keepRatio)||!1,D=t.state;function x(){var F=Tl(b,C,n,e),W=F.distWidth,$=F.distHeight,V=u?(u+W)/u:1,K=d?(d+$)/d:1;return V=b[0]||C?V*p[0]:p[0],K=b[1]||C?K*p[1]:p[1],V===0&&(V=(l[0]>0?1:-1)*$n),K===0&&(K=(l[1]>0?1:-1)*$n),[V,K]}var S=x();if(!i&&t.props.groupable){var M=D.snapRenderInfo||{},w=M.direction;wt(w)&&(w[0]||w[1])&&(D.snapRenderInfo={direction:c,request:e.isRequest})}Y(t,"onBeforeScale",nt(t,e,{scale:S,setFixedDirection:function(F){return n.setFixedDirection(F),S=x(),S},startFixedDirection:n.startFixedDirection,setScale:function(F){S=F}},!0));var T=[S[0]/p[0],S[1]/p[1]],R=s,k=[0,0];if(s||(!a&&i?R=dl(t,[0,0]):R=n.fixedPosition),i||(k=jv(t,T,c,o,n)),C){b[0]&&b[1]&&k[0]&&k[1]&&(Math.abs(k[0]*u)>Math.abs(k[1]*d)?k[1]=0:k[0]=0);var P=!k[0]&&!k[1];if(P&&(v?T[0]=rt(T[0]*p[0],m)/p[0]:T[1]=rt(T[1]*p[1],m)/p[1]),b[0]&&!b[1]||k[0]&&!k[1]||P&&v){T[0]+=k[0];var L=u*T[0]*p[0]/h;T[1]=L/d/p[1]}else if(!b[0]&&b[1]||!k[0]&&k[1]||P&&!v){T[1]+=k[1];var A=d*T[1]*p[1]*h;T[0]=A/u/p[0]}}else T[0]+=k[0],T[1]+=k[1],k[0]||(T[0]=rt(T[0]*p[0],m)/p[0]),k[1]||(T[1]=rt(T[1]*p[1],m)/p[1]);T[0]===0&&(T[0]=(l[0]>0?1:-1)*$n),T[1]===0&&(T[1]=(l[1]>0?1:-1)*$n);var I=[T[0]/l[0],T[1]/l[1]];S=Xp(T,p);var _=Vp(t,T,n.fixedDirection,R,n),B=j(_,n.prevInverseDist||[0,0]);if(n.prevDist=T,n.prevInverseDist=_,S[0]===l[0]&&S[1]===l[1]&&B.every(function(F){return!F})&&!E)return!1;var z=Zn(n,"scale(".concat(S.join(", "),")"),"scale(".concat(T.join(", "),")")),N=nt(t,e,O({offsetWidth:u,offsetHeight:d,direction:c,scale:S,dist:T,delta:I,isPinch:!!i},sl(t,z,B,i,e)));return Y(t,"onScale",N),N},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=ae(t,e,{});return Y(t,"onScaleEnd",r),r},dragGroupControlCondition:ac,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var a=ve(t,"resizable",e);function i(u,d){var f=n.fixedDirection,p=n.fixedPosition,v=d.datas.startPositions||Jt(u.state),h=Mt(v,f),g=Ft(yr(-t.rotation/180*Math.PI,3),[h[0]-p[0],h[1]-p[1],1],3),m=g[0],E=g[1];return d.datas.originalX=m,d.datas.originalY=E,d}n.moveableScale=t.scale;var s=Te(t,this,"dragControlStart",e,function(u,d){return i(u,d)}),o=function(u){r.setFixedDirection(u),s.forEach(function(d,f){d.setFixedDirection(u),i(d.moveable,a[f])})};n.setFixedDirection=o;var l=O(O({},r),{targets:t.props.targets,events:s,setFixedDirection:o}),c=Y(t,"onScaleGroupStart",l);return n.isScale=c!==!1,n.isScale?l:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){na(t,"onBeforeScale",function(d){Y(t,"onBeforeScaleGroup",nt(t,e,O(O({},d),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var a=n.moveableScale;t.scale=[r.scale[0]*a[0],r.scale[1]*a[1]];var i=t.props.keepRatio,s=r.dist,o=r.scale,l=n.fixedPosition,c=Te(t,this,"dragControl",e,function(d,f){var p=Ft(yr(t.rotation/180*Math.PI,3),[f.datas.originalX*s[0],f.datas.originalY*s[1],1],3),v=p[0],h=p[1];return O(O({},f),{parentDist:null,parentScale:o,parentKeepRatio:i,dragClient:ct(l,[v,h])})}),u=O({targets:t.props.targets,events:c},r);return Y(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var a=Te(t,this,"dragControlEnd",e),i=ae(t,e,{targets:t.props.targets,events:a});return Y(t,"onScaleGroupEnd",i),n}},request:function(){var t={},e=0,n=0;return{isControl:!0,requestStart:function(r){return{datas:t,parentDirection:r.direction||[1,1]}},request:function(r){return e+=r.deltaWidth,n+=r.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:r.keepRatio}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Ve(t,e){return t.map(function(n,r){return Ue(n,e[r],1,2)})}function ic(t,e,n){var r=kt(t,e),a=kt(t,n),i=a-r;return i>=0?i:i+2*Math.PI}function oh(t,e){var n=ic(t[0],t[1],t[2]),r=ic(e[0],e[1],e[2]),a=Math.PI;return!(n>=a&&r<=a||n<=a&&r>=a)}var sh={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array,edge:Boolean},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},viewClassName:Ni("warpable"),render:function(t,e){var n=t.props,r=n.resizable,a=n.scalable,i=n.warpable,s=n.zoom;if(r||a||!i)return[];var o=t.state,l=o.pos1,c=o.pos2,u=o.pos3,d=o.pos4,f=Ve(l,c),p=Ve(c,l),v=Ve(l,u),h=Ve(u,l),g=Ve(u,d),m=Ve(d,u),E=Ve(c,d),b=Ve(d,c);return J([e.createElement("div",{className:Q("line"),key:"middeLine1",style:cn(f,g,s)}),e.createElement("div",{className:Q("line"),key:"middeLine2",style:cn(p,m,s)}),e.createElement("div",{className:Q("line"),key:"middeLine3",style:cn(v,E,s)}),e.createElement("div",{className:Q("line"),key:"middeLine4",style:cn(h,b,s)})],ec(t,"warpable",e),!0)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return Pt(n,Q("direction"))&&Pt(n,Q("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,a=t.props.target,i=r.target,s=Cl(i,n);if(!s||!a)return!1;var o=t.state,l=o.transformOrigin,c=o.is3d,u=o.targetTransform,d=o.targetMatrix,f=o.width,p=o.height,v=o.left,h=o.top;n.datas={},n.targetTransform=u,n.warpTargetMatrix=c?d:ye(d,3,4),n.targetInverseMatrix=_s(de(n.warpTargetMatrix,4),3,4),n.direction=s,n.left=v,n.top=h,n.poses=[[0,0],[f,0],[0,p],[f,p]].map(function(E){return j(E,l)}),n.nextPoses=n.poses.map(function(E){var b=E[0],C=E[1];return Ft(n.warpTargetMatrix,[b,C,0,1],4)}),n.startValue=Dt(4),n.prevMatrix=Dt(4),n.absolutePoses=Jt(o),n.posIndexes=il(s),rr(t,e),jn(e,"matrix3d"),o.snapRenderInfo={request:e.isRequest,direction:s};var g=nt(t,e,O({set:function(E){n.startValue=E}},Un(e))),m=Y(t,"onWarpStart",g);return m!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,a=e.distX,i=e.distY,s=n.targetInverseMatrix,o=n.prevMatrix,l=n.isWarp,c=n.startValue,u=n.poses,d=n.posIndexes,f=n.absolutePoses;if(!l)return!1;if(Xn(e,"matrix3d"),Tr(t,"warpable")){var p=d.map(function(w){return f[w]});p.length>1&&p.push([(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2]);var v=da(t,r,{horizontal:p.map(function(w){return w[1]+i}),vertical:p.map(function(w){return w[0]+a})}),h=v.horizontal,g=v.vertical;i-=h.offset,a-=g.offset}var m=Ee({datas:n,distX:a,distY:i},!0),E=n.nextPoses.slice();if(d.forEach(function(w){E[w]=ct(E[w],m)}),!Lp.every(function(w){return oh(w.map(function(T){return u[T]}),w.map(function(T){return E[T]}))}))return!1;var b=ai(u[0],u[2],u[1],u[3],E[0],E[2],E[1],E[3]);if(!b.length)return!1;var C=mt(s,b,4),D=nl(n,C,!0),x=mt(de(o,4),D,4);n.prevMatrix=D;var S=mt(c,D,4),M=Zn(n,"matrix3d(".concat(S.join(", "),")"),"matrix3d(".concat(D.join(", "),")"));return Mi(e,M),Y(t,"onWarp",nt(t,e,O({delta:x,matrix:S,dist:D,multiply:mt,transform:M},Xt({transform:M},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,Y(t,"onWarpEnd",ae(t,e,{})),r):!1}},lh=Q("area-pieces"),va=Q("area-piece"),oc=Q("avoid"),ch=Q("view-dragging");function Ji(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,a=n.height;ys(e,oc),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(a,"px")}}function sc(t){return t.createElement("div",{key:"area_pieces",className:lh},t.createElement("div",{className:va}),t.createElement("div",{className:va}),t.createElement("div",{className:va}),t.createElement("div",{className:va}))}var lc={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var n=t.props,r=n.target,a=n.dragArea,i=n.groupable,s=n.passDragArea,o=t.getState(),l=o.width,c=o.height,u=o.renderPoses,d=s?Q("area","pass"):Q("area");if(i)return[e.createElement("div",{key:"area",ref:me(t,"areaElement"),className:d}),sc(e)];if(!r||!a)return[];var f=ai([0,0],[l,0],[0,c],[l,c],u[0],u[1],u[2],u[3]),p=f.length?ea(f,!0):"none";return[e.createElement("div",{key:"area",ref:me(t,"areaElement"),className:d,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(c,"px"),transformOrigin:"0 0",transform:p}}),sc(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,a=e.clientY,i=e.inputEvent;if(!i)return!1;n.isDragArea=!1;var s=t.areaElement,o=t.state,l=o.moveableClientRect,c=o.renderPoses,u=o.rootMatrix,d=o.is3d,f=l.left,p=l.top,v=le(c),h=v.left,g=v.top,m=v.width,E=v.height,b=d?4:3,C=ar(u,[r-f,a-p],b),D=C[0],x=C[1];D-=h,x-=g;var S=[{left:h,top:g,width:m,height:x-10},{left:h,top:g,width:D-10,height:E},{left:h,top:g+x+10,width:m,height:E-x-10},{left:h+D+10,top:g,width:m-D-10,height:E}],M=[].slice.call(s.nextElementSibling.children);S.forEach(function(w,T){M[T].style.cssText="left: ".concat(w.left,"px;top: ").concat(w.top,"px; width: ").concat(w.width,"px; height: ").concat(w.height,"px;")}),Ka(s,oc),o.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,Ji(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||Ji(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){Ji(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&ps(function(){e.disableNativeEvent=!1})}},uh=an("origin",{render:function(t,e){var n=t.props.zoom,r=t.getState(),a=r.beforeOrigin,i=r.rotation;return[e.createElement("div",{className:Q("control","origin"),style:Oi(i,n,a),key:"beforeOrigin"})]}});function dh(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var fh={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,scrollThrottleTime:Number,getScrollPosition:Function,scrollOptions:Object},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,a=r===void 0?t.getContainer():r,i=n.scrollOptions,s=new Vs,o=ir(a,!0);e.datas.dragScroll=s,t.state.dragScroll=s;var l=e.isControl?"controlGesto":"targetGesto",c=e.targets;s.on("scroll",function(u){var d=u.container,f=u.direction,p=nt(t,e,{scrollContainer:d,direction:f}),v=c?"onScrollGroup":"onScroll";c&&(p.targets=c),Y(t,v,p)}).on("move",function(u){var d=u.offsetX,f=u.offsetY,p=u.inputEvent;t[l].scrollBy(d,f,p.inputEvent,!0)}).on("scrollDrag",function(u){var d=u.next;d(t[l].getCurrentEvent())}),s.dragStart(e,O({container:o},i))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,a=r.scrollContainer,i=a===void 0?t.getContainer():a,s=r.scrollThreshold,o=s===void 0?0:s,l=r.scrollThrottleTime,c=l===void 0?0:l,u=r.getScrollPosition,d=u===void 0?dh:u,f=r.scrollOptions;return n.drag(e,O({container:i,threshold:o,throttleTime:c,getScrollPosition:function(p){return d({scrollContainer:p.container,direction:p.direction})}},f)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,O(O({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,O(O({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,O(O({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,O(O({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,O(O({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,O(O({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,O(O({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},cc={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Object,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object,flushSync:Function,stopPropagation:Boolean,preventClickEventOnDrag:Boolean,preventClickDefault:Boolean,viewContainer:Object,persistData:Object,useAccuratePosition:Boolean,firstRenderState:Object,linePadding:Boolean},events:{onChangeTargets:"changeTargets"}},ph=an("padding",{render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=n.padding||{},a=r.left,i=a===void 0?0:a,s=r.top,o=s===void 0?0:s,l=r.right,c=l===void 0?0:l,u=r.bottom,d=u===void 0?0:u,f=t.getState(),p=f.renderPoses,v=f.pos1,h=f.pos2,g=f.pos3,m=f.pos4,E=[v,h,g,m],b=[];return i>0&&b.push([0,2]),o>0&&b.push([0,1]),c>0&&b.push([1,3]),d>0&&b.push([2,3]),b.map(function(C,D){var x=C[0],S=C[1],M=E[x],w=E[S],T=p[x],R=p[S],k=ai([0,0],[100,0],[0,100],[100,100],M,w,T,R);if(k.length)return e.createElement("div",{key:"padding".concat(D),className:Q("padding"),style:{transform:ea(k,!0)}})})}}),uc=["nw","ne","se","sw"];function ha(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var vh=[1,2,5,6],hh=[0,3,4,7],or=[1,-1,-1,1],sr=[1,1,-1,-1];function to(t,e,n,r,a,i,s,o){a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=n),o===void 0&&(o=r);var l=[],c=!1,u=t.filter(function(f){return!f.virtual}),d=u.map(function(f){var p=f.horizontal,v=f.vertical,h=f.pos;if(v&&!c&&(c=!0,l.push("/")),c){var g=Math.max(0,v===1?h[1]-i:o-h[1]);return l.push(pe(g,r,e)),g}else{var g=Math.max(0,p===1?h[0]-a:s-h[0]);return l.push(pe(g,n,e)),g}});return{radiusPoses:u,styles:l,raws:d}}function dc(t){for(var e=[0,0],n=[0,0],r=t.length,a=0;a<r;++a){var i=t[a];i.sub&&(i.horizontal&&(e[1]===0&&(e[0]=a),e[1]=a-e[0]+1,n[0]=a+1),i.vertical&&(n[1]===0&&(n[0]=a),n[1]=a-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function fc(t,e,n,r,a,i,s){var o,l,c,u;i===void 0&&(i=[0,0]),s===void 0&&(s=!1);var d=t.indexOf("/"),f=(d>-1?t.slice(0,d):t).length,p=t.slice(0,f),v=t.slice(f+1),h=p.length,g=v.length,m=g>0,E=p[0],b=E===void 0?"0px":E,C=p[1],D=C===void 0?b:C,x=p[2],S=x===void 0?b:x,M=p[3],w=M===void 0?D:M,T=v[0],R=T===void 0?b:T,k=v[1],P=k===void 0?m?R:D:k,L=v[2],A=L===void 0?m?R:S:L,I=v[3],_=I===void 0?m?P:w:I,B=[b,D,S,w].map(function(V){return Et(V,e)}),z=[R,P,A,_].map(function(V){return Et(V,n)}),N=B.slice(),F=z.slice();o=ha([N[0],N[1]],e),N[0]=o[0],N[1]=o[1],l=ha([N[3],N[2]],e),N[3]=l[0],N[2]=l[1],c=ha([F[0],F[3]],n),F[0]=c[0],F[3]=c[1],u=ha([F[1],F[2]],n),F[1]=u[0],F[2]=u[1];var W=s?N:N.slice(0,Math.max(i[0],h)),$=s?F:F.slice(0,Math.max(i[1],g));return J(J([],W.map(function(V,K){var X=uc[K];return{virtual:K>=h,horizontal:or[K],vertical:0,pos:[r+V,a+(sr[K]===-1?n:0)],sub:!0,raw:B[K],direction:X}}),!0),$.map(function(V,K){var X=uc[K];return{virtual:K>=g,horizontal:0,vertical:sr[K],pos:[r+(or[K]===-1?e:0),a+V],sub:!0,raw:z[K],direction:X}}),!0)}function gh(t,e,n,r,a){a===void 0&&(a=e.length);var i=dc(t.slice(r)),s=i.horizontalRange,o=i.verticalRange,l=n-r,c=0;if(l===0)c=a;else if(l>0&&l<s[1])c=s[1]-l;else if(l>=o[0])c=o[0]+o[1]-l;else return;t.splice(n,c),e.splice(n,c)}function mh(t,e,n,r,a,i,s,o,l,c,u){c===void 0&&(c=0),u===void 0&&(u=0);var d=dc(t.slice(n)),f=d.horizontalRange,p=d.verticalRange;if(r>-1)for(var v=or[r]===1?i-c:o-i,h=f[1];h<=r;++h){var g=sr[h]===1?u:l,m=0;if(r===h?m=i:h===0?m=c+v:or[h]===-1&&(m=o-(e[n][0]-c)),t.splice(n+h,0,{horizontal:or[h],vertical:0,pos:[m,g]}),e.splice(n+h,0,[m,g]),h===0)break}else if(a>-1){var E=sr[a]===1?s-u:l-s;if(f[1]===0&&p[1]===0){var b=[c+E,u];t.push({horizontal:or[0],vertical:0,pos:b}),e.push(b)}for(var C=p[0],h=p[1];h<=a;++h){var m=or[h]===1?c:o,g=0;if(a===h?g=s:h===0?g=u+E:sr[h]===1?g=e[n+C][1]:sr[h]===-1&&(g=l-(e[n+C][1]-u)),t.push({horizontal:0,vertical:sr[h],pos:[m,g]}),e.push([m,g]),h===0)break}}}function yh(t,e){e===void 0&&(e=t.map(function(a){return a.raw}));var n=t.map(function(a,i){return a.horizontal?e[i]:null}).filter(function(a){return a!=null}),r=t.map(function(a,i){return a.vertical?e[i]:null}).filter(function(a){return a!=null});return{horizontals:n,verticals:r}}var Eh=[[0,-1,"n"],[1,0,"e"]],bh=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function eo(t,e,n){var r=t.props.clipRelative,a=t.state,i=a.width,s=a.height,o=e,l=o.type,c=o.poses,u=l==="rect",d=l==="circle";if(l==="polygon")return n.map(function(x){return"".concat(pe(x[0],i,r)," ").concat(pe(x[1],s,r))});if(u||l==="inset"){var f=n[1][1],p=n[3][0],v=n[7][0],h=n[5][1];if(u)return[f,p,h,v].map(function(x){return"".concat(x,"px")});var g=[f,i-p,s-h,v].map(function(x,S){return pe(x,S%2?i:s,r)});if(n.length>8){var m=j(n[4],n[0]),E=m[0],b=m[1];g.push.apply(g,J(["round"],to(c.slice(8).map(function(x,S){return O(O({},x),{pos:n[S]})}),r,E,b,v,f,p,h).styles,!1))}return g}else if(d||l==="ellipse"){var C=n[0],D=pe(Math.abs(n[1][1]-C[1]),d?Math.sqrt((i*i+s*s)/2):s,r),g=d?[D]:[pe(Math.abs(n[2][0]-C[0]),i,r),D];return g.push("at",pe(C[0],i,r),pe(C[1],s,r)),g}}function ga(t,e,n,r){var a=[r,(r+e)/2,e],i=[t,(t+n)/2,n];return bh.map(function(s){var o=s[0],l=s[1],c=s[2],u=a[o+1],d=i[l+1];return{vertical:Math.abs(l),horizontal:Math.abs(o),direction:c,pos:[u,d]}})}function pc(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var a=r.pos;e[0]=Math.min(e[0],a[0]),e[1]=Math.max(e[1],a[0]),n[0]=Math.min(n[0],a[1]),n[1]=Math.max(n[1],a[1])}),[Math.abs(e[1]-e[0]),Math.abs(n[1]-n[0])]}function vc(t,e,n,r,a){var i,s,o,l,c,u,d;if(t){var f=a;if(!f){var p=getComputedStyle(t),v=p.clipPath;f=v!=="none"?v:p.clip}if(!((!f||f==="none"||f==="auto")&&(f=r,!f))){var h=_a(f),g=h.prefix,m=g===void 0?f:g,E=h.value,b=E===void 0?"":E,C=m==="circle",D=" ";if(m==="polygon"){var x=Ne(b||"0% 0%, 100% 0%, 100% 100%, 0% 100%");D=",";var S=x.map(function(it){var lt=it.split(" "),ft=lt[0],Wt=lt[1];return{vertical:1,horizontal:1,pos:[Et(ft,e),Et(Wt,n)]}}),M=ze(S.map(function(it){return it.pos}));return{type:m,clipText:f,poses:S,splitter:D,left:M.minX,right:M.maxX,top:M.minY,bottom:M.maxY}}else if(C||m==="ellipse"){var w="",T="",R=0,k=0,x=Ae(b);if(C){var P="";i=x[0],P=i===void 0?"50%":i,s=x[2],w=s===void 0?"50%":s,o=x[3],T=o===void 0?"50%":o,R=Et(P,Math.sqrt((e*e+n*n)/2)),k=R}else{var L="",A="";l=x[0],L=l===void 0?"50%":l,c=x[1],A=c===void 0?"50%":c,u=x[3],w=u===void 0?"50%":u,d=x[4],T=d===void 0?"50%":d,R=Et(L,e),k=Et(A,n)}var I=[Et(w,e),Et(T,n)],S=J([{vertical:1,horizontal:1,pos:I,direction:"nesw"}],Eh.slice(0,C?1:2).map(function(ft){return{vertical:Math.abs(ft[1]),horizontal:ft[0],direction:ft[2],sub:!0,pos:[I[0]+ft[0]*R,I[1]+ft[1]*k]}}),!0);return{type:m,clipText:f,radiusX:R,radiusY:k,left:I[0]-R,top:I[1]-k,right:I[0]+R,bottom:I[1]+k,poses:S,splitter:D}}else if(m==="inset"){var x=Ae(b||"0 0 0 0"),_=x.indexOf("round"),B=(_>-1?x.slice(0,_):x).length,z=x.slice(B+1),N=x.slice(0,B),F=N[0],W=N[1],$=W===void 0?F:W,V=N[2],K=V===void 0?F:V,X=N[3],q=X===void 0?$:X,tt=[F,K].map(function(ft){return Et(ft,n)}),et=tt[0],H=tt[1],Z=[q,$].map(function(ft){return Et(ft,e)}),ut=Z[0],at=Z[1],Ot=e-at,pt=n-H,dt=fc(z,Ot-ut,pt-et,ut,et),S=J(J([],ga(et,Ot,pt,ut),!0),dt,!0);return{type:"inset",clipText:f,poses:S,top:et,left:ut,right:Ot,bottom:pt,radius:z,splitter:D}}else if(m==="rect"){var x=Ne(b||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));D=",";var gt=x.map(function(xt){var Ut=je(xt).value;return Ut}),et=gt[0],at=gt[1],H=gt[2],ut=gt[3],S=ga(et,at,H,ut);return{type:"rect",clipText:f,poses:S,top:et,right:at,bottom:H,left:ut,values:x,splitter:D}}}}}function Ch(t,e,n,r,a){var i=t[e],s=i.direction,o=i.sub,l=t.map(function(){return[0,0]}),c=s?s.split(""):[];if(r&&e<8){var u=c.filter(function(P){return P==="w"||P==="e"}),d=c.filter(function(P){return P==="n"||P==="s"}),f=u[0],p=d[0];l[e]=n;var v=pc(t),h=v[0],g=v[1],m=h&&g?h/g:0;if(m&&a){var E=(e+4)%8,b=t[E].pos,C=[0,0];s.indexOf("w")>-1?C[0]=-1:s.indexOf("e")>-1&&(C[0]=1),s.indexOf("n")>-1?C[1]=-1:s.indexOf("s")>-1&&(C[1]=1);var D=Ml([h,g],n,m,C,!0),x=h+D[0],S=g+D[1],M=b[1],w=b[1],T=b[0],R=b[0];C[0]===-1?T=R-x:C[0]===1?R=T+x:(T=T-x/2,R=R+x/2),C[1]===-1?M=w-S:(C[1]===1||(M=w-S/2),w=M+S);var k=ga(M,R,w,T);t.forEach(function(P,L){l[L][0]=k[L].pos[0]-P.pos[0],l[L][1]=k[L].pos[1]-P.pos[1]})}else t.forEach(function(P,L){var A=P.direction;A&&(A.indexOf(f)>-1&&(l[L][0]=n[0]),A.indexOf(p)>-1&&(l[L][1]=n[1]))}),f&&(l[1][0]=n[0]/2,l[5][0]=n[0]/2),p&&(l[3][1]=n[1]/2,l[7][1]=n[1]/2)}else s&&!o?c.forEach(function(P){var L=P==="n"||P==="s";t.forEach(function(A,I){var _=A.direction,B=A.horizontal,z=A.vertical;!_||_.indexOf(P)===-1||(l[I]=[L||!B?0:n[0],!L||!z?0:n[1]])})}):l[e]=n;return l}function xh(t,e){var n=rl(t,e),r=n[0],a=n[1],i=e.datas,s=i.clipPath,o=i.clipIndex,l=s,c=l.type,u=l.poses,d=l.splitter,f=u.map(function(E){return E.pos});if(c==="polygon")f.splice(o,0,[r,a]);else if(c==="inset"){var p=vh.indexOf(o),v=hh.indexOf(o),h=u.length;if(mh(u,f,8,p,v,r,a,f[4][0],f[4][1],f[0][0],f[0][1]),h===u.length)return}else return;var g=eo(t,s,f),m="".concat(c,"(").concat(g.join(d),")");Y(t,"onClip",nt(t,e,O({clipEventType:"added",clipType:c,poses:f,clipStyles:g,clipStyle:m,distX:0,distY:0},Xt({clipPath:m},e))))}function Sh(t,e){var n=e.datas,r=n.clipPath,a=n.clipIndex,i=r,s=i.type,o=i.poses,l=i.splitter,c=o.map(function(p){return p.pos}),u=c.length;if(s==="polygon")o.splice(a,1),c.splice(a,1);else if(s==="inset"){if(a<8||(gh(o,c,a,8,u),u===o.length))return}else return;var d=eo(t,r,c),f="".concat(s,"(").concat(d.join(l),")");Y(t,"onClip",nt(t,e,O({clipEventType:"removed",clipType:s,poses:c,clipStyles:d,clipStyle:f,distX:0,distY:0},Xt({clipPath:f},e))))}var Dh={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[`.control.clip-control {
    background: #6d6;
    cursor: pointer;
}
.control.clip-control.clip-radius {
    background: #d66;
}
.line.clip-line {
    background: #6e6;
    cursor: move;
    z-index: 1;
}
.clip-area {
    position: absolute;
    top: 0;
    left: 0;
}
.clip-ellipse {
    position: absolute;
    cursor: move;
    border: 1px solid #6d6;
    border: var(--zoompx) solid #6d6;
    border-radius: 50%;
    transform-origin: 0px 0px;
}`,`:host {
    --bounds-color: #d66;
}`,`.guideline {
    pointer-events: none;
    z-index: 2;
}`,`.line.guideline.bounds {
    background: #d66;
    background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,a=n.defaultClipPath,i=n.clipArea,s=n.zoom,o=n.groupable,l=t.getState(),c=l.target,u=l.width,d=l.height,f=l.allMatrix,p=l.is3d,v=l.left,h=l.top,g=l.pos1,m=l.pos2,E=l.pos3,b=l.pos4,C=l.clipPathState,D=l.snapBoundInfos,x=l.rotation;if(!c||o)return[];var S=vc(c,u,d,a||"inset",C||r);if(!S)return[];var M=p?4:3,w=S.type,T=S.poses,R=T.map(function(pt){var dt=Bt(f,pt.pos,M);return[dt[0]-v,dt[1]-h]}),k=[],P=[],L=w==="rect",A=w==="inset",I=w==="polygon";if(L||A||I){var _=A?R.slice(0,8):R;P=_.map(function(pt,dt){var gt=dt===0?_[_.length-1]:_[dt-1],it=kt(gt,pt),lt=gl(gt,pt);return e.createElement("div",{key:"clipLine".concat(dt),className:Q("line","clip-line","snap-control"),"data-clip-index":dt,style:{width:"".concat(lt,"px"),transform:"translate(".concat(gt[0],"px, ").concat(gt[1],"px) rotate(").concat(it,"rad) scaleY(").concat(s,")")}})})}if(k=R.map(function(pt,dt){return e.createElement("div",{key:"clipControl".concat(dt),className:Q("control","clip-control","snap-control"),"data-clip-index":dt,style:{transform:"translate(".concat(pt[0],"px, ").concat(pt[1],"px) rotate(").concat(x,"rad) scale(").concat(s,")")}})}),A&&k.push.apply(k,R.slice(8).map(function(pt,dt){return e.createElement("div",{key:"clipRadiusControl".concat(dt),className:Q("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+dt,style:{transform:"translate(".concat(pt[0],"px, ").concat(pt[1],"px) rotate(").concat(x,"rad) scale(").concat(s,")")}})})),w==="circle"||w==="ellipse"){var B=S.left,z=S.top,N=S.radiusX,F=S.radiusY,W=j(Bt(f,[B,z],M),Bt(f,[0,0],M)),$=W[0],V=W[1],K="none";if(!i){for(var X=Math.max(10,N/5,F/5),q=[],tt=0;tt<=X;++tt){var et=Math.PI*2/X*tt;q.push([N+(N-s)*Math.cos(et),F+(F-s)*Math.sin(et)])}q.push([N,-2]),q.push([-2,-2]),q.push([-2,F*2+2]),q.push([N*2+2,F*2+2]),q.push([N*2+2,-2]),q.push([N,-2]),K="polygon(".concat(q.map(function(pt){return"".concat(pt[0],"px ").concat(pt[1],"px")}).join(", "),")")}k.push(e.createElement("div",{key:"clipEllipse",className:Q("clip-ellipse","snap-control"),style:{width:"".concat(N*2,"px"),height:"".concat(F*2,"px"),clipPath:K,transform:"translate(".concat(-v+$,"px, ").concat(-h+V,"px) ").concat(ea(f))}}))}if(i){var H=le(J([g,m,E,b],R,!0)),Z=H.width,ut=H.height,at=H.left,Ot=H.top;if(I||L||A){var q=A?R.slice(0,8):R;k.push(e.createElement("div",{key:"clipArea",className:Q("clip-area","snap-control"),style:{width:"".concat(Z,"px"),height:"".concat(ut,"px"),transform:"translate(".concat(at,"px, ").concat(Ot,"px)"),clipPath:"polygon(".concat(q.map(function(dt){return"".concat(dt[0]-at,"px ").concat(dt[1]-Ot,"px")}).join(", "),")")}}))}}return D&&["vertical","horizontal"].forEach(function(pt){var dt=D[pt],gt=pt==="horizontal";dt.isSnap&&P.push.apply(P,dt.snap.posInfos.map(function(it,lt){var ft=it.pos,Wt=j(Bt(f,gt?[0,ft]:[ft,0],M),[v,h]),ht=j(Bt(f,gt?[u,ft]:[ft,d],M),[v,h]);return fn(e,"",Wt,ht,s,"clip".concat(pt,"snap").concat(lt),"guideline")})),dt.isBound&&P.push.apply(P,dt.bounds.map(function(it,lt){var ft=it.pos,Wt=j(Bt(f,gt?[0,ft]:[ft,0],M),[v,h]),ht=j(Bt(f,gt?[u,ft]:[ft,d],M),[v,h]);return fn(e,"",Wt,ht,s,"clip".concat(pt,"bounds").concat(lt),"guideline","bounds","bold")}))}),J(J([],k,!0),P,!0)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,a=r===void 0?!0:r;return a?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,O(O({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,a=r.defaultClipPath,i=r.customClipPath,s=n.target,o=n.width,l=n.height,c=e.inputEvent?e.inputEvent.target:null,u=c&&c.getAttribute("class")||"",d=e.datas,f=vc(s,o,l,a||"inset",i);if(!f)return!1;var p=f.clipText,v=f.type,h=f.poses,g=Y(t,"onClipStart",nt(t,e,{clipType:v,clipStyle:p,poses:h.map(function(m){return m.pos})}));return g===!1?(d.isClipStart=!1,!1):(d.isControl=u&&u.indexOf("clip-control")>-1,d.isLine=u.indexOf("clip-line")>-1,d.isArea=u.indexOf("clip-area")>-1||u.indexOf("clip-ellipse")>-1,d.clipIndex=c?parseInt(c.getAttribute("data-clip-index"),10):-1,d.clipPath=f,d.isClipStart=!0,n.clipPathState=p,rr(t,e),!0)},dragControl:function(t,e){var n,r,a=e.datas,i=e.originalDatas,s=e.isDragTarget;if(!a.isClipStart)return!1;var o=a,l=o.isControl,c=o.isLine,u=o.isArea,d=o.clipIndex,f=o.clipPath;if(!f)return!1;var p=nr(t.props,"clippable"),v=p.keepRatio,h=0,g=0,m=i.draggable,E=Ee(e);s&&m?(n=m.prevBeforeDist,h=n[0],g=n[1]):(h=E[0],g=E[1]);var b=[h,g],C=t.state,D=C.width,x=C.height,S=!u&&!l&&!c,M=f.type,w=f.poses,T=f.splitter,R=w.map(function(bt){return bt.pos});S&&(h=-h,g=-g);var k=!l||w[d].direction==="nesw",P=M==="inset"||M==="rect",L=w.map(function(){return[0,0]});if(l&&!k){var A=w[d],I=A.horizontal,_=A.vertical,B=[h*Math.abs(I),g*Math.abs(_)];L=Ch(w,d,B,P,v)}else k&&(L=R.map(function(){return[h,g]}));var z=R.map(function(bt,jt){return ct(bt,L[jt])}),N=J([],z,!0);C.snapBoundInfos=null;var F=f.type==="circle",W=f.type==="ellipse";if(F||W){var $=le(z),V=Math.abs($.bottom-$.top),K=Math.abs(W?$.right-$.left:V),X=z[0][1]+V,q=z[0][0]-K,tt=z[0][0]+K;F&&(N.push([tt,$.bottom]),L.push([1,0])),N.push([$.left,X]),L.push([0,1]),N.push([q,$.bottom]),L.push([1,0])}var et=$l((p.clipHorizontalGuidelines||[]).map(function(bt){return Et("".concat(bt),x)}),(p.clipVerticalGuidelines||[]).map(function(bt){return Et("".concat(bt),D)}),D,x),H=[],Z=[];if(F||W)H=[N[4][0],N[2][0]],Z=[N[1][1],N[3][1]];else if(P){var ut=[N[0],N[2],N[4],N[6]],at=[L[0],L[2],L[4],L[6]];H=ut.filter(function(bt,jt){return at[jt][0]}).map(function(bt){return bt[0]}),Z=ut.filter(function(bt,jt){return at[jt][1]}).map(function(bt){return bt[1]})}else H=N.filter(function(bt,jt){return L[jt][0]}).map(function(bt){return bt[0]}),Z=N.filter(function(bt,jt){return L[jt][1]}).map(function(bt){return bt[1]});var Ot=[0,0],pt=Vl(et,p.clipTargetBounds&&{left:0,top:0,right:D,bottom:x},H,Z,5),dt=pt.horizontal,gt=pt.vertical,it=dt.offset,lt=gt.offset;if(dt.isBound&&(Ot[1]+=it),gt.isBound&&(Ot[0]+=lt),(W||F)&&L[0][0]===0&&L[0][1]===0){var $=le(z),ft=$.bottom-$.top,Wt=W?$.right-$.left:ft,ht=gt.isBound?Math.abs(lt):gt.snapIndex===0?-lt:lt,yt=dt.isBound?Math.abs(it):dt.snapIndex===0?-it:it;Wt-=ht,ft-=yt,F&&(ft=Al(gt,dt)>0?ft:Wt,Wt=ft);var xt=N[0];N[1][1]=xt[1]-ft,N[2][0]=xt[0]+Wt,N[3][1]=xt[1]+ft,N[4][0]=xt[0]-Wt}else if(P&&v&&l){var Ut=pc(w),te=Ut[0],xe=Ut[1],pr=te&&xe?te/xe:0,vr=w[d],Se=vr.direction||"",Da=N[1][1],X=N[5][1],q=N[7][0],tt=N[3][0];it<=lt?it=lt/pr:lt=it*pr,Se.indexOf("w")>-1?q-=lt:Se.indexOf("e")>-1?tt-=lt:(q+=lt/2,tt-=lt/2),Se.indexOf("n")>-1?Da-=it:Se.indexOf("s")>-1?X-=it:(Da+=it/2,X-=it/2);var i1=ga(Da,tt,X,q);N.forEach(function(zu,c1){var No;No=i1[c1].pos,zu[0]=No[0],zu[1]=No[1]})}else N.forEach(function(bt,jt){var _u=L[jt];_u[0]&&(bt[0]-=lt),_u[1]&&(bt[1]-=it)});var Bu=eo(t,f,z),Lo="".concat(M,"(").concat(Bu.join(T),")");if(C.clipPathState=Lo,F||W)H=[N[4][0],N[2][0]],Z=[N[1][1],N[3][1]];else if(P){var ut=[N[0],N[2],N[4],N[6]];H=ut.map(function(jt){return jt[0]}),Z=ut.map(function(jt){return jt[1]})}else H=N.map(function(bt){return bt[0]}),Z=N.map(function(bt){return bt[1]});if(C.snapBoundInfos=Vl(et,p.clipTargetBounds&&{left:0,top:0,right:D,bottom:x},H,Z,1),m){var o1=C.is3d,s1=C.allMatrix,l1=o1?4:3,Ao=Ot;s&&(Ao=[b[0]+Ot[0]-E[0],b[1]+Ot[1]-E[1]]),m.deltaOffset=mt(s1,[Ao[0],Ao[1],0,0],l1)}return Y(t,"onClip",nt(t,e,O({clipEventType:"changed",clipType:M,poses:z,clipStyle:Lo,clipStyles:Bu,distX:h,distY:g},Xt((r={},r[M==="rect"?"clip":"clipPath"]=Lo,r),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,a=e.isDouble,i=r.isLine,s=r.isClipStart,o=r.isControl;return s?(Y(t,"onClipEnd",ae(t,e,{})),a&&(o?Sh(t,e):i&&xh(t,e)),a||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},wh={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[`:host[data-able-origindraggable] .control.origin {
    pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":Pt(e.inputEvent.target,Q("origin"))},dragControlStart:function(t,e){var n=e.datas;rr(t,e);var r=nt(t,e,{dragStart:Zt.dragStart(t,new Sr().dragStart([0,0],e))}),a=Y(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,a===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,a=e.isRequest;if(!n.isDragOrigin)return!1;var i=Ee(e),s=i[0],o=i[1],l=t.state,c=l.width,u=l.height,d=l.offsetMatrix,f=l.targetMatrix,p=l.is3d,v=t.props.originRelative,h=v===void 0?!0:v,g=p?4:3,m=[s,o];if(a){var E=e.distOrigin;(E[0]||E[1])&&(m=E)}var b=ct(n.startOrigin,m),C=ct(n.startTargetOrigin,m),D=j(m,n.prevOrigin),x=sn(d,f,b,g),S=t.getRect(),M=le(Ge(x,c,u,g)),w=[S.left-M.left,S.top-M.top];n.prevOrigin=m;var T=[pe(C[0],c,h),pe(C[1],u,h)].join(" "),R=Zt.drag(t,on(e,t.state,w,!!r,!1)),k=nt(t,e,O(O({width:c,height:u,origin:b,dist:m,delta:D,transformOrigin:T,drag:R},Xt({transformOrigin:T,transform:R.transform},e)),{afterTransform:R.transform}));return Y(t,"onDragOrigin",k),k},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(Y(t,"onDragOriginEnd",ae(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,a=0,i=n.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(o){return"deltaOrigin"in o?(s[0]+=o.deltaOrigin[0],s[1]+=o.deltaOrigin[1]):"origin"in o?(s[0]=o.origin[0]-i[0],s[1]=o.origin[1]-i[1]):("x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?a=o.y-n.top:"deltaY"in o&&(a+=o.deltaY)),{datas:e,distX:r,distY:a,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function kh(t,e,n,r){var a=t.filter(function(l){var c=l.virtual,u=l.horizontal;return u&&!c}).length,i=t.filter(function(l){var c=l.virtual,u=l.vertical;return u&&!c}).length,s=-1;if(e===0&&(a===0?s=0:a===1&&(s=1)),e===2&&(a<=2?s=2:a<=3&&(s=3)),e===3&&(i===0?s=4:i<4&&(s=7)),e===1&&(i<=1?s=5:i<=2&&(s=6)),!(s===-1||!t[s].virtual)){var o=t[s];Mh(t,s),s<4?o.pos[0]=n:o.pos[1]=r}}function Mh(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function Th(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function hc(t,e,n,r,a){r===void 0&&(r=[0,0]);var i=[];return!t||t==="0px"?i=[]:i=Ae(t),fc(i,e,n,0,0,r,a)}function gc(t,e,n,r,a){var i=t.state,s=i.width,o=i.height,l=to(a,t.props.roundRelative,s,o),c=l.raws,u=l.styles,d=l.radiusPoses,f=yh(d,c),p=f.horizontals,v=f.verticals,h=u.join(" ");i.borderRadiusState=h;var g=nt(t,e,O({horizontals:p,verticals:v,borderRadius:h,width:s,height:o,delta:r,dist:n},Xt({borderRadius:h},e)));return Y(t,"onRound",g),g}function mc(t){var e=t.getState().style,n=e.borderRadius||"";if(!n&&t.props.groupable){var r=t.getTargets()[0];r&&(n=getComputedStyle(r).borderRadius,e.borderRadius=n)}return n}var Rh={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean,roundPadding:Number,isDisplayShadowRoundControls:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd",onRoundGroupStart:"roundGroupStart",onRoundGroup:"roundGroup",onRoundGroupEnd:"roundGroupEnd"},css:[`.control.border-radius {
    background: #d66;
    cursor: pointer;
    z-index: 3;
}`,`.control.border-radius.vertical {
    background: #d6d;
    z-index: 2;
}`,`.control.border-radius.virtual {
    opacity: 0.5;
    z-index: 1;
}`,`:host.round-line-clickable .line.direction {
    cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?Q("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,a=n.width,i=n.height,s=n.allMatrix,o=n.is3d,l=n.left,c=n.top,u=n.borderRadiusState,d=t.props,f=d.minRoundControls,p=f===void 0?[0,0]:f,v=d.maxRoundControls,h=v===void 0?[4,4]:v,g=d.zoom,m=d.roundPadding,E=m===void 0?0:m,b=d.isDisplayShadowRoundControls,C=d.groupable;if(!r)return null;var D=u||mc(t),x=o?4:3,S=hc(D,a,i,p,!0);if(!S)return null;var M=0,w=0,T=C?[0,0]:[l,c];return S.map(function(R,k){var P=R.horizontal,L=R.vertical,A=R.direction||"",I=J([],R.pos,!0);w+=Math.abs(P),M+=Math.abs(L),P&&A.indexOf("n")>-1&&(I[1]-=E),L&&A.indexOf("w")>-1&&(I[0]-=E),P&&A.indexOf("s")>-1&&(I[1]+=E),L&&A.indexOf("e")>-1&&(I[0]+=E);var _=j(Bt(s,I,x),T),B=R.vertical?M<=h[1]&&(b||!R.virtual):w<=h[0]&&(b||!R.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(k),className:Q("control","border-radius",R.vertical?"vertical":"",R.virtual?"virtual":""),"data-radius-index":k,style:{display:B?"block":"none",transform:"translate(".concat(_[0],"px, ").concat(_[1],"px) scale(").concat(g,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,a=n.target,i=a.getAttribute("class")||"",s=i.indexOf("border-radius")>-1,o=i.indexOf("moveable-line")>-1&&i.indexOf("moveable-direction")>-1,l=s?parseInt(a.getAttribute("data-radius-index"),10):-1,c=-1;if(o){var u=a.getAttribute("data-line-key")||"";u&&(c=parseInt(u.replace(/render-line-/g,""),10),isNaN(c)&&(c=-1))}if(!s&&!o)return!1;var d=nt(t,e,{}),f=Y(t,"onRoundStart",d);if(f===!1)return!1;r.lineIndex=c,r.controlIndex=l,r.isControl=s,r.isLine=o,rr(t,e);var p=t.props,v=p.roundRelative,h=p.minRoundControls,g=h===void 0?[0,0]:h,m=t.state,E=m.width,b=m.height;r.isRound=!0,r.prevDist=[0,0];var C=mc(t),D=hc(C||"",E,b,g,!0)||[];return r.controlPoses=D,m.borderRadiusState=to(D,v,E,b).styles.join(" "),d},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var a=n.controlIndex,i=Ee(e),s=i[0],o=i[1],l=[s,o],c=j(l,n.prevDist),u=t.props.maxRoundControls,d=u===void 0?[4,4]:u,f=t.state,p=f.width,v=f.height,h=r[a],g=h.vertical,m=h.horizontal,E=r.map(function(C){var D=C.horizontal,x=C.vertical,S=[D*m*l[0],x*g*l[1]];if(D){if(d[0]===1)return S;if(d[0]<4&&D!==m)return S}else{if(d[1]===0)return S[1]=x*m*l[0]/p*v,S;if(g){if(d[1]===1)return S;if(d[1]<4&&x!==g)return S}}return[0,0]});E[a]=l;var b=r.map(function(C,D){return O(O({},C),{pos:ct(C.pos,E[D])})});return a<4?b.slice(0,a+1).forEach(function(C){C.virtual=!1}):b.slice(4,a+1).forEach(function(C){C.virtual=!1}),n.prevDist=[s,o],gc(t,e,l,c,b)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,a=e.isDouble;if(!r.isRound)return!1;var i=r.isControl,s=r.controlIndex,o=r.isLine,l=r.lineIndex,c=r.controlPoses,u=c.filter(function(m){var E=m.virtual;return E}).length,d=t.props.roundClickable,f=d===void 0?!0:d;if(a&&f){if(i&&(f===!0||f==="control"))Th(c,s);else if(o&&(f===!0||f==="line")){var p=rl(t,e),v=p[0],h=p[1];kh(c,l,v,h)}u!==c.filter(function(m){var E=m.virtual;return E}).length&&gc(t,e,[0,0],[0,0],c)}var g=ae(t,e,{});return Y(t,"onRoundEnd",g),n.borderRadiusState="",g},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,a=t.props.targets,i=ve(t,"roundable",e),s=O({targets:t.props.targets,events:i.map(function(o,l){return O(O({},o),{target:a[l],moveable:r[l],currentTarget:r[l]})})},n);return Y(t,"onRoundGroupStart",s),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,a=t.props.targets,i=ve(t,"roundable",e),s=O({targets:t.props.targets,events:i.map(function(o,l){return O(O(O({},o),{target:a[l],moveable:r[l],currentTarget:r[l]}),Xt({borderRadius:n.borderRadius},o))})},n);return Y(t,"onRoundGroup",s),s},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,a=ve(t,"roundable",e);na(t,"onRound",function(o){var l=O({targets:t.props.targets,events:a.map(function(c,u){return O(O(O({},c),{target:r[u],moveable:n[u],currentTarget:n[u]}),Xt({borderRadius:o.borderRadius},c))})},o);Y(t,"onRoundGroup",l)});var i=this.dragControlEnd(t,e);if(!i)return!1;var s=O({targets:t.props.targets,events:a.map(function(o,l){var c;return O(O({},o),{target:r[l],moveable:n[l],currentTarget:n[l],lastEvent:(c=o.datas)===null||c===void 0?void 0:c.lastEvent})})},i);return Y(t,"onRoundGroupEnd",s),s},unset:function(t){t.state.borderRadiusState=""}};function Oh(t,e){var n=e?4:3,r=Dt(n),a="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===a||t==="matrix(1,0,0,1,0,0)"}var yc={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,a=n.target,i=n.targetMatrix,s=a?.style.transform,o=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(Gs(i,!0),")"),l=!s||s==="none"?o:s;e.datas.startTransforms=Oh(l,r)?[]:Ae(l)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return nt(t,e,{setTransform:function(n){e.datas.startTransforms=wt(n)?n:Ae(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return nt(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),Y(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){this.resetStyle(e),Y(t,"onBeforeRender",nt(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){Y(t,"onBeforeRenderEnd",nt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=ve(t,"beforeRenderable",e),a=t.moveables,i=r.map(function(s,o){var l=a[o];return n.setTransform(l,s),n.resetStyle(s),n.fillDragStartParams(l,s)});Y(t,"onBeforeRenderGroupStart",nt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:i}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=ve(t,"beforeRenderable",e),a=t.moveables,i=r.map(function(s,o){var l=a[o];return n.resetStyle(s),n.fillDragParams(l,s)});Y(t,"onBeforeRenderGroup",nt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:i}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Y(t,"onBeforeRenderGroupEnd",nt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},Ec={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,e){Y(t,"onRenderStart",nt(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Y(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){if(e.resultCount)return this.drag(t,e)},dragEnd:function(t,e){Y(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Y(t,"onRenderGroupStart",nt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=ve(t,"beforeRenderable",e),a=t.moveables,i=r.map(function(s,o){var l=a[o];return n.fillDragParams(l,s)});Y(t,"onRenderGroup",nt(t,e,O(O({isPinch:!!e.isPinch,targets:t.props.targets,transform:Qn(e)},Xt(qn(e))),{events:i})))},dragGroupEnd:function(t,e){var n=this,r=ve(t,"beforeRenderable",e),a=t.moveables,i=r.map(function(s,o){var l=a[o];return n.fillDragEndParams(l,s)});Y(t,"onRenderGroupEnd",nt(t,e,O({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:i,transform:Qn(e)},Xt(qn(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){return nt(t,e,O({isPinch:!!e.isPinch,transform:Qn(e)},Xt(qn(e))))},fillDragEndParams:function(t,e){return nt(t,e,O({isPinch:!!e.isPinch,isDrag:e.isDrag,transform:Qn(e)},Xt(qn(e))))}};function pn(t,e,n,r,a,i,s){var o=a==="Start",l=t.state.target,c=i.isRequest;if(!l||o&&r.indexOf("Control")>-1&&!c&&t.areaElement===i.inputEvent.target)return!1;var u="".concat(n).concat(r).concat(a),d="".concat(n).concat(r,"Condition"),f=a==="End",p=a==="After",v=o&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());v&&t.updateRect(a,!0,!1),i.clientDistX=i.distX,i.clientDistY=i.distY,a===""&&!c&&wl(t.state,i);var h=J([],t[e],!0);if(c){var g=i.requestAble;h.some(function(k){return k.name===g})||h.push.apply(h,t.props.ables.filter(function(k){return k.name===g}))}if(!h.length||h.every(function(k){return k.dragRelation}))return!1;var m=J(J([yc],h,!0),[Ec],!1).filter(function(k){return k[u]}),E=i.datas;v&&m.forEach(function(k){k.unset&&k.unset(t)});var b=i.inputEvent,C;f&&b&&(C=document.elementFromPoint(i.clientX,i.clientY)||b.target);var D=0,x=!1,S=function(){var k;x=!0,(k=i.stop)===null||k===void 0||k.call(i)},M=m.filter(function(k){var P=k.name,L=E[P]||(E[P]={});if(o&&(L.isEventStart=!k[d]||k[d](t,i)),L.isEventStart){var A=k[u](t,O(O({},i),{stop:S,resultCount:D,datas:L,originalDatas:E,inputTarget:C}));return t._emitter.off(),o&&A===!1&&(L.isEventStart=!1),D+=A||L.isEventStart?1:0,A}return!1}),w=M.length,T=!1;if(x&&(T=!0),!T&&o&&m.length&&!w&&(T=m.filter(function(k){var P=k.name,L=E[P];return L.isEventStart?k.dragRelation!=="strong":!1}).length),(f||T)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(k){k.state.gestos={}}),m.forEach(function(k){k.unset&&k.unset(t)})),o&&!T&&!c&&w&&i?.preventDefault(),t.isUnmounted||T)return!1;if(!o&&w&&!s||f){var R=t.props.flushSync||fl;R(function(){t.updateRect(f?a:"",!0,!1),t.forceUpdate()})}return!o&&!f&&!p&&w&&!s&&pn(t,e,n,r,a+"After",i),!0}function ro(t){return function(e){var n=t.props.dragTarget,r=e.inputEvent.target,a=t.areaElement;return n&&(r===n||n.contains(r))||r===a||!t.isMoveableElement(r)&&!t.controlBox.getElement().contains(r)||Pt(r,"moveable-area")||Pt(r,"moveable-padding")||Pt(r,"moveable-edgeDraggable")}}function bc(t,e,n){var r=t.controlBox.getElement(),a=[],i=t.props.dragTarget;return a.push(r),(!t.props.dragArea||i)&&a.push(e),no(t,a,"targetAbles",n,{dragStart:ro(t),pinchStart:ro(t)})}function no(t,e,n,r,a){a===void 0&&(a={});var i=n==="targetAbles",s=t.props,o=s.pinchOutside,l=s.pinchThreshold,c=s.preventClickEventOnDrag,u=s.preventClickDefault,d=s.checkInput,f={preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,container:window,pinchThreshold:l,pinchOutside:o,preventClickEventOnDrag:i?c:!1,preventClickEventOnDragStart:i?u:!1,preventClickEventByCondition:i?null:function(h){return t.controlBox.getElement().contains(h.target)},checkInput:i?d:!1},p=new Xs(e,f),v=r==="Control";return["drag","pinch"].forEach(function(h){["Start","","End"].forEach(function(g){p.on("".concat(h).concat(g),function(m){var E,b=m.eventType;if(a[b]&&!a[b](m)){m.stop();return}var C=pn(t,n,h,r,g,m);C?(t.props.stopPropagation||g==="Start"&&v)&&((E=m?.inputEvent)===null||E===void 0||E.stopPropagation()):m.stop()})})}),p}var Ph=function(){function t(n,r,a){var i=this;this.target=n,this.moveable=r,this.eventName=a,this.ables=[],this._onEvent=function(s){var o=i.eventName,l=i.moveable;l.state.disableNativeEvent||i.ables.forEach(function(c){c[o](l,{inputEvent:s})})},n.addEventListener(a.toLowerCase(),this._onEvent)}var e=t.prototype;return e.setAbles=function(n){this.ables=n},e.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function Lh(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function Cc(t,e,n){for(var r=t,a=[],i=document.documentElement||document.body,s=!n&&t===e||t===i,o=s,l=!1,c=3,u,d,f,p=!1,v=ln(e,e,!0).offsetParent,h=1;r&&!o;){o=s;var g=getComputedStyle(r),m=g.position,E=pl(r,g),b=Hf(Zp(E)),C=m==="fixed",D={hasTransform:!1,fixedContainer:null};C&&(p=!0,D=qp(r),v=D.fixedContainer);var x=b.length;!l&&x===16&&(l=!0,c=4,Ti(a),f&&(f=ye(f,3,4))),l&&x===9&&(b=ye(b,3,4));var S=Qp(r,t,g),M=S.tagName,w=S.hasOffset,T=S.isSVG,R=S.origin,k=S.targetOrigin,P=S.offset,L=P[0],A=P[1];M==="svg"&&f&&(a.push({type:"target",target:r,matrix:Jp(r,c)}),a.push({type:"offset",target:r,matrix:Dt(c)}));var I=void 0,_=!1,B=!1,z=parseFloat(g.zoom)||1;if(C)I=D.fixedContainer,_=!0;else{var N=ln(r,e,!1,!0,g),F=N.offsetZoom;if(I=N.offsetParent,_=N.isEnd,B=N.isStatic,h*=F,F!==1&&B)L-=I.offsetLeft,A-=I.offsetTop;else if(Rp){var W=N.parentSlotElement;if(W){for(var $=I,V=0,K=0;$&&Lh($);)V+=$.offsetLeft,K+=$.offsetTop,$=$.offsetParent;L-=V,A-=K}}}Qs&&!Op&&w&&!T&&B&&(m==="relative"||m==="static")&&(L-=I.offsetLeft,A-=I.offsetTop,s=s||_);var X=0,q=0,tt=0,et=0;if(C)w&&D.hasTransform&&(tt=I.clientLeft,et=I.clientTop);else if(w&&v!==I&&(X=I.clientLeft,q=I.clientTop),w&&I===i){var H=vl(r,!1,g);L+=H[0],A+=H[1]}if(a.push({type:"target",target:r,matrix:Jn(b,c,R)}),w){var Z=r===t,ut=Z?0:r.scrollLeft,at=Z?0:r.scrollTop;a.push({type:"offset",target:r,matrix:qr([L-ut+X-tt,A-at+q-et],c)})}else a.push({type:"offset",target:r,origin:R});if(z!==1&&a.push({type:"zoom",target:r,matrix:Jn(ni([z,z],c),c,[0,0])}),f||(f=b),u||(u=R),d||(d=k),o||C)break;r=I,s=_,(!n||r===i)&&(o=s)}return f||(f=Dt(c)),u||(u=[0,0]),d||(d=[0,0]),{zoom:h,offsetContainer:v,matrixes:a,targetMatrix:f,transformOrigin:u,targetOrigin:d,is3d:l,hasFixed:p}}function Ah(t,e,n,r){var a;n===void 0&&(n=e);var i=Cc(t,e),s=i.matrixes,o=i.is3d,l=i.targetMatrix,c=i.transformOrigin,u=i.targetOrigin,d=i.offsetContainer,f=i.hasFixed,p=i.zoom,v=Cc(d,n,!0),h=v.matrixes,g=v.is3d,m=v.offsetContainer,E=v.zoom,b=r||g||o,C=b?4:3,D=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,x=l,S=Dt(C),M=Dt(C),w=Dt(C),T=Dt(C),R=s.length;h.reverse(),s.reverse(),!o&&b&&(x=ye(x,3,4),Ti(s)),!g&&b&&Ti(h),h.forEach(function(B){M=mt(M,B.matrix,C)});var k=n||document.body,P=((a=h[0])===null||a===void 0?void 0:a.target)||ln(k,k,!0).offsetParent,L=h.slice(1).reduce(function(B,z){return mt(B,z.matrix,C)},Dt(C));s.forEach(function(B,z){if(R-2===z&&(w=S.slice()),R-1===z&&(T=S.slice()),!B.matrix){var N=s[z+1],F=ev(B,N,P,C,mt(L,S,C));B.matrix=qr(F,C)}S=mt(S,B.matrix,C)});var A=!D&&o;x||(x=Dt(A?4:3));var I=ea(D&&x.length===16?ye(x,4,3):x,A),_=M;return M=_s(M,C,C),{hasZoom:p!==1||E!==1,hasFixed:f,rootMatrix:M,originalRootMatrix:_,beforeMatrix:w,offsetMatrix:T,allMatrix:S,targetMatrix:x,targetTransform:I,transformOrigin:c,targetOrigin:u,is3d:b,offsetContainer:d,offsetRootContainer:m}}function xc(t,e,n,r){n===void 0&&(n=e);var a=0,i=0,s=0,o={},l=ml(t);if(t&&(a=l.offsetWidth,i=l.offsetHeight),t){var c=Ah(t,e,n,r),u=wr(c.allMatrix,c.transformOrigin,a,i);o=O(O({},c),u);var d=wr(c.allMatrix,[50,50],100,100);s=yl([d.pos1,d.pos2],d.direction)}var f=r?4:3;return O(O(O({hasZoom:!1,width:a,height:i,rotation:s},l),{originalRootMatrix:Dt(f),rootMatrix:Dt(f),beforeMatrix:Dt(f),offsetMatrix:Dt(f),allMatrix:Dt(f),targetMatrix:Dt(f),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null}),o)}function $1(t,e,n){return n===void 0&&(n=e),xc(t,e,n,!0)}function ao(t,e,n,r,a,i){i===void 0&&(i=[]);var s=1,o=[0,0],l=ra(),c=ra(),u=ra(),d=ra(),f=[0,0],p={},v=xc(e,n,a,!0);if(e){var h=getComputedStyle(e);i.forEach(function(k){p[k]=h[k]});var g=v.is3d?4:3,m=wr(v.offsetMatrix,ct(v.transformOrigin,zs(v.targetMatrix,g)),v.width,v.height);s=m.direction,o=ct(m.origin,[m.left-v.left,m.top-v.top]),d=un(v.offsetRootContainer);var E=ln(r,r,!0).offsetParent||v.offsetRootContainer;if(v.hasZoom){var b=wr(mt(v.originalRootMatrix,v.allMatrix),v.transformOrigin,v.width,v.height),C=wr(v.originalRootMatrix,ta(getComputedStyle(E)).map(function(k){return parseFloat(k)}),E.offsetWidth,E.offsetHeight);if(l=Pi(b,d),u=Pi(C,d,E,!0),t){var D=b.left,x=b.top;c=Pi({left:D,top:x,bottom:x,right:x},d)}}else{l=un(e),u=un(E,!0),t&&(c=un(t));var S=u.left,M=u.top,w=u.clientLeft,T=u.clientTop,R=[l.left-S,l.top-M];f=j(ar(v.rootMatrix,R,4),[w+v.left,T+v.top])}}return O({targetClientRect:l,containerClientRect:u,moveableClientRect:c,rootContainerClientRect:d,beforeDirection:s,beforeOrigin:o,originalBeforeOrigin:o,target:e,style:p,offsetDelta:f},v)}function Sc(t){var e=t.pos1,n=t.pos2,r=t.pos3,a=t.pos4;if(!e||!n||!r||!a)return null;var i=ze([e,n,r,a]),s=[i.minX,i.minY],o=j(t.origin,s);return e=j(e,s),n=j(n,s),r=j(r,s),a=j(a,s),O(O({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:n,pos3:r,pos4:a,origin:o,beforeOrigin:o,isPersisted:!0})}var Rr=function(t){xr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state=O({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},ao(null)),r.renderState={},r.enabledAbles=[],r.targetAbles=[],r.controlAbles=[],r.rotation=0,r.scale=[1,1],r.isMoveableMounted=!1,r.isUnmounted=!1,r.events={mouseEnter:null,mouseLeave:null},r._emitter=new rn,r._prevTarget=null,r._prevDragArea=!1,r._isPropTargetChanged=!1,r._hasFirstTarget=!1,r._observer=null,r._observerId=0,r._rootContainer=null,r._viewContainer=null,r._viewClassNames=[],r.checkUpdateRect=function(){if(!r.isDragging()){var a=r.props.parentMoveable;if(a){a.checkUpdateRect();return}pf(r._observerId),r._observerId=ps(function(){r.isDragging()||r.updateRect()})}},r._onPreventClick=function(a){a.stopPropagation(),a.preventDefault()},r}var n=e.prototype;return n.render=function(){var r=this.props,a=this.getState(),i=r.parentPosition,s=r.className,o=r.target,l=r.zoom,c=r.cspNonce,u=r.translateZ,d=r.cssStyled,f=r.portalContainer,p=r.groupable,v=r.linePadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var h=i||[0,0],g=h[0],m=h[1],E=a.left,b=a.top,C=a.target,D=a.direction,x=a.hasFixed,S=a.offsetDelta,M=r.targets,w=this.isDragging(),T={};this.getEnabledAbles().forEach(function(I){T["data-able-".concat(I.name.toLowerCase())]=!0});var R=this._getAbleClassName(),k=M&&M.length&&(C||p)||o||!this._hasFirstTarget&&this.state.isPersisted,P=this.controlBox||this.props.firstRenderState||this.props.persistData,L=[E-g,b-m];!p&&r.useAccuratePosition&&(L[0]+=S[0],L[1]+=S[1]);var A={position:x?"fixed":"absolute",display:k?"block":"none",visibility:P?"visible":"hidden",transform:"translate3d(".concat(L[0],"px, ").concat(L[1],"px, ").concat(u,")"),"--zoom":l,"--zoompx":"".concat(l,"px")};return v&&(A["--moveable-line-padding"]=v),se(d,O({cspNonce:c,ref:me(this,"controlBox"),className:"".concat(Q("control-box",D===-1?"reverse":"",w?"dragging":"")," ").concat(R," ").concat(s)},T,{onClick:this._onPreventClick,portalContainer:f,style:A}),this.renderAbles(),this._renderLines())},n.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1,this.controlBox.getElement();var r=this.props,a=r.parentMoveable,i=r.container,s=r.wrapperMoveable;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!a&&!s&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},n.componentDidUpdate=function(r){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(r)},n.componentWillUnmount=function(){this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off();var r=this._viewContainer;r&&this._changeAbleViewClassNames([]),kr(this,"targetGesto"),kr(this,"controlGesto");var a=this.events;for(var i in a){var s=a[i];s&&s.destroy()}},n.getTargets=function(){var r=this.props.target;return r?[r]:[]},n.getAble=function(r){var a=this.props.ables||[];return ke(a,function(i){return i.name===r})},n.getContainer=function(){var r=this.props,a=r.parentMoveable,i=r.wrapperMoveable,s=r.container;return s||i&&i.getContainer()||a&&a.getContainer()||this.controlBox.getElement().parentElement},n.isMoveableElement=function(r){var a;return r&&(((a=r.getAttribute)===null||a===void 0?void 0:a.call(r,"class"))||"").indexOf(Ci)>-1},n.dragStart=function(r){var a=this.targetGesto,i=this.controlGesto;return a&&ro(this)({inputEvent:r})?a.isFlag()||a.triggerDragStart(r):i&&this.isMoveableElement(r.target)&&(i.isFlag()||i.triggerDragStart(r)),this},n.hitTest=function(r){var a=this.state,i=a.target,s=a.pos1,o=a.pos2,l=a.pos3,c=a.pos4,u=a.targetClientRect;if(!i)return 0;var d;if(r instanceof Element){var f=r.getBoundingClientRect();d={left:f.left,top:f.top,width:f.width,height:f.height}}else d=O({width:0,height:0},r);var p=d.left,v=d.top,h=d.width,g=d.height,m=si([s,o,c,l],u),E=ap(m,[[p,v],[p+h,v],[p+h,v+g],[p,v+g]]),b=en(m);return!E||!b?0:Math.min(100,E/b*100)},n.isInside=function(r,a){var i=this.state,s=i.target,o=i.pos1,l=i.pos2,c=i.pos3,u=i.pos4,d=i.targetClientRect;return s?Fn([r,a],si([o,l,u,c],d)):!1},n.updateRect=function(r,a,i){i===void 0&&(i=!0);var s=this.props,o=s.parentMoveable,l=this.state,c=l.target||this.props.target,u=this.getContainer(),d=o?o._rootContainer:this._rootContainer,f=ao(this.controlBox&&this.controlBox.getElement(),c,u,u,d||u,this._getRequestStyles());if(!c&&this._hasFirstTarget&&s.persistData){var p=Sc(s.persistData);for(var v in p)f[v]=p[v]}this.updateState(f,o?!1:i)},n.isDragging=function(r){var a,i,s=this.targetGesto,o=this.controlGesto;if(s?.isFlag()){if(!r)return!0;var l=s.getEventData();return!!(!((a=l[r])===null||a===void 0)&&a.isEventStart)}if(o?.isFlag()){if(!r)return!0;var l=o.getEventData();return!!(!((i=l[r])===null||i===void 0)&&i.isEventStart)}return!1},n.updateTarget=function(r){this.updateRect(r,!0)},n.getRect=function(){var r=this.state,a=Jt(this.state),i=a[0],s=a[1],o=a[2],l=a[3],c=le(a),u=r.width,d=r.height,f=c.width,p=c.height,v=c.left,h=c.top,g=[r.left,r.top],m=ct(g,r.origin),E=ct(g,r.beforeOrigin),b=r.transformOrigin;return{width:f,height:p,left:v,top:h,pos1:i,pos2:s,pos3:o,pos4:l,offsetWidth:u,offsetHeight:d,beforeOrigin:E,origin:m,transformOrigin:b,rotation:this.getRotation()}},n.getManager=function(){return this},n.stopDrag=function(r){var a,i;(!r||r==="target")&&((a=this.targetGesto)===null||a===void 0||a.stop()),(!r||r==="control")&&((i=this.controlGesto)===null||i===void 0||i.stop())},n.getRotation=function(){var r=this.state,a=r.pos1,i=r.pos2,s=r.direction;return cv(a,i,s)},n.request=function(r,a,i){a===void 0&&(a={});var s=this.props,o=s.ables,l=s.groupable,c=o.filter(function(g){return g.name===r})[0];if(this.isDragging()||!c||!c.request)return{request:function(){return this},requestEnd:function(){return this}};var u=this,d=c.request(this),f=i||a.isInstant,p=d.isControl?"controlAbles":"targetAbles",v="".concat(l?"Group":"").concat(d.isControl?"Control":""),h={request:function(g){return pn(u,p,"drag",v,"",O(O({},d.request(g)),{requestAble:r,isRequest:!0}),f),this},requestEnd:function(){return pn(u,p,"drag",v,"End",O(O({},d.requestEnd()),{requestAble:r,isRequest:!0}),f),this}};return pn(u,p,"drag",v,"Start",O(O({},d.requestStart(a)),{requestAble:r,isRequest:!0}),f),f?h.request(a).requestEnd():h},n.destroy=function(){this.componentWillUnmount()},n.updateRenderPoses=function(){var r=this.getState(),a=this.props,i=r.originalBeforeOrigin,s=r.transformOrigin,o=r.allMatrix,l=r.is3d,c=r.pos1,u=r.pos2,d=r.pos3,f=r.pos4,p=r.left,v=r.top,h=r.isPersisted,g=a.padding||{},m=g.left,E=m===void 0?0:m,b=g.top,C=b===void 0?0:b,D=g.bottom,x=D===void 0?0:D,S=g.right,M=S===void 0?0:S,w=l?4:3,T=[];h?T=s:this.controlBox&&a.groupable?T=i:T=ct(i,[p,v]),r.renderPoses=[ct(c,ia(o,[-E,-C],s,T,w)),ct(u,ia(o,[M,-C],s,T,w)),ct(d,ia(o,[-E,x],s,T,w)),ct(f,ia(o,[M,x],s,T,w))]},n.checkUpdate=function(){this._isPropTargetChanged=!1;var r=this.props,a=r.target,i=r.container,s=r.parentMoveable,o=this.state,l=o.target,c=o.container;if(!(!l&&!a)){this.updateAbles();var u=!Ai(l,a),d=u||!Ai(c,i);if(d){var f=i||this.controlBox;f&&this.unsetAbles(),this.updateState({target:a,container:i}),!s&&f&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},n.waitToChangeTarget=function(){return new Promise(function(){})},n.triggerEvent=function(r,a){this._emitter.trigger(r,a);var i=this.props[r];return i&&i(a)},n.useCSS=function(r,a){var i=this.props.customStyledMap,s=r+a;return i[s]||(i[s]=js(r,a)),i[s]},n.getState=function(){var r,a=this.props;(a.target||!((r=a.targets)===null||r===void 0)&&r.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,s=a.persistData,o=a.firstRenderState;if(o&&!i)return o;if(!this._hasFirstTarget&&s){var l=Sc(s);if(l)return this.updateState(l,!1),this.state}return this.state.isPersisted=!1,this.state},n.updateSelectors=function(){},n.unsetAbles=function(){var r=this;this.targetAbles.forEach(function(a){a.unset&&a.unset(r)})},n.updateAbles=function(r,a){r===void 0&&(r=this.props.ables),a===void 0&&(a="");var i=this.props,s=i.triggerAblesSimultaneously,o=this.getEnabledAbles(r),l="drag".concat(a,"Start"),c="pinch".concat(a,"Start"),u="drag".concat(a,"ControlStart"),d=aa(o,[l,c],s),f=aa(o,[u],s);this.enabledAbles=o,this.targetAbles=d,this.controlAbles=f},n.updateState=function(r,a){if(a){if(this.isUnmounted)return;this.setState(r)}else{var i=this.state;for(var s in r)i[s]=r[s]}},n.getEnabledAbles=function(r){r===void 0&&(r=this.props.ables);var a=this.props;return r.filter(function(i){return i&&(i.always&&a[i.name]!==!1||a[i.name])})},n.renderAbles=function(){var r=this,a=this.props,i=a.triggerAblesSimultaneously,s={createElement:se};return this.renderState={},iv(Dl(aa(this.getEnabledAbles(),["render"],i).map(function(o){var l=o.render;return l(r,s)||[]})).filter(function(o){return o}),function(o){var l=o.key;return l}).map(function(o){return o[0]})},n.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},n._getRequestStyles=function(){var r=this.getEnabledAbles().reduce(function(a,i){var s,o,l=(o=(s=i.requestStyle)===null||s===void 0?void 0:s.call(i))!==null&&o!==void 0?o:[];return J(J([],a,!0),l,!0)},[]);return r},n._updateObserver=function(r){var a,i=this.props,s=i.target;if(!window.ResizeObserver||!s||!i.useResizeObserver){(a=this._observer)===null||a===void 0||a.disconnect();return}if(!(r.target===s&&this._observer)){var o=new ResizeObserver(this.checkUpdateRect);o.observe(s,{box:"border-box"}),this._observer=o}},n._updateEvents=function(){var r=this.controlBox.getElement(),a=this.targetAbles.length,i=this.controlAbles.length,s=this.props,o=s.dragTarget||s.target,l=!a&&this.targetGesto||this._isTargetChanged(!0);l&&(kr(this,"targetGesto"),this.updateState({gesto:null})),i||kr(this,"controlGesto"),o&&a&&!this.targetGesto&&(this.targetGesto=bc(this,o,"")),!this.controlGesto&&i&&(this.controlGesto=no(this,r,"controlAbles","Control"))},n._updateTargets=function(){var r=this.props;this._prevTarget=r.dragTarget||r.target,this._prevDragArea=r.dragArea},n._renderLines=function(){var r=this.props,a=r,i=a.zoom,s=a.hideDefaultLines,o=a.hideChildMoveableDefaultLines,l=a.parentMoveable;if(s||l&&o)return[];var c=this.getState().renderPoses,u={createElement:se};return[[0,1],[1,3],[3,2],[2,0]].map(function(d,f){var p=d[0],v=d[1];return fn(u,"",c[p],c[v],i,"render-line-".concat(f))})},n._isTargetChanged=function(r){var a=this.props,i=a.dragTarget||a.target,s=this._prevTarget,o=this._prevDragArea,l=a.dragArea,c=!l&&s!==i,u=(r||l)&&o!==l;return c||u},n._updateNativeEvents=function(){var r=this,a=this.props,i=a.dragArea?this.areaElement:this.state.target,s=this.events,o=Ie(s);if(this._isTargetChanged())for(var l in s){var c=s[l];c&&c.destroy(),s[l]=null}if(i){var u=this.enabledAbles;o.forEach(function(d){var f=aa(u,[d]),p=f.length>0,v=s[d];if(!p){v&&(v.destroy(),s[d]=null);return}v||(v=new Ph(i,r,d),s[d]=v),v.setAbles(f)})}},n._checkUpdateRootContainer=function(){var r=this.props.rootContainer;!this._rootContainer&&r&&(this._rootContainer=ir(r,!0))},n._checkUpdateViewContainer=function(){var r=this.props.viewContainer;!this._viewContainer&&r&&(this._viewContainer=ir(r,!0));var a=this._viewContainer;a&&this._changeAbleViewClassNames(J(J([],this._getAbleViewClassNames(),!0),[this.isDragging()?ch:""],!1))},n._changeAbleViewClassNames=function(r){var a=this._viewContainer,i=Sl(r.filter(Boolean),function(u){return u}).map(function(u){var d=u[0];return d}),s=this._viewClassNames,o=Hr(s,i),l=o.removed,c=o.added;l.forEach(function(u){ys(a,s[u])}),c.forEach(function(u){Ka(a,i[u])}),this._viewClassNames=i},n._getAbleViewClassNames=function(){var r=this;return(this.getEnabledAbles().map(function(a){var i;return((i=a.viewClassName)===null||i===void 0?void 0:i.call(a,r))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},n._getAbleClassName=function(r){var a=this;r===void 0&&(r="");var i=this.getEnabledAbles(),s=this.targetGesto,o=this.controlGesto,l=s?.isFlag()?s.getEventData():{},c=o?.isFlag()?o.getEventData():{};return i.map(function(u){var d,f,p,v=u.name,h=((d=u.className)===null||d===void 0?void 0:d.call(u,a))||"";return(!((f=l[v])===null||f===void 0)&&f.isEventStart||!((p=c[v])===null||p===void 0)&&p.isEventStart)&&(h+=" ".concat(Q("".concat(v).concat(r,"-dragging")))),h.trim()}).filter(Boolean).join(" ")},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,portalContainer:null,useResizeObserver:!1,linePadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:fl,firstRenderState:null,persistData:null,viewContainer:null,useAccuratePosition:!1},e}(Za),io={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean,groupableProps:Object,targetGroups:Object,hideChildMoveableDefaultLines:Boolean},events:{},render:function(t,e){var n,r=t.props,a=r.targets||[];t.moveables=[];var i=t.getState(),s=i.left,o=i.top,l=i.isPersisted,c=[s,o],u=r.zoom||1,d=t.renderGroupRects,f=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];return l?a=f.map(function(){return null}):f=[],J(J([],a.map(function(p,v){return e.createElement(Rr,{key:"moveable"+v,ref:is(t,"moveables",v),target:p,origin:!1,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:c,persistData:f[v],zoom:u})}),!0),Dl(d.map(function(p,v){var h=p.pos1,g=p.pos2,m=p.pos3,E=p.pos4,b=[h,g,m,E];return[[0,1],[1,3],[3,2],[2,0]].map(function(C,D){var x=C[0],S=C[1];return fn(e,"",j(b[x],c),j(b[S],c),u,"group-rect-".concat(v,"-").concat(D))})})),!0)}},Nh=an("clickable",{props:{clickable:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,a=e.inputTarget,i=t.isMoveableElement(a),s=!i&&t.controlBox.getElement().contains(a);if(!(!r||!a||e.isDrag||t.isMoveableElement(a)||s)){var o=n.contains(a);Y(t,"onClick",nt(t,e,{isDouble:e.isDouble,inputTarget:a,isTarget:n===a,moveableTarget:t.props.target,containsTarget:o}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var a=t.props.targets,i=a.indexOf(r),s=i>-1,o=!1;i===-1&&(i=we(a,function(l){return l.contains(r)}),o=i>-1),Y(t,"onClickGroup",nt(t,e,{isDouble:e.isDouble,targets:a,inputTarget:r,targetIndex:i,isTarget:s,containsTarget:o,moveableTarget:a[i]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function Or(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),O(O({},t),{datas:e})}var Ih=an("edgeDraggable",{css:[`.edge.edgeDraggable.line {
    cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?Jl(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,a=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!a?!1:!r.draggable&&Pt(a,Q("direction"))&&Pt(a,Q("edge"))&&Pt(a,Q("edgeDraggable"))},dragStart:function(t,e){return Zt.dragStart(t,Or(e))},drag:function(t,e){return Zt.drag(t,Or(e))},dragEnd:function(t,e){return Zt.dragEnd(t,Or(e))},dragGroupCondition:function(t,e){var n,r=t.props,a=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!a?!1:!r.draggable&&Pt(a,Q("direction"))&&Pt(a,Q("line"))},dragGroupStart:function(t,e){return Zt.dragGroupStart(t,Or(e))},dragGroup:function(t,e){return Zt.dragGroup(t,Or(e))},dragGroupEnd:function(t,e){return Zt.dragGroupEnd(t,Or(e))},unset:function(t){return Zt.unset(t)}}),Dc={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},oo=[yc,cc,Jv,fv,Zt,Ih,Zi,ih,sh,ah,fh,ph,uh,wh,Dh,Rh,io,Dc,Nh,lc,Ec],Bh=oo.reduce(function(t,e){return O(O({},t),"events"in e?e.events:{})},{}),_h=oo.reduce(function(t,e){return O(O({},t),e.props)},{}),zh=ov(Bh),Gh=Object.keys(zh),Fh=Object.keys(_h);function wc(t,e){var n=t[0],r=t[1],a=t[2];return(n*e[0]+r*e[1]+a)/Math.sqrt(n*n+r*r)}function ma(t,e){var n=t[0],r=t[1];return-n*e[0]-r*e[1]}function kc(t,e){return Math.max.apply(Math,t.map(function(n){var r=n[0],a=n[1],i=n[2],s=n[3];return Math.max(r[e],a[e],i[e],s[e])}))}function Mc(t,e){return Math.min.apply(Math,t.map(function(n){var r=n[0],a=n[1],i=n[2],s=n[3];return Math.min(r[e],a[e],i[e],s[e])}))}function Kh(t,e){var n,r=[0,0],a=[0,0],i=[0,0],s=[0,0],o=0,l=0;if(!t.length)return{pos1:r,pos2:a,pos3:i,pos4:s,minX:0,minY:0,maxX:0,maxY:0,width:o,height:l,rotation:e};var c=rt(e,$t);if(c%90){var u=c/180*Math.PI,d=Math.tan(u),f=-1/d,p=[Si,Js],v=[[0,0],[0,0]],h=[Si,Js],g=[[0,0],[0,0]];t.forEach(function(z){z.forEach(function(N){var F=wc([-d,1,0],N),W=wc([-f,1,0],N);p[0]>F&&(v[0]=N,p[0]=F),p[1]<F&&(v[1]=N,p[1]=F),h[0]>W&&(g[0]=N,h[0]=W),h[1]<W&&(g[1]=N,h[1]=W)})});var m=v[0],E=v[1],b=g[0],C=g[1],D=[-d,1,ma([-d,1],m)],x=[-d,1,ma([-d,1],E)],S=[-f,1,ma([-f,1],b)],M=[-f,1,ma([-f,1],C)];n=[[D,S],[D,M],[x,S],[x,M]].map(function(z){var N=z[0],F=z[1];return Kn(N,F)[0]}),r=n[0],a=n[1],i=n[2],s=n[3],o=h[1]-h[0],l=p[1]-p[0]}else{var w=Mc(t,0),T=Mc(t,1),R=kc(t,0),k=kc(t,1);if(r=[w,T],a=[R,T],i=[w,k],s=[R,k],o=R-w,l=k-T,c%180){var P=[i,r,s,a];r=P[0],a=P[1],i=P[2],s=P[3],o=k-T,l=R-w}}if(c%360>180){var P=[s,i,a,r];r=P[0],a=P[1],i=P[2],s=P[3]}var L=ze([r,a,i,s]),A=L.minX,I=L.minY,_=L.maxX,B=L.maxY;return{pos1:r,pos2:a,pos3:i,pos4:s,width:o,height:l,minX:A,minY:I,maxX:_,maxY:B,rotation:e}}function Tc(t,e){var n=e.map(function(r){if(wt(r)){var a=Tc(t,r),i=a.length;return i>1?a:i===1?a[0]:null}else{var s=ke(t,function(o){var l=o.manager;return l.props.target===r});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return n.length===1&&wt(n[0])?n[0]:n}var Wh=function(t){xr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.differ=new Ks,r.moveables=[],r.transformOrigin="50% 50%",r.renderGroupRects=[],r._targetGroups=[],r._hasFirstTargets=!1,r}var n=e.prototype;return n.componentDidMount=function(){t.prototype.componentDidMount.call(this)},n.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},n.getTargets=function(){return this.props.targets},n.updateRect=function(r,a,i){var s;i===void 0&&(i=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;this.moveables.forEach(function(tt){tt.updateRect(r,!1,!1)});var l=this.props,c=this.moveables,u=o.target||l.target,d=c.map(function(tt){return{finded:!1,manager:tt}}),f=this.props.targetGroups||[],p=Tc(d,f);p.push.apply(p,d.filter(function(tt){var et=tt.finded;return!et}).map(function(tt){var et=tt.manager;return et}));var v=[],h=!a||r!==""&&l.updateGroup,g=l.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=(s=this.props.persistData)===null||s===void 0?void 0:s.rotation;m!=null&&(g=m)}function E(tt,et,H){var Z=tt.map(function(it){if(wt(it)){var lt=E(it,et),ft=[lt.pos1,lt.pos2,lt.pos3,lt.pos4];return v.push(lt),{poses:ft,rotation:lt.rotation}}else return{poses:Jt(it.state),rotation:it.getRotation()}}),ut=Z.map(function(it){var lt=it.rotation;return lt}),at=0,Ot=ut[0],pt=ut.every(function(it){return Math.abs(Ot-it)<.1});h?at=pt?Ot:g:at=!H&&pt?Ot:et;var dt=Z.map(function(it){var lt=it.poses;return lt}),gt=Kh(dt,at);return gt}var b=E(p,this.rotation,!0);h&&(this.rotation=b.rotation,this.transformOrigin=l.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=f,this.renderGroupRects=v;var C=this.transformOrigin,D=this.rotation,x=this.scale,S=b.width,M=b.height,w=b.minX,T=b.minY,R=dv([[0,0],[S,0],[0,M],[S,M]],uv(C,S,M),this.rotation/180*Math.PI),k=ze(R.result),P=k.minX,L=k.minY,A=" rotate(".concat(D,"deg)")+" scale(".concat(x[0]>=0?1:-1,", ").concat(x[1]>=0?1:-1,")"),I="translate(".concat(-P,"px, ").concat(-L,"px)").concat(A);this.controlBox.getElement().style.transform="translate3d(".concat(w,"px, ").concat(T,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(C,";")+"width:".concat(S,"px;height:").concat(M,"px;")+"transform: ".concat(I),o.width=S,o.height=M;var _=this.getContainer(),B=ao(this.controlBox.getElement(),u,this.controlBox.getElement(),this.getContainer(),this._rootContainer||_,[]),z=[B.left,B.top],N=Jt(B),F=N[0],W=N[1],$=N[2],V=N[3],K=ze([F,W,$,V]),X=[K.minX,K.minY],q=x[0]*x[1]>0?1:-1;B.pos1=j(F,X),B.pos2=j(W,X),B.pos3=j($,X),B.pos4=j(V,X),B.left=w-B.left+X[0],B.top=T-B.top+X[1],B.origin=j(ct(z,B.origin),X),B.beforeOrigin=j(ct(z,B.beforeOrigin),X),B.originalBeforeOrigin=ct(z,B.originalBeforeOrigin),B.transformOrigin=j(ct(z,B.transformOrigin),X),u.style.transform="translate(".concat(-P-X[0],"px, ").concat(-L-X[1],"px)")+A,this.updateState(O(O({},B),{posDelta:X,direction:q,beforeDirection:q}),i)},n.getRect=function(){return O(O({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},n.triggerEvent=function(r,a,i){if(i||r.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,r,a);this._emitter.trigger(r,a)},n.updateAbles=function(){t.prototype.updateAbles.call(this,J(J([],this.props.ables,!0),[io],!1),"Group")},n._updateTargets=function(){t.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},n._updateEvents=function(){var r=this.state,a=this.props,i=this._prevTarget,s=a.dragTarget||this.areaElement;i!==s&&(kr(this,"targetGesto"),kr(this,"controlGesto"),r.target=null),r.target||(r.target=this.areaElement,this.controlBox.getElement().style.display="block"),r.target&&(this.targetGesto||(this.targetGesto=bc(this,s,"Group")),this.controlGesto||(this.controlGesto=no(this,this.controlBox.getElement(),"controlAbles","GroupControl")));var o=!Ai(r.container,a.container);o&&(r.container=a.container);var l=a.targets,c=this.differ.update(l),u=c.added,d=c.changed,f=c.removed,p=u.length||f.length;(o||p||this.transformOrigin!==(a.defaultGroupOrigin||"50% 50%")||d.length||l.length&&!Rl(this._targetGroups,a.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!p},n._updateObserver=function(){},e.defaultProps=O(O({},Rr.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(Rr),Vh=function(t){xr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.moveables=[],r}var n=e.prototype;return n.render=function(){var r=this,a,i=this.props,s=i.cspNonce,o=i.cssStyled,l=i.persistData,c=i.targets||[],u=c.length,d=this.isUnmounted||!u,f=(a=l?.children)!==null&&a!==void 0?a:[];return d&&!u&&f.length?c=f.map(function(){return null}):d||(f=[]),se(o,{cspNonce:s,ref:me(this,"controlBox"),className:Q("control-box")},c.map(function(p,v){return se(Rr,O({key:"moveable"+v,ref:is(r,"moveables",v)},r.props,{target:p,wrapperMoveable:r,isWrapperMounted:r.isMoveableMounted,persistData:f[v]}))}))},n.componentDidUpdate=function(){},n.getTargets=function(){return this.props.targets},n.updateRect=function(r,a,i){i===void 0&&(i=!0),this.moveables.forEach(function(s){s.updateRect(r,a,i)})},n.getRect=function(){return O(O({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},n.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},n.dragStart=function(){return this},n.hitTest=function(){return 0},n.isInside=function(){return!1},n.isDragging=function(){return!1},n.updateRenderPoses=function(){},n.checkUpdate=function(){},n.triggerEvent=function(){},n.updateAbles=function(){},n._updateEvents=function(){},n._updateObserver=function(){},e}(Rr);function Rc(t,e){var n=[];return t.forEach(function(r){if(r){if(Ht(r)){e[r]&&n.push.apply(n,e[r]);return}wt(r)?n.push.apply(n,Rc(r,e)):n.push(r)}}),n}function Oc(t,e){var n=[];return t.forEach(function(r){if(r){if(Ht(r)){e[r]&&n.push.apply(n,e[r]);return}wt(r)?n.push(Oc(r,e)):n.push(r)}}),n}function Pc(t,e){return t.length!==e.length||t.some(function(n,r){var a=e[r];return!n&&!a?!1:n!=a?wt(n)&&wt(a)?Pc(n,a):!0:!1})}var Lc=function(t){xr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.refTargets=[],r.selectorMap={},r._differ=new Ks,r._elementTargets=[],r._onChangeTargets=null,r}var n=e.prototype;return e.makeStyled=function(){var r={},a=this.getTotalAbles();a.forEach(function(s){var o=s.css;o&&o.forEach(function(l){r[l]=!0})});var i=Ie(r).join(`
`);this.defaultStyled=js("div",Xd(Ci,Pp+i))},e.getTotalAbles=function(){return J([cc,io,Dc,lc],this.defaultAbles,!0)},n.render=function(){var r,a=this.constructor;a.defaultStyled||a.makeStyled();var i=this.props,s=i.ables,o=i.props,l=wp(i,["ables","props"]),c=this._updateRefs(!0),u=Rc(c,this.selectorMap),d=u.length>1,f=a.getTotalAbles(),p=J(J([],f,!0),s||[],!0),v=O(O(O({},l),o||{}),{ables:p,cssStyled:a.defaultStyled,customStyledMap:a.customStyledMap});this._elementTargets=u;var h=null,g=this.moveable,m=l.persistData;if(m?.children&&(d=!0),d){if(l.individualGroupable)return se(Vh,O({key:"individual-group",ref:me(this,"moveable")},v,{target:null,targets:u}));var E=Oc(c,this.selectorMap);if(g&&!g.props.groupable&&!g.props.individualGroupable){var b=g.props.target;b&&u.indexOf(b)>-1&&(h=O({},g.state))}return se(Wh,O({key:"group",ref:me(this,"moveable")},v,(r=l.groupableProps)!==null&&r!==void 0?r:{},{target:null,targets:u,targetGroups:E,firstRenderState:h}))}else{var C=u[0];if(g&&(g.props.groupable||g.props.individualGroupable)){var D=g.moveables||[],x=ke(D,function(S){return S.props.target===C});x&&(h=O({},x.state))}return se(Rr,O({key:"single",ref:me(this,"moveable")},v,{target:C,firstRenderState:h}))}},n.componentDidMount=function(){this._checkChangeTargets(),this._updateRefs()},n.componentDidUpdate=function(){this._checkChangeTargets()},n.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},n.getTargets=function(){var r,a;return(a=(r=this.moveable)===null||r===void 0?void 0:r.getTargets())!==null&&a!==void 0?a:[]},n.updateSelectors=function(){this.selectorMap={},this._updateRefs()},n.waitToChangeTarget=function(){var r=this,a;return this._onChangeTargets=function(){r._onChangeTargets=null,a()},new Promise(function(i){a=i})},n.waitToChangeTargets=function(){return this.waitToChangeTarget()},n.getManager=function(){return this.moveable},n._updateRefs=function(r){var a=this.refTargets,i=Bi(this.props.target||this.props.targets),s=typeof document<"u",o=Pc(a,i),l=this.selectorMap,c={};return this.refTargets.forEach(function u(d){if(Ht(d)){var f=l[d];f?c[d]=l[d]:s&&(o=!0,c[d]=[].slice.call(document.querySelectorAll(d)))}else wt(d)&&d.forEach(u)}),this.refTargets=i,this.selectorMap=c,!r&&o&&this.forceUpdate(),i},n._checkChangeTargets=function(){var r,a,i,s=this._differ.update(this._elementTargets),o=s.added,l=s.removed,c=o.length||l.length;c&&((a=(r=this.props).onChangeTargets)===null||a===void 0||a.call(r,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this)),this._updateRefs()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,kp([Zd(el)],e.prototype,"moveable",void 0),e}(Za),Hh=function(t){xr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=oo,e}(Lc);function X1(t){var e;return e=function(n){xr(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r}(Lc),e.defaultAbles=t,e}var Yh=Hh;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var so=function(t,e){return so=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},so(t,e)};function lo(t,e){so(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var vn=function(){return vn=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},vn.apply(this,arguments)};function $h(t,e,n,r){var a=arguments.length,i=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(i=(a<3?s(i):a>3?s(e,n,i):s(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i}var Xh=function(t){lo(e,t);function e(r){var a=t.call(this,r)||this;return a.state={},a.state=a.props,a}var n=e.prototype;return n.render=function(){return Af(se(Yh,vn({ref:me(this,"moveable")},this.state)),this.state.parentElement)},e}(Xa),Zh=Fh,Uh=el,jh=Gh,Z1=null,Qh=function(t){lo(e,t);function e(r,a){a===void 0&&(a={});var i=t.call(this)||this;i.tempElement=document.createElement("div");var s=vn({},a),o={};jh.forEach(function(c){o[za("on ".concat(c))]=function(u){return i.trigger(c,u)}}),Ts(se(Xh,vn({ref:me(i,"innerMoveable"),parentElement:r},s,o)),i.tempElement);var l=s.target;return wt(l)&&l.length>1&&i.updateRect(),i}var n=e.prototype;return n.setState=function(r,a){this.innerMoveable.setState(r,a)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r){var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r)},n.destroy=function(){Ts(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=$h([Aa(Uh,function(r,a){r[a]||(r[a]=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var o=this.getMoveable();if(!(!o||!o[a]))return o[a].apply(o,i)})}),Aa(Zh,function(r,a){Object.defineProperty(r,a,{get:function(){return this.getMoveable().props[a]},set:function(i){var s;this.setState((s={},s[a]=i,s))},enumerable:!0,configurable:!0})})],e),e}(rn),qh=function(t){lo(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Qh);function U1(t,e,n){return getElementInfo$1(t,e,n)}function j1(t,e){return makeAble$1(t,e)}var Ac=G(64365),Nc=G(81517),Ic=G(70472),co=function(t,e){return co=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},co(t,e)};function Jh(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");co(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var tg="object",eg="string";function Bc(t){return t&&typeof t===tg}function _c(t){return Array.isArray(t)}function zc(t){return typeof t===eg}function rg(t,e,n){n===void 0&&(n=-1);for(var r=t.length,a=0;a<r;++a)if(e(t[a],a,t))return a;return n}function uo(t,e,n,r){t.addEventListener(e,n,r)}function fo(t,e,n,r){t.removeEventListener(e,n,r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var po=function(){return po=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},po.apply(this,arguments)};function ng(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}var ag=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(Bc(n))for(var a in n)this.on(a,n[a]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(Bc(n))for(var a in n)this.off(a);else if(!r)this._events[n]=[];else{var i=this._events[n];if(i){var s=rg(i,function(o){return o.listener===r});s>-1&&i.splice(s,1)}}return this},e.once=function(n,r){var a=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(i){a._addEvent(n,i,{once:!0})})},e.emit=function(n,r){var a=this;r===void 0&&(r={});var i=this._events[n];if(!n||!i)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,ng(i).forEach(function(o){o.listener(r),o.once&&a.off(n,o.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,a){var i=this._events;i[n]=i[n]||[];var s=i[n];s.push(po({listener:r},a))},t}();function ig(t,e){return e={exports:{}},t(e,e.exports),e.exports}var hn=ig(function(t,e){function n(l){if(l&&typeof l=="object"){var c=l.which||l.keyCode||l.charCode;c&&(l=c)}if(typeof l=="number")return s[l];var u=String(l),d=r[u.toLowerCase()];if(d)return d;var d=a[u.toLowerCase()];if(d)return d;if(u.length===1)return u.charCodeAt(0)}n.isEventKey=function(c,u){if(c&&typeof c=="object"){var d=c.which||c.keyCode||c.charCode;if(d==null)return!1;if(typeof u=="string"){var f=r[u.toLowerCase()];if(f)return f===d;var f=a[u.toLowerCase()];if(f)return f===d}else if(typeof u=="number")return u===d;return!1}},e=t.exports=n;var r=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=e.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(i=97;i<123;i++)r[String.fromCharCode(i)]=i-32;for(var i=48;i<58;i++)r[i-48]=i;for(i=1;i<13;i++)r["f"+i]=i+111;for(i=0;i<10;i++)r["numpad "+i]=i+96;var s=e.names=e.title={};for(i in r)s[r[i]]=i;for(var o in a)r[o]=a[o]}),Q1=hn.code,q1=hn.codes,J1=hn.aliases,og=hn.names,tm=hn.title,Gc={"+":"plus","left command":"meta","right command":"meta"},Fc={shift:1,ctrl:2,alt:3,meta:4};function Kc(t,e){var n=(og[t]||e||"").toLowerCase();for(var r in Gc)n=n.replace(r,Gc[r]);return n.replace(/\s/g,"")}function Wc(t,e){e===void 0&&(e=Kc(t.keyCode,t.key));var n=sg(t);return n.indexOf(e)===-1&&n.push(e),n.filter(Boolean)}function sg(t){var e=[t.shiftKey&&"shift",t.ctrlKey&&"ctrl",t.altKey&&"alt",t.metaKey&&"meta"];return e.filter(Boolean)}function Vc(t){var e=t.slice();return e.sort(function(n,r){var a=Fc[n]||5,i=Fc[r]||5;return a-i}),e}var Hc,lg=function(t){Jh(e,t);function e(r){r===void 0&&(r=window);var a=t.call(this)||this;return a.container=r,a.ctrlKey=!1,a.altKey=!1,a.shiftKey=!1,a.metaKey=!1,a.clear=function(){return a.ctrlKey=!1,a.altKey=!1,a.shiftKey=!1,a.metaKey=!1,a},a.keydownEvent=function(i){a.triggerEvent("keydown",i)},a.keyupEvent=function(i){a.triggerEvent("keyup",i)},a.blur=function(){a.clear(),a.trigger("blur")},uo(r,"blur",a.blur),uo(r,"keydown",a.keydownEvent),uo(r,"keyup",a.keyupEvent),a}var n=e.prototype;return Object.defineProperty(e,"global",{get:function(){return Hc||(Hc=new e)},enumerable:!1,configurable:!0}),e.setGlobal=function(){return this.global},n.destroy=function(){var r=this.container;this.clear(),this.off(),fo(r,"blur",this.blur),fo(r,"keydown",this.keydownEvent),fo(r,"keyup",this.keyupEvent)},n.keydown=function(r,a){return this.addEvent("keydown",r,a)},n.offKeydown=function(r,a){return this.removeEvent("keydown",r,a)},n.offKeyup=function(r,a){return this.removeEvent("keyup",r,a)},n.keyup=function(r,a){return this.addEvent("keyup",r,a)},n.addEvent=function(r,a,i){return _c(a)?this.on(r+"."+Vc(a).join("."),i):zc(a)?this.on(r+"."+a,i):this.on(r,a),this},n.removeEvent=function(r,a,i){return _c(a)?this.off(r+"."+Vc(a).join("."),i):zc(a)?this.off(r+"."+a,i):this.off(r,a),this},n.triggerEvent=function(r,a){this.ctrlKey=a.ctrlKey,this.shiftKey=a.shiftKey,this.altKey=a.altKey,this.metaKey=a.metaKey;var i=Kc(a.keyCode,a.key),s=i==="ctrl"||i==="shift"||i==="meta"||i==="alt",o={key:i,isToggle:s,inputEvent:a,keyCode:a.keyCode,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey,metaKey:a.metaKey};this.trigger(r,o),this.trigger(r+"."+i,o);var l=Wc(a,i);l.length>1&&this.trigger(r+"."+l.join("."),o)},e}(ag);const cg=lg;var vo=function(t,e){return vo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},vo(t,e)};function Yc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");vo(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var At=function(){return At=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},At.apply(this,arguments)};function ug(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function dg(t,e,n,r){var a=arguments.length,i=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(i=(a<3?s(i):a>3?s(e,n,i):s(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i}function gn(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,i;r<a;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function fg(t){if("touches"in t){var e=t.touches[0]||t.changedTouches[0];return{clientX:e.clientX,clientY:e.clientY}}else return{clientX:t.clientX,clientY:t.clientY}}function pg(t){if(typeof Map>"u")return t.filter(function(n,r){return t.indexOf(n)===r});var e=new Map;return t.filter(function(n){return e.has(n)?!1:(e.set(n,!0),!0)})}function vg(t,e,n){var r=ue(t);return r.elementFromPoint&&r.elementFromPoint(e,n)||null}function $c(t,e,n){var r=t.tag,a=t.children,i=t.attributes,s=t.className,o=t.style,l=e||ue(n).createElement(r);for(var c in i)l.setAttribute(c,i[c]);var u=l.children;if(a.forEach(function(f,p){$c(f,u[p],l)}),s&&s.split(/\s+/g).forEach(function(f){f&&!Pt(l,f)&&Ka(l,f)}),o){var d=l.style;for(var c in o)d[c]=o[c]}return!e&&n&&n.appendChild(l),l}function hg(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=e||{},i=a.className,s=i===void 0?"":i,o=a.style,l=o===void 0?{}:o,c=ug(a,["className","style"]);return{tag:t,className:s,style:l,attributes:c,children:n}}function ho(t,e,n){t!==e&&n(t,e)}function Xc(t,e,n){var r;n===void 0&&(n=t.data.boundArea);var a=t.distX,i=a===void 0?0:a,s=t.distY,o=s===void 0?0:s,l=t.data,c=l.startX,u=l.startY;if(e>0){var d=Math.sqrt((i*i+o*o)/(1+e*e)),f=e*d;i=(i>=0?1:-1)*f,o=(o>=0?1:-1)*d}var p=Math.abs(i),v=Math.abs(o),h=i<0?c-n.left:n.right-c,g=o<0?u-n.top:n.bottom-u;r=hs([p,v],[0,0],[h,g],!!e),p=r[0],v=r[1],i=(i>=0?1:-1)*p,o=(o>=0?1:-1)*v;var m=Math.min(0,i),E=Math.min(0,o),b=c+m,C=u+E;return{left:b,top:C,right:b+p,bottom:C+v,width:p,height:v}}function ya(t){var e=t.getBoundingClientRect(),n=e.left,r=e.top,a=e.width,i=e.height;return{pos1:[n,r],pos2:[n+a,r],pos3:[n,r+i],pos4:[n+a,r+i]}}function Zc(t,e,n){var r=br(t,e),a=r.list,i=r.prevList,s=r.added,o=r.removed,l=r.maintained;return gn(gn(gn([],s.map(function(c){return a[c]}),!0),o.map(function(c){return i[c]}),!0),n?l.map(function(c){var u=c[1];return a[u]}):[],!0)}function Uc(t){for(var e=0,n=t.length,r=1;r<n;++r)e=Math.max(oe(t[r],t[r-1]),e);return e}var jc=Zs(`
:host {
    position: fixed;
    display: none;
    border: 1px solid #4af;
    background: rgba(68, 170, 255, 0.5);
    pointer-events: none;
    will-change: transform;
    z-index: 100;
}
`),Qc="selecto-selection ".concat(jc.className),qc=["className","boundContainer","selectableTargets","selectByClick","selectFromInside","continueSelect","continueSelectWithoutDeselect","toggleContinueSelect","toggleContinueSelectWithoutDeselect","keyContainer","hitRate","scrollOptions","checkInput","preventDefault","ratio","getElementRect","preventDragFromInside","rootContainer","dragCondition","clickBySelectEnd","checkOverflow","innerScrollOptions"],em=gn(["dragContainer","cspNonce","preventClickEventOnDrag","preventClickEventOnDragStart","preventRightClick"],qc,!0),rm={className:String,boundContainer:null,portalContainer:null,container:null,dragContainer:null,selectableTargets:Array,selectByClick:Boolean,selectFromInside:Boolean,continueSelect:Boolean,toggleContinueSelect:Array,toggleContinueSelectWithoutDeselect:Array,keyContainer:null,hitRate:Number,scrollOptions:Object,checkInput:Boolean,preventDefault:Boolean,cspNonce:String,ratio:Number,getElementRect:Function,preventDragFromInside:Boolean,rootContainer:Object,dragCondition:Function,clickBySelectEnd:Boolean,continueSelectWithoutDeselect:Boolean,preventClickEventOnDragStart:Boolean,preventClickEventOnDrag:Boolean,checkOverflow:Boolean,innerScrollOptions:Object},nm=null,am=null,gg=function(t){Yc(e,t);function e(r){r===void 0&&(r={});var a=t.call(this)||this;a.selectedTargets=[],a.dragScroll=new Vs,a._onDragStart=function(o,l){var c=o.data,u=o.clientX,d=o.clientY,f=o.inputEvent,p=a.options,v=p.selectFromInside,h=p.selectByClick,g=p.rootContainer,m=p.boundContainer,E=p.preventDragFromInside,b=E===void 0?!0:E,C=p.clickBySelectEnd,D=p.dragCondition;if(D&&!D(o)){o.stop();return}c.data={};var x=Be(a.container);c.innerWidth=x.innerWidth,c.innerHeight=x.innerHeight,a.findSelectableTargets(c),c.startSelectedTargets=a.selectedTargets,c.scaleMatrix=ii(),c.containerX=0,c.containerY=0;var S=a.container,M={left:-1/0,top:-1/0,right:1/0,bottom:1/0};if(g){var w=a.container.getBoundingClientRect();c.containerX=w.left,c.containerY=w.top,c.scaleMatrix=Zf(a.container,g)}if(m){var T=qt(m)&&"element"in m?At({left:!0,top:!0,bottom:!0,right:!0},m):{element:m,left:!0,top:!0,bottom:!0,right:!0},R=T.element,k=void 0;if(R){Ht(R)?k=ue(S).querySelector(R):R===!0?k=a.container:k=R;var P=k.getBoundingClientRect();T.left&&(M.left=P.left),T.top&&(M.top=P.top),T.right&&(M.right=P.right),T.bottom&&(M.bottom=P.bottom)}}c.boundArea=M;var L={left:u,top:d,right:u,bottom:d,width:0,height:0},A=[];if(!v||h&&!C){var I=a._findElement(l||f.target,c.selectableTargets);A=I?[I]:[]}var _=A.length>0,B=!v&&_;if(B&&!h)return o.stop(),!1;var z=f.type,N=z==="mousedown"||z==="touchstart",F=!o.isClick&&N?a.emit("dragStart",At(At({},o),{data:c.data})):!0;if(!F)return o.stop(),!1;if(a.continueSelect?(A=Zc(a.selectedTargets,A,a.continueSelectWithoutDeselect),c.startPassedTargets=a.selectedTargets):c.startPassedTargets=[],a._select(A,L,o,!0,B&&h&&!C&&b),c.startX=u,c.startY=d,c.selectFlag=!1,c.preventDragFromInside=!1,f.target){var W=Gn(c.scaleMatrix,[u-c.containerX,d-c.containerY]);a.target.style.cssText+="position: ".concat(g?"absolute":"fixed",";")+"left:0px;top:0px;"+"transform: translate(".concat(W[0],"px, ").concat(W[1],"px)")}if(B&&h&&!C)f.preventDefault(),b&&(a._selectEnd(c.startSelectedTargets,c.startPassedTargets,L,o,!0),c.preventDragFromInside=!0);else{c.selectFlag=!0;var $=a.options,V=$.scrollOptions,K=$.innerScrollOptions,X=!1;if(K){for(var q=o.inputEvent,tt=q.target,et=null,H=tt;H&&H!==ue(S).body;){var Z=getComputedStyle(H).overflow!=="visible";if(Z){et=H;break}H=H.parentElement}et&&(c.innerScrollOptions=At({container:et,checkScrollEvent:!0},K===!0?{}:K),a.dragScroll.dragStart(o,c.innerScrollOptions),X=!0)}!X&&V&&V.container&&a.dragScroll.dragStart(o,V),C&&(c.selectFlag=!1,o.preventDrag())}return!0},a._onDrag=function(o){if(o.data.selectFlag){var l=a.scrollOptions,c=o.data.innerScrollOptions,u=c||l?.container;if(u&&!o.isScroll&&a.dragScroll.drag(o,c||l))return}a._checkSelected(o)},a._onDragEnd=function(o){var l=o.data,c=o.inputEvent,u=Xc(o,a.options.ratio),d=l.selectFlag,f=a.container;if(c&&a.emit("dragEnd",At(At({isDouble:!!o.isDouble,isClick:!!o.isClick,isDrag:!1,isSelect:d},o),{data:l.data,rect:u})),a.target.style.cssText+="display: none;",d)l.selectFlag=!1,a.dragScroll.dragEnd();else if(a.selectByClick&&a.clickBySelectEnd){var p=a._findElement(c?.target||vg(f,o.clientX,o.clientY),l.selectableTargets);a._select(p?[p]:[],u,o)}l.preventDragFromInside||a._selectEnd(l.startSelectedTargets,l.startPassedTargets,u,o)},a._onKeyDown=function(o){var l=a.options,c=!1;if(!a._keydownContinueSelect){var u=a._sameCombiKey(o,l.toggleContinueSelect);a._keydownContinueSelect=u,c||(c=u)}if(!a._keydownContinueSelectWithoutDeselection){var u=a._sameCombiKey(o,l.toggleContinueSelectWithoutDeselect);a._keydownContinueSelectWithoutDeselection=u,c||(c=u)}c&&a.emit("keydown",{keydownContinueSelect:a._keydownContinueSelect,keydownContinueSelectWithoutDeselection:a._keydownContinueSelectWithoutDeselection})},a._onKeyUp=function(o){var l=a.options,c=!1;if(a._keydownContinueSelect){var u=a._sameCombiKey(o,l.toggleContinueSelect,!0);a._keydownContinueSelect=!u,c||(c=u)}if(a._keydownContinueSelectWithoutDeselection){var u=a._sameCombiKey(o,l.toggleContinueSelectWithoutDeselect,!0);a._keydownContinueSelectWithoutDeselection=!u,c||(c=u)}c&&a.emit("keyup",{keydownContinueSelect:a._keydownContinueSelect,keydownContinueSelectWithoutDeselection:a._keydownContinueSelectWithoutDeselection})},a._onBlur=function(){(a._keydownContinueSelect||a._keydownContinueSelectWithoutDeselection)&&(a._keydownContinueSelect=!1,a._keydownContinueSelectWithoutDeselection=!1,a.emit("keyup",{keydownContinueSelect:a._keydownContinueSelect,keydownContinueSelectWithoutDeselection:a._keydownContinueSelectWithoutDeselection}))},a._onDocumentSelectStart=function(o){var l=ue(a.container);if(a.gesto.isFlag()){var c=a.dragContainer;c===Be(a.container)&&(c=l.documentElement);var u=Es(c)?[c]:[].slice.call(c),d=o.target;u.some(function(f){if(f===d||f.contains(d))return o.preventDefault(),!0})}},a.target=r.portalContainer;var i=r.container;a.options=At({className:"",portalContainer:null,container:null,dragContainer:null,selectableTargets:[],selectByClick:!0,selectFromInside:!0,clickBySelectEnd:!1,hitRate:100,continueSelect:!1,continueSelectWithoutDeselect:!1,toggleContinueSelect:null,toggleContinueSelectWithoutDeselect:null,keyContainer:null,scrollOptions:void 0,checkInput:!1,preventDefault:!1,boundContainer:!1,preventDragFromInside:!0,dragCondition:null,rootContainer:null,checkOverflow:!1,innerScrollOptions:!1,getElementRect:ya,cspNonce:"",ratio:0},r);var s=a.options.portalContainer;return s&&(i=s.parentElement),a.container=i||document.body,a.initElement(),a.initDragScroll(),a.setKeyController(),a}var n=e.prototype;return n.setSelectedTargets=function(r){var a=this.selectedTargets,i=br(a,r),s=i.added,o=i.removed,l=i.prevList,c=i.list;return this.selectedTargets=r,{added:s.map(function(u){return c[u]}),removed:o.map(function(u){return l[u]}),beforeSelected:a,selected:r}},n.setSelectedTargetsByPoints=function(r,a){var i=Math.min(r[0],a[0]),s=Math.min(r[1],a[1]),o=Math.max(r[0],a[0]),l=Math.max(r[1],a[1]),c={left:i,top:s,right:o,bottom:l,width:o-i,height:l-s},u={ignoreClick:!0};this.findSelectableTargets(u);var d=this.hitTest(c,u),f=this.setSelectedTargets(d);return At(At({},f),{rect:c})},n.selectTargetsByPoints=function(r,a){var i=new MouseEvent("mousedown",{clientX:r[0],clientY:r[1],cancelable:!0,bubbles:!0}),s=new MouseEvent("mousemove",{clientX:a[0],clientY:a[1],cancelable:!0,bubbles:!0}),o=new MouseEvent("mousemove",{clientX:a[0],clientY:a[1],cancelable:!0,bubbles:!0}),l=this.gesto,c=l.onDragStart(i);c!==!1&&(l.onDrag(s),l.onDragEnd(o))},n.getSelectedTargets=function(){return this.selectedTargets},n.triggerDragStart=function(r){return this.gesto.triggerDragStart(r),this},n.destroy=function(){var r;this.off(),this.keycon&&this.keycon.destroy(),this.gesto.unset(),this.injectResult.destroy(),this.dragScroll.dragEnd(),_t(document,"selectstart",this._onDocumentSelectStart),this.options.portalContainer||(r=this.target.parentElement)===null||r===void 0||r.removeChild(this.target),this.keycon=null,this.gesto=null,this.injectResult=null,this.target=null,this.container=null,this.options=null},n.getElementPoints=function(r){var a=this.getElementRect||ya,i=a(r),s=[i.pos1,i.pos2,i.pos4,i.pos3];if(a!==ya){var o=r.getBoundingClientRect();return si(s,o)}return s},n.getSelectableElements=function(){var r=this.container,a=[];return this.options.selectableTargets.forEach(function(i){if(An(i)){var s=i();s&&a.push.apply(a,[].slice.call(s))}else if(Es(i))a.push(i);else if(qt(i))a.push(i.value||i.current);else{var o=[].slice.call(ue(r).querySelectorAll(i));a.push.apply(a,o)}}),a},n.checkScroll=function(){if(this.gesto.isFlag()){var r=this.scrollOptions,a=this.gesto.getEventData().innerScrollOptions,i=a||r?.container;i&&this.dragScroll.checkScroll(At({inputEvent:this.gesto.getCurrentEvent()},a||r))}},n.findSelectableTargets=function(r){var a=this;r===void 0&&(r=this.gesto.getEventData());var i=this.getSelectableElements(),s=i.map(function(d){return a.getElementPoints(d)});r.selectableTargets=i,r.selectablePoints=s,r.selectableParentMap=null;var o=this.options,l=o.checkOverflow||o.innerScrollOptions,c=ue(this.container);if(l){var u=new Map;r.selectableInnerScrollParentMap=u,r.selectableInnerScrollPathsList=i.map(function(d,f){for(var p=d.parentElement,v=[],h=[],g=function(){var m=u.get(p);if(!m){var E=getComputedStyle(p).overflow!=="visible";if(E){var b=ya(p);m={parentElement:p,indexes:[],points:[b.pos1,b.pos2,b.pos4,b.pos3],paths:gn([],h,!0)},v.push(p),v.forEach(function(C){u.set(C,m)}),v=[]}}m?(p=m.parentElement,u.get(p).indexes.push(f),h.push(p)):v.push(p),p=p.parentElement};p&&p!==c.body;)g();return h})}return o.checkOverflow||(r.selectableInners=i.map(function(){return!0})),this._refreshGroups(r),i},n.clickTarget=function(r,a){var i=fg(r),s=i.clientX,o=i.clientY,l={data:{selectFlag:!1},clientX:s,clientY:o,inputEvent:r,isClick:!0,isTrusted:!1,stop:function(){return!1}};return this._onDragStart(l,a)&&this._onDragEnd(l),this},n.setKeyController=function(){var r=this.options,a=r.keyContainer,i=r.toggleContinueSelect,s=r.toggleContinueSelectWithoutDeselect;this.keycon&&(this.keycon.destroy(),this.keycon=null),(i||s)&&(this.keycon=new cg(a||Be(this.container)),this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on("blur",this._onBlur))},n.setClassName=function(r){this.options.className=r,this.target.setAttribute("class","".concat(Qc," ").concat(r||""))},n.setKeyEvent=function(){var r=this.options,a=r.toggleContinueSelect,i=r.toggleContinueSelectWithoutDeselect;!a&&!i||this.keycon||this.setKeyController()},n.setKeyContainer=function(r){var a=this,i=this.options;ho(i.keyContainer,r,function(){i.keyContainer=r,a.setKeyController()})},n.getContinueSelect=function(){var r=this.options,a=r.continueSelect,i=r.toggleContinueSelect;return!i||!this._keydownContinueSelect?a:!a},n.getContinueSelectWithoutDeselect=function(){var r=this.options,a=r.continueSelectWithoutDeselect,i=r.toggleContinueSelectWithoutDeselect;return!i||!this._keydownContinueSelectWithoutDeselection?a:!a},n.setToggleContinueSelect=function(r){var a=this,i=this.options;ho(i.toggleContinueSelect,r,function(){i.toggleContinueSelect=r,a.setKeyEvent()})},n.setToggleContinueSelectWithoutDeselect=function(r){var a=this,i=this.options;ho(i.toggleContinueSelectWithoutDeselect,r,function(){i.toggleContinueSelectWithoutDeselect=r,a.setKeyEvent()})},n.setPreventDefault=function(r){this.gesto.options.preventDefault=r},n.setCheckInput=function(r){this.gesto.options.checkInput=r},n.initElement=function(){var r=this.options,a=r.dragContainer,i=r.checkInput,s=r.preventDefault,o=r.preventClickEventOnDragStart,l=r.preventClickEventOnDrag,c=r.preventClickEventByCondition,u=r.preventRightClick,d=u===void 0?!0:u,f=r.className,p=this.container;this.target=$c(hg("div",{className:"".concat(Qc," ").concat(f||"")}),this.target,p);var v=this.target;this.dragContainer=typeof a=="string"?[].slice.call(ue(p).querySelectorAll(a)):a||this.target.parentNode,this.gesto=new Xs(this.dragContainer,{checkWindowBlur:!0,container:Be(p),checkInput:i,preventDefault:s,preventClickEventOnDragStart:o,preventClickEventOnDrag:l,preventClickEventByCondition:c,preventRightClick:d}).on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd}),Gt(document,"selectstart",this._onDocumentSelectStart),this.injectResult=jc.inject(v,{nonce:this.options.cspNonce})},n.hitTest=function(r,a,i){var s=this.options,o=s.hitRate,l=s.selectByClick,c=r.left,u=r.top,d=r.right,f=r.bottom,p=a.innerGroups,v=a.innerWidth,h=a.innerHeight,g=i?.clientX,m=i?.clientY,E=a.ignoreClick,b=[[c,u],[d,u],[d,f],[c,f]],C=function(_,B){var z=je(typeof o=="function"?"".concat(o(B)):"".concat(o)),N=E?!1:Fn([g,m],_);if(l&&N)return!0;var F=di(b,_);if(!F.length)return!1;var W=en(F),$=0;if(W===0&&en(_)===0?($=Uc(_),W=Uc(F)):$=en(_),z.unit==="px")return W>=z.value;var V=In(Math.round(W/$*100),0,100);return V>=Math.min(100,z.value)},D=a.selectableTargets,x=a.selectablePoints,S=a.selectableInners;if(!p)return D.filter(function(_,B){return S[B]?C(x[B],D[B]):!1});for(var M=[],w=Math.floor(c/v),T=Math.floor(d/v),R=Math.floor(u/h),k=Math.floor(f/h),P=w;P<=T;++P){var L=p[P];if(L)for(var A=R;A<=k;++A){var I=L[A];I&&I.forEach(function(_){var B=x[_],z=S[_],N=D[_];z&&C(B,N)&&M.push(N)})}}return pg(M)},n.initDragScroll=function(){var r=this;this.dragScroll.on("scrollDrag",function(a){var i=a.next;i(r.gesto.getCurrentEvent())}).on("scroll",function(a){var i=a.container,s=a.direction,o=r.gesto.getEventData().innerScrollOptions;o?r.emit("innerScroll",{container:i,direction:s}):r.emit("scroll",{container:i,direction:s})}).on("move",function(a){var i=a.offsetX,s=a.offsetY,o=a.inputEvent,l=r.gesto;if(!(!l||!l.isFlag())){var c=r.gesto.getEventData(),u=c.boundArea;c.startX-=i,c.startY-=s;var d=r.gesto.getEventData().innerScrollOptions,f=d?.container,p=!1;if(f){var v=c.selectableInnerScrollParentMap,h=v.get(f);h&&(h.paths.forEach(function(g){var m=v.get(g);m.points.forEach(function(E){E[0]-=i,E[1]-=s})}),h.indexes.forEach(function(g){c.selectablePoints[g].forEach(function(m){m[0]-=i,m[1]-=s})}),p=!0)}p||c.selectablePoints.forEach(function(g){g.forEach(function(m){m[0]-=i,m[1]-=s})}),r._refreshGroups(c),u.left-=i,u.right-=i,u.top-=s,u.bottom-=s,r.gesto.scrollBy(i,s,o.inputEvent),r._checkSelected(r.gesto.getCurrentEvent())}})},n._select=function(r,a,i,s,o){o===void 0&&(o=!1);var l=i.inputEvent,c=i.data,u=this.setSelectedTargets(r),d=br(c.startSelectedTargets,r),f=d.added,p=d.removed,v=d.prevList,h=d.list,g={startSelected:v,startAdded:f.map(function(m){return h[m]}),startRemoved:p.map(function(m){return v[m]})};s&&this.emit("selectStart",At(At(At({},u),g),{rect:a,inputEvent:l,data:c.data,isTrusted:i.isTrusted,isDragStartEnd:o})),(u.added.length||u.removed.length)&&this.emit("select",At(At(At({},u),g),{rect:a,inputEvent:l,data:c.data,isTrusted:i.isTrusted,isDragStartEnd:o}))},n._selectEnd=function(r,a,i,s,o){o===void 0&&(o=!1);var l=s.inputEvent,c=s.isDouble,u=s.data,d=l&&l.type,f=d==="mousedown"||d==="touchstart",p=br(r,this.selectedTargets),v=p.added,h=p.removed,g=p.prevList,m=p.list,E=br(a,this.selectedTargets),b=E.added,C=E.removed,D=E.prevList,x=E.list;this.emit("selectEnd",{startSelected:r,beforeSelected:a,selected:this.selectedTargets,added:v.map(function(S){return m[S]}),removed:h.map(function(S){return g[S]}),afterAdded:b.map(function(S){return x[S]}),afterRemoved:C.map(function(S){return D[S]}),isDragStart:f&&o,isDragStartEnd:f&&o,isClick:!!s.isClick,isDouble:!!c,rect:i,inputEvent:l,data:u.data,isTrusted:s.isTrusted})},n._checkSelected=function(r,a){a===void 0&&(a=Xc(r,this.options.ratio));var i=r.data,s=a.top,o=a.left,l=a.width,c=a.height,u=i.selectFlag,d=i.containerX,f=i.containerY,p=i.scaleMatrix,v=Gn(p,[o-d,s-f]),h=Gn(p,[l,c]),g=[];if(u){this.target.style.cssText+="display: block;left:0px;top:0px;"+"transform: translate(".concat(v[0],"px, ").concat(v[1],"px);")+"width:".concat(h[0],"px;height:").concat(h[1],"px;");var m=this.hitTest(a,i,r);g=Zc(i.startPassedTargets,m,this.continueSelect&&this.continueSelectWithoutDeselect)}var E=this.emit("drag",At(At({},r),{data:i.data,isSelect:u,rect:a}));if(E===!1){this.target.style.cssText+="display: none;",r.stop();return}u&&this._select(g,a,r)},n._sameCombiKey=function(r,a,i){if(!a)return!1;var s=Wc(r.inputEvent,r.key),o=[].concat(a),l=wt(o[0])?o:[o];if(i){var c=r.key;return l.some(function(u){return u.some(function(d){return d===c})})}return l.some(function(u){return u.every(function(d){return s.indexOf(d)>-1})})},n._findElement=function(r,a){for(var i=r;i&&!(a.indexOf(i)>-1);)i=i.parentElement;return i},n._refreshGroups=function(r){var a,i=r.innerWidth,s=r.innerHeight,o=r.selectablePoints;if(this.options.checkOverflow){var l=(a=this.gesto.getEventData().innerScrollOptions)===null||a===void 0?void 0:a.container,c=r.selectableInnerScrollParentMap,u=r.selectableInnerScrollPathsList;r.selectableInners=u.map(function(p,v){var h=!1;return p.every(function(g){if(h)return!0;if(g===l)return h=!0,!0;var m=c.get(g);if(m){var E=o[v],b=m.points,C=di(E,b);if(!C.length)return!1}return!0})})}if(!i||!s)r.innerGroups=null;else{var d=r.selectablePoints,f={};d.forEach(function(p,v){var h=1/0,g=-1/0,m=1/0,E=-1/0;p.forEach(function(D){var x=Math.floor(D[0]/i),S=Math.floor(D[1]/s);h=Math.min(x,h),g=Math.max(x,g),m=Math.min(S,m),E=Math.max(S,E)});for(var b=h;b<=g;++b)for(var C=m;C<=E;++C)f[b]=f[b]||{},f[b][C]=f[b][C]||[],f[b][C].push(v)}),r.innerGroups=f}},e=dg([Aa(qc,function(r,a){var i={enumerable:!0,configurable:!0,get:function(){return this.options[a]}},s=za("get ".concat(a));r[s]?i.get=function(){return this[s]()}:i.get=function(){return this.options[a]};var o=za("set ".concat(a));r[o]?i.set=function(c){this[o](c)}:i.set=function(c){this.options[a]=c},Object.defineProperty(r,a,i)})],e),e}(rn),mg=function(t){Yc(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(gg);const yg=mg;var mn=G(25142),yn=G(46046),Re=G(69707),Eg=G(19841);const bg=({scene:t,panel:e})=>{const n=e.state.openInlineEdit,[r,a]=(0,y.useState)(!1),[i,s]=(0,y.useState)({x:0,y:0}),o=Cg(),l=t.selecto?.getSelectedTargets(),c=e.context?.instanceState?.layer,u=(0,y.useCallback)(v=>{if(!(v instanceof MouseEvent))return;v.preventDefault(),e.setActivePanel(),v.currentTarget!==t.div&&(v.currentTarget instanceof HTMLElement||v.currentTarget instanceof SVGElement)&&t.select({targets:[v.currentTarget]}),s({x:v.pageX,y:v.pageY}),a(!0)},[t,e]);(0,y.useEffect)(()=>{t.selecto&&t.selecto.getSelectableElements().forEach(v=>{v.addEventListener("contextmenu",u)})},[u,t.selecto]),(0,y.useEffect)(()=>{t.div&&t.div.addEventListener("contextmenu",u)},[u,t.div]);const d=()=>{a(!1)},f=()=>{const v=!t.isPanelEditing&&y.createElement(Re.s,{label:n?"Close Editor":"Open Editor",onClick:()=>{t.inlineEditingCallback&&(n?e.closeInlineEdit():t.inlineEditingCallback()),d()},className:o.menuItem}),h=()=>{if(l?.length===1){const C=()=>{t.editModeEnabled.next(!0),d()},D=t.findElementByTarget(l[0]);return D&&D.item.hasEditMode&&y.createElement(Re.s,{label:"Edit",onClick:C,className:o.menuItem})}return null},g=Mn(t.shouldShowAdvancedTypes).options,m=()=>{const C=[],D=x=>{let S=i.y,M=i.x;if(t.div){const w=t.div.getBoundingClientRect();S=S-w.top,M=M-w.left}Pa(x,c,{...i,y:S,x:M})};return g.map(x=>{C.push(y.createElement(Re.s,{key:x.value,label:x.label??"Canvas item",onClick:()=>D(x)}))}),C},E=!t.isPanelEditing&&y.createElement(Re.s,{label:"Add item",className:o.menuItem,childItems:m(),customSubMenuContainerStyles:{maxHeight:"150px",overflowY:"auto"}}),b=!t.isPanelEditing&&y.createElement(Re.s,{label:"Set background",onClick:()=>{t.setBackgroundCallback&&t.setBackgroundCallback(i),d()},className:o.menuItem});return l&&l.length>=1?y.createElement(y.Fragment,null,h(),y.createElement(Re.s,{label:"Delete",onClick:()=>{p(Vt.Delete),d()},className:o.menuItem}),y.createElement(Re.s,{label:"Duplicate",onClick:()=>{p(Vt.Duplicate),d()},className:o.menuItem}),y.createElement(Re.s,{label:"Bring to front",onClick:()=>{p(Vt.MoveTop),d()},className:o.menuItem}),y.createElement(Re.s,{label:"Send to back",onClick:()=>{p(Vt.MoveBottom),d()},className:o.menuItem}),v):y.createElement(y.Fragment,null,v,b,E)},p=v=>{t.selection.pipe((0,Ic.P)()).subscribe(h=>{const g=h[0].parent;h.forEach(m=>{g.doAction(v,m)})}),setTimeout(()=>{t.addToSelection(),t.targetsToSelect.clear()})};return r?y.createElement("div",{onContextMenu:v=>{v.preventDefault(),d()}},y.createElement(Eg.x,{x:i.x,y:i.y,onClose:d,renderMenuItems:f,focusOnOpen:!1})):y.createElement(y.Fragment,null)},Cg=()=>({menuItem:(0,U.css)({maxWidth:"200px"})});var xg=G(57529),Sg=G(48925),Dg=G(10642),wg=G(88940);const kg=({scene:t})=>{const e=(0,St.wW)(Mg),n=()=>{t?.tooltipCallback&&t.tooltip&&t.tooltipCallback(void 0)},r=(0,y.createRef)(),{overlayProps:a}=(0,Sg.Ir)({onClose:n,isDismissable:!0},r),{dialogProps:i}=(0,xg.R)({},r),s=t.tooltip?.element;if(!s)return y.createElement(y.Fragment,null);const o=()=>s.data?.links&&s.data?.links.length>0&&y.createElement("div",null,y.createElement(De.wc,null,s.data?.links?.map((l,c)=>y.createElement(Ir.Qj,{key:c,icon:"external-link-alt",target:l.target,href:l.href,onClick:l.onClick,fill:"text",style:{width:"100%"}},l.title))));return y.createElement(y.Fragment,null,t.tooltip?.element&&t.tooltip.anchorPoint&&y.createElement(mn.h_,null,y.createElement(Dg.S,{position:{x:t.tooltip.anchorPoint.x,y:t.tooltip.anchorPoint.y},offset:{x:5,y:0},allowPointerEvents:t.tooltip.isOpen},y.createElement("section",{ref:r,...a,...i},t.tooltip.isOpen&&y.createElement(wg.P,{style:{zIndex:1},onClick:n}),y.createElement("div",{className:e.wrapper},o())))))},Mg=t=>({wrapper:(0,U.css)({marginTop:"20px",background:t.colors.background.primary})}),Jc="connectionControl",tu="connection anchor",go=8,lr=3,Tg=({setRef:t,handleMouseLeave:e})=>{const n=(0,y.useRef)(null),r=(0,St.wW)(Rg),a=2.5,i=5.5,s="data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI1cHgiIGhlaWdodD0iNXB4IiB2ZXJzaW9uPSIxLjEiPjxwYXRoIGQ9Im0gMCAwIEwgNSA1IE0gMCA1IEwgNSAwIiBzdHJva2Utd2lkdGg9IjIiIHN0eWxlPSJzdHJva2Utb3BhY2l0eTowLjQiIHN0cm9rZT0iI2ZmZmZmZiIvPjxwYXRoIGQ9Im0gMCAwIEwgNSA1IE0gMCA1IEwgNSAwIiBzdHJva2U9IiMyOWI2ZjIiLz48L3N2Zz4=",o=f=>{f.target instanceof HTMLImageElement&&n.current&&f.target.style&&(n.current.style.display="block",n.current.style.top=`calc(${f.target.style.top} - ${i}px + ${lr}px)`,n.current.style.left=`calc(${f.target.style.left} - ${i}px + ${lr}px)`)},l=()=>{n.current&&(n.current.style.display="none")},c=f=>{e(f)&&l()},u=[{x:-1,y:1},{x:-.5,y:1},{x:0,y:1},{x:.5,y:1},{x:1,y:1},{x:1,y:.5},{x:1,y:0},{x:1,y:-.5},{x:1,y:-1},{x:.5,y:-1},{x:0,y:-1},{x:-.5,y:-1},{x:-1,y:-1},{x:-1,y:-.5},{x:-1,y:0},{x:-1,y:.5}],d=(f=u)=>f.map(p=>{const v=`${p.x},${p.y}`,h={top:`calc(${-p.y*50+50}% - ${a}px - ${lr}px)`,left:`calc(${p.x*50+50}% - ${a}px - ${lr}px)`};return y.createElement("img",{id:v,ref:g=>{g&&g.style.setProperty("pointer-events","auto","important")},key:v,alt:tu,className:r.anchor,style:h,src:s,onMouseEnter:o})});return y.createElement("div",{className:r.root,ref:t},y.createElement("div",{className:r.mouseoutDiv,onMouseOut:c,onBlur:c}),y.createElement("div",{id:Jc,ref:n,className:r.highlightElement,onMouseLeave:l}),d())},Rg=t=>({root:(0,U.css)({position:"absolute",display:"none"}),mouseoutDiv:(0,U.css)({position:"absolute",margin:"-30px",width:"calc(100% + 60px)",height:"calc(100% + 60px)"}),anchor:(0,U.css)({padding:`${lr}px`,position:"absolute",cursor:"cursor",width:`calc(5px + 2 * ${lr}px)`,height:`calc(5px + 2 * ${lr}px)`,zIndex:100}),highlightElement:(0,U.css)({backgroundColor:"#00ff00",opacity:.3,position:"absolute",cursor:"cursor",pointerEvents:"auto",width:"16px",height:"16px",borderRadius:t.shape.radius.circle,display:"none",zIndex:110})});var eu=G(90857);let Og=0;const Pg=["input","textarea"],Lg=({setSVGRef:t,setLineRef:e,scene:n})=>{const r=(0,St.wW)(Ag),a=Date.now()+"_"+Og++,i=(0,y.useMemo)(()=>`connectionLineId-${a}`,[a]),s=(0,y.useMemo)(()=>`editorHead-${a}`,[a]),o=Pe.config.theme2.colors.text.primary,l=2,[c,u]=(0,y.useState)(void 0),d=(0,y.useRef)(c);(0,y.useEffect)(()=>{d.current=c}),(0,y.useEffect)(()=>{n.panel.context.instanceState?.selectedConnection&&u(n.panel.context.instanceState?.selectedConnection)},[n.panel.context.instanceState?.selectedConnection]);const f=g=>{const m=g.target;if(m instanceof HTMLElement&&!(Pg.indexOf(m.nodeName.toLowerCase())>-1)){if(g.keyCode===8||g.keyCode===46)d.current&&d.current.source&&(d.current.source.options.connections=d.current.source.options.connections?.filter(E=>E!==d.current?.info),d.current.source.onChange(d.current.source.options),u(void 0),n.connections.select(void 0),n.connections.updateState(),n.save());else return;document.removeEventListener("keyup",f),n.selecto.rootContainer.removeEventListener("click",p)}},p=g=>{const m=g.target;!(m instanceof SVGLineElement&&m.id===i)&&(u(void 0),n.connections.select(void 0))},v=g=>{n.isEditingEnabled&&(u(g),n.connections.select(g),document.addEventListener("keyup",f),n.selecto.rootContainer.addEventListener("click",p))},h=()=>n.connections.state.map((g,m)=>{const{source:E,target:b,info:C}=g,D=E.div?.getBoundingClientRect(),x=E.div?.parentElement,S=x?.getBoundingClientRect();if(!D||!x||!S)return;const{x1:M,y1:w,x2:T,y2:R}=Dd(D,S,C,b),{strokeColor:k,strokeWidth:P}=kd(C,n,l),L=c===g&&n.panel.context.instanceState.selectedConnection,A=n.isEditingEnabled?"grab":"",I={stroke:"#44aaff",strokeOpacity:.6,strokeWidth:P+5},_=`connectionHead-${a+Math.random()}`;return y.createElement("svg",{className:r.connection,key:m},y.createElement("g",{onClick:()=>v(g)},y.createElement("defs",null,y.createElement("marker",{id:_,markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto",stroke:k},y.createElement("polygon",{points:"0 0, 10 3.5, 0 7",fill:k}))),y.createElement("line",{id:`${i}_transparent`,cursor:A,pointerEvents:"auto",stroke:"transparent",strokeWidth:15,style:L?I:{},x1:M,y1:w,x2:T,y2:R}),y.createElement("line",{id:i,stroke:k,pointerEvents:"auto",strokeWidth:P,markerEnd:`url(#${_})`,x1:M,y1:w,x2:T,y2:R,cursor:A})))});return y.createElement(y.Fragment,null,y.createElement("svg",{ref:t,className:r.editorSVG},y.createElement("defs",null,y.createElement("marker",{id:s,markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto",stroke:o},y.createElement("polygon",{points:"0 0, 10 3.5, 0 7",fill:o}))),y.createElement("line",{ref:e,stroke:o,strokeWidth:2,markerEnd:`url(#${s})`})),h())},Ag=t=>({editorSVG:(0,U.css)({position:"absolute",pointerEvents:"none",width:"100%",height:"100%",zIndex:1e3,display:"none"}),connection:(0,U.css)({position:"absolute",width:"100%",height:"100%",zIndex:1e3,pointerEvents:"none"})});class Ng{constructor(e){this.state=[],this.selection=new Nc.X(void 0),this.select=n=>{n!==this.selection.value&&this.selection.next(n)},this.updateState=()=>{const n=this.selection.value;if(this.state=jo(this.scene.byName),n){for(let r of this.state)if(r.source===n.source&&r.index===n.index){this.selection.next(r);break}}},this.setConnectionAnchorRef=n=>{this.connectionAnchorDiv=n},this.setConnectionSVGRef=n=>{this.connectionSVG=n},this.setConnectionLineRef=n=>{this.connectionLine=n},this.findElementTarget=n=>{let r;if(n!==this.scene.div)return r=this.scene.findElementByTarget(n),!r&&n.parentElement&&(r=this.findElementTarget(n.parentElement)),r},this.handleMouseEnter=n=>{if(!(n.target instanceof Element)||!this.scene.isEditingEnabled)return;let r=this.findElementTarget(n.target);if(!r){console.log("no element");return}if(this.isDrawingConnection)this.connectionTarget=r;else if(this.connectionSource=r,!this.connectionSource){console.log("no connection source");return}const a=r.div.getBoundingClientRect(),i=this.scene.div?.getBoundingClientRect(),s=a.top-(i?.top??0),o=a.left-(i?.left??0);this.connectionAnchorDiv&&(this.connectionAnchorDiv.style.display="none",this.connectionAnchorDiv.style.display="block",this.connectionAnchorDiv.style.top=`${s}px`,this.connectionAnchorDiv.style.left=`${o}px`,this.connectionAnchorDiv.style.height=`${a.height}px`,this.connectionAnchorDiv.style.width=`${a.width}px`)},this.handleMouseLeave=n=>n.relatedTarget instanceof HTMLImageElement&&n.relatedTarget.getAttribute("alt")===tu?!1:(this.connectionTarget=void 0,this.connectionAnchorDiv.style.display="none",!0),this.connectionListener=n=>{if(n.preventDefault(),!(this.connectionLine&&this.scene.div&&this.scene.div.parentElement))return;const r=this.scene.div.parentElement.getBoundingClientRect(),a=n.pageX-r.x,i=n.pageY-r.y;this.connectionLine.setAttribute("x2",`${a}`),this.connectionLine.setAttribute("y2",`${i}`);const s=this.connectionLine.x1.baseVal.value,o=this.connectionLine.y1.baseVal.value;if(this.didConnectionLeaveHighlight||Math.hypot(a-s,i-o)>go&&this.connectionSVG&&(this.didConnectionLeaveHighlight=!0,this.connectionSVG.style.display="block",this.isDrawingConnection=!0),!n.buttons){if(this.connectionSource&&this.connectionSource.div&&this.connectionSource.div.parentElement){const l=this.connectionSource.div.getBoundingClientRect(),c=this.connectionSource.div.parentElement.getBoundingClientRect(),u=l.top-c.top+l.height/2,d=l.left-c.left+l.width/2,f=(s-d)/(l.width/2),p=(u-o)/(l.height/2);let v,h,g;if(this.connectionTarget&&this.connectionTarget.div){const b=this.connectionTarget.div.getBoundingClientRect(),C=b.top-c.top+b.height/2,D=b.left-c.left+b.width/2;v=(a-D)/(b.width/2),h=(C-i)/(b.height/2),g=this.connectionTarget.options.name}else{const b=c.height/2,C=c.width/2;v=(a-C)/(c.width/2),h=(b-i)/(c.height/2)}const m={source:{x:f,y:p},target:{x:v,y:h},targetName:g,color:{fixed:eu.config.theme2.colors.text.primary},size:{fixed:2,min:1,max:10},path:Io.Straight},{options:E}=this.connectionSource;E.connections||(E.connections=[]),this.didConnectionLeaveHighlight&&(this.connectionSource.options.connections=[...E.connections,m],this.connectionSource.onChange(this.connectionSource.options))}this.connectionSVG&&(this.connectionSVG.style.display="none"),this.scene.selecto&&this.scene.selecto.rootContainer&&(this.scene.selecto.rootContainer.style.cursor="default",this.scene.selecto.rootContainer.removeEventListener("mousemove",this.connectionListener)),this.isDrawingConnection=!1,this.updateState(),this.scene.save()}},this.handleConnectionDragStart=(n,r,a)=>{if(this.scene.selecto.rootContainer.style.cursor="crosshair",this.connectionSVG&&this.connectionLine&&this.scene.div&&this.scene.div.parentElement){const i=n.getBoundingClientRect(),s=this.scene.div.parentElement.getBoundingClientRect(),o=i.x-s.x+go,l=i.y-s.y+go,c=r-s.x,u=a-s.y;this.connectionLine.setAttribute("x1",`${o}`),this.connectionLine.setAttribute("y1",`${l}`),this.connectionLine.setAttribute("x2",`${c}`),this.connectionLine.setAttribute("y2",`${u}`),this.didConnectionLeaveHighlight=!1}this.scene.selecto?.rootContainer?.addEventListener("mousemove",this.connectionListener)},this.onChange=(n,r)=>{const a=n.source.options.connections?.splice(0)??[];a[n.index]=r,n.source.onChange({...n.source.options,connections:a}),this.updateState()},this.connectionsNeedUpdate=n=>xd(n)||Uo(n,this.scene.byName),this.scene=e,this.updateState()}render(){return y.createElement(y.Fragment,null,y.createElement(Tg,{setRef:this.setConnectionAnchorRef,handleMouseLeave:this.handleMouseLeave}),y.createElement(Lg,{setSVGRef:this.setConnectionSVGRef,setLineRef:this.setConnectionLineRef,scene:this.scene}))}}const Ig=t=>({name:"settingsViewable",props:{},events:{},render(e,n){if(t.selecto?.getSelectedTargets()&&t.selecto?.getSelectedTargets().length>1)return;const r=(o,l)=>{const c=e.getContainer(),u=new PointerEvent("contextmenu",{clientX:o,clientY:l});c.dispatchEvent(u)},a=o=>{r(o.clientX,o.clientY)},i=o=>{if(o.key==="Enter"){const l=o.currentTarget.getBoundingClientRect();r(l.x,l.y)}},s=e.getRect();return n.createElement("div",{key:"settings-viewable",className:"moveable-settings",style:{position:"absolute",left:`${s.width+18}px`,top:"0px",color:"white",fontSize:"18px",cursor:"pointer",userSelect:"none",willChange:"transform",transform:"translate(-50%, 0px)",zIndex:100},onClick:a,onKeyDown:i,role:"button",tabIndex:0},"","\u2699\uFE0F","")}}),Bg={name:"dimensionViewable",props:{},events:{},render(t,e){const n=t.getRect();return e.createElement("div",{key:"dimension-viewable",className:"moveable-dimension",style:{position:"absolute",left:`${n.width/2}px`,top:`${n.height+20}px`,background:"#4af",borderRadius:"2px",padding:"2px 4px",color:"white",fontSize:"13px",whiteSpace:"nowrap",fontWeight:"bold",willChange:"transform",transform:"translate(-50%, 0px)",zIndex:100}},Math.round(n.offsetWidth)," x ",Math.round(n.offsetHeight))}},_g=t=>({name:"constraintViewable",props:{},events:{},render(e,n){const r=e.getRect(),a=t.findElementByTarget(e.state.target);if(t.selecto?.getSelectedTargets()&&t.selecto?.getSelectedTargets().length>1)return;let i=null,s=null;const o=a?.tempConstraint??a?.options.constraint??{},l="1px dashed #4af",c=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height/2-r.height/16}px`,borderLeft:l,height:`${r.height/8}px`,transform:"rotate(45deg)"}}),u=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height/2-r.height/16}px`,borderLeft:l,height:`${r.height/8}px`,transform:"rotate(-45deg)"}}),d=n.createElement("div",{},[c,u]),f=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,bottom:"0px",borderLeft:l,height:"100vh"}}),p=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height}px`,borderLeft:l,height:"100vh"}}),v=n.createElement("div",{},[f,p]),h=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height/4}px`,borderLeft:l,height:`${r.height/2}px`}}),g=n.createElement("div",{},[h,d]);switch(o.vertical){case st.Top:i=f;break;case st.Bottom:i=p;break;case st.TopBottom:i=v;break;case st.Center:i=g;break}const m=n.createElement("div",{style:{position:"absolute",right:"0px",top:`${r.height/2}px`,borderTop:l,width:"100vw"}}),E=n.createElement("div",{style:{position:"absolute",left:`${r.width}px`,top:`${r.height/2}px`,borderTop:l,width:"100vw"}}),b=n.createElement("div",{},[m,E]),C=n.createElement("div",{style:{position:"absolute",left:`${r.width/4}px`,top:`${r.height/2}px`,borderTop:l,width:`${r.width/2}px`}}),D=n.createElement("div",{},[C,d]);switch(o.horizontal){case ot.Left:s=m;break;case ot.Right:s=E;break;case ot.LeftRight:s=b;break;case ot.Center:s=D;break}return n.createElement("div",{},[i,s])}});class zg extends Qt{constructor(e,n,r){super(e,n),this.options=e,this.scene=n,this.changeCallback=r,this.setRootRef=a=>{this.div=a},this.sizeStyle={height:"100%",width:"100%"}}isRoot(){return!0}onChange(e){this.revId++,this.options={...e},this.changeCallback()}getSaveModel(){const{placement:e,constraint:n,...r}=this.options;return{...r,elements:this.elements.map(a=>a.getSaveModel())}}render(){return y.createElement("div",{onContextMenu:e=>e.preventDefault(),key:this.UID,ref:this.setRootRef,style:{...this.sizeStyle,...this.dataStyle}},this.elements.map(e=>e.render()))}}class Gg{constructor(e,n,r,a,i){this.onSave=a,this.styles=Fg(Pe.config.theme2),this.selection=new ns.t(1),this.moved=new Ac.x,this.byName=new Map,this.revId=0,this.width=0,this.height=0,this.style={},this.skipNextSelectionBroadcast=!1,this.ignoreDataUpdate=!1,this.isPanelEditing=as.E1.getSearchObject().editPanel!==void 0,this.editModeEnabled=new Nc.X(!1),this.targetsToSelect=new Set,this.getNextElementName=(s=!1)=>{const o=s?"Frame":"Element";let l=this.byName.size+1;const c=l+100;for(;l<c;){const u=`${o} ${l++}`;if(!this.byName.has(u))return u}return`${o} ${Date.now()}`},this.canRename=s=>!this.byName.has(s),this.context={getColor:s=>(0,yn.FP)(this.data,s),getScale:s=>(0,yn.pb)(this.data,s),getScalar:s=>(0,yn.z2)(this.data,s),getText:s=>(0,yn.WO)(this.data,s),getResource:s=>(0,yn.Qz)(this.data,s),getPanelData:()=>this.data},this.generateFrameContainer=s=>{let o=1/0,l=1/0,c=0,u=0;return s.forEach(d=>{const f=d.div?.getBoundingClientRect();f&&(o>f.top&&(o=f.top),l>f.left&&(l=f.left),c<f.right&&(c=f.right),u<f.bottom&&(u=f.bottom))}),{top:o,left:l,width:c-l,height:u-o}},this.save=(s=!1)=>{this.onSave(this.root.getSaveModel()),s&&setTimeout(()=>{this.div&&this.initMoveable(!0,this.isEditingEnabled)})},this.findElementByTarget=s=>{const o=[...this.root.elements];for(;o.length>0;){const l=o.shift();if(l&&l.div&&l.div===s)return l;const c=l instanceof Qt?l.elements:[];for(const u of c)o.unshift(u)}},this.setNonTargetPointerEvents=(s,o)=>{const l=[...this.root.elements];for(;l.length>0;){const c=l.shift();c&&c.div&&c.div!==s&&c.applyLayoutStylesToDiv(o);const u=c instanceof Qt?c.elements:[];for(const d of u)l.unshift(d)}},this.setRef=s=>{this.div=s},this.select=s=>{this.selecto&&(this.selecto.setSelectedTargets(s.targets),this.updateSelection(s),this.editModeEnabled.next(!1),this.connections.connectionAnchorDiv&&(this.connections.connectionAnchorDiv.style.display="none"))},this.updateSelection=s=>{if(this.moveable.target=s.targets,this.skipNextSelectionBroadcast){this.skipNextSelectionBroadcast=!1;return}if(s.frame)this.selection.next([s.frame]);else{const o=s.targets.map(l=>this.findElementByTarget(l));this.selection.next(o)}},this.generateTargetElements=s=>{let o=[];const l=[...s];for(;l.length>0;){const c=l.shift();c&&c.div&&o.push(c.div);const u=c instanceof Qt?c.elements:[];for(const d of u)l.unshift(d)}return o},this.initMoveable=(s=!1,o=!0)=>{const l=this.generateTargetElements(this.root.elements);s&&this.selecto&&this.selecto.destroy(),this.selecto=new yg({container:this.div,rootContainer:this.div,selectableTargets:l,toggleContinueSelect:"shift",selectFromInside:!1,hitRate:0}),this.moveable=new qh(this.div,{draggable:o&&!this.editModeEnabled.getValue(),resizable:o,ables:[Bg,_g(this),Ig(this)],props:{dimensionViewable:o,constraintViewable:o,settingsViewable:o},origin:!1,className:this.styles.selected}).on("click",u=>{const d=this.findElementByTarget(u.target);let f=!1;d&&(f=d.item.hasEditMode??!1),u.isDouble&&o&&!this.editModeEnabled.getValue()&&f&&this.editModeEnabled.next(!0)}).on("clickGroup",u=>{this.selecto.clickTarget(u.inputEvent,u.inputTarget)}).on("dragStart",u=>{this.ignoreDataUpdate=!0,this.setNonTargetPointerEvents(u.target,!0)}).on("dragGroupStart",u=>{this.ignoreDataUpdate=!0}).on("drag",u=>{const d=this.findElementByTarget(u.target);d&&(d.applyDrag(u),this.connections.connectionsNeedUpdate(d)&&this.moveableActionCallback&&this.moveableActionCallback(!0))}).on("dragGroup",u=>{let d=!1;for(let f of u.events){const p=this.findElementByTarget(f.target);p&&(p.applyDrag(f),d||(d=this.connections.connectionsNeedUpdate(p)))}d&&this.moveableActionCallback&&this.moveableActionCallback(!0)}).on("dragGroupEnd",u=>{u.events.forEach(d=>{const f=this.findElementByTarget(d.target);f&&f.setPlacementFromConstraint()}),this.moved.next(Date.now()),this.ignoreDataUpdate=!1}).on("dragEnd",u=>{const d=this.findElementByTarget(u.target);d&&d.setPlacementFromConstraint(),this.moved.next(Date.now()),this.ignoreDataUpdate=!1,this.setNonTargetPointerEvents(u.target,!1)}).on("resizeStart",u=>{const d=this.findElementByTarget(u.target);d&&(d.tempConstraint={...d.options.constraint},d.options.constraint={vertical:st.Top,horizontal:ot.Left},d.setPlacementFromConstraint())}).on("resize",u=>{const d=this.findElementByTarget(u.target);d&&(d.applyResize(u),this.connections.connectionsNeedUpdate(d)&&this.moveableActionCallback&&this.moveableActionCallback(!0)),this.moved.next(Date.now())}).on("resizeGroup",u=>{let d=!1;for(let f of u.events){const p=this.findElementByTarget(f.target);p&&(p.applyResize(f),d||(d=this.connections.connectionsNeedUpdate(p)))}d&&this.moveableActionCallback&&this.moveableActionCallback(!0),this.moved.next(Date.now())}).on("resizeEnd",u=>{const d=this.findElementByTarget(u.target);d&&(d.tempConstraint&&(d.options.constraint=d.tempConstraint,d.tempConstraint=void 0),d.setPlacementFromConstraint())});let c=[];this.selecto.on("dragStart",u=>{const d=u.inputEvent.target;if(d.id===Jc){this.connections.handleConnectionDragStart(d,u.inputEvent.clientX,u.inputEvent.clientY),u.stop();return}const f=this.moveable.isMoveableElement(d)||c.some(v=>v===d||v.contains(d)),p=this.selecto?.getSelectedTargets().includes(d.parentElement.parentElement);this.isEditingEnabled&&!this.editModeEnabled.getValue()&&f&&this.selecto?.getSelectedTargets().length&&(this.selecto.getSelectedTargets()[0].style.cursor="grabbing"),(f||p||!this.isEditingEnabled)&&u.stop()}).on("select",()=>{this.editModeEnabled.next(!1),this.connections.connectionAnchorDiv&&(this.connections.connectionAnchorDiv.style.display="none")}).on("selectEnd",u=>{c=u.selected,this.updateSelection({targets:c}),u.isDragStart&&(this.isEditingEnabled&&!this.editModeEnabled.getValue()&&this.selecto?.getSelectedTargets().length&&(this.selecto.getSelectedTargets()[0].style.cursor="grabbing"),u.inputEvent.preventDefault(),u.data.timer=setTimeout(()=>{this.moveable.dragStart(u.inputEvent)}))}).on("dragEnd",u=>{clearTimeout(u.data.timer)})},this.reorderElements=(s,o,l,c)=>{switch(l){case!0:switch(c){case-1:s.parent instanceof Qt?o.parent&&(this.updateElements(s,o.parent,o.parent.elements.length),s.updateData(o.parent.scene.context)):o.parent?.reorderTree(s,o,!0);break;default:o.parent&&(this.updateElements(s,o.parent,o.parent.elements.indexOf(o)),s.updateData(o.parent.scene.context));break}break;case!1:o instanceof Qt?s.parent===o?s.parent?.reorderTree(s,o,!0):(this.updateElements(s,o),s.updateData(o.scene.context)):s.parent===o.parent?s.parent?.reorderTree(s,o):o.parent&&(this.updateElements(s,o.parent),s.updateData(o.parent.scene.context));break}},this.updateElements=(s,o,l=null)=>{s.parent?.doAction(Vt.Delete,s),s.parent=o;const c=s.div?.getBoundingClientRect();s.setPlacementFromConstraint(c,o.div?.getBoundingClientRect());const u=l??o.elements.length-1;o.elements.splice(u,0,s),o.scene.save(),o.reinitializeMoveable()},this.addToSelection=()=>{try{let s={targets:[]};s.targets=[...this.targetsToSelect],this.select(s)}catch{Yo.Z.emit(Gr.SI.alertError,["Unable to add to selection"])}},this.root=this.load(e,n,r),this.subscription=this.editModeEnabled.subscribe(s=>{!this.moveable||!this.isEditingEnabled||(this.moveable.draggable=!s)}),this.panel=i,this.connections=new Ng(this)}load(e,n,r){return this.root=new zg(e??{type:"frame",elements:[La]},this,this.save),this.isEditingEnabled=n,this.shouldShowAdvancedTypes=r,setTimeout(()=>{if(this.div){const a=n;this.initMoveable(a,n),this.currentLayer=this.root,this.selection.next([]),this.connections.select(void 0),this.connections.updateState()}}),this.root}updateData(e){this.data=e,this.root.updateData(this.context)}updateSize(e,n){this.width=e,this.height=n,this.style={width:e,height:n},this.selecto?.getSelectedTargets().length&&this.clearCurrentSelection()}frameSelection(){this.selection.pipe((0,Ic.P)()).subscribe(e=>{const n=e[0].parent,r=new Qt({type:"frame",name:this.getNextElementName(!0),elements:[]},this,e[0].parent),a=this.generateFrameContainer(e);r.options.placement=a,e.forEach(i=>{const s=i.div?.getBoundingClientRect();i.setPlacementFromConstraint(s,a),n.doAction(Vt.Delete,i),r.doAction(Vt.Duplicate,i,!1,!1)}),r.setPlacementFromConstraint(a,n.div?.getBoundingClientRect()),n.elements.push(r),this.byName.set(r.getName(),r),this.save()})}clearCurrentSelection(e=!1){this.skipNextSelectionBroadcast=e;let n=new MouseEvent("click");this.selecto?.clickTarget(n,this.div)}updateCurrentLayer(e){this.currentLayer=e,this.clearCurrentSelection(),this.save()}render(){const e=this.isPanelEditing||!this.isPanelEditing&&this.isEditingEnabled,n=(this.tooltip?.element?.data?.links?.length??0)>0,r=!this.isEditingEnabled&&n;return y.createElement("div",{key:this.revId,className:this.styles.wrap,style:this.style,ref:this.setRef},this.connections.render(),this.root.render(),e&&y.createElement(mn.h_,null,y.createElement(bg,{scene:this,panel:this.panel})),r&&y.createElement(mn.h_,null,y.createElement(kg,{scene:this})))}}const Fg=(0,Jo.B)(t=>({wrap:(0,U.css)`
    overflow: hidden;
    position: relative;
  `,selected:(0,U.css)`
    z-index: 999 !important;
  `}));var ru=G(14914),Kg=G(71495);function Wg({onClose:t,scene:e,anchorPoint:n}){const r=e.root.options.background?.image?.fixed??"",[a,i]=(0,y.useState)(r),s=(0,St.l4)(),o=Vg(s,n),l=c=>{c&&(i(c),e.root&&(e.root.options.background={...e.root.options.background,image:{mode:Nr.Q8.Fixed,fixed:c}},e.revId++,e.save(),e.root.reinitializeMoveable()),e&&e.updateData(e.data)),t()};return y.createElement(mn.h_,{className:o.portalWrapper},y.createElement(Kg.Y,{onChange:l,value:a,mediaType:Ra.MediaType.Image,folderName:Ra.ResourceFolderName.IOT}))}const Vg=(t,e)=>({portalWrapper:(0,U.css)({width:"315px",height:"445px",transform:`translate(${e.x}px, ${e.y-200}px)`})});var Hg=G(23318),Yg=G.n(Hg),$g=G(24532),nu=G(20994),au=G(60115),Xg=G(91480),mo=G(44690),Zg=G(73393),Ea=G(38685);const Ug=[{value:ee.Original,label:"Original"},{value:ee.Contain,label:"Contain"},{value:ee.Cover,label:"Cover"},{value:ee.Fill,label:"Fill"},{value:ee.Tile,label:"Tile"}],jg=({value:t,onChange:e})=>{const n=t??ee.Cover,r=(0,y.useCallback)(a=>{e(a)},[e]);return y.createElement(hr.Z,null,y.createElement(gr._,{grow:!0},y.createElement(_o.S,{value:n,options:Ug,onChange:r,fullWidth:!0})))},iu=(t,e)=>e!=="frame"&&e!==void 0?[t+` (${e})`]:[t],Pr={addBackground:(t,e)=>{const n=iu("Background",e.options?.type);t.addCustomEditor({category:n,id:"background.color",path:"background.color",name:"Color",editor:It.Lm,settings:{},defaultValue:{fixed:""}}).addCustomEditor({category:n,id:"background.image",path:"background.image",name:"Image",editor:It.Lv,settings:{resourceType:"image"}}).addCustomEditor({category:n,id:"background.size",path:"background.size",name:"Image size",editor:jg,settings:{resourceType:"image"}})},addBorder:(t,e)=>{const n=iu("Border",e.options?.type);t.addSliderInput({category:n,path:"border.width",name:"Width",defaultValue:2,settings:{min:0,max:20}}),e.options?.border?.width&&t.addCustomEditor({category:n,id:"border.color",path:"border.color",name:"Color",editor:It.Lm,settings:{},defaultValue:{fixed:""}})},addColor:(t,e)=>{const n=["Color"];t.addCustomEditor({category:n,id:"color",path:"color",name:"Color",editor:It.Lm,settings:{},defaultValue:{fixed:""}})},addSize:(t,e)=>{const n=["Size"];t.addCustomEditor({category:n,id:"size",path:"size",name:"Size",editor:It.cL,settings:{min:1,max:10},defaultValue:{fixed:2,min:1,max:10}})}};var yo=G(97666),Qg=G(98050);const qg=({onVerticalConstraintChange:t,onHorizontalConstraintChange:e,currentConstraints:n})=>{const r=(0,St.wW)(Jg(n)),a=()=>{t(st.Top)},i=()=>{t(st.Bottom)},s=()=>{t(st.Center)},o=()=>{e(ot.Left)},l=()=>{e(ot.Right)},c=()=>{e(ot.Center)};return y.createElement("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"75.000000pt",height:"75.000000pt",viewBox:"0 0 228.000000 228.000000",preserveAspectRatio:"xMidYMid meet",style:{marginBottom:"4.8px"}},y.createElement("g",{transform:"translate(0.000000,228.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none"},y.createElement("path",{fill:"#e5e5e5",d:`M198 2028 l-28 -32 0 -912 0 -912 31 -31 31 -31 915 0 915 0 29 29
29 29 0 917 0 917 -27 29 -28 29 -920 0 -920 0 -27 -32z m1876 -17 c15 -16 16
-98 16 -927 0 -860 -1 -909 -18 -926 -17 -17 -66 -18 -927 -18 -862 0 -910 1
-927 18 -17 17 -18 65 -18 926 0 832 1 911 16 927 16 18 45 19 468 21 248 2
659 2 912 0 431 -2 462 -4 478 -21z`}),y.createElement("rect",{className:r.topConstraint,height:"228",width:"46",y:"1735",x:"1123"}),y.createElement("rect",{className:r.constraintHover,onClick:a,height:"350",width:"300",y:"1680",x:"995",fill:"transparent"}),y.createElement("rect",{className:r.bottomConstraint,height:"228",width:"46",y:"210",x:"1123"}),y.createElement("rect",{className:r.constraintHover,onClick:i,height:"350",width:"300",y:"135",x:"995",fill:"transparent"}),y.createElement("rect",{className:r.leftConstraint,height:"46",width:"228",y:"1060",x:"265"}),y.createElement("rect",{className:r.constraintHover,onClick:o,height:"300",width:"350",y:"925",x:"200",fill:"transparent"}),y.createElement("rect",{className:r.rightConstraint,height:"46",width:"228",y:"1060",x:"1795"}),y.createElement("rect",{className:r.constraintHover,onClick:l,height:"300",width:"350",y:"925",x:"1730",fill:"transparent"}),y.createElement("path",{className:r.box,d:`M568 1669 c-17 -9 -18 -48 -18 -584 0 -558 1 -575 19 -585 27 -14
1125 -14 1152 0 18 10 19 27 19 580 0 504 -2 570 -16 584 -14 14 -80 16 -577
16 -363 -1 -568 -4 -579 -11z m1119 -42 c4 -5 4 -1079 0 -1084 -5 -4 -1079 -4
-1084 0 -5 6 -4 1077 1 1085 4 7 1076 6 1083 -1z`}),y.createElement("rect",{className:r.verticalCenterConstraint,height:"456",width:"46",y:"855",x:"1123"}),y.createElement("rect",{className:r.constraintHover,onClick:s,height:"660",width:"300",y:"750",x:"995",fill:"transparent"}),y.createElement("rect",{className:r.horizontalCenterConstraint,height:"46",width:"456",y:"1060",x:"918"}),y.createElement("rect",{className:r.constraintHover,onClick:c,height:"300",width:"660",y:"925",x:"815",fill:"transparent"})))},Jg=t=>e=>{const n="#daebf7",r="0.6",a="#0d99ff",i=e.isDark?"#ffffff":"#000000";return{constraintHover:(0,U.css)({"&:hover":{fill:n,fillOpacity:r}}),topConstraint:(0,U.css)({...t.vertical===st.Top||t.vertical===st.TopBottom?{width:"92pt",x:"1085",fill:a}:{fill:i}}),bottomConstraint:(0,U.css)({...t.vertical===st.Bottom||t.vertical===st.TopBottom?{width:"92pt",x:"1085",fill:a}:{fill:i}}),leftConstraint:(0,U.css)({...t.horizontal===ot.Left||t.horizontal===ot.LeftRight?{height:"92pt",y:"1014",fill:a}:{fill:i}}),rightConstraint:(0,U.css)({...t.horizontal===ot.Right||t.horizontal===ot.LeftRight?{height:"92pt",y:"1014",fill:a}:{fill:i}}),horizontalCenterConstraint:(0,U.css)({...t.horizontal===ot.Center?{height:"92pt",y:"1014",fill:a}:{fill:i}}),verticalCenterConstraint:(0,U.css)({...t.vertical===st.Center?{width:"92pt",x:"1085",fill:a}:{fill:i}}),box:(0,U.css)({fill:i})}},t0=({onPositionChange:t,element:e,settings:n})=>{const r=(0,St.wW)(e0),a=o=>{const l={vertical:st.Top,horizontal:ot.Left},c={...e.options.constraint};switch(e.options.constraint=l,e.setPlacementFromConstraint(),o){case ne.Top:t(0,"top");break;case ne.Bottom:t(s(e.options.placement?.height??0,"bottom"),"top");break;case ne.VerticalCenter:t(i(e.options.placement?.height??0,"v"),"top");break;case ne.Left:t(0,"left");break;case ne.Right:t(s(e.options.placement?.width??0,"right"),"left");break;case ne.HorizontalCenter:t(i(e.options.placement?.width??0,"h"),"left");break}e.options.constraint=c,e.setPlacementFromConstraint()},i=(o,l)=>((l==="h"?n.scene.width:n.scene.height)-o)/2,s=(o,l)=>(l==="right"?n.scene.width:n.scene.height)-o;return y.createElement("div",{className:r.buttonGroup},y.createElement(ce.h,{name:"horizontal-align-left",onClick:()=>a(ne.Left),className:r.button,size:"lg",tooltip:"Align left"}),y.createElement(ce.h,{name:"horizontal-align-center",onClick:()=>a(ne.HorizontalCenter),className:r.button,size:"lg",tooltip:"Align horizontal centers"}),y.createElement(ce.h,{name:"horizontal-align-right",onClick:()=>a(ne.Right),className:r.button,size:"lg",tooltip:"Align right"}),y.createElement(ce.h,{name:"vertical-align-top",onClick:()=>a(ne.Top),size:"lg",tooltip:"Align top"}),y.createElement(ce.h,{name:"vertical-align-center",onClick:()=>a(ne.VerticalCenter),className:r.button,size:"lg",tooltip:"Align vertical centers"}),y.createElement(ce.h,{name:"vertical-align-bottom",onClick:()=>a(ne.Bottom),className:r.button,size:"lg",tooltip:"Align bottom"}))},e0=t=>({buttonGroup:(0,U.css)({display:"flex",flexWrap:"wrap",padding:"12px 0 12px 0"}),button:(0,U.css)({marginLeft:"5px",marginRight:"5px"})}),r0=["top","left","bottom","right","width","height"],n0=[{label:"Left",value:ot.Left},{label:"Right",value:ot.Right},{label:"Left & right",value:ot.LeftRight},{label:"Center",value:ot.Center},{label:"Scale",value:ot.Scale}],a0=[{label:"Top",value:st.Top},{label:"Bottom",value:st.Bottom},{label:"Top & bottom",value:st.TopBottom},{label:"Center",value:st.Center},{label:"Scale",value:st.Scale}];function ou({item:t}){const e=t.settings;if((0,wn.Z)(e?.scene?e.scene.moved:new Ac.x),!e)return y.createElement("div",null,"Loading...");const n=e.element;if(!n)return y.createElement("div",null,"???");const{options:r}=n,{placement:a,constraint:i}=r,s=()=>{setTimeout(()=>{e.scene.select({targets:[n.div]})})},o=p=>{l(p.value)},l=p=>{n.options.constraint.horizontal=p,n.setPlacementFromConstraint(),e.scene.revId++,e.scene.save(!0),s()},c=p=>{u(p.value)},u=p=>{n.options.constraint.vertical=p,n.setPlacementFromConstraint(),e.scene.revId++,e.scene.save(!0),s()},d=(p,v)=>{n.options.placement[v]=p??n.options.placement[v],n.applyLayoutStylesToDiv(),e.scene.clearCurrentSelection(!0),s()},f=n.tempConstraint??i??{};return y.createElement("div",null,y.createElement(t0,{onPositionChange:d,settings:e,element:n}),y.createElement("br",null),y.createElement(_r.g,{label:"Constraints"},y.createElement(De.Lh,null,y.createElement(qg,{onVerticalConstraintChange:u,onHorizontalConstraintChange:l,currentConstraints:f}),y.createElement(De.wc,null,y.createElement(De.Lh,null,y.createElement(yo.J,{name:"arrows-h"}),y.createElement(Sn.Ph,{options:n0,onChange:o,value:f.horizontal})),y.createElement(De.Lh,null,y.createElement(yo.J,{name:"arrows-v"}),y.createElement(Sn.Ph,{options:a0,onChange:c,value:f.vertical}))))),y.createElement("br",null),y.createElement(_r.g,{label:"Position"},y.createElement(y.Fragment,null,r0.map(p=>{const v=a[p];return v==null?null:y.createElement(hr.Z,{key:p},y.createElement(gr._,{label:p,labelWidth:8,grow:!0},y.createElement(Qg.Y,{value:v,onChange:h=>d(h,p)})))}))))}function su(t){return{category:t.category,path:"--",values:e=>({getValue:n=>(0,he.get)(t.element.options,n),onChange:(n,r)=>{let a=t.element.options;if(n==="type"&&r){const i=Vr.getIfExists(r);if(!i){console.warn("layer does not exist",r);return}a={...a,...i.getNewOptions(a),type:i.id}}else a=(0,Ea.hs)(a,n,r);t.element.onChange(a),t.element.updateData(t.scene.context)}}),build:(e,n)=>{const{options:r}=t.element,a=r?.type?r.type:La.type,i=Mn(t.scene.shouldShowAdvancedTypes,a).options,s=!t.scene.shouldShowAdvancedTypes&&!Rn.filter(p=>p.id===r?.type).length;e.addSelect({path:"type",name:void 0,settings:{options:i},description:s?"Selected element type is not supported by current settings. Please enable advanced element types.":""});const o=Vr.getIfExists(r?.type??La.type);let l=r;l||(l={...o.getNewOptions(r),type:o.id,name:`Element ${Date.now()}.${Math.floor(Math.random()*100)}`});const c={...n,options:l};o?.registerOptionsUI&&o.registerOptionsUI(e,c),(t.element.item.standardEditorConfig?.layout??!0)&&e.addCustomEditor({category:["Layout"],id:"content",path:"__",name:"Quick placement",editor:ou,settings:t}),(t.element.item.standardEditorConfig?.background??!0)&&Pr.addBackground(e,c),(t.element.item.standardEditorConfig?.border??!0)&&Pr.addBorder(e,c)}}}var lu=G(85362),be=G(21832),Tt=G(93700),Eo=G(84238),Kt=G(53845),cr=G(4159),cu=G(64144),uu=G(60112),He=G(85338),du=G(91200),fu=G(96722),i0=G(70318),Ce=G.n(i0),Lr=G(9090),pu=G(63298),Ye=G(59390),bo=y.createContext(null);function o0(t){var e=t.dropPosition,n=t.dropLevelOffset,r=t.indent,a={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(e){case-1:a.top=0,a.left=-n*r;break;case 1:a.bottom=0,a.left=-n*r;break;case 0:a.bottom=0,a.left=r;break}return y.createElement("div",{style:a})}function vu(t){if(t==null)throw new TypeError("Cannot destructure "+t)}var ur=G(15112),ba=G(7635),hu=G(54911),s0=G(68369),l0=G(64315),c0=function(e){for(var n=e.prefixCls,r=e.level,a=e.isStart,i=e.isEnd,s="".concat(n,"-indent-unit"),o=[],l=0;l<r;l+=1){var c;o.push(y.createElement("span",{key:l,className:Ce()(s,(c={},(0,Tt.Z)(c,"".concat(s,"-start"),a[l]),(0,Tt.Z)(c,"".concat(s,"-end"),i[l]),c))}))}return y.createElement("span",{"aria-hidden":"true",className:"".concat(n,"-indent")},o)};const u0=y.memo(c0);function ie(t,e){return t[e]}var d0=G(49303),f0=G(50477),p0=["children"];function gu(t,e){return"".concat(t,"-").concat(e)}function v0(t){return t&&t.type&&t.type.isTreeNode}function En(t,e){return t??e}function Ca(t){var e=t||{},n=e.title,r=e._title,a=e.key,i=e.children,s=n||"title";return{title:s,_title:r||[s],key:a||"key",children:i||"children"}}function im(t,e){var n=new Map;function r(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";(a||[]).forEach(function(s){var o=s[e.key],l=s[e.children];warning(o!=null,"Tree node must have a certain key: [".concat(i).concat(o,"]"));var c=String(o);warning(!n.has(c)||o===null||o===void 0,"Same 'key' exist in the Tree: ".concat(c)),n.set(c,!0),r(l,"".concat(i).concat(c," > "))})}r(t)}function h0(t){function e(n){var r=(0,d0.Z)(n);return r.map(function(a){if(!v0(a))return(0,Ye.ZP)(!a,"Tree/TreeNode can only accept TreeNode as children."),null;var i=a.key,s=a.props,o=s.children,l=(0,ba.Z)(s,p0),c=(0,Kt.Z)({key:i},l),u=e(o);return u.length&&(c.children=u),c}).filter(function(a){return a})}return e(t)}function Co(t,e,n){var r=Ca(n),a=r._title,i=r.key,s=r.children,o=new Set(e===!0?[]:e),l=[];function c(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return u.map(function(f,p){for(var v=gu(d?d.pos:"0",p),h=En(f[i],v),g,m=0;m<a.length;m+=1){var E=a[m];if(f[E]!==void 0){g=f[E];break}}var b=(0,Kt.Z)((0,Kt.Z)({},(0,f0.Z)(f,[].concat((0,cr.Z)(a),[i,s]))),{},{title:g,key:h,parent:d,pos:v,children:null,data:f,isStart:[].concat((0,cr.Z)(d?d.isStart:[]),[p===0]),isEnd:[].concat((0,cr.Z)(d?d.isEnd:[]),[p===u.length-1])});return l.push(b),e===!0||o.has(h)?b.children=c(f[s]||[],b):b.children=[],b})}return c(t),l}function g0(t,e,n){var r={};(0,Eo.Z)(n)==="object"?r=n:r={externalGetKey:n},r=r||{};var a=r,i=a.childrenPropName,s=a.externalGetKey,o=a.fieldNames,l=Ca(o),c=l.key,u=l.children,d=i||u,f;s?typeof s=="string"?f=function(h){return h[s]}:typeof s=="function"&&(f=function(h){return s(h)}):f=function(h,g){return En(h[c],g)};function p(v,h,g,m){var E=v?v[d]:t,b=v?gu(g.pos,h):"0",C=v?[].concat((0,cr.Z)(m),[v]):[];if(v){var D=f(v,b),x={node:v,index:h,pos:b,key:D,parentPos:g.node?g.pos:null,level:g.level+1,nodes:C};e(x)}E&&E.forEach(function(S,M){p(S,M,{node:v,pos:b,level:g?g.level+1:-1},C)})}p(null)}function m0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.initWrapper,r=e.processEntity,a=e.onProcessFinished,i=e.externalGetKey,s=e.childrenPropName,o=e.fieldNames,l=arguments.length>2?arguments[2]:void 0,c=i||l,u={},d={},f={posEntities:u,keyEntities:d};return n&&(f=n(f)||f),g0(t,function(p){var v=p.node,h=p.index,g=p.pos,m=p.key,E=p.parentPos,b=p.level,C=p.nodes,D={node:v,nodes:C,index:h,key:m,pos:g,level:b},x=En(m,g);u[g]=D,d[x]=D,D.parent=u[E],D.parent&&(D.parent.children=D.parent.children||[],D.parent.children.push(D)),r&&r(D,f)},{externalGetKey:c,childrenPropName:s,fieldNames:o}),a&&a(f),f}function bn(t,e){var n=e.expandedKeys,r=e.selectedKeys,a=e.loadedKeys,i=e.loadingKeys,s=e.checkedKeys,o=e.halfCheckedKeys,l=e.dragOverNodeKey,c=e.dropPosition,u=e.keyEntities,d=ie(u,t),f={eventKey:t,expanded:n.indexOf(t)!==-1,selected:r.indexOf(t)!==-1,loaded:a.indexOf(t)!==-1,loading:i.indexOf(t)!==-1,checked:s.indexOf(t)!==-1,halfChecked:o.indexOf(t)!==-1,pos:String(d?d.pos:""),dragOver:l===t&&c===0,dragOverGapTop:l===t&&c===-1,dragOverGapBottom:l===t&&c===1};return f}function Nt(t){var e=t.data,n=t.expanded,r=t.selected,a=t.checked,i=t.loaded,s=t.loading,o=t.halfChecked,l=t.dragOver,c=t.dragOverGapTop,u=t.dragOverGapBottom,d=t.pos,f=t.active,p=t.eventKey,v=(0,Kt.Z)((0,Kt.Z)({},e),{},{expanded:n,selected:r,checked:a,loaded:i,loading:s,halfChecked:o,dragOver:l,dragOverGapTop:c,dragOverGapBottom:u,pos:d,active:f,key:p});return"props"in v||Object.defineProperty(v,"props",{get:function(){return(0,Ye.ZP)(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),t}}),v}var y0=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],mu="open",yu="close",E0="---",b0=function(t){(0,du.Z)(n,t);var e=(0,fu.Z)(n);function n(){var r;(0,cu.Z)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=e.call.apply(e,[this].concat(i)),r.state={dragNodeHighlight:!1},r.selectHandle=void 0,r.cacheIndent=void 0,r.onSelectorClick=function(o){var l=r.props.context.onNodeClick;l(o,Nt(r.props)),r.isSelectable()?r.onSelect(o):r.onCheck(o)},r.onSelectorDoubleClick=function(o){var l=r.props.context.onNodeDoubleClick;l(o,Nt(r.props))},r.onSelect=function(o){if(!r.isDisabled()){var l=r.props.context.onNodeSelect;l(o,Nt(r.props))}},r.onCheck=function(o){if(!r.isDisabled()){var l=r.props,c=l.disableCheckbox,u=l.checked,d=r.props.context.onNodeCheck;if(!(!r.isCheckable()||c)){var f=!u;d(o,Nt(r.props),f)}}},r.onMouseEnter=function(o){var l=r.props.context.onNodeMouseEnter;l(o,Nt(r.props))},r.onMouseLeave=function(o){var l=r.props.context.onNodeMouseLeave;l(o,Nt(r.props))},r.onContextMenu=function(o){var l=r.props.context.onNodeContextMenu;l(o,Nt(r.props))},r.onDragStart=function(o){var l=r.props.context.onNodeDragStart;o.stopPropagation(),r.setState({dragNodeHighlight:!0}),l(o,(0,He.Z)(r));try{o.dataTransfer.setData("text/plain","")}catch{}},r.onDragEnter=function(o){var l=r.props.context.onNodeDragEnter;o.preventDefault(),o.stopPropagation(),l(o,(0,He.Z)(r))},r.onDragOver=function(o){var l=r.props.context.onNodeDragOver;o.preventDefault(),o.stopPropagation(),l(o,(0,He.Z)(r))},r.onDragLeave=function(o){var l=r.props.context.onNodeDragLeave;o.stopPropagation(),l(o,(0,He.Z)(r))},r.onDragEnd=function(o){var l=r.props.context.onNodeDragEnd;o.stopPropagation(),r.setState({dragNodeHighlight:!1}),l(o,(0,He.Z)(r))},r.onDrop=function(o){var l=r.props.context.onNodeDrop;o.preventDefault(),o.stopPropagation(),r.setState({dragNodeHighlight:!1}),l(o,(0,He.Z)(r))},r.onExpand=function(o){var l=r.props,c=l.loading,u=l.context.onNodeExpand;c||u(o,Nt(r.props))},r.setSelectHandle=function(o){r.selectHandle=o},r.getNodeState=function(){var o=r.props.expanded;return r.isLeaf()?null:o?mu:yu},r.hasChildren=function(){var o=r.props.eventKey,l=r.props.context.keyEntities,c=ie(l,o)||{},u=c.children;return!!(u||[]).length},r.isLeaf=function(){var o=r.props,l=o.isLeaf,c=o.loaded,u=r.props.context.loadData,d=r.hasChildren();return l===!1?!1:l||!u&&!d||u&&c&&!d},r.isDisabled=function(){var o=r.props.disabled,l=r.props.context.disabled;return!!(l||o)},r.isCheckable=function(){var o=r.props.checkable,l=r.props.context.checkable;return!l||o===!1?!1:l},r.syncLoadData=function(o){var l=o.expanded,c=o.loading,u=o.loaded,d=r.props.context,f=d.loadData,p=d.onNodeLoad;c||f&&l&&!r.isLeaf()&&!r.hasChildren()&&!u&&p(Nt(r.props))},r.isDraggable=function(){var o=r.props,l=o.data,c=o.context.draggable;return!!(c&&(!c.nodeDraggable||c.nodeDraggable(l)))},r.renderDragHandler=function(){var o=r.props.context,l=o.draggable,c=o.prefixCls;return l?.icon?y.createElement("span",{className:"".concat(c,"-draggable-icon")},l.icon):null},r.renderSwitcherIconDom=function(o){var l=r.props.switcherIcon,c=r.props.context.switcherIcon,u=l||c;return typeof u=="function"?u((0,Kt.Z)((0,Kt.Z)({},r.props),{},{isLeaf:o})):u},r.renderSwitcher=function(){var o=r.props.expanded,l=r.props.context.prefixCls;if(r.isLeaf()){var c=r.renderSwitcherIconDom(!0);return c!==!1?y.createElement("span",{className:Ce()("".concat(l,"-switcher"),"".concat(l,"-switcher-noop"))},c):null}var u=Ce()("".concat(l,"-switcher"),"".concat(l,"-switcher_").concat(o?mu:yu)),d=r.renderSwitcherIconDom(!1);return d!==!1?y.createElement("span",{onClick:r.onExpand,className:u},d):null},r.renderCheckbox=function(){var o=r.props,l=o.checked,c=o.halfChecked,u=o.disableCheckbox,d=r.props.context.prefixCls,f=r.isDisabled(),p=r.isCheckable();if(!p)return null;var v=typeof p!="boolean"?p:null;return y.createElement("span",{className:Ce()("".concat(d,"-checkbox"),l&&"".concat(d,"-checkbox-checked"),!l&&c&&"".concat(d,"-checkbox-indeterminate"),(f||u)&&"".concat(d,"-checkbox-disabled")),onClick:r.onCheck},v)},r.renderIcon=function(){var o=r.props.loading,l=r.props.context.prefixCls;return y.createElement("span",{className:Ce()("".concat(l,"-iconEle"),"".concat(l,"-icon__").concat(r.getNodeState()||"docu"),o&&"".concat(l,"-icon_loading"))})},r.renderSelector=function(){var o=r.state.dragNodeHighlight,l=r.props,c=l.title,u=c===void 0?E0:c,d=l.selected,f=l.icon,p=l.loading,v=l.data,h=r.props.context,g=h.prefixCls,m=h.showIcon,E=h.icon,b=h.loadData,C=h.titleRender,D=r.isDisabled(),x="".concat(g,"-node-content-wrapper"),S;if(m){var M=f||E;S=M?y.createElement("span",{className:Ce()("".concat(g,"-iconEle"),"".concat(g,"-icon__customize"))},typeof M=="function"?M(r.props):M):r.renderIcon()}else b&&p&&(S=r.renderIcon());var w;typeof u=="function"?w=u(v):C?w=C(v):w=u;var T=y.createElement("span",{className:"".concat(g,"-title")},w);return y.createElement("span",{ref:r.setSelectHandle,title:typeof u=="string"?u:"",className:Ce()("".concat(x),"".concat(x,"-").concat(r.getNodeState()||"normal"),!D&&(d||o)&&"".concat(g,"-node-selected")),onMouseEnter:r.onMouseEnter,onMouseLeave:r.onMouseLeave,onContextMenu:r.onContextMenu,onClick:r.onSelectorClick,onDoubleClick:r.onSelectorDoubleClick},S,T,r.renderDropIndicator())},r.renderDropIndicator=function(){var o=r.props,l=o.disabled,c=o.eventKey,u=r.props.context,d=u.draggable,f=u.dropLevelOffset,p=u.dropPosition,v=u.prefixCls,h=u.indent,g=u.dropIndicatorRender,m=u.dragOverNodeKey,E=u.direction,b=!!d,C=!l&&b&&m===c,D=h??r.cacheIndent;return r.cacheIndent=h,C?g({dropPosition:p,dropLevelOffset:f,indent:D,prefixCls:v,direction:E}):null},r}return(0,uu.Z)(n,[{key:"componentDidMount",value:function(){this.syncLoadData(this.props)}},{key:"componentDidUpdate",value:function(){this.syncLoadData(this.props)}},{key:"isSelectable",value:function(){var a=this.props.selectable,i=this.props.context.selectable;return typeof a=="boolean"?a:i}},{key:"render",value:function(){var a,i=this.props,s=i.eventKey,o=i.className,l=i.style,c=i.dragOver,u=i.dragOverGapTop,d=i.dragOverGapBottom,f=i.isLeaf,p=i.isStart,v=i.isEnd,h=i.expanded,g=i.selected,m=i.checked,E=i.halfChecked,b=i.loading,C=i.domRef,D=i.active,x=i.data,S=i.onMouseMove,M=i.selectable,w=(0,ba.Z)(i,y0),T=this.props.context,R=T.prefixCls,k=T.filterTreeNode,P=T.keyEntities,L=T.dropContainerKey,A=T.dropTargetKey,I=T.draggingNodeKey,_=this.isDisabled(),B=(0,pu.Z)(w,{aria:!0,data:!0}),z=ie(P,s)||{},N=z.level,F=v[v.length-1],W=this.isDraggable(),$=!_&&W,V=I===s,K=M!==void 0?{"aria-selected":!!M}:void 0;return y.createElement("div",(0,be.Z)({ref:C,className:Ce()(o,"".concat(R,"-treenode"),(a={},(0,Tt.Z)(a,"".concat(R,"-treenode-disabled"),_),(0,Tt.Z)(a,"".concat(R,"-treenode-switcher-").concat(h?"open":"close"),!f),(0,Tt.Z)(a,"".concat(R,"-treenode-checkbox-checked"),m),(0,Tt.Z)(a,"".concat(R,"-treenode-checkbox-indeterminate"),E),(0,Tt.Z)(a,"".concat(R,"-treenode-selected"),g),(0,Tt.Z)(a,"".concat(R,"-treenode-loading"),b),(0,Tt.Z)(a,"".concat(R,"-treenode-active"),D),(0,Tt.Z)(a,"".concat(R,"-treenode-leaf-last"),F),(0,Tt.Z)(a,"".concat(R,"-treenode-draggable"),W),(0,Tt.Z)(a,"dragging",V),(0,Tt.Z)(a,"drop-target",A===s),(0,Tt.Z)(a,"drop-container",L===s),(0,Tt.Z)(a,"drag-over",!_&&c),(0,Tt.Z)(a,"drag-over-gap-top",!_&&u),(0,Tt.Z)(a,"drag-over-gap-bottom",!_&&d),(0,Tt.Z)(a,"filter-node",k&&k(Nt(this.props))),a)),style:l,draggable:$,"aria-grabbed":V,onDragStart:$?this.onDragStart:void 0,onDragEnter:W?this.onDragEnter:void 0,onDragOver:W?this.onDragOver:void 0,onDragLeave:W?this.onDragLeave:void 0,onDrop:W?this.onDrop:void 0,onDragEnd:W?this.onDragEnd:void 0,onMouseMove:S},K,B),y.createElement(u0,{prefixCls:R,level:N,isStart:p,isEnd:v}),this.renderDragHandler(),this.renderSwitcher(),this.renderCheckbox(),this.renderSelector())}}]),n}(y.Component),xo=function(e){return y.createElement(bo.Consumer,null,function(n){return y.createElement(b0,(0,be.Z)({},e,{context:n}))})};xo.displayName="TreeNode",xo.isTreeNode=1;const So=xo;function C0(t,e){var n=y.useState(!1),r=(0,ur.Z)(n,2),a=r[0],i=r[1];y.useLayoutEffect(function(){if(a)return t(),function(){e()}},[a]),y.useLayoutEffect(function(){return i(!0),function(){i(!1)}},[])}var x0=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],Eu=function(e,n){var r=e.className,a=e.style,i=e.motion,s=e.motionNodes,o=e.motionType,l=e.onMotionStart,c=e.onMotionEnd,u=e.active,d=e.treeNodeRequiredProps,f=(0,ba.Z)(e,x0),p=y.useState(!0),v=(0,ur.Z)(p,2),h=v[0],g=v[1],m=y.useContext(bo),E=m.prefixCls,b=s&&o!=="hide";(0,hu.Z)(function(){s&&b!==h&&g(b)},[s]);var C=function(){s&&l()},D=y.useRef(!1),x=function(){s&&!D.current&&(D.current=!0,c())};C0(C,x);var S=function(w){b===w&&x()};return s?y.createElement(l0.Z,(0,be.Z)({ref:n,visible:h},i,{motionAppear:o==="show",onVisibleChanged:S}),function(M,w){var T=M.className,R=M.style;return y.createElement("div",{ref:w,className:Ce()("".concat(E,"-treenode-motion"),T),style:R},s.map(function(k){var P=(0,be.Z)({},(vu(k.data),k.data)),L=k.title,A=k.key,I=k.isStart,_=k.isEnd;delete P.children;var B=bn(A,d);return y.createElement(So,(0,be.Z)({},P,B,{title:L,active:u,data:k.data,key:A,isStart:I,isEnd:_}))}))}):y.createElement(So,(0,be.Z)({domRef:n,className:r,style:a},f,{active:u}))};Eu.displayName="MotionTreeNode";var S0=y.forwardRef(Eu);const D0=S0;function w0(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=t.length,r=e.length;if(Math.abs(n-r)!==1)return{add:!1,key:null};function a(i,s){var o=new Map;i.forEach(function(c){o.set(c,!0)});var l=s.filter(function(c){return!o.has(c)});return l.length===1?l[0]:null}return n<r?{add:!0,key:a(t,e)}:{add:!1,key:a(e,t)}}function bu(t,e,n){var r=t.findIndex(function(o){return o.key===n}),a=t[r+1],i=e.findIndex(function(o){return o.key===n});if(a){var s=e.findIndex(function(o){return o.key===a.key});return e.slice(i+1,s)}return e.slice(i+1)}var k0=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],Cu={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},M0=function(){},dr="RC_TREE_MOTION_".concat(Math.random()),Do={key:dr},xu={key:dr,level:0,index:0,pos:"0",node:Do,nodes:[Do]},Su={parent:null,children:[],pos:xu.pos,data:Do,title:null,key:dr,isStart:[],isEnd:[]};function Du(t,e,n,r){return e===!1||!n?t:t.slice(0,Math.ceil(n/r)+1)}function wu(t){var e=t.key,n=t.pos;return En(e,n)}function T0(t){for(var e=String(t.data.key),n=t;n.parent;)n=n.parent,e="".concat(n.data.key," > ").concat(e);return e}var ku=y.forwardRef(function(t,e){var n=t.prefixCls,r=t.data,a=t.selectable,i=t.checkable,s=t.expandedKeys,o=t.selectedKeys,l=t.checkedKeys,c=t.loadedKeys,u=t.loadingKeys,d=t.halfCheckedKeys,f=t.keyEntities,p=t.disabled,v=t.dragging,h=t.dragOverNodeKey,g=t.dropPosition,m=t.motion,E=t.height,b=t.itemHeight,C=t.virtual,D=t.focusable,x=t.activeItem,S=t.focused,M=t.tabIndex,w=t.onKeyDown,T=t.onFocus,R=t.onBlur,k=t.onActiveChange,P=t.onListChangeStart,L=t.onListChangeEnd,A=(0,ba.Z)(t,k0),I=y.useRef(null),_=y.useRef(null);y.useImperativeHandle(e,function(){return{scrollTo:function(yt){I.current.scrollTo(yt)},getIndentWidth:function(){return _.current.offsetWidth}}});var B=y.useState(s),z=(0,ur.Z)(B,2),N=z[0],F=z[1],W=y.useState(r),$=(0,ur.Z)(W,2),V=$[0],K=$[1],X=y.useState(r),q=(0,ur.Z)(X,2),tt=q[0],et=q[1],H=y.useState([]),Z=(0,ur.Z)(H,2),ut=Z[0],at=Z[1],Ot=y.useState(null),pt=(0,ur.Z)(Ot,2),dt=pt[0],gt=pt[1],it=y.useRef(r);it.current=r;function lt(){var ht=it.current;K(ht),et(ht),at([]),gt(null),L()}(0,hu.Z)(function(){F(s);var ht=w0(N,s);if(ht.key!==null)if(ht.add){var yt=V.findIndex(function(vr){var Se=vr.key;return Se===ht.key}),xt=Du(bu(V,r,ht.key),C,E,b),Ut=V.slice();Ut.splice(yt+1,0,Su),et(Ut),at(xt),gt("show")}else{var te=r.findIndex(function(vr){var Se=vr.key;return Se===ht.key}),xe=Du(bu(r,V,ht.key),C,E,b),pr=r.slice();pr.splice(te+1,0,Su),et(pr),at(xe),gt("hide")}else V!==r&&(K(r),et(r))},[s,r]),y.useEffect(function(){v||lt()},[v]);var ft=m?tt:r,Wt={expandedKeys:s,selectedKeys:o,loadedKeys:c,loadingKeys:u,checkedKeys:l,halfCheckedKeys:d,dragOverNodeKey:h,dropPosition:g,keyEntities:f};return y.createElement(y.Fragment,null,S&&x&&y.createElement("span",{style:Cu,"aria-live":"assertive"},T0(x)),y.createElement("div",null,y.createElement("input",{style:Cu,disabled:D===!1||p,tabIndex:D!==!1?M:null,onKeyDown:w,onFocus:T,onBlur:R,value:"",onChange:M0,"aria-label":"for screen reader"})),y.createElement("div",{className:"".concat(n,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},y.createElement("div",{className:"".concat(n,"-indent")},y.createElement("div",{ref:_,className:"".concat(n,"-indent-unit")}))),y.createElement(s0.Z,(0,be.Z)({},A,{data:ft,itemKey:wu,height:E,fullHeight:!1,virtual:C,itemHeight:b,prefixCls:"".concat(n,"-list"),ref:I,onVisibleChange:function(yt,xt){var Ut=new Set(yt),te=xt.filter(function(xe){return!Ut.has(xe)});te.some(function(xe){return wu(xe)===dr})&&lt()}}),function(ht){var yt=ht.pos,xt=(0,be.Z)({},(vu(ht.data),ht.data)),Ut=ht.title,te=ht.key,xe=ht.isStart,pr=ht.isEnd,vr=En(te,yt);delete xt.key,delete xt.children;var Se=bn(vr,Wt);return y.createElement(D0,(0,be.Z)({},xt,Se,{title:Ut,active:!!x&&te===x.key,pos:yt,data:ht.data,isStart:xe,isEnd:pr,motion:m,motionNodes:te===dr?ut:null,motionType:dt,onMotionStart:P,onMotionEnd:lt,treeNodeRequiredProps:Wt,onMouseMove:function(){k(null)}}))}))});ku.displayName="NodeList";const R0=ku;var O0=null;function Oe(t,e){if(!t)return[];var n=t.slice(),r=n.indexOf(e);return r>=0&&n.splice(r,1),n}function $e(t,e){var n=(t||[]).slice();return n.indexOf(e)===-1&&n.push(e),n}function wo(t){return t.split("-")}function P0(t,e){var n=[],r=ie(e,t);function a(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];i.forEach(function(s){var o=s.key,l=s.children;n.push(o),a(l)})}return a(r.children),n}function L0(t){if(t.parent){var e=wo(t.pos);return Number(e[e.length-1])===t.parent.children.length-1}return!1}function A0(t){var e=wo(t.pos);return Number(e[e.length-1])===0}function Mu(t,e,n,r,a,i,s,o,l,c){var u,d=t.clientX,f=t.clientY,p=t.target.getBoundingClientRect(),v=p.top,h=p.height,g=(c==="rtl"?-1:1)*((a?.x||0)-d),m=(g-12)/r,E=ie(o,n.props.eventKey);if(f<v+h/2){var b=s.findIndex(function(A){return A.key===E.key}),C=b<=0?0:b-1,D=s[C].key;E=ie(o,D)}var x=E.key,S=E,M=E.key,w=0,T=0;if(!l.includes(x))for(var R=0;R<m&&L0(E);R+=1)E=E.parent,T+=1;var k=e.props.data,P=E.node,L=!0;return A0(E)&&E.level===0&&f<v+h/2&&i({dragNode:k,dropNode:P,dropPosition:-1})&&E.key===n.props.eventKey?w=-1:(S.children||[]).length&&l.includes(M)?i({dragNode:k,dropNode:P,dropPosition:0})?w=0:L=!1:T===0?m>-1.5?i({dragNode:k,dropNode:P,dropPosition:1})?w=1:L=!1:i({dragNode:k,dropNode:P,dropPosition:0})?w=0:i({dragNode:k,dropNode:P,dropPosition:1})?w=1:L=!1:i({dragNode:k,dropNode:P,dropPosition:1})?w=1:L=!1,{dropPosition:w,dropLevelOffset:T,dropTargetKey:E.key,dropTargetPos:E.pos,dragOverNodeKey:M,dropContainerKey:w===0?null:((u=E.parent)===null||u===void 0?void 0:u.key)||null,dropAllowed:L}}function Tu(t,e){if(t){var n=e.multiple;return n?t.slice():t.length?[t[0]]:t}}var N0=function(e){return e};function I0(t,e){if(!t)return[];var n=e||{},r=n.processProps,a=r===void 0?N0:r,i=Array.isArray(t)?t:[t];return i.map(function(s){var o=s.children,l=_objectWithoutProperties(s,O0),c=I0(o,e);return React.createElement(TreeNode,_extends({key:l.key},a(l)),c)})}function ko(t){if(!t)return null;var e;if(Array.isArray(t))e={checkedKeys:t,halfCheckedKeys:void 0};else if((0,Eo.Z)(t)==="object")e={checkedKeys:t.checked||void 0,halfCheckedKeys:t.halfChecked||void 0};else return(0,Ye.ZP)(!1,"`checkedKeys` is not an array or an object"),null;return e}function Ru(t,e){var n=new Set;function r(a){if(!n.has(a)){var i=ie(e,a);if(i){n.add(a);var s=i.parent,o=i.node;o.disabled||s&&r(s.key)}}}return(t||[]).forEach(function(a){r(a)}),(0,cr.Z)(n)}function Ou(t,e){var n=new Set;return t.forEach(function(r){e.has(r)||n.add(r)}),n}function B0(t){var e=t||{},n=e.disabled,r=e.disableCheckbox,a=e.checkable;return!!(n||r)||a===!1}function _0(t,e,n,r){for(var a=new Set(t),i=new Set,s=0;s<=n;s+=1){var o=e.get(s)||new Set;o.forEach(function(d){var f=d.key,p=d.node,v=d.children,h=v===void 0?[]:v;a.has(f)&&!r(p)&&h.filter(function(g){return!r(g.node)}).forEach(function(g){a.add(g.key)})})}for(var l=new Set,c=n;c>=0;c-=1){var u=e.get(c)||new Set;u.forEach(function(d){var f=d.parent,p=d.node;if(!(r(p)||!d.parent||l.has(d.parent.key))){if(r(d.parent.node)){l.add(f.key);return}var v=!0,h=!1;(f.children||[]).filter(function(g){return!r(g.node)}).forEach(function(g){var m=g.key,E=a.has(m);v&&!E&&(v=!1),!h&&(E||i.has(m))&&(h=!0)}),v&&a.add(f.key),h&&i.add(f.key),l.add(f.key)}})}return{checkedKeys:Array.from(a),halfCheckedKeys:Array.from(Ou(i,a))}}function z0(t,e,n,r,a){for(var i=new Set(t),s=new Set(e),o=0;o<=r;o+=1){var l=n.get(o)||new Set;l.forEach(function(f){var p=f.key,v=f.node,h=f.children,g=h===void 0?[]:h;!i.has(p)&&!s.has(p)&&!a(v)&&g.filter(function(m){return!a(m.node)}).forEach(function(m){i.delete(m.key)})})}s=new Set;for(var c=new Set,u=r;u>=0;u-=1){var d=n.get(u)||new Set;d.forEach(function(f){var p=f.parent,v=f.node;if(!(a(v)||!f.parent||c.has(f.parent.key))){if(a(f.parent.node)){c.add(p.key);return}var h=!0,g=!1;(p.children||[]).filter(function(m){return!a(m.node)}).forEach(function(m){var E=m.key,b=i.has(E);h&&!b&&(h=!1),!g&&(b||s.has(E))&&(g=!0)}),h||i.delete(p.key),g&&s.add(p.key),c.add(p.key)}})}return{checkedKeys:Array.from(i),halfCheckedKeys:Array.from(Ou(s,i))}}function Mo(t,e,n,r){var a=[],i;r?i=r:i=B0;var s=new Set(t.filter(function(u){var d=!!ie(n,u);return d||a.push(u),d})),o=new Map,l=0;Object.keys(n).forEach(function(u){var d=n[u],f=d.level,p=o.get(f);p||(p=new Set,o.set(f,p)),p.add(d),l=Math.max(l,f)}),(0,Ye.ZP)(!a.length,"Tree missing follow keys: ".concat(a.slice(0,100).map(function(u){return"'".concat(u,"'")}).join(", ")));var c;return e===!0?c=_0(s,o,l,i):c=z0(s,e.halfCheckedKeys,o,l,i),c}var G0=10,To=function(t){(0,du.Z)(n,t);var e=(0,fu.Z)(n);function n(){var r;(0,cu.Z)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=e.call.apply(e,[this].concat(i)),r.destroyed=!1,r.delayedDragEnterLogic=void 0,r.loadingRetryTimes={},r.state={keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:Ca()},r.dragStartMousePosition=null,r.dragNode=void 0,r.currentMouseOverDroppableNodeKey=null,r.listRef=y.createRef(),r.onNodeDragStart=function(o,l){var c=r.state,u=c.expandedKeys,d=c.keyEntities,f=r.props.onDragStart,p=l.props.eventKey;r.dragNode=l,r.dragStartMousePosition={x:o.clientX,y:o.clientY};var v=Oe(u,p);r.setState({draggingNodeKey:p,dragChildrenKeys:P0(p,d),indent:r.listRef.current.getIndentWidth()}),r.setExpandedKeys(v),window.addEventListener("dragend",r.onWindowDragEnd),f?.({event:o,node:Nt(l.props)})},r.onNodeDragEnter=function(o,l){var c=r.state,u=c.expandedKeys,d=c.keyEntities,f=c.dragChildrenKeys,p=c.flattenNodes,v=c.indent,h=r.props,g=h.onDragEnter,m=h.onExpand,E=h.allowDrop,b=h.direction,C=l.props,D=C.pos,x=C.eventKey,S=(0,He.Z)(r),M=S.dragNode;if(r.currentMouseOverDroppableNodeKey!==x&&(r.currentMouseOverDroppableNodeKey=x),!M){r.resetDragState();return}var w=Mu(o,M,l,v,r.dragStartMousePosition,E,p,d,u,b),T=w.dropPosition,R=w.dropLevelOffset,k=w.dropTargetKey,P=w.dropContainerKey,L=w.dropTargetPos,A=w.dropAllowed,I=w.dragOverNodeKey;if(f.indexOf(k)!==-1||!A){r.resetDragState();return}if(r.delayedDragEnterLogic||(r.delayedDragEnterLogic={}),Object.keys(r.delayedDragEnterLogic).forEach(function(_){clearTimeout(r.delayedDragEnterLogic[_])}),M.props.eventKey!==l.props.eventKey&&(o.persist(),r.delayedDragEnterLogic[D]=window.setTimeout(function(){if(r.state.draggingNodeKey!==null){var _=(0,cr.Z)(u),B=ie(d,l.props.eventKey);B&&(B.children||[]).length&&(_=$e(u,l.props.eventKey)),"expandedKeys"in r.props||r.setExpandedKeys(_),m?.(_,{node:Nt(l.props),expanded:!0,nativeEvent:o.nativeEvent})}},800)),M.props.eventKey===k&&R===0){r.resetDragState();return}r.setState({dragOverNodeKey:I,dropPosition:T,dropLevelOffset:R,dropTargetKey:k,dropContainerKey:P,dropTargetPos:L,dropAllowed:A}),g?.({event:o,node:Nt(l.props),expandedKeys:u})},r.onNodeDragOver=function(o,l){var c=r.state,u=c.dragChildrenKeys,d=c.flattenNodes,f=c.keyEntities,p=c.expandedKeys,v=c.indent,h=r.props,g=h.onDragOver,m=h.allowDrop,E=h.direction,b=(0,He.Z)(r),C=b.dragNode;if(C){var D=Mu(o,C,l,v,r.dragStartMousePosition,m,d,f,p,E),x=D.dropPosition,S=D.dropLevelOffset,M=D.dropTargetKey,w=D.dropContainerKey,T=D.dropAllowed,R=D.dropTargetPos,k=D.dragOverNodeKey;u.indexOf(M)!==-1||!T||(C.props.eventKey===M&&S===0?r.state.dropPosition===null&&r.state.dropLevelOffset===null&&r.state.dropTargetKey===null&&r.state.dropContainerKey===null&&r.state.dropTargetPos===null&&r.state.dropAllowed===!1&&r.state.dragOverNodeKey===null||r.resetDragState():x===r.state.dropPosition&&S===r.state.dropLevelOffset&&M===r.state.dropTargetKey&&w===r.state.dropContainerKey&&R===r.state.dropTargetPos&&T===r.state.dropAllowed&&k===r.state.dragOverNodeKey||r.setState({dropPosition:x,dropLevelOffset:S,dropTargetKey:M,dropContainerKey:w,dropTargetPos:R,dropAllowed:T,dragOverNodeKey:k}),g?.({event:o,node:Nt(l.props)}))}},r.onNodeDragLeave=function(o,l){r.currentMouseOverDroppableNodeKey===l.props.eventKey&&!o.currentTarget.contains(o.relatedTarget)&&(r.resetDragState(),r.currentMouseOverDroppableNodeKey=null);var c=r.props.onDragLeave;c?.({event:o,node:Nt(l.props)})},r.onWindowDragEnd=function(o){r.onNodeDragEnd(o,null,!0),window.removeEventListener("dragend",r.onWindowDragEnd)},r.onNodeDragEnd=function(o,l){var c=r.props.onDragEnd;r.setState({dragOverNodeKey:null}),r.cleanDragState(),c?.({event:o,node:Nt(l.props)}),r.dragNode=null,window.removeEventListener("dragend",r.onWindowDragEnd)},r.onNodeDrop=function(o,l){var c,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=r.state,f=d.dragChildrenKeys,p=d.dropPosition,v=d.dropTargetKey,h=d.dropTargetPos,g=d.dropAllowed;if(g){var m=r.props.onDrop;if(r.setState({dragOverNodeKey:null}),r.cleanDragState(),v!==null){var E=(0,Kt.Z)((0,Kt.Z)({},bn(v,r.getTreeNodeRequiredProps())),{},{active:((c=r.getActiveItem())===null||c===void 0?void 0:c.key)===v,data:ie(r.state.keyEntities,v).node}),b=f.indexOf(v)!==-1;(0,Ye.ZP)(!b,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var C=wo(h),D={event:o,node:Nt(E),dragNode:r.dragNode?Nt(r.dragNode.props):null,dragNodesKeys:[r.dragNode.props.eventKey].concat(f),dropToGap:p!==0,dropPosition:p+Number(C[C.length-1])};u||m?.(D),r.dragNode=null}}},r.cleanDragState=function(){var o=r.state.draggingNodeKey;o!==null&&r.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),r.dragStartMousePosition=null,r.currentMouseOverDroppableNodeKey=null},r.triggerExpandActionExpand=function(o,l){var c=r.state,u=c.expandedKeys,d=c.flattenNodes,f=l.expanded,p=l.key,v=l.isLeaf;if(!(v||o.shiftKey||o.metaKey||o.ctrlKey)){var h=d.filter(function(m){return m.key===p})[0],g=Nt((0,Kt.Z)((0,Kt.Z)({},bn(p,r.getTreeNodeRequiredProps())),{},{data:h.data}));r.setExpandedKeys(f?Oe(u,p):$e(u,p)),r.onNodeExpand(o,g)}},r.onNodeClick=function(o,l){var c=r.props,u=c.onClick,d=c.expandAction;d==="click"&&r.triggerExpandActionExpand(o,l),u?.(o,l)},r.onNodeDoubleClick=function(o,l){var c=r.props,u=c.onDoubleClick,d=c.expandAction;d==="doubleClick"&&r.triggerExpandActionExpand(o,l),u?.(o,l)},r.onNodeSelect=function(o,l){var c=r.state.selectedKeys,u=r.state,d=u.keyEntities,f=u.fieldNames,p=r.props,v=p.onSelect,h=p.multiple,g=l.selected,m=l[f.key],E=!g;E?h?c=$e(c,m):c=[m]:c=Oe(c,m);var b=c.map(function(C){var D=ie(d,C);return D?D.node:null}).filter(function(C){return C});r.setUncontrolledState({selectedKeys:c}),v?.(c,{event:"select",selected:E,node:l,selectedNodes:b,nativeEvent:o.nativeEvent})},r.onNodeCheck=function(o,l,c){var u=r.state,d=u.keyEntities,f=u.checkedKeys,p=u.halfCheckedKeys,v=r.props,h=v.checkStrictly,g=v.onCheck,m=l.key,E,b={event:"check",node:l,checked:c,nativeEvent:o.nativeEvent};if(h){var C=c?$e(f,m):Oe(f,m),D=Oe(p,m);E={checked:C,halfChecked:D},b.checkedNodes=C.map(function(R){return ie(d,R)}).filter(function(R){return R}).map(function(R){return R.node}),r.setUncontrolledState({checkedKeys:C})}else{var x=Mo([].concat((0,cr.Z)(f),[m]),!0,d),S=x.checkedKeys,M=x.halfCheckedKeys;if(!c){var w=new Set(S);w.delete(m);var T=Mo(Array.from(w),{checked:!1,halfCheckedKeys:M},d);S=T.checkedKeys,M=T.halfCheckedKeys}E=S,b.checkedNodes=[],b.checkedNodesPositions=[],b.halfCheckedKeys=M,S.forEach(function(R){var k=ie(d,R);if(k){var P=k.node,L=k.pos;b.checkedNodes.push(P),b.checkedNodesPositions.push({node:P,pos:L})}}),r.setUncontrolledState({checkedKeys:S},!1,{halfCheckedKeys:M})}g?.(E,b)},r.onNodeLoad=function(o){var l=o.key,c=new Promise(function(u,d){r.setState(function(f){var p=f.loadedKeys,v=p===void 0?[]:p,h=f.loadingKeys,g=h===void 0?[]:h,m=r.props,E=m.loadData,b=m.onLoad;if(!E||v.indexOf(l)!==-1||g.indexOf(l)!==-1)return null;var C=E(o);return C.then(function(){var D=r.state.loadedKeys,x=$e(D,l);b?.(x,{event:"load",node:o}),r.setUncontrolledState({loadedKeys:x}),r.setState(function(S){return{loadingKeys:Oe(S.loadingKeys,l)}}),u()}).catch(function(D){if(r.setState(function(S){return{loadingKeys:Oe(S.loadingKeys,l)}}),r.loadingRetryTimes[l]=(r.loadingRetryTimes[l]||0)+1,r.loadingRetryTimes[l]>=G0){var x=r.state.loadedKeys;(0,Ye.ZP)(!1,"Retry for `loadData` many times but still failed. No more retry."),r.setUncontrolledState({loadedKeys:$e(x,l)}),u()}d(D)}),{loadingKeys:$e(g,l)}})});return c.catch(function(){}),c},r.onNodeMouseEnter=function(o,l){var c=r.props.onMouseEnter;c?.({event:o,node:l})},r.onNodeMouseLeave=function(o,l){var c=r.props.onMouseLeave;c?.({event:o,node:l})},r.onNodeContextMenu=function(o,l){var c=r.props.onRightClick;c&&(o.preventDefault(),c({event:o,node:l}))},r.onFocus=function(){var o=r.props.onFocus;r.setState({focused:!0});for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];o?.apply(void 0,c)},r.onBlur=function(){var o=r.props.onBlur;r.setState({focused:!1}),r.onActiveChange(null);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];o?.apply(void 0,c)},r.getTreeNodeRequiredProps=function(){var o=r.state,l=o.expandedKeys,c=o.selectedKeys,u=o.loadedKeys,d=o.loadingKeys,f=o.checkedKeys,p=o.halfCheckedKeys,v=o.dragOverNodeKey,h=o.dropPosition,g=o.keyEntities;return{expandedKeys:l||[],selectedKeys:c||[],loadedKeys:u||[],loadingKeys:d||[],checkedKeys:f||[],halfCheckedKeys:p||[],dragOverNodeKey:v,dropPosition:h,keyEntities:g}},r.setExpandedKeys=function(o){var l=r.state,c=l.treeData,u=l.fieldNames,d=Co(c,o,u);r.setUncontrolledState({expandedKeys:o,flattenNodes:d},!0)},r.onNodeExpand=function(o,l){var c=r.state.expandedKeys,u=r.state,d=u.listChanging,f=u.fieldNames,p=r.props,v=p.onExpand,h=p.loadData,g=l.expanded,m=l[f.key];if(!d){var E=c.indexOf(m),b=!g;if((0,Ye.ZP)(g&&E!==-1||!g&&E===-1,"Expand state not sync with index check"),b?c=$e(c,m):c=Oe(c,m),r.setExpandedKeys(c),v?.(c,{node:l,expanded:b,nativeEvent:o.nativeEvent}),b&&h){var C=r.onNodeLoad(l);C&&C.then(function(){var D=Co(r.state.treeData,c,f);r.setUncontrolledState({flattenNodes:D})}).catch(function(){var D=r.state.expandedKeys,x=Oe(D,m);r.setExpandedKeys(x)})}}},r.onListChangeStart=function(){r.setUncontrolledState({listChanging:!0})},r.onListChangeEnd=function(){setTimeout(function(){r.setUncontrolledState({listChanging:!1})})},r.onActiveChange=function(o){var l=r.state.activeKey,c=r.props.onActiveChange;l!==o&&(r.setState({activeKey:o}),o!==null&&r.scrollTo({key:o}),c?.(o))},r.getActiveItem=function(){var o=r.state,l=o.activeKey,c=o.flattenNodes;return l===null?null:c.find(function(u){var d=u.key;return d===l})||null},r.offsetActiveKey=function(o){var l=r.state,c=l.flattenNodes,u=l.activeKey,d=c.findIndex(function(v){var h=v.key;return h===u});d===-1&&o<0&&(d=c.length),d=(d+o+c.length)%c.length;var f=c[d];if(f){var p=f.key;r.onActiveChange(p)}else r.onActiveChange(null)},r.onKeyDown=function(o){var l=r.state,c=l.activeKey,u=l.expandedKeys,d=l.checkedKeys,f=l.fieldNames,p=r.props,v=p.onKeyDown,h=p.checkable,g=p.selectable;switch(o.which){case Lr.Z.UP:{r.offsetActiveKey(-1),o.preventDefault();break}case Lr.Z.DOWN:{r.offsetActiveKey(1),o.preventDefault();break}}var m=r.getActiveItem();if(m&&m.data){var E=r.getTreeNodeRequiredProps(),b=m.data.isLeaf===!1||!!(m.data[f.children]||[]).length,C=Nt((0,Kt.Z)((0,Kt.Z)({},bn(c,E)),{},{data:m.data,active:!0}));switch(o.which){case Lr.Z.LEFT:{b&&u.includes(c)?r.onNodeExpand({},C):m.parent&&r.onActiveChange(m.parent.key),o.preventDefault();break}case Lr.Z.RIGHT:{b&&!u.includes(c)?r.onNodeExpand({},C):m.children&&m.children.length&&r.onActiveChange(m.children[0].key),o.preventDefault();break}case Lr.Z.ENTER:case Lr.Z.SPACE:{h&&!C.disabled&&C.checkable!==!1&&!C.disableCheckbox?r.onNodeCheck({},C,!d.includes(c)):!h&&g&&!C.disabled&&C.selectable!==!1&&r.onNodeSelect({},C);break}}}v?.(o)},r.setUncontrolledState=function(o){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!r.destroyed){var u=!1,d=!0,f={};Object.keys(o).forEach(function(p){if(p in r.props){d=!1;return}u=!0,f[p]=o[p]}),u&&(!l||d)&&r.setState((0,Kt.Z)((0,Kt.Z)({},f),c))}},r.scrollTo=function(o){r.listRef.current.scrollTo(o)},r}return(0,uu.Z)(n,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var a=this.props,i=a.activeKey,s=a.itemScrollOffset,o=s===void 0?0:s;i!==void 0&&i!==this.state.activeKey&&(this.setState({activeKey:i}),i!==null&&this.scrollTo({key:i,offset:o}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var a,i=this.state,s=i.focused,o=i.flattenNodes,l=i.keyEntities,c=i.draggingNodeKey,u=i.activeKey,d=i.dropLevelOffset,f=i.dropContainerKey,p=i.dropTargetKey,v=i.dropPosition,h=i.dragOverNodeKey,g=i.indent,m=this.props,E=m.prefixCls,b=m.className,C=m.style,D=m.showLine,x=m.focusable,S=m.tabIndex,M=S===void 0?0:S,w=m.selectable,T=m.showIcon,R=m.icon,k=m.switcherIcon,P=m.draggable,L=m.checkable,A=m.checkStrictly,I=m.disabled,_=m.motion,B=m.loadData,z=m.filterTreeNode,N=m.height,F=m.itemHeight,W=m.virtual,$=m.titleRender,V=m.dropIndicatorRender,K=m.onContextMenu,X=m.onScroll,q=m.direction,tt=m.rootClassName,et=m.rootStyle,H=(0,pu.Z)(this.props,{aria:!0,data:!0}),Z;return P&&((0,Eo.Z)(P)==="object"?Z=P:typeof P=="function"?Z={nodeDraggable:P}:Z={}),y.createElement(bo.Provider,{value:{prefixCls:E,selectable:w,showIcon:T,icon:R,switcherIcon:k,draggable:Z,draggingNodeKey:c,checkable:L,checkStrictly:A,disabled:I,keyEntities:l,dropLevelOffset:d,dropContainerKey:f,dropTargetKey:p,dropPosition:v,dragOverNodeKey:h,indent:g,direction:q,dropIndicatorRender:V,loadData:B,filterTreeNode:z,titleRender:$,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},y.createElement("div",{role:"tree",className:Ce()(E,b,tt,(a={},(0,Tt.Z)(a,"".concat(E,"-show-line"),D),(0,Tt.Z)(a,"".concat(E,"-focused"),s),(0,Tt.Z)(a,"".concat(E,"-active-focused"),u!==null),a)),style:et},y.createElement(R0,(0,be.Z)({ref:this.listRef,prefixCls:E,style:C,data:o,disabled:I,selectable:w,checkable:!!L,motion:_,dragging:c!==null,height:N,itemHeight:F,virtual:W,focusable:x,focused:s,tabIndex:M,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:K,onScroll:X},this.getTreeNodeRequiredProps(),H))))}}],[{key:"getDerivedStateFromProps",value:function(a,i){var s=i.prevProps,o={prevProps:a};function l(x){return!s&&x in a||s&&s[x]!==a[x]}var c,u=i.fieldNames;if(l("fieldNames")&&(u=Ca(a.fieldNames),o.fieldNames=u),l("treeData")?c=a.treeData:l("children")&&((0,Ye.ZP)(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),c=h0(a.children)),c){o.treeData=c;var d=m0(c,{fieldNames:u});o.keyEntities=(0,Kt.Z)((0,Tt.Z)({},dr,xu),d.keyEntities)}var f=o.keyEntities||i.keyEntities;if(l("expandedKeys")||s&&l("autoExpandParent"))o.expandedKeys=a.autoExpandParent||!s&&a.defaultExpandParent?Ru(a.expandedKeys,f):a.expandedKeys;else if(!s&&a.defaultExpandAll){var p=(0,Kt.Z)({},f);delete p[dr],o.expandedKeys=Object.keys(p).map(function(x){return p[x].key})}else!s&&a.defaultExpandedKeys&&(o.expandedKeys=a.autoExpandParent||a.defaultExpandParent?Ru(a.defaultExpandedKeys,f):a.defaultExpandedKeys);if(o.expandedKeys||delete o.expandedKeys,c||o.expandedKeys){var v=Co(c||i.treeData,o.expandedKeys||i.expandedKeys,u);o.flattenNodes=v}if(a.selectable&&(l("selectedKeys")?o.selectedKeys=Tu(a.selectedKeys,a):!s&&a.defaultSelectedKeys&&(o.selectedKeys=Tu(a.defaultSelectedKeys,a))),a.checkable){var h;if(l("checkedKeys")?h=ko(a.checkedKeys)||{}:!s&&a.defaultCheckedKeys?h=ko(a.defaultCheckedKeys)||{}:c&&(h=ko(a.checkedKeys)||{checkedKeys:i.checkedKeys,halfCheckedKeys:i.halfCheckedKeys}),h){var g=h,m=g.checkedKeys,E=m===void 0?[]:m,b=g.halfCheckedKeys,C=b===void 0?[]:b;if(!a.checkStrictly){var D=Mo(E,!0,f);E=D.checkedKeys,C=D.halfCheckedKeys}o.checkedKeys=E,o.halfCheckedKeys=C}}return l("loadedKeys")&&(o.loadedKeys=a.loadedKeys),o}}]),n}(y.Component);To.defaultProps={prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:o0,allowDrop:function(){return!0},expandAction:!1},To.TreeNode=So;const F0=To;function K0(t){return(0,lu.css)`
    .moveable-control-box {
      z-index: 999;
    }
    ,
    .rc-tree {
      margin: 0;
      margin-bottom: 15px;
      border: 1px solid transparent;

      &-focused:not(&-active-focused) {
        border-color: cyan;
      }

      .rc-tree-title {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
      }

      .rc-tree-treenode {
        margin: 0;
        padding: 1px;
        line-height: 24px;
        white-space: nowrap;
        list-style: none;
        outline: 0;

        display: flex;
        margin-bottom: 3px;
        cursor: pointer;

        .draggable {
          color: #333;
          -moz-user-select: none;
          -khtml-user-select: none;
          -webkit-user-select: none;
          user-select: none;
          /* Required to make elements draggable in old WebKit */
          // -khtml-user-drag: element;
          // -webkit-user-drag: element;
        }

        &.drop-container {
          > .draggable::after {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            box-shadow: inset 0 0 0 2px blue;
            content: '';
          }
          & ~ .rc-tree-treenode {
            border-left: 2px solid ${t.components.input.borderColor};
          }
        }
        &.drop-target {
          & ~ .rc-tree-treenode {
            border-left: none;
          }
        }
        &.filter-node {
          > .rc-tree-node-content-wrapper {
            color: #a60000 !important;
            font-weight: bold !important;
          }
        }
        ul {
          margin: 0;
          padding: 0 0 0 18px;
        }
        .rc-tree-node-content-wrapper {
          position: relative;
          display: inline-block;
          height: 24px;
          margin: 0;
          padding: 0;
          text-decoration: none;
          vertical-align: top;
          cursor: grab;
          flex-grow: 1;
          display: flex;

          border: 1px solid ${t.components.input.borderColor};
          border-radius: ${t.shape.radius.default};
          background: ${t.colors.background.secondary};
          min-height: ${t.spacing.gridSize*4}px;

          &:hover {
            border: 1px solid ${t.components.input.borderHover};
          }

          &.rc-tree-node-selected {
            border: 1px solid ${t.colors.primary.border};
            opacity: 1;
          }
        }

        span {
          &.rc-tree-checkbox,
          &.rc-tree-iconEle {
            display: inline-block;
            width: 16px;
            height: 16px;
            margin-right: 2px;
            line-height: 16px;
            vertical-align: -0.125em;
            background-color: transparent;
            background-repeat: no-repeat;
            background-attachment: scroll;
            border: 0 none;
            outline: none;
            cursor: pointer;

            &.rc-tree-icon__customize {
              background-image: none;
            }
          }
          &.rc-tree-switcher {
            display: flex;
            align-items: center;
            width: 16px;
            background-color: transparent;
            background-repeat: no-repeat;
            background-attachment: scroll;
            border: 0 none;
            outline: none;
            cursor: pointer;

            &.rc-tree-icon__customize {
              background-image: none;
            }
          }
          &.rc-tree-icon_loading {
            margin-right: 2px;
            vertical-align: top;
            background: url('data:image/gif;base64,R0lGODlhEAAQAKIGAMLY8YSx5HOm4Mjc88/g9Ofw+v///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFCgAGACwAAAAAEAAQAAADMGi6RbUwGjKIXCAA016PgRBElAVlG/RdLOO0X9nK61W39qvqiwz5Ls/rRqrggsdkAgAh+QQFCgAGACwCAAAABwAFAAADD2hqELAmiFBIYY4MAutdCQAh+QQFCgAGACwGAAAABwAFAAADD1hU1kaDOKMYCGAGEeYFCQAh+QQFCgAGACwKAAIABQAHAAADEFhUZjSkKdZqBQG0IELDQAIAIfkEBQoABgAsCgAGAAUABwAAAxBoVlRKgyjmlAIBqCDCzUoCACH5BAUKAAYALAYACgAHAAUAAAMPaGpFtYYMAgJgLogA610JACH5BAUKAAYALAIACgAHAAUAAAMPCAHWFiI4o1ghZZJB5i0JACH5BAUKAAYALAAABgAFAAcAAAMQCAFmIaEp1motpDQySMNFAgA7')
              no-repeat scroll 0 0 transparent;
          }
          &.rc-tree-switcher {
            &.rc-tree-switcher-noop {
              cursor: auto;
            }
            &.rc-tree-switcher_open {
              background-position: -93px -56px;
            }
            &.rc-tree-switcher_close {
              background-position: -75px -56px;
            }
          }
          &.rc-tree-checkbox {
            width: 13px;
            height: 13px;
            margin: 0 3px;
            background-position: 0 0;
            &-checked {
              background-position: -14px 0;
            }
            &-indeterminate {
              background-position: -14px -28px;
            }
            &-disabled {
              background-position: 0 -56px;
            }
            &.rc-tree-checkbox-checked.rc-tree-checkbox-disabled {
              background-position: -14px -56px;
            }
            &.rc-tree-checkbox-indeterminate.rc-tree-checkbox-disabled {
              position: relative;
              background: #ccc;
              border-radius: 3px;
              &::after {
                position: absolute;
                top: 5px;
                left: 3px;
                width: 5px;
                height: 0;
                border: 2px solid #fff;
                border-top: 0;
                border-left: 0;
                -webkit-transform: scale(1);
                transform: scale(1);
                content: ' ';
              }
            }
          }
        }
      }
      &:not(.rc-tree-show-line) {
        .rc-tree-treenode {
          .rc-tree-switcher-noop {
            background: none;
          }
        }
      }
      &.rc-tree-show-line {
        .rc-tree-treenode:not(:last-child) {
          > ul {
            background: url('data:image/gif;base64,R0lGODlhCQACAIAAAMzMzP///yH5BAEAAAEALAAAAAAJAAIAAAIEjI9pUAA7') 0 0
              repeat-y;
          }
          > .rc-tree-switcher-noop {
            background-position: -56px -18px;
          }
        }
        .rc-tree-treenode:last-child {
          > .rc-tree-switcher-noop {
            background-position: -56px -36px;
          }
        }
      }
      &-child-tree {
        display: none;
        &-open {
          display: block;
        }
      }
      &-treenode-disabled {
        > span:not(.rc-tree-switcher),
        > a,
        > a span {
          color: #767676;
          cursor: not-allowed;
        }
      }
      &-treenode-active {
        background: rgba(0, 0, 0, 0.1);
      }
      &-node-selected {
        opacity: 0.8;
      }
      &-icon__open {
        margin-right: 2px;
        vertical-align: top;
        background-position: -110px -16px;
      }
      &-icon__close {
        margin-right: 2px;
        vertical-align: top;
        background-position: -110px 0;
      }
      &-icon__docu {
        margin-right: 2px;
        vertical-align: top;
        background-position: -110px -32px;
      }
      &-icon__customize {
        margin-right: 2px;
        vertical-align: top;
      }
      &-title {
        display: inline-block;
      }
      &-indent {
        display: inline-block;
        height: 0;
        vertical-align: bottom;
      }
      &-indent-unit {
        display: inline-block;
        width: 16px;
      }

      &-draggable-icon {
        display: inline-flex;
        justify-content: center;
        width: 16px;
      }
    }
  `}var W0=G(63791);const V0=({settings:t,nodeData:e,setAllowSelection:n})=>{const r=e.dataRef,a=e.dataRef.getName(),i=(0,St.wW)(H0),s=t.layer,o=()=>{if(t?.layer)return t.layer.scene},l=p=>{(p.parent??s).doAction(Vt.Delete,p),n(!1)},c=p=>{(p.parent??s).doAction(Vt.Duplicate,p),n(!1)},u=(p,v)=>{p.onChange({...p.options,name:v})},d=p=>!!o()?.canRename(p),f=p=>p.options.type;return y.createElement(y.Fragment,null,y.createElement(W0.X,{name:a,onChange:p=>u(r,p),verifyLayerNameUniqueness:d??void 0}),y.createElement("div",{className:i.textWrapper},"\xA0 ",f(r)),!e.children&&y.createElement("div",{className:i.actionButtonsWrapper},y.createElement(ce.h,{name:"copy",title:"Duplicate",className:i.actionIcon,onClick:()=>c(r),tooltip:"Duplicate"}),y.createElement(ce.h,{name:"trash-alt",title:"remove",className:i.actionIcon,onClick:()=>l(r),tooltip:"Remove"})))},H0=t=>({actionButtonsWrapper:(0,U.css)({display:"flex",alignItems:"flex-end"}),actionIcon:(0,U.css)({color:t.colors.text.secondary,cursor:"pointer","&:hover":{color:t.colors.text.primary}}),textWrapper:(0,U.css)({display:"flex",alignItems:"center",flexGrow:1,overflow:"hidden",marginRight:t.spacing(1)}),layerName:(0,U.css)({fontWeight:t.typography.fontWeightMedium,color:t.colors.primary.text,cursor:"pointer",overflow:"hidden",marginLeft:t.spacing(.5)})});function Ro(t,e,n){let r=[];if(t)for(let a=t.elements.length;a--;a>=0){const i=t.elements[a],s={key:i.UID,title:i.getName(),selectable:!0,dataRef:i};i instanceof Qt&&(s.children=Ro(i,e,n)),r.push(s)}return r}function Y0(t,e){const n=t.node.key,r=t.dragNode.key,a=t.node.pos.split("-"),i=t.dropPosition-Number(a[a.length-1]),s=(c,u,d)=>{c.forEach((f,p,v)=>{if(f.key===u){d(f,p,v);return}f.children&&s(f.children,u,d)})},o=[...e];let l;if(s(o,r,(c,u,d)=>{d.splice(u,1),l=c}),i===0)s(o,n,c=>{c.children=c.children||[],c.children.unshift(l)});else{let c=[],u=0;s(o,n,(d,f,p)=>{c=p,u=f}),i===-1?c.splice(u,0,l):c.splice(u+1,0,l)}return o}let Pu=!0;const $0=({item:t})=>{const[e,n]=(0,y.useState)(Ro(t?.settings?.scene.root)),[r,a]=(0,y.useState)(!0),[i,s]=(0,y.useState)([]),[o,l]=(0,y.useState)([]),c=(0,St.l4)(),u=K0(c),d=(0,St.wW)(X0),f=c.colors.primary.border,{settings:p}=t,v=(0,y.useMemo)(()=>p?.selected?p.selected.map(R=>R?.getName()):[],[p?.selected]),h=(0,y.useMemo)(()=>p?.selected?p.selected.map(R=>R?.UID):[],[p?.selected]);if((0,y.useEffect)(()=>{n(Ro(t?.settings?.scene.root,v,f)),l(h),x()},[t?.settings?.scene.root,f,v,h]),!p)return y.createElement("div",null,"No settings");const g=p.layer;if(!g)return y.createElement("div",null,"Missing layer?");const m=(R,k)=>{Pu&&t.settings?.scene&&$o(t.settings.scene,k.node.dataRef)},E=()=>!0,b=R=>{const k=R.node.pos.split("-"),P=R.dropPosition-Number(k[k.length-1]),L=R.dragNode.dataRef,A=R.node.dataRef,I=Y0(R,e);n(I),A.parent?.scene.reorderElements(L,A,R.dropToGap,P)},C=R=>{s(R),a(!1)},D=R=>R.isLeaf?y.createElement(y.Fragment,null):y.createElement(yo.J,{name:"angle-right",title:"Node Icon",style:{transform:`rotate(${R.expanded?90:0}deg)`,fill:c.colors.text.primary}}),x=(R=!0)=>{Pu=R},S=()=>{g.scene.clearCurrentSelection()},M=R=>y.createElement(V0,{nodeData:R,setAllowSelection:x,settings:p}),w=()=>{g.scene?g.scene.frameSelection():console.warn("no scene!")},T=Mn(p.scene.shouldShowAdvancedTypes).options;return y.createElement(y.Fragment,null,y.createElement(lu.Global,{styles:u}),y.createElement(F0,{selectable:!0,onSelect:m,draggable:!0,defaultExpandAll:!0,autoExpandParent:r,showIcon:!1,allowDrop:E,onDrop:b,expandedKeys:i,onExpand:C,treeData:e,titleRender:M,switcherIcon:D,selectedKeys:o,multiple:!0}),y.createElement(De.Lh,{justify:"space-between"},y.createElement("div",{className:d.addLayerButton},y.createElement(au.f,{onChange:R=>Pa(R,g),options:T,label:"Add item"})),v.length>0&&y.createElement(Ir.zx,{size:"sm",variant:"secondary",onClick:S},"Clear selection"),v.length>1&&eu.config.featureToggles.canvasPanelNesting&&y.createElement(Ir.zx,{size:"sm",variant:"secondary",onClick:w},"Frame selection")))},X0=t=>({addLayerButton:(0,U.css)({marginLeft:"18px",minWidth:"150px"})});function Lu(t){const{selected:e,scene:n}=t;if(n.currentLayer||(n.currentLayer=n.root),e)for(const a of e){if(a instanceof Qt){n.currentLayer=a;break}if(a&&a.parent){n.currentLayer=a.parent;break}}const r=n.currentLayer.options||{elements:[]};return{category:["Layer"],path:"--",values:a=>({getValue:i=>(0,he.get)(r,i),onChange:(i,s)=>{if(i==="type"&&s){console.warn("unable to change layer type");return}const o=(0,Ea.hs)(r,i,s);n.currentLayer?.onChange(o),n.currentLayer?.updateData(n.context)}}),build:(a,i)=>{const s=n.currentLayer;s&&s.isRoot(),a.addCustomEditor({id:"content",path:"root",name:"Elements",editor:$0,settings:{scene:n,layer:n.currentLayer,selected:e}});const o={...i,options:r};Pr.addBackground(a,o),Pr.addBorder(a,o),s&&!s.isRoot()&&a.addCustomEditor({category:["Layout"],id:"content",path:"__",name:"Constraints",editor:ou,settings:{scene:t.scene,element:s}})}}}var Z0=G(70523),U0=G(94439);const j0=({onTabChange:t})=>{const[e,n]=(0,y.useState)(Le.SelectedElement),r=[{label:"Selected Element",value:Le.SelectedElement},{label:"Element Management",value:Le.ElementManagement}],a=i=>{t(i),n(i)};return y.createElement(y.Fragment,null,y.createElement(Z0.J,null,r.map((i,s)=>y.createElement(U0.O,{key:`${i.value}-${s}`,label:i.label,active:i.value===e,onChangeTab:()=>a(i.value)}))))};function Q0(){const t=(0,wn.Z)(Ar),e=t?.panel.context?.instanceState,n=(0,St.wW)(J0),[r,a]=(0,y.useState)(Le.SelectedElement),i=(0,y.useMemo)(()=>{const d=t?.panel,f=e;if(!f||!d)return new mo.j({id:"root",title:"root"});const p=v=>{r===Le.ElementManagement&&v.addNestedOptions(Lu(e));const h=f.selected;if(h?.length===1&&r===Le.SelectedElement){const g=h[0];g&&!(g instanceof Qt)&&v.addNestedOptions(su({category:[`Selected element (${g.options.name})`],element:g,scene:f.scene}))}Po(v)};return q0({options:d.props.options,onChange:d.props.onOptionsChange,data:d.props.data?.series},p)},[e,t,r]),s={marginLeft:15,marginTop:10},o=d=>{a(d)},l=Mn(e?.scene.shouldShowAdvancedTypes).options,c=e?.layer,u=e&&r===Le.SelectedElement&&e.selected.length===0;return y.createElement(y.Fragment,null,y.createElement("div",{style:s},i.items.map(d=>d.render())),y.createElement("div",{style:s},y.createElement(au.f,{onChange:d=>Pa(d,c),options:l,label:"Add item"})),y.createElement("div",{style:s},y.createElement(j0,{onTabChange:o}),i.categories.map(d=>Au(d)),u&&y.createElement("div",{className:n.selectElement},"Please select an element")))}function Au(t){return y.createElement(Xg.u,{...t.props,key:t.props.id},y.createElement("div",null,t.items.map(e=>e.render())),t.categories.map(e=>Au(e)))}function q0(t,e){const n={data:t.data??[],options:t.options},r=new mo.j({id:"root",title:"root"}),a=s=>{if(s?.length){const o=s[0];let l=r.categories.find(c=>c.props.id===o);return l||(l=new mo.j({id:o,title:o}),r.categories.push(l)),l}return r},i={getValue:s=>(0,he.get)(t.options,s),onChange:(s,o)=>{t.onChange((0,Ea.hs)(t.options,s,o))}};return(0,Zg.HZ)(e,i,a,n),r}const J0=t=>({selectElement:(0,U.css)({color:t.colors.text.secondary,padding:t.spacing(2)})}),Oo=10,Nu=32;function t1({onClose:t,id:e,scene:n}){const r=n.root.div?.getBoundingClientRect(),a=window.innerHeight,i=window.innerWidth,s=(0,y.useRef)(null),o=(0,St.wW)(e1),l="inlineEditPanel"+e.toString(),c={width:400,height:400},u=r?.width??c.width+Oo*2,d=r?.x??0+u-c.width-Oo,f=r?.y??0+Nu,p=nu.Z.getObject(l,{x:d,y:f,w:c.width,h:c.height}),[v,h]=(0,y.useState)({width:p.w,height:p.h}),[g,m]=(0,y.useState)({x:p.x,y:p.y});(0,y.useEffect)(()=>{const D=i-v.width-Oo,x=a-v.height-Nu;D<g.x&&D>0&&m({...g,x:D}),x<g.y&&x>0&&m({...g,y:x})},[a,i,g,v]);const E=(D,x)=>{let S=x.x<0?0:x.x,M=x.y<0?0:x.y;m({x:S,y:M}),C(S,M,v.width,v.height)},b=(D,x)=>{const{size:S}=x;h({width:S.width,height:S.height}),C(g.x,g.y,S.width,S.height)},C=(D,x,S,M)=>{nu.Z.setObject(l,{x:D,y:x,w:S,h:M})};return y.createElement(mn.h_,null,y.createElement("div",{className:o.draggableWrapper},y.createElement(Yg(),{handle:"strong",onStop:E,position:{x:g.x,y:g.y}},y.createElement($g.Resizable,{height:v.height,width:v.width,onResize:b},y.createElement("div",{className:o.inlineEditorContainer,style:{height:`${v.height}px`,width:`${v.width}px`},ref:s},y.createElement("strong",{className:o.inlineEditorHeader},y.createElement("div",{className:o.placeholder}),y.createElement("div",null,"Canvas Inline Editor"),y.createElement(ce.h,{name:"times",size:"xl",className:o.inlineEditorClose,onClick:t,tooltip:"Close inline editor"})),y.createElement("div",{className:o.inlineEditorContentWrapper},y.createElement("div",{className:o.inlineEditorContent},y.createElement(Q0,null))))))))}const e1=t=>({inlineEditorContainer:(0,U.css)({display:"flex",flexDirection:"column",background:t.components.panel.background,border:`1px solid ${t.colors.border.weak}`,boxShadow:t.shadows.z3,zIndex:1e3,opacity:1,minWidth:"400px"}),draggableWrapper:(0,U.css)({width:0,height:0}),inlineEditorHeader:(0,U.css)({display:"flex",alignItems:"center",justifyContent:"center",background:t.colors.background.canvas,borderBottom:`1px solid ${t.colors.border.weak}`,height:"40px",cursor:"move"}),inlineEditorContent:(0,U.css)({whiteSpace:"pre-wrap",padding:"10px"}),inlineEditorClose:(0,U.css)({marginLeft:"auto"}),placeholder:(0,U.css)({width:"24px",height:"24px",visibility:"hidden",marginRight:"auto"}),inlineEditorContentWrapper:(0,U.css)({overflow:"scroll"})});let Cn=[],fr,xa=!1,Sa=!1;const Ar=new ns.t(1);class Iu extends y.Component{constructor(e){super(e),this.subs=new Yd.w0,this.needsReload=!1,this.isEditing=as.E1.getSearchObject().editPanel!==void 0,this.onUpdateScene=n=>{const{onOptionsChange:r,options:a}=this.props;r({...a,root:n}),this.setState({refresh:this.state.refresh+1}),Ar.next({panel:this})},this.openInlineEdit=()=>{if(xa){this.forceUpdate(),this.setActivePanel();return}this.setActivePanel(),this.setState({openInlineEdit:!0}),xa=!0},this.openSetBackground=n=>{if(Sa){this.forceUpdate(),this.setActivePanel();return}this.setActivePanel(),this.setState({openSetBackground:!0}),this.setState({contextMenuAnchorPoint:n}),Sa=!0},this.tooltipCallback=n=>{this.scene.tooltip=n,this.forceUpdate()},this.moveableActionCallback=n=>{this.setState({moveableAction:n}),this.forceUpdate()},this.closeInlineEdit=()=>{this.setState({openInlineEdit:!1}),xa=!1},this.closeSetBackground=()=>{this.setState({openSetBackground:!1}),Sa=!1},this.setActivePanel=()=>{fr=this,Ar.next({panel:this})},this.renderInlineEdit=()=>y.createElement(t1,{onClose:()=>this.closeInlineEdit(),id:this.props.id,scene:this.scene}),this.renderSetBackground=()=>y.createElement(Wg,{onClose:()=>this.closeSetBackground(),scene:this.scene,anchorPoint:this.state.contextMenuAnchorPoint}),this.state={refresh:0,openInlineEdit:!1,openSetBackground:!1,contextMenuAnchorPoint:{x:0,y:0},moveableAction:!1},this.scene=new Gg(this.props.options.root,this.props.options.inlineEditing,this.props.options.showAdvancedTypes,this.onUpdateScene,this),this.scene.updateSize(e.width,e.height),this.scene.updateData(e.data),this.scene.inlineEditingCallback=this.openInlineEdit,this.scene.setBackgroundCallback=this.openSetBackground,this.scene.tooltipCallback=this.tooltipCallback,this.scene.moveableActionCallback=this.moveableActionCallback,this.subs.add(this.props.eventBus.subscribe(ru.xF,n=>{this.scene.clearCurrentSelection(),this.closeInlineEdit()})),this.subs.add(this.props.eventBus.subscribe(ru.Yr,n=>{this.props.id===n.payload&&(this.needsReload=!0,this.scene.clearCurrentSelection())}))}componentDidMount(){fr=this,Ar.next({panel:this}),this.panelContext=this.context,this.panelContext.onInstanceStateChange&&(this.panelContext.onInstanceStateChange({scene:this.scene,layer:this.scene.root}),this.subs.add(this.scene.selection.subscribe({next:e=>{e.length&&(fr=this,Ar.next({panel:this})),Cn.forEach(n=>{n!==fr&&(n.scene.clearCurrentSelection(!0),n.scene.connections.select(void 0))}),this.panelContext?.onInstanceStateChange({scene:this.scene,selected:e,layer:this.scene.root})}})),this.subs.add(this.scene.connections.selection.subscribe({next:e=>{this.context.instanceState&&(this.panelContext?.onInstanceStateChange({scene:this.scene,selected:this.context.instanceState.selected,selectedConnection:e,layer:this.scene.root}),e&&(fr=this,Ar.next({panel:this})),Cn.forEach(n=>{n!==fr&&(n.scene.clearCurrentSelection(!0),n.scene.connections.select(void 0))}),setTimeout(()=>{this.forceUpdate()}))}}))),Cn.push(this)}componentWillUnmount(){this.scene.subscription.unsubscribe(),this.subs.unsubscribe(),xa=!1,Sa=!1,Cn=Cn.filter(e=>e.props.id!==fr?.props.id)}shouldComponentUpdate(e,n){const{width:r,height:a,data:i,options:s}=this.props;let o=!1;(r!==e.width||a!==e.height)&&(this.scene.updateSize(e.width,e.height),o=!0),i!==e.data&&!this.scene.ignoreDataUpdate&&(this.scene.updateData(e.data),o=!0),s!==e.options&&!this.scene.ignoreDataUpdate&&(this.scene.updateData(e.data),o=!0),this.state.refresh!==n.refresh&&(o=!0),this.state.openInlineEdit!==n.openInlineEdit&&(o=!0),this.state.openSetBackground!==n.openSetBackground&&(o=!0),this.state.moveableAction!==n.moveableAction&&(o=!0);const l=this.props.options.inlineEditing!==e.options.inlineEditing,c=this.props.options.showAdvancedTypes!==e.options.showAdvancedTypes;return(this.needsReload||l||c)&&(l&&this.scene.revId++,this.needsReload=!1,this.scene.load(e.options.root,e.options.inlineEditing,e.options.showAdvancedTypes),this.scene.updateSize(e.width,e.height),this.scene.updateData(e.data),o=!0),o}render(){return y.createElement(y.Fragment,null,this.scene.render(),this.state.openInlineEdit&&this.renderInlineEdit(),this.state.openSetBackground&&this.renderSetBackground())}}Iu.contextType=Kr.bb;function r1(t){return{category:t.category,path:"--",values:e=>({getValue:n=>(0,he.get)(t.connection.info,n),onChange:(n,r)=>{let a=t.connection.info;a=(0,Ea.hs)(a,n,r),t.scene.connections.onChange(t.connection,a)}}),build:(e,n)=>{const r={...n,options:t.connection.info};Pr.addColor(e,r),Pr.addSize(e,r)}}}const n1=t=>{if((t?.pluginVersion??"")===""){const n=t.options?.root;if(n?.elements)for(const r of n.elements)r.type==="text-box"&&(r.type="rectangle")}return t.options},Po=t=>{t.addBooleanSwitch({path:"inlineEditing",name:"Inline editing",description:"Enable editing the panel directly",defaultValue:!0}),t.addBooleanSwitch({path:"showAdvancedTypes",name:"Experimental element types",description:"Enable selection of experimental element types",defaultValue:!0})},a1=new wa.c(Iu).setNoPadding().useFieldConfig({standardOptions:{[ka.qb.Mappings]:{settings:{icon:!0}}}}).setMigrationHandler(n1).setPanelOptions((t,e)=>{const n=e.instanceState;if(Po(t),n){t.addNestedOptions(Lu(n));const r=n.selected,a=n.selectedConnection;if(r?.length===1){const i=r[0];i instanceof Qt||t.addNestedOptions(su({category:[`Selected element (${i.options.name})`],element:i,scene:n.scene}))}a&&t.addNestedOptions(r1({category:["Selected connection"],connection:a,scene:n.scene}))}})}}]);

//# sourceMappingURL=canvasPanel.e75a5f6d03dfb3878dc8.js.map